{"version":3,"sources":["../node_modules/@arcgis/core/tasks/operations/queryAttachments.js","../node_modules/@arcgis/core/layers/support/AttachmentInfo.js","../node_modules/@arcgis/core/layers/support/exifUtils.js","../node_modules/@arcgis/core/tasks/operations/pbfJSONFeatureSet.js","../node_modules/@arcgis/core/tasks/operations/queryRelatedRecords.js","../node_modules/@arcgis/core/tasks/QueryTask.js"],"names":["n","t","o","toJSON","attachmentTypes","join","keywords","globalIds","objectIds","size","a","e","r","parentObjectId","c","parentGlobalId","i","attachmentInfos","id","l","m","s","fromJSON","set","url","push","query","f","path","p","1","rotation","mirrored","2","3","4","5","6","7","8","d","contentType","exifInfo","globalId","name","this","exifName","tagName","u","find","tags","value","type","String","prototype","readOnly","dependsOn","json","read","originPosition","translate","scale","h","options","geometryTypes","previousCoordinate","transform","applyTransform","lengths","currentLengthIndex","toAddInCurrentPath","vertexDimension","coordinateBuffer","coordinateBufferPtr","AttributesConstructor","fields","features","length","hasZ","geometryType","sourceSpatialReference","spatialReference","geometry","map","deriveApplyTransform","hasM","addCoordinate","addCoordinatePoint","createGeometry","createPointGeometry","addCoordinatePolygon","createPolygonGeometry","addCoordinatePolyline","createPolylineGeometry","addCoordinateMultipoint","createMultipointGeometry","attributes","queryGeometry","queryGeometryType","clone","x","y","z","dehydratedAddPointsCoordinate","paths","rings","points","transformPathLikeValue","Array","orderByFields","outFields","returnCountOnly","indexOf","outSpatialReference","outSR","wkid","JSON","stringify","dynamicDataSource","layer","source","data","relatedRecordGroups","objectIdFieldName","relatedRecords","objectId","hasOwnProperty","count","D","format","gdbVersion","executeJSON","then","requestOptions","_normalizeQuery","outStatistics","quantizationParameters","parsedUrl","_normalizeFields","extent","S","from","g","Object","keys","forEach","j","b","attachmentGroups","fieldsIndex","get","assign","O"],"mappings":"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","file":"static/js/4.c092a512.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{addProxy as t}from\"../../core/urlUtils.js\";import{addTokenParameter as o}from\"../../kernel.js\";import e from\"../../request.js\";import{mapParameters as r}from\"./urlUtils.js\";import s from\"../../layers/support/AttachmentInfo.js\";function n(t){const o=t.toJSON();return o.attachmentTypes&&(o.attachmentTypes=o.attachmentTypes.join(\",\")),o.keywords&&(o.keywords=o.keywords.join(\",\")),o.globalIds&&(o.globalIds=o.globalIds.join(\",\")),o.objectIds&&(o.objectIds=o.objectIds.join(\",\")),o.size&&(o.size=o.size.join(\",\")),o}function a(e,r){const n={};for(const a of e){const{parentObjectId:e,parentGlobalId:c,attachmentInfos:i}=a;for(const a of i){const{id:i}=a,l=t(o(`${r}/${e}/attachments/${i}`)),m=s.fromJSON(a);m.set({url:l,parentObjectId:e,parentGlobalId:c}),n[e]?n[e].push(m):n[e]=[m]}}return n}function c(t,o,s){let a={query:r({...t.query,f:\"json\",...n(o)})};return s&&(a={...s,...a,query:{...s.query,...a.query}}),e(t.path+\"/queryAttachments\",a)}export{c as executeAttachmentQuery,a as processAttachmentQueryResult};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import{Integer as t}from\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as i}from\"../../core/JSONSupport.js\";import{getExifValue as n}from\"./exifUtils.js\";var s;const p={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let d=s=class extends i{constructor(o){super(o),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:o}=this,t=n({exifName:\"Exif IFD0\",tagName:\"Orientation\",exifInfo:o});return p[t]||null}clone(){return new s({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};o([r({type:String})],d.prototype,\"contentType\",void 0),o([r()],d.prototype,\"exifInfo\",void 0),o([r({readOnly:!0,dependsOn:[\"exifInfo\"]})],d.prototype,\"orientationInfo\",null),o([r({type:t})],d.prototype,\"id\",void 0),o([r({type:String})],d.prototype,\"globalId\",void 0),o([r({type:String})],d.prototype,\"keywords\",void 0),o([r({type:String})],d.prototype,\"name\",void 0),o([r({json:{read:!1}})],d.prototype,\"parentGlobalId\",void 0),o([r({json:{read:!1}})],d.prototype,\"parentObjectId\",void 0),o([r({type:t})],d.prototype,\"size\",void 0),o([r({json:{read:!1}})],d.prototype,\"url\",void 0),d=s=o([e(\"esri.layers.support.AttachmentInfo\")],d);var l=d;export default l;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction n(n){const{exifInfo:t,exifName:e,tagName:a}=n;if(!t||!e||!a)return null;const u=t.find((n=>n.name===e));return u?function(n){const{tagName:t,tags:e}=n;if(!e||!t)return null;const a=e.find((n=>n.name===t));return a&&a.value||null}({tagName:a,tags:u.tags}):null}export{n as getExifValue};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{neverReached as e}from\"../../core/compilerUtils.js\";import{unquantizeOptimizedGeometry as t,convertToGeometry as r}from\"../../layers/graphics/featureConversionUtils.js\";import{getGeometryZScaler as s}from\"./zscale.js\";function i(e,t){return t}function o(e,t,r,s){switch(r){case 0:return u(e,t+s,0);case 1:return\"lowerLeft\"===e.originPosition?u(e,t+s,1):function({translate:e,scale:t},r,s){return e[s]-r*t[s]}(e,t+s,1)}}function n(e,t,r,s){switch(r){case 2:return u(e,t,2);default:return o(e,t,r,s)}}function a(e,t,r,s){switch(r){case 2:return u(e,t,3);default:return o(e,t,r,s)}}function h(e,t,r,s){switch(r){case 3:return u(e,t,3);default:return n(e,t,r,s)}}function u({translate:e,scale:t},r,s){return e[s]+r*t[s]}class d{constructor(e){this.options=e,this.geometryTypes=[\"esriGeometryPoint\",\"esriGeometryMultipoint\",\"esriGeometryPolyline\",\"esriGeometryPolygon\"],this.previousCoordinate=[0,0],this.transform=null,this.applyTransform=i,this.lengths=[],this.currentLengthIndex=0,this.toAddInCurrentPath=0,this.vertexDimension=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,this.AttributesConstructor=function(){}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this.options.applyTransform&&(e.transform=null),this.AttributesConstructor=function(){},this.coordinateBuffer=null,this.lengths.length=0,!e.hasZ)return;const t=s(e.geometryType,this.options.sourceSpatialReference,e.spatialReference);if(t)for(const r of e.features)t(r.geometry)}createSpatialReference(){return{}}addField(e,t){e.fields.push(t);const r=e.fields.map((e=>e.name));this.AttributesConstructor=function(){for(const e of r)this[e]=null}}addFeature(e,t){e.features.push(t)}prepareFeatures(t){switch(this.transform=t.transform,this.options.applyTransform&&t.transform&&(this.applyTransform=this.deriveApplyTransform(t)),this.vertexDimension=2,t.hasZ&&this.vertexDimension++,t.hasM&&this.vertexDimension++,t.geometryType){case\"esriGeometryPoint\":this.addCoordinate=(e,t,r)=>this.addCoordinatePoint(e,t,r),this.createGeometry=e=>this.createPointGeometry(e);break;case\"esriGeometryPolygon\":this.addCoordinate=(e,t,r)=>this.addCoordinatePolygon(e,t,r),this.createGeometry=e=>this.createPolygonGeometry(e);break;case\"esriGeometryPolyline\":this.addCoordinate=(e,t,r)=>this.addCoordinatePolyline(e,t,r),this.createGeometry=e=>this.createPolylineGeometry(e);break;case\"esriGeometryMultipoint\":this.addCoordinate=(e,t,r)=>this.addCoordinateMultipoint(e,t,r),this.createGeometry=e=>this.createMultipointGeometry(e);break;default:e(t.geometryType)}}createFeature(){return this.lengths.length=0,this.currentLengthIndex=0,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,{attributes:new this.AttributesConstructor}}addLength(e,t,r){0===this.lengths.length&&(this.toAddInCurrentPath=t),this.lengths.push(t)}addQueryGeometry(e,s){const{queryGeometry:i,queryGeometryType:o}=s,n=t(i.clone(),i,!1,!1,this.transform),a=r(n,o,!1,!1);e.queryGeometryType=o,e.queryGeometry={...a}}createPointGeometry(e){const t={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(t.z=0),e.hasM&&(t.m=0),t}addCoordinatePoint(e,t,r){switch(t=this.applyTransform(this.transform,t,r,0),r){case 0:e.x=t;break;case 1:e.y=t;break;case 2:\"z\"in e?e.z=t:e.m=t;break;case 3:e.m=t}}transformPathLikeValue(e,t){let r=0;return t<=1&&(r=this.previousCoordinate[t],this.previousCoordinate[t]+=e),this.applyTransform(this.transform,e,t,r)}addCoordinatePolyline(e,t,r){this.dehydratedAddPointsCoordinate(e.paths,t,r)}addCoordinatePolygon(e,t,r){this.dehydratedAddPointsCoordinate(e.rings,t,r)}addCoordinateMultipoint(e,t,r){0===r&&e.points.push([]);const s=this.transformPathLikeValue(t,r);e.points[e.points.length-1].push(s)}createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}dehydratedAddPointsCoordinate(e,t,r){0===r&&0==this.toAddInCurrentPath--&&(e.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);const s=this.transformPathLikeValue(t,r),i=e[e.length-1];0===r&&(this.coordinateBufferPtr=0,this.coordinateBuffer=new Array(this.vertexDimension),i.push(this.coordinateBuffer)),this.coordinateBuffer[this.coordinateBufferPtr++]=s}deriveApplyTransform(e){const{hasZ:t,hasM:r}=e;return t&&r?h:t?n:r?a:o}}export{d as JSONFeatureSetParserContext};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import{mapParameters as t}from\"./urlUtils.js\";function o(e,t){const o=e.toJSON();return o.objectIds&&(o.objectIds=o.objectIds.join(\",\")),o.orderByFields&&(o.orderByFields=o.orderByFields.join(\",\")),!o.outFields||null!=t&&t.returnCountOnly?delete o.outFields:-1!==o.outFields.indexOf(\"*\")?o.outFields=\"*\":o.outFields=o.outFields.join(\",\"),o.outSpatialReference&&(o.outSR=o.outSR.wkid||JSON.stringify(o.outSR.toJSON()),delete o.outSpatialReference),o.dynamicDataSource&&(o.layer=JSON.stringify({source:o.dynamicDataSource}),delete o.dynamicDataSource),o}async function r(e,t,o){const r=await a(e,t,o),n=r.data,d=n.geometryType,s=n.spatialReference,c={};for(const e of n.relatedRecordGroups){const t={fields:void 0,objectIdFieldName:void 0,geometryType:d,spatialReference:s,hasZ:!!n.hasZ,hasM:!!n.hasM,features:e.relatedRecords};if(null!=e.objectId)c[e.objectId]=t;else for(const o in e)e.hasOwnProperty(o)&&\"relatedRecords\"!==o&&(c[e[o]]=t)}return{...r,data:c}}async function n(e,t,o){const r=await a(e,t,o,{returnCountOnly:!0}),n=r.data,d={};for(const e of n.relatedRecordGroups)null!=e.objectId&&(d[e.objectId]=e.count);return{...r,data:d}}async function a(r,n,a={},d){const s=t({...r.query,f:\"json\",...d,...o(n,d)});return e(r.path+\"/queryRelatedRecords\",{...a,query:{...a.query,...s}})}export{r as executeRelationshipQuery,n as executeRelationshipQueryForCount,o as toQueryStringParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import e from\"../core/has.js\";import{isSome as r}from\"../core/maybe.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import i from\"../geometry/Extent.js\";import\"../geometry.js\";import a from\"./support/FeatureSet.js\";import{D as n}from\"../chunks/DataLayerSource.js\";import c from\"./support/AttachmentQuery.js\";import u from\"./support/Query.js\";import p from\"./support/RelationshipQuery.js\";import m from\"./Task.js\";import{JSONFeatureSetParserContext as d}from\"./operations/pbfJSONFeatureSet.js\";import{executeQueryPBF as h,executeQuery as l,executeQueryForCount as f,executeQueryForExtent as y,executeQueryForIds as S}from\"./operations/query.js\";import{executeAttachmentQuery as j,processAttachmentQueryResult as b}from\"./operations/queryAttachments.js\";import{executeRelationshipQuery as g,executeRelationshipQueryForCount as x}from\"./operations/queryRelatedRecords.js\";let D=class extends m{constructor(t){super(t),this.dynamicDataSource=null,this.format=\"json\",this.gdbVersion=null,this.sourceSpatialReference=null}execute(t,e){return this.executeJSON(t,e).then((t=>a.fromJSON(t)))}async executeJSON(t,r){var o;const s={...this.requestOptions,...r},i=this._normalizeQuery(t),a=null!=(null==(o=t.outStatistics)?void 0:o[0]),n=e(\"featurelayer-pbf-statistics\"),c=!a||n;let u;if(\"pbf\"===this.format&&c){const t=!i.quantizationParameters;try{u=(await h(this.parsedUrl,i,new d({sourceSpatialReference:this.sourceSpatialReference,applyTransform:t}),s)).data}catch(t){if(\"query:parsing-pbf\"!==t.name)throw t;this.format=\"json\"}}if(\"json\"===this.format||!c){u=(await l(this.parsedUrl,i,this.sourceSpatialReference,s)).data}return this._normalizeFields(u.fields),u}executeForCount(t,e){return f(this.parsedUrl,this._normalizeQuery(t),{...this.requestOptions,...e}).then((t=>t.data.count))}executeForExtent(t,e){return y(this.parsedUrl,this._normalizeQuery(t),{...this.requestOptions,...e}).then((t=>({count:t.data.count,extent:i.fromJSON(t.data.extent)})))}executeForIds(t,e){return S(this.parsedUrl,this._normalizeQuery(t),{...this.requestOptions,...e}).then((t=>t.data.objectIds))}executeRelationshipQuery(t,e){return t=p.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),g(this.parsedUrl,t,{...this.requestOptions,...e}).then((t=>{const e=t.data,r={};return Object.keys(e).forEach((t=>r[t]=a.fromJSON(e[t]))),r}))}executeRelationshipQueryForCount(t,e){return t=p.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),x(this.parsedUrl,t,{...this.requestOptions,...e}).then((t=>t.data))}executeAttachmentQuery(t,e){return j(this.parsedUrl,c.from(t),{...this.requestOptions,...e}).then((t=>b(t.data.attachmentGroups,this.parsedUrl.path)))}_normalizeQuery(t){const e=u.from(t);if(!this.gdbVersion&&!this.dynamicDataSource)return e;const r=e===t?e.clone():e;return r.gdbVersion=t.gdbVersion||this.gdbVersion,r.dynamicDataSource=t.dynamicDataSource?n.from(t.dynamicDataSource):this.dynamicDataSource,r}_normalizeFields(t){if(r(this.fieldsIndex)&&r(t))for(const e of t){const t=this.fieldsIndex.get(e.name);t&&Object.assign(e,t.toJSON())}}};t([o({type:n})],D.prototype,\"dynamicDataSource\",void 0),t([o()],D.prototype,\"fieldsIndex\",void 0),t([o()],D.prototype,\"format\",void 0),t([o()],D.prototype,\"gdbVersion\",void 0),t([o()],D.prototype,\"sourceSpatialReference\",void 0),D=t([s(\"esri.tasks.QueryTask\")],D);var O=D;export default O;\n"],"sourceRoot":""}