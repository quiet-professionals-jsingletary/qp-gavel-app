(this["webpackJsonpqp-ampd-app"]=this["webpackJsonpqp-ampd-app"]||[]).push([[46],{1058:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(46);function a(e,t,n){var a=e.byteLength/(4*t),f=new Uint32Array(e,0,a*t),s=new Uint32Array(a),l=n&&n.minReduction||0,v=n&&n.originalIndices||null,g=n&&n.componentOffsets||null,d=0;if(g)for(var p=0;p<g.length-1;p++){var b=g[p+1]-g[p];b>d&&(d=b)}else d=a;var h=Math.floor(1.1*d)+1;(null==u||u.length<2*h)&&(u=new Uint32Array(Object(r.n)(2*h)));for(var m=0;m<2*h;m++)u[m]=0;for(var w=0,O=!!g&&!!v,j=O?v.length:a,y=O?new Uint32Array(v.length):null,A=1.96,I=0!==l?Math.ceil(7.84*A/(l*l)*l*(1-l)):j,k=1,S=g?g[1]:j,U=0;U<j;U++){if(U===I){var N=1-w/U;if(N+A*Math.sqrt(N*(1-N)/U)<l)return null;I*=2}if(U===S){for(var V=0;V<2*h;V++)u[V]=0;if(v)for(var x=g[k-1];x<g[k];x++)y[x]=s[v[x]];S=g[++k]}for(var E=O?v[U]:U,D=E*t,M=c(f,D,t),L=M%h,W=w;0!==u[2*L+1];){if(u[2*L]===M){var B=u[2*L+1]-1;if(i(f,D,B*t,t)){W=s[B];break}}++L>=h&&(L-=h)}W===w&&(u[2*L]=M,u[2*L+1]=E+1,w++),s[E]=W}if(0!==l&&1-w/a<l)return null;if(O){for(var F=g[k-1];F<y.length;F++)y[F]=s[v[F]];s=y}var q=new Uint32Array(t*w);w=0;for(var C=0;C<j;C++)s[C]===w&&(o(f,(O?v[C]:C)*t,q,w*t,t),w++);if(v&&!O){for(var P=new Uint32Array(v.length),_=0;_<P.length;_++)P[_]=s[v[_]];s=P}return{buffer:q.buffer,indices:s,uniqueCount:w}}function i(e,t,n,r){for(var a=0;a<r;a++)if(e[t+a]!==e[n+a])return!1;return!0}function o(e,t,n,r,a){for(var i=0;i<a;i++)n[r+i]=e[t+i]}function c(e,t,n){for(var r=0,a=0;a<n;a++)r=(r=e[t+a]+r|0)+(r<<11)+(r>>>2)|0;return r>>>0}var u=null},1207:function(e,t,n){"use strict";n.r(t),n.d(t,"work",(function(){return H})),n.d(t,"wrappedWork",(function(){return T}));var r=n(7),a=n.n(r),i=n(16),o=n(1058),c=n(588),u=n(204),f=Object(u.a)().vec3f("position").u16("componentIndex").u16("_padding"),s=Object(u.a)().vec2u8("sideness"),l=(Object(c.a)(s),Object(u.a)().vec3f("position0").vec3f("position1").u16("componentIndex").u8("variantOffset",{glNormalized:!0}).u8("variantStroke").u8("variantExtension",{glNormalized:!0}).u8("_padding",{glPadding:!0}).u16("_padding2",{glPadding:!0})),v=l.clone().vec3f("normal"),g=l.clone().vec3f("normalA").vec3f("normalB"),d=n(2),p=n(3),b=n(617),h=n(24),m=n(9),w=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,[{key:"updateSettings",value:function(e){this.settings=e}},{key:"write",value:function(e,t,n){var r=function(e){var t=O;t[0]=e.position0[0],t[1]=e.position0[1],t[2]=e.position0[2],t[3]=e.position1[0],t[4]=e.position1[1],t[5]=e.position1[2],y[0]=5381;for(var n=0;n<j.length;n++)y[0]=31*y[0]+j[n];return y[0]}(n);A.seed=r;var a=A.getIntRange(0,255),i=A.getIntRange(0,this.settings.variants-1),o=A.getFloat(),c=255*(.5*function(e,t){var n=e<0?-1:1;return Math.pow(Math.abs(e),1.2)*n}(-(1-Math.min(o/.7,1))+Math.max(0,o-.7)/(1-.7))+.5);e.position0.setVec(t,n.position0),e.position1.setVec(t,n.position1),e.componentIndex.set(t,n.componentIndex),e.variantOffset.set(t,a),e.variantStroke.set(t,i),e.variantExtension.set(t,c)}},{key:"trim",value:function(e,t){return e.slice(0,t)}}]),e}(),O=new Float32Array(6),j=new Uint32Array(O.buffer),y=new Uint32Array(1),A=new b.a,I=function(){function e(){Object(d.a)(this,e),this.commonWriter=new w}return Object(p.a)(e,[{key:"updateSettings",value:function(e){this.commonWriter.updateSettings(e)}},{key:"allocate",value:function(e){return v.createBuffer(e)}},{key:"write",value:function(e,t,n){this.commonWriter.write(e,t,n),Object(m.c)(S,n.faceNormal0,n.faceNormal1),Object(m.o)(S,S),e.normal.setVec(t,S)}},{key:"trim",value:function(e,t){return this.commonWriter.trim(e,t)}}]),e}();I.Layout=v,I.glLayout=Object(c.a)(v,{divisor:1});var k=function(){function e(){Object(d.a)(this,e),this.commonWriter=new w}return Object(p.a)(e,[{key:"updateSettings",value:function(e){this.commonWriter.updateSettings(e)}},{key:"allocate",value:function(e){return g.createBuffer(e)}},{key:"write",value:function(e,t,n){this.commonWriter.write(e,t,n),e.normalA.setVec(t,n.faceNormal0),e.normalB.setVec(t,n.faceNormal1)}},{key:"trim",value:function(e,t){return this.commonWriter.trim(e,t)}}]),e}();k.Layout=g,k.glLayout=Object(c.a)(g,{divisor:1});var S=Object(h.e)(),U=n(10),N=n(111);function V(e,t){return t.push(e.buffer),{buffer:e.buffer,layout:x(e.layout)}}function x(e){var t=new Array;return e.fields.forEach((function(e,n){var r=Object(U.a)(Object(U.a)({},e),{},{constructor:D(e.constructor)});t.push([n,r])})),{stride:e.stride,fields:t,fieldNames:e.fieldNames}}var E=[N.a,N.m,N.u,N.C,N.f,N.h,N.b,N.n,N.v,N.D,N.g,N.i,N.l,N.t,N.B,N.J,N.j,N.r,N.z,N.H,N.k,N.s,N.A,N.I,N.e,N.q,N.y,N.G,N.c,N.o,N.w,N.E,N.d,N.p,N.x,N.F];function D(e){return"".concat(e.ElementType,"_").concat(e.ElementCount)}var M=new Map;function L(e,t){for(var n=e.length/3,r=new Uint32Array(t+1),a=new Uint32Array(t+1),i=function(e,t){e<t?r[e+1]++:a[t+1]++},o=0;o<n;o++){var c=e[3*o],u=e[3*o+1],f=e[3*o+2];i(c,u),i(u,f),i(f,c)}for(var s=0,l=0,v=0;v<t;v++){var g=r[v+1],d=a[v+1];r[v+1]=s,a[v+1]=l,s+=g,l+=d}for(var p=new Uint32Array(6*n),b=r[t],h=function(e,t,n){if(e<t){var i=r[e+1]++;p[2*i]=t,p[2*i+1]=n}else{var o=a[t+1]++;p[2*b+2*o]=e,p[2*b+2*o+1]=n}},m=0;m<n;m++){var w=e[3*m],O=e[3*m+1],j=e[3*m+2];h(w,O,m),h(O,j,m),h(j,w,m)}for(var y=function(e,t){for(var n=2*e,r=t-e,a=1;a<r;a++){for(var i=p[n+2*a],o=p[n+2*a+1],c=a-1;c>=0&&p[n+2*c]>i;c--)p[n+2*c+2]=p[n+2*c],p[n+2*c+3]=p[n+2*c+1];p[n+2*c+2]=i,p[n+2*c+3]=o}},A=0;A<t;A++)y(r[A],r[A+1]),y(b+a[A],b+a[A+1]);for(var I=new Int32Array(3*n),k=function(t,n){return t===e[3*n]?0:t===e[3*n+1]?1:t===e[3*n+2]?2:-1},S=function(e,t){var n=k(e,t);I[3*t+n]=-1},U=function(e,t,n,r){var a=k(e,t);I[3*t+a]=r;var i=k(n,r);I[3*r+i]=t},N=0;N<t;N++){for(var V=r[N],x=r[N+1],E=a[N],D=a[N+1];V<x&&E<D;){var M=p[2*V],L=p[2*b+2*E];M===L?(U(N,p[2*V+1],L,p[2*b+2*E+1]),V++,E++):M<L?(S(N,p[2*V+1]),V++):(S(L,p[2*b+2*E+1]),E++)}for(;V<x;)S(N,p[2*V+1]),V++;for(;E<D;)S(p[2*b+2*E],p[2*b+2*E+1]),E++}return I}E.forEach((function(e){return M.set(D(e),e)}));var W=n(109),B=n(153),F=n(46),q=n(293);function C(e,t){return e.cosAngle<t}function P(e,t){return e.cosAngle>t}function _(e,t){var n=Object(F.b)(e.cosAngle),r=z.fwd,a=z.ortho;return Object(q.e)(r,e.position1,e.position0),n*(Object(m.e)(Object(m.d)(a,e.faceNormal0,e.faceNormal1),r)>0?-1:1)>t}var z={edge:{position0:Object(h.e)(),position1:Object(h.e)(),faceNormal0:Object(h.e)(),faceNormal1:Object(h.e)(),componentIndex:0,cosAngle:0},ortho:Object(h.e)(),fwd:Object(h.e)()},J={v0:Object(h.e)(),v1:Object(h.e)(),v2:Object(h.e)()},R={anglePlanar:4,angleSignificantEdge:35};function T(e){return G.apply(this,arguments)}function G(){return(G=Object(i.a)(a.a.mark((function e(t){var n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){return{data:f.createView(e.dataBuffer),originalIndices:"Uint32Array"===e.originalIndicesType?new Uint32Array(e.originalIndicesBuffer):"Uint16Array"===e.originalIndicesType?new Uint16Array(e.originalIndicesBuffer):void 0,writerSettings:e.writerSettings,skipDeduplicate:e.skipDeduplicate}}(t),r=H(n),i=[n.data.buffer],e.abrupt("return",{result:function(e,t){return t.push(e.regular.lodInfo.lengths.buffer),t.push(e.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:V(e.regular.instancesData,t),lodInfo:{lengths:e.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:V(e.silhouette.instancesData,t),lodInfo:{lengths:e.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:e.averageEdgeLength}}(r,i),transferList:i});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){var t=function(e,t,n){if(t&&n)return{faces:n,neighbors:L(n,e.count),vertices:e};var r=Object(o.a)(e.buffer,e.stride/4,{originalIndices:n}),a=L(r.indices,r.uniqueCount);return{faces:r.indices,neighbors:a,vertices:f.createView(r.buffer)}}(e.data,e.skipDeduplicate,e.originalIndices);return K.updateSettings(e.writerSettings),Q.updateSettings(e.writerSettings),function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:R,a=e.vertices.position,i=e.vertices.componentIndex,o=Object(F.f)(r.anglePlanar),c=Object(F.f)(r.angleSignificantEdge),u=Math.cos(c),f=Math.cos(o),s=z.edge,l=s.position0,v=s.position1,g=s.faceNormal0,d=s.faceNormal1,p=function(e){for(var t=e.faces.length/3,n=e.vertices.position,r=e.faces,a=J.v0,i=J.v1,o=J.v2,c=new Float32Array(3*t),u=0;u<t;u++){var f=r[3*u+0],s=r[3*u+1],l=r[3*u+2];n.getVec(f,a),n.getVec(s,i),n.getVec(l,o),Object(m.g)(i,i,a),Object(m.g)(o,o,a),Object(m.d)(a,i,o),Object(m.o)(a,a),c[3*u+0]=a[0],c[3*u+1]=a[1],c[3*u+2]=a[2]}return c}(e),b=function(e){for(var t=e.faces.length/3,n=e.faces,r=e.neighbors,a=0,i=0;i<t;i++){var o=r[3*i+0],c=r[3*i+1],u=r[3*i+2],f=n[3*i+0],s=n[3*i+1],l=n[3*i+2];a+=-1===o||f<s?1:0,a+=-1===c||s<l?1:0,a+=-1===u||l<f?1:0}for(var v=new Int32Array(4*a),g=0,d=0;d<t;d++){var p=r[3*d+0],b=r[3*d+1],h=r[3*d+2],m=n[3*d+0],w=n[3*d+1],O=n[3*d+2];(-1===p||m<w)&&(v[g++]=m,v[g++]=w,v[g++]=d,v[g++]=p),(-1===b||w<O)&&(v[g++]=w,v[g++]=O,v[g++]=d,v[g++]=b),(-1===h||O<m)&&(v[g++]=O,v[g++]=m,v[g++]=d,v[g++]=h)}return v}(e),h=b.length/4,w=t.allocate(h),O=0,j=h,y=n.allocate(j),A=0,I=0,k=0,S=Object(B.f)(0,h),U=new Float32Array(h);Object(W.b)(U,(function(e,t,n){a.getVec(b[4*t+0],l),a.getVec(b[4*t+1],v),n[t]=Object(m.l)(l,v)})),S.sort((function(e,t){return U[t]-U[e]}));for(var N=new Array,V=new Array,x=0;x<h;x++){var E=S[x],D=U[E],M=b[4*E+0],L=b[4*E+1],q=b[4*E+2],T=b[4*E+3],G=-1===T;if(a.getVec(M,l),a.getVec(L,v),G)Object(m.t)(g,p[3*q+0],p[3*q+1],p[3*q+2]),Object(m.h)(d,g),s.componentIndex=i.get(M),s.cosAngle=Object(m.e)(g,d);else{if(Object(m.t)(g,p[3*q+0],p[3*q+1],p[3*q+2]),Object(m.t)(d,p[3*T+0],p[3*T+1],p[3*T+2]),s.componentIndex=i.get(M),s.cosAngle=Object(m.e)(g,d),P(s,f))continue;s.cosAngle<-.9999&&Object(m.h)(d,g)}I+=D,k++,G||C(s,u)?(t.write(w,O++,s),N.push(D)):_(s,o)&&(n.write(y,A++,s),V.push(D))}var H=new Float32Array(N.reverse()),K=new Float32Array(V.reverse());return{regular:{instancesData:t.trim(w,O),lodInfo:{lengths:H}},silhouette:{instancesData:n.trim(y,A),lodInfo:{lengths:K}},averageEdgeLength:I/k}}(t,K,Q)}var K=new I,Q=new k}}]);
//# sourceMappingURL=46.44e76a59.chunk.js.map