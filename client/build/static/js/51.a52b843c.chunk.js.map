{"version":3,"sources":["../node_modules/@arcgis/core/core/cookie.js","../node_modules/@arcgis/core/identity/IdentityForm.js","../../index.js","../../src/index.js","../node_modules/@arcgis/core/identity/IdentityModal.js","../node_modules/@arcgis/core/identity/OAuthCredential.js","../node_modules/@arcgis/core/identity/OAuthInfo.js","../node_modules/@arcgis/core/identity/ServerInfo.js","../node_modules/@arcgis/core/identity/IdentityManagerBase.js","../node_modules/@arcgis/core/identity/IdentityManager.js","../node_modules/@arcgis/core/widgets/support/decorators/vmEvent.js","../node_modules/@arcgis/core/widgets/support/widget.js"],"names":["t","o","n","i","e","expires","Date","setTime","getTime","toUTCString","r","encodeURIComponent","document","cookie","a","b","s","_usernameInputNode","_passwordInputNode","messages","signingIn","server","resource","error","oAuthPrompt","this","l","u","class","oAuthInfo","info","test","lblItem","g","lblUser","value","required","autocomplete","spellcheck","type","bind","afterCreate","f","lblPwd","_","classes","disabled","lblSigning","lblOk","lblCancel","onclick","_cancel","y","details","httpStatus","invalidUser","noAuthService","onsubmit","_submit","_set","emit","preventDefault","username","password","prototype","candidateSelectors","candidateSelector","matches","Element","getCandidates","candidates","Array","el","includeContainer","getTabindex","tabindexAttr","parseInt","node","isNaN","isContentEditable","sortOrderedTabbables","isInput","isNonTabbableRadio","isRadio","radioScope","queryRadios","name","window","radioSet","err","console","checked","nodes","getCheckedRadio","isTabbableRadio","isNodeMatchingSelectorFocusable","isHiddenInput","getComputedStyle","nodeUnderDetails","isHidden","child","isDetailsWithSummary","isNodeMatchingSelectorTabbable","focusableCandidateSelector","isFocusable","Error","activeFocusTraps","trapQueue","activateTrap","activeTrap","trapIndex","deactivateTrap","delay","setTimeout","fn","findIndex","idx","arr","createFocusTrap","doc","config","returnFocusOnDeactivate","escapeDeactivates","delayInitialFocus","state","containers","tabbableGroups","nodeFocusedBeforeActivation","mostRecentlyFocusedNode","active","paused","containersContain","container","getNodeForOption","optionValue","getInitialFocusNode","firstTabbableGroup","updateTabbableNodes","tabbableNodes","regularTabbables","orderedTabbables","options","candidate","candidateTabindex","documentOrder","tabIndex","tabbable","firstTabbableNode","lastTabbableNode","tryFocus","preventScroll","isSelectableInput","checkPointerDown","trap","returnFocus","checkFocusIn","targetContained","checkKey","isEscapeEvent","isTabEvent","destinationNode","startOfGroupIndex","destinationGroupIndex","lastOfGroupIndex","checkTab","checkClick","addListeners","activeFocusDelay","capture","passive","removeListeners","activate","onActivate","activateOptions","deactivate","clearTimeout","onDeactivate","deactivateOptions","getReturnFocusNode","pause","unpause","updateContainerElements","elementsAsArray","concat","containerElements","filter","element","createElement","content","open","_close","body","appendChild","own","watch","_toggleFocusTrap","_destroyFocusTrap","id","title","c","close","h","v","role","_createFocusTrap","_renderContent","_focusTrap","requestAnimationFrame","initialFocus","innerHTML","render","HTMLElement","_attachToNode","readOnly","aliasOf","storage","appId","ssl","token","userId","_init","now","minTimeUntilExpiration","_load","authNamespace","portalUrl","setItem","JSON","stringify","log","replace","FormData","append","navigator","sendBeacon","XMLHttpRequest","send","_oAuthCred","getItem","parse","declaredClass","p","expiration","forceLogin","forceUserId","locale","popup","popupCallbackUrl","popupWindowFeatures","preserveUrlHash","fromJSON","toJSON","json","write","adminTokenServiceUrl","currentVersion","hasPortal","hasServer","owningSystemUrl","owningTenant","shortLivedTokenValidity","tokenServiceUrl","webTierAuth","D","j","host","q","some","E","_portalConfig","esriGeowConfig","serverInfos","oAuthInfos","credentials","_soReqs","_xoReqs","_portals","defaultOAuthInfo","defaultTokenValidity","dialog","formConstructor","R","tokenValidity","signInPage","useSignInPage","normalizeWebTierAuth","_busy","_rejectOnPersistedPageShow","_oAuthHash","_gwTokenUrl","_agsRest","_agsPortal","_agsAdmin","_adminSvcs","_gwDomains","regex","customBaseUrl","_legacyFed","_regexSDirUrl","_regexServerType","_gwUser","_gwItem","_gwGroup","_rePortalTokenSvc","_createDefaultOAuthInfo","_hasTestedIfAppIsOnPortal","_getOAuthHash","addEventListener","_pageShowHandler","findServerInfo","forEach","push","findOAuthInfo","_sanitizeUrl","_isServerRsrc","_getServerInstanceRoot","_getTokenSvcUrl","registerServers","_findCredential","L","scope","resources","emitTokenChange","refreshServerTokens","map","length","P","registerOAuthInfos","_hasSameServerInstance","_getIdenticalSvcIdx","prompt","S","w","signal","I","abort","reject","k","promise","d","_isAdminResource","_doPortalSignIn","_getEsriAuthCookie","findCredential","destroy","T","path","domain","location","hostname","endsWith","email","resolve","_restInfoPms","_selfReq","_findOAuthInfo","selfDfd","_getPortalSelf","_enqueue","_isRESTService","m","href","toLowerCase","isAdmin","serverUrl","customParameters","auth_tier","scheme","uri","port","query","request","referer","client","method","authMode","useProxy","_useProxy","ioArgs","withCredentials","x","then","data","validity","checkAppAccess","credential","getCredential","force","client_id","valid","viewOnlyUserTypeApp","catch","viewOnly","_oAuthDfd","clearInterval","_oAuthIntervalId","_oAuthOnHashHandle","remove","charAt","substring","error_description","sinfo_","oinfo_","access_token","Number","expires_in","persist","localStorage","sessionStorage","save","_redirectFunc","_oAuthRedirectFunc","_protocolFunc","getResourceName","O","on","generateToken","oAuthWin_","closed","resUrl_","oAuthPopupConfirmation","_doOAuthSignIn","slice","hash","hasOwnProperty","persisted","isBusy","_errbackFunc","_addResource","splice","_removeResource","_isIdProvider","_isPortalDomain","String","indexOf","search","substr","_normalizeAGOLorgDomain","proxyUrl","_getSuffix","restBaseUrl","_isIdenticalService","adminUrl","_getOrigin","A","allSSL","portalMode","supportsOAuth","protocol","cookieEnabled","_getAllCookies","portalApp","urlKey","match","RegExp","decodeURIComponent","top","_hasPortalSession","trim","resourceUrl","serverInfo","options_","admin_","refresh_","focus","_doSignIn","creationTime","shift","_canUsePortalSignInWorkflow","_pendingDfd","_exchangeToken","baseUrl","signin","useSSL","returnUrlParamName","returnUrl","C","isValid","oAuthState","oAuthSignIn","_checkProtocol","signIn","user","portalToken","tokenExpiration","parseFloat","_generateOAuthInfo","accountId","redirect_uri","clone","response_type","force_login","prepopulatedusername","setInterval","setOAuthResponseHash","detail","authorizeParams","authorizeUrl","U","tokenRefreshBuffer","_enqueued","refreshToken","_refreshTimer","_startRefreshTimer","EventedAccessor","_delegatedEventNames","isArray","postMixInProperties","buildRendering","postCreate","startup"],"mappings":"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","file":"static/js/51.a52b843c.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{assumeNonNull as e}from\"./maybe.js\";function t(t,o,n={}){let i=e(n.expires);if(\"number\"==typeof i){const e=new Date;e.setTime(e.getTime()+24*i*60*60*1e3),i=n.expires=e}\"string\"!=typeof i&&(n.expires=i.toUTCString());let r=t+\"=\"+encodeURIComponent(o);for(const e in n){r+=\"; \"+e;const t=n[e];!0!==t&&(r+=\"=\"+t)}document.cookie=r}export{t as writeCookie};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as e}from\"../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{substitute as r}from\"../intl/substitute.js\";import{storeNode as o}from\"../widgets/support/widgetUtils.js\";import{messageBundle as i}from\"../widgets/support/decorators/messageBundle.js\";import{renderable as n}from\"../widgets/support/decorators/renderable.js\";import{j as u}from\"../chunks/index.js\";import l from\"../widgets/Widget.js\";const p=\"esri-identity-form\",a=\"esri-identity-form__group\",d=\"esri-identity-form__label\",c=\"esri-identity-form__footer\",m=\"esri-input\",h=\"esri-button\",v=\"esri-button--secondary\";let b=class extends l{constructor(s,e){super(s,e),this._usernameInputNode=null,this._passwordInputNode=null,this.messages=null,this.signingIn=!1,this.server=null,this.resource=null,this.error=null,this.oAuthPrompt=!1}render(){const{error:s,server:e,resource:t,signingIn:i,oAuthPrompt:n,messages:l}=this,b=u(\"div\",{class:a},r(n?l.oAuthInfo:l.info,{server:/\\.arcgis\\.com/i.test(e)?\"ArcGIS Online\":e,resource:`(${t||l.lblItem})`})),g=n?null:u(\"div\",{class:a},u(\"label\",{class:d},l.lblUser,u(\"input\",{value:\"\",required:!0,autocomplete:\"off\",spellcheck:!1,type:\"text\",bind:this,afterCreate:o,\"data-node-ref\":\"_usernameInputNode\",class:m}))),f=n?null:u(\"div\",{class:a},u(\"label\",{class:d},l.lblPwd,u(\"input\",{value:\"\",required:!0,type:\"password\",bind:this,afterCreate:o,\"data-node-ref\":\"_passwordInputNode\",class:m}))),_=u(\"div\",{class:this.classes(a,c)},u(\"input\",{type:\"submit\",disabled:!!i,value:i?l.lblSigning:l.lblOk,class:h}),u(\"input\",{type:\"button\",value:l.lblCancel,bind:this,onclick:this._cancel,class:this.classes(h,v)})),y=s?u(\"div\",null,s.details&&s.details.httpStatus?l.invalidUser:l.noAuthService):null;return u(\"form\",{class:p,bind:this,onsubmit:this._submit},b,y,g,f,_)}_cancel(){this._set(\"signingIn\",!1),this._usernameInputNode&&(this._usernameInputNode.value=\"\"),this._passwordInputNode&&(this._passwordInputNode.value=\"\"),this.emit(\"cancel\")}_submit(s){s.preventDefault(),this._set(\"signingIn\",!0);const e=this.oAuthPrompt?{}:{username:this._usernameInputNode&&this._usernameInputNode.value,password:this._passwordInputNode&&this._passwordInputNode.value};this.emit(\"submit\",e)}};s([e(),n(),i(\"esri/identity/t9n/identity\")],b.prototype,\"messages\",void 0),s([e(),n()],b.prototype,\"signingIn\",void 0),s([e(),n()],b.prototype,\"server\",void 0),s([e(),n()],b.prototype,\"resource\",void 0),s([e(),n()],b.prototype,\"error\",void 0),s([e(),n()],b.prototype,\"oAuthPrompt\",void 0),b=s([t(\"esri.identity.IdentityForm\")],b);var g=b;export default g;\n","import { tabbable, isFocusable } from 'tabbable';\n\nlet activeFocusDelay;\n\nconst activeFocusTraps = (function () {\n  const trapQueue = [];\n  return {\n    activateTrap(trap) {\n      if (trapQueue.length > 0) {\n        const activeTrap = trapQueue[trapQueue.length - 1];\n        if (activeTrap !== trap) {\n          activeTrap.pause();\n        }\n      }\n\n      const trapIndex = trapQueue.indexOf(trap);\n      if (trapIndex === -1) {\n        trapQueue.push(trap);\n      } else {\n        // move this existing trap to the front of the queue\n        trapQueue.splice(trapIndex, 1);\n        trapQueue.push(trap);\n      }\n    },\n\n    deactivateTrap(trap) {\n      const trapIndex = trapQueue.indexOf(trap);\n      if (trapIndex !== -1) {\n        trapQueue.splice(trapIndex, 1);\n      }\n\n      if (trapQueue.length > 0) {\n        trapQueue[trapQueue.length - 1].unpause();\n      }\n    },\n  };\n})();\n\nconst isSelectableInput = function (node) {\n  return (\n    node.tagName &&\n    node.tagName.toLowerCase() === 'input' &&\n    typeof node.select === 'function'\n  );\n};\n\nconst isEscapeEvent = function (e) {\n  return e.key === 'Escape' || e.key === 'Esc' || e.keyCode === 27;\n};\n\nconst isTabEvent = function (e) {\n  return e.key === 'Tab' || e.keyCode === 9;\n};\n\nconst delay = function (fn) {\n  return setTimeout(fn, 0);\n};\n\n// Array.find/findIndex() are not supported on IE; this replicates enough\n//  of Array.findIndex() for our needs\nconst findIndex = function (arr, fn) {\n  let idx = -1;\n\n  arr.every(function (value, i) {\n    if (fn(value)) {\n      idx = i;\n      return false; // break\n    }\n\n    return true; // next\n  });\n\n  return idx;\n};\n\nconst createFocusTrap = function (elements, userOptions) {\n  const doc = document;\n\n  const config = {\n    returnFocusOnDeactivate: true,\n    escapeDeactivates: true,\n    delayInitialFocus: true,\n    ...userOptions,\n  };\n\n  const state = {\n    // @type {Array<HTMLElement>}\n    containers: [],\n\n    // list of objects identifying the first and last tabbable nodes in all containers/groups in\n    //  the trap\n    // NOTE: it's possible that a group has no tabbable nodes if nodes get removed while the trap\n    //  is active, but the trap should never get to a state where there isn't at least one group\n    //  with at least one tabbable node in it (that would lead to an error condition that would\n    //  result in an error being thrown)\n    // @type {Array<{ firstTabbableNode: HTMLElement|null, lastTabbableNode: HTMLElement|null }>}\n    tabbableGroups: [],\n\n    nodeFocusedBeforeActivation: null,\n    mostRecentlyFocusedNode: null,\n    active: false,\n    paused: false,\n  };\n\n  let trap; // eslint-disable-line prefer-const -- some private functions reference it, and its methods reference private functions, so we must declare here and define later\n\n  const containersContain = function (element) {\n    return state.containers.some((container) => container.contains(element));\n  };\n\n  const getNodeForOption = function (optionName) {\n    const optionValue = config[optionName];\n    if (!optionValue) {\n      return null;\n    }\n\n    let node = optionValue;\n\n    if (typeof optionValue === 'string') {\n      node = doc.querySelector(optionValue);\n      if (!node) {\n        throw new Error(`\\`${optionName}\\` refers to no known node`);\n      }\n    }\n\n    if (typeof optionValue === 'function') {\n      node = optionValue();\n      if (!node) {\n        throw new Error(`\\`${optionName}\\` did not return a node`);\n      }\n    }\n\n    return node;\n  };\n\n  const getInitialFocusNode = function () {\n    let node;\n\n    if (getNodeForOption('initialFocus') !== null) {\n      node = getNodeForOption('initialFocus');\n    } else if (containersContain(doc.activeElement)) {\n      node = doc.activeElement;\n    } else {\n      const firstTabbableGroup = state.tabbableGroups[0];\n      const firstTabbableNode =\n        firstTabbableGroup && firstTabbableGroup.firstTabbableNode;\n      node = firstTabbableNode || getNodeForOption('fallbackFocus');\n    }\n\n    if (!node) {\n      throw new Error(\n        'Your focus-trap needs to have at least one focusable element'\n      );\n    }\n\n    return node;\n  };\n\n  const updateTabbableNodes = function () {\n    state.tabbableGroups = state.containers\n      .map((container) => {\n        const tabbableNodes = tabbable(container);\n\n        if (tabbableNodes.length > 0) {\n          return {\n            firstTabbableNode: tabbableNodes[0],\n            lastTabbableNode: tabbableNodes[tabbableNodes.length - 1],\n          };\n        }\n\n        return undefined;\n      })\n      .filter((group) => !!group); // remove groups with no tabbable nodes\n\n    // throw if no groups have tabbable nodes and we don't have a fallback focus node either\n    if (\n      state.tabbableGroups.length <= 0 &&\n      !getNodeForOption('fallbackFocus')\n    ) {\n      throw new Error(\n        'Your focus-trap must have at least one container with at least one tabbable node in it at all times'\n      );\n    }\n  };\n\n  const tryFocus = function (node) {\n    if (node === doc.activeElement) {\n      return;\n    }\n    if (!node || !node.focus) {\n      tryFocus(getInitialFocusNode());\n      return;\n    }\n\n    node.focus({ preventScroll: !!config.preventScroll });\n    state.mostRecentlyFocusedNode = node;\n\n    if (isSelectableInput(node)) {\n      node.select();\n    }\n  };\n\n  const getReturnFocusNode = function (previousActiveElement) {\n    const node = getNodeForOption('setReturnFocus');\n\n    return node ? node : previousActiveElement;\n  };\n\n  // This needs to be done on mousedown and touchstart instead of click\n  // so that it precedes the focus event.\n  const checkPointerDown = function (e) {\n    if (containersContain(e.target)) {\n      // allow the click since it ocurred inside the trap\n      return;\n    }\n\n    if (config.clickOutsideDeactivates) {\n      // immediately deactivate the trap\n      trap.deactivate({\n        // if, on deactivation, we should return focus to the node originally-focused\n        //  when the trap was activated (or the configured `setReturnFocus` node),\n        //  then assume it's also OK to return focus to the outside node that was\n        //  just clicked, causing deactivation, as long as that node is focusable;\n        //  if it isn't focusable, then return focus to the original node focused\n        //  on activation (or the configured `setReturnFocus` node)\n        // NOTE: by setting `returnFocus: false`, deactivate() will do nothing,\n        //  which will result in the outside click setting focus to the node\n        //  that was clicked, whether it's focusable or not; by setting\n        //  `returnFocus: true`, we'll attempt to re-focus the node originally-focused\n        //  on activation (or the configured `setReturnFocus` node)\n        returnFocus: config.returnFocusOnDeactivate && !isFocusable(e.target),\n      });\n      return;\n    }\n\n    // This is needed for mobile devices.\n    // (If we'll only let `click` events through,\n    // then on mobile they will be blocked anyways if `touchstart` is blocked.)\n    if (\n      config.allowOutsideClick &&\n      (typeof config.allowOutsideClick === 'boolean'\n        ? config.allowOutsideClick\n        : config.allowOutsideClick(e))\n    ) {\n      // allow the click outside the trap to take place\n      return;\n    }\n\n    // otherwise, prevent the click\n    e.preventDefault();\n  };\n\n  // In case focus escapes the trap for some strange reason, pull it back in.\n  const checkFocusIn = function (e) {\n    const targetContained = containersContain(e.target);\n    // In Firefox when you Tab out of an iframe the Document is briefly focused.\n    if (targetContained || e.target instanceof Document) {\n      if (targetContained) {\n        state.mostRecentlyFocusedNode = e.target;\n      }\n    } else {\n      // escaped! pull it back in to where it just left\n      e.stopImmediatePropagation();\n      tryFocus(state.mostRecentlyFocusedNode || getInitialFocusNode());\n    }\n  };\n\n  // Hijack Tab events on the first and last focusable nodes of the trap,\n  // in order to prevent focus from escaping. If it escapes for even a\n  // moment it can end up scrolling the page and causing confusion so we\n  // kind of need to capture the action at the keydown phase.\n  const checkTab = function (e) {\n    updateTabbableNodes();\n\n    let destinationNode = null;\n\n    if (state.tabbableGroups.length > 0) {\n      if (e.shiftKey) {\n        const startOfGroupIndex = findIndex(\n          state.tabbableGroups,\n          ({ firstTabbableNode }) => e.target === firstTabbableNode\n        );\n\n        if (startOfGroupIndex >= 0) {\n          const destinationGroupIndex =\n            startOfGroupIndex === 0\n              ? state.tabbableGroups.length - 1\n              : startOfGroupIndex - 1;\n\n          const destinationGroup = state.tabbableGroups[destinationGroupIndex];\n          destinationNode = destinationGroup.lastTabbableNode;\n        }\n      } else {\n        const lastOfGroupIndex = findIndex(\n          state.tabbableGroups,\n          ({ lastTabbableNode }) => e.target === lastTabbableNode\n        );\n\n        if (lastOfGroupIndex >= 0) {\n          const destinationGroupIndex =\n            lastOfGroupIndex === state.tabbableGroups.length - 1\n              ? 0\n              : lastOfGroupIndex + 1;\n\n          const destinationGroup = state.tabbableGroups[destinationGroupIndex];\n          destinationNode = destinationGroup.firstTabbableNode;\n        }\n      }\n    } else {\n      destinationNode = getNodeForOption('fallbackFocus');\n    }\n\n    if (destinationNode) {\n      e.preventDefault();\n      tryFocus(destinationNode);\n    }\n  };\n\n  const checkKey = function (e) {\n    if (config.escapeDeactivates !== false && isEscapeEvent(e)) {\n      e.preventDefault();\n      trap.deactivate();\n      return;\n    }\n\n    if (isTabEvent(e)) {\n      checkTab(e);\n      return;\n    }\n  };\n\n  const checkClick = function (e) {\n    if (config.clickOutsideDeactivates) {\n      return;\n    }\n\n    if (containersContain(e.target)) {\n      return;\n    }\n\n    if (\n      config.allowOutsideClick &&\n      (typeof config.allowOutsideClick === 'boolean'\n        ? config.allowOutsideClick\n        : config.allowOutsideClick(e))\n    ) {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopImmediatePropagation();\n  };\n\n  //\n  // EVENT LISTENERS\n  //\n\n  const addListeners = function () {\n    if (!state.active) {\n      return;\n    }\n\n    // There can be only one listening focus trap at a time\n    activeFocusTraps.activateTrap(trap);\n\n    // Delay ensures that the focused element doesn't capture the event\n    // that caused the focus trap activation.\n    activeFocusDelay = config.delayInitialFocus\n      ? delay(function () {\n          tryFocus(getInitialFocusNode());\n        })\n      : tryFocus(getInitialFocusNode());\n\n    doc.addEventListener('focusin', checkFocusIn, true);\n    doc.addEventListener('mousedown', checkPointerDown, {\n      capture: true,\n      passive: false,\n    });\n    doc.addEventListener('touchstart', checkPointerDown, {\n      capture: true,\n      passive: false,\n    });\n    doc.addEventListener('click', checkClick, {\n      capture: true,\n      passive: false,\n    });\n    doc.addEventListener('keydown', checkKey, {\n      capture: true,\n      passive: false,\n    });\n\n    return trap;\n  };\n\n  const removeListeners = function () {\n    if (!state.active) {\n      return;\n    }\n\n    doc.removeEventListener('focusin', checkFocusIn, true);\n    doc.removeEventListener('mousedown', checkPointerDown, true);\n    doc.removeEventListener('touchstart', checkPointerDown, true);\n    doc.removeEventListener('click', checkClick, true);\n    doc.removeEventListener('keydown', checkKey, true);\n\n    return trap;\n  };\n\n  //\n  // TRAP DEFINITION\n  //\n\n  trap = {\n    activate(activateOptions) {\n      if (state.active) {\n        return this;\n      }\n\n      updateTabbableNodes();\n\n      state.active = true;\n      state.paused = false;\n      state.nodeFocusedBeforeActivation = doc.activeElement;\n\n      const onActivate =\n        activateOptions && activateOptions.onActivate\n          ? activateOptions.onActivate\n          : config.onActivate;\n      if (onActivate) {\n        onActivate();\n      }\n\n      addListeners();\n      return this;\n    },\n\n    deactivate(deactivateOptions) {\n      if (!state.active) {\n        return this;\n      }\n\n      clearTimeout(activeFocusDelay);\n\n      removeListeners();\n      state.active = false;\n      state.paused = false;\n\n      activeFocusTraps.deactivateTrap(trap);\n\n      const onDeactivate =\n        deactivateOptions && deactivateOptions.onDeactivate !== undefined\n          ? deactivateOptions.onDeactivate\n          : config.onDeactivate;\n      if (onDeactivate) {\n        onDeactivate();\n      }\n\n      const returnFocus =\n        deactivateOptions && deactivateOptions.returnFocus !== undefined\n          ? deactivateOptions.returnFocus\n          : config.returnFocusOnDeactivate;\n\n      if (returnFocus) {\n        delay(function () {\n          tryFocus(getReturnFocusNode(state.nodeFocusedBeforeActivation));\n        });\n      }\n\n      return this;\n    },\n\n    pause() {\n      if (state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = true;\n      removeListeners();\n\n      return this;\n    },\n\n    unpause() {\n      if (!state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = false;\n      updateTabbableNodes();\n      addListeners();\n\n      return this;\n    },\n\n    updateContainerElements(containerElements) {\n      const elementsAsArray = [].concat(containerElements).filter(Boolean);\n\n      state.containers = elementsAsArray.map((element) =>\n        typeof element === 'string' ? doc.querySelector(element) : element\n      );\n\n      if (state.active) {\n        updateTabbableNodes();\n      }\n\n      return this;\n    },\n  };\n\n  // initialize container elements\n  trap.updateContainerElements(elements);\n\n  return trap;\n};\n\nexport { createFocusTrap };\n","const candidateSelectors = [\n  'input',\n  'select',\n  'textarea',\n  'a[href]',\n  'button',\n  '[tabindex]',\n  'audio[controls]',\n  'video[controls]',\n  '[contenteditable]:not([contenteditable=\"false\"])',\n  'details>summary:first-of-type',\n  'details',\n];\nconst candidateSelector = /* #__PURE__ */ candidateSelectors.join(',');\n\nconst matches =\n  typeof Element === 'undefined'\n    ? function () {}\n    : Element.prototype.matches ||\n      Element.prototype.msMatchesSelector ||\n      Element.prototype.webkitMatchesSelector;\n\nconst getCandidates = function (el, includeContainer, filter) {\n  let candidates = Array.prototype.slice.apply(\n    el.querySelectorAll(candidateSelector)\n  );\n  if (includeContainer && matches.call(el, candidateSelector)) {\n    candidates.unshift(el);\n  }\n  candidates = candidates.filter(filter);\n  return candidates;\n};\n\nconst isContentEditable = function (node) {\n  return node.contentEditable === 'true';\n};\n\nconst getTabindex = function (node) {\n  const tabindexAttr = parseInt(node.getAttribute('tabindex'), 10);\n\n  if (!isNaN(tabindexAttr)) {\n    return tabindexAttr;\n  }\n\n  // Browsers do not return `tabIndex` correctly for contentEditable nodes;\n  // so if they don't have a tabindex attribute specifically set, assume it's 0.\n  if (isContentEditable(node)) {\n    return 0;\n  }\n\n  // in Chrome, <details/>, <audio controls/> and <video controls/> elements get a default\n  //  `tabIndex` of -1 when the 'tabindex' attribute isn't specified in the DOM,\n  //  yet they are still part of the regular tab order; in FF, they get a default\n  //  `tabIndex` of 0; since Chrome still puts those elements in the regular tab\n  //  order, consider their tab index to be 0.\n  if (\n    (node.nodeName === 'AUDIO' ||\n      node.nodeName === 'VIDEO' ||\n      node.nodeName === 'DETAILS') &&\n    node.getAttribute('tabindex') === null\n  ) {\n    return 0;\n  }\n\n  return node.tabIndex;\n};\n\nconst sortOrderedTabbables = function (a, b) {\n  return a.tabIndex === b.tabIndex\n    ? a.documentOrder - b.documentOrder\n    : a.tabIndex - b.tabIndex;\n};\n\nconst isInput = function (node) {\n  return node.tagName === 'INPUT';\n};\n\nconst isHiddenInput = function (node) {\n  return isInput(node) && node.type === 'hidden';\n};\n\nconst isDetailsWithSummary = function (node) {\n  const r =\n    node.tagName === 'DETAILS' &&\n    Array.prototype.slice\n      .apply(node.children)\n      .some((child) => child.tagName === 'SUMMARY');\n  return r;\n};\n\nconst getCheckedRadio = function (nodes, form) {\n  for (let i = 0; i < nodes.length; i++) {\n    if (nodes[i].checked && nodes[i].form === form) {\n      return nodes[i];\n    }\n  }\n};\n\nconst isTabbableRadio = function (node) {\n  if (!node.name) {\n    return true;\n  }\n  const radioScope = node.form || node.ownerDocument;\n\n  const queryRadios = function (name) {\n    return radioScope.querySelectorAll(\n      'input[type=\"radio\"][name=\"' + name + '\"]'\n    );\n  };\n\n  let radioSet;\n  if (\n    typeof window !== 'undefined' &&\n    typeof window.CSS !== 'undefined' &&\n    typeof window.CSS.escape === 'function'\n  ) {\n    radioSet = queryRadios(window.CSS.escape(node.name));\n  } else {\n    try {\n      radioSet = queryRadios(node.name);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error(\n        'Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s',\n        err.message\n      );\n      return false;\n    }\n  }\n\n  const checked = getCheckedRadio(radioSet, node.form);\n  return !checked || checked === node;\n};\n\nconst isRadio = function (node) {\n  return isInput(node) && node.type === 'radio';\n};\n\nconst isNonTabbableRadio = function (node) {\n  return isRadio(node) && !isTabbableRadio(node);\n};\n\nconst isHidden = function (node) {\n  if (getComputedStyle(node).visibility === 'hidden') {\n    return true;\n  }\n\n  const isDirectSummary = matches.call(node, 'details>summary:first-of-type');\n  const nodeUnderDetails = isDirectSummary ? node.parentElement : node;\n  if (matches.call(nodeUnderDetails, 'details:not([open]) *')) {\n    return true;\n  }\n\n  while (node) {\n    if (getComputedStyle(node).display === 'none') {\n      return true;\n    }\n    node = node.parentElement;\n  }\n\n  return false;\n};\n\nconst isNodeMatchingSelectorFocusable = function (node) {\n  if (\n    node.disabled ||\n    isHiddenInput(node) ||\n    isHidden(node) ||\n    /* For a details element with a summary, the summary element gets the focused  */\n    isDetailsWithSummary(node)\n  ) {\n    return false;\n  }\n  return true;\n};\n\nconst isNodeMatchingSelectorTabbable = function (node) {\n  if (\n    !isNodeMatchingSelectorFocusable(node) ||\n    isNonTabbableRadio(node) ||\n    getTabindex(node) < 0\n  ) {\n    return false;\n  }\n  return true;\n};\n\nconst tabbable = function (el, options) {\n  options = options || {};\n\n  const regularTabbables = [];\n  const orderedTabbables = [];\n\n  const candidates = getCandidates(\n    el,\n    options.includeContainer,\n    isNodeMatchingSelectorTabbable\n  );\n\n  candidates.forEach(function (candidate, i) {\n    const candidateTabindex = getTabindex(candidate);\n    if (candidateTabindex === 0) {\n      regularTabbables.push(candidate);\n    } else {\n      orderedTabbables.push({\n        documentOrder: i,\n        tabIndex: candidateTabindex,\n        node: candidate,\n      });\n    }\n  });\n\n  const tabbableNodes = orderedTabbables\n    .sort(sortOrderedTabbables)\n    .map((a) => a.node)\n    .concat(regularTabbables);\n\n  return tabbableNodes;\n};\n\nconst focusable = function (el, options) {\n  options = options || {};\n\n  const candidates = getCandidates(\n    el,\n    options.includeContainer,\n    isNodeMatchingSelectorFocusable\n  );\n\n  return candidates;\n};\n\nconst isTabbable = function (node) {\n  if (!node) {\n    throw new Error('No node provided');\n  }\n  if (matches.call(node, candidateSelector) === false) {\n    return false;\n  }\n  return isNodeMatchingSelectorTabbable(node);\n};\n\nconst focusableCandidateSelector = /* #__PURE__ */ candidateSelectors\n  .concat('iframe')\n  .join(',');\n\nconst isFocusable = function (node) {\n  if (!node) {\n    throw new Error('No node provided');\n  }\n  if (matches.call(node, focusableCandidateSelector) === false) {\n    return false;\n  }\n  return isNodeMatchingSelectorFocusable(node);\n};\n\nexport { tabbable, focusable, isTabbable, isFocusable };\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as e}from\"../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{messageBundle as o}from\"../widgets/support/decorators/messageBundle.js\";import{renderable as i}from\"../widgets/support/decorators/renderable.js\";import{j as r}from\"../chunks/index.js\";import{isWidget as a}from\"../widgets/support/widget.js\";import n from\"../widgets/Widget.js\";import{createFocusTrap as c}from\"focus-trap\";const d=\"esri-identity-modal\",l=\"esri-identity-modal--open\",p=\"esri-identity-modal--closed\",u=\"esri-identity-modal__title\",m=\"esri-identity-modal__dialog\",h=\"esri-identity-modal__content\",_=\"esri-identity-modal__close-button\",y=\"esri-icon-close\";let g=class extends n{constructor(t,e){super(t,e),this.container=document.createElement(\"div\"),this.content=null,this.open=!1,this._close=()=>{this.open=!1},document.body.appendChild(this.container),this.own(this.watch(\"open\",(()=>this._toggleFocusTrap())))}destroy(){this._destroyFocusTrap()}render(){const t=this.id,{open:e,content:s,title:o,messages:i}=this,a=e&&!!s,n={[l]:a,[p]:!a},c=r(\"button\",{class:_,\"aria-label\":i.close,title:i.close,bind:this,onclick:this._close},r(\"span\",{\"aria-hidden\":\"true\",class:y})),h=`${t}_title`,g=`${t}_content`,f=o?r(\"h1\",{id:h,class:u},o):null,v=a?r(\"div\",{bind:this,class:m,role:\"dialog\",\"aria-labelledby\":h,\"aria-describedby\":g,afterCreate:this._createFocusTrap},c,f,this._renderContent(g)):null;return r(\"div\",{tabIndex:-1,class:this.classes(d,n)},v)}_destroyFocusTrap(){var t;null==(t=this._focusTrap)||t.deactivate({onDeactivate:null}),this._focusTrap=null}_toggleFocusTrap(){const{_focusTrap:t,open:e}=this;t&&(e?t.activate():t.deactivate())}_createFocusTrap(t){this._destroyFocusTrap(),requestAnimationFrame((()=>{this._focusTrap=c(t,{initialFocus:\"input\",onDeactivate:this._close}),this._toggleFocusTrap()}))}_renderContent(t){const e=this.content;return\"string\"==typeof e?r(\"div\",{class:h,id:t,innerHTML:e}):a(e)?r(\"div\",{class:h,id:t},e.render()):e instanceof HTMLElement?r(\"div\",{class:h,id:t,bind:e,afterCreate:this._attachToNode}):null}_attachToNode(t){t.appendChild(this)}};t([e({readOnly:!0})],g.prototype,\"container\",void 0),t([e(),i()],g.prototype,\"content\",void 0),t([e(),i()],g.prototype,\"open\",void 0),t([e(),i(),o(\"esri/t9n/common\")],g.prototype,\"messages\",void 0),t([e({aliasOf:\"messages.auth.signIn\"}),i()],g.prototype,\"title\",void 0),g=t([s(\"esri.identity.IdentityModal\")],g);var f=g;export default f;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass t{constructor(t,e){this.oAuthInfo=null,this.storage=null,this.appId=null,this.expires=null,this.ssl=null,this.token=null,this.userId=null,this.oAuthInfo=t,this.storage=e,this._init()}isValid(){let t=!1;if(this.oAuthInfo&&this.token&&this.userId){const e=Date.now();if(this.expires>e){(this.expires-e)/1e3>60*this.oAuthInfo.minTimeUntilExpiration&&(t=!0)}}return t}save(){if(!this.storage)return;const t=this._load(),e=this.oAuthInfo;if(e&&e.authNamespace&&e.portalUrl){let s=t[e.authNamespace];s||(s=t[e.authNamespace]={}),s[e.portalUrl]={appId:this.appId=e.appId,expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem(\"esriJSAPIOAuth\",JSON.stringify(t))}catch(t){console.log(t)}}}destroy(){const t=this._load(),e=this.oAuthInfo;if(e&&e.appId&&e.portalUrl&&this.token&&this.expires>Date.now()){const t=e.portalUrl.replace(/^http:/i,\"https:\")+\"/sharing/rest/oauth2/revokeToken\",s=new FormData;if(s.append(\"f\",\"json\"),s.append(\"auth_token\",this.token),s.append(\"client_id\",e.appId),s.append(\"token_type_hint\",\"access_token\"),\"function\"==typeof navigator.sendBeacon)navigator.sendBeacon(t,s);else{const e=new XMLHttpRequest;e.open(\"POST\",t),e.send(s)}}if(e&&e.authNamespace&&e.portalUrl&&this.storage){const s=t[e.authNamespace];if(s){delete s[e.portalUrl];try{this.storage.setItem(\"esriJSAPIOAuth\",JSON.stringify(t))}catch(t){console.log(t)}}}e&&(e._oAuthCred=null,this.oAuthInfo=null)}_init(){const t=this._load(),e=this.oAuthInfo;if(e&&e.authNamespace&&e.portalUrl){let s=t[e.authNamespace];s&&(s=s[e.portalUrl],s&&(this.appId=s.appId,this.expires=s.expires,this.ssl=s.ssl,this.token=s.token,this.userId=s.userId))}}_load(){let t={};if(this.storage){const e=this.storage.getItem(\"esriJSAPIOAuth\");if(e)try{t=JSON.parse(e)}catch(t){console.log(t)}}return t}}t.prototype.declaredClass=\"esri.identity.OAuthCredential\";export default t;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as r}from\"../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{JSONSupport as e}from\"../core/JSONSupport.js\";var p;let s=p=class extends e{constructor(o){super(o),this._oAuthCred=null,this.appId=null,this.authNamespace=\"/\",this.expiration=20160,this.forceLogin=!1,this.forceUserId=!1,this.locale=null,this.minTimeUntilExpiration=30,this.popup=!1,this.popupCallbackUrl=\"oauth-callback.html\",this.popupWindowFeatures=\"height=490,width=800,resizable,scrollbars,status\",this.portalUrl=\"https://www.arcgis.com\",this.preserveUrlHash=!1,this.userId=null}clone(){return p.fromJSON(this.toJSON())}};o([r({json:{write:!0}})],s.prototype,\"appId\",void 0),o([r({json:{write:!0}})],s.prototype,\"authNamespace\",void 0),o([r({json:{write:!0}})],s.prototype,\"expiration\",void 0),o([r({json:{write:!0}})],s.prototype,\"forceLogin\",void 0),o([r({json:{write:!0}})],s.prototype,\"forceUserId\",void 0),o([r({json:{write:!0}})],s.prototype,\"locale\",void 0),o([r({json:{write:!0}})],s.prototype,\"minTimeUntilExpiration\",void 0),o([r({json:{write:!0}})],s.prototype,\"popup\",void 0),o([r({json:{write:!0}})],s.prototype,\"popupCallbackUrl\",void 0),o([r({json:{write:!0}})],s.prototype,\"popupWindowFeatures\",void 0),o([r({json:{write:!0}})],s.prototype,\"portalUrl\",void 0),o([r({json:{write:!0}})],s.prototype,\"preserveUrlHash\",void 0),o([r({json:{write:!0}})],s.prototype,\"userId\",void 0),s=p=o([t(\"esri.identity.OAuthInfo\")],s);var i=s;export default i;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{JSONSupport as t}from\"../core/JSONSupport.js\";let s=class extends t{constructor(r){super(r),this.adminTokenServiceUrl=null,this.currentVersion=null,this.hasPortal=null,this.hasServer=null,this.owningSystemUrl=null,this.owningTenant=null,this.server=null,this.shortLivedTokenValidity=null,this.tokenServiceUrl=null,this.webTierAuth=null}};r([o({json:{write:!0}})],s.prototype,\"adminTokenServiceUrl\",void 0),r([o({json:{write:!0}})],s.prototype,\"currentVersion\",void 0),r([o({json:{write:!0}})],s.prototype,\"hasPortal\",void 0),r([o({json:{write:!0}})],s.prototype,\"hasServer\",void 0),r([o({json:{write:!0}})],s.prototype,\"owningSystemUrl\",void 0),r([o({json:{write:!0}})],s.prototype,\"owningTenant\",void 0),r([o({json:{write:!0}})],s.prototype,\"server\",void 0),r([o({json:{write:!0}})],s.prototype,\"shortLivedTokenValidity\",void 0),r([o({json:{write:!0}})],s.prototype,\"tokenServiceUrl\",void 0),r([o({json:{write:!0}})],s.prototype,\"webTierAuth\",void 0),s=r([e(\"esri.identity.ServerInfo\")],s);var i=s;export default i;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../core/global.js\";import\"../core/has.js\";import{mixin as r,fixJson as s}from\"../core/lang.js\";import{getDeepValue as i}from\"../core/object.js\";import n from\"../config.js\";import{escapeRegExpString as o}from\"../core/string.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as a}from\"../core/accessorSupport/decorators/property.js\";import{subclass as h}from\"../core/accessorSupport/decorators/subclass.js\";import l from\"../core/Error.js\";import{Url as c,hasSameOrigin as d,queryToObject as u,normalize as p,urlToObject as _,getProxyRule as f,makeAbsolute as g,objectToQuery as m}from\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{on as v}from\"../core/events.js\";import{createAbortController as S,createResolver as w,onAbort as I,isAborted as k,resolve as A}from\"../core/promiseUtils.js\";import U from\"../core/Evented.js\";import{id as y}from\"../kernel.js\";import x from\"../request.js\";import{writeCookie as T}from\"../core/cookie.js\";import R from\"./IdentityForm.js\";import O from\"./IdentityModal.js\";import C from\"./OAuthCredential.js\";import P from\"./OAuthInfo.js\";import b from\"./ServerInfo.js\";const D={},j=e=>{const t=new c(e.owningSystemUrl).host,r=new c(e.server).host,s=/.+\\.arcgis\\.com$/i;return s.test(t)&&s.test(r)},q=(e,t)=>!!(j(e)&&t&&t.some((t=>t.test(e.server))));let E=class extends U{constructor(){super(),this._portalConfig=t.esriGeowConfig,this.serverInfos=[],this.oAuthInfos=[],this.credentials=[],this._soReqs=[],this._xoReqs=[],this._portals=[],this.defaultOAuthInfo=null,this.defaultTokenValidity=60,this.dialog=null,this.formConstructor=R,this.tokenValidity=null,this.signInPage=null,this.useSignInPage=!0,this.normalizeWebTierAuth=!1,this._busy=null,this._rejectOnPersistedPageShow=!1,this._oAuthHash=null,this._gwTokenUrl=\"/sharing/rest/generateToken\",this._agsRest=\"/rest/services\",this._agsPortal=/\\/sharing(\\/|$)/i,this._agsAdmin=/(https?:\\/\\/[^\\/]+\\/[^\\/]+)\\/admin\\/?(\\/.*)?$/i,this._adminSvcs=/\\/rest\\/admin\\/services(\\/|$)/i,this._gwDomains=[{regex:/^https?:\\/\\/www\\.arcgis\\.com/i,customBaseUrl:\"maps.arcgis.com\",tokenServiceUrl:\"https://www.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:dev|[a-z\\d-]+\\.mapsdev)\\.arcgis\\.com/i,customBaseUrl:\"mapsdev.arcgis.com\",tokenServiceUrl:\"https://dev.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:devext|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,customBaseUrl:\"mapsdevext.arcgis.com\",tokenServiceUrl:\"https://devext.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:qaext|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i,customBaseUrl:\"mapsqa.arcgis.com\",tokenServiceUrl:\"https://qaext.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/[a-z\\d-]+\\.maps\\.arcgis\\.com/i,customBaseUrl:\"maps.arcgis.com\",tokenServiceUrl:\"https://www.arcgis.com/sharing/rest/generateToken\"}],this._legacyFed=[],this._regexSDirUrl=/http.+\\/rest\\/services\\/?/gi,this._regexServerType=/(\\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/gi,this._gwUser=/http.+\\/users\\/([^\\/]+)\\/?.*/i,this._gwItem=/http.+\\/items\\/([^\\/]+)\\/?.*/i,this._gwGroup=/http.+\\/groups\\/([^\\/]+)\\/?.*/i,this._rePortalTokenSvc=/\\/sharing(\\/rest)?\\/generatetoken/i,this._createDefaultOAuthInfo=!0,this._hasTestedIfAppIsOnPortal=!1,this._getOAuthHash(),window.addEventListener(\"pageshow\",(e=>{this._pageShowHandler(e)}))}registerServers(e){const t=this.serverInfos;t?(e=e.filter((e=>!this.findServerInfo(e.server))),this.serverInfos=t.concat(e)):this.serverInfos=e,e.forEach((e=>{e.owningSystemUrl&&this._portals.push(e.owningSystemUrl),e.hasPortal&&this._portals.push(e.server)}))}registerOAuthInfos(e){const t=this.oAuthInfos;t?(e=e.filter((e=>!this.findOAuthInfo(e.portalUrl))),this.oAuthInfos=t.concat(e)):this.oAuthInfos=e}registerToken(e){e={...e};const t=this._sanitizeUrl(e.server),s=this._isServerRsrc(t);let i,n=this.findServerInfo(t),o=!0;n||(n=new b,n.server=this._getServerInstanceRoot(t),s?n.hasServer=!0:(n.tokenServiceUrl=this._getTokenSvcUrl(t),n.hasPortal=!0),this.registerServers([n])),i=this._findCredential(t),i?(delete e.server,r(i,e),o=!1):(i=new L({userId:e.userId,server:n.server,token:e.token,expires:e.expires,ssl:e.ssl,scope:s?\"server\":\"portal\"}),i.resources=[t],this.credentials.push(i)),i.emitTokenChange(!1),o||i.refreshServerTokens()}toJSON(){return s({serverInfos:this.serverInfos.map((e=>e.toJSON())),oAuthInfos:this.oAuthInfos.map((e=>e.toJSON())),credentials:this.credentials.map((e=>e.toJSON()))})}initialize(e){if(!e)return;\"string\"==typeof e&&(e=JSON.parse(e));const t=e.serverInfos,r=e.oAuthInfos,s=e.credentials;if(t){const e=[];t.forEach((t=>{t.server&&t.tokenServiceUrl&&e.push(t.declaredClass?t:new b(t))})),e.length&&this.registerServers(e)}if(r){const e=[];r.forEach((t=>{t.appId&&e.push(t.declaredClass?t:new P(t))})),e.length&&this.registerOAuthInfos(e)}s&&s.forEach((e=>{e.server&&e.token&&e.expires&&e.expires>Date.now()&&((e=e.declaredClass?e:new L(e)).emitTokenChange(),this.credentials.push(e))}))}findServerInfo(e){let t;e=this._sanitizeUrl(e);for(const r of this.serverInfos)if(this._hasSameServerInstance(r.server,e)){t=r;break}return t}findOAuthInfo(e){let t;e=this._sanitizeUrl(e);for(const r of this.oAuthInfos)if(this._hasSameServerInstance(r.portalUrl,e)){t=r;break}return t}findCredential(e,t){let r,s;if(e=this._sanitizeUrl(e),s=this._isServerRsrc(e)?\"server\":\"portal\",t){for(const i of this.credentials)if(this._hasSameServerInstance(i.server,e)&&t===i.userId&&i.scope===s){r=i;break}}else for(const t of this.credentials)if(this._hasSameServerInstance(t.server,e)&&-1!==this._getIdenticalSvcIdx(e,t)&&t.scope===s){r=t;break}return r}getCredential(e,t){let r,s,i=!0;t&&(r=!!t.token,s=t.error,i=!1!==t.prompt),t={...t},e=this._sanitizeUrl(e);const n=S(),o=w();if(t.signal&&I(t.signal,(()=>{n.abort()})),I(n,(()=>{o.reject(new l(\"identity-manager:user-aborted\",\"ABORTED\"))})),k(n))return o.promise;t.signal=n.signal;const a=this._isAdminResource(e),h=r&&this._doPortalSignIn(e)?this._getEsriAuthCookie():null,c=r?this.findCredential(e):null;let d;if(c&&s&&s.details&&498===s.details.httpStatus)c.destroy(),h&&h.token===t.token&&(T(\"esri_auth\",null,{expires:-1,path:\"/\",domain:document.domain}),window.location.hostname.endsWith(\".arcgis.com\")&&T(\"esri_auth\",null,{expires:-1,path:\"/\",domain:\"arcgis.com\"}));else if(h||c){const t=h&&h.email||c&&c.userId;return d=new l(\"identity-manager:not-authorized\",\"You are currently signed in as: '\"+t+\"'. You do not have access to this resource: \"+e,{error:s}),o.reject(d),o.promise}const u=this._findCredential(e,t);if(u)return o.resolve(u),o.promise;let p=this.findServerInfo(e);if(p)!p.hasServer&&this._isServerRsrc(e)&&(p._restInfoPms=this._getTokenSvcUrl(e),p.hasServer=!0);else{const t=this._getTokenSvcUrl(e);if(!t)return d=new l(\"identity-manager:unknown-resource\",\"Unknown resource - could not find token service endpoint.\"),o.reject(d),o.promise;p=new b,p.server=this._getServerInstanceRoot(e),\"string\"==typeof t?(p.tokenServiceUrl=t,p.hasPortal=!0):(p._restInfoPms=t,p.hasServer=!0),this.registerServers([p])}return i&&p.hasPortal&&void 0===p._selfReq&&!this._findOAuthInfo(e)&&(p._selfReq={owningTenant:t&&t.owningTenant,selfDfd:this._getPortalSelf(p.tokenServiceUrl.replace(this._rePortalTokenSvc,\"/sharing/rest/portals/self\"),e)}),this._enqueue(e,p,t,o,a)}getResourceName(e){return this._isRESTService(e)?e.replace(this._regexSDirUrl,\"\").replace(this._regexServerType,\"\")||\"\":this._gwUser.test(e)&&e.replace(this._gwUser,\"$1\")||this._gwItem.test(e)&&e.replace(this._gwItem,\"$1\")||this._gwGroup.test(e)&&e.replace(this._gwGroup,\"$1\")||\"\"}generateToken(e,t,s){const i=this._rePortalTokenSvc.test(e.tokenServiceUrl),n=new c(window.location.href.toLowerCase()),o=this._getEsriAuthCookie(),a=e.shortLivedTokenValidity;let h,u,p,_,f,g,m,v,S,w;t&&(w=this.tokenValidity||a||this.defaultTokenValidity,w>a&&a>0&&(w=a)),s&&(u=s.isAdmin,p=s.serverUrl,_=s.token,m=s.signal,v=s.ssl,e.customParameters=s.customParameters),u?f=e.adminTokenServiceUrl:(f=e.tokenServiceUrl,g=new c(f.toLowerCase()),o&&(h=o.auth_tier,h=h&&h.toLowerCase()),(\"web\"===h||e.webTierAuth)&&s&&s.serverUrl&&!v&&\"http\"===n.scheme&&(d(n.uri,f,!0)||\"https\"===g.scheme&&n.host===g.host&&\"7080\"===n.port&&\"7443\"===g.port)&&(f=f.replace(/^https:/i,\"http:\").replace(/:7443/i,\":7080\"))),S=r({query:r({request:\"getToken\",username:t&&t.username,password:t&&t.password,serverUrl:p,token:_,expiration:w,referer:u||i?window.location.host:null,client:u?\"referer\":null,f:\"json\"},e.customParameters),method:\"post\",authMode:\"anonymous\",useProxy:this._useProxy(e,s),signal:m},s&&s.ioArgs),i||(S.withCredentials=!1);return x(f,S).then((r=>{const s=r.data;if(!s||!s.token)return new l(\"identity-manager:authentication-failed\",\"Unable to generate token\");const i=e.server;return D[i]||(D[i]={}),t&&(D[i][t.username]=t.password),s.validity=w,s}))}isBusy(){return!!this._busy}checkSignInStatus(e){return this.checkAppAccess(e,\"\").then((e=>e.credential))}checkAppAccess(e,t,r){let s=!1;return this.getCredential(e,{prompt:!1}).then((i=>{let n;const o={f:\"json\"};if(\"portal\"===i.scope)if(t&&(this._doPortalSignIn(e,!0)||r&&r.force))n=i.server+\"/sharing/rest/oauth2/validateAppAccess\",o.client_id=t;else{if(!i.token)return{credential:i};n=i.server+\"/sharing/rest\"}else{if(!i.token)return{credential:i};n=i.server+\"/rest/services\"}return i.token&&(o.token=i.token),x(n,{query:o,authMode:\"anonymous\"}).then((e=>{if(!1===e.data.valid)throw new l(\"identity-manager:not-authorized\",`You are currently signed in as: '${i.userId}'.`,e.data);return s=!!e.data.viewOnlyUserTypeApp,{credential:i}})).catch((e=>{if(\"identity-manager:not-authorized\"===e.name)throw e;const t=e.details&&e.details.httpStatus;if(498===t)throw i.destroy(),new l(\"identity-manager:not-authenticated\",\"User is not signed in.\");if(400===t)throw new l(\"identity-manager:invalid-request\");return{credential:i}}))})).then((e=>({credential:e.credential,viewOnly:s})))}setOAuthResponseHash(e){var t;const r=this._oAuthDfd;if(this._oAuthDfd=null,!r||!e)return;clearInterval(this._oAuthIntervalId),null==(t=this._oAuthOnHashHandle)||t.remove(),\"#\"===e.charAt(0)&&(e=e.substring(1));const s=u(e);if(s.error){const e=\"access_denied\"===s.error,t=new l(e?\"identity-manager:user-aborted\":\"identity-manager:authentication-failed\",e?\"ABORTED\":\"OAuth: \"+s.error+\" - \"+s.error_description);r.reject(t)}else{const e=r.sinfo_,t=r.oinfo_,i=t._oAuthCred,n=new L({userId:s.username,server:e.server,token:s.access_token,expires:Date.now()+1e3*Number(s.expires_in),ssl:\"true\"===s.ssl,_oAuthCred:i});t.userId=n.userId,i.storage=s.persist?window.localStorage:window.sessionStorage,i.token=n.token,i.expires=n.expires,i.userId=n.userId,i.ssl=n.ssl,i.save(),r.resolve(n)}}setRedirectionHandler(e){this._redirectFunc=e}setOAuthRedirectionHandler(e){this._oAuthRedirectFunc=e}setProtocolErrorHandler(e){this._protocolFunc=e}signIn(e,t,r={}){const s=w(),i=()=>{var e,t,r,s,i;null==(e=a)||e.remove(),null==(t=h)||t.remove(),null==(r=c)||r.remove(),null==(s=o)||s.destroy(),null==(i=this.dialog)||i.destroy(),this.dialog=o=a=h=c=null},n=()=>{i(),this._oAuthDfd=null,s.reject(new l(\"identity-manager:user-aborted\",\"ABORTED\"))};r.signal&&I(r.signal,(()=>{n()}));let o=new this.formConstructor;o.resource=this.getResourceName(e),o.server=t.server,this.dialog=new O,this.dialog.content=o,this.dialog.open=!0,this.emit(\"dialog-create\");let a=o.on(\"cancel\",n),h=this.dialog.watch(\"open\",n),c=o.on(\"submit\",(e=>{this.generateToken(t,e,{isAdmin:r.isAdmin,signal:r.signal}).then((n=>{i();const o=new L({userId:e.username,server:t.server,token:n.token,expires:null!=n.expires?Number(n.expires):null,ssl:!!n.ssl,isAdmin:r.isAdmin,validity:n.validity});s.resolve(o)})).catch((e=>{o.error=e,o.signingIn=!1}))}));return s.promise}oAuthSignIn(e,t,r,s){this._oAuthDfd=w();const i=this._oAuthDfd;null!=s&&s.signal&&I(s.signal,(()=>{const e=this._oAuthDfd&&this._oAuthDfd.oAuthWin_;e&&!e.closed?e.close():this.dialog&&a()})),i.resUrl_=e,i.sinfo_=t,i.oinfo_=r;const n=!s||!1!==s.oAuthPopupConfirmation;if(!r.popup||!n)return this._doOAuthSignIn(e,t,r),i.promise;const o=new this.formConstructor;o.oAuthPrompt=!0,o.server=t.server,this.dialog=new O,this.dialog.content=o,this.dialog.open=!0,this.emit(\"dialog-create\");const a=()=>{u(),this._oAuthDfd=null,i.reject(new l(\"identity-manager:user-aborted\",\"ABORTED\"))},h=o.on(\"cancel\",a),c=this.dialog.watch(\"open\",a),d=o.on(\"submit\",(()=>{u(),this._doOAuthSignIn(e,t,r)})),u=()=>{h.remove(),c.remove(),d.remove(),o.destroy(),this.dialog.destroy(),this.dialog=null};return i.promise}destroyCredentials(){if(this.credentials){this.credentials.slice().forEach((e=>{e.destroy()}))}this.emit(\"credentials-destroy\")}_getOAuthHash(){let e=window.location.hash;if(e){\"#\"===e.charAt(0)&&(e=e.substring(1));const t=u(e);let r=!1;t.access_token&&t.expires_in&&t.state&&t.hasOwnProperty(\"username\")?(t.state=JSON.parse(t.state),this._oAuthHash=t,r=!0):t.error&&t.error_description&&(console.log(\"IdentityManager OAuth Error: \",t.error,\" - \",t.error_description),\"access_denied\"===t.error&&(r=!0)),r&&(window.location.hash=\"object\"==typeof t.state&&t.state.hash||\"\")}}_pageShowHandler(e){if(e.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow){const e=new l(\"identity-manager:user-aborted\",\"ABORTED\");this._errbackFunc(e)}}_findCredential(e,t){let r,s,i,n,o=-1;const a=t&&t.token,h=t&&t.resource,l=this._isServerRsrc(e)?\"server\":\"portal\",c=this.credentials.filter((t=>this._hasSameServerInstance(t.server,e)&&t.scope===l));if(e=h||e,c.length)if(1===c.length){if(r=c[0],n=this.findServerInfo(r.server),s=n&&n.owningSystemUrl,i=s&&this.findCredential(s,r.userId),o=this._getIdenticalSvcIdx(e,r),!a)return-1===o&&r.resources.push(e),this._addResource(e,i),r;-1!==o&&(r.resources.splice(o,1),this._removeResource(e,i))}else{let t,r;if(c.some((a=>(r=this._getIdenticalSvcIdx(e,a),-1!==r&&(t=a,n=this.findServerInfo(t.server),s=n&&n.owningSystemUrl,i=s&&this.findCredential(s,t.userId),o=r,!0)))),a)t&&(t.resources.splice(o,1),this._removeResource(e,i));else if(t)return this._addResource(e,i),t}}_findOAuthInfo(e){let t=this.findOAuthInfo(e);if(!t)for(const r of this.oAuthInfos)if(this._isIdProvider(r.portalUrl,e)){t=r;break}return t}_addResource(e,t){t&&-1===this._getIdenticalSvcIdx(e,t)&&t.resources.push(e)}_removeResource(e,t){let r=-1;t&&(r=this._getIdenticalSvcIdx(e,t),r>-1&&t.resources.splice(r,1))}_useProxy(e,t){return t&&t.isAdmin&&!d(e.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(e.tokenServiceUrl)&&\"10.1\"===String(e.currentVersion)&&!d(e.tokenServiceUrl,window.location.href)}_getOrigin(e){const t=new c(e);return t.scheme+\"://\"+t.host+(null!=t.port?\":\"+t.port:\"\")}_getServerInstanceRoot(e){const t=e.toLowerCase();let r=t.indexOf(this._agsRest);return-1===r&&this._isAdminResource(e)&&(r=this._agsAdmin.test(e)?e.replace(this._agsAdmin,\"$1\").length:e.search(this._adminSvcs)),-1===r&&(r=t.indexOf(\"/sharing\")),-1===r&&\"/\"===t.substr(-1)&&(r=t.length-1),r>-1?e.substring(0,r):e}_hasSameServerInstance(e,t){return\"/\"===e.substr(-1)&&(e=e.slice(0,-1)),e=e.toLowerCase(),t=this._getServerInstanceRoot(t).toLowerCase(),e=this._normalizeAGOLorgDomain(e),t=this._normalizeAGOLorgDomain(t),(e=e.substr(e.indexOf(\":\")))===(t=t.substr(t.indexOf(\":\")))}_normalizeAGOLorgDomain(e){const t=/^https?:\\/\\/(?:cdn|[a-z\\d-]+\\.maps)\\.arcgis\\.com/i,r=/^https?:\\/\\/(?:cdndev|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,s=/^https?:\\/\\/(?:cdnqa|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i;return t.test(e)?e=e.replace(t,\"https://www.arcgis.com\"):r.test(e)?e=e.replace(r,\"https://devext.arcgis.com\"):s.test(e)&&(e=e.replace(s,\"https://qaext.arcgis.com\")),e}_sanitizeUrl(e){const t=(n.request.proxyUrl||\"\").toLowerCase(),r=t?e.toLowerCase().indexOf(t+\"?\"):-1;return-1!==r&&(e=e.substring(r+t.length+1)),e=p(e),_(e).path}_isRESTService(e){return e.indexOf(this._agsRest)>-1}_isAdminResource(e){return this._agsAdmin.test(e)||this._adminSvcs.test(e)}_isServerRsrc(e){return this._isRESTService(e)||this._isAdminResource(e)}_isIdenticalService(e,t){let r;if(this._isRESTService(e)&&this._isRESTService(t)){const s=this._getSuffix(e).toLowerCase(),i=this._getSuffix(t).toLowerCase();if(r=s===i,!r){const e=/(.*)\\/(MapServer|FeatureServer).*/gi;r=s.replace(e,\"$1\")===i.replace(e,\"$1\")}}else this._isAdminResource(e)&&this._isAdminResource(t)?r=!0:this._isServerRsrc(e)||this._isServerRsrc(t)||!this._isPortalDomain(e)||(r=!0);return r}_isPortalDomain(e){const t=new c(e.toLowerCase()),r=this._portalConfig;let s=this._gwDomains.some((e=>e.regex.test(t.uri)));return!s&&r&&(s=this._hasSameServerInstance(this._getServerInstanceRoot(r.restBaseUrl),t.uri)),s||n.portalUrl&&(s=d(t,n.portalUrl,!0)),s||(s=this._portals.some((e=>this._hasSameServerInstance(e,t.uri)))),s=s||this._agsPortal.test(t.path),s}_isIdProvider(e,t){let r=-1,s=-1;this._gwDomains.forEach(((i,n)=>{-1===r&&i.regex.test(e)&&(r=n),-1===s&&i.regex.test(t)&&(s=n)}));let i=!1;if(r>-1&&s>-1&&(0===r||4===r?0!==s&&4!==s||(i=!0):1===r?1!==s&&2!==s||(i=!0):2===r?2===s&&(i=!0):3===r&&3===s&&(i=!0)),!i){const r=this.findServerInfo(t),s=r&&r.owningSystemUrl;s&&j(r)&&this._isPortalDomain(s)&&this._isIdProvider(e,s)&&(i=!0)}return i}_getIdenticalSvcIdx(e,t){let r=-1;for(let s=0;s<t.resources.length;s++){const i=t.resources[s];if(this._isIdenticalService(e,i)){r=s;break}}return r}_getSuffix(e){return e.replace(this._regexSDirUrl,\"\").replace(this._regexServerType,\"$1\")}_getTokenSvcUrl(e){let t,r,s;if(this._isRESTService(e)||this._isAdminResource(e)){const s=this._getServerInstanceRoot(e);return t=s+\"/admin/generateToken\",r=x(e=s+\"/rest/info\",{query:{f:\"json\"}}).then((e=>e.data)),{adminUrl:t,promise:r}}if(this._isPortalDomain(e)){let t=\"\";if(this._gwDomains.some((r=>(r.regex.test(e)&&(t=r.tokenServiceUrl),!!t))),t||this._portals.some((r=>(this._hasSameServerInstance(r,e)&&(t=r+this._gwTokenUrl),!!t))),t||(s=e.toLowerCase().indexOf(\"/sharing\"),-1!==s&&(t=e.substring(0,s)+this._gwTokenUrl)),t||(t=this._getOrigin(e)+this._gwTokenUrl),t){const r=new c(e).port;/^http:\\/\\//i.test(e)&&\"7080\"===r&&(t=t.replace(/:7080/i,\":7443\")),t=t.replace(/http:/i,\"https:\")}return t}if(-1!==e.toLowerCase().indexOf(\"premium.arcgisonline.com\"))return\"https://premium.arcgisonline.com/server/tokens\"}_exchangeToken(e,t,r){return x(`${e}/sharing/rest/oauth2/exchangeToken`,{authMode:\"anonymous\",method:\"post\",query:{f:\"json\",client_id:t,token:r}}).then((e=>e.data.token))}_getPortalSelf(e,t){let r;if(this._gwDomains.some((t=>(t.regex.test(e)&&(r=t.customBaseUrl),!!r))),r)return A({allSSL:!0,currentVersion:\"4.4\",customBaseUrl:r,portalMode:\"multitenant\",supportsOAuth:!0});\"https:\"===window.location.protocol?e=e.replace(/^http:/i,\"https:\").replace(/:7080/i,\":7443\"):/^http:/i.test(t)&&(e=e.replace(/^https:/i,\"http:\").replace(/:7443/i,\":7080\"));return x(e,{query:{f:\"json\"},authMode:\"anonymous\",withCredentials:!0}).then((e=>e.data))}_hasPortalSession(){return!!this._getEsriAuthCookie()}_getEsriAuthCookie(){let e=null;if(navigator.cookieEnabled){const t=this._getAllCookies(\"esri_auth\");let r;for(let s=0;s<t.length;s++){const i=JSON.parse(t[s]);if(i.portalApp){e=i;break}r?r.push(i):r=[i]}if(!e&&r)for(const t of r)if(t.urlKey&&window.location.hostname===`${t.urlKey.toLowerCase()}.${t.customBaseUrl}`){e=t;break}}if(e){let t=null;e.expires&&(\"number\"==typeof e.expires?t=e.expires:\"string\"==typeof e.expires&&(t=Date.parse(e.expires)),isNaN(t)&&(t=null),e.expires=t),t&&t<Date.now()&&(e=null)}return e}_getAllCookies(e){const t=[],r=document.cookie.match(new RegExp(\"(?:^|; )\"+o(e)+\"=([^;]*)\",\"g\"));if(r)for(let e=0;e<r.length;e++){let s=r[e];const i=s.indexOf(\"=\");i>-1&&(s=s.substring(i+1),t.push(decodeURIComponent(s)))}return t}_doPortalSignIn(e,t){if(navigator.cookieEnabled){const r=this._getEsriAuthCookie(),s=this._portalConfig,i=window.location.href,n=this.findServerInfo(e);if((t||this.useSignInPage)&&(s||this._isPortalDomain(i)||r)&&(n?n.hasPortal||n.owningSystemUrl&&this._isPortalDomain(n.owningSystemUrl):this._isPortalDomain(e))&&(this._isIdProvider(i,e)||s&&(this._hasSameServerInstance(this._getServerInstanceRoot(s.restBaseUrl),e)||this._isIdProvider(s.restBaseUrl,e))||d(i,e,!0)))return!0}return!1}_canUsePortalSignInWorkflow(e){return this._doPortalSignIn(e)&&(window===window.top||this._hasPortalSession())}_checkProtocol(e,t,r,s){let i=!0;const n=s?t.adminTokenServiceUrl:t.tokenServiceUrl;if(0===n.trim().toLowerCase().indexOf(\"https:\")&&0!==window.location.href.toLowerCase().indexOf(\"https:\")&&f(n)&&(i=!!this._protocolFunc&&!!this._protocolFunc({resourceUrl:e,serverInfo:t}),!i)){r(new l(\"identity-manager:aborted\",\"Aborted the Sign-In process to avoid sending password over insecure connection.\"))}return i}_enqueue(e,t,r,s,i,n){return s||(s=w()),s.resUrl_=e,s.sinfo_=t,s.options_=r,s.admin_=i,s.refresh_=n,this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(e),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(s)):this._xoReqs.push(s):this._doSignIn(s),s.promise}_doSignIn(e){this._busy=e,this._rejectOnPersistedPageShow=!1;const t=t=>{const r=e.options_&&e.options_.resource,s=e.resUrl_,i=e.refresh_;let n=!1;-1===this.credentials.indexOf(t)&&(i&&-1!==this.credentials.indexOf(i)?(i.userId=t.userId,i.token=t.token,i.expires=t.expires,i.validity=t.validity,i.ssl=t.ssl,i.creationTime=t.creationTime,n=!0,t=i):this.credentials.push(t)),t.resources||(t.resources=[]),t.resources.push(r||s),t.scope=this._isServerRsrc(s)?\"server\":\"portal\",t.emitTokenChange();const o=this._soReqs,a={};this._soReqs=[],o.forEach((e=>{if(!this._isIdenticalService(s,e.resUrl_)){const r=this._getSuffix(e.resUrl_);a[r]||(a[r]=!0,t.resources.push(e.resUrl_))}})),e.resolve(t),o.forEach((e=>{this._hasSameServerInstance(this._getServerInstanceRoot(s),e.resUrl_)?e.resolve(t):this._soReqs.push(e)})),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,n||this.emit(\"credential-create\",{credential:t}),this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},r=t=>{e.reject(t),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},s=(s,i,n,o)=>{const a=e.sinfo_,h=!e.options_||!1!==e.options_.prompt,c=a.hasPortal&&this._findOAuthInfo(e.resUrl_);let d,u;if(this._canUsePortalSignInWorkflow(e.resUrl_)){const s=this._getEsriAuthCookie(),i=this._portalConfig;if(s){if(!a.webTierAuth){\"web\"===(s.auth_tier&&s.auth_tier.toLowerCase())&&(a.webTierAuth=!0)}return d=new L({userId:s.email,server:a.server,token:a.webTierAuth?null:s.token,expires:s.expires}),void(d.token?e._pendingDfd=this._exchangeToken(d.server,c?c.appId:\"arcgisonline\",d.token).then((e=>{d.token=e,t(d)})).catch((()=>{t(d)})):t(d))}if(h){let t=\"\";const s=window.location.href;return t=this.signInPage?this.signInPage:i?i.baseUrl+i.signin:this._isIdProvider(s,e.resUrl_)?this._getOrigin(s)+\"/home/signin.html\":a.tokenServiceUrl.replace(this._rePortalTokenSvc,\"\")+\"/home/signin.html\",t=t.replace(/http:/i,\"https:\"),i&&!1===i.useSSL&&(t=t.replace(/https:/i,\"http:\")),void(0===s.toLowerCase().replace(\"https\",\"http\").indexOf(t.toLowerCase().replace(\"https\",\"http\"))?(u=new l(\"identity-manager:unexpected-error\",\"Cannot redirect to Sign-In page from within Sign-In page. URL of the resource that triggered this workflow: \"+e.resUrl_),r(u)):(this._rejectOnPersistedPageShow=!0,this._redirectFunc?this._redirectFunc({signInPage:t,returnUrlParamName:\"returnUrl\",returnUrl:s,resourceUrl:e.resUrl_,serverInfo:a}):window.location.href=t+\"?returnUrl=\"+encodeURIComponent(s)))}u=new l(\"identity-manager:not-authenticated\",\"User is not signed in.\"),r(u)}else if(s)t(new L({userId:s,server:a.server,token:n,expires:null!=o?Number(o):null,ssl:!!i}));else if(c){let s=c._oAuthCred;if(!s){const e=new C(c,window.localStorage),t=new C(c,window.sessionStorage);e.isValid()&&t.isValid()?e.expires>t.expires?(s=e,t.destroy()):(s=t,e.destroy()):s=e.isValid()?e:t,c._oAuthCred=s}if(s.isValid())d=new L({userId:s.userId,server:a.server,token:s.token,expires:s.expires,ssl:s.ssl,_oAuthCred:s}),c.appId!==s.appId&&this._doPortalSignIn(e.resUrl_,!0)?e._pendingDfd=this._exchangeToken(d.server,c.appId,d.token).then((e=>{d.token=e,s.token=e,s.save(),t(d)})).catch((()=>{t(d)})):t(d);else if(this._oAuthHash&&this._oAuthHash.state.portalUrl===c.portalUrl){const e=this._oAuthHash;d=new L({userId:e.username,server:a.server,token:e.access_token,expires:Date.now()+1e3*Number(e.expires_in),ssl:\"true\"===e.ssl,oAuthState:e.state,_oAuthCred:s}),c.userId=d.userId,s.storage=e.persist?window.localStorage:window.sessionStorage,s.token=d.token,s.expires=d.expires,s.userId=d.userId,s.ssl=d.ssl,s.save(),this._oAuthHash=null,t(d)}else h?e._pendingDfd=this.oAuthSignIn(e.resUrl_,a,c,e.options_).then(t,r):(u=new l(\"identity-manager:not-authenticated\",\"User is not signed in.\"),r(u))}else if(h){if(this._checkProtocol(e.resUrl_,a,r,e.admin_)){let s=e.options_;e.admin_&&(s=s||{},s.isAdmin=!0),e._pendingDfd=this.signIn(e.resUrl_,a,s).then(t,r)}}else u=new l(\"identity-manager:not-authenticated\",\"User is not signed in.\"),r(u)},n=()=>{const s=e.sinfo_,i=s.owningSystemUrl,n=e.options_;let o,a,h,l;if(n&&(o=n.token,a=n.error,h=n.prompt),l=this._findCredential(i,{token:o,resource:e.resUrl_}),!l)for(const e of this.credentials)if(this._isIdProvider(i,e.server)){l=e;break}if(l){const i=this.findCredential(e.resUrl_,l.userId);if(i)t(i);else if(q(s,this._legacyFed)){const e=l.toJSON();e.server=s.server,e.resources=null,t(new L(e))}else{(e._pendingDfd=this.generateToken(this.findServerInfo(l.server),null,{serverUrl:e.resUrl_,token:l.token,signal:e.options_.signal,ssl:l.ssl})).then((r=>{t(new L({userId:l.userId,server:s.server,token:r.token,expires:null!=r.expires?Number(r.expires):null,ssl:!!r.ssl,isAdmin:e.admin_,validity:r.validity}))}),r)}}else{this._busy=null,o&&(e.options_.token=null);(e._pendingDfd=this.getCredential(i.replace(/\\/?$/,\"/sharing\"),{resource:e.resUrl_,owningTenant:s.owningTenant,signal:e.options_.signal,token:o,error:a,prompt:h})).then((()=>{this._enqueue(e.resUrl_,e.sinfo_,e.options_,e,e.admin_)}),(e=>{r(e)}))}};this._errbackFunc=r;const o=e.sinfo_.owningSystemUrl,a=this._isServerRsrc(e.resUrl_),h=e.sinfo_._restInfoPms;h?h.promise.then((t=>{const r=e.sinfo_;if(r._restInfoPms){r.adminTokenServiceUrl=r._restInfoPms.adminUrl,r._restInfoPms=null,r.tokenServiceUrl=i(\"authInfo.tokenServicesUrl\",t)||i(\"authInfo.tokenServiceUrl\",t)||i(\"tokenServiceUrl\",t),r.shortLivedTokenValidity=i(\"authInfo.shortLivedTokenValidity\",t),r.currentVersion=t.currentVersion,r.owningTenant=t.owningTenant;const e=r.owningSystemUrl=t.owningSystemUrl;e&&this._portals.push(e)}a&&r.owningSystemUrl?n():s()}),(()=>{e.sinfo_._restInfoPms=null;const t=new l(\"identity-manager:server-identification-failed\",\"Unknown resource - could not find token service endpoint.\");r(t)})):a&&o?n():e.sinfo_._selfReq?e.sinfo_._selfReq.selfDfd.then((t=>{const r={};let s,i,n,o;return t&&(s=t.user&&t.user.username,r.username=s,r.allSSL=t.allSSL,i=t.supportsOAuth,n=t.currentVersion,\"multitenant\"===t.portalMode&&(o=t.customBaseUrl)),e.sinfo_.webTierAuth=!!s,s&&this.normalizeWebTierAuth?this.generateToken(e.sinfo_,null,{ssl:r.allSSL}).catch((()=>null)).then((e=>(r.portalToken=e&&e.token,r.tokenExpiration=e&&e.expires,r))):!s&&i&&parseFloat(n)>=4.4&&!this._canUsePortalSignInWorkflow(e.resUrl_)?this._generateOAuthInfo({portalUrl:e.sinfo_.server,customBaseUrl:o,owningTenant:e.sinfo_._selfReq.owningTenant}).catch((()=>null)).then((()=>r)):r})).catch((()=>null)).then((t=>{e.sinfo_._selfReq=null,t?s(t.username,t.allSSL,t.portalToken,t.tokenExpiration):s()})):s()}_generateOAuthInfo(e){let t,r,s=e.portalUrl;const i=e.customBaseUrl,n=e.owningTenant,o=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal;if(o){r=window.location.href;let e=r.indexOf(\"?\");e>-1&&(r=r.slice(0,e)),e=r.search(/\\/(apps|home)\\//),r=e>-1?r.slice(0,e):null}return o&&r?(this._hasTestedIfAppIsOnPortal=!0,t=x(r+\"/sharing/rest\",{query:{f:\"json\"}}).then((()=>{this.defaultOAuthInfo=new P({appId:\"arcgisonline\",popup:!0,popupCallbackUrl:r+\"/home/oauth-callback.html\"})}))):t=A(),t.then((()=>{if(this.defaultOAuthInfo)return s=s.replace(/^http:/i,\"https:\"),x(s+\"/sharing/rest/oauth2/validateRedirectUri\",{query:{accountId:n,client_id:this.defaultOAuthInfo.appId,redirect_uri:g(this.defaultOAuthInfo.popupCallbackUrl),f:\"json\"}}).then((e=>{if(e.data.valid){const t=this.defaultOAuthInfo.clone();e.data.urlKey&&i?t.portalUrl=\"https://\"+e.data.urlKey.toLowerCase()+\".\"+i:t.portalUrl=s,this.oAuthInfos.push(t)}}))}))}_doOAuthSignIn(e,r,s){const i={portalUrl:s.portalUrl};!s.popup&&s.preserveUrlHash&&window.location.hash&&(i.hash=window.location.hash);const n={client_id:s.appId,response_type:\"token\",state:JSON.stringify(i),expiration:s.expiration,locale:s.locale,redirect_uri:s.popup?g(s.popupCallbackUrl):window.location.href.replace(/#.*$/,\"\")};s.forceLogin&&(n.force_login=!0),s.forceUserId&&s.userId&&(n.prepopulatedusername=s.userId);const o=s.portalUrl.replace(/^http:/i,\"https:\")+\"/sharing/oauth2/authorize\",a=o+\"?\"+m(n);if(s.popup){const e=window.open(a,\"esriJSAPIOAuth\",s.popupWindowFeatures);if(e)e.focus(),this._oAuthDfd.oAuthWin_=e,this._oAuthIntervalId=setInterval((()=>{if(e.closed){clearInterval(this._oAuthIntervalId),this._oAuthOnHashHandle.remove();const e=this._oAuthDfd;if(e){const t=new l(\"identity-manager:user-aborted\",\"ABORTED\");e.reject(t)}}}),500),this._oAuthOnHashHandle=v(t,\"arcgis:auth:hash\",(e=>{this.setOAuthResponseHash(e.detail)}));else{const e=new l(\"identity-manager:popup-blocked\",\"ABORTED\");this._oAuthDfd.reject(e)}}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:n,authorizeUrl:o,resourceUrl:e,serverInfo:r,oAuthInfo:s}):window.location.href=a}};E=e([h(\"esri.identity.IdentityManagerBase\")],E);let L=class extends U.EventedAccessor{constructor(e){super(e),this._oAuthCred=null,this.tokenRefreshBuffer=2,e&&e._oAuthCred&&(this._oAuthCred=e._oAuthCred)}initialize(){this.resources=this.resources||[],null==this.creationTime&&(this.creationTime=Date.now())}refreshToken(){const e=y.findServerInfo(this.server),t=e&&e.owningSystemUrl,r=!!t&&\"server\"===this.scope,s=r&&q(e,y._legacyFed),i=e.webTierAuth,n=i&&y.normalizeWebTierAuth,o=D[this.server],a=o&&o[this.userId];let h,l,c=this.resources&&this.resources[0],d=r&&y.findServerInfo(t),u={username:this.userId,password:a};if((!i||n)&&(r&&!d&&y.serverInfos.some((e=>(y._isIdProvider(t,e.server)&&(d=e),!!d))),h=d&&y.findCredential(d.server,this.userId),!r||h)){if(!s){if(r)l={serverUrl:c,token:h&&h.token,ssl:h&&h.ssl};else if(n)u=null,l={ssl:this.ssl};else{if(!a){let t;return c&&(c=y._sanitizeUrl(c),this._enqueued=1,t=y._enqueue(c,e,null,null,this.isAdmin,this),t.then((()=>{this._enqueued=0,this.refreshServerTokens()})).catch((()=>{this._enqueued=0}))),t}this.isAdmin&&(l={isAdmin:!0})}return y.generateToken(r?d:e,r?null:u,l).then((e=>{this.token=e.token,this.expires=null!=e.expires?Number(e.expires):null,this.creationTime=Date.now(),this.validity=e.validity,this.emitTokenChange(),this.refreshServerTokens()})).catch((()=>{}))}h.refreshToken()}}refreshServerTokens(){\"portal\"===this.scope&&y.credentials.forEach((e=>{const t=y.findServerInfo(e.server),r=t&&t.owningSystemUrl;e!==this&&e.userId===this.userId&&r&&\"server\"===e.scope&&(y._hasSameServerInstance(this.server,r)||y._isIdProvider(r,this.server))&&(q(t,y._legacyFed)?(e.token=this.token,e.expires=this.expires,e.creationTime=this.creationTime,e.validity=this.validity,e.emitTokenChange()):e.refreshToken())}))}emitTokenChange(e){clearTimeout(this._refreshTimer);const t=this.server&&y.findServerInfo(this.server),r=t&&t.owningSystemUrl,s=r&&y.findServerInfo(r);!1===e||r&&\"portal\"!==this.scope&&(!s||!s.webTierAuth||y.normalizeWebTierAuth)||null==this.expires&&null==this.validity||this._startRefreshTimer(),this.emit(\"token-change\")}destroy(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null,this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);const e=y.credentials.indexOf(this);e>-1&&y.credentials.splice(e,1),this.emitTokenChange(),this.emit(\"destroy\")}toJSON(){const e=s({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),t=this.resources;return t&&t.length>0&&(e.resources=t.slice()),e}_startRefreshTimer(){clearTimeout(this._refreshTimer);const e=6e4*this.tokenRefreshBuffer;let t=(this.validity?this.creationTime+6e4*this.validity:this.expires)-Date.now();t<0&&(t=0),this._refreshTimer=setTimeout(this.refreshToken.bind(this),t>e?t-e:t)}};e([a()],L.prototype,\"creationTime\",void 0),e([a()],L.prototype,\"expires\",void 0),e([a()],L.prototype,\"isAdmin\",void 0),e([a()],L.prototype,\"oAuthState\",void 0),e([a()],L.prototype,\"resources\",void 0),e([a()],L.prototype,\"scope\",void 0),e([a()],L.prototype,\"server\",void 0),e([a()],L.prototype,\"ssl\",void 0),e([a()],L.prototype,\"token\",void 0),e([a()],L.prototype,\"tokenRefreshBuffer\",void 0),e([a()],L.prototype,\"userId\",void 0),e([a()],L.prototype,\"validity\",void 0),L=e([h(\"esri.identity.Credential\")],L);export{L as Credential,E as IdentityManagerBase};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../chunks/tslib.es6.js\";import{subclass as e}from\"../core/accessorSupport/decorators/subclass.js\";import{setId as r}from\"../kernel.js\";import{IdentityManagerBase as t}from\"./IdentityManagerBase.js\";let o=class extends t{};o=s([e(\"esri.identity.IdentityManager\")],o);const a=new o;r(a);export default a;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{splitProps as e}from\"./propUtils.js\";function t(t){return a=>{a.hasOwnProperty(\"_delegatedEventNames\")||(a._delegatedEventNames=a._delegatedEventNames?a._delegatedEventNames.slice():[]);const r=a._delegatedEventNames,s=Array.isArray(t)?t:e(t);r.push(...s)}}export{t as vmEvent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nexport{additionalAllowedTags,classes,cssTransition,discardNode,getThemeName,isDarkTheme,isRTL,keepMenuItemWithinView,renderingSanitizer,safeAttrs,storeNode}from\"./widgetUtils.js\";export{accessibleHandler}from\"./decorators/accessibleHandler.js\";export{messageBundle}from\"./decorators/messageBundle.js\";export{renderable}from\"./decorators/renderable.js\";export{vmEvent}from\"./decorators/vmEvent.js\";export{j as tsx}from\"../../chunks/index.js\";function e(e){return e&&\"function\"==typeof e.render}function r(e){return e&&\"function\"==typeof e.postMixInProperties&&\"function\"==typeof e.buildRendering&&\"function\"==typeof e.postCreate&&\"function\"==typeof e.startup}export{r as hasDomNode,e as isWidget};\n"],"sourceRoot":""}