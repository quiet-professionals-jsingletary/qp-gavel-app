(this["webpackJsonpqp-ampd-app"]=this["webpackJsonpqp-ampd-app"]||[]).push([[70],{1097:function(e,t,n){"use strict";n.r(t),n.d(t,"executeScript",(function(){return te})),n.d(t,"extend",(function(){return ee})),n.d(t,"extractFieldLiterals",(function(){return ne})),n.d(t,"findFunctionCalls",(function(){return oe})),n.d(t,"functionHelper",(function(){return $})),n.d(t,"referencesFunction",(function(){return ae})),n.d(t,"referencesMember",(function(){return ce})),n.d(t,"validateScript",(function(){return re}));var r=n(15),c=n(16),a=n(39),o=n(107),i=n(50),u=n(57),l=n(153),s=n(132),f=n(131),b=n(1017),h=n(913),O=n(962),d=n(867),p=n(880),v=n(939),j=n(914),w=n(866),g=n(886),E=n(938),y=n(1018),m=n(1019),I=n(1020),N=n(1022),S=n(1023),T=n(1054),R=n(1091);function P(e){return e instanceof Error?Object(c.r)(e):Object(c.r)(new Error(e))}function C(e){return Object(c.s)(e)}function U(e,t){for(var n=[],r=0;r<t.arguments.length;r++)n.push(F(e,t.arguments[r]));return Object(c.b)(n)}function A(e,t,n){return Object(c.c)((function(r,c){U(e,t).then((function(a){try{r(n(e,t,a))}catch(r){c(r)}}),c)}))}function M(e,t,n){try{return U(e,t).then((function(r){try{var a=n(e,t,r);return(o=a)&&"function"==typeof o.then?a:Object(c.s)(a)}catch(e){return P(e)}var o}))}catch(e){return P(e)}}function F(e,t){try{switch(t.type){case"VariableDeclarator":return function(e,t){try{var n=null;return n=null===t.init?Object(c.s)(null):F(e,t.init),null!==e.localScope?n.then((function(n){return Object(c.c)((function(r){if(n===d.P&&(n=null),"Identifier"!==t.id.type)throw new Error("Can only assign a regular variable");var c=t.id.name.toLowerCase();e.localScope[c]={value:n,valueset:!0,node:t.init},r(d.P)}))})):n.then((function(n){return Object(c.c)((function(r){if("Identifier"!==t.id.type)throw new Error("Can only assign a regular variable");var c=t.id.name.toLowerCase();n===d.P&&(n=null),e.globalScope[c]={value:n,valueset:!0,node:t.init},r(d.P)}))}))}catch(r){return P(r)}}(e,t);case"VariableDeclaration":return function e(t,n,r){return Object(c.c)((function(c,a){r>=n.declarations.length?c(d.P):F(t,n.declarations[r]).then((function(){r===n.declarations.length-1?c(d.P):e(t,n,r+1).then((function(){c(d.P)}),a)}),a)}))}(e,t,0);case"BlockStatement":return function(e,t){try{return function t(n,r,a){try{return a>=r.body.length?Object(c.s)(d.P):Object(c.c)((function(e,c){F(n,r.body[a]).then((function(o){try{o instanceof d.r||o===d.R||o===d.S||a===r.body.length-1?e(o):t(n,r,a+1).then(e,c)}catch(e){c(e)}}),c)}))}catch(e){return P(e)}}(e,t,0)}catch(e){return P(e)}}(e,t);case"FunctionDeclaration":return function(e,t){try{var n=t.id.name.toLowerCase();return e.globalScope[n]={valueset:!0,node:null,value:new b.a(t,e)},Object(c.s)(d.P)}catch(e){return P(e)}}(e,t);case"ReturnStatement":return n=e,a=t,Object(c.c)((function(e,t){null===a.argument?e(new d.r(d.P)):F(n,a.argument).then((function(n){try{e(new d.r(n))}catch(e){t(e)}}),t)}));case"IfStatement":return function(e,t){return Object(c.c)((function(n,r){"AssignmentExpression"!==t.test.type&&"UpdateExpression"!==t.test.type?F(e,t.test).then((function(c){try{!0===c?F(e,t.consequent).then(n,r):!1===c?null!==t.alternate?F(e,t.alternate).then(n,r):n(d.P):r(new Error(Object(E.f)(t.test,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION")))}catch(n){r(n)}}),r):r(new Error(Object(E.f)(t.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION")))}))}(e,t);case"ExpressionStatement":return function(e,t){try{return"AssignmentExpression"===t.expression.type?F(e,t.expression):(t.expression.type,F(e,t.expression).then((function(e){return Object(c.c)((function(t){t(e===d.P?d.P:new d.i(e))}))})))}catch(n){return Object(c.r)(n)}}(e,t);case"UpdateExpression":return function(e,t){try{var n=t.argument;if("MemberExpression"===n.type){var r={t:null};return F(e,n.object).then((function(t){var a=null;return r.t=t,!0===n.computed?a=F(e,n.property):"Identifier"===n.property.type&&(a=Object(c.s)(n.property.name)),a})).then((function(e){return Object(c.c)((function(n){var c,a=r.t;if(Object(d.B)(a)){if(!Object(d.u)(e))throw new Error("Invalid Parameter");if(e<0&&(e=a.length+e),e<0||e>=a.length)throw new Error("Assignment outside of array bounds");c=Object(d.w)(a[e]),a[e]="++"===t.operator?c+1:c-1}else if(a instanceof p.a){if(!1===Object(d.v)(e))throw new Error("Dictionary accessor must be a string");if(!0!==a.hasField(e))throw new Error("Invalid Parameter");c=Object(d.w)(a.field(e)),a.setField(e,"++"===t.operator?c+1:c-1)}else{if(!(a instanceof g.a))throw Object(d.I)(a)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===Object(d.v)(e))throw new Error("Feature accessor must be a string");if(!0!==a.hasField(e))throw new Error("Invalid Parameter");c=Object(d.w)(a.field(e)),a.setField(e,"++"===t.operator?c+1:c-1)}!1===t.prefix?n(c):n("++"===t.operator?c+1:c-1)}))}))}return Object(c.c)((function(n,r){var c,a="Identifier"===t.argument.type?t.argument.name.toLowerCase():"";if(!a)throw new Error("Invalid identifier");return null!==e.localScope&&void 0!==e.localScope[a]?(c=Object(d.w)(e.localScope[a].value),e.localScope[a]={value:"++"===t.operator?c+1:c-1,valueset:!0,node:t},void(!1===t.prefix?n(c):n("++"===t.operator?c+1:c-1))):void 0!==e.globalScope[a]?(c=Object(d.w)(e.globalScope[a].value),e.globalScope[a]={value:"++"===t.operator?c+1:c-1,valueset:!0,node:t},void(!1===t.prefix?n(c):n("++"===t.operator?c+1:c-1))):void r(new Error("Variable not recognised"))}))}catch(a){return Object(c.r)(a)}}(e,t);case"AssignmentExpression":return function(e,t){return Object(c.c)((function(n,r){var a=t.left;if("MemberExpression"===a.type)F(e,t.right).then((function(o){try{F(e,a.object).then((function(i){try{var u=null;if(!0===a.computed)u=F(e,a.property);else{if("Identifier"!==a.property.type)throw new Error("Expected computed or identifier for assignemnt target");u=Object(c.s)(a.property.name)}u.then((function(e){try{if(Object(d.B)(i)){if(!Object(d.u)(e))throw new Error("Invalid Parameter");if(e<0&&(e=i.length+e),e<0||e>i.length)throw new Error("Assignment outside of array bounds");if(e===i.length){if("="!==t.operator)throw new Error("Invalid Parameter");i[e]=k(o,t.operator,i[e],t)}else i[e]=k(o,t.operator,i[e],t)}else if(i instanceof p.a){if(!1===Object(d.v)(e))throw new Error("Dictionary accessor must be a string");if(!0===i.hasField(e))i.setField(e,k(o,t.operator,i.field(e),t));else{if("="!==t.operator)throw new Error("Invalid Parameter");i.setField(e,k(o,t.operator,null,t))}}else{if(!(i instanceof g.a))throw Object(d.I)(i)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===Object(d.v)(e))throw new Error("Feature accessor must be a string");if(!0===i.hasField(e))i.setField(e,k(o,t.operator,i.field(e),t));else{if("="!==t.operator)throw new Error("Invalid Parameter");i.setField(e,k(o,t.operator,null,t))}}n(d.P)}catch(n){r(n)}}),r)}catch(n){r(n)}}),r)}catch(n){r(n)}}),r);else{var o=a.name.toLowerCase();if(null!==e.localScope&&void 0!==e.localScope[o])return void F(e,t.right).then((function(c){try{e.localScope[o]={value:k(c,t.operator,e.localScope[o].value,t),valueset:!0,node:t.right},n(d.P)}catch(n){r(n)}}),r);void 0!==e.globalScope[o]?F(e,t.right).then((function(c){try{e.globalScope[o]={value:k(c,t.operator,e.globalScope[o].value,t),valueset:!0,node:t.right},n(d.P)}catch(n){r(n)}}),r):r(new Error("Cannot assign undeclared variable"))}}))}(e,t);case"ForStatement":return function(e,t){try{return null!==t.init?F(e,t.init).then((function(){return Object(c.c)((function(n,r){D(e,t,{testResult:!0,lastAction:d.P},(function(e){n(e)}),(function(e){r(e)}),0)}))})):Object(c.c)((function(n,r){D(e,t,{testResult:!0,lastAction:d.P},(function(e){n(e)}),(function(e){r(e)}),0)}))}catch(n){return Object(c.r)(n)}}(e,t);case"ForInStatement":return function(e,t){return Object(c.c)((function(n,r){F(e,t.right).then((function(a){try{("VariableDeclaration"===t.left.type?F(e,t.left):Object(c.s)()).then((function(){try{var c="";if("VariableDeclaration"===t.left.type){var o=t.left.declarations[0].id;"Identifier"===o.type&&(c=o.name)}else"Identifier"===t.left.type&&(c=t.left.name);if(!c)throw new Error(Object(E.f)(t,"RUNTIME","INVALIDVARIABLE"));c=c.toLowerCase();var i=null;if(null!==e.localScope&&void 0!==e.localScope[c]&&(i=e.localScope[c]),null===i&&void 0!==e.globalScope[c]&&(i=e.globalScope[c]),null===i)return void r(new Error(Object(E.f)(t,"RUNTIME","VARIABLENOTDECLARED")));Object(d.B)(a)||Object(d.v)(a)?L(e,t,a,{reject:r,resolve:n},i):Object(d.I)(a)?function(e,t,n,r,c,a){try{if(void 0===a&&(a="i"),0===n.length)return void r.resolve(d.P);!function e(t,n,r,c,a,o,i,u,l){try{if(r.length()<=a)return void i(d.P);c.value="k"===o?r.get(a):a,F(t,n.body).then((function(s){s instanceof d.r?i(s):s===d.R?i(d.P):++l>100?(l=0,setTimeout((function(){e(t,n,r,c,a+1,o,i,u,l)}),0)):e(t,n,r,c,a+1,o,i,u,l)}),(function(e){u(e)}))}catch(t){u(t)}}(e,t,n,c,0,a,(function(e){r.resolve(e)}),(function(e){r.reject(e)}),0)}catch(e){r.reject(e)}}(e,t,a,{reject:r,resolve:n},i):a instanceof p.a||a instanceof g.a?function(e,t,n,r,c){try{L(e,t,n.keys(),r,c,"k")}catch(e){r.reject(e)}}(e,t,a,{reject:r,resolve:n},i):Object(d.T)(a)?function e(t,n,r,c,a,o,i,u){try{t.next().then((function(l){try{if(null===l)o(d.P);else{var s=g.a.createFromGraphicLikeObject(l.geometry,l.attributes,c);s._underlyingGraphic=l,a.value=s,F(n,r.body).then((function(l){try{l===d.R?o(d.P):l instanceof d.r?o(l):++u>100?(u=0,setTimeout((function(){e(t,n,r,c,a,o,i,u)}),0)):e(t,n,r,c,a,o,i,u)}catch(t){i(t)}}),(function(e){i(e)}))}}catch(t){i(t)}}),(function(e){i(e)}))}catch(t){i(t)}}(a.iterator(e.abortSignal),e,t,a,i,(function(e){n(e)}),(function(e){r(e)}),0):L(e,t,[],{reject:r,resolve:n},i)}catch(n){r(n)}}),r)}catch(n){r(n)}}),r)}))}(e,t);case"BreakStatement":return Object(c.s)(d.R);case"EmptyStatement":return Object(c.s)(d.P);case"ContinueStatement":return Object(c.s)(d.S);case"TemplateElement":return function(e,t){return Object(c.s)(t.value?t.value.cooked:"")}(0,t);case"TemplateLiteral":return function(e,t){return Object(c.c)((function(n){var c=[];Object(w.o)(t.expressions,(function(t,n,r,a){return F(e,n).then((function(e){c[r]=Object(d.y)(e)}))})).then((function(){var e,a="",o=0,i=Object(r.a)(t.quasis);try{for(i.s();!(e=i.n()).done;){var u=e.value;a+=u.value?u.value.cooked:"",!1===u.tail&&(a+=c[o]?c[o]:"",o++)}}catch(l){i.e(l)}finally{i.f()}n(a)}))}))}(e,t);case"Identifier":return V(e,t);case"MemberExpression":return function(e,t){try{return F(e,t.object).then((function(n){try{return null===n?Object(c.r)(new Error(Object(E.f)(t,"RUNTIME","NOTFOUND"))):!1===t.computed?"Identifier"===t.property.type?n instanceof p.a||n instanceof g.a?Object(c.s)(n.field(t.property.name)):n instanceof o.a?Object(c.s)(B(n,t.property.name,e,t)):Object(c.r)(new Error(Object(E.f)(t,"RUNTIME","INVALIDTYPE"))):Object(c.r)(new Error(Object(E.f)(t,"RUNTIME","INVALIDTYPE"))):F(e,t.property).then((function(r){return Object(c.c)((function(c,a){if(n instanceof p.a||n instanceof g.a)Object(d.v)(r)?c(n.field(r)):a(new Error(Object(E.f)(t,"RUNTIME","INVALIDTYPE")));else if(n instanceof o.a)Object(d.v)(r)?c(B(n,r,e,t)):a(new Error(Object(E.f)(t,"RUNTIME","INVALIDTYPE")));else if(Object(d.B)(n))if(Object(d.u)(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=n.length+r),r>=n.length||r<0)throw new Error(Object(E.f)(t,"RUNTIME","OUTOFBOUNDS"));c(n[r])}else a(new Error(Object(E.f)(t,"RUNTIME","INVALIDTYPE")));else if(Object(d.I)(n))if(Object(d.u)(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=n.length()+r),r>=n.length()||r<0)throw new Error(Object(E.f)(t,"RUNTIME","OUTOFBOUNDS"));c(n.get(r))}else a(new Error(Object(E.f)(t,"RUNTIME","INVALIDTYPE")));else if(Object(d.v)(n))if(Object(d.u)(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=n.length+r),r>=n.length||r<0)throw new Error(Object(E.f)(t,"RUNTIME","OUTOFBOUNDS"));c(n[r])}else a(new Error(Object(E.f)(t,"RUNTIME","INVALIDTYPE")));else a(new Error(Object(E.f)(t,"RUNTIME","INVALIDTYPE")))}))}))}catch(r){return P(r)}}))}catch(n){return P(n)}}(e,t);case"Literal":return C(t.value);case"CallExpression":return function(e,t){try{if("Identifier"!==t.callee.type)return P(Object(E.f)(t,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==e.localScope&&void 0!==e.localScope[t.callee.name.toLowerCase()]){var n=e.localScope[t.callee.name.toLowerCase()];return n.value instanceof d.n?n.value.fn(e,t):n.value instanceof b.a?J(e,t,n.value.definition):P(Object(E.f)(t,"RUNTIME","NOTAFUNCTION"))}if(void 0!==e.globalScope[t.callee.name.toLowerCase()]){var r=e.globalScope[t.callee.name.toLowerCase()];return r.value instanceof d.n?r.value.fn(e,t):r.value instanceof b.a?J(e,t,r.value.definition):P(Object(E.f)(t,"RUNTIME","NOTAFUNCTION"))}return P(Object(E.f)(t,"RUNTIME","NOTFOUND"))}catch(e){return P(e)}}(e,t);case"UnaryExpression":return function(e,t){try{return F(e,t.argument).then((function(e){return Object(c.c)((function(n,r){Object(d.C)(e)&&"!"===t.operator?n(!e):"-"===t.operator?n(-1*Object(d.w)(e)):"+"===t.operator?n(1*Object(d.w)(e)):"~"===t.operator?n(~Object(d.w)(e)):r(new Error(Object(E.f)(t,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR")))}))}))}catch(n){return P(n)}}(e,t);case"BinaryExpression":return function(e,t){try{return Object(c.b)([F(e,t.left),F(e,t.right)]).then((function(e){return Object(c.c)((function(n,r){var c=e[0],a=e[1];switch(t.operator){case"|":case"<<":case">>":case">>>":case"^":case"&":n(Object(d.O)(Object(d.w)(c),Object(d.w)(a),t.operator));case"==":n(Object(d.H)(c,a));break;case"!=":n(!Object(d.H)(c,a));break;case"<":case">":case"<=":case">=":n(Object(d.M)(c,a,t.operator));break;case"+":Object(d.v)(c)||Object(d.v)(a)?n(Object(d.y)(c)+Object(d.y)(a)):n(Object(d.w)(c)+Object(d.w)(a));break;case"-":n(Object(d.w)(c)-Object(d.w)(a));break;case"*":n(Object(d.w)(c)*Object(d.w)(a));break;case"/":n(Object(d.w)(c)/Object(d.w)(a));break;case"%":n(Object(d.w)(c)%Object(d.w)(a));break;default:r(new Error(Object(E.f)(t,"RUNTIME","OPERATORNOTRECOGNISED")))}}))}))}catch(n){return P(n)}}(e,t);case"LogicalExpression":return function(e,t){return Object(c.c)((function(n,r){"AssignmentExpression"!==t.left.type&&"UpdateExpression"!==t.left.type?"AssignmentExpression"!==t.right.type&&"UpdateExpression"!==t.right.type?F(e,t.left).then((function(c){try{if(!Object(d.C)(c))throw new Error(Object(E.f)(t,"RUNTIME","ONLYBOOLEAN"));switch(t.operator){case"||":!0===c?n(c):F(e,t.right).then((function(e){try{if(!Object(d.C)(e))throw new Error(Object(E.f)(t,"RUNTIME","ONLYORORAND"));n(e)}catch(n){r(n)}}),r);break;case"&&":!1===c?n(c):F(e,t.right).then((function(e){try{if(!Object(d.C)(e))throw new Error(Object(E.f)(t,"RUNTIME","ONLYORORAND"));n(e)}catch(n){r(n)}}),r);break;default:throw new Error(Object(E.f)(t,"RUNTIME","ONLYORORAND"))}}catch(n){r(n)}}),r):r(new Error(Object(E.f)(t.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"))):r(new Error(Object(E.f)(t.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION")))}))}(e,t);case"ConditionalExpression":return P(Object(E.f)(t,"RUNTIME","NOTSUPPORTED"));case"ArrayExpression":return function(e,t){try{for(var n=[],r=0;r<t.elements.length;r++)n.push(F(e,t.elements[r]));return Object(c.b)(n).then((function(e){return Object(c.c)((function(n,r){for(var c=0;c<e.length;c++){if(Object(d.K)(e[c]))return void r(new Error(Object(E.f)(t,"RUNTIME","FUNCTIONCONTEXTILLEGAL")));e[c]===d.P&&(e[c]=null)}n(e)}))}))}catch(a){return P(a)}}(e,t);case"ObjectExpression":return function(e,t){try{for(var n=[],r=0;r<t.properties.length;r++)n.push(F(e,t.properties[r]));return Object(c.b)(n).then((function(e){return Object(c.c)((function(t){for(var n={},r=0;r<e.length;r++){var c=e[r];if(Object(d.K)(c.value))throw new Error("Illegal Argument");if(!1===Object(d.v)(c.key))throw new Error("Illegal Argument");c.value===d.P?n[c.key.toString()]=null:n[c.key.toString()]=c.value}var a=new p.a(n);a.immutable=!1,t(a)}))}))}catch(a){return P(a)}}(e,t);case"Property":return function(e,t){try{return F(e,t.value).then((function(n){return Object(c.c)((function(r){"Identifier"===t.key.type?r({key:t.key.name,value:n}):F(e,t.key).then((function(e){r({key:e,value:n})}))}))}))}catch(n){return Object(c.r)(n)}}(e,t);default:return P(Object(E.f)(t,"RUNTIME","UNREOGNISED"))}}catch(i){return P(i)}var n,a}function x(e,t,n){try{return F(e,t.body).then((function(r){try{return n.lastAction=r,n.lastAction===d.R||n.lastAction instanceof d.r?(n.testResult=!1,Object(c.s)(n)):null!==t.update?F(e,t.update).then((function(){return Object(c.s)(n)})):Object(c.s)(n)}catch(e){return Object(c.r)(e)}}))}catch(e){return Object(c.r)(e)}}function D(e,t,n,r,a,o){try{(function(e,t,n){try{return null!==t.test?F(e,t.test).then((function(r){try{return!0===e.abortSignal.aborted?Object(c.r)(new Error("Cancelled")):(n.testResult=r,!1===n.testResult?Object(c.s)(n):!0!==n.testResult?Object(c.r)(new Error(Object(E.f)(t,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"))):x(e,t,n))}catch(e){return Object(c.r)(e)}})):x(e,t,n)}catch(e){return Object(c.r)(e)}})(e,t,n).then((function(){try{!0===n.testResult?++o>100?(o=0,setTimeout((function(){D(e,t,n,r,a,o)}),0)):D(e,t,n,r,a,o):n.lastAction instanceof d.r?r(n.lastAction):r(d.P)}catch(e){a(e)}}),(function(e){a(e)}))}catch(e){a(e)}}function L(e,t,n,r,c,a){try{if(void 0===a&&(a="i"),0===n.length)return void r.resolve(d.P);!function e(t,n,r,c,a,o,i,u,l,s){try{if(c<=o)return void u(d.P);a.value="k"===i?r[o]:o,F(t,n.body).then((function(f){try{f instanceof d.r?u(f):f===d.R?u(d.P):++s>100?(s=0,setTimeout((function(){e(t,n,r,c,a,o+1,i,u,l,s)}),0)):e(t,n,r,c,a,o+1,i,u,l,s)}catch(t){l(t)}}),(function(e){l(e)}))}catch(t){l(t)}}(e,t,n,n.length,c,0,a,(function(e){r.resolve(e)}),(function(e){r.reject(e)}),0)}catch(e){r.reject(e)}}function k(e,t,n,r){switch(t){case"=":return e===d.P?null:e;case"/=":return Object(d.w)(n)/Object(d.w)(e);case"*=":return Object(d.w)(n)*Object(d.w)(e);case"-=":return Object(d.w)(n)-Object(d.w)(e);case"+=":return Object(d.v)(n)||Object(d.v)(e)?Object(d.y)(n)+Object(d.y)(e):Object(d.w)(n)+Object(d.w)(e);case"%=":return Object(d.w)(n)%Object(d.w)(e);default:throw new Error(Object(E.f)(r,"RUNTIME","OPERATORNOTRECOGNISED"))}}var _=0;function B(e,t,n,r){var c;switch(t=t.toLowerCase()){case"hasz":var a=e.hasZ;return void 0!==a&&a;case"hasm":var o=e.hasM;return void 0!==o&&o;case"spatialreference":var i=e.spatialReference._arcadeCacheId;if(void 0===i){var u=!0;Object.freeze&&Object.isFrozen(e.spatialReference)&&(u=!1),u&&(_++,e.spatialReference._arcadeCacheId=_,i=_)}var l=new p.a({wkt:e.spatialReference.wkt,wkid:e.spatialReference.wkid});return void 0!==i&&(l._arcadeCacheId="SPREF"+i.toString()),l}switch(e.type){case"extent":switch(t){case"xmin":case"xmax":case"ymin":case"ymax":case"zmin":case"zmax":case"mmin":case"mmax":var s=e[t];return void 0!==s?s:null;case"type":return"Extent"}break;case"polygon":switch(t){case"rings":return void 0===(c=e.cache._arcadeCacheId)&&(c=++_,e.cache._arcadeCacheId=c),new O.a(e.rings,e.spatialReference,!0===e.hasZ,!0===e.hasM,c);case"type":return"Polygon"}break;case"point":switch(t){case"x":case"y":case"z":case"m":return void 0!==e[t]?e[t]:null;case"type":return"Point"}break;case"polyline":switch(t){case"paths":return void 0===(c=e.cache._arcadeCacheId)&&(c=++_,e.cache._arcadeCacheId=c),new O.a(e.paths,e.spatialReference,!0===e.hasZ,!0===e.hasM,c);case"type":return"Polyline"}break;case"multipoint":switch(t){case"points":return void 0===(c=e.cache._arcadeCacheId)&&(c=++_,e.cache._arcadeCacheId=c),new h.a(e.points,e.spatialReference,!0===e.hasZ,!0===e.hasM,c,1);case"type":return"Multipoint"}}throw new Error(Object(E.f)(r,"RUNTIME","PROPERTYNOTFOUND"))}function V(e,t){return Object(c.c)((function(n,r){var c=t.name.toLowerCase();if(null===e.localScope||void 0===e.localScope[c])if(void 0===e.globalScope[c])r(new Error(Object(E.f)(t,"RUNTIME","VARIABLENOTFOUND")));else{var a=e.globalScope[c];!0===a.valueset?n(a.value):null!==a.d?a.d.then(n,r):(a.d=F(e,a.node),a.d.then((function(e){try{a.value=e,a.valueset=!0,n(e)}catch(n){r(n)}}),r))}else{var o=e.localScope[c];!0===o.valueset?n(o.value):null!==o.d?o.d.then(n,r):(o.d=F(e,o.node),o.d.then((function(e){try{o.value=e,o.valueset=!0,n(e)}catch(n){r(n)}}),r))}}))}var Y={};function G(e){return null===e?"":Object(d.B)(e)||Object(d.I)(e)?"Array":Object(d.z)(e)?"Date":Object(d.v)(e)?"String":Object(d.C)(e)?"Boolean":Object(d.u)(e)?"Number":e instanceof j.a?"Attachment":e instanceof v.a?"Portal":e instanceof p.a?"Dictionary":e instanceof g.a?"Feature":e instanceof i.a?"Point":e instanceof s.a?"Polygon":e instanceof f.a?"Polyline":e instanceof l.a?"Multipoint":e instanceof u.a?"Extent":Object(d.K)(e)?"Function":Object(d.T)(e)?"FeatureSet":Object(d.a)(e)?"FeatureSetCollection":e===d.P?"":"number"==typeof e&&isNaN(e)?"Number":"Unrecognised Type"}function H(e,t){try{var n=e.length,r=Math.floor(n/2);return 0===n?Object(c.s)([]):1===n?Object(c.s)([e[0]]):Object(c.c)((function(a,o){var i=[H(e.slice(0,r),t),H(e.slice(r,n),t)];Object(c.b)(i).then((function(e){try{(function e(t,n,r,a){return Object(c.c)((function(c,o){var i=a;t.length>0||n.length>0?t.length>0&&n.length>0?r(t[0],n[0]).then((function(u){try{isNaN(u)&&(u=1),u<=0?(i.push(t[0]),t=t.slice(1)):(i.push(n[0]),n=n.slice(1)),e(t,n,r,a).then(c,o)}catch(c){o(c)}}),o):t.length>0?(i.push(t[0]),e(t=t.slice(1),n,r,a).then(c,o)):n.length>0&&(i.push(n[0]),n=n.slice(1),e(t,n,r,a).then(c,o)):c(a)}))})(e[0],e[1],t,[]).then(a,o)}catch(a){o(a)}}),o)}))}catch(a){return P(a)}}function z(e,t){var n=e.length,r=Math.floor(n/2);return t||(t=function(e,t){return e<t?-1:e===t?0:1}),0===n?[]:1===n?[e[0]]:function(e,t,n){for(var r=[];e.length>0||t.length>0;)if(e.length>0&&t.length>0){var c=n(e[0],t[0]);isNaN(c)&&(c=1),c<=0?(r.push(e[0]),e=e.slice(1)):(r.push(t[0]),t=t.slice(1))}else e.length>0?(r.push(e[0]),e=e.slice(1)):t.length>0&&(r.push(t[0]),t=t.slice(1));return r}(z(e.slice(0,r),t),z(e.slice(r,n),t),t)}function q(e,t,n){try{var r=e.body;if(n.length!==e.params.length)return P(new Error("Invalid Parameter calls to function."));for(var a=0;a<n.length;a++){var o=e.params[a];"Identifier"===o.type&&(t.localScope[o.name.toLowerCase()]={d:null,value:n[a],valueset:!0,node:null})}return F(t,r).then((function(e){return Object(c.c)((function(t,n){e instanceof d.r?t(e.value):e!==d.R?e!==d.S?t(e instanceof d.i?e.value:e):n(new Error("Cannot Continue from a Function")):n(new Error("Cannot Break from a Function"))}))}))}catch(i){return Object(c.r)(i)}}function J(e,t,n){return M(e,t,(function(t,r,c){var a={spatialReference:e.spatialReference,services:e.services,console:e.console,lrucache:e.lrucache,localScope:{},abortSignal:e.abortSignal,globalScope:e.globalScope,depthCounter:e.depthCounter+1};if(a.depthCounter>64)throw new Error("Exceeded maximum function depth");return q(n,a,c)}))}function K(e){return function(){var t={abortSignal:e.context.abortSignal,spatialReference:e.context.spatialReference,console:e.context.console,lrucache:e.context.lrucache,services:e.context.services,localScope:{},globalScope:e.context.globalScope,depthCounter:e.context.depthCounter+1};if(t.depthCounter>64)throw new Error("Exceeded maximum function depth");return q(e.definition,t,arguments)}}Object(y.a)(Y,A),Object(m.a)(Y,A),Object(T.a)(Y,A),Object(N.a)(Y,A),Object(I.a)(Y,A),Object(S.a)(Y,A),Object(R.registerFunctions)({functions:Y,compiled:!1,signatures:null,failDefferred:null,evaluateIdentifier:null,arcadeCustomFunctionHandler:null,mode:"async",standardFunction:A,standardFunctionAsync:M}),Y.typeof=function(e,t){return A(e,t,(function(e,t,n){Object(d.J)(n,1,1);var r=G(n[0]);if("Unrecognised Type"===r)throw new Error("Unrecognised Type");return r}))},Y.iif=function(e,t){return Object(c.c)((function(n,r){Object(d.J)(null===t.arguments?[]:t.arguments,3,3),F(e,t.arguments[0]).then((function(a){try{if(!1===Object(d.C)(a))return void r(new Error("IF Function must have a boolean test condition"));Object(c.b)([F(e,t.arguments[1]),F(e,t.arguments[2])]).then((function(e){n(a?e[0]:e[1])}),r)}catch(n){r(n)}}),r)}))},Y.decode=function(e,t){return Object(c.c)((function(n,r){t.arguments.length<2?r(new Error("Missing Parameters")):2!==t.arguments.length?(t.arguments.length-1)%2!=0?F(e,t.arguments[0]).then((function(a){try{(function e(t,n,r,a){return Object(c.c)((function(c,o){F(t,n.arguments[r]).then((function(i){try{if(Object(d.H)(i,a))return void F(t,n.arguments[r+1]).then(c,o);var u=n.arguments.length-r;return 1===u?void F(t,n.arguments[r]).then(c,o):(2===u&&c(null),3===u?void F(t,n.arguments[r+2]).then(c,o):void e(t,n,r+2,a).then(c,o))}catch(c){o(c)}}),o)}))})(e,t,1,a).then(n,r)}catch(n){r(n)}}),r):r(new Error("Must have a default value result.")):F(e,t.arguments[1]).then(n,r)}))},Y.when=function(e,t){try{return t.arguments.length<3?P("Missing Parameters"):t.arguments.length%2==0?P("Must have a default value result."):F(e,t.arguments[0]).then((function(n){return Object(c.c)((function(r,a){!1!==Object(d.C)(n)?function e(t,n,r,a){return Object(c.c)((function(c,o){!0===a?F(t,n.arguments[r+1]).then(c,o):3===n.arguments.length-r?F(t,n.arguments[r+2]).then(c,o):F(t,n.arguments[r+2]).then((function(a){try{if(!1===Object(d.C)(a))return void o(new Error("WHEN needs boolean test conditions"));e(t,n,r+2,a).then(c,o)}catch(c){o(c)}}))}))}(e,t,0,n).then(r,a):a(new Error("WHEN needs boolean test conditions"))}))}))}catch(n){return P(n)}},Y.sort=function(e,t){return M(e,t,(function(e,t,n){Object(d.J)(n,1,2);var r=n[0];if(Object(d.I)(r)&&(r=r.toArray()),!1===Object(d.B)(r))return P(Error("Illegal Argument"));if(n.length>1)return!1===Object(d.K)(n[1])?P(Error("Illegal Argument")):H(r,K(n[1]));var a=r;if(0===a.length)return Object(c.s)([]);for(var o={},i=0;i<a.length;i++){var u=G(a[i]);""!==u&&(o[u]=!0)}if(!0===o.Array||!0===o.Dictionary||!0===o.Feature||!0===o.Point||!0===o.Polygon||!0===o.Polyline||!0===o.Multipoint||!0===o.Extent||!0===o.Function)return Object(c.s)(a.slice(0));var l=0,s="";for(var f in o)l++,s=f;return l>1||"String"===s?a=z(a,(function(e,t){if(null==e||e===d.P)return null==t||t===d.P?0:1;if(null==t||t===d.P)return-1;var n=Object(d.y)(e),r=Object(d.y)(t);return n<r?-1:n===r?0:1})):"Number"===s?a=z(a,(function(e,t){return e-t})):"Boolean"===s?a=z(a,(function(e,t){return e===t?0:t?-1:1})):"Date"===s&&(a=z(a,(function(e,t){return t-e}))),Object(c.s)(a)}))};var Z={failDefferred:P,resolveDeffered:C,fixSpatialReference:d.L,parseArguments:U,standardFunction:A,standardFunctionAsync:M,evaluateIdentifier:V,arcadeCustomFunction:K};for(var W in Y)Y[W]={value:new d.n(Y[W]),valueset:!0,node:null};var X=function(){};function Q(e){console.log(e)}(X.prototype=Y).infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null},X.prototype.pi={value:Math.PI,valueset:!0,node:null};var $=Z;function ee(e){for(var t={mode:"async",compiled:!1,functions:{},signatures:[],standardFunction:A,standardFunctionAsync:M,failDefferred:P,evaluateIdentifier:V,arcadeCustomFunctionHandler:K},n=0;n<e.length;n++)e[n].registerFunctions(t);for(var r in t.functions)Y[r]={value:new d.n(t.functions[r]),valueset:!0,node:null},X.prototype[r]=Y[r];for(var c=0;c<t.signatures.length;c++)Object(E.a)(t.signatures[c],"async")}function te(e,t){var n=t.spatialReference;null==n&&(n=new a.a({wkid:102100}));var r=function(e,t){var n=new X;null==e&&(e={}),null==t&&(t={});var r=new p.a({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});for(var c in r.immutable=!1,n.textformatting={value:r,valueset:!0,node:null},t)n[c]={value:new d.n(t[c]),native:!0,valueset:!0,node:null};for(var a in e)e[a]&&"esri.Graphic"===e[a].declaredClass?n[a]={value:g.a.createFromGraphic(e[a]),valueset:!0,node:null}:n[a]={value:e[a],valueset:!0,node:null};return n}(t.vars,t.customfunctions);return F({spatialReference:n,services:t.services,abortSignal:void 0===t.abortSignal||null===t.abortSignal?{aborted:!1}:t.abortSignal,globalScope:r,console:t.console?t.console:Q,lrucache:t.lrucache,localScope:null,depthCounter:1},e.body[0].body).then((function(e){return Object(c.c)((function(t,n){e instanceof d.r&&(e=e.value),e instanceof d.i&&(e=e.value),e===d.P&&(e=null),e!==d.R?e!==d.S?e instanceof d.n||e instanceof b.a?n(new Error("Cannot return FUNCTION")):t(e):n(new Error("Cannot return CONTINUE")):n(new Error("Cannot return BREAK"))}))}))}function ne(e,t){return Object(E.c)(e)}function re(e,t){return Object(E.j)(e,t,"full")}function ce(e,t){return Object(E.h)(e,t)}function ae(e,t){return Object(E.g)(e,t)}function oe(e){return Object(E.d)(e)}}}]);
//# sourceMappingURL=70.47fbf53b.chunk.js.map