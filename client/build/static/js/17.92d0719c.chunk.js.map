{"version":3,"sources":["../node_modules/@arcgis/core/tasks/support/FeatureSet.js","../node_modules/@arcgis/core/tasks/operations/zscale.js","../node_modules/@arcgis/core/tasks/operations/queryZScale.js","../node_modules/@arcgis/core/layers/support/I3SLayerDefinitions.js","../node_modules/@arcgis/core/layers/support/capabilities.js","../node_modules/@arcgis/core/layers/support/FetchAssociatedFeatureLayer.js"],"names":["h","s","esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon","esriGeometryEnvelope","mesh","d","e","displayFieldName","exceededTransferLimit","features","fields","geometryType","hasM","hasZ","queryGeometry","spatialReference","r","o","a","fromJSON","length","i","n","c","p","geometry","t","push","write","this","type","y","toJSON","Array","isArray","scale","translate","_getQuantizationFunction","Math","round","splice","transform","l","_getHydrationFunction","x","u","rings","paths","_quantizePoints","points","xmin","ymin","xmax","ymax","String","json","prototype","Boolean","overridePolicy","enabled","f","read","reader","types","m","isDefaultToJSON","g","vcsWkid","z","outSpatialReference","arguments","nodesPerPage","rootIndex","lodSelectionMetricType","Number","factor","source","baseColorFactor","baseColorTexture","metallicRoughnessTexture","metallicFactor","roughnessFactor","alphaMode","alphaCutoff","doubleSided","cullFace","normalTexture","occlusionTexture","emissiveTexture","emissiveFactor","pbrMetallicRoughness","opaque","mask","blend","none","back","front","index","jpg","png","dds","atlas","Float32","UInt64","UInt32","UInt16","UInt8","draco","offset","triangle","attachment","supportsContentType","supportsExifInfo","supportsKeywords","supportsName","supportsSize","data","isVersioned","supportsAttachment","supportsM","supportsZ","editing","supportsDeleteByAnonymous","supportsDeleteByOthers","supportsGeometryUpdate","supportsGlobalId","supportsRollbackOnFailure","supportsUpdateByAnonymous","supportsUpdateByOthers","supportsUpdateWithoutM","supportsUploadWithItemId","metadata","supportsAdvancedFieldProperties","operations","supportsCalculate","supportsTruncate","supportsValidateSql","supportsAdd","supportsDelete","supportsEditing","supportsChangeTracking","supportsQuery","supportsQueryAttachments","supportsResizeAttachments","supportsSync","supportsUpdate","supportsExceedsLimitStatistics","queryRelated","supportsCount","supportsOrderBy","supportsPagination","query","maxRecordCount","maxRecordCountFactor","standardMaxRecordCount","supportsCacheHint","supportsCentroid","supportsDisjointSpatialRelationship","supportsDistance","supportsDistinct","supportsExtent","supportsFormatPBF","supportsGeometryProperties","supportsHavingClause","supportsHistoricMoment","supportsMaxRecordCountFactor","supportsPercentileStatistics","supportsQuantization","supportsQuantizationEditMode","supportsQueryByOthers","supportsQueryGeometry","supportsResultType","supportsSqlExpression","supportsStandardizedQueriesOnly","supportsStatistics","tileMaxRecordCount","parsedUrl","portalItem","signal","rootDocument","path","match","urlParts","root","layerId","parseInt","portalItemFromServiceItemId","loadFromUrl","findAndLoadRelatedPortalItem","loadFeatureLayerFromPortalItem","responseType","authMode","findServerInfo","owningSystemUrl","replace","fetchRelatedItems","relationshipType","direction","find","load","findMatchingAssociatedSublayerUrl","url","fetchRootDocument","layers","Error","min","id","serviceItemId","fetchServiceOwningPortalUrl","portal"],"mappings":"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","file":"static/js/17.92d0719c.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as t,unwrap as r}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{JSONMap as s}from\"../../core/jsonMap.js\";import{reader as i}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as n}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as p}from\"../../core/accessorSupport/decorators/writer.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as l}from\"../../core/JSONSupport.js\";import a from\"../../geometry/SpatialReference.js\";import{fromJSON as y,isPolygon as u}from\"../../geometry/support/jsonUtils.js\";import{geometryTypes as m}from\"../../geometry.js\";import c from\"../../Graphic.js\";import f from\"../../layers/support/Field.js\";const h=new s({esriGeometryPoint:\"point\",esriGeometryMultipoint:\"multipoint\",esriGeometryPolyline:\"polyline\",esriGeometryPolygon:\"polygon\",esriGeometryEnvelope:\"extent\",mesh:\"mesh\",\"\":null});let d=class extends l{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,r){const o=a.fromJSON(r.spatialReference),s=[];for(let r=0;r<e.length;r++){const i=e[r],n=c.fromJSON(i),p=i.geometry&&i.geometry.spatialReference;t(n.geometry)&&!p&&(n.geometry.spatialReference=o),s.push(n)}return s}writeGeometryType(e,r,o,s){if(e)return void h.write(e,r,o,s);const{features:i}=this;if(i)for(const e of i)if(e&&t(e.geometry))return void h.write(e.geometry.type,r,o,s)}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,o=y(e);return!r&&t.spatialReference&&(o.spatialReference=a.fromJSON(t.spatialReference)),o}writeSpatialReference(e,r){if(e)return void(r.spatialReference=e.toJSON());const{features:o}=this;if(o)for(const e of o)e&&t(e.geometry)&&e.geometry.spatialReference&&(r.spatialReference=e.geometry.spatialReference.toJSON())}toJSON(e){const t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const o=t.features[r];if(o.geometry){const t=e&&e[r];o.geometry=t&&t.toJSON()||o.geometry}}return t}quantize(e){const{scale:[t,o],translate:[s,i]}=e,n=this.features,p=this._getQuantizationFunction(this.geometryType,(e=>Math.round((e-s)/t)),(e=>Math.round((i-e)/o)));for(let e=0,t=n.length;e<t;e++)p(r(n[e].geometry))||(n.splice(e,1),e--,t--);return this.transform=e,this}unquantize(){const{geometryType:e,features:r,transform:o}=this;if(!o)return this;const{translate:[s,i],scale:[n,p]}=o,l=this._getHydrationFunction(e,(e=>e*n+s),(e=>i-e*p));for(const{geometry:e}of r)t(e)&&l(e);return this.transform=null,this}_quantizePoints(e,t,r){let o,s;const i=[];for(let n=0,p=e.length;n<p;n++){const p=e[n];if(n>0){const e=t(p[0]),n=r(p[1]);e===o&&n===s||(i.push([e-o,n-s]),o=e,s=n)}else o=t(p[0]),s=r(p[1]),i.push([o,s])}return i.length>0?i:null}_getQuantizationFunction(e,t,r){return\"point\"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):\"polyline\"===e||\"polygon\"===e?e=>{const o=u(e)?e.rings:e.paths,s=[];for(let e=0,i=o.length;e<i;e++){const i=o[e],n=this._quantizePoints(i,t,r);n&&s.push(n)}return s.length>0?(u(e)?e.rings=s:e.paths=s,e):null}:\"multipoint\"===e?e=>{let o;return o=this._quantizePoints(e.points,t,r),o.length>0?(e.points=o,e):null}:\"extent\"===e?e=>e:null}_getHydrationFunction(e,t,r){return\"point\"===e?e=>{e.x=t(e.x),e.y=r(e.y)}:\"polyline\"===e||\"polygon\"===e?e=>{const o=u(e)?e.rings:e.paths;let s,i;for(let e=0,n=o.length;e<n;e++){const n=o[e];for(let e=0,o=n.length;e<o;e++){const o=n[e];e>0?(s+=o[0],i+=o[1]):(s=o[0],i=o[1]),o[0]=t(s),o[1]=r(i)}}}:\"extent\"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:\"multipoint\"===e?e=>{const o=e.points;let s,i;for(let e=0,n=o.length;e<n;e++){const n=o[e];e>0?(s+=n[0],i+=n[1]):(s=n[0],i=n[1]),n[0]=t(s),n[1]=r(i)}}:void 0}};e([o({type:String,json:{write:!0}})],d.prototype,\"displayFieldName\",void 0),e([o({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d.prototype,\"exceededTransferLimit\",void 0),e([o({type:[c],json:{write:!0}})],d.prototype,\"features\",void 0),e([i(\"features\")],d.prototype,\"readFeatures\",null),e([o({type:[f],json:{write:!0}})],d.prototype,\"fields\",void 0),e([o({type:[\"point\",\"multipoint\",\"polyline\",\"polygon\",\"extent\",\"mesh\"],json:{read:{reader:h.read}}})],d.prototype,\"geometryType\",void 0),e([p(\"geometryType\")],d.prototype,\"writeGeometryType\",null),e([o({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d.prototype,\"hasM\",void 0),e([o({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d.prototype,\"hasZ\",void 0),e([o({types:m,json:{write:!0}})],d.prototype,\"queryGeometry\",void 0),e([i(\"queryGeometry\")],d.prototype,\"readQueryGeometry\",null),e([o({type:a,json:{write:!0}})],d.prototype,\"spatialReference\",void 0),e([p(\"spatialReference\")],d.prototype,\"writeSpatialReference\",null),e([o({json:{write:!0}})],d.prototype,\"transform\",void 0),d=e([n(\"esri.tasks.support.FeatureSet\")],d),d.prototype.toJSON.isDefaultToJSON=!0,d||(d={});var g=d;export default g;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isNone as n}from\"../../core/maybe.js\";import{equals as e}from\"../../geometry/support/spatialReferenceUtils.js\";import{getMetersPerVerticalUnitForSR as t}from\"../../core/unitUtils.js\";function o(o,r,i){if(n(r)||n(i)||i.vcsWkid||e(r,i))return null;const s=t(r)/t(i);if(1===s)return null;switch(o){case\"point\":case\"esriGeometryPoint\":return n=>{return t=s,void((e=n)&&null!=e.z&&(e.z*=t));var e,t};case\"polyline\":case\"esriGeometryPolyline\":return n=>function(n,e){if(!n)return;for(const t of n.paths)for(const n of t)n.length>2&&(n[2]*=e)}(n,s);case\"polygon\":case\"esriGeometryPolygon\":return n=>function(n,e){if(!n)return;for(const t of n.rings)for(const n of t)n.length>2&&(n[2]*=e)}(n,s);case\"multipoint\":case\"esriGeometryMultipoint\":return n=>function(n,e){if(!n)return;for(const t of n.points)t.length>2&&(t[2]*=e)}(n,s);default:return null}}function r(n,e,t){if(null==n.hasM||n.hasZ)for(const n of e)for(const e of n)e.length>2&&(e[2]*=t)}function i(n,e,o){if(!n&&!e||!o)return;const r=t(o);s(n,o,r),s(e,o,r)}function s(n,e,t){if(n)for(const o of n)f(o.geometry,e,t)}function f(n,o,i){if(!n||!n.spatialReference||e(n.spatialReference,o))return;const s=t(n.spatialReference)/i;if(1!==s)if(\"x\"in n)null!=n.z&&(n.z*=s);else if(\"rings\"in n)r(n,n.rings,s);else if(\"paths\"in n)r(n,n.paths,s);else if(\"points\"in n&&(null==n.hasM||n.hasZ))for(const e of n.points)e.length>2&&(e[2]*=s)}export{o as getGeometryZScaler,i as unapplyEditsZUnitScaling};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{getGeometryZScaler as e}from\"./zscale.js\";function t(t,o,r){if(!r||!r.features||!r.hasZ)return;const f=e(r.geometryType,o,t.outSpatialReference);if(f)for(const e of r.features)f(e.geometry)}export{t as applyFeatureSetZUnitScaling};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import{enumeration as o}from\"../../core/accessorSupport/decorators/enumeration.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as p}from\"../../core/JSONSupport.js\";let s=class extends p{constructor(){super(...arguments),this.nodesPerPage=null,this.rootIndex=0,this.lodSelectionMetricType=null}};e([t({type:Number})],s.prototype,\"nodesPerPage\",void 0),e([t({type:Number})],s.prototype,\"rootIndex\",void 0),e([t({type:String})],s.prototype,\"lodSelectionMetricType\",void 0),s=e([r(\"esri.layer.support.I3SNodePageDefinition\")],s);let i=class extends p{constructor(){super(...arguments),this.factor=1}};e([t({type:Number,json:{read:{source:\"textureSetDefinitionId\"}}})],i.prototype,\"id\",void 0),e([t({type:Number})],i.prototype,\"factor\",void 0),i=e([r(\"esri.layer.support.I3SMaterialTexture\")],i);let l=class extends p{constructor(){super(...arguments),this.baseColorFactor=[1,1,1,1],this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.metallicFactor=1,this.roughnessFactor=1}};e([t({type:[Number]})],l.prototype,\"baseColorFactor\",void 0),e([t({type:i})],l.prototype,\"baseColorTexture\",void 0),e([t({type:i})],l.prototype,\"metallicRoughnessTexture\",void 0),e([t({type:Number})],l.prototype,\"metallicFactor\",void 0),e([t({type:Number})],l.prototype,\"roughnessFactor\",void 0),l=e([r(\"esri.layer.support.I3SMaterialPBRMetallicRoughness\")],l);let a=class extends p{constructor(){super(...arguments),this.alphaMode=\"opaque\",this.alphaCutoff=.25,this.doubleSided=!1,this.cullFace=\"none\",this.normalTexture=null,this.occlusionTexture=null,this.emissiveTexture=null,this.emissiveFactor=null,this.pbrMetallicRoughness=null}};e([o({opaque:\"opaque\",mask:\"mask\",blend:\"blend\"})],a.prototype,\"alphaMode\",void 0),e([t({type:Number})],a.prototype,\"alphaCutoff\",void 0),e([t({type:Boolean})],a.prototype,\"doubleSided\",void 0),e([o({none:\"none\",back:\"back\",front:\"front\"})],a.prototype,\"cullFace\",void 0),e([t({type:i})],a.prototype,\"normalTexture\",void 0),e([t({type:i})],a.prototype,\"occlusionTexture\",void 0),e([t({type:i})],a.prototype,\"emissiveTexture\",void 0),e([t({type:[Number]})],a.prototype,\"emissiveFactor\",void 0),e([t({type:l})],a.prototype,\"pbrMetallicRoughness\",void 0),a=e([r(\"esri.layer.support.I3SMaterialDefinition\")],a);let n=class extends p{};e([t({type:String,json:{read:{source:[\"name\",\"index\"],reader:(e,t)=>null!=e?e:`${t.index}`}}})],n.prototype,\"name\",void 0),e([o({jpg:\"jpg\",png:\"png\",dds:\"dds\",\"ktx-etc2\":\"ktx-etc2\"})],n.prototype,\"format\",void 0),n=e([r(\"esri.layer.support.I3STextureFormat\")],n);let u=class extends p{constructor(){super(...arguments),this.atlas=!1}};e([t({type:[n]})],u.prototype,\"formats\",void 0),e([t({type:Boolean})],u.prototype,\"atlas\",void 0),u=e([r(\"esri.layer.support.I3STextureSetDefinition\")],u);let y=class extends p{};e([o({Float32:\"Float32\",UInt64:\"UInt64\",UInt32:\"UInt32\",UInt16:\"UInt16\",UInt8:\"UInt8\"})],y.prototype,\"type\",void 0),e([t({type:Number})],y.prototype,\"component\",void 0),y=e([r(\"esri.layer.support.I3SGeometryAttribute\")],y);let c=class extends p{};e([o({draco:\"draco\"})],c.prototype,\"encoding\",void 0),e([t({type:[String]})],c.prototype,\"attributes\",void 0),c=e([r(\"esri.layer.support.I3SGeometryCompressedAttributes\")],c);let d=class extends p{constructor(){super(...arguments),this.offset=0}};e([t({type:Number})],d.prototype,\"offset\",void 0),e([t({type:y})],d.prototype,\"position\",void 0),e([t({type:y})],d.prototype,\"normal\",void 0),e([t({type:y})],d.prototype,\"uv0\",void 0),e([t({type:y})],d.prototype,\"color\",void 0),e([t({type:y})],d.prototype,\"uvRegion\",void 0),e([t({type:y})],d.prototype,\"featureId\",void 0),e([t({type:y})],d.prototype,\"faceRange\",void 0),e([t({type:c})],d.prototype,\"compressedAttributes\",void 0),d=e([r(\"esri.layer.support.I3SGeometryBuffer\")],d);let m=class extends p{};e([o({triangle:\"triangle\"})],m.prototype,\"topology\",void 0),e([t()],m.prototype,\"geometryBuffers\",void 0),m=e([r(\"esri.layer.support.I3SGeometryDefinition\")],m);export{y as I3SGeometryAttribute,d as I3SGeometryBuffer,c as I3SGeometryCompressedAttributes,m as I3SGeometryDefinition,a as I3SMaterialDefinition,l as I3SMaterialPBRMetallicRoughness,i as I3SMaterialTexture,s as I3SNodePageDefinition,n as I3STextureFormat,u as I3STextureSetDefinition};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst s={attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1},data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1},query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsStatistics:!1,tileMaxRecordCount:0}};export{s as zeroCapabilities};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isNone as t,isSome as r}from\"../../core/maybe.js\";import{throwIfAbortError as e,all as a}from\"../../core/promiseUtils.js\";import{id as o}from\"../../kernel.js\";import s from\"../../request.js\";import n from\"../../portal/Portal.js\";import i from\"../../portal/PortalItem.js\";import l from\"../FeatureLayer.js\";class c{constructor(t,r,e){this.parsedUrl=t,this.portalItem=r,this.signal=e,this.rootDocument=null;const a=this.parsedUrl.path.match(/^(.*)\\/SceneServer\\/layers\\/([\\d]*)\\/?$/i);a&&(this.urlParts={root:a[1],layerId:parseInt(a[2],10)})}async fetch(){var r;if(!this.urlParts)return null;const e=null!=(r=this.portalItem)?r:await this.portalItemFromServiceItemId();if(t(e))return this.loadFromUrl();const a=await this.findAndLoadRelatedPortalItem(e);return t(a)?null:this.loadFeatureLayerFromPortalItem(a)}async fetchPortalItem(){var r;if(!this.urlParts)return null;const e=null!=(r=this.portalItem)?r:await this.portalItemFromServiceItemId();return t(e)?null:this.findAndLoadRelatedPortalItem(e)}async fetchRootDocument(){if(r(this.rootDocument))return this.rootDocument;if(t(this.urlParts))return this.rootDocument={},{};const e={query:{f:\"json\"},responseType:\"json\",authMode:\"no-prompt\",signal:this.signal},a=`${this.urlParts.root}/SceneServer`;try{const t=await s(a,e);this.rootDocument=t.data}catch{this.rootDocument={}}return this.rootDocument}async fetchServiceOwningPortalUrl(){var t;const r=null==(t=o)?void 0:t.findServerInfo(this.parsedUrl.path);if(null!=r&&r.owningSystemUrl)return r.owningSystemUrl;const a=this.parsedUrl.path.replace(/(.*\\/rest)\\/.*/i,\"$1\")+\"/info\";try{const t=(await s(a,{query:{f:\"json\"},responseType:\"json\",signal:this.signal})).data.owningSystemUrl;if(t)return t}catch(t){e(t)}return null}async findAndLoadRelatedPortalItem(t){try{return(await t.fetchRelatedItems({relationshipType:\"Service2Service\",direction:\"reverse\"},{signal:this.signal})).find((t=>\"Feature Service\"===t.type))||null}catch(t){return e(t),null}}async loadFeatureLayerFromPortalItem(t){await t.load({signal:this.signal});const r=await this.findMatchingAssociatedSublayerUrl(t.url);return new l({url:r,portalItem:t}).load({signal:this.signal})}async loadFromUrl(){const t=await this.findMatchingAssociatedSublayerUrl(`${this.urlParts.root}/FeatureServer`);return new l({url:t}).load({signal:this.signal})}async findMatchingAssociatedSublayerUrl(t){const r=t.replace(/^(.*FeatureServer)(\\/[\\d]*\\/?)?$/i,\"$1\"),e={query:{f:\"json\"},responseType:\"json\",authMode:\"no-prompt\",signal:this.signal},o=this.urlParts.layerId,n=this.fetchRootDocument(),i=s(r,e),[l,c]=await a([i,n]),u=c&&c.layers,h=l.data&&l.data.layers;if(!Array.isArray(h))throw new Error(\"expected layers array\");if(Array.isArray(u))for(let t=0;t<Math.min(u.length,h.length);t++){if(u[t].id===o)return`${r}/${h[t].id}`}else if(o<h.length)return`${r}/${h[o].id}`;throw new Error(\"could not find matching associated sublayer\")}async portalItemFromServiceItemId(){const t=(await this.fetchRootDocument()).serviceItemId;if(!t)return null;const a=new i({id:t}),o=await this.fetchServiceOwningPortalUrl();r(o)&&(a.portal=new n({url:o}));try{return a.load({signal:this.signal})}catch(t){return e(t),null}}}export{c as FetchAssociatedFeatureLayer};\n"],"sourceRoot":""}