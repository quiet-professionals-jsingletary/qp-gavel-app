(this["webpackJsonpqp-ampd-app"]=this["webpackJsonpqp-ampd-app"]||[]).push([[2],{679:function(e,t,r){"use strict";r.r(t);var i=r(16),a=r(8),n=r.n(a),o=r(22),s=r(11),u=r(2),l=r(3),c=r(52),p=r(49),d=r(4),y=r(5),b=r(0),h=r(13),f=r(72),O=r(10),j=r(12),v=r(1),m=r(54),g=r(34),w=r(28),F=r(170),I=r(6),S=r(26),k=r(21),x=r(9),T=(r(19),r(20),r(15)),E=r(36),_=r(57),R=r(42),M=r(69),D=r(232),C=r(58),A=r(60),q=r(87),P=r(183),G=r(184),L=r(208),Q=r(402),N=r(185),V=r(228),J=(r(105),r(295),r(297)),z=(r(353),r(355),r(356),r(303)),B=r(269),W=r(539),U=r(392),Z=r(541),H=r(677),K=r(14);var $,X=r(122),Y=r(236),ee=(r(86),r(235)),te=r(101),re=r(206),ie=r(395),ae=r(759),ne=r(773),oe=0,se=j.a.getLogger("esri.layers.graphics.sources.MemorySource"),ue=function(e){Object(d.a)(r,e);var t=Object(y.a)(r);function r(e){var i;return Object(u.a)(this,r),(i=t.call(this,e))._idToClientGraphic=null,i.type="memory",i}return Object(l.a)(r,[{key:"load",value:function(e){var t=Object(O.g)(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Object(T.s)(this)}},{key:"destroy",value:function(){var e;null==(e=this._connection)||e.close(),this._connection=null}},{key:"applyEdits",value:function(e){var t=this;return this.load().then((function(){return t._applyEdits(e)}))}},{key:"openPorts",value:function(){var e=this;return this.load().then((function(){return e._connection.openPorts()}))}},{key:"queryFeatures",value:function(){var e=Object(o.a)(n.a.mark((function e(t){var r,a,o,s,u,l,c,p,d,y=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>1&&void 0!==y[1]?y[1]:{},e.next=3,this.load(r);case 3:return e.next=5,this._connection.invoke("queryFeatures",t?t.toJSON():null,r);case 5:if(a=e.sent,Object(ne.a)(t,this.layer.spatialReference,a),o=H.default.fromJSON(a),this._requiresClientGraphicMapping()){e.next=10;break}return e.abrupt("return",o);case 10:s=this.layer.objectIdField,u=Object(i.a)(o.features);try{for(u.s();!(l=u.n()).done;)c=l.value,p=c.attributes[s],(d=this._idToClientGraphic.get(p))&&(c.geometry=d.geometry)}catch(n){u.e(n)}finally{u.f()}return e.abrupt("return",(o.geometryType=this.layer.geometryType,o));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryFeaturesJSON",value:function(){var e=Object(o.a)(n.a.mark((function e(t){var r,i,a=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>1&&void 0!==a[1]?a[1]:{},!this._requiresClientGraphicMapping()){e.next=3;break}return e.abrupt("return",Object(T.r)(new k.a("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)")));case 3:return e.next=5,this.load(r);case 5:return e.next=7,this._connection.invoke("queryFeatures",t?t.toJSON():null,r);case 7:return i=e.sent,e.abrupt("return",(Object(ne.a)(t,this.layer.spatialReference,i),i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryFeatureCount",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(r).then((function(){return t._connection.invoke("queryFeatureCount",e?e.toJSON():null,r)}))}},{key:"queryObjectIds",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(r).then((function(){return t._connection.invoke("queryObjectIds",e?e.toJSON():null,r)}))}},{key:"queryExtent",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(r).then((function(){return t._connection.invoke("queryExtent",e?e.toJSON():null,r)})).then((function(e){return{count:e.count,extent:_.a.fromJSON(e.extent)}}))}},{key:"_applyEdits",value:function(e){var t=this;if(!this._connection)throw new k.a("feature-layer-source:edit-failure","Memory source not loaded");var r=this.layer.objectIdField,a=null,n=[],o=[],s=function(e){return"objectId"in e&&null!=e.objectId?e.objectId:"attributes"in e&&null!=e.attributes[r]?e.attributes[r]:null};if(e.addFeatures&&(a=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures){var u,l=Object(i.a)(e.deleteFeatures);try{for(l.s();!(u=l.n()).done;){var c=s(u.value);null!=c&&n.push(c)}}catch(f){l.e(f)}finally{l.f()}}var p=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){var d,y=Object(i.a)(e.updateFeatures);try{for(y.s();!(d=y.n()).done;){var b=d.value;if(o.push(this._serializeFeature(b)),p){var h=s(b);null!=h&&p.set(h,b)}}}catch(f){y.e(f)}finally{y.f()}}return Object(ae.b)(a?a.features:null,o,this.layer.spatialReference),this._connection.invoke("applyEdits",{adds:a?a.features:[],updates:o,deletes:n}).then((function(e){var r=e.fullExtent,n=e.featureEditResults;if(t.fullExtent=r,a&&a.finish(n.uidToObjectId),t._idToClientGraphic){if(p){var o,s=Object(i.a)(n.updateResults);try{for(s.s();!(o=s.n()).done;){var u=o.value;if(u.success){var l=p.get(u.objectId);null!=l&&t._addIdToClientGraphic(l)}}}catch(f){s.e(f)}finally{s.f()}}var c,d=Object(i.a)(n.deleteResults);try{for(d.s();!(c=d.n()).done;){var y=c.value;y.success&&t._idToClientGraphic.delete(y.objectId)}}catch(f){d.e(f)}finally{d.f()}}return t._createEditsResult(n)}))}},{key:"_createEditsResult",value:function(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}},{key:"_createFeatureEditResult",value:function(e){var t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new k.a("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}},{key:"_prepareAddFeatures",value:function(e){for(var t=new Map,r=new Array(e.length),i=null,a=0;a<e.length;a++){var n=e[a],o=this._serializeFeature(n);!i&&Object(O.g)(n.geometry)&&(i=n.geometry.type),r[a]=o,t.set("".concat(o.uid),n)}var s=this;return{features:r,inferredGeometryType:i,finish:function(e){var r=s.sourceJSON.objectIdField;for(var i in e){var a=e[i],n=t.get(i);n&&(n.attributes||(n.attributes={}),-1===a?delete n.attributes[r]:n.attributes[r]=a,s._addIdToClientGraphic(n))}}}}},{key:"_addIdToClientGraphic",value:function(e){if(this._idToClientGraphic){var t=this.sourceJSON.objectIdField,r=e.attributes&&e.attributes[t];null!=r&&this._idToClientGraphic.set(r,e)}}},{key:"_requiresClientGraphicMapping",value:function(){var e=this.layer.geometryType||this.sourceJSON.geometryType;return this._geometryTypeRequiresClientGraphicMapping(e)}},{key:"_geometryRequiresClientGraphicMapping",value:function(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}},{key:"_geometryTypeRequiresClientGraphicMapping",value:function(e){return"mesh"===e||"multipatch"===e||"extent"===e}},{key:"_serializeFeature",value:function(e){var t=e.attributes,r=this._geometryForSerialization(e),i=(oe++).toString();return r?{uid:i,geometry:r.toJSON(),attributes:t}:{uid:i,attributes:t}}},{key:"_geometryForSerialization",value:function(e){var t=e.geometry;return Object(O.f)(t)?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?X.a.fromExtent(t.extent):null:t}},{key:"_startWorker",value:function(){var e=Object(o.a)(n.a.mark((function e(t){var r,a,o,s,u,l,c,p,d,y,b,f,O,j,v;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ie.a)("MemorySourceWorker",{strategy:Object(h.a)("feature-layers-workers")?"dedicated":"local",signal:t});case 2:return this._connection=e.sent,r=this.layer,a=r.fields,o=r.spatialReference,s=r.objectIdField,u=r.hasM,l=r.hasZ,c=r.timeInfo,p="defaults"===this.layer.originOf("spatialReference"),d=this._prepareAddFeatures(this.items),this.on("before-changes",(function(e){se.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),e.preventDefault()})),y={features:d.features,fields:a&&a.map((function(e){return e.toJSON()})),geometryType:Y.c.toJSON(this.workerGeometryType),hasM:u,hasZ:l,objectIdField:s,spatialReference:p?null:o&&o.toJSON(),timeInfo:c?c.toJSON():null},e.next=8,this._connection.invoke("load",y,{signal:t});case 8:b=e.sent,f=Object(i.a)(b.warnings);try{for(f.s();!(O=f.n()).done;)j=O.value,se.warn(j.message,{layer:this.layer,warning:j})}catch(n){f.e(n)}finally{f.f()}b.featureErrors.length&&se.warn("Encountered ".concat(b.featureErrors.length," validation errors while loading features"),b.featureErrors),v=b.layerDefinition,this._geometryTypeRequiresClientGraphicMapping(d.inferredGeometryType)&&(v.geometryType=Y.c.toJSON(d.inferredGeometryType)),"mesh"!==v.geometryType&&"mesh"!==this.layer.geometryType||(v.hasZ=!0),this.sourceJSON=v,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),d.finish(b.assignedObjectIds);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"workerGeometryType",get:function(){var e=this.layer&&this.layer.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}}]),r}(te.a.LoadableMixin(Object(ee.b)(R.a)));Object(b.a)([($={Type:re.a,ensureType:Object(K.m)(re.a)},function(e,t){e[t]=$})],ue.prototype,"itemType",void 0),Object(b.a)([Object(v.b)()],ue.prototype,"type",void 0),Object(b.a)([Object(v.b)({constructOnly:!0})],ue.prototype,"layer",void 0),Object(b.a)([Object(v.b)({readOnly:!0,dependsOn:["layer.geometryType"]})],ue.prototype,"workerGeometryType",null),Object(b.a)([Object(v.b)()],ue.prototype,"sourceJSON",void 0);var le,ce=ue=Object(b.a)([Object(I.a)("esri.layers.graphics.sources.MemorySource")],ue),pe=r(233),de=r(230),ye=r(416),be=r(227),he=r(394),fe=r(229),Oe=r(794),je=r(791),ve=r(23),me=le=function(e){Object(d.a)(r,e);var t=Object(y.a)(r);function r(e){return Object(u.a)(this,r),t.call(this,e)}return Object(l.a)(r,[{key:"clone",value:function(){var e=this.name,t=this.fields,r=this.isAscending,i=this.isUnique,a=this.description;return new le({name:e,fields:t,isAscending:r,isUnique:i,description:a})}}]),r}(ve.a);Object(b.a)([Object(v.b)({constructOnly:!0})],me.prototype,"name",void 0),Object(b.a)([Object(v.b)({constructOnly:!0})],me.prototype,"fields",void 0),Object(b.a)([Object(v.b)({constructOnly:!0})],me.prototype,"isAscending",void 0),Object(b.a)([Object(v.b)({constructOnly:!0})],me.prototype,"isUnique",void 0),Object(b.a)([Object(v.b)({constructOnly:!0})],me.prototype,"description",void 0);me=le=Object(b.a)([Object(I.a)("esri.layers.support.FeatureIndex")],me);var ge=r(862),we=r(400),Fe=r(969),Ie=r(927),Se=r(956),ke=r(510),xe=r(409),Te=r(838),Ee=r(928),_e=new g.a({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),Re=new g.a({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"}),Me=function(e){Object(d.a)(r,e);var t=Object(y.a)(r);function r(e){var i;return Object(u.a)(this,r),(i=t.call(this,e)).cardinality=null,i.composite=null,i.id=null,i.keyField=null,i.keyFieldInRelationshipTable=null,i.name=null,i.relatedTableId=null,i.relationshipTableId=null,i.role=null,i}return r}(ve.a);Object(b.a)([Object(v.b)({json:{read:_e.read,write:_e.write}})],Me.prototype,"cardinality",void 0),Object(b.a)([Object(v.b)({json:{read:!0,write:!0}})],Me.prototype,"composite",void 0),Object(b.a)([Object(v.b)({json:{read:!0,write:!0}})],Me.prototype,"id",void 0),Object(b.a)([Object(v.b)({json:{read:!0,write:!0}})],Me.prototype,"keyField",void 0),Object(b.a)([Object(v.b)({json:{read:!0,write:!0}})],Me.prototype,"keyFieldInRelationshipTable",void 0),Object(b.a)([Object(v.b)({json:{read:!0,write:!0}})],Me.prototype,"name",void 0),Object(b.a)([Object(v.b)({json:{read:!0,write:!0}})],Me.prototype,"relatedTableId",void 0),Object(b.a)([Object(v.b)({json:{read:!0,write:!0}})],Me.prototype,"relationshipTableId",void 0),Object(b.a)([Object(v.b)({json:{read:Re.read,write:Re.write}})],Me.prototype,"role",void 0);var De=Me=Object(b.a)([Object(I.a)("esri.layers.support.Relationship")],Me),Ce=r(267),Ae=r(795),qe=r(397),Pe=r(799),Ge=r(349),Le=r(792),Qe=new g.a({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Ne={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},Ve="FeatureLayer",Je=j.a.getLogger("esri.layers.FeatureLayer");function ze(e){return e&&e instanceof R.a}function Be(e,t,r){return!!(e&&e.hasOwnProperty(t)?e[t]:r)}function We(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}var Ue=Object(Te.a)();function Ze(e,t,r){var i=!(null==r||!r.writeLayerSchema);return{enabled:i,ignoreOrigin:i}}var He=function(e){Object(d.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(u.a)(this,a);for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i)))._handles=new q.a,e.capabilities=null,e.charts=null,e.copyright=null,e.displayField=null,e.definitionExpression=null,e.dynamicDataSource=null,e.editFieldsInfo=null,e.editingEnabled=!0,e.editingInfo=null,e.elevationInfo=null,e.featureReduction=null,e.fields=null,e.formTemplate=null,e.fullExtent=null,e.gdbVersion=null,e.geometryProperties=null,e.geometryType=null,e.hasM=void 0,e.hasZ=void 0,e.heightModelInfo=null,e.historicMoment=null,e.isTable=!1,e.labelsVisible=!0,e.labelingInfo=null,e.layerId=void 0,e.legendEnabled=!0,e.minScale=0,e.maxScale=0,e.globalIdField=null,e.objectIdField=null,e.outFields=null,e.path=null,e.popupEnabled=!0,e.popupTemplate=null,e.relationships=null,e.sourceJSON=null,e.returnM=void 0,e.returnZ=void 0,e.screenSizePerspectiveEnabled=!0,e.serviceDefinitionExpression=null,e.spatialReference=E.a.WGS84,e.templates=null,e.timeInfo=null,e.title=null,e.sublayerTitleMode="item-title",e.trackIdField=null,e.type="feature",e.typeIdField=null,e.types=null,e.indexes=new(R.a.ofType(me)),e.userIsAdmin=!1,e.version=void 0,e.visible=!0,e}return Object(l.a)(a,[{key:"destroy",value:function(){var e;null==(e=this.source)||e.destroy(),this._handles&&(this._handles.destroy(),this._handles=null)}},{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?Object(s.a)({url:e},t):e}},{key:"load",value:function(e){var t=this,r=Object(O.g)(e)?e.signal:null;if(!(this.portalItem&&this.portalItem.loaded&&this.source)){var i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch((function(e){return e})).then(Object(o.a)(n.a.mark((function e(){var i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.url||null!=t.layerId||!/FeatureServer|MapServer\/*$/i.test(t.url)){e.next=5;break}return e.next=3,t._fetchFirstLayerId(r);case 3:null!=(i=e.sent)&&(t.layerId=i);case 5:if(t.url||t._hasMemorySource()){e.next=7;break}throw new k.a("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");case 7:return e.t0=t,e.next=10,t.createGraphicsSource(r);case 10:return e.t1=e.sent,e.abrupt("return",e.t0._initLayerProperties.call(e.t0,e.t1));case 12:case"end":return e.stop()}}),e)}))));return this.addResolvingPromise(i),Object(T.s)(this)}this.addResolvingPromise(this.createGraphicsSource(r).then((function(e){return t._initLayerProperties(e)})))}},{key:"readCapabilities",value:function(e,t){return t=t.layerDefinition||t,{attachment:this._readAttachmentCapabilities(t.attachmentProperties),data:this._readDataCapabilities(t),metadata:this._readMetadataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),editing:this._readEditingCapabilities(t)}}},{key:"readEditingEnabled",value:function(e,t){return this._readEditingEnabled(t,!1)}},{key:"readEditingEnabledFromWebMap",value:function(e,t,r){return this._readEditingEnabled(t,!0,r)}},{key:"writeEditingEnabled",value:function(e,t){this._writeEditingEnabled(e,t,!1)}},{key:"writeEditingEnabledToWebMap",value:function(e,t,r,i){this._writeEditingEnabled(e,t,!0,i)}},{key:"readEditingInfo",value:function(e,t){var r=t.editingInfo;return r?{lastEditDate:null!=r.lastEditDate?new Date(r.lastEditDate):null}:null}},{key:"readFeatureReduction",value:function(e,t){return Object(Se.a)(e,t)}},{key:"writeWebSceneFeatureReduction",value:function(e,t,r,i){Object(Se.c)(e,t,"layerDefinition.featureReduction",i)}},{key:"readIsTable",value:function(e,t){return"Table"===(t=t&&t.layerDefinition||t).type||!t.geometryType}},{key:"writeIsTable",value:function(e,t,r,i){null!=i&&i.writeLayerSchema&&Object(f.c)(r,e?"Table":"Feature Layer",t)}},{key:"readMinScale",value:function(e,t){return t.effectiveMinScale||e||0}},{key:"readMaxScale",value:function(e,t){return t.effectiveMaxScale||e||0}},{key:"readGlobalIdFieldFromService",value:function(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){var r,a=Object(i.a)(t.fields);try{for(a.s();!(r=a.n()).done;){var n=r.value;if("esriFieldTypeGlobalID"===n.type)return n.name}}catch(o){a.e(o)}finally{a.f()}}}},{key:"readObjectIdFieldFromService",value:function(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){var r,a=Object(i.a)(t.fields);try{for(a.s();!(r=a.n()).done;){var n=r.value;if("esriFieldTypeOID"===n.type)return n.name}}catch(o){a.e(o)}finally{a.f()}}}},{key:"readRenderer",value:function(e,t,r){var i=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(i){var a=Object(W.b)(i,t,r)||void 0;return a||Je.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),a}if(t.defaultSymbol)return t.types&&t.types.length?new J.a({defaultSymbol:Ke(t.defaultSymbol,t,r),field:t.typeIdField,uniqueValueInfos:t.types.map((function(e){return{id:e.id,symbol:Ke(e.symbol,e,r)}}))}):new z.a({symbol:Ke(t.defaultSymbol,t,r)})}},{key:"castSource",value:function(e){return e?Array.isArray(e)||e instanceof R.a?new ce({layer:this,items:e}):e:null}},{key:"readSource",value:function(e,t){var r=H.default.fromJSON(t.featureSet);return new ce({layer:this,items:r&&r.features||[]})}},{key:"readServiceDefinitionExpression",value:function(e,t){return t.definitionQuery||t.definitionExpression}},{key:"readTemplates",value:function(e,t){var r=t.editFieldsInfo,i=r&&r.creatorField,a=r&&r.editorField;return e=e&&e.map((function(e){return ke.a.fromJSON(e)})),this._fixTemplates(e,i),this._fixTemplates(e,a),e}},{key:"readTitle",value:function(e,t){var r=t.layerDefinition&&t.layerDefinition.name||t.name,i=t.title||t.layerDefinition&&t.layerDefinition.title;if(r){var a=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?Object(L.h)(this.url,r):r;var n=r;if(!n&&this.url){var o=Object(L.e)(this.url);Object(O.g)(o)&&(n=o.title)}if(!n)return;return"item-title-and-service-name"===this.sublayerTitleMode&&a&&a!==n&&(n=a+" - "+n),Object(L.a)(n)}if("item-title"===this.sublayerTitleMode&&i)return i}},{key:"readTitleFromWebMap",value:function(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}},{key:"readTypeIdField",value:function(e,t){var r=(t=t.layerDefinition||t).typeIdField;if(r){var i=Object(M.i)(t.fields,r);i&&(r=i.name)}return r}},{key:"readTypes",value:function(e,t){var r=this;e=(t=t.layerDefinition||t).types;var i=t.editFieldsInfo,a=i&&i.creatorField,n=i&&i.editorField;return e&&e.map((function(e){return e=xe.a.fromJSON(e),r._fixTemplates(e.templates,a),r._fixTemplates(e.templates,n),e}))}},{key:"writeUrl",value:function(e,t,r,i){Object(L.i)(this,e,null,t,i)}},{key:"readVersion",value:function(e,t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}},{key:"readVisible",value:function(e,t){return t.layerDefinition&&null!=t.layerDefinition.defaultVisibility?!!t.layerDefinition.defaultVisibility:null!=t.visibility?!!t.visibility:void 0}},{key:"addAttachment",value:function(e,t){var r=this;return this.load().then((function(){return r._checkAttachmentSupport(e)})).then((function(){if(!("addAttachment"in r.source))throw new k.a(Ve,"Layer source does not support addAttachment capability");return r.source.addAttachment(e,t)}))}},{key:"updateAttachment",value:function(e,t,r){var i=this;return this.load().then((function(){return i._checkAttachmentSupport(e)})).then((function(){if(!("updateAttachment"in i.source))throw new k.a(Ve,"Layer source does not support updateAttachment capability");return i.source.updateAttachment(e,t,r)}))}},{key:"applyEdits",value:function(){var e=Object(o.a)(n.a.mark((function e(t,i){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(25).then(r.bind(null,993));case 2:return a=e.sent,e.next=5,this.load();case 5:return e.abrupt("return",a.applyEdits(this,this.source,t,i));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"on",value:function(e,t){return Object(c.a)(Object(p.a)(a.prototype),"on",this).call(this,e,t)}},{key:"createPopupTemplate",value:function(e){return Object(qe.a)(this,e)}},{key:"createGraphicsSource",value:function(){var e=Object(o.a)(n.a.mark((function e(t){var i,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._hasMemorySource()){e.next=2;break}return e.abrupt("return",(this.emit("graphics-source-create",{graphicsSource:this.source}),this.source.load({signal:t})));case 2:return e.next=4,Promise.all([r.e(3),r.e(5),r.e(9),r.e(44)]).then(r.bind(null,994));case 4:return i=e.sent,Object(T.u)(t),e.next=8,new i.default({layer:this}).load({signal:t});case 8:return a=e.sent,e.abrupt("return",(this.emit("graphics-source-create",{graphicsSource:a}),a));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createQuery",value:function(){var e=new Ge.a,t=this.get("capabilities.data");e.dynamicDataSource=this.dynamicDataSource,e.gdbVersion=this.gdbVersion,e.historicMoment=this.historicMoment,e.returnGeometry=!0,t&&(t.supportsZ&&null!=this.returnZ&&(e.returnZ=this.returnZ),t.supportsM&&null!=this.returnM&&(e.returnM=this.returnM)),e.outFields=["*"],e.where=this.definitionExpression||"1=1";var r=this.timeOffset,i=this.timeExtent;return e.timeExtent=null!=r&&null!=i?i.offset(-r.value,r.unit):i||null,e.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null,e}},{key:"deleteAttachments",value:function(e,t){var r=this;return this.load().then((function(){return r._checkAttachmentSupport(e)})).then((function(){if(!("deleteAttachments"in r.source))throw new k.a(Ve,"Layer source does not support deleteAttachments capability");return r.source.deleteAttachments(e,t)}))}},{key:"fetchRecomputedExtents",value:function(e){var t=this;return this.load({signal:null==e?void 0:e.signal}).then((function(){if(t.source.fetchRecomputedExtents)return t.source.fetchRecomputedExtents(e);throw new k.a(Ve,"Layer source does not support fetchUpdates capability")}))}},{key:"getFeatureType",value:function(e){var t=this.typeIdField,r=this.types;if(!t||!e)return null;var i=e.attributes?e.attributes[t]:void 0;if(null==i)return null;var a=null;return r.some((function(e){var t=e.id;return null!=t&&(t.toString()===i.toString()&&(a=e),!!a)})),a}},{key:"getFieldDomain",value:function(e,t){var r=t&&t.feature,i=this.getFeatureType(r);if(i){var a=i.domains&&i.domains[e];if(a&&"inherited"!==a.type)return a}return this._getLayerDomain(e)}},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"queryAttachments",value:function(e,t){var r=this;return e=Pe.a.from(e),this.load().then((function(){if(!r.get("capabilities.data.supportsAttachment"))throw new k.a(Ve,"this layer doesn't support attachments");var t=e,i=t.attachmentTypes,a=t.objectIds,n=t.globalIds,o=t.num,s=t.size,u=t.start,l=t.where;if(!r.get("capabilities.operations.supportsQueryAttachments")){var c=a&&a.length>1,p=i&&i.length,d=n&&n.length,y=s&&s.length;if(c||p||d||y||o||u||l)throw new k.a(Ve,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e)}if(!(a&&a.length||l))throw new k.a(Ve,"'objectIds' or 'where' are required to perform attachment query",e);if(!("queryAttachments"in r.source))throw new k.a(Ve,"Layer source does not support queryAttachments capability",e);return r.source.queryAttachments(e)}))}},{key:"queryFeatures",value:function(e,t){var r=this;return this.load().then((function(){return r.source.queryFeatures(Ge.a.from(e)||r.createQuery(),t)})).then((function(e){if(e&&e.features){var t,a=Object(i.a)(e.features);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.layer=n.sourceLayer=r}}catch(o){a.e(o)}finally{a.f()}}return e}))}},{key:"queryObjectIds",value:function(e,t){var r=this;return this.load().then((function(){if(r.source.queryObjectIds)return r.source.queryObjectIds(Ge.a.from(e)||r.createQuery(),t);throw new k.a(Ve,"Layer source does not support queryObjectIds capability")}))}},{key:"queryFeatureCount",value:function(e,t){var r=this;return this.load().then((function(){if(r.source.queryFeatureCount)return r.source.queryFeatureCount(Ge.a.from(e)||r.createQuery(),t);throw new k.a(Ve,"Layer source does not support queryFeatureCount capability")}))}},{key:"queryExtent",value:function(e,t){var r=this;return this.load().then((function(){if(r.source.queryExtent)return r.source.queryExtent(Ge.a.from(e)||r.createQuery(),t);throw new k.a(Ve,"Layer source does not support queryExtent capability")}))}},{key:"queryRelatedFeatures",value:function(e,t){var r=this;return this.load().then((function(){if("queryRelatedFeatures"in r.source)return r.source.queryRelatedFeatures(Le.a.from(e),t);throw new k.a(Ve,"Layer source does not support queryRelatedFeatures capability")}))}},{key:"queryRelatedFeaturesCount",value:function(e,t){var r=this;return this.load().then((function(){if("queryRelatedFeaturesCount"in r.source)return r.source.queryRelatedFeaturesCount(Le.a.from(e),t);throw new k.a(Ve,"Layer source does not support queryRelatedFeaturesCount capability")}))}},{key:"read",value:function(e,t){var r=e.featureCollection;if(r){var i=r.layers;i&&1===i.length&&(Object(c.a)(Object(p.a)(a.prototype),"read",this).call(this,i[0],t),null!=r.showLegend&&Object(c.a)(Object(p.a)(a.prototype),"read",this).call(this,{showLegend:r.showLegend},t))}Object(c.a)(Object(p.a)(a.prototype),"read",this).call(this,e,t),t&&"service"===t.origin&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}},{key:"write",value:function(e,t){var r,i,n=(t=Object(s.a)(Object(s.a)({},t),{},{writeLayerSchema:null!=(r=null==(i=t)?void 0:i.writeLayerSchema)?r:this._hasMemorySource()})).origin,o=t.layerContainerType,u=t.messages;if(this.isTable){if("web-scene"===n||"web-map"===n&&"tables"!==o)return u&&u.push(new k.a("layer:unsupported","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' using a Table source cannot be written to web scenes and web maps"),{layer:this})),null;if(this._hasMemorySource())return u&&u.push(new k.a("layer:unsupported","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' using an in-memory Table source cannot be written to web scenes and web maps"),{layer:this})),null}else if(this.loaded&&"web-map"===n&&"tables"===o)return u&&u.push(new k.a("layer:unsupported","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' using a non-table source cannot be written to tables in web maps"),{layer:this})),null;return Object(c.a)(Object(p.a)(a.prototype),"write",this).call(this,e,t)}},{key:"_readEditingEnabled",value:function(e,t,r){var i,a=null==(i=e.layerDefinition)?void 0:i.capabilities;return a?this._hasEditingCapability(a):(a=e.capabilities,!(t&&"web-map"===(null==r?void 0:r.origin)&&!this._hasMemorySource()&&a)||this._hasEditingCapability(a))}},{key:"_hasEditingCapability",value:function(e){return e.toLowerCase().split(",").map((function(e){return e.trim()})).includes("editing")}},{key:"_writeEditingEnabled",value:function(e,t,r,i){e||(Object(f.c)("layerDefinition.capabilities","Query",t),!r||null!=i&&i.writeLayerSchema||(t.capabilities="Query"))}},{key:"_checkAttachmentSupport",value:function(e){var t=e.attributes,r=this.objectIdField;return this.get("capabilities.data.supportsAttachment")?e?t?t[r]?void 0:Object(T.r)(new k.a(Ve,"feature is missing the identifying attribute ".concat(r))):Object(T.r)(new k.a(Ve,"'attributes' are required on a feature to query attachments")):Object(T.r)(new k.a(Ve,"A feature is required to add/delete/update attachments")):Object(T.r)(new k.a(Ve,"this layer doesn't support attachments"))}},{key:"_getLayerDomain",value:function(e){var t=this.fieldsIndex.get(e);return t?t.domain:null}},{key:"_fetchFirstLayerId",value:function(e){return Object(C.default)(this.url,{query:Object(s.a)({f:"json"},this.customParameters),responseType:"json",signal:e}).then((function(e){var t=e.data;if(t)return Array.isArray(t.layers)&&t.layers.length>0?t.layers[0].id:Array.isArray(t.tables)&&t.tables.length>0?t.tables[0].id:void 0}))}},{key:"_initLayerProperties",value:function(){var e=Object(o.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this._set("source",t),t.sourceJSON&&(this.sourceJSON=t.sourceJSON,this.read(t.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),Object(M.f)(this.renderer,this.fields),Object(M.g)(this.timeInfo,this.fields),Object(Ae.a)(this,{origin:"service"})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_verifyFields",value:function(){var e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||-1!==e.search(/\/FeatureServer\//i)||this.fields&&this.fields.some((function(e){return"geometry"===e.type}))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}},{key:"_fixTemplates",value:function(e,t){e&&e.forEach((function(e){var r=e.prototype&&e.prototype.attributes;r&&t&&delete r[t]}))}},{key:"_verifySource",value:function(){if(this._hasMemorySource()){if(this.url)throw new k.a("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new k.a("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}},{key:"_initMemorySource",value:function(e){var t=this;e.forEach((function(e){e.layer=t,e.sourceLayer=t})),this._handles.add([e.on("after-add",(function(e){e.item.layer=t,e.item.sourceLayer=t})),e.on("after-remove",(function(e){e.item.layer=null,e.item.sourceLayer=null}))],"fl-source")}},{key:"_resetMemorySource",value:function(e){e.forEach((function(e){e.layer=null,e.sourceLayer=null})),this._handles.remove("fl-source")}},{key:"_hasMemorySource",value:function(){return!(this.url||!this.source)}},{key:"_readAttachmentCapabilities",value:function(e){var t={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1};return e&&Array.isArray(e)&&e.forEach((function(e){var r=Ne[e.name];r&&(t[r]=!!e.isEnabled)})),t}},{key:"_readDataCapabilities",value:function(e){return{isVersioned:Be(e,"isDataVersioned",!1),supportsAttachment:Be(e,"hasAttachments",!1),supportsM:Be(e,"hasM",!1),supportsZ:Be(e,"hasZ",!1)}}},{key:"_readMetadataCapabilities",value:function(e){return{supportsAdvancedFieldProperties:Be(e,"supportsFieldDescriptionProperty",!1)}}},{key:"_readOperationsCapabilities",value:function(e,t){var r=e?e.toLowerCase().split(",").map((function(e){return e.trim()})):[],i=-1!==r.indexOf("editing"),a=i&&-1!==r.indexOf("create"),n=i&&-1!==r.indexOf("delete"),o=i&&-1!==r.indexOf("update"),s=-1!==r.indexOf("changetracking");return i&&!(a||n||o)&&(a=n=o=!0),{supportsCalculate:Be(t,"supportsCalculate",!1),supportsTruncate:Be(t,"supportsTruncate",!1),supportsValidateSql:Be(t,"supportsValidateSql",!1),supportsAdd:a,supportsDelete:n,supportsEditing:i,supportsChangeTracking:s,supportsQuery:-1!==r.indexOf("query"),supportsQueryAttachments:Be(t.advancedQueryCapabilities,"supportsQueryAttachments",!1),supportsResizeAttachments:Be(t,"supportsAttachmentsResizing",!1),supportsSync:-1!==r.indexOf("sync"),supportsUpdate:o,supportsExceedsLimitStatistics:Be(t,"supportsExceedsLimitStatistics",!1)}}},{key:"_readQueryCapabilities",value:function(e){var t=e.advancedQueryCapabilities,r=e.ownershipBasedAccessControlForFeatures,i=e.archivingInfo,a=(e.supportedQueryFormats||"").split(",").reduce((function(e,t){var r=t.toLowerCase().trim();return r&&e.add(r),e}),new Set);return{supportsStatistics:Be(t,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:Be(t,"supportsPercentileStatistics",!1),supportsCentroid:Be(t,"supportsReturningGeometryCentroid",!1),supportsDistance:Be(t,"supportsQueryWithDistance",!1),supportsDistinct:Be(t,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:Be(t,"supportsReturningQueryExtent",!1),supportsGeometryProperties:Be(t,"supportsReturningGeometryProperties",!1),supportsHavingClause:Be(t,"supportsHavingClause",!1),supportsOrderBy:Be(t,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:Be(t,"supportsPagination",!1),supportsQuantization:Be(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Be(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:Be(e,"supportsReturningQueryGeometry",!1),supportsResultType:Be(t,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:Be(t,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:Be(t,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Be(e,"useStandardizedQueries",!1),supportsQueryByOthers:Be(r,"allowOthersToQuery",!0),supportsHistoricMoment:Be(i,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:a.has("pbf"),supportsDisjointSpatialRelationship:Be(t,"supportsDisjointSpatialRel",!1),supportsCacheHint:Be(t,"supportsQueryWithCacheHint",!1),maxRecordCountFactor:We(e,"maxRecordCountFactor",void 0),maxRecordCount:We(e,"maxRecordCount",void 0),standardMaxRecordCount:We(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:We(e,"tileMaxRecordCount",void 0)}}},{key:"_readQueryRelatedCapabilities",value:function(e){var t=e.advancedQueryCapabilities,r=Be(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Be(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r}}},{key:"_readEditingCapabilities",value:function(e){var t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:Be(e,"allowGeometryUpdates",!0),supportsGlobalId:Be(e,"supportsApplyEditsWithGlobalIds",!1),supportsRollbackOnFailure:Be(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Be(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Be(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Be(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Be(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Be(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Be(t,"allowOthersToUpdate",!0)}}},{key:"createQueryVersion",get:function(){return this.definitionExpression,this.dynamicDataSource,this.timeExtent,this.timeOffset,this.geometryType,this.gdbVersion,this.historicMoment,this.returnZ,this.capabilities,this.returnM,(this._get("createQueryVersion")||0)+1}},{key:"fieldsIndex",get:function(){return new U.a(this.fields||[])}},{key:"parsedUrl",get:function(){var e=this.url?Object(x.I)(this.url):null;return null!=e&&(null!=this.dynamicDataSource?e.path=Object(x.x)(e.path,"dynamicLayer"):null!=this.layerId&&(e.path=Object(x.x)(e.path,this.layerId.toString()))),e}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"renderer",set:function(e){Object(M.f)(e,this.fields),this._set("renderer",e)}},{key:"source",set:function(e){var t=this._get("source");t!==e&&(ze(t)&&this._resetMemorySource(t),ze(e)&&this._initMemorySource(e),this._set("source",e))}},{key:"url",set:function(e){var t=Object(L.g)(this,e,Je);this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)}}]),a}(Object(de.a)(Object(je.a)(Object(fe.a)(Object(he.a)(Object(pe.a)(Object(V.a)(Object(be.a)(Object(G.a)(Object(ye.a)(P.a))))))))));Object(b.a)([Object(v.b)({readOnly:!0,json:{read:!1}})],He.prototype,"capabilities",void 0),Object(b.a)([Object(w.a)("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],He.prototype,"readCapabilities",null),Object(b.a)([Object(v.b)({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],He.prototype,"charts",void 0),Object(b.a)([Object(v.b)({readOnly:!0,dependsOn:["definitionExpression","dynamicDataSource","timeExtent","timeOffset","geometryType","gdbVersion","historicMoment","returnZ","capabilities","returnM"]})],He.prototype,"createQueryVersion",null),Object(b.a)([Object(v.b)({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],He.prototype,"copyright",void 0),Object(b.a)([Object(v.b)({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],He.prototype,"displayField",void 0),Object(b.a)([Object(v.b)({type:String,json:{origins:{service:{read:!1,write:!1}},read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],He.prototype,"definitionExpression",void 0),Object(b.a)([Object(v.b)({types:A.i,readOnly:!0})],He.prototype,"defaultSymbol",void 0),Object(b.a)([Object(v.b)({type:Ce.a})],He.prototype,"dynamicDataSource",void 0),Object(b.a)([Object(v.b)({readOnly:!0})],He.prototype,"editFieldsInfo",void 0),Object(b.a)([Object(v.b)({type:Boolean})],He.prototype,"editingEnabled",void 0),Object(b.a)([Object(w.a)(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],He.prototype,"readEditingEnabled",null),Object(b.a)([Object(w.a)("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],He.prototype,"readEditingEnabledFromWebMap",null),Object(b.a)([Object(S.a)(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],He.prototype,"writeEditingEnabled",null),Object(b.a)([Object(S.a)("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],He.prototype,"writeEditingEnabledToWebMap",null),Object(b.a)([Object(v.b)({readOnly:!0})],He.prototype,"editingInfo",void 0),Object(b.a)([Object(w.a)("editingInfo")],He.prototype,"readEditingInfo",null),Object(b.a)([Object(v.b)(N.b)],He.prototype,"elevationInfo",void 0),Object(b.a)([Object(v.b)({types:{key:"type",base:ge.a,typeMap:{selection:Ie.a,cluster:Fe.a}},json:{write:{target:"layerDefinition.featureReduction"}}})],He.prototype,"featureReduction",void 0),Object(b.a)([Object(w.a)("featureReduction",["layerDefinition.featureReduction"])],He.prototype,"readFeatureReduction",null),Object(b.a)([Object(S.a)("web-scene","featureReduction",{"layerDefinition.featureReduction":{types:Se.b}})],He.prototype,"writeWebSceneFeatureReduction",null),Object(b.a)([Object(v.b)(Object(s.a)(Object(s.a)({},Ue.fields),{},{json:{read:{source:"layerDefinition.fields"},origins:{service:{read:!0},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:Ze}}}}}))],He.prototype,"fields",void 0),Object(b.a)([Object(v.b)({readOnly:!0,dependsOn:["fields"]})],He.prototype,"fieldsIndex",null),Object(b.a)([Object(v.b)({type:Z.a,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],He.prototype,"formTemplate",void 0),Object(b.a)([Object(v.b)({type:_.a,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],He.prototype,"fullExtent",void 0),Object(b.a)([Object(v.b)()],He.prototype,"gdbVersion",void 0),Object(b.a)([Object(v.b)({readOnly:!0})],He.prototype,"geometryProperties",void 0),Object(b.a)([Object(v.b)({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:Qe.read},"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:Ze,writer:function(e,t,r){var i=e?Qe.toJSON(e):null;i&&Object(f.c)(r,i,t)}}}},read:{source:"layerDefinition.geometryType",reader:Qe.read}}})],He.prototype,"geometryType",void 0),Object(b.a)([Object(v.b)({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],He.prototype,"hasM",void 0),Object(b.a)([Object(v.b)({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],He.prototype,"hasZ",void 0),Object(b.a)([Object(v.b)({readOnly:!0,type:Q.a})],He.prototype,"heightModelInfo",void 0),Object(b.a)([Object(v.b)({type:Date})],He.prototype,"historicMoment",void 0),Object(b.a)([Object(v.b)({json:{origins:{service:{read:!1},"portal-item":{read:!1}}}})],He.prototype,"id",void 0),Object(b.a)([Object(v.b)({readOnly:!0,json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],He.prototype,"isTable",void 0),Object(b.a)([Object(w.a)("service","isTable",["type","geometryType"]),Object(w.a)("isTable",["layerDefinition.type","layerDefinition.geometryType"])],He.prototype,"readIsTable",null),Object(b.a)([Object(S.a)("web-map","isTable")],He.prototype,"writeIsTable",null),Object(b.a)([Object(v.b)(N.c)],He.prototype,"labelsVisible",void 0),Object(b.a)([Object(v.b)({type:[we.a],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:Ee.a},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:Ee.a},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],He.prototype,"labelingInfo",void 0),Object(b.a)([Object(v.b)(N.f)],He.prototype,"opacity",void 0),Object(b.a)([Object(v.b)({type:Number,json:{origins:{service:{read:{source:"id"}}},read:!1}})],He.prototype,"layerId",void 0),Object(b.a)([Object(v.b)(N.d)],He.prototype,"legendEnabled",void 0),Object(b.a)([Object(v.b)({type:["show","hide"]})],He.prototype,"listMode",void 0),Object(b.a)([Object(v.b)({type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}})],He.prototype,"minScale",void 0),Object(b.a)([Object(w.a)("service","minScale",["minScale","effectiveMinScale"])],He.prototype,"readMinScale",null),Object(b.a)([Object(v.b)({type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}})],He.prototype,"maxScale",void 0),Object(b.a)([Object(w.a)("service","maxScale",["maxScale","effectiveMaxScale"])],He.prototype,"readMaxScale",null),Object(b.a)([Object(v.b)({type:String})],He.prototype,"globalIdField",void 0),Object(b.a)([Object(w.a)("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),Object(w.a)("service","globalIdField",["globalIdField","fields"])],He.prototype,"readGlobalIdFieldFromService",null),Object(b.a)([Object(v.b)({type:String,json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:Ze}}}}})],He.prototype,"objectIdField",void 0),Object(b.a)([Object(w.a)("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),Object(w.a)("service","objectIdField",["objectIdField","fields"])],He.prototype,"readObjectIdFieldFromService",null),Object(b.a)([Object(v.b)({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],He.prototype,"operationalLayerType",void 0),Object(b.a)([Object(v.b)(Ue.outFields)],He.prototype,"outFields",void 0),Object(b.a)([Object(v.b)({readOnly:!0,dependsOn:["layerId","dynamicDataSource"]})],He.prototype,"parsedUrl",null),Object(b.a)([Object(v.b)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],He.prototype,"path",void 0),Object(b.a)([Object(v.b)(N.g)],He.prototype,"popupEnabled",void 0),Object(b.a)([Object(v.b)({type:D.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],He.prototype,"popupTemplate",void 0),Object(b.a)([Object(v.b)({readOnly:!0,dependsOn:["fields","title"]})],He.prototype,"defaultPopupTemplate",null),Object(b.a)([Object(v.b)({type:[De],readOnly:!0})],He.prototype,"relationships",void 0),Object(b.a)([Object(v.b)({types:B.a,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:B.b,write:{target:"layerDefinition.drawingInfo.renderer",writer:W.c}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:function(e,t,r){return{ignoreOrigin:null==r?void 0:r.writeLayerSchema}},writer:W.c}}})],He.prototype,"renderer",null),Object(b.a)([Object(w.a)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),Object(w.a)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],He.prototype,"readRenderer",null),Object(b.a)([Object(v.b)()],He.prototype,"sourceJSON",void 0),Object(b.a)([Object(v.b)({type:Boolean})],He.prototype,"returnM",void 0),Object(b.a)([Object(v.b)({type:Boolean})],He.prototype,"returnZ",void 0),Object(b.a)([Object(v.b)(N.i)],He.prototype,"screenSizePerspectiveEnabled",void 0),Object(b.a)([Object(v.b)()],He.prototype,"source",null),Object(b.a)([Object(m.a)("source")],He.prototype,"castSource",null),Object(b.a)([Object(w.a)("portal-item","source",["featureSet"]),Object(w.a)("web-map","source",["featureSet"])],He.prototype,"readSource",null),Object(b.a)([Object(v.b)({readOnly:!0})],He.prototype,"serviceDefinitionExpression",void 0),Object(b.a)([Object(w.a)("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],He.prototype,"readServiceDefinitionExpression",null),Object(b.a)([Object(v.b)({type:E.a,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],He.prototype,"spatialReference",void 0),Object(b.a)([Object(v.b)({type:[ke.a]})],He.prototype,"templates",void 0),Object(b.a)([Object(w.a)("templates",["editFieldsInfo","creatorField","editorField","templates"])],He.prototype,"readTemplates",null),Object(b.a)([Object(v.b)({type:Oe.a})],He.prototype,"timeInfo",void 0),Object(b.a)([Object(v.b)()],He.prototype,"title",void 0),Object(b.a)([Object(w.a)("service","title",["name"]),Object(w.a)("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],He.prototype,"readTitle",null),Object(b.a)([Object(w.a)("web-map","title",["layerDefinition.name","title"])],He.prototype,"readTitleFromWebMap",null),Object(b.a)([Object(v.b)({type:String})],He.prototype,"sublayerTitleMode",void 0),Object(b.a)([Object(v.b)({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],He.prototype,"trackIdField",void 0),Object(b.a)([Object(v.b)({json:{read:!1}})],He.prototype,"type",void 0),Object(b.a)([Object(v.b)({type:String})],He.prototype,"typeIdField",void 0),Object(b.a)([Object(w.a)("service","typeIdField"),Object(w.a)("typeIdField",["layerDefinition.typeIdField"])],He.prototype,"readTypeIdField",null),Object(b.a)([Object(v.b)({type:[xe.a]})],He.prototype,"types",void 0),Object(b.a)([Object(w.a)("service","types",["types"]),Object(w.a)("types",["layerDefinition.types"])],He.prototype,"readTypes",null),Object(b.a)([Object(v.b)({readOnly:!0,json:{write:!1}})],He.prototype,"serverGens",void 0),Object(b.a)([Object(v.b)({type:R.a.ofType(me),readOnly:!0})],He.prototype,"indexes",void 0),Object(b.a)([Object(v.b)(N.j)],He.prototype,"url",null),Object(b.a)([Object(S.a)("url")],He.prototype,"writeUrl",null),Object(b.a)([Object(v.b)({readOnly:!0})],He.prototype,"userIsAdmin",void 0),Object(b.a)([Object(v.b)({json:{origins:{service:{read:!0}},read:!1}})],He.prototype,"version",void 0),Object(b.a)([Object(w.a)("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],He.prototype,"readVersion",null),Object(b.a)([Object(v.b)({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],He.prototype,"visible",void 0),Object(b.a)([Object(w.a)("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],He.prototype,"readVisible",null),He=Object(b.a)([Object(I.a)("esri.layers.FeatureLayer")],He);var Ke=Object(F.b)({types:A.a}),$e=He;t.default=$e},792:function(e,t,r){"use strict";var i,a=r(2),n=r(3),o=r(4),s=r(5),u=r(0),l=(r(13),r(18)),c=(r(12),r(14)),p=r(1),d=r(6),y=r(26),b=(r(9),r(19),r(20),r(23)),h=r(36),f=(r(86),r(267)),O=i=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var i;return Object(a.a)(this,r),(i=t.call(this,e)).dynamicDataSource=void 0,i.gdbVersion=null,i.geometryPrecision=void 0,i.historicMoment=null,i.maxAllowableOffset=void 0,i.objectIds=null,i.orderByFields=null,i.outFields=null,i.outSpatialReference=null,i.relationshipId=void 0,i.start=void 0,i.num=void 0,i.returnGeometry=!1,i.returnM=void 0,i.returnZ=void 0,i.where=null,i}return Object(n.a)(r,[{key:"_writeHistoricMoment",value:function(e,t){t.historicMoment=e&&e.getTime()}},{key:"writeStart",value:function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}},{key:"clone",value:function(){return new i(Object(l.a)({dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}}]),r}(b.a);Object(u.a)([Object(p.b)({type:f.a,json:{write:!0}})],O.prototype,"dynamicDataSource",void 0),Object(u.a)([Object(p.b)({type:String,json:{write:!0}})],O.prototype,"gdbVersion",void 0),Object(u.a)([Object(p.b)({type:Number,json:{write:!0}})],O.prototype,"geometryPrecision",void 0),Object(u.a)([Object(p.b)({type:Date})],O.prototype,"historicMoment",void 0),Object(u.a)([Object(y.a)("historicMoment")],O.prototype,"_writeHistoricMoment",null),Object(u.a)([Object(p.b)({type:Number,json:{write:!0}})],O.prototype,"maxAllowableOffset",void 0),Object(u.a)([Object(p.b)({type:[Number],json:{write:!0}})],O.prototype,"objectIds",void 0),Object(u.a)([Object(p.b)({type:[String],json:{write:!0}})],O.prototype,"orderByFields",void 0),Object(u.a)([Object(p.b)({type:[String],json:{write:!0}})],O.prototype,"outFields",void 0),Object(u.a)([Object(p.b)({type:h.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],O.prototype,"outSpatialReference",void 0),Object(u.a)([Object(p.b)({json:{write:!0}})],O.prototype,"relationshipId",void 0),Object(u.a)([Object(p.b)({type:Number,json:{read:{source:"resultOffset"}}})],O.prototype,"start",void 0),Object(u.a)([Object(y.a)("start"),Object(y.a)("num")],O.prototype,"writeStart",null),Object(u.a)([Object(p.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],O.prototype,"num",void 0),Object(u.a)([Object(p.b)({json:{write:!0}})],O.prototype,"returnGeometry",void 0),Object(u.a)([Object(p.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],O.prototype,"returnM",void 0),Object(u.a)([Object(p.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],O.prototype,"returnZ",void 0),Object(u.a)([Object(p.b)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],O.prototype,"where",void 0),(O=i=Object(u.a)([Object(d.a)("esri.tasks.support.RelationshipQuery")],O)).from=Object(c.m)(O);var j=O;t.a=j},799:function(e,t,r){"use strict";var i,a=r(2),n=r(3),o=r(4),s=r(5),u=r(0),l=(r(13),r(18)),c=(r(12),r(14)),p=r(1),d=r(6),y=r(26),b=(r(9),r(19),r(20),r(23)),h=i=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var i;return Object(a.a)(this,r),(i=t.call(this,e)).attachmentTypes=null,i.attachmentsWhere=null,i.keywords=null,i.globalIds=null,i.name=null,i.num=null,i.objectIds=null,i.returnMetadata=!1,i.size=null,i.start=null,i.where=null,i}return Object(n.a)(r,[{key:"writeStart",value:function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}},{key:"clone",value:function(){return new i(Object(l.a)({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}}]),r}(b.a);Object(u.a)([Object(p.b)({type:[String],json:{write:!0}})],h.prototype,"attachmentTypes",void 0),Object(u.a)([Object(p.b)({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],h.prototype,"attachmentsWhere",void 0),Object(u.a)([Object(p.b)({type:[String],json:{write:!0}})],h.prototype,"keywords",void 0),Object(u.a)([Object(p.b)({type:[Number],json:{write:!0}})],h.prototype,"globalIds",void 0),Object(u.a)([Object(p.b)({json:{write:!0}})],h.prototype,"name",void 0),Object(u.a)([Object(p.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],h.prototype,"num",void 0),Object(u.a)([Object(p.b)({type:[Number],json:{write:!0}})],h.prototype,"objectIds",void 0),Object(u.a)([Object(p.b)({type:Boolean,json:{default:!1,write:!0}})],h.prototype,"returnMetadata",void 0),Object(u.a)([Object(p.b)({type:[Number],json:{write:!0}})],h.prototype,"size",void 0),Object(u.a)([Object(p.b)({type:Number,json:{read:{source:"resultOffset"}}})],h.prototype,"start",void 0),Object(u.a)([Object(y.a)("start"),Object(y.a)("num")],h.prototype,"writeStart",null),Object(u.a)([Object(p.b)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],h.prototype,"where",void 0),(h=i=Object(u.a)([Object(d.a)("esri.tasks.support.AttachmentQuery")],h)).from=Object(c.m)(h);var f=h;t.a=f},838:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var i=r(16),a=r(12),n=r(69),o=r(294),s=a.a.getLogger("esri.layers.support.fieldProperties");function u(){return{fields:{type:[o.a],value:null},outFields:{type:[String],dependsOn:["fields"],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;var t,r=Object(i.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;Object(n.k)(this.fields,a)||s.error("field-attributes-layer:invalid-field","Invalid field ".concat(a," found in outFields"),{layer:this,outFields:e})}}catch(o){r.e(o)}finally{r.f()}return Object(n.e)(this.fields,e)}}}}}}]);
//# sourceMappingURL=2.77c0d43e.chunk.js.map