{"version":3,"sources":["../node_modules/@arcgis/core/layers/graphics/data/BoundsStore.js","../node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js","../node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js","../node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js","../node_modules/@arcgis/core/layers/graphics/sources/support/sourceUtils.js","../node_modules/@arcgis/core/layers/graphics/sources/geojson/GeoJSONSourceWorker.js"],"names":["d","minX","minY","maxX","maxY","n","this","_indexInvalid","_boundsToLoad","_boundsById","Map","_idByBounds","_index","i","s","_loadIndex","Array","size","forEach","clear","load","length","filter","has","get","delete","remove","search","set","push","o","getObjectId","t","objectId","getAttributes","attributes","getAttribute","e","cloneWithGeometry","r","getGeometry","geometry","getCentroid","centroid","hasZ","hasM","geometryInfo","_boundsStore","_featuresById","_markedIds","Set","events","featureAdapter","h","_add","_emitChanged","_remove","invalidateIndex","forEachInBounds","emit","add","displayId","onFeatureAdd","coords","a","getLogger","error","feature","onFeatureRemove","geometryType","numFeatures","Math","min","max","featureCount","vertexCount","LineString","MultiLineString","MultiPoint","Point","Polygon","MultiPolygon","type","features","f","coordinates","c","next","value","done","u","l","p","y","g","lengths","m","data","crs","properties","name","RegExp","test","w","Number","NEGATIVE_INFINITY","fields","maxObjectId","objectIdFieldName","objectIdFieldType","unknownFields","b","P","id","Object","keys","alias","code","description","globalId","success","uniqueId","message","details","field","originalValue","sanitizedValue","editable","parseFloat","String","TypeError","simplify","D","hasAttachments","capabilities","useStandardizedQueries","supportsCoordinatesQuantization","supportsReturningQueryGeometry","advancedQueryCapabilities","supportsQueryAttachments","supportsStatistics","supportsPercentileStatistics","supportsReturningGeometryCentroid","supportsQueryWithDistance","supportsDistinct","supportsReturningQueryExtent","supportsReturningGeometryProperties","supportsHavingClause","supportsOrderBy","supportsPagination","supportsQueryWithResultType","supportsSqlExpression","supportsDisjointSpatialRel","_queryEngine","destroy","_requiredFields","_fieldsIndex","_createDefaultAttributes","_checkProjection","spatialReference","url","responseType","T","q","objectIdField","x","timeInfo","some","nullable","unshift","jsonValues","indexOf","R","startTimeField","endTimeField","trackIdField","O","warnings","featureErrors","layerDefinition","drawingInfo","F","templates","extent","E","featureStore","_","j","_nextObjectId","S","I","_loadInitialFeatures","adds","updates","_applyEdits","executeQuery","signal","executeQueryForCount","executeQueryForIds","executeQueryForExtent","_assignObjectId","addMany","fullExtent","timeExtent","start","end","deletes","addResults","deleteResults","updateResults","uidToObjectId","_applyAddEdits","_applyUpdateEdits","removeManyById","featureEditResults","uid","getFeature","isFinite"],"mappings":"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","file":"static/js/35.53eeb980.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport s from\"../../../core/has.js\";import{r as i}from\"../../../chunks/rbush.js\";const d={minX:0,minY:0,maxX:0,maxY:0};class n{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=i(9,s(\"csp-restrictions\")?s=>({minX:s[0],minY:s[1],maxX:s[2],maxY:s[3]}):[\"[0]\",\"[1]\",\"[2]\",\"[3]\"]),this._loadIndex=()=>{if(this._indexInvalid){const s=new Array(this._idByBounds.size);let i=0;this._idByBounds.forEach(((d,n)=>{s[i++]=n})),this._indexInvalid=!1,this._index.clear(),this._index.load(s)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter((s=>this._idByBounds.has(s)))),this._boundsToLoad.length=0)}}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(s){const i=this._boundsById.get(s);this._boundsById.delete(s),i&&(this._idByBounds.delete(i),this._indexInvalid||this._index.remove(i))}forEachInBounds(s,i){this._loadIndex();for(const n of function(s,i){return d.minX=i[0],d.minY=i[1],d.maxX=i[2],d.maxY=i[3],s.search(d)}(this._index,s))i(this._idByBounds.get(n))}get(s){return this._boundsById.get(s)}has(s){return this._boundsById.has(s)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(s,i){if(!this._indexInvalid){const i=this._boundsById.get(s);i&&(this._index.remove(i),this._idByBounds.delete(i))}this._boundsById.set(s,i),i&&(this._idByBounds.set(i,s),this._indexInvalid||(this._boundsToLoad.push(i),this._boundsToLoad.length>5e4&&this._loadIndex()))}}export{n as BoundsStore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport t from\"../OptimizedFeature.js\";import e from\"../OptimizedGeometry.js\";import{getCentroidOptimizedGeometry as r}from\"../centroid.js\";const o={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(e,r)=>new t(r,e.attributes,null,e.objectId),getGeometry:t=>t.geometry,getCentroid:(t,o)=>(t.centroid||(t.centroid=r(new e,t.geometry,o.hasZ,o.hasM)),t.centroid)};export default o;export{o as optimizedFeatureQueryEngineAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import t from\"../../../core/Logger.js\";import r from\"../../../core/Error.js\";import s from\"../../../core/Evented.js\";import{create as o,NEGATIVE_INFINITY as i}from\"../../../geometry/support/aaBoundingRect.js\";import{getBoundsOptimizedGeometry as a}from\"../featureConversionUtils.js\";import{fromRect as d}from\"../../../geometry/support/aaBoundingBox.js\";import{BoundsStore as n}from\"./BoundsStore.js\";import{optimizedFeatureQueryEngineAdapter as h}from\"./optimizedFeatureQueryEngineAdapter.js\";export default class{constructor(e){this.geometryInfo=e,this._boundsStore=new n,this._featuresById=new Map,this._markedIds=new Set,this.events=new s,this.featureAdapter=h}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){if(!this.numFeatures)return null;const e=o(i);return this._featuresById.forEach((t=>{const r=this._boundsStore.get(t.objectId);r&&(e[0]=Math.min(r[0],e[0]),e[1]=Math.min(r[1],e[1]),e[2]=Math.max(r[2],e[2]),e[3]=Math.max(r[3],e[3]))})),e}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t,r){for(const s of e){const e=this._boundsStore.get(s.objectId);e&&t(d(r,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach(((t,r)=>{this._markedIds.has(r)||(e=!0,this._remove(t))})),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit(\"changed\",void 0)}_add(s){if(!s)return;const i=s.objectId;if(null==i)return void t.getLogger(\"esri.layers.graphics.data.FeatureStore\").error(new r(\"featurestore:invalid-feature\",\"feature id is missing\",{feature:s}));const d=this._featuresById.get(i);let n;if(this._markedIds.add(i),d?(s.displayId=d.displayId,n=this._boundsStore.get(i),this._boundsStore.delete(i)):e(this.onFeatureAdd)&&this.onFeatureAdd(s),!s.geometry||!s.geometry.coords||!s.geometry.coords.length)return this._boundsStore.set(i,null),void this._featuresById.set(i,s);n=a(n||o(),s.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(i,n),this._featuresById.set(i,s)}_remove(t){return e(this.onFeatureRemove)&&this.onFeatureRemove(t),this._markedIds.delete(t.objectId),this._boundsStore.delete(t.objectId),this._featuresById.delete(t.objectId),t}}\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import t from\"../../OptimizedFeature.js\";import n from\"../../OptimizedGeometry.js\";function o(e){const t=[];return e.forEach((e=>t.push(e))),t}const r={LineString:\"esriGeometryPolyline\",MultiLineString:\"esriGeometryPolyline\",MultiPoint:\"esriGeometryMultipoint\",Point:\"esriGeometryPoint\",Polygon:\"esriGeometryPolygon\",MultiPolygon:\"esriGeometryPolygon\"};function*i(e){switch(e.type){case\"Feature\":yield e;break;case\"FeatureCollection\":for(const t of e.features)t&&(yield t)}}function*s(e){if(!e)return null;switch(e.type){case\"Point\":yield e.coordinates;break;case\"LineString\":case\"MultiPoint\":yield*e.coordinates;break;case\"MultiLineString\":case\"Polygon\":for(const t of e.coordinates)yield*t;break;case\"MultiPolygon\":for(const t of e.coordinates)for(const e of t)yield*e}}function c(e){for(;;){const{value:t,done:n}=e.next();if(n)return!1;if(t.length>2)return!0}}function u(e){let t=0;for(let n=0;n<e.length;n++){const o=e[n],r=e[(n+1)%e.length];t+=o[0]*r[1]-r[0]*o[1]}return t<=0}function l(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function f(e,t,n){switch(t.type){case\"LineString\":return function(e,t,n){return p(e,t.coordinates,n),e}(e,t,n);case\"MultiLineString\":return function(e,t,n){for(const o of t.coordinates)p(e,o,n);return e}(e,t,n);case\"MultiPoint\":return function(e,t,n){return p(e,t.coordinates,n),e}(e,t,n);case\"MultiPolygon\":return function(e,t,n){for(const o of t.coordinates){a(e,o[0],n);for(let t=1;t<o.length;t++)y(e,o[t],n)}return e}(e,t,n);case\"Point\":return function(e,t,n){return g(e,t.coordinates,n),e}(e,t,n);case\"Polygon\":return function(e,t,n){const o=t.coordinates;a(e,o[0],n);for(let t=1;t<o.length;t++)y(e,o[t],n);return e}(e,t,n)}}function a(e,t,n){const o=l(t);u(o)?p(e,o,n):d(e,o,n)}function y(e,t,n){const o=l(t);u(o)?d(e,o,n):p(e,o,n)}function p(e,t,n){for(const o of t)g(e,o,n);e.lengths.push(t.length)}function d(e,t,n){for(let o=t.length-1;o>=0;o--)g(e,t[o],n);e.lengths.push(t.length)}function g(e,t,n){const[o,r,i]=t;e.coords.push(o,r),n.hasZ&&e.coords.push(i||0)}function m(e){switch(typeof e){case\"string\":return\"esriFieldTypeString\";case\"number\":return\"esriFieldTypeDouble\";default:return\"unknown\"}}function h(t){if(!t)throw new e(\"geojson-layer:empty\",\"GeoJSON data is empty\");if(\"Feature\"!==t.type&&\"FeatureCollection\"!==t.type)throw new e(\"geojson-layer:unsupported-geojson-object\",\"missing or not supported GeoJSON object type\",{data:t});const{crs:n}=t;if(!n)return;const o=\"string\"==typeof n?n:\"name\"===n.type?n.properties.name:null,r=new RegExp(\".*(CRS84H?|4326)$\",\"i\");if(!o||!r.test(o))throw new e(\"geojson-layer:unsupported-crs\",\"unsupported GeoJSON 'crs' member\",{crs:n})}function w(e,t={}){const n=i(e),u=[],l=new Set,f=new Set;let a,y=!1,p=Number.NEGATIVE_INFINITY,d=null,g=!1,{geometryType:h=null}=t,w=!1;for(;;){const{value:e,done:t}=n.next();if(t){const e=d&&1===d.length&&d[0]||null;if(e)for(const t of u)t.name===e&&(t.type=\"esriFieldTypeOID\");return{fields:u,geometryType:h,hasZ:y,maxObjectId:Math.max(0,p),objectIdFieldName:e,objectIdFieldType:a,unknownFields:o(f)}}const{geometry:i,properties:b,id:P}=e;if(!i||(h||(h=r[i.type]),r[i.type]===h)){if(!y){y=c(s(i))}if(g||(g=null!=P,g&&(a=typeof P,\"number\"===a&&(d=Object.keys(b).filter((e=>b[e]===P))))),g&&\"number\"===a&&null!=P&&(p=Math.max(p,P),d.length>1?d=d.filter((e=>b[e]===P)):1===d.length&&(d=b[d[0]]===P?d:[])),!w&&b){let e=!0;for(const t in b){if(l.has(t))continue;const n=b[t];if(null==n){e=!1,f.add(t);continue}const o=m(n);\"unknown\"!==o?(f.delete(t),l.add(t),u.push({name:t,alias:t,type:o})):f.add(t)}w=e}}}}function b(e,o){return function(e){const t=[];for(;;){const{value:n,done:o}=e.next();if(o)return t;t.push(n)}}(function*(e,o={}){const{geometryType:i,objectIdFieldName:s}=o;for(;;){const{value:c,done:u}=e.next();if(u)return;const{geometry:l,properties:a,id:y}=c;if(l&&r[l.type]!==i)continue;const p=a||{};s&&null!=y&&!p[s]&&(p[s]=y);const d=new t(l?f(new n,l,o):null,p);yield d}}(i(e),o))}export{b as createOptimizedFeatures,w as inferLayerProperties,h as validateGeoJSON};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isValid as t}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{sanitizeNullFieldValue as e,validateFieldValue as n,validationErrorToString as i,isNumericField as r,isStringField as s}from\"../../../support/fieldUtils.js\";class o{constructor(){this.code=null,this.description=null}}class l{constructor(t){this.error=new o,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=t}}function u(t){return new l(t)}class a{constructor(t){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=t}}function c(t){return new a(t)}const f=new Set;function d(t,e,r,s,o=!1,l){f.clear();for(const e in s){const a=t.get(e);if(!a)continue;const c=s[e],d=m(a,c);if(d!==c&&l&&l.push({name:\"invalid-value-type\",message:\"attribute value was converted to match the field type\",details:{field:a,originalValue:c,sanitizedValue:d}}),f.add(a.name),a&&(o||a.editable)){const t=n(a,d);if(t)return u(i(t,a,d));r[a.name]=d}}for(const t of e)if(!f.has(t.name))return u(`missing required field \"${t.name}\"`);return null}function m(t,n){let i=n;return\"string\"==typeof n&&r(t)?i=parseFloat(n):null!=n&&s(t)&&\"string\"!=typeof n&&(i=String(n)),e(i)}let p;function h(e,n){if(!e||!t(n))return e;if(\"rings\"in e||\"paths\"in e){if(!p)throw new TypeError(\"geometry engine not loaded\");return p.simplify(n,e)}return e}async function g(){return p||(p=await import(\"../../../../geometry/geometryEngineJSON.js\"),p)}async function y(e,n){!t(e)||\"esriGeometryPolygon\"!==n&&\"esriGeometryPolyline\"!==n||await g()}export{u as createFeatureEditErrorResult,c as createFeatureEditSuccessResult,g as loadGeometryEngine,y as loadGeometryEngineForSimplify,d as mixAttributes,h as simplify};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import{all as t}from\"../../../../core/promiseUtils.js\";import{WGS84 as i,equals as s}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{getJsonType as r}from\"../../../../geometry/support/jsonUtils.js\";import{getFieldDefaultValue as n}from\"../../../support/fieldUtils.js\";import o from\"../../../../request.js\";import{kebabDict as a}from\"../../../support/fieldType.js\";import{convertFromGeometry as l,convertToGeometry as d,convertFromFeatures as u,convertToFeature as p,convertFromFeature as y}from\"../../featureConversionUtils.js\";import f from\"../../../support/FieldsIndex.js\";import{project as m,checkProjectionSupport as c}from\"../../data/projectionSupport.js\";import{validateGeoJSON as h,inferLayerProperties as g,createOptimizedFeatures as I}from\"./geojson.js\";import{createDrawingInfo as F,createDefaultTemplate as b,createDefaultAttributesFunction as j}from\"../support/clientSideDefaults.js\";import _ from\"../../data/FeatureStore.js\";import E from\"../../data/QueryEngine.js\";import{loadGeometryEngineForSimplify as T,mixAttributes as q,createFeatureEditSuccessResult as x,createFeatureEditErrorResult as w,simplify as R}from\"../support/sourceUtils.js\";const D={hasAttachments:!1,capabilities:\"query, editing, create, delete, update\",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};export default class{constructor(){this._queryEngine=null}destroy(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=this._requiredFields=this._fieldsIndex=this._createDefaultAttributes=null}async load(t){const r=[];await this._checkProjection(t.spatialReference);let u=null;if(t.url){u=(await o(t.url,{responseType:\"json\"})).data,await h(u)}const p=g(u,{geometryType:t.geometryType}),y=t.fields||p.fields||[],c=null!=t.hasZ?t.hasZ:p.hasZ,T=p.geometryType,q=t.objectIdField||(\"number\"===p.objectIdFieldType?p.objectIdFieldName:\"OBJECTID\")||\"OBJECTID\",x=t.spatialReference||i;let w=t.timeInfo;if(!T)throw new e(\"geojson-layer:missing-property\",\"geometryType not set and couldn't be inferred from the provided features\");if(\"string\"===p.objectIdFieldType&&r.push({name:\"geojson-layer:unsupported-id-type\",message:\"Feature ids are of type string and can't be honored.\"}),y===p.fields&&p.unknownFields.length>0&&r.push({name:\"geojson-layer:unknown-field-types\",message:\"Some fields types couldn't be inferred from the features and were dropped\",details:{unknownFields:p.unknownFields}}),q){let e=null;y.some((t=>t.name===q&&(e=t,!0)))?(e.type=\"esriFieldTypeOID\",e.editable=!1,e.nullable=!1):y.unshift({alias:q,name:q,type:\"esriFieldTypeOID\",editable:!1,nullable:!1})}for(const t of y){if(null==t.name&&(t.name=t.alias),null==t.alias&&(t.alias=t.name),!t.name)throw new e(\"geojson-layer:invalid-field-name\",\"field name is missing\",{field:t});if(t.name===q&&(t.type=\"esriFieldTypeOID\"),-1===a.jsonValues.indexOf(t.type))throw new e(\"geojson-layer:invalid-field-type\",`invalid type for field \"${t.name}\"`,{field:t})}const R={};this._requiredFields=[];for(const e of y)if(\"esriFieldTypeOID\"!==e.type&&\"esriFieldTypeGlobalID\"!==e.type){e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable;const t=n(e);e.nullable||void 0!==t?R[e.name]=t:this._requiredFields.push(e)}if(this._fieldsIndex=new f(y),w){if(w.startTimeField){const e=this._fieldsIndex.get(w.startTimeField);e?(w.startTimeField=e.name,e.type=\"esriFieldTypeDate\"):w.startTimeField=null}if(w.endTimeField){const e=this._fieldsIndex.get(w.endTimeField);e?(w.endTimeField=e.name,e.type=\"esriFieldTypeDate\"):w.endTimeField=null}if(w.trackIdField){const e=this._fieldsIndex.get(w.trackIdField);e?w.trackIdField=e.name:(w.trackIdField=null,r.push({name:\"geojson-layer:invalid-timeInfo-trackIdField\",message:\"trackIdField is missing\",details:{timeInfo:w}}))}w.startTimeField||w.endTimeField||(r.push({name:\"geojson-layer:invalid-timeInfo\",message:\"startTimeField and endTimeField are missing\",details:{timeInfo:w}}),w=null)}const O={warnings:r,featureErrors:[],layerDefinition:{...D,drawingInfo:F(T),templates:b(R),extent:null,geometryType:T,objectIdField:q,fields:y,hasZ:!!c,timeInfo:w}};this._queryEngine=new E({fields:y,geometryType:T,hasM:!1,hasZ:c,objectIdField:q,spatialReference:x,timeInfo:w,featureStore:new _({geometryType:T,hasM:!1,hasZ:c})}),this._createDefaultAttributes=j(R,q),this._nextObjectId=p.maxObjectId+1;const S=I(u,{geometryType:T,hasZ:c,objectIdFieldName:\"number\"===p.objectIdFieldType?q:null});if(!s(x,i))for(const e of S)e.geometry&&(e.geometry=l(m(d(e.geometry,T,c,!1),i,x)));return this._loadInitialFeatures(O,S),O}async applyEdits(e){const{spatialReference:i,geometryType:s}=this._queryEngine;return await t([T(i,s),c(e.adds,i),c(e.updates,i)]),this._applyEdits(e)}async queryFeatures(e={},t={}){return this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e={},t={}){return this._queryEngine.executeQueryForExtent(e,t.signal)}_loadInitialFeatures(e,t){const{featureStore:i,objectIdField:s}=this._queryEngine,r=[];for(const i of t){const t=this._createDefaultAttributes(),n=q(this._fieldsIndex,this._requiredFields,t,i.attributes,!0,e.warnings);n?e.featureErrors.push(n):(this._assignObjectId(t,i.attributes,!0),i.attributes=t,i.objectId=t[s],r.push(i))}if(i.addMany(r),e.layerDefinition.extent=this._queryEngine.fullExtent,e.layerDefinition.timeInfo){const{start:t,end:i}=this._queryEngine.timeExtent;e.layerDefinition.timeInfo.timeExtent=[t,i]}return e}_applyEdits(e){const{adds:t,updates:i,deletes:s}=e,r={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(t&&t.length&&this._applyAddEdits(r,t),i&&i.length&&this._applyUpdateEdits(r,i),s&&s.length){for(const e of s)r.deleteResults.push(x(e));this._queryEngine.featureStore.removeManyById(s)}return{fullExtent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent,featureEditResults:r}}_applyAddEdits(e,t){const{addResults:i}=e,{geometryType:s,hasM:n,hasZ:o,objectIdField:a,spatialReference:l,featureStore:d}=this._queryEngine,p=[];for(const n of t){if(n.geometry&&s!==r(n.geometry)){i.push(w(\"Incorrect geometry type.\"));continue}const t=this._createDefaultAttributes(),o=q(this._fieldsIndex,this._requiredFields,t,n.attributes);if(o)i.push(o);else{if(this._assignObjectId(t,n.attributes),n.attributes=t,null!=n.uid){const t=n.attributes[a];e.uidToObjectId[n.uid]=t}n.geometry&&(n.geometry=m(R(n.geometry,l),n.geometry.spatialReference,l)),p.push(n),i.push(x(n.attributes[a]))}}d.addMany(u([],p,s,o,n,a))}_applyUpdateEdits({updateResults:e},t){const{geometryType:i,hasM:s,hasZ:n,objectIdField:o,spatialReference:a,featureStore:l}=this._queryEngine;for(const d of t){const{attributes:t,geometry:u}=d,f=t&&t[o];if(null==f){e.push(w(`Identifier field ${o} missing`));continue}if(!l.has(f)){e.push(w(`Feature with object id ${f} missing`));continue}const c=p(l.getFeature(f),i,n,s);if(u){if(i!==r(u)){e.push(w(\"Incorrect geometry type.\"));continue}c.geometry=m(R(u,a),u.spatialReference,a)}if(t){const i=q(this._fieldsIndex,this._requiredFields,c.attributes,t);if(i){e.push(i);continue}}l.add(y(c,i,n,s,o)),e.push(x(f))}}_assignObjectId(e,t,i=!1){const s=this._queryEngine.objectIdField;i&&isFinite(t[s])?e[s]=t[s]:e[s]=this._nextObjectId++}async _checkProjection(t){try{await c(i,t)}catch{throw new e(\"geojson-layer\",\"Projection not supported\")}}}\n"],"sourceRoot":""}