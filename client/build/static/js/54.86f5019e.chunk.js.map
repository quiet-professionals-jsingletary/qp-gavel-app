{"version":3,"sources":["../node_modules/@arcgis/core/layers/graphics/sources/support/sourceUtils.js","../node_modules/@arcgis/core/layers/graphics/sources/support/MemorySourceWorker.js","../node_modules/@arcgis/core/layers/graphics/data/BoundsStore.js","../node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js","../node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js"],"names":["o","this","code","description","l","t","error","globalId","objectId","success","uniqueId","u","a","c","p","f","Set","d","e","r","s","clear","get","m","push","name","message","details","field","originalValue","sanitizedValue","add","editable","n","i","has","parseFloat","String","h","TypeError","simplify","g","y","E","x","xmin","ymin","xmax","ymax","spatialReference","T","hasAttachments","capabilities","useStandardizedQueries","supportsCoordinatesQuantization","supportsReturningQueryGeometry","advancedQueryCapabilities","supportsQueryAttachments","supportsStatistics","supportsPercentileStatistics","supportsReturningGeometryCentroid","supportsQueryWithDistance","supportsDistinct","supportsReturningQueryExtent","supportsReturningGeometryProperties","supportsHavingClause","supportsOrderBy","supportsPagination","supportsQueryWithResultType","supportsSqlExpression","supportsDisjointSpatialRel","q","z","hasZ","R","hasM","_queryEngine","_nextObjectId","destroy","_requiredFields","_fieldsIndex","_createDefaultAttributes","features","_inferLayerProperties","fields","I","b","F","geometryType","_","j","objectIdField","timeInfo","some","type","nullable","unshift","alias","jsonValues","indexOf","startTimeField","endTimeField","trackIdField","D","warnings","featureErrors","layerDefinition","drawingInfo","templates","extent","assignedObjectIds","featureStore","length","O","reduce","attributes","isNaN","isFinite","Math","max","_loadInitialFeatures","adds","updates","_applyEdits","executeQuery","signal","executeQueryForCount","executeQueryForIds","executeQueryForExtent","geometry","toLowerCase","uid","_assignObjectId","addMany","fullExtent","timeExtent","start","end","deletes","addResults","deleteResults","updateResults","uidToObjectId","_applyAddEdits","_applyUpdateEdits","removeManyById","featureEditResults","getFeature","minX","minY","maxX","maxY","_indexInvalid","_boundsToLoad","_boundsById","Map","_idByBounds","_index","_loadIndex","Array","size","forEach","load","filter","delete","remove","search","set","getObjectId","getAttributes","getAttribute","cloneWithGeometry","getGeometry","getCentroid","centroid","geometryInfo","_boundsStore","_featuresById","_markedIds","events","featureAdapter","_add","_emitChanged","_remove","invalidateIndex","forEachInBounds","emit","displayId","onFeatureAdd","coords","getLogger","feature","onFeatureRemove","numFeatures","min","featureCount","vertexCount"],"mappings":"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","file":"static/js/54.86f5019e.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isValid as t}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{sanitizeNullFieldValue as e,validateFieldValue as n,validationErrorToString as i,isNumericField as r,isStringField as s}from\"../../../support/fieldUtils.js\";class o{constructor(){this.code=null,this.description=null}}class l{constructor(t){this.error=new o,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=t}}function u(t){return new l(t)}class a{constructor(t){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=t}}function c(t){return new a(t)}const f=new Set;function d(t,e,r,s,o=!1,l){f.clear();for(const e in s){const a=t.get(e);if(!a)continue;const c=s[e],d=m(a,c);if(d!==c&&l&&l.push({name:\"invalid-value-type\",message:\"attribute value was converted to match the field type\",details:{field:a,originalValue:c,sanitizedValue:d}}),f.add(a.name),a&&(o||a.editable)){const t=n(a,d);if(t)return u(i(t,a,d));r[a.name]=d}}for(const t of e)if(!f.has(t.name))return u(`missing required field \"${t.name}\"`);return null}function m(t,n){let i=n;return\"string\"==typeof n&&r(t)?i=parseFloat(n):null!=n&&s(t)&&\"string\"!=typeof n&&(i=String(n)),e(i)}let p;function h(e,n){if(!e||!t(n))return e;if(\"rings\"in e||\"paths\"in e){if(!p)throw new TypeError(\"geometry engine not loaded\");return p.simplify(n,e)}return e}async function g(){return p||(p=await import(\"../../../../geometry/geometryEngineJSON.js\"),p)}async function y(e,n){!t(e)||\"esriGeometryPolygon\"!==n&&\"esriGeometryPolyline\"!==n||await g()}export{u as createFeatureEditErrorResult,c as createFeatureEditSuccessResult,g as loadGeometryEngine,y as loadGeometryEngineForSimplify,d as mixAttributes,h as simplify};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import{all as t}from\"../../../../core/promiseUtils.js\";import{WGS84 as i}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{getJsonType as s,isPoint as r}from\"../../../../geometry/support/jsonUtils.js\";import{getFieldDefaultValue as n}from\"../../../support/fieldUtils.js\";import{kebabDict as a}from\"../../../support/fieldType.js\";import{convertFromFeatures as l,convertToFeature as o,convertFromFeature as d}from\"../../featureConversionUtils.js\";import u from\"../../../support/FieldsIndex.js\";import{checkProjectionSupport as p,project as f}from\"../../data/projectionSupport.js\";import{createDefaultAttributesFunction as y,createDrawingInfo as c,createDefaultTemplate as m}from\"./clientSideDefaults.js\";import h from\"../../data/FeatureStore.js\";import g from\"../../data/QueryEngine.js\";import{loadGeometryEngineForSimplify as I,createFeatureEditErrorResult as b,mixAttributes as F,createFeatureEditSuccessResult as _,simplify as j}from\"./sourceUtils.js\";const E=i,x={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:i},T={hasAttachments:!1,capabilities:\"query, editing, create, delete, update\",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};function q(e){return r(e)?null!=e.z:!!e.hasZ}function R(e){return r(e)?null!=e.m:!!e.hasM}export default class{constructor(){this._queryEngine=null,this._nextObjectId=null}destroy(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=this._requiredFields=this._fieldsIndex=this._createDefaultAttributes=null}async load(t){const i=[],{features:s}=t,r=this._inferLayerProperties(s,t.fields),l=t.fields||[],o=null!=t.hasM?t.hasM:r.hasM,d=null!=t.hasZ?t.hasZ:r.hasZ,f=!t.spatialReference&&!r.spatialReference,I=f?E:t.spatialReference||r.spatialReference,b=f?x:null,F=t.geometryType||r.geometryType,_=!F;let j=t.objectIdField||r.objectIdField,q=t.timeInfo;if(!_&&(f&&i.push({name:\"feature-layer:spatial-reference-not-found\",message:\"Spatial reference not provided or found in features. Defaults to WGS84\"}),!F))throw new e(\"feature-layer:missing-property\",\"geometryType not set and couldn't be inferred from the provided features\");if(!j)throw new e(\"feature-layer:missing-property\",\"objectIdField not set and couldn't be found in the provided fields\");if(r.objectIdField&&j!==r.objectIdField&&(i.push({name:\"feature-layer:duplicated-oid-field\",message:`Provided objectIdField \"${j}\" doesn't match the field name \"${r.objectIdField}\", found in the provided fields`}),j=r.objectIdField),j&&!r.objectIdField){let e=null;l.some((t=>t.name===j&&(e=t,!0)))?(e.type=\"esriFieldTypeOID\",e.editable=!1,e.nullable=!1):l.unshift({alias:j,name:j,type:\"esriFieldTypeOID\",editable:!1,nullable:!1})}for(const t of l){if(null==t.name&&(t.name=t.alias),null==t.alias&&(t.alias=t.name),!t.name)throw new e(\"feature-layer:invalid-field-name\",\"field name is missing\",{field:t});if(t.name===j&&(t.type=\"esriFieldTypeOID\"),-1===a.jsonValues.indexOf(t.type))throw new e(\"feature-layer:invalid-field-type\",`invalid type for field \"${t.name}\"`,{field:t})}const R={};this._requiredFields=[];for(const e of l)if(\"esriFieldTypeOID\"!==e.type&&\"esriFieldTypeGlobalID\"!==e.type){e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable;const t=n(e);e.nullable||void 0!==t?R[e.name]=t:this._requiredFields.push(e)}if(this._fieldsIndex=new u(l),this._createDefaultAttributes=y(R,j),q){if(q.startTimeField){const e=this._fieldsIndex.get(q.startTimeField);e?(q.startTimeField=e.name,e.type=\"esriFieldTypeDate\"):q.startTimeField=null}if(q.endTimeField){const e=this._fieldsIndex.get(q.endTimeField);e?(q.endTimeField=e.name,e.type=\"esriFieldTypeDate\"):q.endTimeField=null}if(q.trackIdField){const e=this._fieldsIndex.get(q.trackIdField);e?q.trackIdField=e.name:(q.trackIdField=null,i.push({name:\"feature-layer:invalid-timeInfo-trackIdField\",message:\"trackIdField is missing\",details:{timeInfo:q}}))}q.startTimeField||q.endTimeField||(i.push({name:\"feature-layer:invalid-timeInfo\",message:\"startTimeField and endTimeField are missing or invalid\",details:{timeInfo:q}}),q=null)}const D={warnings:i,featureErrors:[],layerDefinition:{...T,drawingInfo:c(F),templates:m(R),extent:b,geometryType:F,objectIdField:j,fields:l,hasZ:!!d,hasM:!!o,timeInfo:q},assignedObjectIds:{}};if(this._queryEngine=new g({fields:l,geometryType:F,hasM:o,hasZ:d,objectIdField:j,spatialReference:I,featureStore:new h({geometryType:F,hasM:o,hasZ:d}),timeInfo:q}),!s||!s.length)return this._nextObjectId=1,D;const O=s.reduce(((e,t)=>{const i=t.attributes&&t.attributes[j];return null==i||isNaN(i)||!isFinite(i)?e:Math.max(e,i)}),0);return this._nextObjectId=1+O,await p(s,I),this._loadInitialFeatures(D,s)}async applyEdits(e){const{spatialReference:i,geometryType:s}=this._queryEngine;return await t([I(i,s),p(e.adds,i),p(e.updates,i)]),this._applyEdits(e)}async queryFeatures(e,t={}){return this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e,t={}){return this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e,t={}){return this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e,t={}){return this._queryEngine.executeQueryForExtent(e,t.signal)}_inferLayerProperties(e,t){let i,r,n=null,a=null,l=null;for(const t of e){const e=t.geometry;if(e&&(n||(n=s(e)),a||(a=e.spatialReference),null==i&&(i=q(e)),null==r&&(r=R(e)),n&&a&&null!=i&&null!=r))break}if(t&&t.length){let e=null;t.some((t=>{const i=\"esriFieldTypeOID\"===t.type,s=!t.type&&t.name&&\"objectid\"===t.name.toLowerCase();return e=t,i||s}))&&(l=e.name)}return{geometryType:n,spatialReference:a,objectIdField:l,hasM:r,hasZ:i}}_loadInitialFeatures(e,t){const{geometryType:i,hasM:r,hasZ:n,objectIdField:a,spatialReference:o,featureStore:d}=this._queryEngine,u=[];for(const r of t){if(null!=r.uid&&(e.assignedObjectIds[r.uid]=-1),r.geometry&&i!==s(r.geometry)){e.featureErrors.push(b(\"Incorrect geometry type.\"));continue}const t=this._createDefaultAttributes(),n=F(this._fieldsIndex,this._requiredFields,t,r.attributes,!0,e.warnings);n?e.featureErrors.push(n):(this._assignObjectId(t,r.attributes,!0),r.attributes=t,null!=r.uid&&(e.assignedObjectIds[r.uid]=r.attributes[a]),r.geometry&&(r.geometry=f(r.geometry,r.geometry.spatialReference,o)),u.push(r))}if(d.addMany(l([],u,i,n,r,a)),e.layerDefinition.extent=this._queryEngine.fullExtent,e.layerDefinition.timeInfo){const{start:t,end:i}=this._queryEngine.timeExtent;e.layerDefinition.timeInfo.timeExtent=[t,i]}return e}_applyEdits(e){const{adds:t,updates:i,deletes:s}=e,r={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(t&&t.length&&this._applyAddEdits(r,t),i&&i.length&&this._applyUpdateEdits(r,i),s&&s.length){for(const e of s)r.deleteResults.push(_(e));this._queryEngine.featureStore.removeManyById(s)}return{fullExtent:this._queryEngine.fullExtent,featureEditResults:r}}_applyAddEdits(e,t){const{addResults:i}=e,{geometryType:r,hasM:n,hasZ:a,objectIdField:o,spatialReference:d,featureStore:u}=this._queryEngine,p=[];for(const n of t){if(n.geometry&&r!==s(n.geometry)){i.push(b(\"Incorrect geometry type.\"));continue}const t=this._createDefaultAttributes(),a=F(this._fieldsIndex,this._requiredFields,t,n.attributes);if(a)i.push(a);else{if(this._assignObjectId(t,n.attributes),n.attributes=t,null!=n.uid){const t=n.attributes[o];e.uidToObjectId[n.uid]=t}n.geometry&&(n.geometry=f(j(n.geometry,d),n.geometry.spatialReference,d)),p.push(n),i.push(_(n.attributes[o]))}}u.addMany(l([],p,r,a,n,o))}_applyUpdateEdits({updateResults:e},t){const{geometryType:i,hasM:r,hasZ:n,objectIdField:a,spatialReference:l,featureStore:u}=this._queryEngine;for(const p of t){const{attributes:t,geometry:y}=p,c=t&&t[a];if(null==c){e.push(b(`Identifier field ${a} missing`));continue}if(!u.has(c)){e.push(b(`Feature with object id ${c} missing`));continue}const m=o(u.getFeature(c),i,n,r);if(y){if(i!==s(y)){e.push(b(\"Incorrect geometry type.\"));continue}m.geometry=f(j(y,l),y.spatialReference,l)}if(t){const i=F(this._fieldsIndex,this._requiredFields,m.attributes,t);if(i){e.push(i);continue}}u.add(d(m,i,n,r,a)),e.push(_(c))}}_assignObjectId(e,t,i=!1){const s=this._queryEngine.objectIdField;i&&t&&isFinite(t[s])?e[s]=t[s]:e[s]=this._nextObjectId++}}\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport s from\"../../../core/has.js\";import{r as i}from\"../../../chunks/rbush.js\";const d={minX:0,minY:0,maxX:0,maxY:0};class n{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=i(9,s(\"csp-restrictions\")?s=>({minX:s[0],minY:s[1],maxX:s[2],maxY:s[3]}):[\"[0]\",\"[1]\",\"[2]\",\"[3]\"]),this._loadIndex=()=>{if(this._indexInvalid){const s=new Array(this._idByBounds.size);let i=0;this._idByBounds.forEach(((d,n)=>{s[i++]=n})),this._indexInvalid=!1,this._index.clear(),this._index.load(s)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter((s=>this._idByBounds.has(s)))),this._boundsToLoad.length=0)}}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(s){const i=this._boundsById.get(s);this._boundsById.delete(s),i&&(this._idByBounds.delete(i),this._indexInvalid||this._index.remove(i))}forEachInBounds(s,i){this._loadIndex();for(const n of function(s,i){return d.minX=i[0],d.minY=i[1],d.maxX=i[2],d.maxY=i[3],s.search(d)}(this._index,s))i(this._idByBounds.get(n))}get(s){return this._boundsById.get(s)}has(s){return this._boundsById.has(s)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(s,i){if(!this._indexInvalid){const i=this._boundsById.get(s);i&&(this._index.remove(i),this._idByBounds.delete(i))}this._boundsById.set(s,i),i&&(this._idByBounds.set(i,s),this._indexInvalid||(this._boundsToLoad.push(i),this._boundsToLoad.length>5e4&&this._loadIndex()))}}export{n as BoundsStore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport t from\"../OptimizedFeature.js\";import e from\"../OptimizedGeometry.js\";import{getCentroidOptimizedGeometry as r}from\"../centroid.js\";const o={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(e,r)=>new t(r,e.attributes,null,e.objectId),getGeometry:t=>t.geometry,getCentroid:(t,o)=>(t.centroid||(t.centroid=r(new e,t.geometry,o.hasZ,o.hasM)),t.centroid)};export default o;export{o as optimizedFeatureQueryEngineAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import t from\"../../../core/Logger.js\";import r from\"../../../core/Error.js\";import s from\"../../../core/Evented.js\";import{create as o,NEGATIVE_INFINITY as i}from\"../../../geometry/support/aaBoundingRect.js\";import{getBoundsOptimizedGeometry as a}from\"../featureConversionUtils.js\";import{fromRect as d}from\"../../../geometry/support/aaBoundingBox.js\";import{BoundsStore as n}from\"./BoundsStore.js\";import{optimizedFeatureQueryEngineAdapter as h}from\"./optimizedFeatureQueryEngineAdapter.js\";export default class{constructor(e){this.geometryInfo=e,this._boundsStore=new n,this._featuresById=new Map,this._markedIds=new Set,this.events=new s,this.featureAdapter=h}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){if(!this.numFeatures)return null;const e=o(i);return this._featuresById.forEach((t=>{const r=this._boundsStore.get(t.objectId);r&&(e[0]=Math.min(r[0],e[0]),e[1]=Math.min(r[1],e[1]),e[2]=Math.max(r[2],e[2]),e[3]=Math.max(r[3],e[3]))})),e}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t,r){for(const s of e){const e=this._boundsStore.get(s.objectId);e&&t(d(r,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach(((t,r)=>{this._markedIds.has(r)||(e=!0,this._remove(t))})),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit(\"changed\",void 0)}_add(s){if(!s)return;const i=s.objectId;if(null==i)return void t.getLogger(\"esri.layers.graphics.data.FeatureStore\").error(new r(\"featurestore:invalid-feature\",\"feature id is missing\",{feature:s}));const d=this._featuresById.get(i);let n;if(this._markedIds.add(i),d?(s.displayId=d.displayId,n=this._boundsStore.get(i),this._boundsStore.delete(i)):e(this.onFeatureAdd)&&this.onFeatureAdd(s),!s.geometry||!s.geometry.coords||!s.geometry.coords.length)return this._boundsStore.set(i,null),void this._featuresById.set(i,s);n=a(n||o(),s.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(i,n),this._featuresById.set(i,s)}_remove(t){return e(this.onFeatureRemove)&&this.onFeatureRemove(t),this._markedIds.delete(t.objectId),this._boundsStore.delete(t.objectId),this._featuresById.delete(t.objectId),t}}\n"],"sourceRoot":""}