(this["webpackJsonpqp-ampd-app"]=this["webpackJsonpqp-ampd-app"]||[]).push([[28],{1055:function(e,t,r){"use strict";var a=r(2),n=r(3),s=r(5),i=r(6),o=r(0),c=(r(15),r(4)),u=(r(14),r(19),r(1)),l=r(35),p=r(8),f=(r(12),r(21),r(22),r(50)),b=r(58),v=r(75),d=r(125),y=(r(98),r(80)),O=function(e){Object(s.a)(r,e);var t=Object(i.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).extent=null,n.features=null,n.geometryType="polyline",n.routeId=null,n.routeName=null,n.totalDriveTime=null,n.totalLength=null,n.totalTime=null,n}return Object(n.a)(r,[{key:"readFeatures",value:function(e,t){var r=this;(e||[]).forEach((function(e){r._decompressFeatureGeometry(e,t.summary.envelope.spatialReference)}));var a=f.a.fromJSON(t.spatialReference);return e.map((function(e){var t=y.a.fromJSON(e),r=e.geometry&&e.geometry.spatialReference;return t.geometry&&!r&&(Object(c.n)(t.geometry).spatialReference=a),t.strings=e.strings,t.events=(e.events||[]).map((function(t){var r=new y.a({geometry:new b.a({x:t.point.x,y:t.point.y,z:t.point.z,hasZ:void 0!==t.point.z,spatialReference:e.geometry&&e.geometry.spatialReference}),attributes:{ETA:t.ETA,arriveTimeUTC:t.arriveTimeUTC}});return r.strings=t.strings,r})),t}))}},{key:"_decompressFeatureGeometry",value:function(e,t){e.geometry=this._decompressGeometry(e.compressedGeometry,t)}},{key:"_decompressGeometry",value:function(e,t){var r,a,n,s,i,o,c,u,l=0,p=0,f=0,b=0,v=[],d=0,y=0,O=0;if((i=e.match(/((\+|\-)[^\+\-\|]+|\|)/g))||(i=[]),0===parseInt(i[d],32)){d=2;var j=parseInt(i[d],32);d++,o=parseInt(i[d],32),d++,1&j&&(y=i.indexOf("|")+1,c=parseInt(i[y],32),y++),2&j&&(O=i.indexOf("|",y)+1,u=parseInt(i[O],32),O++)}else o=parseInt(i[d],32),d++;for(;d<i.length&&"|"!==i[d];){r=parseInt(i[d],32)+l,d++,l=r,a=parseInt(i[d],32)+p,d++,p=a;var m=[r/o,a/o];y&&(s=parseInt(i[y],32)+f,y++,f=s,m.push(s/c)),O&&(n=parseInt(i[O],32)+b,O++,b=n,m.push(n/u)),v.push(m)}return{paths:[v],hasZ:y>0,hasM:O>0,spatialReference:t}}},{key:"_mergePolylinesToSinglePath",value:function(e,t){var r=[];(e||[]).forEach((function(e){e.paths.forEach((function(e){r=r.concat(e)}))}));var a=[],n=[0,0];return r.forEach((function(e){e[0]===n[0]&&e[1]===n[1]||(a.push(e),n=e)})),new d.a({paths:[a]},t)}},{key:"mergedGeometry",get:function(){if(!this.features)return null;var e=this.features.map((function(e){var t=e.geometry;return Object(c.n)(t)})),t=this.get("extent.spatialReference");return this._mergePolylinesToSinglePath(e,t)}},{key:"strings",get:function(){return this.features.map((function(e){return e.strings}))}}]),r}(r(291).default);Object(o.a)([Object(u.b)({type:v.a,json:{read:{source:"summary.envelope"}}})],O.prototype,"extent",void 0),Object(o.a)([Object(u.b)()],O.prototype,"features",void 0),Object(o.a)([Object(l.a)("features")],O.prototype,"readFeatures",null),Object(o.a)([Object(u.b)()],O.prototype,"geometryType",void 0),Object(o.a)([Object(u.b)({readOnly:!0,dependsOn:["features","extent.spatialReference"]})],O.prototype,"mergedGeometry",null),Object(o.a)([Object(u.b)()],O.prototype,"routeId",void 0),Object(o.a)([Object(u.b)()],O.prototype,"routeName",void 0),Object(o.a)([Object(u.b)({value:null,readOnly:!0,dependsOn:["features"]})],O.prototype,"strings",null),Object(o.a)([Object(u.b)({json:{read:{source:"summary.totalDriveTime"}}})],O.prototype,"totalDriveTime",void 0),Object(o.a)([Object(u.b)({json:{read:{source:"summary.totalLength"}}})],O.prototype,"totalLength",void 0),Object(o.a)([Object(u.b)({json:{read:{source:"summary.totalTime"}}})],O.prototype,"totalTime",void 0);var j=O=Object(o.a)([Object(p.a)("esri.tasks.support.DirectionsFeatureSet")],O);t.a=j},1211:function(e,t,r){"use strict";r.r(t);var a=r(10),n=r(2),s=r(3),i=r(5),o=r(6),c=r(0),u=(r(15),r(14),r(19),r(1)),l=r(8),p=(r(12),r(21),r(22),r(17)),f=r(66),b=r(437),v=r(571),d=r(991),y=r(992),O=r(4),j=r(35),m=r(27),h=r(50),g=r(58),T=r(117),k=r(125),w=(r(98),r(80)),M=r(291),B=r(1055),S=r(993);function x(e){return M.default.fromJSON(e).features.map((function(e){return e.geometry}))}var N=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).directions=null,a.facilities=null,a.incidents=null,a.messages=null,a.pointBarriers=null,a.polylineBarriers=null,a.polygonBarriers=null,a.routes=null,a}return Object(s.a)(r,[{key:"readFacilities",value:function(e){return x(e)}},{key:"readIncidents",value:function(e){return x(e)}},{key:"readPointBarriers",value:function(e,t){return x(t.barriers)}},{key:"readPolylineBarriers",value:function(e){return x(e)}},{key:"readPolygonBarriers",value:function(e){return x(e)}},{key:"readRoutes",value:function(e){return function(e){return e.features.map((function(t){var r=h.a.fromJSON(e.spatialReference),a=w.a.fromJSON(t);return Object(O.h)(a.geometry)&&(a.geometry.spatialReference=r),a}))}(e)}}]),r}(m.a);Object(c.a)([Object(u.b)({type:[B.a]})],N.prototype,"directions",void 0),Object(c.a)([Object(u.b)({type:[g.a]})],N.prototype,"facilities",void 0),Object(c.a)([Object(j.a)("facilities")],N.prototype,"readFacilities",null),Object(c.a)([Object(u.b)({type:[g.a]})],N.prototype,"incidents",void 0),Object(c.a)([Object(j.a)("incidents")],N.prototype,"readIncidents",null),Object(c.a)([Object(u.b)({type:[S.a]})],N.prototype,"messages",void 0),Object(c.a)([Object(u.b)({type:[g.a]})],N.prototype,"pointBarriers",void 0),Object(c.a)([Object(j.a)("pointBarriers",["barriers"])],N.prototype,"readPointBarriers",null),Object(c.a)([Object(u.b)({type:[k.a]})],N.prototype,"polylineBarriers",void 0),Object(c.a)([Object(j.a)("polylineBarriers")],N.prototype,"readPolylineBarriers",null),Object(c.a)([Object(u.b)({type:[T.a]})],N.prototype,"polygonBarriers",void 0),Object(c.a)([Object(j.a)("polygonBarriers")],N.prototype,"readPolygonBarriers",null),Object(c.a)([Object(u.b)({type:[w.a]})],N.prototype,"routes",void 0),Object(c.a)([Object(j.a)("routes")],N.prototype,"readRoutes",null);var _=N=Object(c.a)([Object(l.a)("esri.tasks.support.ClosestFacilitySolveResult")],N),A=Object(d.a)({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,directionsTimeAttribute:{name:"directionsTimeAttributeName"},impedanceAttribute:{name:"impedanceAttributeName"},facilities:!0,incidents:!0,outSpatialReference:{name:"outSR",getter:function(e){return e.outSpatialReference.wkid}},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},returnPointBarriers:{name:"returnBarriers"},returnRoutes:{name:"returnCFRoutes"},travelMode:!0}),I=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).url=null,a}return Object(s.a)(r,[{key:"solve",value:function(e,t){var r=this,n=[],s=[],i={},o={};return e.incidents&&e.incidents.features&&this._collectGeometries(e.incidents.features,s,"incidents.features",i),e.facilities&&e.facilities.features&&this._collectGeometries(e.facilities.features,s,"facilities.features",i),e.pointBarriers&&e.pointBarriers.features&&this._collectGeometries(e.pointBarriers.features,s,"pointBarriers.features",i),e.polylineBarriers&&e.polylineBarriers.features&&this._collectGeometries(e.polylineBarriers.features,s,"polylineBarriers.features",i),e.polygonBarriers&&e.polygonBarriers.features&&this._collectGeometries(e.polygonBarriers.features,s,"polygonBarriers.features",i),Object(b.a)(s).then((function(e){for(var t in i){var a=i[t];n.push(t),o[t]=e.slice(a[0],a[1])}return r._isInputGeometryZAware(o,n)?r.getServiceDescription():Object(p.s)({dontCheck:!0})})).then((function(s){("dontCheck"in s?s.dontCheck:s.hasZ)||r._dropZValuesOffInputGeometry(o,n);var i=function(t){o[t].forEach((function(r,a){e.get(t)[a].geometry=r}))};for(var c in o)i(c);var u={query:Object(a.a)(Object(a.a)({},r.parsedUrl.query),{},{f:"json"},A.toQueryParams(e))};return(r.requestOptions||t)&&(u=Object(a.a)(Object(a.a)(Object(a.a)({},r.requestOptions),t),u)),Object(f.default)("".concat(r.parsedUrl.path,"/solveClosestFacility"),u)})).then((function(e){return _.fromJSON(e.data)}))}},{key:"_collectGeometries",value:function(e,t,r,a){a[r]=[t.length,t.length+e.length],e.forEach((function(e){t.push(e.geometry)}))}}]),r}(Object(y.a)(v.a));Object(c.a)([Object(u.b)()],I.prototype,"url",void 0);var P=I=Object(c.a)([Object(l.a)("esri.tasks.ClosestFacilityTask")],I);t.default=P},965:function(e,t,r){"use strict";var a=r(2),n=r(5),s=r(6),i=r(0),o=(r(15),r(14),r(19),r(1)),c=r(52),u=r(8),l=(r(12),r(21),r(22),r(27)),p=new c.a({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"}),f=function(e){Object(n.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).description=null,n.type=null,n}return r}(l.a);Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],f.prototype,"description",void 0),Object(i.a)([Object(o.b)({type:String,json:{read:p.read,write:p.write}})],f.prototype,"type",void 0);var b=f=Object(i.a)([Object(u.a)("esri.tasks.support.GPMessage")],f);t.a=b},991:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var a=r(32),n=r(2),s=r(3),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(n.a)(this,e),this._options=t}return Object(s.a)(e,[{key:"toQueryParams",value:function(e){var t=this;if(!e)return null;var r=e.toJSON(),n={};return Object.keys(r).forEach((function(e){var s=t._options[e];if(s){var i="boolean"!=typeof s&&s.name?s.name:e,o="boolean"!=typeof s&&s.getter?s.getter(r):r[e];null!=o&&(n[i]=function(e){if(!Array.isArray(e))return!1;var t=Object(a.a)(e,1)[0];return"number"==typeof t||"string"==typeof t}(o)?o.join(","):"object"==typeof o?JSON.stringify(o):o)}else n[e]=r[e]}),this),n}}]),e}();function o(e){return new i(e)}},992:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var a=r(13),n=r(7),s=r.n(n),i=r(16),o=r(2),c=r(3),u=r(5),l=r(6),p=r(0),f=(r(15),r(100)),b=r(4),v=(r(14),r(19),r(1),r(8)),d=r(20),y=r(12),O=(r(21),r(22),r(66)),j=r(571),m=function(e){var t=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"getServiceDescription",value:function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this._serviceDescriptionPromise||(this._serviceDescriptionPromise=this._fetchServiceDescription()),this._serviceDescriptionPromise));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_fetchServiceDescription",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t,r,n,o,c,u,l,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.url&&this.parsedUrl){e.next=2;break}throw new d.a("network-service:missing-url","Url to Network service is missing");case 2:return t=this.url,e.next=5,Object(O.default)(t,{query:{f:"json"}});case 5:for(r=e.sent,(n=r.data).supportedTravelModes||(n.supportedTravelModes=[]),o=0;o<n.supportedTravelModes.length;o++)n.supportedTravelModes[o].id||(n.supportedTravelModes[o].id=n.supportedTravelModes[o].itemId);return c=n.currentVersion>=10.4?function(){var e=Object(i.a)(s.a.mark((function e(t){var r,a,n,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(O.default)(t+("/"===t[t.length-1]?"":"/")+"retrieveTravelModes",{query:{f:"json"}});case 3:return r=e.sent,a=r.data,n=a.supportedTravelModes,i=a.defaultTravelMode,e.abrupt("return",{supportedTravelModes:n,defaultTravelMode:i});case 10:throw e.prev=10,e.t0=e.catch(0),new d.a("network-service:retrieveTravelModes","Could not get to the NAServer's retrieveTravelModes.",{error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()(t):function(){var e=Object(i.a)(s.a.mark((function e(t){var r,n,i,o,c,u,l,p,b,v,d,j,m,h,g,T,k,w;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.default)(t.substring(0,t.indexOf("/rest/")+6)+"info",{query:{f:"json"}});case 2:if(r=e.sent,(n=r.data)&&n.owningSystemUrl){e.next=6;break}return e.abrupt("return",{supportedTravelModes:[],defaultTravelMode:null});case 6:return t=n.owningSystemUrl,e.next=9,Object(O.default)(t+("/"===t[t.length-1]?"":"/")+"sharing/rest/portals/self",{query:{f:"json"}});case 9:if(i=e.sent,o=i.data,c=Object(f.b)("helperServices.routingUtilities.url",o)){e.next=14;break}return e.abrupt("return",{supportedTravelModes:[],defaultTravelMode:null});case 14:return u=Object(y.I)(t),l=/\/solveClosestFacility$/.test(u.path)?"Route":/\/solveClosestFacility$/.test(u.path)?"ClosestFacility":"ServiceAreas",e.next=18,Object(O.default)(c+("/"===c[c.length-1]?"":"/")+"GetTravelModes/execute",{query:{f:"json",serviceName:l}});case 18:if(p=e.sent,b=[],v=null,p&&p.data&&p.data.results&&p.data.results.length){d=p.data.results,j=Object(a.a)(d);try{for(j.s();!(m=j.n()).done;)if("supportedTravelModes"===(h=m.value).paramName){if(h.value&&h.value.features){g=Object(a.a)(h.value.features);try{for(g.s();!(T=g.n()).done;)(k=T.value.attributes)&&(w=JSON.parse(k.TravelMode),b.push(w))}catch(s){g.e(s)}finally{g.f()}}}else"defaultTravelMode"===h.paramName&&(v=h.value)}catch(s){j.e(s)}finally{j.f()}}return e.abrupt("return",{supportedTravelModes:b,defaultTravelMode:v});case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(t),e.next=12,c;case 12:return u=e.sent,l=u.defaultTravelMode,p=u.supportedTravelModes,e.abrupt("return",(n.defaultTravelMode=l,n.supportedTravelModes=p,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_isInputGeometryZAware",value:function(e,t){for(var r=0;r<t.length;r++){var n=e[t[r]];if(n&&n.length){var s,i=Object(a.a)(n);try{for(i.s();!(s=i.n()).done;){var o=s.value;if(Object(b.h)(o)&&o.hasZ)return!0}}catch(c){i.e(c)}finally{i.f()}}}return!1}},{key:"_dropZValuesOffInputGeometry",value:function(e,t){for(var r=0;r<t.length;r++){var n=e[t[r]];if(n&&n.length){var s,i=Object(a.a)(n);try{for(i.s();!(s=i.n()).done;){s.value.z=void 0}}catch(o){i.e(o)}finally{i.f()}}}console.log("The remote Network Analysis service is powered by a network dataset which is not Z-aware.\nZ-coordinates of the input geometry are ignored.")}}]),r}(e);return t=Object(p.a)([Object(v.a)("esri.tasks.mixins.NAServiceDescription")],t),t},h=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return r}(m(j.a));h=Object(p.a)([Object(v.a)("esri.tasks.mixins.NAServiceDescription")],h)},993:function(e,t,r){"use strict";var a=r(2),n=r(5),s=r(6),i=r(0),o=(r(15),r(14),r(19),r(1)),c=r(52),u=r(8),l=(r(12),r(21),r(22),r(965)),p=new c.a({0:"informative",1:"process-definition",2:"process-start",3:"process-stop",50:"warning",100:"error",101:"empty",200:"abort"}),f=function(e){Object(n.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).type=null,n}return r}(l.a);Object(i.a)([Object(o.b)({type:String,json:{read:p.read,write:p.write}})],f.prototype,"type",void 0);var b=f=Object(i.a)([Object(u.a)("esri.tasks.support.NAMessage")],f);t.a=b}}]);
//# sourceMappingURL=28.c31c31a2.chunk.js.map