(this["webpackJsonpqp-ampd-app"]=this["webpackJsonpqp-ampd-app"]||[]).push([[32,126],{1042:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var a=r(11),n=r(8),i=r.n(n),o=r(23),s=r(2),l=r(4),c=r(24),u=r(16),f=r(887),p=r(431),d=function(){function e(){Object(s.a)(this,e),this._workerThread=null,this._destroyed=!1}return Object(l.a)(e,[{key:"initialize",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)("RasterWorker");case 2:t=e.sent,this._destroyed?t.close():this._workerThread=t;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){this._destroyed=!0,this._workerThread&&(this._workerThread.close(),this._workerThread=null)}},{key:"decode",value:function(){var e=Object(o.a)(i.a.mark((function e(t,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new c.a("raster-jobhandler:no-connection","no available worker connection");case 2:return e.next=4,this._workerThread.invoke("decode",t,r);case 4:return a=e.sent,e.abrupt("return",a?new f.a(a):null);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"symbolize",value:function(){var e=Object(o.a)(i.a.mark((function e(t,r){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new c.a("raster-jobhandler:no-connection","no available worker connection");case 2:return a={extent:t.extent&&t.extent.toJSON(),pixelBlock:t.pixelBlock.toJSON(),simpleStretchParams:t.simpleStretchParams,bandIds:t.bandIds},e.next=5,this._workerThread.invoke("symbolize",a,r);case 5:return n=e.sent,e.abrupt("return",n?new f.a(n):null);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"updateSymbolizer",value:function(){var e=Object(o.a)(i.a.mark((function e(t,r){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new c.a("raster-jobhandler:no-connection","no available worker connection");case 2:return n=null==t||null==(a=t.rendererJSON)?void 0:a.histograms,e.next=5,Object(u.b)(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:t.toJSON(),histograms:n},r));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"stretch",value:function(){var e=Object(o.a)(i.a.mark((function e(t,r){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new c.a("raster-jobhandler:no-connection","no available worker connection");case 2:if(null!=t&&t.pixelBlock){e.next=4;break}return e.abrupt("return",null);case 4:return a={srcPixelBlock:t.pixelBlock.toJSON(),stretchParams:t.stretchParams},e.next=7,this._workerThread.invoke("stretch",a,r);case 7:return n=e.sent,e.abrupt("return",n?new f.a(n):null);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"split",value:function(){var e=Object(o.a)(i.a.mark((function e(t,r){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new c.a("raster-jobhandler:no-connection","no available worker connection");case 2:if(null!=t&&t.pixelBlock){e.next=4;break}return e.abrupt("return",null);case 4:return a={srcPixelBlock:t.pixelBlock.toJSON(),tileSize:t.tileSize,maximumPyramidLevel:t.maximumPyramidLevel},e.next=7,this._workerThread.invoke("split",a,r);case 7:return n=e.sent,e.abrupt("return",(n&&n.forEach((function(e,t){n.set(t,e?f.a.fromJSON(e):null)})),Object(u.s)(n)));case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"estimateStatisticsHistograms",value:function(){var e=Object(o.a)(i.a.mark((function e(t,r){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new c.a("raster-jobhandler:no-connection","no available worker connection");case 2:if(null!=t&&t.pixelBlock){e.next=4;break}return e.abrupt("return",null);case 4:return a={srcPixelBlock:t.pixelBlock.toJSON()},e.next=7,this._workerThread.invoke("estimateStatisticsHistograms",a,r);case 7:return n=e.sent,e.abrupt("return",Object(u.s)(n));case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"mosaicAndTransform",value:function(){var e=Object(o.a)(i.a.mark((function e(t,r){var n,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new c.a("raster-jobhandler:no-connection","no available worker connection");case 2:if(null!=t&&null!=(n=t.srcPixelBlocks)&&n.length){e.next=4;break}return e.abrupt("return",null);case 4:return o=Object(a.a)(Object(a.a)({},t),{},{srcPixelBlocks:t.srcPixelBlocks.map((function(e){return e?e.toJSON():null}))}),e.next=7,this._workerThread.invoke("mosaicAndTransform",o,r);case 7:return s=e.sent,e.abrupt("return",s?new f.a(s):null);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}()},1048:function(e,t,r){"use strict";r.d(t,"a",(function(){return L})),r.d(t,"b",(function(){return H})),r.d(t,"c",(function(){return B})),r.d(t,"d",(function(){return N}));var a=r(11),n=r(10),i=r(36),o=(r(82),r(391)),s=(r(298),r(322),r(922)),l=r(897),c=(r(891),r(892)),u=r(312),f=r(323),p=r(896),d=(r(924),r(889)),h=r(2),b=r(4),y=r(5),m=r(6),g=r(0),v=(r(12),r(13),r(14),r(1)),j=r(34),I=r(7),x=(r(9),r(20),r(21),r(26)),M=r(88),w=r(379),O=new j.a({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"}),k=function(e){Object(y.a)(r,e);var t=Object(m.a)(r);function r(){var e;return Object(h.a)(this,r),(e=t.apply(this,arguments)).baseSymbol=null,e.colorRamp=null,e.type=null,e}return r}(x.a);Object(g.a)([Object(v.b)({type:M.a,json:{write:!0}})],k.prototype,"baseSymbol",void 0),Object(g.a)([Object(v.b)({types:w.b,json:{read:{reader:w.a},write:!0}})],k.prototype,"colorRamp",void 0),Object(g.a)([Object(v.b)({json:{read:O.read,write:O.write}})],k.prototype,"type",void 0);var A=k=Object(g.a)([Object(I.a)("esri.tasks.support.ClassificationDefinition")],k),C=new j.a({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),T=new j.a({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),S=function(e){Object(y.a)(r,e);var t=Object(m.a)(r);function r(){var e;return Object(h.a)(this,r),(e=t.apply(this,arguments)).breakCount=null,e.classificationField=null,e.classificationMethod=null,e.normalizationField=null,e.normalizationType=null,e.type="class-breaks-definition",e}return Object(b.a)(r,[{key:"standardDeviationInterval",set:function(e){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",e)}}]),r}(A);Object(g.a)([Object(v.b)({json:{write:!0}})],S.prototype,"breakCount",void 0),Object(g.a)([Object(v.b)({json:{write:!0}})],S.prototype,"classificationField",void 0),Object(g.a)([Object(v.b)({type:String,json:{read:C.read,write:C.write}})],S.prototype,"classificationMethod",void 0),Object(g.a)([Object(v.b)({json:{write:!0}})],S.prototype,"normalizationField",void 0),Object(g.a)([Object(v.b)({json:{read:T.read,write:T.write}})],S.prototype,"normalizationType",void 0),Object(g.a)([Object(v.b)({value:null,json:{write:!0}})],S.prototype,"standardDeviationInterval",null),Object(g.a)([Object(v.b)()],S.prototype,"type",void 0);S=Object(g.a)([Object(I.a)("esri.tasks.support.ClassBreaksDefinition")],S);var D=o.a.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),R=o.a.fromJSON(s.a[0]);function L(e,t){var r=e.attributeTable,a=e.colormap,o=e.dataType;if("vector-uv"===o||"vector-magdir"===o)return new p.a;if(Object(n.g)(a)){var d=function(e){if(!_(e))return null;var t,r=e.attributeTable,a=e.colormap;if(Object(n.g)(r)){var i=U(r,"value"),o=P(r);"string"===o.type&&(t={},r.features.forEach((function(e){var r=e.attributes;t[r[i.name]]=o?r[o.name]:r[i.name]})))}return l.a.createFromColormap(Object(n.m)(a),t)}(e);if(Object(n.g)(d))return d}if(Object(n.g)(r)){var h=function(e,t){if(!E(e,t))return null;var r=e.attributeTable,a=P(r,t),n=U(r,"red"),o=U(r,"green"),l=U(r,"blue"),c=[],p=new Set,d=!!(n&&o&&l);if(r.features.forEach((function(e){var t=e.attributes[a.name];p.has(e.attributes[a.name])||null==t||(p.add(t),c.push(new u.a({value:e.attributes[a.name],label:e.attributes[a.name],symbol:{type:"simple-fill",style:"solid",outline:null,color:new i.a(d?[e.attributes[n.name],e.attributes[o.name],e.attributes[l.name],1]:[0,0,0,0])}})))})),!d){var h=Object(s.b)(R,c.length);c.forEach((function(e,t){return e.symbol.color=new i.a(h[t].slice(1,4))}))}return new f.a({field:a.name,uniqueValueInfos:c})}(e);if(Object(n.g)(h))return h}return function(e,t){var r,a,i,o,s=(e=z(e,null==t?void 0:t.variableName)).bandCount,l=t||{},u=l.bandIds,f=l.stretchType;null!=(r=u)&&r.some((function(e){return e>=s}))&&(u=null);var p,d=Object(n.m)(e.statistics),h=Object(n.m)(e.histograms);s>1?(u=null!=(p=u)&&p.length?u:H(e),d=null==d?null:u.map((function(e){return d[e]})),h=null==h?null:u.map((function(e){return h[e]}))):u=[0],null==f&&(f=function(e){var t="percent-clip",r=e.pixelType,a=e.dataType,i=e.histograms,o=e.statistics;return"u8"!==r||"processed"!==a&&Object(n.g)(i)&&Object(n.g)(o)?"u8"===r||"elevation"===a||"scientific"===a?t="min-max":Object(n.g)(i)?t="percent-clip":Object(n.g)(o)&&(t="min-max",t="min-max"):t="none",t}(e));var b=!1;switch(f){case"none":b=!1;break;case"percent-clip":b=!(null!=(a=h)&&a.length);break;default:b=!(null!=(i=d)&&i.length)}var y=1===(null==(o=u)?void 0:o.length)&&"scientific"===e.dataType?D:null,m=new c.a({stretchType:f,dynamicRangeAdjustment:b,colorRamp:y,outputMin:0,outputMax:255,gamma:1===u.length?[1]:[1,1,1],useGamma:!1});return"percent-clip"===f?m.maxPercent=m.minPercent=.25:"standard-deviation"===f&&(m.numberOfStandardDeviations=2),b||("percent-clip"===f?m.histograms=h:"min-max"!==f&&"standard-deviation"!==f||(m.statistics=d)),m}(e,t)}function N(e){var t=["raster-stretch"];return _(e)&&t.push("raster-colormap"),E(e)&&t.push("unique-value"),J(e)&&t.push("class-breaks"),Z(e)&&t.push("raster-shaded-relief"),function(e){var t=e.dataType;return"vector-uv"===t||"vector-magdir"===t}(e)&&t.push("vector-field"),t}function B(e,t,r){var a=["nearest","bilinear","cubic","majority"].find((function(e){return e===(null==r?void 0:r.toLowerCase())}));return"Map"===t?null!=a?a:"bilinear":"thematic"===e.dataType||e.attributeTable||e.colormap?"nearest"===a||"majority"===a?a:"nearest":null!=a?a:"bilinear"}function z(e,t){if(null==t)return e;var r=Object(n.m)(e.statistics),i=Object(n.m)(e.histograms),o=e.multidimensionalInfo;if(t&&Object(n.g)(o)){var s=o.variables.find((function(e){return e.name===t})),l=s.statistics,c=s.histograms;null!=l&&l.length&&(r=l),null!=c&&c.length&&(i=c)}return d.a.fromJSON(Object(a.a)(Object(a.a)({},e.toJSON()),{},{statistics:r,histograms:i}))}function H(e){var t=e.bandCount;if(1===t)return null;if(2===t)return[0];var r,a=e.keyProperties&&e.keyProperties.BandProperties;if(a&&a.length===t){var n=function(e){for(var t={},r=0;r<e.length;r++){var a,n=e[r],i=null==(a=n.BandName)?void 0:a.toLowerCase();if("red"===i)t.red=r;else if("green"===i)t.green=r;else if("blue"===i)t.blue=r;else if("nearinfrared"===i||"nearinfrared_1"===i||"nir"===i)t.nir=r;else if(n.WavelengthMax&&n.WavelengthMin){var o=n.WavelengthMin,s=n.WavelengthMax;null==t.blue&&o>=410&&o<=480&&s>=480&&s<=540?t.blue=r:null==t.green&&o>=490&&o<=560&&s>=560&&s<=610?t.green=r:null==t.red&&o>=595&&o<=670&&s>=660&&s<=730?t.red=r:null==t.nir&&o>=700&&o<=860&&s>=800&&s<=950&&(t.nir=r)}}return t}(a),i=n.red,o=n.green,s=n.blue,l=n.nir;null!=i&&null!=o&&null!=s?r=[i,o,s]:null!=l&&null!=i&&null!=o&&(r=[l,i,o])}return!r&&t>=3&&(r=[0,1,2]),r}function P(e,t){var r=e.fields.find((function(e){return"string"===e.type&&(t===e.name.toLowerCase()||e.name.toLowerCase().indexOf("class")>-1)}));return r||((r=e.fields.find((function(e){return"string"===e.type})))||(r=U(e,"value"))),r}function U(e,t){return e.fields.find((function(e){return e.name.toLowerCase()===t}))}function E(e,t){var r=e.attributeTable,a=e.bandCount;return!(!Object(n.g)(r)||a>1)&&(!t||null!=r.fields.find((function(e){return e.name.toLowerCase()===t.toLowerCase()})))}function _(e){var t=e.bandCount,r=e.colormap;return Object(n.g)(r)&&r.length&&1===t}function Z(e){return"elevation"===e.dataType}function J(e){var t=e.attributeTable;return 1===e.bandCount&&(Object(n.g)(t)||Object(n.g)(e.histograms))}},851:function(e,t,r){"use strict";r.r(t);var a=r(32),n=r(15),i=r(2),o=r(4),s=r(5),l=r(6),c=r(0),u=(r(12),r(10)),f=(r(13),r(14),r(1)),p=r(34),d=r(31),h=r(7),b=r(28),y=(r(9),r(20),r(21),r(26)),m=r(39),g=r(240),v=r(103),j=r(242),I=r(320),x=new p.a({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null}),M=function(e){Object(s.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(i.a)(this,r),(a=t.call(this,e)).displayFieldName=null,a.exceededTransferLimit=!1,a.features=[],a.fields=null,a.geometryType=null,a.hasM=!1,a.hasZ=!1,a.queryGeometry=null,a.spatialReference=null,a}return Object(o.a)(r,[{key:"readFeatures",value:function(e,t){for(var r=m.a.fromJSON(t.spatialReference),a=[],n=0;n<e.length;n++){var i=e[n],o=j.a.fromJSON(i),s=i.geometry&&i.geometry.spatialReference;Object(u.g)(o.geometry)&&!s&&(o.geometry.spatialReference=r),a.push(o)}return a}},{key:"writeGeometryType",value:function(e,t,r,a){if(e)x.write(e,t,r,a);else{var i=this.features;if(i){var o,s=Object(n.a)(i);try{for(s.s();!(o=s.n()).done;){var l=o.value;if(l&&Object(u.g)(l.geometry))return void x.write(l.geometry.type,t,r,a)}}catch(c){s.e(c)}finally{s.f()}}}}},{key:"readQueryGeometry",value:function(e,t){if(!e)return null;var r=!!e.spatialReference,a=Object(g.a)(e);return!r&&t.spatialReference&&(a.spatialReference=m.a.fromJSON(t.spatialReference)),a}},{key:"writeSpatialReference",value:function(e,t){if(e)t.spatialReference=e.toJSON();else{var r=this.features;if(r){var a,i=Object(n.a)(r);try{for(i.s();!(a=i.n()).done;){var o=a.value;o&&Object(u.g)(o.geometry)&&o.geometry.spatialReference&&(t.spatialReference=o.geometry.spatialReference.toJSON())}}catch(s){i.e(s)}finally{i.f()}}}}},{key:"toJSON",value:function(e){var t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(var r=0;r<t.features.length;r++){var a=t.features[r];if(a.geometry){var n=e&&e[r];a.geometry=n&&n.toJSON()||a.geometry}}return t}},{key:"quantize",value:function(e){for(var t=Object(a.a)(e.scale,2),r=t[0],n=t[1],i=Object(a.a)(e.translate,2),o=i[0],s=i[1],l=this.features,c=this._getQuantizationFunction(this.geometryType,(function(e){return Math.round((e-o)/r)}),(function(e){return Math.round((s-e)/n)})),f=0,p=l.length;f<p;f++)c(Object(u.m)(l[f].geometry))||(l.splice(f,1),f--,p--);return this.transform=e,this}},{key:"unquantize",value:function(){var e=this.geometryType,t=this.features,r=this.transform;if(!r)return this;var i,o=Object(a.a)(r.translate,2),s=o[0],l=o[1],c=Object(a.a)(r.scale,2),f=c[0],p=c[1],d=this._getHydrationFunction(e,(function(e){return e*f+s}),(function(e){return l-e*p})),h=Object(n.a)(t);try{for(h.s();!(i=h.n()).done;){var b=i.value.geometry;Object(u.g)(b)&&d(b)}}catch(y){h.e(y)}finally{h.f()}return this.transform=null,this}},{key:"_quantizePoints",value:function(e,t,r){for(var a,n,i=[],o=0,s=e.length;o<s;o++){var l=e[o];if(o>0){var c=t(l[0]),u=r(l[1]);c===a&&u===n||(i.push([c-a,u-n]),a=c,n=u)}else a=t(l[0]),n=r(l[1]),i.push([a,n])}return i.length>0?i:null}},{key:"_getQuantizationFunction",value:function(e,t,r){var a=this;return"point"===e?function(e){return e.x=t(e.x),e.y=r(e.y),e}:"polyline"===e||"polygon"===e?function(e){for(var n=Object(g.g)(e)?e.rings:e.paths,i=[],o=0,s=n.length;o<s;o++){var l=n[o],c=a._quantizePoints(l,t,r);c&&i.push(c)}return i.length>0?(Object(g.g)(e)?e.rings=i:e.paths=i,e):null}:"multipoint"===e?function(e){var n;return(n=a._quantizePoints(e.points,t,r)).length>0?(e.points=n,e):null}:"extent"===e?function(e){return e}:null}},{key:"_getHydrationFunction",value:function(e,t,r){return"point"===e?function(e){e.x=t(e.x),e.y=r(e.y)}:"polyline"===e||"polygon"===e?function(e){for(var a,n,i=Object(g.g)(e)?e.rings:e.paths,o=0,s=i.length;o<s;o++)for(var l=i[o],c=0,u=l.length;c<u;c++){var f=l[c];c>0?(a+=f[0],n+=f[1]):(a=f[0],n=f[1]),f[0]=t(a),f[1]=r(n)}}:"extent"===e?function(e){e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"multipoint"===e?function(e){for(var a,n,i=e.points,o=0,s=i.length;o<s;o++){var l=i[o];o>0?(a+=l[0],n+=l[1]):(a=l[0],n=l[1]),l[0]=t(a),l[1]=r(n)}}:void 0}}]),r}(y.a);Object(c.a)([Object(f.b)({type:String,json:{write:!0}})],M.prototype,"displayFieldName",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],M.prototype,"exceededTransferLimit",void 0),Object(c.a)([Object(f.b)({type:[j.a],json:{write:!0}})],M.prototype,"features",void 0),Object(c.a)([Object(d.a)("features")],M.prototype,"readFeatures",null),Object(c.a)([Object(f.b)({type:[I.a],json:{write:!0}})],M.prototype,"fields",void 0),Object(c.a)([Object(f.b)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:x.read}}})],M.prototype,"geometryType",void 0),Object(c.a)([Object(b.a)("geometryType")],M.prototype,"writeGeometryType",null),Object(c.a)([Object(f.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],M.prototype,"hasM",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],M.prototype,"hasZ",void 0),Object(c.a)([Object(f.b)({types:v.b,json:{write:!0}})],M.prototype,"queryGeometry",void 0),Object(c.a)([Object(d.a)("queryGeometry")],M.prototype,"readQueryGeometry",null),Object(c.a)([Object(f.b)({type:m.a,json:{write:!0}})],M.prototype,"spatialReference",void 0),Object(c.a)([Object(b.a)("spatialReference")],M.prototype,"writeSpatialReference",null),Object(c.a)([Object(f.b)({json:{write:!0}})],M.prototype,"transform",void 0),(M=Object(c.a)([Object(h.a)("esri.tasks.support.FeatureSet")],M)).prototype.toJSON.isDefaultToJSON=!0,M||(M={});var w=M;t.default=w},873:function(e,t,r){"use strict";r.d(t,"a",(function(){return B}));var a=r(8),n=r.n(a),i=(r(32),r(23)),o=r(15),s=r(78),l=r(10),c=r(13),u=r(24),f=r(16),p=r(41),d=r(39),h=r(83),b=r(132),y=r(131),m=r(11),g=r(9),v=r(240),j=(r(103),r(59));function I(e,t,r,a){return x.apply(this,arguments)}function x(){return(x=Object(i.a)(n.a.mark((function e(t,r,a,i){var o,s,l,c,u,f,p,d;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="string"==typeof t?Object(g.I)(t):t,s=r[0].spatialReference,l=Object(m.a)(Object(m.a)({},i),{},{query:Object(m.a)(Object(m.a)({},o.query),{},{f:"json",sr:JSON.stringify(s),target:JSON.stringify({geometryType:Object(v.c)(r[0]),geometries:r}),cutter:JSON.stringify(a)})}),e.next=5,Object(j.default)(o.path+"/cut",l);case 5:return c=e.sent,u=c.data,f=u.cutIndexes,p=u.geometries,d=void 0===p?[]:p,e.abrupt("return",{cutIndexes:f,geometries:d.map((function(e){var t=Object(v.a)(e);return t.spatialReference=s,t}))});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t,r){return w.apply(this,arguments)}function w(){return(w=Object(i.a)(n.a.mark((function e(t,r,a){var i,o,s,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="string"==typeof t?Object(g.I)(t):t,o=r[0].spatialReference,s=Object(v.c)(r[0]),l=Object(m.a)(Object(m.a)({},a),{},{query:Object(m.a)(Object(m.a)({},i.query),{},{f:"json",sr:o.wkid?o.wkid:JSON.stringify(o),geometries:JSON.stringify(O(r))})}),e.t0=function(e,t,r){var a=Object(v.b)(t);return e.map((function(e){var t=a.fromJSON(e);return t.spatialReference=r,t}))},e.next=4,Object(j.default)(i.path+"/simplify",l);case 4:return e.t1=e.sent.data,e.t2=s,e.t3=o,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return{geometryType:Object(v.c)(e[0]),geometries:e.map((function(e){return e.toJSON()}))}}var k=c.a.getLogger("esri.geometry.support.normalizeUtils"),A={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new y.a({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:d.a.WebMercator}),minus180Line:new y.a({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:d.a.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new y.a({paths:[[[180,-180],[180,180]]],spatialReference:d.a.WGS84}),minus180Line:new y.a({paths:[[[-180,-180],[-180,180]]],spatialReference:d.a.WGS84})}};function C(e){return"polygon"===e.type}function T(e){return"polyline"===e[0].type}function S(e){return C(e)?e.rings:e.paths}function D(e,t){return Math.ceil((e-t)/(2*t))}function R(e,t){var r,a=S(e),n=Object(o.a)(a);try{for(n.s();!(r=n.n()).done;){var i,s=r.value,l=Object(o.a)(s);try{for(l.s();!(i=l.n()).done;){i.value[0]+=t}}catch(c){l.e(c)}finally{l.f()}}}catch(c){n.e(c)}finally{n.f()}return e}function L(e,t,r){if(t){var a=function(e,t){if(!(e instanceof y.a||e instanceof b.a)){var r="straightLineDensify: the input geometry is neither polyline nor polygon";throw k.error(r),new u.a(r)}var a,n=S(e),i=[],s=Object(o.a)(n);try{for(s.s();!(a=s.n()).done;){var l=a.value,c=[];i.push(c),c.push([l[0][0],l[0][1]]);for(var f=0;f<l.length-1;f++){var p=l[f][0],d=l[f][1],h=l[f+1][0],m=l[f+1][1],g=Math.sqrt((h-p)*(h-p)+(m-d)*(m-d)),v=(m-d)/g,j=(h-p)/g,I=g/t;if(I>1){for(var x=1;x<=I-1;x++){var M=x*t,w=j*M+p,O=v*M+d;c.push([w,O])}var A=(g+Math.floor(I-1)*t)/2,T=j*A+p,D=v*A+d;c.push([T,D])}c.push([h,m])}}}catch(R){s.e(R)}finally{s.f()}return C(e)?new b.a({rings:i,spatialReference:e.spatialReference}):new y.a({paths:i,spatialReference:e.spatialReference})}(e,1e6);e=Object(h.e)(a,!0)}return r&&(e=R(e,r)),e}function N(e,t,r){if(Array.isArray(e)){var a=e[0];if(a>t){var n=D(a,t);e[0]=a+n*(-2*t)}else if(a<r){var i=D(a,r);e[0]=a+i*(-2*r)}}else{var o=e.x;if(o>t){var s=D(o,t);e=e.clone().offset(s*(-2*t),0)}else if(o<r){var l=D(o,r);e=e.clone().offset(l*(-2*r),0)}}return e}function B(e,t,r){return z.apply(this,arguments)}function z(){return(z=Object(i.a)(n.a.mark((function e(t,r,a){var i,c,u,d,m,g,v,j,x,w,O,k,C,z,H,P,U,E,_,Z,J,F,G,W,V,q,K,X,Q,Y,$,ee,te,re,ae,ne,ie,oe,se,le;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)){e.next=2;break}return e.abrupt("return",B([t],r));case 2:i=r?r.url:s.a.geometryServiceUrl,w=0,O=[],k=[],C=Object(o.a)(t);try{for(C.s();!(z=C.n()).done;)H=z.value,Object(l.f)(H)?k.push(H):(c||(c=H.spatialReference,u=Object(p.d)(c),d=c.isWebMercator,m=A[v=d?102100:4326].maxX,g=A[v].minX,j=A[v].plus180Line,x=A[v].minus180Line),u?"mesh"===H.type?k.push(H):"point"===H.type?k.push(N(H.clone(),m,g)):"multipoint"===H.type?((P=H.clone()).points=P.points.map((function(e){return N(e,m,g)})),k.push(P)):"extent"===H.type?(U=H.clone()._normalize(!1,!1,u),k.push(U.rings?new b.a(U):U)):H.extent?(E=H.extent,_=D(E.xmin,g)*(2*m),Z=0===_?H.clone():R(H.clone(),_),E.offset(_,0),E.intersects(j)&&E.xmax!==m?(w=E.xmax>w?E.xmax:w,Z=L(Z,d),O.push(Z),k.push("cut")):E.intersects(x)&&E.xmin!==g?(w=E.xmax*(2*m)>w?E.xmax*(2*m):w,Z=L(Z,d,360),O.push(Z),k.push("cut")):k.push(Z)):k.push(H.clone()):k.push(H))}catch(n){C.e(n)}finally{C.f()}for(J=D(w,m),F=-90,G=J,W=new y.a;J>0;)V=360*J-180,W.addPath([[V,F],[V,-1*F]]),F*=-1,J--;if(!(O.length>0&&G>0)){e.next=28;break}return e.t0=function(e,t){for(var r=-1,a=function(a){for(var i=t.cutIndexes[a],s=t.geometries[a],l=S(s),c=function(e){var t=l[e];t.some((function(r){if(r[0]<180)return!0;for(var a=0,n=0;n<t.length;n++){var i=t[n][0];a=i>a?i:a}for(var o=-360*D(a=Number(a.toFixed(9)),180),l=0;l<t.length;l++){var c=s.getPoint(e,l);s.setPoint(e,l,c.clone().offset(o,0))}return!0}))},u=0;u<l.length;u++)c(u);if(i===r){if("polygon"===e[0].type){var f,p=Object(o.a)(S(s));try{for(p.s();!(f=p.n()).done;){var d=f.value;e[i]=e[i].addRing(d)}}catch(n){p.e(n)}finally{p.f()}}else if(T(e)){var h,b=Object(o.a)(S(s));try{for(b.s();!(h=b.n()).done;){var y=h.value;e[i]=e[i].addPath(y)}}catch(n){b.e(n)}finally{b.f()}}}else r=i,e[i]=s},i=0;i<t.cutIndexes.length;i++)a(i);return e},e.t1=O,e.next=15,I(i,O,W,a);case 15:for(e.t2=e.sent,q=(0,e.t0)(e.t1,e.t2),K=[],X=[],Q=0;Q<k.length;Q++)"cut"!==(Y=k[Q])?X.push(Y):($=q.shift(),ee=t[Q],Object(l.g)(ee)&&"polygon"===ee.type&&ee.rings&&ee.rings.length>1&&$.rings.length>=ee.rings.length?(K.push($),X.push("simplify")):X.push(d?Object(h.b)($):$));if(K.length){e.next=22;break}return e.abrupt("return",X);case 22:return e.next=24,M(i,K,a);case 24:for(te=e.sent,re=[],ae=0;ae<X.length;ae++)"simplify"!==(ne=X[ae])?re.push(ne):re.push(d?Object(h.b)(te.shift()):te.shift());return e.abrupt("return",re);case 28:for(ie=[],oe=0;oe<k.length;oe++)"cut"!==(se=k[oe])?ie.push(se):(le=O.shift(),ie.push(!0===d?Object(h.b)(le):le));return e.abrupt("return",Object(f.s)(ie));case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},891:function(e,t,r){"use strict";var a,n=r(2),i=r(4),o=r(5),s=r(6),l=r(0),c=(r(12),r(18)),u=(r(13),r(14),r(1)),f=r(29),p=r(31),d=r(7),h=(r(9),r(20),r(21),r(26)),b=r(379),y=a=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).altitude=45,a.azimuth=315,a.colorRamp=null,a.hillshadeType="multi-directional",a.pixelSizePower=.664,a.pixelSizeFactor=.024,a.scalingType="none",a.type="raster-shaded-relief",a.zFactor=1,a}return Object(i.a)(r,[{key:"readColorRamp",value:function(e){return Object(b.a)(e)}},{key:"clone",value:function(){return new a({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:Object(c.a)(this.colorRamp)})}}]),r}(h.a);Object(l.a)([Object(u.b)({type:Number,json:{write:!0}})],y.prototype,"altitude",void 0),Object(l.a)([Object(u.b)({type:Number,json:{write:!0}})],y.prototype,"azimuth",void 0),Object(l.a)([Object(u.b)({types:b.b,json:{write:!0}})],y.prototype,"colorRamp",void 0),Object(l.a)([Object(p.a)("colorRamp")],y.prototype,"readColorRamp",null),Object(l.a)([Object(u.b)({type:["traditional","multi-directional"],json:{write:!0}})],y.prototype,"hillshadeType",void 0),Object(l.a)([Object(u.b)({type:Number,json:{write:!0}})],y.prototype,"pixelSizePower",void 0),Object(l.a)([Object(u.b)({type:Number,json:{write:!0}})],y.prototype,"pixelSizeFactor",void 0),Object(l.a)([Object(u.b)({type:["none","adjusted"],json:{write:!0}})],y.prototype,"scalingType",void 0),Object(l.a)([Object(f.a)({rasterShadedRelief:"raster-shaded-relief"})],y.prototype,"type",void 0),Object(l.a)([Object(u.b)({type:Number,json:{write:!0}})],y.prototype,"zFactor",void 0);var m=y=a=Object(l.a)([Object(d.a)("esri.renderers.RasterShadedReliefRenderer")],y);t.a=m},892:function(e,t,r){"use strict";var a,n=r(2),i=r(4),o=r(5),s=r(6),l=r(0),c=(r(12),r(18)),u=(r(13),r(14)),f=r(1),p=r(29),d=r(31),h=r(7),b=r(28),y=(r(9),r(20),r(21),r(26)),m=r(379),g=r(974),v=a=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).colorRamp=null,a.computeGamma=!1,a.dynamicRangeAdjustment=!1,a.gamma=[],a.maxPercent=null,a.minPercent=null,a.numberOfStandardDeviations=null,a.outputMax=null,a.outputMin=null,a.sigmoidStrengthLevel=null,a.statistics=[],a.histograms=null,a.useGamma=!1,a.stretchType="none",a.type="raster-stretch",a}return Object(i.a)(r,[{key:"readColorRamp",value:function(e){if(e)return Object(m.a)(e)}},{key:"writeStatistics",value:function(e,t,r){var a;null!=(a=e)&&a.length&&(Array.isArray(e[0])||(e=e.map((function(e){return[e.min,e.max,e.avg,e.stddev]}))),t[r]=e)}},{key:"readStretchType",value:function(e,t){var r=t.stretchType;return"number"==typeof r&&(r=g.a[r]),g.b.read(r)}},{key:"clone",value:function(){return new a({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:Object(c.a)(this.statistics),gamma:Object(c.a)(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:Object(c.a)(this.colorRamp),histograms:Object(c.a)(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})}}]),r}(y.a);Object(l.a)([Object(f.b)({types:m.b,json:{write:!0}})],v.prototype,"colorRamp",void 0),Object(l.a)([Object(d.a)("colorRamp")],v.prototype,"readColorRamp",null),Object(l.a)([Object(f.b)({type:Boolean,json:{write:!0}})],v.prototype,"computeGamma",void 0),Object(l.a)([Object(f.b)({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],v.prototype,"dynamicRangeAdjustment",void 0),Object(l.a)([Object(f.b)({type:[Number],json:{write:!0}})],v.prototype,"gamma",void 0),Object(l.a)([Object(f.b)({type:Number,json:{write:!0}})],v.prototype,"maxPercent",void 0),Object(l.a)([Object(f.b)({type:Number,json:{write:!0}})],v.prototype,"minPercent",void 0),Object(l.a)([Object(f.b)({type:u.a,json:{write:!0}})],v.prototype,"numberOfStandardDeviations",void 0),Object(l.a)([Object(f.b)({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],v.prototype,"outputMax",void 0),Object(l.a)([Object(f.b)({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],v.prototype,"outputMin",void 0),Object(l.a)([Object(f.b)({type:Number,json:{write:!0}})],v.prototype,"sigmoidStrengthLevel",void 0),Object(l.a)([Object(f.b)({json:{type:[[Number]],write:!0}})],v.prototype,"statistics",void 0),Object(l.a)([Object(f.b)()],v.prototype,"histograms",void 0),Object(l.a)([Object(b.a)("statistics")],v.prototype,"writeStatistics",null),Object(l.a)([Object(f.b)({type:Boolean,json:{write:!0}})],v.prototype,"useGamma",void 0),Object(l.a)([Object(f.b)({type:g.b.apiValues,json:{type:g.b.jsonValues,write:g.b.write}})],v.prototype,"stretchType",void 0),Object(l.a)([Object(d.a)("stretchType",["stretchType"])],v.prototype,"readStretchType",null),Object(l.a)([Object(p.a)({rasterStretch:"raster-stretch"})],v.prototype,"type",void 0);var j=v=a=Object(l.a)([Object(h.a)("esri.renderers.RasterStretchRenderer")],v);t.a=j},896:function(e,t,r){"use strict";var a=r(15),n=r(8),i=r.n(n),o=r(23),s=r(2),l=r(4),c=r(5),u=r(6),f=r(0),p=(r(12),r(18)),d=(r(13),r(14),r(1)),h=r(34),b=r(29),y=r(31),m=r(7),g=(r(9),r(20),r(21),r(26)),v=r(50),j=(r(103),r(36)),I=r(110),x=r(333),M=r(224),w=r(61),O=r(242),k=r(334),A=r(442),C=r(328),T=r(166),S=r(298),D=r(322),R=r(873),L=r(32),N=r(887),B=180/Math.PI,z=function(e){return e&&"esri.layers.support.PixelBlock"===e.declaredClass&&e.pixels&&e.pixels.length>0},H=new Map;function P(e,t){return H.get(t)/H.get(e)||1}function U(e){return(450-e)%360}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"geographic",r=Object(L.a)(e,2),a=r[0],n=r[1],i=Math.sqrt(a*a+n*n),o=Math.atan2(n,a)*B;return o=(360+o)%360,"geographic"===t&&(o=U(o)),[i,o]}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"geographic",r=e[1];"geographic"===t&&(r=U(r)),r%=360;var a=e[0];return[a*Math.cos(r/B),a*Math.sin(r/B)]}function Z(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"geographic",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!z(e))return e;for(var n=e.pixels,i=e.width,o=e.height,s=i*o,l=n[0],c=n[1],u=N.a.createEmptyBand(e.pixelType,s),f=N.a.createEmptyBand(e.pixelType,s),p=0,d=0;d<o;d++)for(var h=0;h<i;h++){var b,y,m,g;"vector-uv"===t?(b=E([l[p],c[p]],r),y=Object(L.a)(b,2),u[p]=y[0],f[p]=y[1],u[p]*=a):(m=_([l[p],c[p]],r),g=Object(L.a)(m,2),u[p]=g[0],f[p]=g[1],u[p]*=a,f[p]*=a),p++}var v=new N.a({pixelType:e.pixelType,width:e.width,height:e.height,mask:e.mask,validPixelCount:e.validPixelCount,maskIsAlpha:e.maskIsAlpha,pixels:[u,f]});return v.updateStatistics(),v}function J(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(1===r||!z(e))return e;for(var a=e.clone(),n=a.pixels,i=a.width,o=a.height,s=n[0],l=n[1],c=0,u=0;u<o;u++)for(var f=0;f<i;f++)"vector-uv"===t?(s[c]*=r,l[c]*=r):s[c]*=r,c++;return a.updateStatistics(),a}H.set("meter-per-second",1),H.set("kilometer-per-hour",.277778),H.set("knots",.514444),H.set("feet-per-second",.3048),H.set("mile-per-hour",.44704);var F=r(10),G=(r(51),r(127),r(377)),W=r(98),V=(r(16),r(59),r(62)),q=r(918);r(11),r(925);Object(V.a)("esri/symbols/patterns/"),new q.a(1e3);var K;(function(){var e={}})(),new j.a([128,128,128]),new j.a("white");function X(e,t){return Q.apply(this,arguments)}function Q(){return(Q=Object(o.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.symbolLayers,e.t0=n,!e.t0){e.next=5;break}return e.next=5,Object(G.a)(n,function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=Object(o.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next="extrude"===e.t0?3:"icon"===e.t0||"line"===e.t0||"text"===e.t0?5:"path"===e.t0?7:"object"===e.t0?9:11;break;case 3:return function(e,t){e.size="number"==typeof t[2]?t[2]:0}(t,a),e.abrupt("break",11);case 5:return function(e,t){var r=Y(t);Object(F.g)(r)&&(e.size=r)}(t,a),e.abrupt("break",11);case 7:return function(e,t){var r=$(t,W.a,[e.width,void 0,e.height]);e.width=ee(t[0],e.width,1,r),e.height=ee(t[2],e.height,1,r)}(t,a),e.abrupt("break",11);case 9:return e.next=11,function(){var e=Object(o.a)(i.a.mark((function e(t,a){var n,s,l,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=Object(o.a)(i.a.mark((function e(t){var a,n,o,s,l,c,u,f,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(62).then(r.bind(null,1225));case 2:return a=e.sent,e.next=5,a.computeObjectLayerResourceSize(t,10);case 5:n=e.sent,o=t.width,s=t.height,l=t.depth,c=[o,l,s],u=1,f=0;case 12:if(!(f<3)){e.next=19;break}if(null==c[f]){e.next=16;break}return u=c[f]/n[f],e.abrupt("break",19);case 16:f++,e.next=12;break;case 19:for(p=0;p<3;p++)null==c[p]&&(c[p]=n[p]*u);return e.abrupt("return",{resourceSize:n,symbolSize:c});case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(t);case 2:n=e.sent,s=n.resourceSize,l=n.symbolSize,c=$(a,s,l),t.width=ee(a[0],l[0],s[0],c),t.depth=ee(a[1],l[1],s[1],c),t.height=ee(a[2],l[2],s[2],c);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()(t,a);case 11:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()(t,a));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){var t,r=Object(a.a)(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;if("number"==typeof n)return n}}catch(i){r.e(i)}finally{r.f()}return null}function $(e,t,r){for(var a=0;a<3;a++){var n=e[a];switch(n){case"symbol-value":return null!=r[a]?r[a]/t[a]:1;case"proportional":break;default:if(n&&t[a])return n/t[a]}}return 1}function ee(e,t,r,a){switch(e){case"proportional":return r*a;case"symbol-value":return null!=t?t:r;default:return e}}function te(){return(te=Object(o.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!r){e.next=2;break}return e.abrupt("return",Object(w.h)(t)?X(t,r):void(Object(w.c)(t)&&function(e,t){var r=Y(t);if(!Object(F.f)(r))switch(e.type){case"simple-marker":e.size=r;break;case"picture-marker":var a=e.width/e.height;a>1?(e.width=r,e.height=r*a):(e.width=r*a,e.height=r);break;case"simple-line":e.width=r;break;case"text":e.font.size=r}}(t,r)));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var re=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]),ae=new h.a({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"}),ne=new h.a({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"}),ie=new h.a({flow_from:"flow-from",flow_to:"flow-to"}),oe=K=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(e){var a;return Object(s.a)(this,r),(a=t.call(this,e)).attributeField="Magnitude",a.flowRepresentation="flow-from",a.rotationType="arithmetic",a.style="single-arrow",a.symbolTileSize=50,a.type="vector-field",a}return Object(l.a)(r,[{key:"readInputUnit",value:function(e,t){return re.has(e)?ae.fromJSON(e):null}},{key:"readOutputUnit",value:function(e,t){return re.has(e)?ae.fromJSON(e):null}},{key:"clone",value:function(){return new K({attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,style:this.style,visualVariables:Object(p.a)(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})}},{key:"getGraphicsFromPixelData",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var r,a,n,o,s,l,c,u,f,p,d,h,b,y,m,g=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=g.length>1&&void 0!==g[1]&&g[1],a=[],n=P(this.inputUnit,this.outputUnit),o=r?Z(t.pixelBlock,"vector-uv",this.rotationType,n):J(t.pixelBlock,"vector-magdir",n),s=t.extent,l=o.mask&&o.mask.length>0,u=0,f=(s.xmax-s.xmin)/o.width,p=(s.ymax-s.ymin)/o.height,d=0;case 5:if(!(d<o.height)){e.next=22;break}h=0;case 7:if(!(h<o.width)){e.next=19;break}if(c=[s.xmin+h*f+f/2,s.ymax-d*p-p/2],l&&!o.mask[u]||!c||2!==c.length){e.next=16;break}return b={Magnitude:o.pixels[0][u],Direction:o.pixels[1][u]},y=new v.a({x:c[0],y:c[1],spatialReference:s.spatialReference}),e.next=13,Object(R.a)(y);case 13:y=e.sent[0],(m=new O.a({geometry:{type:"point",x:y.x,y:y.y,spatialReference:s.spatialReference},attributes:b})).symbol=this._getVisualVariablesAppliedSymbol(m),a.push(m);case 16:h++,u++,e.next=7;break;case 19:d++,e.next=5;break;case 22:return e.abrupt("return",a);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(e,t){}},{key:"getSymbolAsync",value:function(){var e=Object(o.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){return[]}},{key:"getClassBreakInfos",value:function(){var e;return null==(e=this.styleRenderer)?void 0:e.classBreakInfos}},{key:"getDefaultSymbol",value:function(){var e;return null==(e=this.styleRenderer)?void 0:e.defaultSymbol}},{key:"_getDefaultSymbol",value:function(e){return new M.a({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new I.a({width:0}),size:20,color:e||new j.a([0,92,230])})}},{key:"_getVisualVariablesAppliedSymbol",value:function(e){if(e){var t=this.styleRenderer&&this.styleRenderer.getSymbol(e);t=t.clone();var r=this.sizeVariables,a=this.rotationVariables;if(r&&r.length&&this.sizeVariables.forEach((function(r){return function(e,t){return te.apply(this,arguments)}(t,Object(A.a)([r],e))})),a&&a.length){var n=e.attributes.Direction;e.attributes.Direction="flow-from"===this.flowRepresentation?n:n+180,this.rotationVariables.forEach((function(r){return function(e,t,r){if(e&&null!=t)if(Object(w.h)(e)){var a=e.symbolLayers;a&&a.forEach((function(e){if(e&&"object"===e.type)switch(r){case"tilt":e.tilt=t;break;case"roll":e.roll=t;break;default:e.heading=t}}))}else Object(w.c)(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle=t))}(t,Object(A.d)(r,e),r.axis)}))}return t}}},{key:"_createStyleRenderer",value:function(e){var t={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(e){case"single-arrow":t=this._createSingleArrowRenderer();break;case"beaufort-kn":t=this._createBeaufortKnotsRenderer();break;case"beaufort-m":t=this._createBeaufortMeterRenderer();break;case"beaufort-ft":t=this._createBeaufortFeetRenderer();break;case"beaufort-mi":t=this._createBeaufortMilesRenderer();break;case"beaufort-km":t=this._createBeaufortKilometersRenderer();break;case"ocean-current-m":t=this._createCurrentMeterRenderer();break;case"ocean-current-kn":t=this._createCurrentKnotsRenderer();break;case"simple-scalar":t=this._createSimpleScalarRenderer();break;case"wind-barb":t=this._createWindBarbsRenderer();break;case"classified-arrow":t=this._createClassifiedArrowRenderer()}return new D.a(t)}},{key:"_createSingleArrowRenderer",value:function(){return{defaultSymbol:this._getDefaultSymbol()}}},{key:"_createBeaufortKnotsRenderer",value:function(){return{defaultSymbol:this._getDefaultSymbol(new j.a([214,47,39])),classBreakInfos:this._getClassBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]])}}},{key:"_createBeaufortMeterRenderer",value:function(){return{defaultSymbol:this._getDefaultSymbol(new j.a([214,47,39])),classBreakInfos:this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}},{key:"_createBeaufortFeetRenderer",value:function(){var e=this._getDefaultSymbol(new j.a([214,47,39])),t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];return t=t.map((function(e){return 3.28084*e})),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}},{key:"_createBeaufortMilesRenderer",value:function(){var e=this._getDefaultSymbol(new j.a([214,47,39])),t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];return t=t.map((function(e){return 2.23694*e})),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}},{key:"_createBeaufortKilometersRenderer",value:function(){var e=this._getDefaultSymbol(new j.a([214,47,39])),t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];return t=t.map((function(e){return 3.6*e})),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}},{key:"_createCurrentMeterRenderer",value:function(){return{defaultSymbol:this._getDefaultSymbol(new j.a([177,177,177])),classBreakInfos:this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]])}}},{key:"_createCurrentKnotsRenderer",value:function(){return{defaultSymbol:this._getDefaultSymbol(new j.a([177,177,177])),classBreakInfos:this._getClassBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]])}}},{key:"_createClassifiedArrowRenderer",value:function(){var e,t=this._getDefaultSymbol(new j.a([56,168,0])),r=[0,1e-6,3.5,7,10.5,14];if(null!=(e=this.sizeVariables)&&e.length){var a=this.sizeVariables[0].minDataValue,n=this.sizeVariables[0].maxDataValue;if(a&&n){var i=(n-a)/5;r=Array.from(Array(6).keys()).map((function(e){return a+i*e}))}}return{defaultSymbol:t,classBreakInfos:this._getClassBreaks(r,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]])}}},{key:"_createSimpleScalarRenderer",value:function(){return{defaultSymbol:x.a.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII=",height:20,width:20,type:"esriPMS",angle:0})}}},{key:"_createWindBarbsRenderer",value:function(){var e=Array.from(Array(31).keys()).map((function(e){return 5*e})),t=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjE1IDIwIDIwIDIwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxwYXRoIGQ9Ik0yNSAwIEwyNSA0MCBNMjUgMzUgTDE3LjUgMzcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"90-95",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="}],r=x.a.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",height:20,width:20,type:"esriPMS",angle:0}),a=e.map((function(a,n){var i;if(n!==e.length-1)if(0===n)i={minValue:a,maxValue:e[n+1],symbol:r};else{var o=x.a.fromJSON({type:"esriPMS",imageData:t[n].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0});i={minValue:a,maxValue:e[n+1],symbol:o}}return new S.a(i)}));return{defaultSymbol:r,classBreakInfos:a}}},{key:"_getClassBreaks",value:function(e,t){var r=this;return t.map((function(t,a){return new S.a({minValue:e[a],maxValue:e[a+1],symbol:r._getDefaultSymbol(new j.a(t))})}))}},{key:"styleRenderer",get:function(){var e=this.style,t=this.attributeField,r=this._createStyleRenderer(e);return r.field=t,r}},{key:"sizeVariables",get:function(){var e=[];if(this.visualVariables){var t,r=Object(a.a)(this.visualVariables);try{for(r.s();!(t=r.n()).done;){var n=t.value;"size"===n.type&&e.push(n)}}catch(o){r.e(o)}finally{r.f()}}if(0===e.length){var i=new C.a({minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize});this.visualVariables?this.visualVariables.push(i):this._set("visualVariables",[i]),e.push(i)}return e}},{key:"rotationVariables",get:function(){var e=[];if(this.visualVariables){var t,r=Object(a.a)(this.visualVariables);try{for(r.s();!(t=r.n()).done;){var n=t.value;"rotation"===n.type&&e.push(n)}}catch(o){r.e(o)}finally{r.f()}}if(0===e.length){var i=new k.a({field:"Direction",rotationType:this.rotationType});this.visualVariables?this.visualVariables.push(i):this._set("visualVariables",[i]),e.push(i)}return e}}]),r}(Object(T.a)(g.a));Object(f.a)([Object(d.b)({type:String,json:{write:!0}})],oe.prototype,"attributeField",void 0),Object(f.a)([Object(d.b)({type:ie.apiValues,json:{type:ie.jsonValues,read:{reader:ie.read},write:{writer:ie.write}}})],oe.prototype,"flowRepresentation",void 0),Object(f.a)([Object(d.b)({type:["geographic","arithmetic"],json:{write:!0}})],oe.prototype,"rotationType",void 0),Object(f.a)([Object(d.b)({type:ne.apiValues,json:{type:ne.jsonValues,read:{reader:ne.read},write:{writer:ne.write}}})],oe.prototype,"style",void 0),Object(f.a)([Object(d.b)({json:{write:!0}})],oe.prototype,"symbolTileSize",void 0),Object(f.a)([Object(d.b)({type:ae.apiValues,json:{type:ae.jsonValues,write:{writer:ae.write}}})],oe.prototype,"inputUnit",void 0),Object(f.a)([Object(y.a)("inputUnit")],oe.prototype,"readInputUnit",null),Object(f.a)([Object(d.b)({type:ae.apiValues,json:{type:ae.jsonValues,read:{reader:ae.read},write:{writer:ae.write}}})],oe.prototype,"outputUnit",void 0),Object(f.a)([Object(y.a)("outputUnit")],oe.prototype,"readOutputUnit",null),Object(f.a)([Object(b.a)({vectorField:"vector-field"})],oe.prototype,"type",void 0),Object(f.a)([Object(d.b)({type:D.a,dependsOn:["style","attributeField"]})],oe.prototype,"styleRenderer",null),Object(f.a)([Object(d.b)({type:C.a,dependsOn:["visualVariables","symbolTileSize"]})],oe.prototype,"sizeVariables",null),Object(f.a)([Object(d.b)({type:k.a,dependsOn:["visualVariables","rotationType"]})],oe.prototype,"rotationVariables",null);var se=oe=K=Object(f.a)([Object(m.a)("esri.renderers.VectorFieldRenderer")],oe);t.a=se},897:function(e,t,r){"use strict";var a=r(2),n=r(4),i=r(5),o=r(6),s=r(0),l=(r(12),r(13),r(14)),c=r(1),u=r(29),f=r(7),p=(r(9),r(20),r(21),r(26)),d=r(36),h=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).value=null,e.label=null,e.color=null,e}return r}(p.a);Object(s.a)([Object(c.b)({type:Number,json:{write:!0}})],h.prototype,"value",void 0),Object(s.a)([Object(c.b)({type:String,json:{write:!0}})],h.prototype,"label",void 0),Object(s.a)([Object(c.b)({type:d.a,json:{type:[l.a],write:!0}})],h.prototype,"color",void 0);var b,y=h=Object(s.a)([Object(f.a)("esri.renderers.support.ColormapInfo")],h),m=r(922),g=b=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).colormapInfos=null,n.type="raster-colormap",n}return Object(n.a)(r,[{key:"clone",value:function(){return new b({colormapInfos:this.colormapInfos.map((function(e){return e.toJSON()}))})}},{key:"extractColormap",value:function(){return this.colormapInfos.map((function(e){return[e.value,e.color.r,e.color.g,e.color.b,e.color.a>1?e.color.a:255*e.color.a&255]})).sort((function(e,t){return e[0]-t[0]}))}}],[{key:"createFromColormap",value:function(e,t){if(!e)return null;function r(e){return t?t[e]||"":String(e[0])}var a=5===e[0].length,n=e.sort((function(e){return e[0][0]-e[1][0]})),i=a?n.map((function(e){return y.fromJSON({value:e[0],color:e.slice(1,5),label:r(e[0])})})):n.map((function(e){return y.fromJSON({value:e[0],color:e.slice(1,4).concat([255]),label:r(e[0])})}));return new b({colormapInfos:i})}},{key:"createFromColorramp",value:function(e){var t=Object(m.b)(e,256);return b.createFromColormap(t)}}]),r}(p.a);Object(s.a)([Object(c.b)({type:[y],json:{write:!0}})],g.prototype,"colormapInfos",void 0),Object(s.a)([Object(u.a)({rasterColormap:"raster-colormap"})],g.prototype,"type",void 0);var v=g=b=Object(s.a)([Object(f.a)("esri.renderers.RasterColormapRenderer")],g);t.a=v},918:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var a=r(2),n=r(4),i=r(440),o=function(){function e(t,r){Object(a.a)(this,e),this._storage=new i.b,this._storage.maxSize=t,r&&this._storage.registerRemoveFunc("",r)}return Object(n.a)(e,[{key:"put",value:function(e,t){this._storage.put(e,t,1,1)}},{key:"pop",value:function(e){return this._storage.pop(e)}},{key:"get",value:function(e){return this._storage.get(e)}},{key:"clear",value:function(){this._storage.clearAll()}},{key:"destroy",value:function(){this._storage.clearAll()}}]),e}()},924:function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return h})),r.d(t,"c",(function(){return p}));var a=r(11),n=r(125),i=r(322),o=r(897),s=r(891),l=r(892),c=r(323),u=r(896),f={key:"type",base:null,typeMap:{"unique-value":c.a,"class-breaks":i.a,"raster-colormap":o.a,"raster-stretch":l.a,"vector-field":u.a,"raster-shaded-relief":s.a}},p=Object(a.a)(Object(a.a)({},f),{},{typeMap:Object(a.a)({},f.typeMap)});delete p.typeMap["vector-field"];var d={uniqueValue:c.a,classBreaks:i.a,rasterStretch:l.a,rasterColormap:o.a,vectorField:u.a,rasterShadedRelief:s.a};function h(e,t){if(!e)return null;var r,a=(r=e)&&d[r.type]||null;if(a){var i=new a;return i.read(e,t),i}return t&&t.messages&&e&&t.messages.push(new n.a("renderer:unsupported","Renderers of type '"+(e.type||"unknown")+"' are not supported",{definition:e,context:t})),null}},925:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return f})),r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return p})),r.d(t,"g",(function(){return u})),r.d(t,"h",(function(){return l}));var a=r(32),n=r(15);function i(e,t,r){var i=function(e){for(var t=e.length;t--;)if(-1===" /-,\n".indexOf(e.charAt(t)))return!1;return!0},s=[],l=0,c=-1;do{if((c=t.indexOf("[",l))>=l){if(c>l){var u=t.substr(l,c-l);s.push([u,null,i(u)])}if(l=c+1,(c=t.indexOf("]",l))>=l){if(c>l){var f=e[t.substr(l,c-l)];f&&s.push([null,f,!1])}l=c+1}}}while(-1!==c);if(l<t.length-1){var p=t.substr(l);s.push([p,null,i(p)])}return function(e){var t,i="",l=null,c=Object(n.a)(s);try{for(c.s();!(t=c.n()).done;){var u=t.value,f=Object(a.a)(u,3),p=f[0],d=f[1],h=f[2];if(p)h?l=p:(l&&(i+=l,l=null),i+=p);else{var b=e.attributes[d];b&&(l&&(i+=l,l=null),i+=b)}}}catch(y){c.e(y)}finally{c.f()}return o(i,r)}}function o(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function s(e){return e?{r:e[0],g:e[1],b:e[2],a:e[3]/255}:{r:0,g:0,b:0,a:0}}function l(e){var t;return null==(t=e.data)?void 0:t.symbol}function c(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function u(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function f(e){return"CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type}function p(e){return"CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type}},974:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}));var a=new(r(34).a)({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"}),n={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"}},975:function(e,t,r){"use strict";var a,n=r(2),i=r(4),o=r(5),s=r(6),l=r(0),c=(r(12),r(18)),u=(r(13),r(14)),f=r(1),p=r(7),d=(r(9),r(20),r(21),r(26)),h=a=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).variableName=null,a.dimensionName=null,a.values=[],a.isSlice=!1,a}return Object(i.a)(r,[{key:"clone",value:function(){return new a({variableName:this.variableName,dimensionName:this.dimensionName,values:Object(c.a)(this.values),isSlice:this.isSlice})}}]),r}(d.a);Object(l.a)([Object(f.b)({type:String,json:{write:!0}})],h.prototype,"variableName",void 0),Object(l.a)([Object(f.b)({type:String,json:{write:!0}})],h.prototype,"dimensionName",void 0),Object(l.a)([Object(f.b)({type:u.p.array(u.p.oneOf([u.p.native(Number),u.p.array(u.p.native(Number))])),json:{write:!0}})],h.prototype,"values",void 0),Object(l.a)([Object(f.b)({type:Boolean,json:{write:!0}})],h.prototype,"isSlice",void 0);var b=h=a=Object(l.a)([Object(p.a)("esri.layers.support.DimensionalDefinition")],h);t.a=b},990:function(e,t,r){"use strict";r.r(t);var a=r(8),n=r.n(a),i=r(23),o=r(11),s=r(2),l=r(4),c=r(49),u=r(47),f=r(5),p=r(6),d=r(0),h=(r(12),r(10)),b=r(13),y=r(14),m=r(1),g=r(34),v=r(29),j=r(31),I=r(7),x=r(24),M=r(9),w=(r(20),r(21),r(16)),O=r(249),k=r(192),A=r(193),C=r(194),T=r(245),S=r(924),D=r(320),R=r(247),L=r(244),N=r(428),B=r(246),z=r(433),H=r(163),P=r(41),U=r(39),E=r(57),_=(r(103),r(59)),Z=r(219),J=r(99),F=r(975),G=r(1042),W=r(1048),V=r(1053),q=b.a.getLogger("esri.layers.mixins.ImageryTileMixin"),K=r(50),X=r(851),Q=r(889),Y=r(26),$=function(e){Object(f.a)(r,e);var t=Object(p.a)(r);function r(){var e;return Object(s.a)(this,r),(e=t.apply(this,arguments)).blockWidth=void 0,e.blockHeight=void 0,e.compression=null,e.origin=null,e.firstPyramidLevel=null,e.maximumPyramidLevel=null,e.pyramidScalingFactor=2,e.pyramidBlockWidth=null,e.pyramidBlockHeight=null,e.isVirtualTileInfo=!1,e.tileInfo=null,e.blockBoundary=null,e}return r}(Y.a);Object(d.a)([Object(m.b)({type:Number,json:{write:!0}})],$.prototype,"blockWidth",void 0),Object(d.a)([Object(m.b)({type:Number,json:{write:!0}})],$.prototype,"blockHeight",void 0),Object(d.a)([Object(m.b)({type:String,json:{write:!0}})],$.prototype,"compression",void 0),Object(d.a)([Object(m.b)({type:K.a,json:{write:!0}})],$.prototype,"origin",void 0),Object(d.a)([Object(m.b)({type:Number,json:{write:!0}})],$.prototype,"firstPyramidLevel",void 0),Object(d.a)([Object(m.b)({type:Number,json:{write:!0}})],$.prototype,"maximumPyramidLevel",void 0),Object(d.a)([Object(m.b)()],$.prototype,"pyramidScalingFactor",void 0),Object(d.a)([Object(m.b)({type:Number,json:{write:!0}})],$.prototype,"pyramidBlockWidth",void 0),Object(d.a)([Object(m.b)({type:Number,json:{write:!0}})],$.prototype,"pyramidBlockHeight",void 0),Object(d.a)([Object(m.b)({type:Boolean,json:{write:!0}})],$.prototype,"isVirtualTileInfo",void 0),Object(d.a)([Object(m.b)({json:{write:!0}})],$.prototype,"tileInfo",void 0),Object(d.a)([Object(m.b)()],$.prototype,"blockBoundary",void 0);var ee=$=Object(d.a)([Object(I.a)("esri.layers.support.RasterStorageInfo")],$),te=r(252),re=r(998),ae=r(902),ne=r(32),ie=r(83),oe=r(82),se=r(253),le=function(e,t){var r=(e.isWGS84||e.isWebMercator)&&(t.isWGS84||t.isWebMercator);return!(e.equals(t)||r)};function ce(){return ue.apply(this,arguments)}function ue(){return(ue=Object(i.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(se.d)()&&Object(se.e)()){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,Object(se.f)();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e.spatialReference.equals(t))return e;var n=le(e.spatialReference,t);if(n&&!Object(se.d)())throw new x.a("rasterprojectionhelper-projectResolution","projection engine is not loaded");var i=r.center,o=new E.a({xmin:i.x-e.x/2,xmax:i.x+e.x/2,ymin:i.y-e.y/2,ymax:i.y+e.y/2,spatialReference:e.spatialReference}),s=n?Object(se.g)(o,t,a):Object(ie.d)(o,t);return null==s?null:{x:s.xmax-s.xmin,y:s.ymax-s.ymin}}function pe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.01;return Object(oe.b)(e)?t/Object(oe.b)(e):0}function de(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=e.spatialReference;if(n.equals(t))return e;var i=le(n,t);if(i&&!Object(se.d)())throw new x.a("rasterprojectionhelper-projectResolution","projection engine is not loaded");var o=i?Object(se.g)(e,t,r):Object(ie.d)(e,t);if(o&&a&&t.isGeographic){var s,l,c=n.isWebMercator?Object(P.d)(n).origin:null!=(s=null==(l=Object(P.d)(n))?void 0:l.valid)?s:[],u=Object(ne.a)(c,2),f=u[0],p=u[1],d=pe(n);d&&null!=f&&null!=p&&(Math.abs(e.x-f)<d&&Math.abs(180-o.x)<5e-4?o.x-=360:Math.abs(e.x-p)<d&&Math.abs(180+o.x)<5e-4&&(o.x+=360))}return o}function he(e,t){var r,a,n,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l=e.spatialReference;if(l.equals(t))return e;var c=le(l,t);if(c&&!Object(se.d)())throw new x.a("rasterprojectionhelper-projectExtent","projection engine is not loaded");var u=c?Object(se.g)(e,t,o):Object(ie.d)(e,t),f=null!=(r=null==(a=Object(P.d)(l))?void 0:a.origin)?r:[],p=Object(ne.a)(f,2),d=p[0],h=p[1];if(u&&s&&l.isWebMercator&&t.isGeographic&&null!=d&&null!=h){var b=.001,y=1e3;if(Math.abs(e.xmin-d)<b&&Math.abs(h-e.xmax)>y&&Math.abs(180-u.xmax)<5e-4){u.xmin=-180;var m=[];m.push(new K.a(e.xmax,e.ymin,l)),m.push(new K.a(e.xmax,(e.ymin+e.ymax)/2,l)),m.push(new K.a(e.xmax,e.ymax,l));var g=m.map((function(e){return de(e,t,o)})).filter((function(e){return!isNaN(null==e?void 0:e.x)})).map((function(e){return e.x}));u.xmax=Math.max.apply(null,g)}if(Math.abs(e.xmax-h)<b&&Math.abs(d-e.xmin)>y&&Math.abs(180+u.xmin)<5e-4){u.xmax=180;var v=[];v.push(new K.a(e.xmin,e.ymin,l)),v.push(new K.a(e.xmin,(e.ymin+e.ymax)/2,l)),v.push(new K.a(e.xmin,e.ymax,l));var j=v.map((function(e){return de(e,t,o)})).filter((function(e){return!isNaN(null==e?void 0:e.x)})).map((function(e){return e.x}));u.xmin=Math.min.apply(null,j)}}var I=t.isWebMercator?Object(P.d)(t).origin:null!=(n=null==(i=Object(P.d)(t))?void 0:i.valid)?n:[],M=Object(ne.a)(I,2);d=M[0],h=M[1];var w=pe(t);return w&&null!=d&&null!=h&&(Math.abs(u.xmin-d)<w&&(u.xmin=d),Math.abs(u.xmax-h)<w&&(u.xmax=h)),u}function be(e,t,r){var a,n,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[32,32];if(le(e.spatialReference,t.spatialReference)&&!Object(se.d)())throw new x.a("rasterprojectionhelper-projectResolution","projection engine is not loaded");if(!(e&&t&&r))return null;for(var c,u=e.xmin,f=e.ymin,p=e.xmax,d=e.ymax,h=e.spatialReference,b=t.spatialReference,y=null!=(a=null==(n=Object(P.d)(h))?void 0:n.valid)?a:[],m=Object(ne.a)(y,2),g=m[0],v=m[1],j={x:l[0]*r.x,y:l[1]*r.y},I={cols:Math.ceil((p-u)/j.x-.1)+1,rows:Math.ceil((d-f)/j.y-.1)+1},M=j.x,w=j.y,O=[],k=!1,A=0;A<I.cols;A++){for(var C=[],T=0;T<I.rows;T++){var S=de(new K.a({x:u+M*A,y:d-w*T,spatialReference:h}),b,i);o&&(S=o.inverseTransform(S)),C.push(S),A>0&&s&&S&&c[T]&&null!=g&&S.x<c[T].x&&(S.x+=v-g),S?(O.push((S.x-t.xmin)/(t.xmax-t.xmin)),O.push((t.ymax-S.y)/(t.ymax-t.ymin))):(O.push(NaN),O.push(NaN),k=!0)}c=C}for(var D=function(e,t){var r=(e[0]+e[4]+e[4*t.cols]+e[4*t.cols+4])/4,a=(e[1]+e[5]+e[4*t.rows+1]+e[4*t.rows+5])/4;return[Math.abs(r-e[2*t.rows+2]),Math.abs(a-e[2*t.rows+3])]}(O,I),R=new Float32Array((I.cols-1)*(I.rows-1)*2*6),L=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),N=new Float32Array([-1,1,0,0,-1,1,1,0,0]),B=0;B<I.cols-1;B++){for(var z=0;z<I.rows-1;z++){for(var H=B*I.rows*2+2*z,U=O[H],E=O[H+1],_=O[H+2],Z=O[H+3],J=O[H+=2*I.rows],F=O[H+1],G=O[H+2],W=O[H+3],V=0,q=12*(z*(I.cols-1)+B),X=0;X<3;X++)R[q++]=L[V++]*U+L[V++]*_+L[V++]*G;V=0;for(var Q=0;Q<3;Q++)R[q++]=L[V++]*E+L[V++]*Z+L[V++]*W;V=0;for(var Y=0;Y<3;Y++)R[q++]=N[V++]*U+N[V++]*J+N[V++]*G;V=0;for(var $=0;$<3;$++)R[q++]=N[V++]*E+N[V++]*F+N[V++]*W}if(k)for(var ee=0;ee<R.length;ee++)isNaN(R[ee])&&(R[ee]=-1)}return{offsets:O,error:D,coefficients:R,spacing:l,size:[I.cols-1,I.rows-1]}}function ye(e,t,r){var a=Math.log(e.x/t.pixelSize.x)/Math.LN2,n=Math.log(e.y/t.pixelSize.y)/Math.LN2,i=t.storageInfo.maximumPyramidLevel||0,o="down"===r?Math.floor(Math.min(a,n)):"up"===r?Math.ceil(Math.max(a,n)):Math.round((a+n)/2),s=!1;o<0?o=0:o>i&&(s=o>i+3,o=i);var l=Math.pow(2,o);return{pyramidLevel:o,pyramidResolution:new K.a({x:l*t.nativePixelSize.x,y:l*t.nativePixelSize.y,spatialReference:t.spatialReference}),excessiveReading:s}}var me=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15e3,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;Object(s.a)(this,e),this._timer=null,this._cachedBlocks=new Map,this._size=-1,this._duration=t,this._interval=Math.min(t,r)}return Object(l.a)(e,[{key:"decreaseRefCount",value:function(e,t){var r=e+"/"+t,a=this._cachedBlocks;if(a.has(r)){var n=a.get(r);return n.refCount--,n.refCount<=0&&(a.delete(r),n.controller&&n.controller.abort()),n.refCount}return 0}},{key:"getBlock",value:function(e,t){var r=e+"/"+t,a=this._cachedBlocks;if(a.has(r)){var n=a.get(r);return n.ts=Date.now(),n.refCount++,a.delete(r),a.set(r,n),n.block}return null}},{key:"putBlock",value:function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=this._cachedBlocks,i=e+"/"+t;if(n.has(i)){var o=n.get(i);o.ts=Date.now(),o.refCount++}else n.set(i,{block:r,ts:Date.now(),refCount:1,controller:a});this.trim(),this.updateTimer()}},{key:"deleteBlock",value:function(e,t){var r=this._cachedBlocks,a=e+"/"+t;r.has(a)&&r.delete(a)}},{key:"updateMaxSize",value:function(e){this._size=e,this.trim()}},{key:"empty",value:function(){this._cachedBlocks.clear(),this.clearTimer()}},{key:"getCurrentSize",value:function(){return this._cachedBlocks.size}},{key:"updateTimer",value:function(){var e=this;if(null==this._timer){var t=this._cachedBlocks;this._timer=setInterval((function(){for(var r=Array.from(t),a=Date.now(),n=0;n<r.length&&r[n][1].ts<=a-e._duration;n++)t.delete(r[n][0]);0===t.size&&e.clearTimer()}),this._interval)}}},{key:"trim",value:function(){var e=this._cachedBlocks;if(!(-1===this._size||this._size>=e.size))for(var t=Array.from(e),r=0;r<t.length-this._size;r++)e.delete(t[r][0])}},{key:"clearTimer",value:function(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)}}]),e}(),ge=new Map,ve=new me;function je(e,t){return null==t?e:"".concat(e,"?sliceId=").concat(t)}function Ie(e,t,r){if(!ge.has(e))return null==t?ve.getBlock(e,r):null;var a=ge.get(e);if(null==a[t]){for(var n=0;n<a.length;n++)if(a[n]&&a[n].cache.has(r)){var i=a[n].cache.get(r);return i.refCount++,i.block}return ve.getBlock(e,r)}var o=a[t].cache;if(o.has(r)){var s=o.get(r);return s.refCount++,s.block}for(var l=0;l<a.length;l++)if(l!==t&&a[l]&&a[l]&&a[l].cache.has(r)){var c=a[l].cache.get(r);return c.refCount++,o.set(r,c),c.block}return null}function xe(e,t,r,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(ge.has(e)){var i=ge.get(e);if(null!=i[t]){var o={refCount:1,block:a,isResolved:!1,isRejected:!1,controller:n};a.then((function(){return o.isResolved=!0})).catch((function(){return o.isRejected=!0})),i[t].cache.set(r,o)}else ve.putBlock(e,r,a,n)}else null==t&&ve.putBlock(e,r,a,n)}var Me=function(e){Object(f.a)(r,e);var t=Object(p.a)(r);function r(){var e;return Object(s.a)(this,r),(e=t.apply(this,arguments)).rasterJobHandler=null,e.datasetName=null,e.datasetFormat=null,e.rasterInfo=null,e.ioConfig={sampling:"closest"},e}return Object(l.a)(r,[{key:"init",value:function(){var e=Object(i.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ce(),this.addResolvingPromise(t),e.next=4,this.when();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"normalizeCtorArgs",value:function(e){return e&&e.ioConfig&&(e=Object(o.a)(Object(o.a)({},e),{},{ioConfig:Object(o.a)({resolution:null,bandIds:null,sampling:"closest",tileInfo:J.a.create()},e.ioConfig)})),e}},{key:"open",value:function(){var e=Object(i.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new x.a("BaseRaster:open-not-implemented","open() is not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTile",value:function(){var e=Object(i.a)(n.a.mark((function e(t,r,a){var i,s,l,c,u,f,p=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=p.length>3&&void 0!==p[3]?p[3]:{},l=i.tileInfo,c=l.lodAt(t),u=new K.a({x:c.resolution,y:c.resolution,spatialReference:l.spatialReference}),f=this.getTileExtent(u,r,a,l),e.abrupt("return",(null!=(s=i.multidimensionalDefinition)&&s.length&&Object(h.g)(this.rasterInfo.multidimensionalInfo)&&null==i.sliceId&&(i=Object(o.a)(Object(o.a)({},i),{},{sliceId:this.getSliceIndex(i.multidimensionalDefinition)||0})),this.fetchPixels(f,l.size[0],l.size[1],i)));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r,a){return e.apply(this,arguments)}}()},{key:"identify",value:function(){var e=Object(i.a)(n.a.mark((function e(t){var r,a,i,o,s,l,c,u,f,p,d,b,y,m,g,v,j,I=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=I.length>1&&void 0!==I[1]?I[1]:{},a=this.rasterInfo,i=a.spatialReference,o=a.extent,s=r.datumTransformation,l=de(t,i,s),o.intersects(l)){e.next=4;break}return e.abrupt("return",{location:l,value:null});case 4:if(c=0,!r.srcResolution){e.next=9;break}c=ye(r.srcResolution,this.rasterInfo,this.ioConfig.sampling).pyramidLevel,e.next=14;break;case 9:return e.next=11,this.computeBestPyramidLevelForLocation(t,r);case 11:if(null!=(c=e.sent)){e.next=14;break}return e.abrupt("return",{location:l,value:null});case 14:if(null!==(u=this.identifyPixelLocation(l,c,null))){e.next=17;break}return e.abrupt("return",{location:l,value:null});case 17:return f=u.row,p=u.col,d=u.rowOffset,b=u.colOffset,y=je(this.url,r.sliceId),m="".concat(c,"/").concat(f,"/").concat(p),g=Ie(y,null,m),Object(h.g)(g)||(g=this.fetchRawTile(c,f,p,r),xe(y,null,m,g)),e.next=22,g;case 22:if((v=e.sent)&&v.pixels&&v.pixels.length>0){e.next=25;break}return e.abrupt("return",{location:l,value:null});case 25:return j=d*this.rasterInfo.storageInfo.blockHeight+b,e.abrupt("return",{location:l,value:!v.mask||v.mask[j]?v.pixels.map((function(e){return e[j]})):null,pyramidLevel:c});case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPixels",value:function(){var e=Object(i.a)(n.a.mark((function e(t,r,a){var i,o,s,l,c,u,f,p,d,b,y,m,g,v,j,I,x,M,w,O,k,A,C,T,S,D,R,L=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=L.length>3&&void 0!==L[3]?L[3]:{},o=t.clone().normalize(),t=o[0],s=this.rasterInfo.spatialReference,l=!t.spatialReference.equals(s),c=i.datumTransformation,u=new K.a({x:(t.xmax-t.xmin)/r,y:(t.ymax-t.ymin)/a,spatialReference:t.spatialReference}),f=i.srcResolution||(l?fe(u,s,t,c):u)){e.next=6;break}return e.abrupt("return",null);case 6:if(p=ye(f,this.rasterInfo,this.ioConfig.sampling),d=p.pyramidLevel,b=p.pyramidResolution,!p.excessiveReading){e.next=9;break}return e.abrupt("return",null);case 9:if(y=this.rasterInfo.storageInfo,m=l?he(t,s,c):t,(g=Object(h.m)(this.rasterInfo.transform))&&(m=g.inverseTransform(m)),null!=m){e.next=14;break}return e.abrupt("return",null);case 14:if(v={x:Math.floor((m.xmin-y.origin.x)/b.x+.1),y:Math.floor((y.origin.y-m.ymax)/b.y+.1)},j=Math.ceil((m.xmax-m.xmin)/b.x-.1),I=Math.ceil((m.ymax-m.ymin)/b.y-.1),!(j/r>8||I/a>8)){e.next=17;break}return e.abrupt("return",null);case 17:return e.next=19,this.fetchRawPixels(d,v,{width:j,height:I},i);case 19:if(x=e.sent){e.next=22;break}return e.abrupt("return",null);case 22:if(M=d>0?y.pyramidBlockWidth:y.blockWidth,w=d>0?y.pyramidBlockHeight:y.blockHeight,l||1!==x.pixelBlocks.length||M!==r||w!==a||f.x!==u.x||f.y!==u.y){e.next=25;break}return e.abrupt("return",{extent:t,srcExtent:m,pixelBlock:x.pixelBlocks[0],transformGrid:null});case 25:if(O=be(t,x.extent,u,c,g),A=!i.requestRawData,C={rows:O.spacing[0],cols:O.spacing[1]},T=x.pixelBlocks,S=x.mosaicSize,D=x.isPartiallyFilled,!this.rasterJobHandler){e.next=33;break}return e.next=30,this.rasterJobHandler.mosaicAndTransform({srcPixelBlocks:T,srcMosaicSize:S,destDimension:A?{width:r,height:a}:null,coefs:A?O.coefficients:null,sampleSpacing:A?C:null,interpolation:i.interpolation},i);case 30:k=e.sent,e.next=35;break;case 33:R=Object(ae.i)(T,S),k=A?Object(ae.a)(R,{width:r,height:a},O.coefficients,C,i.interpolation):R;case 35:return e.abrupt("return",{srcExtent:m,pixelBlock:k,transformGrid:O,extent:t,isPartiallyFilled:D});case 36:case"end":return e.stop()}}),e,this)})));return function(t,r,a){return e.apply(this,arguments)}}()},{key:"fetchRawPixels",value:function(){var e=Object(i.a)(n.a.mark((function e(t,r,a,i){var o,s,l,c,u,f,p,d,h,b,y,m,g,v,j,I,x,M,O,k,A,C,T,S,D,R,L,N,B,z;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=this.rasterInfo.storageInfo,s=o.origin,l=o.blockBoundary,c=t>0?this.rasterInfo.storageInfo.pyramidBlockWidth:this.rasterInfo.storageInfo.blockWidth,u=t>0?this.rasterInfo.storageInfo.pyramidBlockHeight:this.rasterInfo.storageInfo.blockHeight,f=r.x,p=r.y,d=a.width,h=a.height,i.buffer&&(f-=i.buffer.cols,p-=i.buffer.rows,d+=2*i.buffer.cols,h+=2*i.buffer.rows),b=Math.floor(f/c),y=Math.floor(p/u),m=Math.floor((f+d-1)/c),g=Math.floor((p+h-1)/u),v=l[t]){e.next=6;break}return e.abrupt("return",null);case 6:if(j=v.minRow,I=v.minCol,x=v.maxCol,M=v.maxRow,!(g<j||m<I||y>M||b>x)){e.next=9;break}return e.abrupt("return",null);case 9:for(O=[],A=!1,C=y;C<=g;C++)for(T=b;T<=m;T++)C>=j&&T>=I&&M>=C&&x>=T?(k=this._fetchRawTile(t,C,T,i),this.ioConfig.allowPartialFill&&(k=Object(w.c)((function(e){k.then((function(t){return e(t)})).catch((function(){A=!0,e(null)}))}))),O.push(k)):O.push(null);if(0!==O.length){e.next=14;break}return e.abrupt("return",null);case 14:return e.next=16,Object(w.b)(O);case 16:return S=e.sent,D={height:(g-y+1)*c,width:(m-b+1)*u},R=this.rasterInfo,L=R.nativePixelSize,N=R.spatialReference,B=L.x*Math.pow(2,t),z=L.y*Math.pow(2,t),e.abrupt("return",{extent:new E.a({xmin:s.x+b*c*B,xmax:s.x+(m+1)*c*B,ymin:s.y-(g+1)*u*z,ymax:s.y-y*u*z,spatialReference:N}),pixelBlocks:S,mosaicSize:D,isPartiallyFilled:A});case 24:case"end":return e.stop()}}),e,this)})));return function(t,r,a,n){return e.apply(this,arguments)}}()},{key:"fetchRawTile",value:function(){var e=Object(i.a)(n.a.mark((function e(t,r,a,i){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new x.a("BaseRaster:read-not-implemented","fetchRawTile() is not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t,r,a,n){return e.apply(this,arguments)}}()},{key:"computeExtent",value:function(e){return he(this.rasterInfo.extent,e)}},{key:"decodePixelBlock",value:function(e,t){return!this.rasterJobHandler||t.useCanvas?Object(re.a)(e,t):this.rasterJobHandler.decode({data:e,options:t})}},{key:"request",value:function(){var e=Object(i.a)(n.a.mark((function e(t,r,a){var i,s,l,c,u,f,p;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=this.ioConfig.customFetchParameters,c=r.range,u=r.query,f=r.headers,a=null!=(i=null!=(s=a)?s:r.retryCount)?i:this.ioConfig.retryCount,p=c?{Range:"bytes=".concat(c.from,"-").concat(c.to)}:null,e.prev=3,e.next=6,Object(_.default)(t,Object(o.a)(Object(o.a)({},r),{},{query:Object(o.a)(Object(o.a)({},u),l),headers:Object(o.a)(Object(o.a)({},f),p)}));case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(a>0)){e.next=13;break}return e.abrupt("return",(a--,this.request(t,r,a)));case 13:throw e.t0;case 14:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t,r,a){return e.apply(this,arguments)}}()},{key:"getSliceIndex",value:function(e){var t=this,r=this.rasterInfo.multidimensionalInfo;if(!Object(h.g)(r)||null==e||!e.length)return null;for(var a=0,n=e[0].variableName,i=function(i){var o=r.variables[i],s=o.dimensions;if(o.name!==n)return a+=s.map((function(e){return t._getDimensionValuesCount(e)})).reduce((function(e,t){return e+t})),"break";for(var l=s.map((function(e){return t._getDimensionValuesCount(e)})),c=s.length,u=function(r){var n=e.filter((function(e){return e.dimensionName===s[r].name}))[0];if(null==n)return{v:{v:null}};var i=Array.isArray(n.values[0])?n.values[0][0]:n.values[0],o=t._getIndexFromDimensions(i,s[r]);if(-1===o)return{v:{v:null}};l.shift(),a+=r===c-1?o:o*l.reduce((function(e,t){return e+t}))},f=0;f<c;f++){var p=u(f);if("object"===typeof p)return p.v}},o=0;o<r.variables.length;o++){var s=i(o);if("break"===s)break;if("object"===typeof s)return s.v}return a}},{key:"updateTileInfo",value:function(){var e=this.rasterInfo,t=e.storageInfo,r=e.spatialReference,a=e.extent,n=e.pixelSize;if(!t.tileInfo){for(var i=[],o=t.maximumPyramidLevel||0,s=Math.max(n.x,n.y),l=1/.0254*96*s,c=0;c<=o;c++)i.push({level:o-c,resolution:s,scale:l}),s*=2,l*=2;var u=new K.a({x:a.xmin,y:a.ymax,spatialReference:r});t.tileInfo=new J.a({origin:u,size:[t.blockWidth,t.blockHeight],spatialReference:r,lods:i}),t.isVirtualTileInfo=!0}}},{key:"createRemoteDatasetStorageInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,a=arguments.length>3?arguments[3]:void 0,n=e.width,i=e.height,o=e.nativeExtent,s=e.pixelSize,l=e.spatialReference,c=new K.a({x:o.xmin,y:o.ymax,spatialReference:l});null==a&&(a=Math.max(0,Math.round(Math.log(Math.max(n,i))/Math.LN2-8)));var u=this._computeBlockBoundary(o,s,a,512,512);e.storageInfo=new ee({blockWidth:t,blockHeight:r,pyramidBlockWidth:t,pyramidBlockHeight:r,origin:c,firstPyramidLevel:1,maximumPyramidLevel:a,blockBoundary:u})}},{key:"computeBestPyramidLevelForLocation",value:function(){var e=Object(i.a)(n.a.mark((function e(t){var r=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"identifyPixelLocation",value:function(e,t,r){var a=this.rasterInfo,n=a.spatialReference,i=a.pixelSize,o=a.extent,s=this.rasterInfo.storageInfo,l=s.blockWidth,c=s.blockHeight,u=s.maximumPyramidLevel,f=s.pyramidScalingFactor,p=s.origin,d=de(e,n,r);if(!o.intersects(d))return null;if(t<0||t>u)return null;var h=Math.pow(f,t),b=h*i.x,y=h*i.y,m=(p.y-d.y)/y/c,g=(d.x-p.x)/b/l,v=Math.min(c-1,Math.floor((m-Math.floor(m))*c)),j=Math.min(l-1,Math.floor((g-Math.floor(g))*l));return{pyramidLevel:t,row:Math.floor(m),col:Math.floor(g),rowOffset:v,colOffset:j,srcLocation:d}}},{key:"getTileExtent",value:function(e,t,r,a){var n=a.origin,i=a.spatialReference,o=a.size[0],s=a.size[1],l=n.x+r*o*e.x,c=l+o*e.x,u=n.y-t*s*e.y,f=u-s*e.y;return new E.a({xmin:l,xmax:c,ymin:f,ymax:u,spatialReference:i})}},{key:"_computeBlockBoundary",value:function(e,t,r,a,n){var i=t.x,o=t.y,s=e.xmin,l=e.ymax,c=[{minCol:Math.floor((e.xmin-s+.1*i)/a/i),maxCol:Math.floor((e.xmax-s-.1*i)/a/i),minRow:Math.floor((l-e.ymax+.1*o)/n/o),maxRow:Math.floor((l-e.ymin-.1*o)/n/o)}];if(r>0)for(var u=0;u<r;u++)i*=2,o*=2,c.push({minCol:Math.floor((e.xmin-s+.1*i)/a/i),maxCol:Math.floor((e.xmax-s-.1*i)/a/i),minRow:Math.floor((l-e.ymax+.1*o)/n/i),maxRow:Math.floor((l-e.ymin-.1*o)/n/i)});return c}},{key:"_fetchRawTile",value:function(e,t,r,a){var n=this.rasterInfo.storageInfo.blockBoundary[e];if(!n)return Object(w.s)(null);var i=n.minRow,s=n.minCol,l=n.maxCol,c=n.maxRow;if(t<i||r<s||t>c||r>l)return Object(w.s)(null);var u=je(this.url,a.sliceId),f="".concat(e,"/").concat(t,"/").concat(r),p=Ie(u,a.registryId,f);if(!Object(h.g)(p)){var d=Object(w.d)();p=this.fetchRawTile(e,t,r,Object(o.a)(Object(o.a)({},a),{},{signal:d.signal})),xe(u,a.registryId,f,p,d),p.catch((function(){!function(e,t,r){if(ge.has(e)){var a=ge.get(e);null!=a[t]?a[t].cache.delete(r):ve.deleteBlock(e,r)}else null==t&&ve.deleteBlock(e,r)}(u,a.registryId,f)}))}return a.signal&&Object(w.p)(a,(function(){!function(e,t,r){if(!ge.has(e))return null==t?ve.decreaseRefCount(e,r):0;var a=ge.get(e);if(null==a[t])return ve.decreaseRefCount(e,r);var n=a[t].cache;if(n.has(r)){var i=n.get(r);if(i.refCount--,0===i.refCount){n.delete(r);for(var o=0;o<a.length;o++)a[o]&&a[o].cache.has(r)&&a[o].cache.delete(r);i.controller&&i.controller.abort()}return i.refCount}}(u,a.registryId,f)})),p}},{key:"_getIndexFromDimensions",value:function(e,t){var r=t.extent,a=t.interval,n=t.unit,i=t.values;if(null!=i&&i.length)return Array.isArray(i[0])?i.findIndex((function(t){return t[0]<=e&&t[1]>=e})):i.indexOf(e);if(e>r[1])return-1;var o=r[0],s=-1;if("ISO8601"===n){var l;switch((null==(l=t.intervalUnit)?void 0:l.toLowerCase())||"seconds"){case"seconds":s=Math.round((e-o)/1e3/a);break;case"minutes":s=Math.round((e-o)/6e4/a);break;case"hours":s=Math.round((e-o)/36e5/a);break;case"days":s=Math.round((e-o)/864e5/a);break;case"years":s=Math.round((new Date(e).getUTCFullYear()-new Date(o).getUTCFullYear())/a);break;case"decades":s=Math.round((new Date(e).getUTCFullYear()-new Date(o).getUTCFullYear())/10/a)}return s}return Math.round((e-o)/a)}},{key:"_getDimensionValuesCount",value:function(e){var t=e.extent,r=e.interval,a=e.unit,n=e.values,i=(null==n?void 0:n.length)||0;if(i)return i;var o=t[0];if(0===i&&"ISO8601"===a){var s;switch((null==(s=e.intervalUnit)?void 0:s.toLowerCase())||"seconds"){case"seconds":i=Math.round((t[1]-t[0])/1e3/r);break;case"minutes":i=Math.round((t[1]-t[0])/6e4/r);break;case"hours":i=Math.round((t[1]-t[0])/36e5/r);break;case"days":i=Math.round((t[1]-t[0])/864e5/r);break;case"years":i=Math.round((new Date(t[1]).getUTCFullYear()-new Date(o).getUTCFullYear())/r);break;case"decades":i=Math.round((new Date(t[1]).getUTCFullYear()-new Date(o).getUTCFullYear())/10/r)}return i}return Math.round((t[1]-t[0])/r)}},{key:"url",set:function(e){this._set("url",Object(Z.f)(e,b.a.getLogger(this.declaredClass)))}}]),r}(Object(te.b)(Y.a));Object(d.a)([Object(m.b)(C.j)],Me.prototype,"url",null),Object(d.a)([Object(m.b)({type:String,json:{write:!0}})],Me.prototype,"datasetName",void 0),Object(d.a)([Object(m.b)({type:String,json:{write:!0}})],Me.prototype,"datasetFormat",void 0),Object(d.a)([Object(m.b)()],Me.prototype,"rasterInfo",void 0),Object(d.a)([Object(m.b)()],Me.prototype,"ioConfig",void 0),Object(d.a)([Object(m.b)()],Me.prototype,"sourceJSON",void 0);var we=Me=Object(d.a)([Object(I.a)("esri.layers.support.rasterDatasets.BaseRaster")],Me),Oe=r(1063),ke=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,null,[{key:"parse",value:function(e){var t=new DataView(e),r=3&t.getUint8(0);if(3!==r)return{header:{version:r},recordSet:null};var a,n=t.getUint32(4,!0),i=t.getUint16(8,!0),o=t.getUint16(10,!0),s={version:r,recordCount:n,headerByteCount:i,recordByteCount:o},l=32,c=[],u=[];if(3===r){for(;13!==t.getUint8(l);)a=String.fromCharCode(t.getUint8(l+11)).trim(),c.push({name:Object(Oe.a)(new Uint8Array(e,l,11)),type:a,typeName:["String","Date","Double","Boolean","String","Integer"][["C","D","F","L","M","N"].indexOf(a)],length:t.getUint8(l+16)}),l+=32;if(l+=1,c.length>0)for(var f=function(){var r=[];32===t.getUint8(l)?(l+=1,c.forEach((function(t){if("C"===t.type)r.push(Object(Oe.a)(new Uint8Array(e,l,t.length)).trim());else if("N"===t.type)r.push(parseInt(String.fromCharCode.apply(null,new Uint8Array(e,l,t.length)).trim(),10));else if("F"===t.type)r.push(parseFloat(String.fromCharCode.apply(null,new Uint8Array(e,l,t.length)).trim()));else if("D"===t.type){var a=String.fromCharCode.apply(null,new Uint8Array(e,l,t.length)).trim();r.push(new Date(parseInt(a.substring(0,4),10),parseInt(a.substring(4,6),10)-1,parseInt(a.substring(6,8),10)))}l+=t.length})),u.push(r)):l+=o};u.length<n&&e.byteLength-l>o;)f()}var p=function(e){var t=e.fields,r=e.records,a=t.some((function(e){return"oid"===e.name.toLowerCase()}))?"OBJECTID":"OID",n=[{name:a,type:"esriFieldTypeOID",alias:"OID"}].concat(t.map((function(e){return{name:e.name,type:"esriFieldType"+e.typeName,alias:e.name}}))),i=n.map((function(e){return e.name})),o=[],s=0,l=0;return r.forEach((function(e){var t={};for(t[a]=s++,l=1;l<i.length;l++)t[i[l]]=e[l-1];o.push({attributes:t})})),{displayFieldName:"",fields:n,features:o}}({fields:c,records:u});return{header:s,fields:c,records:u,recordSet:p}}},{key:"supportedVersions",get:function(){return[5]}}]),e}(),Ae=new Map;Ae.set("int16","esriFieldTypeSmallInteger"),Ae.set("int32","esriFieldTypeInteger"),Ae.set("int64","esriFieldTypeInteger"),Ae.set("float32","esriFieldTypeSingle"),Ae.set("float64","esriFieldTypeDouble"),Ae.set("text","esriFieldTypeString");var Ce=function(e){Object(f.a)(r,e);var t=Object(p.a)(r);function r(){var e;return Object(s.a)(this,r),(e=t.apply(this,arguments)).storageInfo=null,e.datasetFormat="CRF",e}return Object(l.a)(r,[{key:"open",value:function(){var e=Object(i.a)(n.a.mark((function e(t){var r,a,i,o,s,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return e.next=4,this.request(this.url+"/conf.json",{signal:null==t?void 0:t.signal});case 4:if(r=e.sent,a=r.data,this._validateHeader(a)){e.next=8;break}throw new x.a("cloudraster:open","Invalid or unsupported conf.json.");case 8:if(this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1),i=this._parseHeader(a),o=i.storageInfo,"thematic"!==(s=i.rasterInfo).dataType){e.next=15;break}return e.next=13,this._fetchAuxiliaryInformation();case 13:l=e.sent,s.attributeTable=l;case 15:this._set("storageInfo",o),this._set("rasterInfo",s),this.ioConfig.retryCount=this.ioConfig.retryCount||0;case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchRawTile",value:function(){var e=Object(i.a)(n.a.mark((function e(t,r,a){var i,o,s,l,c,u,f,p,d=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=d.length>3&&void 0!==d[3]?d[3]:{},!((o=this.rasterInfo.storageInfo.maximumPyramidLevel-t)<0)){e.next=4;break}return e.abrupt("return",null);case 4:return s=this._buildCacheFilePath(o,r,a,i.multidimensionalDefinition),l=this._getIndexRecordFromBundle(r,a),e.next=8,this.request(s,{range:{from:0,to:this.storageInfo.headerSize-1},responseType:"array-buffer",signal:i.signal});case 8:if(c=e.sent){e.next=11;break}return e.abrupt("return",null);case 11:if(u=new Uint8Array(c.data),0!==(f=this._getTileEndAndContentType(u,l)).recordSize){e.next=14;break}return e.abrupt("return",null);case 14:return e.next=16,this.request(s,{range:{from:f.position,to:f.position+f.recordSize},responseType:"array-buffer",signal:i.signal});case 16:return p=e.sent,e.abrupt("return",p?this.decodePixelBlock(p.data,{width:this.rasterInfo.storageInfo.tileInfo.size[0],height:this.rasterInfo.storageInfo.tileInfo.size[1],planes:null,pixelType:null}):null);case 18:case"end":return e.stop()}}),e,this)})));return function(t,r,a){return e.apply(this,arguments)}}()},{key:"_validateHeader",value:function(e){return e&&"RasterInfo"===e.type&&!["origin","extent","geodataXform","LODInfos","blockWidth","blockHeight","bandCount","pixelType","pixelSizeX","pixelSizeY","format","packetSize"].some((function(t){return!e[t]}))}},{key:"_parseHeader",value:function(e){var t,r,a,n,i,o=["u1","u2","u4","u8","s8","u16","s16","u32","s32","f32","f64"][e.pixelType],s=e.bandCount,l=e.histograms,c=e.colormap,u=e.blockWidth,f=e.blockHeight,p=e.firstPyramidLevel,d=e.maximumPyramidLevel,h=e.statistics&&e.statistics.map((function(e){return{min:e.min,max:e.max,avg:e.mean,stddev:e.standardDeviation,median:e.median,mode:e.mode}})),b=new U.a(e.extent.spatialReference||e.geodataXform.spatialReference),y=new E.a({xmin:e.extent.xmin,ymin:e.extent.ymin,xmax:e.extent.xmax,ymax:e.extent.ymax,spatialReference:b}),m=new K.a({x:e.pixelSizeX,y:e.pixelSizeY,spatialReference:b}),g=null!=(t=e.properties)?t:{},v=e.format.toLowerCase().replace("cache/",""),j=new K.a(e.origin.x,e.origin.y,b);if(c&&c.colors)for(r=[],a=0;a<c.colors.length;a++)n=c.colors[a],i=c.values?c.values[a]:a,r.push([i,255&n,n<<16>>>24,n<<8>>>24,n>>>24]);var I=e.LODInfos,x=[];for(a=0;a<I.levels.length;a++)x.push({level:I.levels[a],resolution:I.resolutions[a],scale:96/.0254*I.resolutions[a]});var M=new J.a({dpi:96,lods:x,format:v,origin:j,size:[u,f],spatialReference:b}),w={recordSize:8,packetSize:e.packetSize,headerSize:e.packetSize*e.packetSize*8+64},O=Math.round((y.xmax-y.xmin)/m.x),k=Math.round((y.ymax-y.ymin)/m.y),A=[{maxCol:Math.ceil(O/u)-1,maxRow:Math.ceil(k/f)-1,minCol:0,minRow:0}],C=2;if(d>0)for(a=0;a<d;a++)A.push({maxCol:Math.ceil(O/C/u)-1,maxRow:Math.ceil(k/C/f)-1,minCol:0,minRow:0}),C*=2;var T=e.mdInfo;return{storageInfo:w,rasterInfo:new Q.a({width:O,height:k,pixelType:o,bandCount:s,extent:y,spatialReference:b,pixelSize:m,keyProperties:g,statistics:h,histograms:l,multidimensionalInfo:T,colormap:r,storageInfo:new ee({blockWidth:u,blockHeight:f,pyramidBlockWidth:u,pyramidBlockHeight:f,origin:j,tileInfo:M,firstPyramidLevel:p,maximumPyramidLevel:d,blockBoundary:A})})}}},{key:"_fetchAuxiliaryInformation",value:function(){var e=Object(i.a)(n.a.mark((function e(t){var r,a,i,o,s,l,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.request(this.url+"/conf.vat.json",{signal:t}).then((function(e){return e.data})).catch((function(){return null})),a=this.request(this.url+"/conf.vat.dbf",{responseType:"array-buffer",signal:t}).then((function(e){return e.data})).catch((function(){return null})),e.next=4,Object(w.b)([r,a]);case 4:return(i=e.sent)[0]&&(s=i[0].fields,l=i[0].values,s&&l&&(s=s.map((function(e){return{type:"OID"===e.name?"esriFieldTypeOID":Ae.get(e.type),name:e.name,alias:e.alias||e.name}})),c=l.map((function(e){return{attributes:e}})),s&&l&&(o={fields:s,features:c}))),!o&&i[1]&&(o=ke.parse(i[1]).recordSet),e.abrupt("return",X.default.fromJSON(o));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_buildCacheFilePath",value:function(e,t,r,a){var n=this.storageInfo.packetSize,i=Math.floor(t/n)*n,o=Math.floor(r/n)*n,s="R"+this._toHexString4(i)+"C"+this._toHexString4(o),l="L";l+=e>=10?e.toString():"0"+e.toString();var c=this.rasterInfo.multidimensionalInfo,u=null==a?void 0:a[0];if(!Object(h.g)(c)||!u)return"".concat(this.url,"/_alllayers/").concat(l,"/").concat(s,".bundle");for(var f=c.variables.filter((function(e){return e.name===u.variableName}))[0].dimensions[0].values.indexOf(u.values[0]).toString(16),p=4-f.length,d=0;d<p;d++)f="0"+f;return f="S"+f,"".concat(this.url,"/_alllayers/").concat(u.variableName,"/").concat(f,"/").concat(l,"/").concat(s,".bundle")}},{key:"_getIndexRecordFromBundle",value:function(e,t){var r=this.storageInfo.packetSize,a=r*(e%r)+t%r;if(a<0)throw"Invalid level / row / col";return 20+a*this.storageInfo.recordSize+44}},{key:"_getTileEndAndContentType",value:function(e,t){var r,a=e.subarray(t,t+8),n=0;for(r=0;r<5;r++)n|=(255&a[r])<<8*r;var i=0xffffffffff&n;for(n=0,r=5;r<8;r++)n|=(255&a[r])<<8*(r-5);return{position:i,recordSize:0xffffffffff&n}}},{key:"_toHexString4",value:function(e){var t=e.toString(16);if(4!==t.length)for(var r=4-t.length;r-- >0;)t="0"+t;return t}}]),r}(we);Object(d.a)([Object(m.b)({readOnly:!0})],Ce.prototype,"storageInfo",void 0),Object(d.a)([Object(m.b)({type:String,json:{write:!0}})],Ce.prototype,"datasetFormat",void 0);var Te=Ce=Object(d.a)([Object(I.a)("esri.layers.support.rasterDatasets.CloudRaster")],Ce),Se=function(e){Object(f.a)(r,e);var t=Object(p.a)(r);function r(){var e;return Object(s.a)(this,r),(e=t.apply(this,arguments)).datasetFormat="MEMORY",e}return Object(l.a)(r,[{key:"open",value:function(){var e=Object(i.a)(n.a.mark((function e(t){var r,a,i,o,s,l,c,u,f,p,d,h,b,y,m,g;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return a=this.data,i=a.pixelBlock,o=a.statistics,s=a.histograms,l=a.name,c=a.keyProperties,u=a.nativeExtent,f=a.transform,p=i.width,d=i.height,h=i.pixelType,b=this.data.extent||new E.a({xmin:-.5,ymin:.5,xmax:p-.5,ymax:d-.5,spatialReference:new U.a({wkid:3857})}),y=null!=(r=this.data.isPseudoSpatialReference)?r:!this.data.extent,m={x:b.width/p,y:b.height/d},g=new Q.a({width:p,height:d,pixelType:h,extent:b,nativeExtent:u,transform:f,pixelSize:m,spatialReference:b.spatialReference,bandCount:3,keyProperties:c||{},statistics:o,isPseudoSpatialReference:y,histograms:s}),this.createRemoteDatasetStorageInfo(g,512,512),this._set("rasterInfo",g),this.updateTileInfo(),e.next=8,this._buildInMemoryRaster(i,{width:512,height:512},t);case 8:this.datasetName=l,this.url="/InMemory/"+l;case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchRawTile",value:function(e,t,r){var a=this._pixelBlockTiles.get("".concat(e,"/").concat(t,"/").concat(r));return Object(w.s)(a)}},{key:"_buildInMemoryRaster",value:function(){var e=Object(i.a)(n.a.mark((function e(t,r,a){var i,o,s,l,c,u,f,p;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.rasterInfo.storageInfo.maximumPyramidLevel,o=this.rasterJobHandler?this.rasterJobHandler.split({pixelBlock:t,tileSize:r,maximumPyramidLevel:i},a):Object(w.s)(Object(ae.l)(t,r,i)),s=Object(h.g)(this.rasterInfo.statistics),l=Object(h.g)(this.rasterInfo.histograms),c=s&&l?Object(w.s)({statistics:null,histograms:null}):this.rasterJobHandler?this.rasterJobHandler.estimateStatisticsHistograms({pixelBlock:t},a):Object(w.s)(Object(ae.f)(t)),e.next=7,Object(w.i)([o,c]);case 7:if((u=e.sent)[0].value||!u[1].value){e.next=10;break}throw new x.a("inmemory-raster:open","failed to build in memory raster");case 10:this._pixelBlockTiles=u[0].value,s||(this.rasterInfo.statistics=null==(f=u[1].value)?void 0:f.statistics),l&&(this.rasterInfo.histograms=null==(p=u[1].value)?void 0:p.histograms);case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,a){return e.apply(this,arguments)}}()}]),r}(we);Object(d.a)([Object(m.b)({type:String,json:{write:!0}})],Se.prototype,"datasetFormat",void 0),Object(d.a)([Object(m.b)()],Se.prototype,"data",void 0);var De=Se=Object(d.a)([Object(I.a)("esri.layers.support.rasterDatasets.InMemoryRaster")],Se);function Re(e,t,r){var a=t.x,n=t.y;if(r<2)return{x:e[0]+a*e[2]+n*e[4],y:e[1]+a*e[3]+n*e[5]};if(2===r){var i=a*a,o=n*n,s=a*n;return{x:e[0]+a*e[2]+n*e[4]+i*e[6]+s*e[8]+o*e[10],y:e[1]+a*e[3]+n*e[5]+i*e[7]+s*e[9]+o*e[11]}}var l=a*a,c=n*n,u=a*n,f=l*a,p=l*n,d=a*c,h=n*c;return{x:e[0]+a*e[2]+n*e[4]+l*e[6]+u*e[8]+c*e[10]+f*e[12]+p*e[14]+d*e[16]+h*e[18],y:e[1]+a*e[3]+n*e[5]+l*e[7]+u*e[9]+c*e[11]+f*e[13]+p*e[15]+d*e[17]+h*e[19]}}function Le(e,t,r){var a=t.xmin,n=t.ymin,i=t.xmax,o=t.ymax,s=t.spatialReference,l=[];if(r<2)l.push({x:a,y:o}),l.push({x:i,y:o}),l.push({x:a,y:n}),l.push({x:i,y:n});else{for(var c=10,u=0;u<c;u++)l.push({x:a,y:n+(o-n)*u/(c-1)}),l.push({x:i,y:n+(o-n)*u/(c-1)});c=8;for(var f=1;f<=c;f++)l.push({x:a+(i-a)*f/c,y:n}),l.push({x:a+(i-a)*f/c,y:o})}var p=(l=l.map((function(t){return Re(e,t,r)}))).map((function(e){return e.x})),d=l.map((function(e){return e.y}));return new E.a({xmin:Math.min.apply(null,p),xmax:Math.max.apply(null,p),ymin:Math.min.apply(null,d),ymax:Math.max.apply(null,d),spatialReference:s})}var Ne=function(e){Object(f.a)(r,e);var t=Object(p.a)(r);function r(){var e;return Object(s.a)(this,r),(e=t.apply(this,arguments)).polynomialOrder=1,e}return Object(l.a)(r,[{key:"forwardTransform",value:function(e){if("point"===e.type){var t=Re(this.forwardCoefficients,e,this.polynomialOrder);return new K.a({x:t.x,y:t.y,spatialReference:e.spatialReference})}return Le(this.forwardCoefficients,e,this.polynomialOrder)}},{key:"inverseTransform",value:function(e){if("point"===e.type){var t=Re(this.inverseCoefficients,e,this.polynomialOrder);return new K.a({x:t.x,y:t.y,spatialReference:e.spatialReference})}return Le(this.inverseCoefficients,e,this.polynomialOrder)}},{key:"inverseCoefficients",get:function(){var e=this._get("inverseCoefficients"),t=this._get("forwardCoefficients");return!e&&t&&this.polynomialOrder<2&&(e=function(e){var t=Object(ne.a)(e,6),r=t[0],a=t[1],n=t[2],i=t[3],o=t[4],s=t[5],l=n*s-o*i,c=o*i-n*s;return[(o*a-r*s)/l,(n*a-r*i)/c,s/l,i/c,-o/l,-n/c]}(t)),e},set:function(e){this._set("inverseCoefficients",e)}}]),r}(Y.a);Object(d.a)([Object(m.b)({json:{write:!0}})],Ne.prototype,"polynomialOrder",void 0),Object(d.a)([Object(m.b)({json:{write:!0}})],Ne.prototype,"forwardCoefficients",void 0),Object(d.a)([Object(m.b)({dependsOn:["forwardCoefficients"],json:{write:!0}})],Ne.prototype,"inverseCoefficients",null);var Be=Ne=Object(d.a)([Object(I.a)("esri.layers.support.rasterTransforms.PolynomialTransform")],Ne);function ze(e,t){if(!e||!t)return[];var r=t;t.indexOf("/")>-1?(r=t.slice(0,t.indexOf("/")),t=t.slice(t.indexOf("/")+1)):t="";var a=[];if(t){for(var n=ze(e,r),i=0;i<n.length;i++)ze(n[i],t).forEach((function(e){return a.push(e)}));return a}var o=e.getElementsByTagNameNS("*",r);if(!o||0===o.length)return[];for(var s=0;s<o.length;s++)a.push(o[s]||o.item[s]);return a}function He(e,t){if(!e||!t)return null;var r=t;t.indexOf("/")>-1?(r=t.slice(0,t.indexOf("/")),t=t.slice(t.indexOf("/")+1)):t="";var a=ze(e,r);return a.length>0?t?He(a[0],t):a[0]:null}function Pe(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=r?He(e,r):e;return a?(t=a.textContent||a.nodeValue)?t.trim():null:null}function Ue(e,t){return function(e,t){for(var r,a=ze(e,t),n=[],i=0;i<a.length;i++)(r=a[i].textContent||a[i].nodeValue)&&(""!==(r=r.trim())&&n.push(r));return n}(e,t).map((function(e){return Number(e)}))}function Ee(e,t){var r=Pe(e,t);return Number(r)}function _e(e,t){var r,a=null==e||null==(r=e.nodeName)?void 0:r.toLowerCase(),n=t.toLowerCase();return a.slice(a.lastIndexOf(":")+1)===n}function Ze(e,t){if(!e||!t)return null;for(var r=[],a=0;a<e.length;a++)r.push(e[a]),r.push(t[a]);return r}function Je(e){if(!e)return null;var t=Number(e);if(!isNaN(t)&&0!==t)return new U.a({wkid:t});var r=e.replace(/\]/g,"[").replace(/\"/g,"").split("[").map((function(e){return e.trim()})).filter((function(e){return""!==e})),a=r[r.length-1].split(",");return"EPSG"!==a[0]||(t=Number(a[1]),isNaN(t)||0===t)?new U.a({wkt:e}):new U.a({wkid:t})}function Fe(e){var t;if("pamdataset"!==(null==e||null==(t=e.documentElement.tagName)?void 0:t.toLowerCase()))return{};var r={spatialReference:null,transform:null,metadata:{},rasterBands:[],statistics:null,histograms:null};e.documentElement.childNodes.forEach((function(e){if(1===e.nodeType)if(_e(e,"SRS")){if(!r.spatialReference){var t=Pe(e);r.spatialReference=Je(t)}}else if(_e(e,"Metadata"))if("xml:ESRI"===e.getAttribute("domain")){var a=function(e){var t,r=He(e,"GeodataXform"),a=Je(Ee(r,"SpatialReference/WKID")||Pe(r,"SpatialReference/WKT"));if("typens:PolynomialXform"!==r.getAttribute("xsi:type"))return{spatialReference:a,transform:null};var n=null!=(t=Ee(r,"PolynomialOrder"))?t:1,i=Ue(r,"CoeffX/Double"),o=Ue(r,"CoeffY/Double"),s=Ue(r,"InverseCoeffX/Double"),l=Ue(r,"InverseCoeffY/Double"),c=Ze(i,o),u=Ze(s,l);return{spatialReference:a,transform:new Be({polynomialOrder:n,forwardCoefficients:c,inverseCoefficients:u})}}(e),n=a.spatialReference,i=a.transform;r.transform=i,r.spatialReference||(r.spatialReference=n)}else ze(e,"MDI").forEach((function(e){return r.metadata[e.getAttribute("key")]=Pe(e)}));else if(_e(e,"PAMRasterBand")){var o=function(e){var t,r,a,n,i,o=Ee(e,"NoDataValue"),s=He(e,"Histograms/HistItem"),l=Ee(s,"HistMin"),c=Ee(s,"HistMax"),u=Ee(s,"BucketCount"),f=null==(t=Pe(s,"HistCounts"))?void 0:t.split("|").map((function(e){return Number(e)}));ze(e,"Metadata/MDI").forEach((function(e){var t,o=Number(null!=(t=e.textContent)?t:e.nodeValue);switch(e.getAttribute("key").toUpperCase()){case"STATISTICS_MINIMUM":r=o;break;case"STATISTICS_MAXIMUM":a=o;break;case"STATISTICS_MEAN":n=o;break;case"STATISTICS_STDDEV":i=o}}));var p=Ee(e,"Metadata/SourceBandIndex");return{noDataValue:o,histogram:null!=f&&f.length&&null!=r&&null!=a?{min:l,max:c,size:u||f.length,counts:f}:null,sourceBandIndex:p,statistics:null!=r&&null!=a?{min:r,max:a,avg:n,stddev:i}:null}}(e);null!=o.sourceBandIndex&&null==r.rasterBands[o.sourceBandIndex]?r.rasterBands[o.sourceBandIndex]=o:r.rasterBands.push(o)}}));var a=r.rasterBands;if(a){var n=!!a[0].statistics;r.statistics=n?a.map((function(e){return e.statistics})):null;var i=!!a[0].histogram;r.histograms=i?a.map((function(e){return e.histogram})):null}return r}var Ge=function(e){Object(f.a)(r,e);var t=Object(p.a)(r);function r(){return Object(s.a)(this,r),t.apply(this,arguments)}return Object(l.a)(r,[{key:"open",value:function(){var e=Object(i.a)(n.a.mark((function e(t){var r,a,i,o,s,l,c,u,f,p,d,h,b;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return e.next=4,this._fetchData(t);case 4:return r=e.sent,e.next=7,this._fetchAuxiliaryData(t);case 7:return a=e.sent,i=a.spatialReference,o=a.statistics,s=a.histograms,l=a.transform,(c=!i)&&(i=new U.a({wkid:3857})),null!=s&&s.length&&null==o&&(o=Object(ae.e)(s)),u=r.width,f=r.height,p=new E.a({xmin:-.5,ymin:.5-f,xmax:u-.5,ymax:.5,spatialReference:i}),d=l?l.forwardTransform(p):p,!0,l&&(h=l.forwardCoefficients,h&&0===h[1]&&0===h[2]&&(l=null,p=d)),b=new De({data:{extent:d,nativeExtent:p,transform:l,pixelBlock:r,statistics:o,histograms:s,keyProperties:{DateType:"Processed"},isPseudoSpatialReference:c}}),e.next=22,b.open();case 22:this._set("rasterInfo",b.rasterInfo),this._inMemoryRaster=b;case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchRawTile",value:function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this._inMemoryRaster.fetchRawTile(e,t,r,a)}},{key:"_fetchData",value:function(){var e=Object(i.a)(n.a.mark((function e(t){var r,a,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(this.url,{responseType:"array-buffer",signal:null==t?void 0:t.signal});case 2:if(r=e.sent,a=r.data,"JPG"===(i=Object(re.b)(a).toUpperCase())||"PNG"===i||"GIF"===i||"BMP"===i){e.next=7;break}throw new x.a("image-aux-raster:open","the data is not a supported format");case 7:return this._set("datasetFormat",i),e.next=10,this.decodePixelBlock(a,{format:"jpg",width:1,height:1,useCanvas:!0});case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_fetchAuxiliaryData",value:function(){var e=Object(i.a)(n.a.mark((function e(t){var r,a,i,o,s,l,c,u,f,p,d;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(h.m)(null==t?void 0:t.signal),o=null!=(r=this.ioConfig.skipExtensions)?r:[],s=o.indexOf("aux.xml")>-1?null:this.request(this.url+".aux.xml",{responseType:"xml",signal:i}),l=this.datasetFormat,c="JPG"===l?"jgw":"PNG"===l?"pgw":"BMP"===l?"bpw":null,u=o.indexOf(c)>-1?null:this.request(this.url.slice(0,this.url.lastIndexOf("."))+"."+c,{responseType:"text",signal:i}),e.next=8,Object(w.i)([s,u]);case 8:if(f=e.sent,null==i||!i.aborted){e.next=11;break}throw Object(w.e)();case 11:return(p=Fe(null==(a=f[0].value)?void 0:a.data)).transform||(d=f[1].value?f[1].value.data.split("\n").slice(0,6).map((function(e){return Number(e)})):null,p.transform=6===(null==d?void 0:d.length)?new Be({forwardCoefficients:[d[4],d[5],d[0],-d[1],d[2],-d[3]]}):null),e.abrupt("return",p);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(we);Object(d.a)([Object(m.b)({type:String,json:{write:!0}})],Ge.prototype,"datasetFormat",void 0);var We=Ge=Object(d.a)([Object(I.a)("esri.layers.support.rasterDatasets.ImageAuxRaster")],Ge),Ve=r(352),qe=r(205),Ke=function(e){Object(f.a)(r,e);var t=Object(p.a)(r);function r(){var e;return Object(s.a)(this,r),(e=t.apply(this,arguments))._levelOffset=0,e._slices=null,e._tilemapCache=null,e.datasetFormat="RasterTileServer",e}return Object(l.a)(r,[{key:"open",value:function(){var e=Object(i.a)(n.a.mark((function e(t){var r,a,i,o,s,l,c,u,f,p,d,b,y,m,g,v,j,I,w,O,k,A,C,T;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:if(r=t&&t.signal,!this.sourceJSON){e.next=7;break}e.t0={data:this.sourceJSON},e.next=10;break;case 7:return e.next=9,this.request(this.url,{query:{f:"json"},signal:r});case 9:e.t0=e.sent;case 10:if((a=e.t0).ssl&&(this.url=this.url.replace(/^http:/i,"https:")),i=a.data,this.sourceJSON=i,o=["jpg","jpeg","png","png8","png24","png32","mixed"],this.tileType=i.cacheType,null==this.tileType&&(o.indexOf(i.tileInfo.format.toLowerCase())>-1?this.tileType="Map":"lerc"===i.tileInfo.format.toLowerCase()?this.tileType="Elevation":this.tileType="Raster"),i){e.next=17;break}throw new x.a("imageserverraster:open","cannot initialize tiled image service, missing service info");case 17:if(i.tileInfo){e.next=19;break}throw new x.a("imageserverraster:open","use ImageryLayer to open non-tiled image services");case 19:return this.datasetName=i.name.slice(i.name.indexOf("/")+1),e.next=22,this._fetchRasterInfo({signal:r});case 22:if(s=e.sent,Object(h.g)(s)){e.next=25;break}throw new x.a("image-server-raster:open","cannot initialize image service");case 25:if(l="Map"===this.tileType?Object(Ve.a)(i.tileInfo,i):J.a.fromJSON(i.tileInfo),c=s.extent,u=s.pixelSize,f=.5/s.width*u.x,b=l.lodAt(Math.max.apply(null,l.lods.map((function(e){return e.level})))),"Map"!==this.tileType&&0!==i.maxScale&&("Raster"===this.tileType?(p=l.lods.filter((function(e){return e.resolution===u.x}))[0])||(p=l.lods[l.lods.length-1]):(p=l.lods.filter((function(e){return Math.abs(e.scale-i.maxScale)<f}))[0])||(p=l.lods.filter((function(e){return e.scale>i.maxScale})).sort((function(e,t){return e.scale>t.scale?1:-1}))[0]),u.x=u.y=p.resolution,s.width=Math.ceil((c.xmax-c.xmin)/u.x-.1),s.height=Math.ceil((c.ymax-c.ymin)/u.y-.1)),p||(p=b),y=l.lodAt(Math.min.apply(null,l.lods.map((function(e){return e.level})))),"Map"===this.tileType?this._levelOffset=l.lods[0].level:0!==i.minScale&&"Elevation"===this.tileType&&(d=l.lods.filter((function(e){return Math.abs(e.scale-i.minScale)<f}))[0],this._levelOffset=d.level-y.level),d||(d=y),m=Math.max(u.x,u.y),(Math.abs(u.x-u.y)>f||!l.lods.some((function(e){return Math.abs(e.resolution-m)<f})))&&(u.x=u.y=p.resolution,s.width=Math.ceil((c.xmax-c.xmin)/u.x-.1),s.height=Math.ceil((c.ymax-c.ymin)/u.y-.1)),g=p.level-d.level,v=Object(ne.a)(l.size,2),j=v[0],I=v[1],w=l.origin,O=u.x,k=u.y,A=[{minCol:Math.floor((c.xmin-w.x+.1*O)/j/O),maxCol:Math.floor((c.xmax-w.x-.1*O)/j/O),minRow:Math.floor((w.y-c.ymax+.1*k)/I/k),maxRow:Math.floor((w.y-c.ymin-.1*k)/I/k)}],g>0)for(C=0;C<g;C++)O*=2,k*=2,A.push({minCol:Math.floor((c.xmin-w.x+.1*O)/j/O),maxCol:Math.floor((c.xmax-w.x-.1*O)/j/O),minRow:Math.floor((w.y-c.ymax+.1*k)/I/O),maxRow:Math.floor((w.y-c.ymin-.1*k)/I/O)});s.storageInfo=new ee({blockWidth:l.size[0],blockHeight:l.size[1],pyramidBlockWidth:l.size[0],pyramidBlockHeight:l.size[1],compression:l.format,origin:l.origin,firstPyramidLevel:1,maximumPyramidLevel:g,tileInfo:l,blockBoundary:A}),this._set("rasterInfo",s),i.capabilities.toLowerCase().indexOf("tilemap")>-1&&(T={tileInfo:s.storageInfo.tileInfo,parsedUrl:Object(M.I)(this.url),url:this.url,tileServers:[],type:"tile"},this._tilemapCache=new qe.a({layer:T}));case 38:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchRawTile",value:function(){var e=Object(i.a)(n.a.mark((function e(t,r,a){var i,o,s,l,c,u,f,p,d,h,b,y,m,g,v,j,I,x,M,w,O,k,A,C,T=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=T.length>3&&void 0!==T[3]?T[3]:{},o=this.rasterInfo,s=o.storageInfo,l=o.extent,c=o.pixelSize,u=s.maximumPyramidLevel-t+this._levelOffset,f="".concat(this.url,"/tile/").concat(u,"/").concat(r,"/").concat(a),p=this._slices?{sliceId:i.sliceId||0}:null,e.next=10,this.request(f,{query:p,responseType:"array-buffer",signal:i.signal});case 10:if(d=e.sent,h=d.data){e.next=14;break}return e.abrupt("return",null);case 14:return e.next=16,this.decodePixelBlock(h,{width:s.tileInfo.size[0],height:s.tileInfo.size[1],planes:null,pixelType:null,isPoint:"Elevation"===this.tileType});case 16:if(b=e.sent,y=s.blockBoundary[t],!("jpg"!==s.compression||a>y.minCol&&a<y.maxCol&&r>y.minRow&&r<y.maxRow)){e.next=20;break}return e.abrupt("return",b);case 20:return m=s.origin,g=s.blockWidth,v=s.blockHeight,j=Math.pow(2,t),I=Math.round((l.xmin-m.x)/(c.x*j))%g,x=Math.round((l.xmax-m.x)/(c.x*j))%g,M=Math.round((m.y-l.ymax)/(c.x*j))%v,w=Math.round((m.y-l.ymin)/(c.x*j))%v,O=a===y.minCol?I:0,k=r===y.minRow?M:0,A=a===y.maxCol?x:g,C=r===y.maxRow?w:v,e.abrupt("return",(Object(ae.k)(b,{x:O,y:k},{width:A-O,height:C-k}),b));case 22:case"end":return e.stop()}}),e,this)})));return function(t,r,a){return e.apply(this,arguments)}}()},{key:"getSliceIndex",value:function(e){if(null==e||!e.length||!this._slices)return null;for(var t=e,r=0;r<this._slices.length;r++){var a=this._slices[r].multidimensionalDefinition;if(a.length===t.length&&!a.some((function(e){var r=t.filter((function(t){return e.variableName===t.variableName&&t.dimensionName===e.dimensionName}))[0];return!r||(Array.isArray(e.values[0])?e.values[0][0]:e.values[0])!==(Array.isArray(r.values[0])?r.values[0][0]:r.values[0])})))return r}return null}},{key:"fetchVariableStatisticsHistograms",value:function(){var e=Object(i.a)(n.a.mark((function e(t,r){var a,i,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.request(this.url+"/statistics",{query:{variable:t,f:"json"},signal:r}).then((function(e){var t;return null==(t=e.data)?void 0:t.statistics})),i=this.request(this.url+"/histograms",{query:{variable:t,f:"json"},signal:r}).then((function(e){var t;return null==(t=e.data)?void 0:t.histograms})),e.next=4,Object(w.b)([a,i]);case 4:return o=e.sent,e.abrupt("return",(o[0]&&o[0].forEach((function(e){e.avg=e.mean,e.stddev=e.standardDeviation})),{statistics:o[0]||null,histograms:o[1]||null}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"computeBestPyramidLevelForLocation",value:function(){var e=Object(i.a)(n.a.mark((function e(t){var r,a,i,o,s,l,c=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:{},this._tilemapCache){e.next=3;break}return e.abrupt("return",0);case 3:if(null!==(a=this.identifyPixelLocation(t,0,r.datumTransformation))){e.next=6;break}return e.abrupt("return",null);case 6:i=0,o=this.rasterInfo.storageInfo.maximumPyramidLevel,s=o-i+this._levelOffset,l=a.srcLocation;case 10:if(!(s>=0)){e.next=25;break}return e.prev=11,e.next=14,this._tilemapCache.fetchAvailability(s,a.row,a.col,r);case 14:if(e.t0=e.sent,"available"!==e.t0){e.next=17;break}return e.abrupt("break",25);case 17:e.next=21;break;case 19:e.prev=19,e.t1=e.catch(11);case 21:if(s--,i++,null!==(a=this.identifyPixelLocation(l,i,r.datumTransformation))){e.next=23;break}return e.abrupt("return",null);case 23:e.next=10;break;case 25:return e.abrupt("return",-1===s||null==a?null:i);case 26:case"end":return e.stop()}}),e,this,[[11,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_fetchRasterInfo",value:function(){var e=Object(i.a)(n.a.mark((function e(t){var r,a,i,o,s,l,c,u,f,p,d,h,b=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.sourceJSON,a=Math.ceil((r.extent.xmax-r.extent.xmin)/r.pixelSizeX-.1),i=Math.ceil((r.extent.ymax-r.extent.ymin)/r.pixelSizeY-.1),o=U.a.fromJSON(r.spatialReference||r.extent.spatialReference),"Map"!==this.tileType){e.next=3;break}return e.abrupt("return",new Q.a({width:a,height:i,bandCount:3,extent:E.a.fromJSON(r.extent),spatialReference:o,pixelSize:new K.a({x:r.pixelSizeX,y:r.pixelSizeY,spatialReference:o}),pixelType:"u8",statistics:null,keyProperties:{DataType:"processed"}}));case 3:return s=t.slice,l=t.signal,c=!!r.hasRasterAttributeTable&&this.request(this.url+"/rasterAttributeTable",{query:{slice:s,f:"json"},signal:l}).then((function(e){return X.default.fromJSON(e.data)})).catch((function(){return null})),u=!!r.hasColormap&&this.request(this.url+"/colormap",{query:{slice:s,f:"json"},signal:l}).then((function(e){var t;return null==(t=e.data)?void 0:t.colormap})),f=!!r.hasHistograms&&this.request(this.url+"/histograms",{query:{slice:s,f:"json"},signal:l}).then((function(e){var t;return null==(t=e.data)?void 0:t.histograms})),p=this.request(this.url+"/keyProperties",{query:{f:"json"},signal:l}).then((function(e){return e.data})).catch((function(){})),d=!!r.hasMultidimensions&&this._fetchMultidimensionalInfo(),h=!!r.hasMultidimensions&&this.request(this.url+"/slices",{query:{f:"json"},signal:l}).then((function(e){return e.data&&e.data.slices})).catch((function(){})),e.abrupt("return",Object(w.b)([c,u,f,p,d,h]).then((function(e){var t=null;if(r.minValues&&r.minValues.length===r.bandCount){t=[];for(var n=0;n<r.minValues.length;n++)t.push({min:r.minValues[n],max:r.maxValues[n],avg:r.meanValues[n],stddev:r.stdvValues[n]})}return b._slices=e[5]||null,new Q.a({width:a,height:i,bandCount:r.bandCount,extent:E.a.fromJSON(r.extent),spatialReference:o,pixelSize:new K.a({x:r.pixelSizeX,y:r.pixelSizeY,spatialReference:o}),pixelType:r.pixelType.toLowerCase(),statistics:t,attributeTable:e[0]||null,colormap:e[1]||null,histograms:e[2]||null,keyProperties:e[3]||{},multidimensionalInfo:e[4]||null})})));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_fetchMultidimensionalInfo",value:function(){var e=Object(i.a)(n.a.mark((function e(t){var r,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(this.url+"/multidimensionalInfo",{query:{f:"json"},signal:t}).then((function(e){var t;return null==(t=e.data)?void 0:t.multidimensionalInfo}));case 2:return a=e.sent,e.abrupt("return",(null!=(r=a.variables)&&r.length&&a.variables.forEach((function(e){var t;null!=(t=e.statistics)&&t.length&&e.statistics.forEach((function(e){e.avg=e.mean,e.stddev=e.standardDeviation}))})),a));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(we);Object(d.a)([Object(m.b)({type:String,json:{write:!0}})],Ke.prototype,"datasetFormat",void 0),Object(d.a)([Object(m.b)()],Ke.prototype,"tileType",void 0);var Xe=Ke=Object(d.a)([Object(I.a)("esri.layers.support.rasterDatasets.ImageServerRaster")],Ke),Qe=r(887),Ye=r(1036),$e=new Map;$e.set("Int8","s8"),$e.set("UInt8","u8"),$e.set("Int16","s16"),$e.set("UInt16","u16"),$e.set("Int32","s32"),$e.set("UInt32","u32"),$e.set("Float32","f32"),$e.set("Float64","f32"),$e.set("Double64","f32");var et=new Map;et.set("lerc",".lrc"),et.set("none",".til"),et.set("deflate",".pzp"),et.set("jpeg",".jzp");var tt=function(e){Object(f.a)(r,e);var t=Object(p.a)(r);function r(){var e;return Object(s.a)(this,r),(e=t.apply(this,arguments))._files=null,e._storageIndex=null,e.datasetFormat="MRF",e}return Object(l.a)(r,[{key:"open",value:function(){var e=Object(i.a)(n.a.mark((function e(t){var r,a,i,o,s,l,c,u,f,p,d,b,y,m,g,v,j,I,x,M,w,O,k,A;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1),a=t?Object(h.m)(t.signal):null,e.next=6,this.request(this.url,{responseType:"xml",signal:a});case 6:if(i=e.sent,o=this._parseHeader(i.data),s=o.rasterInfo,l=o.files,-1!==(null==(r=this.ioConfig.skipExtensions)?void 0:r.indexOf("aux.xml"))){e.next=15;break}return e.next=13,this._fetchAuxiliaryData(t);case 13:null!=(c=e.sent)&&(s.statistics=null!=(u=c.statistics)?u:s.statistics,s.histograms=c.histograms,c.histograms&&!Object(h.g)(s.statistics)&&(s.statistics=Object(ae.e)(c.histograms)));case 15:return this._set("rasterInfo",s),this._files=l,e.next=18,this.request(l.index,{responseType:"array-buffer",signal:a});case 18:for(f=e.sent,this._storageIndex=this._parseIndex(f.data),b=0,y=-1,m=this.rasterInfo.storageInfo,g=m.blockWidth,v=m.blockHeight,j=m.compression,I=this.rasterInfo.storageInfo.pyramidScalingFactor,x=this.rasterInfo,M=x.width,w=x.height,O=x.bandCount,k=[],A="none"===j?1:O;b<this._storageIndex.length;)y++,p=Math.ceil(M/g/Math.pow(I,y)),d=Math.ceil(w/v/Math.pow(I,y)),b+=p*d*A*4,k.push({maxRow:d,maxCol:p,minCol:0,minRow:0});this.rasterInfo.storageInfo.blockBoundary=k,y>0&&(this.rasterInfo.storageInfo.firstPyramidLevel=1,this.rasterInfo.storageInfo.maximumPyramidLevel=y),this.updateTileInfo();case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchRawTile",value:function(){var e=Object(i.a)(n.a.mark((function e(t,r,a){var i,o,s,l,c,u,f,p,d,h,b,y,m,g,v,j,I,x,M,O,k,A,C,T,S,D,R,L,N=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=N.length>3&&void 0!==N[3]?N[3]:{},o=this.rasterInfo.storageInfo,s=o.blockWidth,l=o.blockHeight,c=o.blockBoundary,u=o.compression,!(!(f=c[t])||f.maxRow<r||f.maxCol<a||f.minRow>r||f.minCol>a)){e.next=4;break}return e.abrupt("return",null);case 4:if(p=this.rasterInfo,d=p.bandCount,h=p.pixelType,b=this._getTileLocation(t,r,a),y=b.ranges,m=b.actualTileWidth,g=b.actualTileHeight,y&&0!==y.length){e.next=7;break}return e.abrupt("return",null);case 7:if(0!==y[0].from||0!==y[0].to){e.next=10;break}return v=new Uint8Array(s*l),e.abrupt("return",new Qe.a({width:s,height:l,pixels:null,mask:v,validPixelCount:0}));case 10:for(j=this.ioConfig.bandIds,I="none"===u?1:d,x=[],M=0,M=0;M<I;M++)(!j||j.indexOf[M]>-1)&&x.push(this.request(this._files.data,{range:{from:y[M].from,to:y[M].to},responseType:"array-buffer",signal:i.signal}));return e.next=15,Object(w.b)(x);case 15:for(O=e.sent,k=O.map((function(e){return e.data.byteLength})).reduce((function(e,t){return e+t})),A=new Uint8Array(k),C=0,M=0;M<I;M++)A.set(new Uint8Array(O[M].data),C),C+=O[M].data.byteLength;return T="lerc"===this.rasterInfo.storageInfo.compression?"lerc":"bip",e.next=23,this.decodePixelBlock(A.buffer,{width:s,height:l,format:T,pixelType:h});case 23:if(S=e.sent,D=0,R=0,m!==s||g!==l)if(L=S.mask)for(M=0;M<l;M++)if(R=M*s,M<g)for(D=m;D<s;D++)L[R+D]=0;else for(D=0;D<s;D++)L[R+D]=0;else for(L=new Uint8Array(s*l),S.mask=L,M=0;M<g;M++)for(R=M*s,D=0;D<m;D++)L[R+D]=1;return e.abrupt("return",S);case 27:case"end":return e.stop()}}),e,this)})));return function(t,r,a){return e.apply(this,arguments)}}()},{key:"_parseIndex",value:function(e){if(e.byteLength%16>0)throw"invalid array buffer must be multiples of 16";var t,r,a,n,i,o;if(Ye.a){for(r=new Uint8Array(e),n=new ArrayBuffer(e.byteLength),a=new Uint8Array(n),i=0;i<e.byteLength/4;i++)for(o=0;o<4;o++)a[4*i+o]=r[4*i+3-o];t=new Uint32Array(n)}else t=new Uint32Array(e);return t}},{key:"_getTileLocation",value:function(e,t,r){var a,n,i,o=this.rasterInfo.storageInfo,s=o.blockWidth,l=o.blockHeight,c=o.pyramidScalingFactor,u=o.compression,f=this.rasterInfo,p=f.width,d=f.height,h=f.bandCount,b="none"===u?1:h,y=0,m=0;for(i=0;i<e;i++)m=Math.pow(c,i),y+=(a=Math.ceil(p/s/m))*(n=Math.ceil(d/l/m));m=Math.pow(c,e),a=Math.ceil(p/s/m),n=Math.ceil(d/l/m),y+=t*a+r,y*=4*b;for(var g=this._storageIndex.subarray(y,y+4*b),v=0,j=0,I=[],x=0;x<b;x++)j=(v=g[4*x+0]*Math.pow(2,32)+g[4*x+1])+g[4*x+2]*Math.pow(2,32)+g[4*x+3],I.push({from:v,to:j});return{ranges:I,actualTileWidth:r<a-1?s:Math.ceil(p/m)-s*(a-1),actualTileHeight:t<n-1?l:Math.ceil(d/m)-l*(n-1)}}},{key:"_parseHeader",value:function(e){var t=He(e,"MRF_META/Raster");if(!t)throw new x.a("mrf:open","not a valid MRF format");var r=He(t,"Size"),a=parseInt(r.getAttribute("x"),10),n=parseInt(r.getAttribute("y"),10),i=parseInt(r.getAttribute("c"),10),o=(Pe(t,"Compression")||"none").toLowerCase();if(!o||-1===["none","lerc"].indexOf(o))throw new x.a("mrf:open","currently does not support compression "+o);var s=Pe(t,"DataType")||"UInt8",l=$e.get(s);if(null==l)throw new x.a("mrf:open","currently does not support pixel type "+s);var c,u,f=He(t,"PageSize"),p=parseInt(f.getAttribute("x"),10),d=parseInt(f.getAttribute("y"),10),h=He(t,"DataValues");if(h&&(null!=(u=h.getAttribute("NoData"))&&(c=u.trim().split(" ").map((function(e){return parseFloat(e)})))),He(e,"MRF_META/CachedSource"))throw new x.a("mrf:open","currently does not support MRF referencing other data files");var b=He(e,"MRF_META/GeoTags"),y=He(b,"BoundingBox");if(null==y)throw new x.a("mrf:open","missing node MRF_META/GeoTags/BoundingBox");var m,g=parseFloat(y.getAttribute("minx")),v=parseFloat(y.getAttribute("miny")),j=parseFloat(y.getAttribute("maxx")),I=parseFloat(y.getAttribute("maxy")),M=Pe(b,"Projection"),w=Pe(e,"datafile"),O=Pe(e,"IndexFile");"LOCAL_CS[]"!==M&&(m=new U.a({wkt:M}));var k=new E.a(g,v,j,I);k.spatialReference=m;var A=He(e,"MRF_META/Rsets"),C=parseInt(A&&A.getAttribute("scale")||"2",10),T=new ee({origin:new K.a({x:k.xmin,y:k.ymax,spatialReference:m}),blockWidth:p,blockHeight:d,pyramidBlockWidth:p,pyramidBlockHeight:d,compression:o,pyramidScalingFactor:C}),S=new K.a({x:(j-g)/a,y:(I-v)/n,spatialReference:m});return{rasterInfo:new Q.a({width:a,height:n,extent:k,spatialReference:m,bandCount:i,pixelType:l,pixelSize:S,noDataValue:c,storageInfo:T}),files:{mrf:this.url,index:O||this.url.replace(".mrf",".idx"),data:w||this.url.replace(".mrf",et.get(o))}}}},{key:"_fetchAuxiliaryData",value:function(){var e=Object(i.a)(n.a.mark((function e(t){var r,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.request(this.url+".aux.xml",{responseType:"xml",signal:null==t?void 0:t.signal});case 3:return r=e.sent,a=r.data,e.abrupt("return",Fe(a));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}]),r}(we);Object(d.a)([Object(m.b)()],tt.prototype,"_files",void 0),Object(d.a)([Object(m.b)()],tt.prototype,"_storageIndex",void 0),Object(d.a)([Object(m.b)({type:String,json:{write:!0}})],tt.prototype,"datasetFormat",void 0);var rt=tt=Object(d.a)([Object(I.a)("esri.layers.support.rasterIO.MRFRaster")],tt),at=r(1064),nt=r(1085),it=function(e,t){var r=e.get(t);return r&&r.values},ot=function(e,t){var r=e.get(t);return r&&r.values[0]},st=function(e){Object(f.a)(r,e);var t=Object(p.a)(r);function r(){var e;return Object(s.a)(this,r),(e=t.apply(this,arguments))._files=null,e._headerInfo=null,e._bufferSize=1048576,e.datasetFormat="TIFF",e}return Object(l.a)(r,[{key:"open",value:function(){var e=Object(i.a)(n.a.mark((function e(t){var r,a,i,s,l,c,u,f,p,d,b,y,m,g,v,j,I,M,w,O,k,A,C,T,S,D,R,L,N,B,z,H;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return a=t?Object(h.m)(t.signal):null,e.next=5,this.request(this.url,{range:{from:0,to:this._bufferSize},responseType:"array-buffer",signal:a});case 5:if(i=e.sent,s=i.data){e.next=9;break}throw new x.a("tiffraster:open","failed to open url "+this.url);case 9:return this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1),l=Object(nt.f)(s),c=l.littleEndian,u=l.firstIFD,f=l.isBigTiff,p=[],e.next=13,this.readIFDs(p,s,c,u,0,f?8:4,a);case 13:if(d=Object(nt.c)(p),b=d.width,y=d.height,m=d.tileWidth,g=d.tileHeight,v=d.planes,j=d.pixelType,I=d.compression,M=d.firstPyramidLevel,w=d.maximumPyramidLevel,O=d.pyramidBlockWidth,k=d.pyramidBlockHeight,A=d.tileBoundary,C=d.metadata,T=E.a.fromJSON(d.extent),S=T.spatialReference,D=new K.a(T?{x:T.xmin,y:T.ymax,spatialReference:S}:{x:0,y:0}),R=new ee({blockWidth:m,blockHeight:g,pyramidBlockWidth:O,pyramidBlockHeight:k,compression:I,origin:D,firstPyramidLevel:M,maximumPyramidLevel:w,blockBoundary:A}),L=new K.a({x:(T.xmax-T.xmin)/b,y:(T.ymax-T.ymin)/y,spatialReference:S}),N=C?{BandProperties:C.bandProperties,DataType:C.dataType}:{},B=new Q.a({width:b,height:y,bandCount:v,pixelType:j,compression:I,pixelSize:L,storageInfo:R,spatialReference:S,keyProperties:N,extent:T,statistics:C?C.statistics:null}),-1!==(null==(r=this.ioConfig.skipExtensions)?void 0:r.indexOf("aux.xml"))){e.next=19;break}return e.next=17,this._fetchAuxiliaryData(t);case 17:null!=(z=e.sent)&&(B.statistics=null!=(H=z.statistics)?H:B.statistics,B.histograms=z.histograms,z.histograms&&!Object(h.g)(B.statistics)&&(B.statistics=Object(ae.e)(z.histograms)));case 19:if(this._set("rasterInfo",B),this._headerInfo=Object(o.a)({littleEndian:c,isBigTiff:f,ifds:p},d),this._headerInfo.isSupported){e.next=21;break}throw new x.a("tiffraster:open","this tiff is not supported: "+this._headerInfo.message);case 21:this.updateTileInfo();case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchRawTile",value:function(){var e=Object(i.a)(n.a.mark((function e(t,r,a){var i,o,s,l,c,u,f,p,d,h,b,y,m,g,v,j,I,x=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=x.length>3&&void 0!==x[3]?x[3]:{},this._headerInfo||!this._headerInfo.isSupported){e.next=3;break}return e.abrupt("return",null);case 3:if(o=this.rasterInfo.storageInfo.blockBoundary,s=t>0?this.rasterInfo.storageInfo.pyramidBlockWidth:this.rasterInfo.storageInfo.blockWidth,l=t>0?this.rasterInfo.storageInfo.pyramidBlockHeight:this.rasterInfo.storageInfo.blockHeight,!(!(c=o[t])||c.maxRow<r||c.maxCol<a||c.minRow>r||c.minCol>a)){e.next=6;break}return e.abrupt("return",null);case 6:if(u=this.getTileLocation(t,r,a)){e.next=9;break}return e.abrupt("return",null);case 9:return f=u.range,p=u.actualTileWidth,d=u.actualTileHeight,h=u.ifd,e.next=15,this.request(this.url,{range:f,responseType:"array-buffer",signal:i.signal});case 15:return b=e.sent,y=b.data,e.next=19,this.decodePixelBlock(y,{format:"tiff",customOptions:{headerInfo:this._headerInfo,ifd:h,offset:0,size:0},width:s,height:l,planes:null,pixelType:null});case 19:if(m=e.sent,p!==s||d!==l)if(I=m.mask)for(g=0;g<l;g++)if(j=g*s,g<d)for(v=p;v<s;v++)I[j+v]=0;else for(v=0;v<s;v++)I[j+v]=0;else for(I=new Uint8Array(s*l),m.mask=I,g=0;g<d;g++)for(j=g*s,v=0;v<p;v++)I[j+v]=1;return e.abrupt("return",m);case 22:case"end":return e.stop()}}),e,this)})));return function(t,r,a){return e.apply(this,arguments)}}()},{key:"readIFDs",value:function(){var e=Object(i.a)(n.a.mark((function e(t,r,a,i,o){var s,l,c,u=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=u.length>5&&void 0!==u[5]?u[5]:4,l=u.length>6?u[6]:void 0,i){e.next=4;break}return e.abrupt("return",null);case 4:if(!(i>=r.byteLength||i<0)){e.next=10;break}return e.next=7,this.request(this.url,{range:{from:i+o,to:i+o+this._bufferSize},responseType:"array-buffer",signal:l});case 7:r=e.sent.data,o=i+o,i=0;case 10:return e.next=12,this.readIFD(r,a,i,o,at.a.TIFF_TAGS,s,l);case 12:if(c=e.sent,t.push(c.ifd),c.nextIFD){e.next=15;break}return e.abrupt("return",null);case 15:return e.next=17,this.readIFDs(t,r,a,c.nextIFD-o,o,s,l);case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,a,n,i){return e.apply(this,arguments)}}()},{key:"readIFD",value:function(){var e=Object(i.a)(n.a.mark((function e(t,r,a,i){var o,s,l,c,u,f,p,d,h,b,y,m,g,v,j=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=j.length>4&&void 0!==j[4]?j[4]:at.a.TIFF_TAGS,s=j.length>5&&void 0!==j[5]?j[5]:4,l=j.length>6?j[6]:void 0,t){e.next=5;break}return e.abrupt("return",null);case 5:if(!(c=Object(nt.e)(t,r,a,i,o,s)).success){e.next=25;break}if(u=[],c.ifd.forEach((function(e){e.values||u.push(e)})),!(u.length>0)){e.next=16;break}if(f=u.map((function(e){return e.offlineOffsetSize})),p=Math.min.apply(null,f.map((function(e){return e[0]}))),!(Math.min.apply(null,f.map((function(e){return e[0]+e[1]})))-p<=this._bufferSize)){e.next=16;break}return e.next=13,this.request(this.url,{range:{from:p,to:p+this._bufferSize},responseType:"array-buffer",signal:l});case 13:d=e.sent,h=d.data,t=h,i=p,u.forEach((function(e){return Object(nt.d)(t,r,e,i)}));case 16:if(!c.ifd.has("GEOKEYDIRECTORY")){e.next=24;break}if(b=c.ifd.get("GEOKEYDIRECTORY"),!((y=b.values)&&y.length>4)){e.next=24;break}return m=y[0]+"."+y[1]+"."+y[2],e.next=22,this.readIFD(t,r,b.valueOffset+6-i,i,at.a.GEO_KEYS,2,l);case 22:g=e.sent,b.data=g.ifd,b.data&&b.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[m]});case 24:return e.abrupt("return",c);case 25:if(!c.requiredBufferSize||c.requiredBufferSize===t.byteLength){e.next=30;break}return e.next=28,this.request(this.url,{range:{from:i,to:i+c.requiredBufferSize+4},responseType:"array-buffer",signal:l});case 28:return v=e.sent,e.abrupt("return",(t=v.data).byteLength<c.requiredBufferSize?null:this.readIFD(t,r,0,i,at.a.TIFF_TAGS,4,l));case 30:case"end":return e.stop()}}),e,this)})));return function(t,r,a,n){return e.apply(this,arguments)}}()},{key:"getTileLocation",value:function(e,t,r){var a=this.rasterInfo.storageInfo,n=a.firstPyramidLevel,i=a.blockBoundary,o=0===e?0:e-(n-1),s=this._headerInfo.ifds[o];if(!s)return null;var l=it(s,"TILEOFFSETS");if(void 0===l)return null;var c=it(s,"TILEBYTECOUNTS"),u=i[o],f=u.minRow,p=u.minCol,d=u.maxRow,h=u.maxCol;if(t>d||r>h||t<f||r<p)return null;var b=ot(s,"IMAGEWIDTH"),y=ot(s,"IMAGELENGTH"),m=ot(s,"TILEWIDTH"),g=ot(s,"TILELENGTH"),v=t*(h+1)+r,j=l[v],I=c[v];return null==j||null==I?null:{range:{from:j,to:j+I-1},ifd:s,actualTileWidth:r===h?b%m:m,actualTileHeight:t===d?y%g:g}}},{key:"_fetchAuxiliaryData",value:function(){var e=Object(i.a)(n.a.mark((function e(t){var r,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.request(this.url+".aux.xml",{responseType:"xml",signal:null==t?void 0:t.signal});case 3:return r=e.sent,a=r.data,e.abrupt("return",Fe(a));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}]),r}(we);Object(d.a)([Object(m.b)()],st.prototype,"_files",void 0),Object(d.a)([Object(m.b)()],st.prototype,"_headerInfo",void 0),Object(d.a)([Object(m.b)()],st.prototype,"_bufferSize",void 0),Object(d.a)([Object(m.b)({type:String,json:{write:!0}})],st.prototype,"datasetFormat",void 0);var lt=st=Object(d.a)([Object(I.a)("esri.layers.support.rasterDatasets.TIFFRaster")],st),ct=new Map;ct.set("CRF",{desc:"Cloud Raster Format",constructor:Te}),ct.set("MRF",{desc:"Meta Raster Format",constructor:rt}),ct.set("TIFF",{desc:"GeoTIFF",constructor:lt}),ct.set("RasterTileServer",{desc:"Raster Tile Server",constructor:Xe}),ct.set("JPG",{desc:"JPG Raster Format",constructor:We}),ct.set("PNG",{desc:"PNG Raster Format",constructor:We}),ct.set("GIF",{desc:"GIF Raster Format",constructor:We}),ct.set("BMP",{desc:"BMP Raster Format",constructor:We});var ut=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,null,[{key:"open",value:function(){var e=Object(i.a)(n.a.mark((function e(t){var r,a,i,o,s,l,c,u,f,p;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.url,a=t.ioConfig,i=t.sourceJSON,null==(o=t.datasetFormat)&&r.lastIndexOf(".")&&(o=r.slice(r.lastIndexOf(".")+1).toUpperCase()),"OVR"===o||"TIF"===o?o="TIFF":"JPG"!==o&&"JPEG"!==o&&"JFIF"!==o||(o="JPG"),r.toLowerCase().indexOf("/imageserver")>-1&&-1===r.toLowerCase().indexOf("/wcsserver")&&(o="RasterTileServer"),s={url:r,sourceJSON:i,datasetFormat:o,ioConfig:a||{bandIds:null,sampling:null}},!this.supportedFormats.has(o)){e.next=10;break}return l=ct.get(o).constructor,c=new l(s),e.next=9,c.open({signal:t.signal});case 9:return e.abrupt("return",c);case 10:if(!o){e.next=12;break}throw new x.a("rasterfactory:open","not a supported format "+o);case 12:return u=Array.from(ct.keys()),f=0,p=function e(){return(o=u[f++])?(l=ct.get(o).constructor,(c=new l(s)).open({signal:t.signal}).then((function(){return c})).catch((function(){return e()}))):null},e.abrupt("return",p());case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"register",value:function(e,t,r){ct.has(e.toUpperCase())||ct.set(e.toUpperCase(),{desc:t,constructor:r})}},{key:"supportedFormats",get:function(){var e=new Set;return ct.forEach((function(t,r){return e.add(r)})),e}}]),e}(),ft=Object(g.b)()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"});function pt(){return{enabled:!this.loaded||"RasterTileServer"===this.raster.datasetFormat&&"Raster"===this.raster.tileType}}var dt=function(e){Object(f.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(s.a)(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).bandIds=null,e.interpolation=null,e.legendEnabled=!0,e.isReference=null,e.listMode="show",e.sourceJSON=null,e.version=null,e.title=null,e.type="imagery-tile",e.operationalLayerType="ArcGISTiledImageServiceLayer",e.popupEnabled=!0,e.popupTemplate=null,e}return Object(l.a)(r,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?Object(o.a)({url:e},t):e}},{key:"load",value:function(e){var t=this,r=Object(h.g)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},e).then((function(){return t._openRaster(r)}),(function(){return t._openRaster(r)}))),Object(w.s)(this)}},{key:"readRenderer",value:function(e,t,r){var a=t&&t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.renderer,n=Object(S.b)(a,r)||void 0;if(null!=n)return n}},{key:"createPopupTemplate",value:function(e){return Object(z.a)(this,e)}},{key:"write",value:function(e,t){var a=this.raster;if(this.loaded?"RasterTileServer"===a.datasetFormat&&("Raster"===a.tileType||"Map"===a.tileType):this.url&&/\/ImageServer(\/|\/?$)/i.test(this.url))return Object(c.a)(Object(u.a)(r.prototype),"write",this).call(this,e,t);if(t&&t.messages){var n="".concat(t.origin,"/").concat(t.layerContainerType||"operational-layers");t.messages.push(new x.a("layer:unsupported","Layers (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' are not supported in the context of '").concat(n,"'"),{layer:this}))}return null}},{key:"_openRaster",value:function(){var e=Object(i.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.raster){e.next=8;break}if(e.t0=this.raster.rasterInfo,e.t0){e.next=5;break}return e.next=5,this.raster.open();case 5:this.url=this.raster.url,e.next=11;break;case 8:return e.next=10,ut.open({url:this.url,sourceJSON:this.sourceJSON,ioConfig:this.ioConfig,signal:t});case 10:this.raster=e.sent;case 11:if(this.raster.rasterInfo){e.next=14;break}throw new x.a("imagery-tile-layer:load","cannot load resources on "+this.url);case 14:this.sourceJSON=this.sourceJSON||this.raster.sourceJSON,null!=this.sourceJSON&&(this._set("version",this.sourceJSON.currentVersion),this._set("copyright",this.sourceJSON.copyrightText)),null==this.title&&(this.title=this.raster.datasetName),"Map"===this.raster.tileType&&(this.popupEnabled=!1),this._configDefaultSettings();case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"fields",get:function(){var e,t,r=[new D.a({name:"Raster.ServicePixelValue",alias:"Pixel Value",domain:null,editable:!1,length:50,type:"string"})],a=null==(e=this.rasterInfo)||null==(t=e.attributeTable)?void 0:t.fields;if(a){var n=a.filter((function(e){return"oid"!==e.type&&"value"!==e.name.toLowerCase()})).map((function(e){var t=e.clone();return t.name="Raster."+e.name,t}));r=r.concat(n)}return r}},{key:"renderer",set:function(e){this._set("renderer",e),this.updateRenderer()}}]),r}(Object(R.a)(Object(B.a)(Object(N.a)(Object(T.a)(Object(L.a)(function(e){var t=function(e){Object(f.a)(r,e);var t=Object(p.a)(r);function r(){var e;return Object(s.a)(this,r),(e=t.apply(this,arguments))._rasterJobHandler={instance:null,refCount:0,connectionPromise:null},e.bandIds=null,e.copyright=null,e.fullExtent=null,e.interpolation="nearest",e.raster=null,e.rasterInfo=null,e.sourceJSON=null,e.spatialReference=null,e.tileInfo=null,e.symbolizer=null,e}return Object(l.a)(r,[{key:"updateRenderer",value:function(){var e=Object(i.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loaded){e.next=2;break}return e.abrupt("return");case 2:if(JSON.stringify(this._cachedRendererJson)!==JSON.stringify(this.renderer)){e.next=4;break}return e.abrupt("return");case 4:if(t=this._rasterJobHandler.instance,e.t0=t,!e.t0){e.next=12;break}return this.symbolizer.rendererJSON=this.renderer.toJSON(),this.symbolizer.bind(),e.next=11,t.updateSymbolizer(this.symbolizer);case 11:this._cachedRendererJson=this.renderer.toJSON();case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"applyRenderer",value:function(){var e=Object(i.a)(n.a.mark((function e(t,r){var a,i,s,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=t&&t.pixelBlock)&&a.pixels&&a.pixels.length>0){e.next=3;break}return e.abrupt("return",null);case 3:if(this.updateRenderer(),s=this._rasterJobHandler.instance,l=this.bandIds,!s){e.next=11;break}return e.next=8,s.symbolize(Object(o.a)(Object(o.a)({},t),{},{simpleStretchParams:r,bandIds:l}));case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=this.symbolizer.symbolize(Object(o.a)(Object(o.a)({},t),{},{simpleStretchParams:r,bandIds:l}));case 12:return i=e.t0,e.abrupt("return",i);case 14:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getTileUrl",value:function(e,t,r){return"RasterTileServer"===this.raster.datasetFormat?"".concat(this.url,"/tile/").concat(e,"/").concat(t,"/").concat(r):""}},{key:"getCompatibleTileInfo",value:function(e,t){if(!this.loaded)return null;var r=Object(P.d)(e);return J.a.create({size:256,spatialReference:e,origin:r?{x:r.origin[0],y:r.origin[1]}:{x:t.xmin,y:t.ymax}})}},{key:"getCompatibleFullExtent",value:function(e){return this.loaded?(this._compatibleFullExtent&&this._compatibleFullExtent.spatialReference.equals(e)||(this._compatibleFullExtent=this.raster.computeExtent(e)),this._compatibleFullExtent):null}},{key:"fetchTile",value:function(){var e=Object(i.a)(n.a.mark((function e(t,r,a){var i,s,l,c=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=c.length>3&&void 0!==c[3]?c[3]:{}).requestAsImageElement){e.next=4;break}return s=this.getTileUrl(t,r,a),e.abrupt("return",Object(_.default)(s,{responseType:"image",query:{sliceId:this._sliceId,_ts:i.timestamp},signal:i.signal}).then((function(e){return e.data})));case 4:return e.next=6,this._initJobHandler();case 6:if(!this.multidimensionalDefinition){e.next=9;break}l=this._sliceId,i=Object(o.a)({multidimensionalDefinition:this.multidimensionalDefinition,sliceId:l},i);case 9:return e.abrupt("return",("raster-shaded-relief"===this.renderer.type&&(i=Object(o.a)({buffer:{cols:1,rows:1}},i)),this.raster.fetchTile(t,r,a,i)));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,a){return e.apply(this,arguments)}}()},{key:"fetchPixels",value:function(){var e=Object(i.a)(n.a.mark((function e(t,r,a,i){var s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._initJobHandler();case 2:if(!this.multidimensionalDefinition){e.next=5;break}s=this._sliceId,i=Object(o.a)({multidimensionalDefinition:this.multidimensionalDefinition,sliceId:s},i);case 5:return e.abrupt("return",this.raster.fetchPixels(t,r,a,i));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,a,n){return e.apply(this,arguments)}}()},{key:"identify",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.multidimensionalDefinition&&!t.multidimensionalDefinition&&(t=Object(o.a)(Object(o.a)({},t),{},{multidimensionalDefinition:this.multidimensionalDefinition})),this.raster.identify(e,t)}},{key:"increaseRasterJobHandlerUsage",value:function(){this._rasterJobHandler.refCount++}},{key:"decreaseRasterJobHandlerUsage",value:function(){this._rasterJobHandler.refCount--,this._rasterJobHandler.refCount<=0&&this._shutdownJobHandler()}},{key:"_configDefaultSettings",value:function(){this._configDefaultInterpolation(),this._configDefaultSlice(),this._configDefaultRenderer()}},{key:"_initJobHandler",value:function(){var e=this;if(null!=this._rasterJobHandler.connectionPromise)return this._rasterJobHandler.connectionPromise;var t=new G.a;return this._rasterJobHandler.connectionPromise=t.initialize().then((function(){e._rasterJobHandler.instance=t,e.raster.rasterJobHandler=t,e.renderer&&e.updateRenderer()})).catch((function(){return null})),this._rasterJobHandler.connectionPromise}},{key:"_shutdownJobHandler",value:function(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy(),this._rasterJobHandler.instance=null,this._rasterJobHandler.connectionPromise=null,this._rasterJobHandler.refCount=0,this.raster.rasterJobHandler=null}},{key:"_configDefaultInterpolation",value:function(){if(null==this.interpolation){var e,t=Object(W.c)(this.rasterInfo,this.raster.tileType,null==(e=this.sourceJSON)?void 0:e.defaultResamplingMethod);this._set("interpolation",t)}}},{key:"_configDefaultSlice",value:function(){var e=this.raster.rasterInfo.multidimensionalInfo;if(Object(h.g)(e)){if(!this.multidimensionalDefinition){var t=e.variables[0],r=[];t.dimensions.forEach((function(e){r.push(new F.a({variableName:t.name,dimensionName:e.name,values:e.hasRegularIntervals?e.extent[0]:e.values[0],isSlice:!0}))})),this.multidimensionalDefinition=r}this._sliceId=this.raster.getSliceIndex(this.multidimensionalDefinition)}}},{key:"_configDefaultRenderer",value:function(){var e,t=this.raster.rasterInfo;this.bandIds||(this.bandIds=Object(W.b)(t)),this.renderer||(this.renderer=Object(W.a)(t,{bandIds:this.bandIds,variableName:null==(e=this.multidimensionalDefinition)?void 0:e[0].variableName})),this.symbolizer?(this.symbolizer.rendererJSON=this.renderer.toJSON(),this.symbolizer.rasterInfo=t):this.symbolizer=new V.a({rendererJSON:this.renderer.toJSON(),rasterInfo:t}),this.symbolizer.bind()||q.warn("imagery-tile-mixin","The given renderer is not supported by the layer.")}},{key:"multidimensionalDefinition",set:function(e){this.raster&&(this._sliceId=this.raster.getSliceIndex(e)),this._set("multidimensionalDefinition",e)}},{key:"url",set:function(e){this._set("url",Object(Z.f)(e,q))}},{key:"renderer",set:function(e){this._set("renderer",e),this.updateRenderer()}}]),r}(e);return Object(d.a)([Object(m.b)()],t.prototype,"_cachedRendererJson",void 0),Object(d.a)([Object(m.b)()],t.prototype,"_sliceId",void 0),Object(d.a)([Object(m.b)()],t.prototype,"_compatibleFullExtent",void 0),Object(d.a)([Object(m.b)()],t.prototype,"_rasterJobHandler",void 0),Object(d.a)([Object(m.b)()],t.prototype,"bandIds",void 0),Object(d.a)([Object(m.b)()],t.prototype,"copyright",void 0),Object(d.a)([Object(m.b)({type:E.a}),Object(H.a)("rasterInfo.extent")],t.prototype,"fullExtent",void 0),Object(d.a)([Object(m.b)()],t.prototype,"interpolation",void 0),Object(d.a)([Object(m.b)({type:[F.a]})],t.prototype,"multidimensionalDefinition",null),Object(d.a)([Object(m.b)()],t.prototype,"raster",void 0),Object(d.a)([Object(m.b)({readOnly:!0}),Object(H.a)("raster.rasterInfo")],t.prototype,"rasterInfo",void 0),Object(d.a)([Object(m.b)()],t.prototype,"sourceJSON",void 0),Object(d.a)([Object(m.b)({type:U.a}),Object(H.a)("rasterInfo.spatialReference")],t.prototype,"spatialReference",void 0),Object(d.a)([Object(m.b)({type:J.a,dependsOn:["rasterInfo"]}),Object(H.a)("rasterInfo.storageInfo.tileInfo")],t.prototype,"tileInfo",void 0),Object(d.a)([Object(m.b)(C.j)],t.prototype,"url",null),Object(d.a)([Object(m.b)({types:S.a})],t.prototype,"renderer",null),Object(d.a)([Object(m.b)()],t.prototype,"symbolizer",void 0),t=Object(d.a)([Object(I.a)("esri.layers.ImageryTileMixin")],t),t}(Object(A.a)(k.a))))))));Object(d.a)([Object(m.b)()],dt.prototype,"ioConfig",void 0),Object(d.a)([Object(m.b)({type:[y.a],json:{write:{overridePolicy:pt}}})],dt.prototype,"bandIds",void 0),Object(d.a)([Object(m.b)({json:{write:{overridePolicy:pt}}}),Object(v.a)(ft)],dt.prototype,"interpolation",void 0),Object(d.a)([Object(m.b)({json:{write:!0}})],dt.prototype,"multidimensionalDefinition",void 0),Object(d.a)([Object(m.b)(C.d)],dt.prototype,"legendEnabled",void 0),Object(d.a)([Object(m.b)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],dt.prototype,"isReference",void 0),Object(d.a)([Object(m.b)({type:["show","hide"]})],dt.prototype,"listMode",void 0),Object(d.a)([Object(m.b)()],dt.prototype,"sourceJSON",void 0),Object(d.a)([Object(m.b)({readOnly:!0})],dt.prototype,"version",void 0),Object(d.a)([Object(m.b)()],dt.prototype,"title",void 0),Object(d.a)([Object(m.b)({readOnly:!0,json:{read:!1}})],dt.prototype,"type",void 0),Object(d.a)([Object(m.b)({type:["ArcGISTiledImageServiceLayer"]})],dt.prototype,"operationalLayerType",void 0),Object(d.a)([Object(m.b)({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:function(e,t){return!t.disablePopup}},write:{target:"disablePopup",overridePolicy:pt,writer:function(e,t,r){t[r]=!e}}}})],dt.prototype,"popupEnabled",void 0),Object(d.a)([Object(m.b)({type:O.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:pt}}})],dt.prototype,"popupTemplate",void 0),Object(d.a)([Object(m.b)({readOnly:!0,dependsOn:["title"]})],dt.prototype,"defaultPopupTemplate",null),Object(d.a)([Object(m.b)({readOnly:!0,type:[D.a],dependsOn:["rasterInfo"]})],dt.prototype,"fields",null),Object(d.a)([Object(m.b)({types:S.a,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:pt},origins:{"web-scene":{types:S.c,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:function(e){return{enabled:e&&"vector-field"!==e.type}}}}}}})],dt.prototype,"renderer",null),Object(d.a)([Object(j.a)("renderer")],dt.prototype,"readRenderer",null);var ht=dt=Object(d.a)([Object(I.a)("esri.layers.ImageryTileLayer")],dt);t.default=ht}}]);
//# sourceMappingURL=32.17d55a4c.chunk.js.map