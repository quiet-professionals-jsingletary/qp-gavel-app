{"version":3,"sources":["../node_modules/@arcgis/core/tasks/operations/query.js","../node_modules/@arcgis/core/tasks/operations/urlUtils.js","../node_modules/@arcgis/core/core/pbf.js","../node_modules/@arcgis/core/tasks/operations/pbfOptimizedFeatureSet.js","../node_modules/@arcgis/core/tasks/operations/pbfFeatureServiceParser.js","../node_modules/@arcgis/core/tasks/operations/pbfQueryUtils.js"],"names":["m","e","r","n","geometry","o","toJSON","s","t","JSON","stringify","geometryType","i","inSR","spatialReference","wkid","groupByFieldsForStatistics","join","objectIds","orderByFields","outFields","returnDistinctValues","returnCountOnly","returnExtentOnly","returnIdsOnly","indexOf","outSR","returnGeometry","returnCentroid","outStatistics","pixelSize","quantizationParameters","parameterValues","rangeValues","dynamicDataSource","layer","source","timeExtent","start","end","time","y","a","isEmpty","data","features","g","u","c","createFeatureResult","d","p","f","count","S","extent","then","hasOwnProperty","Error","responseType","clone","l","query","path","Array","isArray","length","TextDecoder","byteLength","this","_tag","_dataType","init","_data","_dataView","_pos","_end","_decodeVarint","skip","getUInt32","_decodeSVarint","_skip","getUint32","getInt32","getFloat64","getFloat32","_getLength","_toString","_toBytes","_getLengthUnsafe","getMessage","release","pool","acquire","Math","min","subarray","decode","toString","decodeURIComponent","String","fromCharCode","Uint8Array","buffer","options","geometryTypes","hasZ","sourceSpatialReference","vcsWkid","coords","push","fields","lengths","queryGeometry","queryGeometryType","getLogger","createPointGeometry","next","tag","pos","addCoordinatePoint","getSInt64","b","createGeometry","hasM","addLength","addCoordinate","getEnum","k","getString","getFloat","getDouble","getSInt32","getInt64","getUInt64","getBool","type","name","alias","sqlType","domain","parse","error","defaultValue","isSystemMaintained","h","createFeature","attributes","processMessage","processMessageWithArgs","centroid","T","q","F","originPosition","scale","translate","I","shapeAreaFieldName","shapeLengthFieldName","units","createSpatialReference","wkt","latestWkid","latestVcsWkid","w","objectIdFieldName","globalIdFieldName","geohashFieldName","geometryProperties","transform","exceededTransferLimit","addField","prepareFeatures","addFeature","uniqueIdField","finishFeatureResult","D","featureResult","addQueryGeometry","M","DataView","queryResult","objectId"],"mappings":"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","file":"static/js/5.a14feb6e.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../core/maybe.js\";import{join as e,urlToObject as r}from\"../../core/urlUtils.js\";import{resolve as n}from\"../../core/promiseUtils.js\";import{getJsonType as i}from\"../../geometry/support/jsonUtils.js\";import o from\"../../request.js\";import{normalizeCentralMeridian as s}from\"../../geometry/support/normalizeUtils.js\";import{applyFeatureSetZUnitScaling as u}from\"./queryZScale.js\";import{parsePBFFeatureQuery as a}from\"./pbfQueryUtils.js\";import{mapParameters as l}from\"./urlUtils.js\";function m(e,r){const n=e.geometry,o=e.toJSON(),s=o;if(t(n)&&(s.geometry=JSON.stringify(n),s.geometryType=i(n),s.inSR=n.spatialReference.wkid||JSON.stringify(n.spatialReference)),o.groupByFieldsForStatistics&&(s.groupByFieldsForStatistics=o.groupByFieldsForStatistics.join(\",\")),o.objectIds&&(s.objectIds=o.objectIds.join(\",\")),o.orderByFields&&(s.orderByFields=o.orderByFields.join(\",\")),!o.outFields||!o.returnDistinctValues&&(null!=r&&r.returnCountOnly||null!=r&&r.returnExtentOnly||null!=r&&r.returnIdsOnly)?delete s.outFields:-1!==o.outFields.indexOf(\"*\")?s.outFields=\"*\":s.outFields=o.outFields.join(\",\"),o.outSR?s.outSR=o.outSR.wkid||JSON.stringify(o.outSR):n&&(o.returnGeometry||o.returnCentroid)&&(s.outSR=s.inSR),o.returnGeometry&&delete o.returnGeometry,o.outStatistics&&(s.outStatistics=JSON.stringify(o.outStatistics)),o.pixelSize&&(s.pixelSize=JSON.stringify(o.pixelSize)),o.quantizationParameters&&(s.quantizationParameters=JSON.stringify(o.quantizationParameters)),o.parameterValues&&(s.parameterValues=JSON.stringify(o.parameterValues)),o.rangeValues&&(s.rangeValues=JSON.stringify(o.rangeValues)),o.dynamicDataSource&&(s.layer=JSON.stringify({source:o.dynamicDataSource}),delete o.dynamicDataSource),o.timeExtent){const t=o.timeExtent,{start:e,end:r}=t;null==e&&null==r||(s.time=e===r?e:`${null==e?\"null\":e},${null==r?\"null\":r}`),delete o.timeExtent}return s}async function y(e,r,n,i){const o=t(r.timeExtent)&&r.timeExtent.isEmpty?{data:{features:[]}}:await g(e,r,\"json\",i);return u(r,n,o.data),o}async function c(e,r,i,o){if(t(r.timeExtent)&&r.timeExtent.isEmpty)return n({data:i.createFeatureResult()});const s=await d(e,r,o),u=s;return u.data=a(s.data,i),u}function d(t,e,r){return g(t,e,\"pbf\",r)}function p(e,r,i){return t(r.timeExtent)&&r.timeExtent.isEmpty?n({data:{objectIds:[]}}):g(e,r,\"json\",i,{returnIdsOnly:!0})}function f(e,r,i){return t(r.timeExtent)&&r.timeExtent.isEmpty?n({data:{count:0}}):g(e,r,\"json\",i,{returnIdsOnly:!0,returnCountOnly:!0})}function S(e,r,i){return t(r.timeExtent)&&r.timeExtent.isEmpty?n({data:{count:0,extent:null}}):g(e,r,\"json\",i,{returnExtentOnly:!0,returnCountOnly:!0}).then((t=>{const e=t.data;if(e.hasOwnProperty(\"extent\"))return t;if(e.features)throw new Error(\"Layer does not support extent calculation.\");if(e.hasOwnProperty(\"count\"))throw new Error(\"Layer does not support extent calculation.\");return t}))}function g(n,i,u,a={},y){const c=\"string\"==typeof n?r(n):n,d=i.geometry?[i.geometry]:[];return a.responseType=\"pbf\"===u?\"array-buffer\":\"json\",s(d,null,a).then((r=>{const n=r&&r[0];t(n)&&((i=i.clone()).geometry=n);const s=l({...c.query,f:u,...y,...m(i,y)});return o(e(c.path,\"query\"),{...a,query:{...s,...a.query}})}))}export{y as executeQuery,f as executeQueryForCount,S as executeQueryForExtent,p as executeQueryForIds,c as executeQueryPBF,d as executeQueryPBFBuffer,m as queryToQueryStringParameters,g as runQuery};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction t(n){const o={};for(const e in n){if(\"declaredClass\"===e)continue;const r=n[e];if(null!=r&&\"function\"!=typeof r)if(Array.isArray(r)){o[e]=[];for(let n=0;n<r.length;n++)o[e][n]=t(r[n])}else\"object\"==typeof r?r.toJSON&&(o[e]=JSON.stringify(r)):o[e]=r}return o}export{t as mapParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport t from\"./has.js\";import e from\"./ObjectPool.js\";const s=t(\"esri-text-decoder\")?new TextDecoder(\"utf-8\"):null,i=t(\"safari\")||t(\"ios\")?6:t(\"ff\")?12:32;class r{constructor(t,e,s=0,i=(t?t.byteLength:0)){this._tag=0,this._dataType=99,this.init(t,e,s,i)}init(t,e,s,i){this._data=t,this._dataView=e,this._pos=s,this._end=i}clone(){return new r(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const e=this._decodeVarint();if(this._tag=e>>3,this._dataType=7&e,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;return t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?t:(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?t:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();return t>>>1^-(1&t)|0}getSInt64(){return this._decodeSVarint()}getBool(){const t=0!==this._data[this._pos];return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,e=this._pos,s=t.getUint32(e,!0)+4294967296*t.getUint32(e+4,!0);return this._skip(8),s}getSFixed64(){const t=this._dataView,e=this._pos,s=t.getUint32(e,!0)+4294967296*t.getInt32(e+4,!0);return this._skip(8),s}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),e=this._pos,s=this._toString(this._data,e,e+t);return this._skip(t),s}getBytes(){const t=this._getLength(),e=this._pos,s=this._toBytes(this._data,e,e+t);return this._skip(t),s}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,e,s,i){const r=this.getMessage(),n=t(r,e,s,i);return r.release(),n}processMessage(t){const e=this.getMessage(),s=t(e);return e.release(),s}getMessage(){const t=this._getLength(),e=r.pool.acquire();return e.init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),e}release(){r.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error(\"Invalid data type!\")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error(\"Attempt to skip past the end of buffer!\");this._pos+=t}_decodeVarint(){const t=this._data;let e,s=this._pos,i=0;if(this._end-s>=10)do{if(e=t[s++],i|=127&e,0==(128&e))break;if(e=t[s++],i|=(127&e)<<7,0==(128&e))break;if(e=t[s++],i|=(127&e)<<14,0==(128&e))break;if(e=t[s++],i|=(127&e)<<21,0==(128&e))break;if(e=t[s++],i+=268435456*(127&e),0==(128&e))break;if(e=t[s++],i+=34359738368*(127&e),0==(128&e))break;if(e=t[s++],i+=4398046511104*(127&e),0==(128&e))break;if(e=t[s++],i+=562949953421312*(127&e),0==(128&e))break;if(e=t[s++],i+=72057594037927940*(127&e),0==(128&e))break;if(e=t[s++],i+=0x8000000000000000*(127&e),0==(128&e))break;throw new Error(\"Varint too long!\")}while(0);else{let r=1;for(;s!==this._end&&(e=t[s],0!=(128&e));)++s,i+=(127&e)*r,r*=128;if(s===this._end)throw new Error(\"Varint overrun!\");++s,i+=e*r}return this._pos=s,i}_decodeSVarint(){const t=this._decodeVarint();return t%2?-(t+1)/2:t/2}_getLength(){if(2!==this._dataType)throw new Error(\"Not a delimited data type!\");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,e,r){if((r=Math.min(this._end,r))-e>i&&s){const i=t.subarray(e,r);return s.decode(i)}let n=\"\",a=\"\";for(let s=e;s<r;++s){const e=t[s];128&e?a+=\"%\"+e.toString(16):(n+=decodeURIComponent(a)+String.fromCharCode(e),a=\"\")}return a.length&&(n+=decodeURIComponent(a)),n}_toBytes(t,e,s){return s=Math.min(this._end,s),new Uint8Array(t.buffer,e,s-e)}}r.pool=new e(r,null,(t=>{t._data=null,t._dataView=null}));export default r;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{equals as e}from\"../../geometry/support/spatialReferenceUtils.js\";import{getMetersPerVerticalUnitForSR as r}from\"../../core/unitUtils.js\";import t from\"../../layers/graphics/OptimizedFeature.js\";import o from\"../../layers/graphics/OptimizedFeatureSet.js\";import s from\"../../layers/graphics/OptimizedGeometry.js\";const i=[\"esriGeometryPoint\",\"esriGeometryMultipoint\",\"esriGeometryPolyline\",\"esriGeometryPolygon\"];class a{constructor(e){this.options=e,this.geometryTypes=i}createFeatureResult(){return new o}prepareFeatures(){}finishFeatureResult(t){if(!t||!t.features||!t.hasZ||!this.options.sourceSpatialReference||!t.spatialReference||e(t.spatialReference,this.options.sourceSpatialReference)||t.spatialReference.vcsWkid)return;const o=r(this.options.sourceSpatialReference)/r(t.spatialReference);if(1!==o)for(const e of t.features){if(!e.geometry||!e.geometry.coords)continue;const r=e.geometry.coords;for(let e=2;e<r.length;e+=3)r[e]*=o}}addFeature(e,r){e.features.push(r)}createFeature(){return new t}createSpatialReference(){return{wkid:0}}createGeometry(){return new s}addField(e,r){e.fields.push(r)}addCoordinate(e,r){e.coords.push(r)}addCoordinatePoint(e,r){e.coords.push(r)}addLength(e,r){e.lengths.push(r)}addQueryGeometry(e,r){e.queryGeometry=r.queryGeometry,e.queryGeometryType=r.queryGeometryType}createPointGeometry(){return new s}}export{i as OPTIMIZED_GEOMETRY_TYPES,a as OptimizedFeatureSetParserContext};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../core/maybe.js\";import t from\"../../core/Logger.js\";import r from\"../../core/Error.js\";import s from\"../../layers/graphics/OptimizedGeometry.js\";import a from\"../../core/pbf.js\";import{OPTIMIZED_GEOMETRY_TYPES as n}from\"./pbfOptimizedFeatureSet.js\";const o=t.getLogger(\"esri.tasks.operations.pbfFeatureServiceParser\"),i=[\"esriFieldTypeSmallInteger\",\"esriFieldTypeInteger\",\"esriFieldTypeSingle\",\"esriFieldTypeDouble\",\"esriFieldTypeString\",\"esriFieldTypeDate\",\"esriFieldTypeOID\",\"esriFieldTypeGeometry\",\"esriFieldTypeBlob\",\"esriFieldTypeRaster\",\"esriFieldTypeGUID\",\"esriFieldTypeGlobalID\",\"esriFieldTypeXML\"],c=[\"sqlTypeBigInt\",\"sqlTypeBinary\",\"sqlTypeBit\",\"sqlTypeChar\",\"sqlTypeDate\",\"sqlTypeDecimal\",\"sqlTypeDouble\",\"sqlTypeFloat\",\"sqlTypeGeometry\",\"sqlTypeGUID\",\"sqlTypeInteger\",\"sqlTypeLongNVarchar\",\"sqlTypeLongVarbinary\",\"sqlTypeLongVarchar\",\"sqlTypeNChar\",\"sqlTypeNVarchar\",\"sqlTypeOther\",\"sqlTypeReal\",\"sqlTypeSmallInt\",\"sqlTypeSqlXml\",\"sqlTypeTime\",\"sqlTypeTimestamp\",\"sqlTypeTimestamp2\",\"sqlTypeTinyInt\",\"sqlTypeVarbinary\",\"sqlTypeVarchar\"],l=[\"upperLeft\",\"lowerLeft\"];function g(e){return e>=i.length?null:i[e]}function p(e){return e>=l.length?null:l[e]}function u(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function y(e,t,r){const s=t.createPointGeometry(r);for(;e.next();)switch(e.tag()){case 3:{const r=e.getUInt32(),a=e.pos()+r;let n=0;for(;e.pos()<a;)t.addCoordinatePoint(s,e.getSInt64(),n++);break}case 1:case 2:default:e.skip()}return s}function b(e,t,r){const s=t.createGeometry(r),a=2+(r.hasZ?1:0)+(r.hasM?1:0);for(;e.next();)switch(e.tag()){case 2:{const r=e.getUInt32(),a=e.pos()+r;let n=0;for(;e.pos()<a;)t.addLength(s,e.getUInt32(),n++);break}case 3:{const r=e.getUInt32(),n=e.pos()+r;let o=0;for(;e.pos()<n;)t.addCoordinate(s,e.getSInt64(),o),o++,o===a&&(o=0);break}case 1:default:e.skip()}return s}function f(e){const t=new s;let r=\"esriGeometryPoint\";for(;e.next();)switch(e.tag()){case 2:{const r=e.getUInt32(),s=e.pos()+r;for(;e.pos()<s;)t.lengths.push(e.getUInt32());break}case 3:{const r=e.getUInt32(),s=e.pos()+r;for(;e.pos()<s;)t.coords.push(e.getSInt64());break}case 1:r=n[e.getEnum()];break;default:e.skip()}return{queryGeometry:t,queryGeometryType:r}}function k(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function d(e){const t={type:g(0)};for(;e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.type=g(e.getEnum());break;case 3:t.alias=e.getString();break;case 4:t.sqlType=(s=e.getEnum())>=c.length?null:c[s];break;case 5:try{t.domain=JSON.parse(e.getString())}catch(e){o.error(new r(\"query:parsing-pbf\",\"Failed to parse domain\",{error:e})),t.domain=null}break;case 6:t.defaultValue=e.getString();break;default:e.skip()}var s;return t}function m(e){const t={};for(;e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.isSystemMaintained=e.getBool();break;default:e.skip()}return t}function h(e,t,r,s){const a=t.createFeature(r);let n=0;for(;e.next();)switch(e.tag()){case 1:{const t=s[n++].name;a.attributes[t]=e.processMessage(k);break}case 2:a.geometry=e.processMessageWithArgs(b,t,r);break;case 4:a.centroid=e.processMessageWithArgs(y,t,r);break;default:e.skip()}return a}function T(e){const t=[1,1,1,1];for(;e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function q(e){const t=[0,0,0,0];for(;e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function F(e){const t={originPosition:p(0)};for(;e.next();)switch(e.tag()){case 1:t.originPosition=p(e.getEnum());break;case 2:t.scale=e.processMessage(T);break;case 3:t.translate=e.processMessage(q);break;default:e.skip()}return t}function I(e){const t={};for(;e.next();)switch(e.tag()){case 1:t.shapeAreaFieldName=e.getString();break;case 2:t.shapeLengthFieldName=e.getString();break;case 3:t.units=e.getString();break;default:e.skip()}return t}function S(e,t){const r=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:r.wkid=e.getUInt32();break;case 5:r.wkt=e.getString();break;case 2:r.latestWkid=e.getUInt32();break;case 3:r.vcsWkid=e.getUInt32();break;case 4:r.latestVcsWkid=e.getUInt32();break;default:e.skip()}return r}function w(e,t){const r=t.createFeatureResult();r.geometryType=u(t,0);let s=!1;for(;e.next();)switch(e.tag()){case 1:r.objectIdFieldName=e.getString();break;case 3:r.globalIdFieldName=e.getString();break;case 4:r.geohashFieldName=e.getString();break;case 5:r.geometryProperties=e.processMessage(I);break;case 7:r.geometryType=u(t,e.getEnum());break;case 8:r.spatialReference=e.processMessageWithArgs(S,t);break;case 10:r.hasZ=e.getBool();break;case 11:r.hasM=e.getBool();break;case 12:r.transform=e.processMessage(F);break;case 9:{const t=e.getBool();r.exceededTransferLimit=t;break}case 13:t.addField(r,e.processMessage(d));break;case 15:s||(t.prepareFeatures(r),s=!0),t.addFeature(r,e.processMessageWithArgs(h,t,r,r.fields));break;case 2:r.uniqueIdField=e.processMessage(m);break;case 6:default:e.skip()}return t.finishFeatureResult(r),r}function D(t,r){const s={};let a=null;for(;t.next();)switch(t.tag()){case 4:a=t.processMessageWithArgs(f);break;case 1:s.featureResult=t.processMessageWithArgs(w,r);break;case 2:case 3:default:t.skip()}return e(a)&&s.featureResult&&r.addQueryGeometry(s,a),s}function M(e,t){try{const r=2,s=new a(new Uint8Array(e),new DataView(e)),n={};for(;s.next();)switch(s.tag()){case r:n.queryResult=s.processMessageWithArgs(D,t);break;default:s.skip()}return n}catch(e){throw new r(\"query:parsing-pbf\",\"Error while parsing FeatureSet PBF payload\",{error:e})}}export{M as parseFeatureQuery,g as parseFieldType,F as parseTransform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{parseFeatureQuery as e}from\"./pbfFeatureServiceParser.js\";function t(t,r){const u=e(t,r),o=u.queryResult.featureResult,s=u.queryResult.queryGeometry,y=u.queryResult.queryGeometryType;if(o&&o.features&&o.features.length&&o.objectIdFieldName){const e=o.objectIdFieldName;for(const t of o.features)t.attributes&&(t.objectId=t.attributes[e])}return o&&(o.queryGeometry=s,o.queryGeometryType=y),o}export{t as parsePBFFeatureQuery};\n"],"sourceRoot":""}