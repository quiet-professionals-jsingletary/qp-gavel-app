(this["webpackJsonpqp-ampd-app"]=this["webpackJsonpqp-ampd-app"]||[]).push([[25],{764:function(e,t,a){"use strict";a.d(t,"a",(function(){return M}));var r=a(8),n=a.n(r),s=(a(32),a(22)),i=a(16),u=a(68),o=a(10),c=a(12),l=a(21),p=a(15),d=a(40),f=a(36),h=a(65),y=a(122),b=a(121),m=a(11),g=a(9),v=a(182),w=(a(86),a(58));function F(e,t,a,r){return O.apply(this,arguments)}function O(){return(O=Object(s.a)(n.a.mark((function e(t,a,r,s){var i,u,o,c,l,p,d,f;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="string"==typeof t?Object(g.I)(t):t,u=a[0].spatialReference,o=Object(m.a)(Object(m.a)({},s),{},{query:Object(m.a)(Object(m.a)({},i.query),{},{f:"json",sr:JSON.stringify(u),target:JSON.stringify({geometryType:Object(v.c)(a[0]),geometries:a}),cutter:JSON.stringify(r)})}),e.next=5,Object(w.default)(i.path+"/cut",o);case 5:return c=e.sent,l=c.data,p=l.cutIndexes,d=l.geometries,f=void 0===d?[]:d,e.abrupt("return",{cutIndexes:p,geometries:f.map((function(e){var t=Object(v.a)(e);return t.spatialReference=u,t}))});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t,a){return j.apply(this,arguments)}function j(){return(j=Object(s.a)(n.a.mark((function e(t,a,r){var s,i,u,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="string"==typeof t?Object(g.I)(t):t,i=a[0].spatialReference,u=Object(v.c)(a[0]),o=Object(m.a)(Object(m.a)({},r),{},{query:Object(m.a)(Object(m.a)({},s.query),{},{f:"json",sr:i.wkid?i.wkid:JSON.stringify(i),geometries:JSON.stringify(x(a))})}),e.t0=function(e,t,a){var r=Object(v.b)(t);return e.map((function(e){var t=r.fromJSON(e);return t.spatialReference=a,t}))},e.next=4,Object(w.default)(s.path+"/simplify",o);case 4:return e.t1=e.sent.data,e.t2=u,e.t3=i,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return{geometryType:Object(v.c)(e[0]),geometries:e.map((function(e){return e.toJSON()}))}}var I=c.a.getLogger("esri.geometry.support.normalizeUtils"),R={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new b.a({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:f.a.WebMercator}),minus180Line:new b.a({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:f.a.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new b.a({paths:[[[180,-180],[180,180]]],spatialReference:f.a.WGS84}),minus180Line:new b.a({paths:[[[-180,-180],[-180,180]]],spatialReference:f.a.WGS84})}};function k(e){return"polygon"===e.type}function E(e){return"polyline"===e[0].type}function L(e){return k(e)?e.rings:e.paths}function S(e,t){return Math.ceil((e-t)/(2*t))}function U(e,t){var a,r=L(e),n=Object(i.a)(r);try{for(n.s();!(a=n.n()).done;){var s,u=a.value,o=Object(i.a)(u);try{for(o.s();!(s=o.n()).done;){s.value[0]+=t}}catch(c){o.e(c)}finally{o.f()}}}catch(c){n.e(c)}finally{n.f()}return e}function q(e,t,a){if(t){var r=function(e,t){if(!(e instanceof b.a||e instanceof y.a)){var a="straightLineDensify: the input geometry is neither polyline nor polygon";throw I.error(a),new l.a(a)}var r,n=L(e),s=[],u=Object(i.a)(n);try{for(u.s();!(r=u.n()).done;){var o=r.value,c=[];s.push(c),c.push([o[0][0],o[0][1]]);for(var p=0;p<o.length-1;p++){var d=o[p][0],f=o[p][1],h=o[p+1][0],m=o[p+1][1],g=Math.sqrt((h-d)*(h-d)+(m-f)*(m-f)),v=(m-f)/g,w=(h-d)/g,F=g/t;if(F>1){for(var O=1;O<=F-1;O++){var A=O*t,j=w*A+d,x=v*A+f;c.push([j,x])}var R=(g+Math.floor(F-1)*t)/2,E=w*R+d,S=v*R+f;c.push([E,S])}c.push([h,m])}}}catch(U){u.e(U)}finally{u.f()}return k(e)?new y.a({rings:s,spatialReference:e.spatialReference}):new b.a({paths:s,spatialReference:e.spatialReference})}(e,1e6);e=Object(h.e)(r,!0)}return a&&(e=U(e,a)),e}function J(e,t,a){if(Array.isArray(e)){var r=e[0];if(r>t){var n=S(r,t);e[0]=r+n*(-2*t)}else if(r<a){var s=S(r,a);e[0]=r+s*(-2*a)}}else{var i=e.x;if(i>t){var u=S(i,t);e=e.clone().offset(u*(-2*t),0)}else if(i<a){var o=S(i,a);e=e.clone().offset(o*(-2*a),0)}}return e}function M(e,t,a){return N.apply(this,arguments)}function N(){return(N=Object(s.a)(n.a.mark((function e(t,a,r){var s,c,l,f,m,g,v,w,O,j,x,I,k,N,W,G,X,z,T,B,P,V,C,D,Z,_,H,K,Q,Y,$,ee,te,ae,re,ne,se,ie,ue,oe;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)){e.next=2;break}return e.abrupt("return",M([t],a));case 2:s=a?a.url:u.a.geometryServiceUrl,j=0,x=[],I=[],k=Object(i.a)(t);try{for(k.s();!(N=k.n()).done;)W=N.value,Object(o.f)(W)?I.push(W):(c||(c=W.spatialReference,l=Object(d.d)(c),f=c.isWebMercator,m=R[v=f?102100:4326].maxX,g=R[v].minX,w=R[v].plus180Line,O=R[v].minus180Line),l?"mesh"===W.type?I.push(W):"point"===W.type?I.push(J(W.clone(),m,g)):"multipoint"===W.type?((G=W.clone()).points=G.points.map((function(e){return J(e,m,g)})),I.push(G)):"extent"===W.type?(X=W.clone()._normalize(!1,!1,l),I.push(X.rings?new y.a(X):X)):W.extent?(z=W.extent,T=S(z.xmin,g)*(2*m),B=0===T?W.clone():U(W.clone(),T),z.offset(T,0),z.intersects(w)&&z.xmax!==m?(j=z.xmax>j?z.xmax:j,B=q(B,f),x.push(B),I.push("cut")):z.intersects(O)&&z.xmin!==g?(j=z.xmax*(2*m)>j?z.xmax*(2*m):j,B=q(B,f,360),x.push(B),I.push("cut")):I.push(B)):I.push(W.clone()):I.push(W))}catch(n){k.e(n)}finally{k.f()}for(P=S(j,m),V=-90,C=P,D=new b.a;P>0;)Z=360*P-180,D.addPath([[Z,V],[Z,-1*V]]),V*=-1,P--;if(!(x.length>0&&C>0)){e.next=28;break}return e.t0=function(e,t){for(var a=-1,r=function(r){for(var s=t.cutIndexes[r],u=t.geometries[r],o=L(u),c=function(e){var t=o[e];t.some((function(a){if(a[0]<180)return!0;for(var r=0,n=0;n<t.length;n++){var s=t[n][0];r=s>r?s:r}for(var i=-360*S(r=Number(r.toFixed(9)),180),o=0;o<t.length;o++){var c=u.getPoint(e,o);u.setPoint(e,o,c.clone().offset(i,0))}return!0}))},l=0;l<o.length;l++)c(l);if(s===a){if("polygon"===e[0].type){var p,d=Object(i.a)(L(u));try{for(d.s();!(p=d.n()).done;){var f=p.value;e[s]=e[s].addRing(f)}}catch(n){d.e(n)}finally{d.f()}}else if(E(e)){var h,y=Object(i.a)(L(u));try{for(y.s();!(h=y.n()).done;){var b=h.value;e[s]=e[s].addPath(b)}}catch(n){y.e(n)}finally{y.f()}}}else a=s,e[s]=u},s=0;s<t.cutIndexes.length;s++)r(s);return e},e.t1=x,e.next=15,F(s,x,D,r);case 15:for(e.t2=e.sent,_=(0,e.t0)(e.t1,e.t2),H=[],K=[],Q=0;Q<I.length;Q++)"cut"!==(Y=I[Q])?K.push(Y):($=_.shift(),ee=t[Q],Object(o.g)(ee)&&"polygon"===ee.type&&ee.rings&&ee.rings.length>1&&$.rings.length>=ee.rings.length?(H.push($),K.push("simplify")):K.push(f?Object(h.b)($):$));if(H.length){e.next=22;break}return e.abrupt("return",K);case 22:return e.next=24,A(s,H,r);case 24:for(te=e.sent,ae=[],re=0;re<K.length;re++)"simplify"!==(ne=K[re])?ae.push(ne):ae.push(f?Object(h.b)(te.shift()):te.shift());return e.abrupt("return",ae);case 28:for(se=[],ie=0;ie<I.length;ie++)"cut"!==(ue=I[ie])?se.push(ue):(oe=x.shift(),se.push(!0===f?Object(h.b)(oe):oe));return e.abrupt("return",Object(p.s)(se));case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},993:function(e,t,a){"use strict";a.r(t),a.d(t,"applyEdits",(function(){return b})),a.d(t,"isEditableLayer",(function(){return y}));var r=a(8),n=a.n(r),s=a(11),i=a(22),u=a(18),o=a(10),c=a(21),l=a(9),p=a(15),d=a(42),f=a(206),h=a(764);function y(e){var t,a;return!0===(null==e||null==(t=e.capabilities)||null==(a=t.operations)?void 0:a.supportsEditing)&&e&&(!("editingEnabled"in e)||e.editingEnabled)}function b(e,t,a,r){return m.apply(this,arguments)}function m(){return(m=Object(i.a)(n.a.mark((function e(t,a,r,o){var l,f,y,b,m,F,O,A;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y={edits:r,result:Object(p.c)((function(e,t){l=e,f=t}))},t.emit("apply-edits",y),e.prev=2,e.next=5,function(){var e=Object(i.a)(n.a.mark((function e(t,a,r,u){var o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load();case 2:if(function(e){return e&&null!=e.applyEdits}(a)){e.next=4;break}return e.abrupt("return",Object(p.r)(new c.a("".concat(t.type,"-layer:no-editing-support"),"Layer source does not support applyEdits capability",{layer:t})));case 4:if(t.editingEnabled){e.next=6;break}throw new c.a("".concat(t.type,"-layer:editing-disabled"),"Editing is disabled for layer",{layer:t});case 6:return e.next=8,function(e,t,a){var r=t&&(t.addFeatures||t.updateFeatures||t.deleteFeatures),u=t&&(t.addAttachments||t.updateAttachments||t.deleteAttachments);if(!t||!r&&!u)throw new c.a("".concat(e.type,"-layer:missing-parameters"),"'addFeatures', 'updateFeatures', 'deleteFeatures', 'addAttachments', 'updateAttachments' or 'deleteAttachments' parameter is required");if(!e.capabilities.data.isVersioned&&a&&a.gdbVersion)throw new c.a("".concat(e.type,"-layer:invalid-parameter"),"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'");if(!e.capabilities.editing.supportsRollbackOnFailure&&a&&a.rollbackOnFailureEnabled)throw new c.a("".concat(e.type,"-layer:invalid-parameter"),"This layer does not support 'rollbackOnFailureEnabled' parameter. See: 'capabilities.editing.supportsRollbackOnFailure'");if(!e.capabilities.editing.supportsGlobalId&&a&&a.globalIdUsed)throw new c.a("".concat(e.type,"-layer:invalid-parameter"),"This layer does not support 'globalIdUsed' parameter. See: 'capabilities.editing.supportsGlobalId'");if(!e.capabilities.editing.supportsGlobalId&&u)throw new c.a("".concat(e.type,"-layer:invalid-parameter"),"'addAttachments', 'updateAttachments' and 'deleteAttachments' are applicable only if the layer supports global ids. See: 'capabilities.editing.supportsGlobalId'");if((!a||!a.globalIdUsed)&&u)throw new c.a("".concat(e.type,"-layer:invalid-parameter"),"When 'addAttachments', 'updateAttachments' or 'deleteAttachments' is specified, globalIdUsed should be set to true");var o=Object(s.a)({},t);if(o.addFeatures=t&&d.a.isCollection(t.addFeatures)?t.addFeatures.toArray():o.addFeatures||[],o.updateFeatures=t&&d.a.isCollection(t.updateFeatures)?t.updateFeatures.toArray():o.updateFeatures||[],o.deleteFeatures=t&&d.a.isCollection(t.deleteFeatures)?t.deleteFeatures.toArray():o.deleteFeatures||[],o.addFeatures.length&&!e.capabilities.operations.supportsAdd)throw new c.a("".concat(e.type,"-layer:unsupported-operation"),"Layer does not support adding features.");if(o.updateFeatures.length&&!e.capabilities.operations.supportsUpdate)throw new c.a("".concat(e.type,"-layer:unsupported-operation"),"Layer does not support updating features.");if(o.deleteFeatures.length&&!e.capabilities.operations.supportsDelete)throw new c.a("".concat(e.type,"-layer:unsupported-operation"),"Layer does not support deleting features.");o.addAttachments=o.addAttachments||[],o.updateAttachments=o.updateAttachments||[],o.deleteAttachments=o.deleteAttachments||[],o.addFeatures=o.addFeatures.map(w),o.updateFeatures=o.updateFeatures.map(w);var l=a&&a.globalIdUsed;return o.addFeatures.forEach((function(t){return g(t,e,l)})),o.updateFeatures.forEach((function(t){return g(t,e,l)})),o.deleteFeatures.forEach((function(t){return g(t,e,l)})),o.addAttachments.forEach((function(t){return v(t,e)})),o.updateAttachments.forEach((function(t){return v(t,e)})),function(){var e=Object(i.a)(n.a.mark((function e(t){var a,r,s,i,u,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.addFeatures,r=t.updateFeatures,s=a.concat(r).map((function(e){return e.geometry})),e.next=5,Object(h.a)(s);case 5:return i=e.sent,u=a.length,o=r.length,e.abrupt("return",(i.slice(0,u).forEach((function(e,a){t.addFeatures[a].geometry=e})),i.slice(u,u+o).forEach((function(e,a){t.updateFeatures[a].geometry=e})),t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o)}(t,r,u);case 8:if((o=e.sent).addFeatures.length||o.updateFeatures.length||o.deleteFeatures.length||o.addAttachments.length||o.updateAttachments.length||o.deleteAttachments.length){e.next=11;break}return e.abrupt("return",{edits:o,results:{addFeatureResults:[],updateFeatureResults:[],deleteFeatureResults:[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}});case 11:return e.t0=o,e.next=14,a.applyEdits(o,u);case 14:return e.t1=e.sent,e.abrupt("return",{edits:e.t0,results:e.t1});case 16:case"end":return e.stop()}}),e)})));return function(t,a,r,n){return e.apply(this,arguments)}}()(t,a,r,o);case 5:return b=e.sent,m=b.results,F=b.edits,A={edits:F,addedFeatures:(O=function(e){return e.filter((function(e){return!e.error})).map(u.a)})(m.addFeatureResults),updatedFeatures:O(m.updateFeatureResults),deletedFeatures:O(m.deleteFeatureResults),addedAttachments:O(m.addAttachmentResults),updatedAttachments:O(m.updateAttachmentResults),deletedAttachments:O(m.deleteAttachmentResults)},e.abrupt("return",((A.addedFeatures.length||A.updatedFeatures.length||A.deletedFeatures.length||A.addedAttachments.length||A.updatedAttachments.length||A.deletedAttachments.length)&&t.emit("edits",A),l(A),m));case 13:throw e.prev=13,e.t0=e.catch(2),f(e.t0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}function g(e,t,a){if(a){if("attributes"in e&&!e.attributes[t.globalIdField])throw new c.a("".concat(t.type,"-layer:invalid-parameter"),"Feature should have 'globalId' when 'globalIdUsed' is true");if(!("attributes"in e)&&!e.globalId)throw new c.a("".concat(t.type,"-layer:invalid-parameter"),"'globalId' of the feature should be passed when 'globalIdUsed' is true")}if("geometry"in e&&Object(o.g)(e.geometry)){if(e.geometry.hasZ&&!1===t.capabilities.data.supportsZ)throw new c.a("".concat(t.type,"-layer:z-unsupported"),"Layer does not support z values while feature has z values.");if(e.geometry.hasM&&!1===t.capabilities.data.supportsM)throw new c.a("".concat(t.type,"-layer:m-unsupported"),"Layer does not support m values while feature has m values.")}}function v(e,t){var a=e.feature,r=e.attachment;if(!a||"attributes"in a&&!a.attributes[t.globalIdField])throw new c.a("".concat(t.type,"-layer:invalid-parameter"),"Attachment should have reference to a feature with 'globalId'");if(!("attributes"in a)&&!a.globalId)throw new c.a("".concat(t.type,"-layer:invalid-parameter"),"Attachment should have reference to 'globalId' of the parent feature");if(!r.globalId)throw new c.a("".concat(t.type,"-layer:invalid-parameter"),"Attachment should have 'globalId'");if(!r.data&&!r.uploadId)throw new c.a("".concat(t.type,"-layer:invalid-parameter"),"Attachment should have 'data' or 'uploadId'");if(!(r.data instanceof File&&r.data.name)&&!r.name)throw new c.a("".concat(t.type,"-layer:invalid-parameter"),"'name' is required when attachment is specified as Base64 encoded string using 'data'");if(!t.capabilities.editing.supportsUploadWithItemId&&r.uploadId)throw new c.a("".concat(t.type,"-layer:invalid-parameter"),"This layer does not support 'uploadId' parameter. See: 'capabilities.editing.supportsUploadWithItemId'");if("string"==typeof r.data){var n=Object(l.i)(r.data);if(n&&!n.isBase64)throw new c.a("".concat(t.type,"-layer:invalid-parameter"),"Attachment 'data' should be a Blob, File or Base64 encoded string")}}function w(e){var t=new f.a;return e.attributes||(e.attributes={}),t.geometry=e.geometry,t.attributes=e.attributes,t}}}]);
//# sourceMappingURL=25.49e29939.chunk.js.map