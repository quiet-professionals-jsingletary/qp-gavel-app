{"version":3,"sources":["../node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js","../node_modules/@arcgis/core/layers/graphics/sources/support/sourceUtils.js","../node_modules/@arcgis/core/layers/graphics/sources/geojson/GeoJSONSourceWorker.js","../node_modules/@arcgis/core/layers/graphics/data/BoundsStore.js","../node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js","../node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js"],"names":["i","s","o","e","t","forEach","push","r","LineString","MultiLineString","MultiPoint","Point","Polygon","MultiPolygon","type","features","f","coordinates","c","next","value","done","length","u","n","l","p","a","y","g","d","lengths","coords","hasZ","m","h","data","crs","properties","name","RegExp","test","w","Set","Number","NEGATIVE_INFINITY","geometryType","fields","maxObjectId","Math","max","objectIdFieldName","objectIdFieldType","unknownFields","geometry","b","P","id","Object","keys","filter","has","delete","add","alias","this","code","description","error","globalId","objectId","success","uniqueId","clear","get","message","details","field","originalValue","sanitizedValue","editable","parseFloat","String","TypeError","simplify","D","hasAttachments","capabilities","useStandardizedQueries","supportsCoordinatesQuantization","supportsReturningQueryGeometry","advancedQueryCapabilities","supportsQueryAttachments","supportsStatistics","supportsPercentileStatistics","supportsReturningGeometryCentroid","supportsQueryWithDistance","supportsDistinct","supportsReturningQueryExtent","supportsReturningGeometryProperties","supportsHavingClause","supportsOrderBy","supportsPagination","supportsQueryWithResultType","supportsSqlExpression","supportsDisjointSpatialRel","_queryEngine","destroy","_requiredFields","_fieldsIndex","_createDefaultAttributes","_checkProjection","spatialReference","url","responseType","T","q","objectIdField","x","timeInfo","some","nullable","unshift","jsonValues","indexOf","R","startTimeField","endTimeField","trackIdField","O","warnings","featureErrors","layerDefinition","drawingInfo","F","templates","extent","E","hasM","featureStore","_","j","_nextObjectId","S","I","_loadInitialFeatures","adds","updates","_applyEdits","executeQuery","signal","executeQueryForCount","executeQueryForIds","executeQueryForExtent","attributes","_assignObjectId","addMany","fullExtent","timeExtent","start","end","deletes","addResults","deleteResults","updateResults","uidToObjectId","_applyAddEdits","_applyUpdateEdits","removeManyById","featureEditResults","uid","getFeature","isFinite","minX","minY","maxX","maxY","_indexInvalid","_boundsToLoad","_boundsById","Map","_idByBounds","_index","_loadIndex","Array","size","load","remove","search","set","getObjectId","getAttributes","getAttribute","cloneWithGeometry","getGeometry","getCentroid","centroid","geometryInfo","_boundsStore","_featuresById","_markedIds","events","featureAdapter","_add","_emitChanged","_remove","invalidateIndex","forEachInBounds","emit","displayId","onFeatureAdd","getLogger","feature","onFeatureRemove","numFeatures","min","featureCount","vertexCount"],"mappings":"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","file":"static/js/46.19cf1a09.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import t from\"../../OptimizedFeature.js\";import n from\"../../OptimizedGeometry.js\";function o(e){const t=[];return e.forEach((e=>t.push(e))),t}const r={LineString:\"esriGeometryPolyline\",MultiLineString:\"esriGeometryPolyline\",MultiPoint:\"esriGeometryMultipoint\",Point:\"esriGeometryPoint\",Polygon:\"esriGeometryPolygon\",MultiPolygon:\"esriGeometryPolygon\"};function*i(e){switch(e.type){case\"Feature\":yield e;break;case\"FeatureCollection\":for(const t of e.features)t&&(yield t)}}function*s(e){if(!e)return null;switch(e.type){case\"Point\":yield e.coordinates;break;case\"LineString\":case\"MultiPoint\":yield*e.coordinates;break;case\"MultiLineString\":case\"Polygon\":for(const t of e.coordinates)yield*t;break;case\"MultiPolygon\":for(const t of e.coordinates)for(const e of t)yield*e}}function c(e){for(;;){const{value:t,done:n}=e.next();if(n)return!1;if(t.length>2)return!0}}function u(e){let t=0;for(let n=0;n<e.length;n++){const o=e[n],r=e[(n+1)%e.length];t+=o[0]*r[1]-r[0]*o[1]}return t<=0}function l(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function f(e,t,n){switch(t.type){case\"LineString\":return function(e,t,n){return p(e,t.coordinates,n),e}(e,t,n);case\"MultiLineString\":return function(e,t,n){for(const o of t.coordinates)p(e,o,n);return e}(e,t,n);case\"MultiPoint\":return function(e,t,n){return p(e,t.coordinates,n),e}(e,t,n);case\"MultiPolygon\":return function(e,t,n){for(const o of t.coordinates){a(e,o[0],n);for(let t=1;t<o.length;t++)y(e,o[t],n)}return e}(e,t,n);case\"Point\":return function(e,t,n){return g(e,t.coordinates,n),e}(e,t,n);case\"Polygon\":return function(e,t,n){const o=t.coordinates;a(e,o[0],n);for(let t=1;t<o.length;t++)y(e,o[t],n);return e}(e,t,n)}}function a(e,t,n){const o=l(t);u(o)?p(e,o,n):d(e,o,n)}function y(e,t,n){const o=l(t);u(o)?d(e,o,n):p(e,o,n)}function p(e,t,n){for(const o of t)g(e,o,n);e.lengths.push(t.length)}function d(e,t,n){for(let o=t.length-1;o>=0;o--)g(e,t[o],n);e.lengths.push(t.length)}function g(e,t,n){const[o,r,i]=t;e.coords.push(o,r),n.hasZ&&e.coords.push(i||0)}function m(e){switch(typeof e){case\"string\":return\"esriFieldTypeString\";case\"number\":return\"esriFieldTypeDouble\";default:return\"unknown\"}}function h(t){if(!t)throw new e(\"geojson-layer:empty\",\"GeoJSON data is empty\");if(\"Feature\"!==t.type&&\"FeatureCollection\"!==t.type)throw new e(\"geojson-layer:unsupported-geojson-object\",\"missing or not supported GeoJSON object type\",{data:t});const{crs:n}=t;if(!n)return;const o=\"string\"==typeof n?n:\"name\"===n.type?n.properties.name:null,r=new RegExp(\".*(CRS84H?|4326)$\",\"i\");if(!o||!r.test(o))throw new e(\"geojson-layer:unsupported-crs\",\"unsupported GeoJSON 'crs' member\",{crs:n})}function w(e,t={}){const n=i(e),u=[],l=new Set,f=new Set;let a,y=!1,p=Number.NEGATIVE_INFINITY,d=null,g=!1,{geometryType:h=null}=t,w=!1;for(;;){const{value:e,done:t}=n.next();if(t){const e=d&&1===d.length&&d[0]||null;if(e)for(const t of u)t.name===e&&(t.type=\"esriFieldTypeOID\");return{fields:u,geometryType:h,hasZ:y,maxObjectId:Math.max(0,p),objectIdFieldName:e,objectIdFieldType:a,unknownFields:o(f)}}const{geometry:i,properties:b,id:P}=e;if(!i||(h||(h=r[i.type]),r[i.type]===h)){if(!y){y=c(s(i))}if(g||(g=null!=P,g&&(a=typeof P,\"number\"===a&&(d=Object.keys(b).filter((e=>b[e]===P))))),g&&\"number\"===a&&null!=P&&(p=Math.max(p,P),d.length>1?d=d.filter((e=>b[e]===P)):1===d.length&&(d=b[d[0]]===P?d:[])),!w&&b){let e=!0;for(const t in b){if(l.has(t))continue;const n=b[t];if(null==n){e=!1,f.add(t);continue}const o=m(n);\"unknown\"!==o?(f.delete(t),l.add(t),u.push({name:t,alias:t,type:o})):f.add(t)}w=e}}}}function b(e,o){return function(e){const t=[];for(;;){const{value:n,done:o}=e.next();if(o)return t;t.push(n)}}(function*(e,o={}){const{geometryType:i,objectIdFieldName:s}=o;for(;;){const{value:c,done:u}=e.next();if(u)return;const{geometry:l,properties:a,id:y}=c;if(l&&r[l.type]!==i)continue;const p=a||{};s&&null!=y&&!p[s]&&(p[s]=y);const d=new t(l?f(new n,l,o):null,p);yield d}}(i(e),o))}export{b as createOptimizedFeatures,w as inferLayerProperties,h as validateGeoJSON};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isValid as t}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{sanitizeNullFieldValue as e,validateFieldValue as n,validationErrorToString as i,isNumericField as r,isStringField as s}from\"../../../support/fieldUtils.js\";class o{constructor(){this.code=null,this.description=null}}class l{constructor(t){this.error=new o,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=t}}function u(t){return new l(t)}class a{constructor(t){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=t}}function c(t){return new a(t)}const f=new Set;function d(t,e,r,s,o=!1,l){f.clear();for(const e in s){const a=t.get(e);if(!a)continue;const c=s[e],d=m(a,c);if(d!==c&&l&&l.push({name:\"invalid-value-type\",message:\"attribute value was converted to match the field type\",details:{field:a,originalValue:c,sanitizedValue:d}}),f.add(a.name),a&&(o||a.editable)){const t=n(a,d);if(t)return u(i(t,a,d));r[a.name]=d}}for(const t of e)if(!f.has(t.name))return u(`missing required field \"${t.name}\"`);return null}function m(t,n){let i=n;return\"string\"==typeof n&&r(t)?i=parseFloat(n):null!=n&&s(t)&&\"string\"!=typeof n&&(i=String(n)),e(i)}let p;function h(e,n){if(!e||!t(n))return e;if(\"rings\"in e||\"paths\"in e){if(!p)throw new TypeError(\"geometry engine not loaded\");return p.simplify(n,e)}return e}async function g(){return p||(p=await import(\"../../../../geometry/geometryEngineJSON.js\"),p)}async function y(e,n){!t(e)||\"esriGeometryPolygon\"!==n&&\"esriGeometryPolyline\"!==n||await g()}export{u as createFeatureEditErrorResult,c as createFeatureEditSuccessResult,g as loadGeometryEngine,y as loadGeometryEngineForSimplify,d as mixAttributes,h as simplify};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import{all as t}from\"../../../../core/promiseUtils.js\";import{WGS84 as i,equals as s}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{getJsonType as r}from\"../../../../geometry/support/jsonUtils.js\";import{getFieldDefaultValue as n}from\"../../../support/fieldUtils.js\";import o from\"../../../../request.js\";import{kebabDict as a}from\"../../../support/fieldType.js\";import{convertFromGeometry as l,convertToGeometry as d,convertFromFeatures as u,convertToFeature as p,convertFromFeature as y}from\"../../featureConversionUtils.js\";import f from\"../../../support/FieldsIndex.js\";import{project as m,checkProjectionSupport as c}from\"../../data/projectionSupport.js\";import{validateGeoJSON as h,inferLayerProperties as g,createOptimizedFeatures as I}from\"./geojson.js\";import{createDrawingInfo as F,createDefaultTemplate as b,createDefaultAttributesFunction as j}from\"../support/clientSideDefaults.js\";import _ from\"../../data/FeatureStore.js\";import E from\"../../data/QueryEngine.js\";import{loadGeometryEngineForSimplify as T,mixAttributes as q,createFeatureEditSuccessResult as x,createFeatureEditErrorResult as w,simplify as R}from\"../support/sourceUtils.js\";const D={hasAttachments:!1,capabilities:\"query, editing, create, delete, update\",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};export default class{constructor(){this._queryEngine=null}destroy(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=this._requiredFields=this._fieldsIndex=this._createDefaultAttributes=null}async load(t){const r=[];await this._checkProjection(t.spatialReference);let u=null;if(t.url){u=(await o(t.url,{responseType:\"json\"})).data,await h(u)}const p=g(u,{geometryType:t.geometryType}),y=t.fields||p.fields||[],c=null!=t.hasZ?t.hasZ:p.hasZ,T=p.geometryType,q=t.objectIdField||(\"number\"===p.objectIdFieldType?p.objectIdFieldName:\"OBJECTID\")||\"OBJECTID\",x=t.spatialReference||i;let w=t.timeInfo;if(!T)throw new e(\"geojson-layer:missing-property\",\"geometryType not set and couldn't be inferred from the provided features\");if(\"string\"===p.objectIdFieldType&&r.push({name:\"geojson-layer:unsupported-id-type\",message:\"Feature ids are of type string and can't be honored.\"}),y===p.fields&&p.unknownFields.length>0&&r.push({name:\"geojson-layer:unknown-field-types\",message:\"Some fields types couldn't be inferred from the features and were dropped\",details:{unknownFields:p.unknownFields}}),q){let e=null;y.some((t=>t.name===q&&(e=t,!0)))?(e.type=\"esriFieldTypeOID\",e.editable=!1,e.nullable=!1):y.unshift({alias:q,name:q,type:\"esriFieldTypeOID\",editable:!1,nullable:!1})}for(const t of y){if(null==t.name&&(t.name=t.alias),null==t.alias&&(t.alias=t.name),!t.name)throw new e(\"geojson-layer:invalid-field-name\",\"field name is missing\",{field:t});if(t.name===q&&(t.type=\"esriFieldTypeOID\"),-1===a.jsonValues.indexOf(t.type))throw new e(\"geojson-layer:invalid-field-type\",`invalid type for field \"${t.name}\"`,{field:t})}const R={};this._requiredFields=[];for(const e of y)if(\"esriFieldTypeOID\"!==e.type&&\"esriFieldTypeGlobalID\"!==e.type){e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable;const t=n(e);e.nullable||void 0!==t?R[e.name]=t:this._requiredFields.push(e)}if(this._fieldsIndex=new f(y),w){if(w.startTimeField){const e=this._fieldsIndex.get(w.startTimeField);e?(w.startTimeField=e.name,e.type=\"esriFieldTypeDate\"):w.startTimeField=null}if(w.endTimeField){const e=this._fieldsIndex.get(w.endTimeField);e?(w.endTimeField=e.name,e.type=\"esriFieldTypeDate\"):w.endTimeField=null}if(w.trackIdField){const e=this._fieldsIndex.get(w.trackIdField);e?w.trackIdField=e.name:(w.trackIdField=null,r.push({name:\"geojson-layer:invalid-timeInfo-trackIdField\",message:\"trackIdField is missing\",details:{timeInfo:w}}))}w.startTimeField||w.endTimeField||(r.push({name:\"geojson-layer:invalid-timeInfo\",message:\"startTimeField and endTimeField are missing\",details:{timeInfo:w}}),w=null)}const O={warnings:r,featureErrors:[],layerDefinition:{...D,drawingInfo:F(T),templates:b(R),extent:null,geometryType:T,objectIdField:q,fields:y,hasZ:!!c,timeInfo:w}};this._queryEngine=new E({fields:y,geometryType:T,hasM:!1,hasZ:c,objectIdField:q,spatialReference:x,timeInfo:w,featureStore:new _({geometryType:T,hasM:!1,hasZ:c})}),this._createDefaultAttributes=j(R,q),this._nextObjectId=p.maxObjectId+1;const S=I(u,{geometryType:T,hasZ:c,objectIdFieldName:\"number\"===p.objectIdFieldType?q:null});if(!s(x,i))for(const e of S)e.geometry&&(e.geometry=l(m(d(e.geometry,T,c,!1),i,x)));return this._loadInitialFeatures(O,S),O}async applyEdits(e){const{spatialReference:i,geometryType:s}=this._queryEngine;return await t([T(i,s),c(e.adds,i),c(e.updates,i)]),this._applyEdits(e)}async queryFeatures(e={},t={}){return this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e={},t={}){return this._queryEngine.executeQueryForExtent(e,t.signal)}_loadInitialFeatures(e,t){const{featureStore:i,objectIdField:s}=this._queryEngine,r=[];for(const i of t){const t=this._createDefaultAttributes(),n=q(this._fieldsIndex,this._requiredFields,t,i.attributes,!0,e.warnings);n?e.featureErrors.push(n):(this._assignObjectId(t,i.attributes,!0),i.attributes=t,i.objectId=t[s],r.push(i))}if(i.addMany(r),e.layerDefinition.extent=this._queryEngine.fullExtent,e.layerDefinition.timeInfo){const{start:t,end:i}=this._queryEngine.timeExtent;e.layerDefinition.timeInfo.timeExtent=[t,i]}return e}_applyEdits(e){const{adds:t,updates:i,deletes:s}=e,r={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(t&&t.length&&this._applyAddEdits(r,t),i&&i.length&&this._applyUpdateEdits(r,i),s&&s.length){for(const e of s)r.deleteResults.push(x(e));this._queryEngine.featureStore.removeManyById(s)}return{fullExtent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent,featureEditResults:r}}_applyAddEdits(e,t){const{addResults:i}=e,{geometryType:s,hasM:n,hasZ:o,objectIdField:a,spatialReference:l,featureStore:d}=this._queryEngine,p=[];for(const n of t){if(n.geometry&&s!==r(n.geometry)){i.push(w(\"Incorrect geometry type.\"));continue}const t=this._createDefaultAttributes(),o=q(this._fieldsIndex,this._requiredFields,t,n.attributes);if(o)i.push(o);else{if(this._assignObjectId(t,n.attributes),n.attributes=t,null!=n.uid){const t=n.attributes[a];e.uidToObjectId[n.uid]=t}n.geometry&&(n.geometry=m(R(n.geometry,l),n.geometry.spatialReference,l)),p.push(n),i.push(x(n.attributes[a]))}}d.addMany(u([],p,s,o,n,a))}_applyUpdateEdits({updateResults:e},t){const{geometryType:i,hasM:s,hasZ:n,objectIdField:o,spatialReference:a,featureStore:l}=this._queryEngine;for(const d of t){const{attributes:t,geometry:u}=d,f=t&&t[o];if(null==f){e.push(w(`Identifier field ${o} missing`));continue}if(!l.has(f)){e.push(w(`Feature with object id ${f} missing`));continue}const c=p(l.getFeature(f),i,n,s);if(u){if(i!==r(u)){e.push(w(\"Incorrect geometry type.\"));continue}c.geometry=m(R(u,a),u.spatialReference,a)}if(t){const i=q(this._fieldsIndex,this._requiredFields,c.attributes,t);if(i){e.push(i);continue}}l.add(y(c,i,n,s,o)),e.push(x(f))}}_assignObjectId(e,t,i=!1){const s=this._queryEngine.objectIdField;i&&isFinite(t[s])?e[s]=t[s]:e[s]=this._nextObjectId++}async _checkProjection(t){try{await c(i,t)}catch{throw new e(\"geojson-layer\",\"Projection not supported\")}}}\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport s from\"../../../core/has.js\";import{r as i}from\"../../../chunks/rbush.js\";const d={minX:0,minY:0,maxX:0,maxY:0};class n{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=i(9,s(\"csp-restrictions\")?s=>({minX:s[0],minY:s[1],maxX:s[2],maxY:s[3]}):[\"[0]\",\"[1]\",\"[2]\",\"[3]\"]),this._loadIndex=()=>{if(this._indexInvalid){const s=new Array(this._idByBounds.size);let i=0;this._idByBounds.forEach(((d,n)=>{s[i++]=n})),this._indexInvalid=!1,this._index.clear(),this._index.load(s)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter((s=>this._idByBounds.has(s)))),this._boundsToLoad.length=0)}}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(s){const i=this._boundsById.get(s);this._boundsById.delete(s),i&&(this._idByBounds.delete(i),this._indexInvalid||this._index.remove(i))}forEachInBounds(s,i){this._loadIndex();for(const n of function(s,i){return d.minX=i[0],d.minY=i[1],d.maxX=i[2],d.maxY=i[3],s.search(d)}(this._index,s))i(this._idByBounds.get(n))}get(s){return this._boundsById.get(s)}has(s){return this._boundsById.has(s)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(s,i){if(!this._indexInvalid){const i=this._boundsById.get(s);i&&(this._index.remove(i),this._idByBounds.delete(i))}this._boundsById.set(s,i),i&&(this._idByBounds.set(i,s),this._indexInvalid||(this._boundsToLoad.push(i),this._boundsToLoad.length>5e4&&this._loadIndex()))}}export{n as BoundsStore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport t from\"../OptimizedFeature.js\";import e from\"../OptimizedGeometry.js\";import{getCentroidOptimizedGeometry as r}from\"../centroid.js\";const o={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(e,r)=>new t(r,e.attributes,null,e.objectId),getGeometry:t=>t.geometry,getCentroid:(t,o)=>(t.centroid||(t.centroid=r(new e,t.geometry,o.hasZ,o.hasM)),t.centroid)};export default o;export{o as optimizedFeatureQueryEngineAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import t from\"../../../core/Logger.js\";import r from\"../../../core/Error.js\";import s from\"../../../core/Evented.js\";import{create as o,NEGATIVE_INFINITY as i}from\"../../../geometry/support/aaBoundingRect.js\";import{getBoundsOptimizedGeometry as a}from\"../featureConversionUtils.js\";import{fromRect as d}from\"../../../geometry/support/aaBoundingBox.js\";import{BoundsStore as n}from\"./BoundsStore.js\";import{optimizedFeatureQueryEngineAdapter as h}from\"./optimizedFeatureQueryEngineAdapter.js\";export default class{constructor(e){this.geometryInfo=e,this._boundsStore=new n,this._featuresById=new Map,this._markedIds=new Set,this.events=new s,this.featureAdapter=h}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){if(!this.numFeatures)return null;const e=o(i);return this._featuresById.forEach((t=>{const r=this._boundsStore.get(t.objectId);r&&(e[0]=Math.min(r[0],e[0]),e[1]=Math.min(r[1],e[1]),e[2]=Math.max(r[2],e[2]),e[3]=Math.max(r[3],e[3]))})),e}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t,r){for(const s of e){const e=this._boundsStore.get(s.objectId);e&&t(d(r,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach(((t,r)=>{this._markedIds.has(r)||(e=!0,this._remove(t))})),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit(\"changed\",void 0)}_add(s){if(!s)return;const i=s.objectId;if(null==i)return void t.getLogger(\"esri.layers.graphics.data.FeatureStore\").error(new r(\"featurestore:invalid-feature\",\"feature id is missing\",{feature:s}));const d=this._featuresById.get(i);let n;if(this._markedIds.add(i),d?(s.displayId=d.displayId,n=this._boundsStore.get(i),this._boundsStore.delete(i)):e(this.onFeatureAdd)&&this.onFeatureAdd(s),!s.geometry||!s.geometry.coords||!s.geometry.coords.length)return this._boundsStore.set(i,null),void this._featuresById.set(i,s);n=a(n||o(),s.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(i,n),this._featuresById.set(i,s)}_remove(t){return e(this.onFeatureRemove)&&this.onFeatureRemove(t),this._markedIds.delete(t.objectId),this._boundsStore.delete(t.objectId),this._featuresById.delete(t.objectId),t}}\n"],"sourceRoot":""}