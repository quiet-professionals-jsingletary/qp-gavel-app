(this["webpackJsonpqp-ampd-app"]=this["webpackJsonpqp-ampd-app"]||[]).push([[116],{882:function(e,t,r){"use strict";r.r(t);var a=r(8),i=r.n(a),n=r(11),o=r(22),s=r(16),l=r(2),c=r(3),u=r(51),p=r(52),y=r(49),b=r(4),d=r(5),O=r(0),j=(r(13),r(18)),f=r(10),v=r(12),h=r(14),g=r(1),m=r(28),w=r(6),S=r(21),k=r(9),x=r(19),F=(r(20),r(15)),I=r(36),T=r(57),L=r(42),B=r(399),E=r(398),A=r(183),q=r(184),_=r(185),N=r(228),M=r(233),R=r(227),P=r(229),Q=r(34),D=r(29),U=r(232),V=r(58),C=r(235),J=r(101),K=r(308),H=(r(105),r(295),r(297),r(353),r(355),r(356),r(303),r(269)),Z=(r(539),r(392)),G=r(838),z=r(397),W=r(349),X=r(679),Y=r(243),$=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var a;return Object(l.a)(this,r),(a=t.call(this,e)).title="",a.id=-1,a.modelName=null,a.isEmpty=null,a.visible=!0,a.opacity=1,a}return Object(c.a)(r,[{key:"readTitle",value:function(e,t){return"string"==typeof t.alias?t.alias:"string"==typeof t.name?t.name:""}},{key:"readIdOnlyOnce",value:function(e){return-1!==this.id?this.id:"number"==typeof e?e:void 0}}]),r}(Object(Y.a)(q.b));Object(O.a)([Object(g.b)({type:String,json:{origins:{"web-scene":{write:!0},"portal-item":{write:!0}}}})],$.prototype,"title",void 0),Object(O.a)([Object(m.a)("service","title",["alias","name"])],$.prototype,"readTitle",null),Object(O.a)([Object(g.b)()],$.prototype,"layer",void 0),Object(O.a)([Object(g.b)({type:h.a,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],$.prototype,"id",void 0),Object(O.a)([Object(m.a)("service","id")],$.prototype,"readIdOnlyOnce",null),Object(O.a)([Object(g.b)(Object(_.h)(String))],$.prototype,"modelName",void 0),Object(O.a)([Object(g.b)(Object(_.h)(Boolean))],$.prototype,"isEmpty",void 0),Object(O.a)([Object(g.b)({type:Boolean,json:{name:"visibility",write:!0}})],$.prototype,"visible",void 0),Object(O.a)([Object(g.b)({type:Number,json:{write:!0}})],$.prototype,"opacity",void 0);var ee=$=Object(O.a)([Object(w.a)("esri.layers.buildingSublayers.BuildingSublayer")],$),te=r(957),re=r(863),ae=Object(G.a)(),ie=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var a;return Object(l.a)(this,r),(a=t.call(this,e)).type="building-component",a.nodePages=null,a.materialDefinitions=null,a.textureSetDefinitions=null,a.geometryDefinitions=null,a.serviceUpdateTimeStamp=null,a.fields=null,a.associatedLayer=null,a.outFields=null,a.listMode="show",a.renderer=null,a.definitionExpression=null,a.popupEnabled=!0,a.popupTemplate=null,a.layerType="3d-object",a}return Object(c.a)(r,[{key:"readAssociatedLayer",value:function(e,t){var r=this.layer.associatedFeatureServiceItem,a=t.associatedLayerID;return Object(f.g)(r)&&"number"==typeof a?new X.default({portalItem:r,layerId:a}):null}},{key:"load",value:function(e){var t=Object(f.g)(e)?e.signal:null;return this.addResolvingPromise(this._fetchService(t)),Object(F.s)(this)}},{key:"createPopupTemplate",value:function(e){return Object(z.a)(this,e)}},{key:"_fetchService",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(V.default)(this.parsedUrl.path,{query:{f:"json"},responseType:"json",signal:t});case 2:r=e.sent.data,this.read(r,{origin:"service",url:this.parsedUrl});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"getFieldDomain",value:function(e){var t=this.getField(e);return t&&t.domain?t.domain:null}},{key:"createQuery",value:function(){var e=new W.a;return"mesh"!==this.geometryType&&(e.returnGeometry=!0,e.returnZ=!0),e.where=this.definitionExpression||"1=1",e.sqlFormat="standard",e}},{key:"queryExtent",value:function(e,t){var r=this;return this._getAssociatedLayerForQuery().then((function(a){return a.queryExtent(e||r.createQuery(),t)}))}},{key:"queryFeatureCount",value:function(e,t){var r=this;return this._getAssociatedLayerForQuery().then((function(a){return a.queryFeatureCount(e||r.createQuery(),t)}))}},{key:"queryFeatures",value:function(e,t){var r=this;return this._getAssociatedLayerForQuery().then((function(a){return a.queryFeatures(e||r.createQuery(),t)})).then((function(e){if(e&&e.features){var t,a=Object(s.a)(e.features);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.layer=r.layer,i.sourceLayer=r}}catch(n){a.e(n)}finally{a.f()}}return e}))}},{key:"queryObjectIds",value:function(e,t){var r=this;return this._getAssociatedLayerForQuery().then((function(a){return a.queryObjectIds(e||r.createQuery(),t)}))}},{key:"getFieldUsageInfo",value:function(e){return this.fieldsIndex.has(e)?{supportsLabelingInfo:!1,supportsRenderer:!1,supportsPopupTemplate:!1,supportsLayerQuery:!1}:{supportsLabelingInfo:!1,supportsRenderer:!0,supportsPopupTemplate:!0,supportsLayerQuery:Object(f.g)(this.associatedLayer)}}},{key:"_getAssociatedLayerForQuery",value:function(){var e=this.associatedLayer;return Object(f.g)(e)&&e.loaded?Object(F.s)(e):this._loadAssociatedLayerForQuery()}},{key:"_loadAssociatedLayerForQuery",value:function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(!Object(f.f)(this.associatedLayer)){e.next=4;break}throw new S.a("buildingscenelayer:query-not-available","BuildingSceneLayer component layer queries are not available without an associated feature layer",{layer:this});case 4:return e.prev=4,e.next=7,this.associatedLayer.load();case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(4),new S.a("buildingscenelayer:query-not-available","BuildingSceneLayer associated feature layer could not be loaded",{layer:this,error:e.t0});case 12:return e.abrupt("return",this.associatedLayer);case 13:case"end":return e.stop()}}),e,this,[[4,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"parsedUrl",get:function(){return this.layer?{path:"".concat(this.layer.parsedUrl.path,"/sublayers/").concat(this.id),query:this.layer.parsedUrl.query}:null}},{key:"fieldsIndex",get:function(){return new Z.a(this.fields)}},{key:"objectIdField",get:function(){if(null!=this.fields){var e,t=Object(s.a)(this.fields);try{for(t.s();!(e=t.n()).done;){var r=e.value;if("oid"===r.type)return r.name}}catch(a){t.e(a)}finally{t.f()}}return null}},{key:"displayField",get:function(){return Object(f.g)(this.associatedLayer)?this.associatedLayer.displayField:null}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"geometryType",get:function(){return"3d-object"===this.layerType?"mesh":"point"}},{key:"profile",get:function(){return"3d-object"===this.layerType?"mesh-pyramids":"points"}},{key:"capabilities",get:function(){var e=Object(f.g)(this.associatedLayer)&&this.associatedLayer.capabilities?this.associatedLayer.capabilities:te.a,t=e.query,r=e.data;return{query:t,data:{supportsZ:r.supportsZ,supportsM:r.supportsM,isVersioned:r.isVersioned}}}}]),r}(J.a.LoadableMixin(Object(C.b)(ee)));Object(O.a)([Object(g.b)({readOnly:!0,dependsOn:["layer","id"]})],ie.prototype,"parsedUrl",null),Object(O.a)([Object(g.b)({type:re.c,readOnly:!0})],ie.prototype,"nodePages",void 0),Object(O.a)([Object(g.b)({type:[re.b],readOnly:!0})],ie.prototype,"materialDefinitions",void 0),Object(O.a)([Object(g.b)({type:[re.d],readOnly:!0})],ie.prototype,"textureSetDefinitions",void 0),Object(O.a)([Object(g.b)({type:[re.a],readOnly:!0})],ie.prototype,"geometryDefinitions",void 0),Object(O.a)([Object(g.b)({readOnly:!0})],ie.prototype,"serviceUpdateTimeStamp",void 0),Object(O.a)([Object(g.b)({readOnly:!0})],ie.prototype,"store",void 0),Object(O.a)([Object(g.b)({type:String,readOnly:!0,json:{read:{source:"store.rootNode"}}})],ie.prototype,"rootNode",void 0),Object(O.a)([Object(g.b)({readOnly:!0})],ie.prototype,"attributeStorageInfo",void 0),Object(O.a)([Object(g.b)(ae.fields)],ie.prototype,"fields",void 0),Object(O.a)([Object(g.b)({readOnly:!0,dependsOn:["fields"]})],ie.prototype,"fieldsIndex",null),Object(O.a)([Object(g.b)({readOnly:!0,type:X.default})],ie.prototype,"associatedLayer",void 0),Object(O.a)([Object(m.a)("service","associatedLayer",["associatedLayerID"])],ie.prototype,"readAssociatedLayer",null),Object(O.a)([Object(g.b)(ae.outFields)],ie.prototype,"outFields",void 0),Object(O.a)([Object(g.b)({type:String,dependsOn:["fields"],readOnly:!0})],ie.prototype,"objectIdField",null),Object(O.a)([Object(g.b)({readOnly:!0,type:String,json:{read:!1},dependsOn:["associatedLayer.displayField"]})],ie.prototype,"displayField",null),Object(O.a)([Object(g.b)({readOnly:!0,type:T.a,aliasOf:"layer.fullExtent"})],ie.prototype,"fullExtent",void 0),Object(O.a)([Object(g.b)({readOnly:!0,type:I.a,aliasOf:"layer.spatialReference"})],ie.prototype,"spatialReference",void 0),Object(O.a)([Object(g.b)({readOnly:!0,aliasOf:"layer.version"})],ie.prototype,"version",void 0),Object(O.a)([Object(g.b)({readOnly:!0,type:K.a,aliasOf:"layer.elevationInfo"})],ie.prototype,"elevationInfo",void 0),Object(O.a)([Object(g.b)({readOnly:!0,type:Number,aliasOf:"layer.minScale"})],ie.prototype,"minScale",void 0),Object(O.a)([Object(g.b)({readOnly:!0,type:Number,aliasOf:"layer.maxScale"})],ie.prototype,"maxScale",void 0),Object(O.a)([Object(g.b)({type:["hide","show"],json:{write:!0}})],ie.prototype,"listMode",void 0),Object(O.a)([Object(g.b)({types:H.b,json:{origins:{service:{read:{source:"drawingInfo.renderer"}}},name:"layerDefinition.drawingInfo.renderer",write:!0},value:null})],ie.prototype,"renderer",void 0),Object(O.a)([Object(g.b)({type:String,json:{origins:{service:{read:!1,write:!1}},read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],ie.prototype,"definitionExpression",void 0),Object(O.a)([Object(g.b)(_.g)],ie.prototype,"popupEnabled",void 0),Object(O.a)([Object(g.b)({type:U.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],ie.prototype,"popupTemplate",void 0),Object(O.a)([Object(g.b)({readOnly:!0,type:String,json:{origins:{service:{read:{source:"store.normalReferenceFrame"}}},read:!1}})],ie.prototype,"normalReferenceFrame",void 0),Object(O.a)([Object(g.b)({readOnly:!0,json:{read:!1},dependsOn:["fields","title"]})],ie.prototype,"defaultPopupTemplate",null),Object(O.a)([Object(g.b)({json:{write:!1}}),Object(D.a)(new Q.a({"3DObject":"3d-object",Point:"point"}))],ie.prototype,"layerType",void 0),Object(O.a)([Object(g.b)({dependsOn:["layerType"]})],ie.prototype,"geometryType",null),Object(O.a)([Object(g.b)({dependsOn:["layerType"]})],ie.prototype,"profile",null),Object(O.a)([Object(g.b)({readOnly:!0,json:{read:!1},dependsOn:["associatedLayer.capabilities"]})],ie.prototype,"capabilities",null);var ne,oe=ie=Object(O.a)([Object(w.a)("esri.layers.buildingSublayers.BuildingComponentSublayer")],ie),se=r(116),le={type:L.a,readOnly:!0,json:{origins:{service:{read:{source:"sublayers",reader:ce}}},read:!1}};function ce(e,t,r){if(e&&Array.isArray(e))return new L.a(e.map((function(e){var t=function(e){return"group"===e.layerType?pe:oe}(e);if(t){var a=new t;return a.read(e,r),a}r&&r.messages&&e&&r.messages.push(new se.a("building-scene-layer:unsupported-sublayer-type","Building scene sublayer of type '"+(e.type||"unknown")+"' are not supported",{definition:e,context:r}))})))}var ue,pe=ne=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var a;return Object(l.a)(this,r),(a=t.call(this,e)).type="building-group",a.listMode="show",a.sublayers=null,a}return Object(c.a)(r,[{key:"loadAll",value:function(){var e=this;return Object(B.b)(this,(function(t){return ne.forEachSublayer(e.sublayers,(function(e){"building-group"!==e.type&&t(e)}))}))}}]),r}(ee);Object(O.a)([Object(g.b)({type:["hide","show","hide-children"],json:{write:!0}})],pe.prototype,"listMode",void 0),Object(O.a)([Object(g.b)(le)],pe.prototype,"sublayers",void 0),pe=ne=Object(O.a)([Object(w.a)("esri.layers.buildingSublayers.BuildingGroupSublayer")],pe),(ue=pe||(pe={})).sublayersProperty=le,ue.readSublayers=ce,ue.forEachSublayer=function e(t,r){t.forEach((function(t){r(t),"building-group"===t.type&&e(t.sublayers,r)}))};var ye=pe,be=r(891),de=r(23),Oe=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(){var e;return Object(l.a)(this,r),(e=t.apply(this,arguments)).type=null,e}return r}(de.a);Object(O.a)([Object(g.b)({type:String,readOnly:!0,json:{write:!0}})],Oe.prototype,"type",void 0);var je,fe=Oe=Object(O.a)([Object(w.a)("esri.layers.support.BuildingFilterAuthoringInfo")],Oe),ve=je=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(){var e;return Object(l.a)(this,r),(e=t.apply(this,arguments)).filterType=null,e.filterValues=null,e}return Object(c.a)(r,[{key:"clone",value:function(){return new je({filterType:this.filterType,filterValues:Object(j.a)(this.filterValues)})}}]),r}(de.a);Object(O.a)([Object(g.b)({type:String,json:{write:!0}})],ve.prototype,"filterType",void 0),Object(O.a)([Object(g.b)({type:[String],json:{write:!0}})],ve.prototype,"filterValues",void 0);var he,ge=ve=je=Object(O.a)([Object(w.a)("esri.layers.support.BuildingFilterAuthoringInfoType")],ve),me=L.a.ofType(ge),we=he=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"clone",value:function(){return new he({filterTypes:Object(j.a)(this.filterTypes)})}}]),r}(de.a);Object(O.a)([Object(g.b)({type:me,json:{write:!0}})],we.prototype,"filterTypes",void 0);var Se,ke=we=he=Object(O.a)([Object(w.a)("esri.layers.support.BuildingFilterAuthoringInfoBlock")],we),xe=L.a.ofType(ke),Fe=Se=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(){var e;return Object(l.a)(this,r),(e=t.apply(this,arguments)).type="checkbox",e}return Object(c.a)(r,[{key:"clone",value:function(){return new Se({filterBlocks:Object(j.a)(this.filterBlocks)})}}]),r}(fe);Object(O.a)([Object(g.b)({type:["checkbox"]})],Fe.prototype,"type",void 0),Object(O.a)([Object(g.b)({type:xe,json:{write:!0}})],Fe.prototype,"filterBlocks",void 0);var Ie=Fe=Se=Object(O.a)([Object(w.a)("esri.layers.support.BuildingFilterAuthoringInfoCheckbox")],Fe),Te=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return r}(de.a);Object(O.a)([Object(g.b)({readOnly:!0,json:{read:!1}})],Te.prototype,"type",void 0);var Le,Be=Te=Object(O.a)([Object(w.a)("esri.layers.support.BuildingFilterMode")],Te),Ee=Le=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(){var e;return Object(l.a)(this,r),(e=t.apply(this,arguments)).type="solid",e}return Object(c.a)(r,[{key:"clone",value:function(){return new Le}}]),r}(Be);Object(O.a)([Object(g.b)({type:["solid"],readOnly:!0,json:{write:!0}})],Ee.prototype,"type",void 0);var Ae,qe=Ee=Le=Object(O.a)([Object(w.a)("esri.layers.support.BuildingFilterModeSolid")],Ee),_e=r(322),Ne=Ae=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(){var e;return Object(l.a)(this,r),(e=t.apply(this,arguments)).type="wire-frame",e.edges=null,e}return Object(c.a)(r,[{key:"clone",value:function(){return new Ae({edges:Object(j.a)(this.edges)})}}]),r}(Be);Object(O.a)([Object(D.a)({wireFrame:"wire-frame"})],Ne.prototype,"type",void 0),Object(O.a)([Object(g.b)(_e.a)],Ne.prototype,"edges",void 0);var Me,Re=Ne=Ae=Object(O.a)([Object(w.a)("esri.layers.support.BuildingFilterModeWireFrame")],Ne),Pe=Me=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(){var e;return Object(l.a)(this,r),(e=t.apply(this,arguments)).type="x-ray",e}return Object(c.a)(r,[{key:"clone",value:function(){return new Me}}]),r}(Be);Object(O.a)([Object(g.b)({type:["x-ray"],readOnly:!0,json:{write:!0}})],Pe.prototype,"type",void 0);var Qe,De=Pe=Me=Object(O.a)([Object(w.a)("esri.layers.support.BuildingFilterModeXRay")],Pe),Ue={nonNullable:!0,types:{key:"type",base:Be,typeMap:{solid:qe,"wire-frame":Re,"x-ray":De}},json:{read:function(e){switch(e&&e.type){case"solid":return qe.fromJSON(e);case"wireFrame":return Re.fromJSON(e);case"x-ray":return De.fromJSON(e);default:return}},write:{enabled:!0,isRequired:!0}}},Ve=Qe=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(){var e;return Object(l.a)(this,r),(e=t.apply(this,arguments)).filterExpression=null,e.filterMode=new qe,e.title="",e}return Object(c.a)(r,[{key:"clone",value:function(){return new Qe({filterExpression:this.filterExpression,filterMode:Object(j.a)(this.filterMode),title:this.title})}}]),r}(de.a);Object(O.a)([Object(g.b)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],Ve.prototype,"filterExpression",void 0),Object(O.a)([Object(g.b)(Ue)],Ve.prototype,"filterMode",void 0),Object(O.a)([Object(g.b)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],Ve.prototype,"title",void 0);var Ce,Je=Ve=Qe=Object(O.a)([Object(w.a)("esri.layers.support.BuildingFilterBlock")],Ve),Ke=L.a.ofType(Je),He=Ce=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(){var e;return Object(l.a)(this,r),(e=t.apply(this,arguments)).description=null,e.filterBlocks=null,e.id=Object(x.a)(),e.name=null,e}return Object(c.a)(r,[{key:"clone",value:function(){return new Ce({description:this.description,filterBlocks:Object(j.a)(this.filterBlocks),id:this.id,name:this.name,filterAuthoringInfo:Object(j.a)(this.filterAuthoringInfo)})}}]),r}(de.a);Object(O.a)([Object(g.b)({type:String,json:{write:!0}})],He.prototype,"description",void 0),Object(O.a)([Object(g.b)({type:Ke,json:{write:{enabled:!0,isRequired:!0}}})],He.prototype,"filterBlocks",void 0),Object(O.a)([Object(g.b)({types:{key:"type",base:fe,typeMap:{checkbox:Ie}},json:{read:function(e){switch(e&&e.type){case"checkbox":return Ie.fromJSON(e);default:return null}},write:!0}})],He.prototype,"filterAuthoringInfo",void 0),Object(O.a)([Object(g.b)({type:String,constructOnly:!0,json:{write:{enabled:!0,isRequired:!0}}})],He.prototype,"id",void 0),Object(O.a)([Object(g.b)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],He.prototype,"name",void 0);var Ze=He=Ce=Object(O.a)([Object(w.a)("esri.layers.support.BuildingFilter")],He),Ge=v.a.getLogger("esri.layers.support.BuildingSummaryStatistics"),ze=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(){var e;return Object(l.a)(this,r),(e=t.apply(this,arguments)).fieldName=null,e.modelName=null,e.label=null,e.min=null,e.max=null,e.mostFrequentValues=null,e.subLayerIds=null,e}return r}(de.a);Object(O.a)([Object(g.b)({type:String})],ze.prototype,"fieldName",void 0),Object(O.a)([Object(g.b)({type:String})],ze.prototype,"modelName",void 0),Object(O.a)([Object(g.b)({type:String})],ze.prototype,"label",void 0),Object(O.a)([Object(g.b)({type:Number})],ze.prototype,"min",void 0),Object(O.a)([Object(g.b)({type:Number})],ze.prototype,"max",void 0),Object(O.a)([Object(g.b)({json:{read:function(e){return Array.isArray(e)&&(e.every((function(e){return"string"==typeof e}))||e.every((function(e){return"number"==typeof e})))?e.slice():null}}})],ze.prototype,"mostFrequentValues",void 0),Object(O.a)([Object(g.b)({type:[Number]})],ze.prototype,"subLayerIds",void 0),ze=Object(O.a)([Object(w.a)("esri.layers.support.BuildingFieldStatistics")],ze);var We=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(){var e;return Object(l.a)(this,r),(e=t.apply(this,arguments)).url=null,e}return Object(c.a)(r,[{key:"load",value:function(e){var t=Object(f.g)(e)?e.signal:null;return this.addResolvingPromise(this._fetchService(t)),Object(F.s)(this)}},{key:"_fetchService",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(V.default)(this.url,{query:{f:"json"},responseType:"json",signal:t});case 2:r=e.sent.data,this.read(r,{origin:"service"});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fields",get:function(){return this.loaded||"loading"===this.loadStatus?this._get("fields"):(Ge.error("building summary statistics are not loaded"),null)}}]),r}(J.a.LoadableMixin(Object(C.b)(de.a)));Object(O.a)([Object(g.b)({constructOnly:!0,type:String})],We.prototype,"url",void 0),Object(O.a)([Object(g.b)({readOnly:!0,type:[ze],json:{read:{source:"summary"}}})],We.prototype,"fields",null);var Xe=We=Object(O.a)([Object(w.a)("esri.layers.support.BuildingSummaryStatistics")],We),Ye=r(959),$e=v.a.getLogger("esri.layers.BuildingSceneLayer"),et=L.a.ofType(Ze),tt=Object(j.a)(ye.sublayersProperty);tt.json.origins["web-scene"]={type:[oe],write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}},tt.json.origins["portal-item"]={type:[oe],write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}};var rt=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var a;return Object(l.a)(this,r),(a=t.call(this,e)).operationalLayerType="BuildingSceneLayer",a.allSublayers=new E.a({root:Object(u.a)(a),rootCollectionNames:["sublayers"],getChildrenFunction:function(e){return"building-group"===e.type?e.sublayers:null}}),a.sublayers=null,a.sublayerOverrides=null,a.filters=new et,a.activeFilterId=null,a.summaryStatistics=null,a.outFields=null,a.type="building-scene",a}return Object(c.a)(r,[{key:"normalizeCtorArgs",value:function(e){return"string"==typeof e?{url:e}:e}},{key:"destroy",value:function(){this.allSublayers.destroy()}},{key:"readSublayers",value:function(e,t,r){var a=this,i=ye.readSublayers(e,t,r);return ye.forEachSublayer(i,(function(e){return e.layer=a})),this.sublayerOverrides&&(this.applySublayerOverrides(i,this.sublayerOverrides),this.sublayerOverrides=null),i}},{key:"applySublayerOverrides",value:function(e,t){var r=t.overrides,a=t.context;ye.forEachSublayer(e,(function(e){return e.read(r.get(e.id),a)}))}},{key:"readSublayerOverrides",value:function(e,t){var r,a=new Map,i=Object(s.a)(e);try{for(i.s();!(r=i.n()).done;){var n=r.value;null!=n&&"object"==typeof n&&"number"==typeof n.id?a.set(n.id,n):t.messages.push(new S.a("building-scene-layer:invalid-sublayer-override","Invalid value for sublayer override. Not an object or no id specified.",{value:n}))}}catch(o){i.e(o)}finally{i.f()}return{overrides:a,context:t}}},{key:"writeSublayerOverrides",value:function(e,t,r){var a=[];ye.forEachSublayer(this.sublayers,(function(e){var t=e.write({},r);Object.keys(t).length>1&&a.push(t)})),a.length>0&&(t.sublayers=a)}},{key:"writeUnappliedOverrides",value:function(e,t){t.sublayers=[],e.overrides.forEach((function(e){t.sublayers.push(Object(j.a)(e))}))}},{key:"write",value:function(e,t){return e=Object(p.a)(Object(y.a)(r.prototype),"write",this).call(this,e,t),!t||"web-scene"!==t.origin&&"portal-item"!==t.origin||(this.sublayers?this.writeSublayerOverrides(this.sublayers,e,t):this.sublayerOverrides&&this.writeUnappliedOverrides(this.sublayerOverrides,e)),e}},{key:"read",value:function(e,t){if(Object(p.a)(Object(y.a)(r.prototype),"read",this).call(this,e,t),t&&("web-scene"===t.origin||"portal-item"===t.origin)&&null!=e&&Array.isArray(e.sublayers)){var a=this.readSublayerOverrides(e.sublayers,t);this.sublayers?this.applySublayerOverrides(this.sublayers,a):this.sublayerOverrides=a}}},{key:"readSummaryStatistics",value:function(e,t){if("string"==typeof t.statisticsHRef){var r=Object(k.x)(this.parsedUrl.path,t.statisticsHRef);return new Xe({url:r})}return null}},{key:"load",value:function(e){var t=this,r=Object(f.g)(e)?e.signal:null,a=this.loadFromPortal({supportedTypes:["Scene Service"]},e).catch((function(){})).then((function(){return t._fetchService(r)})).then((function(){return t._fetchAssociatedFeatureService(r)}));return this.addResolvingPromise(a),Object(F.s)(this)}},{key:"loadAll",value:function(){var e=this;return Object(B.a)(this,(function(t){ye.forEachSublayer(e.sublayers,(function(e){"building-group"!==e.type&&t(e)})),e.summaryStatistics&&t(e.summaryStatistics)}))}},{key:"saveAs",value:function(){var e=Object(o.a)(i.a.mark((function e(t,r){var a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._debouncedSaveOperations(1,Object(n.a)(Object(n.a)({},r),{},{getTypeKeywords:function(){return a._getTypeKeywords()},portalItemLayerType:"building-scene"}),t));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,r=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={getTypeKeywords:function(){return r._getTypeKeywords()},portalItemLayerType:"building-scene"},e.abrupt("return",this._debouncedSaveOperations(0,t));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validateLayer",value:function(e){if(!e.layerType||"Building"!==e.layerType)throw new S.a("buildingscenelayer:layer-type-not-supported","BuildingSceneLayer does not support this layer type",{layerType:e.layerType})}},{key:"_getTypeKeywords",value:function(){return["Building"]}},{key:"_validateElevationInfo",value:function(){var e=this.elevationInfo;e&&("absolute-height"!==e.mode&&$e.warn(".elevationInfo=","Building scene layers only support absolute-height elevation mode"),e.featureExpressionInfo&&"0"!==e.featureExpressionInfo.expression&&$e.warn(".elevationInfo=","Building scene layers do not support featureExpressionInfo"))}},{key:"_fetchAssociatedFeatureService",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Ye.a(this.parsedUrl,this.portalItem,t),e.prev=1,e.next=4,r.fetchPortalItem();case 4:this.associatedFeatureServiceItem=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),$e.warn("Associated feature service item could not be loaded",e.t0);case 10:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"elevationInfo",set:function(e){this._set("elevationInfo",e),this._validateElevationInfo()}}]),r}(Object(be.a)(Object(M.a)(Object(N.a)(Object(R.a)(Object(P.a)(Object(q.a)(A.a)))))));Object(O.a)([Object(g.b)({type:["BuildingSceneLayer"]})],rt.prototype,"operationalLayerType",void 0),Object(O.a)([Object(g.b)({readOnly:!0})],rt.prototype,"allSublayers",void 0),Object(O.a)([Object(g.b)(tt)],rt.prototype,"sublayers",void 0),Object(O.a)([Object(m.a)("service","sublayers")],rt.prototype,"readSublayers",null),Object(O.a)([Object(g.b)({type:et,nonNullable:!0,json:{write:!0}})],rt.prototype,"filters",void 0),Object(O.a)([Object(g.b)({type:String,json:{write:!0}})],rt.prototype,"activeFilterId",void 0),Object(O.a)([Object(g.b)({readOnly:!0,type:Xe})],rt.prototype,"summaryStatistics",void 0),Object(O.a)([Object(m.a)("summaryStatistics",["statisticsHRef"])],rt.prototype,"readSummaryStatistics",null),Object(O.a)([Object(g.b)({type:[String],json:{read:!1}})],rt.prototype,"outFields",void 0),Object(O.a)([Object(g.b)(Object(_.h)(T.a))],rt.prototype,"fullExtent",void 0),Object(O.a)([Object(g.b)({type:["show","hide","hide-children"]})],rt.prototype,"listMode",void 0),Object(O.a)([Object(g.b)(Object(_.h)(I.a))],rt.prototype,"spatialReference",void 0),Object(O.a)([Object(g.b)(_.b)],rt.prototype,"elevationInfo",null),Object(O.a)([Object(g.b)({json:{read:!1},readOnly:!0})],rt.prototype,"type",void 0),Object(O.a)([Object(g.b)()],rt.prototype,"associatedFeatureServiceItem",void 0);var at=rt=Object(O.a)([Object(w.a)("esri.layers.BuildingSceneLayer")],rt);t.default=at}}]);
//# sourceMappingURL=116.41a8f2b8.chunk.js.map