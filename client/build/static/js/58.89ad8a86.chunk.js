(this["webpackJsonpqp-ampd-app"]=this["webpackJsonpqp-ampd-app"]||[]).push([[58,127],{1046:function(e,t,r){"use strict";r.r(t);var a=r(11),n=r(2),o=r(3),i=r(4),s=r(5),u=r(0),l=(r(13),r(12),r(14),r(1)),c=r(6),p=(r(9),r(19),r(20),r(15)),y=r(58),f=r(764),b=r(766),m=r(902),O=r(903),j=r(28),v=r(23),d=r(206),h=r(677),g=r(905),R=r(904),B=function(e){Object(i.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).directions=null,a.route=null,a.routeName=null,a.stops=null,a}return r}(v.a);Object(u.a)([Object(l.b)({type:R.a,json:{write:!0}})],B.prototype,"directions",void 0),Object(u.a)([Object(l.b)({type:d.a,json:{write:!0}})],B.prototype,"route",void 0),Object(u.a)([Object(l.b)({type:String,json:{write:!0}})],B.prototype,"routeName",void 0),Object(u.a)([Object(l.b)({type:[d.a],json:{write:!0}})],B.prototype,"stops",void 0);var k=B=Object(u.a)([Object(c.a)("esri.tasks.support.RouteResult")],B);function T(e){return e&&h.default.fromJSON(e).features.map((function(e){return e}))}var x=function(e){Object(i.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).barriers=null,a.messages=null,a.pointBarriers=null,a.polylineBarriers=null,a.polygonBarriers=null,a.routeResults=null,a}return Object(o.a)(r,[{key:"readPointBarriers",value:function(e,t){return T(t.barriers||t.pointBarriers)}},{key:"readPolylineBarriers",value:function(e){return T(e)}},{key:"readPolygonBarriers",value:function(e){return T(e)}}]),r}(v.a);Object(u.a)([Object(l.b)({aliasOf:"pointBarriers"})],x.prototype,"barriers",void 0),Object(u.a)([Object(l.b)({type:[g.a]})],x.prototype,"messages",void 0),Object(u.a)([Object(l.b)({type:[d.a]})],x.prototype,"pointBarriers",void 0),Object(u.a)([Object(j.a)("pointBarriers",["barriers","pointBarriers"])],x.prototype,"readPointBarriers",null),Object(u.a)([Object(l.b)({type:[d.a]})],x.prototype,"polylineBarriers",void 0),Object(u.a)([Object(j.a)("polylineBarriers")],x.prototype,"readPolylineBarriers",null),Object(u.a)([Object(l.b)({type:[d.a]})],x.prototype,"polygonBarriers",void 0),Object(u.a)([Object(j.a)("polygonBarriers")],x.prototype,"readPolygonBarriers",null),Object(u.a)([Object(l.b)({type:[k]})],x.prototype,"routeResults",void 0);var N=x=Object(u.a)([Object(c.a)("esri.tasks.support.RouteResultsContainer")],x),w=Object(m.a)({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,directionsTimeAttribute:{name:"directionsTimeAttributeName"},impedanceAttribute:{name:"impedanceAttributeName"},outSpatialReference:{name:"outSR",getter:function(e){return e.outSpatialReference.wkid}},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},stops:!0,travelMode:!0}),S=function(e){Object(i.a)(r,e);var t=Object(s.a)(r);function r(e){return Object(n.a)(this,r),t.call(this,e)}return Object(o.a)(r,[{key:"solve",value:function(e,t){var r=this,n=[],o=[],i={},s={};return e.stops&&e.stops.features&&this._collectGeometries(e.stops.features,o,"stops.features",i),e.pointBarriers&&e.pointBarriers.features&&this._collectGeometries(e.pointBarriers.features,o,"pointBarriers.features",i),e.polylineBarriers&&e.polylineBarriers.features&&this._collectGeometries(e.polylineBarriers.features,o,"polylineBarriers.features",i),e.polygonBarriers&&e.polygonBarriers.features&&this._collectGeometries(e.polygonBarriers.features,o,"polygonBarriers.features",i),Object(f.a)(o).then((function(e){for(var t in i){var a=i[t];n.push(t),s[t]=e.slice(a[0],a[1])}return r._isInputGeometryZAware(s,n)?r.getServiceDescription():Object(p.s)({dontCheck:!0})})).then((function(o){("dontCheck"in o?o.dontCheck:o.hasZ)||r._dropZValuesOffInputGeometry(s,n);var i=function(t){s[t].forEach((function(r,a){e.get(t)[a].geometry=r}))};for(var u in s)i(u);var l={query:Object(a.a)(Object(a.a)({},r.parsedUrl.query),{},{f:"json"},w.toQueryParams(e))};(r.requestOptions||t)&&(l=Object(a.a)(Object(a.a)(Object(a.a)({},r.requestOptions),t),l));var c=r.parsedUrl.path,p="/solve",f=c.endsWith(p)?c:c+p;return Object(y.default)(f,l)})).then((function(e){return r._handleSolveResponse(e)}))}},{key:"_collectGeometries",value:function(e,t,r,a){a[r]=[t.length,t.length+e.length],e.forEach((function(e){t.push(e.geometry)}))}},{key:"_handleSolveResponse",value:function(e){var t,r,a=[],n=[],o=e.data,i=o.directions,s=void 0===i?[]:i,u=o.routes,l=(u=void 0===u?{}:u).features,c=void 0===l?[]:l,p=u.spatialReference,y=void 0===p?null:p,f=o.stops,b=(f=void 0===f?{}:f).features,m=void 0===b?[]:b,O=f.spatialReference,j=void 0===O?null:O,v=o.barriers,d=o.polygonBarriers,h=o.polylineBarriers,g=o.messages,R="esri.tasks.RouteTask.NULL_ROUTE_NAME",B=!0,k=c&&y||m&&j||v&&v.spatialReference||d&&d.spatialReference||h&&h.spatialReference;s.forEach((function(e){a.push(t=e.routeName),n[t]={directions:e}})),c.forEach((function(e){-1===a.indexOf(t=e.attributes.Name)&&(a.push(t),n[t]={}),e.geometry&&(e.geometry.spatialReference=k),n[t].route=e})),m.forEach((function(e){r=e.attributes,-1===a.indexOf(t=r.RouteName||R)&&(a.push(t),n[t]={}),t!==R&&(B=!1),e.geometry&&(e.geometry.spatialReference=k),null==n[t].stops&&(n[t].stops=[]),n[t].stops.push(e)})),m.length>0&&!0===B&&(n[a[0]].stops=n[R].stops,delete n[R],a.splice(a.indexOf(R),1));var T=a.map((function(e){return n[e].routeName=e===R?null:e,n[e]}));return N.fromJSON({routeResults:T,pointBarriers:v,polygonBarriers:d,polylineBarriers:h,messages:g})}}]),r}(Object(O.a)(b.a)),G=S=Object(u.a)([Object(c.a)("esri.tasks.RouteTask")],S);t.default=G},677:function(e,t,r){"use strict";r.r(t);var a=r(31),n=r(16),o=r(2),i=r(3),s=r(4),u=r(5),l=r(0),c=(r(13),r(10)),p=(r(12),r(14),r(1)),y=r(34),f=r(28),b=r(6),m=r(26),O=(r(9),r(19),r(20),r(23)),j=r(36),v=r(182),d=r(86),h=r(206),g=r(294),R=new y.a({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null}),B=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(e){var a;return Object(o.a)(this,r),(a=t.call(this,e)).displayFieldName=null,a.exceededTransferLimit=!1,a.features=[],a.fields=null,a.geometryType=null,a.hasM=!1,a.hasZ=!1,a.queryGeometry=null,a.spatialReference=null,a}return Object(i.a)(r,[{key:"readFeatures",value:function(e,t){for(var r=j.a.fromJSON(t.spatialReference),a=[],n=0;n<e.length;n++){var o=e[n],i=h.a.fromJSON(o),s=o.geometry&&o.geometry.spatialReference;Object(c.g)(i.geometry)&&!s&&(i.geometry.spatialReference=r),a.push(i)}return a}},{key:"writeGeometryType",value:function(e,t,r,a){if(e)R.write(e,t,r,a);else{var o=this.features;if(o){var i,s=Object(n.a)(o);try{for(s.s();!(i=s.n()).done;){var u=i.value;if(u&&Object(c.g)(u.geometry))return void R.write(u.geometry.type,t,r,a)}}catch(l){s.e(l)}finally{s.f()}}}}},{key:"readQueryGeometry",value:function(e,t){if(!e)return null;var r=!!e.spatialReference,a=Object(v.a)(e);return!r&&t.spatialReference&&(a.spatialReference=j.a.fromJSON(t.spatialReference)),a}},{key:"writeSpatialReference",value:function(e,t){if(e)t.spatialReference=e.toJSON();else{var r=this.features;if(r){var a,o=Object(n.a)(r);try{for(o.s();!(a=o.n()).done;){var i=a.value;i&&Object(c.g)(i.geometry)&&i.geometry.spatialReference&&(t.spatialReference=i.geometry.spatialReference.toJSON())}}catch(s){o.e(s)}finally{o.f()}}}}},{key:"toJSON",value:function(e){var t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(var r=0;r<t.features.length;r++){var a=t.features[r];if(a.geometry){var n=e&&e[r];a.geometry=n&&n.toJSON()||a.geometry}}return t}},{key:"quantize",value:function(e){for(var t=Object(a.a)(e.scale,2),r=t[0],n=t[1],o=Object(a.a)(e.translate,2),i=o[0],s=o[1],u=this.features,l=this._getQuantizationFunction(this.geometryType,(function(e){return Math.round((e-i)/r)}),(function(e){return Math.round((s-e)/n)})),p=0,y=u.length;p<y;p++)l(Object(c.m)(u[p].geometry))||(u.splice(p,1),p--,y--);return this.transform=e,this}},{key:"unquantize",value:function(){var e=this.geometryType,t=this.features,r=this.transform;if(!r)return this;var o,i=Object(a.a)(r.translate,2),s=i[0],u=i[1],l=Object(a.a)(r.scale,2),p=l[0],y=l[1],f=this._getHydrationFunction(e,(function(e){return e*p+s}),(function(e){return u-e*y})),b=Object(n.a)(t);try{for(b.s();!(o=b.n()).done;){var m=o.value.geometry;Object(c.g)(m)&&f(m)}}catch(O){b.e(O)}finally{b.f()}return this.transform=null,this}},{key:"_quantizePoints",value:function(e,t,r){for(var a,n,o=[],i=0,s=e.length;i<s;i++){var u=e[i];if(i>0){var l=t(u[0]),c=r(u[1]);l===a&&c===n||(o.push([l-a,c-n]),a=l,n=c)}else a=t(u[0]),n=r(u[1]),o.push([a,n])}return o.length>0?o:null}},{key:"_getQuantizationFunction",value:function(e,t,r){var a=this;return"point"===e?function(e){return e.x=t(e.x),e.y=r(e.y),e}:"polyline"===e||"polygon"===e?function(e){for(var n=Object(v.g)(e)?e.rings:e.paths,o=[],i=0,s=n.length;i<s;i++){var u=n[i],l=a._quantizePoints(u,t,r);l&&o.push(l)}return o.length>0?(Object(v.g)(e)?e.rings=o:e.paths=o,e):null}:"multipoint"===e?function(e){var n;return(n=a._quantizePoints(e.points,t,r)).length>0?(e.points=n,e):null}:"extent"===e?function(e){return e}:null}},{key:"_getHydrationFunction",value:function(e,t,r){return"point"===e?function(e){e.x=t(e.x),e.y=r(e.y)}:"polyline"===e||"polygon"===e?function(e){for(var a,n,o=Object(v.g)(e)?e.rings:e.paths,i=0,s=o.length;i<s;i++)for(var u=o[i],l=0,c=u.length;l<c;l++){var p=u[l];l>0?(a+=p[0],n+=p[1]):(a=p[0],n=p[1]),p[0]=t(a),p[1]=r(n)}}:"extent"===e?function(e){e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"multipoint"===e?function(e){for(var a,n,o=e.points,i=0,s=o.length;i<s;i++){var u=o[i];i>0?(a+=u[0],n+=u[1]):(a=u[0],n=u[1]),u[0]=t(a),u[1]=r(n)}}:void 0}}]),r}(O.a);Object(l.a)([Object(p.b)({type:String,json:{write:!0}})],B.prototype,"displayFieldName",void 0),Object(l.a)([Object(p.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],B.prototype,"exceededTransferLimit",void 0),Object(l.a)([Object(p.b)({type:[h.a],json:{write:!0}})],B.prototype,"features",void 0),Object(l.a)([Object(f.a)("features")],B.prototype,"readFeatures",null),Object(l.a)([Object(p.b)({type:[g.a],json:{write:!0}})],B.prototype,"fields",void 0),Object(l.a)([Object(p.b)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:R.read}}})],B.prototype,"geometryType",void 0),Object(l.a)([Object(m.a)("geometryType")],B.prototype,"writeGeometryType",null),Object(l.a)([Object(p.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],B.prototype,"hasM",void 0),Object(l.a)([Object(p.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],B.prototype,"hasZ",void 0),Object(l.a)([Object(p.b)({types:d.b,json:{write:!0}})],B.prototype,"queryGeometry",void 0),Object(l.a)([Object(f.a)("queryGeometry")],B.prototype,"readQueryGeometry",null),Object(l.a)([Object(p.b)({type:j.a,json:{write:!0}})],B.prototype,"spatialReference",void 0),Object(l.a)([Object(m.a)("spatialReference")],B.prototype,"writeSpatialReference",null),Object(l.a)([Object(p.b)({json:{write:!0}})],B.prototype,"transform",void 0),(B=Object(l.a)([Object(b.a)("esri.tasks.support.FeatureSet")],B)).prototype.toJSON.isDefaultToJSON=!0,B||(B={});var k=B;t.default=k},904:function(e,t,r){"use strict";var a=r(2),n=r(3),o=r(4),i=r(5),s=r(0),u=(r(13),r(10)),l=(r(12),r(14),r(1)),c=r(28),p=r(6),y=(r(9),r(19),r(20),r(36)),f=r(48),b=r(57),m=r(121),O=(r(86),r(206)),j=function(e){Object(o.a)(r,e);var t=Object(i.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).extent=null,n.features=null,n.geometryType="polyline",n.routeId=null,n.routeName=null,n.totalDriveTime=null,n.totalLength=null,n.totalTime=null,n}return Object(n.a)(r,[{key:"readFeatures",value:function(e,t){var r=this;(e||[]).forEach((function(e){r._decompressFeatureGeometry(e,t.summary.envelope.spatialReference)}));var a=y.a.fromJSON(t.spatialReference);return e.map((function(e){var t=O.a.fromJSON(e),r=e.geometry&&e.geometry.spatialReference;return t.geometry&&!r&&(Object(u.m)(t.geometry).spatialReference=a),t.strings=e.strings,t.events=(e.events||[]).map((function(t){var r=new O.a({geometry:new f.a({x:t.point.x,y:t.point.y,z:t.point.z,hasZ:void 0!==t.point.z,spatialReference:e.geometry&&e.geometry.spatialReference}),attributes:{ETA:t.ETA,arriveTimeUTC:t.arriveTimeUTC}});return r.strings=t.strings,r})),t}))}},{key:"_decompressFeatureGeometry",value:function(e,t){e.geometry=this._decompressGeometry(e.compressedGeometry,t)}},{key:"_decompressGeometry",value:function(e,t){var r,a,n,o,i,s,u,l,c=0,p=0,y=0,f=0,b=[],m=0,O=0,j=0;if((i=e.match(/((\+|\-)[^\+\-\|]+|\|)/g))||(i=[]),0===parseInt(i[m],32)){m=2;var v=parseInt(i[m],32);m++,s=parseInt(i[m],32),m++,1&v&&(O=i.indexOf("|")+1,u=parseInt(i[O],32),O++),2&v&&(j=i.indexOf("|",O)+1,l=parseInt(i[j],32),j++)}else s=parseInt(i[m],32),m++;for(;m<i.length&&"|"!==i[m];){r=parseInt(i[m],32)+c,m++,c=r,a=parseInt(i[m],32)+p,m++,p=a;var d=[r/s,a/s];O&&(o=parseInt(i[O],32)+y,O++,y=o,d.push(o/u)),j&&(n=parseInt(i[j],32)+f,j++,f=n,d.push(n/l)),b.push(d)}return{paths:[b],hasZ:O>0,hasM:j>0,spatialReference:t}}},{key:"_mergePolylinesToSinglePath",value:function(e,t){var r=[];(e||[]).forEach((function(e){e.paths.forEach((function(e){r=r.concat(e)}))}));var a=[],n=[0,0];return r.forEach((function(e){e[0]===n[0]&&e[1]===n[1]||(a.push(e),n=e)})),new m.a({paths:[a]},t)}},{key:"mergedGeometry",get:function(){if(!this.features)return null;var e=this.features.map((function(e){var t=e.geometry;return Object(u.m)(t)})),t=this.get("extent.spatialReference");return this._mergePolylinesToSinglePath(e,t)}},{key:"strings",get:function(){return this.features.map((function(e){return e.strings}))}}]),r}(r(677).default);Object(s.a)([Object(l.b)({type:b.a,json:{read:{source:"summary.envelope"}}})],j.prototype,"extent",void 0),Object(s.a)([Object(l.b)()],j.prototype,"features",void 0),Object(s.a)([Object(c.a)("features")],j.prototype,"readFeatures",null),Object(s.a)([Object(l.b)()],j.prototype,"geometryType",void 0),Object(s.a)([Object(l.b)({readOnly:!0,dependsOn:["features","extent.spatialReference"]})],j.prototype,"mergedGeometry",null),Object(s.a)([Object(l.b)()],j.prototype,"routeId",void 0),Object(s.a)([Object(l.b)()],j.prototype,"routeName",void 0),Object(s.a)([Object(l.b)({value:null,readOnly:!0,dependsOn:["features"]})],j.prototype,"strings",null),Object(s.a)([Object(l.b)({json:{read:{source:"summary.totalDriveTime"}}})],j.prototype,"totalDriveTime",void 0),Object(s.a)([Object(l.b)({json:{read:{source:"summary.totalLength"}}})],j.prototype,"totalLength",void 0),Object(s.a)([Object(l.b)({json:{read:{source:"summary.totalTime"}}})],j.prototype,"totalTime",void 0);var v=j=Object(s.a)([Object(p.a)("esri.tasks.support.DirectionsFeatureSet")],j);t.a=v}}]);
//# sourceMappingURL=58.89ad8a86.chunk.js.map