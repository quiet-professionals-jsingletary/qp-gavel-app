{"version":3,"sources":["../node_modules/@arcgis/core/tasks/operations/pbfQueryUtils.js","../node_modules/@arcgis/core/tasks/operations/urlUtils.js","../node_modules/@arcgis/core/tasks/operations/query.js","../node_modules/@arcgis/core/core/pbf.js","../node_modules/@arcgis/core/tasks/operations/pbfOptimizedFeatureSet.js","../node_modules/@arcgis/core/tasks/operations/pbfFeatureServiceParser.js"],"names":["t","r","u","e","o","queryResult","featureResult","s","queryGeometry","y","queryGeometryType","features","length","objectIdFieldName","attributes","objectId","n","Array","isArray","toJSON","JSON","stringify","m","geometry","geometryType","i","inSR","spatialReference","wkid","groupByFieldsForStatistics","join","objectIds","orderByFields","outFields","returnDistinctValues","returnCountOnly","returnExtentOnly","returnIdsOnly","indexOf","outSR","returnGeometry","returnCentroid","outStatistics","pixelSize","quantizationParameters","parameterValues","rangeValues","dynamicDataSource","layer","source","timeExtent","start","end","time","a","isEmpty","data","g","c","createFeatureResult","d","p","f","count","S","extent","then","hasOwnProperty","Error","responseType","clone","l","query","path","TextDecoder","byteLength","this","_tag","_dataType","init","_data","_dataView","_pos","_end","_decodeVarint","skip","getUInt32","_decodeSVarint","_skip","getUint32","getInt32","getFloat64","getFloat32","_getLength","_toString","_toBytes","_getLengthUnsafe","getMessage","release","pool","acquire","Math","min","subarray","decode","toString","decodeURIComponent","String","fromCharCode","Uint8Array","buffer","options","geometryTypes","hasZ","sourceSpatialReference","vcsWkid","coords","push","fields","lengths","getLogger","createPointGeometry","next","tag","pos","addCoordinatePoint","getSInt64","b","createGeometry","hasM","addLength","addCoordinate","getEnum","k","getString","getFloat","getDouble","getSInt32","getInt64","getUInt64","getBool","type","name","alias","sqlType","domain","parse","error","defaultValue","isSystemMaintained","h","createFeature","processMessage","processMessageWithArgs","centroid","T","q","F","originPosition","scale","translate","I","shapeAreaFieldName","shapeLengthFieldName","units","createSpatialReference","wkt","latestWkid","latestVcsWkid","w","globalIdFieldName","geohashFieldName","geometryProperties","transform","exceededTransferLimit","addField","prepareFeatures","addFeature","uniqueIdField","finishFeatureResult","D","addQueryGeometry","M","DataView"],"mappings":"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","file":"static/js/3.0fb44d51.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{parseFeatureQuery as e}from\"./pbfFeatureServiceParser.js\";function t(t,r){const u=e(t,r),o=u.queryResult.featureResult,s=u.queryResult.queryGeometry,y=u.queryResult.queryGeometryType;if(o&&o.features&&o.features.length&&o.objectIdFieldName){const e=o.objectIdFieldName;for(const t of o.features)t.attributes&&(t.objectId=t.attributes[e])}return o&&(o.queryGeometry=s,o.queryGeometryType=y),o}export{t as parsePBFFeatureQuery};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction t(n){const o={};for(const e in n){if(\"declaredClass\"===e)continue;const r=n[e];if(null!=r&&\"function\"!=typeof r)if(Array.isArray(r)){o[e]=[];for(let n=0;n<r.length;n++)o[e][n]=t(r[n])}else\"object\"==typeof r?r.toJSON&&(o[e]=JSON.stringify(r)):o[e]=r}return o}export{t as mapParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../core/maybe.js\";import{join as e,urlToObject as r}from\"../../core/urlUtils.js\";import{resolve as n}from\"../../core/promiseUtils.js\";import{getJsonType as i}from\"../../geometry/support/jsonUtils.js\";import o from\"../../request.js\";import{normalizeCentralMeridian as s}from\"../../geometry/support/normalizeUtils.js\";import{applyFeatureSetZUnitScaling as u}from\"./queryZScale.js\";import{parsePBFFeatureQuery as a}from\"./pbfQueryUtils.js\";import{mapParameters as l}from\"./urlUtils.js\";function m(e,r){const n=e.geometry,o=e.toJSON(),s=o;if(t(n)&&(s.geometry=JSON.stringify(n),s.geometryType=i(n),s.inSR=n.spatialReference.wkid||JSON.stringify(n.spatialReference)),o.groupByFieldsForStatistics&&(s.groupByFieldsForStatistics=o.groupByFieldsForStatistics.join(\",\")),o.objectIds&&(s.objectIds=o.objectIds.join(\",\")),o.orderByFields&&(s.orderByFields=o.orderByFields.join(\",\")),!o.outFields||!o.returnDistinctValues&&(null!=r&&r.returnCountOnly||null!=r&&r.returnExtentOnly||null!=r&&r.returnIdsOnly)?delete s.outFields:-1!==o.outFields.indexOf(\"*\")?s.outFields=\"*\":s.outFields=o.outFields.join(\",\"),o.outSR?s.outSR=o.outSR.wkid||JSON.stringify(o.outSR):n&&(o.returnGeometry||o.returnCentroid)&&(s.outSR=s.inSR),o.returnGeometry&&delete o.returnGeometry,o.outStatistics&&(s.outStatistics=JSON.stringify(o.outStatistics)),o.pixelSize&&(s.pixelSize=JSON.stringify(o.pixelSize)),o.quantizationParameters&&(s.quantizationParameters=JSON.stringify(o.quantizationParameters)),o.parameterValues&&(s.parameterValues=JSON.stringify(o.parameterValues)),o.rangeValues&&(s.rangeValues=JSON.stringify(o.rangeValues)),o.dynamicDataSource&&(s.layer=JSON.stringify({source:o.dynamicDataSource}),delete o.dynamicDataSource),o.timeExtent){const t=o.timeExtent,{start:e,end:r}=t;null==e&&null==r||(s.time=e===r?e:`${null==e?\"null\":e},${null==r?\"null\":r}`),delete o.timeExtent}return s}async function y(e,r,n,i){const o=t(r.timeExtent)&&r.timeExtent.isEmpty?{data:{features:[]}}:await g(e,r,\"json\",i);return u(r,n,o.data),o}async function c(e,r,i,o){if(t(r.timeExtent)&&r.timeExtent.isEmpty)return n({data:i.createFeatureResult()});const s=await d(e,r,o),u=s;return u.data=a(s.data,i),u}function d(t,e,r){return g(t,e,\"pbf\",r)}function p(e,r,i){return t(r.timeExtent)&&r.timeExtent.isEmpty?n({data:{objectIds:[]}}):g(e,r,\"json\",i,{returnIdsOnly:!0})}function f(e,r,i){return t(r.timeExtent)&&r.timeExtent.isEmpty?n({data:{count:0}}):g(e,r,\"json\",i,{returnIdsOnly:!0,returnCountOnly:!0})}function S(e,r,i){return t(r.timeExtent)&&r.timeExtent.isEmpty?n({data:{count:0,extent:null}}):g(e,r,\"json\",i,{returnExtentOnly:!0,returnCountOnly:!0}).then((t=>{const e=t.data;if(e.hasOwnProperty(\"extent\"))return t;if(e.features)throw new Error(\"Layer does not support extent calculation.\");if(e.hasOwnProperty(\"count\"))throw new Error(\"Layer does not support extent calculation.\");return t}))}function g(n,i,u,a={},y){const c=\"string\"==typeof n?r(n):n,d=i.geometry?[i.geometry]:[];return a.responseType=\"pbf\"===u?\"array-buffer\":\"json\",s(d,null,a).then((r=>{const n=r&&r[0];t(n)&&((i=i.clone()).geometry=n);const s=l({...c.query,f:u,...y,...m(i,y)});return o(e(c.path,\"query\"),{...a,query:{...s,...a.query}})}))}export{y as executeQuery,f as executeQueryForCount,S as executeQueryForExtent,p as executeQueryForIds,c as executeQueryPBF,d as executeQueryPBFBuffer,m as queryToQueryStringParameters,g as runQuery};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport t from\"./has.js\";import e from\"./ObjectPool.js\";const s=t(\"esri-text-decoder\")?new TextDecoder(\"utf-8\"):null,i=t(\"safari\")||t(\"ios\")?6:t(\"ff\")?12:32;class r{constructor(t,e,s=0,i=(t?t.byteLength:0)){this._tag=0,this._dataType=99,this.init(t,e,s,i)}init(t,e,s,i){this._data=t,this._dataView=e,this._pos=s,this._end=i}clone(){return new r(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const e=this._decodeVarint();if(this._tag=e>>3,this._dataType=7&e,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;return t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?t:(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?t:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();return t>>>1^-(1&t)|0}getSInt64(){return this._decodeSVarint()}getBool(){const t=0!==this._data[this._pos];return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,e=this._pos,s=t.getUint32(e,!0)+4294967296*t.getUint32(e+4,!0);return this._skip(8),s}getSFixed64(){const t=this._dataView,e=this._pos,s=t.getUint32(e,!0)+4294967296*t.getInt32(e+4,!0);return this._skip(8),s}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),e=this._pos,s=this._toString(this._data,e,e+t);return this._skip(t),s}getBytes(){const t=this._getLength(),e=this._pos,s=this._toBytes(this._data,e,e+t);return this._skip(t),s}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,e,s,i){const r=this.getMessage(),n=t(r,e,s,i);return r.release(),n}processMessage(t){const e=this.getMessage(),s=t(e);return e.release(),s}getMessage(){const t=this._getLength(),e=r.pool.acquire();return e.init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),e}release(){r.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error(\"Invalid data type!\")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error(\"Attempt to skip past the end of buffer!\");this._pos+=t}_decodeVarint(){const t=this._data;let e,s=this._pos,i=0;if(this._end-s>=10)do{if(e=t[s++],i|=127&e,0==(128&e))break;if(e=t[s++],i|=(127&e)<<7,0==(128&e))break;if(e=t[s++],i|=(127&e)<<14,0==(128&e))break;if(e=t[s++],i|=(127&e)<<21,0==(128&e))break;if(e=t[s++],i+=268435456*(127&e),0==(128&e))break;if(e=t[s++],i+=34359738368*(127&e),0==(128&e))break;if(e=t[s++],i+=4398046511104*(127&e),0==(128&e))break;if(e=t[s++],i+=562949953421312*(127&e),0==(128&e))break;if(e=t[s++],i+=72057594037927940*(127&e),0==(128&e))break;if(e=t[s++],i+=0x8000000000000000*(127&e),0==(128&e))break;throw new Error(\"Varint too long!\")}while(0);else{let r=1;for(;s!==this._end&&(e=t[s],0!=(128&e));)++s,i+=(127&e)*r,r*=128;if(s===this._end)throw new Error(\"Varint overrun!\");++s,i+=e*r}return this._pos=s,i}_decodeSVarint(){const t=this._decodeVarint();return t%2?-(t+1)/2:t/2}_getLength(){if(2!==this._dataType)throw new Error(\"Not a delimited data type!\");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,e,r){if((r=Math.min(this._end,r))-e>i&&s){const i=t.subarray(e,r);return s.decode(i)}let n=\"\",a=\"\";for(let s=e;s<r;++s){const e=t[s];128&e?a+=\"%\"+e.toString(16):(n+=decodeURIComponent(a)+String.fromCharCode(e),a=\"\")}return a.length&&(n+=decodeURIComponent(a)),n}_toBytes(t,e,s){return s=Math.min(this._end,s),new Uint8Array(t.buffer,e,s-e)}}r.pool=new e(r,null,(t=>{t._data=null,t._dataView=null}));export default r;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{equals as e}from\"../../geometry/support/spatialReferenceUtils.js\";import{getMetersPerVerticalUnitForSR as r}from\"../../core/unitUtils.js\";import t from\"../../layers/graphics/OptimizedFeature.js\";import o from\"../../layers/graphics/OptimizedFeatureSet.js\";import s from\"../../layers/graphics/OptimizedGeometry.js\";const i=[\"esriGeometryPoint\",\"esriGeometryMultipoint\",\"esriGeometryPolyline\",\"esriGeometryPolygon\"];class a{constructor(e){this.options=e,this.geometryTypes=i}createFeatureResult(){return new o}prepareFeatures(){}finishFeatureResult(t){if(!t||!t.features||!t.hasZ||!this.options.sourceSpatialReference||!t.spatialReference||e(t.spatialReference,this.options.sourceSpatialReference)||t.spatialReference.vcsWkid)return;const o=r(this.options.sourceSpatialReference)/r(t.spatialReference);if(1!==o)for(const e of t.features){if(!e.geometry||!e.geometry.coords)continue;const r=e.geometry.coords;for(let e=2;e<r.length;e+=3)r[e]*=o}}addFeature(e,r){e.features.push(r)}createFeature(){return new t}createSpatialReference(){return{wkid:0}}createGeometry(){return new s}addField(e,r){e.fields.push(r)}addCoordinate(e,r){e.coords.push(r)}addCoordinatePoint(e,r){e.coords.push(r)}addLength(e,r){e.lengths.push(r)}addQueryGeometry(e,r){e.queryGeometry=r.queryGeometry,e.queryGeometryType=r.queryGeometryType}createPointGeometry(){return new s}}export{i as OPTIMIZED_GEOMETRY_TYPES,a as OptimizedFeatureSetParserContext};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../core/maybe.js\";import t from\"../../core/Logger.js\";import r from\"../../core/Error.js\";import s from\"../../layers/graphics/OptimizedGeometry.js\";import a from\"../../core/pbf.js\";import{OPTIMIZED_GEOMETRY_TYPES as n}from\"./pbfOptimizedFeatureSet.js\";const o=t.getLogger(\"esri.tasks.operations.pbfFeatureServiceParser\"),i=[\"esriFieldTypeSmallInteger\",\"esriFieldTypeInteger\",\"esriFieldTypeSingle\",\"esriFieldTypeDouble\",\"esriFieldTypeString\",\"esriFieldTypeDate\",\"esriFieldTypeOID\",\"esriFieldTypeGeometry\",\"esriFieldTypeBlob\",\"esriFieldTypeRaster\",\"esriFieldTypeGUID\",\"esriFieldTypeGlobalID\",\"esriFieldTypeXML\"],c=[\"sqlTypeBigInt\",\"sqlTypeBinary\",\"sqlTypeBit\",\"sqlTypeChar\",\"sqlTypeDate\",\"sqlTypeDecimal\",\"sqlTypeDouble\",\"sqlTypeFloat\",\"sqlTypeGeometry\",\"sqlTypeGUID\",\"sqlTypeInteger\",\"sqlTypeLongNVarchar\",\"sqlTypeLongVarbinary\",\"sqlTypeLongVarchar\",\"sqlTypeNChar\",\"sqlTypeNVarchar\",\"sqlTypeOther\",\"sqlTypeReal\",\"sqlTypeSmallInt\",\"sqlTypeSqlXml\",\"sqlTypeTime\",\"sqlTypeTimestamp\",\"sqlTypeTimestamp2\",\"sqlTypeTinyInt\",\"sqlTypeVarbinary\",\"sqlTypeVarchar\"],l=[\"upperLeft\",\"lowerLeft\"];function g(e){return e>=i.length?null:i[e]}function p(e){return e>=l.length?null:l[e]}function u(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function y(e,t,r){const s=t.createPointGeometry(r);for(;e.next();)switch(e.tag()){case 3:{const r=e.getUInt32(),a=e.pos()+r;let n=0;for(;e.pos()<a;)t.addCoordinatePoint(s,e.getSInt64(),n++);break}case 1:case 2:default:e.skip()}return s}function b(e,t,r){const s=t.createGeometry(r),a=2+(r.hasZ?1:0)+(r.hasM?1:0);for(;e.next();)switch(e.tag()){case 2:{const r=e.getUInt32(),a=e.pos()+r;let n=0;for(;e.pos()<a;)t.addLength(s,e.getUInt32(),n++);break}case 3:{const r=e.getUInt32(),n=e.pos()+r;let o=0;for(;e.pos()<n;)t.addCoordinate(s,e.getSInt64(),o),o++,o===a&&(o=0);break}case 1:default:e.skip()}return s}function f(e){const t=new s;let r=\"esriGeometryPoint\";for(;e.next();)switch(e.tag()){case 2:{const r=e.getUInt32(),s=e.pos()+r;for(;e.pos()<s;)t.lengths.push(e.getUInt32());break}case 3:{const r=e.getUInt32(),s=e.pos()+r;for(;e.pos()<s;)t.coords.push(e.getSInt64());break}case 1:r=n[e.getEnum()];break;default:e.skip()}return{queryGeometry:t,queryGeometryType:r}}function k(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function d(e){const t={type:g(0)};for(;e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.type=g(e.getEnum());break;case 3:t.alias=e.getString();break;case 4:t.sqlType=(s=e.getEnum())>=c.length?null:c[s];break;case 5:try{t.domain=JSON.parse(e.getString())}catch(e){o.error(new r(\"query:parsing-pbf\",\"Failed to parse domain\",{error:e})),t.domain=null}break;case 6:t.defaultValue=e.getString();break;default:e.skip()}var s;return t}function m(e){const t={};for(;e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.isSystemMaintained=e.getBool();break;default:e.skip()}return t}function h(e,t,r,s){const a=t.createFeature(r);let n=0;for(;e.next();)switch(e.tag()){case 1:{const t=s[n++].name;a.attributes[t]=e.processMessage(k);break}case 2:a.geometry=e.processMessageWithArgs(b,t,r);break;case 4:a.centroid=e.processMessageWithArgs(y,t,r);break;default:e.skip()}return a}function T(e){const t=[1,1,1,1];for(;e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function q(e){const t=[0,0,0,0];for(;e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function F(e){const t={originPosition:p(0)};for(;e.next();)switch(e.tag()){case 1:t.originPosition=p(e.getEnum());break;case 2:t.scale=e.processMessage(T);break;case 3:t.translate=e.processMessage(q);break;default:e.skip()}return t}function I(e){const t={};for(;e.next();)switch(e.tag()){case 1:t.shapeAreaFieldName=e.getString();break;case 2:t.shapeLengthFieldName=e.getString();break;case 3:t.units=e.getString();break;default:e.skip()}return t}function S(e,t){const r=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:r.wkid=e.getUInt32();break;case 5:r.wkt=e.getString();break;case 2:r.latestWkid=e.getUInt32();break;case 3:r.vcsWkid=e.getUInt32();break;case 4:r.latestVcsWkid=e.getUInt32();break;default:e.skip()}return r}function w(e,t){const r=t.createFeatureResult();r.geometryType=u(t,0);let s=!1;for(;e.next();)switch(e.tag()){case 1:r.objectIdFieldName=e.getString();break;case 3:r.globalIdFieldName=e.getString();break;case 4:r.geohashFieldName=e.getString();break;case 5:r.geometryProperties=e.processMessage(I);break;case 7:r.geometryType=u(t,e.getEnum());break;case 8:r.spatialReference=e.processMessageWithArgs(S,t);break;case 10:r.hasZ=e.getBool();break;case 11:r.hasM=e.getBool();break;case 12:r.transform=e.processMessage(F);break;case 9:{const t=e.getBool();r.exceededTransferLimit=t;break}case 13:t.addField(r,e.processMessage(d));break;case 15:s||(t.prepareFeatures(r),s=!0),t.addFeature(r,e.processMessageWithArgs(h,t,r,r.fields));break;case 2:r.uniqueIdField=e.processMessage(m);break;case 6:default:e.skip()}return t.finishFeatureResult(r),r}function D(t,r){const s={};let a=null;for(;t.next();)switch(t.tag()){case 4:a=t.processMessageWithArgs(f);break;case 1:s.featureResult=t.processMessageWithArgs(w,r);break;case 2:case 3:default:t.skip()}return e(a)&&s.featureResult&&r.addQueryGeometry(s,a),s}function M(e,t){try{const r=2,s=new a(new Uint8Array(e),new DataView(e)),n={};for(;s.next();)switch(s.tag()){case r:n.queryResult=s.processMessageWithArgs(D,t);break;default:s.skip()}return n}catch(e){throw new r(\"query:parsing-pbf\",\"Error while parsing FeatureSet PBF payload\",{error:e})}}export{M as parseFeatureQuery,g as parseFieldType,F as parseTransform};\n"],"sourceRoot":""}