{"version":3,"sources":["../node_modules/@arcgis/core/layers/support/capabilities.js","../node_modules/@arcgis/core/layers/support/FetchAssociatedFeatureLayer.js","../node_modules/@arcgis/core/tasks/support/FeatureSet.js","../node_modules/@arcgis/core/tasks/operations/zscale.js","../node_modules/@arcgis/core/tasks/operations/queryZScale.js","../node_modules/@arcgis/core/layers/support/I3SLayerDefinitions.js"],"names":["s","attachment","supportsContentType","supportsExifInfo","supportsKeywords","supportsName","supportsSize","data","isVersioned","supportsAttachment","supportsM","supportsZ","editing","supportsDeleteByAnonymous","supportsDeleteByOthers","supportsGeometryUpdate","supportsGlobalId","supportsRollbackOnFailure","supportsUpdateByAnonymous","supportsUpdateByOthers","supportsUpdateWithoutM","supportsUploadWithItemId","metadata","supportsAdvancedFieldProperties","operations","supportsCalculate","supportsTruncate","supportsValidateSql","supportsAdd","supportsDelete","supportsEditing","supportsChangeTracking","supportsQuery","supportsQueryAttachments","supportsResizeAttachments","supportsSync","supportsUpdate","supportsExceedsLimitStatistics","queryRelated","supportsCount","supportsOrderBy","supportsPagination","query","maxRecordCount","maxRecordCountFactor","standardMaxRecordCount","supportsCacheHint","supportsCentroid","supportsDisjointSpatialRelationship","supportsDistance","supportsDistinct","supportsExtent","supportsFormatPBF","supportsGeometryProperties","supportsHavingClause","supportsHistoricMoment","supportsMaxRecordCountFactor","supportsPercentileStatistics","supportsQuantization","supportsQuantizationEditMode","supportsQueryByOthers","supportsQueryGeometry","supportsResultType","supportsSqlExpression","supportsStandardizedQueriesOnly","supportsStatistics","tileMaxRecordCount","c","t","r","e","this","parsedUrl","portalItem","signal","rootDocument","a","path","match","urlParts","root","layerId","parseInt","portalItemFromServiceItemId","loadFromUrl","findAndLoadRelatedPortalItem","loadFeatureLayerFromPortalItem","f","responseType","authMode","o","findServerInfo","owningSystemUrl","replace","fetchRelatedItems","relationshipType","direction","find","type","load","findMatchingAssociatedSublayerUrl","url","l","n","fetchRootDocument","i","u","layers","h","Array","isArray","Error","Math","min","length","id","serviceItemId","fetchServiceOwningPortalUrl","portal","esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon","esriGeometryEnvelope","mesh","d","displayFieldName","exceededTransferLimit","features","fields","geometryType","hasM","hasZ","queryGeometry","spatialReference","fromJSON","p","geometry","push","write","y","toJSON","scale","translate","_getQuantizationFunction","round","splice","transform","_getHydrationFunction","x","rings","paths","_quantizePoints","points","xmin","ymin","xmax","ymax","String","json","prototype","Boolean","overridePolicy","enabled","read","reader","types","m","isDefaultToJSON","g","vcsWkid","z","outSpatialReference","arguments","nodesPerPage","rootIndex","lodSelectionMetricType","Number","factor","source","baseColorFactor","baseColorTexture","metallicRoughnessTexture","metallicFactor","roughnessFactor","alphaMode","alphaCutoff","doubleSided","cullFace","normalTexture","occlusionTexture","emissiveTexture","emissiveFactor","pbrMetallicRoughness","opaque","mask","blend","none","back","front","index","jpg","png","dds","atlas","Float32","UInt64","UInt32","UInt16","UInt8","draco","offset","triangle"],"mappings":"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","file":"static/js/15.83bc6de6.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst s={attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1},data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1},query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsStatistics:!1,tileMaxRecordCount:0}};export{s as zeroCapabilities};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isNone as t,isSome as r}from\"../../core/maybe.js\";import{throwIfAbortError as e,all as a}from\"../../core/promiseUtils.js\";import{id as o}from\"../../kernel.js\";import s from\"../../request.js\";import n from\"../../portal/Portal.js\";import i from\"../../portal/PortalItem.js\";import l from\"../FeatureLayer.js\";class c{constructor(t,r,e){this.parsedUrl=t,this.portalItem=r,this.signal=e,this.rootDocument=null;const a=this.parsedUrl.path.match(/^(.*)\\/SceneServer\\/layers\\/([\\d]*)\\/?$/i);a&&(this.urlParts={root:a[1],layerId:parseInt(a[2],10)})}async fetch(){var r;if(!this.urlParts)return null;const e=null!=(r=this.portalItem)?r:await this.portalItemFromServiceItemId();if(t(e))return this.loadFromUrl();const a=await this.findAndLoadRelatedPortalItem(e);return t(a)?null:this.loadFeatureLayerFromPortalItem(a)}async fetchPortalItem(){var r;if(!this.urlParts)return null;const e=null!=(r=this.portalItem)?r:await this.portalItemFromServiceItemId();return t(e)?null:this.findAndLoadRelatedPortalItem(e)}async fetchRootDocument(){if(r(this.rootDocument))return this.rootDocument;if(t(this.urlParts))return this.rootDocument={},{};const e={query:{f:\"json\"},responseType:\"json\",authMode:\"no-prompt\",signal:this.signal},a=`${this.urlParts.root}/SceneServer`;try{const t=await s(a,e);this.rootDocument=t.data}catch{this.rootDocument={}}return this.rootDocument}async fetchServiceOwningPortalUrl(){var t;const r=null==(t=o)?void 0:t.findServerInfo(this.parsedUrl.path);if(null!=r&&r.owningSystemUrl)return r.owningSystemUrl;const a=this.parsedUrl.path.replace(/(.*\\/rest)\\/.*/i,\"$1\")+\"/info\";try{const t=(await s(a,{query:{f:\"json\"},responseType:\"json\",signal:this.signal})).data.owningSystemUrl;if(t)return t}catch(t){e(t)}return null}async findAndLoadRelatedPortalItem(t){try{return(await t.fetchRelatedItems({relationshipType:\"Service2Service\",direction:\"reverse\"},{signal:this.signal})).find((t=>\"Feature Service\"===t.type))||null}catch(t){return e(t),null}}async loadFeatureLayerFromPortalItem(t){await t.load({signal:this.signal});const r=await this.findMatchingAssociatedSublayerUrl(t.url);return new l({url:r,portalItem:t}).load({signal:this.signal})}async loadFromUrl(){const t=await this.findMatchingAssociatedSublayerUrl(`${this.urlParts.root}/FeatureServer`);return new l({url:t}).load({signal:this.signal})}async findMatchingAssociatedSublayerUrl(t){const r=t.replace(/^(.*FeatureServer)(\\/[\\d]*\\/?)?$/i,\"$1\"),e={query:{f:\"json\"},responseType:\"json\",authMode:\"no-prompt\",signal:this.signal},o=this.urlParts.layerId,n=this.fetchRootDocument(),i=s(r,e),[l,c]=await a([i,n]),u=c&&c.layers,h=l.data&&l.data.layers;if(!Array.isArray(h))throw new Error(\"expected layers array\");if(Array.isArray(u))for(let t=0;t<Math.min(u.length,h.length);t++){if(u[t].id===o)return`${r}/${h[t].id}`}else if(o<h.length)return`${r}/${h[o].id}`;throw new Error(\"could not find matching associated sublayer\")}async portalItemFromServiceItemId(){const t=(await this.fetchRootDocument()).serviceItemId;if(!t)return null;const a=new i({id:t}),o=await this.fetchServiceOwningPortalUrl();r(o)&&(a.portal=new n({url:o}));try{return a.load({signal:this.signal})}catch(t){return e(t),null}}}export{c as FetchAssociatedFeatureLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as t,unwrap as r}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{JSONMap as s}from\"../../core/jsonMap.js\";import{reader as i}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as n}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as p}from\"../../core/accessorSupport/decorators/writer.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as l}from\"../../core/JSONSupport.js\";import a from\"../../geometry/SpatialReference.js\";import{fromJSON as y,isPolygon as u}from\"../../geometry/support/jsonUtils.js\";import{geometryTypes as m}from\"../../geometry.js\";import c from\"../../Graphic.js\";import f from\"../../layers/support/Field.js\";const h=new s({esriGeometryPoint:\"point\",esriGeometryMultipoint:\"multipoint\",esriGeometryPolyline:\"polyline\",esriGeometryPolygon:\"polygon\",esriGeometryEnvelope:\"extent\",mesh:\"mesh\",\"\":null});let d=class extends l{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,r){const o=a.fromJSON(r.spatialReference),s=[];for(let r=0;r<e.length;r++){const i=e[r],n=c.fromJSON(i),p=i.geometry&&i.geometry.spatialReference;t(n.geometry)&&!p&&(n.geometry.spatialReference=o),s.push(n)}return s}writeGeometryType(e,r,o,s){if(e)return void h.write(e,r,o,s);const{features:i}=this;if(i)for(const e of i)if(e&&t(e.geometry))return void h.write(e.geometry.type,r,o,s)}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,o=y(e);return!r&&t.spatialReference&&(o.spatialReference=a.fromJSON(t.spatialReference)),o}writeSpatialReference(e,r){if(e)return void(r.spatialReference=e.toJSON());const{features:o}=this;if(o)for(const e of o)e&&t(e.geometry)&&e.geometry.spatialReference&&(r.spatialReference=e.geometry.spatialReference.toJSON())}toJSON(e){const t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const o=t.features[r];if(o.geometry){const t=e&&e[r];o.geometry=t&&t.toJSON()||o.geometry}}return t}quantize(e){const{scale:[t,o],translate:[s,i]}=e,n=this.features,p=this._getQuantizationFunction(this.geometryType,(e=>Math.round((e-s)/t)),(e=>Math.round((i-e)/o)));for(let e=0,t=n.length;e<t;e++)p(r(n[e].geometry))||(n.splice(e,1),e--,t--);return this.transform=e,this}unquantize(){const{geometryType:e,features:r,transform:o}=this;if(!o)return this;const{translate:[s,i],scale:[n,p]}=o,l=this._getHydrationFunction(e,(e=>e*n+s),(e=>i-e*p));for(const{geometry:e}of r)t(e)&&l(e);return this.transform=null,this}_quantizePoints(e,t,r){let o,s;const i=[];for(let n=0,p=e.length;n<p;n++){const p=e[n];if(n>0){const e=t(p[0]),n=r(p[1]);e===o&&n===s||(i.push([e-o,n-s]),o=e,s=n)}else o=t(p[0]),s=r(p[1]),i.push([o,s])}return i.length>0?i:null}_getQuantizationFunction(e,t,r){return\"point\"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):\"polyline\"===e||\"polygon\"===e?e=>{const o=u(e)?e.rings:e.paths,s=[];for(let e=0,i=o.length;e<i;e++){const i=o[e],n=this._quantizePoints(i,t,r);n&&s.push(n)}return s.length>0?(u(e)?e.rings=s:e.paths=s,e):null}:\"multipoint\"===e?e=>{let o;return o=this._quantizePoints(e.points,t,r),o.length>0?(e.points=o,e):null}:\"extent\"===e?e=>e:null}_getHydrationFunction(e,t,r){return\"point\"===e?e=>{e.x=t(e.x),e.y=r(e.y)}:\"polyline\"===e||\"polygon\"===e?e=>{const o=u(e)?e.rings:e.paths;let s,i;for(let e=0,n=o.length;e<n;e++){const n=o[e];for(let e=0,o=n.length;e<o;e++){const o=n[e];e>0?(s+=o[0],i+=o[1]):(s=o[0],i=o[1]),o[0]=t(s),o[1]=r(i)}}}:\"extent\"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:\"multipoint\"===e?e=>{const o=e.points;let s,i;for(let e=0,n=o.length;e<n;e++){const n=o[e];e>0?(s+=n[0],i+=n[1]):(s=n[0],i=n[1]),n[0]=t(s),n[1]=r(i)}}:void 0}};e([o({type:String,json:{write:!0}})],d.prototype,\"displayFieldName\",void 0),e([o({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d.prototype,\"exceededTransferLimit\",void 0),e([o({type:[c],json:{write:!0}})],d.prototype,\"features\",void 0),e([i(\"features\")],d.prototype,\"readFeatures\",null),e([o({type:[f],json:{write:!0}})],d.prototype,\"fields\",void 0),e([o({type:[\"point\",\"multipoint\",\"polyline\",\"polygon\",\"extent\",\"mesh\"],json:{read:{reader:h.read}}})],d.prototype,\"geometryType\",void 0),e([p(\"geometryType\")],d.prototype,\"writeGeometryType\",null),e([o({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d.prototype,\"hasM\",void 0),e([o({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d.prototype,\"hasZ\",void 0),e([o({types:m,json:{write:!0}})],d.prototype,\"queryGeometry\",void 0),e([i(\"queryGeometry\")],d.prototype,\"readQueryGeometry\",null),e([o({type:a,json:{write:!0}})],d.prototype,\"spatialReference\",void 0),e([p(\"spatialReference\")],d.prototype,\"writeSpatialReference\",null),e([o({json:{write:!0}})],d.prototype,\"transform\",void 0),d=e([n(\"esri.tasks.support.FeatureSet\")],d),d.prototype.toJSON.isDefaultToJSON=!0,d||(d={});var g=d;export default g;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isNone as n}from\"../../core/maybe.js\";import{equals as e}from\"../../geometry/support/spatialReferenceUtils.js\";import{getMetersPerVerticalUnitForSR as t}from\"../../core/unitUtils.js\";function o(o,r,i){if(n(r)||n(i)||i.vcsWkid||e(r,i))return null;const s=t(r)/t(i);if(1===s)return null;switch(o){case\"point\":case\"esriGeometryPoint\":return n=>{return t=s,void((e=n)&&null!=e.z&&(e.z*=t));var e,t};case\"polyline\":case\"esriGeometryPolyline\":return n=>function(n,e){if(!n)return;for(const t of n.paths)for(const n of t)n.length>2&&(n[2]*=e)}(n,s);case\"polygon\":case\"esriGeometryPolygon\":return n=>function(n,e){if(!n)return;for(const t of n.rings)for(const n of t)n.length>2&&(n[2]*=e)}(n,s);case\"multipoint\":case\"esriGeometryMultipoint\":return n=>function(n,e){if(!n)return;for(const t of n.points)t.length>2&&(t[2]*=e)}(n,s);default:return null}}function r(n,e,t){if(null==n.hasM||n.hasZ)for(const n of e)for(const e of n)e.length>2&&(e[2]*=t)}function i(n,e,o){if(!n&&!e||!o)return;const r=t(o);s(n,o,r),s(e,o,r)}function s(n,e,t){if(n)for(const o of n)f(o.geometry,e,t)}function f(n,o,i){if(!n||!n.spatialReference||e(n.spatialReference,o))return;const s=t(n.spatialReference)/i;if(1!==s)if(\"x\"in n)null!=n.z&&(n.z*=s);else if(\"rings\"in n)r(n,n.rings,s);else if(\"paths\"in n)r(n,n.paths,s);else if(\"points\"in n&&(null==n.hasM||n.hasZ))for(const e of n.points)e.length>2&&(e[2]*=s)}export{o as getGeometryZScaler,i as unapplyEditsZUnitScaling};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{getGeometryZScaler as e}from\"./zscale.js\";function t(t,o,r){if(!r||!r.features||!r.hasZ)return;const f=e(r.geometryType,o,t.outSpatialReference);if(f)for(const e of r.features)f(e.geometry)}export{t as applyFeatureSetZUnitScaling};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import{enumeration as o}from\"../../core/accessorSupport/decorators/enumeration.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as p}from\"../../core/JSONSupport.js\";let s=class extends p{constructor(){super(...arguments),this.nodesPerPage=null,this.rootIndex=0,this.lodSelectionMetricType=null}};e([t({type:Number})],s.prototype,\"nodesPerPage\",void 0),e([t({type:Number})],s.prototype,\"rootIndex\",void 0),e([t({type:String})],s.prototype,\"lodSelectionMetricType\",void 0),s=e([r(\"esri.layer.support.I3SNodePageDefinition\")],s);let i=class extends p{constructor(){super(...arguments),this.factor=1}};e([t({type:Number,json:{read:{source:\"textureSetDefinitionId\"}}})],i.prototype,\"id\",void 0),e([t({type:Number})],i.prototype,\"factor\",void 0),i=e([r(\"esri.layer.support.I3SMaterialTexture\")],i);let l=class extends p{constructor(){super(...arguments),this.baseColorFactor=[1,1,1,1],this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.metallicFactor=1,this.roughnessFactor=1}};e([t({type:[Number]})],l.prototype,\"baseColorFactor\",void 0),e([t({type:i})],l.prototype,\"baseColorTexture\",void 0),e([t({type:i})],l.prototype,\"metallicRoughnessTexture\",void 0),e([t({type:Number})],l.prototype,\"metallicFactor\",void 0),e([t({type:Number})],l.prototype,\"roughnessFactor\",void 0),l=e([r(\"esri.layer.support.I3SMaterialPBRMetallicRoughness\")],l);let a=class extends p{constructor(){super(...arguments),this.alphaMode=\"opaque\",this.alphaCutoff=.25,this.doubleSided=!1,this.cullFace=\"none\",this.normalTexture=null,this.occlusionTexture=null,this.emissiveTexture=null,this.emissiveFactor=null,this.pbrMetallicRoughness=null}};e([o({opaque:\"opaque\",mask:\"mask\",blend:\"blend\"})],a.prototype,\"alphaMode\",void 0),e([t({type:Number})],a.prototype,\"alphaCutoff\",void 0),e([t({type:Boolean})],a.prototype,\"doubleSided\",void 0),e([o({none:\"none\",back:\"back\",front:\"front\"})],a.prototype,\"cullFace\",void 0),e([t({type:i})],a.prototype,\"normalTexture\",void 0),e([t({type:i})],a.prototype,\"occlusionTexture\",void 0),e([t({type:i})],a.prototype,\"emissiveTexture\",void 0),e([t({type:[Number]})],a.prototype,\"emissiveFactor\",void 0),e([t({type:l})],a.prototype,\"pbrMetallicRoughness\",void 0),a=e([r(\"esri.layer.support.I3SMaterialDefinition\")],a);let n=class extends p{};e([t({type:String,json:{read:{source:[\"name\",\"index\"],reader:(e,t)=>null!=e?e:`${t.index}`}}})],n.prototype,\"name\",void 0),e([o({jpg:\"jpg\",png:\"png\",dds:\"dds\",\"ktx-etc2\":\"ktx-etc2\"})],n.prototype,\"format\",void 0),n=e([r(\"esri.layer.support.I3STextureFormat\")],n);let u=class extends p{constructor(){super(...arguments),this.atlas=!1}};e([t({type:[n]})],u.prototype,\"formats\",void 0),e([t({type:Boolean})],u.prototype,\"atlas\",void 0),u=e([r(\"esri.layer.support.I3STextureSetDefinition\")],u);let y=class extends p{};e([o({Float32:\"Float32\",UInt64:\"UInt64\",UInt32:\"UInt32\",UInt16:\"UInt16\",UInt8:\"UInt8\"})],y.prototype,\"type\",void 0),e([t({type:Number})],y.prototype,\"component\",void 0),y=e([r(\"esri.layer.support.I3SGeometryAttribute\")],y);let c=class extends p{};e([o({draco:\"draco\"})],c.prototype,\"encoding\",void 0),e([t({type:[String]})],c.prototype,\"attributes\",void 0),c=e([r(\"esri.layer.support.I3SGeometryCompressedAttributes\")],c);let d=class extends p{constructor(){super(...arguments),this.offset=0}};e([t({type:Number})],d.prototype,\"offset\",void 0),e([t({type:y})],d.prototype,\"position\",void 0),e([t({type:y})],d.prototype,\"normal\",void 0),e([t({type:y})],d.prototype,\"uv0\",void 0),e([t({type:y})],d.prototype,\"color\",void 0),e([t({type:y})],d.prototype,\"uvRegion\",void 0),e([t({type:y})],d.prototype,\"featureId\",void 0),e([t({type:y})],d.prototype,\"faceRange\",void 0),e([t({type:c})],d.prototype,\"compressedAttributes\",void 0),d=e([r(\"esri.layer.support.I3SGeometryBuffer\")],d);let m=class extends p{};e([o({triangle:\"triangle\"})],m.prototype,\"topology\",void 0),e([t()],m.prototype,\"geometryBuffers\",void 0),m=e([r(\"esri.layer.support.I3SGeometryDefinition\")],m);export{y as I3SGeometryAttribute,d as I3SGeometryBuffer,c as I3SGeometryCompressedAttributes,m as I3SGeometryDefinition,a as I3SMaterialDefinition,l as I3SMaterialPBRMetallicRoughness,i as I3SMaterialTexture,s as I3SNodePageDefinition,n as I3STextureFormat,u as I3STextureSetDefinition};\n"],"sourceRoot":""}