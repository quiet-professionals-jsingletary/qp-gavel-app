(this["webpackJsonpqp-ampd-app"]=this["webpackJsonpqp-ampd-app"]||[]).push([[57,127],{1048:function(e,t,r){"use strict";r.r(t);var a=r(11),n=r(2),o=r(3),i=r(4),s=r(5),u=r(0),c=(r(13),r(12),r(14),r(1)),l=r(6),p=(r(9),r(19),r(20),r(15)),y=r(58),f=r(764),b=r(766),m=r(902),O=r(903),j=r(10),v=r(28),d=r(23),g=r(36),h=r(48),k=r(122),B=r(121),R=(r(86),r(206)),T=r(677),G=r(904),S=r(905);function x(e){return T.default.fromJSON(e).features.map((function(e){return e.geometry}))}var w=function(e){Object(i.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).directions=null,a.facilities=null,a.incidents=null,a.messages=null,a.pointBarriers=null,a.polylineBarriers=null,a.polygonBarriers=null,a.routes=null,a}return Object(o.a)(r,[{key:"readFacilities",value:function(e){return x(e)}},{key:"readIncidents",value:function(e){return x(e)}},{key:"readPointBarriers",value:function(e,t){return x(t.barriers)}},{key:"readPolylineBarriers",value:function(e){return x(e)}},{key:"readPolygonBarriers",value:function(e){return x(e)}},{key:"readRoutes",value:function(e){return function(e){return e.features.map((function(t){var r=g.a.fromJSON(e.spatialReference),a=R.a.fromJSON(t);return Object(j.g)(a.geometry)&&(a.geometry.spatialReference=r),a}))}(e)}}]),r}(d.a);Object(u.a)([Object(c.b)({type:[G.a]})],w.prototype,"directions",void 0),Object(u.a)([Object(c.b)({type:[h.a]})],w.prototype,"facilities",void 0),Object(u.a)([Object(v.a)("facilities")],w.prototype,"readFacilities",null),Object(u.a)([Object(c.b)({type:[h.a]})],w.prototype,"incidents",void 0),Object(u.a)([Object(v.a)("incidents")],w.prototype,"readIncidents",null),Object(u.a)([Object(c.b)({type:[S.a]})],w.prototype,"messages",void 0),Object(u.a)([Object(c.b)({type:[h.a]})],w.prototype,"pointBarriers",void 0),Object(u.a)([Object(v.a)("pointBarriers",["barriers"])],w.prototype,"readPointBarriers",null),Object(u.a)([Object(c.b)({type:[B.a]})],w.prototype,"polylineBarriers",void 0),Object(u.a)([Object(v.a)("polylineBarriers")],w.prototype,"readPolylineBarriers",null),Object(u.a)([Object(c.b)({type:[k.a]})],w.prototype,"polygonBarriers",void 0),Object(u.a)([Object(v.a)("polygonBarriers")],w.prototype,"readPolygonBarriers",null),Object(u.a)([Object(c.b)({type:[R.a]})],w.prototype,"routes",void 0),Object(u.a)([Object(v.a)("routes")],w.prototype,"readRoutes",null);var N=w=Object(u.a)([Object(l.a)("esri.tasks.support.ClosestFacilitySolveResult")],w),P=Object(m.a)({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,directionsTimeAttribute:{name:"directionsTimeAttributeName"},impedanceAttribute:{name:"impedanceAttributeName"},facilities:!0,incidents:!0,outSpatialReference:{name:"outSR",getter:function(e){return e.outSpatialReference.wkid}},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},returnPointBarriers:{name:"returnBarriers"},returnRoutes:{name:"returnCFRoutes"},travelMode:!0}),_=function(e){Object(i.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).url=null,a}return Object(o.a)(r,[{key:"solve",value:function(e,t){var r=this,n=[],o=[],i={},s={};return e.incidents&&e.incidents.features&&this._collectGeometries(e.incidents.features,o,"incidents.features",i),e.facilities&&e.facilities.features&&this._collectGeometries(e.facilities.features,o,"facilities.features",i),e.pointBarriers&&e.pointBarriers.features&&this._collectGeometries(e.pointBarriers.features,o,"pointBarriers.features",i),e.polylineBarriers&&e.polylineBarriers.features&&this._collectGeometries(e.polylineBarriers.features,o,"polylineBarriers.features",i),e.polygonBarriers&&e.polygonBarriers.features&&this._collectGeometries(e.polygonBarriers.features,o,"polygonBarriers.features",i),Object(f.a)(o).then((function(e){for(var t in i){var a=i[t];n.push(t),s[t]=e.slice(a[0],a[1])}return r._isInputGeometryZAware(s,n)?r.getServiceDescription():Object(p.s)({dontCheck:!0})})).then((function(o){("dontCheck"in o?o.dontCheck:o.hasZ)||r._dropZValuesOffInputGeometry(s,n);var i=function(t){s[t].forEach((function(r,a){e.get(t)[a].geometry=r}))};for(var u in s)i(u);var c={query:Object(a.a)(Object(a.a)({},r.parsedUrl.query),{},{f:"json"},P.toQueryParams(e))};return(r.requestOptions||t)&&(c=Object(a.a)(Object(a.a)(Object(a.a)({},r.requestOptions),t),c)),Object(y.default)("".concat(r.parsedUrl.path,"/solveClosestFacility"),c)})).then((function(e){return N.fromJSON(e.data)}))}},{key:"_collectGeometries",value:function(e,t,r,a){a[r]=[t.length,t.length+e.length],e.forEach((function(e){t.push(e.geometry)}))}}]),r}(Object(O.a)(b.a));Object(u.a)([Object(c.b)()],_.prototype,"url",void 0);var F=_=Object(u.a)([Object(l.a)("esri.tasks.ClosestFacilityTask")],_);t.default=F},677:function(e,t,r){"use strict";r.r(t);var a=r(32),n=r(16),o=r(2),i=r(3),s=r(4),u=r(5),c=r(0),l=(r(13),r(10)),p=(r(12),r(14),r(1)),y=r(34),f=r(28),b=r(6),m=r(26),O=(r(9),r(19),r(20),r(23)),j=r(36),v=r(182),d=r(86),g=r(206),h=r(294),k=new y.a({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null}),B=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(e){var a;return Object(o.a)(this,r),(a=t.call(this,e)).displayFieldName=null,a.exceededTransferLimit=!1,a.features=[],a.fields=null,a.geometryType=null,a.hasM=!1,a.hasZ=!1,a.queryGeometry=null,a.spatialReference=null,a}return Object(i.a)(r,[{key:"readFeatures",value:function(e,t){for(var r=j.a.fromJSON(t.spatialReference),a=[],n=0;n<e.length;n++){var o=e[n],i=g.a.fromJSON(o),s=o.geometry&&o.geometry.spatialReference;Object(l.g)(i.geometry)&&!s&&(i.geometry.spatialReference=r),a.push(i)}return a}},{key:"writeGeometryType",value:function(e,t,r,a){if(e)k.write(e,t,r,a);else{var o=this.features;if(o){var i,s=Object(n.a)(o);try{for(s.s();!(i=s.n()).done;){var u=i.value;if(u&&Object(l.g)(u.geometry))return void k.write(u.geometry.type,t,r,a)}}catch(c){s.e(c)}finally{s.f()}}}}},{key:"readQueryGeometry",value:function(e,t){if(!e)return null;var r=!!e.spatialReference,a=Object(v.a)(e);return!r&&t.spatialReference&&(a.spatialReference=j.a.fromJSON(t.spatialReference)),a}},{key:"writeSpatialReference",value:function(e,t){if(e)t.spatialReference=e.toJSON();else{var r=this.features;if(r){var a,o=Object(n.a)(r);try{for(o.s();!(a=o.n()).done;){var i=a.value;i&&Object(l.g)(i.geometry)&&i.geometry.spatialReference&&(t.spatialReference=i.geometry.spatialReference.toJSON())}}catch(s){o.e(s)}finally{o.f()}}}}},{key:"toJSON",value:function(e){var t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(var r=0;r<t.features.length;r++){var a=t.features[r];if(a.geometry){var n=e&&e[r];a.geometry=n&&n.toJSON()||a.geometry}}return t}},{key:"quantize",value:function(e){for(var t=Object(a.a)(e.scale,2),r=t[0],n=t[1],o=Object(a.a)(e.translate,2),i=o[0],s=o[1],u=this.features,c=this._getQuantizationFunction(this.geometryType,(function(e){return Math.round((e-i)/r)}),(function(e){return Math.round((s-e)/n)})),p=0,y=u.length;p<y;p++)c(Object(l.m)(u[p].geometry))||(u.splice(p,1),p--,y--);return this.transform=e,this}},{key:"unquantize",value:function(){var e=this.geometryType,t=this.features,r=this.transform;if(!r)return this;var o,i=Object(a.a)(r.translate,2),s=i[0],u=i[1],c=Object(a.a)(r.scale,2),p=c[0],y=c[1],f=this._getHydrationFunction(e,(function(e){return e*p+s}),(function(e){return u-e*y})),b=Object(n.a)(t);try{for(b.s();!(o=b.n()).done;){var m=o.value.geometry;Object(l.g)(m)&&f(m)}}catch(O){b.e(O)}finally{b.f()}return this.transform=null,this}},{key:"_quantizePoints",value:function(e,t,r){for(var a,n,o=[],i=0,s=e.length;i<s;i++){var u=e[i];if(i>0){var c=t(u[0]),l=r(u[1]);c===a&&l===n||(o.push([c-a,l-n]),a=c,n=l)}else a=t(u[0]),n=r(u[1]),o.push([a,n])}return o.length>0?o:null}},{key:"_getQuantizationFunction",value:function(e,t,r){var a=this;return"point"===e?function(e){return e.x=t(e.x),e.y=r(e.y),e}:"polyline"===e||"polygon"===e?function(e){for(var n=Object(v.g)(e)?e.rings:e.paths,o=[],i=0,s=n.length;i<s;i++){var u=n[i],c=a._quantizePoints(u,t,r);c&&o.push(c)}return o.length>0?(Object(v.g)(e)?e.rings=o:e.paths=o,e):null}:"multipoint"===e?function(e){var n;return(n=a._quantizePoints(e.points,t,r)).length>0?(e.points=n,e):null}:"extent"===e?function(e){return e}:null}},{key:"_getHydrationFunction",value:function(e,t,r){return"point"===e?function(e){e.x=t(e.x),e.y=r(e.y)}:"polyline"===e||"polygon"===e?function(e){for(var a,n,o=Object(v.g)(e)?e.rings:e.paths,i=0,s=o.length;i<s;i++)for(var u=o[i],c=0,l=u.length;c<l;c++){var p=u[c];c>0?(a+=p[0],n+=p[1]):(a=p[0],n=p[1]),p[0]=t(a),p[1]=r(n)}}:"extent"===e?function(e){e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"multipoint"===e?function(e){for(var a,n,o=e.points,i=0,s=o.length;i<s;i++){var u=o[i];i>0?(a+=u[0],n+=u[1]):(a=u[0],n=u[1]),u[0]=t(a),u[1]=r(n)}}:void 0}}]),r}(O.a);Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],B.prototype,"displayFieldName",void 0),Object(c.a)([Object(p.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],B.prototype,"exceededTransferLimit",void 0),Object(c.a)([Object(p.b)({type:[g.a],json:{write:!0}})],B.prototype,"features",void 0),Object(c.a)([Object(f.a)("features")],B.prototype,"readFeatures",null),Object(c.a)([Object(p.b)({type:[h.a],json:{write:!0}})],B.prototype,"fields",void 0),Object(c.a)([Object(p.b)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:k.read}}})],B.prototype,"geometryType",void 0),Object(c.a)([Object(m.a)("geometryType")],B.prototype,"writeGeometryType",null),Object(c.a)([Object(p.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],B.prototype,"hasM",void 0),Object(c.a)([Object(p.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],B.prototype,"hasZ",void 0),Object(c.a)([Object(p.b)({types:d.b,json:{write:!0}})],B.prototype,"queryGeometry",void 0),Object(c.a)([Object(f.a)("queryGeometry")],B.prototype,"readQueryGeometry",null),Object(c.a)([Object(p.b)({type:j.a,json:{write:!0}})],B.prototype,"spatialReference",void 0),Object(c.a)([Object(m.a)("spatialReference")],B.prototype,"writeSpatialReference",null),Object(c.a)([Object(p.b)({json:{write:!0}})],B.prototype,"transform",void 0),(B=Object(c.a)([Object(b.a)("esri.tasks.support.FeatureSet")],B)).prototype.toJSON.isDefaultToJSON=!0,B||(B={});var R=B;t.default=R},904:function(e,t,r){"use strict";var a=r(2),n=r(3),o=r(4),i=r(5),s=r(0),u=(r(13),r(10)),c=(r(12),r(14),r(1)),l=r(28),p=r(6),y=(r(9),r(19),r(20),r(36)),f=r(48),b=r(57),m=r(121),O=(r(86),r(206)),j=function(e){Object(o.a)(r,e);var t=Object(i.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).extent=null,n.features=null,n.geometryType="polyline",n.routeId=null,n.routeName=null,n.totalDriveTime=null,n.totalLength=null,n.totalTime=null,n}return Object(n.a)(r,[{key:"readFeatures",value:function(e,t){var r=this;(e||[]).forEach((function(e){r._decompressFeatureGeometry(e,t.summary.envelope.spatialReference)}));var a=y.a.fromJSON(t.spatialReference);return e.map((function(e){var t=O.a.fromJSON(e),r=e.geometry&&e.geometry.spatialReference;return t.geometry&&!r&&(Object(u.m)(t.geometry).spatialReference=a),t.strings=e.strings,t.events=(e.events||[]).map((function(t){var r=new O.a({geometry:new f.a({x:t.point.x,y:t.point.y,z:t.point.z,hasZ:void 0!==t.point.z,spatialReference:e.geometry&&e.geometry.spatialReference}),attributes:{ETA:t.ETA,arriveTimeUTC:t.arriveTimeUTC}});return r.strings=t.strings,r})),t}))}},{key:"_decompressFeatureGeometry",value:function(e,t){e.geometry=this._decompressGeometry(e.compressedGeometry,t)}},{key:"_decompressGeometry",value:function(e,t){var r,a,n,o,i,s,u,c,l=0,p=0,y=0,f=0,b=[],m=0,O=0,j=0;if((i=e.match(/((\+|\-)[^\+\-\|]+|\|)/g))||(i=[]),0===parseInt(i[m],32)){m=2;var v=parseInt(i[m],32);m++,s=parseInt(i[m],32),m++,1&v&&(O=i.indexOf("|")+1,u=parseInt(i[O],32),O++),2&v&&(j=i.indexOf("|",O)+1,c=parseInt(i[j],32),j++)}else s=parseInt(i[m],32),m++;for(;m<i.length&&"|"!==i[m];){r=parseInt(i[m],32)+l,m++,l=r,a=parseInt(i[m],32)+p,m++,p=a;var d=[r/s,a/s];O&&(o=parseInt(i[O],32)+y,O++,y=o,d.push(o/u)),j&&(n=parseInt(i[j],32)+f,j++,f=n,d.push(n/c)),b.push(d)}return{paths:[b],hasZ:O>0,hasM:j>0,spatialReference:t}}},{key:"_mergePolylinesToSinglePath",value:function(e,t){var r=[];(e||[]).forEach((function(e){e.paths.forEach((function(e){r=r.concat(e)}))}));var a=[],n=[0,0];return r.forEach((function(e){e[0]===n[0]&&e[1]===n[1]||(a.push(e),n=e)})),new m.a({paths:[a]},t)}},{key:"mergedGeometry",get:function(){if(!this.features)return null;var e=this.features.map((function(e){var t=e.geometry;return Object(u.m)(t)})),t=this.get("extent.spatialReference");return this._mergePolylinesToSinglePath(e,t)}},{key:"strings",get:function(){return this.features.map((function(e){return e.strings}))}}]),r}(r(677).default);Object(s.a)([Object(c.b)({type:b.a,json:{read:{source:"summary.envelope"}}})],j.prototype,"extent",void 0),Object(s.a)([Object(c.b)()],j.prototype,"features",void 0),Object(s.a)([Object(l.a)("features")],j.prototype,"readFeatures",null),Object(s.a)([Object(c.b)()],j.prototype,"geometryType",void 0),Object(s.a)([Object(c.b)({readOnly:!0,dependsOn:["features","extent.spatialReference"]})],j.prototype,"mergedGeometry",null),Object(s.a)([Object(c.b)()],j.prototype,"routeId",void 0),Object(s.a)([Object(c.b)()],j.prototype,"routeName",void 0),Object(s.a)([Object(c.b)({value:null,readOnly:!0,dependsOn:["features"]})],j.prototype,"strings",null),Object(s.a)([Object(c.b)({json:{read:{source:"summary.totalDriveTime"}}})],j.prototype,"totalDriveTime",void 0),Object(s.a)([Object(c.b)({json:{read:{source:"summary.totalLength"}}})],j.prototype,"totalLength",void 0),Object(s.a)([Object(c.b)({json:{read:{source:"summary.totalTime"}}})],j.prototype,"totalTime",void 0);var v=j=Object(s.a)([Object(p.a)("esri.tasks.support.DirectionsFeatureSet")],j);t.a=v}}]);
//# sourceMappingURL=57.24c9e9f6.chunk.js.map