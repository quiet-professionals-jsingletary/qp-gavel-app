{"version":3,"sources":["../node_modules/@arcgis/core/symbols/support/previewSymbol2D.js"],"names":["u","document","createElement","p","h","d","size","l","f","maxSize","v","opacity","y","rotation","g","s","M","shape","fill","stroke","offset","width","Math","min","w","b","scale","x","k","type","e","style","t","cx","cy","r","path","command","values","symbolConfig","isSquareFill","squareFill","height","a","max","n","ceil","round","src","url","text","font","o","getContext","weight","push","family","join","measureText","i","test","length","parseFloat","slice","toString","align","decoration","rotated","kerning","L","z","j","color","C","toCss","then","applyColorModulation","unshift","c","m","node"],"mappings":"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","file":"static/js/122.8555644c.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{reject as t,resolve as a}from\"../../core/promiseUtils.js\";import{pt2px as l,px2pt as n}from\"../../core/screenUtils.js\";import{getStroke as s,getFill as o,getPatternUrlWithColor as i}from\"./gfxUtils.js\";import{shapes as r,adjustColorBrightness as c}from\"./previewUtils.js\";import{renderSymbol as m}from\"./renderUtils.js\";const u=document.createElement(\"canvas\");function p(p,h){const d=null!=(null==h?void 0:h.size)?l(h.size):null,f=null!=(null==h?void 0:h.maxSize)?l(h.maxSize):null,v=null!=(null==h?void 0:h.opacity)?h.opacity:null,y=null!=(null==h?void 0:h.rotation)?h.rotation:null,g=s(p),M={shape:null,fill:null,stroke:g,offset:[0,0]};null!=g&&g.width&&(g.width=Math.min(g.width,80));const w=(null==g?void 0:g.width)||0;let b=null!=d&&(null==(null==h?void 0:h.scale)||(null==h?void 0:h.scale)),x=0,k=0;switch(p.type){case\"simple-marker\":{const e=p.style,t=Math.min(null!=d?d:l(p.size),f||120);switch(x=t,k=t,e){case\"circle\":M.shape={type:\"circle\",cx:0,cy:0,r:.5*t},b||(x+=w,k+=w);break;case\"cross\":M.shape={type:\"path\",path:[{command:\"M\",values:[0,.5*k]},{command:\"L\",values:[x,.5*k]},{command:\"M\",values:[.5*x,0]},{command:\"L\",values:[.5*x,k]}]};break;case\"diamond\":M.shape={type:\"path\",path:[{command:\"M\",values:[0,.5*k]},{command:\"L\",values:[.5*x,0]},{command:\"L\",values:[x,.5*k]},{command:\"L\",values:[.5*x,k]},{command:\"Z\",values:[]}]},b||(x+=w,k+=w);break;case\"square\":M.shape={type:\"path\",path:[{command:\"M\",values:[0,0]},{command:\"L\",values:[x,0]},{command:\"L\",values:[x,k]},{command:\"L\",values:[0,k]},{command:\"Z\",values:[]}]},b||(x+=w,k+=w);break;case\"triangle\":M.shape={type:\"path\",path:[{command:\"M\",values:[.5*x,0]},{command:\"L\",values:[x,k]},{command:\"L\",values:[0,k]},{command:\"Z\",values:[]}]},b||(x+=w,k+=w);break;case\"x\":M.shape={type:\"path\",path:[{command:\"M\",values:[0,0]},{command:\"L\",values:[x,k]},{command:\"M\",values:[x,0]},{command:\"L\",values:[0,k]}]};break;case\"path\":M.shape={type:\"path\",path:p.path||\"\"},b||(x+=w,k+=w),b=!0}break}case\"simple-line\":{const e=Math.min(null!=d?d:w,f||80),t=e>22?2*e:40;g.width=e,x=t,k=e,M.shape={type:\"path\",path:[{command:\"M\",values:[0,k]},{command:\"L\",values:[x,k]}]};break}case\"picture-fill\":case\"simple-fill\":x=Math.min(null!=d?d:22,f||120)+w,k=x,b=!0,M.shape=\"object\"==typeof(null==h?void 0:h.symbolConfig)&&null!=h&&h.symbolConfig.isSquareFill?r.squareFill[0]:r.fill[0];break;case\"picture-marker\":{let e=l(p.width),t=l(p.height);const a=Math.max(e,t),n=e/t;e=n<=1?Math.ceil(a*n):a,t=n<=1?a:Math.ceil(a/n),x=Math.min(null!=d?d:e,f||120),k=Math.min(null!=d?d:t,f||120),M.shape={type:\"image\",x:-Math.round(x/2),y:-Math.round(k/2),width:x,height:k,src:p.url||\"\"};break}case\"text\":{const e=p,t=e.text||\"Aa\",a=e.font,s=Math.min(null!=d?d:l(a.size),f||120),o=function(e,t){const a=u.getContext(\"2d\"),l=[];return t&&(t.weight&&l.push(t.weight),t.size&&l.push(t.size+\"px\"),t.family&&l.push(t.family)),a.font=l.join(\" \"),a.measureText(e).width}(t,{weight:a.weight,size:s,family:a.family}),i=/[\\uE600-\\uE6FF]/.test(t);x=i?s:o,k=s;let r=.25*function(e){if(0===e.length)return 0;if(e.length>2){const t=n(1),a=parseFloat(e);switch(e.slice(-2)){case\"px\":return a;case\"pt\":return a*t;case\"in\":return 72*a*t;case\"pc\":return 12*a*t;case\"mm\":return 2.8346456692913384*a*t;case\"cm\":return 28.346456692913385*a*t}}return parseFloat(e)}((a?s:0).toString());i&&(r+=5),M.shape={type:\"text\",text:t,x:0,y:r,align:\"middle\",decoration:a&&a.decoration,rotated:e.rotated,kerning:e.kerning},M.font=a&&{size:s,style:a.style,decoration:a.decoration,weight:a.weight,family:a.family};break}}if(!M.shape)return t(new e(\"symbolPreview: renderPreviewHTML2D\",\"symbol not supported.\"));const L=o(p),z=L,j=p.color;let C=null;return z&&\"pattern\"===z.type&&j&&\"picture-fill\"!==p.type?C=i(z.src,j.toCss(!0)).then((e=>(z.src=e,M.fill=z,M))):(M.fill=L,C=a(M)),C.then((e=>{const t=[[e]];if(\"object\"==typeof(null==h?void 0:h.symbolConfig)&&null!=h&&h.symbolConfig.applyColorModulation){const a=.6*x;t.unshift([{...e,offset:[-a,0],fill:c(L,-.3)}]),t.push([{...e,offset:[a,0],fill:c(L,.3)}]),x+=2*a}return m(t,[x,k],{node:h&&h.node,scale:b,opacity:v,rotation:y})}))}export{p as previewSymbol2D};\n"],"sourceRoot":""}