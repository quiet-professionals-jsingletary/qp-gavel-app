(this["webpackJsonpqp-ampd-app"]=this["webpackJsonpqp-ampd-app"]||[]).push([[29],{1015:function(e,r,t){"use strict";t.d(r,"a",(function(){return o}));var a=t(32),n=t(2),s=t(3),i=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(n.a)(this,e),this._options=r}return Object(s.a)(e,[{key:"toQueryParams",value:function(e){var r=this;if(!e)return null;var t=e.toJSON(),n={};return Object.keys(t).forEach((function(e){var s=r._options[e];if(s){var i="boolean"!=typeof s&&s.name?s.name:e,o="boolean"!=typeof s&&s.getter?s.getter(t):t[e];null!=o&&(n[i]=function(e){if(!Array.isArray(e))return!1;var r=Object(a.a)(e,1)[0];return"number"==typeof r||"string"==typeof r}(o)?o.join(","):"object"==typeof o?JSON.stringify(o):o)}else n[e]=t[e]}),this),n}}]),e}();function o(e){return new i(e)}},1016:function(e,r,t){"use strict";t.d(r,"a",(function(){return h}));var a=t(13),n=t(7),s=t.n(n),i=t(16),o=t(2),c=t(3),u=t(5),l=t(6),p=t(0),f=(t(15),t(101)),v=t(4),b=(t(14),t(18),t(1),t(8)),y=t(20),d=t(12),j=(t(21),t(22),t(65)),O=t(559),h=function(e){var r=function(e){Object(u.a)(t,e);var r=Object(l.a)(t);function t(){return Object(o.a)(this,t),r.apply(this,arguments)}return Object(c.a)(t,[{key:"getServiceDescription",value:function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this._serviceDescriptionPromise||(this._serviceDescriptionPromise=this._fetchServiceDescription()),this._serviceDescriptionPromise));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_fetchServiceDescription",value:function(){var e=Object(i.a)(s.a.mark((function e(){var r,t,n,o,c,u,l,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.url&&this.parsedUrl){e.next=2;break}throw new y.a("network-service:missing-url","Url to Network service is missing");case 2:return r=this.url,e.next=5,Object(j.default)(r,{query:{f:"json"}});case 5:for(t=e.sent,(n=t.data).supportedTravelModes||(n.supportedTravelModes=[]),o=0;o<n.supportedTravelModes.length;o++)n.supportedTravelModes[o].id||(n.supportedTravelModes[o].id=n.supportedTravelModes[o].itemId);return c=n.currentVersion>=10.4?function(){var e=Object(i.a)(s.a.mark((function e(r){var t,a,n,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(j.default)(r+("/"===r[r.length-1]?"":"/")+"retrieveTravelModes",{query:{f:"json"}});case 3:return t=e.sent,a=t.data,n=a.supportedTravelModes,i=a.defaultTravelMode,e.abrupt("return",{supportedTravelModes:n,defaultTravelMode:i});case 10:throw e.prev=10,e.t0=e.catch(0),new y.a("network-service:retrieveTravelModes","Could not get to the NAServer's retrieveTravelModes.",{error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(r){return e.apply(this,arguments)}}()(r):function(){var e=Object(i.a)(s.a.mark((function e(r){var t,n,i,o,c,u,l,p,v,b,y,O,h,g,m,k,M,w;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.default)(r.substring(0,r.indexOf("/rest/")+6)+"info",{query:{f:"json"}});case 2:if(t=e.sent,(n=t.data)&&n.owningSystemUrl){e.next=6;break}return e.abrupt("return",{supportedTravelModes:[],defaultTravelMode:null});case 6:return r=n.owningSystemUrl,e.next=9,Object(j.default)(r+("/"===r[r.length-1]?"":"/")+"sharing/rest/portals/self",{query:{f:"json"}});case 9:if(i=e.sent,o=i.data,c=Object(f.b)("helperServices.routingUtilities.url",o)){e.next=14;break}return e.abrupt("return",{supportedTravelModes:[],defaultTravelMode:null});case 14:return u=Object(d.I)(r),l=/\/solveClosestFacility$/.test(u.path)?"Route":/\/solveClosestFacility$/.test(u.path)?"ClosestFacility":"ServiceAreas",e.next=18,Object(j.default)(c+("/"===c[c.length-1]?"":"/")+"GetTravelModes/execute",{query:{f:"json",serviceName:l}});case 18:if(p=e.sent,v=[],b=null,p&&p.data&&p.data.results&&p.data.results.length){y=p.data.results,O=Object(a.a)(y);try{for(O.s();!(h=O.n()).done;)if("supportedTravelModes"===(g=h.value).paramName){if(g.value&&g.value.features){m=Object(a.a)(g.value.features);try{for(m.s();!(k=m.n()).done;)(M=k.value.attributes)&&(w=JSON.parse(M.TravelMode),v.push(w))}catch(s){m.e(s)}finally{m.f()}}}else"defaultTravelMode"===g.paramName&&(b=g.value)}catch(s){O.e(s)}finally{O.f()}}return e.abrupt("return",{supportedTravelModes:v,defaultTravelMode:b});case 23:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()(r),e.next=12,c;case 12:return u=e.sent,l=u.defaultTravelMode,p=u.supportedTravelModes,e.abrupt("return",(n.defaultTravelMode=l,n.supportedTravelModes=p,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_isInputGeometryZAware",value:function(e,r){for(var t=0;t<r.length;t++){var n=e[r[t]];if(n&&n.length){var s,i=Object(a.a)(n);try{for(i.s();!(s=i.n()).done;){var o=s.value;if(Object(v.h)(o)&&o.hasZ)return!0}}catch(c){i.e(c)}finally{i.f()}}}return!1}},{key:"_dropZValuesOffInputGeometry",value:function(e,r){for(var t=0;t<r.length;t++){var n=e[r[t]];if(n&&n.length){var s,i=Object(a.a)(n);try{for(i.s();!(s=i.n()).done;){s.value.z=void 0}}catch(o){i.e(o)}finally{i.f()}}}console.log("The remote Network Analysis service is powered by a network dataset which is not Z-aware.\nZ-coordinates of the input geometry are ignored.")}}]),t}(e);return r=Object(p.a)([Object(b.a)("esri.tasks.mixins.NAServiceDescription")],r),r},g=function(e){Object(u.a)(t,e);var r=Object(l.a)(t);function t(){return Object(o.a)(this,t),r.apply(this,arguments)}return t}(h(O.a));g=Object(p.a)([Object(b.a)("esri.tasks.mixins.NAServiceDescription")],g)},1017:function(e,r,t){"use strict";var a=t(2),n=t(5),s=t(6),i=t(0),o=(t(15),t(14),t(18),t(1)),c=t(50),u=t(8),l=(t(12),t(21),t(22),t(989)),p=new c.a({0:"informative",1:"process-definition",2:"process-start",3:"process-stop",50:"warning",100:"error",101:"empty",200:"abort"}),f=function(e){Object(n.a)(t,e);var r=Object(s.a)(t);function t(e){var n;return Object(a.a)(this,t),(n=r.call(this,e)).type=null,n}return t}(l.a);Object(i.a)([Object(o.b)({type:String,json:{read:p.read,write:p.write}})],f.prototype,"type",void 0);var v=f=Object(i.a)([Object(u.a)("esri.tasks.support.NAMessage")],f);r.a=v},1236:function(e,r,t){"use strict";t.r(r);var a=t(10),n=t(2),s=t(3),i=t(5),o=t(6),c=t(0),u=(t(15),t(14),t(18),t(1)),l=t(8),p=(t(12),t(21),t(22),t(17)),f=t(65),v=t(427),b=t(559),y=t(1015),d=t(1016),j=t(4),O=t(34),h=t(27),g=t(48),m=t(56),k=t(119),M=t(127),w=t(97),T=(t(99),t(80)),B=t(1017);function S(e){return e.features.map((function(r){var t=g.a.fromJSON(e.spatialReference),a=T.a.fromJSON(r);return Object(j.n)(a.geometry).spatialReference=t,a}))}function P(e){return e.features.map((function(r){return r.geometry.spatialReference=e.spatialReference,Object(w.a)(r.geometry)}))}var A=function(e){Object(i.a)(t,e);var r=Object(o.a)(t);function t(e){var a;return Object(n.a)(this,t),(a=r.call(this,e)).facilities=null,a.messages=null,a.pointBarriers=null,a.polylineBarriers=null,a.polygonBarriers=null,a.serviceAreaPolylines=null,a.serviceAreaPolygons=null,a}return Object(s.a)(t,[{key:"readFacilities",value:function(e){return P(e)}},{key:"readPointBarriers",value:function(e,r){return P(r.barriers)}},{key:"readPolylineBarriers",value:function(e){return P(e)}},{key:"readPolygonBarriers",value:function(e){return P(e)}},{key:"readIncidents",value:function(e,r){return S(r.saPolylines)}},{key:"readServiceAreaPolygons",value:function(e,r){return S(r.saPolygons)}}]),t}(h.a);Object(c.a)([Object(u.b)({type:[m.a]})],A.prototype,"facilities",void 0),Object(c.a)([Object(O.a)("facilities")],A.prototype,"readFacilities",null),Object(c.a)([Object(u.b)({type:[B.a]})],A.prototype,"messages",void 0),Object(c.a)([Object(u.b)({type:[m.a]})],A.prototype,"pointBarriers",void 0),Object(c.a)([Object(O.a)("pointBarriers",["barriers"])],A.prototype,"readPointBarriers",null),Object(c.a)([Object(u.b)({type:[M.a]})],A.prototype,"polylineBarriers",void 0),Object(c.a)([Object(O.a)("polylineBarriers")],A.prototype,"readPolylineBarriers",null),Object(c.a)([Object(u.b)({type:[k.a]})],A.prototype,"polygonBarriers",void 0),Object(c.a)([Object(O.a)("polygonBarriers")],A.prototype,"readPolygonBarriers",null),Object(c.a)([Object(u.b)({type:[T.a]})],A.prototype,"serviceAreaPolylines",void 0),Object(c.a)([Object(O.a)("serviceAreaPolylines",["saPolylines"])],A.prototype,"readIncidents",null),Object(c.a)([Object(u.b)({type:[T.a]})],A.prototype,"serviceAreaPolygons",void 0),Object(c.a)([Object(O.a)("serviceAreaPolygons",["saPolygons"])],A.prototype,"readServiceAreaPolygons",null);var x=A=Object(c.a)([Object(l.a)("esri.tasks.support.ServiceAreaSolveResult")],A),N=Object(y.a)({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,defaultBreaks:!0,facilities:!0,outSpatialReference:{name:"outSR",getter:function(e){return e.outSpatialReference.wkid}},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},returnPointBarriers:{name:"returnBarriers"},travelMode:!0}),J=function(e){Object(i.a)(t,e);var r=Object(o.a)(t);function t(e){var a;return Object(n.a)(this,t),(a=r.call(this,e)).url=null,a}return Object(s.a)(t,[{key:"solve",value:function(e,r){var t=this,n=[],s=[],i={},o={};return e.facilities&&e.facilities.features&&this._collectGeometries(e.facilities.features,s,"facilities.features",i),e.pointBarriers&&e.pointBarriers.features&&this._collectGeometries(e.pointBarriers.features,s,"pointBarriers.features",i),e.polylineBarriers&&e.polylineBarriers.features&&this._collectGeometries(e.polylineBarriers.features,s,"polylineBarriers.features",i),e.polygonBarriers&&e.polygonBarriers.features&&this._collectGeometries(e.polygonBarriers.features,s,"polygonBarriers.features",i),Object(v.a)(s).then((function(e){for(var r in i){var a=i[r];n.push(r),o[r]=e.slice(a[0],a[1])}return t._isInputGeometryZAware(o,n)?t.getServiceDescription():Object(p.s)({dontCheck:!0})})).then((function(s){("dontCheck"in s?s.dontCheck:s.hasZ)||t._dropZValuesOffInputGeometry(o,n);var i=function(r){o[r].forEach((function(t,a){e.get(r)[a].geometry=t}))};for(var c in o)i(c);var u={query:Object(a.a)(Object(a.a)({},t.parsedUrl.query),{},{f:"json"},N.toQueryParams(e))};return(t.requestOptions||r)&&(u=Object(a.a)(Object(a.a)(Object(a.a)({},t.requestOptions),r),u)),Object(f.default)("".concat(t.parsedUrl.path,"/solveServiceArea"),u)})).then((function(e){return x.fromJSON(e.data)}))}},{key:"_collectGeometries",value:function(e,r,t,a){a[t]=[r.length,r.length+e.length],e.forEach((function(e){r.push(e.geometry)}))}}]),t}(Object(d.a)(b.a));Object(c.a)([Object(u.b)()],J.prototype,"url",void 0);var _=J=Object(c.a)([Object(l.a)("esri.tasks.ServiceAreaTask")],J);r.default=_},989:function(e,r,t){"use strict";var a=t(2),n=t(5),s=t(6),i=t(0),o=(t(15),t(14),t(18),t(1)),c=t(50),u=t(8),l=(t(12),t(21),t(22),t(27)),p=new c.a({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"}),f=function(e){Object(n.a)(t,e);var r=Object(s.a)(t);function t(e){var n;return Object(a.a)(this,t),(n=r.call(this,e)).description=null,n.type=null,n}return t}(l.a);Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],f.prototype,"description",void 0),Object(i.a)([Object(o.b)({type:String,json:{read:p.read,write:p.write}})],f.prototype,"type",void 0);var v=f=Object(i.a)([Object(u.a)("esri.tasks.support.GPMessage")],f);r.a=v}}]);
//# sourceMappingURL=29.ea2a25a8.chunk.js.map