(this["webpackJsonpqp-ampd-app"]=this["webpackJsonpqp-ampd-app"]||[]).push([[12],{1018:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(2),r=i(3),a=function(){function t(){Object(n.a)(this,t),this.setIdentity()}return Object(r.a)(t,[{key:"getAngle",value:function(){return(null==this.rz||0===this.rz&&1!==this.rz_c&&0!==this.rz_s)&&(this.rz=Math.atan2(this.rz_s,this.rz_c)),this.rz}},{key:"setIdentity",value:function(){this.tx=0,this.ty=0,this.tz=0,this.s=1,this.rx=0,this.ry=0,this.rz=0,this.rz_c=1,this.rz_s=0}},{key:"setTranslate",value:function(t,e){this.tx=t,this.ty=e}},{key:"setTranslateZ",value:function(t){this.tz=t}},{key:"setRotateCS",value:function(t,e){this.rz=void 0,this.rz_c=t,this.rz_s=e}},{key:"setRotate",value:function(t){this.rz=t,this.rz_c=void 0,this.rz_s=void 0}},{key:"setRotateY",value:function(t){this.ry=t}},{key:"setScale",value:function(t){this.s=t}},{key:"setMeasure",value:function(t){this.m=t}}]),t}()},1080:function(t,e,i){"use strict";i.d(e,"a",(function(){return J})),i.d(e,"b",(function(){return M}));var n=i(7),r=i.n(n),a=i(32),s=i(10),o=i(13),l=i(16),h=i(125),c=i(14),u=i(17),f=i(144),v=i(43),m=i(36),p=i(148),y=i(1119),_=i(1151),g=i(1122),d=c.a.getLogger("esri.symbols.cim.cimAnalyzer");function b(t){switch(t){case"Butt":return 0;case"Square":return 2;case"Round":default:return 1}}function k(t){switch(t){case"Bevel":return 0;case"Miter":return 2;case"Round":default:return 1}}function O(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":return"center";case"Justify":return"justify"}}function x(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function P(t,e,i,n){var r;t[e]?r=t[e]:(r={},t[e]=r),r[i]=n}function S(t){var e=t.markerPlacement;return e&&e.angleToLine?1:0}function M(t,e,i,n){return C.apply(this,arguments)}function C(){return(C=Object(l.a)(r.a.mark((function t(e,i,n,a){var s,l,h,c,v,m,p,y;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=n||[],e){t.next=3;break}return t.abrupt("return",s);case 3:if(c={},"CIMSymbolReference"===e.type){t.next=6;break}return t.abrupt("return",(d.error("Expect cim type to be 'CIMSymbolReference'"),s));case 6:if(l=e.symbol,!(h=e.primitiveOverrides)){t.next=12;break}v=[],m=Object(o.a)(h);try{for(y=function(){var t=p.value,e=t.valueExpressionInfo;if(e&&i){var n=e.expression,r=Object(f.d)(n,i.spatialReference,i.fields).then((function(e){e&&P(c,t.primitiveName,t.propertyName,e)}));v.push(r)}else null!=t.value&&P(c,t.primitiveName,t.propertyName,t.value)},m.s();!(p=m.n()).done;)y()}catch(r){m.e(r)}finally{m.f()}return t.next=12,Object(u.b)(v);case 12:switch(l.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":!function(t,e,i,n,r,a){if(t){var s=t.symbolLayers;if(s){var o,l=_.a.getSize(t);"CIMPointSymbol"===t.type&&"Map"===t.angleAlignment&&(o=1);for(var h=s.length;h--;){var c=s[h];if(c&&!1!==c.enable){var u=[];switch(_.b.findApplicableOverrides(c,e,u),c.type){case"CIMSolidFill":j(c,i,u,n,r);break;case"CIMPictureFill":w(c,i,u,n,r);break;case"CIMHatchFill":L(c,i,u,n,r);break;case"CIMGradientFill":I(c,i,u,n,r);break;case"CIMSolidStroke":A(c,i,u,n,r,"CIMPolygonSymbol"===t.type,l);break;case"CIMPictureStroke":T(c,i,u,n,r,"CIMPolygonSymbol"===t.type,l);break;case"CIMGradientStroke":N(c,i,u,n,r,"CIMPolygonSymbol"===t.type,l);break;case"CIMCharacterMarker":if(z(c,i,u,n,r))break;break;case"CIMPictureMarker":if(z(c,i,u,n,r))break;"CIMLineSymbol"===t.type&&(o=S(c)),E(c,i,u,n,r,o,l);break;case"CIMVectorMarker":if(z(c,i,u,n,r))break;"CIMLineSymbol"===t.type&&(o=S(c)),G(c,i,u,n,r,o,l,a);break;default:d.error("Cannot analyze CIM layer",c.type)}}}}}}(l,h,c,i,s,a)}return t.abrupt("return",s);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function j(t,e,i,n,r){var a=t.primitiveName,s=Object(p.e)(t.color),o=Object(h.b)(JSON.stringify(t)).toString();r.push({type:"fill",templateHash:o,materialHash:0===i.length?o:function(){return o},cim:t,materialOverrides:null,colorLocked:t.colorLocked,color:V(a,e,"Color",n,s,R),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:t.effects})}function w(t,e,i,n,r){var a=t.primitiveName,s=t.tintColor?Object(p.e)(t.tintColor):{r:255,g:255,b:255,a:1},o=Object(h.b)(JSON.stringify(t)).toString(),l=Object(h.b)("".concat(t.url).concat(JSON.stringify(t.colorSubstitutions))).toString();r.push({type:"fill",templateHash:o,materialHash:0===i.length?l:function(){return l},cim:t,materialOverrides:null,colorLocked:t.colorLocked,effects:t.effects,color:V(a,e,"TintColor",n,s,R),height:V(a,e,"Height",n,t.height),scaleX:V(a,e,"ScaleX",n,t.scaleX),angle:V(a,e,"Rotation",n,t.rotation),offsetX:V(a,e,"OffsetX",n,t.offsetX),offsetY:V(a,e,"OffsetY",n,t.offsetY)})}function L(t,e,i,n,r){var a=["Rotation","OffsetX","OffsetY"],s=i.filter((function(e){return e.primitiveName!==t.primitiveName&&-1===a.indexOf(e.propertyName)})),o=t.primitiveName,l=Object(h.b)(JSON.stringify(t)).toString(),c=Object(h.b)("".concat(t.separation).concat(JSON.stringify(t.lineSymbol))).toString();r.push({type:"fill",templateHash:l,materialHash:0===i.length?c:D(c,e,s,n),cim:t,materialOverrides:s,colorLocked:t.colorLocked,effects:t.effects,color:{r:255,g:255,b:255,a:1},height:V(o,e,"Separation",n,t.separation),scaleX:1,angle:V(o,e,"Rotation",n,t.rotation),offsetX:V(o,e,"OffsetX",n,t.offsetX),offsetY:V(o,e,"OffsetY",n,t.offsetY)})}function I(t,e,i,n,r){var a=Object(h.b)(JSON.stringify(t)).toString();r.push({type:"fill",templateHash:a,materialHash:0===i.length?a:D(a,e,i,n),cim:t,materialOverrides:null,colorLocked:t.colorLocked,effects:t.effects,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1})}function A(t,e,i,n,r,a,s){var o=Object(h.b)(JSON.stringify(t)).toString(),l=t.primitiveName,c=Object(p.e)(t.color),u=void 0!==t.width?t.width:4,f=b(t.capStyle),v=k(t.joinStyle),m=t.miterLimit;r.push({type:"line",templateHash:o,materialHash:0===i.length?o:function(){return o},cim:t,materialOverrides:null,isOutline:a,colorLocked:t.colorLocked,effects:t.effects,color:V(l,e,"Color",n,c,R),width:V(l,e,"Width",n,u),cap:V(l,e,"CapStyle",n,f),join:V(l,e,"JoinStyle",n,v),miterLimit:V(l,e,"MiterLimit",n,m),referenceWidth:s,zOrder:Y(t.name),isDashed:!1})}function T(t,e,i,n,r,a,s){var o=Object(h.b)("".concat(t.url).concat(JSON.stringify(t.colorSubstitutions))).toString(),l=t.primitiveName,c=Object(p.e)(t.tintColor),u=void 0!==t.width?t.width:4,f=b(t.capStyle),v=k(t.joinStyle),m=t.miterLimit,y=Object(h.b)(JSON.stringify(t)).toString();r.push({type:"line",templateHash:y,materialHash:0===i.length?o:function(){return o},cim:t,materialOverrides:null,isOutline:a,colorLocked:t.colorLocked,effects:t.effects,color:V(l,e,"TintColor",n,c,R),width:V(l,e,"Width",n,u),cap:V(l,e,"CapStyle",n,f),join:V(l,e,"JoinStyle",n,v),miterLimit:V(l,e,"MiterLimit",n,m),referenceWidth:s,zOrder:Y(t.name),isDashed:!1})}function N(t,e,i,n,r,a,s){var o=t.primitiveName,l=void 0!==t.width?t.width:4,c=b(t.capStyle),u=k(t.joinStyle),f=t.miterLimit,v=Object(h.b)(JSON.stringify(t)).toString();r.push({type:"line",templateHash:v,materialHash:0===i.length?v:D(v,e,i,n),cim:t,materialOverrides:null,isOutline:a,colorLocked:t.colorLocked,effects:t.effects,color:{r:128,g:128,b:128,a:1},width:V(o,e,"Width",n,l),cap:V(o,e,"CapStyle",n,c),join:V(o,e,"JoinStyle",n,u),miterLimit:V(o,e,"MiterLimit",n,f),referenceWidth:s,zOrder:Y(t.name),isDashed:!1})}function z(t,e,i,n,r){var a=t.markerPlacement;if(!a||"CIMMarkerPlacementInsidePolygon"!==a.type)return!1;var s=a,o=["Rotation","OffsetX","OffsetY"],l=i.filter((function(e){return e.primitiveName!==t.primitiveName&&-1===o.indexOf(e.propertyName)})),c=Object(h.b)(JSON.stringify(t)).toString();return r.push({type:"fill",templateHash:c,materialHash:0===i.length?c:D(c,e,l,n),cim:t,materialOverrides:l,colorLocked:t.colorLocked,effects:t.effects,color:{r:255,g:255,b:255,a:1},height:V(s.primitiveName,e,"StepY",n,s.stepY),scaleX:1,angle:V(s.primitiveName,e,"GridAngle",n,s.gridAngle),offsetX:V(s.primitiveName,e,"OffsetX",n,s.offsetX),offsetY:V(s.primitiveName,e,"OffsetY",n,s.offsetY)}),!0}function E(t,e,i,n,r,a,s){var l,c=t.primitiveName,u=t.size,f=t.scaleX,v=t.rotation,m=t.offsetX,y=t.offsetY,_=Object(p.e)(t.tintColor),g=Object(h.b)("".concat(t.url).concat(JSON.stringify(t.colorSubstitutions))).toString(),d=!1,b="",k=Object(o.a)(i);try{for(k.s();!(l=k.n()).done;){var O=l.value;O.primitiveName===c&&(void 0!==O.value?b+="-".concat(O.primitiveName,"-").concat(O.propertyName,"-").concat(JSON.stringify(O.value)):O.valueExpressionInfo&&(d=!0))}}catch(x){k.e(x)}finally{k.f()}r.push({type:"marker",templateHash:Object(h.b)(JSON.stringify(t)+b).toString(),materialHash:d?function(){return g}:g,cim:t,materialOverrides:null,colorLocked:t.colorLocked,effects:t.effects,scaleSymbolsProportionally:!1,alignment:a,size:V(c,e,"Size",n,u),scaleX:V(c,e,"ScaleX",n,f),rotation:V(c,e,"Rotation",n,v),offsetX:V(c,e,"OffsetX",n,m),offsetY:V(c,e,"OffsetY",n,y),color:V(c,e,"TintColor",n,_,R),anchorPoint:t.anchorPoint,isAbsoluteAnchorPoint:"Relative"!==t.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:t.rotateClockwise,referenceSize:s,sizeRatio:1,markerPlacement:t.markerPlacement})}function G(t,e,i,n,r,a,s,l){var h=t.markerGraphics;if(h){var c=0;if(t.scaleSymbolsProportionally){var u=t.frame;u&&(c=u.ymax-u.ymin)}var f,v=Object(o.a)(h);try{for(v.s();!(f=v.n()).done;){var m=f.value;if(m){var p=m.symbol;if(!p)continue;switch(p.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":X(t,m,i,e,n,r,a,s,c,l);break;case"CIMTextSymbol":F(t,m,e,i,n,r,a,s,c)}}}}catch(y){v.e(y)}finally{v.f()}}}function F(t,e,i,n,r,a,l,c,u){_.b.findApplicableOverrides(e,n,[]);var f=e.geometry;if("x"in f&&"y"in f){var v,m=e.symbol,y=(v=m).underline?"underline":v.strikethrough?"line-through":"none",g=function(t){var e="normal",i="normal";if(t){var n=t.toLowerCase();-1!==n.indexOf("italic")?e="italic":-1!==n.indexOf("oblique")&&(e="oblique"),-1!==n.indexOf("bold")?i="bold":-1!==n.indexOf("light")&&(i="lighter")}return{style:e,weight:i}}(m.fontStyleName);m.font=Object(s.a)({family:m.fontFamilyName,decoration:y},g);var d=t.frame,b=f.x-.5*(d.xmin+d.xmax),k=f.y-.5*(d.ymin+d.ymax),P=t.size/u,S=t.primitiveName,M=(m.height||0)*P,C=m.angle||0,j=((m.offsetX||0)+b)*P,w=((m.offsetY||0)+k)*P,L=Object(p.e)(_.a.getFillColor(m)),I=Object(p.e)(_.a.getStrokeColor(m)),A=_.a.getStrokeWidth(m);A||(I=Object(p.e)(_.a.getFillColor(m.haloSymbol)),A=m.haloSize*P);var T,N="",z=Object(o.a)(n);try{for(z.s();!(T=z.n()).done;){var E=T.value;E.primitiveName===S&&void 0!==E.value&&(N+="-".concat(E.primitiveName,"-").concat(E.propertyName,"-").concat(JSON.stringify(E.value)))}}catch(X){z.e(X)}finally{z.f()}var G=JSON.stringify(t.effects)+Number(t.colorLocked)+JSON.stringify(t.anchorPoint)+t.anchorPointUnits+JSON.stringify(t.markerPlacement),F=Object(h.b)(JSON.stringify(e)+G+N).toString();a.push({type:"text",templateHash:F,materialHash:function(){return Object(h.b)(JSON.stringify(m.font)).toString()},cim:m,materialOverrides:null,colorLocked:t.colorLocked,effects:t.effects,alignment:l,anchorPoint:{x:t.anchorPoint?t.anchorPoint.x:0,y:t.anchorPoint?t.anchorPoint.y:0},isAbsoluteAnchorPoint:"Relative"!==t.anchorPointUnits,fontName:m.fontFamilyName,decoration:"none",weight:"normal",style:"normal",size:V(S,i,"Size",r,M),angle:V(S,i,"Rotation",r,C),offsetX:V(S,i,"OffsetX",r,j),offsetY:V(S,i,"OffsetY",r,w),horizontalAlignment:O(m.horizontalAlignment),verticalAlignment:x(m.verticalAlignment),text:V(e.primitiveName,i,"TextString",r,e.textString,p.a,m.textCase),color:L,outlineColor:I,outlineSize:A,referenceSize:c,sizeRatio:1,markerPlacement:t.markerPlacement})}}function X(t,e,i,n,r,l,c,u,f,v){var m=e.symbol,y=e.geometry;if(y){var d=m.symbolLayers;if(d)if(v)H(t,e,n,i,r,l,c,u,f);else for(var b=d.length;b--;){var k=d[b];if(k&&!1!==k.enable)switch(k.type){case"CIMSolidFill":case"CIMSolidStroke":var O=function(){var v=Object(g.b)(y);if(!v)return"continue";var m=Object(g.d)(v,t.frame,t.size,t.anchorPoint,"Relative"!==t.anchorPointUnits),d=Object(a.a)(m,3),b=d[0],O=d[1],x=d[2],P="CIMSolidFill"===k.type,S={type:"sdf",geom:y,asFill:P},M=t.primitiveName,C=t.size,j=t.rotation||0,w=t.offsetX,L=t.offsetY,I=k.primitiveName,A=Object(p.e)(P?_.a.getFillColor(k):_.a.getStrokeColor(k)),T=P?{r:0,g:0,b:0,a:0}:Object(p.e)(_.a.getStrokeColor(k)),N=_.a.getStrokeWidth(k);if(!P&&!N)return"break";var z,E=!1,G="",F=Object(o.a)(i);try{for(F.s();!(z=F.n()).done;){var X=z.value;X.primitiveName!==I&&X.primitiveName!==M||(void 0!==X.value?G+="-".concat(X.primitiveName,"-").concat(X.propertyName,"-").concat(JSON.stringify(X.value)):X.valueExpressionInfo&&(E=!0))}}catch(J){F.e(J)}finally{F.f()}var H=JSON.stringify(Object(s.a)(Object(s.a)({},t),{},{markerGraphics:null})),Y=Object(h.b)(JSON.stringify(S)).toString(),D={type:"marker",templateHash:Object(h.b)(JSON.stringify(e)+JSON.stringify(k)+H+G).toString(),materialHash:E?function(){return Y}:Y,cim:S,materialOverrides:null,colorLocked:t.colorLocked,effects:t.effects,scaleSymbolsProportionally:t.scaleSymbolsProportionally,alignment:c,anchorPoint:{x:O,y:x},isAbsoluteAnchorPoint:!1,size:V(t.primitiveName,n,"Size",r,C),rotation:V(t.primitiveName,n,"Rotation",r,j),offsetX:V(t.primitiveName,n,"OffsetX",r,w),offsetY:V(t.primitiveName,n,"OffsetY",r,L),scaleX:1,frameHeight:f,rotateClockwise:t.rotateClockwise,referenceSize:u,sizeRatio:b,color:V(I,n,"Color",r,A,R),outlineColor:V(I,n,"Color",r,T,R),outlineWidth:V(I,n,"Width",r,N),markerPlacement:t.markerPlacement};return l.push(D),"break"}();if("continue"===O)continue;if("break"===O)break;default:H(t,e,n,i,r,l,c,u,f)}}}}function H(t,e,i,n,r,s,l,c,u){var f,v=function(t,e){return{type:t.type,enable:!0,name:t.name,colorLocked:t.colorLocked,primitiveName:t.primitiveName,anchorPoint:t.anchorPoint,anchorPointUnits:t.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:t.rotateClockwise,rotation:0,size:t.size,billboardMode3D:t.billboardMode3D,depth3D:t.depth3D,frame:t.frame,markerGraphics:[e],scaleSymbolsProportionally:t.scaleSymbolsProportionally,respectFrame:t.respectFrame,clippingPath:t.clippingPath,effects:t.effects}}(t,e),p=["Rotation","OffsetX","OffsetY"];f=n.filter((function(e){return e.primitiveName!==t.primitiveName||-1===p.indexOf(e.propertyName)}));var y,g="",d=Object(o.a)(n);try{for(d.s();!(y=d.n()).done;){var b=y.value;void 0!==b.value&&(g+="-".concat(b.primitiveName,"-").concat(b.propertyName,"-").concat(JSON.stringify(b.value)))}}catch(A){d.e(A)}finally{d.f()}var k=_.a.getTextureAnchor(v),O=Object(a.a)(k,3),x=O[0],P=O[1],S=O[2],M=t.primitiveName,C=t.rotation||0,j=t.offsetX||0,w=t.offsetY||0,L=Object(h.b)(JSON.stringify(v)+g).toString(),I={type:"marker",templateHash:L,materialHash:0===f.length?L:D(L,i,f,r),cim:v,materialOverrides:f,colorLocked:t.colorLocked,effects:t.effects,scaleSymbolsProportionally:t.scaleSymbolsProportionally,alignment:l,anchorPoint:{x:x,y:P},isAbsoluteAnchorPoint:!1,size:t.size,rotation:V(M,i,"Rotation",r,C),offsetX:V(M,i,"OffsetX",r,j),offsetY:V(M,i,"OffsetY",r,w),color:{r:0,g:0,b:0,a:0},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:u,rotateClockwise:t.rotateClockwise,referenceSize:c,sizeRatio:S/Object(m.g)(t.size),markerPlacement:t.markerPlacement};s.push(I)}function Y(t){if(t&&0===t.indexOf("Level_")){var e=parseInt(t.substr(6),10);if(NaN!==e)return e}return 0}function R(t){if(!t||0===t.length)return null;var e=new v.a(t).toRgba();return{r:e[0],g:e[1],b:e[2],a:e[3]}}function V(t,e,i,n,r,a,s){var o=e[t];if(o){var l=o[i];if("string"==typeof l||"number"==typeof l||l instanceof Array)return a?a.call(null,l,s):l;if(null!=l&&l instanceof f.a)return function(t,e,i){var o=Object(y.a)(l,t,{$view:i},n.geometryType,e);return null!==o&&a&&(o=a.call(null,o,s)),null!==o?o:r}}return r}function D(t,e,i,n){var r,a=Object(o.a)(i);try{for(a.s();!(r=a.n()).done;){var s=r.value;s.valueExpressionInfo&&function(){var t=e[s.primitiveName]&&e[s.primitiveName][s.propertyName];t instanceof f.a&&(s.fn=function(e,i,r){return Object(y.a)(t,e,{$view:r},n.geometryType,i)})}()}}catch(l){a.e(l)}finally{a.f()}return function(e,n,r){var a,s=Object(o.a)(i);try{for(s.s();!(a=s.n()).done;){var c=a.value;c.fn&&(c.value=c.fn(e,n,r))}}catch(l){s.e(l)}finally{s.f()}return Object(h.b)(t+_.b.buildOverrideKey(i)).toString()}}function J(t,e){if(!e||0===e.length)return t;var i=JSON.parse(JSON.stringify(t));return _.b.applyOverrides(i,e),i}},1081:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(2),r=i(3),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Object(n.a)(this,t),this.x=e,this.y=i,this.width=r,this.height=a}return Object(r.a)(t,[{key:"isEmpty",get:function(){return this.width<=0||this.height<=0}},{key:"union",value:function(t){this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.width=Math.max(this.width,t.width),this.height=Math.max(this.height,t.height)}}]),t}()},1110:function(t,e,i){"use strict";i.d(e,"a",(function(){return ut})),i.d(e,"b",(function(){return ft}));var n=i(13),r=i(2),a=i(3),s=i(23),o=i(97),l=i(979),h=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new c(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();h.instance=null;var c=function(){function t(e,i,n){Object(r.a)(this,t),this._inputGeometries=e,this._angleTolerance=void 0!==i.angleTolerance?i.angleTolerance:120,this._maxCosAngle=Math.cos((1-Math.abs(this._angleTolerance)/180)*Math.PI)}return Object(a.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(Object(o.g)(t)){this._isClosed=!0;var e=Object(s.a)(t);return this._processMultipath(e.rings),e}if(Object(o.h)(t)){this._isClosed=!1;var i=Object(s.a)(t);return this._processMultipath(i.paths),i}if(Object(o.d)(t)){if(this._maxCosAngle)return t;this._isClosed=!0;var n=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]];return this._processPath(n),{rings:[n]}}t=this._inputGeometries.next()}return null}},{key:"_processMultipath",value:function(t){if(t){var e,i=Object(n.a)(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;this._processPath(r)}}catch(a){i.e(a)}finally{i.f()}}}},{key:"_processPath",value:function(t){if(t){var e,i,n,r,a,s,o=t.length,h=t[0];this._isClosed&&++o;for(var c=1;c<o;++c){var u,f=(u=this._isClosed&&c===o-1?t[0]:t[c])[0]-h[0],v=u[1]-h[1],m=Math.sqrt(f*f+v*v);c>1&&m>0&&n>0&&(e*f+i*v)/m/n<=this._maxCosAngle&&Object(l.j)(h,1),1===c&&(r=f,a=v,s=m),m>0&&(h=u,e=f,i=v,n=m)}this._isClosed&&n>0&&s>0&&(e*r+i*a)/s/n<=this._maxCosAngle&&Object(l.j)(t[0],1)}}}]),t}(),u=i(5),f=i(6),v=.03,m=function(){function t(){Object(r.a)(this,t),this._path=[]}return Object(a.a)(t,[{key:"path",value:function(){return this._path}},{key:"addPath",value:function(t,e){e||t.reverse(),Array.prototype.push.apply(this._path,t),e||t.reverse()}},{key:"startPath",value:function(t){this._path.push(t)}},{key:"lineTo",value:function(t){this._path.push(t)}},{key:"close",value:function(){var t=this._path;t.length>1&&(t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]]))}}],[{key:"mergePath",value:function(t,e){e&&Array.prototype.push.apply(t,e)}}]),t}(),p=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"normalize",value:function(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);t[0]/=e,t[1]/=e}},{key:"calculateLength",value:function(t,e){var i=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(i*i+n*n)}},{key:"calculateSegLength",value:function(t,e){return this.calculateLength(t[e],t[e+1])}},{key:"calculatePathLength",value:function(t){for(var e=0,i=t?t.length:0,n=0;n<i-1;++n)e+=this.calculateSegLength(t,n);return e}},{key:"calculatePathArea",value:function(t){for(var e=0,i=t?t.length:0,n=0;n<i-1;++n)e+=(t[n+1][0]-t[n][0])*(t[n+1][1]+t[n][1]);return e/2}},{key:"getCoord2D",value:function(t,e,i){return[t[0]+(e[0]-t[0])*i,t[1]+(e[1]-t[1])*i]}},{key:"getSegCoord2D",value:function(t,e,i){return this.getCoord2D(t[e],t[e+1],i)}},{key:"getAngle",value:function(t,e,i){var n=e[0]-t[0],r=e[1]-t[1];return Math.atan2(r,n)}},{key:"getSegAngle",value:function(t,e,i){return this.getAngle(t[e],t[e+1],i)}},{key:"getAngleCS",value:function(t,e,i){var n=e[0]-t[0],r=e[1]-t[1],a=Math.sqrt(n*n+r*r);return a>0?[n/a,r/a]:[1,0]}},{key:"getSegAngleCS",value:function(t,e,i){return this.getAngleCS(t[e],t[e+1],i)}},{key:"cut",value:function(t,e,i,n){return[i<=0?t[e]:this.getSegCoord2D(t,e,i),n>=1?t[e+1]:this.getSegCoord2D(t,e,n)]}},{key:"addSegment",value:function(t,e,i){i&&t.push(e[0]),t.push(e[1])}},{key:"getSubCurve",value:function(t,e,i){var n=[];return this.appendSubCurve(n,t,e,i)?n:null}},{key:"appendSubCurve",value:function(t,e,i,n){for(var r=e?e.length-1:0,a=0,s=!0,o=0;o<r;){var l=this.calculateSegLength(e,o);if(0!==l){if(s){if(a+l>i){var h=(i-a)/l,c=1,u=!1;a+l>=n&&(c=(n-a)/l,u=!0);var f=this.cut(e,o,h,c);if(f&&this.addSegment(t,f,s),u)break;s=!1}}else{if(a+l>n){var v=this.cut(e,o,0,(n-a)/l);v&&this.addSegment(t,v,s);break}this.addSegment(t,[e[o],e[o+1]],s)}a+=l,++o}else++o}return!0}},{key:"getCIMPointAlong",value:function(t,e){for(var i=t?t.length-1:0,n=0,r=-1;r<i;){++r;var a=this.calculateSegLength(t,r);if(0!==a){if(n+a>e){var s=(e-n)/a;return this.getCoord2D(t[r],t[r+1],s)}n+=a}}return null}},{key:"isEmpty",value:function(t,e){if(!t||t.length<=1)return!0;for(var i=t?t.length-1:0,n=-1;n<i;){if(t[++n+1][0]!==t[n][0]||t[n+1][1]!==t[n][1])return!1;if(e&&t[n+1][2]!==t[n][2])return!1}return!0}},{key:"offset",value:function(t,e,i,n,r){if(!t||t.length<2)return null;var a=t.length,s=t[0][0]===t[a-1][0]&&t[0][1]===t[a-1][1];if(s){if(t.length<3)return null;--a}for(var o=[],l=s?t[a-1]:null,h=t[0],c=0;c<a;c++){var u=c===a-1?s?t[0]:null:t[c+1];if(l)if(u){var f=[u[0]-h[0],u[1]-h[1]];this.normalize(f);var v=[h[0]-l[0],h[1]-l[1]];this.normalize(v);var m=v[0]*f[1]-v[1]*f[0],p=v[0]*f[0]+v[1]*f[1];if(m>=0==e<=0){var y=[f[0]-v[0],f[1]-v[1]];this.normalize(y);var _=Math.sqrt((1+p)/2),g=-Math.abs(e)/_;o.push([h[0]-y[0]*g,h[1]-y[1]*g])}else switch(i){case"Mitered":var d=Math.sqrt((1+p)/2);if(d>0&&1/d<n){var b=[f[0]-v[0],f[1]-v[1]];this.normalize(b);var k=Math.abs(e)/d;o.push([h[0]-b[0]*k,h[1]-b[1]*k]);break}case"Bevelled":o.push([h[0]+v[1]*e,h[1]-v[0]*e]),o.push([h[0]+f[1]*e,h[1]-f[0]*e]);break;case"Rounded":o.push([h[0]+v[1]*e,h[1]-v[0]*e]);for(var O=.2,x=1;x<5;x++,O+=.2){var P=[v[1]*(1-O)+f[1]*O,-v[0]*(1-O)-f[0]*O];this.normalize(P),o.push([h[0]+P[0]*e,h[1]+P[1]*e])}o.push([h[0]+f[1]*e,h[1]-f[0]*e]);break;case"Square":default:if(m<0)o.push([h[0]+(v[1]+v[0])*e,h[1]+(v[1]-v[0])*e]),o.push([h[0]+(f[1]-f[0])*e,h[1]-(f[0]+f[1])*e]);else{var S=Math.sqrt((1+Math.abs(p))/2),M=[f[0]-v[0],f[1]-v[1]];this.normalize(M);var C=e/S;o.push([h[0]-M[0]*C,h[1]-M[1]*C])}}}else{var j=[h[0]-l[0],h[1]-l[1]];this.normalize(j),o.push([h[0]+j[1]*e,h[1]-j[0]*e])}else{var w=[u[0]-h[0],u[1]-h[1]];this.normalize(w),o.push([h[0]+w[1]*e,h[1]-w[0]*e])}l=h,h=u}return s&&o.push([o[0][0],o[0][1]]),o}}]),t}(),y=1.7320508075688772,_=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new g(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();_.instance=null;var g=function(t){Object(u.a)(i,t);var e=Object(f.a)(i);function i(t,n,a){var s;return Object(r.a)(this,i),(s=e.call(this,t,!1,!0))._curveHelper=new p,s._width=(void 0!==n.width?n.width:5)*a,s._arrowType=void 0!==n.geometricEffectArrowType?n.geometricEffectArrowType:"OpenEnded",s._offsetFlattenError=v*a,s}return Object(a.a)(i,[{key:"processPath",value:function(t){switch(this._arrowType){case"OpenEnded":default:return this._constructSimpleArrow(t,!0);case"Block":return this._constructSimpleArrow(t,!1);case"Crossed":return this._constructCrossedArrow(t)}}},{key:"_constructSimpleArrow",value:function(t,e){var i=this._curveHelper.calculatePathLength(t),n=this._width;i<2*n&&(n=i/2);var r=this._curveHelper.getSubCurve(t,0,i-n);if(!r)return null;var a=n/2;if(this._curveHelper.isEmpty(r,!1))return null;var s=this._constructOffset(r,-a);if(!s)return null;var o=this._constructOffset(r,a);if(!o)return null;var l=this._constructArrowBasePoint(s,-a/2);if(!l)return null;var h=this._constructArrowBasePoint(o,a/2);if(!h)return null;var c=t[t.length-1];e||(this._makeControlPoint(o,!0),this._makeControlPoint(s,!0));var u=new m;return u.addPath(o,!0),u.lineTo(h),this._makeControlPoint(u.path()),u.lineTo(c),this._makeControlPoint(u.path()),u.lineTo(l),this._makeControlPoint(u.path()),u.addPath(s,!1),e?{paths:[u.path()]}:(u.close(),{rings:[u.path()]})}},{key:"_constructCrossedArrow",value:function(t){var e=this._curveHelper.calculatePathLength(t),i=this._width;e<3.732050807568877*i&&(i=e/3.732050807568877);var n=this._curveHelper.getSubCurve(t,0,e-i*(1+y));if(!n)return null;var r=i/2;if(this._curveHelper.isEmpty(n,!1))return null;var a=this._constructOffset(n,r);if(!a)return null;var s=this._constructOffset(n,-r);if(!s)return null;var o=this._curveHelper.getSubCurve(t,0,e-i);if(!o)return null;if(this._curveHelper.isEmpty(o,!1))return null;var l=this._constructOffset(o,r);if(!l)return null;var h=this._constructOffset(o,-r);if(!h)return null;var c=l[l.length-1],u=this._constructArrowBasePoint(l,r/2);if(!u)return null;var f=h[h.length-1],v=this._constructArrowBasePoint(h,-r/2);if(!v)return null;var p=t[t.length-1];this._makeControlPoint(a,!1),this._makeControlPoint(s,!1);var _=new m;return _.addPath(a,!0),this._makeControlPoint(_.path()),_.lineTo(f),_.lineTo(v),this._makeControlPoint(_.path()),_.lineTo(p),this._makeControlPoint(_.path()),_.lineTo(u),this._makeControlPoint(_.path()),_.lineTo(c),this._makeControlPoint(_.path()),_.addPath(s,!1),{paths:[_.path()]}}},{key:"_constructOffset",value:function(t,e){return this._curveHelper.offset(t,e,"Rounded",4,this._offsetFlattenError)}},{key:"_constructArrowBasePoint",value:function(t,e){if(!t||t.length<2)return null;var i=t[t.length-2],n=t[t.length-1],r=[n[0]-i[0],n[1]-i[1]];return this._curveHelper.normalize(r),[n[0]+r[1]*e,n[1]-r[0]*e]}},{key:"_makeControlPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(l.j)(e?t[0]:t[t.length-1],1)}}]),i}(l.a),d=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new b(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();d.instance=null;var b=function(){function t(e,i,n){Object(r.a)(this,t),this._inputGeometries=e,this._curveHelper=new p,this._size=(void 0!==i.size?i.size:1)*n,this._offsetFlattenError=v*n}return Object(a.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(Object(o.d)(t))if(this._size>0){var e=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]],i=this._curveHelper.offset(e,this._size,"Rounded",4,this._offsetFlattenError);if(i)return{rings:[i]}}else{if(!(this._size<0))return t;if(Math.min(t.xmax-t.xmin,t.ymax-t.ymin)+2*this._size>0)return{xmin:t.xmin-this._size,xmax:t.xmax+this._size,ymin:t.ymin-this._size,ymax:t.ymax+this._size}}if(Object(o.g)(t)){if(0===this._size)return t;var r,a=[],s=Object(n.a)(t.rings);try{for(s.s();!(r=s.n()).done;){var l=r.value,h=this._curveHelper.offset(l,this._size,"Rounded",4,this._offsetFlattenError);h&&a.push(h)}}catch(_){s.e(_)}finally{s.f()}if(a.length)return{rings:a}}if(Object(o.h)(t)&&this._size>0){var c,u=[],f=Object(n.a)(t.paths);try{for(f.s();!(c=f.n()).done;){var v=c.value;if(v&&v.length>1){var m=this._curveHelper.offset(v,this._size,"Rounded",4,this._offsetFlattenError),p=this._curveHelper.offset(v,-this._size,"Rounded",4,this._offsetFlattenError);if(m&&p){for(var y=p.length-1;y>=0;y--)m.push(p[y]);m.push([m[0][0],m[0][1]]),u.push(m)}}}}catch(_){f.e(_)}finally{f.f()}if(u.length)return{rings:u}}Object(o.f)(t)&&this._size,t=this._inputGeometries.next()}return null}}]),t}(),k=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new O(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();k.instance=null;var O=function(t){Object(u.a)(i,t);var e=Object(f.a)(i);function i(t,n,a){var s;return Object(r.a)(this,i),(s=e.call(this,t,!0,!0))._curveHelper=new p,s._beginCut=(void 0!==n.beginCut?n.beginCut:1)*a,s._endCut=(void 0!==n.endCut?n.endCut:1)*a,s._middleCut=(void 0!==n.middleCut?n.middleCut:0)*a,s._invert=void 0!==n.invert&&n.invert,s._beginCut<0&&(s._beginCut=0),s._endCut<0&&(s._endCut=0),s._middleCut<0&&(s._middleCut=0),s}return Object(a.a)(i,[{key:"processPath",value:function(t){var e=this._beginCut,i=this._endCut,n=this._middleCut,r=this._curveHelper.calculatePathLength(t),a=[];if(this._invert)if(0===e&&0===i&&0===n);else if(e+i+n>=r)a.push(t);else{var s=this._curveHelper.getSubCurve(t,0,e);s&&a.push(s),(s=this._curveHelper.getSubCurve(t,.5*(r-n),.5*(r+n)))&&a.push(s),(s=this._curveHelper.getSubCurve(t,r-i,i))&&a.push(s)}else if(0===e&&0===i&&0===n)a.push(t);else if(e+i+n>=r);else if(0===n){var o=this._curveHelper.getSubCurve(t,e,r-i);o&&a.push(o)}else{var l=this._curveHelper.getSubCurve(t,e,.5*(r-n));l&&a.push(l),(l=this._curveHelper.getSubCurve(t,.5*(r+n),r-i))&&a.push(l)}return 0===a.length?null:{paths:a}}}]),i}(l.a),x=i(32),P=function(){function t(){Object(r.a)(this,t),this._values=[],this.extPtGap=0,this.ctrlPtGap=0,this._length=0,this._currentValue=0}return Object(a.a)(t,[{key:"isEmpty",value:function(){return 0===this._values.length}},{key:"size",value:function(){return this._values.length}},{key:"init",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this._setEmpty(),!t||0===t.length)return!1;for(var n=0;n<t.length;n++){var r=Math.abs(t[n]);i&&r<1e-7&&(r=1e-7),this._values.push(r),this._length+=r}return e&&1&t.length&&(this._length*=2),0!==this._length&&(this.ctrlPtGap=this.extPtGap=0,this._currentValue=-1,!0)}},{key:"scale",value:function(t){for(var e=this._values?this._values.length:0,i=0;i<e;++i)this._values[i]*=t;this._length*=t,this.extPtGap*=t,this.ctrlPtGap*=t}},{key:"addValue",value:function(t){this._length+=t,this._values.push(t)}},{key:"firstValue",value:function(){return this._values[0]}},{key:"lastValue",value:function(){return this._values[this._values.length-1]}},{key:"nextValue",value:function(){return this._currentValue++,this._currentValue===this._values.length&&(this._currentValue=0),this._values[this._currentValue]}},{key:"reset",value:function(){this._currentValue=-1}},{key:"length",value:function(){return this._length}},{key:"_setEmpty",value:function(){this.extPtGap=this.ctrlPtGap=this._length=0,this._currentValue=-1,this._values.length=0}}]),t}(),S=function(){function t(){Object(r.a)(this,t),this.reset()}return Object(a.a)(t,[{key:"reset",value:function(){this.segment=-1,this.segmentLength=0,this.abscissa=0,this.isPathEnd=!1,this.isPartEnd=!1}},{key:"isValid",value:function(){return-1!==this.segment}},{key:"copyTo",value:function(t){t.segment=this.segment,t.segmentLength=this.segmentLength,t.abscissa=this.abscissa,t.isPathEnd=this.isPathEnd,t.isPartEnd=this.isPartEnd}}]),t}(),M=function(t){Object(u.a)(i,t);var e=Object(f.a)(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(r.a)(this,i),(t=e.call(this,n,a))._tolerance=v,t._currentPosition=new S,t}return Object(a.a)(i,[{key:"updateTolerance",value:function(t){this._tolerance=v*t}},{key:"init",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return i?(this._patternLength=e.length(),this._partExtPtGap=e.extPtGap,this._partCtrlPtGap=e.ctrlPtGap):(this._patternLength=0,this._partExtPtGap=0,this._partCtrlPtGap=0),this._currentPosition.reset(),this._partSegCount=0,this._path=t,this._seg=-1,this.setPosAtNextPart()}},{key:"curPositionIsValid",value:function(){return this._currentPosition.isValid()}},{key:"nextPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=new S;return!!this._nextPosition(t,i,null,e)&&(i.copyTo(this._currentPosition),!0)}},{key:"curPointAndAngle",value:function(t){t.pt=this._getPoint(this._currentPosition);var e=this._getAngle(this._currentPosition),i=Object(x.a)(e,2),n=i[0],r=i[1];t.ca=n,t.sa=r}},{key:"nextPointAndAngle",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=new S;if(!this._nextPosition(t,n,null,i))return!1;n.copyTo(this._currentPosition),e.pt=this._getPoint(n);var r=this._getAngle(n),a=Object(x.a)(r,2),s=a[0],o=a[1];return e.ca=s,e.sa=o,!0}},{key:"nextCurve",value:function(t){if(0===t)return null;var e=[],i=new S;return this._nextPosition(t,i,e,1)?(i.copyTo(this._currentPosition),e):null}},{key:"isPathEnd",value:function(){return this._currentPosition.isPathEnd}},{key:"getPathEnd",value:function(){if(-1===this._currentPosition.segment)throw new Error("missing segment");return this._path[this._currentPosition.segment+1]}},{key:"_nextPosition",value:function(t,e,i,n){if(this._currentPosition.isPathEnd)return!1;var r=this._currentPosition.abscissa;for(this._currentPosition.segmentLength>0&&(r/=this._currentPosition.segmentLength),this._currentPosition.copyTo(e);e.abscissa+t*this._partLengthRatio>e.segmentLength+this._tolerance;){if(i){if(0===i.length)if(0===r){var a=this._path[e.segment];i.push([a[0],a[1]])}else i.push(this.getSegCoord2D(this._path,e.segment,r));var s=this._path[e.segment+1];i.push([s[0],s[1]])}if(r=0,t-=(e.segmentLength-e.abscissa)/this._partLengthRatio,this._partSegCount)e.segment=this.nextSegment(),e.segmentLength=this.calculateSegLength(this._path,e.segment),e.abscissa=0,this._partSegCount--;else{if(!this.setPosAtNextPart())return 0!==n&&(e.segmentLength=this.calculateSegLength(this._path,e.segment),e.isPartEnd=!0,1===n?(e.abscissa=e.segmentLength,e.isPathEnd=!0):e.abscissa=e.segmentLength+t,!0);this._currentPosition.copyTo(e)}}if(e.abscissa+=t*this._partLengthRatio,i){if(0===i.length)if(0===r){var o=this._path[e.segment];i.push([o[0],o[1]])}else i.push(this.getSegCoord2D(this._path,e.segment,r));var l=e.abscissa/e.segmentLength;if(1===l){var h=this._path[e.segment+1];i.push([h[0],h[1]])}else i.push(this.getSegCoord2D(this._path,e.segment,l))}return this._partSegCount||Math.abs(e.abscissa-e.segmentLength)<this._tolerance&&(e.isPathEnd=this._partIsLast,e.isPartEnd=!0),!0}},{key:"_getPoint",value:function(t){if(-1===t.segment)throw new Error("missing segment");var e=t.segmentLength<=0?0:t.abscissa/t.segmentLength;return this.getSegCoord2D(this._path,t.segment,e)}},{key:"_getAngle",value:function(t){if(-1===t.segment)throw new Error("missing segment");var e=t.segmentLength<=0?0:t.abscissa/t.segmentLength;return this.getSegAngleCS(this._path,t.segment,e)}},{key:"setPosAtNextPart",value:function(){for(;this._partSegCount;)this.hasNextSegment()&&this.nextSegment(),this._partSegCount--;if(!this.hasNextSegment())return!1;for(this._partLength=0,this._partIsLast=!0,this._partSegCount=0;this.hasNextSegment();)if(this._partLength+=this.calculateSegLength(this._path,this.nextSegment()),this._partSegCount++,1===Object(l.f)(this._path[this.getEndPointIndex()])){this._partIsLast=!this.hasNextSegment();break}for(var t=this._partSegCount;t;)this.previousSegment(),--t;this._currentPosition.segment=this.nextSegment(),this._currentPosition.segmentLength=this.calculateSegLength(this._path,this._currentPosition.segment),this._currentPosition.abscissa=0,this._currentPosition.isPathEnd=this._currentPosition.isPartEnd=!1,--this._partSegCount;var e=this.getStartPointIndex();this._ctrlPtBegin=1===Object(l.f)(this._path[e]);var i=e+this._partSegCount+1;if(i>=this._path.length&&(i=0),this._ctrlPtEnd=1===Object(l.f)(this._path[i]),this._patternLength>0){var n=this._ctrlPtBegin?this._partCtrlPtGap:this._partExtPtGap,r=this._ctrlPtEnd?this._partCtrlPtGap:this._partExtPtGap,a=Math.round((this._partLength-(n+r))/this._patternLength);a<=0&&(a=n+r>0?0:1),this._partLengthRatio=this._partLength/(n+r+a*this._patternLength),this._partLengthRatio<.01&&(this._partLengthRatio=1)}else this._partLengthRatio=1;return!0}},{key:"hasNextSegment",value:function(){return this._seg<this._path.length-2}},{key:"previousSegment",value:function(){return--this._seg}},{key:"nextSegment",value:function(){return++this._seg}},{key:"getStartPointIndex",value:function(){return this._seg}},{key:"getEndPointIndex",value:function(){return this._seg+1}}]),i}(p),C=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new j(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();C.instance=null;var j=function(t){Object(u.a)(i,t);var e=Object(f.a)(i);function i(t,n,a){var s;return Object(r.a)(this,i),(s=e.call(this,t,!0,!0))._walker=new M,s._walker.updateTolerance(a),s._endings=n.lineDashEnding,s._customDashPos=void 0!==n.offsetAlongLine?n.offsetAlongLine*a:0,s._offsetAtEnd=void 0!==n.customEndingOffset?n.customEndingOffset*a:0,s._pattern=new P,s._pattern.init(n.dashTemplate,!0),s._pattern.scale(a),s}return Object(a.a)(i,[{key:"processPath",value:function(t){if(0===this._pattern.length())return this.iteratePath=!1,{paths:[t]};if(!this.iteratePath){var e=!0;switch(this._endings){case"HalfPattern":case"HalfGap":default:this._pattern.extPtGap=0;break;case"FullPattern":this.isClosed||(this._pattern.extPtGap=.5*this._pattern.firstValue());break;case"FullGap":this.isClosed||(this._pattern.extPtGap=.5*this._pattern.lastValue());break;case"NoConstraint":this.isClosed||(e=!1);break;case"Custom":this.isClosed||(this._pattern.extPtGap=.5*this._offsetAtEnd)}var i=this._walker.calculatePathLength(t);if(this._pattern.isEmpty()||i<.1*this._pattern.length())return{paths:[t]};if(!this._walker.init(t,this._pattern,e))return{paths:[t]}}var n;if(this.iteratePath)n=this._pattern.nextValue();else{var r;switch(this._endings){case"HalfPattern":default:r=.5*this._pattern.firstValue();break;case"HalfGap":r=.5*-this._pattern.lastValue();break;case"FullGap":r=-this._pattern.lastValue();break;case"FullPattern":r=0;break;case"NoConstraint":case"Custom":r=-this._customDashPos}var a=r/this._pattern.length();r=(a-=Math.floor(a))*this._pattern.length(),this._pattern.reset(),n=this._pattern.nextValue();for(var s=!1;r>=n;)r-=n,n=this._pattern.nextValue(),s=!s;n-=r,s?(this._walker.nextPosition(n),n=this._pattern.nextValue()):this.isClosed&&(this._firstCurve=this._walker.nextCurve(n),n=this._pattern.nextValue(),this._walker.nextPosition(n),n=this._pattern.nextValue())}var o=this._walker.nextCurve(n);return o?this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(this._firstCurve.splice(0,1),m.mergePath(o,this._firstCurve),this._firstCurve=null)):(n=this._pattern.nextValue(),!this._walker.nextPosition(n)||this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(o=this._firstCurve,this._firstCurve=null)):this.iteratePath=!0):(this.iteratePath=!1,o=this._firstCurve,this._firstCurve=null),{paths:[o]}}}]),i}(l.a),w=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new L(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();w.instance=null;var L=function(){function t(e,i,n){switch(Object(r.a)(this,t),this._inputGeometries=e,this._curveHelper=new p,this._width=(void 0!==i.width?i.width:2)*n,i.method){case"Mitered":default:this._method="Mitered";break;case"Bevelled":this._method="Bevelled";break;case"Rounded":case"TrueBuffer":this._method="Rounded";break;case"Square":this._method="Square"}this._option=i.option,this._offsetFlattenError=v*n,this._option}return Object(a.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(Object(o.d)(t)&&this._width>0){if(Math.min(t.xmax-t.xmin,t.ymax-t.ymin)-2*this._width<0)return t;var e=[];return e.push([[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]),e.push([[t.xmin+this._width,t.ymin+this._width],[t.xmax-this._width,t.ymin+this._width],[t.xmax-this._width,t.ymax-this._width],[t.xmin+this._width,t.ymax-this._width],[t.xmin+this._width,t.ymin+this._width]]),{rings:e}}if(Object(o.g)(t)&&this._width>0){var i,r=[],a=Object(n.a)(t.rings);try{for(a.s();!(i=a.n()).done;){var s=i.value,l=this._curveHelper.calculatePathLength(s),h=this._curveHelper.offset(s,this._width,this._method,4,this._offsetFlattenError);h&&(l<0&&h.reverse(),r.push(h))}}catch(c){a.e(c)}finally{a.f()}if(r.length)return{rings:r}}t=this._inputGeometries.next()}return null}}]),t}(),I=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new A(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();I.instance=null;var A=function(t){Object(u.a)(i,t);var e=Object(f.a)(i);function i(t,n,a){var s;return Object(r.a)(this,i),(s=e.call(this,t,!1,!0))._curveHelper=new p,s._length=(void 0!==n.length?n.length:20)*a,s._angle=void 0!==n.angle?n.angle:225,s._position=void 0!==n.position?n.position:50,s._length<0&&(s._length=-s._length),s._position<20&&(s._position=20),s._position>80&&(s._position=80),s._mirror=!1,s}return Object(a.a)(i,[{key:"processPath",value:function(t){if(this._curveHelper.isEmpty(t,!1))return null;var e=t[0],i=t[t.length-1],n=[i[0]-e[0],i[1]-e[1]];this._curveHelper.normalize(n);var r=[e[0]+(i[0]-e[0])*this._position/100,e[1]+(i[1]-e[1])*this._position/100],a=Math.cos((90-this._angle)/180*Math.PI),s=Math.sin((90-this._angle)/180*Math.PI);return this._mirror&&(s=-s),this._mirror=!this._mirror,{paths:[[e,[r[0]-this._length/2*a,r[1]-this._length/2*s],[r[0]+this._length/2*a,r[1]+this._length/2*s],i]]}}}]),i}(l.a),T=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new N(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();T.instance=null;var N=function(){function t(e,i,n){Object(r.a)(this,t),this._inputGeometries=e,this._offsetX=void 0!==i.offsetX?i.offsetX*n:0,this._offsetY=void 0!==i.offsetY?-i.offsetY*n:0}return Object(a.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(Object(o.d)(t))return{xmin:t.xmin+this._offsetX,xmax:t.xmax+this._offsetX,ymin:t.ymin+this._offsetY,ymax:t.ymax+this._offsetY};if(Object(o.g)(t)){var e=Object(s.a)(t);return this._moveMultipath(e.rings,this._offsetX,this._offsetY),e}if(Object(o.h)(t)){var i=Object(s.a)(t);return this._moveMultipath(i.paths,this._offsetX,this._offsetY),i}if(Object(o.e)(t)){var n=Object(s.a)(t);return this._movePath(n.points,this._offsetX,this._offsetY),n}if(Object(o.f)(t))return{x:t.x+this._offsetX,y:t.y+this._offsetY};t=this._inputGeometries.next()}return null}},{key:"_moveMultipath",value:function(t,e,i){if(t){var r,a=Object(n.a)(t);try{for(a.s();!(r=a.n()).done;){var s=r.value;this._movePath(s,e,i)}}catch(o){a.e(o)}finally{a.f()}}}},{key:"_movePath",value:function(t,e,i){if(t){var r,a=Object(n.a)(t);try{for(a.s();!(r=a.n()).done;){var s=r.value;s[0]+=e,s[1]+=i}}catch(o){a.e(o)}finally{a.f()}}}}]),t}(),z=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new E(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();z.instance=null;var E=function(){function t(e,i,n){Object(r.a)(this,t),this._inputGeometries=e,this._curveHelper=new p,this._offset=(void 0!==i.offset?i.offset:1)*n,this._method=i.method,this._option=i.option,this._offsetFlattenError=v*n,this._option}return Object(a.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(0===this._offset)return t;if(Object(o.d)(t)){if("Rounded"===this._method&&this._offset>0){var e=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]],i=this._curveHelper.offset(e,this._offset,this._method,4,this._offsetFlattenError);return i?{rings:[i]}:null}if(Math.min(t.xmax-t.xmin,t.ymax-t.ymin)+2*this._offset>0)return{xmin:t.xmin-this._offset,xmax:t.xmax+this._offset,ymin:t.ymin-this._offset,ymax:t.ymax+this._offset}}if(Object(o.g)(t)){var r,a=[],s=Object(n.a)(t.rings);try{for(s.s();!(r=s.n()).done;){var l=r.value,h=this._curveHelper.offset(l,this._offset,this._method,4,this._offsetFlattenError);h&&a.push(h)}}catch(p){s.e(p)}finally{s.f()}if(a.length)return{rings:a}}if(Object(o.h)(t)){var c,u=[],f=Object(n.a)(t.paths);try{for(f.s();!(c=f.n()).done;){var v=c.value,m=this._curveHelper.offset(v,this._offset,this._method,4,this._offsetFlattenError);m&&u.push(m)}}catch(p){f.e(p)}finally{f.f()}if(u.length)return{paths:u}}t=this._inputGeometries.next()}return null}}]),t}(),G=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new F(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();G.instance=null;var F=function(){function t(e,i,n){Object(r.a)(this,t),this._inputGeometries=e,this._reverse=void 0===i.reverse||i.reverse}return Object(a.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(!this._reverse)return t;if(Object(o.h)(t)){var e=Object(s.a)(t);return Object(l.h)(e.paths),e}t=this._inputGeometries.next()}return null}}]),t}(),X=i(316),H=i(115),Y=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new R(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();Y.instance=null;var R=function(){function t(e,i,n){Object(r.a)(this,t),this._inputGeometries=e,this._rotateAngle=void 0!==i.angle?-i.angle*Math.PI/180:0}return Object(a.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(0===this._rotateAngle)return t;var e=Object(H.h)();Object(X.a)(e,t);var i=(e[2]+e[0])/2,n=(e[3]+e[1])/2;if(Object(o.d)(t)){var r={rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]};return this._rotateMultipath(r.rings,i,n),r}if(Object(o.g)(t)){var a=Object(s.a)(t);return this._rotateMultipath(a.rings,i,n),a}if(Object(o.h)(t)){var l=Object(s.a)(t);return this._rotateMultipath(l.paths,i,n),l}if(Object(o.e)(t)){var h=Object(s.a)(t);return this._rotatePath(h.points,i,n),h}if(Object(o.f)(t))return t;t=this._inputGeometries.next()}return null}},{key:"_rotateMultipath",value:function(t,e,i){if(t){var r,a=Object(n.a)(t);try{for(a.s();!(r=a.n()).done;){var s=r.value;this._rotatePath(s,e,i)}}catch(o){a.e(o)}finally{a.f()}}}},{key:"_rotatePath",value:function(t,e,i){if(t){var r,a=Math.cos(this._rotateAngle),s=Math.sin(this._rotateAngle),o=Object(n.a)(t);try{for(o.s();!(r=o.n()).done;){var l=r.value,h=l[0]-e,c=l[1]-i;l[0]=e+h*a-c*s,l[1]=i+h*s+c*a}}catch(u){o.e(u)}finally{o.f()}}}}]),t}(),V=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new D(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();V.instance=null;var D=function(){function t(e,i,n){Object(r.a)(this,t),this._inputGeometries=e,this._xFactor=void 0!==i.xScaleFactor?i.xScaleFactor:1.15,this._yFactor=void 0!==i.yScaleFactor?i.yScaleFactor:1.15}return Object(a.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(1===this._xFactor&&1===this._yFactor)return t;var e=Object(H.h)();Object(X.a)(e,t);var i=(e[2]+e[0])/2,n=(e[3]+e[1])/2;if(Object(o.d)(t)){var r={rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]};return this._scaleMultipath(r.rings,i,n),r}if(Object(o.g)(t)){var a=Object(s.a)(t);return this._scaleMultipath(a.rings,i,n),a}if(Object(o.h)(t)){var l=Object(s.a)(t);return this._scaleMultipath(l.paths,i,n),l}if(Object(o.e)(t)){var h=Object(s.a)(t);return this._scalePath(h.points,i,n),h}if(Object(o.f)(t))return t;t=this._inputGeometries.next()}return null}},{key:"_scaleMultipath",value:function(t,e,i){if(t){var r,a=Object(n.a)(t);try{for(a.s();!(r=a.n()).done;){var s=r.value;this._scalePath(s,e,i)}}catch(o){a.e(o)}finally{a.f()}}}},{key:"_scalePath",value:function(t,e,i){if(t){var r,a=Object(n.a)(t);try{for(a.s();!(r=a.n()).done;){var s=r.value,o=(s[0]-e)*this._xFactor,l=(s[1]-i)*this._yFactor;s[0]=e+o,s[1]=i+l}}catch(h){a.e(h)}finally{a.f()}}}}]),t}(),J=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new B(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();J.instance=null;var W,q,B=function(){function t(e,i,n){Object(r.a)(this,t),this._inputGeometries=e,this._height=(void 0!==i.amplitude?i.amplitude:2)*n,this._period=(void 0!==i.period?i.period:3)*n,this._style=i.waveform,this._height<=0&&(this._height=Math.abs(this._height)),this._period<=0&&(this._period=Math.abs(this._period)),this._pattern=new P,this._pattern.addValue(this._period),this._pattern.addValue(this._period),this._walker=new M,this._walker.updateTolerance(n)}return Object(a.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(0===this._height||0===this._period)return t;if(Object(o.h)(t)){var e=this._processGeom(t.paths);if(e.length)return{paths:e}}if(Object(o.g)(t)){var i=this._processGeom(t.rings);if(i.length)return{rings:i}}t=this._inputGeometries.next()}return null}},{key:"_processGeom",value:function(t){var e,i=[],r=Object(n.a)(t);try{for(r.s();!(e=r.n()).done;){var a=e.value;if(this._walker.init(a,this._pattern))switch(this._style){case"Sinus":default:i.push(this._constructCurve(a,!1));break;case"Square":i.push(this._constructSquare(a));break;case"Triangle":i.push(this._constructTriangle(a));break;case"Random":i.push(this._constructCurve(a,!0))}else i.push(a)}}catch(s){r.e(s)}finally{r.f()}return i}},{key:"_constructCurve",value:function(t,e){var i=new m,n=this._walker.calculatePathLength(t),r=Math.round(n/this._period);0===r&&(r=1);var a=16*r+1,s=n/r,o=this._period/16,l=1/a,h=2*Math.PI*n/s,c=2*Math.PI*Math.random(),u=2*Math.PI*Math.random(),f=2*Math.PI*Math.random(),v=.75-Math.random()/2,p=.75-Math.random()/2,y={};this._walker.curPointAndAngle(y),i.startPath(y.pt);for(var _=0;;){if(!this._walker.nextPointAndAngle(o,y)){i.lineTo(t[t.length-1]);break}var g=_,d=void 0;if(_+=l,e){var b=this._height/2*(1+.3*Math.sin(v*h*g+c));d=b*Math.sin(h*g+u),d+=b*Math.sin(p*h*g+f),d/=2}else d=.5*this._height*Math.sin(.5*h*g);i.lineTo([y.pt[0]-d*y.sa,y.pt[1]+d*y.ca])}return i.path()}},{key:"_constructSquare",value:function(t){var e=new m,i=this._walker.calculatePathLength(t),n=Math.round(i/this._period);0===n&&(n=1);for(var r=!0;;){var a=!1;if(this._walker.curPositionIsValid()){var s={};this._walker.curPointAndAngle(s);var o={};if(this._walker.nextPointAndAngle(this._period,o)){var l={};this._walker.nextPointAndAngle(this._period,l)&&(r?(e.startPath(s.pt),r=!1):e.lineTo(s.pt),e.lineTo([s.pt[0]-this._height/2*s.sa,s.pt[1]+this._height/2*s.ca]),e.lineTo([o.pt[0]-this._height/2*o.sa,o.pt[1]+this._height/2*o.ca]),e.lineTo([o.pt[0]+this._height/2*o.sa,o.pt[1]-this._height/2*o.ca]),e.lineTo([l.pt[0]+this._height/2*l.sa,l.pt[1]-this._height/2*l.ca]),a=!0)}}if(!a){e.lineTo(this._walker.getPathEnd());break}}return e.path()}},{key:"_constructTriangle",value:function(t){var e=new m,i=this._walker.calculatePathLength(t),n=Math.round(i/this._period);0===n&&(n=1);for(var r=!0;;){var a=!1;if(this._walker.curPositionIsValid()){var s={};this._walker.curPointAndAngle(s);var o={};if(this._walker.nextPointAndAngle(this._period/2,o)){var l={};this._walker.nextPointAndAngle(this._period,l)&&(this._walker.nextPosition(this._period/2)&&(r?(e.startPath(s.pt),r=!1):e.lineTo(s.pt),e.lineTo([o.pt[0]-this._height/2*o.sa,o.pt[1]+this._height/2*o.ca]),e.lineTo([l.pt[0]+this._height/2*l.sa,l.pt[1]-this._height/2*l.ca])),a=!0)}}if(!a){e.lineTo(this._walker.getPathEnd());break}}return e.path()}}]),t}();(q=W||(W={})).NoConstraint="NoConstraint",q.WithMarkers="WithMarkers",q.WithFullGap="WithFullGap",q.WithHalfGap="WithHalfGap",q.Custom="Custom";var U=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new $(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();U.instance=null;var $=function(t){Object(u.a)(i,t);var e=Object(f.a)(i);function i(t,n,a){var s;return Object(r.a)(this,i),(s=e.call(this,t,!0,!0))._grometryWalker=new M,s._grometryWalker.updateTolerance(a),s._angleToLine=void 0===n.angleToLine||n.angleToLine,s._offset=void 0!==n.offset?n.offset*a:0,s._originalEndings=n.endings,s._offsetAtEnd=void 0!==n.customEndingOffset?n.customEndingOffset*a:0,s._position=void 0!==n.offsetAlongLine?n.offsetAlongLine*a:0,s._pattern=new P,s._pattern.init(n.placementTemplate,!1),s._pattern.scale(a),s._endings=s._originalEndings,s}return Object(a.a)(i,[{key:"processPath",value:function(t){if(this._pattern.isEmpty())return null;var e;if(this.iteratePath)e=this._pattern.nextValue();else{this._originalEndings===W.WithFullGap&&this.isClosed?this._endings=W.WithMarkers:this._endings=this._originalEndings,this._pattern.extPtGap=0;var i,n=!0;switch(this._endings){case W.NoConstraint:i=-this._position,i=this._adjustPosition(i),n=!1;break;case W.WithHalfGap:default:i=-this._pattern.lastValue()/2;break;case W.WithFullGap:i=-this._pattern.lastValue(),this._pattern.extPtGap=this._pattern.lastValue();break;case W.WithMarkers:i=0;break;case W.Custom:i=-this._position,i=this._adjustPosition(i),this._pattern.extPtGap=.5*this._offsetAtEnd}if(!this._grometryWalker.init(t,this._pattern,n))return null;this._pattern.reset();for(var r=0;i>r;)i-=r,r=this._pattern.nextValue();e=r-=i,this.iteratePath=!0}var a={};return this._grometryWalker.nextPointAndAngle(e,a)?this._endings===W.WithFullGap&&this._grometryWalker.isPathEnd()?(this.iteratePath=!1,null):this._endings===W.WithMarkers&&this._grometryWalker.isPathEnd()&&(this.iteratePath=!1,this.isClosed)?null:(this.internalPlacement.setTranslate(a.pt[0]+this._offset*a.sa,a.pt[1]-this._offset*a.ca),this._angleToLine&&this.internalPlacement.setRotateCS(a.ca,a.sa),this.internalPlacement):(this.iteratePath=!1,null)}},{key:"_adjustPosition",value:function(t){var e=t/this._pattern.length();return(e-=Math.floor(e))*this._pattern.length()}}]),i}(l.b),K=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new Z(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();K.instance=null;var Z=function(t){Object(u.a)(i,t);var e=Object(f.a)(i);function i(t,n,a){var s;return Object(r.a)(this,i),(s=e.call(this,t,!1,!0))._curveHelper=new p,s._angleToLine=void 0===n.angleToLine||n.angleToLine,s._offset=void 0!==n.offset?n.offset*a:0,s._type=n.extremityPlacement,s._position=void 0!==n.offsetAlongLine?n.offsetAlongLine*a:0,s._beginProcessed=!1,s}return Object(a.a)(i,[{key:"processPath",value:function(t){var e;switch(this._type){case"Both":default:this._beginProcessed?(e=this._atExtremities(t,this._position,!1),this._beginProcessed=!1,this.iteratePath=!1):(e=this._atExtremities(t,this._position,!0),this._beginProcessed=!0,this.iteratePath=!0);break;case"JustBegin":e=this._atExtremities(t,this._position,!0);break;case"JustEnd":e=this._atExtremities(t,this._position,!1);break;case"None":}return e}},{key:"_atExtremities",value:function(t,e,i){var n=t.length;if(n<2)return null;for(var r,a=i?1:n-2,s=i?n:-1,o=i?1:-1,h=0,c=i?t[0]:t[n-1],u=a;u!==s;u+=o){r=c,c=t[u];var f=this._curveHelper.calculateLength(r,c);if(h+f>e){var v=(e-h)/f,m=this._curveHelper.getAngleCS(r,c,v),p=Object(x.a)(m,2),y=p[0],_=p[1],g=Object(l.e)(r,c,v);return this.internalPlacement.setTranslate(g[0]-this._offset*_,g[1]+this._offset*y),this._angleToLine&&this.internalPlacement.setRotateCS(-y,-_),this.internalPlacement}h+=f}return null}}]),i}(l.b),Q=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new tt(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();Q.instance=null;var tt=function(t){Object(u.a)(i,t);var e=Object(f.a)(i);function i(t,n,a){var s;return Object(r.a)(this,i),(s=e.call(this,t,!0,!0))._walker=new M,s._walker.updateTolerance(a),s._angleToLine=void 0===n.angleToLine||n.angleToLine,s._offset=void 0!==n.offset?n.offset*a:0,s._beginGap=void 0!==n.beginPosition?n.beginPosition*a:0,s._endGap=void 0!==n.endPosition?n.endPosition*a:0,s._flipFirst=void 0===n.flipFirst||n.flipFirst,s._pattern=new P,s._pattern.init(n.positionArray,!1,!1),s._subPathLen=0,s._posCount=s._pattern.size(),s._isFirst=!0,s._prevPos=0,s}return Object(a.a)(i,[{key:"processPath",value:function(t){if(this._pattern.isEmpty())return null;var e;if(this.iteratePath){var i=this._pattern.nextValue()*this._subPathLen,n=this._beginGap+i;e=n-this._prevPos,this._prevPos=n}else{if(this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0,this._subPathLen=this._walker.calculatePathLength(t)-this._beginGap-this._endGap,this._subPathLen<0)return this.iteratePath=!1,null;if(!this._walker.init(t,this._pattern,!1))return null;this._pattern.reset();var r=this._pattern.nextValue()*this._subPathLen,a=this._beginGap+r;e=a-this._prevPos,this._prevPos=a,this.iteratePath=!0}var s={};if(!this._walker.nextPointAndAngle(e,s,1))return this.iteratePath=!1,null;this.internalPlacement.setTranslate(s.pt[0]+this._offset*s.sa,s.pt[1]-this._offset*s.ca);var o,l,h=this._isFirst&&this._flipFirst;return this._angleToLine?(o=s.ca,l=s.sa):(o=1,l=0),h&&(o=-o,l=-l),this.internalPlacement.setRotateCS(o,l),this._isFirst=!1,this._posCount--,0===this._posCount&&(this.iteratePath=!1),this.internalPlacement}}]),i}(l.b),et=i(1018),it=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new nt(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();it.instance=null;var nt=function(){function t(e,i,n){if(Object(r.a)(this,t),this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,this._currentX=0,this._currentY=0,this._stepX=(void 0!==i.stepX?Math.abs(i.stepX):16)*n,this._stepY=(void 0!==i.stepY?Math.abs(i.stepY):16)*n,0!==this._stepX&&0!==this._stepY&&e&&void 0!==e.rings&&e.rings){if(this._gridType=void 0!==i.gridType?i.gridType:"Fixed","Random"===this._gridType)this._randomness=void 0!==i.randomness?i.randomness/100:1,this._gridAngle=0,this._shiftOddRows=!1,this._cosAngle=1,this._sinAngle=0,this._offsetX=0,this._offsetY=0;else{if(this._randomness=0,this._gridAngle=void 0!==i.gridAngle?i.gridAngle:0,this._shiftOddRows=void 0!==i.shiftOddRows&&i.shiftOddRows,this._offsetX=void 0!==i.offsetX?i.offsetX*n:0,this._offsetY=void 0!==i.offsetY?i.offsetY*n:0,this._cosAngle=Math.cos(this._gridAngle/180*Math.PI),this._sinAngle=-Math.sin(this._gridAngle/180*Math.PI),this._stepX)if(this._offsetX<0)for(;this._offsetX<-.5*this._stepX;)this._offsetX+=this._stepX;else for(;this._offsetX>=.5*this._stepX;)this._offsetX-=this._stepX;if(this._stepY)if(this._offsetY<0)for(;this._offsetY<-.5*this._stepY;)this._offsetY+=this._stepY;else for(;this._offsetY>=.5*this._stepY;)this._offsetY-=this._stepY}this._graphicOriginX=0,this._graphicOriginY=0,this._internalPlacement=new et.a,this._calculateMinMax(e),this._geometry=e}}return Object(a.a)(t,[{key:"next",value:function(){return this._geometry?this._nextInside():null}},{key:"_calculateMinMax",value:function(t){var e,i,r,a,s,o,l,h;this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,s=o=Number.MAX_VALUE,l=h=-Number.MAX_VALUE;var c,u=Object(n.a)(t.rings);try{for(u.s();!(c=u.n()).done;)for(var f=c.value,v=f?f.length:0,m=0;m<v;++m)e=f[m][0]-this._graphicOriginX-this._offsetX,i=f[m][1]-this._graphicOriginY-this._offsetY,r=this._cosAngle*e-this._sinAngle*i,a=this._sinAngle*e+this._cosAngle*i,s=Math.min(s,r),l=Math.max(l,r),o=Math.min(o,a),h=Math.max(h,a)}catch(p){u.e(p)}finally{u.f()}s+=this._graphicOriginX,l+=this._graphicOriginX,o+=this._graphicOriginY,h+=this._graphicOriginY,this._xMin=Math.round(s/this._stepX),this._xMax=Math.round(l/this._stepX),this._yMin=Math.round(o/this._stepY),this._yMax=Math.round(h/this._stepY),this._currentX=this._xMax+1,this._currentY=this._yMin-1}},{key:"_nextInside",value:function(){for(;;){if(this._currentX>this._xMax){if(this._currentY++,this._currentY>this._yMax)return null;this._currentX=this._xMin,this._shiftOddRows&&this._currentY%2&&this._currentX--}var t=this._currentX*this._stepX+this._offsetX;this._shiftOddRows&&this._currentY%2&&(t+=.5*this._stepX);var e=this._currentY*this._stepY+this._offsetY,i=void 0,n=void 0;return this._currentX++,"Random"===this._gridType?(i=this._graphicOriginX+t+this._stepX*this._randomness*(.5-Math.random())*2/3,n=this._graphicOriginY+e+this._stepY*this._randomness*(.5-Math.random())*2/3):(i=this._graphicOriginX+this._cosAngle*t+this._sinAngle*e,n=this._graphicOriginY-this._sinAngle*t+this._cosAngle*e),this._internalPlacement.setTranslate(i,n),this._internalPlacement}}}]),t}(),rt=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new at(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();rt.instance=null;var at=function(t){Object(u.a)(i,t);var e=Object(f.a)(i);function i(t,n,a){var s;return Object(r.a)(this,i),(s=e.call(this,t,!0,!0))._curveHelper=new p,s._angleToLine=void 0===n.angleToLine||n.angleToLine,s._offset=void 0!==n.offset?n.offset*a:0,s._relativeTo=n.relativeTo,s._position=void 0!==n.startPointOffset?n.startPointOffset*a:0,s._epsilon=.001*a,s}return Object(a.a)(i,[{key:"processPath",value:function(t){var e=this._position;if("SegmentMidpoint"===this._relativeTo){for(this.iteratePath||(this._segmentCount=t.length,this._curSegment=1,this.iteratePath=!0);this._curSegment<this._segmentCount;){var i=this._curSegment;this._curSegment++;var n=t[i-1],r=t[i],a=this._curveHelper.calculateLength(n,r);if(!(a<this._epsilon)){var s=.5+this._position/a,o=this._curveHelper.getAngleCS(n,r,s),h=Object(x.a)(o,2),c=h[0],u=h[1],f=Object(l.e)(n,r,s);return this.internalPlacement.setTranslate(f[0]-this._offset*u,f[1]+this._offset*c),this._angleToLine&&this.internalPlacement.setRotateCS(c,u),this.internalPlacement}}return this.iteratePath=!1,null}"LineEnd"===this._relativeTo&&Object(l.i)(t);var v=this.onLine(t,e);return"LineEnd"===this._relativeTo&&Object(l.i)(t),v}},{key:"onLine",value:function(t,e){var i,n=!1;switch(this._relativeTo){case"LineMiddle":default:i=this._curveHelper.calculatePathLength(t)/2+e;break;case"LineBeginning":i=e;break;case"LineEnd":i=e,n=!0}for(var r,a=t.length,s=0,o=t[0],h=1;h<a;++h){r=o,o=t[h];var c=this._curveHelper.calculateLength(r,o);if(s+c>i){var u=(i-s)/c,f=this._curveHelper.getAngleCS(r,o,u),v=Object(x.a)(f,2),m=v[0],p=v[1],y=Object(l.e)(r,o,u),_=n?this._offset:-this._offset;return this.internalPlacement.setTranslate(y[0]-_*p,y[1]+_*m),this._angleToLine&&(n?this.internalPlacement.setRotateCS(-m,-p):this.internalPlacement.setRotateCS(m,p)),this.internalPlacement}s+=c}return null}}]),i}(l.b),st=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new ot(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();st.instance=null;var ot=function(t){Object(u.a)(i,t);var e=Object(f.a)(i);function i(t,n,a){var s;return Object(r.a)(this,i),(s=e.call(this,t,!0,!0))._curveHelper=new p,s._angleToLine=void 0===n.angleToLine||n.angleToLine,s._offset=void 0!==n.offset?n.offset*a:0,s._endPoints=void 0===n.placeOnEndPoints||n.placeOnEndPoints,s._controlPoints=void 0===n.placeOnControlPoints||n.placeOnControlPoints,s._regularVertices=void 0===n.placeOnRegularVertices||n.placeOnRegularVertices,s._tags=[],s._tagIterator=0,s}return Object(a.a)(i,[{key:"processPath",value:function(t){if(this.iteratePath||(this._preparePath(t),this.iteratePath=!0),this._tagIterator>=this._tags.length)return this._tags.length=0,this._tagIterator=0,this.iteratePath=!1,null;var e=this._tags[this._tagIterator];this._angleToLine&&this.internalPlacement.setRotate(e[2]);var i=e[0],n=e[1];if(0!==this._offset){var r=Math.cos(e[2]),a=Math.sin(e[2]);i-=this._offset*a,n+=this._offset*r}return this.internalPlacement.setTranslate(i,n),this._tagIterator++,this.internalPlacement}},{key:"_preparePath",value:function(t){this._tags.length=0,this._tagIterator=0;for(var e,i,n=Object(l.g)(t),r=t.length-1,a=0,s=0,o=0,h=0,c=0;a<r;){e=t[++a-1],i=t[a];var u=Object(l.f)(e),f=Object(l.f)(i);(this._angleToLine||0!==this._offset)&&(h=this._curveHelper.getAngle(e,i,0)),1===a?n?(s=h,o=u):this._endPoints&&this._tags.push([e[0],e[1],h]):1===u?this._controlPoints&&this._tags.push([e[0],e[1],lt(c,h)]):this._regularVertices&&this._tags.push([e[0],e[1],lt(c,h)]),(this._angleToLine||0!==this._offset)&&(c=this._curveHelper.getAngle(e,i,1)),a===r&&(n?1===f||1===o?this._controlPoints&&this._tags.push([i[0],i[1],lt(c,s)]):this._regularVertices&&this._tags.push([i[0],i[1],lt(c,s)]):this._endPoints&&this._tags.push([i[0],i[1],c]))}this._tagIterator=0}}]),i}(l.b);function lt(t,e){for(var i=Math.PI;Math.abs(e-t)>i+2e-15;)e-t>i?e-=2*i:e+=2*i;return(t+e)/2}var ht=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new ct(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();ht.instance=null;var ct=function(){function t(e,i,n){Object(r.a)(this,t),this._geometry=e,this._offsetX=void 0!==i.offsetX?i.offsetX*n:0,this._offsetY=void 0!==i.offsetY?i.offsetY*n:0,this._method=void 0!==i.method?i.method:"OnPolygon",this._internalPlacement=new et.a}return Object(a.a)(t,[{key:"next",value:function(){var t=this._geometry;return this._geometry=null,t&&void 0!==t.rings?this._polygonCenter(t):null}},{key:"_polygonCenter",value:function(t){var e=!1;switch(this._method){case"OnPolygon":default:case"CenterOfMass":case"BoundingBoxCenter":var i=Object(H.h)();Object(X.a)(i,t),this._internalPlacement.setTranslate((i[2]+i[0])/2+this._offsetX,(i[3]+i[1])/2-this._offsetY),e=!0}return e?this._internalPlacement:null}}]),t}();function ut(t){if(!t)return null;switch(t.type){case"CIMGeometricEffectAddControlPoints":return h.local();case"CIMGeometricEffectArrow":return _.local();case"CIMGeometricEffectBuffer":return d.local();case"CIMGeometricEffectCut":return k.local();case"CIMGeometricEffectDashes":return C.local();case"CIMGeometricEffectDonut":return w.local();case"CIMGeometricEffectJog":return I.local();case"CIMGeometricEffectMove":return T.local();case"CIMGeometricEffectOffset":return z.local();case"CIMGeometricEffectReverse":return G.local();case"CIMGeometricEffectRotate":return Y.local();case"CIMGeometricEffectScale":return V.local();case"CIMGeometricEffectWave":return J.local()}return null}function ft(t){if(!t)return null;switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":return U.local();case"CIMMarkerPlacementAtExtremities":return K.local();case"CIMMarkerPlacementAtRatioPositions":return Q.local();case"CIMMarkerPlacementInsidePolygon":return it.local();case"CIMMarkerPlacementOnLine":return rt.local();case"CIMMarkerPlacementOnVertices":return st.local();case"CIMMarkerPlacementPolygonCenter":return ht.local()}return null}},1119:function(t,e,i){"use strict";var n=i(10),r=i(14),a=i(20),s=i(400);var o=new Map;e.a=function(t,e,i,l,h){var c=t.referencesGeometry()&&h?function(t,e,i){var l=i.transform,h=i.hasZ,c=i.hasM;o.has(e)||o.set(e,function(t){var e={};switch(t){case"esriGeometryPoint":return function(t,i,n,r){return Object(s.c)(i,e,t,n,r)};case"esriGeometryPolygon":return function(t,i,n,r){return Object(s.d)(i,e,t,n,r)};case"esriGeometryPolyline":return function(t,i,n,r){return Object(s.e)(i,e,t,n,r)};case"esriGeometryMultipoint":return function(t,i,n,r){return Object(s.b)(i,e,t,n,r)};default:return r.a.getLogger("esri.views.2d.support.arcadeOnDemand").error(new a.a("mapview-arcade","Unable to handle geometryType: ".concat(t))),function(t){return t}}}(e));var u=o.get(e)(t.geometry,l,h,c);return Object(n.a)(Object(n.a)({},t),{},{geometry:u})}(e,l,h):e,u=t.repurposeFeature(c);try{return t.evaluate(Object(n.a)(Object(n.a)({},i),{},{$feature:u}))}catch(f){return r.a.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",f),null}}},1120:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(2),r=i(3),a=(i(23),function(){function t(e){Object(n.a)(this,t),this._geometry=e}return Object(r.a)(t,[{key:"next",value:function(){var t=this._geometry;return this._geometry=null,t}}]),t}())},1121:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=[1,256,65536,16777216],r=[1/256,1/65536,1/16777216,1/4294967296],a=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0,n=0;n<4;n++)i+=t[e+n]*r[n];return i}(new Uint8ClampedArray([255,255,255,255]));function s(t,e){for(var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=function(t,e,i){return t<0?0:t>i?i:t}(t,0,a),o=0;o<4;o++)e[r+o]=Math.floor(256*((i=s*n[o])-Math.floor(i)))}},1122:function(t,e,i){"use strict";i.d(e,"a",(function(){return f})),i.d(e,"b",(function(){return c})),i.d(e,"c",(function(){return l})),i.d(e,"d",(function(){return u}));var n=i(32),r=i(13),a=i(97),s=i(1081),o=i(1121);function l(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":var e=t.symbolLayers;return e&&1===e.length?l(e[0]):null;case"CIMVectorMarker":var i=t.markerGraphics;if(!i||1!==i.length)return null;var n=i[0];if(!n)return null;var r=n.geometry;if(!r)return null;var a=n.symbol;return!a||"CIMPolygonSymbol"!==a.type&&"CIMLineSymbol"!==a.type?null:{geom:r,asFill:"CIMPolygonSymbol"===a.type};case"sdf":return{geom:t.geom,asFill:t.asFill}}return null}function h(t){var e,i=1/0,n=-1/0,a=1/0,s=-1/0,o=Object(r.a)(t);try{for(o.s();!(e=o.n()).done;){var l,h=e.value,c=Object(r.a)(h);try{for(c.s();!(l=c.n()).done;){var u=l.value;u[0]<i&&(i=u[0]),u[0]>n&&(n=u[0]),u[1]<a&&(a=u[1]),u[1]>s&&(s=u[1])}}catch(f){c.e(f)}finally{c.f()}}}catch(f){o.e(f)}finally{o.f()}return[i,a,n,s]}function c(t){return t?t.rings?h(t.rings):t.paths?h(t.paths):Object(a.d)(t)?[t.xmin,t.ymin,t.xmax,t.ymax]:null:null}function u(t,e,i,r,a){var s=Object(n.a)(t,4),o=s[0],l=s[1],h=s[2],c=s[3];if(h<o||c<l)return[0,0,0];var u=h-o,f=c-l,v=Math.floor(31.5),m=(128-2*(v+1))/Math.max(u,f),p=Math.round(u*m)+2*v,y=Math.round(f*m)+2*v,_=1;e&&(_=y/m/(e.ymax-e.ymin));var g=0,d=0;if(r)if(a){if(e&&i&&e.ymax-e.ymin>0){var b=(e.xmax-e.xmin)/(e.ymax-e.ymin);g=r.x/(i*b),d=r.y/i}}else g=r.x,d=r.y;return g=.5*(e.xmax+e.xmin)+g*(e.xmax-e.xmin),d=.5*(e.ymax+e.ymin)+d*(e.ymax-e.ymin),g-=o,d-=l,g*=m,d*=m,[_,(g+=v)/p-.5,-((d+=v)/y-.5)]}function f(t){var e,i,a=(e=t.geom)?e.rings?e.rings:e.paths?e.paths:void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:null:null,o=function(t){var e,i=1/0,n=-1/0,a=1/0,o=-1/0,l=Object(r.a)(t);try{for(l.s();!(e=l.n()).done;){var h,c=e.value,u=Object(r.a)(c);try{for(u.s();!(h=u.n()).done;){var f=h.value;f[0]<i&&(i=f[0]),f[0]>n&&(n=f[0]),f[1]<a&&(a=f[1]),f[1]>o&&(o=f[1])}}catch(v){u.e(v)}finally{u.f()}}}catch(v){l.e(v)}finally{l.f()}return new s.a(i,a,n-i,o-a)}(a),l=Math.floor(31.5),h=(128-2*(l+1))/Math.max(o.width,o.height),c=Math.round(o.width*h)+2*l,u=Math.round(o.height*h)+2*l,f=[],m=Object(r.a)(a);try{for(m.s();!(i=m.n()).done;){var p=i.value;if(p&&p.length>1){var y,_=[],g=Object(r.a)(p);try{for(g.s();!(y=g.n()).done;){var d=y.value,b=Object(n.a)(d,2),k=b[0],O=b[1];k-=o.x,O-=o.y,k*=h,O*=h,k+=l-.5,O+=l-.5,_.push([k,O])}}catch(S){g.e(S)}finally{g.f()}if(t.asFill){var x=_.length-1;_[0][0]===_[x][0]&&_[0][1]===_[x][1]||_.push(_[0])}f.push(_)}}}catch(S){m.e(S)}finally{m.f()}var P=function(t,e,i,n){for(var a=e*i,s=new Array(a),o=n*n+1,l=0;l<a;++l)s[l]=o;var h,c=Object(r.a)(t);try{for(c.s();!(h=c.n()).done;)for(var u=h.value,f=u.length,v=1;v<f;++v){var m=u[v-1],p=u[v],y=void 0,_=void 0,g=void 0,d=void 0;m[0]<p[0]?(y=m[0],_=p[0]):(y=p[0],_=m[0]),m[1]<p[1]?(g=m[1],d=p[1]):(g=p[1],d=m[1]);var b=Math.floor(y)-n,k=Math.floor(_)+n,O=Math.floor(g)-n,x=Math.floor(d)+n;b<0&&(b=0),k>e&&(k=e),O<0&&(O=0),x>i&&(x=i);for(var P=p[0]-m[0],M=p[1]-m[1],C=P*P+M*M,j=b;j<k;j++)for(var w=O;w<x;w++){var L=void 0,I=void 0,A=(j-m[0])*P+(w-m[1])*M;A<0?(L=m[0],I=m[1]):A>C?(L=p[0],I=p[1]):(A/=C,L=m[0]+A*P,I=m[1]+A*M);var T=(j-L)*(j-L)+(w-I)*(w-I),N=(i-w-1)*e+j;T<s[N]&&(s[N]=T)}}}catch(S){c.e(S)}finally{c.f()}for(var z=0;z<a;++z)s[z]=Math.sqrt(s[z]);return s}(f,c,u,l);return t.asFill&&function(t,e,i,n,a){var s,o=Object(r.a)(t);try{for(o.s();!(s=o.n()).done;)for(var l=s.value,h=l.length,c=1;c<h;++c){var u=l[c-1],f=l[c],v=void 0,m=void 0,p=void 0,y=void 0;u[0]<f[0]?(v=u[0],m=f[0]):(v=f[0],m=u[0]),u[1]<f[1]?(p=u[1],y=f[1]):(p=f[1],y=u[1]);var _=Math.floor(v),g=Math.floor(m)+1,d=Math.floor(p),b=Math.floor(y)+1;_<n&&(_=n),g>e-n&&(g=e-n),d<n&&(d=n),b>i-n&&(b=i-n);for(var k=d;k<b;++k)if(u[1]>k!=f[1]>k){for(var O=(i-k-1)*e,x=_;x<g;++x)x<(f[0]-u[0])*(k-u[1])/(f[1]-u[1])+u[0]&&(a[O+x]=-a[O+x]);for(var P=n;P<_;++P)a[O+P]=-a[O+P]}}}catch(S){o.e(S)}finally{o.f()}}(f,c,u,l,P),[v(P,l),c,u]}function v(t,e){for(var i=2*e,n=t.length,r=new Uint8Array(4*n),a=0;a<n;++a){var s=.5-t[a]/i;Object(o.a)(s,r,4*a)}return r}},1151:function(t,e,i){"use strict";i.d(e,"a",(function(){return L})),i.d(e,"b",(function(){return A})),i.d(e,"c",(function(){return I}));var n=i(10),r=i(13),a=i(2),s=i(3),o=i(14),l=i(44),h=i(43),c=i(1018),u=i(5),f=i(6),v=i(316),m=i(97),p=i(115),y=i(1120),_=i(1110),g=i(1081),d=Math.PI/180,b=o.a.getLogger("esri.symbols.cim.CIMSymbolDrawHelper"),k=function(){function t(e){Object(a.a)(this,t),this._t=e}return Object(s.a)(t,[{key:"clone",value:function(){return new t(this._t.slice())}},{key:"transform",value:function(t){var e=this._t;return[e[0]*t[0]+e[1]*t[1]+e[2],e[3]*t[0]+e[4]*t[1]+e[5]]}},{key:"scale",value:function(t,e){var i=this._t;return i[0]*=t,i[1]*=t,i[2]*=t,i[3]*=e,i[4]*=e,i[5]*=e,this}},{key:"scaleRatio",value:function(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])}},{key:"translate",value:function(t,e){var i=this._t;return i[2]+=t,i[5]+=e,this}},{key:"rotate",value:function(e){return this.multiply(t.createRotate(e))}},{key:"multiply",value:function(t){var e=this._t,i=t._t,n=e[0]*i[0]+e[3]*i[1],r=e[1]*i[0]+e[4]*i[1],a=e[2]*i[0]+e[5]*i[1]+i[2],s=e[0]*i[3]+e[3]*i[4],o=e[1]*i[3]+e[4]*i[4],l=e[2]*i[3]+e[5]*i[4]+i[5];return e[0]=n,e[1]=r,e[2]=a,e[3]=s,e[4]=o,e[5]=l,this}}],[{key:"createIdentity",value:function(){return new t([1,0,0,0,1,0])}},{key:"createScale",value:function(e,i){return new t([e,0,0,0,i,0])}},{key:"createTranslate",value:function(e,i){return new t([0,0,e,0,0,i])}},{key:"createRotate",value:function(e){var i=Math.cos(e),n=Math.sin(e);return new t([i,-n,0,n,i,0])}}]),t}(),O=function(){function t(e){Object(a.a)(this,t),this._transfos=[],this._sizeTransfos=[],this._transfos.push(e||k.createIdentity()),this._sizeTransfos.push(e?e.scaleRatio():1)}return Object(s.a)(t,[{key:"transformPt",value:function(t){return this._transfos[this._transfos.length-1].transform(t)}},{key:"transformSize",value:function(t){return t*this._sizeTransfos[this._sizeTransfos.length-1]}},{key:"back",value:function(){return this._transfos[this._transfos.length-1]}},{key:"push",value:function(t,e){var i=e?t.scaleRatio():1;t.multiply(this.back()),this._transfos.push(t),this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*i)}},{key:"pop",value:function(){this._transfos.splice(-1,1),this._sizeTransfos.splice(-1,1)}},{key:"drawSymbol",value:function(t,e){if(t)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":this.drawMultiLayerSymbol(t,e)}}},{key:"drawMultiLayerSymbol",value:function(t,e){if(t){var i=t.symbolLayers;if(i){var n=t.effects;if(n){var r=this.executeEffects(n,e);if(r)for(var a=r.next();a;)this.drawSymbolLayers(i,a),a=r.next()}else this.drawSymbolLayers(i,e)}}}},{key:"executeEffects",value:function(t,e){var i,n=new y.a(e),a=Object(r.a)(t);try{for(a.s();!(i=a.n()).done;){var s=i.value,o=Object(_.a)(s);o&&(n=o.execute(n,s,1))}}catch(l){a.e(l)}finally{a.f()}return n}},{key:"drawSymbolLayers",value:function(t,e){for(var i=t.length;i--;){var n=t[i];if(n&&!1!==n.enable){var r=n.effects;if(r){var a=this.executeEffects(r,e);if(a)for(var s=a.next();s;)this.drawSymbolLayer(n,s),s=a.next()}else this.drawSymbolLayer(n,e)}}}},{key:"drawSymbolLayer",value:function(t,e){switch(t.type){case"CIMSolidFill":this.drawSolidFill(e,t.color);break;case"CIMHatchFill":this.drawHatchFill(t,e);break;case"CIMSolidStroke":this.drawSolidStroke(e,t.color,t.width,t.capStyle,t.joinStyle,t.miterLimit);break;case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":this.drawMarkerLayer(t,e)}}},{key:"drawHatchFill",value:function(t,e){var i=this._buildHatchPolyline(t,e,1);i&&(this.pushClipPath(e),this.drawMultiLayerSymbol(t.lineSymbol,i),this.popClipPath())}},{key:"drawMarkerLayer",value:function(t,e){var i=t.markerPlacement;if(i){var n=Object(_.b)(i);if(n){var r="CIMMarkerPlacementInsidePolygon"===i.type;r&&this.pushClipPath(e);var a=n.execute(e,i,1);if(a)for(var s=a.next();s;)this.drawMarker(t,s),s=a.next();r&&this.popClipPath()}}else{var o=new c.a;o.tx=e.x,o.ty=e.y,this.drawMarker(t,o)}}},{key:"drawMarker",value:function(t,e){switch(t.type){case"CIMCharacterMarker":case"CIMPictureMarker":this.drawPictureMarker(t,e);break;case"CIMVectorMarker":this.drawVectorMarker(t,e)}}},{key:"drawPictureMarker",value:function(t,e){}},{key:"drawVectorMarker",value:function(t,e){if(t){var i=t.markerGraphics;if(i){var n=t.size,a=t.frame,s=a?a.ymax-a.ymin:0,o=n&&s?n/s:1,l=k.createIdentity();a&&l.translate(.5*-(a.xmax+a.xmin),.5*-(a.ymax+a.ymin));var h=t.anchorPoint;if(h){var c=h.x,u=h.y;"Absolute"!==t.anchorPointUnits&&a&&(c*=a.xmax-a.xmin,u*=a.ymax-a.ymin),l.translate(-c,-u)}1!==o&&l.scale(o,o),t.rotation&&l.rotate(t.rotation*d),l.translate(t.offsetX||0,t.offsetY||0),l.translate(e.tx,e.ty),this.push(l,t.scaleSymbolsProportionally);var f,v=Object(r.a)(i);try{for(v.s();!(f=v.n()).done;){var m=f.value;m&&m.symbol&&m.geometry||b.error("Invalid marker graphic",m),this.drawSymbol(m.symbol,m.geometry)}}catch(p){v.e(p)}finally{v.f()}this.pop()}}}},{key:"_buildHatchPolyline",value:function(t,e,i){var n=(void 0!==t.separation?t.separation:4)*i,r=void 0!==t.rotation?t.rotation:0;if(0===n)return null;n<0&&(n=-n);for(var a=0,s=.5*n;a>s;)a-=n;for(;a<-s;)a+=n;var o=Object(p.h)();Object(v.a)(o,e),o[0]-=s,o[1]-=s,o[2]+=s,o[3]+=s;for(var l=[[o[0],o[1]],[o[0],o[3]],[o[2],o[3]],[o[2],o[1]]];r>180;)r-=180;for(;r<0;)r+=180;var h,c,u,f,m=Math.cos(r*d),y=Math.sin(r*d),_=-n*y,g=n*m;a=(void 0!==t.offsetX?t.offsetX*i:0)*y-(void 0!==t.offsetY?t.offsetY*i:0)*m,h=u=Number.MAX_VALUE,c=f=-Number.MAX_VALUE;for(var b=0,k=l;b<k.length;b++){var O=k[b],x=O[0],P=O[1],S=m*x+y*P,M=-y*x+m*P;h=Math.min(h,S),u=Math.min(u,M),c=Math.max(c,S),f=Math.max(f,M)}for(var C=m*h-y*(u=Math.floor(u/n)*n)-_*a/n,j=y*h+m*u-g*a/n,w=m*c-y*u-_*a/n,L=y*c+m*u-g*a/n,I=1+Math.round((f-u)/n),A=[],T=0;T<I;T++)C+=_,j+=g,w+=_,L+=g,A.push([[C,j],[w,L]]);return{paths:A}}}]),t}(),x=function(t){Object(u.a)(i,t);var e=Object(f.a)(i);function i(){var t;return Object(a.a)(this,i),(t=e.call(this)).reset(),t}return Object(s.a)(i,[{key:"reset",value:function(){this._xmin=this._ymin=1/0,this._xmax=this._ymax=-1/0,this._clipCount=0}},{key:"envelope",value:function(){return new g.a(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)}},{key:"drawSolidFill",value:function(t){!t||this._clipCount>0||(Object(m.g)(t)?this._processPath(t.rings,0):Object(m.h)(t)&&this._processPath(t.paths,0))}},{key:"drawSolidStroke",value:function(t,e,i){if(t&&!(this._clipCount>0)){var n=.5*this.transformSize(i);Object(m.g)(t)?this._processPath(t.rings,n):Object(m.h)(t)&&this._processPath(t.paths,n)}}},{key:"pushClipPath",value:function(t){this.drawSolidFill(t),++this._clipCount}},{key:"popClipPath",value:function(){--this._clipCount}},{key:"_processPath",value:function(t,e){if(t){var i,n=Object(r.a)(t);try{for(n.s();!(i=n.n()).done;){var a=i.value,s=a?a.length:0;if(s>1){this._merge(this.transformPt(a[0]),e);for(var o=1;o<s;++o)this._merge(this.transformPt(a[o]),e)}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"_merge",value:function(t,e){t[0]-e<this._xmin&&(this._xmin=t[0]-e),t[0]+e>this._xmax&&(this._xmax=t[0]+e),t[1]-e<this._ymin&&(this._ymin=t[1]-e),t[1]+e>this._ymax&&(this._ymax=t[1]+e)}}]),i}(O),P=function(t){Object(u.a)(i,t);var e=Object(f.a)(i);function i(t,n){var r;return Object(a.a)(this,i),(r=e.call(this,n))._ctx=t,r}return Object(s.a)(i,[{key:"drawSolidFill",value:function(t,e){if(t){if(Object(m.g)(t))this._buildPath(t.rings,!0);else{if(!Object(m.h)(t))return;this._buildPath(t.paths,!0)}var i=this._ctx;i.fillStyle="string"==typeof e?e:"rgba("+Math.round(e[0])+","+Math.round(e[1])+","+Math.round(e[2])+","+e[3]/255+")",i.fill("evenodd")}}},{key:"drawSolidStroke",value:function(t,e,i,n,r,a){if(t&&e&&0!==i){if(Object(m.g)(t))this._buildPath(t.rings,!0);else{if(!Object(m.h)(t))return;this._buildPath(t.paths,!1)}var s=this._ctx;s.strokeStyle="string"==typeof e?e:"rgba("+Math.round(e[0])+","+Math.round(e[1])+","+Math.round(e[2])+","+e[3]/255+")",s.lineWidth=this.transformSize(i)+.5,this._setCapStyle(n),this._setJoinStyle(r),s.miterLimit=a,s.stroke()}}},{key:"pushClipPath",value:function(t){this._ctx.save(),Object(m.g)(t)?this._buildPath(t.rings,!0):Object(m.h)(t)&&this._buildPath(t.paths,!0),this._ctx.clip("evenodd")}},{key:"popClipPath",value:function(){this._ctx.restore()}},{key:"_buildPath",value:function(t,e){var i=this._ctx;if(i.beginPath(),t){var n,a=Object(r.a)(t);try{for(a.s();!(n=a.n()).done;){var s=n.value,o=s?s.length:0;if(o>1){var l=this.transformPt(s[0]);i.moveTo(l[0],l[1]);for(var h=1;h<o;++h)l=this.transformPt(s[h]),i.lineTo(l[0],l[1]);e&&i.closePath()}}}catch(c){a.e(c)}finally{a.f()}}}},{key:"_setCapStyle",value:function(t){switch(t){case"Butt":this._ctx.lineCap="butt";break;case"Round":this._ctx.lineCap="round";break;case"Square":this._ctx.lineCap="square"}}},{key:"_setJoinStyle",value:function(t){switch(t){case"Bevel":this._ctx.lineJoin="bevel";break;case"Round":this._ctx.lineJoin="round";break;case"Miter":this._ctx.lineJoin="miter"}}}]),i}(O),S=i(1121),M=Math.PI,C=M/2,j=o.a.getLogger("esri.symbols.cim.CIMSymbolHelper");function w(t,e){switch(e.type){case"CIMSymbolReference":t.drawSymbol(e.symbol,{type:"point",x:0,y:0});break;case"CIMPointSymbol":t.drawSymbol(e,{type:"point",x:0,y:0});break;case"CIMTextSymbol":break;case"CIMVectorMarker":var i=new c.a;t.drawMarker(e,i)}return t.envelope()}var L=function(){function t(){Object(a.a)(this,t)}return Object(s.a)(t,null,[{key:"getEnvelope",value:function(t){var e=new x;if(Array.isArray(t)){var i,n,a=Object(r.a)(t);try{for(a.s();!(n=a.n()).done;){var s=n.value;i?i.union(w(e,s)):i=w(e,s)}}catch(o){a.e(o)}finally{a.f()}return i}return w(e,t)}},{key:"getTextureAnchor",value:function(t){var e=this.getEnvelope(t);if(!e||e.width<=0||e.height<=0)return[0,0,0];var i=96/72,n=(e.x+.5*e.width)*i,r=-(e.y+.5*e.height)*i,a=e.width*i+2,s=e.height*i+2;return[n/a,r/s,s]}},{key:"rasterize",value:function(t,e,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=i||this.getEnvelope(e);if(!r||r.width<=0||r.height<=0)return[null,0,0,0,0];var a=96/72,s=(r.x+.5*r.width)*a,o=(r.y+.5*r.height)*a;t.width=r.width*a,t.height=r.height*a,i||(t.width+=2,t.height+=2);var l=t.getContext("2d"),h=k.createScale(a,-a);h.translate(.5*t.width-s,.5*t.height+o);var u=new P(l,h);switch(e.type){case"CIMPointSymbol":var f={type:"point",x:0,y:0};u.drawSymbol(e,f);break;case"CIMVectorMarker":var v=new c.a;u.drawMarker(e,v)}var m=l.getImageData(0,0,t.width,t.height),p=new Uint8Array(m.data);if(n)for(var y,_=0;_<p.length;_+=4)y=p[_+3]/255,p[_]=p[_]*y,p[_+1]=p[_+1]*y,p[_+2]=p[_+2]*y;return[p,t.width,t.height,-s/t.width,-o/t.height]}},{key:"fromSimpleMarker",value:function(t){var e,i,n,r=50,a=t.style;if("circle"===a||"esriSMSCircle"===a){var s=Math.acos(.995),o=Math.ceil(M/s/4);0===o&&(o=1),s=C/o,o*=4;var l=[];l.push([r,0]);for(var h=1;h<o;h++)l.push([r*Math.cos(h*s),-50*Math.sin(h*s)]);l.push([r,0]),e={rings:[l]},i={xmin:-50,ymin:-50,xmax:r,ymax:r}}else if("cross"===a||"esriSMSCross"===a){e={rings:[[[0,r],[0,0],[r,0],[r,-0],[0,-0],[0,-50],[-0,-50],[-0,-0],[-50,-0],[-50,0],[-0,0],[-0,r],[0,r]]]},i={xmin:-50,ymin:-50,xmax:r,ymax:r}}else if("diamond"===a||"esriSMSDiamond"===a)e={rings:[[[-50,0],[0,r],[r,0],[0,-50],[-50,0]]]},i={xmin:-50,ymin:-50,xmax:r,ymax:r};else if("square"===a||"esriSMSSquare"===a)e={rings:[[[-50,-50],[-50,r],[r,r],[r,-50],[-50,-50]]]},i={xmin:-50,ymin:-50,xmax:r,ymax:r};else if("x"===a||"esriSMSX"===a){e={rings:[[[0,0],[50,r],[r,50],[0,0],[r,-50],[50,-50],[0,-0],[-50,-50],[-50,-50],[-0,0],[-50,50],[-50,r],[0,0]]]},i={xmin:-50,ymin:-50,xmax:r,ymax:r}}else if("triangle"===a||"esriSMSTriangle"===a){var c=57.735026918962575,u=-c,f=2/3*100,v=f-100;e={rings:[[[u,v],[0,f],[c,v],[u,v]]]},i={xmin:u,ymin:v,xmax:c,ymax:f}}else"arrow"!==a&&"esriSMSArrow"!==a||(e={rings:[[[-50,50],[50,0],[-50,-50],[-33,-20],[-33,20],[-50,50]]]},i={xmin:-50,ymin:-50,xmax:r,ymax:r});if(e&&i){var m=[{type:"CIMSolidFill",enable:!0,color:t.color}];t.outline&&m.push({type:"CIMSolidStroke",enable:!0,width:t.outline.width,color:t.outline.color});var p={type:"CIMPolygonSymbol",symbolLayers:m};n={type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:t.angle,size:t.size,offsetX:t.xoffset,offsetY:t.yoffset,frame:i,markerGraphics:[{type:"CIMMarkerGraphic",geometry:e,symbol:p}]}]}}return n}},{key:"fromCIMHatchFill",value:function(t){for(var e=void 0!==t.separation?t.separation:4,i=e/2,n=this._getLineSymbolPeriod(t.lineSymbol)||4;n<4;)n*=2;var r=n/2;return{type:"CIMVectorMarker",frame:{xmin:-r,xmax:r,ymin:-i,ymax:i},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[-r,0],[r,0]]]},symbol:t.lineSymbol}],size:e}}},{key:"_getLineSymbolPeriod",value:function(t){if(t){var e=this._getEffectsRepeat(t.effects);if(e)return e;if(t.symbolLayers){var i,n=Object(r.a)(t.symbolLayers);try{for(n.s();!(i=n.n()).done;){var a=i.value,s=this._getEffectsRepeat(a.effects);if(s)return s;if(a){var o=this._getPlacementRepeat(a.markerPlacement);if(o)return o}}}catch(l){n.e(l)}finally{n.f()}}}return 0}},{key:"_getEffectsRepeat",value:function(t){if(t){var e,i=Object(r.a)(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n)switch(n.type){case"CIMGeometricEffectDashes":var a=n.dashTemplate;if(a&&a.length){var s,o=0,l=Object(r.a)(a);try{for(l.s();!(s=l.n()).done;){o+=s.value}}catch(h){l.e(h)}finally{l.f()}return 1&a.length&&(o*=2),o}break;case"CIMGeometricEffectWave":return n.period;default:j.error("unsupported geometric effect type ".concat(n.type))}}}catch(h){i.e(h)}finally{i.f()}}return 0}},{key:"_getPlacementRepeat",value:function(t){if(t)switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineVariableSize":var e=t.placementTemplate;if(e&&e.length){var i,n=0,a=Object(r.a)(e);try{for(a.s();!(i=a.n()).done;){n+=i.value}}catch(s){a.e(s)}finally{a.f()}return 1&e.length&&(n*=2),n}}return 0}},{key:"fromCIMInsidePolygon",value:function(t){var e=t.markerPlacement,i=e.stepX/2,r=e.stepY/2,a={xmin:-i,xmax:i,ymin:-r,ymax:r},s=Object(n.a)({type:t.type},t);return s.markerPlacement=null,s.anchorPoint=null,{type:"CIMVectorMarker",frame:a,markerGraphics:[{type:"CIMMarkerGraphic",geometry:{x:0,y:0},symbol:{type:"CIMPointSymbol",symbolLayers:[s]}}],size:e.stepY}}},{key:"getFillColor",value:function(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers){var i,n=Object(r.a)(e.symbolLayers);try{for(n.s();!(i=n.n()).done;){var a=i.value,s=t.getFillColor(a);if(null!=s)return s}}catch(o){n.e(o)}finally{n.f()}}break;case"CIMTextSymbol":return t.getFillColor(e.symbol);case"CIMSolidFill":return e.color}}},{key:"getStrokeColor",value:function(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers){var i,n=Object(r.a)(e.symbolLayers);try{for(n.s();!(i=n.n()).done;){var a=i.value,s=t.getStrokeColor(a);if(void 0!==s)return s}}catch(o){n.e(o)}finally{n.f()}}break;case"CIMTextSymbol":return t.getStrokeColor(e.symbol);case"CIMSolidStroke":return e.color}}},{key:"getStrokeWidth",value:function(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers){var i,n=Object(r.a)(e.symbolLayers);try{for(n.s();!(i=n.n()).done;){var a=i.value,s=t.getStrokeWidth(a);if(void 0!==s)return s}}catch(o){n.e(o)}finally{n.f()}}break;case"CIMTextSymbol":return t.getStrokeWidth(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}},{key:"getSize",value:function(e){if(e)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":var i=0;if(e.symbolLayers){var n,a=Object(r.a)(e.symbolLayers);try{for(a.s();!(n=a.n()).done;){var s=n.value,o=t.getSize(s);o>i&&(i=o)}}catch(l){a.e(l)}finally{a.f()}}return i;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":return e.width;case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":return e.size}}},{key:"getMarkerScaleRatio",value:function(t){if(t)switch(t.type){case"CIMVectorMarker":if(!1!==t.scaleSymbolsProportionally&&t.frame){var e=t.frame.ymax-t.frame.ymin;return t.size/e}}return 1}}]),t}(),I=function(){function t(){Object(a.a)(this,t)}return Object(s.a)(t,null,[{key:"rasterizeSimpleFill",value:function(t,e,i){"solid"!==e&&"none"!==e&&"esriSFSSolid"!==e&&"esriSFSNull"!==e||console.error("Unexpected: style does not require rasterization");var n=Object(l.o)(Math.ceil(i)),r=this._isHorizontalOrVertical(e)?8*n:16*n,a=2*n;t.width=r,t.height=r;var s=t.getContext("2d");s.strokeStyle="#FFFFFF",s.lineWidth=n,s.beginPath(),"vertical"!==e&&"cross"!==e&&"esriSFSCross"!==e&&"esriSFSVertical"!==e||(s.moveTo(r/2,-a),s.lineTo(r/2,r+a)),"horizontal"!==e&&"cross"!==e&&"esriSFSCross"!==e&&"esriSFSHorizontal"!==e||(s.moveTo(-a,r/2),s.lineTo(r+a,r/2)),"forward-diagonal"!==e&&"diagonal-cross"!==e&&"esriSFSDiagonalCross"!==e&&"esriSFSForwardDiagonal"!==e||(s.moveTo(-a,-a),s.lineTo(r+a,r+a),s.moveTo(r-a,-a),s.lineTo(r+a,a),s.moveTo(-a,r-a),s.lineTo(a,r+a)),"backward-diagonal"!==e&&"diagonal-cross"!==e&&"esriSFSBackwardDiagonal"!==e&&"esriSFSDiagonalCross"!==e||(s.moveTo(r+a,-a),s.lineTo(-a,r+a),s.moveTo(a,-a),s.lineTo(-a,a),s.moveTo(r+a,r-a),s.lineTo(r-a,r+a)),s.stroke();for(var o,h=s.getImageData(0,0,t.width,t.height),c=new Uint8Array(h.data),u=0;u<c.length;u+=4)o=c[u+3]/255,c[u]=c[u]*o,c[u+1]=c[u+1]*o,c[u+2]=c[u+2]*o;return[c,t.width,t.height]}},{key:"rasterizeSimpleLine",value:function(t,e){var i;switch(e){case"butt":i="Butt";break;case"square":i="Square";break;default:i="Round"}var n,r="Butt"===i;switch(t){case"dash":case"esriSLSDash":n=r?[4,3]:[3,4];break;case"dash-dot":case"esriSLSDashDot":n=r?[4,3,1,3]:[3,4,0,4];break;case"dot":case"esriSLSDot":n=r?[1,3]:[0,4];break;case"long-dash":case"esriSLSLongDash":n=r?[8,3]:[7,4];break;case"long-dash-dot":case"esriSLSLongDashDot":n=r?[8,3,1,3]:[7,4,0,4];break;case"long-dash-dot-dot":case"esriSLSDashDotDot":n=r?[8,3,1,3,1,3]:[7,4,0,4,0,4];break;case"short-dash":case"esriSLSShortDash":n=r?[4,1]:[3,2];break;case"short-dash-dot":case"esriSLSShortDashDot":n=r?[4,1,1,1]:[3,2,0,2];break;case"short-dash-dot-dot":case"esriSLSShortDashDotDot":n=r?[4,1,1,1,1,1]:[3,2,0,2,0,2];break;case"short-dot":case"esriSLSShortDot":n=r?[1,1]:[0,2];break;case"solid":case"esriSLSSolid":case"none":j.error("Unexpected: style does not require rasterization"),n=[0,0];break;default:j.error("Tried to rasterize SLS, but found an unexpected style: ".concat(t,"!")),n=[0,0]}return this.rasterizeDash(n,i)}},{key:"rasterizeDash",value:function(t,e){var i,n="Butt"===e,a="Square"===e,s=!n&&!a,o=0,l=Object(r.a)(t);try{for(l.s();!(i=l.n()).done;){o+=i.value}}catch(L){l.e(L)}finally{l.f()}for(var h=15*o,c=31*h,u=new Float32Array(c),f=s?225:15,v=0;v<c;++v)u[v]=f;var m,p=7.5,y=0,_=0,g=!0,d=Object(r.a)(t);try{for(d.s();!(m=d.n()).done;){var b=m.value;y=_,_+=15*b;for(var k=y;k<_;){for(var O=0;O<31;){var x=O*h+k,P=s?(O-15)*(O-15):Math.abs(O-15);u[x]=g?n?Math.max(Math.max(y+p-k,P),Math.max(k-_+p,P)):P:s?Math.min((k-y)*(k-y)+P,(k-_)*(k-_)+P):a?Math.min(Math.max(k-y,P),Math.max(_-k,P)):Math.min(Math.max(k-y+p,P),Math.max(_+p-k,P)),O++}k++}g=!g}}catch(L){d.e(L)}finally{d.f()}for(var M=u.length,C=new Uint8Array(4*M),j=0;j<M;++j){var w=(s?Math.sqrt(u[j]):u[j])/15;Object(S.a)(w,C,4*j)}return[C,h,31]}},{key:"_isHorizontalOrVertical",value:function(t){return"vertical"===t||"horizontal"===t||"cross"===t||"esriSFSCross"===t||"esriSFSVertical"===t||"esriSFSHorizontal"===t}}]),t}(),A=function(){function t(){Object(a.a)(this,t)}return Object(s.a)(t,null,[{key:"findApplicableOverrides",value:function(e,i,n){if(i){if(e.primitiveName){var a,s=!1,o=Object(r.a)(n);try{for(o.s();!(a=o.n()).done;){if(a.value.primitiveName===e.primitiveName){s=!0;break}}}catch(x){o.e(x)}finally{o.f()}if(!s){var l,h=Object(r.a)(i);try{for(h.s();!(l=h.n()).done;){var c=l.value;c.primitiveName===e.primitiveName&&n.push(c)}}catch(x){h.e(x)}finally{h.f()}}}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects){var u,f=Object(r.a)(e.effects);try{for(f.s();!(u=f.n()).done;){var v=u.value;t.findApplicableOverrides(v,i,n)}}catch(x){f.e(x)}finally{f.f()}}if(e.symbolLayers){var m,p=Object(r.a)(e.symbolLayers);try{for(p.s();!(m=p.n()).done;){var y=m.value;t.findApplicableOverrides(y,i,n)}}catch(x){p.e(x)}finally{p.f()}}break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(e.effects){var _,g=Object(r.a)(e.effects);try{for(g.s();!(_=g.n()).done;){var d=_.value;t.findApplicableOverrides(d,i,n)}}catch(x){g.e(x)}finally{g.f()}}if(e.markerPlacement&&t.findApplicableOverrides(e.markerPlacement,i,n),"CIMVectorMarker"===e.type){if(e.markerGraphics){var b,k=Object(r.a)(e.markerGraphics);try{for(k.s();!(b=k.n()).done;){var O=b.value;t.findApplicableOverrides(O,i,n),t.findApplicableOverrides(O.symbol,i,n)}}catch(x){k.e(x)}finally{k.f()}}}else"CIMCharacterMarker"===e.type?t.findApplicableOverrides(e.symbol,i,n):"CIMHatchFill"===e.type&&t.findApplicableOverrides(e.lineSymbol,i,n)}}}},{key:"applyOverrides",value:function(e,i,n,a){if(i){if(e.primitiveName){var s,o=Object(r.a)(i);try{for(o.s();!(s=o.n()).done;){var l=s.value;if(l.primitiveName===e.primitiveName){var h=(v=l.propertyName)?v.charAt(0).toLowerCase()+v.substr(1):v;if(a&&a.push({cim:e,nocapPropertyName:h,value:e[h]}),l.expression&&(l.value=t.toValue(l.propertyName,l.expression)),n){var c,u=!1,f=Object(r.a)(n);try{for(f.s();!(c=f.n()).done;){c.value.primitiveName===e.primitiveName&&(u=!0)}}catch(M){f.e(M)}finally{f.f()}u||n.push(l)}e[h]=l.value}}}catch(M){o.e(M)}finally{o.f()}}var v;switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects){var m,p=Object(r.a)(e.effects);try{for(p.s();!(m=p.n()).done;){var y=m.value;t.applyOverrides(y,i,n,a)}}catch(M){p.e(M)}finally{p.f()}}if(e.symbolLayers){var _,g=Object(r.a)(e.symbolLayers);try{for(g.s();!(_=g.n()).done;){var d=_.value;t.applyOverrides(d,i,n,a)}}catch(M){g.e(M)}finally{g.f()}}break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(e.effects){var b,k=Object(r.a)(e.effects);try{for(k.s();!(b=k.n()).done;){var O=b.value;t.applyOverrides(O,i,n,a)}}catch(M){k.e(M)}finally{k.f()}}if("CIMVectorMarker"===e.type&&e.markerGraphics){var x,P=Object(r.a)(e.markerGraphics);try{for(P.s();!(x=P.n()).done;){var S=x.value;t.applyOverrides(S,i,n,a),t.applyOverrides(S.symbol,i,n,a)}}catch(M){P.e(M)}finally{P.f()}}}}}},{key:"restoreOverrides",value:function(t){var e,i=Object(r.a)(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;n.cim[n.nocapPropertyName]=n.value}}catch(a){i.e(a)}finally{i.f()}}},{key:"buildOverrideKey",value:function(t){var e,i="",n=Object(r.a)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;void 0!==a.value&&(i+="".concat(a.primitiveName).concat(a.propertyName).concat(JSON.stringify(a.value)))}}catch(s){n.e(s)}finally{n.f()}return i}},{key:"toValue",value:function(t,e){if("DashTemplate"===t)return e.split(" ").map((function(t){return Number(t)}));if("Color"===t){var i=new h.a(e).toRgba();return i[3]*=255,i}return e}}]),t}()},979:function(t,e,i){"use strict";i.d(e,"a",(function(){return O})),i.d(e,"b",(function(){return k})),i.d(e,"c",(function(){return h})),i.d(e,"d",(function(){return m})),i.d(e,"e",(function(){return _})),i.d(e,"f",(function(){return d})),i.d(e,"g",(function(){return g})),i.d(e,"h",(function(){return p})),i.d(e,"i",(function(){return y})),i.d(e,"j",(function(){return b}));var n=i(2),r=i(3),a=i(13),s=i(23),o=i(97),l=i(1018);function h(t){var e,i=Object(s.a)(t);return(e=i)&&(Object(o.g)(e)?v(e.rings):Object(o.h)(e)?v(e.paths):Object(o.e)(e)&&f(e.points)),i}function c(t){if(t)for(var e=t.length-1;e>0;--e)t[e][0]-=t[e-1][0],t[e][1]-=t[e-1][1]}function u(t){if(t){var e,i=Object(a.a)(t);try{for(i.s();!(e=i.n()).done;){c(e.value)}}catch(n){i.e(n)}finally{i.f()}}}function f(t){if(t)for(var e=t.length,i=1;i<e;++i)t[i][0]+=t[i-1][0],t[i][1]+=t[i-1][1]}function v(t){if(t){var e,i=Object(a.a)(t);try{for(i.s();!(e=i.n()).done;){f(e.value)}}catch(n){i.e(n)}finally{i.f()}}}function m(t){t&&(Object(o.g)(t)?u(t.rings):Object(o.h)(t)?u(t.paths):Object(o.e)(t)&&c(t.points))}function p(t){if(t){var e,i=Object(a.a)(t);try{for(i.s();!(e=i.n()).done;){y(e.value)}}catch(n){i.e(n)}finally{i.f()}}}function y(t){t&&t.reverse()}function _(t,e,i){return[t[0]+(e[0]-t[0])*i,t[1]+(e[1]-t[1])*i]}function g(t){return!(!t||0===t.length)&&t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]}function d(t){return t[4]}function b(t,e){t[4]=e}var k=function(){function t(e,i,r,a){Object(n.a)(this,t),this.acceptPolygon=i,this.acceptPolyline=r,this.geomUnitsPerPoint=a,this.pathCount=-1,this.pathIndex=-1,this.iteratePath=!1,e&&(Object(o.g)(e)?i&&(this.multiPath=e.rings,this.isClosed=!0):Object(o.h)(e)?r&&(this.multiPath=e.paths,this.isClosed=!1):Object(o.d)(e)&&i&&(this.multiPath=x(e).rings,this.isClosed=!0),this.multiPath&&(this.pathCount=this.multiPath.length)),this.internalPlacement=new l.a}return Object(r.a)(t,[{key:"next",value:function(){if(!this.multiPath)return null;for(;this.iteratePath||this.pathIndex<this.pathCount-1;){this.iteratePath||this.pathIndex++;var t=this.processPath(this.multiPath[this.pathIndex]);if(t)return t}return this.pathCount=-1,this.pathIndex=-1,this.multiPath=null,null}}]),t}(),O=function(){function t(e,i,r,a){Object(n.a)(this,t),this.inputGeometries=e,this.acceptPolygon=i,this.acceptPolyline=r,this.geomUnitsPerPoint=a,this.pathCount=-1,this.pathIndex=-1,this.iteratePath=!1}return Object(r.a)(t,[{key:"next",value:function(){for(;;){if(!this.multiPath){for(var t=this.inputGeometries.next();t;){if(Object(o.g)(t)?this.acceptPolygon&&(this.multiPath=t.rings,this.isClosed=!0):Object(o.h)(t)?this.acceptPolyline&&(this.multiPath=t.paths,this.isClosed=!1):Object(o.d)(t)&&this.acceptPolygon&&(this.multiPath=x(t).rings,this.isClosed=!0),this.multiPath){this.pathCount=this.multiPath.length,this.pathIndex=-1;break}t=this.inputGeometries.next()}if(!this.multiPath)return null}for(;this.iteratePath||this.pathIndex<this.pathCount-1;){this.iteratePath||this.pathIndex++;var e=this.processPath(this.multiPath[this.pathIndex]);if(e)return e}this.pathCount=-1,this.pathIndex=-1,this.multiPath=null}}}]),t}();function x(t){return{rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}}}}]);
//# sourceMappingURL=12.80895f58.chunk.js.map