{"version":3,"sources":["../node_modules/@arcgis/core/views/interactive/snapping/candidates/EdgeSnappingCandidate.js","../node_modules/@arcgis/core/views/interactive/snapping/candidates/VertexSnappingCandidate.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/queryEngineUtils.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/tileUtils.js","../node_modules/@arcgis/core/views/2d/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiles2D.js","../node_modules/@arcgis/core/views/3d/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiles3D.js","../node_modules/@arcgis/core/views/support/TileTreeDebugger.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/WorkerTileTreeDebugger.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceSnappingSourceWorkerHandle.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTilesSimple.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/FeatureServiceSnappingSource.js"],"names":["e","t","constraint","r","coordinateHelper","edgeStart","edgeEnd","this","start","end","n","i","targetPoint","type","fromPoint","target","objectId","o","fromAABoundingRect","extent","s","distance","x","y","create","a","pointOfInterest","tilesCoveringView","view","center","sort","p","scale","layer","minScale","maxScale","ready","featuresTilingScheme","state","tileInfo","scaleEnabled","getTileCoverage","spans","lodInfo","level","row","colFrom","l","colTo","id","col","normalizeCol","updateTileInfo","push","size","handles","add","watch","notifyChange","readOnly","prototype","constructOnly","u","effectivePointOfInterest","map","length","slice","filterTiles","featureTiles","tiles","toArray","c","tilingScheme","toTileInfo","tileSize","pointsOfInterest","focus","location","remove","addClient","filter","Math","abs","measures","screenRect","visibility","lij","b","updating","enablePolygons","enableLabels","_polygons","Map","_labels","_enabled","_symbols","color","outline","width","update","clear","getTiles","Array","Set","keys","forEach","toString","g","d","geometry","has","m","symbol","set","label","loadPriority","_","f","w","j","h","verticalOffset","screenLength","callout","border","symbolLayers","text","halo","material","haloColor","haloSize","get","JSON","stringify","graphics","removeMany","addMany","from","values","setInterval","fetchDebugInfo","clearInterval","destroy","debugInfo","storedTiles","data","featureCount","pendingTiles","fromExtent","spatialReference","handle","getDebugInfo","then","availability","workerHandleUpdating","editId","updatingHandles","workerHandle","scheduler","on","_set","serviceInfoFromLayer","configuration","convertConfiguration","serviceInfo","toJSON","addPromise","invokeMethod","point","toPoint","types","createQuery","invoke","result","edits","addedFeatures","deletedFeatures","updatedFeatures","customParameters","geometryType","url","parsedUrl","path","fields","capabilities","objectIdField","timeInfo","strategy","origin","lods","resolution","tilesOfInterest","layerSource","resourceController","setup","updateTiles","updateTilesParameters","configure","debug","applyEdits","refresh","fetchCandidates","candidates"],"mappings":"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","file":"static/js/136.bbc67c42.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{LineSnappingHint as t}from\"../hints/LineSnappingHint.js\";import{FeatureSnappingCandidate as n}from\"./FeatureSnappingCandidate.js\";import{LineConstraint as r}from\"../SnappingConstraint.js\";class e extends n{constructor(t){super({...t,constraint:new r(t.coordinateHelper,t.edgeStart,t.edgeEnd)})}get hints(){return[new t(1,this.constraint.start,this.constraint.end)]}}export{e as EdgeSnappingCandidate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{PointSnappingHint as t}from\"../hints/PointSnappingHint.js\";import{FeatureSnappingCandidate as n}from\"./FeatureSnappingCandidate.js\";import{PointConstraint as r}from\"../SnappingConstraint.js\";class i extends n{constructor(t){super({...t,constraint:new r(t.coordinateHelper,t.targetPoint)})}get hints(){return[new t(this.targetPoint)]}}export{i as VertexSnappingCandidate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{EdgeSnappingCandidate as e}from\"../candidates/EdgeSnappingCandidate.js\";import{VertexSnappingCandidate as t}from\"../candidates/VertexSnappingCandidate.js\";function r(r,n){switch(r.type){case\"edge\":return new e({coordinateHelper:n,edgeStart:n.fromPoint(r.start),edgeEnd:n.fromPoint(r.end),targetPoint:n.fromPoint(r.target),objectId:r.objectId});case\"vertex\":return new t({coordinateHelper:n,targetPoint:n.fromPoint(r.target),objectId:r.objectId})}}export{r as convertSnappingCandidate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{s as t}from\"../../../../../chunks/vec3.js\";import{a as o}from\"../../../../../chunks/vec4f64.js\";import{boundedPlane as r}from\"../../../../3d/support/geometryUtils.js\";function e(o,e){return r.fromAABoundingRect(e.extent,s),r.distance(s,t(n,o.x,o.y,0))}const s=r.create(),n=o();export{e as distanceToTile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import\"../../../../../../core/has.js\";import{isSome as t,isNone as r}from\"../../../../../../core/maybe.js\";import\"../../../../../../core/Logger.js\";import\"../../../../../../core/accessorSupport/ensureType.js\";import{property as i}from\"../../../../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../../core/urlUtils.js\";import\"../../../../../../core/uuid.js\";import\"../../../../../../portal/support/resourceExtension.js\";import s from\"../../../../../../core/Accessor.js\";import{HandleOwnerMixin as l}from\"../../../../../../core/HandleOwner.js\";import{scaleBoundsPredicate as n}from\"../../../../../support/layerViewUtils.js\";import{distanceToTile as p}from\"../../../../../interactive/snapping/featureSources/featureServiceSource/tileUtils.js\";let a=class extends(l(s)){constructor(e){super(e),this.pointOfInterest=null}get tiles(){const e=this.tilesCoveringView,r=t(this.pointOfInterest)?this.pointOfInterest:this.view.center;return e.sort(((e,t)=>p(r,e)-p(r,t))),e}scaleEnabled(){return n(this.view.scale,this.layer.minScale||0,this.layer.maxScale||0)}get tilesCoveringView(){if(!this.view.ready||!this.view.featuresTilingScheme||!this.view.state||r(this.tileInfo))return[];if(!this.scaleEnabled)return[];const{spans:e,lodInfo:t}=this.view.featuresTilingScheme.getTileCoverage(this.view.state,0),{level:i}=t,o=[];for(const{row:r,colFrom:s,colTo:l}of e)for(let e=s;e<=l;e++){const s={id:null,level:i,row:r,col:t.normalizeCol(e)};this.tileInfo.updateTileInfo(s),o.push(s)}return o}get tileInfo(){var e,t;return null!=(e=null==(t=this.view.featuresTilingScheme)?void 0:t.tileInfo)?e:null}get tileSize(){return t(this.tileInfo)?this.tileInfo.size[0]:256}initialize(){this.handles.add(this.watch(\"view.state.viewpoint\",(()=>this.notifyChange(\"tilesCoveringView\")),!0))}};e([i({readOnly:!0})],a.prototype,\"tiles\",null),e([i({readOnly:!0})],a.prototype,\"scaleEnabled\",null),e([i({readOnly:!0})],a.prototype,\"tilesCoveringView\",null),e([i({readOnly:!0})],a.prototype,\"tileInfo\",null),e([i({readOnly:!0})],a.prototype,\"tileSize\",null),e([i({constructOnly:!0})],a.prototype,\"view\",void 0),e([i({constructOnly:!0})],a.prototype,\"layer\",void 0),e([i()],a.prototype,\"pointOfInterest\",void 0),a=e([o(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiles2D\")],a);export{a as FeatureServiceTiles2D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import\"../../../../../../core/has.js\";import{isSome as t,isNone as r}from\"../../../../../../core/maybe.js\";import\"../../../../../../core/Logger.js\";import\"../../../../../../core/accessorSupport/ensureType.js\";import{property as i}from\"../../../../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../../core/urlUtils.js\";import\"../../../../../../core/uuid.js\";import\"../../../../../../portal/support/resourceExtension.js\";import{init as o}from\"../../../../../../core/watchUtils.js\";import{HandleOwner as l}from\"../../../../../../core/HandleOwner.js\";import{distanceToTile as n}from\"../../../../../interactive/snapping/featureSources/featureServiceSource/tileUtils.js\";let u=class extends l{constructor(e){super(e),this.pointOfInterest=null}get tiles(){const e=this.tilesCoveringView,r=this.effectivePointOfInterest;if(t(r)){const t=e.map((e=>n(r,e)));for(let i=1;i<t.length;i++)if(t[i-1]>t[i])return e.sort(((e,t)=>n(r,e)-n(r,t))),e.slice()}return e}get tilesCoveringView(){var e,t;return this.filterTiles(null==(e=this.view.featureTiles)||null==(t=e.tiles)?void 0:t.toArray()).map(c)}get tileInfo(){var e,t;return null!=(e=null==(t=this.view.featureTiles)?void 0:t.tilingScheme.toTileInfo())?e:null}get tileSize(){var e,t;return null!=(e=null==(t=this.view.featureTiles)?void 0:t.tileSize)?e:256}get effectivePointOfInterest(){var e;const r=this.pointOfInterest;return t(r)?r:null==(e=this.view.pointsOfInterest)?void 0:e.focus.location}initialize(){this.handles.add(o(this.view,\"featureTiles\",(e=>{this.handles.remove(p),e&&this.handles.add(e.addClient(),p)})))}filterTiles(e){if(r(e))return[];return e.filter((e=>Math.abs(e.measures.screenRect[3]-e.measures.screenRect[1])>a&&2===e.measures.visibility))}};function c({lij:[e,t,r],extent:i}){return{id:`${e}/${t}/${r}`,level:e,row:t,col:r,extent:i}}e([i({readOnly:!0})],u.prototype,\"tiles\",null),e([i({readOnly:!0})],u.prototype,\"tilesCoveringView\",null),e([i({readOnly:!0})],u.prototype,\"tileInfo\",null),e([i({readOnly:!0})],u.prototype,\"tileSize\",null),e([i({constructOnly:!0})],u.prototype,\"view\",void 0),e([i()],u.prototype,\"pointOfInterest\",void 0),e([i()],u.prototype,\"effectivePointOfInterest\",null),u=e([s(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiles3D\")],u);const a=50,p=\"feature-tiles\";export{u as FeatureServiceTiles3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as s,isNone as o}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../core/Accessor.js\";import{lerp as l}from\"../../core/mathUtils.js\";import a from\"../../Color.js\";import n from\"../../symbols/TextSymbol3DLayer.js\";import h from\"../../symbols/PointSymbol3D.js\";import p from\"../../symbols/SimpleFillSymbol.js\";import c from\"../../symbols/TextSymbol.js\";import m from\"../../Graphic.js\";const y=[[0,179,255],[117,62,128],[0,104,255],[215,189,166],[32,0,193],[98,162,206],[102,112,129],[52,125,0],[142,118,246],[138,83,0],[92,122,255],[122,55,83],[0,142,255],[81,40,179],[0,200,244],[13,24,127],[0,170,147],[19,58,241],[22,44,35]];let b=class extends i{constructor(e){super(e),this.updating=!1,this.enablePolygons=!0,this.enableLabels=!0,this._polygons=new Map,this._labels=new Map,this._enabled=!0}initialize(){this._symbols=y.map((e=>new p({color:[e[0],e[1],e[2],.6],outline:{color:\"black\",width:1}}))),this.update()}destroy(){this._enabled=!1,this.clear()}get enabled(){return this._enabled}set enabled(e){this._enabled!==e&&(this._enabled=e,this.update())}update(){if(!this._enabled)return void this.clear();const e=e=>{if(s(e.label))return e.label;let o=e.lij.toString();return s(e.loadPriority)&&(o+=` (${e.loadPriority})`),o},t=this.getTiles(),r=new Array,i=new Set((this._labels.size,this._labels.keys()));t.forEach(((p,y)=>{const b=p.lij.toString();i.delete(b);const g=p.lij[0],d=p.geometry;if(this.enablePolygons&&!this._polygons.has(b)){const e=new m({geometry:d,symbol:this._symbols[g%this._symbols.length]});this._polygons.set(b,e),r.push(e)}if(this.enableLabels){const i=e(p),g=y/(t.length-1),u=l(0,200,g),_=l(20,6,g)/.75,f=s(p.loadPriority)&&p.loadPriority>=t.length,w=new a([u,f?0:u,f?0:u]),j=\"3d\"===this.view.type?()=>new h({verticalOffset:{screenLength:40/.75},callout:{type:\"line\",color:\"white\",border:{color:\"black\"}},symbolLayers:[new n({text:i,halo:{color:\"white\",size:1/.75},material:{color:w},size:_})]}):()=>new c({text:i,haloColor:\"white\",haloSize:1/.75,color:w,size:_});if(this._labels.has(b)){const e=this._labels.get(b),s=j();(o(e.symbol)||JSON.stringify(s)!==JSON.stringify(e.symbol))&&(e.symbol=s)}else{const e=new m({geometry:d.extent.center,symbol:j()});this._labels.set(b,e),r.push(e)}}}));const p=new Array;i.forEach((e=>{this._polygons.has(e)&&(p.push(this._polygons.get(e)),this._polygons.delete(e)),this._labels.has(e)&&(p.push(this._labels.get(e)),this._labels.delete(e))})),this.view.graphics.removeMany(p),this.view.graphics.addMany(r)}clear(){this.view.graphics.removeMany(Array.from(this._polygons.values())),this.view.graphics.removeMany(Array.from(this._labels.values())),this._polygons.clear(),this._labels.clear()}};e([t({constructOnly:!0})],b.prototype,\"view\",void 0),e([t({readOnly:!0})],b.prototype,\"updating\",void 0),e([t()],b.prototype,\"enabled\",null),b=e([r(\"esri.views.support.TileTreeDebugger\")],b);export{b as TileTreeDebugger};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{makeHandle as t}from\"../../../../core/handleUtils.js\";import{property as r}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import s from\"../../../../geometry/Polygon.js\";import i from\"../../../../core/Handles.js\";import{toExtent as a}from\"../../../../geometry/support/aaBoundingRect.js\";import{TileTreeDebugger as n}from\"../../../support/TileTreeDebugger.js\";let p=class extends n{constructor(e){super(e),this.handles=new i}initialize(){const e=setInterval((()=>this.fetchDebugInfo()),2e3);this.handles.add(t((()=>clearInterval(e))))}destroy(){this.handles.destroy()}getTiles(){if(!this.debugInfo)return[];const e=new Map,t=new Map;this.debugInfo.storedTiles.forEach((t=>{e.set(t.data.id,t.featureCount)})),this.debugInfo.pendingTiles.forEach((r=>{e.set(r.data.id,r.featureCount),t.set(r.data.id,r.state)}));const r=r=>{var o;const s=t.get(r),i=null!=(o=e.get(r))?o:\"?\";return s?`${s}:${i}\\n${r}`:`store:${i}\\n${r}`},o=new Map;return this.debugInfo.storedTiles.forEach((e=>{o.set(e.data.id,e.data)})),this.debugInfo.pendingTiles.forEach((e=>{o.set(e.data.id,e.data)})),Array.from(o.values()).map((e=>({lij:[e.level,e.row,e.col],geometry:s.fromExtent(a(e.extent,this.view.spatialReference)),label:r(e.id)})))}fetchDebugInfo(){this.handle.getDebugInfo(null).then((e=>{this.debugInfo=e,this.update()}))}};e([r({constructOnly:!0})],p.prototype,\"handle\",void 0),p=e([o(\"esri.views.interactive.snapping.featureSources.WorkerTileTreeDebugger\")],p);export{p as WorkerTileTreeDebugger};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import{isNone as t,isSome as i}from\"../../../../../core/maybe.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../core/urlUtils.js\";import\"../../../../../core/uuid.js\";import\"../../../../../portal/support/resourceExtension.js\";import{whenOrAbort as a}from\"../../../../../core/promiseUtils.js\";import n from\"../../../../../geometry/Point.js\";import{featureGeometryTypeKebabDictionary as s}from\"../../../../../geometry/support/typeUtils.js\";import{HandleOwner as d}from\"../../../../../core/HandleOwner.js\";import{WorkerHandle as l}from\"../../../../../core/workers/WorkerHandle.js\";let p=class extends d{constructor(e){super(e),this.availability=0,this.workerHandleUpdating=!0,this.editId=0}get updating(){return this.updatingHandles.updating||this.workerHandleUpdating}destroy(){this.workerHandle.destroy()}initialize(){this.workerHandle=new u(this.scheduler),this.handles.add([this.workerHandle.on(\"notify-updating\",(({updating:e})=>this.workerHandleUpdating=e)),this.workerHandle.on(\"notify-availability\",(({availability:e})=>this._set(\"availability\",e)))])}async setup(e,i){const r=this.serviceInfoFromLayer(e.layer);if(t(r))return;const o={configuration:this.convertConfiguration(e.configuration),serviceInfo:r,spatialReference:e.spatialReference.toJSON()};await this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"setup\",o,i)),this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"whenNotUpdating\",{},i))}async configure(e,t){const i=this.convertConfiguration(e);await this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"configure\",i,t)),this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"whenNotUpdating\",{},t))}async refresh(e){await this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"refresh\",{},e)),this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"whenNotUpdating\",{},e))}async fetchCandidates(e,t){const r={distance:e.distance,point:e.coordinateHelper.toPoint(e.point,new n).toJSON(),types:e.types,filter:i(e.filter)?e.filter.createQuery().toJSON():null};return this.workerHandle.invoke(r,t)}async updateTiles(e,t){const r={tiles:e.tiles,tileInfo:i(e.tileInfo)?e.tileInfo.toJSON():null,tileSize:e.tileSize};await this.workerHandle.invokeMethod(\"updateTiles\",r,t),this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"whenNotUpdating\",{},t))}async applyEdits(e,t){var i,r,o,n,s,d;const l=this.editId++,p={id:l};await this.workerHandle.invokeMethod(\"beginApplyEdits\",p,t),this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"whenNotUpdating\",{},t));const u=await a(e.result,t),c={id:l,edits:{addedFeatures:null!=(i=null==(r=u.addedFeatures)?void 0:r.map((({objectId:e})=>e)))?i:[],deletedFeatures:null!=(o=null==(n=u.deletedFeatures)?void 0:n.map((({objectId:e})=>e)))?o:[],updatedFeatures:null!=(s=null==(d=u.updatedFeatures)?void 0:d.map((({objectId:e})=>e)))?s:[]}};await this.workerHandle.invokeMethod(\"endApplyEdits\",c,t),this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"whenNotUpdating\",{},t))}getDebugInfo(e){return this.workerHandle.invokeMethod(\"getDebugInfo\",{},e)}convertConfiguration(e){return{filter:i(e.filter)?e.filter.toJSON():null,customParameters:e.customParameters}}serviceInfoFromLayer(e){var t;return\"multipatch\"===e.geometryType||\"mesh\"===e.geometryType?null:{url:e.parsedUrl.path,fields:e.fields.map((e=>e.toJSON())),geometryType:s.toJSON(e.geometryType),capabilities:e.capabilities,objectIdField:e.objectIdField,spatialReference:e.spatialReference.toJSON(),timeInfo:null==(t=e.timeInfo)?void 0:t.toJSON()}}};e([r({constructOnly:!0})],p.prototype,\"scheduler\",void 0),e([r({readOnly:!0})],p.prototype,\"updating\",null),e([r({readOnly:!0})],p.prototype,\"availability\",void 0),e([r()],p.prototype,\"workerHandleUpdating\",void 0),p=e([o(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorkerHandle\")],p);class u extends l{constructor(e){super(\"FeatureServiceSnappingSourceWorker\",\"fetchCandidates\",e,{strategy:\"dedicated\"})}getTransferList(){return[]}}export{p as FeatureServiceSnappingSourceWorkerHandle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../core/urlUtils.js\";import\"../../../../../core/uuid.js\";import\"../../../../../portal/support/resourceExtension.js\";import t from\"../../../../../core/Accessor.js\";import s from\"../../../../../geometry/Point.js\";import{fromValues as i}from\"../../../../../geometry/support/aaBoundingRect.js\";import p from\"../../../../../layers/support/LOD.js\";import l from\"../../../../../layers/support/TileInfo.js\";let n=class extends t{constructor(e){super(e),this.pointOfInterest=null}get tiles(){return[{id:\"0/0/0\",level:0,row:0,col:0,extent:i(-1e8,-1e8,1e8,1e8)}]}get tileInfo(){return new l({origin:new s({x:-1e8,y:1e8,spatialReference:this.layer.spatialReference}),size:[512,512],lods:[new p({level:0,scale:1,resolution:390625})],spatialReference:this.layer.spatialReference})}get tileSize(){return this.tileInfo.size[0]}};e([r({readOnly:!0})],n.prototype,\"tiles\",null),e([r({readOnly:!0})],n.prototype,\"tileInfo\",null),e([r({readOnly:!0})],n.prototype,\"tileSize\",null),e([r({constructOnly:!0})],n.prototype,\"layer\",void 0),e([r()],n.prototype,\"pointOfInterest\",void 0),n=e([o(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTilesSimple\")],n);export{n as FeatureServiceTilesSimple};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import{isSome as r}from\"../../../../core/maybe.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{destroyHandle as t}from\"../../../../core/handleUtils.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import{reaction as o}from\"../../../../core/accessorSupport/trackingUtils.js\";import a from\"../../../../core/Accessor.js\";import n from\"../../../../geometry/Point.js\";import{init as l}from\"../../../../core/watchUtils.js\";import u from\"../../../support/debugFlags.js\";import{HandleOwnerMixin as p}from\"../../../../core/HandleOwner.js\";import{convertSnappingCandidate as c}from\"./queryEngineUtils.js\";import{FeatureServiceTiles2D as d}from\"../../../2d/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiles2D.js\";import{FeatureServiceTiles3D as h}from\"../../../3d/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiles3D.js\";import{WorkerTileTreeDebugger as f}from\"./WorkerTileTreeDebugger.js\";import{FeatureServiceSnappingSourceWorkerHandle as m}from\"./featureServiceSource/FeatureServiceSnappingSourceWorkerHandle.js\";import{FeatureServiceTilesSimple as y}from\"./featureServiceSource/FeatureServiceTilesSimple.js\";let g=class extends(p(a)){constructor(e){super(e)}get updateTilesParameters(){return{tiles:this.tilesOfInterest.tiles,tileInfo:this.tilesOfInterest.tileInfo,tileSize:this.tilesOfInterest.tileSize}}get updating(){return this.workerHandle.updating||this.updatingHandles.updating}get configuration(){return{filter:this.layer.createQuery(),customParameters:this.layer.customParameters}}get availability(){return this.workerHandle.availability}get layer(){return this.layerSource.layer}initialize(){if(r(this.view))switch(this.view.type){case\"2d\":this.tilesOfInterest=new d({view:this.view,layer:this.layer});break;case\"3d\":this.tilesOfInterest=new h({view:this.view})}else this.tilesOfInterest=new y({layer:this.layer});if(this.workerHandle=new m({scheduler:r(this.view)&&\"3d\"===this.view.type?this.view.resourceController.scheduler:null}),this.handles.add([t(this.workerHandle)]),this.workerHandle.setup({layer:this.layer,spatialReference:this.spatialReference,configuration:this.configuration},null),this.updatingHandles.add(this,\"updateTilesParameters\",(()=>this.workerHandle.updateTiles(this.updateTilesParameters,null)),2),this.handles.add([o((()=>this.configuration),(e=>this.workerHandle.configure(e,null)))]),r(this.view)){const e=this.view;this.handles.add(l(u,\"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES\",(r=>{r&&!this.debug?(this.debug=new f({view:e,handle:this.workerHandle}),this.handles.add(t(this.debug),\"debug\")):!r&&this.debug&&this.handles.remove(\"debug\")})))}this.handles.add(this.layerSource.layer.on(\"apply-edits\",(e=>{this.workerHandle.applyEdits(e,null)})))}refresh(){this.workerHandle.refresh(null)}async fetchCandidates(e,r){this.tilesOfInterest.pointOfInterest=e.coordinateHelper.toPoint(e.point,new n);const{candidates:t}=await this.workerHandle.fetchCandidates({...e,filter:null},r);return{candidates:t.map((r=>c(r,e.coordinateHelper)))}}getDebugInfo(e){return this.workerHandle.getDebugInfo(e)}};e([i({constructOnly:!0})],g.prototype,\"spatialReference\",void 0),e([i({constructOnly:!0})],g.prototype,\"layerSource\",void 0),e([i({constructOnly:!0})],g.prototype,\"view\",void 0),e([i()],g.prototype,\"tilesOfInterest\",void 0),e([i({readOnly:!0})],g.prototype,\"updateTilesParameters\",null),e([i({readOnly:!0})],g.prototype,\"updating\",null),e([i({readOnly:!0})],g.prototype,\"configuration\",null),e([i({readOnly:!0})],g.prototype,\"availability\",null),g=e([s(\"esri.views.interactive.snapping.featureSources.FeatureServiceSnappingSource\")],g);export{g as FeatureServiceSnappingSource};\n"],"sourceRoot":""}