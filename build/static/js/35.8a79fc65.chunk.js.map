{"version":3,"sources":["../node_modules/@arcgis/core/views/interactive/GraphicManipulator.js","../node_modules/@arcgis/core/views/draw/support/input/GraphicMoverEvents.js","../node_modules/@arcgis/core/views/draw/support/GraphicMover.js","../node_modules/@arcgis/core/views/draw/support/settings.js","../node_modules/@arcgis/core/geometry/support/rotate.js","../node_modules/@arcgis/core/views/draw/support/Box.js"],"names":["j","s","getLogger","C","e","layer","interactive","selectable","grabbable","dragging","cursor","events","n","EventEmitter","_circleCollisionCache","_graphicSymbolChangedHandle","_originalSymbol","t","geometry","this","symbol","_set","attachSymbolChanged","error","graphic","elevationInfo","v","i","offset","b","mode","_get","_updateGraphicSymbol","emit","action","detachSymbolChanged","_resetGraphicSymbol","visible","r","l","o","view","type","_intersectDistance2D","_intersectDistance3D","add","remove","watch","focusedSymbol","_focused","f","S","originalPoint","equals","spatialReference","g","y","clone","mapPoint","radiusPx","c","size","h","G","toScreen","a","x","xoffset","yoffset","_","toMap","include","d","w","renderSpatialReference","u","state","camera","eye","constructOnly","nonNullable","prototype","readOnly","dependsOn","value","m","p","index","viewEvent","allGraphics","dx","dy","totalDx","totalDy","defaultPrevented","k","_activeGraphic","_dragEvent","_handles","_hoverGraphic","_initialDragGeometry","_viewHandles","_manipulators","callbacks","onGraphicClick","onGraphicDoubleClick","onGraphicMoveStart","onGraphicMove","onGraphicMoveStop","onGraphicPointerOver","onGraphicPointerOut","onGraphicPointerDown","onGraphicPointerUp","enableMoveAllGraphics","graphics","_setUpManipulators","on","_clickHandler","TOOL","_doubleClickHandler","_pointerDownHandler","_pointerMoveHandler","_pointerUpHandler","_dragHandler","_keyDownHandler","reset","forEach","destroy","removeAll","get","set","_findTargetGraphic","indexOf","stopPropagation","origin","key","Number","MAX_VALUE","intersectionDistance","length","map","EventedAccessor","main","selected","outline","selectedOutline","hoverOutline","secondary","secondaryOutline","transparent","hoverSize","color","hoverColor","outlineColor","hoverOutlineColor","stagedColor","stagedOutlineColor","vertex","midpoint","center","fill","line","reshapeGraphics","transformGraphics","slice","push","Math","PI","cos","sin","rings","xmin","ymin","ymax","xmax","extent","paths","reverse","z","points","R","mover","M","I","angle","E","O","xScale","yScale","L","B","Y","centerIndicator","style","default","join","width","active","handles","hover","rotator","rotatorLine","N","_activeHandleGraphic","_graphicAttributes","esriSketchTool","_mover","_rotateGraphicOffset","_angleOfRotation","_rotateLineGraphic","_startInfo","_totalDx","_totalDy","_xScale","_yScale","onMoveStart","onMove","onMoveStop","onScaleStart","onScale","onScaleStop","onRotateStart","onRotate","onRotateStop","centerGraphic","backgroundGraphic","enableMovement","enableRotation","enableScaling","handleGraphics","preserveAspectRatio","rotateGraphic","showCenterGraphic","_getBounds","POSITIVE_INFINITY","NEGATIVE_INFINITY","min","max","_setup","_scaleGraphic","_updateGraphics","_updateRotateGraphic","_updateRotateLineGraphic","refresh","_resetGraphics","_reset","concat","includes","_emitMoveStopEvent","_emitScaleStopEvent","_emitRotateStopEvent","_setupGraphics","_setupMover","_resetGraphicStateVars","removeMany","_onGraphicClickCallback","_onGraphicMoveStartCallback","_onGraphicMoveCallback","_onGraphicMoveStopCallback","_onGraphicPointerOverCallback","_onGraphicPointerOutCallback","_getBoxBounds","abs","height","centerX","centerY","startX","startY","graphicInfos","_getGraphicInfos","box","rotate","_getGraphicInfo","symbols","_hideGraphicsBeforeUpdate","_getStartInfo","_emitRotateStartEvent","_emitScaleStartEvent","_emitMoveStartEvent","_emitScaleEvent","_rotateGraphic","_emitRotateEvent","_moveGraphic","_emitMoveEvent","_showGraphicsAfterUpdate","rotation","resolution","transform","_updateX","_updateY","_updateBackgroundGraphic","_hasExtentGraphic","addMany","_updateHandleGraphics","_updateCenterGraphic","_getCoordinates","_updateXY","some","A"],"mappings":"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","file":"static/js/35.8a79fc65.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{get as t,isSome as i,isNone as o}from\"../../core/maybe.js\";import s from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as l}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import a from\"../../core/Accessor.js\";import n from\"../../core/Evented.js\";import{pt2px as c,screenPointObjectToArray as h,createScreenPointArray as p}from\"../../core/screenUtils.js\";import{c as m}from\"../../chunks/vec3f64.js\";import{k as u}from\"../../chunks/vec3.js\";import{canProjectWithoutEngine as g,project as y,projectPointToVector as d}from\"../../geometry/projection.js\";import b from\"../../symbols/support/ElevationInfo.js\";import{getDefaultSymbol2D as f}from\"../../symbols/support/defaults.js\";import{j as _}from\"../../chunks/vec2.js\";import{getGraphicEffectiveElevationMode as v}from\"../../support/elevationInfoUtils.js\";import{intersectsDrapedGeometry as S}from\"../support/drapedUtils.js\";const j=s.getLogger(\"esri.views.interactive.GraphicManipulator\");let C=class extends a{constructor(e){super(e),this.layer=null,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.dragging=!1,this.cursor=null,this.events=new n.EventEmitter,this._circleCollisionCache=null,this._graphicSymbolChangedHandle=null,this._originalSymbol=null}set graphic(e){\"mesh\"!==t(e.geometry,\"type\")?(this._circleCollisionCache=null,this._originalSymbol=e.symbol,this._set(\"graphic\",e),this.attachSymbolChanged()):j.error(\"Mesh geometries are not supported\")}get elevationInfo(){const e=\"elevationInfo\"in this.graphic.layer&&this.graphic.layer.elevationInfo,t=v(this.graphic),i=e?e.offset:0;return new b({mode:t,offset:i})}set focusedSymbol(e){e!==this._get(\"focusedSymbol\")&&(this._set(\"focusedSymbol\",e),this._updateGraphicSymbol(),this._circleCollisionCache=null)}grabbableForEvent(){return!0}set grabbing(e){e!==this._get(\"grabbing\")&&(this._set(\"grabbing\",e),this._updateGraphicSymbol())}set hovering(e){e!==this._get(\"hovering\")&&(this._set(\"hovering\",e),this._updateGraphicSymbol())}set selected(e){e!==this._get(\"selected\")&&(this._set(\"selected\",e),this._updateGraphicSymbol(),this.events.emit(\"select-changed\",{action:e?\"select\":\"deselect\"}))}get _focused(){return this._get(\"hovering\")||this._get(\"grabbing\")}destroy(){this.detachSymbolChanged(),this._resetGraphicSymbol(),this._set(\"view\",null)}intersectionDistance(e){const t=this._get(\"graphic\");if(!1===t.visible)return null;const s=this._get(\"focusedSymbol\"),r=i(s)?s:t.symbol,l=t.geometry;return o(l)?null:\"2d\"===this.view.type?this._intersectDistance2D(this.view,e,l,r):this._intersectDistance3D(this.view,e,t)}attach(){this.attachSymbolChanged(),i(this.layer)&&this.layer.add(this.graphic)}detach(){this.detachSymbolChanged(),this._resetGraphicSymbol(),i(this.layer)&&this.layer.remove(this.graphic)}attachSymbolChanged(){this.detachSymbolChanged(),this._graphicSymbolChangedHandle=this.graphic.watch(\"symbol\",(e=>{i(e)&&e!==this.focusedSymbol&&e!==this._originalSymbol&&(this._originalSymbol=e,this._focused&&i(this.focusedSymbol)&&(this.graphic.symbol=this.focusedSymbol))}),!0)}detachSymbolChanged(){i(this._graphicSymbolChangedHandle)&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)}_updateGraphicSymbol(){this.graphic.symbol=this._focused&&i(this.focusedSymbol)?this.focusedSymbol:this._originalSymbol}_resetGraphicSymbol(){this.graphic.symbol=this._originalSymbol}_intersectDistance2D(e,t,s,r){if(r=r||f(s),o(r))return null;let l=this._circleCollisionCache;if(\"point\"!==s.type||\"simple-marker\"!==r.type)return S(t,s,e)?1:null;if(o(l)||!l.originalPoint.equals(s)){const t=s,i=e.spatialReference;if(g(t.spatialReference,i)){const e=y(t,i);l={originalPoint:t.clone(),mapPoint:e,radiusPx:c(r.size)},this._circleCollisionCache=l}}if(i(l)){const i=h(t,G),o=e.toScreen(l.mapPoint),s=l.radiusPx,a=o.x+c(r.xoffset),n=o.y-c(r.yoffset);return _(i,[a,n])<s*s?1:null}return null}_intersectDistance3D(e,t,i){const o=e.toMap(t,{include:[i]});return o&&d(o,w,e.renderSpatialReference)?u(w,e.state.camera.eye):null}};e([r({constructOnly:!0,nonNullable:!0})],C.prototype,\"graphic\",null),e([r({readOnly:!0,dependsOn:[\"graphic\"]})],C.prototype,\"elevationInfo\",null),e([r({constructOnly:!0,nonNullable:!0})],C.prototype,\"view\",void 0),e([r({value:null})],C.prototype,\"focusedSymbol\",null),e([r({constructOnly:!0})],C.prototype,\"layer\",void 0),e([r()],C.prototype,\"interactive\",void 0),e([r()],C.prototype,\"selectable\",void 0),e([r()],C.prototype,\"grabbable\",void 0),e([r({value:!1})],C.prototype,\"grabbing\",null),e([r()],C.prototype,\"dragging\",void 0),e([r()],C.prototype,\"hovering\",null),e([r({value:!1})],C.prototype,\"selected\",null),e([r()],C.prototype,\"cursor\",void 0),C=e([l(\"esri.views.interactive.GraphicManipulator\")],C);const w=m(),G=p();export{C as GraphicManipulator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass t{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-click\"}}class i{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-double-click\"}}class s{constructor(t,i,s,h,e,r,c,a,n,p){this.graphic=t,this.allGraphics=i,this.index=s,this.x=h,this.y=e,this.dx=r,this.dy=c,this.totalDx=a,this.totalDy=n,this.viewEvent=p,this.defaultPrevented=!1,this.type=\"graphic-move-start\"}preventDefault(){this.defaultPrevented=!0}}class h{constructor(t,i,s,h,e,r,c,a,n,p){this.graphic=t,this.allGraphics=i,this.index=s,this.x=h,this.y=e,this.dx=r,this.dy=c,this.totalDx=a,this.totalDy=n,this.viewEvent=p,this.defaultPrevented=!1,this.type=\"graphic-move\"}preventDefault(){this.defaultPrevented=!0}}class e{constructor(t,i,s,h,e,r,c,a,n,p){this.graphic=t,this.allGraphics=i,this.index=s,this.x=h,this.y=e,this.dx=r,this.dy=c,this.totalDx=a,this.totalDy=n,this.viewEvent=p,this.defaultPrevented=!1,this.type=\"graphic-move-stop\"}preventDefault(){this.defaultPrevented=!0}}class r{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-over\"}}class c{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-out\"}}class a{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-down\"}}class n{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-up\"}}export{t as GraphicClickEvent,i as GraphicDoubleClickEvent,h as GraphicMoveEvent,s as GraphicMoveStartEvent,e as GraphicMoveStopEvent,a as GraphicPointerDownEvent,c as GraphicPointerOutEvent,r as GraphicPointerOverEvent,n as GraphicPointerUpEvent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{clone as t}from\"../../../core/lang.js\";import{isSome as e}from\"../../../core/maybe.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import a from\"../../../core/Evented.js\";import o from\"../../../core/Handles.js\";import{watch as h,whenOnce as c}from\"../../../core/watchUtils.js\";import{ViewEventPriorities as n}from\"../../input/InputManager.js\";import{createScreenPointFromEvent as p}from\"../../support/screenUtils.js\";import{cloneMove as l}from\"./drawUtils.js\";import{GraphicManipulator as v}from\"../../interactive/GraphicManipulator.js\";import{GraphicClickEvent as d,GraphicDoubleClickEvent as g,GraphicPointerDownEvent as _,GraphicPointerUpEvent as G,GraphicPointerOutEvent as m,GraphicMoveStartEvent as u,GraphicMoveEvent as y,GraphicMoveStopEvent as f,GraphicPointerOverEvent as w}from\"./input/GraphicMoverEvents.js\";let k=class extends a.EventedAccessor{constructor(i){super(i),this._activeGraphic=null,this._dragEvent=null,this._handles=new o,this._hoverGraphic=null,this._initialDragGeometry=null,this._viewHandles=new o,this._manipulators=[],this.type=\"graphic-mover\",this.callbacks={onGraphicClick(){},onGraphicDoubleClick(){},onGraphicMoveStart(){},onGraphicMove(){},onGraphicMoveStop(){},onGraphicPointerOver(){},onGraphicPointerOut(){},onGraphicPointerDown(){},onGraphicPointerUp(){}},this.enableMoveAllGraphics=!1,this.graphics=[],this.view=null}initialize(){this._setUpManipulators(),this._handles.add([h(this,[\"graphics\",\"graphics.length\"],(()=>{this._setUpManipulators()})),c(this,\"view.ready\",(()=>{this._viewHandles.add([this.view.on(\"immediate-click\",(i=>this._clickHandler(i)),n.TOOL),this.view.on(\"double-click\",(i=>this._doubleClickHandler(i)),n.TOOL),this.view.on(\"pointer-down\",(i=>this._pointerDownHandler(i)),n.TOOL),this.view.on(\"pointer-move\",(i=>this._pointerMoveHandler(i)),n.TOOL),this.view.on(\"pointer-up\",(i=>this._pointerUpHandler(i)),n.TOOL),this.view.on(\"drag\",(i=>this._dragHandler(i)),n.TOOL),this.view.on(\"key-down\",(i=>this._keyDownHandler(i)),n.TOOL)])}))])}destroy(){this.reset(),this._manipulators.forEach((i=>i.destroy())),this._manipulators=null,this._viewHandles.removeAll(),this._handles.removeAll()}get state(){const i=!!this.get(\"view.ready\"),t=!!this.get(\"graphics.length\"),e=this._activeGraphic;return i&&t?e?\"moving\":\"active\":i?\"ready\":\"disabled\"}reset(){this._activeGraphic=null,this._hoverGraphic=null,this._dragEvent=null}updateGeometry(i,t){const e=this.graphics[i];e&&e.set(\"geometry\",t)}_clickHandler(i){const t=this._findTargetGraphic(p(i));if(t){const e=new d(t,this.graphics.indexOf(t),i.x,i.y,i);this.emit(\"graphic-click\",e),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(e)}}_doubleClickHandler(i){const t=this._findTargetGraphic(p(i));if(t){const e=new g(t,this.graphics.indexOf(t),i.x,i.y,i);this.emit(\"graphic-double-click\",e),this.callbacks.onGraphicDoubleClick&&this.callbacks.onGraphicDoubleClick(e)}}_pointerDownHandler(i){const t=this._findTargetGraphic(p(i));if(t){this._activeGraphic=t;const{x:e,y:r}=i,s=new _(t,this.graphics.indexOf(t),e,r,i);this.emit(\"graphic-pointer-down\",s),this.callbacks.onGraphicPointerDown&&this.callbacks.onGraphicPointerDown(s)}else this._activeGraphic=null}_pointerUpHandler(i){if(this._activeGraphic){const{x:t,y:e}=i,r=this.graphics.indexOf(this._activeGraphic),s=new G(this._activeGraphic,r,t,e,i);this.emit(\"graphic-pointer-up\",s),this.callbacks.onGraphicPointerUp&&this.callbacks.onGraphicPointerUp(s)}}_pointerMoveHandler(i){if(this._dragEvent)return;const t=this._findTargetGraphic(p(i));if(t){const{x:e,y:r}=i;if(this._hoverGraphic){if(this._hoverGraphic===t)return;const s=this.graphics.indexOf(this._hoverGraphic),a=new m(this.graphics[s],s,e,r,i);this._hoverGraphic=null,this.emit(\"graphic-pointer-out\",a),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(a)}const s=this.graphics.indexOf(t),a=new w(t,s,e,r,i);return this._hoverGraphic=t,this.emit(\"graphic-pointer-over\",a),void(this.callbacks.onGraphicPointerOver&&this.callbacks.onGraphicPointerOver(a))}if(this._hoverGraphic){const{x:t,y:e}=i,r=this.graphics.indexOf(this._hoverGraphic),s=new m(this.graphics[r],r,t,e,i);this._hoverGraphic=null,this.emit(\"graphic-pointer-out\",s),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(s)}}_dragHandler(i){if(\"start\"!==i.action&&!this._dragEvent||!this._activeGraphic||!this._activeGraphic.geometry)return;i.stopPropagation();const{action:e,x:r,y:s}=i,a=this.graphics.indexOf(this._activeGraphic),o=this._activeGraphic.geometry,h=this._dragEvent?r-this._dragEvent.x:0,c=this._dragEvent?s-this._dragEvent.y:0,n=r-i.origin.x,p=s-i.origin.y;if(this._activeGraphic.geometry=l(o,h,c,this.view),this.enableMoveAllGraphics&&this.graphics.forEach((i=>{i!==this._activeGraphic&&(i.geometry=l(i.geometry,h,c,this.view))})),this._dragEvent=i,\"start\"===e){this._initialDragGeometry=t(o);const e=new u(this._activeGraphic,this.graphics,a,r,s,h,c,n,p,i);this.emit(\"graphic-move-start\",e),this.callbacks.onGraphicMoveStart&&this.callbacks.onGraphicMoveStart(e),e.defaultPrevented&&this._activeGraphic.set(\"geometry\",o)}else if(\"update\"===e){const t=new y(this._activeGraphic,this.graphics,a,r,s,h,c,n,p,i);this.emit(\"graphic-move\",t),this.callbacks.onGraphicMove&&this.callbacks.onGraphicMove(t),t.defaultPrevented&&this._activeGraphic.set(\"geometry\",o)}else{const t=new f(this._activeGraphic,this.graphics,a,r,s,h,c,n,p,i);this._dragEvent=null,this._activeGraphic=null,this.emit(\"graphic-move-stop\",t),this.callbacks.onGraphicMoveStop&&this.callbacks.onGraphicMoveStop(t),t.defaultPrevented&&this.graphics[a].set(\"geometry\",this._initialDragGeometry),this._initialDragGeometry=null}}_keyDownHandler(i){\"a\"!==i.key&&\"d\"!==i.key&&\"n\"!==i.key||\"moving\"!==this.state||i.stopPropagation()}_findTargetGraphic(i){let t=null,r=Number.MAX_VALUE;return this._manipulators.forEach((s=>{const a=s.intersectionDistance(i);e(a)&&a<r&&(r=a,t=s.graphic)})),t}_setUpManipulators(){const{graphics:i,view:t}=this;this._manipulators.forEach((i=>i.destroy())),this._manipulators=null!=i&&i.length?i.map((i=>new v({graphic:i,view:t}))):[]}};i([r()],k.prototype,\"_activeGraphic\",void 0),i([r({readOnly:!0})],k.prototype,\"type\",void 0),i([r()],k.prototype,\"callbacks\",void 0),i([r()],k.prototype,\"enableMoveAllGraphics\",void 0),i([r()],k.prototype,\"graphics\",void 0),i([r({dependsOn:[\"view.ready\",\"graphics.length\",\"_activeGraphic\"],readOnly:!0})],k.prototype,\"state\",null),i([r()],k.prototype,\"view\",void 0),k=i([s(\"esri.views.draw.support.GraphicMover\")],k);var b=k;export default b;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../../Color.js\";const o={main:new e([255,127,0]),selected:new e([255,255,255]),outline:new e([0,0,0,.5]),selectedOutline:new e([255,255,255]),hoverOutline:new e([255,255,255]),secondary:new e([255,255,255]),secondaryOutline:new e([100,100,100]),transparent:new e([0,0,0,0])};function t(e,o){if(o)for(const t in o)e[t]=o[t]}class s{constructor(e){this.size=8,this.hoverSize=10,this.color=o.main,this.hoverColor=o.main,this.outlineColor=o.outline,this.hoverOutlineColor=o.hoverOutline,t(this,e)}}class n{constructor(e){this.color=o.secondary,this.hoverColor=o.main,t(this,e)}}class r{constructor(e){this.color=o.transparent,this.hoverColor=o.transparent,this.outlineColor=o.main,this.hoverOutlineColor=o.main,this.stagedColor=o.transparent,this.stagedOutlineColor=o.secondary,t(this,e)}}class i{constructor(e){this.vertex=new s,this.midpoint=new s({color:o.secondary,outlineColor:o.secondaryOutline,size:6}),this.selected=new s({color:o.selected,hoverColor:o.selected,hoverOutlineColor:o.hoverOutline}),t(this,e)}}class l{constructor(e){this.center=new s({color:o.secondaryOutline}),this.fill=new r,this.line=new n,this.vertex=new s({color:o.selected,outlineColor:o.main,hoverColor:o.selected,hoverOutlineColor:o.secondaryOutline}),t(this,e)}}const c=new class{constructor(e){this.reshapeGraphics=new i,this.transformGraphics=new l,t(this,e)}};export{o as colors,c as settings};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport n from\"../Point.js\";import e from\"../Multipoint.js\";import t from\"../Polygon.js\";import r from\"../Polyline.js\";import\"../../geometry.js\";function i(n){let e=0,t=0;const r=n.length;let i,o=n[t];for(t=0;t<r-1;t++)i=n[t+1],e+=(i[0]-o[0])*(i[1]+o[1]),o=i;return e>=0}function o(n,e,t,r){const i=[];for(const o of n){const n=o.slice(0);i.push(n);const s=e*(o[0]-r.x)-t*(o[1]-r.y)+r.x,l=t*(o[0]-r.x)+e*(o[1]-r.y)+r.y;n[0]=s,n[1]=l}return i}function s(s,l,a){const c=s.spatialReference,f=l*Math.PI/180,m=Math.cos(f),x=Math.sin(f);var p,u;\"xmin\"in s&&(a=null!=(p=a)?p:s.center,s=new t({spatialReference:c,rings:[[[s.xmin,s.ymin],[s.xmin,s.ymax],[s.xmax,s.ymax],[s.xmax,s.ymin],[s.xmin,s.ymin]]]}));if(\"paths\"in s){var y;a=null!=(y=a)?y:s.extent.center;const n=[];for(const e of s.paths)n.push(o(e,m,x,a));return new r({spatialReference:c,paths:n})}if(\"rings\"in s){var h;a=null!=(h=a)?h:s.extent.center;const n=[];for(const e of s.rings){const t=i(e),r=o(e,m,x,a);i(r)!==t&&r.reverse(),n.push(r)}return new t({spatialReference:c,rings:n})}if(\"x\"in s){var g;a=null!=(g=a)?g:s;const e=new n({x:m*(s.x-a.x)-x*(s.y-a.y)+a.x,y:x*(s.x-a.x)+m*(s.y-a.y)+a.y,spatialReference:c});return null!=s.z&&(e.z=s.z),null!=s.m&&(e.m=s.m),e}return\"points\"in s?(a=null!=(u=a)?u:s.extent.center,new e({points:o(s.points,m,x,a),spatialReference:c})):null}export default s;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{isSome as e}from\"../../../core/maybe.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import r from\"../../../geometry/Point.js\";import{geometryToCoordinates as a}from\"../../../geometry/support/coordsUtils.js\";import{getRingsOrPathsBounds as o}from\"../../../geometry/support/boundsUtils.js\";import h from\"../../../geometry/Polygon.js\";import c from\"../../../geometry/Polyline.js\";import\"../../../geometry.js\";import n from\"../../../core/Evented.js\";import l from\"../../../symbols/SimpleLineSymbol.js\";import p from\"../../../symbols/SimpleFillSymbol.js\";import d from\"../../../symbols/SimpleMarkerSymbol.js\";import m from\"../../../Graphic.js\";import u from\"../../../core/Handles.js\";import{whenOnce as g,pausable as _}from\"../../../core/watchUtils.js\";import{create as v}from\"../../../geometry/support/aaBoundingRect.js\";import{cloneMove as G,scale as y,getScaleRatio as f,getRotationAngle as b}from\"./drawUtils.js\";import{addUniqueLayer as S}from\"./layerUtils.js\";import w from\"../../../geometry/support/rotate.js\";import k from\"./GraphicMover.js\";import{settings as x}from\"./settings.js\";class R{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.dx=i,this.dy=s,this.type=\"move-start\"}}class M{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.dx=i,this.dy=s,this.type=\"move\"}}class I{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.dx=i,this.dy=s,this.type=\"move-stop\"}}class C{constructor(t,e,i){this.graphics=t,this.mover=e,this.angle=i,this.type=\"rotate-start\"}}class E{constructor(t,e,i){this.graphics=t,this.mover=e,this.angle=i,this.type=\"rotate\"}}class O{constructor(t,e,i){this.graphics=t,this.mover=e,this.angle=i,this.type=\"rotate-stop\"}}class j{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.xScale=i,this.yScale=s,this.type=\"scale-start\"}}class L{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.xScale=i,this.yScale=s,this.type=\"scale\"}}class z{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.xScale=i,this.yScale=s,this.type=\"scale-stop\"}}const B=x.transformGraphics,Y={centerIndicator:new d({style:\"cross\",size:B.center.size,color:B.center.color}),fill:{default:new p({color:B.fill.color,outline:{color:B.fill.outlineColor,join:\"round\",width:1}}),active:new p({color:B.fill.stagedColor,outline:{color:B.fill.outlineColor,join:\"round\",style:\"dash\",width:1}})},handles:{default:new d({style:\"square\",size:B.vertex.size,color:B.vertex.color,outline:{color:B.vertex.outlineColor,width:1}}),hover:new d({style:\"square\",size:B.vertex.hoverSize,color:B.vertex.hoverColor,outline:{color:B.vertex.hoverOutlineColor,width:1}})},rotator:{default:new d({style:\"circle\",size:B.vertex.size,color:B.vertex.color,outline:{color:B.vertex.outlineColor,width:1}}),hover:new d({style:\"circle\",size:B.vertex.hoverSize,color:B.vertex.hoverColor,outline:{color:B.vertex.hoverOutlineColor,width:1}})},rotatorLine:new l({color:B.line.color,width:1})};let N=class extends n.EventedAccessor{constructor(t){super(t),this._activeHandleGraphic=null,this._graphicAttributes={esriSketchTool:\"box\"},this._handles=new u,this._mover=null,this._rotateGraphicOffset=20,this._angleOfRotation=0,this._rotateLineGraphic=null,this._startInfo=null,this._totalDx=0,this._totalDy=0,this._xScale=1,this._yScale=1,this.type=\"box\",this.callbacks={onMoveStart(){},onMove(){},onMoveStop(){},onScaleStart(){},onScale(){},onScaleStop(){},onRotateStart(){},onRotate(){},onRotateStop(){},onGraphicClick(){}},this.centerGraphic=null,this.backgroundGraphic=null,this.enableMovement=!0,this.enableRotation=!0,this.enableScaling=!0,this.graphics=[],this.handleGraphics=[],this.layer=null,this.preserveAspectRatio=!1,this.rotateGraphic=null,this.showCenterGraphic=!0,this.view=null,this._getBounds=(()=>{const t=v();return(e,i)=>{e[0]=Number.POSITIVE_INFINITY,e[1]=Number.POSITIVE_INFINITY,e[2]=Number.NEGATIVE_INFINITY,e[3]=Number.NEGATIVE_INFINITY;for(const s of i){if(!s)continue;let i,r,h,c;if(\"point\"===s.type)i=h=s.x,r=c=s.y;else if(\"multipoint\"===s.type){const e=a(s);[i,r,h,c]=o(t,[e])}else if(\"extent\"===s.type)[i,r,h,c]=[s.xmin,s.ymin,s.xmax,s.ymax];else{const e=a(s);[i,r,h,c]=o(t,e)}e[0]=Math.min(i,e[0]),e[1]=Math.min(r,e[1]),e[2]=Math.max(h,e[2]),e[3]=Math.max(c,e[3])}return e}})()}initialize(){this._setup(),this._handles.add([g(this,\"view.ready\",(()=>{const{layer:t,view:e}=this;S(e,t)})),_(this,\"preserveAspectRatio\",(()=>{this._activeHandleGraphic&&(this._scaleGraphic(this._activeHandleGraphic),this._updateGraphics())})),_(this,\"view.scale\",(()=>{this._updateRotateGraphic(),this._updateRotateLineGraphic()})),_(this,\"graphics\",(()=>this.refresh())),_(this,\"layer\",((t,e)=>{e&&this._resetGraphics(e),this.refresh()}))])}destroy(){this._reset(),this._handles&&(this._handles.removeAll(),this._handles=null)}get state(){const t=!!this.get(\"view.ready\"),e=!(!this.get(\"graphics.length\")||!this.get(\"layer\"));return t&&e?\"active\":t?\"ready\":\"disabled\"}set symbols(t){const{centerIndicator:e=Y.centerIndicator,fill:i=Y.fill,handles:s=Y.handles,rotator:r=Y.rotator,rotatorLine:a=Y.rotatorLine}=t||{};this._set(\"symbols\",{centerIndicator:e,fill:i,handles:s,rotator:r,rotatorLine:a})}isUIGraphic(t){let e=[];return this.handleGraphics.length&&(e=e.concat(this.handleGraphics)),this.backgroundGraphic&&e.push(this.backgroundGraphic),this.centerGraphic&&e.push(this.centerGraphic),this.rotateGraphic&&e.push(this.rotateGraphic),this._rotateLineGraphic&&e.push(this._rotateLineGraphic),e.length&&e.includes(t)}move(t,e){if(this._mover&&this.graphics.length){for(const i of this.graphics){const s=i.geometry,r=G(s,t,e,this.view);i.geometry=r}this.refresh(),this._emitMoveStopEvent(t,e,null)}}scale(t,e){if(this._mover&&this.graphics.length){for(const i of this.graphics){const s=i.geometry,r=y(s,t,e);i.geometry=r}this.refresh(),this._emitScaleStopEvent(t,e,null)}}rotate(t,e){if(this._mover&&this.graphics.length){if(!e){const t=this.handleGraphics[1].geometry.x,i=this.handleGraphics[3].geometry.y;e=new r(t,i,this.view.spatialReference)}for(const i of this.graphics){const s=i.geometry,r=w(s,t,e);i.geometry=r}this.refresh(),this._emitRotateStopEvent(t,null)}}refresh(){this._reset(),this._setup()}reset(){this.graphics=[]}_setup(){\"active\"===this.state&&(this._setupGraphics(),this._setupMover(),this._updateGraphics())}_reset(){this._resetGraphicStateVars(),this._resetGraphics(),this._mover&&this._mover.destroy(),this._mover=null,this.view.cursor=\"default\"}_resetGraphicStateVars(){this._startInfo=null,this._activeHandleGraphic=null,this._totalDx=0,this._totalDy=0,this._xScale=1,this._yScale=1,this._angleOfRotation=0}_resetGraphics(t){const e=t||this.layer;e&&(e.removeMany(this.handleGraphics),e.remove(this.backgroundGraphic),e.remove(this.centerGraphic),e.remove(this.rotateGraphic),e.remove(this._rotateLineGraphic));for(const t of this.handleGraphics)t.destroy();this._set(\"handleGraphics\",[]),this.backgroundGraphic&&(this.backgroundGraphic.destroy(),this._set(\"backgroundGraphic\",null)),this.centerGraphic&&(this.centerGraphic.destroy(),this._set(\"centerGraphic\",null)),this.rotateGraphic&&(this.rotateGraphic.destroy(),this._set(\"rotateGraphic\",null)),this._rotateLineGraphic&&(this._rotateLineGraphic.destroy(),this._rotateLineGraphic=null)}_setupMover(){let t=[].concat(this.handleGraphics);this.enableMovement&&(t=t.concat(this.graphics,this.backgroundGraphic)),this.enableRotation&&t.push(this.rotateGraphic),this.showCenterGraphic&&t.push(this.centerGraphic),this._mover=new k({enableMoveAllGraphics:!1,view:this.view,graphics:t,callbacks:{onGraphicClick:t=>this._onGraphicClickCallback(t),onGraphicMoveStart:t=>this._onGraphicMoveStartCallback(t),onGraphicMove:t=>this._onGraphicMoveCallback(t),onGraphicMoveStop:t=>this._onGraphicMoveStopCallback(t),onGraphicPointerOver:t=>this._onGraphicPointerOverCallback(t),onGraphicPointerOut:t=>this._onGraphicPointerOutCallback(t)}})}_getStartInfo(t){const[e,i,s,r]=this._getBoxBounds(v()),a=Math.abs(s-e),o=Math.abs(r-i),h=(s+e)/2,c=(r+i)/2,{x:n,y:l}=t.geometry;return{width:a,height:o,centerX:h,centerY:c,startX:n,startY:l,graphicInfos:this._getGraphicInfos(),box:this.backgroundGraphic.geometry,rotate:this.rotateGraphic.geometry}}_getGraphicInfos(){return this.graphics.map((t=>this._getGraphicInfo(t)))}_getGraphicInfo(t){const e=t.geometry,[i,s,r,a]=this._getBounds(v(),[e]);return{width:Math.abs(r-i),height:Math.abs(a-s),centerX:(r+i)/2,centerY:(a+s)/2,geometry:e}}_onGraphicClickCallback(t){t.viewEvent.stopPropagation(),this.emit(\"graphic-click\",t),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(t)}_onGraphicMoveStartCallback(t){const{_angleOfRotation:e,_xScale:i,_yScale:s,backgroundGraphic:r,handleGraphics:a,rotateGraphic:o,symbols:h}=this,c=t.graphic;this._resetGraphicStateVars(),this._hideGraphicsBeforeUpdate(),r.symbol=h.fill.active,this._startInfo=this._getStartInfo(c),c===o?(this.view.cursor=\"grabbing\",this._emitRotateStartEvent(e,c)):a.includes(c)?(this._activeHandleGraphic=c,this._emitScaleStartEvent(i,s,c)):this._emitMoveStartEvent(t.dx,t.dy,c)}_onGraphicMoveCallback(t){const e=t.graphic;if(this._startInfo)if(this.handleGraphics.includes(e))this._scaleGraphic(e),this._emitScaleEvent(this._xScale,this._yScale,e);else if(e===this.rotateGraphic)this._rotateGraphic(e),this._emitRotateEvent(this._angleOfRotation,e);else{const i=t.dx,s=t.dy;this._totalDx+=i,this._totalDy+=s,this._moveGraphic(e,i,s),this._emitMoveEvent(i,s,e)}}_onGraphicMoveStopCallback(t){const e=t.graphic;if(!this._startInfo)return void this.refresh();const{_angleOfRotation:i,_totalDx:s,_totalDy:r,_xScale:a,_yScale:o,backgroundGraphic:h,handleGraphics:c,rotateGraphic:n,symbols:l}=this;this._updateGraphics(),this._showGraphicsAfterUpdate(),h.symbol=l.fill.default,e===n?(this.view.cursor=\"pointer\",this._emitRotateStopEvent(i,e)):c.includes(e)?this._emitScaleStopEvent(a,o,e):this._emitMoveStopEvent(s,r,e),this._resetGraphicStateVars()}_onGraphicPointerOverCallback(t){const{backgroundGraphic:e,handleGraphics:i,graphics:s,rotateGraphic:r,symbols:a,view:o}=this,h=t.graphic;if(h===r)return r.symbol=a.rotator.hover,void(o.cursor=\"pointer\");if(s.includes(h)||h===e)return void(o.cursor=\"move\");if(!i.includes(h))return void(o.cursor=\"pointer\");t.graphic.symbol=a.handles.hover;const c=o.rotation;let n,l=t.index;switch(l<8&&(c>=0&&c<45?l%=8:l=c>=45&&c<90?(l+1)%8:c>=90&&c<135?(l+2)%8:c>=135&&c<180?(l+3)%8:c>=180&&c<225?(l+4)%8:c>=225&&c<270?(l+5)%8:c>=270&&c<315?(l+6)%8:(l+7)%8),l){case 0:n=\"nwse-resize\";break;case 1:n=\"ns-resize\";break;case 2:n=\"nesw-resize\";break;case 3:n=\"ew-resize\";break;case 4:n=\"nwse-resize\";break;case 5:n=\"ns-resize\";break;case 6:n=\"nesw-resize\";break;case 7:n=\"ew-resize\";break;default:n=\"pointer\"}o.cursor=n}_onGraphicPointerOutCallback(t){const{handleGraphics:e,rotateGraphic:i,symbols:s,view:r}=this;t.graphic===i?i.symbol=s.rotator.default:e.includes(t.graphic)&&(t.graphic.symbol=s.handles.default),r.cursor=\"default\"}_scaleGraphic(t){const{_startInfo:e,handleGraphics:i,preserveAspectRatio:s,view:a}=this,{centerX:o,centerY:h,startX:c,startY:n}=e,{resolution:l,transform:p}=a.state,d=i.indexOf(t);1!==d&&5!==d||this._updateX(t,o),3!==d&&7!==d||this._updateY(t,h);const{x:m,y:u}=t.geometry,g=p[0]*m+p[2]*u+p[4],_=p[1]*m+p[3]*u+p[5],v=e.graphicInfos.map((t=>t.geometry));if(s){const t=p[0]*o+p[2]*h+p[4],e=p[1]*o+p[3]*h+p[5],i=p[0]*c+p[2]*n+p[4],s=p[1]*c+p[3]*n+p[5];this._xScale=this._yScale=f(t,e,i,s,g,_);for(const t of v){const e=v.indexOf(t);this.graphics[e].geometry=y(t,this._xScale,this._yScale,[o,h])}this._updateBackgroundGraphic()}else{const{width:t,height:i}=e;let s=m-c,p=n-u;if(1===d||5===d?s=0:3!==d&&7!==d||(p=0),0===s&&0===p)return;const g=t+(c>o?s:-1*s),_=i+(n<h?p:-1*p),f=o+s/2,b=h+p/2;this._xScale=g/t||1,this._yScale=_/i||1,1===d||5===d?this._xScale=1:3!==d&&7!==d||(this._yScale=1);const S=(f-o)/l,w=(b-h)/l,k=y(e.box,this._xScale,this._yScale);this.backgroundGraphic.geometry=G(k,S,w,a,!0);const{centerX:x,centerY:R}=this._getGraphicInfo(this.backgroundGraphic),M=(x-o)/l,I=-1*(R-h)/l;for(const t of v){const e=v.indexOf(t),i=y(t,this._xScale,this._yScale,[o,h]);this.graphics[e].geometry=G(i,M,I,a,!0)}this.centerGraphic.geometry=new r(x,R,a.spatialReference)}}_rotateGraphic(t){const{centerX:e,centerY:i,startX:s,startY:a,box:o,rotate:h}=this._startInfo,{x:c,y:n}=t.geometry,l=new r(e,i,this.view.spatialReference);this._angleOfRotation=b(e,i,s,a,c,n);const p=this._startInfo.graphicInfos.map((t=>t.geometry));for(const t of p){const e=p.indexOf(t),i=w(t,this._angleOfRotation,l);this.graphics[e].geometry=i}this.backgroundGraphic.geometry=w(o,this._angleOfRotation,l),this.rotateGraphic.geometry=w(h,this._angleOfRotation,l)}_moveGraphic(t,e,i){if(this.graphics.includes(t)){const s=this.backgroundGraphic.geometry;this.backgroundGraphic.geometry=G(s,e,i,this.view);for(const s of this.graphics)s!==t&&(s.geometry=G(s.geometry,e,i,this.view))}else if(t===this.centerGraphic){const t=this.backgroundGraphic.geometry;this.backgroundGraphic.geometry=G(t,e,i,this.view)}if(t===this.backgroundGraphic||t===this.centerGraphic)for(const t of this.graphics)t.geometry=G(t.geometry,e,i,this.view)}_setupGraphics(){const{_graphicAttributes:t,symbols:e}=this;this._set(\"centerGraphic\",new m(null,e.centerIndicator,t)),this.showCenterGraphic&&this.layer.add(this.centerGraphic),this._set(\"backgroundGraphic\",new m(null,e.fill.default,t)),this.layer.add(this.backgroundGraphic),this._rotateLineGraphic=new m(null,e.rotatorLine,t),this._set(\"rotateGraphic\",new m(null,e.rotator.default,t)),this.enableRotation&&!this._hasExtentGraphic()&&(this.layer.add(this._rotateLineGraphic),this.layer.add(this.rotateGraphic));for(let i=0;i<8;i++)this.handleGraphics.push(new m(null,e.handles.default,t));this.enableScaling&&this.layer.addMany(this.handleGraphics)}_updateGraphics(){this._updateBackgroundGraphic(),this._updateHandleGraphics(),this._updateCenterGraphic(),this._updateRotateGraphic(),this._updateRotateLineGraphic()}_hideGraphicsBeforeUpdate(){this.centerGraphic.visible=!1,this.rotateGraphic.visible=!1,this._rotateLineGraphic.visible=!1,this.handleGraphics.forEach((t=>t.visible=!1))}_showGraphicsAfterUpdate(){this.enableRotation&&(this._rotateLineGraphic.visible=!0,this.rotateGraphic.visible=!0),this.showCenterGraphic&&(this.centerGraphic.visible=!0),this.enableScaling&&this.handleGraphics.forEach((t=>t.visible=!0))}_updateHandleGraphics(){const t=this._getCoordinates(!0);this.handleGraphics.forEach(((e,i)=>{const[s,r]=t[i];this._updateXY(e,s,r)}))}_updateBackgroundGraphic(){const t=this._getCoordinates();this.backgroundGraphic.geometry=new h({rings:t,spatialReference:this.view.spatialReference})}_updateCenterGraphic(){const[t,e,i,s]=this._getBoxBounds(v()),a=(i+t)/2,o=(s+e)/2;this.centerGraphic.geometry=new r(a,o,this.view.spatialReference)}_updateRotateGraphic(){if(!this.handleGraphics.length)return;const{x:t,y:e}=this.handleGraphics[1].geometry,i=e+this.view.state.resolution*this._rotateGraphicOffset;this.rotateGraphic.geometry=new r(t,i,this.view.spatialReference)}_updateRotateLineGraphic(){if(!this.handleGraphics.length||!this.rotateGraphic||!this.rotateGraphic.geometry)return;const t=this.handleGraphics[1].geometry,e=this.rotateGraphic.geometry;this._rotateLineGraphic.geometry=new c({paths:[[t.x,t.y],[e.x,e.y]],spatialReference:this.view.spatialReference})}_updateXY(t,e,i){t.geometry=new r(e,i,this.view.spatialReference)}_updateX(t,e){const i=t.geometry.y;t.geometry=new r(e,i,this.view.spatialReference)}_updateY(t,e){const i=t.geometry.x;t.geometry=new r(i,e,this.view.spatialReference)}_hasExtentGraphic(){return this.graphics.some((t=>t&&e(t.geometry)&&\"extent\"===t.geometry.type))}_getBoxBounds(t){const e=this.graphics.map((t=>t.geometry));return this._getBounds(t,e)}_getCoordinates(t){const[e,i,s,r]=this._getBoxBounds(v());if(t){const t=(e+s)/2,a=(r+i)/2;return[[e,r],[t,r],[s,r],[s,a],[s,i],[t,i],[e,i],[e,a]]}return[[e,r],[s,r],[s,i],[e,i]]}_emitMoveStartEvent(t,e,i){const s=new R(this.graphics,i,t,e);this.emit(\"move-start\",s),this.callbacks.onMoveStart&&this.callbacks.onMoveStart(s)}_emitMoveEvent(t,e,i){const s=new M(this.graphics,i,t,e);this.emit(\"move\",s),this.callbacks.onMove&&this.callbacks.onMove(s)}_emitMoveStopEvent(t,e,i){const s=new I(this.graphics,i,t,e);this.emit(\"move-stop\",s),this.callbacks.onMoveStop&&this.callbacks.onMoveStop(s)}_emitRotateStartEvent(t,e){const i=new C(this.graphics,e,t);this.emit(\"rotate-start\",i),this.callbacks.onRotateStart&&this.callbacks.onRotateStart(i)}_emitRotateEvent(t,e){const i=new E(this.graphics,e,t);this.emit(\"rotate\",i),this.callbacks.onRotate&&this.callbacks.onRotate(i)}_emitRotateStopEvent(t,e){const i=new O(this.graphics,e,t);this.emit(\"rotate-stop\",i),this.callbacks.onRotateStop&&this.callbacks.onRotateStop(i)}_emitScaleStartEvent(t,e,i){const s=new j(this.graphics,i,t,e);this.emit(\"scale-start\",s),this.callbacks.onScaleStart&&this.callbacks.onScaleStart(s)}_emitScaleEvent(t,e,i){const s=new L(this.graphics,i,t,e);this.emit(\"scale\",s),this.callbacks.onScale&&this.callbacks.onScale(s)}_emitScaleStopEvent(t,e,i){const s=new z(this.graphics,i,t,e);this.emit(\"scale-stop\",s),this.callbacks.onScaleStop&&this.callbacks.onScaleStop(s)}};t([i()],N.prototype,\"_rotateLineGraphic\",void 0),t([i({readOnly:!0})],N.prototype,\"type\",void 0),t([i()],N.prototype,\"callbacks\",void 0),t([i({readOnly:!0})],N.prototype,\"centerGraphic\",void 0),t([i({readOnly:!0})],N.prototype,\"backgroundGraphic\",void 0),t([i()],N.prototype,\"enableMovement\",void 0),t([i()],N.prototype,\"enableRotation\",void 0),t([i()],N.prototype,\"enableScaling\",void 0),t([i()],N.prototype,\"graphics\",void 0),t([i({readOnly:!0})],N.prototype,\"handleGraphics\",void 0),t([i()],N.prototype,\"layer\",void 0),t([i()],N.prototype,\"preserveAspectRatio\",void 0),t([i({readOnly:!0})],N.prototype,\"rotateGraphic\",void 0),t([i()],N.prototype,\"showCenterGraphic\",void 0),t([i({dependsOn:[\"view.ready\",\"graphics.length\",\"layer\"],readOnly:!0})],N.prototype,\"state\",null),t([i({value:Y})],N.prototype,\"symbols\",null),t([i()],N.prototype,\"view\",void 0),N=t([s(\"esri.views.draw.support.Box\")],N);var A=N;export default A;\n"],"sourceRoot":""}