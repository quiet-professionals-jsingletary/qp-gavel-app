{"version":3,"sources":["../node_modules/@arcgis/core/views/draw/support/input/GraphicMoverEvents.js","../node_modules/@arcgis/core/views/draw/support/GraphicMover.js","../node_modules/@arcgis/core/views/draw/support/settings.js","../node_modules/@arcgis/core/views/draw/support/Reshape.js","../node_modules/@arcgis/core/views/interactive/GraphicManipulator.js"],"names":["t","i","s","h","e","this","graphic","index","x","y","viewEvent","type","r","c","a","n","p","allGraphics","dx","dy","totalDx","totalDy","defaultPrevented","k","_activeGraphic","_dragEvent","_handles","o","_hoverGraphic","_initialDragGeometry","_viewHandles","_manipulators","callbacks","onGraphicClick","onGraphicDoubleClick","onGraphicMoveStart","onGraphicMove","onGraphicMoveStop","onGraphicPointerOver","onGraphicPointerOut","onGraphicPointerDown","onGraphicPointerUp","enableMoveAllGraphics","graphics","view","_setUpManipulators","add","on","_clickHandler","TOOL","_doubleClickHandler","_pointerDownHandler","_pointerMoveHandler","_pointerUpHandler","_dragHandler","_keyDownHandler","reset","forEach","destroy","removeAll","get","set","_findTargetGraphic","d","indexOf","emit","g","_","G","m","w","action","geometry","stopPropagation","origin","l","u","f","key","state","Number","MAX_VALUE","intersectionDistance","length","map","v","EventedAccessor","prototype","readOnly","dependsOn","b","main","selected","outline","selectedOutline","hoverOutline","secondary","secondaryOutline","transparent","size","hoverSize","color","hoverColor","outlineColor","hoverOutlineColor","stagedColor","stagedOutlineColor","vertex","midpoint","center","fill","line","reshapeGraphics","transformGraphics","mover","S","M","added","removed","H","oldGraphic","vertices","E","I","removeVertex","R","C","default","style","width","hover","midpoints","j","_graphicAttributes","esriSketchTool","_mover","_totalDx","_totalDy","onReshapeStart","onReshape","onReshapeStop","onMoveStart","onMove","onMoveStop","enableMidpoints","handleGraphics","layer","midpointGraphics","midpointSymbol","selectedHandles","_setup","refresh","_clearSelection","_resetGraphics","_reset","_set","push","concat","includes","_removeVertex","_setupGraphics","_setupMover","_resetGraphicStateVars","cursor","removeMany","clone","pop","_createHandleGraphics","_createMidpointGraphics","_saveRelatedIndices","addMany","symbols","spatialReference","symbol","attributes","pathIndex","pointIndex","pointIndexStart","pointIndexEnd","relatedGraphicIndices","_onGraphicClickCallback","_onGraphicMoveStartCallback","_onGraphicMoveCallback","_onGraphicMoveStopCallback","_onGraphicPointerOverCallback","_onGraphicPointerOutCallback","clearSelection","_isMidpoint","button","_createHandleFromMidpoint","_emitVertexAddEvent","_isHandle","native","shiftKey","_removeFromSelection","_addToSelection","visible","_emitMoveStartEvent","_emitReshapeStartEvent","_emitMoveEvent","_syncGeometryAfterHandleMove","_emitReshapeEvent","_syncGraphicsWithGeometry","_emitMoveStopEvent","_emitReshapeStopEvent","paths","rings","_updateHandleGraphicLocations","_updateMidpointGraphicLocations","_isSelected","_updateHoverCursor","splice","coordinates","componentIndex","vertexIndex","_emitSelectEvent","_emitDeselectEvent","repeat","_removeHandles","_emitVertexRemoveEvent","onVertexSelect","onVertexDeselect","onVertexAdd","onVertexRemove","value","V","getLogger","interactive","selectable","grabbable","dragging","events","EventEmitter","_circleCollisionCache","_graphicSymbolChangedHandle","_originalSymbol","attachSymbolChanged","error","elevationInfo","offset","mode","_get","_updateGraphicSymbol","detachSymbolChanged","_resetGraphicSymbol","_intersectDistance2D","_intersectDistance3D","remove","watch","focusedSymbol","_focused","originalPoint","equals","mapPoint","radiusPx","toScreen","xoffset","yoffset","toMap","include","renderSpatialReference","camera","eye","constructOnly","nonNullable"],"mappings":"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","file":"static/js/36.202d548b.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass t{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-click\"}}class i{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-double-click\"}}class s{constructor(t,i,s,h,e,r,c,a,n,p){this.graphic=t,this.allGraphics=i,this.index=s,this.x=h,this.y=e,this.dx=r,this.dy=c,this.totalDx=a,this.totalDy=n,this.viewEvent=p,this.defaultPrevented=!1,this.type=\"graphic-move-start\"}preventDefault(){this.defaultPrevented=!0}}class h{constructor(t,i,s,h,e,r,c,a,n,p){this.graphic=t,this.allGraphics=i,this.index=s,this.x=h,this.y=e,this.dx=r,this.dy=c,this.totalDx=a,this.totalDy=n,this.viewEvent=p,this.defaultPrevented=!1,this.type=\"graphic-move\"}preventDefault(){this.defaultPrevented=!0}}class e{constructor(t,i,s,h,e,r,c,a,n,p){this.graphic=t,this.allGraphics=i,this.index=s,this.x=h,this.y=e,this.dx=r,this.dy=c,this.totalDx=a,this.totalDy=n,this.viewEvent=p,this.defaultPrevented=!1,this.type=\"graphic-move-stop\"}preventDefault(){this.defaultPrevented=!0}}class r{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-over\"}}class c{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-out\"}}class a{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-down\"}}class n{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-up\"}}export{t as GraphicClickEvent,i as GraphicDoubleClickEvent,h as GraphicMoveEvent,s as GraphicMoveStartEvent,e as GraphicMoveStopEvent,a as GraphicPointerDownEvent,c as GraphicPointerOutEvent,r as GraphicPointerOverEvent,n as GraphicPointerUpEvent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{clone as t}from\"../../../core/lang.js\";import{isSome as e}from\"../../../core/maybe.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import a from\"../../../core/Evented.js\";import o from\"../../../core/Handles.js\";import{watch as h,whenOnce as c}from\"../../../core/watchUtils.js\";import{ViewEventPriorities as n}from\"../../input/InputManager.js\";import{createScreenPointFromEvent as p}from\"../../support/screenUtils.js\";import{cloneMove as l}from\"./drawUtils.js\";import{GraphicManipulator as v}from\"../../interactive/GraphicManipulator.js\";import{GraphicClickEvent as d,GraphicDoubleClickEvent as g,GraphicPointerDownEvent as _,GraphicPointerUpEvent as G,GraphicPointerOutEvent as m,GraphicMoveStartEvent as u,GraphicMoveEvent as y,GraphicMoveStopEvent as f,GraphicPointerOverEvent as w}from\"./input/GraphicMoverEvents.js\";let k=class extends a.EventedAccessor{constructor(i){super(i),this._activeGraphic=null,this._dragEvent=null,this._handles=new o,this._hoverGraphic=null,this._initialDragGeometry=null,this._viewHandles=new o,this._manipulators=[],this.type=\"graphic-mover\",this.callbacks={onGraphicClick(){},onGraphicDoubleClick(){},onGraphicMoveStart(){},onGraphicMove(){},onGraphicMoveStop(){},onGraphicPointerOver(){},onGraphicPointerOut(){},onGraphicPointerDown(){},onGraphicPointerUp(){}},this.enableMoveAllGraphics=!1,this.graphics=[],this.view=null}initialize(){this._setUpManipulators(),this._handles.add([h(this,[\"graphics\",\"graphics.length\"],(()=>{this._setUpManipulators()})),c(this,\"view.ready\",(()=>{this._viewHandles.add([this.view.on(\"immediate-click\",(i=>this._clickHandler(i)),n.TOOL),this.view.on(\"double-click\",(i=>this._doubleClickHandler(i)),n.TOOL),this.view.on(\"pointer-down\",(i=>this._pointerDownHandler(i)),n.TOOL),this.view.on(\"pointer-move\",(i=>this._pointerMoveHandler(i)),n.TOOL),this.view.on(\"pointer-up\",(i=>this._pointerUpHandler(i)),n.TOOL),this.view.on(\"drag\",(i=>this._dragHandler(i)),n.TOOL),this.view.on(\"key-down\",(i=>this._keyDownHandler(i)),n.TOOL)])}))])}destroy(){this.reset(),this._manipulators.forEach((i=>i.destroy())),this._manipulators=null,this._viewHandles.removeAll(),this._handles.removeAll()}get state(){const i=!!this.get(\"view.ready\"),t=!!this.get(\"graphics.length\"),e=this._activeGraphic;return i&&t?e?\"moving\":\"active\":i?\"ready\":\"disabled\"}reset(){this._activeGraphic=null,this._hoverGraphic=null,this._dragEvent=null}updateGeometry(i,t){const e=this.graphics[i];e&&e.set(\"geometry\",t)}_clickHandler(i){const t=this._findTargetGraphic(p(i));if(t){const e=new d(t,this.graphics.indexOf(t),i.x,i.y,i);this.emit(\"graphic-click\",e),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(e)}}_doubleClickHandler(i){const t=this._findTargetGraphic(p(i));if(t){const e=new g(t,this.graphics.indexOf(t),i.x,i.y,i);this.emit(\"graphic-double-click\",e),this.callbacks.onGraphicDoubleClick&&this.callbacks.onGraphicDoubleClick(e)}}_pointerDownHandler(i){const t=this._findTargetGraphic(p(i));if(t){this._activeGraphic=t;const{x:e,y:r}=i,s=new _(t,this.graphics.indexOf(t),e,r,i);this.emit(\"graphic-pointer-down\",s),this.callbacks.onGraphicPointerDown&&this.callbacks.onGraphicPointerDown(s)}else this._activeGraphic=null}_pointerUpHandler(i){if(this._activeGraphic){const{x:t,y:e}=i,r=this.graphics.indexOf(this._activeGraphic),s=new G(this._activeGraphic,r,t,e,i);this.emit(\"graphic-pointer-up\",s),this.callbacks.onGraphicPointerUp&&this.callbacks.onGraphicPointerUp(s)}}_pointerMoveHandler(i){if(this._dragEvent)return;const t=this._findTargetGraphic(p(i));if(t){const{x:e,y:r}=i;if(this._hoverGraphic){if(this._hoverGraphic===t)return;const s=this.graphics.indexOf(this._hoverGraphic),a=new m(this.graphics[s],s,e,r,i);this._hoverGraphic=null,this.emit(\"graphic-pointer-out\",a),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(a)}const s=this.graphics.indexOf(t),a=new w(t,s,e,r,i);return this._hoverGraphic=t,this.emit(\"graphic-pointer-over\",a),void(this.callbacks.onGraphicPointerOver&&this.callbacks.onGraphicPointerOver(a))}if(this._hoverGraphic){const{x:t,y:e}=i,r=this.graphics.indexOf(this._hoverGraphic),s=new m(this.graphics[r],r,t,e,i);this._hoverGraphic=null,this.emit(\"graphic-pointer-out\",s),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(s)}}_dragHandler(i){if(\"start\"!==i.action&&!this._dragEvent||!this._activeGraphic||!this._activeGraphic.geometry)return;i.stopPropagation();const{action:e,x:r,y:s}=i,a=this.graphics.indexOf(this._activeGraphic),o=this._activeGraphic.geometry,h=this._dragEvent?r-this._dragEvent.x:0,c=this._dragEvent?s-this._dragEvent.y:0,n=r-i.origin.x,p=s-i.origin.y;if(this._activeGraphic.geometry=l(o,h,c,this.view),this.enableMoveAllGraphics&&this.graphics.forEach((i=>{i!==this._activeGraphic&&(i.geometry=l(i.geometry,h,c,this.view))})),this._dragEvent=i,\"start\"===e){this._initialDragGeometry=t(o);const e=new u(this._activeGraphic,this.graphics,a,r,s,h,c,n,p,i);this.emit(\"graphic-move-start\",e),this.callbacks.onGraphicMoveStart&&this.callbacks.onGraphicMoveStart(e),e.defaultPrevented&&this._activeGraphic.set(\"geometry\",o)}else if(\"update\"===e){const t=new y(this._activeGraphic,this.graphics,a,r,s,h,c,n,p,i);this.emit(\"graphic-move\",t),this.callbacks.onGraphicMove&&this.callbacks.onGraphicMove(t),t.defaultPrevented&&this._activeGraphic.set(\"geometry\",o)}else{const t=new f(this._activeGraphic,this.graphics,a,r,s,h,c,n,p,i);this._dragEvent=null,this._activeGraphic=null,this.emit(\"graphic-move-stop\",t),this.callbacks.onGraphicMoveStop&&this.callbacks.onGraphicMoveStop(t),t.defaultPrevented&&this.graphics[a].set(\"geometry\",this._initialDragGeometry),this._initialDragGeometry=null}}_keyDownHandler(i){\"a\"!==i.key&&\"d\"!==i.key&&\"n\"!==i.key||\"moving\"!==this.state||i.stopPropagation()}_findTargetGraphic(i){let t=null,r=Number.MAX_VALUE;return this._manipulators.forEach((s=>{const a=s.intersectionDistance(i);e(a)&&a<r&&(r=a,t=s.graphic)})),t}_setUpManipulators(){const{graphics:i,view:t}=this;this._manipulators.forEach((i=>i.destroy())),this._manipulators=null!=i&&i.length?i.map((i=>new v({graphic:i,view:t}))):[]}};i([r()],k.prototype,\"_activeGraphic\",void 0),i([r({readOnly:!0})],k.prototype,\"type\",void 0),i([r()],k.prototype,\"callbacks\",void 0),i([r()],k.prototype,\"enableMoveAllGraphics\",void 0),i([r()],k.prototype,\"graphics\",void 0),i([r({dependsOn:[\"view.ready\",\"graphics.length\",\"_activeGraphic\"],readOnly:!0})],k.prototype,\"state\",null),i([r()],k.prototype,\"view\",void 0),k=i([s(\"esri.views.draw.support.GraphicMover\")],k);var b=k;export default b;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../../Color.js\";const o={main:new e([255,127,0]),selected:new e([255,255,255]),outline:new e([0,0,0,.5]),selectedOutline:new e([255,255,255]),hoverOutline:new e([255,255,255]),secondary:new e([255,255,255]),secondaryOutline:new e([100,100,100]),transparent:new e([0,0,0,0])};function t(e,o){if(o)for(const t in o)e[t]=o[t]}class s{constructor(e){this.size=8,this.hoverSize=10,this.color=o.main,this.hoverColor=o.main,this.outlineColor=o.outline,this.hoverOutlineColor=o.hoverOutline,t(this,e)}}class n{constructor(e){this.color=o.secondary,this.hoverColor=o.main,t(this,e)}}class r{constructor(e){this.color=o.transparent,this.hoverColor=o.transparent,this.outlineColor=o.main,this.hoverOutlineColor=o.main,this.stagedColor=o.transparent,this.stagedOutlineColor=o.secondary,t(this,e)}}class i{constructor(e){this.vertex=new s,this.midpoint=new s({color:o.secondary,outlineColor:o.secondaryOutline,size:6}),this.selected=new s({color:o.selected,hoverColor:o.selected,hoverOutlineColor:o.hoverOutline}),t(this,e)}}class l{constructor(e){this.center=new s({color:o.secondaryOutline}),this.fill=new r,this.line=new n,this.vertex=new s({color:o.selected,outlineColor:o.main,hoverColor:o.selected,hoverOutlineColor:o.secondaryOutline}),t(this,e)}}const c=new class{constructor(e){this.reshapeGraphics=new i,this.transformGraphics=new l,t(this,e)}};export{o as colors,c as settings};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{unwrap as t,get as s}from\"../../../core/maybe.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import r from\"../../../geometry/Point.js\";import{geometryToCoordinates as h,getMidpoint as a}from\"../../../geometry/support/coordsUtils.js\";import\"../../../geometry.js\";import c from\"../../../core/Evented.js\";import n from\"../../../symbols/SimpleMarkerSymbol.js\";import l from\"../../../Graphic.js\";import p from\"../../../core/Handles.js\";import{whenOnce as d,pausable as m}from\"../../../core/watchUtils.js\";import{ViewEventPriorities as v}from\"../../input/InputManager.js\";import{cloneMove as y}from\"./drawUtils.js\";import{addUniqueLayer as _}from\"./layerUtils.js\";import u from\"./GraphicMover.js\";import{settings as g}from\"./settings.js\";class f{constructor(e,t,s){this.graphic=e,this.mover=t,this.selected=s,this.type=\"reshape-start\"}}class x{constructor(e,t,s){this.graphic=e,this.mover=t,this.selected=s,this.type=\"reshape\"}}class b{constructor(e,t,s){this.graphic=e,this.mover=t,this.selected=s,this.type=\"reshape-stop\"}}class G{constructor(e,t,s){this.mover=e,this.dx=t,this.dy=s,this.type=\"move-start\"}}class S{constructor(e,t,s){this.mover=e,this.dx=t,this.dy=s,this.type=\"move\"}}class w{constructor(e,t,s){this.mover=e,this.dx=t,this.dy=s,this.type=\"move-stop\"}}class M{constructor(e){this.added=e,this.type=\"vertex-select\"}}class k{constructor(e){this.removed=e,this.type=\"vertex-deselect\"}}class H{constructor(e,t,s,i){this.added=e,this.graphic=t,this.oldGraphic=s,this.vertices=i,this.type=\"vertex-add\"}}class E{constructor(e,t,s,i){this.removed=e,this.graphic=t,this.oldGraphic=s,this.vertices=i,this.type=\"vertex-remove\"}}const I={removeVertex:[\"Backspace\",\"Delete\"]},R=g.reshapeGraphics,C={vertices:{default:new n({style:\"circle\",size:R.vertex.size,color:R.vertex.color,outline:{color:R.vertex.outlineColor,width:1}}),hover:new n({style:\"circle\",size:R.vertex.hoverSize,color:R.vertex.hoverColor,outline:{color:R.vertex.hoverOutlineColor,width:1}}),selected:new n({style:\"circle\",size:R.selected.size,color:R.selected.color,outline:{color:R.selected.outlineColor,width:1}})},midpoints:{default:new n({style:\"circle\",size:R.midpoint.size,color:R.midpoint.color,outline:{color:R.midpoint.outlineColor,width:1}}),hover:new n({style:\"circle\",size:R.midpoint.size,color:R.midpoint.color,outline:{color:R.midpoint.outlineColor,width:1}})}};let j=class extends c.EventedAccessor{constructor(e){super(e),this._handles=new p,this._graphicAttributes={esriSketchTool:\"box\"},this._mover=null,this._viewHandles=new p,this._totalDx=0,this._totalDy=0,this.callbacks={onReshapeStart(){},onReshape(){},onReshapeStop(){},onMoveStart(){},onMove(){},onMoveStop(){},onGraphicClick(){}},this.enableMidpoints=!0,this.graphic=null,this.handleGraphics=[],this.layer=null,this.midpointGraphics=[],this.midpointSymbol=new n({style:\"circle\",size:6,color:[200,200,200],outline:{color:[100,100,100],width:1}}),this.selectedHandles=[],this.type=\"reshape\",this.view=null}initialize(){this._setup(),this._handles.add([d(this,\"view.ready\",(()=>{const{layer:e,view:t}=this;_(t,e),this._viewHandles.add([t.on(\"key-down\",(e=>this._keyDownHandler(e)),v.TOOL)])})),m(this,\"graphic\",(()=>this.refresh())),m(this,\"layer\",((e,t)=>{t&&(this._clearSelection(),this._resetGraphics(t)),this.refresh()})),m(this,\"enableMidpoints\",(()=>{this.refresh()}))])}destroy(){this._reset(),this._mover&&this._mover.destroy(),this._mover=null,this._handles.removeAll(),this._handles=null,this._viewHandles.removeAll(),this._viewHandles=null}get state(){const e=!!this.get(\"view.ready\"),t=!(!this.get(\"graphic\")||!this.get(\"layer\"));return e&&t?\"active\":e?\"ready\":\"disabled\"}set symbols(e){const{midpoints:t=C.midpoints,vertices:s=C.vertices}=e||{};this._set(\"symbols\",{midpoints:t,vertices:s})}isUIGraphic(e){const t=[];return this.graphic&&t.push(this.graphic),t.concat(this.handleGraphics,this.midpointGraphics),t.length&&t.includes(e)}refresh(){this._reset(),this._setup()}reset(){this.graphic=null}clearSelection(){this._clearSelection()}removeSelectedHandles(){this.selectedHandles.length&&this._removeVertex(this.selectedHandles)}_setup(){this.graphic&&this.layer&&(this._setupGraphics(),this._setupMover())}_reset(){this._clearSelection(),this._resetGraphicStateVars(),this._resetGraphics(),this._mover&&this._mover.destroy(),this._mover=null,this.view.cursor=\"default\"}_resetGraphicStateVars(){this._totalDx=0,this._totalDy=0}_resetGraphics(e){const t=e||this.layer;t&&(t.removeMany(this.handleGraphics),t.removeMany(this.midpointGraphics)),this.handleGraphics.forEach((e=>e.destroy())),this.midpointGraphics.forEach((e=>e.destroy())),this._set(\"handleGraphics\",[]),this._set(\"midpointGraphics\",[]),this._set(\"selectedHandles\",[])}_setupGraphics(){const e=t(this.graphic.geometry),s=h(e.clone());if(\"polygon\"===e.type)for(const e of s){const t=e[e.length-1];e[0][0]===t[0]&&e[0][1]===t[1]&&e.length>2&&e.pop()}this._set(\"handleGraphics\",this._createHandleGraphics(s)),this.enableMidpoints&&this._set(\"midpointGraphics\",this._createMidpointGraphics(s)),this._saveRelatedIndices(this.handleGraphics),this.layer.addMany(this.midpointGraphics),this.layer.addMany(this.handleGraphics)}_createHandleGraphics(e){const{_graphicAttributes:t,symbols:s,view:{spatialReference:i}}=this,o=[];return null==e||e.forEach(((e,h)=>{e.forEach(((e,a)=>{var c;const[n,p]=e;o.push(new l({geometry:new r({x:n,y:p,spatialReference:i}),symbol:null==s||null==(c=s.vertices)?void 0:c.default,attributes:{...t,pathIndex:h,pointIndex:a}}))}))})),o}_createMidpointGraphics(e){const{_graphicAttributes:t,symbols:i,view:{spatialReference:o}}=this,h=[];return null==e||e.forEach(((e,c)=>{e.forEach(((n,p)=>{const[d,m]=n,v=e[p+1]?p+1:0;if(\"polygon\"===s(this.graphic.geometry,\"type\")||0!==v){const[s,n]=e[v],[y,_]=a([d,m],[s,n]);h.push(new l({geometry:new r({x:y,y:_,spatialReference:o}),symbol:i.midpoints.default,attributes:{...t,pathIndex:c,pointIndexStart:p,pointIndexEnd:v}}))}}))})),h}_saveRelatedIndices(e){if(!e)return;const t=e.map((({geometry:e})=>({x:e.x,y:e.y})));for(let s=0;s<t.length;s++){const i=[];for(let e=0;e<t.length;e++){if(s===e)continue;const o=t[s],r=t[e];o.x===r.x&&o.y===r.y&&i.push(e)}e[s].attributes.relatedGraphicIndices=i}}_setupMover(){this._mover=new u({enableMoveAllGraphics:!1,graphics:[].concat(this.handleGraphics,this.midpointGraphics,this.graphic),view:this.view,callbacks:{onGraphicClick:e=>this._onGraphicClickCallback(e),onGraphicMoveStart:e=>this._onGraphicMoveStartCallback(e),onGraphicMove:e=>this._onGraphicMoveCallback(e),onGraphicMoveStop:e=>this._onGraphicMoveStopCallback(e),onGraphicPointerOver:e=>this._onGraphicPointerOverCallback(e),onGraphicPointerOut:e=>this._onGraphicPointerOutCallback(e)}})}_onGraphicClickCallback(e){e.viewEvent.stopPropagation();const t=e.graphic;if(t===this.graphic)this.clearSelection(),this.emit(\"graphic-click\",e),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(e);else if(this._isMidpoint(t)){if(2===e.viewEvent.button)return;const s=this.graphic.clone(),i=this._createHandleFromMidpoint(t);this.refresh(),this._emitVertexAddEvent([t],s,i)}else if(this._isHandle(t))if(e.viewEvent.stopPropagation(),2===e.viewEvent.button)this._removeVertex(t);else{e.viewEvent.native.shiftKey||this._clearSelection(),this.selectedHandles.includes(t)?this._removeFromSelection(t,!0):this._addToSelection(t)}}_onGraphicMoveStartCallback(e){const t=e.graphic;if(this._resetGraphicStateVars(),t===this.graphic){const{dx:t,dy:s}=e;return this.handleGraphics.forEach((e=>e.visible=!1)),this.midpointGraphics.forEach((e=>e.visible=!1)),this._clearSelection(),void this._emitMoveStartEvent(t,s)}if(this._isMidpoint(t)){this._clearSelection();const e=this.graphic.clone(),s=this._createHandleFromMidpoint(t);this._emitVertexAddEvent([t],e,s),this._addToSelection(t)}else this.selectedHandles.includes(t)||(this._clearSelection(),this._addToSelection(t));this._emitReshapeStartEvent(t)}_onGraphicMoveCallback(e){const{graphic:t,dx:s,dy:i}=e;this._totalDx+=s,this._totalDy+=i,t===this.graphic?this._emitMoveEvent(s,i):(this._syncGeometryAfterHandleMove(t,s,i),this._emitReshapeEvent(t))}_onGraphicMoveStopCallback(e){const{graphic:t,dx:s,dy:i}=e;if(this._totalDx+=s,this._totalDy+=i,t===this.graphic){for(const e of[].concat(this.handleGraphics,this.midpointGraphics))e.visible=!0;this._syncGraphicsWithGeometry(),this._emitMoveStopEvent()}else this._syncGeometryAfterHandleMove(t,s,i),this._isMidpoint(t)&&this.refresh(),this._emitReshapeStopEvent(t);this._resetGraphicStateVars()}_syncGraphicsWithGeometry(){const e=this.graphic.geometry,t=\"polyline\"===e.type?e.paths:e.rings;this._updateHandleGraphicLocations(t),this._updateMidpointGraphicLocations(t)}_updateHandleGraphicLocations(e){for(const t of this.handleGraphics){const{pathIndex:s,pointIndex:i}=t.attributes,[o,h]=e[s][i];t.set(\"geometry\",new r(o,h,this.view.spatialReference))}}_updateMidpointGraphicLocations(e){for(const t of this.midpointGraphics){const{pathIndex:s,pointIndexStart:i,pointIndexEnd:o}=t.attributes,[h,c]=e[s][i],[n,l]=e[s][o],[p,d]=a([h,c],[n,l]);t.geometry=new r({x:p,y:d,spatialReference:this.view.spatialReference})}}_syncGeometryAfterHandleMove(e,s,i){const o=t(this.graphic.geometry).clone(),r=\"polyline\"===o.type?o.paths:o.rings,{pathIndex:h,pointIndex:a}=e.attributes,{x:c,y:n}=e.geometry,l=r[h].length-1;if(r[h][a]=[c,n],\"polygon\"===o.type&&(0===a?r[h][l]=[c,n]:a===l&&(r[h][0]=[c,n])),this._isHandle(e)){const{relatedGraphicIndices:t}=e.attributes;for(const s of t){const t=this.handleGraphics[s],{pathIndex:i,pointIndex:o}=t.attributes;r[i][o]=[c,n],t.geometry=e.geometry}for(const t of this.selectedHandles)if(t!==e){const{pathIndex:e,pointIndex:h,relatedGraphicIndices:a}=t.attributes,c=y(t.geometry,s,i,this.view),n=r[e].length-1;r[e][h]=[c.x,c.y],t.geometry=c,\"polygon\"===o.type&&(0===h?r[e][n]=[c.x,c.y]:h===n&&(r[e][0]=[c.x,c.y]));for(const e of a){const t=this.handleGraphics[e],{pathIndex:s,pointIndex:i}=t.attributes;r[s][i]=[c.x,c.y],t.geometry=c}}this._updateMidpointGraphicLocations(r)}this.graphic.geometry=o}_onGraphicPointerOverCallback(e){const t=e.graphic;this._isHandle(t)&&!this._isSelected(t)&&(t.symbol=this.symbols.vertices.hover),this._updateHoverCursor(t)}_onGraphicPointerOutCallback(e){const t=e.graphic;this._isHandle(t)&&!this._isSelected(t)&&(t.symbol=this.symbols.vertices.default),this.view.cursor=\"default\"}_createHandleFromMidpoint(e){const{_graphicAttributes:s}=this,i=[],o=t(this.graphic.geometry).clone(),{pathIndex:r,pointIndexStart:h,pointIndexEnd:a}=e.attributes,{x:c,y:n}=e.geometry,l=0===a?h+1:a,p=\"polyline\"===o.type?o.paths:o.rings;return p[r].splice(l,0,[c,n]),e.attributes={...s,pathIndex:r,pointIndex:l,relatedGraphicIndices:[]},i.push({coordinates:p[r][l],componentIndex:r,vertexIndex:l}),this.graphic.geometry=o,i}_removeHandles(e){const s=t(this.graphic.geometry).clone(),i=\"polygon\"===s.type?s.rings:s.paths,o=[];e instanceof l&&(e=[e]);for(const t of e){const{x:e,y:s}=t.geometry;for(let t=0;t<i.length;t++){const r=i[t];for(let h=0;h<r.length;h++){const[a,c]=r[h];e===a&&s===c&&(o.push({coordinates:i[t][h],componentIndex:t,vertexIndex:h}),i[t].splice(Number(h),1))}}}if(\"polygon\"===s.type)for(const e of i){const[t,s]=e[0],[o,r]=e[e.length-1];(1===e.length||e.length<3&&t===o&&s===r)&&i.splice(i.indexOf(e),1),e.length>2&&(t!==o||s!==r)&&e.push(e[0])}else for(const e of i)1===e.length&&i.splice(i.indexOf(e),1);return this.graphic.geometry=s,o}_addToSelection(e){e instanceof l&&(e=[e]);for(const t of e)t.symbol=this.symbols.vertices.selected;this._set(\"selectedHandles\",this.selectedHandles.concat(e)),this._emitSelectEvent(e)}_removeFromSelection(e,t){const{vertices:s}=this.symbols,i=t?s.hover:s.default;e instanceof l&&(e=[e]);for(const t of e)this.selectedHandles.splice(this.selectedHandles.indexOf(t),1),this._set(\"selectedHandles\",this.selectedHandles),t.set(\"symbol\",i);this._emitDeselectEvent(e)}_clearSelection(){if(this.selectedHandles.length){const e=this.selectedHandles;for(const e of this.selectedHandles)e.set(\"symbol\",this.symbols.vertices.default);this._set(\"selectedHandles\",[]),this._emitDeselectEvent(e)}}_keyDownHandler(e){I.removeVertex.includes(e.key)&&!e.repeat&&this.selectedHandles.length&&this._removeVertex(this.selectedHandles)}_removeVertex(e){if(\"polygon\"===this.graphic.geometry.type&&this.handleGraphics.length<4||this.handleGraphics.length<3)return;const t=this.graphic.clone();e instanceof l&&(e=[e]);const s=this._removeHandles(e);this.refresh(),this._emitVertexRemoveEvent(e,t,s)}_isHandle(e){return this.handleGraphics.includes(e)}_isSelected(e){return this._isHandle(e)&&this.selectedHandles.includes(e)}_isMidpoint(e){return this.midpointGraphics.includes(e)}_updateHoverCursor(e){this.view.cursor=this._isMidpoint(e)?\"copy\":\"move\"}_emitMoveStartEvent(e,t){const s=new G(this.graphic,e,t);this.emit(\"move-start\",s),this.callbacks.onMoveStart&&this.callbacks.onMoveStart(s)}_emitMoveEvent(e,t){const s=new S(this.graphic,e,t);this.emit(\"move\",s),this.callbacks.onMove&&this.callbacks.onMove(s)}_emitMoveStopEvent(){const e=new w(this.graphic,this._totalDx,this._totalDy);this.emit(\"move-stop\",e),this.callbacks.onMoveStop&&this.callbacks.onMoveStop(e)}_emitReshapeStartEvent(e){const t=new f(this.graphic,e,this.selectedHandles);this.emit(\"reshape-start\",t),this.callbacks.onReshapeStart&&this.callbacks.onReshapeStart(t)}_emitReshapeEvent(e){const t=new x(this.graphic,e,this.selectedHandles);this.emit(\"reshape\",t),this.callbacks.onReshape&&this.callbacks.onReshape(t)}_emitReshapeStopEvent(e){const t=new b(this.graphic,e,this.selectedHandles);this.emit(\"reshape-stop\",t),this.callbacks.onReshapeStop&&this.callbacks.onReshapeStop(t)}_emitSelectEvent(e){const t=new M(e);this.emit(\"select\",t),this.callbacks.onVertexSelect&&this.callbacks.onVertexSelect(t)}_emitDeselectEvent(e){const t=new k(e);this.emit(\"deselect\",t),this.callbacks.onVertexDeselect&&this.callbacks.onVertexDeselect(t)}_emitVertexAddEvent(e,t,s){const i=new H(e,this.graphic,t,s);this.emit(\"vertex-add\",i),this.callbacks.onVertexAdd&&this.callbacks.onVertexAdd(i)}_emitVertexRemoveEvent(e,t,s){const i=new E(e,this.graphic,t,s);this.emit(\"vertex-remove\",i),this.callbacks.onVertexRemove&&this.callbacks.onVertexRemove(i)}};e([i()],j.prototype,\"callbacks\",void 0),e([i()],j.prototype,\"enableMidpoints\",void 0),e([i()],j.prototype,\"graphic\",void 0),e([i({readOnly:!0})],j.prototype,\"handleGraphics\",void 0),e([i()],j.prototype,\"layer\",void 0),e([i({readOnly:!0})],j.prototype,\"midpointGraphics\",void 0),e([i()],j.prototype,\"midpointSymbol\",void 0),e([i({readOnly:!0})],j.prototype,\"selectedHandles\",void 0),e([i({dependsOn:[\"view.ready\",\"graphic\",\"layer\"],readOnly:!0})],j.prototype,\"state\",null),e([i({value:C})],j.prototype,\"symbols\",null),e([i({readOnly:!0})],j.prototype,\"type\",void 0),e([i()],j.prototype,\"view\",void 0),j=e([o(\"esri.views.draw.support.Reshape\")],j);var V=j;export default V;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{get as t,isSome as i,isNone as o}from\"../../core/maybe.js\";import s from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as l}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import a from\"../../core/Accessor.js\";import n from\"../../core/Evented.js\";import{pt2px as c,screenPointObjectToArray as h,createScreenPointArray as p}from\"../../core/screenUtils.js\";import{c as m}from\"../../chunks/vec3f64.js\";import{k as u}from\"../../chunks/vec3.js\";import{canProjectWithoutEngine as g,project as y,projectPointToVector as d}from\"../../geometry/projection.js\";import b from\"../../symbols/support/ElevationInfo.js\";import{getDefaultSymbol2D as f}from\"../../symbols/support/defaults.js\";import{j as _}from\"../../chunks/vec2.js\";import{getGraphicEffectiveElevationMode as v}from\"../../support/elevationInfoUtils.js\";import{intersectsDrapedGeometry as S}from\"../support/drapedUtils.js\";const j=s.getLogger(\"esri.views.interactive.GraphicManipulator\");let C=class extends a{constructor(e){super(e),this.layer=null,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.dragging=!1,this.cursor=null,this.events=new n.EventEmitter,this._circleCollisionCache=null,this._graphicSymbolChangedHandle=null,this._originalSymbol=null}set graphic(e){\"mesh\"!==t(e.geometry,\"type\")?(this._circleCollisionCache=null,this._originalSymbol=e.symbol,this._set(\"graphic\",e),this.attachSymbolChanged()):j.error(\"Mesh geometries are not supported\")}get elevationInfo(){const e=\"elevationInfo\"in this.graphic.layer&&this.graphic.layer.elevationInfo,t=v(this.graphic),i=e?e.offset:0;return new b({mode:t,offset:i})}set focusedSymbol(e){e!==this._get(\"focusedSymbol\")&&(this._set(\"focusedSymbol\",e),this._updateGraphicSymbol(),this._circleCollisionCache=null)}grabbableForEvent(){return!0}set grabbing(e){e!==this._get(\"grabbing\")&&(this._set(\"grabbing\",e),this._updateGraphicSymbol())}set hovering(e){e!==this._get(\"hovering\")&&(this._set(\"hovering\",e),this._updateGraphicSymbol())}set selected(e){e!==this._get(\"selected\")&&(this._set(\"selected\",e),this._updateGraphicSymbol(),this.events.emit(\"select-changed\",{action:e?\"select\":\"deselect\"}))}get _focused(){return this._get(\"hovering\")||this._get(\"grabbing\")}destroy(){this.detachSymbolChanged(),this._resetGraphicSymbol(),this._set(\"view\",null)}intersectionDistance(e){const t=this._get(\"graphic\");if(!1===t.visible)return null;const s=this._get(\"focusedSymbol\"),r=i(s)?s:t.symbol,l=t.geometry;return o(l)?null:\"2d\"===this.view.type?this._intersectDistance2D(this.view,e,l,r):this._intersectDistance3D(this.view,e,t)}attach(){this.attachSymbolChanged(),i(this.layer)&&this.layer.add(this.graphic)}detach(){this.detachSymbolChanged(),this._resetGraphicSymbol(),i(this.layer)&&this.layer.remove(this.graphic)}attachSymbolChanged(){this.detachSymbolChanged(),this._graphicSymbolChangedHandle=this.graphic.watch(\"symbol\",(e=>{i(e)&&e!==this.focusedSymbol&&e!==this._originalSymbol&&(this._originalSymbol=e,this._focused&&i(this.focusedSymbol)&&(this.graphic.symbol=this.focusedSymbol))}),!0)}detachSymbolChanged(){i(this._graphicSymbolChangedHandle)&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)}_updateGraphicSymbol(){this.graphic.symbol=this._focused&&i(this.focusedSymbol)?this.focusedSymbol:this._originalSymbol}_resetGraphicSymbol(){this.graphic.symbol=this._originalSymbol}_intersectDistance2D(e,t,s,r){if(r=r||f(s),o(r))return null;let l=this._circleCollisionCache;if(\"point\"!==s.type||\"simple-marker\"!==r.type)return S(t,s,e)?1:null;if(o(l)||!l.originalPoint.equals(s)){const t=s,i=e.spatialReference;if(g(t.spatialReference,i)){const e=y(t,i);l={originalPoint:t.clone(),mapPoint:e,radiusPx:c(r.size)},this._circleCollisionCache=l}}if(i(l)){const i=h(t,G),o=e.toScreen(l.mapPoint),s=l.radiusPx,a=o.x+c(r.xoffset),n=o.y-c(r.yoffset);return _(i,[a,n])<s*s?1:null}return null}_intersectDistance3D(e,t,i){const o=e.toMap(t,{include:[i]});return o&&d(o,w,e.renderSpatialReference)?u(w,e.state.camera.eye):null}};e([r({constructOnly:!0,nonNullable:!0})],C.prototype,\"graphic\",null),e([r({readOnly:!0,dependsOn:[\"graphic\"]})],C.prototype,\"elevationInfo\",null),e([r({constructOnly:!0,nonNullable:!0})],C.prototype,\"view\",void 0),e([r({value:null})],C.prototype,\"focusedSymbol\",null),e([r({constructOnly:!0})],C.prototype,\"layer\",void 0),e([r()],C.prototype,\"interactive\",void 0),e([r()],C.prototype,\"selectable\",void 0),e([r()],C.prototype,\"grabbable\",void 0),e([r({value:!1})],C.prototype,\"grabbing\",null),e([r()],C.prototype,\"dragging\",void 0),e([r()],C.prototype,\"hovering\",null),e([r({value:!1})],C.prototype,\"selected\",null),e([r()],C.prototype,\"cursor\",void 0),C=e([l(\"esri.views.interactive.GraphicManipulator\")],C);const w=m(),G=p();export{C as GraphicManipulator};\n"],"sourceRoot":""}