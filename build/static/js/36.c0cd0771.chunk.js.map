{"version":3,"sources":["../node_modules/@arcgis/core/views/interactive/GraphicManipulator.js","../node_modules/@arcgis/core/views/draw/support/input/GraphicMoverEvents.js","../node_modules/@arcgis/core/views/draw/support/GraphicMover.js","../node_modules/@arcgis/core/views/draw/support/settings.js","../node_modules/@arcgis/core/views/draw/support/Reshape.js"],"names":["j","s","getLogger","C","e","layer","interactive","selectable","grabbable","dragging","cursor","events","n","EventEmitter","_circleCollisionCache","_graphicSymbolChangedHandle","_originalSymbol","t","geometry","this","symbol","_set","attachSymbolChanged","error","graphic","elevationInfo","v","i","offset","b","mode","_get","_updateGraphicSymbol","emit","action","detachSymbolChanged","_resetGraphicSymbol","visible","r","l","o","view","type","_intersectDistance2D","_intersectDistance3D","add","remove","watch","focusedSymbol","_focused","f","S","originalPoint","equals","spatialReference","g","y","clone","mapPoint","radiusPx","c","size","h","G","toScreen","a","x","xoffset","yoffset","_","toMap","include","d","w","renderSpatialReference","u","state","camera","eye","constructOnly","nonNullable","prototype","readOnly","dependsOn","value","m","p","index","viewEvent","allGraphics","dx","dy","totalDx","totalDy","defaultPrevented","k","_activeGraphic","_dragEvent","_handles","_hoverGraphic","_initialDragGeometry","_viewHandles","_manipulators","callbacks","onGraphicClick","onGraphicDoubleClick","onGraphicMoveStart","onGraphicMove","onGraphicMoveStop","onGraphicPointerOver","onGraphicPointerOut","onGraphicPointerDown","onGraphicPointerUp","enableMoveAllGraphics","graphics","_setUpManipulators","on","_clickHandler","TOOL","_doubleClickHandler","_pointerDownHandler","_pointerMoveHandler","_pointerUpHandler","_dragHandler","_keyDownHandler","reset","forEach","destroy","removeAll","get","set","_findTargetGraphic","indexOf","stopPropagation","origin","key","Number","MAX_VALUE","intersectionDistance","length","map","EventedAccessor","main","selected","outline","selectedOutline","hoverOutline","secondary","secondaryOutline","transparent","hoverSize","color","hoverColor","outlineColor","hoverOutlineColor","stagedColor","stagedOutlineColor","vertex","midpoint","center","fill","line","reshapeGraphics","transformGraphics","mover","M","added","removed","H","oldGraphic","vertices","E","I","removeVertex","R","default","style","width","hover","midpoints","_graphicAttributes","esriSketchTool","_mover","_totalDx","_totalDy","onReshapeStart","onReshape","onReshapeStop","onMoveStart","onMove","onMoveStop","enableMidpoints","handleGraphics","midpointGraphics","midpointSymbol","selectedHandles","_setup","refresh","_clearSelection","_resetGraphics","_reset","push","concat","includes","_removeVertex","_setupGraphics","_setupMover","_resetGraphicStateVars","removeMany","pop","_createHandleGraphics","_createMidpointGraphics","_saveRelatedIndices","addMany","symbols","attributes","pathIndex","pointIndex","pointIndexStart","pointIndexEnd","relatedGraphicIndices","_onGraphicClickCallback","_onGraphicMoveStartCallback","_onGraphicMoveCallback","_onGraphicMoveStopCallback","_onGraphicPointerOverCallback","_onGraphicPointerOutCallback","clearSelection","_isMidpoint","button","_createHandleFromMidpoint","_emitVertexAddEvent","_isHandle","native","shiftKey","_removeFromSelection","_addToSelection","_emitMoveStartEvent","_emitReshapeStartEvent","_emitMoveEvent","_syncGeometryAfterHandleMove","_emitReshapeEvent","_syncGraphicsWithGeometry","_emitMoveStopEvent","_emitReshapeStopEvent","paths","rings","_updateHandleGraphicLocations","_updateMidpointGraphicLocations","_isSelected","_updateHoverCursor","splice","coordinates","componentIndex","vertexIndex","_emitSelectEvent","_emitDeselectEvent","repeat","_removeHandles","_emitVertexRemoveEvent","onVertexSelect","onVertexDeselect","onVertexAdd","onVertexRemove","V"],"mappings":"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","file":"static/js/36.c0cd0771.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{get as t,isSome as i,isNone as o}from\"../../core/maybe.js\";import s from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as l}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import a from\"../../core/Accessor.js\";import n from\"../../core/Evented.js\";import{pt2px as c,screenPointObjectToArray as h,createScreenPointArray as p}from\"../../core/screenUtils.js\";import{c as m}from\"../../chunks/vec3f64.js\";import{k as u}from\"../../chunks/vec3.js\";import{canProjectWithoutEngine as g,project as y,projectPointToVector as d}from\"../../geometry/projection.js\";import b from\"../../symbols/support/ElevationInfo.js\";import{getDefaultSymbol2D as f}from\"../../symbols/support/defaults.js\";import{j as _}from\"../../chunks/vec2.js\";import{getGraphicEffectiveElevationMode as v}from\"../../support/elevationInfoUtils.js\";import{intersectsDrapedGeometry as S}from\"../support/drapedUtils.js\";const j=s.getLogger(\"esri.views.interactive.GraphicManipulator\");let C=class extends a{constructor(e){super(e),this.layer=null,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.dragging=!1,this.cursor=null,this.events=new n.EventEmitter,this._circleCollisionCache=null,this._graphicSymbolChangedHandle=null,this._originalSymbol=null}set graphic(e){\"mesh\"!==t(e.geometry,\"type\")?(this._circleCollisionCache=null,this._originalSymbol=e.symbol,this._set(\"graphic\",e),this.attachSymbolChanged()):j.error(\"Mesh geometries are not supported\")}get elevationInfo(){const e=\"elevationInfo\"in this.graphic.layer&&this.graphic.layer.elevationInfo,t=v(this.graphic),i=e?e.offset:0;return new b({mode:t,offset:i})}set focusedSymbol(e){e!==this._get(\"focusedSymbol\")&&(this._set(\"focusedSymbol\",e),this._updateGraphicSymbol(),this._circleCollisionCache=null)}grabbableForEvent(){return!0}set grabbing(e){e!==this._get(\"grabbing\")&&(this._set(\"grabbing\",e),this._updateGraphicSymbol())}set hovering(e){e!==this._get(\"hovering\")&&(this._set(\"hovering\",e),this._updateGraphicSymbol())}set selected(e){e!==this._get(\"selected\")&&(this._set(\"selected\",e),this._updateGraphicSymbol(),this.events.emit(\"select-changed\",{action:e?\"select\":\"deselect\"}))}get _focused(){return this._get(\"hovering\")||this._get(\"grabbing\")}destroy(){this.detachSymbolChanged(),this._resetGraphicSymbol(),this._set(\"view\",null)}intersectionDistance(e){const t=this._get(\"graphic\");if(!1===t.visible)return null;const s=this._get(\"focusedSymbol\"),r=i(s)?s:t.symbol,l=t.geometry;return o(l)?null:\"2d\"===this.view.type?this._intersectDistance2D(this.view,e,l,r):this._intersectDistance3D(this.view,e,t)}attach(){this.attachSymbolChanged(),i(this.layer)&&this.layer.add(this.graphic)}detach(){this.detachSymbolChanged(),this._resetGraphicSymbol(),i(this.layer)&&this.layer.remove(this.graphic)}attachSymbolChanged(){this.detachSymbolChanged(),this._graphicSymbolChangedHandle=this.graphic.watch(\"symbol\",(e=>{i(e)&&e!==this.focusedSymbol&&e!==this._originalSymbol&&(this._originalSymbol=e,this._focused&&i(this.focusedSymbol)&&(this.graphic.symbol=this.focusedSymbol))}),!0)}detachSymbolChanged(){i(this._graphicSymbolChangedHandle)&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)}_updateGraphicSymbol(){this.graphic.symbol=this._focused&&i(this.focusedSymbol)?this.focusedSymbol:this._originalSymbol}_resetGraphicSymbol(){this.graphic.symbol=this._originalSymbol}_intersectDistance2D(e,t,s,r){if(r=r||f(s),o(r))return null;let l=this._circleCollisionCache;if(\"point\"!==s.type||\"simple-marker\"!==r.type)return S(t,s,e)?1:null;if(o(l)||!l.originalPoint.equals(s)){const t=s,i=e.spatialReference;if(g(t.spatialReference,i)){const e=y(t,i);l={originalPoint:t.clone(),mapPoint:e,radiusPx:c(r.size)},this._circleCollisionCache=l}}if(i(l)){const i=h(t,G),o=e.toScreen(l.mapPoint),s=l.radiusPx,a=o.x+c(r.xoffset),n=o.y-c(r.yoffset);return _(i,[a,n])<s*s?1:null}return null}_intersectDistance3D(e,t,i){const o=e.toMap(t,{include:[i]});return o&&d(o,w,e.renderSpatialReference)?u(w,e.state.camera.eye):null}};e([r({constructOnly:!0,nonNullable:!0})],C.prototype,\"graphic\",null),e([r({readOnly:!0,dependsOn:[\"graphic\"]})],C.prototype,\"elevationInfo\",null),e([r({constructOnly:!0,nonNullable:!0})],C.prototype,\"view\",void 0),e([r({value:null})],C.prototype,\"focusedSymbol\",null),e([r({constructOnly:!0})],C.prototype,\"layer\",void 0),e([r()],C.prototype,\"interactive\",void 0),e([r()],C.prototype,\"selectable\",void 0),e([r()],C.prototype,\"grabbable\",void 0),e([r({value:!1})],C.prototype,\"grabbing\",null),e([r()],C.prototype,\"dragging\",void 0),e([r()],C.prototype,\"hovering\",null),e([r({value:!1})],C.prototype,\"selected\",null),e([r()],C.prototype,\"cursor\",void 0),C=e([l(\"esri.views.interactive.GraphicManipulator\")],C);const w=m(),G=p();export{C as GraphicManipulator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass t{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-click\"}}class i{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-double-click\"}}class s{constructor(t,i,s,h,e,r,c,a,n,p){this.graphic=t,this.allGraphics=i,this.index=s,this.x=h,this.y=e,this.dx=r,this.dy=c,this.totalDx=a,this.totalDy=n,this.viewEvent=p,this.defaultPrevented=!1,this.type=\"graphic-move-start\"}preventDefault(){this.defaultPrevented=!0}}class h{constructor(t,i,s,h,e,r,c,a,n,p){this.graphic=t,this.allGraphics=i,this.index=s,this.x=h,this.y=e,this.dx=r,this.dy=c,this.totalDx=a,this.totalDy=n,this.viewEvent=p,this.defaultPrevented=!1,this.type=\"graphic-move\"}preventDefault(){this.defaultPrevented=!0}}class e{constructor(t,i,s,h,e,r,c,a,n,p){this.graphic=t,this.allGraphics=i,this.index=s,this.x=h,this.y=e,this.dx=r,this.dy=c,this.totalDx=a,this.totalDy=n,this.viewEvent=p,this.defaultPrevented=!1,this.type=\"graphic-move-stop\"}preventDefault(){this.defaultPrevented=!0}}class r{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-over\"}}class c{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-out\"}}class a{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-down\"}}class n{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-up\"}}export{t as GraphicClickEvent,i as GraphicDoubleClickEvent,h as GraphicMoveEvent,s as GraphicMoveStartEvent,e as GraphicMoveStopEvent,a as GraphicPointerDownEvent,c as GraphicPointerOutEvent,r as GraphicPointerOverEvent,n as GraphicPointerUpEvent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{clone as t}from\"../../../core/lang.js\";import{isSome as e}from\"../../../core/maybe.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import a from\"../../../core/Evented.js\";import o from\"../../../core/Handles.js\";import{watch as h,whenOnce as c}from\"../../../core/watchUtils.js\";import{ViewEventPriorities as n}from\"../../input/InputManager.js\";import{createScreenPointFromEvent as p}from\"../../support/screenUtils.js\";import{cloneMove as l}from\"./drawUtils.js\";import{GraphicManipulator as v}from\"../../interactive/GraphicManipulator.js\";import{GraphicClickEvent as d,GraphicDoubleClickEvent as g,GraphicPointerDownEvent as _,GraphicPointerUpEvent as G,GraphicPointerOutEvent as m,GraphicMoveStartEvent as u,GraphicMoveEvent as y,GraphicMoveStopEvent as f,GraphicPointerOverEvent as w}from\"./input/GraphicMoverEvents.js\";let k=class extends a.EventedAccessor{constructor(i){super(i),this._activeGraphic=null,this._dragEvent=null,this._handles=new o,this._hoverGraphic=null,this._initialDragGeometry=null,this._viewHandles=new o,this._manipulators=[],this.type=\"graphic-mover\",this.callbacks={onGraphicClick(){},onGraphicDoubleClick(){},onGraphicMoveStart(){},onGraphicMove(){},onGraphicMoveStop(){},onGraphicPointerOver(){},onGraphicPointerOut(){},onGraphicPointerDown(){},onGraphicPointerUp(){}},this.enableMoveAllGraphics=!1,this.graphics=[],this.view=null}initialize(){this._setUpManipulators(),this._handles.add([h(this,[\"graphics\",\"graphics.length\"],(()=>{this._setUpManipulators()})),c(this,\"view.ready\",(()=>{this._viewHandles.add([this.view.on(\"immediate-click\",(i=>this._clickHandler(i)),n.TOOL),this.view.on(\"double-click\",(i=>this._doubleClickHandler(i)),n.TOOL),this.view.on(\"pointer-down\",(i=>this._pointerDownHandler(i)),n.TOOL),this.view.on(\"pointer-move\",(i=>this._pointerMoveHandler(i)),n.TOOL),this.view.on(\"pointer-up\",(i=>this._pointerUpHandler(i)),n.TOOL),this.view.on(\"drag\",(i=>this._dragHandler(i)),n.TOOL),this.view.on(\"key-down\",(i=>this._keyDownHandler(i)),n.TOOL)])}))])}destroy(){this.reset(),this._manipulators.forEach((i=>i.destroy())),this._manipulators=null,this._viewHandles.removeAll(),this._handles.removeAll()}get state(){const i=!!this.get(\"view.ready\"),t=!!this.get(\"graphics.length\"),e=this._activeGraphic;return i&&t?e?\"moving\":\"active\":i?\"ready\":\"disabled\"}reset(){this._activeGraphic=null,this._hoverGraphic=null,this._dragEvent=null}updateGeometry(i,t){const e=this.graphics[i];e&&e.set(\"geometry\",t)}_clickHandler(i){const t=this._findTargetGraphic(p(i));if(t){const e=new d(t,this.graphics.indexOf(t),i.x,i.y,i);this.emit(\"graphic-click\",e),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(e)}}_doubleClickHandler(i){const t=this._findTargetGraphic(p(i));if(t){const e=new g(t,this.graphics.indexOf(t),i.x,i.y,i);this.emit(\"graphic-double-click\",e),this.callbacks.onGraphicDoubleClick&&this.callbacks.onGraphicDoubleClick(e)}}_pointerDownHandler(i){const t=this._findTargetGraphic(p(i));if(t){this._activeGraphic=t;const{x:e,y:r}=i,s=new _(t,this.graphics.indexOf(t),e,r,i);this.emit(\"graphic-pointer-down\",s),this.callbacks.onGraphicPointerDown&&this.callbacks.onGraphicPointerDown(s)}else this._activeGraphic=null}_pointerUpHandler(i){if(this._activeGraphic){const{x:t,y:e}=i,r=this.graphics.indexOf(this._activeGraphic),s=new G(this._activeGraphic,r,t,e,i);this.emit(\"graphic-pointer-up\",s),this.callbacks.onGraphicPointerUp&&this.callbacks.onGraphicPointerUp(s)}}_pointerMoveHandler(i){if(this._dragEvent)return;const t=this._findTargetGraphic(p(i));if(t){const{x:e,y:r}=i;if(this._hoverGraphic){if(this._hoverGraphic===t)return;const s=this.graphics.indexOf(this._hoverGraphic),a=new m(this.graphics[s],s,e,r,i);this._hoverGraphic=null,this.emit(\"graphic-pointer-out\",a),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(a)}const s=this.graphics.indexOf(t),a=new w(t,s,e,r,i);return this._hoverGraphic=t,this.emit(\"graphic-pointer-over\",a),void(this.callbacks.onGraphicPointerOver&&this.callbacks.onGraphicPointerOver(a))}if(this._hoverGraphic){const{x:t,y:e}=i,r=this.graphics.indexOf(this._hoverGraphic),s=new m(this.graphics[r],r,t,e,i);this._hoverGraphic=null,this.emit(\"graphic-pointer-out\",s),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(s)}}_dragHandler(i){if(\"start\"!==i.action&&!this._dragEvent||!this._activeGraphic||!this._activeGraphic.geometry)return;i.stopPropagation();const{action:e,x:r,y:s}=i,a=this.graphics.indexOf(this._activeGraphic),o=this._activeGraphic.geometry,h=this._dragEvent?r-this._dragEvent.x:0,c=this._dragEvent?s-this._dragEvent.y:0,n=r-i.origin.x,p=s-i.origin.y;if(this._activeGraphic.geometry=l(o,h,c,this.view),this.enableMoveAllGraphics&&this.graphics.forEach((i=>{i!==this._activeGraphic&&(i.geometry=l(i.geometry,h,c,this.view))})),this._dragEvent=i,\"start\"===e){this._initialDragGeometry=t(o);const e=new u(this._activeGraphic,this.graphics,a,r,s,h,c,n,p,i);this.emit(\"graphic-move-start\",e),this.callbacks.onGraphicMoveStart&&this.callbacks.onGraphicMoveStart(e),e.defaultPrevented&&this._activeGraphic.set(\"geometry\",o)}else if(\"update\"===e){const t=new y(this._activeGraphic,this.graphics,a,r,s,h,c,n,p,i);this.emit(\"graphic-move\",t),this.callbacks.onGraphicMove&&this.callbacks.onGraphicMove(t),t.defaultPrevented&&this._activeGraphic.set(\"geometry\",o)}else{const t=new f(this._activeGraphic,this.graphics,a,r,s,h,c,n,p,i);this._dragEvent=null,this._activeGraphic=null,this.emit(\"graphic-move-stop\",t),this.callbacks.onGraphicMoveStop&&this.callbacks.onGraphicMoveStop(t),t.defaultPrevented&&this.graphics[a].set(\"geometry\",this._initialDragGeometry),this._initialDragGeometry=null}}_keyDownHandler(i){\"a\"!==i.key&&\"d\"!==i.key&&\"n\"!==i.key||\"moving\"!==this.state||i.stopPropagation()}_findTargetGraphic(i){let t=null,r=Number.MAX_VALUE;return this._manipulators.forEach((s=>{const a=s.intersectionDistance(i);e(a)&&a<r&&(r=a,t=s.graphic)})),t}_setUpManipulators(){const{graphics:i,view:t}=this;this._manipulators.forEach((i=>i.destroy())),this._manipulators=null!=i&&i.length?i.map((i=>new v({graphic:i,view:t}))):[]}};i([r()],k.prototype,\"_activeGraphic\",void 0),i([r({readOnly:!0})],k.prototype,\"type\",void 0),i([r()],k.prototype,\"callbacks\",void 0),i([r()],k.prototype,\"enableMoveAllGraphics\",void 0),i([r()],k.prototype,\"graphics\",void 0),i([r({dependsOn:[\"view.ready\",\"graphics.length\",\"_activeGraphic\"],readOnly:!0})],k.prototype,\"state\",null),i([r()],k.prototype,\"view\",void 0),k=i([s(\"esri.views.draw.support.GraphicMover\")],k);var b=k;export default b;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../../Color.js\";const o={main:new e([255,127,0]),selected:new e([255,255,255]),outline:new e([0,0,0,.5]),selectedOutline:new e([255,255,255]),hoverOutline:new e([255,255,255]),secondary:new e([255,255,255]),secondaryOutline:new e([100,100,100]),transparent:new e([0,0,0,0])};function t(e,o){if(o)for(const t in o)e[t]=o[t]}class s{constructor(e){this.size=8,this.hoverSize=10,this.color=o.main,this.hoverColor=o.main,this.outlineColor=o.outline,this.hoverOutlineColor=o.hoverOutline,t(this,e)}}class n{constructor(e){this.color=o.secondary,this.hoverColor=o.main,t(this,e)}}class r{constructor(e){this.color=o.transparent,this.hoverColor=o.transparent,this.outlineColor=o.main,this.hoverOutlineColor=o.main,this.stagedColor=o.transparent,this.stagedOutlineColor=o.secondary,t(this,e)}}class i{constructor(e){this.vertex=new s,this.midpoint=new s({color:o.secondary,outlineColor:o.secondaryOutline,size:6}),this.selected=new s({color:o.selected,hoverColor:o.selected,hoverOutlineColor:o.hoverOutline}),t(this,e)}}class l{constructor(e){this.center=new s({color:o.secondaryOutline}),this.fill=new r,this.line=new n,this.vertex=new s({color:o.selected,outlineColor:o.main,hoverColor:o.selected,hoverOutlineColor:o.secondaryOutline}),t(this,e)}}const c=new class{constructor(e){this.reshapeGraphics=new i,this.transformGraphics=new l,t(this,e)}};export{o as colors,c as settings};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{unwrap as t,get as s}from\"../../../core/maybe.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import r from\"../../../geometry/Point.js\";import{geometryToCoordinates as h,getMidpoint as a}from\"../../../geometry/support/coordsUtils.js\";import\"../../../geometry.js\";import c from\"../../../core/Evented.js\";import n from\"../../../symbols/SimpleMarkerSymbol.js\";import l from\"../../../Graphic.js\";import p from\"../../../core/Handles.js\";import{whenOnce as d,pausable as m}from\"../../../core/watchUtils.js\";import{ViewEventPriorities as v}from\"../../input/InputManager.js\";import{cloneMove as y}from\"./drawUtils.js\";import{addUniqueLayer as _}from\"./layerUtils.js\";import u from\"./GraphicMover.js\";import{settings as g}from\"./settings.js\";class f{constructor(e,t,s){this.graphic=e,this.mover=t,this.selected=s,this.type=\"reshape-start\"}}class x{constructor(e,t,s){this.graphic=e,this.mover=t,this.selected=s,this.type=\"reshape\"}}class b{constructor(e,t,s){this.graphic=e,this.mover=t,this.selected=s,this.type=\"reshape-stop\"}}class G{constructor(e,t,s){this.mover=e,this.dx=t,this.dy=s,this.type=\"move-start\"}}class S{constructor(e,t,s){this.mover=e,this.dx=t,this.dy=s,this.type=\"move\"}}class w{constructor(e,t,s){this.mover=e,this.dx=t,this.dy=s,this.type=\"move-stop\"}}class M{constructor(e){this.added=e,this.type=\"vertex-select\"}}class k{constructor(e){this.removed=e,this.type=\"vertex-deselect\"}}class H{constructor(e,t,s,i){this.added=e,this.graphic=t,this.oldGraphic=s,this.vertices=i,this.type=\"vertex-add\"}}class E{constructor(e,t,s,i){this.removed=e,this.graphic=t,this.oldGraphic=s,this.vertices=i,this.type=\"vertex-remove\"}}const I={removeVertex:[\"Backspace\",\"Delete\"]},R=g.reshapeGraphics,C={vertices:{default:new n({style:\"circle\",size:R.vertex.size,color:R.vertex.color,outline:{color:R.vertex.outlineColor,width:1}}),hover:new n({style:\"circle\",size:R.vertex.hoverSize,color:R.vertex.hoverColor,outline:{color:R.vertex.hoverOutlineColor,width:1}}),selected:new n({style:\"circle\",size:R.selected.size,color:R.selected.color,outline:{color:R.selected.outlineColor,width:1}})},midpoints:{default:new n({style:\"circle\",size:R.midpoint.size,color:R.midpoint.color,outline:{color:R.midpoint.outlineColor,width:1}}),hover:new n({style:\"circle\",size:R.midpoint.size,color:R.midpoint.color,outline:{color:R.midpoint.outlineColor,width:1}})}};let j=class extends c.EventedAccessor{constructor(e){super(e),this._handles=new p,this._graphicAttributes={esriSketchTool:\"box\"},this._mover=null,this._viewHandles=new p,this._totalDx=0,this._totalDy=0,this.callbacks={onReshapeStart(){},onReshape(){},onReshapeStop(){},onMoveStart(){},onMove(){},onMoveStop(){},onGraphicClick(){}},this.enableMidpoints=!0,this.graphic=null,this.handleGraphics=[],this.layer=null,this.midpointGraphics=[],this.midpointSymbol=new n({style:\"circle\",size:6,color:[200,200,200],outline:{color:[100,100,100],width:1}}),this.selectedHandles=[],this.type=\"reshape\",this.view=null}initialize(){this._setup(),this._handles.add([d(this,\"view.ready\",(()=>{const{layer:e,view:t}=this;_(t,e),this._viewHandles.add([t.on(\"key-down\",(e=>this._keyDownHandler(e)),v.TOOL)])})),m(this,\"graphic\",(()=>this.refresh())),m(this,\"layer\",((e,t)=>{t&&(this._clearSelection(),this._resetGraphics(t)),this.refresh()})),m(this,\"enableMidpoints\",(()=>{this.refresh()}))])}destroy(){this._reset(),this._mover&&this._mover.destroy(),this._mover=null,this._handles.removeAll(),this._handles=null,this._viewHandles.removeAll(),this._viewHandles=null}get state(){const e=!!this.get(\"view.ready\"),t=!(!this.get(\"graphic\")||!this.get(\"layer\"));return e&&t?\"active\":e?\"ready\":\"disabled\"}set symbols(e){const{midpoints:t=C.midpoints,vertices:s=C.vertices}=e||{};this._set(\"symbols\",{midpoints:t,vertices:s})}isUIGraphic(e){const t=[];return this.graphic&&t.push(this.graphic),t.concat(this.handleGraphics,this.midpointGraphics),t.length&&t.includes(e)}refresh(){this._reset(),this._setup()}reset(){this.graphic=null}clearSelection(){this._clearSelection()}removeSelectedHandles(){this.selectedHandles.length&&this._removeVertex(this.selectedHandles)}_setup(){this.graphic&&this.layer&&(this._setupGraphics(),this._setupMover())}_reset(){this._clearSelection(),this._resetGraphicStateVars(),this._resetGraphics(),this._mover&&this._mover.destroy(),this._mover=null,this.view.cursor=\"default\"}_resetGraphicStateVars(){this._totalDx=0,this._totalDy=0}_resetGraphics(e){const t=e||this.layer;t&&(t.removeMany(this.handleGraphics),t.removeMany(this.midpointGraphics)),this.handleGraphics.forEach((e=>e.destroy())),this.midpointGraphics.forEach((e=>e.destroy())),this._set(\"handleGraphics\",[]),this._set(\"midpointGraphics\",[]),this._set(\"selectedHandles\",[])}_setupGraphics(){const e=t(this.graphic.geometry),s=h(e.clone());if(\"polygon\"===e.type)for(const e of s){const t=e[e.length-1];e[0][0]===t[0]&&e[0][1]===t[1]&&e.length>2&&e.pop()}this._set(\"handleGraphics\",this._createHandleGraphics(s)),this.enableMidpoints&&this._set(\"midpointGraphics\",this._createMidpointGraphics(s)),this._saveRelatedIndices(this.handleGraphics),this.layer.addMany(this.midpointGraphics),this.layer.addMany(this.handleGraphics)}_createHandleGraphics(e){const{_graphicAttributes:t,symbols:s,view:{spatialReference:i}}=this,o=[];return null==e||e.forEach(((e,h)=>{e.forEach(((e,a)=>{var c;const[n,p]=e;o.push(new l({geometry:new r({x:n,y:p,spatialReference:i}),symbol:null==s||null==(c=s.vertices)?void 0:c.default,attributes:{...t,pathIndex:h,pointIndex:a}}))}))})),o}_createMidpointGraphics(e){const{_graphicAttributes:t,symbols:i,view:{spatialReference:o}}=this,h=[];return null==e||e.forEach(((e,c)=>{e.forEach(((n,p)=>{const[d,m]=n,v=e[p+1]?p+1:0;if(\"polygon\"===s(this.graphic.geometry,\"type\")||0!==v){const[s,n]=e[v],[y,_]=a([d,m],[s,n]);h.push(new l({geometry:new r({x:y,y:_,spatialReference:o}),symbol:i.midpoints.default,attributes:{...t,pathIndex:c,pointIndexStart:p,pointIndexEnd:v}}))}}))})),h}_saveRelatedIndices(e){if(!e)return;const t=e.map((({geometry:e})=>({x:e.x,y:e.y})));for(let s=0;s<t.length;s++){const i=[];for(let e=0;e<t.length;e++){if(s===e)continue;const o=t[s],r=t[e];o.x===r.x&&o.y===r.y&&i.push(e)}e[s].attributes.relatedGraphicIndices=i}}_setupMover(){this._mover=new u({enableMoveAllGraphics:!1,graphics:[].concat(this.handleGraphics,this.midpointGraphics,this.graphic),view:this.view,callbacks:{onGraphicClick:e=>this._onGraphicClickCallback(e),onGraphicMoveStart:e=>this._onGraphicMoveStartCallback(e),onGraphicMove:e=>this._onGraphicMoveCallback(e),onGraphicMoveStop:e=>this._onGraphicMoveStopCallback(e),onGraphicPointerOver:e=>this._onGraphicPointerOverCallback(e),onGraphicPointerOut:e=>this._onGraphicPointerOutCallback(e)}})}_onGraphicClickCallback(e){e.viewEvent.stopPropagation();const t=e.graphic;if(t===this.graphic)this.clearSelection(),this.emit(\"graphic-click\",e),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(e);else if(this._isMidpoint(t)){if(2===e.viewEvent.button)return;const s=this.graphic.clone(),i=this._createHandleFromMidpoint(t);this.refresh(),this._emitVertexAddEvent([t],s,i)}else if(this._isHandle(t))if(e.viewEvent.stopPropagation(),2===e.viewEvent.button)this._removeVertex(t);else{e.viewEvent.native.shiftKey||this._clearSelection(),this.selectedHandles.includes(t)?this._removeFromSelection(t,!0):this._addToSelection(t)}}_onGraphicMoveStartCallback(e){const t=e.graphic;if(this._resetGraphicStateVars(),t===this.graphic){const{dx:t,dy:s}=e;return this.handleGraphics.forEach((e=>e.visible=!1)),this.midpointGraphics.forEach((e=>e.visible=!1)),this._clearSelection(),void this._emitMoveStartEvent(t,s)}if(this._isMidpoint(t)){this._clearSelection();const e=this.graphic.clone(),s=this._createHandleFromMidpoint(t);this._emitVertexAddEvent([t],e,s),this._addToSelection(t)}else this.selectedHandles.includes(t)||(this._clearSelection(),this._addToSelection(t));this._emitReshapeStartEvent(t)}_onGraphicMoveCallback(e){const{graphic:t,dx:s,dy:i}=e;this._totalDx+=s,this._totalDy+=i,t===this.graphic?this._emitMoveEvent(s,i):(this._syncGeometryAfterHandleMove(t,s,i),this._emitReshapeEvent(t))}_onGraphicMoveStopCallback(e){const{graphic:t,dx:s,dy:i}=e;if(this._totalDx+=s,this._totalDy+=i,t===this.graphic){for(const e of[].concat(this.handleGraphics,this.midpointGraphics))e.visible=!0;this._syncGraphicsWithGeometry(),this._emitMoveStopEvent()}else this._syncGeometryAfterHandleMove(t,s,i),this._isMidpoint(t)&&this.refresh(),this._emitReshapeStopEvent(t);this._resetGraphicStateVars()}_syncGraphicsWithGeometry(){const e=this.graphic.geometry,t=\"polyline\"===e.type?e.paths:e.rings;this._updateHandleGraphicLocations(t),this._updateMidpointGraphicLocations(t)}_updateHandleGraphicLocations(e){for(const t of this.handleGraphics){const{pathIndex:s,pointIndex:i}=t.attributes,[o,h]=e[s][i];t.set(\"geometry\",new r(o,h,this.view.spatialReference))}}_updateMidpointGraphicLocations(e){for(const t of this.midpointGraphics){const{pathIndex:s,pointIndexStart:i,pointIndexEnd:o}=t.attributes,[h,c]=e[s][i],[n,l]=e[s][o],[p,d]=a([h,c],[n,l]);t.geometry=new r({x:p,y:d,spatialReference:this.view.spatialReference})}}_syncGeometryAfterHandleMove(e,s,i){const o=t(this.graphic.geometry).clone(),r=\"polyline\"===o.type?o.paths:o.rings,{pathIndex:h,pointIndex:a}=e.attributes,{x:c,y:n}=e.geometry,l=r[h].length-1;if(r[h][a]=[c,n],\"polygon\"===o.type&&(0===a?r[h][l]=[c,n]:a===l&&(r[h][0]=[c,n])),this._isHandle(e)){const{relatedGraphicIndices:t}=e.attributes;for(const s of t){const t=this.handleGraphics[s],{pathIndex:i,pointIndex:o}=t.attributes;r[i][o]=[c,n],t.geometry=e.geometry}for(const t of this.selectedHandles)if(t!==e){const{pathIndex:e,pointIndex:h,relatedGraphicIndices:a}=t.attributes,c=y(t.geometry,s,i,this.view),n=r[e].length-1;r[e][h]=[c.x,c.y],t.geometry=c,\"polygon\"===o.type&&(0===h?r[e][n]=[c.x,c.y]:h===n&&(r[e][0]=[c.x,c.y]));for(const e of a){const t=this.handleGraphics[e],{pathIndex:s,pointIndex:i}=t.attributes;r[s][i]=[c.x,c.y],t.geometry=c}}this._updateMidpointGraphicLocations(r)}this.graphic.geometry=o}_onGraphicPointerOverCallback(e){const t=e.graphic;this._isHandle(t)&&!this._isSelected(t)&&(t.symbol=this.symbols.vertices.hover),this._updateHoverCursor(t)}_onGraphicPointerOutCallback(e){const t=e.graphic;this._isHandle(t)&&!this._isSelected(t)&&(t.symbol=this.symbols.vertices.default),this.view.cursor=\"default\"}_createHandleFromMidpoint(e){const{_graphicAttributes:s}=this,i=[],o=t(this.graphic.geometry).clone(),{pathIndex:r,pointIndexStart:h,pointIndexEnd:a}=e.attributes,{x:c,y:n}=e.geometry,l=0===a?h+1:a,p=\"polyline\"===o.type?o.paths:o.rings;return p[r].splice(l,0,[c,n]),e.attributes={...s,pathIndex:r,pointIndex:l,relatedGraphicIndices:[]},i.push({coordinates:p[r][l],componentIndex:r,vertexIndex:l}),this.graphic.geometry=o,i}_removeHandles(e){const s=t(this.graphic.geometry).clone(),i=\"polygon\"===s.type?s.rings:s.paths,o=[];e instanceof l&&(e=[e]);for(const t of e){const{x:e,y:s}=t.geometry;for(let t=0;t<i.length;t++){const r=i[t];for(let h=0;h<r.length;h++){const[a,c]=r[h];e===a&&s===c&&(o.push({coordinates:i[t][h],componentIndex:t,vertexIndex:h}),i[t].splice(Number(h),1))}}}if(\"polygon\"===s.type)for(const e of i){const[t,s]=e[0],[o,r]=e[e.length-1];(1===e.length||e.length<3&&t===o&&s===r)&&i.splice(i.indexOf(e),1),e.length>2&&(t!==o||s!==r)&&e.push(e[0])}else for(const e of i)1===e.length&&i.splice(i.indexOf(e),1);return this.graphic.geometry=s,o}_addToSelection(e){e instanceof l&&(e=[e]);for(const t of e)t.symbol=this.symbols.vertices.selected;this._set(\"selectedHandles\",this.selectedHandles.concat(e)),this._emitSelectEvent(e)}_removeFromSelection(e,t){const{vertices:s}=this.symbols,i=t?s.hover:s.default;e instanceof l&&(e=[e]);for(const t of e)this.selectedHandles.splice(this.selectedHandles.indexOf(t),1),this._set(\"selectedHandles\",this.selectedHandles),t.set(\"symbol\",i);this._emitDeselectEvent(e)}_clearSelection(){if(this.selectedHandles.length){const e=this.selectedHandles;for(const e of this.selectedHandles)e.set(\"symbol\",this.symbols.vertices.default);this._set(\"selectedHandles\",[]),this._emitDeselectEvent(e)}}_keyDownHandler(e){I.removeVertex.includes(e.key)&&!e.repeat&&this.selectedHandles.length&&this._removeVertex(this.selectedHandles)}_removeVertex(e){if(\"polygon\"===this.graphic.geometry.type&&this.handleGraphics.length<4||this.handleGraphics.length<3)return;const t=this.graphic.clone();e instanceof l&&(e=[e]);const s=this._removeHandles(e);this.refresh(),this._emitVertexRemoveEvent(e,t,s)}_isHandle(e){return this.handleGraphics.includes(e)}_isSelected(e){return this._isHandle(e)&&this.selectedHandles.includes(e)}_isMidpoint(e){return this.midpointGraphics.includes(e)}_updateHoverCursor(e){this.view.cursor=this._isMidpoint(e)?\"copy\":\"move\"}_emitMoveStartEvent(e,t){const s=new G(this.graphic,e,t);this.emit(\"move-start\",s),this.callbacks.onMoveStart&&this.callbacks.onMoveStart(s)}_emitMoveEvent(e,t){const s=new S(this.graphic,e,t);this.emit(\"move\",s),this.callbacks.onMove&&this.callbacks.onMove(s)}_emitMoveStopEvent(){const e=new w(this.graphic,this._totalDx,this._totalDy);this.emit(\"move-stop\",e),this.callbacks.onMoveStop&&this.callbacks.onMoveStop(e)}_emitReshapeStartEvent(e){const t=new f(this.graphic,e,this.selectedHandles);this.emit(\"reshape-start\",t),this.callbacks.onReshapeStart&&this.callbacks.onReshapeStart(t)}_emitReshapeEvent(e){const t=new x(this.graphic,e,this.selectedHandles);this.emit(\"reshape\",t),this.callbacks.onReshape&&this.callbacks.onReshape(t)}_emitReshapeStopEvent(e){const t=new b(this.graphic,e,this.selectedHandles);this.emit(\"reshape-stop\",t),this.callbacks.onReshapeStop&&this.callbacks.onReshapeStop(t)}_emitSelectEvent(e){const t=new M(e);this.emit(\"select\",t),this.callbacks.onVertexSelect&&this.callbacks.onVertexSelect(t)}_emitDeselectEvent(e){const t=new k(e);this.emit(\"deselect\",t),this.callbacks.onVertexDeselect&&this.callbacks.onVertexDeselect(t)}_emitVertexAddEvent(e,t,s){const i=new H(e,this.graphic,t,s);this.emit(\"vertex-add\",i),this.callbacks.onVertexAdd&&this.callbacks.onVertexAdd(i)}_emitVertexRemoveEvent(e,t,s){const i=new E(e,this.graphic,t,s);this.emit(\"vertex-remove\",i),this.callbacks.onVertexRemove&&this.callbacks.onVertexRemove(i)}};e([i()],j.prototype,\"callbacks\",void 0),e([i()],j.prototype,\"enableMidpoints\",void 0),e([i()],j.prototype,\"graphic\",void 0),e([i({readOnly:!0})],j.prototype,\"handleGraphics\",void 0),e([i()],j.prototype,\"layer\",void 0),e([i({readOnly:!0})],j.prototype,\"midpointGraphics\",void 0),e([i()],j.prototype,\"midpointSymbol\",void 0),e([i({readOnly:!0})],j.prototype,\"selectedHandles\",void 0),e([i({dependsOn:[\"view.ready\",\"graphic\",\"layer\"],readOnly:!0})],j.prototype,\"state\",null),e([i({value:C})],j.prototype,\"symbols\",null),e([i({readOnly:!0})],j.prototype,\"type\",void 0),e([i()],j.prototype,\"view\",void 0),j=e([o(\"esri.views.draw.support.Reshape\")],j);var V=j;export default V;\n"],"sourceRoot":""}