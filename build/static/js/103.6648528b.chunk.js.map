{"version":3,"sources":["../node_modules/@arcgis/core/views/interactive/GraphicManipulator.js","../node_modules/@arcgis/core/views/draw/support/input/GraphicMoverEvents.js","../node_modules/@arcgis/core/views/draw/support/GraphicMover.js","../node_modules/@arcgis/core/views/draw/support/Reshape.js"],"names":["j","s","getLogger","C","e","layer","interactive","selectable","grabbable","dragging","cursor","events","n","EventEmitter","_circleCollisionCache","_graphicSymbolChangedHandle","_originalSymbol","t","geometry","this","symbol","_set","attachSymbolChanged","error","graphic","elevationInfo","v","o","offset","b","mode","_get","_updateGraphicSymbol","emit","action","detachSymbolChanged","_resetGraphicSymbol","visible","r","l","i","view","type","_intersectDistance2D","_intersectDistance3D","add","remove","watch","focusedSymbol","_focused","f","a","S","originalPoint","equals","spatialReference","y","g","clone","mapPoint","radiusPx","c","size","h","G","toScreen","x","xoffset","p","yoffset","_","toMap","include","d","w","renderSpatialReference","u","state","camera","eye","constructOnly","nonNullable","prototype","readOnly","value","m","index","viewEvent","allGraphics","dx","dy","totalDx","totalDy","defaultPrevented","k","_activeGraphic","_dragEvent","_handles","_hoverGraphic","_initialDragGeometry","_viewHandles","_manipulators","callbacks","onGraphicClick","onGraphicDoubleClick","onGraphicMoveStart","onGraphicMove","onGraphicMoveStop","onGraphicPointerOver","onGraphicPointerOut","onGraphicPointerDown","onGraphicPointerUp","enableMoveAllGraphics","graphics","_setUpManipulators","on","_clickHandler","TOOL","_doubleClickHandler","_pointerDownHandler","_pointerMoveHandler","_pointerUpHandler","_dragHandler","_keyDownHandler","reset","forEach","destroy","removeAll","get","set","_findTargetGraphic","indexOf","stopPropagation","origin","key","Number","MAX_VALUE","intersectionDistance","length","map","EventedAccessor","mover","selected","E","V","I","R","added","A","removed","D","oldGraphic","vertices","O","z","removeVertex","T","reshapeGraphics","F","default","style","vertex","color","outline","outlineColor","width","hover","hoverSize","hoverColor","hoverOutlineColor","midpoints","midpoint","U","_graphicAttributes","esriSketchTool","_mover","_snappingTask","_stagedVertex","_totalDx","_totalDy","onReshapeStart","onReshape","onReshapeStop","onMoveStart","onMove","onMoveStop","enableMidpoints","handleGraphics","midpointGraphics","midpointSymbol","selectedHandles","snappingManager","_setup","refresh","_clearSelection","_resetGraphics","_reset","push","concat","includes","_removeVertex","_setupGraphics","_setupMover","_geometryHelper","fromGeometry","_snappingContext","pointer","pointerType","excludeFeature","visualizer","vertexHandle","_getVertexFromEditGeometry","_resetGraphicStateVars","_resetSnappingStateVars","doneSnapping","removeMany","pop","_createHandleGraphics","_createMidpointGraphics","_saveRelatedIndices","addMany","symbols","attributes","pathIndex","pointIndex","pointIndexStart","pointIndexEnd","relatedGraphicIndices","M","_onGraphicClickCallback","_onGraphicMoveStartCallback","_onGraphicMoveCallback","_onGraphicMoveStopCallback","_onGraphicPointerOverCallback","_onGraphicPointerOutCallback","clearSelection","_isMidpoint","button","_createHandleFromMidpoint","_emitVertexAddEvent","_isHandle","shiftKey","_removeFromSelection","_addToSelection","_emitMoveStartEvent","_setUpGeometryHelper","_saveSnappingContextForHandle","_onHandleMove","_emitReshapeStartEvent","_syncGraphicsWithGeometry","_emitMoveEvent","_emitReshapeEvent","_emitMoveStopEvent","_emitReshapeStopEvent","paths","rings","_updateHandleGraphicLocations","_updateMidpointGraphicLocations","editGeometry","components","update","_syncGeometryAfterHandleMove","snap","valid","apply","_getUpdatedGeometryAfterHandleMove","_moveRelatedCoordinates","_moveSelectedHandleCoordinates","_syncEditGeometryAfterHandleMove","H","pos","moveVertices","_isSelected","_updateHoverCursor","splice","coordinates","componentIndex","vertexIndex","_emitSelectEvent","_emitDeselectEvent","repeat","_removeHandles","_emitVertexRemoveEvent","onVertexSelect","onVertexDeselect","onVertexAdd","onVertexRemove","P"],"mappings":"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","file":"static/js/103.6648528b.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{get as t,isNone as o,isSome as i}from\"../../core/maybe.js\";import s from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as l}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import a from\"../../core/Accessor.js\";import n from\"../../core/Evented.js\";import{pt2px as c,screenPointObjectToArray as h,createScreenPointArray as p}from\"../../core/screenUtils.js\";import{c as m}from\"../../chunks/vec3f64.js\";import{k as u}from\"../../chunks/vec3.js\";import{canProjectWithoutEngine as y,project as g,projectPointToVector as d}from\"../../geometry/projection.js\";import b from\"../../symbols/support/ElevationInfo.js\";import{getDefaultSymbol2D as f}from\"../../symbols/support/defaults.js\";import{j as _}from\"../../chunks/vec2.js\";import{getGraphicEffectiveElevationMode as v}from\"../../support/elevationInfoUtils.js\";import{intersectsDrapedGeometry as S}from\"../support/drapedUtils.js\";const j=s.getLogger(\"esri.views.interactive.GraphicManipulator\");let C=class extends a{constructor(e){super(e),this.layer=null,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.dragging=!1,this.cursor=null,this.events=new n.EventEmitter,this._circleCollisionCache=null,this._graphicSymbolChangedHandle=null,this._originalSymbol=null}set graphic(e){\"mesh\"!==t(e.geometry,\"type\")?(this._circleCollisionCache=null,this._originalSymbol=e.symbol,this._set(\"graphic\",e),this.attachSymbolChanged()):j.error(\"Mesh geometries are not supported\")}get elevationInfo(){const e=\"elevationInfo\"in this.graphic.layer&&this.graphic.layer.elevationInfo,t=v(this.graphic),o=e?e.offset:0;return new b({mode:t,offset:o})}set focusedSymbol(e){e!==this._get(\"focusedSymbol\")&&(this._set(\"focusedSymbol\",e),this._updateGraphicSymbol(),this._circleCollisionCache=null)}grabbableForEvent(){return!0}set grabbing(e){e!==this._get(\"grabbing\")&&(this._set(\"grabbing\",e),this._updateGraphicSymbol())}set hovering(e){e!==this._get(\"hovering\")&&(this._set(\"hovering\",e),this._updateGraphicSymbol())}set selected(e){e!==this._get(\"selected\")&&(this._set(\"selected\",e),this._updateGraphicSymbol(),this.events.emit(\"select-changed\",{action:e?\"select\":\"deselect\"}))}get _focused(){return this._get(\"hovering\")||this._get(\"grabbing\")}destroy(){this.detachSymbolChanged(),this._resetGraphicSymbol(),this._set(\"view\",null)}intersectionDistance(e){const t=this.graphic;if(!1===t.visible)return null;const s=t.geometry;if(o(s))return null;const r=this._get(\"focusedSymbol\"),l=i(r)?r:t.symbol;return\"2d\"===this.view.type?this._intersectDistance2D(this.view,e,s,l):this._intersectDistance3D(this.view,e,t)}attach(){this.attachSymbolChanged(),i(this.layer)&&this.layer.add(this.graphic)}detach(){this.detachSymbolChanged(),this._resetGraphicSymbol(),i(this.layer)&&this.layer.remove(this.graphic)}attachSymbolChanged(){this.detachSymbolChanged(),this._graphicSymbolChangedHandle=this.graphic.watch(\"symbol\",(e=>{i(e)&&e!==this.focusedSymbol&&e!==this._originalSymbol&&(this._originalSymbol=e,this._focused&&i(this.focusedSymbol)&&(this.graphic.symbol=this.focusedSymbol))}),!0)}detachSymbolChanged(){i(this._graphicSymbolChangedHandle)&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)}_updateGraphicSymbol(){this.graphic.symbol=this._focused&&i(this.focusedSymbol)?this.focusedSymbol:this._originalSymbol}_resetGraphicSymbol(){this.graphic.symbol=this._originalSymbol}_intersectDistance2D(e,t,s,r){if(r=r||f(s),o(r))return null;const l=1;let a=this._circleCollisionCache;if(\"point\"!==s.type||\"simple-marker\"!==r.type)return S(t,s,e)?l:null;if(o(a)||!a.originalPoint.equals(s)){const t=s,o=e.spatialReference;if(y(t.spatialReference,o)){const e=g(t,o);a={originalPoint:t.clone(),mapPoint:e,radiusPx:c(r.size)},this._circleCollisionCache=a}}if(i(a)){const o=h(t,G),i=e.toScreen(a.mapPoint),s=a.radiusPx,n=i.x+c(r.xoffset),p=i.y-c(r.yoffset);return _(o,[n,p])<s*s?l:null}return null}_intersectDistance3D(e,t,o){const i=e.toMap(t,{include:[o]});return i&&d(i,w,e.renderSpatialReference)?u(w,e.state.camera.eye):null}};e([r({constructOnly:!0,nonNullable:!0})],C.prototype,\"graphic\",null),e([r({readOnly:!0})],C.prototype,\"elevationInfo\",null),e([r({constructOnly:!0,nonNullable:!0})],C.prototype,\"view\",void 0),e([r({value:null})],C.prototype,\"focusedSymbol\",null),e([r({constructOnly:!0})],C.prototype,\"layer\",void 0),e([r()],C.prototype,\"interactive\",void 0),e([r()],C.prototype,\"selectable\",void 0),e([r()],C.prototype,\"grabbable\",void 0),e([r({value:!1})],C.prototype,\"grabbing\",null),e([r()],C.prototype,\"dragging\",void 0),e([r()],C.prototype,\"hovering\",null),e([r({value:!1})],C.prototype,\"selected\",null),e([r()],C.prototype,\"cursor\",void 0),C=e([l(\"esri.views.interactive.GraphicManipulator\")],C);const w=m(),G=p();export{C as GraphicManipulator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nclass t{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-click\"}}class i{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-double-click\"}}class s{constructor(t,i,s,h,e,r,c,a,n,p){this.graphic=t,this.allGraphics=i,this.index=s,this.x=h,this.y=e,this.dx=r,this.dy=c,this.totalDx=a,this.totalDy=n,this.viewEvent=p,this.defaultPrevented=!1,this.type=\"graphic-move-start\"}preventDefault(){this.defaultPrevented=!0}}class h{constructor(t,i,s,h,e,r,c,a,n,p){this.graphic=t,this.allGraphics=i,this.index=s,this.x=h,this.y=e,this.dx=r,this.dy=c,this.totalDx=a,this.totalDy=n,this.viewEvent=p,this.defaultPrevented=!1,this.type=\"graphic-move\"}preventDefault(){this.defaultPrevented=!0}}class e{constructor(t,i,s,h,e,r,c,a,n,p){this.graphic=t,this.allGraphics=i,this.index=s,this.x=h,this.y=e,this.dx=r,this.dy=c,this.totalDx=a,this.totalDy=n,this.viewEvent=p,this.defaultPrevented=!1,this.type=\"graphic-move-stop\"}preventDefault(){this.defaultPrevented=!0}}class r{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-over\"}}class c{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-out\"}}class a{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-down\"}}class n{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-up\"}}export{t as GraphicClickEvent,i as GraphicDoubleClickEvent,h as GraphicMoveEvent,s as GraphicMoveStartEvent,e as GraphicMoveStopEvent,a as GraphicPointerDownEvent,c as GraphicPointerOutEvent,r as GraphicPointerOverEvent,n as GraphicPointerUpEvent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{clone as t}from\"../../../core/lang.js\";import{isSome as e}from\"../../../core/maybe.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import a from\"../../../core/Evented.js\";import o from\"../../../core/Handles.js\";import{watch as h,whenOnce as c}from\"../../../core/watchUtils.js\";import{ViewEventPriorities as n}from\"../../input/InputManager.js\";import{createScreenPointFromEvent as p}from\"../../support/screenUtils.js\";import{cloneMove as l}from\"./drawUtils.js\";import{GraphicManipulator as v}from\"../../interactive/GraphicManipulator.js\";import{GraphicClickEvent as d,GraphicDoubleClickEvent as g,GraphicPointerDownEvent as _,GraphicPointerUpEvent as m,GraphicPointerOutEvent as G,GraphicMoveStartEvent as u,GraphicMoveEvent as y,GraphicMoveStopEvent as f,GraphicPointerOverEvent as w}from\"./input/GraphicMoverEvents.js\";let k=class extends a.EventedAccessor{constructor(i){super(i),this._activeGraphic=null,this._dragEvent=null,this._handles=new o,this._hoverGraphic=null,this._initialDragGeometry=null,this._viewHandles=new o,this._manipulators=[],this.type=\"graphic-mover\",this.callbacks={onGraphicClick(){},onGraphicDoubleClick(){},onGraphicMoveStart(){},onGraphicMove(){},onGraphicMoveStop(){},onGraphicPointerOver(){},onGraphicPointerOut(){},onGraphicPointerDown(){},onGraphicPointerUp(){}},this.enableMoveAllGraphics=!1,this.graphics=[],this.view=null}initialize(){this._setUpManipulators(),this._handles.add([h(this,[\"graphics\",\"graphics.length\"],(()=>{this._setUpManipulators()})),c(this,\"view.ready\",(()=>{this._viewHandles.add([this.view.on(\"immediate-click\",(i=>this._clickHandler(i)),n.TOOL),this.view.on(\"double-click\",(i=>this._doubleClickHandler(i)),n.TOOL),this.view.on(\"pointer-down\",(i=>this._pointerDownHandler(i)),n.TOOL),this.view.on(\"pointer-move\",(i=>this._pointerMoveHandler(i)),n.TOOL),this.view.on(\"pointer-up\",(i=>this._pointerUpHandler(i)),n.TOOL),this.view.on(\"drag\",(i=>this._dragHandler(i)),n.TOOL),this.view.on(\"key-down\",(i=>this._keyDownHandler(i)),n.TOOL)])}))])}destroy(){this.reset(),this._manipulators.forEach((i=>i.destroy())),this._manipulators=null,this._viewHandles.removeAll(),this._handles.removeAll()}get state(){const i=!!this.get(\"view.ready\"),t=!!this.get(\"graphics.length\"),e=this._activeGraphic;return i&&t?e?\"moving\":\"active\":i?\"ready\":\"disabled\"}reset(){this._activeGraphic=null,this._hoverGraphic=null,this._dragEvent=null}updateGeometry(i,t){const e=this.graphics[i];e&&e.set(\"geometry\",t)}_clickHandler(i){const t=this._findTargetGraphic(p(i));if(t){const e=new d(t,this.graphics.indexOf(t),i.x,i.y,i);this.emit(\"graphic-click\",e),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(e)}}_doubleClickHandler(i){const t=this._findTargetGraphic(p(i));if(t){const e=new g(t,this.graphics.indexOf(t),i.x,i.y,i);this.emit(\"graphic-double-click\",e),this.callbacks.onGraphicDoubleClick&&this.callbacks.onGraphicDoubleClick(e)}}_pointerDownHandler(i){const t=this._findTargetGraphic(p(i));if(t){this._activeGraphic=t;const{x:e,y:r}=i,s=new _(t,this.graphics.indexOf(t),e,r,i);this.emit(\"graphic-pointer-down\",s),this.callbacks.onGraphicPointerDown&&this.callbacks.onGraphicPointerDown(s)}else this._activeGraphic=null}_pointerUpHandler(i){if(this._activeGraphic){const{x:t,y:e}=i,r=this.graphics.indexOf(this._activeGraphic),s=new m(this._activeGraphic,r,t,e,i);this.emit(\"graphic-pointer-up\",s),this.callbacks.onGraphicPointerUp&&this.callbacks.onGraphicPointerUp(s)}}_pointerMoveHandler(i){if(this._dragEvent)return;const t=this._findTargetGraphic(p(i));if(t){const{x:e,y:r}=i;if(this._hoverGraphic){if(this._hoverGraphic===t)return;const s=this.graphics.indexOf(this._hoverGraphic),a=new G(this.graphics[s],s,e,r,i);this._hoverGraphic=null,this.emit(\"graphic-pointer-out\",a),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(a)}const s=this.graphics.indexOf(t),a=new w(t,s,e,r,i);return this._hoverGraphic=t,this.emit(\"graphic-pointer-over\",a),void(this.callbacks.onGraphicPointerOver&&this.callbacks.onGraphicPointerOver(a))}if(this._hoverGraphic){const{x:t,y:e}=i,r=this.graphics.indexOf(this._hoverGraphic),s=new G(this.graphics[r],r,t,e,i);this._hoverGraphic=null,this.emit(\"graphic-pointer-out\",s),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(s)}}_dragHandler(i){if(\"start\"!==i.action&&!this._dragEvent||!this._activeGraphic||!this._activeGraphic.geometry)return;i.stopPropagation();const{action:e,x:r,y:s}=i,a=this.graphics.indexOf(this._activeGraphic),o=this._activeGraphic.geometry,h=this._dragEvent?r-this._dragEvent.x:0,c=this._dragEvent?s-this._dragEvent.y:0,n=r-i.origin.x,p=s-i.origin.y;if(this._activeGraphic.geometry=l(o,h,c,this.view),this.enableMoveAllGraphics&&this.graphics.forEach((i=>{i!==this._activeGraphic&&(i.geometry=l(i.geometry,h,c,this.view))})),this._dragEvent=i,\"start\"===e){this._initialDragGeometry=t(o);const e=new u(this._activeGraphic,this.graphics,a,r,s,h,c,n,p,i);this.emit(\"graphic-move-start\",e),this.callbacks.onGraphicMoveStart&&this.callbacks.onGraphicMoveStart(e),e.defaultPrevented&&this._activeGraphic.set(\"geometry\",o)}else if(\"update\"===e){const t=new y(this._activeGraphic,this.graphics,a,r,s,h,c,n,p,i);this.emit(\"graphic-move\",t),this.callbacks.onGraphicMove&&this.callbacks.onGraphicMove(t),t.defaultPrevented&&this._activeGraphic.set(\"geometry\",o)}else{const t=new f(this._activeGraphic,this.graphics,a,r,s,h,c,n,p,i);this._dragEvent=null,this._activeGraphic=null,this.emit(\"graphic-move-stop\",t),this.callbacks.onGraphicMoveStop&&this.callbacks.onGraphicMoveStop(t),t.defaultPrevented&&this.graphics[a].set(\"geometry\",this._initialDragGeometry),this._initialDragGeometry=null}}_keyDownHandler(i){\"a\"!==i.key&&\"d\"!==i.key&&\"n\"!==i.key||\"moving\"!==this.state||i.stopPropagation()}_findTargetGraphic(i){let t=null,r=Number.MAX_VALUE;return this._manipulators.forEach((s=>{const a=s.intersectionDistance(i);e(a)&&a<r&&(r=a,t=s.graphic)})),t}_setUpManipulators(){const{graphics:i,view:t}=this;this._manipulators.forEach((i=>i.destroy())),this._manipulators=null!=i&&i.length?i.map((i=>new v({graphic:i,view:t}))):[]}};i([r()],k.prototype,\"_activeGraphic\",void 0),i([r({readOnly:!0})],k.prototype,\"type\",void 0),i([r()],k.prototype,\"callbacks\",void 0),i([r()],k.prototype,\"enableMoveAllGraphics\",void 0),i([r()],k.prototype,\"graphics\",void 0),i([r({readOnly:!0})],k.prototype,\"state\",null),i([r()],k.prototype,\"view\",void 0),k=i([s(\"esri.views.draw.support.GraphicMover\")],k);var b=k;export default b;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{isNone as t,isSome as s,abortMaybe as i,unwrap as o,get as r}from\"../../../core/maybe.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{createTask as h}from\"../../../core/promiseUtils.js\";import c from\"../../../geometry/Point.js\";import{geometryToCoordinates as l,getMidpoint as p}from\"../../../geometry/support/coordsUtils.js\";import\"../../../geometry.js\";import d from\"../../../core/Evented.js\";import m from\"../../../symbols/SimpleMarkerSymbol.js\";import v from\"../../../Graphic.js\";import y from\"../../../core/Handles.js\";import{whenOnce as _,pausable as g}from\"../../../core/watchUtils.js\";import{ViewEventPriorities as u}from\"../../input/InputManager.js\";import{settings as f}from\"./settings.js\";import{SnappingVisualizer2D as x}from\"../../2d/interactive/SnappingVisualizer2D.js\";import{EditGeometry as G}from\"../../interactive/editGeometry/EditGeometry.js\";import{EditGeometryHelper as b}from\"../../interactive/editGeometry/EditGeometryHelper.js\";import{SnappingContext as S}from\"../../interactive/snapping/SnappingContext.js\";import{cloneMove as H}from\"./drawUtils.js\";import{addUniqueLayer as w}from\"./layerUtils.js\";import M from\"./GraphicMover.js\";class k{constructor(e,t,s){this.graphic=e,this.mover=t,this.selected=s,this.type=\"reshape-start\"}}class E{constructor(e,t,s){this.graphic=e,this.mover=t,this.selected=s,this.type=\"reshape\"}}class V{constructor(e,t,s){this.graphic=e,this.mover=t,this.selected=s,this.type=\"reshape-stop\"}}class I{constructor(e,t,s){this.mover=e,this.dx=t,this.dy=s,this.type=\"move-start\"}}class C{constructor(e,t,s){this.mover=e,this.dx=t,this.dy=s,this.type=\"move\"}}class R{constructor(e,t,s){this.mover=e,this.dx=t,this.dy=s,this.type=\"move-stop\"}}class j{constructor(e){this.added=e,this.type=\"vertex-select\"}}class A{constructor(e){this.removed=e,this.type=\"vertex-deselect\"}}class D{constructor(e,t,s,i){this.added=e,this.graphic=t,this.oldGraphic=s,this.vertices=i,this.type=\"vertex-add\"}}class O{constructor(e,t,s,i){this.removed=e,this.graphic=t,this.oldGraphic=s,this.vertices=i,this.type=\"vertex-remove\"}}const z={removeVertex:[\"Backspace\",\"Delete\"]},T=f.reshapeGraphics,F={vertices:{default:new m({style:\"circle\",size:T.vertex.size,color:T.vertex.color,outline:{color:T.vertex.outlineColor,width:1}}),hover:new m({style:\"circle\",size:T.vertex.hoverSize,color:T.vertex.hoverColor,outline:{color:T.vertex.hoverOutlineColor,width:1}}),selected:new m({style:\"circle\",size:T.selected.size,color:T.selected.color,outline:{color:T.selected.outlineColor,width:1}})},midpoints:{default:new m({style:\"circle\",size:T.midpoint.size,color:T.midpoint.color,outline:{color:T.midpoint.outlineColor,width:1}}),hover:new m({style:\"circle\",size:T.midpoint.size,color:T.midpoint.color,outline:{color:T.midpoint.outlineColor,width:1}})}};let U=class extends d.EventedAccessor{constructor(e){super(e),this._handles=new y,this._graphicAttributes={esriSketchTool:\"box\"},this._mover=null,this._snappingTask=null,this._stagedVertex=null,this._totalDx=0,this._totalDy=0,this._viewHandles=new y,this.callbacks={onReshapeStart(){},onReshape(){},onReshapeStop(){},onMoveStart(){},onMove(){},onMoveStop(){},onGraphicClick(){}},this.enableMidpoints=!0,this.graphic=null,this.handleGraphics=[],this.layer=null,this.midpointGraphics=[],this.midpointSymbol=new m({style:\"circle\",size:6,color:[200,200,200],outline:{color:[100,100,100],width:1}}),this.selectedHandles=[],this.snappingManager=null,this.type=\"reshape\",this.view=null}initialize(){this._setup(),this._handles.add([_(this,\"view.ready\",(()=>{const{layer:e,view:t}=this;w(t,e),this._viewHandles.add([t.on(\"key-down\",(e=>this._keyDownHandler(e)),u.TOOL)])})),g(this,\"graphic\",(()=>this.refresh())),g(this,\"layer\",((e,t)=>{t&&(this._clearSelection(),this._resetGraphics(t)),this.refresh()})),g(this,\"enableMidpoints\",(()=>{this.refresh()}))])}destroy(){this._reset(),this._mover&&this._mover.destroy(),this._mover=null,this._handles.removeAll(),this._handles=null,this._viewHandles.removeAll(),this._viewHandles=null}get state(){const e=!!this.get(\"view.ready\"),t=!(!this.get(\"graphic\")||!this.get(\"layer\"));return e&&t?\"active\":e?\"ready\":\"disabled\"}set symbols(e){const{midpoints:t=F.midpoints,vertices:s=F.vertices}=e||{};this._set(\"symbols\",{midpoints:t,vertices:s})}isUIGraphic(e){const t=[];return this.graphic&&t.push(this.graphic),t.concat(this.handleGraphics,this.midpointGraphics),t.length&&t.includes(e)}refresh(){this._reset(),this._setup()}reset(){this.graphic=null}clearSelection(){this._clearSelection()}removeSelectedHandles(){this.selectedHandles.length&&this._removeVertex(this.selectedHandles)}_setup(){this.graphic&&this.layer&&(this._setupGraphics(),this._setupMover())}_setUpGeometryHelper(){const e=this.graphic.geometry;t(e)||\"polygon\"!==e.type&&\"polyline\"!==e.type||(this._geometryHelper=new b(G.fromGeometry(e,\"local\"),e.type))}_saveSnappingContextForHandle(e,t){var s;this._snappingContext=new S({geometry:this._geometryHelper,elevationInfo:{mode:\"on-the-ground\",offset:0},pointer:(null==(s=t.viewEvent)?void 0:s.pointerType)||\"mouse\",excludeFeature:this.graphic,visualizer:new x,vertexHandle:this._getVertexFromEditGeometry(e)})}_reset(){this._clearSelection(),this._resetGraphicStateVars(),this._resetGraphics(),this._resetSnappingStateVars(),this._mover&&this._mover.destroy(),this._mover=null,this.view.cursor=\"default\"}_resetSnappingStateVars(){var e;s(this.snappingManager)&&this.snappingManager.doneSnapping(),null==(e=this._geometryHelper)||e.destroy(),this._geometryHelper=null,this._snappingTask=i(this._snappingTask),this._snappingTask=null,this._snappingContext=null,this._stagedVertex=null}_resetGraphicStateVars(){this._totalDx=0,this._totalDy=0}_resetGraphics(e){const t=e||this.layer;t&&(t.removeMany(this.handleGraphics),t.removeMany(this.midpointGraphics)),this.handleGraphics.forEach((e=>e.destroy())),this.midpointGraphics.forEach((e=>e.destroy())),this._set(\"handleGraphics\",[]),this._set(\"midpointGraphics\",[]),this._set(\"selectedHandles\",[])}_setupGraphics(){const e=o(this.graphic.geometry),t=l(e.clone());if(\"polygon\"===e.type)for(const s of t){const e=s[s.length-1];s[0][0]===e[0]&&s[0][1]===e[1]&&s.length>2&&s.pop()}this._set(\"handleGraphics\",this._createHandleGraphics(t)),this.enableMidpoints&&this._set(\"midpointGraphics\",this._createMidpointGraphics(t)),this._saveRelatedIndices(this.handleGraphics),this.layer.addMany(this.midpointGraphics),this.layer.addMany(this.handleGraphics)}_createHandleGraphics(e){const{_graphicAttributes:t,symbols:s,view:{spatialReference:i}}=this,o=[];return null==e||e.forEach(((e,r)=>{e.forEach(((e,n)=>{var a;const[h,l]=e;o.push(new v({geometry:new c({x:h,y:l,spatialReference:i}),symbol:null==s||null==(a=s.vertices)?void 0:a.default,attributes:{...t,pathIndex:r,pointIndex:n}}))}))})),o}_createMidpointGraphics(e){const{_graphicAttributes:t,symbols:s,view:{spatialReference:i}}=this,o=[];return null==e||e.forEach(((e,n)=>{e.forEach(((a,h)=>{const[l,d]=a,m=e[h+1]?h+1:0;if(\"polygon\"===r(this.graphic.geometry,\"type\")||0!==m){const[r,a]=e[m],[y,_]=p([l,d],[r,a]);o.push(new v({geometry:new c({x:y,y:_,spatialReference:i}),symbol:s.midpoints.default,attributes:{...t,pathIndex:n,pointIndexStart:h,pointIndexEnd:m}}))}}))})),o}_saveRelatedIndices(e){if(!e)return;const t=e.map((({geometry:e})=>({x:e.x,y:e.y})));for(let s=0;s<t.length;s++){const i=[];for(let e=0;e<t.length;e++){if(s===e)continue;const o=t[s],r=t[e];o.x===r.x&&o.y===r.y&&i.push(e)}e[s].attributes.relatedGraphicIndices=i}}_setupMover(){this._mover=new M({enableMoveAllGraphics:!1,graphics:[].concat(this.handleGraphics,this.midpointGraphics,this.graphic),view:this.view,callbacks:{onGraphicClick:e=>this._onGraphicClickCallback(e),onGraphicMoveStart:e=>this._onGraphicMoveStartCallback(e),onGraphicMove:e=>this._onGraphicMoveCallback(e),onGraphicMoveStop:e=>this._onGraphicMoveStopCallback(e),onGraphicPointerOver:e=>this._onGraphicPointerOverCallback(e),onGraphicPointerOut:e=>this._onGraphicPointerOutCallback(e)}})}_onGraphicClickCallback(e){e.viewEvent.stopPropagation();const t=e.graphic;if(t===this.graphic)this.clearSelection(),this.emit(\"graphic-click\",e),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(e);else if(this._isMidpoint(t)){if(2===e.viewEvent.button)return;const s=this.graphic.clone(),i=this._createHandleFromMidpoint(t);this.refresh(),this._emitVertexAddEvent([t],s,i)}else if(this._isHandle(t))if(e.viewEvent.stopPropagation(),2===e.viewEvent.button)this._removeVertex(t);else{e.viewEvent.native.shiftKey||this._clearSelection(),this.selectedHandles.includes(t)?this._removeFromSelection(t,!0):this._addToSelection(t)}}_onGraphicMoveStartCallback(e){const t=e.graphic,{dx:s,dy:i}=e;if(this._resetGraphicStateVars(),this._resetSnappingStateVars(),t===this.graphic)return this.handleGraphics.forEach((e=>e.visible=!1)),this.midpointGraphics.forEach((e=>e.visible=!1)),this._clearSelection(),void this._emitMoveStartEvent(s,i);if(this._isMidpoint(t)){this._clearSelection();const e=this.graphic.clone(),s=this._createHandleFromMidpoint(t);this._emitVertexAddEvent([t],e,s),this._addToSelection(t)}else this.selectedHandles.includes(t)||(this._clearSelection(),this._addToSelection(t));this._setUpGeometryHelper(),this._saveSnappingContextForHandle(t,e),this._onHandleMove(t,s,i,e),this._emitReshapeStartEvent(t)}_onGraphicMoveCallback(e){const{graphic:t,dx:s,dy:i}=e;this._totalDx+=s,this._totalDy+=i,t===this.graphic?(this._syncGraphicsWithGeometry(),this._emitMoveEvent(s,i)):(this._onHandleMove(t,s,i,e),this._emitReshapeEvent(t))}_onGraphicMoveStopCallback(e){const{graphic:t,dx:s,dy:i}=e;if(this._totalDx+=s,this._totalDy+=i,t===this.graphic){this._syncGraphicsWithGeometry();for(const e of[].concat(this.handleGraphics,this.midpointGraphics))e.visible=!0;this._emitMoveStopEvent(),this._resetGraphicStateVars()}else this._onHandleMove(t,s,i,e),this._resetSnappingStateVars(),this._isMidpoint(t)&&this.refresh(),this._emitReshapeStopEvent(t),this._resetGraphicStateVars()}_syncGraphicsWithGeometry(){const e=this.graphic.geometry,t=\"polyline\"===e.type?e.paths:e.rings;this._updateHandleGraphicLocations(t),this._updateMidpointGraphicLocations(t)}_updateHandleGraphicLocations(e){for(const t of this.handleGraphics){const{pathIndex:s,pointIndex:i}=t.attributes,[o,r]=e[s][i];t.set(\"geometry\",new c(o,r,this.view.spatialReference))}}_updateMidpointGraphicLocations(e){for(const t of this.midpointGraphics){const{pathIndex:s,pointIndexStart:i,pointIndexEnd:o}=t.attributes,[r,n]=e[s][i],[a,h]=e[s][o],[l,d]=p([r,n],[a,h]);t.geometry=new c({x:l,y:d,spatialReference:this.view.spatialReference})}}_getVertexFromEditGeometry(e){var t;const{pathIndex:s,pointIndex:i}=e.attributes;return null==(t=this._geometryHelper)?void 0:t.editGeometry.components[s].vertices[i]}_onHandleMove(e,t,o,r){i(this._snappingTask);const n=e.geometry,a=\"graphic-move-stop\"===r.type;if(s(this.snappingManager)&&1===this.selectedHandles.length&&!a){const s=this.snappingManager;this._stagedVertex=s.update(n,this._snappingContext),this._syncGeometryAfterHandleMove(e,new c(this._stagedVertex),t,o,a),this._emitReshapeEvent(e),this._snappingTask=h((async i=>{const r=await s.snap(n,this._snappingContext,i);r.valid&&(this._stagedVertex=r.apply(),this._syncGeometryAfterHandleMove(e,new c(this._stagedVertex),t,o,a),this._emitReshapeEvent(e))}))}else{const i=s(this._stagedVertex)?new c(this._stagedVertex):n;this._syncGeometryAfterHandleMove(e,i,t,o,a),\"graphic-move\"===r.type&&this._emitReshapeEvent(e)}}async _syncGeometryAfterHandleMove(e,t,s,i,o=!1){const{x:r,y:n}=t,a=this._getUpdatedGeometryAfterHandleMove(e,t);let h=\"polyline\"===a.type?a.paths:a.rings;this._isHandle(e)&&(h=this._moveRelatedCoordinates(h,e,r,n),h=this._moveSelectedHandleCoordinates(h,e,s,i,\"polygon\"===a.type),this._updateMidpointGraphicLocations(h)),this.graphic.geometry=a,this._syncEditGeometryAfterHandleMove(e,r,n),o&&(e.geometry=t)}_getUpdatedGeometryAfterHandleMove(e,t){const{x:s,y:i}=t,r=o(this.graphic.geometry).clone(),n=\"polyline\"===r.type?r.paths:r.rings,{pathIndex:a,pointIndex:h}=e.attributes,c=n[a].length-1;return n[a][h]=[s,i],\"polygon\"===r.type&&(0===h?n[a][c]=[s,i]:h===c&&(n[a][0]=[s,i])),r}_moveRelatedCoordinates(e,t,s,i){const{relatedGraphicIndices:o}=t.attributes;for(const r of o){const o=this.handleGraphics[r],{pathIndex:n,pointIndex:a}=o.attributes;e[n][a]=[s,i],o.geometry=t.geometry}return e}_moveSelectedHandleCoordinates(e,t,s,i,o){for(const r of this.selectedHandles)if(r!==t){const{pathIndex:t,pointIndex:n,relatedGraphicIndices:a}=r.attributes,h=H(r.geometry,s,i,this.view),c=e[t].length-1;e[t][n]=[h.x,h.y],r.geometry=h,o&&(0===n?e[t][c]=[h.x,h.y]:n===c&&(e[t][0]=[h.x,h.y]));for(const s of a){const t=this.handleGraphics[s],{pathIndex:i,pointIndex:o}=t.attributes;e[i][o]=[h.x,h.y],t.geometry=h}}return e}_syncEditGeometryAfterHandleMove(e,t,s){const i=this._getVertexFromEditGeometry(e),o=t-i.pos[0],r=s-i.pos[1];this._geometryHelper.moveVertices([i],o,r,0)}_onGraphicPointerOverCallback(e){const t=e.graphic;this._isHandle(t)&&!this._isSelected(t)&&(t.symbol=this.symbols.vertices.hover),this._updateHoverCursor(t)}_onGraphicPointerOutCallback(e){const t=e.graphic;this._isHandle(t)&&!this._isSelected(t)&&(t.symbol=this.symbols.vertices.default),this.view.cursor=\"default\"}_createHandleFromMidpoint(e){const{_graphicAttributes:t}=this,s=[],i=o(this.graphic.geometry).clone(),{pathIndex:r,pointIndexStart:n,pointIndexEnd:a}=e.attributes,{x:h,y:c}=e.geometry,l=0===a?n+1:a,p=\"polyline\"===i.type?i.paths:i.rings;return p[r].splice(l,0,[h,c]),e.attributes={...t,pathIndex:r,pointIndex:l,relatedGraphicIndices:[]},s.push({coordinates:p[r][l],componentIndex:r,vertexIndex:l}),this.graphic.geometry=i,s}_removeHandles(e){const t=o(this.graphic.geometry).clone(),s=\"polygon\"===t.type?t.rings:t.paths,i=[];e instanceof v&&(e=[e]);for(const o of e){const{x:e,y:t}=o.geometry;for(let o=0;o<s.length;o++){const r=s[o];for(let n=0;n<r.length;n++){const[a,h]=r[n];e===a&&t===h&&(i.push({coordinates:s[o][n],componentIndex:o,vertexIndex:n}),s[o].splice(Number(n),1))}}}if(\"polygon\"===t.type)for(const o of s){const[e,t]=o[0],[i,r]=o[o.length-1];(1===o.length||o.length<3&&e===i&&t===r)&&s.splice(s.indexOf(o),1),o.length>2&&(e!==i||t!==r)&&o.push(o[0])}else for(const o of s)1===o.length&&s.splice(s.indexOf(o),1);return this.graphic.geometry=t,i}_addToSelection(e){e instanceof v&&(e=[e]);for(const t of e)t.symbol=this.symbols.vertices.selected;this._set(\"selectedHandles\",this.selectedHandles.concat(e)),this._emitSelectEvent(e)}_removeFromSelection(e,t){const{vertices:s}=this.symbols,i=t?s.hover:s.default;e instanceof v&&(e=[e]);for(const o of e)this.selectedHandles.splice(this.selectedHandles.indexOf(o),1),this._set(\"selectedHandles\",this.selectedHandles),o.set(\"symbol\",i);this._emitDeselectEvent(e)}_clearSelection(){if(this.selectedHandles.length){const e=this.selectedHandles;for(const t of this.selectedHandles)t.set(\"symbol\",this.symbols.vertices.default);this._set(\"selectedHandles\",[]),this._emitDeselectEvent(e)}}_keyDownHandler(e){z.removeVertex.includes(e.key)&&!e.repeat&&this.selectedHandles.length&&this._removeVertex(this.selectedHandles)}_removeVertex(e){if(\"polygon\"===this.graphic.geometry.type&&this.handleGraphics.length<4||this.handleGraphics.length<3)return;const t=this.graphic.clone();e instanceof v&&(e=[e]);const s=this._removeHandles(e);this.refresh(),this._emitVertexRemoveEvent(e,t,s)}_isHandle(e){return this.handleGraphics.includes(e)}_isSelected(e){return this._isHandle(e)&&this.selectedHandles.includes(e)}_isMidpoint(e){return this.midpointGraphics.includes(e)}_updateHoverCursor(e){this.view.cursor=this._isMidpoint(e)?\"copy\":\"move\"}_emitMoveStartEvent(e,t){const s=new I(this.graphic,e,t);this.emit(\"move-start\",s),this.callbacks.onMoveStart&&this.callbacks.onMoveStart(s)}_emitMoveEvent(e,t){const s=new C(this.graphic,e,t);this.emit(\"move\",s),this.callbacks.onMove&&this.callbacks.onMove(s)}_emitMoveStopEvent(){const e=new R(this.graphic,this._totalDx,this._totalDy);this.emit(\"move-stop\",e),this.callbacks.onMoveStop&&this.callbacks.onMoveStop(e)}_emitReshapeStartEvent(e){const t=new k(this.graphic,e,this.selectedHandles);this.emit(\"reshape-start\",t),this.callbacks.onReshapeStart&&this.callbacks.onReshapeStart(t)}_emitReshapeEvent(e){const t=new E(this.graphic,e,this.selectedHandles);this.emit(\"reshape\",t),this.callbacks.onReshape&&this.callbacks.onReshape(t)}_emitReshapeStopEvent(e){const t=new V(this.graphic,e,this.selectedHandles);this.emit(\"reshape-stop\",t),this.callbacks.onReshapeStop&&this.callbacks.onReshapeStop(t)}_emitSelectEvent(e){const t=new j(e);this.emit(\"select\",t),this.callbacks.onVertexSelect&&this.callbacks.onVertexSelect(t)}_emitDeselectEvent(e){const t=new A(e);this.emit(\"deselect\",t),this.callbacks.onVertexDeselect&&this.callbacks.onVertexDeselect(t)}_emitVertexAddEvent(e,t,s){const i=new D(e,this.graphic,t,s);this.emit(\"vertex-add\",i),this.callbacks.onVertexAdd&&this.callbacks.onVertexAdd(i)}_emitVertexRemoveEvent(e,t,s){const i=new O(e,this.graphic,t,s);this.emit(\"vertex-remove\",i),this.callbacks.onVertexRemove&&this.callbacks.onVertexRemove(i)}};e([n()],U.prototype,\"callbacks\",void 0),e([n()],U.prototype,\"enableMidpoints\",void 0),e([n()],U.prototype,\"graphic\",void 0),e([n({readOnly:!0})],U.prototype,\"handleGraphics\",void 0),e([n()],U.prototype,\"layer\",void 0),e([n({readOnly:!0})],U.prototype,\"midpointGraphics\",void 0),e([n()],U.prototype,\"midpointSymbol\",void 0),e([n({readOnly:!0})],U.prototype,\"selectedHandles\",void 0),e([n()],U.prototype,\"snappingManager\",void 0),e([n({readOnly:!0})],U.prototype,\"state\",null),e([n({value:F})],U.prototype,\"symbols\",null),e([n({readOnly:!0})],U.prototype,\"type\",void 0),e([n()],U.prototype,\"view\",void 0),U=e([a(\"esri.views.draw.support.Reshape\")],U);var P=U;export default P;\n"],"sourceRoot":""}