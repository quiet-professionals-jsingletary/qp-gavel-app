(this["webpackJsonpqp-ampd-app"]=this["webpackJsonpqp-ampd-app"]||[]).push([[123],{1210:function(e,t,a){"use strict";a.r(t);var r=a(10),n=a(7),i=a.n(n),l=a(15),o=a(37),c=a(53),y=a(50),u=a(14),s=a(2),p=a(3),b=a(5),f=a(6),O=a(0),d=(a(16),a(22)),m=a(100),j=a(4),v=(a(13),a(17),a(1)),g=a(41),h=a(177),S=a(8),w=a(42),N=a(18),k=(a(12),a(19),a(20),a(59)),x=a(44),J=a(63),L=(a(71),a(40)),T=a(120),C=a(130),M=a(116),I=a(209),R=(a(76),a(74)),D=a(174),E=a(216),_=a(141),F=a(258),G=a(377),P=a(266),z=a(264),B=a(257),W=a(260),q=a(265),A=a(221),H=a(1259);function K(e){return e.layers.some((function(e){return null!=e.layerDefinition.visibilityField}))}var Q=new P.a({name:"OBJECTID",alias:"OBJECTID",type:"oid",nullable:!1,editable:!1}),U=new P.a({name:"title",alias:"Title",type:"string",nullable:!0,editable:!0}),V=function(e){Object(b.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.apply(this,arguments)).visibilityMode="inherited",e}return Object(p.a)(a,[{key:"initialize",value:function(){var e,t=this,a=Object(u.a)(this.graphics);try{for(a.s();!(e=a.n()).done;){e.value.sourceLayer=this.layer}}catch(r){a.e(r)}finally{a.f()}this.graphics.on("after-add",(function(e){e.item.sourceLayer=t.layer})),this.graphics.on("after-remove",(function(e){e.item.sourceLayer=null}))}},{key:"sublayers",get:function(){return this.graphics}}]),a}(A.a);Object(O.a)([Object(v.b)({readOnly:!0})],V.prototype,"sublayers",null),Object(O.a)([Object(v.b)()],V.prototype,"layer",void 0),Object(O.a)([Object(v.b)({readOnly:!0})],V.prototype,"visibilityMode",void 0),V=Object(O.a)([Object(S.a)("esri.layers.MapNotesLayer.MapNotesSublayer")],V);var X=[{geometryType:"polygon",geometryTypeJSON:"esriGeometryPolygon",layerId:"polygonLayer",title:"Polygons",identifyingSymbol:(new C.default).toJSON()},{geometryType:"polyline",geometryTypeJSON:"esriGeometryPolyline",layerId:"polylineLayer",title:"Polylines",identifyingSymbol:(new T.default).toJSON()},{geometryType:"multipoint",geometryTypeJSON:"esriGeometryMultipoint",layerId:"multipointLayer",title:"Multipoints",identifyingSymbol:(new M.default).toJSON()},{geometryType:"point",geometryTypeJSON:"esriGeometryPoint",layerId:"pointLayer",title:"Points",identifyingSymbol:(new M.default).toJSON()},{geometryType:"point",geometryTypeJSON:"esriGeometryPoint",layerId:"textLayer",title:"Text",identifyingSymbol:(new I.a).toJSON()}],Y=function(e){Object(b.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(s.a)(this,a),(r=t.call(this,e)).capabilities={operations:{supportsMapNotesEditing:!0}},r.featureCollections=null,r.featureCollectionJSON=null,r.featureCollectionType="notes",r.legendEnabled=!1,r.minScale=0,r.maxScale=0,r.spatialReference=x.a.WGS84,r.sublayers=new L.a(X.map((function(e){return new V({id:e.layerId,title:e.title,layer:Object(o.a)(r)})}))),r.title="Map Notes",r.type="map-notes",r.visibilityMode="inherited",r}return Object(p.a)(a,[{key:"readCapabilities",value:function(e,t,a){return{operations:{supportsMapNotesEditing:!K(t)&&"portal-item"!==(null==a?void 0:a.origin)}}}},{key:"readFeatureCollections",value:function(e,t,a){if(!K(t))return null;var r=t.layers.map((function(e){var t=new q.default;return t.read(e,a),t}));return new L.a({items:r})}},{key:"readLegacyfeatureCollectionJSON",value:function(e,t){return K(t)?Object(d.a)(t.featureCollection):null}},{key:"readFullExtent",value:function(e,t){if(!t.layers.length)return new J.a({xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:x.a.WGS84});var a=x.a.fromJSON(t.layers[0].layerDefinition.spatialReference);return t.layers.reduce((function(e,t){var a=t.layerDefinition.extent;return a?J.a.fromJSON(a).union(e):e}),new J.a({spatialReference:a}))}},{key:"readMinScale",value:function(e,t){var a,r=Object(u.a)(t.layers);try{for(r.s();!(a=r.n()).done;){var n=a.value;if(null!=n.layerDefinition.minScale)return n.layerDefinition.minScale}}catch(i){r.e(i)}finally{r.f()}return 0}},{key:"readMaxScale",value:function(e,t){var a,r=Object(u.a)(t.layers);try{for(r.s();!(a=r.n()).done;){var n=a.value;if(null!=n.layerDefinition.maxScale)return n.layerDefinition.maxScale}}catch(i){r.e(i)}finally{r.f()}return 0}},{key:"multipointLayer",get:function(){return this._findSublayer("multipointLayer")}},{key:"pointLayer",get:function(){return this._findSublayer("pointLayer")}},{key:"polygonLayer",get:function(){return this._findSublayer("polygonLayer")}},{key:"polylineLayer",get:function(){return this._findSublayer("polylineLayer")}},{key:"readSpatialReference",value:function(e,t){return t.layers.length?x.a.fromJSON(t.layers[0].layerDefinition.spatialReference):x.a.WGS84}},{key:"readSublayers",value:function(e,t,a){var r=this;if(K(t))return null;for(var n=[],i=function(e){var a=t.layers[e],i=a.layerDefinition,l=a.featureSet,c=null!=(o=i.geometryType)?o:l.geometryType,y=X.find((function(e){var t,a,r;return c===e.geometryTypeJSON&&(null==(t=i.drawingInfo)||null==(a=t.renderer)||null==(r=a.symbol)?void 0:r.type)===e.identifyingSymbol.type}));if(y){var u=new V({id:y.layerId,title:i.name,layer:r,graphics:l.features.map((function(e){var t=e.geometry,a=e.symbol,r=e.attributes,n=e.popupInfo;return R.a.fromJSON({attributes:r,geometry:t,symbol:a,popupTemplate:n})}))});n.push(u)}},l=0;l<t.layers.length;l++){var o;i(l)}return new L.a(n)}},{key:"writeSublayers",value:function(e,t,a,r){var n=this,i=this.minScale,l=this.maxScale;if(!Object(j.j)(e)){var o=e.some((function(e){return e.graphics.length>0}));if(this.capabilities.operations.supportsMapNotesEditing){var c,y=[],s=this.spatialReference.toJSON(),p=Object(u.a)(e);try{e:for(p.s();!(c=p.n()).done;){var b,f=c.value,O=Object(u.a)(f.graphics);try{for(O.s();!(b=O.n()).done;){var d=b.value;if(Object(j.k)(d.geometry)){s=d.geometry.spatialReference.toJSON();break e}}}catch(w){O.e(w)}finally{O.f()}}}catch(w){p.e(w)}finally{p.f()}var v,g=Object(u.a)(X);try{var h=function(){var t=v.value,a=e.find((function(e){return t.layerId===e.id}));n._writeMapNoteSublayer(y,a,t,i,l,s,r)};for(g.s();!(v=g.n()).done;)h()}catch(w){g.e(w)}finally{g.f()}Object(m.c)("featureCollection.layers",y,t)}else{var S;o&&(null==r||null==(S=r.messages)||S.push(new N.a("map-notes-layer:editing-not-supported","New map notes cannot be added to this layer")))}}}},{key:"textLayer",get:function(){return this._findSublayer("textLayer")}},{key:"load",value:function(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Collection"]},e)),Promise.resolve(this)}},{key:"read",value:function(e,t){"featureCollection"in e&&(e=Object(d.a)(e),Object.assign(e,e.featureCollection)),Object(c.a)(Object(y.a)(a.prototype),"read",this).call(this,e,t)}},{key:"beforeSave",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,a,r,n,l,o,c,y,s,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(j.j)(this.sublayers)){e.next=2;break}return e.abrupt("return");case 2:t=null,a=[],r=Object(u.a)(this.sublayers),e.prev=5,r.s();case 7:if((n=r.n()).done){e.next=40;break}l=n.value,o=Object(u.a)(l.graphics),e.prev=10,o.s();case 12:if((c=o.n()).done){e.next=30;break}if(y=c.value,!Object(j.k)(y.geometry)){e.next=28;break}if(s=y.geometry,!t){e.next=26;break}if(e.t0=Object(k.c)(s.spatialReference,t),e.t0){e.next=24;break}if(e.t1=Object(_.b)(s.spatialReference,t)||Object(_.g)(),e.t1){e.next=23;break}return e.next=23,Object(_.i)();case 23:y.geometry=Object(_.j)(s,t);case 24:e.next=27;break;case 26:t=s.spatialReference;case 27:a.push(y);case 28:e.next=12;break;case 30:e.next=35;break;case 32:e.prev=32,e.t2=e.catch(10),o.e(e.t2);case 35:return e.prev=35,o.f(),e.finish(35);case 38:e.next=7;break;case 40:e.next=45;break;case 42:e.prev=42,e.t3=e.catch(5),r.e(e.t3);case 45:return e.prev=45,r.f(),e.finish(45);case 48:return e.next=50,Object(G.a)(a.map((function(e){return e.geometry})));case 50:p=e.sent,a.forEach((function(e,t){return e.geometry=p[t]}));case 52:case"end":return e.stop()}}),e,this,[[5,42,45,48],[10,32,35,38]])})));return function(){return e.apply(this,arguments)}}()},{key:"_findSublayer",value:function(e){var t,a;return Object(j.j)(this.sublayers)?null:null!=(t=null==(a=this.sublayers)?void 0:a.find((function(t){return t.id===e})))?t:null}},{key:"_writeMapNoteSublayer",value:function(e,t,a,r,n,i,l){var o=[];if(!Object(j.j)(t)){var c,y=Object(u.a)(t.graphics);try{for(y.s();!(c=y.n()).done;){var s=c.value;this._writeMapNote(o,s,a.geometryType,l)}}catch(p){y.e(p)}finally{y.f()}this._normalizeObjectIds(o,Q),e.push({layerDefinition:{name:t.title,drawingInfo:{renderer:{type:"simple",symbol:Object(d.a)(a.identifyingSymbol)}},geometryType:a.geometryTypeJSON,minScale:r,maxScale:n,objectIdField:"OBJECTID",fields:[Q.toJSON(),U.toJSON()],spatialReference:i},featureSet:{features:o,geometryType:a.geometryTypeJSON}})}}},{key:"_writeMapNote",value:function(e,t,a,n){if(!Object(j.j)(t)){var i,l,o=t.geometry,c=t.symbol,y=t.popupTemplate;if(!Object(j.j)(o))if(o.type===a)if(Object(j.j)(c))null==n||null==(l=n.messages)||l.push(new h.a("map-notes-layer:no-symbol","Skipping map notes with no symbol",{graphic:t}));else{var u={attributes:Object(r.a)({},t.attributes),geometry:o.toJSON(),symbol:c.toJSON()};Object(j.k)(y)&&(u.popupInfo=y.toJSON()),e.push(u)}else null==n||null==(i=n.messages)||i.push(new h.a("map-notes-layer:invalid-geometry-type",'Geometry "'.concat(o.type,'" cannot be saved in "').concat(a,'" layer'),{graphic:t}))}}},{key:"_normalizeObjectIds",value:function(e,t){var a,r=t.name,n=Object(H.a)(r,e)+1,i=new Set,l=Object(u.a)(e);try{for(l.s();!(a=l.n()).done;){var o=a.value;o.attributes||(o.attributes={});var c=o.attributes;(null==c[r]||i.has(c[r]))&&(c[r]=n++),i.add(c[r])}}catch(y){l.e(y)}finally{l.f()}}}]),a}(Object(z.a)(Object(W.a)(Object(F.a)(Object(B.a)(Object(E.a)(D.a))))));Object(O.a)([Object(v.b)({readOnly:!0})],Y.prototype,"capabilities",void 0),Object(O.a)([Object(g.a)(["portal-item","web-map"],"capabilities",["layers"])],Y.prototype,"readCapabilities",null),Object(O.a)([Object(v.b)({readOnly:!0})],Y.prototype,"featureCollections",void 0),Object(O.a)([Object(g.a)(["web-map","portal-item"],"featureCollections",["layers"])],Y.prototype,"readFeatureCollections",null),Object(O.a)([Object(v.b)({readOnly:!0,json:{origins:{"web-map":{write:{enabled:!0,target:"featureCollection"}}}}})],Y.prototype,"featureCollectionJSON",void 0),Object(O.a)([Object(g.a)(["web-map","portal-item"],"featureCollectionJSON",["featureCollection"])],Y.prototype,"readLegacyfeatureCollectionJSON",null),Object(O.a)([Object(v.b)({readOnly:!0,json:{read:!1,write:{enabled:!0,ignoreOrigin:!0}}})],Y.prototype,"featureCollectionType",void 0),Object(O.a)([Object(v.b)({json:{write:!1}})],Y.prototype,"fullExtent",void 0),Object(O.a)([Object(g.a)(["web-map","portal-item"],"fullExtent",["layers"])],Y.prototype,"readFullExtent",null),Object(O.a)([Object(v.b)({readOnly:!0,json:{origins:{"web-map":{write:{target:"featureCollection.showLegend",overridePolicy:function(){return{enabled:null!=this.featureCollectionJSON}}}}}}})],Y.prototype,"legendEnabled",void 0),Object(O.a)([Object(v.b)({type:["show","hide"]})],Y.prototype,"listMode",void 0),Object(O.a)([Object(v.b)({type:Number,nonNullable:!0,json:{write:!1}})],Y.prototype,"minScale",void 0),Object(O.a)([Object(g.a)(["web-map","portal-item"],"minScale",["layers"])],Y.prototype,"readMinScale",null),Object(O.a)([Object(v.b)({type:Number,nonNullable:!0,json:{write:!1}})],Y.prototype,"maxScale",void 0),Object(O.a)([Object(g.a)(["web-map","portal-item"],"maxScale",["layers"])],Y.prototype,"readMaxScale",null),Object(O.a)([Object(v.b)({readOnly:!0})],Y.prototype,"multipointLayer",null),Object(O.a)([Object(v.b)({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Y.prototype,"operationalLayerType",void 0),Object(O.a)([Object(v.b)({readOnly:!0})],Y.prototype,"pointLayer",null),Object(O.a)([Object(v.b)({readOnly:!0})],Y.prototype,"polygonLayer",null),Object(O.a)([Object(v.b)({readOnly:!0})],Y.prototype,"polylineLayer",null),Object(O.a)([Object(v.b)({type:x.a})],Y.prototype,"spatialReference",void 0),Object(O.a)([Object(g.a)(["web-map","portal-item"],"spatialReference",["layers"])],Y.prototype,"readSpatialReference",null),Object(O.a)([Object(v.b)({readOnly:!0,json:{origins:{"web-map":{write:{ignoreOrigin:!0}}}}})],Y.prototype,"sublayers",void 0),Object(O.a)([Object(g.a)("web-map","sublayers",["layers"])],Y.prototype,"readSublayers",null),Object(O.a)([Object(w.a)("web-map","sublayers")],Y.prototype,"writeSublayers",null),Object(O.a)([Object(v.b)({readOnly:!0})],Y.prototype,"textLayer",null),Object(O.a)([Object(v.b)()],Y.prototype,"title",void 0),Object(O.a)([Object(v.b)({readOnly:!0,json:{read:!1}})],Y.prototype,"type",void 0);var Z=Y=Object(O.a)([Object(S.a)("esri.layers.MapNotesLayer")],Y);t.default=Z},1259:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n}));var r=a(14),n=1;function i(e,t){var a,n=0,i=Object(r.a)(t);try{for(i.s();!(a=i.n()).done;){var l,o=null==(l=a.value.attributes)?void 0:l[e];"number"==typeof o&&isFinite(o)&&(n=Math.max(n,o))}}catch(c){i.e(c)}finally{i.f()}return n}}}]);
//# sourceMappingURL=123.a961f60a.chunk.js.map