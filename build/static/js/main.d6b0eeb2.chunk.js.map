{"version":3,"sources":["../node_modules/@arcgis/core/core/workers lazy groupOptions: {} namespace object","redux/reducers/auth.js","utils/session.js","redux/sagas/_auth.js","redux/reducers/config.js","utils/request.js","redux/sagas/_config.js","redux/reducers/security-token.js","redux/types/area-types.js","redux/sagas/requests/area-query.js","utils/format.js","redux/reducers/area-query.js","components/esri/layers/FeatureLayerBuilder.js","redux/sagas/_area-query.js","redux/sagas/index.js","redux/reducers/map.js","redux/sagas/requests/security-token.js","redux/sagas/handlers/security-token.js","redux/actions/area-query-actions.js","redux/sagas/root-saga.js","styles/images/Topo-Abs-BG.svg","styles/images/quiet-professionals-logo.png","components/LoadScreen.jsx","components/UserAccount.jsx","utils/calculate.js","components/esri/widgets/DateRange.jsx","components/esri/map/Map.jsx","utils/map.js","components/Main.jsx","components/App.jsx","styles/global.js","index.js","redux/store.js"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","types","initialState","user","portal","token","loggedIn","state","action","type","payload","startAuth","options","signIn","portalUrl","clientId","popup","UserSession","beginOAuth2","redirectUri","window","location","origin","completeSignIn","a","sessionId","session","completeOAuth2","saveSession","getUser","getPortal","authentication","signOut","Cookies","deleteSession","restoreSession","authInfos","serializedSession","deserialize","console","log","expires","tokenExpires","serialize","sameSite","completeAuth","checkAuth","authLogout","watchStartAPI","call","put","error","reload","takeLatest","loaded","status","response","reject","statusText","handleResponse","handleAs","text","json","getRequestBody","data","isFormData","this","objectToFormData","obj","body","URLSearchParams","prop","hasOwnProperty","append","has","toString","objectToUrlSearchParams","makeRequest","params","url","headers","Headers","getHeaders","method","hideCredentials","credentials","fetch","bind","catch","getAppConfig","resp","fetchConfig","updateConfig","watchFetchConfig","watchUpdateConfig","config","configTypes","isValid","ADD_TO_STORE","ADDED_TO_STORE","SEND_AREA_QUERY","AREA_QUERY_SENT","AREA_QUERY_DONE","AREA_QUERY_FAIL","AREA_QUERY_STATUS","BUILD_FEATURE_LAYER","areaQueryRequest","areaQueryPayload","startDate","endDate","areas","longitude","latitude","radius","axios","request","process","TempSecurityToken","require","dateToIsoString","date","dateObj","Date","dateObjIso","toISOString","slice","group","groupEnd","sDate","setDate","getDate","eDate","INITIAL_STATE","locationData","addToStore","sendAreaQuery","buildFeatureLayer","watchAreaQuery","requests","areaQueryState","baseMap","mapView","rootSaga","all","Object","values","authSagas","configSagas","securitySagas","areaSagas","map","fork","mapLoaded","setSecurityTokenRequest","handleSetSecurityToken","watcherSaga","securityTypes","Container","styled","div","background","Wrapper","Title","Logo","img","FadingContainer","initial","opacity","zIndex","animate","transitionEnd","display","transition","delay","duration","ease","LoadScreen","props","isLoading","src","logo","UserAccount","signedInActionsComponent","style","padding","onRequestSwitchAccount","onRequestSignOut","onClick","signedOutActionsComponent","clear","outputComponent","calcDistance","locations","locationA","locationB","polyline","Polyline","x","y","JSON","stringify","webMercatorToGeographic","polylineLength","geodesicLengths","DateRangeComponent","handleStartDateChange","handleEndDateChange","onFormSubmit","today","now","setState","tempStartDateObj","startDateIsoString","addToStoreCreator","tempEndDateObj","endDateIsoString","event","preventDefault","tokenizedPayload","areaQuery","securityToken","sendAreaQueryCreator","onSubmit","className","label","selected","onChange","onSelect","handleStartQuery","name","dateFormat","maxDate","minDate","handleEndQuery","Component","actionCreators","connect","DateRangeContainer","Map","sketchViewModel","graphicsLayerBaseMap","graphicsLayerGeofence","graphicsLayerSignals","containerId","dateRangeId","dispatch","useDispatch","useSelector","refIdQuery","isAreaQueryDataLoaded","useState","setStartDate","setEndDate","baseMapState","setBaseMapState","mapViewState","setMapViewState","contains","polyFill","pointFill","polygonStroke","color","width","pointStroke","useEffect","sDateIso","eDateIso","element","mapConfig","loaderConfig","loadModules","MapView","layer","GraphicsLayer","view","container","layers","when","res","geometryEngine","LayerList","ScaleBar","Search","Sketch","SketchViewModel","title","basemap","extent","spatialReference","wkid","xmin","ymin","xmax","ymax","dockEnabled","dockOptions","position","breakpoint","layerList","search","scaleBar","unit","ui","add","component","index","updateOnGraphicClick","defaultUpdateOptions","toggleToolOnClick","sketch","availableCreateTools","layout","creationMode","pointSymbol","viewModel","outline","size","polylineSymbol","polygonSymbol","on","onGraphicUpdate","onGraphicCreate","graphic","tool","pointCoordinateX","geometry","centroid","pointCoordinateY","ringCoordinateX","rings","ringCoordinateY","circleRadius","payloadToPush","graphics","boundaryPolygon","symbol","validSymbol","toolEventInfo","complete","logGeometry","update","markerSymbol","Graphic","z","resDataArray","area","i","registrationIDs","regID","j","signals","signal","k","lon","lat","point","registrationID","simpleMarkerSymbol","pointGraphic","handleFeatureLayerBuild","Fragment","DateRange","startDateParsed","parse","endDateParsed","MapWrapper","TopNavBrand","Nav","TopNav","NavList","TopNavList","SubNavToolbar","SubNav","Main","auth","isMapLoaded","useRef","href","target","signInRequest","active","fallback","onMapLoaded","App","pathname","dojoConfig","signInRequested","isLoaded","path","to","GlobalStyle","createGlobalStyle","basename","homepage","store","composeEnhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","rootReducer","combineReducers","reducers","sagaMiddleware","createSagaMiddleware","middleware","createStore","applyMiddleware","run","initStore","ReactDOM","render","document","getElementById"],"mappings":"oGAAA,SAASA,EAAyBC,GAGjC,OAAOC,QAAQC,UAAUC,MAAK,WAC7B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBL,EAAM,KAEjD,MADAI,EAAEE,KAAO,mBACHF,KAGRL,EAAyBQ,KAAO,WAAa,MAAO,IACpDR,EAAyBG,QAAUH,EACnCS,EAAOC,QAAUV,EACjBA,EAAyBW,GAAK,K,2uBCAjBC,EACC,aADDA,EAEI,gBAFJA,EAGG,eAHHA,EAIA,YAJAA,EAKC,aALDA,EAMH,SAIGC,EAAe,CAC1BC,KAAM,KACNC,OAAQ,KACRC,MAAO,KACPC,UAAU,GAGG,aAAmC,IAAlCC,EAAiC,uDAAzBL,EAAcM,EAAW,uCAC/C,OAAQA,EAAOC,MACb,KAAKR,EAAL,MACkCO,EAAOE,QAA/BP,EADV,EACUA,KAAMC,EADhB,EACgBA,OAAQC,EADxB,EACwBA,MAEtB,MAAO,CACLF,OACAC,SACAC,QACAC,UAAU,GAGd,KAAKL,EACH,MAAO,CACLE,KAAM,KACNC,OAAQ,KACRC,MAAO,KACPC,UAAU,GAGd,QACE,OAAOC,IAUAI,EAAY,SAAAC,GAAO,MAAK,CACnCH,KAAMR,EACNS,QAASE,I,mCCtDJ,SAASC,EAAOD,GAAU,IAAD,EAK1BA,EAHFE,iBAF4B,MAEhB,mCAFgB,EAG5BC,EAEEH,EAFFG,SAH4B,EAK1BH,EADFI,aAJ4B,SAS9BC,IAAYC,YAAY,CACtBH,WACAD,YACAE,QACAG,YAAY,GAAD,OAAKC,OAAOC,SAASC,OAArB,WAOR,SAAeC,EAAtB,kC,4CAAO,WAA8BX,GAA9B,+BAAAY,EAAA,+DAKDZ,EAHFE,iBAFG,MAES,mCAFT,EAGHC,EAEEH,EAFFG,SAHG,EAKDH,EADFa,iBAJG,gBAIYX,EAJZ,cAOCY,EAAUT,IAAYU,eAAe,CAAEZ,WAAUD,cACjDT,EAAQqB,EAAQrB,MAEtBuB,EAAYF,EAASD,GAVhB,SAYcC,EAAQG,UAZtB,cAYC1B,EAZD,gBAagB2B,YAAU,KAAM,CACnC1B,OAAQsB,EAAQtB,OAChB2B,eAAgBL,IAfb,cAaCtB,EAbD,yBAkBE,CAAED,OAAMC,SAAQC,UAlBlB,6C,sBAwBA,SAAS2B,EAAQP,IA+CxB,SAAuBA,GACrBQ,SAAeR,GA/CfS,CAAcT,GAMT,SAAeU,EAAtB,kC,4CAAO,WAA8BV,GAA9B,yBAAAD,EAAA,yDACDY,EAAY,KAEVC,EAAoBJ,MAAYR,KAChCC,EAAUW,GAAqBpB,IAAYqB,YAAYD,IAJxD,iCAOgBX,EAAQG,UAPxB,cAOG1B,EAPH,gBASkB2B,YAAU,KAAM,CACnC1B,OAAQsB,EAAQtB,OAChB2B,eAAgBL,IAXf,OASGtB,EATH,OAcGC,EAAQqB,EAAQrB,MAEtB+B,EAAY,CACVjC,OACAC,SACAC,SAEFkC,QAAQC,IAAI,SAAUpC,GArBnB,eAwBLmC,QAAQC,IAAI,YAAaJ,GAxBpB,kBAyBEA,GAzBF,6C,sBA6BP,SAASR,EAAYF,EAASD,GAE5B,IAAMgB,EAAUf,EAAQgB,aAExBT,MAAYR,EAAWC,EAAQiB,YAAa,CAC1CF,UACAG,SAAU,WAvFdL,QAAQC,IAAI,iB,eCcF7B,G,WA4BAkC,G,WAoBAC,G,WAqBAC,G,WAWOC,GAhFjB,SAAUrC,EAAUH,GAApB,uEAGoB,OAHpB,kBAG0ByC,YAAKd,EAAgB3B,EAAOE,QAAQe,WAH9D,UAGQW,EAHR,uBAOkB,OAPlB,SAOwBa,YAAKpC,EAAQL,EAAOE,SAP5C,OAOM0B,EAPN,kBAWQA,EAXR,iBAaM,OADAG,QAAQC,IAAI,mBAAoBJ,GAZtC,UAaYc,YAAI,CACRzC,KAAMR,EACNS,QAAS0B,IAfjB,gCAoBM,OAFAG,QAAQC,IAAI,qBAAsBJ,GAlBxC,UAoBYc,YAAI,CAAEzC,KAAMR,IApBxB,gCAuBI,OAvBJ,oCAuBUiD,YAAI,CAAEzC,KAAMR,IAvBtB,QAwBIsC,QAAQY,MAAM,+BAAd,MAxBJ,sDA4BA,SAAUN,EAAarC,GAAvB,uEAEoB,OAFpB,kBAE0ByC,YAAK1B,EAAgBf,EAAOE,SAFtD,YAEQ0B,EAFR,wBAMM,OANN,SAMYc,YAAI,CACRzC,KAAMR,EACNS,QAAS0B,IARjB,8BAYM,OAZN,UAYYc,YAAI,CAAEzC,KAAMR,IAZxB,gCAeI,OAfJ,oCAeUiD,YAAI,CAAEzC,KAAMR,IAftB,QAgBIsC,QAAQY,MAAM,+BAAd,MAhBJ,sDAoBA,SAAUL,EAAUtC,GAApB,uEAGoB,OAFlB+B,QAAQC,IAAI,gBAAiBhC,GAD/B,kBAG0ByC,YAAKd,EAAgB3B,EAAOE,QAAQe,WAH9D,UAGQW,EAHR,OAIIG,QAAQC,IAAI,8CAA+CJ,IAEvDA,EANR,iBAOM,OAPN,SAOYc,YAAI,CACRzC,KAAMR,EACNS,QAAS0B,IATjB,+BAaM,OAbN,UAaYc,YAAI,CAAEzC,KAAMR,IAbxB,gCAgBI,OAhBJ,oCAgBUiD,YAAI,CAAEzC,KAAMR,IAhBtB,QAiBIsC,QAAQY,MAAM,+BAAd,MAjBJ,sDAqBA,SAAUJ,EAAWvC,GAArB,iEAEI,OAFJ,kBAEUyC,YAAKjB,EAASxB,EAAOE,QAAQe,WAFvC,OAIIL,OAAOC,SAAS+B,SAJpB,+CAMIb,QAAQY,MAAM,4BAAd,MANJ,oDAWO,SAAUH,IAAV,iEACL,OADK,SACCK,YAAWpD,EAAkB6C,GAD9B,OAEL,OAFK,SAECO,YAAWpD,EAAkBU,GAF9B,OAGL,OAHK,SAGC0C,YAAWpD,EAAqB4C,GAHjC,OAIL,OAJK,SAICQ,YAAWpD,EAAc8C,GAJ1B,uC,YCzFM9C,EACC,aADDA,EAEI,gBAFJA,GAGG,eAIHC,GAAe,CAC1BoD,QAAQ,GAGK,cAAmC,IAAlC/C,EAAiC,uDAAzBL,GAAcM,EAAW,uCAC/C,OAAQA,EAAOC,MACb,KAAKR,EAML,KAAKA,EACH,OAAO,uCACFM,GACAC,EAAOE,SAFZ,IAGE4C,QAAQ,IAEZ,QACE,OAAO/C,ICzBb,SAASgD,GAAOC,GACd,OAAIA,EAASD,QAAU,KAAOC,EAASD,OAAS,IACvChE,QAAQC,QAAQgE,GAEhBjE,QAAQkE,OAAO,IAAI9D,MAAM6D,EAASE,aAI7C,SAASC,GAAeC,EAAUJ,GAChC,OAAQI,GACN,IAAK,OACH,OAAOJ,EAASK,OAClB,QACE,OAAOL,EAASM,QA8BtB,SAASC,GAAeC,EAAMC,GAE5B,OAAIA,EACKC,KAAKC,iBAAiBH,GA7BjC,SAAiCI,GAC/B,IAAMC,EAAO,IAAIC,gBACjB,IAAK,IAAIC,KAAQH,EACXA,EAAII,eAAeD,IACrBF,EAAKI,OAAOF,EAAMH,EAAIG,IAS1B,OAJKF,EAAKK,IAAI,MACZL,EAAKI,OAAO,IAAK,QAGZJ,EAAKM,WAoBLC,CAAwBZ,GAS1B,SAASa,GAAYC,GAC1B,OAAO,IAAIvF,SAAQ,SAACC,EAASiE,GAC3B,IAAIsB,EAAMD,EAAOC,IACXf,EAAOc,EAAOd,MAAQ,GACtBgB,EA9BV,SAAoBf,GAClB,IAAMe,EAAU,GAMhB,OAJKf,IACHe,EAAQ,gBAAkB,qCAGrB,IAAIC,QAAQD,GAuBDE,CAAWJ,EAAOb,YAC5BrD,EAAU,CACduE,OAAQL,EAAOK,QAAU,MACzBH,WAGGF,EAAOM,kBACVxE,EAAQyE,YAAc,WAGxB,IAAIhB,EAAON,GAAeC,EAAMc,EAAOb,YAEhB,QAAnBrD,EAAQuE,OACVJ,EAAG,UAAMA,EAAN,YAAaV,GAEhBzD,EAAQyD,KAAOA,EAGjBiB,MAAMP,EAAKnE,GACRnB,KAAK8D,IACL9D,KAAKkE,GAAe4B,KAAK,KAAMT,EAAOlB,WACtCnE,MAAK,SAASuE,GAETA,EAAKb,MACPM,EAAOO,EAAKb,OAGd3D,EAAQwE,MAETwB,OAAM,SAASrC,GACdM,EAAON,SASR,SAASsC,KACd,OAAO,IAAIlG,SAAQ,SAACC,EAASiE,GAC3BoB,GAAY,CACVE,IAAI,eACJI,OAAQ,QACP1F,MAAK,SAAAiG,GACNnD,QAAQC,IAAI,aAAckD,GAC1BlG,EAAQkG,S,gBC1GJC,I,YAeAC,I,YA0COC,I,YAIAC,IA7DjB,SAAUH,GAAYnF,GAAtB,uEAGmB,OAHnB,kBAGyByC,YAAKwC,IAH9B,OAMI,OAHMM,EAHV,gBAMU7C,YAAI,CACRzC,KAAMuF,EACNtF,QAASqF,IARf,uDAWIxD,QAAQY,MAAM,mCAAd,MAXJ,sDAeA,SAAUyC,GAAapF,GAAvB,iEAGmB,OAHnB,kBAGyByC,YAAKwC,IAH9B,kCAOM,OAPN,SAOYvC,YAAI,CACRzC,KAAMuF,EACNtF,QAASF,EAAOE,UATxB,uDAaI6B,QAAQY,MAAM,oCAAd,MAbJ,sDA0CO,SAAU0C,KAAV,iEACL,OADK,SACCxC,YAAW2C,GAA0BL,IADtC,wCAIA,SAAUG,KAAV,iEACL,OADK,SACCzC,YAAW2C,EAA2BJ,IADvC,wCC7EA,IAAM3F,GACW,uBADXA,GAES,qBAFTA,GAGa,yBAHbA,GAKa,yBAIbC,GAAe,CAC1B,SAAW,GAGE,cAAmC,IAAlCK,EAAiC,uDAAzBL,GAAcM,EAAW,uCAC/C,OAAQA,EAAOC,MACb,KAAKR,GAGH,OAAO,2BACFM,GADL,IAEE0F,SAAS,IAGb,KAAKhG,GAKH,OAHAsC,QAAQC,IAAI,uBAAwBhC,GAG7B,2BACFD,GADL,IAEE0F,SAAS,IAGb,KAAKhG,GAKH,OAHAsC,QAAQC,IAAI,2BAA4BhC,GAGjC,uCACFD,GACAC,EAAOE,SAFZ,IAGEuF,SAAS,IAGb,KAAKhG,GAKH,OAHAsC,QAAQC,IAAI,2BAA4BhC,GAGjC,uCACFD,GACAC,EAAOE,SAFZ,IAGEuF,SAAS,IAGb,QACE,OAAO1F,ICnDN,IAAM2F,GAAe,eACfC,GAAiB,iBAEjBC,GAAkB,kBAClBC,GAAkB,kBAGlBC,GAAkB,kBAElBC,GAAkB,kBAClBC,GAAoB,oBAGpBC,GAAsB,sB,qBCR5B,SAASC,GAAiBlG,GAC/B,IAGMmG,EAAmB,CACvBC,UAAWpG,EAAOE,QAAQkG,UAC1BC,QAASrG,EAAOE,QAAQmG,QACxBC,MAAO,CAAC,CACNC,UAAWvG,EAAOE,QAAQqG,UAC1BC,SAAUxG,EAAOE,QAAQsG,SACzBC,OAAQzG,EAAOE,QAAQuG,UAM3B,OAFA1E,QAAQC,IAAI,8BAA+BmE,GAEpCO,KAAMC,QAAQ,CACnBpC,IAhBgBqC,6EAiBhBjC,OAAQ,OACRnB,KAAM2C,EACN3B,QAAS,CACP,OAAU,mBACV,eAAgB,mBAChB,cAAiBoC,uCACjB,kBAAqB5G,EAAOE,QAAQ2G,qBA1B1CC,EAAQ,KAAUvB,S,iECSZwB,I,cAAkB,SAACC,GACvB,IAAMC,EAAU,IAAIC,KAAKF,GACnBG,EAAaF,EAAQG,cAAcC,MAAM,GAAI,GAAK,IAOxD,OALAtF,QAAQuF,MAAM,oBACdvF,QAAQC,IAAI,cAAeiF,GAC3BlF,QAAQC,IAAI,gBAAiBmF,GAC7BpF,QAAQwF,WAEDJ,ICfHF,GAAU,IAAIC,KACdM,GAAQP,GAAQQ,QAAQR,GAAQS,UAAY,GAC5CC,GAAQV,GAAQQ,QAAQR,GAAQS,WAIzBE,IAHIb,GAAgB,IAAIG,KAAKM,KACzBT,GAAgB,IAAIG,KAAKS,KAEb,CAC3BvB,UAAW,IACXC,QAAS,IACTG,SAAU,EACVD,UAAW,EACXE,OAAQ,GACR1D,OAAQ,OACR8E,aAAc,KAGD,cAAoC,IAAnC9H,EAAkC,uDAA1B6H,GAAe5H,EAAW,uCAChD,OAAQA,EAAOC,MACb,KAAKR,GAiBH,GAhBAsC,QAAQC,IAAI,UAAWhC,GAgBM,iBAAlBA,EAAOE,QAAqB,CACtBF,EAAOE,QACtB,OAAO,uCACFH,GACAC,EAAOE,SAFZ,IAGE6C,OAAQ,YAGV,OAAO,uCACFhD,GACAC,EAAOE,SAFZ,IAGE6C,OAAQ,YAId,KAAKtD,GAGH,OAFAsC,QAAQC,IAAI,SAAUhC,GAEf,uCACFD,GACAC,EAAOE,SAFZ,IAGE6C,OAAQ,YAGZ,KAAKtD,GAGH,OAFAsC,QAAQC,IAAI,YAAahC,GAElB,2BACFD,GADL,IAEEgD,OAAQ,YAGZ,KAAKtD,GAEH,OADAsC,QAAQC,IAAI,SAAUhC,GACfD,EAET,KAAKN,GAGH,OAFAsC,QAAQC,IAAI,WAAYhC,GAEjB,CACL+C,OAAQhD,EAAMgD,QAGlB,QACE,OAAOhD,ICJb,I,YCxEU+H,I,YAYAC,I,YAkBAC,I,YAwBOC,IAtDjB,SAAUH,GAAW9H,GAArB,iEAGI,OAFF+B,QAAQC,IAAI,WAAYhC,GAD1B,kBAGU0C,YAAI,CACRzC,KAAMR,GACNS,QAASF,EAAOE,UALtB,sDAQI6B,QAAQY,MAAM,gCAAd,MARJ,qDAYA,SAAUoF,GAAc/H,GAAxB,yEAGqB,OAFnB+B,QAAQC,IAAI,WAAYhC,GAD1B,kBAG2ByC,YAAKyF,GAA2BlI,GAH3D,OAQI,OALMgD,EAHV,OAIYQ,EAASR,EAATQ,KACRzB,QAAQC,IAAI,8BAA+BwB,GAL/C,SAQUd,YAAI,CAAEzC,KAAMR,GAAuBS,QAASsD,IARtD,yDAcIzB,QAAQY,MAAM,mCAAd,MAdJ,uDAkBA,SAAUqF,GAAkBhI,GAA5B,uEAIqB,OAHnB+B,QAAQC,IAAI,WAAYhC,GAD1B,EAE+CA,EAAOE,QAFtD,EAEUiI,eAFV,EAE0BC,QAF1B,EAEmCC,QAFnC,kBAI2B5F,aAAK,SAAC0F,EAAgBC,EAASC,OAJ1D,8DAmBItG,QAAQY,MAAM,uCAAd,MAnBJ,sDAwBO,SAAUsF,KAAV,iEACL,OADK,SACCpF,YAAWpD,GAAoBqI,IADhC,OAEL,OAFK,SAECjF,YAAWpD,GAAuBsI,IAFnC,OAGL,OAHK,SAGClF,YAAWpD,GAA2BuI,IAHvC,wC,gBC1CkBM,IAAV,SAAUA,KAAV,iEACb,OADa,SACPC,YAAI,sBACLC,OAAOC,OAAOC,IADT,YAELF,OAAOC,OAAOE,IAFT,YAGLH,OAAOC,OAAOG,IAHT,YAILJ,OAAOC,OAAOI,KAGjBC,IAAIC,MARO,wCCdR,IAAMtJ,GACC,aAIDmI,GAAgB,CAC3B9E,QAAQ,GAGK,cAAoC,IAAnC/C,EAAkC,uDAA1B6H,GAAe5H,EAAW,uCAChD,OAAQA,EAAOC,MACb,KAAKR,GACH,OAAO,2BACFM,GADL,IAEE+C,QAAQ,IAGZ,QACE,OAAO/C,IAKAiJ,GAAY,SAAA5I,GAAO,MAAK,CACnCH,KAAMR,GACNS,QAASE,IC5BJ,SAAS6I,KACd,OAAOvC,KAAMC,QAAQ,CACnBhC,OAAQ,MACRJ,IAAMqC,qEATVE,EAAQ,KAAUvB,S,gBCCD2D,IAAV,SAAUA,GAAuBlJ,GAAjC,yEAEc,OAFd,kBAEoByC,YAAKwG,IAFzB,OAKH,OAHMjG,EAFH,OAGKQ,EAASR,EAATQ,KACRzB,QAAQC,IAAI,qBAAsBgB,GAJ/B,SAKGN,YV8DsC,CAC9CzC,KAAMR,GACNS,QUhEiCsD,IAL5B,yDAQHzB,QAAQC,IAAI,UAAZ,MARG,uDCOA,I,YCiBUmH,IAAV,SAAUA,KAAV,iEAEL,OAFK,SAECtG,YAAWuG,GAAkCF,IAF9C,wC,wDC5BQ,OAA0B,wCCA1B,oqX,uCCyBTG,GAAYC,KAAOC,IAAV,kSAQ8BC,IAIvCC,GAAUH,KAAOC,IAAV,gHAOPG,GAAQJ,KAAOC,IAAV,gPAmBLI,GAAOL,KAAOM,IAAV,qFAMJC,GAAkB,kBACtB,eAAC,KAAON,IAAR,CACEO,QAAS,CAAEC,QAAS,EAAGC,OAAQ,KAC/BC,QAAS,CACPF,QAAS,EACTG,cAAe,CACbC,QAAS,SAGbC,WAAY,CAAEC,MAAO,EAAGC,SAAU,EAAGC,KAAM,aAR7C,SAUE,eAAClB,GAAD,OAuBWmB,GAnBI,SAAAC,GACjB,OAAKA,EAAMC,UAeJ,eAAC,GAAD,IAbH,gBAACrB,GAAD,WACE,eAACI,GAAD,UACE,eAAC,KAAD,MAEF,gBAACC,GAAD,WACE,eAACC,GAAD,CAAMgB,IAAKC,KAEX,eAAC,aAAD,kD,4PCzBKC,GA3CK,SAAAJ,GAClB,IAAMK,EAA2BL,EAAM9K,KACrC,eAAC,KAAD,CAAmBoL,MAAO,CAAEC,QAAS,GAArC,SACE,gBAAC,KAAD,CACErL,KAAM8K,EAAM9K,KACZC,OAAQ6K,EAAM7K,OACdC,MAAO4K,EAAM5K,MACboL,uBAAwB,kBAAMlJ,QAAQC,IAAI,2BAC1CkJ,iBAAkBT,EAAMjJ,QAL1B,UAME,eAAC,KAAD,CAAuB2J,QAAS,kBAAMpJ,QAAQC,IAAI,+BAAlD,gCAGA,eAAC,KAAD,CAAuBmJ,QAAS,kBAAMpJ,QAAQC,IAAI,oBAAlD,qBAGA,eAAC,KAAD,CAAuBmJ,QAAS,kBAAMpJ,QAAQC,IAAI,qBAAlD,sBAGA,eAAC,KAAD,CAAuBmJ,QAAS,kBAAMpJ,QAAQC,IAAI,+BAAlD,gCAGA,eAAC,KAAD,CAAuBmJ,QAAS,kBAAMpJ,QAAQC,IAAI,0BAAlD,gCAKF,KAEEoJ,EACJ,eAAC,KAAD,UACE,eAAC,KAAD,CAAQC,OAAK,EAACF,QAASV,EAAMpK,OAA7B,uBAMAiL,EAAkBb,EAAM3K,SACxBgL,EACAM,EAEJ,OAAO,+BAAME,K,uGCtCFC,GAAe,SAAAd,GAE1B1I,QAAQC,IAAI,cAAeyI,GAE3B,IAAMe,EAAYf,EACVgB,EAAyBD,EAAzBC,UAAWC,EAAcF,EAAdE,UAKfC,EAAW,IAAIC,KAAS,CAC1B,MAAS,CAAC,CACR,CAACH,EAAUI,EAAGJ,EAAUK,GACxB,CAACJ,EAAUG,EAAGH,EAAUI,OAG5B/J,QAAQC,IAAI+J,KAAKC,UAAUL,IAC3BA,EAAW,IAAIC,KAASD,GACxB5J,QAAQC,IAAI+J,KAAKC,UAAUL,IAC3BA,EAAWM,aAAwBN,GACnC5J,QAAQC,IAAI+J,KAAKC,UAAUL,IAE3B,IAAIO,EAAiBC,aAAgB,CAACR,GAAW,UAuBjD,OAdA5J,QAAQC,IAAI,oBAAqBkK,EAAe,IAE5CA,GAAkB,OAAMA,EAAiB,MAYtCA,EAAe,I,8DC5ClBE,I,2DAEJ,WAAY3B,GAAQ,IAAD,+BACjB,cAAMA,IACD1K,MAAQ,CACXqG,UAAW,KACXC,QAAS,MAGX,EAAKgG,sBAAwB,EAAKA,sBAAsBtH,KAA3B,iBAC7B,EAAKuH,oBAAsB,EAAKA,oBAAoBvH,KAAzB,iBAC3B,EAAKwH,aAAe,EAAKA,aAAaxH,KAAlB,iBATH,E,0DAYnB,WAEE,OADAhD,QAAQC,IAAI,qEACL,I,+BAGT,WACED,QAAQC,IAAI,sBACZ,IAAMwK,EAAQ,IAAItF,KAAKA,KAAKuF,OAE5B/I,KAAKgJ,SAAS,CACZtG,UAAWoG,EAAM/E,QAAQ+E,EAAM9E,UAAY,GAC3CrB,QAASmG,EAAM/E,QAAQ+E,EAAM9E,aAG/B3F,QAAQC,IAAI,SAAU0B,KAAK+G,OAC3B1I,QAAQC,IAAI,QAAS0B,KAAK3D,S,mCAI5B,SAAsBiH,GACpB,IAAM2F,EAAmB,IAAIzF,KAAKF,GAC5B4F,EAAqB7F,GAAgB4F,GAO3CjJ,KAAK+G,MAAMoC,kBAAkB,CAAEzG,UAAWwG,M,iCAM5C,SAAoB5F,GAClB,IAAM8F,EAAiB,IAAI5F,KAAKF,GAC1B+F,EAAmBhG,GAAgB+F,GAOzCpJ,KAAK+G,MAAMoC,kBAAkB,CAAExG,QAAS0G,M,0BAK1C,SAAaC,GACXA,EAAMC,iBAENlL,QAAQuF,MAAM,gBACdvF,QAAQC,IAAI0B,KAAK+G,MAAMrE,WACvBrE,QAAQC,IAAI0B,KAAK+G,MAAMpE,SACvBtE,QAAQwF,WAER,IAAM2F,EAAgB,2BAAQxJ,KAAK+G,MAAM0C,WAAczJ,KAAK+G,MAAM2C,eAMlE,OAJArL,QAAQC,IAAI,WAAYkL,GAEFxJ,KAAK+G,MAAM4C,qBAAqBH,K,oBAMxD,WAAU,IAAD,OACP,OACE,wBAAMI,SAAU5J,KAAK6I,aAArB,UACE,uBAAKgB,UAAU,aAAf,UACE,kDACA,eAAC,KAAD,CACE/N,GAAG,kBACHgO,MAAM,aAENC,SAAU/J,KAAK+G,MAAMrE,UACrBsH,SAAUhK,KAAK2I,sBACfsB,SAAU,SAAC3G,GAAD,OAAU,EAAKyD,MAAMmD,iBAAiB5G,IAChD6G,KAAK,YACLC,WAAW,aACX1H,UAAW1C,KAAK+G,MAAMrE,UACtB2H,QAAS7G,KAAKuF,MACduB,QAAS,IAAI9G,KAAK,iCAGtB,uBAAKqG,UAAU,aAAf,UACE,gDACA,eAAC,KAAD,CACE/N,GAAG,gBACHgO,MAAM,WAENC,SAAU/J,KAAK+G,MAAMpE,QACrBqH,SAAUhK,KAAK4I,oBACfqB,SAAU,SAAC3G,GAAD,OAAU,EAAKyD,MAAMwD,eAAejH,IAC9C6G,KAAK,UACLC,WAAW,aACXzH,QAAS3C,KAAK+G,MAAMpE,QACpB0H,QAAS7G,KAAKuF,MACduB,QAAS,IAAI9G,KAAK,iCAGtB,eAAC,KAAD,CAAQqG,UAAU,kBAAkBtN,KAAK,SAAzC,2B,GAnHyBiO,cA4I3BC,GAAiB,CACrBtB,kBAJwB,SAACzM,GAAD,MAAc,CAAEH,KAAM,eAAgBC,QAASE,IAKvEiN,qBAJ2B,SAACjN,GAAD,MAAc,CAAEH,KAAM,kBAAmBC,QAASE,KAOhEgO,gBAxBS,SAAArO,GAEtB,OADAgC,QAAQC,IAAI,UAAWjC,EAAMoN,WACtB,CAQLA,UAAWpN,EAAMoN,UACjBC,cAAerN,EAAMqN,iBAevBe,GAFaC,CAGbhC,IC1GFtF,EAAQ,KAAUvB,SAUlB,I,qBAAM8D,GAAYC,KAAOC,IAAV,gEAKT8E,GAAqB/E,KAAOC,IAAV,sFAkuBT+E,IA5tBiBhF,KAAOC,IAAV,oEAKCD,KAAOC,IAAV,oEAYf,SAAAkB,GAeV,IA6BI8D,EAWAC,EACFC,EACAC,EA1CIC,EAAc,mBACdC,EAAc,qBAKdC,EAAWC,cAIX3G,GAHgB4G,aAAY,SAAAhP,GAAK,OAAIA,EAAMqN,iBACzCvG,kBACWkI,aAAY,SAAAhP,GAAK,OAAIA,EAAMiP,cACvBD,aAAY,SAAAhP,GAAK,OAAIA,EAAMoN,cAC5C8B,EAAwBF,aAAY,SAAAhP,GAAK,OAAIA,EAAMoN,UAAUpK,UA1BhD,EAkCemM,mBAAS,GAlCxB,oBAkCZ9I,EAlCY,KAkCD+I,EAlCC,OAmCWD,mBAAS,GAnCpB,oBAmCZ7I,EAnCY,KAmCH+I,EAnCG,OAoCqBF,mBAAS,IApC9B,oBAoCZG,EApCY,KAoCEC,EApCF,OAqCqBJ,mBAAS,IArC9B,oBAqCZK,EArCY,KAqCEC,EArCF,KAyCfpH,EAAUiH,EACVhH,EAAUkH,EAWVE,GAAW,EAQTC,EAAW,CAAC,IAAK,IAAK,IAAK,IAC3BC,EAAY,CAAC,EAAG,GAAI,KAGpBC,EAAgB,CACpBC,MAAO,CAAC,EAAG,GAAI,KACfC,MAAO,GAGHC,EAAc,CAClBF,MAAO,CAAC,EAAG,GAAI,IACfC,MAAO,GAQTE,qBAAU,WACR,IAAMxD,EAAQ,IAAItF,KAAKA,KAAKuF,OAC5B1K,QAAQC,IAAI,kBAAmBwK,GAC/B,IAAMhF,EAAQgF,EAAM/E,QAAQ+E,EAAM9E,UAAY,GACxCC,EAAQ6E,EAAM/E,QAAQ+E,EAAM9E,WAC5BuI,EAAWlJ,GAAgB,IAAIG,KAAKM,IACpC0I,EAAWnJ,GAAgB,IAAIG,KAAKS,IAG1CwH,EAAa3H,GACb4H,EAAWzH,GAGXkH,EAAS,CAAE5O,KAAMR,GAAoBS,QAAS,CAAEkG,UAAW6J,KAC3DpB,EAAS,CAAE5O,KAAMR,GAAoBS,QAAS,CAAEmG,QAAS6J,OAEzD,IAOFF,qBAAU,WClNL,IAAiBG,EAASC,EAAWC,GAApBF,EDmNZxB,ECnNqByB,EDmNR3F,EAAM2F,UCnNaC,EDmNF5F,EAAM4F,aChNvCC,uBAAY,CAAC,WAAY,qBAAsB,6BAA8BD,GACjFpR,MAAK,YAAoC,IAAD,oBAAjCqP,EAAiC,KAA5BiC,EAA4B,KAEjCC,EAAQ,IAAIC,EAFqB,MAKvC,GAAKN,EAAL,CAGA,IAAMrH,EAAM,IAAIwF,EAAI8B,GAGhBM,EAAO,IAAIH,EAAJ,aACTzH,MACA6H,UAAWR,EACXS,OAAQ,CAACJ,IACNJ,IAML,OAAOM,EAAKG,MAAK,WAEf,OAAOH,UDyLRzR,MAAK,SAAA6R,GAGJ/O,QAAQC,IAAI,YAAa8O,GAKzBR,uBAAY,CAEV,cACA,+BACA,WACA,sBACA,yBACA,wBACA,sBACA,sBACA,sCACA,sBAAuB7F,EAAM4F,cAC5BpR,MAAK,YAUU,IAAD,qBARb8R,GAQa,WAPbzC,EAOa,KALb0C,GAKa,WAJbC,EAIa,KAHbC,EAGa,KAFbC,EAEa,KADbC,EACa,KAAbb,EAAa,KAKb/B,EAAuB,IAAIiC,KAAc,CACvCY,MAAO,YAGTjJ,EAAU,IAAIkG,EAAI,CAChBgD,QAAS,cACTV,OAAQ,CAACpC,KAGXnG,EAAU,IAAIkI,EAAJ,aAGRI,UAAW,mBACX7H,IAAKV,EACLmJ,OAAQ,CACNC,iBAAkB,CAChBC,KAAM,QAERC,MAAO,QACPC,KAAM,QACNC,MAAO,QACPC,KAAM,SAERrR,MAAO,CACLsR,aAAa,EACbC,YAAa,CACXC,SAAU,SACVC,YAAY,KAGbxH,EAAM2F,YAgBXd,EAAgBlH,GAChBoH,EAAgBnH,GAQF,IAAInB,KAAlB,IA8BMgL,EAAY,IAAIlB,EAAU,CAC9BN,KAAMrI,IAGF8J,EAAS,IAAIjB,EAAO,CACxBR,KAAMrI,IAGF+J,EAAW,IAAInB,EAAS,CAC5BP,KAAMrI,EACNgK,KAAM,SAgBRhK,EAAQiK,GAAGC,IAAI3D,EAAa,aAC5BvG,EAAQiK,GAAGC,IAAI,CAAC,CACdC,UAAWL,EACXH,SAAU,YACVS,MAAO,KAYTpK,EAAQiK,GAAGC,IAAI,CAAC,CACdC,UAAWN,EACXF,SAAU,kBAQZ3J,EAAQiK,GAAGC,IAAI,CAAC,CACdC,UAAWJ,EACXJ,SAAU,cACVS,MAAO,KAITpK,EAAQwI,MAAK,WAUXtC,EAAkB,IAAI6C,EAAgB,CACpCV,KAAMrI,EACNmI,MAAO/B,EACPiE,sBAAsB,EACtBC,qBAAsB,CAEpBC,mBAAmB,KAKvB,IAAMC,EAAS,IAAI1B,EAAO,CACxB3R,GAAI,mBACJsT,qBAAsB,CAAC,QAAS,UAEhCC,OAAQ,aACRvC,MAAO/B,EACPiC,KAAMrI,EAEN2K,aAAc,WAIVC,EAAcJ,EAAOK,UAAUD,YACrCA,EAAYpD,MAAQF,EACpBsD,EAAYE,QAAUpD,EACtBkD,EAAYG,KAAO,EAEnB,IAAMC,EAAiBR,EAAOK,UAAUG,eACxCA,EAAexD,MAAQD,EAAcC,MACrCwD,EAAevD,MAAQF,EAAcE,MAErC,IAAMwD,EAAgBT,EAAOK,UAAUI,cACvCA,EAAczD,MAAQH,EACtB4D,EAAcH,QAAUvD,EAExBvH,EAAQiK,GAAGC,IAAI,CAAC,CACdC,UAAWK,EACXb,SAAU,kBAKZzD,EAAgBgF,GAAG,CAAC,SAAU,OAAQ,QAASC,GAC/CX,EAAOU,GAAG,CAAC,SAAU,YAAaE,MAIpC,IAAMA,EAAkB,SAAAzG,GAEtB,IAAM0G,EAAU1G,EAAM0G,QAMtB,GAJoB,UAAhB1G,EAAMjN,OAAoC,WAAfiN,EAAM2G,MACnC5R,QAAQC,IAAI,iCAAkCgL,GAG5B,aAAhBA,EAAMjN,OAAuC,WAAfiN,EAAM2G,KAAmB,CACzD5R,QAAQC,IAAI,oCAAqCgL,GAGjD,IAAM4G,EAAmBF,EAAQG,SAASC,SAASjI,EAC7CkI,EAAmBL,EAAQG,SAASC,SAAShI,EAC7CkI,EAAkBN,EAAQG,SAASI,MAAM,GAAG,GAAG,GAC/CC,EAAkBR,EAAQG,SAASI,MAAM,GAAG,GAAG,GAa/CE,EAAe5I,GAHH,CAAEE,UARF,CAChB,EAAKmI,EACL,EAAKG,GAMwBrI,UAJb,CAChB,EAAKsI,EACL,EAAKE,KAMPnS,QAAQC,IAAI,kBAAmBmS,GAE/B,IAAMC,EAAgB,CACpB5N,SAAUkN,EAAQG,SAASC,SAAStN,SACpCD,UAAWmN,EAAQG,SAASC,SAASvN,UACrCE,OAAQ0N,GAIVtF,Ef1Y4B,CAC1C5O,KAAMR,GACNS,QewYwCkU,IAIR,WAAhBpH,EAAMjN,OAAqC,WAAfiN,EAAM2G,MACpC5R,QAAQC,IAAI,kCAAmCgL,IAM7CwG,EAAkB,SAAAxG,GAEtB,IAAM0G,EAAU1G,EAAMqH,SAAS,GAC/BtS,QAAQC,IAAI,yBAA0BgL,GAKtCyC,EAAWsB,EAAetB,SAjWpC6E,UAiW8DZ,EAAQG,UAI5DH,EAAQa,OApWlBC,WA0WYxH,EAAMyH,eACwB,cAA7BzH,EAAMyH,cAAcxU,MACU,iBAA7B+M,EAAMyH,cAAcxU,KAOG,aAAhB+M,EAAMjN,QACfgC,QAAQC,IAAI,gBAAiB0R,GAC7BnF,EAAgBmG,WAChBC,EAAYjB,EAAQG,UAKfpE,IACH1N,QAAQC,IAAI,eAAgB0R,GAC5BnF,EAAgBqG,OAAO,CAAClB,GAAU,CAAEC,KAAM,YAC1CgB,EAAYjB,EAAQG,aAhBtB9R,QAAQC,IAAI,sBAAuB0R,GAC/BjE,IACF1N,QAAQC,IAAI,0BAA2B0R,GACvCnF,EAAgBmG,cAoDtBjG,EAAwB,IAAIgC,KAAc,CAAEY,MAAO,cACnDjJ,EAAQwI,OAAO2B,IAAI9D,GAInB,IAOMoG,EAAe,CACnB5U,KAAM,gBACN4P,MAAOF,EACPwD,QAAS,CAEPtD,MAAO,CAAC,EAAG,GAAI,IACfC,MAAO,IAMU,IAAIgF,KAAQ,CAC/BjB,SApBc,CACd5T,KAAM,QACNsG,WAAY,UACZC,SAAU,WAkBV+N,OAAQM,IAyCV,SAASF,EAAYd,GACG,UAAlBA,EAAS5T,KAEX8B,QAAQC,IAAI,iBAAkB6R,EAAShI,EAAGgI,EAAS/H,EAAG+H,EAASkB,GAI/DhT,QAAQC,IAAI,wDAkCxB,IAoF2B,WAAzBiN,IACFlN,QAAQC,IAAI,gBAAiBiN,GA9DC,SAAC9G,EAAgBkH,GAI/C,IAAM2F,EAAe7M,EAAeN,aAAavB,MAEjDvE,QAAQC,IAAI,iBAAkBgT,GAE9BtG,EAAuB,IAAI+B,KAAc,CAAEY,MAAO,gBAGlD2D,EAAalM,KAAI,SAACmM,EAAMC,GAEtBF,EAAaE,GAAGC,gBAAgBrM,KAAI,SAACsM,EAAOC,GAE1CL,EAAaE,GAAGC,gBAAgBE,GAAGC,QAAQxM,KAAI,SAACyM,EAAQC,GAEtD,IAAMC,EAAMF,EAAO/O,SACbkP,EAAMH,EAAOhP,UAIboP,GAHQJ,EAAOK,eAGP,CACZ3V,KAAM,QACNsG,UAAWmP,EACXlP,SAAUiP,IAKNI,EAAqB,CACzB5V,KAAM,gBACN4P,MAAOF,EACPwD,QAAS,CACPtD,MAAOE,EACPD,MAAO,IAILgG,EAAe,IAAIhB,KAAQ,CAC/BjB,SAAU8B,EACVpB,OAAQsB,IAIVnH,EAAqB6D,IAAIuD,YAO/BzG,EAAauB,OAAO2B,IAAI7D,GAWxBqH,CAAwB5N,EAAgBkH,IAuB1C,OACE,eAAC,IAAM2G,SAAP,UACE,eAAC,GAAD,CAAWxW,GAAImP,EAAf,SACE,eAACN,GAAD,CAAoB7O,GAAIoP,EAAarB,UAAW,cAAhD,SACE,eAAC0I,GAAD,CACE7P,UAAWA,EACXC,QAASA,EACTuH,iBA1BgB,SAAC5G,GAEzBjF,QAAQC,IAAI,sBAAuBgF,GAEnC,IAAMkP,EAAkBhP,KAAKiP,MAAMnP,GAEnCmI,EAAa+G,IAqBLjI,eAlBc,SAACjH,GAEvBjF,QAAQC,IAAI,oBAAqBgF,GAEjC,IAAMoP,EAAgBlP,KAAKiP,MAAMnP,GAEjCoI,EAAWgH,cEhtBT/M,I,4BAAYC,KAAOC,IAAV,4JAST8M,GAAa/M,KAAOC,IAAV,mJASVI,GAAOL,aAAOgN,KAAPhN,CAAH,8FAOJiN,GAAMjN,aAAOkN,KAAPlN,CAAH,6DAMHmN,GAAUnN,aAAOoN,KAAPpN,CAAH,uDAIPqN,GAAgBrN,aAAOsN,KAAPtN,CAAH,yEAuIJuN,GAhIF,SAAApM,GACX,IAAMqM,EAAO/H,aAAY,SAAAhP,GAAK,OAAIA,EAAM+W,QAClCvR,EAASwJ,aAAY,SAAAhP,GAAK,OAAIA,EAAMwF,UACpC5F,EAAOoP,aAAY,SAAAhP,GAAK,OAAIA,EAAM+W,KAAKnX,QACvCoX,EAAchI,aAAY,SAAAhP,GAAK,OAAIA,EAAM+I,IAAIhG,UAE7C+L,GADamI,mBACFlI,eAGjB/M,QAAQC,IAAI,iCAwCZ,OACE,gBAAC,GAAD,WAEE,eAAC,GAAD,CAAY0I,WAAYqM,IAIxB,gBAACR,GAAD,WACE,eAAC,GAAD,CAAMU,KAAK,IAAItM,IAAKC,KACpB,eAAC,KAAD,CAAaqM,KAAK,IAAlB,8BACItX,EAYA,gBAAC8W,GAAD,WACE,eAAC,KAAD,CAAYQ,KAAK,yDAAyDC,OAAO,SAAjF,uBAGA,eAAC,KAAD,CAAYD,KAAK,+CAA+CC,OAAO,SAAvE,kBAGA,eAAC,KAAD,CAAYD,KAAK,qCAAqCC,OAAO,SAA7D,8BAlBF,gBAACT,GAAD,WACE,eAAC,KAAD,CAAYQ,KAAK,IAAjB,sBAGA,eAAC,KAAD,CAAYA,KAAK,IAAjB,sBAGA,eAAC,KAAD,CAAYA,KAAK,IAAjB,yBAiBN,eAAC,GAAD,CACEtX,KAAMmX,EAAKnX,KACXC,OAAQkX,EAAKlX,OACbC,MAAOiX,EAAKjX,MACZC,SAAUgX,EAAKhX,SACfO,OA/EO,WAAO,IACZE,EAA+BgF,EAA/BhF,SAAUU,EAAqBsE,EAArBtE,UAAWT,EAAU+E,EAAV/E,MAC7BuB,QAAQC,IAAI,uDACZ6M,EACE1O,EAAU,CACRI,WACAU,YACAT,QACA2W,eAAe,MAwEb3V,QAlEQ,W3BlEI,IAAAP,E2BmElBc,QAAQC,IAAI,qDACZ6M,G3BpEkB5N,E2BoEFsE,EAAOtE,U3BpES,CAClChB,KAAMR,EACNS,QAAS,CACPe,UAAWA,Y2BsIT,gBAAC0V,GAAD,WACE,eAAC,KAAD,IACA,gBAAC,KAAD,WACE,eAAC,KAAD,CAAYS,QAAM,EAAlB,qBACA,eAAC,KAAD,CAAYH,KAAK,IAAjB,qBACA,eAAC,KAAD,CAAYA,KAAK,IAAjB,0BAKJ,eAACZ,GAAD,UAGE,eAAC,WAAD,CAAUgB,SAAU,mDAApB,SAEE,eAAC,GAAD,CACEC,YAAatO,GACboH,UAAW7K,EAAO6K,UAClBC,aAAc9K,EAAO8K,aAAarP,GAAC,YCjFhCuW,GA7FH,SAAA9M,GAAS,IAGX+M,EAAa/M,EAAM5J,SAAnB2W,SAERzV,QAAQC,IAAI,WAAYyI,GAGxB,IAAM9K,EAAOoP,aAAY,SAAAhP,GAAK,OAAIA,EAAM+W,KAAKnX,QACvC4F,EAASwJ,aAAY,SAAAhP,GAAK,OAAIA,EAAMwF,UACpC6H,EAAgB2B,aAAY,SAAAhP,GAAK,OAAIA,EAAMqN,iBAC3CyB,EAAWC,cAcjBkB,qBAAU,WACRnB,EzBlC8B,CAAE5O,KAAMR,OyBmCrC,IAGHuQ,qBAAU,WAER,GAAKzK,EAAOzC,OAAZ,CAFc,IAINxC,EAA+CiF,EAA/CjF,UAAWC,EAAoCgF,EAApChF,SAAUU,EAA0BsE,EAA1BtE,UAAWwW,EAAelS,EAAfkS,WAExC7W,OAAO6W,WAAaA,EAEpB5I,E5BlCiC,CACnC5O,KAAMR,EACNS,Q4BgCqB,CAAEI,YAAWC,WAAUU,kBACzC,CAACsE,IAKJyK,qBAAU,WAER,GAAKzK,EAAOzC,OAAZ,CAFc,IAGNxC,EAAmCiF,EAAnCjF,UAAWC,EAAwBgF,EAAxBhF,SAAUU,EAAcsE,EAAdtE,UAIZ,UAAbuW,EACElX,IAAcX,GAChBkP,EAAS1O,EAAU,CAAEG,YAAWC,WAAUU,eAEtB,UAAbuW,GAAyB7X,GAClCkP,E5B1CkC,CACtC5O,KAAMR,EACNS,Q4BwC0B,CAAEI,YAAWC,WAAUU,kBAE9C,CAACtB,EAAM6X,EAAUjS,IAGpByK,qBAAU,WtB9CoB,IAAA5P,EsB+CxBgN,EAAc3H,SAClBoJ,EtBhDwC,CAC1C5O,KAAMR,GACNS,QAASE,MsB+CN,CAACgN,IAIJ,IAAIsK,GAAkB,EAWtB,MAViB,UAAbF,IACFE,GAAkB,IASfnS,EAAOzC,QAAYyC,EAAOjF,YAAcX,GAAU+X,IAAoB/X,EAClE,eAAC,GAAD,CAAYgY,UAAU,IAK7B,uCACE,eAAC,IAAD,CAAOC,KAAK,QAAQpF,UAAWqE,KAC/B,eAAC,IAAD,CAAUgB,GAAG,c,8BC3HNC,GAAcC,aAAH,uX,OCkBxBjR,EAAQ,KAAUvB,SAqBlB,IAAIyS,GAAW,KAC6CA,GAAWC,KAEvElW,QAAQC,IAAI,aAAc4E,cAC1B7E,QAAQC,IAAI,aAAcgW,IAGnB,IAAME,GCrBN,WAIL,IAAMC,EAAkBvX,OAAOwX,sCAAwCC,IAGjEC,EAAcC,YAAgBC,GAC9BC,EAAiBC,cAGjBC,EAAa,CAACF,GAEdP,EAAQU,YACZN,EACAH,EAAgBU,IAAe,WAAf,EAAmBF,KAOrC,OAHAF,EAAeK,IAAIxQ,IACnBmQ,EAAeK,IAAI3P,IAEZ+O,EDDYa,GAGrBC,IAASC,OACP,eAAC,IAAD,CAAUf,MAAOA,GAAjB,SACE,eAAC,IAAD,CAAeF,SAAUA,GAAzB,SACE,gBAAC,KAAD,WACE,eAACF,GAAD,IACA,eAAC,IAAD,CAAOF,KAAK,IAAIpF,UAAW+E,YAIjC2B,SAASC,eAAe,W","file":"static/js/main.d6b0eeb2.chunk.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 624;","// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.​\r\n\r\n// ACTION TYPES //\r\nexport const types = {\r\n  AUTH_START: \"AUTH_START\",\r\n  AUTH_COMPLETE: \"AUTH_COMPLETE\",\r\n  AUTH_SUCCESS: \"AUTH_SUCCESS\",\r\n  AUTH_FAIL: \"AUTH_FAIL\",\r\n  AUTH_CHECK: \"AUTH_CHECK\",\r\n  LOGOUT: \"LOGOUT\"\r\n};\r\n\r\n// REDUCERS //\r\nexport const initialState = {\r\n  user: null,\r\n  portal: null,\r\n  token: null,\r\n  loggedIn: false\r\n};\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case types.AUTH_SUCCESS:\r\n      const { user, portal, token } = action.payload;\r\n\r\n      return {\r\n        user,\r\n        portal,\r\n        token,\r\n        loggedIn: true\r\n      };\r\n\r\n    case types.AUTH_FAIL:\r\n      return {\r\n        user: null,\r\n        portal: null,\r\n        token: null,\r\n        loggedIn: false\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n// ACTIONS //\r\nexport const checkAuth = options => ({\r\n  type: types.AUTH_CHECK,\r\n  payload: options\r\n});\r\n\r\nexport const startAuth = options => ({\r\n  type: types.AUTH_START,\r\n  payload: options\r\n});\r\n\r\nexport const completeAuth = options => ({\r\n  type: types.AUTH_COMPLETE,\r\n  payload: options\r\n});\r\n\r\nexport const logout = sessionId => ({\r\n  type: types.LOGOUT,\r\n  payload: {\r\n    sessionId: sessionId\r\n  }\r\n});\r\n","  import { UserSession } from \"@esri/arcgis-rest-auth\";\r\nimport { getPortal } from \"@esri/arcgis-rest-portal\";\r\nimport * as Cookies from \"js-cookie\";\r\n\r\n/**\r\n * sign in using OAuth\r\n*/\r\nconsole.log('in session.js');\r\nexport function signIn(options) {\r\n  const {\r\n    portalUrl = \"https://qptampa.maps.arcgis.com/\",\r\n    clientId,\r\n    popup = false\r\n  } = options;\r\n\r\n  // only need to call the begin method, the rest is handled either in this method\r\n  // or in the completeSignIn update\r\n  UserSession.beginOAuth2({\r\n    clientId,\r\n    portalUrl,\r\n    popup,\r\n    redirectUri: `${window.location.origin}/auth`\r\n  }); // TODO can use .then to complete auth here and save an update cycle?\r\n}\r\n\r\n/**\r\n * sign in using OAuth pop up\r\n*/\r\nexport async function completeSignIn(options) {\r\n  const {\r\n    portalUrl = \"https://qptampa.maps.arcgis.com/\",\r\n    clientId,\r\n    sessionId = `${portalUrl}_session`\r\n  } = options;\r\n\r\n  const session = UserSession.completeOAuth2({ clientId, portalUrl });\r\n  const token = session.token;\r\n\r\n  saveSession(session, sessionId);\r\n\r\n  const user = await session.getUser();\r\n  const portal = await getPortal(null, {\r\n    portal: session.portal,\r\n    authentication: session\r\n  });\r\n\r\n  return { user, portal, token };\r\n}\r\n\r\n/**\r\n * make sure the user is not logged in the next time they load the app\r\n*/\r\nexport function signOut(sessionId) {\r\n  deleteSession(sessionId);\r\n}\r\n\r\n/**\r\n * restore a previously saved session\r\n*/\r\nexport async function restoreSession(sessionId) {\r\n  let authInfos = null;\r\n\r\n  const serializedSession = Cookies.get(sessionId);\r\n  const session = serializedSession && UserSession.deserialize(serializedSession);\r\n\r\n  if (session) {\r\n    const user = await session.getUser();\r\n\r\n    const portal = await getPortal(null, {\r\n      portal: session.portal,\r\n      authentication: session\r\n    });\r\n\r\n    const token = session.token;\r\n    \r\n    authInfos = {\r\n      user,\r\n      portal,\r\n      token\r\n    };\r\n    console.log('portal', portal);\r\n  }\r\n\r\n  console.log('authInfos', authInfos);\r\n  return authInfos;\r\n}\r\n\r\n// save session & user for next time the user loads the app\r\nfunction saveSession(session, sessionId) {\r\n  // get expiration from session\r\n  const expires = session.tokenExpires;\r\n\r\n  Cookies.set(sessionId, session.serialize(), {\r\n    expires,\r\n    sameSite: \"strict\"\r\n  });\r\n}\r\n\r\n// delete a previously saved session\r\nfunction deleteSession(sessionId) {\r\n  Cookies.remove(sessionId);\r\n}\r\n","// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.​\r\n\r\nimport { call, put, takeLatest } from \"redux-saga/effects\";\r\nimport { types } from \"../reducers/auth\";\r\nimport {\r\n  signIn,\r\n  completeSignIn,\r\n  signOut,\r\n  restoreSession\r\n} from \"../../utils/session\";\r\n\r\n// WORKER //\r\nfunction* startAuth(action) {\r\n  try {\r\n    // first try to restore the session from a saved cookie if it exists\r\n    let authInfos = yield call(restoreSession, action.payload.sessionId);\r\n\r\n    // if there isn't a session cookie then we can start a new session\r\n    if (!authInfos) {\r\n      authInfos = yield call(signIn, action.payload);\r\n    }\r\n\r\n    // check for a response and finish by sending the authentication info to the Redux store\r\n    if (authInfos) {\r\n      console.log(\"If AuthInfos :: \", authInfos);\r\n      yield put({\r\n        type: types.AUTH_SUCCESS,\r\n        payload: authInfos\r\n      });\r\n    } else {\r\n      console.log(\"Else AuthInfos :: \", authInfos);\r\n      // error catching if we need it\r\n      yield put({ type: types.AUTH_FAIL });\r\n    }\r\n  } catch (e) {\r\n    yield put({ type: types.AUTH_FAIL });\r\n    console.error(\"SAGA ERROR: auth/startAuth, \", e);\r\n  }\r\n}\r\n\r\nfunction* completeAuth(action) {\r\n  try {\r\n    let authInfos = yield call(completeSignIn, action.payload);\r\n\r\n    // check for a response and finish by sending the authentication info to the Redux store\r\n    if (authInfos) {\r\n      yield put({\r\n        type: types.AUTH_SUCCESS,\r\n        payload: authInfos\r\n      });\r\n    } else {\r\n      // error catching if we need it\r\n      yield put({ type: types.AUTH_FAIL })\r\n    }\r\n  } catch (e) {\r\n    yield put({ type: types.AUTH_FAIL });\r\n    console.error(\"SAGA ERROR: auth/startAuth, \", e);\r\n  }\r\n}\r\n\r\nfunction* checkAuth(action) {\r\n  console.log(\"`checkAuth()`\", action);\r\n  try {\r\n    let authInfos = yield call(restoreSession, action.payload.sessionId);\r\n    console.log(\"Returned authInfos value from `checkAuth()`\", authInfos);\r\n    // check for a response and finish by sending the authentication info to the Redux store\r\n    if (authInfos) {\r\n      yield put({\r\n        type: types.AUTH_SUCCESS,\r\n        payload: authInfos\r\n      });\r\n    } else {\r\n      // error catching if we need it\r\n      yield put({ type: types.AUTH_FAIL });\r\n    }\r\n  } catch (e) {\r\n    yield put({ type: types.AUTH_FAIL });\r\n    console.error(\"SAGA ERROR: auth/checkAuth, \", e);\r\n  }\r\n}\r\n\r\nfunction* authLogout(action) {\r\n  try {\r\n    yield call(signOut, action.payload.sessionId);\r\n\r\n    window.location.reload();\r\n  } catch (e) {\r\n    console.error(\"SAGA ERROR: auth/logout, \", e);\r\n  }\r\n}\r\n\r\n// WATCHER //\r\nexport function* watchStartAPI() {\r\n  yield takeLatest(types.AUTH_CHECK, checkAuth);\r\n  yield takeLatest(types.AUTH_START, startAuth);\r\n  yield takeLatest(types.AUTH_COMPLETE, completeAuth);\r\n  yield takeLatest(types.LOGOUT, authLogout);\r\n}\r\n","// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.​\r\n\r\n// ACTION TYPES //\r\nexport const types = {\r\n  SET_CONFIG: \"SET_CONFIG\",\r\n  UPDATE_CONFIG: \"UPDATE_CONFIG\",\r\n  CONFIG_FETCH: \"CONFIG_FETCH\"\r\n};\r\n\r\n// REDUCERS //\r\nexport const initialState = {\r\n  loaded: false\r\n};\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case types.SET_CONFIG:\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n        loaded: true\r\n      };\r\n    case types.UPDATE_CONFIG:\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n        loaded: true\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n// ACTIONS //\r\nexport const fetchConfig = () => ({ type: types.CONFIG_FETCH });\r\n\r\nexport const updateConfig = options => ({\r\n  type: types.UPDATE_CONFIG,\r\n  payload: options\r\n});\r\n","//#region [copyright]\r\n// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.​\r\n//#endregion\r\n\r\nfunction status(response) {\r\n  if (response.status >= 200 && response.status < 300) {\r\n    return Promise.resolve(response);\r\n  } else {\r\n    return Promise.reject(new Error(response.statusText));\r\n  }\r\n}\r\n\r\nfunction handleResponse(handleAs, response) {\r\n  switch (handleAs) {\r\n    case \"text\":\r\n      return response.text();\r\n    default:\r\n      return response.json();\r\n  }\r\n}\r\n\r\nfunction objectToUrlSearchParams(obj) {\r\n  const body = new URLSearchParams();\r\n  for (var prop in obj) {\r\n    if (obj.hasOwnProperty(prop)) {\r\n      body.append(prop, obj[prop]);\r\n    }\r\n  }\r\n\r\n  // add f=json if not included\r\n  if (!body.has(\"f\")) {\r\n    body.append(\"f\", \"json\");\r\n  }\r\n\r\n  return body.toString();\r\n}\r\n\r\nfunction getHeaders(isFormData) {\r\n  const headers = {};\r\n\r\n  if (!isFormData) {\r\n    headers[\"content-type\"] = \"application/x-www-form-urlencoded\";\r\n  }\r\n\r\n  return new Headers(headers);\r\n}\r\n\r\nfunction getRequestBody(data, isFormData) {\r\n  // if formdata, make formdata\r\n  if (isFormData) {\r\n    return this.objectToFormData(data);\r\n  }\r\n\r\n  // Not formdata, make url param\r\n  return objectToUrlSearchParams(data);\r\n}\r\n\r\n/**\r\n * @summary { Reference a single method to create `http` requests using fetch() }\r\n * @typedef { Factory Pattern }\r\n * @param   { Object } params Object containing key/value parameters to pass to fetch()\r\n * @return  { Promise }       Promise returned by fetch()\r\n*/\r\nexport function makeRequest(params) {\r\n  return new Promise((resolve, reject) => {\r\n    let url = params.url;\r\n    const data = params.data || {};\r\n    const headers = getHeaders(params.isFormData);\r\n    const options = {\r\n      method: params.method || \"get\",\r\n      headers\r\n    };\r\n\r\n    if (!params.hideCredentials) {\r\n      options.credentials = \"include\";\r\n    }\r\n\r\n    let body = getRequestBody(data, params.isFormData);\r\n\r\n    if (options.method === \"get\") {\r\n      url = `${url}?${body}`;\r\n    } else {\r\n      options.body = body;\r\n    }\r\n\r\n    fetch(url, options)\r\n      .then(status)\r\n      .then(handleResponse.bind(null, params.handleAs))\r\n      .then(function(data) {\r\n        // Handle successful requests that are actually errors...\r\n        if (data.error) {\r\n          reject(data.error);\r\n          return;\r\n        }\r\n        resolve(data);\r\n      })\r\n      .catch(function(error) {\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\n/**\r\n * Make a request for the App Config [public/config] with makeRequest()\r\n * @return { Promise }        Promise returned by makeRequest()\r\n */\r\nexport function getAppConfig() {\r\n  return new Promise((resolve, reject) => {\r\n    makeRequest({\r\n      url: `/config.json`,\r\n      method: \"get\"\r\n    }).then(resp => {\r\n      console.log('Response: ', resp);\r\n      resolve(resp);\r\n    });\r\n  });\r\n}\r\n\r\n// export function getSecurityToken() {\r\n//   return new Promise((resolve, reject) => {\r\n//     makeRequest({\r\n//       url: `http://localhost:5000/api/`,\r\n//       method: \"get\"\r\n//     }).then(resp => {\r\n//       console.log('Response: ', resp);\r\n//       resolve(resp);\r\n//     });\r\n//   });\r\n// }\r\n","// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.​\r\n\r\nimport { call, put, takeLatest } from \"redux-saga/effects\";\r\nimport { types as configTypes } from \"../reducers/config\";\r\nimport { getAppConfig } from \"../../utils/request\";\r\n\r\n// WORKER //\r\nfunction* fetchConfig(action) {\r\n  try {\r\n    // fetch config\r\n    const config = yield call(getAppConfig);\r\n\r\n    // load config into Redux store\r\n    yield put({\r\n      type: configTypes.SET_CONFIG,\r\n      payload: config\r\n    });\r\n  } catch (e) {\r\n    console.error(\"SAGA ERROR: config/fetchConfig, \", e);\r\n  }\r\n}\r\n\r\nfunction* updateConfig(action) {\r\n  try {\r\n    // fetch config\r\n    const config = yield call(getAppConfig);\r\n\r\n    if (config) {\r\n      // load config into Redux store\r\n      yield put({\r\n        type: configTypes.UPDATE_CONFIG,\r\n        payload: action.payload\r\n      });\r\n    }\r\n  } catch (e) {\r\n    console.error(\"SAGA ERROR: config/updateConfig, \", e);\r\n  }\r\n\r\n  // try {\r\n  //   // first try to restore the session from a saved cookie if it exists\r\n  //   let geoJson = yield call(restoreSession, action.payload.geoJsonData);\r\n\r\n  //   // if there isn't a session cookie then we can start a new session\r\n  //   if (!authInfos) {\r\n  //     authInfos = yield call(signIn, action.payload);\r\n  //   }\r\n\r\n  //   // check for a response and finish by sending the authentication info to the Redux store\r\n  //   if (authInfos) {\r\n  //     yield put({\r\n  //       type: types.AUTH_SUCCESS,\r\n  //       payload: authInfos\r\n  //     });\r\n  //   } else {\r\n  //     // error catching if we need it\r\n  //     yield put({ type: types.AUTH_FAIL });\r\n  //   }\r\n  // } catch (e) {\r\n  //   yield put({ type: types.AUTH_FAIL });\r\n  //   console.error(\"SAGA ERROR: auth/startAuth, \", e);\r\n  // }\r\n}\r\n\r\n// WATCHER //\r\nexport function* watchFetchConfig() {\r\n  yield takeLatest(configTypes.CONFIG_FETCH, fetchConfig);\r\n}\r\n\r\nexport function* watchUpdateConfig() {\r\n  yield takeLatest(configTypes.UPDATE_CONFIG, updateConfig);\r\n}\r\n","export const types = {\r\n  SECURITY_TOKEN_CHECK: \"SECURITY_TOKEN_CHECK\",\r\n  SECURITY_TOKEN_SET: \"SECURITY_TOKEN_SET\",\r\n  SECURITY_TOKEN_DECRYPT: \"SECURITY_TOKEN_DECRYPT\",\r\n  SECURITY_TOKEN_FAIL: \"SECURITY_TOKEN_FAIL\",\r\n  SECURITY_TOKEN_SUCCESS: \"SECURITY_TOKEN_SUCCESS\",\r\n};\r\n\r\n// REDUCERS //\r\nexport const initialState = {\r\n  \"isValid\": false\r\n};\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case types.SECURITY_TOKEN_CHECK:\r\n      // const { isValid, securityToken } = action.payload;\r\n\r\n      return {\r\n        ...state,\r\n        isValid: true\r\n      }\r\n\r\n    case types.SECURITY_TOKEN_SET:\r\n\r\n      console.log('SECURITY_TOKEN_SET: ', action);\r\n      // const { TempSecurityToken } = action;\r\n\r\n      return {\r\n        ...state,\r\n        isValid: true\r\n      }\r\n\r\n    case types.SECURITY_TOKEN_SUCCESS:\r\n\r\n      console.log('SECURITY_TOKEN_SUCCESS: ', action);\r\n      // const { tempSecurityToken } = action.payload;\r\n\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n        isValid: true\r\n      }\r\n\r\n    case types.SECURITY_TOKEN_DECRYPT:\r\n\r\n      console.log('SECURITY_TOKEN_DECRYPT: ', action);\r\n      // const { securityTokenDecrypt } = action;\r\n\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n        isValid: true\r\n      }\r\n      \r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n// ACTIONS //\r\nexport const checkSecurityToken = options => ({\r\n  type: types.SECURITY_TOKEN_CHECK,\r\n  payload: options\r\n});\r\n\r\nexport const setSecurityToken = options => ({\r\n  type: types.SECURITY_TOKEN_SET,\r\n  payload: options\r\n});\r\n\r\nexport const securityTokenSuccess = options => ({\r\n  type: types.SECURITY_TOKEN_SUCCESS,\r\n  payload: options\r\n});\r\n\r\nexport const decryptSecurityToken = options => ({\r\n  type: types.SECURITY_TOKEN_DECRYPT,\r\n  payload: options\r\n});\r\n","/*/\r\n  *  ┌─────────────────────────────────┐\r\n  *  │ |> Area Query - Action Types    │\r\n  *  └─────────────────────────────────┘\r\n/*/\r\nexport const ADD_TO_STORE = \"ADD_TO_STORE\";\r\nexport const ADDED_TO_STORE = \"ADDED_TO_STORE\";\r\n\r\nexport const SEND_AREA_QUERY = \"SEND_AREA_QUERY\";\r\nexport const AREA_QUERY_SENT = \"AREA_QUERY_SENT\";\r\n\r\nexport const AREA_QUERY_READY = \"AREA_QUERY_READY\"; // NOTE: Pending Deletion\r\nexport const AREA_QUERY_DONE = \"AREA_QUERY_DONE\";   // NOTE: Pending Deletion\r\n\r\nexport const AREA_QUERY_FAIL = \"AREA_QUERY_FAIL\"; \r\nexport const AREA_QUERY_STATUS = \"AREA_QUERY_STATUS\";\r\n\r\n// FEATURE LAYER //\r\nexport const BUILD_FEATURE_LAYER = \"BUILD_FEATURE_LAYER\";\r\nexport const FEATURE_LAYER_BUILT = \"AREA_QUERY_STATUS\";\r\nexport const FEATURE_LAYER_FAIL = \"FEATURE_LAYER_FAIL\";\r\n","/*/\r\n  *  ┌─────────────────────────────────────────────┐\r\n  *  │ |> API Request Configuration - Area Query   │\r\n  *  └─────────────────────────────────────────────┘\r\n/*/\r\n// Axios\r\nimport axios from \"axios\";\r\n\r\nrequire('dotenv').config();\r\n\r\nexport function areaQueryRequest(action) {\r\n  const searchUrl = process.env.REACT_APP_API_BASE_URL + process.env.REACT_APP_API_VERSION + \"/location-data/area-query\";\r\n  \r\n  // TODO: Apply payload prop values via destructuring\r\n  const areaQueryPayload = {\r\n    startDate: action.payload.startDate,\r\n    endDate: action.payload.endDate,\r\n    areas: [{\r\n      longitude: action.payload.longitude,\r\n      latitude: action.payload.latitude,\r\n      radius: action.payload.radius\r\n    }]\r\n  }\r\n\r\n  console.log('REQ PAYLOAD (client-side): ', areaQueryPayload);\r\n  \r\n  return axios.request({\r\n    url: searchUrl,\r\n    method: \"POST\",\r\n    data: areaQueryPayload,\r\n    headers: {\r\n      \"Accept\": \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n      \"Authorization\": process.env.REACT_APP_API_KEY,\r\n      \"TempSecurityToken\": action.payload.TempSecurityToken\r\n    }\r\n  });\r\n}\r\n\r\n// export function mockDataSearchRequest() {\r\n//   const mockUrl = process.env.REACT_APP_API_VERSION + \"/mock-data\";\r\n\r\n//   return axios.request({\r\n//     \"method\": \"GET\",\r\n//     \"headers\": {\r\n//       \"Accept\": \"application/json\",\r\n//       \"Content-Type\": \"application/json\"\r\n//     },\r\n//     \"url\": mockUrl\r\n//   });\r\n// }\r\n","/*/\r\n *  ┌───────────────────────┐\r\n *  │ |> Format Utility     │\r\n *  └───────────────────────┘\r\n/*/\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// Format.propTypes = {\r\n//   date: PropTypes.object\r\n// };\r\n\r\nconst Format = ({ date }) => {\r\n\r\n  return;\r\n}\r\n\r\nconst dateToIsoString = (date) => {\r\n  const dateObj = new Date(date);\r\n  const dateObjIso = dateObj.toISOString().slice(0, -5) + 'Z';\r\n\r\n  console.group('Formatted Date:>');\r\n  console.log('Date Prop: ', dateObj);\r\n  console.log('Format Date: ', dateObjIso);\r\n  console.groupEnd();\r\n\r\n  return dateObjIso;\r\n} \r\n\r\nexport default Format;\r\nexport { dateToIsoString }\r\n","/*/\r\n *  ┌────────────────────────────────────┐\r\n *  │ |> Redux Reducers - Area Query     │\r\n *  └────────────────────────────────────┘\r\n/*/\r\n\r\n// ACTION TYPES //\r\nimport * as types from \"../types/area-types\";\r\nimport Format, { dateToIsoString } from '../../utils/format';\r\n\r\n// REDUCERS //\r\nconst dateObj = new Date();\r\nconst sDate = dateObj.setDate(dateObj.getDate() - 7);\r\nconst eDate = dateObj.setDate(dateObj.getDate());\r\nconst sDateIso = dateToIsoString(new Date(sDate));\r\nconst eDateIso = dateToIsoString(new Date(eDate));\r\n\r\nexport const INITIAL_STATE = {\r\n  startDate: \"0\",  \r\n  endDate: \"0\",\r\n  latitude: 0,\r\n  longitude: 0,\r\n  radius: 10,\r\n  status: \"idle\", // [\"idle\", \"loading\", \"success\", \"error\" ]\r\n  locationData: {}\r\n};\r\n\r\nexport default (state = INITIAL_STATE, action) => {\r\n  switch (action.type) {\r\n    case types.ADDED_TO_STORE:\r\n      console.log('ADDED: ', action);\r\n\r\n      // TODO: Finish validation code before prod deployment \r\n      // const { latitude, longitude, radius } = action.payload;\r\n\r\n      // const startDate = state.startDate;\r\n      // const endDate = state.endDate;\r\n      // let status = '';\r\n\r\n      // // Validate all properties are success\r\n      // if ((startDate && endDate) && (latitude && longitude)) {\r\n      //   status = 'success';\r\n      // } else {\r\n      //   status = 'loading';\r\n      // }\r\n\r\n      if (typeof action.payload == 'string') {\r\n        let incoming = action.payload;\r\n        return {\r\n          ...state,\r\n          ...action.payload,\r\n          status: \"loading\"\r\n        }\r\n      } else {\r\n        return {\r\n          ...state,\r\n          ...action.payload,\r\n          status: \"loading\"\r\n        }\r\n      }\r\n\r\n    case types.AREA_QUERY_SENT:\r\n      console.log('SENT: ', action);\r\n\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n        status: \"success\"\r\n      }\r\n\r\n    case types.AREA_QUERY_DONE:\r\n      console.log('SUCCESS: ', action);\r\n\r\n      return {\r\n        ...state,\r\n        status: \"success\"\r\n      }\r\n\r\n    case types.AREA_QUERY_FAIL:\r\n      console.log('FAIL: ', action);\r\n      return state;\r\n\r\n    case types.AREA_QUERY_STATUS:\r\n      console.log('STATUS: ', action);\r\n\r\n      return {\r\n        status: state.status\r\n      }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n// ACTIONS //\r\nexport const addToStoreAction = options => ({\r\n  type: types.ADD_TO_STORE,\r\n  payload: options\r\n});\r\n\r\nexport const addedToStoreAction = options => ({\r\n  type: types.ADDED_TO_STORE,\r\n  payload: options\r\n});\r\n\r\nexport const sendAreaQueryAction = options => ({\r\n  type: types.SEND_AREA_QUERY,\r\n  payload: options\r\n});\r\n\r\nexport const areaQuerySentAction = options => ({\r\n  type: types.AREA_QUERY_SENT,\r\n  payload: options\r\n});\r\n\r\nexport const areaQueryReadyAction = options => ({\r\n  type: types.AREA_QUERY_READY, // readonly\r\n  payload: options\r\n});\r\n\r\nexport const areaQueryDoneAction = () => ({\r\n  type: types.AREA_QUERY_DONE,\r\n});\r\n\r\nexport const areaQueryFailAction = err => ({\r\n  type: types.AREA_QUERY_FAIL, // readonly\r\n  payload: err\r\n});\r\n\r\nexport const areaQueryStatusAction = options => ({\r\n  type: types.AREA_QUERY_STATUS, // readonly\r\n  payload: options\r\n});\r\n\r\n// TODO: Determine if 'FeatureLayerBuilder' actions merit a dedicated reducer\r\nexport const buildFeatureLayerAction = options => ({\r\n  type: types.BUILD_FEATURE_LAYER,\r\n  payload: options\r\n});\r\n\r\nexport const featureLayerBuiltAction = options => ({\r\n  type: types.FEATURE_LAYER_BUILT,\r\n  payload: options\r\n});\r\n\r\nexport const featureLayerFailAction = err => ({\r\n  type: types.FEATURE_LAYER_FAIL, // readonly\r\n  payload: err\r\n});\r\n"," /**--------------------------------------------------------------------------------- ->\r\n *  ┌────────────────────────────────────┐\r\n *  │ |> GAVEL - Feature Layer Builder   │\r\n *  └────────────────────────────────────┘\r\n * \r\n *  @description:   'Builder component to convert lat/long coordinates to Feature Layer'\r\n *  @implements:    'JSON data object returned from search API of '\r\n *  @returns:       'Esri Feature Layer containing Points to render on map'\r\n * \r\n*/\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useSelector } from \"react-redux\";\r\nimport PropTypes from 'prop-types';\r\n\r\n// Esri\r\nimport esriRequest from '@arcgis/core/request';\r\n// import esriConfig from '@arcgis/core/config';\r\nimport { FeatureLayerView } from \"@arcgis/core/views/layers/FeatureLayerView\";\r\nimport Editor from \"@arcgis/core/widgets/Editor\";\r\nimport Expand from \"@arcgis/core/widgets/Expand\";\r\nimport FeatureLayer from \"@arcgis/core/layers/FeatureLayer\";\r\nimport Graphic from \"@arcgis/core/Graphic\";\r\nimport LayerList from \"@arcgis/core/widgets/LayerList\";\r\nimport Legend from \"@arcgis/core/widgets/Legend\";\r\nimport areaQuery from '../../../redux/reducers/area-query';\r\n// import promiseUtils from \"@arcgis/core/promiseUtils\";\r\n\r\n// QP\r\n// import areaQuery from \"../../../redux/reducers/area-query\";\r\n\r\n// Padding\r\nconst padding = { top: 55 };\r\nconst paddingExpanded = { top: 55, right: 250 };\r\n\r\n// Panel\r\n// let url = 'info';\r\nlet graphics = [];\r\nlet baseMap = undefined;\r\nlet view = undefined;\r\nlet theSignalCounts = undefined;\r\nlet ptLocationsLayer = undefined;\r\n\r\nconst theColors = [\"purple\", \"green\", \"orange\", \"blue\", \"red\"];\r\nconst patternsLayer = {};\r\n\r\nfunction createAreasLayer() {\r\n  return new FeatureLayer({\r\n    title: \"searchAreas\",\r\n    fields: [\r\n      {\r\n        name: \"ObjectID\",\r\n        type: \"oid\"\r\n      },\r\n      {\r\n        name: \"distance\",\r\n        type: \"integer\"\r\n      },\r\n      {\r\n        name: \"startTime\",\r\n        type: \"date\"\r\n      },\r\n      {\r\n        name: \"endTime\",\r\n        type: \"date\"\r\n      }\r\n    ],\r\n    objectIdField: \"ObjectID\",\r\n    geometryType: \"point\",\r\n    spatialReference: { wkid: 102100 },\r\n    source: [], // adding an empty feature collection\r\n    renderer: {\r\n      type: \"simple\",\r\n      symbol: {\r\n        type: \"web-style\", // autocasts as new WebStyleSymbol()\r\n        styleName: \"Esri2DPointSymbolsStyle\",\r\n        name: \"landmark\"\r\n      }\r\n    },\r\n    popupTemplate: {\r\n      title: \"{distance}, {startTime}, {endTime}\"\r\n    }\r\n  });\r\n}\r\n\r\n// #region [component] \r\nconst FeatureLayerBuilder = ({ baseMap, mapView }) => {\r\n  // Point Counter\r\n  theSignalCounts = 0;\r\n\r\n  /*/\r\n   *  ┌─────────────────────────────┐\r\n   *  │ |> Local & Global States    │\r\n   *  └─────────────────────────────┘\r\n  /*/\r\n  const [baseMapState, setBaseMapState] = useState({});\r\n  const [mapViewState, setMapViewState] = useState({});\r\n  // const [ jsonData, setJsonData ] = useState({});\r\n  const areaQueryState = useSelector(state => state.areaQuery);\r\n\r\n  // const resJson = areaQueryState;\r\n\r\n  // document.getElementById(\"topNavGavel\").addEventListener('click', queryDevices(baseMap, view));\r\n  useEffect(() => {\r\n    setBaseMapState(baseMap);\r\n    setMapViewState(mapView);\r\n    buildFeatureLayer(areaQueryState, baseMap, mapView);\r\n    ptLocationsLayer = createAreasLayer();\r\n  }, []);\r\n  \r\n  // TODO: Init `buildFeatueLayer` function from `useEffect()` hook\r\n  const buildFeatureLayer = (resJson, baseMap, mapView) => {\r\n  \r\n    // TODO: Clean up code when time permits (formatting & consistency)\r\n    console.log('inside request');\r\n    let json = resJson.locationArea.areas;\r\n    view = mapView;\r\n    console.log(JSON.stringify(json));\r\n\r\n    let counter = 0;\r\n    let countSignals = 0;\r\n\r\n    // json.locationData.areas[y].registrationIDs[i].signals\r\n    // _Areas\r\n    json.map((area, i) => {\r\n      // _RegIDs\r\n      json[i].registrationIDs.map((registrationID, j) => {\r\n        // _Signals\r\n        json[i].registrationIDs[j].signals.map((signal, k) => {\r\n\r\n          countSignals++\r\n\r\n          let theId = { \r\n            \"registrationID\": json[i].registrationIDs[j].registrationID, \r\n            \"signalcount\": countSignals \r\n          }\r\n\r\n          theSignalCounts.push(theId);\r\n\r\n          countSignals.map((signalCount, l) => {\r\n\r\n            const point = {\r\n              type: \"point\", // autocasts as new Point()\r\n              longitude: json[i].registrationIDs[j].signals[k].longitude,\r\n              latitude: json[i].registrationIDs[j].signals[k].latitude\r\n            };\r\n\r\n            const pointGraphic = new Graphic({\r\n              geometry: point,\r\n              attributes: {\r\n                \"OBJECTID\": i,\r\n                \"registrationID\": json[i].registrationIDs[j].signals[k].registrationID,\r\n                \"ipAddress\": json[i].registrationIDs[j].signals[k].ipAddress,\r\n                \"flags\": json[i].registrationIDs[j].signals[k].flags,\r\n                \"timestamp\": json[i].registrationIDs[j].signals[k].timestamp\r\n              }\r\n\r\n            });\r\n\r\n            graphics.push(pointGraphic);\r\n            counter++;\r\n\r\n          });\r\n\r\n        });\r\n\r\n      }); \r\n\r\n    });\r\n\r\n    // let countAreas = Object.keys(json.locationData.areas).length;\r\n    // let counter = 0;\r\n\r\n    // let countIDs = Object.keys(json.locationData.areas[y].registrationIDs).length;\r\n    //console.log(\"i is : \" + i)\r\n    // let countSignals = Object.keys(json.locationData.areas[y].registrationIDs[i].signals).length;\r\n    // let theID = { \"registrationID\": json.locationData.areas[y].registrationIDs[i].registrationID, \"signalcount\": countSignals };\r\n    // theSignalCounts.push(theID);\r\n    // for (let x = 0; x < countSignals; x++) {\r\n    //console.log(\"x is : \" + x)\r\n    //console.log(JSON.stringify(json.locationData.areas[y].registrationIDs[i].signals[x].longitude));\r\n    //console.log(JSON.stringify(json.locationData.areas[y].registrationIDs[i].signals[x].latitude));\r\n    // const point = {\r\n    //   type: \"point\", // autocasts as new Point()\r\n    //   longitude: json.locationData.areas[y].registrationIDs[i].signals[x].longitude,\r\n    //   latitude: json.locationData.areas[y].registrationIDs[i].signals[x].latitude\r\n    // };\r\n    // const pointGraphic = new Graphic({\r\n    //   geometry: point,\r\n    //   attributes: {\r\n    //     \"OBJECTID\": counter,\r\n    //     \"registrationID\": json.locationData.areas[y].registrationIDs[i].signals[x].registrationID,\r\n    //     \"ipAddress\": json.locationData.areas[y].registrationIDs[i].signals[x].ipAddress,\r\n    //     \"flags\": json.locationData.areas[y].registrationIDs[i].signals[x].flags,\r\n    //     \"timestamp\": json.locationData.areas[y].registrationIDs[i].signals[x].timestamp\r\n    //   }\r\n    // });\r\n\r\n    // graphics.push(pointGraphic)\r\n    // counter++;\r\n    // }\r\n    // }\r\n \r\n    function createGraphicsLayer(graphics) {\r\n      let setGraphics = [];\r\n      if (graphics.length > 0) {\r\n        let processCounter = 0;\r\n        for (let i = 0; i < graphics.length; i++) {\r\n          if (processCounter == 1000) {\r\n            patternsLayer = createLayer1(setGraphics, \"Patterns\", 10);\r\n            baseMap.add(patternsLayer);\r\n            setGraphics = [];\r\n            //console.log(\"created patternsLayer\");\r\n          }\r\n          else if (processCounter != 0 && (processCounter % 1000) === 0) {\r\n            console.log(setGraphics);\r\n            let edits = {\r\n              addFeatures: setGraphics\r\n            };\r\n            patternsLayer.applyEdits(edits)\r\n            setGraphics = [];\r\n          }\r\n          else {\r\n            setGraphics.push(graphics[i]);\r\n          }\r\n          processCounter++;\r\n        }\r\n      }\r\n      return \"success\";\r\n    }\r\n\r\n    // Creates a client-side FeatureLayer from an array of graphics\r\n    function createLayer(graphics) {\r\n      //console.log(graphics);\r\n      return new FeatureLayer({\r\n        source: graphics,\r\n        objectIdField: \"OBJECTID\",\r\n        fields: [\r\n          {\r\n            name: \"OBJECTID\",\r\n            type: \"oid\"\r\n          },\r\n          {\r\n            name: \"registrationID\",\r\n            type: \"string\"\r\n          },\r\n          {\r\n            name: \"ipAddress\",\r\n            type: \"string\"\r\n          },\r\n          {\r\n            name: \"flags\",\r\n            type: \"integer\"\r\n          },\r\n          {\r\n            name: \"timestamp\",\r\n            type: \"date\"\r\n          }\r\n        ],\r\n        popupTemplate: {\r\n          // autocast as esri/PopupTemplate\r\n          title: \"{RegistrationID} at {timestamp}\",\r\n          content: \"Flags are {flags} </br> ipAddress is {ipAddress}\",\r\n        },\r\n        renderer: phoneRenderer\r\n      });\r\n    }\r\n\r\n    // Creates a client-side FeatureLayer from an array of graphics\r\n    function createLayer1(graphics, theTitle, id) {\r\n      //console.log(graphics);\r\n\r\n      return new FeatureLayer({\r\n        source: graphics,\r\n        title: theTitle,\r\n        objectIdField: \"OBJECTID\",\r\n        fields: [\r\n          {\r\n            name: \"OBJECTID\",\r\n            type: \"oid\"\r\n          },\r\n          {\r\n            name: \"registrationID\",\r\n            type: \"string\"\r\n          },\r\n          {\r\n            name: \"ipAddress\",\r\n            type: \"string\"\r\n          },\r\n          {\r\n            name: \"flags\",\r\n            type: \"integer\"\r\n          },\r\n          {\r\n            name: \"timestamp\",\r\n            type: \"date\"\r\n          },\r\n          {\r\n            name: \"thecolor\",\r\n            type: \"string\"\r\n          }\r\n        ],\r\n        outFields: [\"*\"],\r\n        popupTemplate: {\r\n          // autocast as esri/PopupTemplate\r\n          title: \"{RegistrationID} at {timestamp}\",\r\n          content: \"Color is {thecolor}, Flags are {flags} </br> ipAddress is {ipAddress}\",\r\n        },\r\n        renderer: uniquePhonesRenderer\r\n      });\r\n    }\r\n\r\n    //console.log(theSignalCounts);\r\n    const resultsLayer = createLayer(graphics, \"Results\", 11);\r\n    const listOfIDs = theSignalCounts.sort((a, b) => Number(b.signalcount) - Number(a.signalcount));\r\n\r\n    console.log(listOfIDs);\r\n\r\n    // view.when(function () {\r\n    //   view.popup.autoOpenEnabled = true; //disable popups\r\n\r\n    //   // Create the Editor\r\n    //   let editor = new Editor({\r\n    //     view: view\r\n    //   });\r\n\r\n    //   view.ui.add(editor, \"bottom-right\");\r\n    //   view.ui.add(\"queryDiv\", \"bottom-right\");\r\n    //   let layerList = new LayerList({\r\n    //     view: view,\r\n    //     listItemCreatedFunction: function (event) {\r\n    //       const item = event.item;\r\n    //       /* if (item.layer.type != \"group\") {\r\n    //         // don't show legend twice\r\n    //         item.panel = {\r\n    //           content: \"legend\",\r\n    //           open: true\r\n    //         };\r\n    //       } */\r\n    //     }\r\n    //   });\r\n    //   let llExpand = new Expand({\r\n    //     view: view,\r\n    //     content: layerList\r\n    //   });\r\n    //   // Add widget to the top right corner of the view\r\n    //   view.ui.add(llExpand, \"bottom-left\");\r\n    //   let legend = new Legend({\r\n    //     view: view,\r\n    //     layerInfos: [{\r\n    //       layer: patternsLayer,\r\n    //       title: \"Legend\"\r\n    //     }]\r\n    //   });\r\n\r\n    //   view.ui.add(legend, \"bottom-right\");\r\n    // });\r\n\r\n    baseMap.layers.add(ptLocationsLayer);\r\n    baseMap.layers.add(resultsLayer);\r\n\r\n    // #region [qp] \r\n    // *Display \"Top 5\" Reference IDs (reoccuring) style properties \r\n    let uniquePhonesRenderer = {\r\n      type: \"unique-value\",\r\n      legendOptions: {\r\n        title: \"IDs\"\r\n      },\r\n      field: \"thecolor\",\r\n      uniqueValueInfos: [{\r\n        value: \"purple\",\r\n        symbol: {\r\n          type: \"simple-marker\",\r\n          color: [138, 43, 226],\r\n          size: 6,\r\n          outline: {\r\n            color: [138, 43, 226, .5],\r\n            size: \"0.25px\"\r\n          }\r\n        }\r\n      }, {\r\n        value: \"green\",\r\n        symbol: {\r\n          type: \"simple-marker\",\r\n          color: [0, 255, 0],\r\n          size: 6,\r\n          outline: {\r\n            color: [0, 255, 0, .5],\r\n            size: \"0.25px\"\r\n          }\r\n        }\r\n      }, {\r\n        value: \"orange\",\r\n        symbol: {\r\n          type: \"simple-marker\",\r\n          color: [255, 165, 0],\r\n          size: 6,\r\n          outline: {\r\n            color: [255, 165, 0, .5],\r\n            size: \"0.25px\"\r\n          }\r\n        }\r\n      }, {\r\n        value: \"blue\",\r\n        symbol: {\r\n          type: \"simple-marker\",\r\n          color: [0, 0, 255],\r\n          size: 6,\r\n          outline: {\r\n            color: [0, 0, 255, .5],\r\n            size: \"0.25px\"\r\n          }\r\n        }\r\n      }, {\r\n        value: \"red\",\r\n        symbol: {\r\n          type: \"simple-marker\",\r\n          color: [255, 0, 0],\r\n          size: 6,\r\n          outline: {\r\n            color: [255, 0, 0, .5],\r\n            size: \"0.25px\"\r\n          }\r\n        }\r\n      }]\r\n    };\r\n    // let panel = document.getElementById(\"panel\");\r\n    let phoneRenderer = {\r\n      type: \"simple\",  // autocasts as new SimpleRenderer()\r\n      symbol: {\r\n        type: \"simple-marker\",  // autocasts as new SimpleMarkerSymbol()\r\n        size: 6,\r\n        color: \"blue\",\r\n        outline: {  // autocasts as new SimpleLineSymbol()\r\n          width: 0.25,\r\n          color: \"white\"\r\n        }\r\n      }\r\n    };\r\n    let phoneRenderer1 = {\r\n      type: \"simple\",  // autocasts as new SimpleRenderer()\r\n      symbol: {\r\n        type: \"simple-marker\",  // autocasts as new SimpleMarkerSymbol()\r\n        size: 6,\r\n        color: \"green\",\r\n        outline: {  // autocasts as new SimpleLineSymbol()\r\n          width: 0.25,\r\n          color: \"white\"\r\n        }\r\n      }\r\n    };\r\n    // #endregion\r\n\r\n    // Error Handler\r\n    const handleNoSignalCounts = error => {\r\n      console.log('GAVEL 9000: ', error);\r\n      alert('I\\'m sorry... I\\'m afraid I could not locate any signals.');\r\n    }\r\n\r\n    return buildFeatureLayer;\r\n    // return resPayload;\r\n  }\r\n}\r\n// #endregion\r\n\r\n// FeatureLayerBuilder.propTypes = {\r\n//   resJsonProp: PropTypes.arrayOf(PropTypes.object),\r\n//   baseMapProp: PropTypes.string,\r\n//   mapViewProp: PropTypes.string,\r\n// }\r\n\r\nexport default FeatureLayerBuilder;\r\n// export { buildFeatureLayer };\r\n","/*/\r\n *  ┌────────────────────────────────────────────────────┐\r\n *  │ |> Redux Saga - Area Query Watcher & Worker Sagas  │\r\n *  └────────────────────────────────────────────────────┘\r\n/*/\r\nimport React from 'react';\r\nimport { call, cps, put, takeLatest } from \"redux-saga/effects\";\r\n\r\nimport * as types from \"../types/area-types\";\r\nimport * as requests from \"../sagas/requests/area-query\";\r\nimport FeatureLayerBuilder from \"../../components/esri/layers/FeatureLayerBuilder\";\r\n// import * as actions from \"../actions/area-query-actions\";\r\n\r\n// WORKER SAGAS//\r\nfunction* addToStore(action) {\r\n  console.log(\"WORKER: \", action);\r\n  try {\r\n    yield put({ \r\n      type: types.ADDED_TO_STORE,\r\n      payload: action.payload\r\n    });\r\n  } catch (error) {\r\n    console.error(\"SAGA ERROR: data/addToStore, \", error);\r\n  }\r\n}\r\n\r\nfunction* sendAreaQuery(action) {\r\n  console.log(\"WORKER: \", action);\r\n  try {\r\n    const response = yield call(requests.areaQueryRequest, action);\r\n    const { data } = response;\r\n    console.log('RES DATASET (client-side): ', data);\r\n    \r\n    // *Put `locationData` in Redux store for global access\r\n    yield put({ type: types.AREA_QUERY_SENT, payload: data });\r\n    // yield put({ type: types.AREA_QUERY_DONE });\r\n\r\n    // return data;\r\n\r\n  } catch (error) {\r\n    console.error(\"SAGA ERROR: data/sendAreaQuery, \", error);                     \r\n  }\r\n}\r\n\r\nfunction* buildFeatureLayer(action) {\r\n  console.log(\"WORKER: \", action);\r\n  const { areaQueryState, baseMap, mapView } = action.payload;\r\n  try {\r\n    const response = yield call((areaQueryState, baseMap, mapView) => {\r\n      // return (\r\n      //   <React.Fragment>\r\n      //     {\r\n      //       <FeatureLayerBuilder\r\n      //         resJsonProp={areaQueryState}\r\n      //         baseMapProp={baseMap}\r\n      //         mapViewProp={mapView}\r\n      //       />\r\n      //     }\r\n      //   </React.Fragment>\r\n      // )\r\n    })\r\n  } catch (error) {\r\n\r\n    console.error(\"SAGA ERROR: data/buildFeatureLayer, \", error);\r\n  }\r\n}\r\n\r\n// WATCHER SAGA //\r\nexport function* watchAreaQuery() {\r\n  yield takeLatest(types.ADD_TO_STORE, addToStore);\r\n  yield takeLatest(types.SEND_AREA_QUERY, sendAreaQuery);\r\n  yield takeLatest(types.BUILD_FEATURE_LAYER, buildFeatureLayer);\r\n}\r\n","//#region [copyright]\r\n// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.​\r\n//#endregion\r\n\r\n/*/\r\n*  ┌─────────────────────────────────────┐\r\n*  │ |> Combine Sagas into one output    │\r\n*  └─────────────────────────────────────┘\r\n/*/\r\nimport { all, fork } from 'redux-saga/effects';\r\n\r\nimport * as authSagas from './_auth';\r\nimport * as configSagas from './_config';\r\nimport * as securitySagas from './_security-token';\r\nimport * as areaSagas from './_area-query';\r\n// import * as refIdSagas from './_refid-query';\r\n\r\nexport default function* rootSaga() {\r\n  yield all([\r\n    ...Object.values(authSagas),\r\n    ...Object.values(configSagas),\r\n    ...Object.values(securitySagas),\r\n    ...Object.values(areaSagas),\r\n    // ...Object.values(refIdSagas)\r\n    // include all additional Sagas\r\n  ].map(fork));\r\n}\r\n","// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.​\r\n\r\n// ACTION TYPES //\r\nexport const types = {\r\n  MAP_LOADED: \"MAP_LOADED\"\r\n};\r\n\r\n// REDUCERS //\r\nexport const INITIAL_STATE = {\r\n  loaded: false\r\n};\r\n\r\nexport default (state = INITIAL_STATE, action) => {\r\n  switch (action.type) {\r\n    case types.MAP_LOADED:\r\n      return {\r\n        ...state,\r\n        loaded: true\r\n      };\r\n      \r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n// ACTIONS //\r\nexport const mapLoaded = options => ({ \r\n  type: types.MAP_LOADED, \r\n  payload: options \r\n});\r\n","//Axios imports\r\nimport axios from \"axios\";\r\n\r\nrequire('dotenv').config();\r\n/*/\r\n *  ┌─────────────────────────────┐\r\n *  │ |> Http Request             │\r\n *  └─────────────────────────────┘\r\n/*/\r\nexport function setSecurityTokenRequest() {\r\n  return axios.request({\r\n    method: \"get\",\r\n    url:  process.env.REACT_APP_API_BASE_URL + \r\n          process.env.REACT_APP_API_VERSION + \r\n          \"/security-token\"\r\n  });\r\n}\r\n\r\n/*/\r\n *  ┌─────────────────────────────┐\r\n *  │ |> Http Request             │\r\n *  └─────────────────────────────┘\r\n/*/\r\nexport function mockSecurityTokenRequest() {\r\n  return axios.request({\r\n    method: \"get\",\r\n    url:  process.env.REACT_APP_API_BASE_URL + \r\n          process.env.REACT_APP_API_VERSION + \r\n          \"/mock-token\"\r\n  });\r\n}\r\n","import { call, put } from \"redux-saga/effects\";\r\nimport { setSecurityToken, securityTokenSuccess,  } from \"../../reducers/security-token\";\r\nimport { setSecurityTokenRequest, mockSecurityTokenRequest } from \"../requests/security-token\";\r\n\r\nexport function* handleSetSecurityToken(action) {\r\n  try {\r\n    const response = yield call(setSecurityTokenRequest);\r\n    const { data } = response;\r\n    console.log(\"Handler Response: \", response);\r\n    yield put(securityTokenSuccess(data));\r\n\r\n  } catch (error) {\r\n    console.log('Error: ', error);\r\n  }\r\n}\r\n","import * as types from \"../types/area-types\";\r\n\r\n/*/\r\n  *  ┌──────────────────────────────────────┐\r\n  *  │ |> Redux Actions - Area Queries      │\r\n  *  └──────────────────────────────────────┘\r\n/*/\r\n\r\n// !! File is no longer used - Will be deleted once Redux-Saga refactoring is complete !!\r\n\r\n// ACTIONS //\r\nexport const addToStoreAction = options => ({\r\n  type: types.ADD_TO_STORE,\r\n  payload: options\r\n});\r\n\r\n// TODO: Look into why '_Saga' had to be removed from action type  \r\nexport const addedToStoreAction = options => ({\r\n  type: types.ADDED_TO_STORE,\r\n  payload: options\r\n});\r\n\r\n// NOTE: Is this action set needed? (PENDING DELETION)\r\nexport const areaQueryReadyAction = task => ({\r\n  type: types.AREA_QUERY_READY, // readonly\r\n  task\r\n});\r\n\r\nexport const sendAreaQueryAction = options => ({\r\n  type: types.SEND_AREA_QUERY,\r\n  payload: options\r\n});\r\n\r\nexport const areaQuerySentAction = options => ({\r\n  type: types.AREA_QUERY_SENT,\r\n  payload: options\r\n});\r\n\r\n// NOTE: Is this action set needed? (PENDING DELETION)\r\nexport const areaQueryDoneAction = task => ({\r\n  type: types.AREA_QUERY_DONE,\r\n  task\r\n});\r\n\r\n// NOTE: Consolidate into single action\r\nexport const areaQueryFailAction = task => ({\r\n  type: types.AREA_QUERY_FAIL, // readonly\r\n  task\r\n});\r\n\r\n// NOTE: Consolidate into single action\r\nexport const areaQueryStatusAction = task => ({\r\n  type: types.AREA_QUERY_STATUS, // readonly\r\n  task\r\n});\r\n","import { takeEvery, takeLatest } from \"redux-saga/effects\";\r\n\r\nimport { handleSetSecurityToken } from \"./handlers/security-token\";\r\n// import { handleRefIdQueryPush } from \"./handlers/refid-query\";\r\n\r\nimport { areaQueryPushSaga } from \"../actions/area-query-actions\";\r\n\r\nimport { handleAreaQueryPuts, handleAreaQueryPush, handlesendAreaQuery } from \"./handlers/area-query\";\r\n\r\nimport { types as securityTypes } from \"../reducers/security-token\";\r\nimport * as areaQueryTypes from \"../types/area-types\";\r\n// import { types as refIdQueryTypes } from \"../reducers/refid-query\";\r\n// import { types as polygonQueryTypes } from \"../reducers/polygon-query\";\r\n\r\n// Configure Error Handler\r\nconst handleErrors = err => {\r\n  const resp = new Response(JSON.stringify({\r\n    \"code\": err.code,\r\n    \"message\": err.statusText\r\n  }));\r\n  \r\n  console.warn(resp);\r\n  return resp;\r\n}\r\n\r\n// const getStatus = state => state.select;\r\n\r\n// TODO: This watcherSaga() to be merged into rootSaga() ./index.js\r\nexport function* watcherSaga() {\r\n  // yield takeLatest(securityTypes.SECURITY_TOKEN_SET, (!handleSetSecurityToken) ? handleErrors : handleSetSecurityToken);\r\n  yield takeLatest(securityTypes.SECURITY_TOKEN_SET, handleSetSecurityToken);\r\n  // yield takeLatest(areaQueryTypes.ADD_TO_STORE, (!areaQueryPushSaga) ? handleErrors : areaQueryPushSaga);\r\n  // yield takeLatest(areaQueryTypes.ADD_TO_STORE, areaQueryPushSaga);\r\n  // yield takeLatest(areaQueryTypes.ADD_TO_STORE, (!handleAreaQueryPush) ? handleErrors : handleAreaQueryPush);\r\n  // yield takeLatest(areaQueryTypes.SEND_AREA_QUERY, handlesendAreaQuery);\r\n\r\n}\r\n\r\n// TODO: Create a `seleector` function that will return current status of the redux store\r\n// For example, suppose we have this state shape in our application:\r\n// state = { cart: { ...} }\r\n// We can create a selector, i.e.a function which knows how to extract the cart data from the State:\r\n// ./ selectors\r\n// export const getCart = state => state.cart\r\n\r\n// Then we can use that selector from inside a Saga using the select Effect:\r\n// ./ sagas.js\r\n// import { take, fork, select } from 'redux-saga/effects' import { getCart } from './selectors'\r\n\r\n// function* checkout() { // query the state using the exported selector const cart = yield select(getCart)\r\n\r\n//   //-- ... call some API endpoint then dispatch a success/error action\r\n// }\r\n\r\n// export default function* rootSaga() { while (true) { yield take('CHECKOUT_REQUEST') yield fork(checkout) } }\r\n","export default __webpack_public_path__ + \"static/media/Topo-Abs-BG.b496ff06.svg\";","export default \"data:image/png;base64,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\"","// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.​\r\n\r\n// React\r\nimport React from \"react\";\r\n\r\n// Components\r\nimport Loader from \"calcite-react/Loader\";\r\nimport background from \"../styles/images/Topo-Abs-BG.svg\";\r\nimport logo from \"../styles/images/quiet-professionals-logo.png\";\r\n\r\n// Styled & Motion Components\r\nimport styled from \"styled-components\";\r\nimport { CalciteH5 } from \"calcite-react/Elements\";\r\nimport { motion } from \"framer-motion\";\r\n\r\n\r\nconst Container = styled.div`\r\n  position: absolute;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  width: 100%;\r\n  background: rgba(255, 255, 255, 0.1) url(${background}) no-repeat center/cover;\r\n  background-blend-mode: screen;\r\n`;\r\n\r\nconst Wrapper = styled.div`\r\n  position: absolute;\r\n  top: 70%;\r\n  left: 50%;\r\n  transform: translate(-50%);\r\n`;\r\n\r\nconst Title = styled.div`\r\n  position: absolute;\r\n  right: 0;\r\n  bottom: 0;\r\n  z-index: 20;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 100%;\r\n  padding: 2em;\r\n  text-align: center;\r\n  color: white;\r\n`;\r\n\r\n// const Label = styled.h1`\r\n//   font-size: 2em;\r\n//   text-shadow: -2px 2px 8px rgba(0, 0, 0, 0.25);\r\n// `;\r\n\r\nconst Logo = styled.img`\r\n  width: 8em;\r\n  height: 100%;\r\n  margin-right: 1em;\r\n`;\r\n\r\nconst FadingContainer = () => (\r\n  <motion.div\r\n    initial={{ opacity: 1, zIndex: 1000 }}\r\n    animate={{\r\n      opacity: 0,\r\n      transitionEnd: {\r\n        display: \"none\"\r\n      }\r\n    }}\r\n    transition={{ delay: 1, duration: 1, ease: \"easeInOut\" }}\r\n  >\r\n    <Container></Container>\r\n  </motion.div>\r\n);\r\n\r\nconst LoadScreen = props => {\r\n  if (!props.isLoading) {\r\n    return (\r\n      <Container>\r\n        <Wrapper>\r\n          <Loader />\r\n        </Wrapper>\r\n        <Title>\r\n          <Logo src={logo}></Logo>\r\n          {/* <Label>AMPD</Label> */}\r\n          <CalciteH5>Anonymized Mobile Phone Data</CalciteH5>\r\n        </Title>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return <FadingContainer />;\r\n};\r\n\r\nexport default LoadScreen;\r\n","// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.​\r\n\r\n/**\r\n * This is an example component used to showcase authentication\r\n * @type {Class}\r\n */\r\n\r\n// React\r\nimport React from \"react\";\r\n\r\n// Components\r\nimport TopNavActionsList from \"calcite-react/TopNav/TopNavActionsList\";\r\nimport ArcgisAccount from \"calcite-react/ArcgisAccount\";\r\nimport ArcgisAccountMenuItem from \"calcite-react/ArcgisAccount/ArcgisAccountMenuItem\";\r\nimport Button from \"calcite-react/Button\";\r\n\r\n// Class\r\nconst UserAccount = props => {\r\n  const signedInActionsComponent = props.user ? (\r\n    <TopNavActionsList style={{ padding: 0 }}>\r\n      <ArcgisAccount\r\n        user={props.user}\r\n        portal={props.portal}\r\n        token={props.token}\r\n        onRequestSwitchAccount={() => console.log(\"switch account clicked\")}\r\n        onRequestSignOut={props.signOut}>\r\n        <ArcgisAccountMenuItem onClick={() => console.log(\"Profile & Settings clicked\")}>\r\n          Profile &amp; Settings\r\n        </ArcgisAccountMenuItem>\r\n        <ArcgisAccountMenuItem onClick={() => console.log(\"My Esri clicked\")}>\r\n          My Esri\r\n        </ArcgisAccountMenuItem>\r\n        <ArcgisAccountMenuItem onClick={() => console.log(\"Training clicked\")}>\r\n          Training\r\n        </ArcgisAccountMenuItem>\r\n        <ArcgisAccountMenuItem onClick={() => console.log(\"Community & Forums clicked\")}>\r\n          Community &amp; Forums\r\n        </ArcgisAccountMenuItem>\r\n        <ArcgisAccountMenuItem onClick={() => console.log(\"ArcGIS Online clicked\")}>\r\n          ArcGIS Online\r\n        </ArcgisAccountMenuItem>\r\n      </ArcgisAccount>\r\n    </TopNavActionsList>\r\n  ) : null;\r\n\r\n  const signedOutActionsComponent = (\r\n    <TopNavActionsList>\r\n      <Button clear onClick={props.signIn}>\r\n        Sign In\r\n      </Button>\r\n    </TopNavActionsList>\r\n  );\r\n\r\n  let outputComponent = props.loggedIn\r\n    ? signedInActionsComponent\r\n    : signedOutActionsComponent;\r\n\r\n  return <div>{outputComponent}</div>;\r\n};\r\n\r\nexport default UserAccount;\r\n","/*/\r\n *  ┌───────────────────────────────────┐\r\n *  │ |> Scalable Calculate Utility     │\r\n *  └───────────────────────────────────┘\r\n/*/\r\n// React\r\nimport React, { Component } from 'react';\r\n\r\n// Esri\r\nimport { geodesicUtils, geodesicLengths } from \"@arcgis/core/geometry/support/geodesicUtils\";\r\nimport { Point, Polyline } from '@arcgis/core/geometry';\r\nimport { webMercatorToGeographic } from '@arcgis/core/geometry/support/webMercatorUtils';\r\n// import { json } from 'body-parser';\r\n\r\n\r\nconst Calculate = props => {\r\n\r\n  /**-------------------------------------------------------------\r\n   *  distance()\r\n   *  ~~Compute geodetic distance and direction between two points\r\n   *  @param locations :Object{}\r\n   *  @return distance :Number\r\n  */\r\n  // TODO: Component cleanup\r\n  // NOTE: Leverage the `geodesicAreas()` method when / if the time comes\r\n\r\n}\r\n\r\nexport const calcDistance = props => {\r\n\r\n  console.log('Locations: ', props);\r\n\r\n  const locations = props;\r\n  const { locationA, locationB } = locations;\r\n\r\n  // const pointFrom = new Point({ \"x\": locationA.x, \"y\": locationA.y });\r\n  // const pointTo = new Point({ \"x\": locationB.x, \"y\": locationB.y })\r\n  \r\n  let polyline = new Polyline({\r\n    \"paths\": [[\r\n      [locationA.x, locationA.y],\r\n      [locationB.x, locationB.y]\r\n    ]]\r\n  });\r\n  console.log(JSON.stringify(polyline));\r\n  polyline = new Polyline(polyline);\r\n  console.log(JSON.stringify(polyline));\r\n  polyline = webMercatorToGeographic(polyline);\r\n  console.log(JSON.stringify(polyline));\r\n  \r\n  let polylineLength = geodesicLengths([polyline], \"meters\");\r\n\r\n  // const polylineLength = geodesicLengths([polyline], \"meters\")\r\n  //   .then((res) => {\r\n  //     // response is a polygon geometry of a 1000ft buffer around the input point\r\n  //     console.log('Polyline Length: ', res);\r\n  //     return res;    \r\n  //   });\r\n\r\n  console.log('Polyline Length: ', polylineLength[0]);\r\n\r\n  if (polylineLength >= 2500) polylineLength = 2500;\r\n  //output 99.93917832865446\r\n  //process.env.REACT_APP_DEFAULT_UNITS_OF_LENGTH\r\n\r\n  // Geodetic `distance` computation\r\n  // const join = geodesicLengths(latLongFrom, latLongTo, \"meters\");\r\n  // console.log(\"Points: \", join);\r\n\r\n  // Destructure `join` object to access distance \r\n  // const { distance, azimuth } = join;\r\n  // console.log('Distance: ', distance, ', Direction: ', azimuth);\r\n\r\n  return polylineLength[0];\r\n}\r\n\r\n/**-------------------------------------------------------------\r\n *  radius()\r\n *  ~~Compute geodetic radius from two points\r\n *  @param   locations :Array[{}]\r\n *  @extends Calculate.distance()\r\n *  @return  distance :Number\r\n*/\r\nexport const calcRadius = props => {\r\n\r\n  const distance = calcDistance(props);\r\n  const radius = distance * 2;\r\n\r\n  console.log('Radius: ', radius);\r\n\r\n  return radius;\r\n}\r\n\r\n// export default Calculate;\r\n// export { calcDistance, calcRadius }","/*/\r\n  *  ┌────────────────────────────────────────┐\r\n  *  │ |> Date Range Component - Area Query   │\r\n  *  └────────────────────────────────────────┘\r\n/*/\r\n// React\r\nimport React, { Component } from 'react';\r\n\r\n// React / Redux\r\nimport { connect } from 'react-redux';\r\n\r\n// Calcite\r\nimport DatePicker from 'react-datepicker';\r\n// import DatePicker, { DateRangePicker } from 'calcite-react/DatePicker';\r\nimport Button, { ButtonGroup } from 'calcite-react/Button';\r\n// import Form, { Field, FormControl, FormControlLabel, FormHelperText } from 'calcite-react/Form';\r\n\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\n// import * as actions from '../../../redux/actions/area-query-actions';\r\n// import 'bootstrap/dist/css/bootstrap.min.css';\r\nimport areaQuery, {\r\n  addToStoreAction,\r\n  sendAreaQueryAction\r\n} from \"../../../redux/reducers/area-query\";\r\nimport { dateToIsoString } from '../../../utils/format';\r\n\r\n// TODO: Install `date-fns` package and leverage features for date-range\r\n// import addDays from 'date-fns/addDays'\r\n\r\nclass DateRangeComponent extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      startDate: null,\r\n      endDate: null\r\n    };\r\n    \r\n    this.handleStartDateChange = this.handleStartDateChange.bind(this);\r\n    this.handleEndDateChange = this.handleEndDateChange.bind(this);\r\n    this.onFormSubmit = this.onFormSubmit.bind(this);\r\n  }\r\n  \r\n  shouldComponentUpdate() {\r\n    console.log('DateRange <Child> Component - shouldComponentUpdate()<lifecycle>');\r\n    return true;\r\n  }\r\n\r\n  componentDidMount() {\r\n    console.log('Component Did Load');\r\n    const today = new Date(Date.now());\r\n    // Start date defaults to seven (7) days\r\n    this.setState({ \r\n      startDate: today.setDate(today.getDate() - 7),\r\n      endDate: today.setDate(today.getDate())\r\n    })\r\n\r\n    console.log('props:', this.props);\r\n    console.log('State', this.state);\r\n  }\r\n\r\n  // TODO: Pending Deletion?\r\n  handleStartDateChange(date) {\r\n    const tempStartDateObj = new Date(date);\r\n    const startDateIsoString = dateToIsoString(tempStartDateObj);\r\n\r\n    // console.group('Start Date:>');\r\n    // console.log('Date Param: ', tempStartDateObj);\r\n    // console.log('Temp Date: ', startDateIsoString);\r\n    // console.groupEnd();\r\n\r\n    this.props.addToStoreCreator({ startDate: startDateIsoString });\r\n    // this.props.dispatch({ type: 'ADD_TO_STORE', payload: { startDate: startDateIsoString } });\r\n\r\n    // return tempStartDateObj;\r\n  }\r\n  // TODO: Pending Deletion?\r\n  handleEndDateChange(date) {\r\n    const tempEndDateObj = new Date(date);\r\n    const endDateIsoString = dateToIsoString(tempEndDateObj);\r\n\r\n    // console.group('End Date:>');\r\n    // console.log('Date Param: ', tempEndDateObj);\r\n    // console.log('Temp Date: ', endDateIsoString);\r\n    // console.groupEnd();\r\n    \r\n    this.props.addToStoreCreator({ endDate: endDateIsoString });\r\n    // this.props.dispatch({ type: 'ADD_TO_STORE', payload: { endDate: endDateIsoString } });\r\n  }\r\n  //#region [qp]\r\n  //_On submit will open a stargate to a dimension that contains 'dots on map'!\r\n  onFormSubmit(event) {\r\n    event.preventDefault();\r\n\r\n    console.group('Date Range:>');\r\n    console.log(this.props.startDate);\r\n    console.log(this.props.endDate);\r\n    console.groupEnd();\r\n\r\n    const tokenizedPayload = { ...this.props.areaQuery, ...this.props.securityToken }\r\n\r\n    console.log('Payload:', tokenizedPayload);\r\n\r\n    const areaQueryData = this.props.sendAreaQueryCreator(tokenizedPayload);\r\n\r\n    return areaQueryData;\r\n  }\r\n  //#endregion\r\n\r\n  render() {\r\n    return (\r\n      <form onSubmit={this.onFormSubmit}>\r\n        <div className=\"form-group\">\r\n          <label>Start Date: </label>\r\n          <DatePicker\r\n            id=\"startDatePicker\"\r\n            label=\"Start Date\"\r\n            // dropdownMode={\"scroll\"}\r\n            selected={this.props.startDate}\r\n            onChange={this.handleStartDateChange}\r\n            onSelect={(date) => this.props.handleStartQuery(date)}\r\n            name=\"startDate\"\r\n            dateFormat=\"MM/dd/yyyy\"\r\n            startDate={this.props.startDate}\r\n            maxDate={Date.now()}\r\n            minDate={new Date('16 Jun 2017 00:00:00 GMT')}\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>End Date: </label>\r\n          <DatePicker\r\n            id=\"endDatePicker\"\r\n            label=\"End Date\"\r\n            // dropdownMode={\"scroll\"}\r\n            selected={this.props.endDate}\r\n            onChange={this.handleEndDateChange}\r\n            onSelect={(date) => this.props.handleEndQuery(date)}\r\n            name=\"endDate\"\r\n            dateFormat=\"MM/dd/yyyy\"\r\n            endDate={this.props.endDate}\r\n            maxDate={Date.now()}\r\n            minDate={new Date('16 Jun 2017 00:00:00 GMT')}\r\n          />\r\n        </div>\r\n        <Button className=\"btn btn-primary\" type=\"submit\">Submit</Button>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {  // store.getState();\r\n  console.log('state: ', state.areaQuery);\r\n  return {\r\n    // startDate: state.areaQuery.startDate,\r\n    // endDate: state.areaQuery.endDate,\r\n    // latitude: state.areaQuery.latitude,\r\n    // longitude: state.areaQuery.longitude,\r\n    // radius: state.areaQuery.radius,\r\n    // status: state.areaQuery.status,\r\n    // locationData: state.areaQuery.locationData\r\n    areaQuery: state.areaQuery,\r\n    securityToken: state.securityToken\r\n  }\r\n};\r\n\r\n// ACTION CREATORS\r\nconst addToStoreCreator = (options) => ({ type: 'ADD_TO_STORE', payload: options });\r\nconst sendAreaQueryCreator = (options) => ({ type: 'SEND_AREA_QUERY', payload: options });\r\n\r\nconst actionCreators = {\r\n  addToStoreCreator,\r\n  sendAreaQueryCreator\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps, \r\n  actionCreators\r\n)(DateRangeComponent);\r\n","// #region [copyright]\r\n// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.​\r\n//#endregion\r\n\r\n// #region [notes]\r\n// NOTE:\r\n// -- This is a \"special\" react component that does not strictly play by\r\n// -- React's rules.\r\n// --\r\n// -- Conceptually, this component creates a \"portal\" in React by\r\n// -- closing its render method off from updates (by simply rendering a div and\r\n// -- never accepting re-renders) then reconnecting itself to the React lifecycle\r\n// -- by listening for any new props using:\r\n//   -- `componentWillReceiveProps` - Class (stateful) Components\r\n//   -- `useEffect()` - Functional (stateless) Components\r\n// --\r\n// --------------------------------------------------------------------------------\r\n//#endregion\r\n\r\n// #region [imports]\r\n// React\r\nimport React, { useEffect, useState } from \"react\";\r\nimport ReactDOM, { render } from \"react-dom\";\r\n\r\n// Redux\r\nimport { connect, useSelector, useDispatch } from \"react-redux\";\r\nimport { refIdQuery } from \"../../../redux/reducers/refid-query\";\r\nimport areaQuery, { \r\n  addToStoreAction, \r\n  sendAreaQuery, \r\n  areaQueryDone, \r\n  areaQueryPuts \r\n} from \"../../../redux/reducers/area-query\";\r\nimport * as types from \"../../../redux/types/area-types\";\r\n// import { createSelector } from 'reselect';\r\n// import { updateConfig } from \"../../../redux/reducers/config\";\r\n\r\n// Esri\r\nimport { loadModules } from \"esri-loader\";\r\nimport BasemapGallery from \"@arcgis/core/widgets/BasemapGallery\";\r\nimport DatePicker from \"@arcgis/core/widgets/support/DatePicker\"; \r\nimport CoordinateConversion from \"@arcgis/core/widgets/CoordinateConversion\";\r\nimport { Geometry } from \"@arcgis/core/geometry\";\r\nimport { distance, geometryEngine } from \"@arcgis/core/geometry/geometryEngine\";\r\nimport { coordinateFormatter, toLatitudeLongitude } from \"@arcgis/core/geometry/coordinateFormatter\";\r\nimport Graphic from \"@arcgis/core/Graphic\";\r\nimport GraphicsLayer from \"@arcgis/core/layers/GraphicsLayer\";\r\n// import DateTimePickerInput from \"@arcgis/core/form/elements/inputs/DateTimePickerInput\";\r\n\r\n// Calcite / Styles\r\nimport Button, { ButtonGroup } from 'calcite-react/Button';\r\n\r\n// QP\r\nimport { loadMap } from \"../../../utils/map\";\r\nimport { calcDistance } from \"../../../utils/calculate\";\r\nimport { dateToIsoString } from '../../../utils/format';\r\nimport DateRangeComponent from \"../widgets/DateRange\";\r\nimport FeatureLayerBuilder from \"../layers/FeatureLayerBuilder\";\r\n// import DateRangeExpandClass from \"../../esri/widgets/DateRangeExpandClass\";\r\n// import DateRangeExpandWidget from \"../../esri/widgets/DateRangeExpandWidget\";\r\n// import PointGraphicBuilder from \"../layers/PointGraphicBuilder\";\r\n\r\nrequire('dotenv').config();\r\n// #endregion\r\n\r\n// #region [styles]\r\nimport styled from \"styled-components\";\r\n// import { areaQueryPushSaga } from \"../../../redux/actions/area-query-actions\";\r\n// import { areaQueryRequest } from \"../../../redux/sagas/requests/area-query\";\r\n// import { json } from \"body-parser\";\r\n// import { query } from \"express\";\r\n\r\nconst Container = styled.div`\r\n  height: 100%;\r\n  width: 100%;\r\n`;\r\n\r\nconst DateRangeContainer = styled.div`\r\n  min-height: 10vh;\r\n  width: 12vw;\r\n  padding: 10px;\r\n`;\r\n\r\nconst StartDateRangeContainer = styled.div`\r\n  min-height: 10vh;\r\n  width: 12vw;\r\n`;\r\n\r\nconst EndDateRangeContainer = styled.div`\r\n  min-height: 10vh;\r\n  width: 12vw;\r\n`;\r\n// #endregion\r\n\r\n/*/\r\n  *  ┌─────────────────────┐\r\n  *  │ |> Map Component    │\r\n  *  └─────────────────────┘\r\n/*/\r\n//#region [component]\r\nconst Map = props => {\r\n\r\n  // Set `id` for the map to attach to\r\n  // const geoData = useSelector(state => state.geojsonLayer);\r\n\r\n  // const [areaQuery, setAreaQuery] = useState({\r\n  //   startDate: '',\r\n  //   endDate: '',\r\n  //   latitude: 0,\r\n  //   longitude: 0,\r\n  //   radius: 10,\r\n  //   status: \"idle\" // [\"idle\", \"loading\", \"success\", \"error\" ]\r\n  // });\r\n\r\n  // Aliases\r\n  const containerId = \"mapViewContainer\";\r\n  const dateRangeId = \"dateRangeContainer\";\r\n  const startDateRangeId = \"startDateRangeContainer\";\r\n  const endDateRangeId = \"endDateRangeContainer\";\r\n\r\n  // Redux store state\r\n  const dispatch = useDispatch();\r\n  const securityToken = useSelector(state => state.securityToken);\r\n  const { TempSecurityToken: tempSecurityToken } = securityToken;\r\n  const refIdQuery = useSelector(state => state.refIdQuery);\r\n  const areaQueryState = useSelector(state => state.areaQuery);\r\n  const isAreaQueryDataLoaded = useSelector(state => state.areaQuery.status);\r\n\r\n  /*/\r\n    *  ┌─────────────────────────────┐\r\n    *  │ |> Local & 1Global States   │\r\n    *  └─────────────────────────────┘\r\n  /*/\r\n  // DatePicker\r\n  const [startDate, setStartDate] = useState(0);\r\n  const [endDate, setEndDate] = useState(0);\r\n  const [baseMapState, setBaseMapState] = useState({});\r\n  const [mapViewState, setMapViewState] = useState({});\r\n\r\n  // const { latitude, longitude, radius } = areaQueryState;\r\n\r\n  let baseMap = baseMapState;\r\n  let mapView = mapViewState;\r\n\r\n  let sketchViewModel,\r\n    instructionsExpand,\r\n    boundaryPolygon,\r\n    validSymbol,\r\n    invalidSymbol,\r\n    buffers,\r\n    newDevelopmentGraphic\r\n\r\n  let intersects = false;\r\n  let contains = true;\r\n\r\n  let graphicsLayerBaseMap,\r\n    graphicsLayerGeofence,\r\n    graphicsLayerSignals\r\n\r\n  //--GraphicsLayer Color Overrides\r\n  // Fills\r\n  const polyFill = [116, 150, 179, 0.20];\r\n  const pointFill = [0, 96, 175];\r\n\r\n  // Strokes\r\n  const polygonStroke = {\r\n    color: [0, 96, 175],\r\n    width: 2\r\n  };\r\n\r\n  const pointStroke = {\r\n    color: [3, 17, 30],\r\n    width: 1\r\n  };\r\n\r\n  /*/\r\n    *  ┌───────────────────────────────┐\r\n    *  │ |> Default Area Query Dates   │\r\n    *  └───────────────────────────────┘\r\n  /*/\r\n  useEffect(() => {\r\n    const today = new Date(Date.now());\r\n    console.log('Default State: ', today);\r\n    const sDate = today.setDate(today.getDate() - 7);\r\n    const eDate = today.setDate(today.getDate());\r\n    const sDateIso = dateToIsoString(new Date(sDate));\r\n    const eDateIso = dateToIsoString(new Date(eDate));\r\n\r\n    // Add local state\r\n    setStartDate(sDate); \r\n    setEndDate(eDate);\r\n\r\n    // Add to Redux store\r\n    dispatch({ type: types.ADD_TO_STORE, payload: { startDate: sDateIso } });\r\n    dispatch({ type: types.ADD_TO_STORE, payload: { endDate: eDateIso } });\r\n\r\n  },[]);\r\n\r\n  /*/\r\n    *  ┌─────────────────────────────────┐\r\n    *  │ |> Esri-Loader - Load Modules   │\r\n    *  └─────────────────────────────────┘\r\n  /*/\r\n  useEffect(() => {\r\n    loadMap(containerId, props.mapConfig, props.loaderConfig)\r\n      .then(res => {\r\n        // Call the map loaded event when we get the map view back\r\n        // props.onMapLoaded();\r\n        console.log('LoadMap: ', res);\r\n        // console.log('Props: ', props);\r\n        // console.log('window.dojo: ', window.dojoConfig);\r\n\r\n        // TODO: Leverage the ES Module `import` feature in ArcGIS API v4.18\r\n        loadModules([\r\n          // \"esri/form/elements/inputs/DateTimePickerInput\",\r\n          \"esri/config\",\r\n          \"esri/geometry/geometryEngine\",\r\n          \"esri/Map\",\r\n          \"esri/widgets/Expand\",\r\n          \"esri/widgets/LayerList\",\r\n          \"esri/widgets/ScaleBar\",\r\n          \"esri/widgets/Search\",\r\n          \"esri/widgets/Sketch\",\r\n          \"esri/widgets/Sketch/SketchViewModel\",\r\n          \"esri/views/MapView\"], props.loaderConfig)\r\n          .then(([\r\n            esriConfig,\r\n            geometryEngine,\r\n            Map,\r\n            Expand,\r\n            LayerList,\r\n            ScaleBar,\r\n            Search,\r\n            Sketch,\r\n            SketchViewModel,\r\n            MapView]) => {\r\n\r\n            // esriConfig.apiKey = process.env.REACT_APP_ESRI_API_KEY;\r\n            // console.log('Esri API Key: ', process.env.REACT_APP_ESRI_API_KEY);\r\n\r\n            graphicsLayerBaseMap = new GraphicsLayer({\r\n              title: \"Basemap\"\r\n            });\r\n            // Basemap\r\n            baseMap = new Map({\r\n              basemap: \"gray-vector\",\r\n              layers: [graphicsLayerBaseMap]\r\n            });\r\n            // Mapview\r\n            mapView = new MapView({\r\n              // let mapView = res;  \r\n              // res = {\r\n              container: \"mapViewContainer\",\r\n              map: baseMap,\r\n              extent: {\r\n                spatialReference: {\r\n                  wkid: 102100\r\n                },\r\n                xmin: -9177882,\r\n                ymin: 4246761,\r\n                xmax: -9176720,\r\n                ymax: 4247967\r\n              },\r\n              popup: {\r\n                dockEnabled: true,\r\n                dockOptions: {\r\n                  position: \"bottom\",\r\n                  breakpoint: false\r\n                }\r\n              },\r\n              ...props.mapConfig\r\n            });\r\n\r\n            // mapView.extent = new Extent({\r\n            //   xmin: -9177882,\r\n            //   ymin: 4246761,\r\n            //   xmax: -9176720,\r\n            //   ymax: 4247967,\r\n            //   spatialReference: {\r\n            //     wkid: 102100\r\n            //   }\r\n            // });\r\n\r\n            // setMapState(baseMap);\r\n            // setViewState(mapView);\r\n            // Add baseMap & mapView to Loal State\r\n            setBaseMapState(baseMap);\r\n            setMapViewState(mapView);\r\n\r\n            /*/\r\n             *  ┌─────────────────────────────┐\r\n             *  │ |> Widgets / Query Tools    │\r\n             *  └─────────────────────────────┘\r\n            /*/\r\n            // TODO: Determine LoE to move all widgets into\r\n            let dateObj = new Date();\r\n            // --Basemaps\r\n            // const basemapGallery = new BasemapGallery({\r\n            //   view: mapView,\r\n            //   container: document.createElement(\"div\")\r\n            // });\r\n            // --Date Range\r\n            // const dateRangeWidget = new DateTimePickerInput({\r\n            //   includeTime: true,\r\n            //   min: Date.parse('01 Jan 2018 00:01:00 GMT'),\r\n            //   max: dateObj.setDate(-1)\r\n            // });\r\n            // --Date Range Expand\r\n            // const dateRangeExpand = new ExpandWidget({\r\n            //   view: mapView,\r\n            //   content: \"Testing\"\r\n            // });\r\n            // const coordsConverter = new CoordinateConversion({\r\n            //   view: mapView\r\n            // });\r\n            // --DatePicker\r\n            // const startDatePicker = new DatePicker({\r\n            //   container: dateRangeId,\r\n            //   view: mapView\r\n            // });\r\n            // const endDatePicker = new DatePicker({\r\n            //   container: dateRangeId,\r\n            //   view: mapView\r\n            // });\r\n            // --LayerList\r\n            const layerList = new LayerList({\r\n              view: mapView\r\n            });\r\n            // --Search Tool\r\n            const search = new Search({\r\n              view: mapView\r\n            });\r\n            // --Scale Bar\r\n            const scaleBar = new ScaleBar({\r\n              view: mapView,\r\n              unit: \"dual\"\r\n            });\r\n\r\n            // const getJsonData = buildFeatureLayer(baseMap, mapView);\r\n\r\n            // Add Sketch widget to mapView\r\n            // mapView.ui.add([{\r\n            //   component: basemapGallery,\r\n            //   position: \"bottom-left\",\r\n            //   index: 0\r\n            // }]);\r\n            // mapView.ui.add([{\r\n            //   component: coordsConverter,\r\n            //   position: \"top-left\",\r\n            //   index: 0\r\n            // }]);\r\n            mapView.ui.add(dateRangeId, \"top-right\");\r\n            mapView.ui.add([{\r\n              component: search,\r\n              position: \"top-right\",\r\n              index: 0\r\n            }]);\r\n            // mapView.ui.add([{\r\n            //   component: startDatePicker,\r\n            //   position: \"top-right\",\r\n            //   index: 1\r\n            // }]);\r\n            // mapView.ui.add([{\r\n            //   component: endDatePicker,\r\n            //   position: \"top-right\",\r\n            //   index: 2\r\n            // }]);\r\n            mapView.ui.add([{\r\n              component: layerList,\r\n              position: \"bottom-right\"\r\n            }]);\r\n\r\n            // mapView.ui.add([{\r\n            //   component: dateRangeWidget,\r\n            //   position: \"top-right\",\r\n            //   index: 0\r\n            // }]);\r\n            mapView.ui.add([{\r\n              component: scaleBar,\r\n              position: \"bottom-left\",\r\n              index: 0\r\n            }]);\r\n\r\n            //--- Mount view \"when\" loaded ---|>\r\n            mapView.when(() => {\r\n              // Query all buffer features from the school buffers featurelayer\r\n              // bufferLayer.queryFeatures().then(function (results) {\r\n              //   buffers = results.features[0].geometry;\r\n              // });\r\n\r\n              // Add the boundary polygon and new lot polygon graphics\r\n              //// addGraphics();\r\n\r\n              // Create a new instance of sketchViewModel\r\n              sketchViewModel = new SketchViewModel({\r\n                view: mapView,\r\n                layer: graphicsLayerGeofence,\r\n                updateOnGraphicClick: false,\r\n                defaultUpdateOptions: {\r\n                  // set the default options for the update operations\r\n                  toggleToolOnClick: false // only reshape operation will be enabled\r\n                }\r\n              });\r\n\r\n              // TODO: Move back to its Component when possible `useRef()`\r\n              const sketch = new Sketch({\r\n                id: \"ampdSketchWidget\",\r\n                availableCreateTools: [\"point\", \"circle\"],\r\n                // layout: \"vertical\",\r\n                layout: \"horizontal\",\r\n                layer: graphicsLayerGeofence,\r\n                view: mapView,\r\n                // Graphic will be selected as soon as it is created\r\n                creationMode: \"update\"\r\n              });\r\n              // ##Geofences\r\n              // Override all default symbol colors and sizes\r\n              const pointSymbol = sketch.viewModel.pointSymbol;\r\n              pointSymbol.color = pointFill;\r\n              pointSymbol.outline = pointStroke;\r\n              pointSymbol.size = 8;\r\n\r\n              const polylineSymbol = sketch.viewModel.polylineSymbol;\r\n              polylineSymbol.color = polygonStroke.color;\r\n              polylineSymbol.width = polygonStroke.width;\r\n\r\n              const polygonSymbol = sketch.viewModel.polygonSymbol;\r\n              polygonSymbol.color = polyFill;\r\n              polygonSymbol.outline = polygonStroke;\r\n\r\n              mapView.ui.add([{\r\n                component: sketch,\r\n                position: \"bottom-right\"\r\n              }]);\r\n\r\n              // Listen to sketchViewModel's update event to do\r\n              // graphic reshape or move validation\r\n              sketchViewModel.on([\"update\", \"undo\", \"redo\"], onGraphicUpdate);\r\n              sketch.on([\"create\", \"complete\"], onGraphicCreate);\r\n\r\n            });\r\n\r\n            const onGraphicCreate = event => {\r\n              // get graphic as it is being created\r\n              const graphic = event.graphic;\r\n\r\n              if (event.state === \"start\" && event.tool === \"circle\") {\r\n                console.log(\"Sketch Tool - Start / Circle: \", event);\r\n              }\r\n\r\n              if (event.state === \"complete\" && event.tool === \"circle\") {\r\n                console.log(\"Sketch Tool - Complete / Circle: \", event);\r\n                // TODO: Simplify code by using object destructuring\r\n                // Use X : Y Coordinates to find the graphical center and ring points\r\n                const pointCoordinateX = graphic.geometry.centroid.x;\r\n                const pointCoordinateY = graphic.geometry.centroid.y;\r\n                const ringCoordinateX = graphic.geometry.rings[0][0][0];\r\n                const ringCoordinateY = graphic.geometry.rings[0][0][1];\r\n\r\n                const locationA = {\r\n                  \"x\": pointCoordinateX,\r\n                  \"y\": pointCoordinateY\r\n                }\r\n                const locationB = {\r\n                  \"x\": ringCoordinateX,\r\n                  \"y\": ringCoordinateY\r\n                }\r\n                const locations = { locationA, locationB }\r\n\r\n                // Compute above coordinates to get geo-fense radius \r\n                const circleRadius = calcDistance(locations);\r\n                console.log('Circle Radius: ', circleRadius);\r\n\r\n                const payloadToPush = {\r\n                  latitude: graphic.geometry.centroid.latitude,\r\n                  longitude: graphic.geometry.centroid.longitude,\r\n                  radius: circleRadius\r\n                }\r\n\r\n                // Update Redux State\r\n                dispatch(addToStoreAction(payloadToPush));\r\n                // dispatch({ type: 'ADD_TO_STORE', payload: payloadToPush });\r\n              }\r\n\r\n              if (event.state === \"update\" && event.tool === \"circle\") {\r\n                console.log(\"Sketch Tool - Update / Circle: \", event);\r\n                // TODO: Determine if '_PUSH' needs to be dispatched on update\r\n              }\r\n\r\n            }\r\n\r\n            const onGraphicUpdate = event => {\r\n              // get graphic as it is being updated\r\n              const graphic = event.graphics[0];\r\n              console.log(\"Sketch Tool - Update: \", event);\r\n\r\n              // check if the graphic is intersecting with any other item(s)\r\n              // still contained by the boundary polygon as the graphic is being updated\r\n              // intersects = geometryEngine.intersects(buffers, graphic.geometry);\r\n              contains = geometryEngine.contains(boundaryPolygon, graphic.geometry);\r\n\r\n              // change the graphic symbol to valid or invalid symbol\r\n              // depending the graphic location\r\n              graphic.symbol = (intersects) ? invalidSymbol : validSymbol\r\n\r\n              // check if the update event's the toolEventInfo.type is move-stop or reshape-stop\r\n              // then it means user finished moving or reshaping the graphic, call complete method.\r\n              // this will change update event state to complete and we will check the validity of the graphic location.\r\n              if (\r\n                event.toolEventInfo &&\r\n                (event.toolEventInfo.type === \"move-stop\" ||\r\n                  event.toolEventInfo.type === \"reshape-stop\")\r\n              ) {\r\n                console.log(\"On Stop / Reshape: \", graphic);\r\n                if (contains && !intersects) {\r\n                  console.log(\"On Reshape / Complete: \", graphic);\r\n                  sketchViewModel.complete();\r\n                }\r\n              } else if (event.state === \"complete\") {\r\n                console.log(\"On Complete: \", graphic);\r\n                sketchViewModel.complete();\r\n                logGeometry(graphic.geometry);\r\n\r\n                // graphic moving or reshaping has been completed or cancelled (distinguish with aborted property)\r\n                // if the graphic is in an illegal spot, call sketchviewmodel's update method again\r\n                // giving user a chance to correct the location of the graphic\r\n                if (!contains || intersects) {\r\n                  console.log(\"On Reshape: \", graphic);\r\n                  sketchViewModel.update([graphic], { tool: \"reshape\" });\r\n                  logGeometry(graphic.geometry);\r\n                }\r\n              }\r\n            }\r\n\r\n            // This function is called when a user clicks on the view.\r\n            const setUpGraphicClickHandler = () => {\r\n              mapView.on(\"click\", function (event) {\r\n                // check if the sketch's state active if it is then that means\r\n                // the graphic is already being updated, no action required.\r\n                if (sketchViewModel.state === \"active\") {\r\n                  return;\r\n                }\r\n                mapView.hitTest(event).then((response) => {\r\n                  var results = response.results;\r\n                  console.log(\"HitTest Results: \", results);\r\n                  // Check if the new development graphic was clicked and pass\r\n                  // the graphic to sketchViewModel.update() with reshape tool.\r\n                  results.forEach(result => {\r\n                    if (\r\n                      result.graphic.layer === sketchViewModel.layer &&\r\n                      result.graphic.attributes &&\r\n                      result.graphic.attributes.newDevelopment\r\n                    ) {\r\n                      console.log('sketchViewModel graphic updated', result);\r\n                      sketchViewModel.update([result.graphic], { tool: \"reshape\" });\r\n                    }\r\n                    else {\r\n                      console.log('sketchViewModel: No graphic clicked and passed in', result);\r\n                    }\r\n\r\n                  });\r\n\r\n                });\r\n\r\n              });\r\n\r\n            }\r\n\r\n            graphicsLayerGeofence = new GraphicsLayer({ title: \"Geofences\" });\r\n            baseMap.layers.add(graphicsLayerGeofence);\r\n\r\n            //#region [qp] \r\n            // Ad-Hoc GraphicsLayer Point - QP\r\n            const qpPoint = {\r\n              type: \"point\",\r\n              longitude: -82.568518,\r\n              latitude: 27.964489\r\n            };\r\n            \r\n            // Create a symbol for drawing the point\r\n            const markerSymbol = {\r\n              type: \"simple-marker\", // new SimpleMarkerSymbol()\r\n              color: pointFill,\r\n              outline: {\r\n                // new SimpleLineSymbol()\r\n                color: [3, 17, 30],\r\n                width: 1\r\n              }\r\n            };\r\n            \r\n            //--- Static Graphics ---|>                    \r\n            // Create a graphic and add the geometry and symbol to it\r\n            const pointGraphic = new Graphic({\r\n              geometry: qpPoint,\r\n              symbol: markerSymbol\r\n            });\r\n            // TODO: Continue from here...\r\n            // Add graphics to mapView\r\n            // mapView.baseMap.add(pointGraphic);\r\n            \r\n            // GeoJSON data\r\n            const template = {\r\n              title: \"Device Info\",\r\n              content: \"Latitude: {latitude} Longitude: {longitude}\",\r\n              fieldInfos: [\r\n                {\r\n                  fieldName: \"timestamp\",\r\n                  format: {\r\n                    dateFormat: \"short-date-short-time\"\r\n                  }\r\n                }\r\n              ]\r\n            };\r\n            \r\n            // Render data\r\n            const renderer = {\r\n              type: \"simple\",\r\n              field: \"mag\",\r\n              symbol: {\r\n                type: \"simple-marker\",\r\n                color: \"lime\",\r\n                outline: {\r\n                  color: \"white\"\r\n                }\r\n              }\r\n            };\r\n            //#endregion\r\n            \r\n            /*/\r\n             *  ┌────────────────────────────────────────┐\r\n             *  │ |> Event Listeners for Sketch Tools    │\r\n             *  └────────────────────────────────────────┘\r\n            /*/\r\n            \r\n            // Logging geoFence data via `SketchViewModel` + `eventListener` working in tandem\r\n            function logGeometry(geometry) {\r\n              if (geometry.type === \"point\") {\r\n                // new at 4.6, the compiler knows the geometry is a Point instance\r\n                console.log(\"point coords: \", geometry.x, geometry.y, geometry.z);\r\n              }\r\n              else {\r\n                // the compiler knows the geometry must be a `Extent | Polygon | Multipoint | Polyline`\r\n                console.log(\"The value is a geometry, but isn't a point.\");\r\n              }\r\n            }\r\n\r\n            // setUpExpandWidget();\r\n\r\n            // TODO: Move function into a button click event\r\n            // queryDevices(resJsonData, baseMap, mapView);\r\n\r\n            // const geoDataBlob = new Blob([JSON.stringify(props.geoJsonData)], { type: \"application/json\" });\r\n            // const geoDataUrl = URL.createObjectURL(geoDataBlob);\r\n            // const layer = new GeoJSONLayer({ url });\r\n\r\n            // const geoDataUrl = config.geoJsonData;\r\n\r\n            // const geojsonLayer = new GeoJSONLayer({\r\n            //   url: geoDataUrl,\r\n            //   copyright: \"Anonymized Mobile Phone Data\",\r\n            //   popupTemplate: template,\r\n            //   renderer: renderer //optional\r\n            // });\r\n\r\n\r\n            // const geojsonLayer = new GeoJSONLayer({ data: config.geoJsonData });\r\n\r\n            // baseMap.layers.add(getJsonData);\r\n\r\n            // mapView.ui.add(geojsonLayer);\r\n\r\n          });\r\n\r\n        // return res;\r\n     });\r\n\r\n  },[]);\r\n\r\n  // const minDate = dateObj.getUTCMilliseconds();\r\n  // dateObj.setDate(-1);\r\n\r\n  // useEffect(() => {\r\n    // dispatch(locationDataSearch({ tempSecurityToken }));\r\n    // ReactDOM.render(<DateRangeWidget></DateRangeWidget>, document.getElementById(dateRangeId));\r\n    // ReactDOM.render(<StartDateRangeContainer></StartDateRangeContainer>, document.getElementById(dateRangeId));\r\n    // ReactDOM.render(<EndDateRangeContainer></EndDateRangeContainer>, document.getElementById(dateRangeId));\r\n    // Submit Query\r\n    // document.getElementById('dateRangeSubmitBtn')\r\n    //   .on('click', () => {\r\n    //     dispatch(areaQueryRequest({ tempSecurityToken, areaQuery })\r\n    //       .then(res => json(res))\r\n    //       .then(resJson => { pointGraphicBuilder(resJson) })\r\n    //     );\r\n    //   });\r\n  // }, []);\r\n\r\n  // const featureLayerBuilder = (resJson, baseMap, mapView) => {\r\n    \r\n  // }\r\n  const handleFeatureLayerBuild = (areaQueryState, baseMapState) => {\r\n    // TODO: Determine if this is a good location to init FLB\r\n    // const featureLayer = this.props.buildFeatureLayerCreator({ areaQueryState, baseMap, mapView });\r\n\r\n    const resDataArray = areaQueryState.locationData.areas;\r\n\r\n    console.log('resDataArray: ', resDataArray);\r\n\r\n    graphicsLayerSignals = new GraphicsLayer({ title: \"Data Points\" });\r\n    // console.log('Signals Layer Added', graphicsLayerSignals);\r\n\r\n    resDataArray.map((area, i) => {\r\n\r\n      resDataArray[i].registrationIDs.map((regID, j) => {\r\n\r\n        resDataArray[i].registrationIDs[j].signals.map((signal, k) => {\r\n\r\n          const lon = signal.latitude;\r\n          const lat = signal.longitude;\r\n          const regId = signal.registrationID;\r\n\r\n          // Create a Point\r\n          const point = {\r\n            type: \"point\",\r\n            longitude: lat,\r\n            latitude: lon\r\n          };\r\n\r\n          // #e8ff00|#97a41c|#3b434f|#3f69a2|#4a99ff\r\n          const colors = [\"#e8ff00\", \"#97a41c\", \"#3b434f\", \"#3f69a2\", \"#4a99ff\"];\r\n          const simpleMarkerSymbol = {\r\n            type: \"simple-marker\",\r\n            color: pointFill,\r\n            outline: {\r\n              color: pointStroke,\r\n              width: 1\r\n            }\r\n          };\r\n\r\n          const pointGraphic = new Graphic({\r\n            geometry: point,\r\n            symbol: simpleMarkerSymbol\r\n          });\r\n\r\n          // console.log('Ready to Add Point...');\r\n          graphicsLayerSignals.add(pointGraphic);\r\n \r\n        });\r\n\r\n      });\r\n      \r\n    });\r\n    baseMapState.layers.add(graphicsLayerSignals);\r\n    // return featureLayer;\r\n  }\r\n\r\n  const FeatureLayerBuilderComponent = (baseMapState) => {\r\n    return (<FeatureLayerBuilder baseMap={baseMapState, mapView} />)\r\n  }\r\n\r\n  // NOTE: Listen for set to go off\r\n  if (isAreaQueryDataLoaded == \"success\") {\r\n    console.log('Data Loaded: ', isAreaQueryDataLoaded);\r\n    handleFeatureLayerBuild(areaQueryState, baseMapState);\r\n    // FeatureLayerBuilderComponent(areaQueryState, baseMapState);\r\n  }\r\n\r\n  const queryStartHandler = (date) => {\r\n    // Update State\r\n    console.log('queryStartHandler: ', date);\r\n\r\n    const startDateParsed = Date.parse(date);\r\n    // const startIsoString = date.toISOString().slice(0, -5) + 'Z'\r\n    setStartDate(startDateParsed);\r\n  }\r\n\r\n  const queryEndHandler = (date) => {\r\n    // Update State\r\n    console.log('queryEndHandler: ', date);\r\n\r\n    const endDateParsed = Date.parse(date);\r\n    // const endIsoString = date.toISOString().slice(0, -5) + 'Z'\r\n    setEndDate(endDateParsed);\r\n  }\r\n\r\n  // Component template\r\n  return (\r\n    <React.Fragment>\r\n      <Container id={containerId}>\r\n        <DateRangeContainer id={dateRangeId} className={'esri-widget'}>\r\n          <DateRangeComponent \r\n            startDate={startDate} \r\n            endDate={endDate} \r\n            handleStartQuery={queryStartHandler} \r\n            handleEndQuery={queryEndHandler} \r\n          />\r\n        </DateRangeContainer>\r\n      </Container>\r\n    </React.Fragment> \r\n  )\r\n}\r\n//#endregion\r\n\r\n// const mapStateToProps = state => {  // store.getState();\r\n//   console.log('state: ', state.areaQuery);\r\n//   return {\r\n//     areaQuery: state.areaQuery,\r\n//     securityToken: state.securityToken\r\n//   };\r\n// };\r\n\r\n// ACTION CREATORS\r\n// const buildFeatureLayerCreator = (options) => ({ type: 'BUILD_FEATURE_LAYER', payload: options });\r\n\r\n// const actionCreators = { buildFeatureLayerCreator }\r\n\r\nexport default Map;\r\n// export default connect(null, mapDispatchToProps)(Map);\r\n// export default connect(\r\n//   null,\r\n//   actionCreators\r\n// )(Map);\r\n ","import { loadModules } from \"esri-loader\";\r\n\r\nexport function loadMap(element, mapConfig, loaderConfig) {\r\n  // TODO: Refactor by importing as ES Modules per ArcGIS JS API v4.18\r\n  // TODO: Refactor all Esri 'widget' constructors / instances to live here  \r\n  return loadModules([\"esri/Map\", \"esri/views/MapView\", \"esri/layers/GraphicsLayer\"], loaderConfig)\r\n    .then(([Map, MapView, GraphicsLayer]) => {\r\n            \r\n      const layer = new GraphicsLayer();\r\n\r\n      // Component or app was likely destroyed // TODO: Error handling needed\r\n      if (!element) return;\r\n\r\n      // Create the Map\r\n      const map = new Map(mapConfig);\r\n\r\n      // Show the map at the element\r\n      let view = new MapView({\r\n        map,\r\n        container: element,\r\n        layers: [layer],\r\n        ...mapConfig\r\n      });\r\n\r\n      // _TODO: Possible home for `FeatureLayerBuilder`\r\n      \r\n      // Wait for the view to load // NOTE: may not need this?\r\n      return view.when(() => {\r\n        // Return a reference to the view\r\n        return view;\r\n      });\r\n  });\r\n}\r\n","//#region [copyright]\r\n// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.​\r\n//#endregion\r\n\r\n//#region [imports]\r\n// React\r\nimport React, { Profiler, Suspense, useRef } from \"react\";\r\n// import { NavLink } from \"react-router-dom\";\r\n\r\n// Redux\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { mapLoaded } from \"../redux/reducers/map\";\r\nimport { startAuth, logout } from \"../redux/reducers/auth\";\r\n\r\n// Components\r\nimport Button from \"calcite-react/Button\";\r\nimport TopNav from \"calcite-react/TopNav\";\r\nimport TopNavBrand from \"calcite-react/TopNav/TopNavBrand\";\r\nimport TopNavTitle from \"calcite-react/TopNav/TopNavTitle\";\r\nimport TopNavList from \"calcite-react/TopNav/TopNavList\";\r\nimport TopNavLink from \"calcite-react/TopNav/TopNavLink\";\r\nimport SubNav from \"calcite-react/SubNav\";\r\nimport SubNavTitle from \"calcite-react/SubNav/SubNavList\";\r\nimport SubNavList from \"calcite-react/SubNav/SubNavList\";\r\nimport SubNavLink from \"calcite-react/SubNav/SubNavLink\";\r\n\r\nimport LoadScreen from \"./LoadScreen\";\r\nimport UserAccount from \"./UserAccount\";\r\nimport MapComponent from \"./esri/map/Map\";\r\n\r\n// import DateRangeWidget from \"./esri/widgets/DateRangeWidget\";\r\n// import DateRangeExpandWidget from \"./esri/widgets/DateRangeExpandWidget\";\r\nimport {\r\n  CalciteP,\r\n  CalciteA,\r\n  CalciteH1,\r\n  CalciteH2,\r\n  CalciteH3,\r\n  CalciteH4,\r\n  CalciteH5,\r\n  CalciteH6,\r\n  CalciteOl,\r\n  CalciteUl,\r\n  CalciteLi\r\n} from 'calcite-react/Elements'\r\n\r\n// TODO: Replace QP logo with SVG format\r\nimport logo from \"../styles/images/quiet-professionals-logo.png\";\r\n\r\n// Icons\r\nimport { DataIcon } from \"calcite-ui-icons-react/DataIcon\";\r\nimport { GraphScatterPlotIcon as AmpdIcon } from \"calcite-ui-icons-react/GraphScatterPlotIcon\";\r\nimport { GearIcon } from \"calcite-ui-icons-react/GearIcon\";\r\n\r\n// Styled Components\r\nimport styled from \"styled-components\";\r\nimport SubNavActions from \"calcite-react/SubNav/SubNavActions\";\r\n// import Devices from \"../utils/devices\";\r\n//#endregion\r\n\r\n//#region [styles]\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  text-align: center;\r\n`;\r\n\r\nconst MapWrapper = styled.div`\r\n  display: flex;\r\n  flex: 1;\r\n  flex-direction: column;\r\n  position: relative;\r\n  z-index: 0;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst Logo = styled(TopNavBrand)`\r\n  justify-content: center;\r\n  & img {\r\n    height: 55px;\r\n  }\r\n`;\r\n\r\nconst Nav = styled(TopNav)`\r\n  && {\r\n    z-index: 5;\r\n  }\r\n`;\r\n\r\nconst NavList = styled(TopNavList)`\r\n  text-align: inherit;\r\n`;\r\n\r\nconst SubNavToolbar = styled(SubNav)`\r\n  height: 40px;\r\n  div { height: 40px; }\r\n`;\r\n//#endregion\r\n\r\n//#region [component]\r\nconst Main = props => {\r\n  const auth = useSelector(state => state.auth);\r\n  const config = useSelector(state => state.config);\r\n  const user = useSelector(state => state.auth.user);\r\n  const isMapLoaded = useSelector(state => state.map.loaded);\r\n  const elementRef = useRef();\r\n  const dispatch = useDispatch();\r\n\r\n  // Sign in button click event\r\n  console.log(\"Main > just before signIn() )\");\r\n  const signIn = () => {\r\n    const { clientId, sessionId, popup } = config;\r\n    console.log(\"Main > signIn() > just before dispatch(startAuth())\");\r\n    dispatch(\r\n      startAuth({\r\n        clientId,\r\n        sessionId,\r\n        popup,\r\n        signInRequest: true\r\n      })\r\n    );\r\n  }\r\n\r\n  // Sign out button click event\r\n  const signOut = () => {\r\n    console.log(\"Main > signOut() > just before dispatch(logout())\");\r\n    dispatch(logout(config.sessionId));\r\n  }\r\n  // #region [utils] \r\n  // Performance Benchmarks\r\n  function callback(\r\n    id, \r\n    phase, \r\n    actualTime, \r\n    baseTime, \r\n    startTime, \r\n    commitTime) \r\n  {\r\n    console.log(\"Main > callback()\");\r\n    console.dir(\r\n      \"id: \" + id,\r\n      \"phase:\" + phase,\r\n      \"actualTime:\" + actualTime,\r\n      \"baseTime: \" + baseTime,\r\n      \"startTime: \" + startTime,\r\n      \"commitTime: \" + commitTime\r\n    )\r\n  }\r\n  // #endregion\r\n  return (\r\n    <Container>\r\n      {/* // IDEA: Consider using `React.Suspense` in place of current `LoadScreen` component */}\r\n      <LoadScreen isLoading={!isMapLoaded} />\r\n\r\n      {/* // TODO: Udate Current Nav or possibly extend Calcite TopNav */}\r\n      {/* <Profiler id=\"Nav\" onRender={callback}> */}\r\n      <Nav>\r\n        <Logo href=\"#\" src={logo} />\r\n        <TopNavTitle href=\"#\">Welcome to GAVEL</TopNavTitle>\r\n        { (!user)\r\n          ? <NavList>\r\n              <TopNavLink href=\"/\">\r\n                Get AMPD\r\n              </TopNavLink>\r\n              <TopNavLink href=\"/\">\r\n                Features\r\n              </TopNavLink>\r\n              <TopNavLink href=\"/\">\r\n                About QP\r\n              </TopNavLink> \r\n            </NavList>\r\n          : <NavList>\r\n              <TopNavLink href=\"https://github.com/Quiet-Professionals-LLC/qp-ampd-app\" target=\"_blank\">\r\n                AMPD Repo\r\n              </TopNavLink>\r\n              <TopNavLink href=\"https://github.com/Esri/esri-react-boot/wiki\" target=\"_blank\">\r\n                Docs\r\n              </TopNavLink>\r\n              <TopNavLink href=\"https://calcite-react.netlify.com/\" target=\"_blank\">\r\n                Calcite-React\r\n              </TopNavLink>\r\n            </NavList> \r\n        }\r\n\r\n        <UserAccount\r\n          user={auth.user}\r\n          portal={auth.portal}\r\n          token={auth.token}\r\n          loggedIn={auth.loggedIn}\r\n          signIn={signIn}\r\n          signOut={signOut}\r\n        />\r\n      </Nav>\r\n      {/* </Profiler> */}\r\n\r\n      <SubNavToolbar>\r\n        <SubNavTitle></SubNavTitle>\r\n        <SubNavList>\r\n          <SubNavLink active >Queries</SubNavLink>\r\n          <SubNavLink href=\"#\">History</SubNavLink>\r\n          <SubNavLink href=\"#\">Config</SubNavLink>\r\n        </SubNavList>\r\n        \r\n      </SubNavToolbar>\r\n\r\n      <MapWrapper>\r\n        {/* //! WARN: Determine if Suspense should be left out (experimental feature) */}\r\n        {/* <Profiler id=\"MapProfile\" onRender={callback}> */}\r\n        <Suspense fallback={<div>Loading Maps...</div>}>\r\n          {/* <Profiler id=\"MapComponent\" onRender={callback}> */}\r\n          <MapComponent\r\n            onMapLoaded={mapLoaded}\r\n            mapConfig={config.mapConfig}\r\n            loaderConfig={config.loaderConfig}a\r\n          />\r\n          {/* </Profiler> */}\r\n\r\n        </Suspense>\r\n\r\n        {/* </Profiler> */}\r\n\r\n      </MapWrapper>\r\n\r\n    </Container>\r\n  );\r\n  \r\n}\r\n\r\nexport default Main;\r\n//#endregion","\r\n//#region [copyright]\r\n// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.​\r\n//#endregion\r\n\r\n/** -------------------------------------------------------------- ->\r\n *  ┌────────────────────────────────────┐\r\n *  │ |> GAVEL - GAVEL Web Application   │\r\n *  └────────────────────────────────────┘\r\n *\r\n *  @name: 'Gavel - Anonymized marshalling of mobile device data'\r\n *  @description: 'Express API / Server in support of GAVEL'\r\n *  @implements: 'Custom RESTful API'\r\n *  @author: '@quiet-professionals-jsingletary'\r\n *  @copyright: 'Quiet Professionals LLC'\r\n *\r\n*/\r\n\r\n//#region [imports]\r\n// React\r\nimport React, { useEffect, useState, Profiler } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\n\r\n// Redux\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { fetchConfig, updateConfig } from \"../redux/reducers/config\";\r\nimport { checkAuth, startAuth, completeAuth } from \"../redux/reducers/auth\";\r\nimport { setSecurityToken } from \"../redux/reducers/security-token\";\r\n\r\n// Axios\r\n// import axios from \"axios\";\r\n\r\n// Components\r\nimport LoadScreen from \"./LoadScreen\";\r\n// import Devices from \"../utils/devices\";\r\nimport Main from \"./Main\";\r\n\r\n//#endregion\r\n\r\n//#region [component]\r\n// Component definition\r\nconst App = props => {\r\n\r\n  // we'll use the url to determin sign-in state\r\n  const { pathname } = props.location;\r\n\r\n  console.log('Pathname', props);\r\n\r\n  // redux store state\r\n  const user = useSelector(state => state.auth.user);\r\n  const config = useSelector(state => state.config);\r\n  const securityToken = useSelector(state => state.securityToken);\r\n  const dispatch = useDispatch();\r\n  ////const [jsonData, setJsonData] = useState({});\r\n  \r\n  // Venntel API\r\n  // const securityTokenUrl = \"https://staging-bs-api.venntel.com/v1.5/securityToken\";\r\n  // const securityTokenUrl = \"http://localhost:5000/api/location-data\";\r\n  // const searchURL = \"https://staging-bs-api.venntel.com/v1.5/locationData/search\";\r\n  // const headers = {\r\n  //   'Content-Type': 'application/json',\r\n  //   'Accept': 'application/json',\r\n  //   'Authorization': '995dba95-c33d-456b-a7ea-3fd512e60894'\r\n  // };\r\n\r\n  // when the component mounts request the config and load it into the Redux state\r\n  useEffect(() => {\r\n    dispatch(fetchConfig());\r\n  }, []);\r\n\r\n  // once the component mounts and the config loads, check if we have a saved session\r\n  useEffect(() => {\r\n    // if the config isn't yet loaded then skip this effect\r\n    if (!config.loaded) return;\r\n\r\n    const { portalUrl, clientId, sessionId, dojoConfig } = config;\r\n    // Esri specific\r\n    window.dojoConfig = dojoConfig;\r\n\r\n    dispatch(checkAuth({ portalUrl, clientId, sessionId }));\r\n  }, [config]);\r\n\r\n  // if there's no stored session, we'll watch the url path to see if we need to kick off an authentication\r\n  // this can happen automatically with a portalUrl property in the config\r\n  // or if the user requests a login through an event\r\n  useEffect(() => {\r\n    // if the config isn't yet loaded then skip this effect\r\n    if (!config.loaded) return;\r\n    const { portalUrl, clientId, sessionId } = config;\r\n\r\n    // INIT: Esri Authentication\r\n    // we'll start the authentication here and it will return here to complete\r\n    if (pathname !== \"/auth\") {\r\n      if (portalUrl && !user) {\r\n        dispatch(startAuth({ portalUrl, clientId, sessionId }));\r\n      }\r\n    } else if (pathname === \"/auth\" && !user) {\r\n      dispatch(completeAuth({ portalUrl, clientId, sessionId }));\r\n    }\r\n  }, [user, pathname, config]);\r\n\r\n  // TODO: Move this dispatch and init before `sendAreaQuery()` is called.\r\n  useEffect(() => {\r\n    if (securityToken.isValid) return;\r\n    dispatch(setSecurityToken());\r\n  }, [securityToken]);\r\n\r\n  // set a halt state to allow the authentication process to complete before\r\n  // we redirect to the main component\r\n  let signInRequested = true; // _CODE: Should this `identifier` be moved to local/global state?\r\n  if (pathname === \"/auth\") {\r\n    signInRequested = true;\r\n  }\r\n\r\n  // RENDER RETURN\r\n  // app is initializing for the following reasons, show the load screen\r\n  // 1. config is not yet loaded\r\n  // 2. authentication is required but there is no user information\r\n  // 3. authentication is not required but user has requested to sign-in\r\n  // IDEA: Discuss using `React.Suspense` in favor of `isLoaded` attribute\r\n  if (!config.loaded || ((config.portalUrl && !user) || (signInRequested && !user))) {\r\n    return <LoadScreen isLoaded={false} />;\r\n  }\r\n  \r\n  // App is initialized and user is authenticated if needed, route to main component\r\n  return (\r\n    <>\r\n      <Route path=\"/main\" component={Main} />\r\n      <Redirect to=\"/main\" />\r\n    </>\r\n  );\r\n};\r\n//#endregion\r\n\r\nexport default App;\r\n","// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.​\r\n\r\nimport { createGlobalStyle } from \"styled-components\";\r\n\r\n// Global page styling\r\n// override AGIS JS API Widgets here\r\nexport const GlobalStyle = createGlobalStyle`\r\n  html,\r\n  body {\r\n    height: 100%;\r\n    font-family: Montserrat, sans-serif;\r\n  }\r\n\r\n  body {\r\n    margin: 0;\r\n    padding: 0;\r\n    font-weight: 300;\r\n    letter-spacing: 1px;\r\n    font-size: 16px;\r\n  }\r\n\r\n  .esri-layer-list__item{\r\n    &::before {\r\n      width: 100%;\r\n      left: 0;\r\n    }\r\n  }\r\n\r\n  nav.ciBUMa {\r\n    padding: 0 1em;\r\n  }\r\n`;\r\n","//#region [copyright]\r\n// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.​\r\n//#endregion\r\n\r\n//#region [imports]\r\n// Polyfills\r\n// import \"@babel/polyfill\";\r\n\r\n// React\r\nimport React, { useContext } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\n// React Router\r\nimport { BrowserRouter, Route } from \"react-router-dom\";\r\n\r\n// Redux\r\nimport { Provider } from \"react-redux\";\r\nimport { initStore } from \"./redux/store\";\r\n\r\n// Components\r\nimport { homepage } from \"../package.json\";\r\nimport App from \"./components/App\";\r\n\r\n// Utils\r\nrequire('dotenv').config();\r\n\r\n// Styles\r\nimport \"./styles/fonts.css\";\r\nimport CalciteThemeProvider from \"calcite-react/CalciteThemeProvider\";\r\nimport { GlobalStyle } from \"./styles/global\";\r\nimport \"@arcgis/core/assets/esri/themes/light-blue/main.css\";\r\n\r\n//#endregion\r\n\r\n// reportWebVitals(console.log);\r\n\r\n/*/ -------------------------------------------------------------- ->\r\n *  ┌──────────────────────────────────────┐  \r\n *  │ |> Homepage / Entry Point Settings   │\r\n *  └──────────────────────────────────────┘\r\n *  !! App runs at the root locally, but under ${homepage} in prod\r\n *  !! ${homepage} can be adjusted in `../package.json`\r\n * \r\n/*/\r\n// --App runs at the root locally, but under /{homepage} in production\r\nlet basename = null;\r\nprocess.env.NODE_ENV !== \"production\" ? (basename = \".\") : (basename = homepage);\r\n\r\nconsole.log('NODE_ENV: ', process.env.NODE_ENV);\r\nconsole.log('basename: ', basename);\r\n\r\n// Create Redux Store\r\nexport const store = initStore();\r\n\r\n// App Entry Point\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <BrowserRouter basename={basename}>\r\n      <CalciteThemeProvider>\r\n        <GlobalStyle />\r\n        <Route path=\"/\" component={App} />\r\n      </CalciteThemeProvider>\r\n    </BrowserRouter>\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n","//#region [copyright]\r\n// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.​\r\n//#endregion\r\n\r\n/**-------------------------------------------------------------\r\n *  #Configure and create the Redux here\r\n *  ~~Includes Saga\r\n *  @type {Object} This is the store object that Redux\r\n * \r\n*/\r\n\r\n/**-------------------------------------------------------------- ->\r\n *  ┌─────────────────────────────────────┐\r\n *  │ |> Redux - Single-Source of Truth   │\r\n *  └─────────────────────────────────────┘\r\n *\r\n *  @name: 'Gavel - Anonymized marshalling of mobile device data'\r\n *  @description: 'Centralizing your application's logics and state persistence.'\r\n *  @author: '@quiet-professionals-jsingletary'\r\n *  @copyright: 'Quiet Professionals LLC'\r\n *\r\n*/\r\n\r\n// REDUX IMPORTS //\r\nimport { applyMiddleware, combineReducers, compose, createStore } from 'redux';\r\nimport createSagaMiddleware from 'redux-saga';\r\nimport rootSaga from './sagas/index';\r\n\r\nimport * as reducers from './';\r\nimport { watcherSaga } from './sagas/root-saga';\r\n\r\nexport function initStore() {\r\n  // Setup Redux dev tools\r\n  // NOTE: Redux Devtool issue - see https://github.com/zalmoxisus/redux-devtools-extension/issues/619\r\n  // TODO: Look into this 'Enhancer' to see if this workaround is still needed.\r\n  const composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\n  // Setup Redux store\r\n  const rootReducer = combineReducers(reducers);\r\n  const sagaMiddleware = createSagaMiddleware();\r\n\r\n  // Add additional middleware to the `middleware` array\r\n  const middleware = [sagaMiddleware];\r\n\r\n  const store = createStore(\r\n    rootReducer,\r\n    composeEnhancer(applyMiddleware(...middleware))\r\n  );\r\n\r\n  // Run sagas\r\n  sagaMiddleware.run(rootSaga);\r\n  sagaMiddleware.run(watcherSaga); // TODO: This watcherSaga() to be merged into rootSaga() ./index.js\r\n\r\n  return store;\r\n}\r\n"],"sourceRoot":""}