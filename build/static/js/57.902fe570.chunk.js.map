{"version":3,"sources":["../node_modules/@arcgis/core/geometry/support/normalizeUtilsSync.js","../node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js","../node_modules/@arcgis/core/layers/graphics/data/BoundsStore.js","../node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js","../node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js","../node_modules/@arcgis/core/views/interactive/snapping/candidates/EdgeSnappingCandidate.js","../node_modules/@arcgis/core/views/interactive/snapping/candidates/VertexSnappingCandidate.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/queryEngineUtils.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/GraphicsSnappingSource.js"],"names":["l","r","type","toJSON","f","spatialReference","h","n","J","d","isWebMercator","I","a","maxX","g","minX","b","plus180Line","v","minus180Line","N","m","y","s","points","map","e","p","x","o","M","i","xmin","ymin","xmax","ymax","c","t","u","j","cut","valid","frameId","push","extent","frameIds","length","rings","Array","isArray","Math","ceil","abs","this","closed","minPts","paths","compareMinX","compareMinY","toBBox","_maxEntries","max","_minEntries","_initFormat","clear","prune","X","Y","B","_all","data","children","leaf","pop","insert","_build","slice","height","_splitRoot","_insert","indexHint","splice","_condense","pushArray","log","sqrt","min","_chooseSubtree","_split","_adjustParentBBoxes","_chooseSplitAxis","_chooseSplitIndex","console","_allDistMargin","sort","Function","join","minY","maxY","deallocator","w","arguments","_indexInvalid","_boundsToLoad","_boundsById","Map","_idByBounds","_index","_loadIndex","size","forEach","load","filter","has","get","remove","search","set","getObjectId","objectId","getAttributes","attributes","getAttribute","cloneWithGeometry","getGeometry","geometry","getCentroid","centroid","hasZ","hasM","geometryInfo","_boundsStore","_featuresById","_markedIds","Set","events","featureAdapter","geometryType","numFeatures","coords","featureCount","vertexCount","_add","_emitChanged","_remove","invalidateIndex","forEachInBounds","emit","add","displayId","onFeatureAdd","getLogger","error","feature","onFeatureRemove","constraint","coordinateHelper","edgeStart","edgeEnd","start","end","targetPoint","fromPoint","target","O","availability","sources","multipoint","point","polygon","polyline","loadedWkids","loadedWkts","pendingAdds","updatingHandles","updating","layerSource","layer","task","abort","mapSources","destroySource","handles","on","onGraphicUpdate","addOnCollectionChange","graphics","onGraphicsChanged","addMany","toArray","queryEngine","executeQueryForSnapping","toPoint","distance","types","query","createQuery","where","then","candidates","flat","k","S","property","graphic","removed","added","needsInitializeProjection","uid","createPendingAdd","source","dest","signal","markLoadedSpatialReferences","addPromise","promise","wkid","wkt","visible","fromExtent","ensureSource","createOptimizedFeature","featureStore","createSource","fields","name","alias","objectIdField","scheduler","view","resourceController","removeFromSource","removeById","destroy","constructOnly","prototype","readOnly"],"mappings":"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","file":"static/js/57.902fe570.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{getInfo as n}from\"./spatialReferenceUtils.js\";import{extentIntersectsPolyline as t}from\"./intersects.js\";import{getBoundsXY as i}from\"./boundsUtils.js\";import{isPoint as m,isMultipoint as s,isExtent as e,isPolygon as x,isPolyline as o}from\"./jsonUtils.js\";import{create as r}from\"./aaBoundingRect.js\";import{cutParams as a,getGeometryParts as f,offsetMagnitude as c}from\"./normalizeUtilsCommon.js\";function l(r){if(!r)return null;if(\"mesh\"===r.type)return r.toJSON();let f=null;const l=r.spatialReference,h=n(l);if(!h)return r.toJSON();const d=l.isWebMercator?102100:4326,I=a[d].maxX,g=a[d].minX,b=a[d].plus180Line,v=a[d].minus180Line;let J;const N=r.toJSON();if(m(N))J=y(N,I,g);else if(s(N))N.points=N.points.map((n=>y(n,I,g))),J=N;else if(e(N))J=p(N,h);else if(x(N)||o(N)){const n=M;i(n,N);const m={xmin:n[0],ymin:n[1],xmax:n[2],ymax:n[3]},s=c(m.xmin,g)*(2*I),e=0===s?N:u(N,s);m.xmin+=s,m.xmax+=s,t(m,b)&&m.xmax!==I||t(m,v)&&m.xmin!==g?f=e:J=e}else J=r.toJSON();if(null!==f){return(new j).cut(f,I)}return J}function u(n,t){const i=f(n);for(const m of i)for(const n of m)n[0]+=t;return n}function p(n,t){if(!t)return n;const i=h(n,t).map((n=>n.extent));return i.length<2?i[0]||n:i.length>2?(n.xmin=t.valid[0],n.xmax=t.valid[1],n):{rings:i.map((n=>[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]))}}function y(n,t,i){if(Array.isArray(n)){const m=n[0];if(m>t){const i=c(m,t);n[0]=m+i*(-2*t)}else if(m<i){const t=c(m,i);n[0]=m+t*(-2*i)}}else{const m=n.x;if(m>t){const i=c(m,t);n.x+=i*(-2*t)}else if(m<i){const t=c(m,i);n.x+=t*(-2*i)}}return n}function h(n,t){const i=[],{ymin:m,ymax:s}=n,e=n.xmax-n.xmin,x=n.xmin,o=n.xmax;let r;const[a,f]=t.valid;r=d(n.xmin,t);const c=r.x,l=r.frameId;r=d(n.xmax,t);const u=r.x,p=r.frameId,y=c===u&&e>0;if(e>2*f){const n={xmin:x<o?c:u,ymin:m,xmax:f,ymax:s},t={xmin:a,ymin:m,xmax:x<o?u:c,ymax:s},e={xmin:0,ymin:m,xmax:f,ymax:s},r={xmin:a,ymin:m,xmax:0,ymax:s},y=[],h=[];I(n,e)&&y.push(l),I(n,r)&&h.push(l),I(t,e)&&y.push(p),I(t,r)&&h.push(p);for(let i=l+1;i<p;i++)y.push(i),h.push(i);i.push({extent:n,frameIds:[l]},{extent:t,frameIds:[p]},{extent:e,frameIds:y},{extent:r,frameIds:h})}else c>u||y?i.push({extent:{xmin:c,ymin:m,xmax:f,ymax:s},frameIds:[l]},{extent:{xmin:a,ymin:m,xmax:u,ymax:s},frameIds:[p]}):i.push({extent:{xmin:c,ymin:m,xmax:u,ymax:s},frameIds:[l]});return i}function d(n,t){const[i,m]=t.valid,s=2*m;let e,x=0;return n>m?(e=Math.ceil(Math.abs(n-m)/s),n-=e*s,x=e):n<i&&(e=Math.ceil(Math.abs(n-i)/s),n+=e*s,x=-e),{x:n,frameId:x}}function I(n,t){const{xmin:i,ymin:m,xmax:s,ymax:e}=t;return g(n,i,m)&&g(n,i,e)&&g(n,s,e)&&g(n,s,m)}function g(n,t,i){return t>=n.xmin&&t<=n.xmax&&i>=n.ymin&&i<=n.ymax}class j{cut(n,t){let i;if(n.rings)this.closed=!0,i=n.rings,this.minPts=4;else{if(!n.paths)return null;this.closed=!1,i=n.paths,this.minPts=2}const m=i.length,s=-2*t;for(let e=0;e<m;e++){const n=i[e];if(n&&n.length>=this.minPts){const t=[];for(const i of n)t.push([i[0]+s,i[1]]);i.push(t)}}return this.closed?n.rings=i:n.paths=i,n}}const M=r();export{l as normalizeCentralMeridianSync};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{assumeNonNull as t}from\"../../maybe.js\";import{indexOf as i,PositionHint as n}from\"../../arrayUtils.js\";import e from\"../../PooledArray.js\";import{q as s}from\"../../../chunks/quickselect.js\";class h{constructor(t=9,i){this.compareMinX=l,this.compareMinY=c,this.toBBox=function(t){return t},this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&(\"function\"==typeof i?this.toBBox=i:this._initFormat(i)),this.clear()}destroy(){this.clear(),M.prune(),X.prune(),Y.prune(),B.prune()}all(t){this._all(this.data,t)}search(t,i){let n=this.data;const e=this.toBBox;if(p(t,n))for(M.clear();n;){for(let s=0,h=n.children.length;s<h;s++){const h=n.children[s],a=n.leaf?e(h):h;p(t,a)&&(n.leaf?i(h):x(t,a)?this._all(h,i):M.push(h))}n=M.pop()}}collides(t){let i=this.data;const n=this.toBBox;if(!p(t,i))return!1;for(M.clear();i;){for(let e=0,s=i.children.length;e<s;e++){const s=i.children[e],h=i.leaf?n(s):s;if(p(t,h)){if(i.leaf||x(t,h))return!0;M.push(s)}}i=M.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}let i=this._build(t.slice(0,t.length),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const t=this.data;this.data=i,i=t}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=new b([]),this}remove(n){if(!n)return this;let e,s=this.data,h=null,a=0,r=!1;const o=this.toBBox(n);for(Y.clear(),B.clear();s||Y.length>0;){var l;if(!s)s=t(Y.pop()),h=Y.data[Y.length-1],a=null!=(l=B.pop())?l:0,r=!0;if(s.leaf&&(e=i(s.children,n,s.children.length,s.indexHint),-1!==e))return s.children.splice(e,1),Y.push(s),this._condense(Y),this;r||s.leaf||!x(s,o)?h?(a++,s=h.children[a],r=!1):s=null:(Y.push(s),B.push(a),a=0,h=s,s=s.children[0])}return this}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,i){let n=t;for(X.clear();n;){var e;if(!0===n.leaf)for(const t of n.children)i(t);else X.pushArray(n.children);n=null!=(e=X.pop())?e:null}}_build(t,i,n,e){const s=n-i+1;let h=this._maxEntries;if(s<=h){const e=new b(t.slice(i,n+1));return a(e,this.toBBox),e}e||(e=Math.ceil(Math.log(s)/Math.log(h)),h=Math.ceil(s/h**(e-1)));const r=new j([]);r.height=e;const o=Math.ceil(s/h),l=o*Math.ceil(Math.sqrt(h));g(t,i,n,l,this.compareMinX);for(let a=i;a<=n;a+=l){const i=Math.min(a+l-1,n);g(t,a,i,o,this.compareMinY);for(let n=a;n<=i;n+=o){const s=Math.min(n+o-1,i);r.children.push(this._build(t,n,s,e-1))}}return a(r,this.toBBox),r}_chooseSubtree(t,i,n,e){for(;e.push(i),!0!==i.leaf&&e.length-1!==n;){let n,e=1/0,s=1/0;for(let h=0,a=i.children.length;h<a;h++){const a=i.children[h],r=m(a),o=d(t,a)-r;o<s?(s=o,e=r<e?r:e,n=a):o===s&&r<e&&(e=r,n=a)}i=n||i.children[0]}return i}_insert(t,i,n){const e=this.toBBox,s=n?t:e(t);Y.clear();const h=this._chooseSubtree(s,this.data,i,Y);for(h.children.push(t),o(h,s);i>=0&&Y.data[i].children.length>this._maxEntries;)this._split(Y,i),i--;this._adjustParentBBoxes(s,Y,i)}_split(t,i){const n=t.data[i],e=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,e);const h=this._chooseSplitIndex(n,s,e);if(!h)return void console.log(\"  Error: assertion failed at PooledRBush._split: no valid split index\");const r=n.children.splice(h,n.children.length-h),o=n.leaf?new b(r):new j(r);o.height=n.height,a(n,this.toBBox),a(o,this.toBBox),i?t.data[i-1].children.push(o):this._splitRoot(n,o)}_splitRoot(t,i){this.data=new j([t,i]),this.data.height=t.height+1,a(this.data,this.toBBox)}_chooseSplitIndex(t,i,n){let e,s,h;e=s=1/0;for(let a=i;a<=n-i;a++){const i=r(t,0,a,this.toBBox),o=r(t,a,n,this.toBBox),l=f(i,o),c=m(i)+m(o);l<e?(e=l,h=a,s=c<s?c:s):l===e&&c<s&&(s=c,h=a)}return h}_chooseSplitAxis(t,i,n){const e=t.leaf?this.compareMinX:l,s=t.leaf?this.compareMinY:c;this._allDistMargin(t,i,n,e)<this._allDistMargin(t,i,n,s)&&t.children.sort(e)}_allDistMargin(t,i,n,e){t.children.sort(e);const s=this.toBBox,h=r(t,0,i,s),a=r(t,n-i,n,s);let l=u(h)+u(a);for(let r=i;r<n-i;r++){const i=t.children[r];o(h,t.leaf?s(i):i),l+=u(h)}for(let r=n-i-1;r>=i;r--){const i=t.children[r];o(a,t.leaf?s(i):i),l+=u(a)}return l}_adjustParentBBoxes(t,i,n){for(let e=n;e>=0;e--)o(i.data[e],t)}_condense(t){for(let n=t.length-1;n>=0;n--){const e=t.data[n];if(0===e.children.length)if(n>0){const s=t.data[n-1],h=s.children;h.splice(i(h,e,h.length,s.indexHint),1)}else this.clear();else a(e,this.toBBox)}}_initFormat(t){const i=[\"return a\",\" - b\",\";\"];this.compareMinX=new Function(\"a\",\"b\",i.join(t[0])),this.compareMinY=new Function(\"a\",\"b\",i.join(t[1])),this.toBBox=new Function(\"a\",\"return {minX: a\"+t[0]+\", minY: a\"+t[1]+\", maxX: a\"+t[2]+\", maxY: a\"+t[3]+\"};\")}}function a(t,i){r(t,0,t.children.length,i,t)}function r(t,i,n,e,s){s||(s=new b([])),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let h,a=i;a<n;a++)h=t.children[a],o(s,t.leaf?e(h):h);return s}function o(t,i){t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY)}function l(t,i){return t.minX-i.minX}function c(t,i){return t.minY-i.minY}function m(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function f(t,i){const n=Math.max(t.minX,i.minX),e=Math.max(t.minY,i.minY),s=Math.min(t.maxX,i.maxX),h=Math.min(t.maxY,i.maxY);return Math.max(0,s-n)*Math.max(0,h-e)}function x(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function p(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function g(i,n,e,h,a){const r=[n,e];for(;r.length;){const n=t(r.pop()),e=t(r.pop());if(n-e<=h)continue;const o=e+Math.ceil((n-e)/h/2)*h;s(i,o,e,n,a),r.push(e,o,o,n)}}const M=new e,X=new e,Y=new e,B=new e({deallocator:void 0});class _{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class w extends _{constructor(){super(...arguments),this.height=1,this.indexHint=new n}}class b extends w{constructor(t){super(),this.children=t,this.leaf=!0}}class j extends w{constructor(t){super(),this.children=t,this.leaf=!1}}export default h;export{_ as BBox,h as PooledRBush};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport i from\"../../../core/has.js\";import{PooledRBush as s}from\"../../../core/libs/rbush/PooledRBush.js\";const d=5e4,n={minX:0,minY:0,maxX:0,maxY:0};function t(i,s,d){n.minX=s[0],n.minY=s[1],n.maxX=s[2],n.maxY=s[3],i.search(n,d)}class e{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new s(9,i(\"csp-restrictions\")?i=>({minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}):[\"[0]\",\"[1]\",\"[2]\",\"[3]\"]),this._loadIndex=()=>{if(this._indexInvalid){const i=new Array(this._idByBounds.size);let s=0;this._idByBounds.forEach(((d,n)=>{i[s++]=n})),this._indexInvalid=!1,this._index.clear(),this._index.load(i)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter((i=>this._idByBounds.has(i)))),this._boundsToLoad.length=0)}}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(i){const s=this._boundsById.get(i);this._boundsById.delete(i),s&&(this._idByBounds.delete(s),this._indexInvalid||this._index.remove(s))}forEachInBounds(i,s){this._loadIndex(),t(this._index,i,(i=>s(this._idByBounds.get(i))))}get(i){return this._boundsById.get(i)}has(i){return this._boundsById.has(i)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(i,s){if(!this._indexInvalid){const s=this._boundsById.get(i);s&&(this._index.remove(s),this._idByBounds.delete(s))}this._boundsById.set(i,s),s&&(this._idByBounds.set(s,i),this._indexInvalid||(this._boundsToLoad.push(s),this._boundsToLoad.length>d&&this._loadIndex()))}}export{e as BoundsStore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport t from\"../OptimizedFeature.js\";import e from\"../OptimizedGeometry.js\";import{getCentroidOptimizedGeometry as r}from\"../centroid.js\";const o={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(e,r)=>new t(r,e.attributes,null,e.objectId),getGeometry:t=>t.geometry,getCentroid:(t,o)=>(t.centroid||(t.centroid=r(new e,t.geometry,o.hasZ,o.hasM)),t.centroid)};export default o;export{o as optimizedFeatureQueryEngineAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import t from\"../../../core/Logger.js\";import r from\"../../../core/Error.js\";import s from\"../../../core/Evented.js\";import{create as o,NEGATIVE_INFINITY as i}from\"../../../geometry/support/aaBoundingRect.js\";import{getBoundsOptimizedGeometry as a}from\"../featureConversionUtils.js\";import{fromRect as d}from\"../../../geometry/support/aaBoundingBox.js\";import{BoundsStore as n}from\"./BoundsStore.js\";import{optimizedFeatureQueryEngineAdapter as h}from\"./optimizedFeatureQueryEngineAdapter.js\";class u{constructor(e){this.geometryInfo=e,this._boundsStore=new n,this._featuresById=new Map,this._markedIds=new Set,this.events=new s,this.featureAdapter=h}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){if(!this.numFeatures)return null;const e=o(i);return this._featuresById.forEach((t=>{const r=this._boundsStore.get(t.objectId);r&&(e[0]=Math.min(r[0],e[0]),e[1]=Math.min(r[1],e[1]),e[2]=Math.max(r[2],e[2]),e[3]=Math.max(r[3],e[3]))})),e}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t,r){for(const s of e){const e=this._boundsStore.get(s.objectId);e&&t(d(r,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach(((t,r)=>{this._markedIds.has(r)||(e=!0,this._remove(t))})),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit(\"changed\",void 0)}_add(s){if(!s)return;const i=s.objectId;if(null==i)return void t.getLogger(\"esri.layers.graphics.data.FeatureStore\").error(new r(\"featurestore:invalid-feature\",\"feature id is missing\",{feature:s}));const d=this._featuresById.get(i);let n;if(this._markedIds.add(i),d?(s.displayId=d.displayId,n=this._boundsStore.get(i),this._boundsStore.delete(i)):e(this.onFeatureAdd)&&this.onFeatureAdd(s),!s.geometry||!s.geometry.coords||!s.geometry.coords.length)return this._boundsStore.set(i,null),void this._featuresById.set(i,s);n=a(n||o(),s.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(i,n),this._featuresById.set(i,s)}_remove(t){return e(this.onFeatureRemove)&&this.onFeatureRemove(t),this._markedIds.delete(t.objectId),this._boundsStore.delete(t.objectId),this._featuresById.delete(t.objectId),t}}export default u;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{LineSnappingHint as t}from\"../hints/LineSnappingHint.js\";import{FeatureSnappingCandidate as n}from\"./FeatureSnappingCandidate.js\";import{LineConstraint as r}from\"../SnappingConstraint.js\";class e extends n{constructor(t){super({...t,constraint:new r(t.coordinateHelper,t.edgeStart,t.edgeEnd)})}get hints(){return[new t(1,this.constraint.start,this.constraint.end)]}}export{e as EdgeSnappingCandidate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{PointSnappingHint as t}from\"../hints/PointSnappingHint.js\";import{FeatureSnappingCandidate as n}from\"./FeatureSnappingCandidate.js\";import{PointConstraint as r}from\"../SnappingConstraint.js\";class i extends n{constructor(t){super({...t,constraint:new r(t.coordinateHelper,t.targetPoint)})}get hints(){return[new t(this.targetPoint)]}}export{i as VertexSnappingCandidate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{EdgeSnappingCandidate as e}from\"../candidates/EdgeSnappingCandidate.js\";import{VertexSnappingCandidate as t}from\"../candidates/VertexSnappingCandidate.js\";function r(r,n){switch(r.type){case\"edge\":return new e({coordinateHelper:n,edgeStart:n.fromPoint(r.start),edgeEnd:n.fromPoint(r.end),targetPoint:n.fromPoint(r.target),objectId:r.objectId});case\"vertex\":return new t({coordinateHelper:n,targetPoint:n.fromPoint(r.target),objectId:r.objectId})}}export{r as convertSnappingCandidate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import{isSome as t,isNone as r}from\"../../../../core/maybe.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import{removeUnordered as i}from\"../../../../core/arrayUtils.js\";import{eachAlwaysValues as a,createTask as n}from\"../../../../core/promiseUtils.js\";import p from\"../../../../core/Accessor.js\";import d from\"../../../../geometry/Point.js\";import c from\"../../../../geometry/Polygon.js\";import{featureGeometryTypeKebabDictionary as l}from\"../../../../geometry/support/typeUtils.js\";import{initializeProjection as u,canProjectWithoutEngine as h,project as m}from\"../../../../geometry/projection.js\";import y from\"../../../../layers/graphics/OptimizedFeature.js\";import{convertFromGeometry as g}from\"../../../../layers/graphics/featureConversionUtils.js\";import{HandleOwnerMixin as f}from\"../../../../core/HandleOwner.js\";import{sortCandidatesInPlace as S}from\"../snappingUtils.js\";import{normalizeCentralMeridianSync as j}from\"../../../../geometry/support/normalizeUtilsSync.js\";import w from\"../../../../layers/graphics/data/FeatureStore.js\";import v from\"../../../../layers/graphics/data/QueryEngine.js\";import{convertSnappingCandidate as k}from\"./queryEngineUtils.js\";let O=class extends(f(p)){constructor(e){super(e),this.availability=1,this.sources={multipoint:null,point:null,polygon:null,polyline:null},this.loadedWkids=new Set,this.loadedWkts=new Set,this.pendingAdds=[]}get updating(){return this.updatingHandles.updating}get layer(){return this.layerSource.layer}destroy(){const e=this.pendingAdds;this.pendingAdds.length=0;for(const t of e)t.task.abort();this.mapSources((e=>this.destroySource(e)))}initialize(){this.handles.add([this.layer.on(\"graphic-update\",(e=>this.onGraphicUpdate(e))),this.updatingHandles.addOnCollectionChange(this.layer.graphics,(e=>this.onGraphicsChanged(e)))]),this.addMany(this.layer.graphics.toArray())}async fetchCandidates(e,r){const s=(await a(this.mapSources((s=>s.queryEngine.executeQueryForSnapping({point:e.coordinateHelper.toPoint(e.point,new d).toJSON(),distance:e.distance,types:e.types,query:t(e.filter)?e.filter.createQuery().toJSON():{where:\"1=1\"}},r).then((({candidates:e})=>e)))))).flat().map((t=>k(t,e.coordinateHelper)));return S(e.point,s),{candidates:s}}refresh(){}onGraphicUpdate(e){switch(e.property){case\"geometry\":case\"visible\":this.remove(e.graphic),this.addMany([e.graphic])}}onGraphicsChanged(e){for(const t of e.removed)this.remove(t);this.addMany(e.added)}addMany(e){const t=[],s=new Map;for(const o of e)r(o.geometry)||(this.needsInitializeProjection(o.geometry.spatialReference)?(t.push(o.geometry.spatialReference),s.set(o.uid,o)):this.add(o));this.createPendingAdd(t,s)}createPendingAdd(e,t){if(!e.length)return;const r=n((async r=>{await u(e.map((e=>({source:e,dest:this.spatialReference}))),{signal:r}),this.markLoadedSpatialReferences(e);for(const[,e]of t)this.add(e)}));this.updatingHandles.addPromise(r.promise);const s={task:r,graphics:t},o=()=>i(this.pendingAdds,s);r.promise.then(o,o),this.pendingAdds.push(s)}markLoadedSpatialReferences(e){for(const t of e)null!=t.wkid&&this.loadedWkids.add(t.wkid),null!=t.wkt&&this.loadedWkts.add(t.wkt)}add(e){if(r(e.geometry)||!e.visible)return;let s=e.geometry;if(\"mesh\"===s.type)return;\"extent\"===s.type&&(s=c.fromExtent(s));const o=this.ensureSource(s.type);if(r(o))return;const i=this.createOptimizedFeature(e.uid,s);t(i)&&o.featureStore.add(i)}needsInitializeProjection(e){return(null==e.wkid||!this.loadedWkids.has(e.wkid))&&((null==e.wkt||!this.loadedWkts.has(e.wkt))&&!h(e,this.spatialReference))}createOptimizedFeature(e,t){const r=m(j(t),this.spatialReference);return r?new y(g(r,!1,!1),{[b]:e},null,e):null}ensureSource(e){const r=this.sources[e];if(t(r))return r;const s=this.createSource(e);return this.sources[e]=s,s}createSource(e){const r=l.toJSON(e),s=new w({geometryType:r,hasZ:!1,hasM:!1});return{featureStore:s,queryEngine:new v({featureStore:s,fields:[{name:b,type:\"esriFieldTypeOID\",alias:b}],geometryType:r,hasM:!1,hasZ:!1,objectIdField:b,spatialReference:this.spatialReference,scheduler:t(this.view)&&\"3d\"===this.view.type?this.view.resourceController.scheduler:null}),type:e}}remove(e){this.mapSources((t=>this.removeFromSource(t,e)));for(const t of this.pendingAdds)t.graphics.delete(e.uid),0===t.graphics.size&&t.task.abort()}removeFromSource(e,t){const r=t.uid;e.featureStore.has(r)&&e.featureStore.removeById(t.uid)}destroySource(e){e.queryEngine.destroy(),this.sources[e.type]=null}mapSources(e){const{point:r,polygon:s,polyline:o,multipoint:i}=this.sources,a=[];return t(r)&&a.push(e(r)),t(s)&&a.push(e(s)),t(o)&&a.push(e(o)),t(i)&&a.push(e(i)),a}};e([s({constructOnly:!0})],O.prototype,\"spatialReference\",void 0),e([s({constructOnly:!0})],O.prototype,\"layerSource\",void 0),e([s({constructOnly:!0})],O.prototype,\"view\",void 0),e([s({readOnly:!0})],O.prototype,\"updating\",null),e([s({readOnly:!0})],O.prototype,\"availability\",void 0),O=e([o(\"esri.views.interactive.snapping.featureSources.GraphicsSnappingSource\")],O);const b=\"OBJECTID\";export{O as GraphicsSnappingSource};\n"],"sourceRoot":""}