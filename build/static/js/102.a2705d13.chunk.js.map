{"version":3,"sources":["../node_modules/@arcgis/core/views/interactive/GraphicManipulator.js","../node_modules/@arcgis/core/views/draw/support/input/GraphicMoverEvents.js","../node_modules/@arcgis/core/views/draw/support/GraphicMover.js","../node_modules/@arcgis/core/geometry/support/rotate.js","../node_modules/@arcgis/core/views/draw/support/Box.js"],"names":["j","s","getLogger","C","e","layer","interactive","selectable","grabbable","dragging","cursor","events","n","EventEmitter","_circleCollisionCache","_graphicSymbolChangedHandle","_originalSymbol","t","geometry","this","symbol","_set","attachSymbolChanged","error","graphic","elevationInfo","v","o","offset","b","mode","_get","_updateGraphicSymbol","emit","action","detachSymbolChanged","_resetGraphicSymbol","visible","r","l","i","view","type","_intersectDistance2D","_intersectDistance3D","add","remove","watch","focusedSymbol","_focused","f","a","S","originalPoint","equals","spatialReference","y","g","clone","mapPoint","radiusPx","c","size","h","G","toScreen","x","xoffset","p","yoffset","_","toMap","include","d","w","renderSpatialReference","u","state","camera","eye","constructOnly","nonNullable","prototype","readOnly","value","m","index","viewEvent","allGraphics","dx","dy","totalDx","totalDy","defaultPrevented","k","_activeGraphic","_dragEvent","_handles","_hoverGraphic","_initialDragGeometry","_viewHandles","_manipulators","callbacks","onGraphicClick","onGraphicDoubleClick","onGraphicMoveStart","onGraphicMove","onGraphicMoveStop","onGraphicPointerOver","onGraphicPointerOut","onGraphicPointerDown","onGraphicPointerUp","enableMoveAllGraphics","graphics","_setUpManipulators","on","_clickHandler","TOOL","_doubleClickHandler","_pointerDownHandler","_pointerMoveHandler","_pointerUpHandler","_dragHandler","_keyDownHandler","reset","forEach","destroy","removeAll","get","set","_findTargetGraphic","indexOf","stopPropagation","origin","key","Number","MAX_VALUE","intersectionDistance","length","map","EventedAccessor","slice","push","Math","PI","cos","sin","center","rings","xmin","ymin","ymax","xmax","extent","paths","reverse","z","points","R","mover","M","I","angle","E","O","xScale","yScale","L","B","transformGraphics","Y","centerIndicator","style","color","fill","default","outline","outlineColor","join","width","active","stagedColor","handles","vertex","hover","hoverSize","hoverColor","hoverOutlineColor","rotator","rotatorLine","line","N","_activeHandleGraphic","_graphicAttributes","esriSketchTool","_mover","_rotateGraphicOffset","_angleOfRotation","_rotateLineGraphic","_startInfo","_totalDx","_totalDy","_xScale","_yScale","onMoveStart","onMove","onMoveStop","onScaleStart","onScale","onScaleStop","onRotateStart","onRotate","onRotateStop","centerGraphic","backgroundGraphic","enableMovement","enableRotation","enableScaling","handleGraphics","preserveAspectRatio","rotateGraphic","showCenterGraphic","_getBounds","POSITIVE_INFINITY","NEGATIVE_INFINITY","min","max","_setup","_scaleGraphic","_updateGraphics","_updateRotateGraphic","_updateRotateLineGraphic","refresh","_resetGraphics","_reset","concat","includes","_emitMoveStopEvent","_emitScaleStopEvent","_emitRotateStopEvent","_setupGraphics","_setupMover","_resetGraphicStateVars","removeMany","_onGraphicClickCallback","_onGraphicMoveStartCallback","_onGraphicMoveCallback","_onGraphicMoveStopCallback","_onGraphicPointerOverCallback","_onGraphicPointerOutCallback","_getBoxBounds","abs","height","centerX","centerY","startX","startY","graphicInfos","_getGraphicInfos","box","rotate","_getGraphicInfo","symbols","_hideGraphicsBeforeUpdate","_getStartInfo","_emitRotateStartEvent","_emitScaleStartEvent","_emitMoveStartEvent","_emitScaleEvent","_rotateGraphic","_emitRotateEvent","_moveGraphic","_emitMoveEvent","_showGraphicsAfterUpdate","rotation","resolution","transform","_updateX","_updateY","_updateBackgroundGraphic","_hasExtentGraphic","addMany","_updateHandleGraphics","_updateCenterGraphic","_getCoordinates","_updateXY","some","A"],"mappings":"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","file":"static/js/102.a2705d13.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{get as t,isNone as o,isSome as i}from\"../../core/maybe.js\";import s from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as l}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import a from\"../../core/Accessor.js\";import n from\"../../core/Evented.js\";import{pt2px as c,screenPointObjectToArray as h,createScreenPointArray as p}from\"../../core/screenUtils.js\";import{c as m}from\"../../chunks/vec3f64.js\";import{k as u}from\"../../chunks/vec3.js\";import{canProjectWithoutEngine as y,project as g,projectPointToVector as d}from\"../../geometry/projection.js\";import b from\"../../symbols/support/ElevationInfo.js\";import{getDefaultSymbol2D as f}from\"../../symbols/support/defaults.js\";import{j as _}from\"../../chunks/vec2.js\";import{getGraphicEffectiveElevationMode as v}from\"../../support/elevationInfoUtils.js\";import{intersectsDrapedGeometry as S}from\"../support/drapedUtils.js\";const j=s.getLogger(\"esri.views.interactive.GraphicManipulator\");let C=class extends a{constructor(e){super(e),this.layer=null,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.dragging=!1,this.cursor=null,this.events=new n.EventEmitter,this._circleCollisionCache=null,this._graphicSymbolChangedHandle=null,this._originalSymbol=null}set graphic(e){\"mesh\"!==t(e.geometry,\"type\")?(this._circleCollisionCache=null,this._originalSymbol=e.symbol,this._set(\"graphic\",e),this.attachSymbolChanged()):j.error(\"Mesh geometries are not supported\")}get elevationInfo(){const e=\"elevationInfo\"in this.graphic.layer&&this.graphic.layer.elevationInfo,t=v(this.graphic),o=e?e.offset:0;return new b({mode:t,offset:o})}set focusedSymbol(e){e!==this._get(\"focusedSymbol\")&&(this._set(\"focusedSymbol\",e),this._updateGraphicSymbol(),this._circleCollisionCache=null)}grabbableForEvent(){return!0}set grabbing(e){e!==this._get(\"grabbing\")&&(this._set(\"grabbing\",e),this._updateGraphicSymbol())}set hovering(e){e!==this._get(\"hovering\")&&(this._set(\"hovering\",e),this._updateGraphicSymbol())}set selected(e){e!==this._get(\"selected\")&&(this._set(\"selected\",e),this._updateGraphicSymbol(),this.events.emit(\"select-changed\",{action:e?\"select\":\"deselect\"}))}get _focused(){return this._get(\"hovering\")||this._get(\"grabbing\")}destroy(){this.detachSymbolChanged(),this._resetGraphicSymbol(),this._set(\"view\",null)}intersectionDistance(e){const t=this.graphic;if(!1===t.visible)return null;const s=t.geometry;if(o(s))return null;const r=this._get(\"focusedSymbol\"),l=i(r)?r:t.symbol;return\"2d\"===this.view.type?this._intersectDistance2D(this.view,e,s,l):this._intersectDistance3D(this.view,e,t)}attach(){this.attachSymbolChanged(),i(this.layer)&&this.layer.add(this.graphic)}detach(){this.detachSymbolChanged(),this._resetGraphicSymbol(),i(this.layer)&&this.layer.remove(this.graphic)}attachSymbolChanged(){this.detachSymbolChanged(),this._graphicSymbolChangedHandle=this.graphic.watch(\"symbol\",(e=>{i(e)&&e!==this.focusedSymbol&&e!==this._originalSymbol&&(this._originalSymbol=e,this._focused&&i(this.focusedSymbol)&&(this.graphic.symbol=this.focusedSymbol))}),!0)}detachSymbolChanged(){i(this._graphicSymbolChangedHandle)&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)}_updateGraphicSymbol(){this.graphic.symbol=this._focused&&i(this.focusedSymbol)?this.focusedSymbol:this._originalSymbol}_resetGraphicSymbol(){this.graphic.symbol=this._originalSymbol}_intersectDistance2D(e,t,s,r){if(r=r||f(s),o(r))return null;const l=1;let a=this._circleCollisionCache;if(\"point\"!==s.type||\"simple-marker\"!==r.type)return S(t,s,e)?l:null;if(o(a)||!a.originalPoint.equals(s)){const t=s,o=e.spatialReference;if(y(t.spatialReference,o)){const e=g(t,o);a={originalPoint:t.clone(),mapPoint:e,radiusPx:c(r.size)},this._circleCollisionCache=a}}if(i(a)){const o=h(t,G),i=e.toScreen(a.mapPoint),s=a.radiusPx,n=i.x+c(r.xoffset),p=i.y-c(r.yoffset);return _(o,[n,p])<s*s?l:null}return null}_intersectDistance3D(e,t,o){const i=e.toMap(t,{include:[o]});return i&&d(i,w,e.renderSpatialReference)?u(w,e.state.camera.eye):null}};e([r({constructOnly:!0,nonNullable:!0})],C.prototype,\"graphic\",null),e([r({readOnly:!0})],C.prototype,\"elevationInfo\",null),e([r({constructOnly:!0,nonNullable:!0})],C.prototype,\"view\",void 0),e([r({value:null})],C.prototype,\"focusedSymbol\",null),e([r({constructOnly:!0})],C.prototype,\"layer\",void 0),e([r()],C.prototype,\"interactive\",void 0),e([r()],C.prototype,\"selectable\",void 0),e([r()],C.prototype,\"grabbable\",void 0),e([r({value:!1})],C.prototype,\"grabbing\",null),e([r()],C.prototype,\"dragging\",void 0),e([r()],C.prototype,\"hovering\",null),e([r({value:!1})],C.prototype,\"selected\",null),e([r()],C.prototype,\"cursor\",void 0),C=e([l(\"esri.views.interactive.GraphicManipulator\")],C);const w=m(),G=p();export{C as GraphicManipulator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nclass t{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-click\"}}class i{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-double-click\"}}class s{constructor(t,i,s,h,e,r,c,a,n,p){this.graphic=t,this.allGraphics=i,this.index=s,this.x=h,this.y=e,this.dx=r,this.dy=c,this.totalDx=a,this.totalDy=n,this.viewEvent=p,this.defaultPrevented=!1,this.type=\"graphic-move-start\"}preventDefault(){this.defaultPrevented=!0}}class h{constructor(t,i,s,h,e,r,c,a,n,p){this.graphic=t,this.allGraphics=i,this.index=s,this.x=h,this.y=e,this.dx=r,this.dy=c,this.totalDx=a,this.totalDy=n,this.viewEvent=p,this.defaultPrevented=!1,this.type=\"graphic-move\"}preventDefault(){this.defaultPrevented=!0}}class e{constructor(t,i,s,h,e,r,c,a,n,p){this.graphic=t,this.allGraphics=i,this.index=s,this.x=h,this.y=e,this.dx=r,this.dy=c,this.totalDx=a,this.totalDy=n,this.viewEvent=p,this.defaultPrevented=!1,this.type=\"graphic-move-stop\"}preventDefault(){this.defaultPrevented=!0}}class r{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-over\"}}class c{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-out\"}}class a{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-down\"}}class n{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-up\"}}export{t as GraphicClickEvent,i as GraphicDoubleClickEvent,h as GraphicMoveEvent,s as GraphicMoveStartEvent,e as GraphicMoveStopEvent,a as GraphicPointerDownEvent,c as GraphicPointerOutEvent,r as GraphicPointerOverEvent,n as GraphicPointerUpEvent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{clone as t}from\"../../../core/lang.js\";import{isSome as e}from\"../../../core/maybe.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import a from\"../../../core/Evented.js\";import o from\"../../../core/Handles.js\";import{watch as h,whenOnce as c}from\"../../../core/watchUtils.js\";import{ViewEventPriorities as n}from\"../../input/InputManager.js\";import{createScreenPointFromEvent as p}from\"../../support/screenUtils.js\";import{cloneMove as l}from\"./drawUtils.js\";import{GraphicManipulator as v}from\"../../interactive/GraphicManipulator.js\";import{GraphicClickEvent as d,GraphicDoubleClickEvent as g,GraphicPointerDownEvent as _,GraphicPointerUpEvent as m,GraphicPointerOutEvent as G,GraphicMoveStartEvent as u,GraphicMoveEvent as y,GraphicMoveStopEvent as f,GraphicPointerOverEvent as w}from\"./input/GraphicMoverEvents.js\";let k=class extends a.EventedAccessor{constructor(i){super(i),this._activeGraphic=null,this._dragEvent=null,this._handles=new o,this._hoverGraphic=null,this._initialDragGeometry=null,this._viewHandles=new o,this._manipulators=[],this.type=\"graphic-mover\",this.callbacks={onGraphicClick(){},onGraphicDoubleClick(){},onGraphicMoveStart(){},onGraphicMove(){},onGraphicMoveStop(){},onGraphicPointerOver(){},onGraphicPointerOut(){},onGraphicPointerDown(){},onGraphicPointerUp(){}},this.enableMoveAllGraphics=!1,this.graphics=[],this.view=null}initialize(){this._setUpManipulators(),this._handles.add([h(this,[\"graphics\",\"graphics.length\"],(()=>{this._setUpManipulators()})),c(this,\"view.ready\",(()=>{this._viewHandles.add([this.view.on(\"immediate-click\",(i=>this._clickHandler(i)),n.TOOL),this.view.on(\"double-click\",(i=>this._doubleClickHandler(i)),n.TOOL),this.view.on(\"pointer-down\",(i=>this._pointerDownHandler(i)),n.TOOL),this.view.on(\"pointer-move\",(i=>this._pointerMoveHandler(i)),n.TOOL),this.view.on(\"pointer-up\",(i=>this._pointerUpHandler(i)),n.TOOL),this.view.on(\"drag\",(i=>this._dragHandler(i)),n.TOOL),this.view.on(\"key-down\",(i=>this._keyDownHandler(i)),n.TOOL)])}))])}destroy(){this.reset(),this._manipulators.forEach((i=>i.destroy())),this._manipulators=null,this._viewHandles.removeAll(),this._handles.removeAll()}get state(){const i=!!this.get(\"view.ready\"),t=!!this.get(\"graphics.length\"),e=this._activeGraphic;return i&&t?e?\"moving\":\"active\":i?\"ready\":\"disabled\"}reset(){this._activeGraphic=null,this._hoverGraphic=null,this._dragEvent=null}updateGeometry(i,t){const e=this.graphics[i];e&&e.set(\"geometry\",t)}_clickHandler(i){const t=this._findTargetGraphic(p(i));if(t){const e=new d(t,this.graphics.indexOf(t),i.x,i.y,i);this.emit(\"graphic-click\",e),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(e)}}_doubleClickHandler(i){const t=this._findTargetGraphic(p(i));if(t){const e=new g(t,this.graphics.indexOf(t),i.x,i.y,i);this.emit(\"graphic-double-click\",e),this.callbacks.onGraphicDoubleClick&&this.callbacks.onGraphicDoubleClick(e)}}_pointerDownHandler(i){const t=this._findTargetGraphic(p(i));if(t){this._activeGraphic=t;const{x:e,y:r}=i,s=new _(t,this.graphics.indexOf(t),e,r,i);this.emit(\"graphic-pointer-down\",s),this.callbacks.onGraphicPointerDown&&this.callbacks.onGraphicPointerDown(s)}else this._activeGraphic=null}_pointerUpHandler(i){if(this._activeGraphic){const{x:t,y:e}=i,r=this.graphics.indexOf(this._activeGraphic),s=new m(this._activeGraphic,r,t,e,i);this.emit(\"graphic-pointer-up\",s),this.callbacks.onGraphicPointerUp&&this.callbacks.onGraphicPointerUp(s)}}_pointerMoveHandler(i){if(this._dragEvent)return;const t=this._findTargetGraphic(p(i));if(t){const{x:e,y:r}=i;if(this._hoverGraphic){if(this._hoverGraphic===t)return;const s=this.graphics.indexOf(this._hoverGraphic),a=new G(this.graphics[s],s,e,r,i);this._hoverGraphic=null,this.emit(\"graphic-pointer-out\",a),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(a)}const s=this.graphics.indexOf(t),a=new w(t,s,e,r,i);return this._hoverGraphic=t,this.emit(\"graphic-pointer-over\",a),void(this.callbacks.onGraphicPointerOver&&this.callbacks.onGraphicPointerOver(a))}if(this._hoverGraphic){const{x:t,y:e}=i,r=this.graphics.indexOf(this._hoverGraphic),s=new G(this.graphics[r],r,t,e,i);this._hoverGraphic=null,this.emit(\"graphic-pointer-out\",s),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(s)}}_dragHandler(i){if(\"start\"!==i.action&&!this._dragEvent||!this._activeGraphic||!this._activeGraphic.geometry)return;i.stopPropagation();const{action:e,x:r,y:s}=i,a=this.graphics.indexOf(this._activeGraphic),o=this._activeGraphic.geometry,h=this._dragEvent?r-this._dragEvent.x:0,c=this._dragEvent?s-this._dragEvent.y:0,n=r-i.origin.x,p=s-i.origin.y;if(this._activeGraphic.geometry=l(o,h,c,this.view),this.enableMoveAllGraphics&&this.graphics.forEach((i=>{i!==this._activeGraphic&&(i.geometry=l(i.geometry,h,c,this.view))})),this._dragEvent=i,\"start\"===e){this._initialDragGeometry=t(o);const e=new u(this._activeGraphic,this.graphics,a,r,s,h,c,n,p,i);this.emit(\"graphic-move-start\",e),this.callbacks.onGraphicMoveStart&&this.callbacks.onGraphicMoveStart(e),e.defaultPrevented&&this._activeGraphic.set(\"geometry\",o)}else if(\"update\"===e){const t=new y(this._activeGraphic,this.graphics,a,r,s,h,c,n,p,i);this.emit(\"graphic-move\",t),this.callbacks.onGraphicMove&&this.callbacks.onGraphicMove(t),t.defaultPrevented&&this._activeGraphic.set(\"geometry\",o)}else{const t=new f(this._activeGraphic,this.graphics,a,r,s,h,c,n,p,i);this._dragEvent=null,this._activeGraphic=null,this.emit(\"graphic-move-stop\",t),this.callbacks.onGraphicMoveStop&&this.callbacks.onGraphicMoveStop(t),t.defaultPrevented&&this.graphics[a].set(\"geometry\",this._initialDragGeometry),this._initialDragGeometry=null}}_keyDownHandler(i){\"a\"!==i.key&&\"d\"!==i.key&&\"n\"!==i.key||\"moving\"!==this.state||i.stopPropagation()}_findTargetGraphic(i){let t=null,r=Number.MAX_VALUE;return this._manipulators.forEach((s=>{const a=s.intersectionDistance(i);e(a)&&a<r&&(r=a,t=s.graphic)})),t}_setUpManipulators(){const{graphics:i,view:t}=this;this._manipulators.forEach((i=>i.destroy())),this._manipulators=null!=i&&i.length?i.map((i=>new v({graphic:i,view:t}))):[]}};i([r()],k.prototype,\"_activeGraphic\",void 0),i([r({readOnly:!0})],k.prototype,\"type\",void 0),i([r()],k.prototype,\"callbacks\",void 0),i([r()],k.prototype,\"enableMoveAllGraphics\",void 0),i([r()],k.prototype,\"graphics\",void 0),i([r({readOnly:!0})],k.prototype,\"state\",null),i([r()],k.prototype,\"view\",void 0),k=i([s(\"esri.views.draw.support.GraphicMover\")],k);var b=k;export default b;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport n from\"../Point.js\";import e from\"../Multipoint.js\";import t from\"../Polygon.js\";import r from\"../Polyline.js\";import\"../../geometry.js\";function i(n){let e=0,t=0;const r=n.length;let i,o=n[t];for(t=0;t<r-1;t++)i=n[t+1],e+=(i[0]-o[0])*(i[1]+o[1]),o=i;return e>=0}function o(n,e,t,r){const i=[];for(const o of n){const n=o.slice(0);i.push(n);const s=e*(o[0]-r.x)-t*(o[1]-r.y)+r.x,l=t*(o[0]-r.x)+e*(o[1]-r.y)+r.y;n[0]=s,n[1]=l}return i}function s(s,l,a){const c=s.spatialReference,f=l*Math.PI/180,m=Math.cos(f),x=Math.sin(f);var p,u;\"xmin\"in s&&(a=null!=(p=a)?p:s.center,s=new t({spatialReference:c,rings:[[[s.xmin,s.ymin],[s.xmin,s.ymax],[s.xmax,s.ymax],[s.xmax,s.ymin],[s.xmin,s.ymin]]]}));if(\"paths\"in s){var y;a=null!=(y=a)?y:s.extent.center;const n=[];for(const e of s.paths)n.push(o(e,m,x,a));return new r({spatialReference:c,paths:n})}if(\"rings\"in s){var h;a=null!=(h=a)?h:s.extent.center;const n=[];for(const e of s.rings){const t=i(e),r=o(e,m,x,a);i(r)!==t&&r.reverse(),n.push(r)}return new t({spatialReference:c,rings:n})}if(\"x\"in s){var g;a=null!=(g=a)?g:s;const e=new n({x:m*(s.x-a.x)-x*(s.y-a.y)+a.x,y:x*(s.x-a.x)+m*(s.y-a.y)+a.y,spatialReference:c});return null!=s.z&&(e.z=s.z),null!=s.m&&(e.m=s.m),e}return\"points\"in s?(a=null!=(u=a)?u:s.extent.center,new e({points:o(s.points,m,x,a),spatialReference:c})):null}export default s;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{isSome as e}from\"../../../core/maybe.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import r from\"../../../geometry/Point.js\";import{geometryToCoordinates as a}from\"../../../geometry/support/coordsUtils.js\";import{getRingsOrPathsBounds as o}from\"../../../geometry/support/boundsUtils.js\";import h from\"../../../geometry/Polygon.js\";import c from\"../../../geometry/Polyline.js\";import\"../../../geometry.js\";import n from\"../../../core/Evented.js\";import l from\"../../../symbols/SimpleLineSymbol.js\";import p from\"../../../symbols/SimpleFillSymbol.js\";import d from\"../../../symbols/SimpleMarkerSymbol.js\";import m from\"../../../Graphic.js\";import u from\"../../../core/Handles.js\";import{whenOnce as _,pausable as g}from\"../../../core/watchUtils.js\";import{create as v}from\"../../../geometry/support/aaBoundingRect.js\";import{settings as G}from\"./settings.js\";import{cloneMove as y,scale as f,getScaleRatio as b,getRotationAngle as S}from\"./drawUtils.js\";import{addUniqueLayer as w}from\"./layerUtils.js\";import k from\"../../../geometry/support/rotate.js\";import x from\"./GraphicMover.js\";class R{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.dx=i,this.dy=s,this.type=\"move-start\"}}class M{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.dx=i,this.dy=s,this.type=\"move\"}}class I{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.dx=i,this.dy=s,this.type=\"move-stop\"}}class C{constructor(t,e,i){this.graphics=t,this.mover=e,this.angle=i,this.type=\"rotate-start\"}}class E{constructor(t,e,i){this.graphics=t,this.mover=e,this.angle=i,this.type=\"rotate\"}}class j{constructor(t,e,i){this.graphics=t,this.mover=e,this.angle=i,this.type=\"rotate-stop\"}}class O{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.xScale=i,this.yScale=s,this.type=\"scale-start\"}}class L{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.xScale=i,this.yScale=s,this.type=\"scale\"}}class z{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.xScale=i,this.yScale=s,this.type=\"scale-stop\"}}const B=G.transformGraphics,Y={centerIndicator:new d({style:\"cross\",size:B.center.size,color:B.center.color}),fill:{default:new p({color:B.fill.color,outline:{color:B.fill.outlineColor,join:\"round\",width:1}}),active:new p({color:B.fill.stagedColor,outline:{color:B.fill.outlineColor,join:\"round\",style:\"dash\",width:1}})},handles:{default:new d({style:\"square\",size:B.vertex.size,color:B.vertex.color,outline:{color:B.vertex.outlineColor,width:1}}),hover:new d({style:\"square\",size:B.vertex.hoverSize,color:B.vertex.hoverColor,outline:{color:B.vertex.hoverOutlineColor,width:1}})},rotator:{default:new d({style:\"circle\",size:B.vertex.size,color:B.vertex.color,outline:{color:B.vertex.outlineColor,width:1}}),hover:new d({style:\"circle\",size:B.vertex.hoverSize,color:B.vertex.hoverColor,outline:{color:B.vertex.hoverOutlineColor,width:1}})},rotatorLine:new l({color:B.line.color,width:1})};let N=class extends n.EventedAccessor{constructor(t){super(t),this._activeHandleGraphic=null,this._graphicAttributes={esriSketchTool:\"box\"},this._handles=new u,this._mover=null,this._rotateGraphicOffset=20,this._angleOfRotation=0,this._rotateLineGraphic=null,this._startInfo=null,this._totalDx=0,this._totalDy=0,this._xScale=1,this._yScale=1,this.type=\"box\",this.callbacks={onMoveStart(){},onMove(){},onMoveStop(){},onScaleStart(){},onScale(){},onScaleStop(){},onRotateStart(){},onRotate(){},onRotateStop(){},onGraphicClick(){}},this.centerGraphic=null,this.backgroundGraphic=null,this.enableMovement=!0,this.enableRotation=!0,this.enableScaling=!0,this.graphics=[],this.handleGraphics=[],this.layer=null,this.preserveAspectRatio=!1,this.rotateGraphic=null,this.showCenterGraphic=!0,this.view=null,this._getBounds=(()=>{const t=v();return(e,i)=>{e[0]=Number.POSITIVE_INFINITY,e[1]=Number.POSITIVE_INFINITY,e[2]=Number.NEGATIVE_INFINITY,e[3]=Number.NEGATIVE_INFINITY;for(const s of i){if(!s)continue;let i,r,h,c;if(\"point\"===s.type)i=h=s.x,r=c=s.y;else if(\"multipoint\"===s.type){const e=a(s);[i,r,h,c]=o(t,[e])}else if(\"extent\"===s.type)[i,r,h,c]=[s.xmin,s.ymin,s.xmax,s.ymax];else{const e=a(s);[i,r,h,c]=o(t,e)}e[0]=Math.min(i,e[0]),e[1]=Math.min(r,e[1]),e[2]=Math.max(h,e[2]),e[3]=Math.max(c,e[3])}return e}})()}initialize(){this._setup(),this._handles.add([_(this,\"view.ready\",(()=>{const{layer:t,view:e}=this;w(e,t)})),g(this,\"preserveAspectRatio\",(()=>{this._activeHandleGraphic&&(this._scaleGraphic(this._activeHandleGraphic),this._updateGraphics())})),g(this,\"view.scale\",(()=>{this._updateRotateGraphic(),this._updateRotateLineGraphic()})),g(this,\"graphics\",(()=>this.refresh())),g(this,\"layer\",((t,e)=>{e&&this._resetGraphics(e),this.refresh()}))])}destroy(){this._reset(),this._handles&&(this._handles.removeAll(),this._handles=null)}get state(){const t=!!this.get(\"view.ready\"),e=!(!this.get(\"graphics.length\")||!this.get(\"layer\"));return t&&e?\"active\":t?\"ready\":\"disabled\"}set symbols(t){const{centerIndicator:e=Y.centerIndicator,fill:i=Y.fill,handles:s=Y.handles,rotator:r=Y.rotator,rotatorLine:a=Y.rotatorLine}=t||{};this._set(\"symbols\",{centerIndicator:e,fill:i,handles:s,rotator:r,rotatorLine:a})}isUIGraphic(t){let e=[];return this.handleGraphics.length&&(e=e.concat(this.handleGraphics)),this.backgroundGraphic&&e.push(this.backgroundGraphic),this.centerGraphic&&e.push(this.centerGraphic),this.rotateGraphic&&e.push(this.rotateGraphic),this._rotateLineGraphic&&e.push(this._rotateLineGraphic),e.length&&e.includes(t)}move(t,e){if(this._mover&&this.graphics.length){for(const i of this.graphics){const s=i.geometry,r=y(s,t,e,this.view);i.geometry=r}this.refresh(),this._emitMoveStopEvent(t,e,null)}}scale(t,e){if(this._mover&&this.graphics.length){for(const i of this.graphics){const s=i.geometry,r=f(s,t,e);i.geometry=r}this.refresh(),this._emitScaleStopEvent(t,e,null)}}rotate(t,e){if(this._mover&&this.graphics.length){if(!e){const t=this.handleGraphics[1].geometry.x,i=this.handleGraphics[3].geometry.y;e=new r(t,i,this.view.spatialReference)}for(const i of this.graphics){const s=i.geometry,r=k(s,t,e);i.geometry=r}this.refresh(),this._emitRotateStopEvent(t,null)}}refresh(){this._reset(),this._setup()}reset(){this.graphics=[]}_setup(){\"active\"===this.state&&(this._setupGraphics(),this._setupMover(),this._updateGraphics())}_reset(){this._resetGraphicStateVars(),this._resetGraphics(),this._mover&&this._mover.destroy(),this._mover=null,this.view.cursor=\"default\"}_resetGraphicStateVars(){this._startInfo=null,this._activeHandleGraphic=null,this._totalDx=0,this._totalDy=0,this._xScale=1,this._yScale=1,this._angleOfRotation=0}_resetGraphics(t){const e=t||this.layer;e&&(e.removeMany(this.handleGraphics),e.remove(this.backgroundGraphic),e.remove(this.centerGraphic),e.remove(this.rotateGraphic),e.remove(this._rotateLineGraphic));for(const i of this.handleGraphics)i.destroy();this._set(\"handleGraphics\",[]),this.backgroundGraphic&&(this.backgroundGraphic.destroy(),this._set(\"backgroundGraphic\",null)),this.centerGraphic&&(this.centerGraphic.destroy(),this._set(\"centerGraphic\",null)),this.rotateGraphic&&(this.rotateGraphic.destroy(),this._set(\"rotateGraphic\",null)),this._rotateLineGraphic&&(this._rotateLineGraphic.destroy(),this._rotateLineGraphic=null)}_setupMover(){let t=[].concat(this.handleGraphics);this.enableMovement&&(t=t.concat(this.graphics,this.backgroundGraphic)),this.enableRotation&&t.push(this.rotateGraphic),this.showCenterGraphic&&t.push(this.centerGraphic),this._mover=new x({enableMoveAllGraphics:!1,view:this.view,graphics:t,callbacks:{onGraphicClick:t=>this._onGraphicClickCallback(t),onGraphicMoveStart:t=>this._onGraphicMoveStartCallback(t),onGraphicMove:t=>this._onGraphicMoveCallback(t),onGraphicMoveStop:t=>this._onGraphicMoveStopCallback(t),onGraphicPointerOver:t=>this._onGraphicPointerOverCallback(t),onGraphicPointerOut:t=>this._onGraphicPointerOutCallback(t)}})}_getStartInfo(t){const[e,i,s,r]=this._getBoxBounds(v()),a=Math.abs(s-e),o=Math.abs(r-i),h=(s+e)/2,c=(r+i)/2,{x:n,y:l}=t.geometry;return{width:a,height:o,centerX:h,centerY:c,startX:n,startY:l,graphicInfos:this._getGraphicInfos(),box:this.backgroundGraphic.geometry,rotate:this.rotateGraphic.geometry}}_getGraphicInfos(){return this.graphics.map((t=>this._getGraphicInfo(t)))}_getGraphicInfo(t){const e=t.geometry,[i,s,r,a]=this._getBounds(v(),[e]);return{width:Math.abs(r-i),height:Math.abs(a-s),centerX:(r+i)/2,centerY:(a+s)/2,geometry:e}}_onGraphicClickCallback(t){t.viewEvent.stopPropagation(),this.emit(\"graphic-click\",t),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(t)}_onGraphicMoveStartCallback(t){const{_angleOfRotation:e,_xScale:i,_yScale:s,backgroundGraphic:r,handleGraphics:a,rotateGraphic:o,symbols:h}=this,c=t.graphic;this._resetGraphicStateVars(),this._hideGraphicsBeforeUpdate(),r.symbol=h.fill.active,this._startInfo=this._getStartInfo(c),c===o?(this.view.cursor=\"grabbing\",this._emitRotateStartEvent(e,c)):a.includes(c)?(this._activeHandleGraphic=c,this._emitScaleStartEvent(i,s,c)):this._emitMoveStartEvent(t.dx,t.dy,c)}_onGraphicMoveCallback(t){const e=t.graphic;if(this._startInfo)if(this.handleGraphics.includes(e))this._scaleGraphic(e),this._emitScaleEvent(this._xScale,this._yScale,e);else if(e===this.rotateGraphic)this._rotateGraphic(e),this._emitRotateEvent(this._angleOfRotation,e);else{const i=t.dx,s=t.dy;this._totalDx+=i,this._totalDy+=s,this._moveGraphic(e,i,s),this._emitMoveEvent(i,s,e)}}_onGraphicMoveStopCallback(t){const e=t.graphic;if(!this._startInfo)return void this.refresh();const{_angleOfRotation:i,_totalDx:s,_totalDy:r,_xScale:a,_yScale:o,backgroundGraphic:h,handleGraphics:c,rotateGraphic:n,symbols:l}=this;this._updateGraphics(),this._showGraphicsAfterUpdate(),h.symbol=l.fill.default,e===n?(this.view.cursor=\"pointer\",this._emitRotateStopEvent(i,e)):c.includes(e)?this._emitScaleStopEvent(a,o,e):this._emitMoveStopEvent(s,r,e),this._resetGraphicStateVars()}_onGraphicPointerOverCallback(t){const{backgroundGraphic:e,handleGraphics:i,graphics:s,rotateGraphic:r,symbols:a,view:o}=this,h=t.graphic;if(h===r)return r.symbol=a.rotator.hover,void(o.cursor=\"pointer\");if(s.includes(h)||h===e)return void(o.cursor=\"move\");if(!i.includes(h))return void(o.cursor=\"pointer\");t.graphic.symbol=a.handles.hover;const c=o.rotation;let n,l=t.index;switch(l<8&&(c>=0&&c<45?l%=8:l=c>=45&&c<90?(l+1)%8:c>=90&&c<135?(l+2)%8:c>=135&&c<180?(l+3)%8:c>=180&&c<225?(l+4)%8:c>=225&&c<270?(l+5)%8:c>=270&&c<315?(l+6)%8:(l+7)%8),l){case 0:n=\"nwse-resize\";break;case 1:n=\"ns-resize\";break;case 2:n=\"nesw-resize\";break;case 3:n=\"ew-resize\";break;case 4:n=\"nwse-resize\";break;case 5:n=\"ns-resize\";break;case 6:n=\"nesw-resize\";break;case 7:n=\"ew-resize\";break;default:n=\"pointer\"}o.cursor=n}_onGraphicPointerOutCallback(t){const{handleGraphics:e,rotateGraphic:i,symbols:s,view:r}=this;t.graphic===i?i.symbol=s.rotator.default:e.includes(t.graphic)&&(t.graphic.symbol=s.handles.default),r.cursor=\"default\"}_scaleGraphic(t){const{_startInfo:e,handleGraphics:i,preserveAspectRatio:s,view:a}=this,{centerX:o,centerY:h,startX:c,startY:n}=e,{resolution:l,transform:p}=a.state,d=i.indexOf(t);1!==d&&5!==d||this._updateX(t,o),3!==d&&7!==d||this._updateY(t,h);const{x:m,y:u}=t.geometry,_=p[0]*m+p[2]*u+p[4],g=p[1]*m+p[3]*u+p[5],v=e.graphicInfos.map((t=>t.geometry));if(s){const t=p[0]*o+p[2]*h+p[4],e=p[1]*o+p[3]*h+p[5],i=p[0]*c+p[2]*n+p[4],s=p[1]*c+p[3]*n+p[5];this._xScale=this._yScale=b(t,e,i,s,_,g);for(const r of v){const t=v.indexOf(r);this.graphics[t].geometry=f(r,this._xScale,this._yScale,[o,h])}this._updateBackgroundGraphic()}else{const{width:t,height:i}=e;let s=m-c,p=n-u;if(1===d||5===d?s=0:3!==d&&7!==d||(p=0),0===s&&0===p)return;const _=t+(c>o?s:-1*s),g=i+(n<h?p:-1*p),G=o+s/2,b=h+p/2;this._xScale=_/t||1,this._yScale=g/i||1,1===d||5===d?this._xScale=1:3!==d&&7!==d||(this._yScale=1);const S=(G-o)/l,w=(b-h)/l,k=f(e.box,this._xScale,this._yScale);this.backgroundGraphic.geometry=y(k,S,w,a,!0);const{centerX:x,centerY:R}=this._getGraphicInfo(this.backgroundGraphic),M=(x-o)/l,I=-1*(R-h)/l;for(const e of v){const t=v.indexOf(e),i=f(e,this._xScale,this._yScale,[o,h]);this.graphics[t].geometry=y(i,M,I,a,!0)}this.centerGraphic.geometry=new r(x,R,a.spatialReference)}}_rotateGraphic(t){const{centerX:e,centerY:i,startX:s,startY:a,box:o,rotate:h}=this._startInfo,{x:c,y:n}=t.geometry,l=new r(e,i,this.view.spatialReference);this._angleOfRotation=S(e,i,s,a,c,n);const p=this._startInfo.graphicInfos.map((t=>t.geometry));for(const r of p){const t=p.indexOf(r),e=k(r,this._angleOfRotation,l);this.graphics[t].geometry=e}this.backgroundGraphic.geometry=k(o,this._angleOfRotation,l),this.rotateGraphic.geometry=k(h,this._angleOfRotation,l)}_moveGraphic(t,e,i){if(this.graphics.includes(t)){const s=this.backgroundGraphic.geometry;this.backgroundGraphic.geometry=y(s,e,i,this.view);for(const r of this.graphics)r!==t&&(r.geometry=y(r.geometry,e,i,this.view))}else if(t===this.centerGraphic){const t=this.backgroundGraphic.geometry;this.backgroundGraphic.geometry=y(t,e,i,this.view)}if(t===this.backgroundGraphic||t===this.centerGraphic)for(const s of this.graphics)s.geometry=y(s.geometry,e,i,this.view)}_setupGraphics(){const{_graphicAttributes:t,symbols:e}=this;this._set(\"centerGraphic\",new m(null,e.centerIndicator,t)),this.showCenterGraphic&&this.layer.add(this.centerGraphic),this._set(\"backgroundGraphic\",new m(null,e.fill.default,t)),this.layer.add(this.backgroundGraphic),this._rotateLineGraphic=new m(null,e.rotatorLine,t),this._set(\"rotateGraphic\",new m(null,e.rotator.default,t)),this.enableRotation&&!this._hasExtentGraphic()&&(this.layer.add(this._rotateLineGraphic),this.layer.add(this.rotateGraphic));for(let i=0;i<8;i++)this.handleGraphics.push(new m(null,e.handles.default,t));this.enableScaling&&this.layer.addMany(this.handleGraphics)}_updateGraphics(){this._updateBackgroundGraphic(),this._updateHandleGraphics(),this._updateCenterGraphic(),this._updateRotateGraphic(),this._updateRotateLineGraphic()}_hideGraphicsBeforeUpdate(){this.centerGraphic.visible=!1,this.rotateGraphic.visible=!1,this._rotateLineGraphic.visible=!1,this.handleGraphics.forEach((t=>t.visible=!1))}_showGraphicsAfterUpdate(){this.enableRotation&&(this._rotateLineGraphic.visible=!0,this.rotateGraphic.visible=!0),this.showCenterGraphic&&(this.centerGraphic.visible=!0),this.enableScaling&&this.handleGraphics.forEach((t=>t.visible=!0))}_updateHandleGraphics(){const t=this._getCoordinates(!0);this.handleGraphics.forEach(((e,i)=>{const[s,r]=t[i];this._updateXY(e,s,r)}))}_updateBackgroundGraphic(){const t=this._getCoordinates();this.backgroundGraphic.geometry=new h({rings:t,spatialReference:this.view.spatialReference})}_updateCenterGraphic(){const[t,e,i,s]=this._getBoxBounds(v()),a=(i+t)/2,o=(s+e)/2;this.centerGraphic.geometry=new r(a,o,this.view.spatialReference)}_updateRotateGraphic(){if(!this.handleGraphics.length)return;const{x:t,y:e}=this.handleGraphics[1].geometry,i=e+this.view.state.resolution*this._rotateGraphicOffset;this.rotateGraphic.geometry=new r(t,i,this.view.spatialReference)}_updateRotateLineGraphic(){if(!this.handleGraphics.length||!this.rotateGraphic||!this.rotateGraphic.geometry)return;const t=this.handleGraphics[1].geometry,e=this.rotateGraphic.geometry;this._rotateLineGraphic.geometry=new c({paths:[[t.x,t.y],[e.x,e.y]],spatialReference:this.view.spatialReference})}_updateXY(t,e,i){t.geometry=new r(e,i,this.view.spatialReference)}_updateX(t,e){const i=t.geometry.y;t.geometry=new r(e,i,this.view.spatialReference)}_updateY(t,e){const i=t.geometry.x;t.geometry=new r(i,e,this.view.spatialReference)}_hasExtentGraphic(){return this.graphics.some((t=>t&&e(t.geometry)&&\"extent\"===t.geometry.type))}_getBoxBounds(t){const e=this.graphics.map((t=>t.geometry));return this._getBounds(t,e)}_getCoordinates(t){const[e,i,s,r]=this._getBoxBounds(v());if(t){const t=(e+s)/2,a=(r+i)/2;return[[e,r],[t,r],[s,r],[s,a],[s,i],[t,i],[e,i],[e,a]]}return[[e,r],[s,r],[s,i],[e,i]]}_emitMoveStartEvent(t,e,i){const s=new R(this.graphics,i,t,e);this.emit(\"move-start\",s),this.callbacks.onMoveStart&&this.callbacks.onMoveStart(s)}_emitMoveEvent(t,e,i){const s=new M(this.graphics,i,t,e);this.emit(\"move\",s),this.callbacks.onMove&&this.callbacks.onMove(s)}_emitMoveStopEvent(t,e,i){const s=new I(this.graphics,i,t,e);this.emit(\"move-stop\",s),this.callbacks.onMoveStop&&this.callbacks.onMoveStop(s)}_emitRotateStartEvent(t,e){const i=new C(this.graphics,e,t);this.emit(\"rotate-start\",i),this.callbacks.onRotateStart&&this.callbacks.onRotateStart(i)}_emitRotateEvent(t,e){const i=new E(this.graphics,e,t);this.emit(\"rotate\",i),this.callbacks.onRotate&&this.callbacks.onRotate(i)}_emitRotateStopEvent(t,e){const i=new j(this.graphics,e,t);this.emit(\"rotate-stop\",i),this.callbacks.onRotateStop&&this.callbacks.onRotateStop(i)}_emitScaleStartEvent(t,e,i){const s=new O(this.graphics,i,t,e);this.emit(\"scale-start\",s),this.callbacks.onScaleStart&&this.callbacks.onScaleStart(s)}_emitScaleEvent(t,e,i){const s=new L(this.graphics,i,t,e);this.emit(\"scale\",s),this.callbacks.onScale&&this.callbacks.onScale(s)}_emitScaleStopEvent(t,e,i){const s=new z(this.graphics,i,t,e);this.emit(\"scale-stop\",s),this.callbacks.onScaleStop&&this.callbacks.onScaleStop(s)}};t([i()],N.prototype,\"_rotateLineGraphic\",void 0),t([i({readOnly:!0})],N.prototype,\"type\",void 0),t([i()],N.prototype,\"callbacks\",void 0),t([i({readOnly:!0})],N.prototype,\"centerGraphic\",void 0),t([i({readOnly:!0})],N.prototype,\"backgroundGraphic\",void 0),t([i()],N.prototype,\"enableMovement\",void 0),t([i()],N.prototype,\"enableRotation\",void 0),t([i()],N.prototype,\"enableScaling\",void 0),t([i()],N.prototype,\"graphics\",void 0),t([i({readOnly:!0})],N.prototype,\"handleGraphics\",void 0),t([i()],N.prototype,\"layer\",void 0),t([i()],N.prototype,\"preserveAspectRatio\",void 0),t([i({readOnly:!0})],N.prototype,\"rotateGraphic\",void 0),t([i()],N.prototype,\"showCenterGraphic\",void 0),t([i({readOnly:!0})],N.prototype,\"state\",null),t([i({value:Y})],N.prototype,\"symbols\",null),t([i()],N.prototype,\"view\",void 0),N=t([s(\"esri.views.draw.support.Box\")],N);var A=N;export default A;\n"],"sourceRoot":""}