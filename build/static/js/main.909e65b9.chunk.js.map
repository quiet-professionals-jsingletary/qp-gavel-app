{"version":3,"sources":["../node_modules/@esri/calcite-components/dist/esm-es5 lazy /^/.*/.entry/.js$/ groupOptions: {} namespace object","redux/reducers/auth.js","utils/session.js","redux/sagas/_auth.js","redux/reducers/config.js","utils/request.js","redux/sagas/_config.js","redux/reducers/security-token.js","redux/types/area-types.js","redux/sagas/requests/area-query.js","redux/sagas/_area-query.js","redux/types/pattern-of-life-types.js","redux/sagas/requests/pattern-of-life-query.js","redux/sagas/_pattern-of-life-query.js","redux/sagas/index.js","utils/format.js","redux/reducers/area-query.js","redux/reducers/map.js","redux/reducers/pattern-of-life-query.js","redux/sagas/requests/security-token.js","redux/sagas/handlers/security-token.js","redux/actions/area-query-actions.js","redux/sagas/root-saga.js","styles/images/Topo-Abs-BG.svg","components/LoadScreen.jsx","components/UserAccount.jsx","components/esri/services/FeatureLayerService.js","utils/calculate.js","components/esri/layers/FeatureLayerBuilder.js","components/esri/layers/PatternOfLifeBuilder.js","components/shared/AlertBuilder.jsx","components/esri/widgets/DateRange.jsx","components/shared/NoticeBuilder.jsx","components/esri/map/Map.jsx","utils/map.js","components/Main.jsx","styles/images/quiet-professionals-logo.png","components/App.jsx","registerServiceWorker.js","styles/global.js","index.js","redux/store.js"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","all","slice","keys","Object","module","exports","types","initialState","user","portal","token","loggedIn","state","action","type","payload","startAuth","options","signIn","portalUrl","clientId","popup","UserSession","beginOAuth2","redirectUri","window","location","origin","completeSignIn","a","sessionId","session","completeOAuth2","saveSession","getUser","getPortal","authentication","signOut","Cookies","deleteSession","restoreSession","authInfos","serializedSession","deserialize","console","log","expires","tokenExpires","serialize","sameSite","getSession","completeAuth","checkAuth","authLogout","watchStartAPI","call","put","error","reload","takeLatest","loaded","status","response","reject","statusText","handleResponse","handleAs","text","json","getRequestBody","data","isFormData","this","objectToFormData","obj","body","URLSearchParams","prop","hasOwnProperty","append","has","toString","objectToUrlSearchParams","makeRequest","params","url","headers","Headers","getHeaders","method","hideCredentials","credentials","fetch","bind","getAppConfig","resp","fetchConfig","updateConfig","watchFetchConfig","watchUpdateConfig","config","configTypes","INITIAL_STATE","isValid","ADD_TO_STORE","ADDED_TO_STORE","SEND_AREA_QUERY","AREA_QUERY_SENT","AREA_QUERY_DONE","AREA_QUERY_FAIL","AREA_QUERY_STATUS","BUILD_FEATURE_LAYER","areaQueryRequest","areaQueryPayload","startDate","endDate","longitude","latitude","radius","axios","request","process","TempSecurityToken","require","addToStore","sendAreaQuery","buildFeatureLayer","watchAreaQuery","requests","areaQueryState","baseMap","mapView","ADD_PATTERN_TO_STORE","PATTERN_ADDED_TO_STORE","SEND_PATTERN_QUERY","PATTERN_QUERY_SENT","PATTERN_QUERY_DONE","PATTERN_QUERY_FAIL","PATTERN_QUERY_STATUS","patternQueryRequest","registrationID","patternQueryPayload","securityToken","addPatternToStore","sendPatternQuery","watchPatternQuery","rootSaga","values","authSagas","configSagas","securitySagas","areaSagas","patternSagas","fork","dateToIsoString","date","dateObj","Date","dateObjIso","toISOString","group","groupEnd","sDate","setDate","getDate","eDate","locationData","mapLoaded","registrationIDs","setSecurityTokenRequest","handleSetSecurityToken","watcherSaga","securityTypes","Container","styled","div","background","Wrapper","Title","FadingContainer","img","initial","opacity","zIndex","animate","transitionEnd","display","transition","delay","duration","ease","LoadScreen","props","isLoading","UserAccount","signedInActionsComponent","style","padding","onRequestSwitchAccount","onRequestSignOut","onClick","signedOutActionsComponent","clear","outputComponent","APPLY_FEATURES_FROM_MEMORY","res","layer","serviceDetails","layerUrl","serviceUrl","serviceName","featureLayerSrc","source","featurePayload","items","item","i","attributes","geometry","symbol","restructureData","x","y","spatialReference","wkid","push","addFeatures","info","calcDistance","locations","locationA","locationB","polyline","Polyline","JSON","stringify","webMercatorToGeographic","polylineLength","geodesicLengths","SpatialReference","baseMapProp","mapViewProp","event","panel","content","document","getElementById","className","title","open","hidden","actions","actionsSections","resDataArray","areas","graphicsLayerSignals","GraphicsLayer","top","right","graphics","layerCounter","when","handleNoSignalCounts","area","regID","j","signals","signal","k","lat","lon","point","colors","simpleMarkerSymbol","color","outline","width","size","pointGraphic","Graphic","ipAddress","flags","timestamp","add","createFeatures","patternsLayer","setGraphics","length","processCounter","createFeatureLayer","edits","applyEdits","pointRenderer","patternOfLifeAction","indicator","FeatureLayer","objectIdField","fields","name","valueType","geometryType","outFields","popupTemplate","fieldInfos","fieldName","label","format","digitSeparator","visible","spinnerEnabled","active","renderer","patternOfLifeSignals","buildPatternOfLife","pointRenderer1","AlertContainer","AlertBuilderInfo","memo","isActive","class","icon","auto-dismiss","auto-dismiss-duration","scale","aria-hidden","role","slot","AlertBuilderProcess","AlertBuilderProcessSuccess","AlertBuilderWarning","AlertBuilderNoResultsWarning","AlertBuilderDanger","DateRangeComponent","defaultDate","currentDate","now","handleDatePickerRangeChange","handleStartDateChange","handleEndDateChange","handleFormSubmit","alertProcessStart","submitBtn","today","setState","formDateRange","submitDatesBtn","startDateFull","detail","endDateFull","tempStartDateObj","startDateIsoString","addToStoreCreator","addPatternToStoreCreator","tempEndDateObj","endDateIsoString","preventDefault","setAttribute","tokenizedPayload","areaQuery","areaQueryData","sendAreaQueryCreator","range","activeRange","startAsDate","endAsDate","min","maxAsDate","valueAsDate","locale","next-month-label","prev-month-label","layout","proximity-selection-disabled","onCalciteDatePickerRangeChange","appearance","icon-start","Component","actionCreators","connect","patternQuery","MapComponent","sketch","graphicsLayerGeofence","containerId","store","useStore","dispatch","useDispatch","useSelector","areaQueryStatus","patternQueryState","patternQueryStatus","useState","setStartDate","setEndDate","baseMapState","setBaseMapState","mapViewState","setMapViewState","setFeatureServiceUrl","layerCount","polyFill","pointFill","polygonStroke","pointStroke","useEffect","sDateObj","eDateObj","sDateIso","eDateIso","areaTypes","patternTypes","element","mapConfig","loaderConfig","loadModules","Map","MapView","view","container","spatialRef","basemap","layers","extent","xmin","ymin","xmax","ymax","dockEnabled","dockOptions","position","breakpoint","search","Search","scaleBar","ScaleBar","unit","Sketch","availableCreateTools","defaultCreateOptions","creationMode","legend","Legend","layerInfos","layerList","LayerList","visibleElements","statusIndicators","listItemCreatedFunction","listItem","expandLegend","Expand","expandTooltip","expandSketch","expandLayerList","expandDateRange","dateRangeCard","expandIconClass","expandBaseMap","BasemapGallery","removeAttribute","pointSymbol","viewModel","polylineSymbol","polygonSymbol","handleSecurityToken","handleRegistrationId","handleTokenizedPayload","handleSendPatternQuery","resolvePatternOfLife","tempSecurityToken","gavelState","getState","selectedFeature","stepOne","stepTwo","stepThree","stepFour","finalize","on","onGraphicCreate","setUpGraphicClickHandler","createFeatureService","CREATE_FEATURE_SERVICE","serviceurl","layerDef","addToServiceDefinition","tables","ADD_TO_SERVICE_DEFINITION","res1","res2","handlePatternOfLifeQuery","watch","graphic","getEffectivePopupTemplate","ui","tool","pointCoordinateX","centroid","pointCoordinateY","ringCoordinateX","rings","ringCoordinateY","circleRadius","payloadToPush","hitTest","results","forEach","result","newDevelopment","update","onMapLoaded","featureLayerBuilder","patternOfLifeBuilder","Fragment","qp-hidden","bar","mar1gin","flex","Card","DateRange","handleStartQuery","startDateParsed","parse","handleEndQuery","endDateParsed","MapWrapper","Logo","TopNavBrand","Nav","TopNav","NavList","TopNavList","Main","auth","isMapLoaded","href","src","signInRequest","fallback","App","pathname","dojoConfig","signInRequested","isLoaded","path","component","to","Boolean","hostname","match","GlobalStyle","createGlobalStyle","basename","homepage","composeEnhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","rootReducer","combineReducers","reducers","sagaMiddleware","createSagaMiddleware","middleware","createStore","applyMiddleware","run","initStore","applyPolyfills","defineCustomElements","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister"],"mappings":";qLAAA,IAAIA,EAAM,CACT,iCAAkC,CACjC,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,KAED,0BAA2B,CAC1B,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,0BAA2B,CAC1B,IACA,KAED,oCAAqC,CACpC,IACA,IAED,gCAAiC,CAChC,IACA,EACA,IAED,mCAAoC,CACnC,IACA,IAED,gCAAiC,CAChC,IACA,EACA,KAED,yBAA0B,CACzB,IACA,KAED,4BAA6B,CAC5B,IACA,IAED,0BAA2B,CAC1B,IACA,KAED,6BAA8B,CAC7B,IACA,IAED,4BAA6B,CAC5B,IACA,KAED,0BAA2B,CAC1B,IACA,KAED,qCAAsC,CACrC,IACA,KAED,uCAAwC,CACvC,IACA,EACA,IAED,mCAAoC,CACnC,KACA,KAED,yCAA0C,CACzC,KACA,IAED,2BAA4B,CAC3B,KACA,IAED,2BAA4B,CAC3B,KACA,KAED,0BAA2B,CAC1B,KACA,KAED,4BAA6B,CAC5B,KACA,KAED,2BAA4B,CAC3B,KACA,IAED,4BAA6B,CAC5B,KACA,IAED,8BAA+B,CAC9B,KACA,KAED,gCAAiC,CAChC,KACA,KAED,2BAA4B,CAC3B,KACA,IAED,iCAAkC,CACjC,KACA,IAED,+BAAgC,CAC/B,KACA,EACA,KAED,8BAA+B,CAC9B,KACA,KAED,wCAAyC,CACxC,KACA,KAED,mCAAoC,CACnC,KACA,IAED,6BAA8B,CAC7B,KACA,IAED,4BAA6B,CAC5B,KACA,KAED,2BAA4B,CAC3B,KACA,KAED,6BAA8B,CAC7B,KACA,KAED,mCAAoC,CACnC,KACA,GACA,KAED,kCAAmC,CAClC,KACA,KAED,+BAAgC,CAC/B,KACA,IAED,4BAA6B,CAC5B,KACA,IAED,2BAA4B,CAC3B,KACA,IAED,mCAAoC,CACnC,KACA,KAED,0BAA2B,CAC1B,KACA,KAED,2BAA4B,CAC3B,KACA,IAED,+BAAgC,CAC/B,KACA,EACA,KA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","file":"static/js/main.909e65b9.chunk.js","sourcesContent":["var map = {\n\t\"./calcite-accordion_2.entry.js\": [\n\t\t980,\n\t\t78\n\t],\n\t\"./calcite-action_5.entry.js\": [\n\t\t981,\n\t\t77\n\t],\n\t\"./calcite-alert.entry.js\": [\n\t\t982,\n\t\t79\n\t],\n\t\"./calcite-avatar.entry.js\": [\n\t\t983,\n\t\t80\n\t],\n\t\"./calcite-block_2.entry.js\": [\n\t\t984,\n\t\t74\n\t],\n\t\"./calcite-button.entry.js\": [\n\t\t985,\n\t\t104\n\t],\n\t\"./calcite-card.entry.js\": [\n\t\t986,\n\t\t81\n\t],\n\t\"./calcite-checkbox.entry.js\": [\n\t\t987,\n\t\t82\n\t],\n\t\"./calcite-chip.entry.js\": [\n\t\t988,\n\t\t105\n\t],\n\t\"./calcite-color-picker_3.entry.js\": [\n\t\t989,\n\t\t59\n\t],\n\t\"./calcite-combobox_3.entry.js\": [\n\t\t990,\n\t\t9,\n\t\t66\n\t],\n\t\"./calcite-date-picker_4.entry.js\": [\n\t\t991,\n\t\t53\n\t],\n\t\"./calcite-dropdown_3.entry.js\": [\n\t\t992,\n\t\t9,\n\t\t138\n\t],\n\t\"./calcite-fab.entry.js\": [\n\t\t993,\n\t\t106\n\t],\n\t\"./calcite-filter.entry.js\": [\n\t\t994,\n\t\t60\n\t],\n\t\"./calcite-flow.entry.js\": [\n\t\t995,\n\t\t236\n\t],\n\t\"./calcite-graph_2.entry.js\": [\n\t\t996,\n\t\t83\n\t],\n\t\"./calcite-handle.entry.js\": [\n\t\t997,\n\t\t237\n\t],\n\t\"./calcite-icon.entry.js\": [\n\t\t998,\n\t\t107\n\t],\n\t\"./calcite-inline-editable.entry.js\": [\n\t\t999,\n\t\t108\n\t],\n\t\"./calcite-input-date-picker.entry.js\": [\n\t\t1000,\n\t\t9,\n\t\t67\n\t],\n\t\"./calcite-input-message.entry.js\": [\n\t\t1001,\n\t\t109\n\t],\n\t\"./calcite-input-time-picker_2.entry.js\": [\n\t\t1002,\n\t\t84\n\t],\n\t\"./calcite-input.entry.js\": [\n\t\t1003,\n\t\t56\n\t],\n\t\"./calcite-label.entry.js\": [\n\t\t1004,\n\t\t110\n\t],\n\t\"./calcite-link.entry.js\": [\n\t\t1005,\n\t\t111\n\t],\n\t\"./calcite-loader.entry.js\": [\n\t\t1006,\n\t\t139\n\t],\n\t\"./calcite-modal.entry.js\": [\n\t\t1007,\n\t\t85\n\t],\n\t\"./calcite-notice.entry.js\": [\n\t\t1008,\n\t\t86\n\t],\n\t\"./calcite-option_3.entry.js\": [\n\t\t1009,\n\t\t112\n\t],\n\t\"./calcite-pagination.entry.js\": [\n\t\t1010,\n\t\t113\n\t],\n\t\"./calcite-panel.entry.js\": [\n\t\t1011,\n\t\t75\n\t],\n\t\"./calcite-pick-list_3.entry.js\": [\n\t\t1012,\n\t\t55\n\t],\n\t\"./calcite-popover_2.entry.js\": [\n\t\t1013,\n\t\t9,\n\t\t137\n\t],\n\t\"./calcite-progress.entry.js\": [\n\t\t1014,\n\t\t238\n\t],\n\t\"./calcite-radio-button-group.entry.js\": [\n\t\t1015,\n\t\t239\n\t],\n\t\"./calcite-radio-group_2.entry.js\": [\n\t\t1016,\n\t\t87\n\t],\n\t\"./calcite-radio_2.entry.js\": [\n\t\t1017,\n\t\t88\n\t],\n\t\"./calcite-rating.entry.js\": [\n\t\t1018,\n\t\t114\n\t],\n\t\"./calcite-scrim.entry.js\": [\n\t\t1019,\n\t\t240\n\t],\n\t\"./calcite-shell_3.entry.js\": [\n\t\t1020,\n\t\t115\n\t],\n\t\"./calcite-sortable-list.entry.js\": [\n\t\t1021,\n\t\t37,\n\t\t241\n\t],\n\t\"./calcite-split-button.entry.js\": [\n\t\t1022,\n\t\t116\n\t],\n\t\"./calcite-stepper_2.entry.js\": [\n\t\t1023,\n\t\t89\n\t],\n\t\"./calcite-switch.entry.js\": [\n\t\t1024,\n\t\t68\n\t],\n\t\"./calcite-tab_4.entry.js\": [\n\t\t1025,\n\t\t90\n\t],\n\t\"./calcite-tile-select_2.entry.js\": [\n\t\t1026,\n\t\t117\n\t],\n\t\"./calcite-tile.entry.js\": [\n\t\t1027,\n\t\t242\n\t],\n\t\"./calcite-tip_3.entry.js\": [\n\t\t1028,\n\t\t76\n\t],\n\t\"./calcite-tooltip_2.entry.js\": [\n\t\t1029,\n\t\t9,\n\t\t140\n\t],\n\t\"./calcite-tree_2.entry.js\": [\n\t\t1030,\n\t\t91\n\t],\n\t\"./calcite-value-list_2.entry.js\": [\n\t\t1031,\n\t\t37,\n\t\t58\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 901;\nmodule.exports = webpackAsyncContext;","// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.​\r\n\r\n// ACTION TYPES //\r\nexport const types = {\r\n  AUTH_START: \"AUTH_START\",\r\n  AUTH_COMPLETE: \"AUTH_COMPLETE\",\r\n  AUTH_SUCCESS: \"AUTH_SUCCESS\",\r\n  AUTH_FAIL: \"AUTH_FAIL\",\r\n  AUTH_CHECK: \"AUTH_CHECK\",\r\n  LOGOUT: \"LOGOUT\"\r\n};\r\n\r\n// REDUCERS //\r\nexport const initialState = {\r\n  user: null,\r\n  portal: null,\r\n  token: null,\r\n  loggedIn: false\r\n};\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case types.AUTH_SUCCESS:\r\n      const { user, portal, token } = action.payload;\r\n\r\n      return {\r\n        user,\r\n        portal,\r\n        token,\r\n        loggedIn: true\r\n      };\r\n\r\n    case types.AUTH_FAIL:\r\n      return {\r\n        user: null,\r\n        portal: null,\r\n        token: null,\r\n        loggedIn: false\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n// ACTIONS //\r\nexport const checkAuth = options => ({\r\n  type: types.AUTH_CHECK,\r\n  payload: options\r\n});\r\n\r\nexport const startAuth = options => ({\r\n  type: types.AUTH_START,\r\n  payload: options\r\n});\r\n\r\nexport const completeAuth = options => ({\r\n  type: types.AUTH_COMPLETE,\r\n  payload: options\r\n});\r\n\r\nexport const logout = sessionId => ({\r\n  type: types.LOGOUT,\r\n  payload: {\r\n    sessionId: sessionId\r\n  }\r\n});\r\n","  import { UserSession } from \"@esri/arcgis-rest-auth\";\r\nimport { getPortal } from \"@esri/arcgis-rest-portal\";\r\nimport * as Cookies from \"js-cookie\";\r\n\r\n/**\r\n * sign in using OAuth\r\n*/\r\nconsole.log('in session.js');\r\nexport function signIn(options) {\r\n  const {\r\n    portalUrl = \"https://qptampa.maps.arcgis.com/\",\r\n    clientId,\r\n    popup = false\r\n  } = options;\r\n\r\n  // only need to call the begin method, the rest is handled either in this method\r\n  // or in the completeSignIn update\r\n  UserSession.beginOAuth2({\r\n    clientId,\r\n    portalUrl,\r\n    popup,\r\n    redirectUri: `${window.location.origin}/auth`\r\n  }); // TODO can use .then to complete auth here and save an update cycle?\r\n}\r\n\r\n/**\r\n * sign in using OAuth pop up\r\n*/\r\nexport async function completeSignIn(options) {\r\n  const {\r\n    portalUrl = \"https://qptampa.maps.arcgis.com/\",\r\n    clientId,\r\n    sessionId = `${portalUrl}_session`\r\n  } = options;\r\n\r\n  const session = UserSession.completeOAuth2({ clientId, portalUrl });\r\n  const token = session.token;\r\n\r\n  saveSession(session, sessionId);\r\n\r\n  const user = await session.getUser();\r\n  const portal = await getPortal(null, {\r\n    portal: session.portal,\r\n    authentication: session\r\n  });\r\n\r\n  return { user, portal, token };\r\n}\r\n\r\n/**\r\n * make sure the user is not logged in the next time they load the app\r\n*/\r\nexport function signOut(sessionId) {\r\n  deleteSession(sessionId);\r\n}\r\n\r\n/**\r\n * restore a previously saved session\r\n*/\r\nexport async function restoreSession(sessionId) {\r\n  let authInfos = null;\r\n\r\n  const serializedSession = Cookies.get(sessionId);\r\n  const session = serializedSession && UserSession.deserialize(serializedSession);\r\n\r\n  if (session) {\r\n    const user = await session.getUser();\r\n\r\n    const portal = await getPortal(null, {\r\n      portal: session.portal,\r\n      authentication: session\r\n    });\r\n\r\n    const token = session.token;\r\n    \r\n    authInfos = {\r\n      user,\r\n      portal,\r\n      token\r\n    };\r\n    console.log('portal', portal);\r\n  }\r\n\r\n  console.log('authInfos', authInfos);\r\n  return authInfos;\r\n}\r\n\r\n// save session & user for next time the user loads the app\r\nfunction saveSession(session, sessionId) {\r\n  // get expiration from session\r\n  const expires = session.tokenExpires;\r\n\r\n  Cookies.set(sessionId, session.serialize(), {\r\n    expires,\r\n    sameSite: \"strict\"\r\n  });\r\n}\r\n\r\nexport function getSession(sessionId) {\r\n\r\n  const serializedSession = Cookies.get(sessionId);\r\n  const session = serializedSession && UserSession.deserialize(serializedSession);\r\n\r\n  return session;\r\n}\r\n\r\n// delete a previously saved session\r\nfunction deleteSession(sessionId) {\r\n  Cookies.remove(sessionId);\r\n}\r\n","// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.​\r\n\r\nimport { call, put, takeLatest } from \"redux-saga/effects\";\r\nimport { types } from \"../reducers/auth\";\r\nimport {\r\n  signIn,\r\n  completeSignIn,\r\n  signOut,\r\n  restoreSession\r\n} from \"../../utils/session\";\r\n\r\n// WORKER //\r\nfunction* startAuth(action) {\r\n  try {\r\n    // first try to restore the session from a saved cookie if it exists\r\n    let authInfos = yield call(restoreSession, action.payload.sessionId);\r\n\r\n    // if there isn't a session cookie then we can start a new session\r\n    if (!authInfos) {\r\n      authInfos = yield call(signIn, action.payload);\r\n    }\r\n\r\n    // check for a response and finish by sending the authentication info to the Redux store\r\n    if (authInfos) {\r\n      console.log(\"If AuthInfos :: \", authInfos);\r\n      yield put({\r\n        type: types.AUTH_SUCCESS,\r\n        payload: authInfos\r\n      });\r\n    } else {\r\n      console.log(\"Else AuthInfos :: \", authInfos);\r\n      // error catching if we need it\r\n      yield put({ type: types.AUTH_FAIL });\r\n    }\r\n  } catch (e) {\r\n    yield put({ type: types.AUTH_FAIL });\r\n    console.error(\"SAGA ERROR: auth/startAuth, \", e);\r\n  }\r\n}\r\n\r\nfunction* completeAuth(action) {\r\n  try {\r\n    let authInfos = yield call(completeSignIn, action.payload);\r\n\r\n    // check for a response and finish by sending the authentication info to the Redux store\r\n    if (authInfos) {\r\n      yield put({\r\n        type: types.AUTH_SUCCESS,\r\n        payload: authInfos\r\n      });\r\n    } else {\r\n      // error catching if we need it\r\n      yield put({ type: types.AUTH_FAIL })\r\n    }\r\n  } catch (e) {\r\n    yield put({ type: types.AUTH_FAIL });\r\n    console.error(\"SAGA ERROR: auth/startAuth, \", e);\r\n  }\r\n}\r\n\r\nfunction* checkAuth(action) {\r\n  console.log(\"`checkAuth()`\", action);\r\n  try {\r\n    let authInfos = yield call(restoreSession, action.payload.sessionId);\r\n    console.log(\"Returned authInfos value from `checkAuth()`\", authInfos);\r\n    // check for a response and finish by sending the authentication info to the Redux store\r\n    if (authInfos) {\r\n      yield put({\r\n        type: types.AUTH_SUCCESS,\r\n        payload: authInfos\r\n      });\r\n    } else {\r\n      // error catching if we need it\r\n      yield put({ type: types.AUTH_FAIL });\r\n    }\r\n  } catch (e) {\r\n    yield put({ type: types.AUTH_FAIL });\r\n    console.error(\"SAGA ERROR: auth/checkAuth, \", e);\r\n  }\r\n}\r\n\r\nfunction* authLogout(action) {\r\n  try {\r\n    yield call(signOut, action.payload.sessionId);\r\n\r\n    window.location.reload();\r\n  } catch (e) {\r\n    console.error(\"SAGA ERROR: auth/logout, \", e);\r\n  }\r\n}\r\n\r\n// WATCHER //\r\nexport function* watchStartAPI() {\r\n  yield takeLatest(types.AUTH_CHECK, checkAuth);\r\n  yield takeLatest(types.AUTH_START, startAuth);\r\n  yield takeLatest(types.AUTH_COMPLETE, completeAuth);\r\n  yield takeLatest(types.LOGOUT, authLogout);\r\n}\r\n","// #region [copyright]\r\n// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n// #endregion​\r\n\r\n// ACTION TYPES //\r\nexport const types = {\r\n  SET_CONFIG: \"SET_CONFIG\",\r\n  UPDATE_CONFIG: \"UPDATE_CONFIG\",\r\n  CONFIG_FETCH: \"CONFIG_FETCH\"\r\n};\r\n\r\n// REDUCERS //\r\nexport const initialState = {\r\n  loaded: false\r\n};\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case types.SET_CONFIG:\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n        loaded: true\r\n      };\r\n    case types.UPDATE_CONFIG:\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n        loaded: true\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n// ACTIONS //\r\nexport const fetchConfig = () => ({ type: types.CONFIG_FETCH });\r\n\r\nexport const updateConfig = options => ({\r\n  type: types.UPDATE_CONFIG,\r\n  payload: options\r\n});\r\n","//#region [copyright]\r\n// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.​\r\n//#endregion\r\n\r\nfunction status(response) {\r\n  if (response.status >= 200 && response.status < 300) {\r\n    return Promise.resolve(response);\r\n  } else {\r\n    return Promise.reject(new Error(response.statusText));\r\n  }\r\n}\r\n\r\nfunction handleResponse(handleAs, response) {\r\n  switch (handleAs) {\r\n    case \"text\":\r\n      return response.text();\r\n    default:\r\n      return response.json();\r\n  }\r\n}\r\n\r\nfunction objectToUrlSearchParams(obj) {\r\n  const body = new URLSearchParams();\r\n  for (var prop in obj) {\r\n    if (obj.hasOwnProperty(prop)) {\r\n      body.append(prop, obj[prop]);\r\n    }\r\n  }\r\n\r\n  // add f=json if not included\r\n  if (!body.has(\"f\")) {\r\n    body.append(\"f\", \"json\");\r\n  }\r\n\r\n  return body.toString();\r\n}\r\n\r\nfunction getHeaders(isFormData) {\r\n  const headers = {};\r\n\r\n  if (!isFormData) {\r\n    headers[\"content-type\"] = \"application/x-www-form-urlencoded\";\r\n  }\r\n\r\n  return new Headers(headers);\r\n}\r\n\r\nfunction getRequestBody(data, isFormData) {\r\n  // if formdata, make formdata\r\n  if (isFormData) {\r\n    return this.objectToFormData(data);\r\n  }\r\n\r\n  // Not formdata, make url param\r\n  return objectToUrlSearchParams(data);\r\n}\r\n\r\n/**\r\n * @summary { Reference a single method to create `http` requests using fetch() }\r\n * @typedef { Factory Pattern }\r\n * @param   { Object } params Object containing key/value parameters to pass to fetch()\r\n * @return  { Promise }       Promise returned by fetch()\r\n*/\r\nexport function makeRequest(params) {\r\n  return new Promise((resolve, reject) => {\r\n    let url = params.url;\r\n    const data = params.data || {};\r\n    const headers = getHeaders(params.isFormData);\r\n    const options = {\r\n      method: params.method || \"get\",\r\n      headers\r\n    };\r\n\r\n    if (!params.hideCredentials) {\r\n      options.credentials = \"include\";\r\n    }\r\n\r\n    let body = getRequestBody(data, params.isFormData);\r\n\r\n    if (options.method === \"get\") {\r\n      url = `${url}?${body}`;\r\n    } else {\r\n      options.body = body;\r\n    }\r\n\r\n    fetch(url, options)\r\n      .then(status)\r\n      .then(handleResponse.bind(null, params.handleAs))\r\n      .then(function(data) {\r\n        // Handle successful requests that are actually errors...\r\n        if (data.error) {\r\n          reject(data.error);\r\n          return;\r\n        }\r\n        resolve(data);\r\n      })\r\n      .catch(function(error) {\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\n/**\r\n * Make a request for the App Config [public/config] with makeRequest()\r\n * @return { Promise }        Promise returned by makeRequest()\r\n */\r\nexport function getAppConfig() {\r\n  return new Promise((resolve, reject) => {\r\n    makeRequest({\r\n      url: `/config.json`,\r\n      method: \"get\"\r\n    }).then(resp => {\r\n      console.log('Response: ', resp);\r\n      resolve(resp);\r\n    });\r\n  });\r\n}\r\n\r\n// export function getSecurityToken() {\r\n//   return new Promise((resolve, reject) => {\r\n//     makeRequest({\r\n//       url: `http://localhost:5000/api/`,\r\n//       method: \"get\"\r\n//     }).then(resp => {\r\n//       console.log('Response: ', resp);\r\n//       resolve(resp);\r\n//     });\r\n//   });\r\n// }\r\n","// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.​\r\n\r\nimport { call, put, takeLatest } from \"redux-saga/effects\";\r\nimport { types as configTypes } from \"../reducers/config\";\r\nimport { getAppConfig } from \"../../utils/request\";\r\n\r\n// WORKER //\r\nfunction* fetchConfig(action) {\r\n  try {\r\n    // fetch config\r\n    const config = yield call(getAppConfig);\r\n\r\n    // load config into Redux store\r\n    yield put({\r\n      type: configTypes.SET_CONFIG,\r\n      payload: config\r\n    });\r\n  } catch (e) {\r\n    console.error(\"SAGA ERROR: config/fetchConfig, \", e);\r\n  }\r\n}\r\n\r\nfunction* updateConfig(action) {\r\n  try {\r\n    // fetch config\r\n    const config = yield call(getAppConfig);\r\n\r\n    if (config) {\r\n      // load config into Redux store\r\n      yield put({\r\n        type: configTypes.UPDATE_CONFIG,\r\n        payload: action.payload\r\n      });\r\n    }\r\n  } catch (e) {\r\n    console.error(\"SAGA ERROR: config/updateConfig, \", e);\r\n  }\r\n\r\n  // try {\r\n  //   // first try to restore the session from a saved cookie if it exists\r\n  //   let geoJson = yield call(restoreSession, action.payload.geoJsonData);\r\n\r\n  //   // if there isn't a session cookie then we can start a new session\r\n  //   if (!authInfos) {\r\n  //     authInfos = yield call(signIn, action.payload);\r\n  //   }\r\n\r\n  //   // check for a response and finish by sending the authentication info to the Redux store\r\n  //   if (authInfos) {\r\n  //     yield put({\r\n  //       type: types.AUTH_SUCCESS,\r\n  //       payload: authInfos\r\n  //     });\r\n  //   } else {\r\n  //     // error catching if we need it\r\n  //     yield put({ type: types.AUTH_FAIL });\r\n  //   }\r\n  // } catch (e) {\r\n  //   yield put({ type: types.AUTH_FAIL });\r\n  //   console.error(\"SAGA ERROR: auth/startAuth, \", e);\r\n  // }\r\n}\r\n\r\n// WATCHER //\r\nexport function* watchFetchConfig() {\r\n  yield takeLatest(configTypes.CONFIG_FETCH, fetchConfig);\r\n}\r\n\r\nexport function* watchUpdateConfig() {\r\n  yield takeLatest(configTypes.UPDATE_CONFIG, updateConfig);\r\n}\r\n","export const types = {\r\n  SECURITY_TOKEN_CHECK: \"SECURITY_TOKEN_CHECK\",\r\n  SECURITY_TOKEN_SET: \"SECURITY_TOKEN_SET\",\r\n  SECURITY_TOKEN_DECRYPT: \"SECURITY_TOKEN_DECRYPT\",\r\n  SECURITY_TOKEN_FAIL: \"SECURITY_TOKEN_FAIL\",\r\n  SECURITY_TOKEN_SUCCESS: \"SECURITY_TOKEN_SUCCESS\",\r\n};\r\n\r\n// REDUCERS //\r\nexport const INITIAL_STATE = {\r\n  \"isValid\": false,\r\n  \"TempSecurityToken\": null\r\n};\r\n\r\nexport default (state = INITIAL_STATE, action) => {\r\n  switch (action.type) {\r\n    case types.SECURITY_TOKEN_CHECK:\r\n      // const { isValid, securityToken } = action.payload;\r\n\r\n      return {\r\n        ...state,\r\n        isValid: true\r\n      }\r\n\r\n    case types.SECURITY_TOKEN_SET:\r\n\r\n      console.log('SECURITY_TOKEN_SET: ', action);\r\n      // const { TempSecurityToken } = action;\r\n\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n        isValid: true\r\n      }\r\n\r\n    case types.SECURITY_TOKEN_SUCCESS:\r\n\r\n      console.log('SECURITY_TOKEN_SUCCESS: ', action);\r\n      // const { tempSecurityToken } = action.payload;\r\n\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n        isValid: true\r\n      }\r\n\r\n    case types.SECURITY_TOKEN_DECRYPT:\r\n\r\n      console.log('SECURITY_TOKEN_DECRYPT: ', action);\r\n      // const { securityTokenDecrypt } = action;\r\n\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n        isValid: true\r\n      }\r\n      \r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n// ACTIONS //\r\nexport const checkSecurityToken = options => ({\r\n  type: types.SECURITY_TOKEN_CHECK,\r\n  payload: options\r\n});\r\n\r\nexport const setSecurityToken = options => ({\r\n  type: types.SECURITY_TOKEN_SET,\r\n  payload: options\r\n});\r\n\r\nexport const securityTokenSuccess = options => ({\r\n  type: types.SECURITY_TOKEN_SUCCESS,\r\n  payload: options\r\n});\r\n\r\nexport const decryptSecurityToken = options => ({\r\n  type: types.SECURITY_TOKEN_DECRYPT,\r\n  payload: options\r\n});\r\n","/*/\r\n  *  ┌─────────────────────────────────┐\r\n  *  │ |> Area Query - Action Types    │\r\n  *  └─────────────────────────────────┘\r\n/*/\r\nexport const ADD_TO_STORE = \"ADD_TO_STORE\";\r\nexport const ADDED_TO_STORE = \"ADDED_TO_STORE\";\r\n\r\nexport const SEND_AREA_QUERY = \"SEND_AREA_QUERY\";\r\nexport const AREA_QUERY_SENT = \"AREA_QUERY_SENT\";\r\n\r\nexport const AREA_QUERY_READY = \"AREA_QUERY_READY\"; // NOTE: Pending Deletion\r\nexport const AREA_QUERY_DONE = \"AREA_QUERY_DONE\";   // NOTE: Pending Deletion\r\n\r\nexport const AREA_QUERY_FAIL = \"AREA_QUERY_FAIL\"; \r\nexport const AREA_QUERY_STATUS = \"AREA_QUERY_STATUS\";\r\n\r\n// FEATURE LAYER //\r\nexport const BUILD_FEATURE_LAYER = \"BUILD_FEATURE_LAYER\";\r\nexport const FEATURE_LAYER_BUILT = \"AREA_QUERY_STATUS\";\r\nexport const FEATURE_LAYER_FAIL = \"FEATURE_LAYER_FAIL\";\r\n","/*/\r\n  *  ┌─────────────────────────────────────────────┐\r\n  *  │ |> API Request Configuration - Area Query   │\r\n  *  └─────────────────────────────────────────────┘\r\n/*/\r\n// Axios\r\nimport axios from \"axios\";\r\n\r\nrequire('dotenv').config();\r\n\r\n//#region [http]\r\nexport function areaQueryRequest(action) {\r\n  const searchUrl = process.env.REACT_APP_API_BASE_URL + \r\n                    process.env.REACT_APP_API_VERSION + \r\n                    \"/locations/area\";\r\n  \r\n  // TODO: Apply payload prop values via destructuring (action.payload)\r\n  const areaQueryPayload = {\r\n    \"startDate\": action.payload.startDate,\r\n    \"endDate\": action.payload.endDate,\r\n    \"areas\": [{\r\n      \"longitude\": action.payload.longitude,\r\n      \"latitude\": action.payload.latitude,\r\n      \"radius\": action.payload.radius\r\n    }]\r\n  }\r\n\r\n  console.log('REQ PAYLOAD (client-side): ', areaQueryPayload);\r\n  \r\n  return axios.request({\r\n    \"url\": searchUrl,\r\n    \"method\": \"POST\",\r\n    \"data\": areaQueryPayload,\r\n    \"headers\": {\r\n      \"Accept\": \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n      \"Authorization\": process.env.REACT_APP_API_KEY,\r\n      \"TempSecurityToken\": action.payload.TempSecurityToken\r\n    }\r\n\r\n  });\r\n  \r\n}\r\n//#endregion\r\n","/*/\r\n *  ┌────────────────────────────────────────────────────┐\r\n *  │ |> Redux Saga - Area Query Watcher & Worker Sagas  │\r\n *  └────────────────────────────────────────────────────┘\r\n/*/\r\nimport React from 'react';\r\nimport { call, cps, put, takeLatest } from \"redux-saga/effects\";\r\n\r\nimport * as types from \"../types/area-types\";\r\nimport * as requests from \"../sagas/requests/area-query\";\r\n\r\nimport Alert, {\r\n  AlertTitle,\r\n  AlertMessage\r\n} from 'calcite-react/Alert';\r\n// import FeatureLayerBuilder from \"../../components/esri/layers/FeatureLayerBuilder\";\r\n// import * as actions from \"../actions/area-query-actions\";\r\n\r\n// WORKER SAGAS//\r\nfunction* addToStore(action) {\r\n  console.log(\"WORKER: \", action);\r\n  try {\r\n    yield put({ \r\n      type: types.ADDED_TO_STORE,\r\n      payload: action.payload\r\n    });\r\n  } catch (error) {\r\n    console.error(\"SAGA ERROR: data/addToStore, \", error);\r\n  }\r\n}\r\n\r\nfunction* sendAreaQuery(action) {\r\n  console.log(\"WORKER: \", action);\r\n  try {\r\n    const response = yield call(requests.areaQueryRequest, action);\r\n    const { data } = response;\r\n    console.log('RES DATASET (client-side): ', data);\r\n    \r\n    // *Put `locationData` in Redux store for search history\r\n    yield put({ type: types.AREA_QUERY_SENT, payload: data });\r\n    // yield put({ type: types.AREA_QUERY_DONE });\r\n\r\n    // return data;\r\n\r\n  } catch (error) {\r\n    console.error(\"SAGA ERROR: data/sendAreaQuery, \", error);                     \r\n  }\r\n}\r\n\r\nfunction* buildFeatureLayer(action) {\r\n  console.log(\"WORKER: \", action);\r\n  const { areaQueryState, baseMap, mapView } = action.payload;\r\n  try {\r\n    const response = yield call((areaQueryState, baseMap, mapView) => {\r\n      // return (\r\n      //   <React.Fragment>\r\n      //     {\r\n      //       <FeatureLayerBuilder\r\n      //         resJsonProp={areaQueryState}\r\n      //         baseMapProp={baseMap}\r\n      //         mapViewProp={mapView}\r\n      //       />\r\n      //     }\r\n      //   </React.Fragment>\r\n      // )\r\n    })\r\n  } catch (error) {\r\n    console.error(\"SAGA ERROR: data/buildFeatureLayer, \", error);\r\n  }\r\n}\r\n\r\n// WATCHER SAGA //\r\nexport function* watchAreaQuery() {\r\n  yield takeLatest(types.ADD_TO_STORE, addToStore);\r\n  yield takeLatest(types.SEND_AREA_QUERY, sendAreaQuery);\r\n  yield takeLatest(types.BUILD_FEATURE_LAYER, buildFeatureLayer);\r\n}\r\n","/*/\r\n  *  ┌──────────────────────────────────────┐\r\n  *  │ |> Pattern of Life - Action Types    │\r\n  *  └──────────────────────────────────────┘\r\n/*/\r\nexport const ADD_PATTERN_TO_STORE = \"ADD_PATTERN_TO_STORE\";\r\nexport const PATTERN_ADDED_TO_STORE = \"PATTERN_ADDED_TO_STORE\";\r\n\r\nexport const SEND_PATTERN_QUERY = \"SEND_PATTERN_QUERY\";\r\nexport const PATTERN_QUERY_SENT = \"PATTERN_QUERY_SENT\";\r\n\r\nexport const PATTERN_QUERY_READY = \"PATTERN_QUERY_READY\"; // NOTE: Pending Deletion\r\nexport const PATTERN_QUERY_DONE = \"PATTERN_QUERY_DONE\";   // NOTE: Pending Deletion\r\n\r\nexport const PATTERN_QUERY_FAIL = \"PATTERN_QUERY_FAIL\";\r\nexport const PATTERN_QUERY_STATUS = \"PATTERN_QUERY_STATUS\";\r\n","/*/\r\n  *  ┌──────────────────────────────────────────────────┐\r\n  *  │ |> API Request Configuration - Pattern of Life   │\r\n  *  └──────────────────────────────────────────────────┘\r\n/*/\r\n// Axios\r\nimport axios from \"axios\";\r\n\r\nrequire('dotenv').config();\r\n\r\n//#region [http]\r\nexport function patternQueryRequest(action) {\r\n  const searchUrl = process.env.REACT_APP_API_BASE_URL +  \r\n                    process.env.REACT_APP_API_VERSION + \r\n                    \"/locations/area\";\r\n\r\n  console.log('REQ Payload: ', action);\r\n\r\n  // TODO: Apply payload prop values via destructuring\r\n  const { startDate, endDate, registrationID, TempSecurityToken } = action.payload;\r\n\r\n  // NOTE: The API is capable of accepting multiple regIDs. To keep it simple\r\n  // -- The following `regIdArray` is designed to accept a single ID for now\r\n\r\n  const patternQueryPayload = {\r\n    \"startDate\": startDate,\r\n    \"endDate\": endDate,\r\n    \"registrationIDs\": [{ \"registrationID\": registrationID }]\r\n  }\r\n\r\n  console.log('REQ PAYLOAD (client-side): ', patternQueryPayload);\r\n\r\n  return axios.request({\r\n    \"url\": searchUrl,\r\n    \"method\": \"POST\",\r\n    \"data\": patternQueryPayload,\r\n    \"headers\": {\r\n      \"Accept\": \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n      \"Authorization\": process.env.REACT_APP_API_KEY,\r\n      \"TempSecurityToken\": TempSecurityToken.securityToken\r\n    }\r\n\r\n  });\r\n  \r\n}\r\n//#endregion","/*/\r\n *  ┌─────────────────────────────────────────────────────────┐\r\n *  │ |> Redux Saga - Pattern of Life Watcher & Worker Sagas  │\r\n *  └─────────────────────────────────────────────────────────┘\r\n/*/\r\nimport React from 'react';\r\nimport { call, put, takeLatest } from \"redux-saga/effects\";\r\n\r\nimport * as types from \"../types/pattern-of-life-types\";\r\nimport * as requests from \"../sagas/requests/pattern-of-life-query\";\r\n// import FeatureLayerBuilder from \"../../components/esri/layers/FeatureLayerBuilder\";\r\n// import * as actions from \"../actions/area-query-actions\";\r\n\r\n// WORKER SAGAS//\r\nfunction* addPatternToStore(action) {\r\n  console.log(\"ADD PATTERN WORKER: \", action);\r\n  try {\r\n    yield put({\r\n      type: types.PATTERN_ADDED_TO_STORE,\r\n      payload: action.payload\r\n    });\r\n  } catch (error) {\r\n    console.error(\"SAGA ERROR: data/addPatternToStore, \", error);\r\n  }\r\n}\r\n\r\nfunction* sendPatternQuery(action) {\r\n  console.log(\"SEND PATTERN WORKER: \", action);\r\n  try {\r\n    const response = yield call(requests.patternQueryRequest, action);\r\n    const { data } = response;\r\n    console.log('RES DATASET (client-side): ', data);\r\n\r\n    // *Put `patternData` in Redux store for global access\r\n    yield put({ type: types.PATTERN_QUERY_SENT, payload: data });\r\n    yield put({ type: types.PATTERN_QUERY_DONE, payload: data });\r\n    return data;\r\n\r\n  } catch (error) {\r\n    console.error(\"SAGA ERROR: data/sendPatternQuery, \", error);\r\n  }\r\n}\r\n\r\n// WATCHER SAGA //\r\nexport function* watchPatternQuery() {\r\n  yield takeLatest(types.ADD_PATTERN_TO_STORE, addPatternToStore);\r\n  yield takeLatest(types.SEND_PATTERN_QUERY, sendPatternQuery);\r\n}\r\n","//#region [copyright]\r\n// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.​\r\n//#endregion\r\n\r\n/*/\r\n*  ┌─────────────────────────────────────┐\r\n*  │ |> Combine Sagas into one output    │\r\n*  └─────────────────────────────────────┘\r\n/*/\r\nimport { all, fork } from 'redux-saga/effects';\r\n\r\nimport * as authSagas from './_auth';\r\nimport * as configSagas from './_config';\r\nimport * as securitySagas from './_security-token';\r\nimport * as areaSagas from './_area-query';\r\nimport * as patternSagas from './_pattern-of-life-query';\r\n\r\nexport default function* rootSaga() {\r\n  yield all([\r\n    ...Object.values(authSagas),\r\n    ...Object.values(configSagas),\r\n    ...Object.values(securitySagas),\r\n    ...Object.values(areaSagas),\r\n    ...Object.values(patternSagas)\r\n    // include all additional Sagas\r\n  ].map(fork));\r\n}\r\n","/*/\r\n *  ┌───────────────────────┐\r\n *  │ |> Format Utility     │\r\n *  └───────────────────────┘\r\n/*/\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// Format.propTypes = {\r\n//   date: PropTypes.object\r\n// };\r\n\r\nconst Format = ({ date }) => {\r\n\r\n  return;\r\n}\r\n\r\nconst dateToIsoString = (date) => {\r\n  const dateObj = new Date(date);\r\n  const dateObjIso = dateObj.toISOString().slice(0, -5) + 'Z';\r\n\r\n  console.group('Formatted Date:>');\r\n  console.log('Date Prop: ', dateObj);\r\n  console.log('Format Date: ', dateObjIso);\r\n  console.groupEnd();\r\n\r\n  return dateObjIso;\r\n} \r\n\r\nexport default Format;\r\nexport { dateToIsoString }\r\n","/*/\r\n *  ┌────────────────────────────────────┐\r\n *  │ |> Redux Reducers - Area Query     │\r\n *  └────────────────────────────────────┘\r\n/*/\r\n\r\n// ACTION TYPES //\r\nimport * as types from \"../types/area-types\";\r\nimport Format, { dateToIsoString } from '../../utils/format';\r\n\r\n// REDUCERS //\r\nconst dateObj = new Date();\r\nconst sDate = dateObj.setDate(dateObj.getDate() - 7);\r\nconst eDate = dateObj.setDate(dateObj.getDate());\r\nconst sDateIso = dateToIsoString(new Date(sDate));\r\nconst eDateIso = dateToIsoString(new Date(eDate));\r\n\r\n// TODO: Create `dates-range` reducer for dates to be accessible by all components \r\nexport const INITIAL_STATE = {\r\n  startDate: sDate,\r\n  endDate: eDate,\r\n  latitude: 0,\r\n  longitude: 0,\r\n  radius: 10,\r\n  status: \"idle\", // [\"idle\", \"loading\", \"success\", \"error\" ]\r\n  locationData: {}\r\n};\r\n\r\nexport default (state = INITIAL_STATE, action) => {\r\n  switch (action.type) {\r\n    case types.ADDED_TO_STORE:\r\n      console.log('ADDED: ', action);\r\n\r\n      // TODO: Finish validation code before prod deployment \r\n      // const { latitude, longitude, radius } = action.payload;\r\n\r\n      // const startDate = state.startDate;\r\n      // const endDate = state.endDate;\r\n      // let status = '';\r\n\r\n      // // Validate all properties are success\r\n      // if ((startDate && endDate) && (latitude && longitude)) {\r\n      //   status = 'success';\r\n      // } else {\r\n      //   status = 'loading';\r\n      // }\r\n\r\n      if (typeof action.payload == 'string') {\r\n        let incoming = action.payload;\r\n        return {\r\n          ...state,\r\n          ...action.payload,\r\n          status: \"loading\"\r\n        }\r\n      } else {\r\n        return {\r\n          ...state,\r\n          ...action.payload,\r\n          status: \"loading\"\r\n        }\r\n      }\r\n\r\n    case types.AREA_QUERY_SENT:\r\n      console.log('SENT: ', action);\r\n\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n        status: \"success\"\r\n      }\r\n\r\n    case types.AREA_QUERY_DONE:\r\n      console.log('SUCCESS: ', action);\r\n\r\n      return {\r\n        ...state,\r\n        status: \"success\"\r\n      }\r\n\r\n    case types.AREA_QUERY_FAIL:\r\n      console.log('FAIL: ', action);\r\n      return state;\r\n\r\n    case types.AREA_QUERY_STATUS:\r\n      console.log('STATUS: ', action);\r\n\r\n      return {\r\n        status: state.status\r\n      }\r\n\r\n    // NOTE: FeatureBuilderLayer\r\n    case types.BUILD_FEATURE_LAYER:\r\n      console.log('BUILD_FEATURE_LAYER: ', action);\r\n\r\n      return state;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n// ACTIONS //\r\nexport const addToStoreAction = options => ({\r\n  type: types.ADD_TO_STORE,\r\n  payload: options\r\n});\r\n\r\nexport const addedToStoreAction = options => ({\r\n  type: types.ADDED_TO_STORE,\r\n  payload: options\r\n});\r\n\r\nexport const sendAreaQueryAction = options => ({\r\n  type: types.SEND_AREA_QUERY,\r\n  payload: options\r\n});\r\n\r\nexport const areaQuerySentAction = options => ({\r\n  type: types.AREA_QUERY_SENT,\r\n  payload: options\r\n});\r\n\r\nexport const areaQueryReadyAction = options => ({\r\n  type: types.AREA_QUERY_READY, // readonly\r\n  payload: options\r\n});\r\n\r\nexport const areaQueryDoneAction = () => ({\r\n  type: types.AREA_QUERY_DONE,\r\n});\r\n\r\nexport const areaQueryFailAction = err => ({\r\n  type: types.AREA_QUERY_FAIL, // readonly\r\n  payload: err\r\n});\r\n\r\nexport const areaQueryStatusAction = options => ({\r\n  type: types.AREA_QUERY_STATUS, // readonly\r\n  payload: options\r\n});\r\n\r\n// TODO: Determine if 'FeatureLayerBuilder' actions merit a dedicated reducer\r\nexport const buildFeatureLayerAction = options => ({\r\n  type: types.BUILD_FEATURE_LAYER,\r\n  payload: options\r\n});\r\n\r\nexport const featureLayerBuiltAction = options => ({\r\n  type: types.FEATURE_LAYER_BUILT,\r\n  payload: options\r\n});\r\n\r\nexport const featureLayerFailAction = err => ({\r\n  type: types.FEATURE_LAYER_FAIL, // readonly\r\n  payload: err\r\n});\r\n","// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.​\r\n\r\n// ACTION TYPES //\r\nexport const types = {\r\n  MAP_LOADED: \"MAP_LOADED\"\r\n};\r\n\r\n// REDUCERS //\r\nexport const INITIAL_STATE = {\r\n  loaded: false\r\n};\r\n\r\nexport default (state = INITIAL_STATE, action) => {\r\n  switch (action.type) {\r\n    case types.MAP_LOADED:\r\n      return {\r\n        ...state,\r\n        loaded: true\r\n      };\r\n      \r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n// ACTIONS //\r\nexport const mapLoaded = options => ({ \r\n  type: types.MAP_LOADED, \r\n  payload: options \r\n});\r\n","/*/\r\n *  ┌───────────────────────────────────────┐\r\n *  │ |> Pattern of Life - Redux Reducer    │\r\n *  └───────────────────────────────────────┘\r\n/*/\r\n\r\n// ACTION TYPES //\r\nimport * as types from \"../types/pattern-of-life-types\";\r\nimport Format, { dateToIsoString } from '../../utils/format';\r\n\r\n// REDUCERS //\r\nconst dateObj = new Date();\r\nconst sDate = dateObj.setDate(dateObj.getDate() - 7);\r\nconst eDate = dateObj.setDate(dateObj.getDate());\r\nconst sDateIso = dateToIsoString(new Date(sDate));\r\nconst eDateIso = dateToIsoString(new Date(eDate));\r\n\r\n// TODO: Create `dates-range` reducer for dates to be accessible by all components \r\nexport const INITIAL_STATE = {\r\n  startDate: sDateIso,\r\n  endDate: eDateIso,\r\n  registrationIDs: null,    // Each object contains a`registrationID` prop\r\n  status: \"idle\",         // [\"idle\", \"loading\", \"success\", \"error\" ]\r\n  locationData: {}\r\n};\r\n\r\nexport default (state = INITIAL_STATE, action) => {\r\n  switch (action.type) {\r\n    case types.PATTERN_ADDED_TO_STORE:\r\n      console.log('PATTERN_ADDED_TO_STORE: ', action);\r\n      // let incoming = action.payload;\r\n      // const { registrationIDs } = action.payload;\r\n\r\n      // TODO: Finish validation code before prod deployment \r\n      console.log('DataType: String: ', action.payload);\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n        status: \"loading\"\r\n      }\r\n\r\n    case types.PATTERN_QUERY_SENT:\r\n      console.log('PATTERN_QUERY_SENT: ', action);\r\n      // const { registrationIDs } = action.payload;\r\n\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n        status: \"success\"\r\n      }\r\n\r\n    case types.PATTERN_QUERY_DONE:\r\n      console.log('SUCCESS: ', action);\r\n\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n        status: \"idle\"\r\n      }\r\n\r\n    case types.PATTERN_QUERY_FAIL:\r\n      console.log('FAIL: ', action);\r\n      return state;\r\n\r\n    case types.PATTERN_QUERY_STATUS:\r\n      console.log('STATUS: ', action);\r\n\r\n      return {\r\n        status: state.status\r\n      }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n// ACTIONS //\r\nexport const addPatternToStoreAction = options => ({\r\n  type: types.ADD_PATTERN_TO_STORE,\r\n  payload: options\r\n});\r\n\r\nexport const addedToStoreAction = options => ({\r\n  type: types.PATTERN_ADDED_TO_STORE,\r\n  payload: options\r\n});\r\n\r\nexport const sendPatternQueryAction = options => ({\r\n  type: types.SEND_PATTERN_QUERY,\r\n  payload: options\r\n});\r\n\r\nexport const patternQuerySentAction = options => ({\r\n  type: types.PATTERN_QUERY_SENT,\r\n  payload: options\r\n});\r\n\r\nexport const patternQueryReadyAction = options => ({\r\n  type: types.PATTERN_QUERY_READY, // readonly\r\n  payload: options\r\n});\r\n\r\nexport const patternQueryDoneAction = () => ({\r\n  type: types.PATTERN_QUERY_DONE,\r\n});\r\n\r\nexport const patternQueryFailAction = err => ({\r\n  type: types.PATTERN_QUERY_FAIL, // readonly\r\n  payload: err\r\n});\r\n\r\nexport const patternQueryStatusAction = options => ({\r\n  type: types.PATTERN_QUERY_STATUS, // readonly\r\n  payload: options\r\n});\r\n","/*/\r\n *  ┌─────────────────────────────────────┐\r\n *  │ |> Axios Request - Security Token   │\r\n *  └─────────────────────────────────────┘\r\n/*/\r\n// Axios\r\nimport axios from \"axios\";\r\n\r\nrequire('dotenv').config();\r\n\r\n//#region [http]\r\nexport function setSecurityTokenRequest() {\r\n  return axios.request({\r\n    method: \"get\",\r\n    url:  process.env.REACT_APP_API_BASE_URL + \r\n          process.env.REACT_APP_API_VERSION + \r\n          \"/securities/token\"\r\n  });\r\n}\r\n//#endregion\r\n","import { call, put } from \"redux-saga/effects\";\r\nimport { setSecurityToken, securityTokenSuccess,  } from \"../../reducers/security-token\";\r\nimport { setSecurityTokenRequest, mockSecurityTokenRequest } from \"../requests/security-token\";\r\n\r\n// !! File pending deletion - Needs to be deleted once Redux-Saga refactoring is complete !!\r\n// !! Merge this logic into the corresponding file in '/requests' directory\r\n\r\nexport function* handleSetSecurityToken(action) {\r\n  try {\r\n    const response = yield call(setSecurityTokenRequest);\r\n    const { data } = response;\r\n    console.log(\"Handler Response: \", response);\r\n    yield put(securityTokenSuccess(data));\r\n\r\n  } catch (error) {\r\n    console.log('Error: ', error);\r\n  }\r\n}\r\n","import * as types from \"../types/area-types\";\r\n\r\n/*/\r\n  *  ┌──────────────────────────────────────┐\r\n  *  │ |> Redux Actions - Area Queries      │\r\n  *  └──────────────────────────────────────┘\r\n/*/\r\n\r\n// !! File is no longer used - Will be deleted once Redux-Saga refactoring is complete !!\r\n\r\n// ACTIONS //\r\nexport const addToStoreAction = options => ({\r\n  type: types.ADD_TO_STORE,\r\n  payload: options\r\n});\r\n\r\n// TODO: Look into why '_Saga' had to be removed from action type  \r\nexport const addedToStoreAction = options => ({\r\n  type: types.ADDED_TO_STORE,\r\n  payload: options\r\n});\r\n\r\n// NOTE: Is this action set needed? (PENDING DELETION)\r\nexport const areaQueryReadyAction = task => ({\r\n  type: types.AREA_QUERY_READY, // readonly\r\n  task\r\n});\r\n\r\nexport const sendAreaQueryAction = options => ({\r\n  type: types.SEND_AREA_QUERY,\r\n  payload: options\r\n});\r\n\r\nexport const areaQuerySentAction = options => ({\r\n  type: types.AREA_QUERY_SENT,\r\n  payload: options\r\n});\r\n\r\n// NOTE: Is this action set needed? (PENDING DELETION)\r\nexport const areaQueryDoneAction = task => ({\r\n  type: types.AREA_QUERY_DONE,\r\n  task\r\n});\r\n\r\n// NOTE: Consolidate into single action\r\nexport const areaQueryFailAction = task => ({\r\n  type: types.AREA_QUERY_FAIL, // readonly\r\n  task\r\n});\r\n\r\n// NOTE: Consolidate into single action\r\nexport const areaQueryStatusAction = task => ({\r\n  type: types.AREA_QUERY_STATUS, // readonly\r\n  task\r\n});\r\n","import { takeEvery, takeLatest } from \"redux-saga/effects\";\r\n\r\nimport { handleSetSecurityToken } from \"./handlers/security-token\";\r\n// import { handleRefIdQueryPush } from \"./handlers/refid-query\";\r\n\r\nimport { areaQueryPushSaga } from \"../actions/area-query-actions\";\r\n\r\nimport { handleAreaQueryPuts, handleAreaQueryPush, handlesendAreaQuery } from \"./handlers/area-query\";\r\n\r\nimport { types as securityTypes } from \"../reducers/security-token\";\r\nimport * as areaQueryTypes from \"../types/area-types\";\r\n// import { types as refIdQueryTypes } from \"../reducers/refid-query\";\r\n// import { types as polygonQueryTypes } from \"../reducers/polygon-query\";\r\n\r\n// Configure Error Handler\r\nconst handleErrors = err => {\r\n  const resp = new Response(JSON.stringify({\r\n    \"code\": err.code,\r\n    \"message\": err.statusText\r\n  }));\r\n  \r\n  console.warn(resp);\r\n  return resp;\r\n}\r\n\r\n// const getStatus = state => state.select;\r\n\r\n// TODO: This watcherSaga() to be merged into rootSaga() ./index.js\r\nexport function* watcherSaga() {\r\n  // yield takeLatest(securityTypes.SECURITY_TOKEN_SET, (!handleSetSecurityToken) ? handleErrors : handleSetSecurityToken);\r\n  yield takeLatest(securityTypes.SECURITY_TOKEN_SET, handleSetSecurityToken);\r\n  // yield takeLatest(areaQueryTypes.ADD_TO_STORE, (!areaQueryPushSaga) ? handleErrors : areaQueryPushSaga);\r\n  // yield takeLatest(areaQueryTypes.ADD_TO_STORE, areaQueryPushSaga);\r\n  // yield takeLatest(areaQueryTypes.ADD_TO_STORE, (!handleAreaQueryPush) ? handleErrors : handleAreaQueryPush);\r\n  // yield takeLatest(areaQueryTypes.SEND_AREA_QUERY, handlesendAreaQuery);\r\n\r\n}\r\n\r\n// TODO: Create a `seleector` function that will return current status of the redux store\r\n// For example, suppose we have this state shape in our application:\r\n// state = { cart: { ...} }\r\n// We can create a selector, i.e.a function which knows how to extract the cart data from the State:\r\n// ./ selectors\r\n// export const getCart = state => state.cart\r\n\r\n// Then we can use that selector from inside a Saga using the select Effect:\r\n// ./ sagas.js\r\n// import { take, fork, select } from 'redux-saga/effects' import { getCart } from './selectors'\r\n\r\n// function* checkout() { // query the state using the exported selector const cart = yield select(getCart)\r\n\r\n//   //-- ... call some API endpoint then dispatch a success/error action\r\n// }\r\n\r\n// export default function* rootSaga() { while (true) { yield take('CHECKOUT_REQUEST') yield fork(checkout) } }\r\n","export default __webpack_public_path__ + \"static/media/Topo-Abs-BG.b496ff06.svg\";","// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.​\r\n\r\n// React\r\nimport React from \"react\";\r\n\r\n// Components\r\nimport Loader from \"calcite-react/Loader\";\r\nimport background from \"../styles/images/Topo-Abs-BG.svg\";\r\nimport logo from \"../styles/images/quiet-professionals-logo.png\";\r\n\r\n// Styled & Motion Components\r\nimport styled from \"styled-components\";\r\nimport { motion } from \"framer-motion\";\r\n\r\n\r\nconst Container = styled.div`\r\n  position: absolute;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  width: 100%;\r\n  background: rgba(255, 255, 255, 0.1) url(${background}) no-repeat center/cover;\r\n  background-blend-mode: screen;\r\n`;\r\n\r\nconst Wrapper = styled.div`\r\n  position: absolute;\r\n  top: 48vh;\r\n  margin: 0 auto;\r\n  color: #cacaca;\r\n  font-weight: 400;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  position: absolute;\r\n  right: 0;\r\n  bottom: 0;\r\n  z-index: 20;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 100vw;\r\n  padding: 2em;\r\n  text-align: center;\r\n  color: white;\r\n`;\r\n\r\n// const Label = styled.h1`\r\n//   font-size: 2em;\r\n//   text-shadow: -2px 2px 8px rgba(0, 0, 0, 0.25);\r\n// `;\r\n\r\nconst Logo = styled.img`\r\n  width: 8em;\r\n  height: 100%;\r\n  margin-right: 1em;\r\n  margin-bottom: 1em;\r\n`;\r\n\r\nconst FadingContainer = () => (\r\n  <motion.div\r\n    initial={{ opacity: 1, zIndex: 1000 }}\r\n    animate={{\r\n      opacity: 0,\r\n      transitionEnd: {\r\n        display: \"none\"\r\n      }\r\n    }}\r\n    transition={{ delay: 1, duration: 1, ease: \"easeInOut\" }}\r\n  >\r\n    <Container></Container>\r\n  </motion.div>\r\n);\r\n\r\nconst LoadScreen = props => {\r\n  if (!props.isLoading) {\r\n    return (\r\n      <Container>\r\n        <Title>\r\n          {/* <Logo src={logo}></Logo> */}\r\n          {/* <Label>AMPD</Label> */}\r\n          {/* <h2>Gavel</h2>\r\n            <h4>Powered by Quiet Professionals LLC</h4> */}\r\n        </Title>\r\n        <Wrapper>\r\n          <Loader text={'Loading Gavel...'} />\r\n        </Wrapper>\r\n\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return <FadingContainer />;\r\n};\r\n\r\nexport default LoadScreen;\r\n                                                                                ","// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.​\r\n\r\n/**\r\n * This is an example component used to showcase authentication\r\n * @type {Class}\r\n */\r\n\r\n// React\r\nimport React from \"react\";\r\n\r\n// Components\r\nimport TopNavActionsList from \"calcite-react/TopNav/TopNavActionsList\";\r\nimport ArcgisAccount from \"calcite-react/ArcgisAccount\";\r\nimport ArcgisAccountMenuItem from \"calcite-react/ArcgisAccount/ArcgisAccountMenuItem\";\r\nimport Button from \"calcite-react/Button\";\r\n\r\n// Class\r\nconst UserAccount = props => {\r\n  const signedInActionsComponent = props.user ? (\r\n    <TopNavActionsList style={{ padding: 0 }}>\r\n      <ArcgisAccount\r\n        user={props.user}\r\n        portal={props.portal}\r\n        token={props.token}\r\n        onRequestSwitchAccount={() => console.log(\"switch account clicked\")}\r\n        onRequestSignOut={props.signOut}>\r\n        <ArcgisAccountMenuItem onClick={() => console.log(\"Profile & Settings clicked\")}>\r\n          Profile &amp; Settings\r\n        </ArcgisAccountMenuItem>\r\n        <ArcgisAccountMenuItem onClick={() => console.log(\"My Esri clicked\")}>\r\n          My Esri\r\n        </ArcgisAccountMenuItem>\r\n        <ArcgisAccountMenuItem onClick={() => console.log(\"Training clicked\")}>\r\n          Training\r\n        </ArcgisAccountMenuItem>\r\n        <ArcgisAccountMenuItem onClick={() => console.log(\"Community & Forums clicked\")}>\r\n          Community &amp; Forums\r\n        </ArcgisAccountMenuItem>\r\n        <ArcgisAccountMenuItem onClick={() => console.log(\"ArcGIS Online clicked\")}>\r\n          ArcGIS Online\r\n        </ArcgisAccountMenuItem>\r\n      </ArcgisAccount>\r\n    </TopNavActionsList>\r\n  ) : null;\r\n\r\n  const signedOutActionsComponent = (\r\n    <TopNavActionsList>\r\n      <Button clear onClick={props.signIn}>\r\n        Sign In\r\n      </Button>\r\n    </TopNavActionsList>\r\n  );\r\n\r\n  let outputComponent = props.loggedIn\r\n    ? signedInActionsComponent\r\n    : signedOutActionsComponent;\r\n\r\n  return <div>{outputComponent}</div>;\r\n};\r\n\r\nexport default UserAccount;\r\n"," /**--------------------------------------------------------------------------------------------- ->\r\n*  ┌────────────────────────────────────┐\r\n*  │ |> GAVEL - Feature Layer Service   │\r\n*  └────────────────────────────────────┘\r\n*\r\n*  @description:   'Custom service creates a Feature Service & adds features into user's Esri portal'\r\n*  @implements:    'JSON data object template that will create service leveraging the REST APIs'\r\n*  @returns:       'Esri Feature Service (hosted) containing Point Features to render on map'\r\n*\r\n*/\r\n\r\n// Esri\r\nimport { UserSession } from \"@esri/arcgis-rest-auth\";\r\nimport { getPortal } from \"@esri/arcgis-rest-portal\";\r\nimport { \r\n  applyEdits, \r\n  addToDefinition, \r\n  addFeatures\r\n} from '@esri/arcgis-rest-feature-layer';\r\nimport { \r\n  createFeatureService,\r\n  addToServiceDefinition \r\n} from \"@esri/arcgis-rest-service-admin\";\r\n\r\n// QP\r\nimport { getSession } from \"../../../utils/session\";\r\n\r\n// Helpers\r\nimport Cookies from \"js-cookie\";\r\n\r\n// Other\r\nimport { parse, stringify } from 'flatted';\r\n// import { buildFeatureLayerAction } from \"../../../redux/reducers/area-query\";\r\n// import { formatDiagnosticsWithColorAndContext } from \"typescript\";\r\n\r\n// const session = getSession(\"qp_gavel_app_session\");\r\n// console.log(\"Session: \", session);\r\n\r\n// BUG: Experiencing CORS issues when trying to access QPTampa Portal\r\n// !Pointing to ArcGis Online Portal in the meantime\r\nexport const CREATE_FEATURE_SERVICE = () => {\r\n  // TODO: Update sessionId value more dynamic \r\n  const session = getSession(\"qp_gavel_app_session\");\r\n  const timestamp = Date.now();\r\n\r\n  return createFeatureService({\r\n    // portal: \"https://qptampa.maps.arcgis.com\",\r\n    authentication: session,\r\n    item: {\r\n      \"name\": \"GavelFeatureService_\" + timestamp,\r\n      \"isView\": true,\r\n      \"sourceSchemaChangesAllowed\": true,\r\n      \"isUpdatableView\": true,\r\n      \"spatialReference\": {\r\n        \"wkid\": 102100,\r\n        \"latestWkid\": 3857\r\n      },\r\n      \"initialExtent\": {\r\n        \"xmin\": -20037507.0671618,\r\n        \"ymin\": -30240971.9583862,\r\n        \"xmax\": 20037507.0671618,\r\n        \"ymax\": 18398924.324645,\r\n        \"spatialReference\": {\r\n          \"wkid\": 102100,\r\n          \"latestWkid\": 3857\r\n        }\r\n      },\r\n      \"allowGeometryUpdates\": true,\r\n      \"hasStaticData\": true,\r\n      \"maxRecordCount\": 1000,\r\n      \"supportedQueryFormats\": \"JSON\",\r\n      \"copyrightText\": \"&copy;2021 Quiet Professionals, LLC\",\r\n      \"description\": \"A <strong>Feature Service</strong> designed to hold data from a single <strong>Feature Layer</strong>\",\r\n      \"editorTrackingInfo\": {\r\n        \"allowAnonymousToDelete\": false,\r\n        \"allowAnonymousToUpdate\": false,\r\n        \"allowOthersToDelete\": false,\r\n        \"allowOthersToQuery\": true,\r\n        \"allowOthersToUpdate\": false,\r\n        \"enableEditorTracking\": true,\r\n        \"enableOwnershipAccessControl\": true\r\n      },\r\n      \"capabilities\": \"Create,Delete,Update\",\r\n      \"preserveLayerIds\": false,\r\n      \"serviceDescription\": \"A <strong>Feature Service</strong> designed to hold data from a single <strong>Feature Layer</strong>\",\r\n      \"units\": \"esriSRUnit_Meter\",\r\n      \"xssPreventionInfo\": {\r\n        \"xssPreventionEnabled\": true,\r\n        \"xssPreventionRule\": \"input\",\r\n        \"xssInputRule\": \"rejectInvalid\"\r\n      }\r\n    }\r\n    // portal: \"https://qptampa.maps.arcgis.com\",\r\n  });\r\n\r\n}\r\n\r\n// NOTE: Add Feature Layer Definitions / Schema to Service\r\nexport const ADD_TO_SERVICE_DEFINITION = (res, layer) => {\r\n  const serviceUrl = res.serviceurl;\r\n  const layerDef = layer.layer.source.items;\r\n  // TODO: Update sessionId dynamicaly  \r\n  const session = getSession(\"qp_gavel_app_session\");\r\n  const timestamp = Date.now();\r\n\r\n  console.log(\"FEATURE_SERVICE_CREATED: \", res);\r\n  console.log(\"Session: \", session);\r\n  console.log(\"Layer JSON: \", layerDef);\r\n\r\n  // Create new Schema for Point Layer\r\n  const serviceDefinition = addToServiceDefinition(serviceUrl, {\r\n    // portal: \"https://qptampa.maps.arcgis.com\",\r\n    \"adminServiceInfo\": {\r\n      \"name\": \"Gavel Feature Service / Layer\",\r\n      \"type\": \"FeatureServer\",\r\n      \"maxRecordCount\": 5000\r\n    },\r\n    authentication: session,\r\n    layers: [\r\n      {\r\n        \"adminLayerInfo\": {\r\n          \"geometryField\": {\r\n            \"name\": \"Shape\",\r\n            \"srid\": 102100\r\n          },\r\n          \"tableExtent\": {\r\n            \"xmin\": -178.215026855,\r\n            \"ymin\": 18.9247817990001,\r\n            \"xmax\": -66.969848633,\r\n            \"ymax\": 71.406646729,\r\n            spatialReference: { \"wkid\": 102100, \"latestWkid\": 3857 },\r\n          }\r\n        },\r\n        \"id\": 0,\r\n        \"name\": \"Gavel\",\r\n        \"layerType\": \"Feature Layer\",\r\n        \"displayField\": \"New Feature Layer\",\r\n        // \"source\": [{ layerDef }],\r\n        \"description\": \"Feature Layer that contains relative statistcal / analytical data\",\r\n        \"copyrightText\": \"&copy;2021 Quiet Professionals, LLC\",\r\n        \"defaultVisibility\": true,\r\n        \"visibilityField\": \"visible\",\r\n        \"editingInfo\": { \"lastEditDate\": null },\r\n        \"relationships\": [],\r\n        \"isDataVersioned\": false,\r\n        \"supportsAppend\": true,\r\n        \"supportsCalculate\": true,\r\n        \"supportsTruncate\": true,\r\n        \"supportsAttachmentsResizing\": true,\r\n        \"supportsRollbackOnFailureParameter\": true,\r\n        \"supportsStatistics\": true,\r\n        \"supportsAdvancedQueries\": true,\r\n        \"supportsValidateSql\": true,\r\n        \"supportsCoordinatesQuantization\": true,\r\n        \"supportsApplyEditsWithGlobalIds\": false,\r\n        \"supportsAttachmentsByUploadId\": true,\r\n        \"advancedQueryCapabilities\": {\r\n          \"supportsPagination\": true,\r\n          \"supportsPaginationOnAggregatedQueries\": true,\r\n          \"supportsQueryRelatedPagination\": true,\r\n          \"supportsQueryWithDistance\": true,\r\n          \"supportsReturningQueryExtent\": true,\r\n          \"supportsStatistics\": true,\r\n          \"supportsOrderBy\": true,\r\n          \"supportsDistinct\": true,\r\n          \"supportsQueryWithResultType\": true,\r\n          \"supportsSqlExpression\": true,\r\n          \"supportsAdvancedQueryRelated\": true,\r\n          \"supportsCountDistinct\": true,\r\n          \"supportsLod\": true,\r\n          \"supportsReturningGeometryCentroid\": false,\r\n          \"supportsQueryWithDatumTransformation\": true,\r\n          \"supportsHavingClause\": true,\r\n          \"supportsOutFieldSQLExpression\": true\r\n        },\r\n        \"useStandardizedQueries\": true,\r\n        \"geometryType\": \"esriGeometryPoint\",\r\n        \"minScale\": 0,\r\n        \"maxScale\": 0,\r\n        \"extent\": {\r\n          \"xmin\": -20037508.342788905,\r\n          \"ymin\": -8175201.3721496435,\r\n          \"xmax\": -10018754.171394452,\r\n          \"ymax\": 12175461.54272524,\r\n          \"spatialReference\": {\r\n            \"wkid\": 102100,\r\n            \"latestWkid\": 3857\r\n          }\r\n        },\r\n        \"drawingInfo\": { \r\n          \"renderer\": { \r\n            \"type\": \"simple\", \r\n            \"symbol\": { \r\n              \"type\": \"esriSMS\",\r\n              \"style\": \"esriSMSCircle\",\r\n              \"color\": [215, 25, 28, 1],\r\n              \"outline\": {\r\n                \"color\": [255, 255, 255, 0.7],\r\n                \"width\": 0.5,\r\n                \"type\": \"esriSLS\",\r\n                \"style\": \"esriSLSSolid\"\r\n              },\r\n              \"size\": 7.5\r\n            },\r\n            \"label\": \"\",\r\n            \"description\": \"\",\r\n          }, \r\n          \"transparency\": 0,\r\n        },\r\n        \"allowGeometryUpdates\": true,\r\n        \"hasAttachments\": false,\r\n        \"htmlPopupType\": \"esriServerHTMLPopupTypeAsHTMLText\",\r\n        \"hasM\": false,\r\n        \"hasZ\": false,\r\n        \"objectIdField\": \"FID\",\r\n        \"uniqueIdField\": {\r\n          \"name\": \"FID\",\r\n          \"isSystemMaintained\": true\r\n        },\r\n        \"globalIdField\": \"GlobalID\",\r\n        \"typeIdField\": \"\",\r\n        \"fields\": [\r\n          {\r\n            \"name\": \"OBJECTID\",\r\n            \"type\": \"esriFieldTypeInteger\",\r\n            \"actualType\": \"int\",\r\n            \"alias\": \"OBJECTID\",\r\n            \"sqlType\": \"sqlTypeInteger\",\r\n            \"nullable\": true,\r\n            \"editable\": true,\r\n            \"domain\": null,\r\n            \"defaultValue\": null\r\n          },\r\n          {\r\n            \"name\": \"registrationID\",\r\n            \"type\": \"esriFieldTypeString\",\r\n            \"actualType\": \"nvarchar\",\r\n            \"alias\": \"registrationID\",\r\n            \"sqlType\": \"sqlTypeNVarchar\",\r\n            \"length\": 256,\r\n            \"nullable\": true,\r\n            \"editable\": true,\r\n            \"domain\": null,\r\n            \"defaultValue\": null\r\n          },\r\n          {\r\n            \"name\": \"ipAddress\",\r\n            \"type\": \"esriFieldTypeString\",\r\n            \"actualType\": \"nvarchar\",\r\n            \"alias\": \"ipAddress\",\r\n            \"sqlType\": \"sqlTypeNVarchar\",\r\n            \"length\": 256,\r\n            \"nullable\": true,\r\n            \"editable\": true,\r\n            \"domain\": null,\r\n            \"defaultValue\": null\r\n          },\r\n          {\r\n            \"name\": \"flags\",\r\n            \"type\": \"esriFieldTypeInteger\",\r\n            \"actualType\": \"int\",\r\n            \"alias\": \"flags\",\r\n            \"sqlType\": \"sqlTypeInteger\",\r\n            \"nullable\": true,\r\n            \"editable\": true,\r\n            \"domain\": null,\r\n            \"defaultValue\": null\r\n          },\r\n          {\r\n            \"name\": \"timestamp\",\r\n            \"type\": \"esriFieldTypeDate\",\r\n            \"actualType\": \"date\",\r\n            \"alias\": \"date\",\r\n            \"sqlType\": \"sqlTypeOther\",\r\n            \"nullable\": true,\r\n            \"editable\": true,\r\n            \"domain\": null,\r\n            \"defaultValue\": null\r\n          },\r\n          {\r\n            \"name\": \"latitude\",\r\n            \"type\": \"esriFieldTypeDouble\",\r\n            \"actualType\": \"float\",\r\n            \"alias\": \"latitude\",\r\n            \"sqlType\": \"sqlTypeFloat\",\r\n            \"nullable\": true,\r\n            \"editable\": true,\r\n            \"domain\": null,\r\n            \"defaultValue\": null\r\n          },\r\n          {\r\n            \"name\": \"longitude\",\r\n            \"type\": \"esriFieldTypeDouble\",\r\n            \"actualType\": \"float\",\r\n            \"alias\": \"longitude\",\r\n            \"sqlType\": \"sqlTypeFloat\",\r\n            \"nullable\": true,\r\n            \"editable\": true,\r\n            \"domain\": null,\r\n            \"defaultValue\": null\r\n          },\r\n          {\r\n            \"name\": \"FID\",\r\n            \"type\": \"esriFieldTypeOID\",\r\n            \"actualType\": \"int\",\r\n            \"alias\": \"FID\",\r\n            \"sqlType\": \"sqlTypeInteger\",\r\n            \"nullable\": false,\r\n            \"editable\": false,\r\n            \"domain\": null,\r\n            \"defaultValue\": null\r\n          },\r\n          {\r\n            \"name\": \"GlobalID\",\r\n            \"type\": \"esriFieldTypeGlobalID\",\r\n            \"alias\": \"GlobalID\",\r\n            \"sqlType\": \"sqlTypeOther\",\r\n            \"length\": 38,\r\n            \"nullable\": false,\r\n            \"editable\": false,\r\n            \"domain\": null,\r\n            \"defaultValue\": \"NEWID() WITH VALUES\"\r\n          } \r\n        ],\r\n        \"indexes\": [],\r\n        \"types\": [],\r\n        \"templates\": [\r\n          {\r\n            \"name\": \"New Feature\",\r\n            \"description\": \"New Feature Layer\",\r\n            \"drawingTool\": \"esriFeatureEditToolPoint\",\r\n            \"prototype\": {\r\n              \"attributes\": {\r\n                \"registrationID\": null,\r\n                \"ipAddress\": null,\r\n                \"flags\": null,\r\n                \"timestamp\": null,\r\n                \"latitude\": null,\r\n                \"longitude\": null,\r\n                \"X\": null,\r\n                \"Y\": null\r\n              }\r\n            }\r\n          }\r\n        ],\r\n        \"supportedQueryFormats\": \"JSON, geoJSON\",\r\n        \"hasStaticData\": false,\r\n        \"ownershipBasedAccessControlForFeatures\": true,\r\n        \"allowTrueCurvesUpdates\": true,\r\n        \"onlyAllowTrueCurveUpdatesByTrueCurveClients\": true,\r\n        \"maxRecordCount\": 5000,\r\n        \"standardMaxRecordCount\": 100000,\r\n        \"tileMaxRecordCount\": 8000,\r\n        \"maxRecordCountFactor\": 1,\r\n        \"capabilities\": \"Query,Editing,Create,Update,Delete\",\r\n        \"exceedsLimitFactor\": 1\r\n      },\r\n    ],\r\n    tables: []\r\n    // params: [token]\r\n  });\r\n\r\n  return serviceDefinition;\r\n}\r\n\r\nexport const APPLY_FEATURES_FROM_MEMORY = async (res, layer, serviceDetails) => {\r\n  const session = getSession(\"qp_gavel_app_session\");\r\n  const layerUrl = serviceDetails.serviceUrl;\r\n  const layerName = serviceDetails.serviceName;\r\n  \r\n  // const editsToApply = layer.layer.source.items;\r\n  const targetLayer = layer.layer.id;\r\n  // const { geometry, attributes } = editsToApply;\r\n\r\n  console.log(\"DEFINITION_ADDED_TO_SERVICE: \", res);\r\n  console.log(\"LAYER_URL: \", layerUrl);\r\n\r\n  const featureLayerSrc = layer.layer.source;\r\n  let featurePayload = [];\r\n  // const targetLayerById = document.getElementById(targetLayer);\r\n  \r\n  console.log(\"TARGET_LAYER: \", layer);\r\n  console.log(\"FEATURE_LAYER_SRC: \", featureLayerSrc);\r\n\r\n  // https://services8.arcgis.com/8KDV2PscG0fGIBii/arcgis/rest/services/gavel_feature_service_1620315653801/FeatureServer\r\n\r\n  // https://services8.arcgis.com/8KDV2PscG0fGIBii/arcgis/rest/services/gavel_feature_service_1620315653801/FeatureServer/0\r\n\r\n  // return applyEdits([{\r\n  //   id: 0,\r\n  //   authentication: session,\r\n  //   url: layerUrl + \"/0\",\r\n  //   adds: [],\r\n  //   updates: [],\r\n  //   deletes: [],\r\n  //   rollbackOnFailure: true,\r\n  //   useGlobalIds: true\r\n  // }]);\r\n\r\n  await featureLayerSrc.items.map((item, i) => {\r\n    // --Destructure - Extract only what is needed\r\n    const { attributes, geometry, symbol } = item;\r\n\r\n    const posX = geometry.x;\r\n    const posY = geometry.y;\r\n    const geoWkid = geometry.spatialReference.wkid;\r\n\r\n    // --Restructure - Build new array with destructured data\r\n    let restructureData = {\r\n      \"geometry\": {\r\n        \"x\": posX,\r\n        \"y\": posY,\r\n        \"spatialReference\": { \"wkid\": geoWkid }\r\n      },\r\n      attributes,\r\n      symbol\r\n    }\r\n    featurePayload.push(restructureData);\r\n  });\r\n\r\n  console.log(\"Geo Payload:\", featurePayload);\r\n\r\n  // NOTE: addFeatures over applyEdits\r\n  await addFeatures({\r\n    \"authentication\": session,\r\n    \"url\": layerUrl + \"/0\",\r\n    \"features\": featurePayload,\r\n    \"rollbackOnFailure\": false,\r\n    \"f\": \"json\"\r\n  })\r\n  .then(res => {\r\n    console.info(\"Feature Layer Updated: \", res);\r\n  })\r\n  .catch(error => {\r\n    console.error(\"ERROR: Save Feature Layer: \", error);\r\n  });\r\n\r\n  return addFeatures;\r\n\r\n}\r\n","/*/\r\n *  ┌───────────────────────────────────┐\r\n *  │ |> Scalable Calculate Utility     │\r\n *  └───────────────────────────────────┘\r\n/*/\r\n// React\r\nimport React, { Component } from 'react';\r\n\r\n// Esri\r\nimport { geodesicUtils, geodesicLengths } from \"@arcgis/core/geometry/support/geodesicUtils\";\r\nimport { Point, Polyline } from '@arcgis/core/geometry';\r\nimport { webMercatorToGeographic } from '@arcgis/core/geometry/support/webMercatorUtils';\r\n// import { json } from 'body-parser';\r\n\r\n\r\nconst Calculate = props => {\r\n\r\n  /**-------------------------------------------------------------\r\n   *  distance()\r\n   *  ~~Compute geodetic distance and direction between two points\r\n   *  @param locations :Object{}\r\n   *  @return distance :Number\r\n  */\r\n  // TODO: Component cleanup\r\n  // NOTE: Leverage the `geodesicAreas()` method when / if the time comes\r\n\r\n}\r\n\r\nexport const calcDistance = props => {\r\n\r\n  console.log('Locations: ', props);\r\n\r\n  const locations = props;\r\n  const { locationA, locationB } = locations;\r\n\r\n  // const pointFrom = new Point({ \"x\": locationA.x, \"y\": locationA.y });\r\n  // const pointTo = new Point({ \"x\": locationB.x, \"y\": locationB.y })\r\n  \r\n  let polyline = new Polyline({\r\n    \"paths\": [[\r\n      [locationA.x, locationA.y],\r\n      [locationB.x, locationB.y]\r\n    ]]\r\n  });\r\n  console.log(JSON.stringify(polyline));\r\n  polyline = new Polyline(polyline);\r\n  console.log(JSON.stringify(polyline));\r\n  polyline = webMercatorToGeographic(polyline);\r\n  console.log(JSON.stringify(polyline));\r\n  \r\n  let polylineLength = geodesicLengths([polyline], \"meters\");\r\n\r\n  // const polylineLength = geodesicLengths([polyline], \"meters\")\r\n  //   .then((res) => {\r\n  //     // response is a polygon geometry of a 1000ft buffer around the input point\r\n  //     console.log('Polyline Length: ', res);\r\n  //     return res;    \r\n  //   });\r\n\r\n  console.log('Polyline Length: ', polylineLength[0]);\r\n\r\n  if (polylineLength >= 2500) polylineLength = 2500;\r\n  //output 99.93917832865446\r\n  //process.env.REACT_APP_DEFAULT_UNITS_OF_LENGTH\r\n\r\n  // Geodetic `distance` computation\r\n  // const join = geodesicLengths(latLongFrom, latLongTo, \"meters\");\r\n  // console.log(\"Points: \", join);\r\n\r\n  // Destructure `join` object to access distance \r\n  // const { distance, azimuth } = join;\r\n  // console.log('Distance: ', distance, ', Direction: ', azimuth);\r\n\r\n  return polylineLength[0];\r\n}\r\n\r\n/**-------------------------------------------------------------\r\n *  radius()\r\n *  ~~Compute geodetic radius from two points\r\n *  @param   locations :Array[{}]\r\n *  @extends Calculate.distance()\r\n *  @return  distance :Number\r\n*/\r\nexport const calcRadius = props => {\r\n\r\n  const distance = calcDistance(props);\r\n  const radius = distance * 2;\r\n\r\n  console.log('Radius: ', radius);\r\n\r\n  return radius;\r\n}\r\n\r\n// export default Calculate;\r\n// export { calcDistance, calcRadius }"," /**--------------------------------------------------------------------------------- ->\r\n *  ┌────────────────────────────────────┐\r\n *  │ |> GAVEL - Feature Layer Builder   │\r\n *  └────────────────────────────────────┘\r\n * \r\n *  @description:   'Builder component to convert lat/long coordinates to Feature Layer'\r\n *  @implements:    'JSON data object returned from search API of '\r\n *  @returns:       'Esri Feature Layer containing Points to render on map'\r\n * \r\n*/\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport { connect, useSelector } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\n// Esri\r\nimport esriRequest from '@arcgis/core/request';\r\n// import esriConfig from '@arcgis/core/config';\r\nimport Expand from '@arcgis/core/widgets/Expand';\r\nimport Editor from '@arcgis/core/widgets/Editor';\r\nimport LayerList from '@arcgis/core/widgets/LayerList';\r\nimport Legend from '@arcgis/core/widgets/Legend';\r\nimport Graphic from '@arcgis/core/Graphic';\r\nimport Point from '@arcgis/core/geometry/Point';\r\nimport FeatureLayer from '@arcgis/core/layers/FeatureLayer';\r\nimport GraphicsLayer from '@arcgis/core/layers/GraphicsLayer';\r\nimport GroupLayer from '@arcgis/core/layers/GroupLayer';\r\n// import promiseUtils from '@arcgis/core/promiseUtils';\r\nimport { SpatialReference } from \"@arcgis/core/geometry\";\r\n\r\n// QP\r\nimport areaQuery from '../../../redux/reducers/area-query';\r\n// import { template } from '@babel/core';\r\n\r\nlet patternsLayer = {};\r\nlet resultsLayer = {}\r\nlet resultsLength = null;\r\n\r\nconst spatialRef = new SpatialReference({ \"wkid\": 102100, \"latestWkid\": 3857 });\r\n\r\n// #region [component] \r\nasync function featureLayerBuilder(baseMapProp, mapViewProp, payload) {\r\n  console.log('inside FeatureLayerBuilder');\r\n  // const { baseMap, mapView, payload } = props;\r\n  \r\n  // const [baseMapState, setBaseMapState] = useState({});\r\n  // const [mapViewState, setMapViewState] = useState({});\r\n  let mapView = mapViewProp;\r\n  let baseMap = baseMapProp;\r\n  let resDataArray = payload.locationData.areas;\r\n  \r\n  const graphicsLayerSignals = new GraphicsLayer({ title: \"Results\" });\r\n\r\n  // Point Counter\r\n  // resultsLength\r\n  // let theSignalCounts = 0;\r\n\r\n  // Padding\r\n  const padding = { top: 55 };\r\n  const paddingExpanded = { top: 55, right: 250 };\r\n\r\n  // Panel\r\n  // let url = 'info';\r\n  let graphics = [];\r\n  let pointCounter = 0;\r\n  let layerCounter = 0;\r\n  let listOfIds = [];\r\n  // let theSignalCounts = undefined;\r\n  // let ptLocationsLayer = undefined;\r\n\r\n  // const theColors = [\"purple\", \"green\", \"orange\", \"blue\", \"red\"];\r\n  // -- colors #d7191c|#fdae61|#ffffbf|#abdda4|#2b83ba\r\n  const colors = [\"#d7191c\", \"#fdae61\", \"#ffffbf\", \"#abdda4\", \"#2b83ba\"];\r\n\r\n  /*/\r\n   *  ┌─────────────────────────────┐\r\n   *  │ |> Local & Global States    │\r\n   *  └─────────────────────────────┘\r\n  /*/\r\n  // useEffect(() => {\r\n  //   // setBaseMapState(baseMap);\r\n  //   // setMapViewState(mapView);\r\n\r\n  //   // buildFeatureLayer(resDataArray, baseMapState, mapViewState)\r\n  //   //   .then(() => {\r\n  //   //     return createFeatureLayer();\r\n  //   // });\r\n    \r\n\r\n  // }, []);\r\n\r\n  // const [ jsonData, setJsonData ] = useState({});\r\n  // const areaQueryState = useSelector(state => state.areaQuery);\r\n  // const areaQueryState = payload;\r\n\r\n  // const createFeatureLayer = null;\r\n\r\n  // const resJson = areaQueryState;\r\n\r\n  // document.getElementById(\"topNavGavel\").addEventListener('click', queryDevices(baseMap, view));\r\n\r\n  // useEffect(() => {\r\n  //   return ptLocationsLayer = createFeatureLayer();\r\n  // }, []);\r\n\r\n  // mapView.when()\r\n  //   .then(setBaseMapState(baseMap))\r\n  //   .then(setMapViewState(mapView))\r\n  //   .then(buildFeatureLayer(areaQueryState, baseMap, mapView))\r\n  //   .then(ptLocationsLayer = createFeatureLayer())\r\n  //   .catch(e => {\r\n  //     console.error(\"Creating FeatureLayer failed:\", e);\r\n  //   });\r\n\r\n  mapView.when(() => {\r\n    console.log('view.when(1)');\r\n    // mapView.ui.add(expandLegend, \"bottom-left\", 0);\r\n    // mapView.ui.add(expandLayerList, \"bottom-right\", 0);\r\n    return buildFeatureLayer(resDataArray, baseMap, mapView);\r\n    // setBaseMapState(baseMap);\r\n    // setMapViewState(mapView);\r\n  }).then(res => {\r\n    console.log('view.when(2)');\r\n    // createFeatures(res);\r\n    return res;\r\n  }).catch(error => {\r\n    handleNoSignalCounts(error);\r\n  });\r\n\r\n  //console.log(theSignalCounts);\r\n  // const resultsLayer = createFeatureLayer(graphics, \"Results\");\r\n\r\n  // console.log('List of IDs: ', listOfIDs);\r\n  \r\n  // TODO: Init `buildFeatueLayer` function from `useEffect()` hook\r\n  const buildFeatureLayer = (resDataArray, baseMapProp, mapViewProp) => {\r\n  \r\n    // TODO: Clean up code when time permits (formatting & consistency)\r\n    console.log('inside buildFeatureLayer()');\r\n    let json = resDataArray;\r\n    // let resultsLayer = undefined;\r\n    const mapView = mapViewProp;\r\n    const baseMap = baseMapProp;\r\n\r\n    //console.log(\"DATA\", JSON.stringify(json));\r\n\r\n    // let pointCounter = 0;\r\n    // let countResults = 0;\r\n    \r\n    console.log('Signals Added', graphics);\r\n    // _Areas\r\n    json.map((area, i) => {\r\n      // _RegIDs\r\n      json[i].registrationIDs.map((regID, j) => {\r\n        // _Signals\r\n        json[i].registrationIDs[j].signals.map((signal, k) => {\r\n\r\n          const lat = signal.latitude;\r\n          const lon = signal.longitude;\r\n          const regId = signal.registrationID;\r\n\r\n          let theId = {\r\n            \"registrationID\": regId,\r\n            \"pointCount\": pointCounter\r\n          };\r\n\r\n          // NOTE: autocasts as new Point()\r\n          const point = {\r\n            type: \"point\",\r\n            longitude: lon,\r\n            latitude: lat\r\n          }\r\n\r\n          // -- colors #d7191c|#fdae61|#ffffbf|#abdda4|#2b83ba\r\n          const colors = [\"#d7191c\", \"#fdae61\", \"#ffffbf\", \"#abdda4\", \"#2b83ba\"];\r\n          const simpleMarkerSymbol = {\r\n            type: \"simple-marker\",\r\n            color: colors[0],\r\n            outline: {\r\n              color: colors[1],\r\n              width: 1\r\n            },\r\n            size: \"15px\"\r\n          };\r\n          \r\n          // TODO: Determine if we should include lat & long coordinates.\r\n          const pointGraphic = new Graphic({\r\n            geometry: point,\r\n            symbol: simpleMarkerSymbol,\r\n            attributes: {\r\n              \"OBJECTID\":       k,\r\n              \"registrationID\": json[i].registrationIDs[j].signals[k].registrationID,\r\n              \"ipAddress\":      json[i].registrationIDs[j].signals[k].ipAddress,\r\n              \"flags\":          json[i].registrationIDs[j].signals[k].flags,\r\n              \"latitude\":       lat,\r\n              \"longitude\":      lon,\r\n              \"timestamp\":      json[i].registrationIDs[j].signals[k].timestamp\r\n            }\r\n\r\n          });\r\n          // console.log('Ready to Add Point...');\r\n          graphics.push(pointGraphic);\r\n          graphicsLayerSignals.add(pointGraphic);\r\n          pointCounter++;\r\n        });\r\n\r\n      });\r\n\r\n    });\r\n\r\n    console.log('graphics: ', graphics);\r\n    // TODO: Chain this function to the Promised babsed\r\n    createFeatures(graphics, mapView, baseMap);\r\n    return graphics;\r\n  }\r\n  // return buildFeatureLayer(resDataArray, baseMap, mapView);\r\n  let resultsLayer = null;\r\n  let patternsLayer = null;\r\n\r\n  const createFeatures = (graphics, mapView, baseMap) => {\r\n    // const view = mapView;\r\n    layerCounter++;\r\n    let setGraphics = [];\r\n    if (graphics.length > 0) {\r\n      let processCounter = 0;\r\n      // patternsLayer = createUniqueLayer(setGraphics, \"Pattern \" + layerCounter, layerCounter);\r\n      patternsLayer = createFeatureLayer(setGraphics, \"Pattern Layer \" + layerCounter);\r\n\r\n      for (let i = 0; i < graphics.length; i++) {\r\n        if (processCounter === 1000) {\r\n          // patternsLayer = createUniqueLayer(setGraphics, \"Pattern \" + layerCounter, layerCounter);\r\n          // patternsLayer = createFeatureLayer(setGraphics, \"Pattern Layer \" + layerCounter);\r\n          // baseMap.add(patternsLayer);\r\n          setGraphics = [];\r\n          //connsole.log(\"created patternsLayer\");\r\n          // return patternsLayer;\r\n        }\r\n        else if (processCounter != 0 && (processCounter % 1000) == 0) {\r\n          console.log(setGraphics);\r\n          let edits = {\r\n            addFeatures: setGraphics\r\n          };\r\n          patternsLayer.applyEdits(edits);\r\n          setGraphics = [];\r\n        }\r\n        else {\r\n          setGraphics.push(graphics[i]);\r\n        }\r\n        processCounter++;\r\n      }\r\n\r\n      // resultsLayer = createFeatureLayer(graphics, \"Layer \" + layerCounter);\r\n      // listOfIDs = theSignalCounts.sort((a, b) => Number(b.signalcount) - Number(a.signalcount));\r\n      console.log(\"New FeatureLayer: \", patternsLayer);\r\n      baseMap.add(patternsLayer);\r\n      return patternsLayer;\r\n    }\r\n    return patternsLayer;\r\n    // return \"success\";\r\n  }\r\n\r\n  // --Actions\r\n  function defineActions(event) {\r\n\r\n    // NOTE: The event object contains properties of the layer in the `LayerList` widget.\r\n\r\n    const action = event.item;\r\n    console.log(\"Define Actions Event: \", event);\r\n    action.panel = {\r\n      content: document.getElementById(\"myDiv\"),\r\n      className: \"esri-icon-handle-horizontal\",\r\n      title: \"Layer Actions\",\r\n      open: action.hidden\r\n    };\r\n\r\n    if (action.title === \"Area Query\") {\r\n      // open the list item in the LayerList\r\n      action.open = \"true\";\r\n      actions.title = \"Layer Actions\";\r\n      action.actionsSections = [\r\n        [\r\n          {\r\n            title: \"Save Layer\",\r\n            className: \"esri-icon-save\",\r\n            id: \"layerSave\"\r\n          },\r\n          {\r\n            title: \"Delete Layer\",\r\n            className: \"esri-icon-trash\",\r\n            id: \"layerDelete\"\r\n          }\r\n        ]\r\n      ];\r\n    }\r\n  }\r\n\r\n  // --Widgets\r\n  \r\n  // --LayerList\r\n  // const layerList = new LayerList({\r\n  //   view: mapView,\r\n  //   // executes for each ListItem in the LayerList\r\n  //   listItemCreatedFunction: defineActions  \r\n  // });\r\n  \r\n  // // LayerList instantiated from Map.jsx\r\n  // let expandLayerList = new Expand({\r\n  //   view: mapView,\r\n  //   content: layerList,\r\n  //   expandTooltip: \"Toggle Layers\",\r\n  //   group: \"bottom-right\"\r\n  // });\r\n\r\n  return resultsLayer;\r\n}   \r\n// #endregion\r\n\r\n// #region [qp] \r\n// TODO: SoC - Consider moving renderers and actions into dedicated Utility files\r\n// --Display \"Top 5\" Reference IDs (reoccuring) style properties \r\n// -- #d7191c|#fdae61|#ffffbf|#abdda4|#2b83ba\r\nconst colors = [\"#d7191c\", \"#fdae61\", \"#ffffbf\", \"#abdda4\", \"#2b83ba\"];\r\nconst uniquePointRenderer = {\r\n  type: \"unique-value\",\r\n  legendOptions: {\r\n    title: \"IDs\"\r\n  },\r\n  field: \"thecolor\",\r\n  uniqueValueInfos: [{\r\n    value: \"purple\",\r\n    symbol: {\r\n      type: \"simple-marker\",\r\n      color: [138, 43, 226],\r\n      size: 6,\r\n      outline: {\r\n        color: [138, 43, 226, .5],\r\n        size: \"0.25px\"\r\n      }\r\n    }\r\n  }, {\r\n    value: \"green\",\r\n    symbol: {\r\n      type: \"simple-marker\",\r\n      color: [0, 255, 0],\r\n      size: 6,\r\n      outline: {\r\n        color: [0, 255, 0, .5],\r\n        size: \"0.25px\"\r\n      }\r\n    }\r\n  }, {\r\n    value: \"orange\",\r\n    symbol: {\r\n      type: \"simple-marker\",\r\n      color: [255, 165, 0],\r\n      size: 6,\r\n      outline: {\r\n        color: [255, 165, 0, .5],\r\n        size: \"0.25px\"\r\n      }\r\n    }\r\n  }, {\r\n    value: \"blue\",\r\n    symbol: {\r\n      type: \"simple-marker\",\r\n      color: [0, 0, 255],\r\n      size: 6,\r\n      outline: {\r\n        color: [0, 0, 255, .5],\r\n        size: \"0.25px\"\r\n      }\r\n    }\r\n  }, {\r\n    value: \"red\",\r\n    symbol: {\r\n      type: \"simple-marker\",\r\n      color: [255, 0, 0],\r\n      size: 6,\r\n      outline: {\r\n        color: [255, 0, 0, .5],\r\n        size: \"0.25px\"\r\n      }\r\n    }\r\n  }]\r\n};\r\n\r\nconst pointRenderer = {\r\n  type: \"simple\",  // autocasts as new SimpleRenderer()\r\n  symbol: {\r\n    type: \"simple-marker\", // autocasts as new SimpleMarkerSymbol()\r\n    color: \"#d7191c\",\r\n    outline: {\r\n      color: [255, 255, 255, 0.7],\r\n      width: 0.5\r\n    },\r\n    size: 7.5\r\n  }\r\n};\r\n\r\nconst pointRenderer1 = {\r\n  type: \"simple\",  // autocasts as new SimpleRenderer()\r\n  symbol: {\r\n    type: \"simple-marker\",  // autocasts as new SimpleMarkerSymbol()\r\n    size: 6,\r\n    color: \"green\",\r\n    outline: {  // autocasts as new SimpleLineSymbol()\r\n      width: 0.25,\r\n      color: \"white\"\r\n    }\r\n  }\r\n}\r\n\r\n// Popup Templates\r\n// const templatePattern = {\r\n//   // autocasts as new PopupTemplate()\r\n//   title: \"Location Point: {OBJECTID} of \" + graphics.length,\r\n//   content: [{\r\n//     type: \"text\",\r\n//     text: \"<div style='display: flex; margin-left: 9px;'>ID: {registrationID}</div>\"\r\n//   },\r\n//   {\r\n//     type: \"fields\",\r\n//     fieldInfos: fieldInfos,\r\n//     actions: [patternOfLifeAction],\r\n//   }],\r\n//   spinnerEnabled: true,\r\n//   active: true\r\n// };\r\n\r\n// Add this action to the popup so it is always available in this view\r\nconst patternOfLifeAction = {\r\n  className: \"esri-icon-line-chart\",\r\n  id: \"patternOfLife\",\r\n  indicator: true,\r\n  title: \"Pattern of Life\"\r\n};\r\n\r\n// --Creates a FeatureLayer from an array of graphics (client-side)\r\nfunction createFeatureLayer(graphics, title) {\r\n  console.log(\"Data Points\", graphics);\r\n  // NOTE: The following `fieldInfos` reflect datadisplayed in popup card\r\n  const fieldInfos = [\r\n    {\r\n      fieldName: \"registrationID\",\r\n      label: \"Registration ID\",\r\n      format: {\r\n        digitSeparator: false\r\n      },\r\n      visible: false\r\n    },\r\n    {\r\n      fieldName: \"ipAddress\",\r\n      label: \"IP Address\",\r\n      format: {\r\n        digitSeparator: true\r\n      }\r\n    },\r\n    {\r\n      fieldName: \"flags\",\r\n      label: \"Flags\",\r\n      format: {\r\n        digitSeparator: false\r\n      }\r\n    },\r\n    {\r\n      fieldName: \"latitude\",\r\n      label: \"Latitude\",\r\n      format: {\r\n        digitSeparator: true\r\n      }\r\n    },\r\n    {\r\n      fieldName: \"longitude\",\r\n      label: \"Longitude\",\r\n      format: {\r\n        digitSeparator: true\r\n      }\r\n    },\r\n    {\r\n      fieldName: \"timestamp\",\r\n      label: \"Timestamp\",\r\n      format: {\r\n        digitSeparator: false\r\n      }\r\n    }\r\n  ];\r\n\r\n  return new FeatureLayer({\r\n    source: graphics, // adding an empty feature collection\r\n    title: title,\r\n    objectIdField: \"OBJECTID\",\r\n    fields: [\r\n      {\r\n        name: \"OBJECTID\",\r\n        type: \"oid\"\r\n      },\r\n      {\r\n        name: \"registrationID\",\r\n        type: \"string\"\r\n      },\r\n      {\r\n        name: \"ipAddress\",\r\n        type: \"string\"\r\n      },\r\n      {\r\n        name: \"flags\",\r\n        type: \"integer\"\r\n      },\r\n      {\r\n        name: \"latitude\",\r\n        type: \"geometry\",\r\n        valueType: \"coordinate\"\r\n      },\r\n      {\r\n        name: \"longitude\",\r\n        type: \"geometry\",\r\n        valueType: \"coordinate\"\r\n      },\r\n      {\r\n        name: \"timestamp\",\r\n        type: \"date\"\r\n      }\r\n    ],\r\n    geometryType: \"point\",\r\n    spatialReference: { \"wkid\": 102100, \"latestWkid\": 3857 },\r\n    outFields: [\"*\"],\r\n    popupTemplate: {\r\n      // autocasts as new PopupTemplate()\r\n      actions: [patternOfLifeAction],\r\n      title: \"Location Point: {OBJECTID} of \" + graphics.length,\r\n      content: [{\r\n        type: \"text\",\r\n        text: \"<div style='display: flex; margin-left: 9px;'>ID: {registrationID}</div>\"\r\n      },\r\n      {\r\n        type: \"fields\",\r\n        fieldInfos: fieldInfos,\r\n      }],\r\n    spinnerEnabled: true,\r\n    active: true\r\n  },\r\n    renderer: pointRenderer\r\n  });\r\n}\r\n\r\n// --Creates a client-side FeatureLayer with a custom color\r\nconst createUniqueLayer = (graphics, title, id) => {\r\n  console.log('inside createUniqueLayer()');\r\n  return new FeatureLayer({\r\n    source: graphics, // adding an empty feature collection\r\n    title: title,\r\n    fields: [\r\n      {\r\n        name: \"OBJECTID\",\r\n        type: \"oid\"\r\n      },\r\n      {\r\n        name: \"registrationID\",\r\n        type: \"string\"\r\n      },\r\n      {\r\n        name: \"ipAddress\",\r\n        type: \"string\"\r\n      },\r\n      {\r\n        name: \"flags\",\r\n        type: \"integer\"\r\n      },\r\n      {\r\n        name: \"timestamp\",\r\n        type: \"date\"\r\n      },\r\n      {\r\n        name: \"thecolor\",\r\n        type: \"string\"\r\n      },\r\n      {\r\n        name: \"latitude\",\r\n        type: \"geometry\",\r\n        valueType: \"coordinate\"\r\n      },\r\n      {\r\n        name: \"longitude\",\r\n        type: \"geometry\",\r\n        valueType: \"coordinate\"\r\n      },\r\n    ],\r\n    geometryType: \"point\",\r\n    spatialReference: { \"wkid\": 102100, \"latestWkid\": 3857 },\r\n    objectIdField: \"OBJECTID\",\r\n    outFields: [\"*\"],\r\n    // renderer: {\r\n    //   type: \"simple\",\r\n    //   symbol: {\r\n    //     type: \"web-style\", // autocasts as new WebStyleSymbol()\r\n    //     styleName: \"Esri2DPointSymbolsStyle\",\r\n    //     name: \"landmark\"\r\n    //   }\r\n    // },\r\n    renderer: uniquePointRenderer,\r\n    popupTemplate: {\r\n      // autocast as esri/PopupTemplate\r\n      title: \"{registrationID} at {timestamp}\",\r\n      content: \"Color is {thecolor}, Flags are {flags} </br> ipAddress is {ipAddress}\",\r\n      actions: [patternOfLifeAction]\r\n    }\r\n\r\n  });\r\n\r\n}\r\n\r\n/*/\r\n *  ┌─────────────────────┐\r\n *  │ |> PropTypes        │\r\n *  └─────────────────────┘\r\n/*/\r\n// FeatureLayerBuilder.propTypes = {\r\n//   baseMap: PropTypes.string,\r\n//   mapView: PropTypes.string,\r\n//   payload: PropTypes.arrayOf(PropTypes.object),\r\n// }\r\n\r\n// Error Handlers\r\n// IDEA: Moveerror/warning handlers into dedicated component   \r\nconst handleNoSignalCounts = error => {\r\n  console.log('GAVEL 9000: ', error);\r\n  // alert('I\\'m sorry... I\\'m afraid I cannot locate any signals.');\r\n  const alert = document.getElementById('alertNoResultsWarning');\r\n  alert.active = \"true\";\r\n}\r\n// #endregion\r\n\r\nexport { featureLayerBuilder };\r\n","/**--------------------------------------------------------------------------------- ->\r\n*  ┌────────────────────────────────────────┐\r\n*  │ |> GAVEL - Pattern of Life Builder     │\r\n*  └────────────────────────────────────────┘\r\n* \r\n*  @description:   'Builder component to convert registrationIDs to Pattern of Life'\r\n*  @implements:    'JSON data object returned from search API of '\r\n*  @returns:       'Esri Feature Layer containing Points to render on map'\r\n* \r\n*/\r\n\r\n// #region [imports]\r\nimport React, { useEffect, useState } from 'react';\r\nimport { connect, useSelector } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\n// Esri\r\nimport esriRequest from '@arcgis/core/request';\r\n// import esriConfig from '@arcgis/core/config';\r\nimport Expand from '@arcgis/core/widgets/Expand';\r\nimport Editor from '@arcgis/core/widgets/Editor';\r\nimport LayerList from '@arcgis/core/widgets/LayerList';\r\nimport Legend from '@arcgis/core/widgets/Legend';\r\nimport Graphic from '@arcgis/core/Graphic';\r\nimport Point from '@arcgis/core/geometry/Point';\r\nimport FeatureLayer from '@arcgis/core/layers/FeatureLayer';\r\nimport GraphicsLayer from '@arcgis/core/layers/GraphicsLayer';\r\nimport GroupLayer from '@arcgis/core/layers/GroupLayer';\r\n// import promiseUtils from '@arcgis/core/promiseUtils';\r\nimport { SpatialReference } from \"@arcgis/core/geometry\";\r\n\r\n// QP\r\nimport areaQuery from '../../../redux/reducers/area-query';\r\n// #endregion\r\n\r\nlet patternsLayer = {};\r\nlet resultsLayer = {}\r\nlet resultsLength = null;\r\n\r\nconst spatialRef = new SpatialReference({ \"wkid\": 102100, \"latestWkid\": 3857 });\r\n\r\n// #region [component] \r\nasync function patternOfLifeBuilder(baseMapProp, mapViewProp, payload) {\r\n  console.log('inside FeatureLayerBuilder');\r\n  // const { baseMap, mapView, payload } = props;\r\n\r\n  // const [baseMapState, setBaseMapState] = useState({});\r\n  // const [mapViewState, setMapViewState] = useState({});\r\n  let mapView = mapViewProp;\r\n  let baseMap = baseMapProp;\r\n  let resDataArray = payload.locationData.registrationIDs;\r\n\r\n  const patternOfLifeSignals = new GraphicsLayer({ title: \"Pattern\" });\r\n\r\n  // Point Counter\r\n  // resultsLength\r\n  // let theSignalCounts = 0;\r\n\r\n  // Padding\r\n  const padding = { top: 55 };\r\n  const paddingExpanded = { top: 55, right: 250 };\r\n\r\n  // Panel\r\n  // let url = 'info';\r\n  let graphics = [];\r\n  let pointCounter = 0;\r\n  let layerCounter = 0;\r\n  let listOfIds = [];\r\n  // let theSignalCounts = undefined;\r\n  // let ptLocationsLayer = undefined;\r\n\r\n  // const theColors = [\"purple\", \"green\", \"orange\", \"blue\", \"red\"];\r\n  // -- colors #d7191c|#fdae61|#ffffbf|#abdda4|#2b83ba\r\n  const colors = [\"#d7191c\", \"#fdae61\", \"#ffffbf\", \"#abdda4\", \"#2b83ba\"];\r\n\r\n  /*/\r\n   *  ┌─────────────────────────────┐\r\n   *  │ |> Local & Global States    │\r\n   *  └─────────────────────────────┘\r\n  /*/\r\n  // useEffect(() => {\r\n  //   // setBaseMapState(baseMap);\r\n  //   // setMapViewState(mapView);\r\n\r\n  //   // buildPatternOfLife(resDataArray, baseMapState, mapViewState)\r\n  //   //   .then(() => {\r\n  //   //     return createFeatureLayer();\r\n  //   // });\r\n\r\n\r\n  // }, []);\r\n\r\n  // const [ jsonData, setJsonData ] = useState({});\r\n  // const areaQueryState = useSelector(state => state.areaQuery);\r\n  // const areaQueryState = payload;\r\n\r\n  // const createFeatureLayer = null;\r\n\r\n  // const resJson = areaQueryState;\r\n\r\n  // document.getElementById(\"topNavGavel\").addEventListener('click', queryDevices(baseMap, view));\r\n\r\n  // useEffect(() => {\r\n  //   return ptLocationsLayer = createFeatureLayer();\r\n  // }, []);\r\n\r\n  // mapView.when()\r\n  //   .then(setBaseMapState(baseMap))\r\n  //   .then(setMapViewState(mapView))\r\n  //   .then(buildPatternOfLife(areaQueryState, baseMap, mapView))\r\n  //   .then(ptLocationsLayer = createFeatureLayer())\r\n  //   .catch(e => {\r\n  //     console.error(\"Creating FeatureLayer failed:\", e);\r\n  //   });\r\n\r\n  mapView.when(() => {\r\n    console.log('view.when(1)');\r\n    return buildPatternOfLife(resDataArray, baseMap, mapView);\r\n  }).then(res => {\r\n    console.log('view.when(2)');\r\n    // createFeatures(res);\r\n    return res;\r\n  }).catch(error => {\r\n    handleNoSignalCounts(error);\r\n  });\r\n\r\n  // console.log(theSignalCounts);\r\n  // const resultsLayer = createFeatureLayer(graphics, \"Results\");\r\n\r\n  // console.log('List of IDs: ', listOfIDs);\r\n\r\n  // TODO: Init `buildFeatueLayer` function from `useEffect()` hook\r\n  const buildPatternOfLife = (resDataArray, baseMapProp, mapViewProp) => {\r\n\r\n    // TODO: Clean up code when time permits (formatting & consistency)\r\n    console.log('inside buildPatternOfLife()');\r\n    let json = resDataArray;\r\n    // let resultsLayer = undefined;\r\n    const mapView = mapViewProp;\r\n    const baseMap = baseMapProp;\r\n\r\n    //console.log(\"DATA\", JSON.stringify(json));\r\n\r\n    // let pointCounter = 0;\r\n    // let countResults = 0;\r\n\r\n    console.log('Signals Added', graphics);\r\n    // _Patterns\r\n    json.map((item, i) => {\r\n      // _Signals\r\n      json[0].signals.map((signal, j) => {\r\n\r\n        const lat = signal.latitude;\r\n        const lon = signal.longitude;\r\n        const regId = signal.registrationID;    \r\n\r\n        let theId = {\r\n          \"registrationID\": regId,\r\n          \"pointCount\": pointCounter\r\n        };\r\n\r\n        // NOTE: autocasts as new Point()\r\n        const point = {\r\n          type: \"point\",\r\n          longitude: lon,\r\n          latitude: lat\r\n        }\r\n\r\n        // -- colors #d7191c|#fdae61|#ffffbf|#abdda4|#2b83ba\r\n        const colors = [\"#d7191c\", \"#fdae61\", \"#ffffbf\", \"#abdda4\", \"#2b83ba\"];\r\n        const simpleMarkerSymbol = {\r\n          type: \"simple-marker\",\r\n          color: colors[0],\r\n          outline: {\r\n            color: colors[1],\r\n            width: 1\r\n          },\r\n          size: \"15px\"\r\n        };\r\n\r\n        // TODO: Determine if we should include lat & long coordinates.\r\n        const pointGraphic = new Graphic({\r\n          geometry: point,\r\n          symbol: simpleMarkerSymbol,\r\n          attributes: {\r\n            \"OBJECTID\":       j,\r\n            \"registrationID\": json[0].signals[j].registrationID,\r\n            \"ipAddress\":      json[0].signals[j].ipAddress,\r\n            \"flags\":          json[0].signals[j].flags,\r\n            \"latitude\":       lat,\r\n            \"longitude\":      lon,\r\n            \"timestamp\":      json[0].signals[j].timestamp\r\n          }\r\n\r\n        });\r\n        // console.log('Ready to Add Point...');\r\n        graphics.push(pointGraphic);\r\n        patternOfLifeSignals.add(pointGraphic);\r\n        pointCounter++;\r\n      });\r\n\r\n    });\r\n\r\n    console.log('graphics: ', graphics);\r\n    // TODO: Chain this function to the Promised babsed\r\n    createFeatures(graphics, mapView, baseMap);\r\n    return graphics;\r\n  }\r\n  // return buildPatternOfLife(resDataArray, baseMap, mapView);\r\n  let resultsLayer = null;\r\n  let patternsLayer = null;\r\n\r\n  const createFeatures = (graphics, mapView, baseMap) => {\r\n    // const view = mapView;\r\n    layerCounter++;\r\n    let setGraphics = [];\r\n    if (graphics.length > 0) {\r\n      let processCounter = 0;\r\n      // patternsLayer = createUniqueLayer(setGraphics, \"Pattern \" + layerCounter, layerCounter);\r\n      patternsLayer = createFeatureLayer(setGraphics, \"Pattern Layer \" + layerCounter);\r\n\r\n      for (let i = 0; i < graphics.length; i++) {\r\n        if (processCounter === 1000) {\r\n          // patternsLayer = createUniqueLayer(setGraphics, \"Pattern \" + layerCounter, layerCounter);\r\n          // patternsLayer = createFeatureLayer(setGraphics, \"Pattern Layer \" + layerCounter);\r\n          // baseMap.add(patternsLayer);\r\n          setGraphics = [];\r\n          //console.log(\"created patternsLayer\");\r\n          // return patternsLayer;\r\n        }\r\n        else if (processCounter != 0 && (processCounter % 1000) == 0) {\r\n          console.log(setGraphics);\r\n          let edits = {\r\n            addFeatures: setGraphics\r\n          };\r\n          patternsLayer.applyEdits(edits);\r\n          setGraphics = [];\r\n        }\r\n        else {\r\n          setGraphics.push(graphics[i]);\r\n        }\r\n        processCounter++;\r\n      }\r\n\r\n      // resultsLayer = createFeatureLayer(graphics, \"Pattern Of Life \" + layerCounter);\r\n      // listOfIDs = theSignalCounts.sort((a, b) => Number(b.signalcount) - Number(a.signalcount));\r\n      console.log(\"New FeatureLayer: \", patternsLayer);\r\n      baseMap.add(patternsLayer);\r\n      return patternsLayer;\r\n    }\r\n    return patternsLayer;\r\n    // return \"success\";\r\n  }\r\n\r\n  // --Actions\r\n  // function defineActions(event) {\r\n\r\n  //   // The event object contains properties of the\r\n  //   // layer in the LayerList widget.\r\n\r\n  //   const action = event.item;\r\n  //   console.log(\"Define Actions Event: \", event);\r\n  //   action.panel = {\r\n  //     content: document.getElementById(\"myDiv\"),\r\n  //     className: \"esri-icon-handle-horizontal\",\r\n  //     title: \"Layer Actions\",\r\n  //     open: action.hidden\r\n  //   };\r\n\r\n  //   if (action.title === \"Area Query\") {\r\n  //     // open the list item in the LayerList\r\n  //     action.open = open;\r\n  //     // actions.title = \"\";\r\n  //     action.actionsSections = [\r\n  //       [\r\n  //         {\r\n  //           title: \"Save Layer\",\r\n  //           className: \"esri-icon-save\",\r\n  //           id: \"layerSave\"\r\n  //         },\r\n  //         {\r\n  //           title: \"Delete Layer\",\r\n  //           className: \"esri-icon-trash\",\r\n  //           id: \"layerDelete\"\r\n  //         }\r\n  //       ]\r\n  //     ];\r\n  //   }\r\n\r\n  //   if (action.title === \"Pattern\") {\r\n  //     // open the list item in the LayerList\r\n  //     action.open = open;\r\n  //     // actions.title = \"\";\r\n  //     action.actionsSections = [\r\n  //       [\r\n  //         {\r\n  //           title: \"Save Layer\",\r\n  //           className: \"esri-icon-save\",\r\n  //           id: \"layerSave\"\r\n  //         },\r\n  //         {\r\n  //           title: \"Delete Layer\",\r\n  //           className: \"esri-icon-trash\",\r\n  //           id: \"layerDelete\"\r\n  //         }\r\n  //       ]\r\n  //     ];\r\n  //   }\r\n  // }\r\n\r\n  // --Widgets\r\n\r\n  // --LayerList\r\n  // const layerList = new LayerList({\r\n  //   view: mapView,\r\n  //   // executes for each ListItem in the LayerList\r\n  //   listItemCreatedFunction: defineActions  \r\n  // });\r\n\r\n  // // LayerList instantiated from Map.jsx\r\n  // let expandLayerList = new Expand({\r\n  //   view: mapView,\r\n  //   content: layerList,\r\n  //   expandTooltip: \"Toggle Layers\",\r\n  //   group: \"bottom-right\"\r\n  // });\r\n\r\n  return resultsLayer;\r\n}\r\n// #endregion\r\n\r\n// #region [qp] \r\n// TODO: SoC - Consider moving renderers and actions into dedicated Utility files\r\n// --Display \"Top 5\" Reference IDs (reoccuring) style properties \r\n// -- #d7191c|#fdae61|#ffffbf|#abdda4|#2b83ba\r\nconst colors = [\"#d7191c\", \"#fdae61\", \"#ffffbf\", \"#abdda4\", \"#2b83ba\"];\r\nconst uniquePointRenderer = {\r\n  type: \"unique-value\",\r\n  legendOptions: {\r\n    title: \"IDs\"\r\n  },\r\n  field: \"thecolor\",\r\n  uniqueValueInfos: [{\r\n    value: \"purple\",\r\n    symbol: {\r\n      type: \"simple-marker\",\r\n      color: [138, 43, 226],\r\n      size: 6,\r\n      outline: {\r\n        color: [138, 43, 226, .5],\r\n        size: \"0.25px\"\r\n      }\r\n    }\r\n  }, {\r\n    value: \"green\",\r\n    symbol: {\r\n      type: \"simple-marker\",\r\n      color: [0, 255, 0],\r\n      size: 6,\r\n      outline: {\r\n        color: [0, 255, 0, .5],\r\n        size: \"0.25px\"\r\n      }\r\n    }\r\n  }, {\r\n    value: \"orange\",\r\n    symbol: {\r\n      type: \"simple-marker\",\r\n      color: [255, 165, 0],\r\n      size: 6,\r\n      outline: {\r\n        color: [255, 165, 0, .5],\r\n        size: \"0.25px\"\r\n      }\r\n    }\r\n  }, {\r\n    value: \"blue\",\r\n    symbol: {\r\n      type: \"simple-marker\",\r\n      color: [0, 0, 255],\r\n      size: 6,\r\n      outline: {\r\n        color: [0, 0, 255, .5],\r\n        size: \"0.25px\"\r\n      }\r\n    }\r\n  }, {\r\n    value: \"red\",\r\n    symbol: {\r\n      type: \"simple-marker\",\r\n      color: [255, 0, 0],\r\n      size: 6,\r\n      outline: {\r\n        color: [255, 0, 0, .5],\r\n        size: \"0.25px\"\r\n      }\r\n    }\r\n  }]\r\n};\r\n\r\nconst pointRenderer = {\r\n  type: \"simple\",  // autocasts as new SimpleRenderer()\r\n  symbol: {\r\n    type: \"simple-marker\", // autocasts as new SimpleMarkerSymbol()\r\n    size: 7.5,\r\n    color: \"#d7191c\",\r\n    outline: {\r\n      color: [255, 255, 255, 0.7],\r\n      width: 0.5\r\n    }\r\n  }\r\n};\r\n\r\nconst pointRenderer1 = {\r\n  type: \"simple\",  // autocasts as new SimpleRenderer()\r\n  symbol: {\r\n    type: \"simple-marker\",  // autocasts as new SimpleMarkerSymbol()\r\n    size: 7.5,\r\n    color: \"blue\",\r\n    outline: {  // autocasts as new SimpleLineSymbol()\r\n      color: \"white\",\r\n      width: 0.5\r\n    }\r\n  }\r\n}\r\n\r\n// Add this action to the popup so it is always available in this view\r\nconst patternOfLifeAction = {\r\n  className: \"esri-icon-line-chart\",\r\n  id: \"patternOfLife\",\r\n  indicator: true,\r\n  title: \"Pattern of Life\"\r\n};\r\n\r\n// --Creates a FeatureLayer from an array of graphics (client-side)\r\nfunction createFeatureLayer(graphics, title) {\r\n  console.log(\"Data Points\", graphics);\r\n  // NOTE: The following `fieldInfos` reflect datadisplayed in popup card\r\n  const fieldInfos = [\r\n    {\r\n      fieldName: \"registrationID\",\r\n      label: \"Registration ID\",\r\n      format: {\r\n        digitSeparator: false\r\n      },\r\n      visible: false\r\n    },\r\n    {\r\n      fieldName: \"ipAddress\",\r\n      label: \"IP Address\",\r\n      format: {\r\n        digitSeparator: true\r\n      }\r\n    },\r\n    {\r\n      fieldName: \"flags\",\r\n      label: \"Flags\",\r\n      format: {\r\n        digitSeparator: false\r\n      }\r\n    },\r\n    {\r\n      fieldName: \"latitude\",\r\n      label: \"Latitude\",\r\n      format: {\r\n        digitSeparator: true\r\n      }\r\n    },\r\n    {\r\n      fieldName: \"longitude\",\r\n      label: \"Longitude\",\r\n      format: {\r\n        digitSeparator: true\r\n      }\r\n    },\r\n    {\r\n      fieldName: \"timestamp\",\r\n      label: \"Timestamp\",\r\n      format: {\r\n        digitSeparator: false\r\n      }\r\n    }\r\n  ];\r\n\r\n  return new FeatureLayer({\r\n    source: graphics, // adding an empty feature collection\r\n    title: title,\r\n    objectIdField: \"OBJECTID\",\r\n    fields: [\r\n      {\r\n        name: \"OBJECTID\",\r\n        type: \"oid\"\r\n      },\r\n      {\r\n        name: \"registrationID\",\r\n        type: \"string\"\r\n      },\r\n      {\r\n        name: \"ipAddress\",\r\n        type: \"string\"\r\n      },\r\n      {\r\n        name: \"flags\",\r\n        type: \"integer\"\r\n      },\r\n      {\r\n        name: \"latitude\",\r\n        type: \"geometry\"\r\n      },\r\n      {\r\n        name: \"longitude\",\r\n        type: \"geometry\"\r\n      },\r\n      {\r\n        name: \"timestamp\",\r\n        type: \"date\"\r\n      }\r\n    ],\r\n    geometryType: \"point\",\r\n    spatialReference: { \"wkid\": 102100, \"latestWkid\": 3857 },\r\n    outFields: [\"*\"],\r\n    popupTemplate: {\r\n      // autocasts as new PopupTemplate()\r\n      title: \"Location Point: {OBJECTID} of \" + graphics.length,\r\n      content: [{\r\n        type: \"text\",\r\n        text: \"<div style='display: flex; margin-left: 9px;'>ID: {registrationID}</div>\"\r\n      },\r\n      {\r\n        type: \"fields\",\r\n        fieldInfos: fieldInfos\r\n      }],\r\n      // actions: [patternOfLifeAction],\r\n      spinnerEnabled: true,\r\n      active: true\r\n    },\r\n    renderer: pointRenderer1\r\n  });\r\n}\r\n\r\n// --Creates a client-side FeatureLayer with a custom color\r\nconst createUniqueLayer = (graphics, title, id) => {\r\n  console.log('inside createUniqueLayer()');\r\n  return new FeatureLayer({\r\n    source: graphics, // adding an empty feature collection\r\n    title: title,\r\n    fields: [\r\n      {\r\n        name: \"OBJECTID\",\r\n        type: \"oid\"\r\n      },\r\n      {\r\n        name: \"registrationID\",\r\n        type: \"string\"\r\n      },\r\n      {\r\n        name: \"ipAddress\",\r\n        type: \"string\"\r\n      },\r\n      {\r\n        name: \"flags\",\r\n        type: \"integer\"\r\n      },\r\n      {\r\n        name: \"timestamp\",\r\n        type: \"date\"\r\n      },\r\n      {\r\n        name: \"thecolor\",\r\n        type: \"string\"\r\n      },\r\n      {\r\n        name: \"latitude\",\r\n        type: \"geometry\"\r\n      },\r\n      {\r\n        name: \"longitude\",\r\n        type: \"geometry\"\r\n      }\r\n    ],\r\n    geometryType: \"point\",\r\n    objectIdField: \"OBJECTID\",\r\n    outFields: [\"*\"],\r\n    // renderer: {\r\n    //   type: \"simple\",\r\n    //   symbol: {\r\n    //     type: \"web-style\", // autocasts as new WebStyleSymbol()\r\n    //     styleName: \"Esri2DPointSymbolsStyle\",\r\n    //     name: \"landmark\"\r\n    //   }\r\n    // },\r\n    renderer: uniquePointRenderer,\r\n    listMode: \"hide\",\r\n    popupTemplate: {\r\n      // autocast as esri/PopupTemplate\r\n      title: \"{registrationID} at {timestamp}\",\r\n      content: \"Color is {thecolor}, Flags are {flags} </br> ipAddress is {ipAddress}\",\r\n      actions: [patternOfLifeAction]\r\n    }\r\n\r\n  });\r\n\r\n}\r\n\r\n/*/\r\n *  ┌─────────────────────┐\r\n *  │ |> PropTypes        │\r\n *  └─────────────────────┘\r\n/*/\r\n// FeatureLayerBuilder.propTypes = {\r\n//   baseMap: PropTypes.string,\r\n//   mapView: PropTypes.string,1l\r\n//   payload: PropTypes.arrayOf(PropTypes.object),\r\n// }\r\n\r\n// Error Handler\r\nconst handleNoSignalCounts = error => {\r\n  console.log('GAVEL 9000: ', error);\r\n  // alert('I\\'m sorry... I\\'m afraid I cannot locate any signals.');\r\n  const alert = document.getElementById('alertNoResultsWarning');\r\n  alert.active = \"true\";\r\n}\r\n// #endregion\r\n\r\nexport { patternOfLifeBuilder };\r\n","import React, { memo } from 'react';\r\n\r\nimport styled from 'styled-components';\r\nimport { CalciteAlert } from \"@esri/calcite-components-react\";\r\n\r\nconst AlertContainer = styled.div`\r\n  display: flex;\r\n  align-items: left;\r\n  justify-content: space-between;\r\n`;\r\n\r\n// TODO: Refactor code to accept additional props\r\nconst AlertBuilderInfo = memo(isActive => {\r\n  return (\r\n    <AlertContainer>\r\n      <CalciteAlert\r\n        id=\"alertInfo\"\r\n        class=\"calcite-theme-auto\"\r\n        icon=\"information\"\r\n        auto-dismiss=\"true\"\r\n        auto-dismiss-duration=\"medium\"\r\n        scale=\"s\"\r\n        color=\"blue\"\r\n        label=\"Info Alert\"\r\n        aria-hidden=\"true\"\r\n        role=\"alertdialog\"\r\n      >\r\n        <div slot=\"title\">\r\n          <strong>From Gavel:</strong>\r\n        </div>\r\n\r\n        <div slot=\"message\">\r\n          <span><strong>TODO:</strong> This alert will have Gavel related messages / general info</span>\r\n        </div>\r\n\r\n      </CalciteAlert>\r\n\r\n    </AlertContainer>\r\n\r\n  );\r\n\r\n});\r\n\r\nconst AlertBuilderProcess = memo(isActive => {\r\n  return (\r\n    <AlertContainer>\r\n      <CalciteAlert\r\n        id=\"alertProcessStart\"\r\n        class=\"calcite-theme-auto\"\r\n        icon=\"app-gear\"\r\n        auto-dismiss=\"true\"\r\n        auto-dismiss-duration=\"medium\"\r\n        scale=\"s\"\r\n        color=\"blue\"\r\n        label=\"Process Alert\"\r\n        aria-hidden=\"true\"\r\n        role=\"alertdialog\"\r\n      >\r\n        <div slot=\"title\">\r\n          <strong>Processing...</strong>\r\n        </div>\r\n\r\n        <div slot=\"message\">\r\n          <span>Just a moment please - Gavel is working on your request.</span>\r\n        </div>\r\n\r\n      </CalciteAlert>\r\n\r\n    </AlertContainer>\r\n\r\n  );\r\n\r\n});\r\n\r\nconst AlertBuilderProcessSuccess = memo(isActive => {\r\n  return (\r\n    <AlertContainer>\r\n      <CalciteAlert\r\n        id=\"alertSuccess\"\r\n        class=\"calcite-theme-auto\"\r\n        icon=\"\"\r\n        auto-dismiss-duration=\"medium\"\r\n        scale=\"s\"\r\n        color=\"green\"\r\n        label=\"Process Success Alert\"\r\n        aria-hidden=\"true\"\r\n        role=\"alertdialog\"\r\n      >\r\n        <div slot=\"title\">\r\n          <strong>Success:</strong>\r\n        </div>\r\n\r\n        <div slot=\"message\">\r\n          <span>Your data has been saved.</span>\r\n        </div>\r\n\r\n      </CalciteAlert>\r\n\r\n    </AlertContainer>\r\n\r\n  );\r\n\r\n});\r\n\r\nconst AlertBuilderWarning = memo(isActive => {\r\n  return (\r\n    <AlertContainer>\r\n      <CalciteAlert\r\n        id=\"alertWarning\"\r\n        class=\"calcite-theme-auto\"\r\n        icon=\"\"\r\n        auto-dismiss=\"true\"\r\n        auto-dismiss-duration=\"medium\"\r\n        scale=\"s\"\r\n        color=\"yellow\"\r\n        label=\"Warning Alert\"\r\n        aria-hidden=\"true\"\r\n        role=\"alertdialog\"\r\n      >\r\n        <div slot=\"title\">\r\n          <strong>Attention:</strong>\r\n        </div>\r\n\r\n        <div slot=\"message\">\r\n          <span>Gavel cannot authenticate your user credentials - Please logout then log back in.</span>\r\n        </div>\r\n\r\n      </CalciteAlert>\r\n\r\n    </AlertContainer>\r\n\r\n  );\r\n\r\n});\r\n\r\nconst AlertBuilderNoResultsWarning = memo(isActive => {\r\n  return (\r\n    <AlertContainer>\r\n      <CalciteAlert\r\n        id=\"alertNoResultsWarning\"\r\n        class=\"calcite-theme-auto\"\r\n        icon=\"\"\r\n        auto-dismiss=\"true\"\r\n        auto-dismiss-duration=\"medium\"\r\n        scale=\"s\"\r\n        color=\"yellow\"\r\n        label=\"Warning No Results Alert\"\r\n        aria-hidden=\"true\"\r\n        role=\"alertdialog\"\r\n      >\r\n        <div slot=\"title\">\r\n          <strong>From Gavel:</strong>\r\n        </div>\r\n\r\n        <div slot=\"message\">\r\n          <span>I'm sorry... I'm afraid I did not find any results. Adjust parameters and try again.</span>\r\n        </div>\r\n\r\n      </CalciteAlert>\r\n\r\n    </AlertContainer>\r\n\r\n  );\r\n\r\n});\r\n\r\nconst AlertBuilderDanger = memo(isActive => {\r\n  return (\r\n    <AlertContainer>\r\n      <CalciteAlert\r\n        id=\"alertDanger\"\r\n        class=\"calcite-theme-auto\"\r\n        icon=\"\"\r\n        auto-dismiss-duration=\"slow\"\r\n        scale=\"s\"\r\n        color=\"red\"\r\n        label=\"Danger Alert\"\r\n        aria-hidden=\"true\"\r\n        role=\"alertdialog\"\r\n      >\r\n        <div slot=\"title\">\r\n          <strong>Error:</strong>\r\n        </div>\r\n\r\n        <div slot=\"message\">\r\n          <span>An unexpected error has occurred - Please try again.</span>\r\n        </div>\r\n\r\n      </CalciteAlert>\r\n\r\n    </AlertContainer>\r\n\r\n  );\r\n\r\n});\r\n\r\nexport { \r\n  AlertBuilderInfo,\r\n  AlertBuilderProcess,\r\n  AlertBuilderProcessSuccess,\r\n  AlertBuilderWarning,\r\n  AlertBuilderNoResultsWarning,\r\n  AlertBuilderDanger \r\n};\r\n","/*/\r\n  *  ┌────────────────────────────────────────┐\r\n  *  │ |> Date Range Component - Area Query   │\r\n  *  └────────────────────────────────────────┘\r\n/*/\r\n// React\r\nimport React, { Component } from 'react';\r\n\r\n// React / Redux\r\nimport { connect } from 'react-redux';\r\n\r\n// Calcite\r\nimport DatePicker from 'react-datepicker';\r\n// import DatePicker, { DateRangePicker } from 'calcite-react/DatePicker';\r\nimport Button, { ButtonGroup } from 'calcite-react/Button';\r\n  \r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\n// import * as actions from '../../../redux/actions/area-query-actions';\r\n// import 'bootstrap/dist/css/bootstrap.min.css';\r\nimport areaQuery, {\r\n  addToStoreAction,\r\n  sendAreaQueryAction\r\n} from \"../../../redux/reducers/area-query\";\r\nimport { addPatternToStoreAction } from \"../../../redux/reducers/pattern-of-life-query\";\r\nimport { dateToIsoString } from '../../../utils/format';\r\nimport NoticeBuilder from \"../../shared/NoticeBuilder\";\r\nimport { \r\n  CalciteAlert, \r\n  CalciteButton, \r\n  CalciteDatePicker,\r\n  CalciteInput,\r\n  CalciteInputDatePicker,\r\n  CalciteLabel,\r\n  CalciteNotice\r\n} from \"@esri/calcite-components-react\";\r\n\r\n// import { submit } from \"@esri/calcite-ui-icons\";\r\n\r\n// TODO: Install `date-fns` package and leverage features for date-range\r\n// import addDays from 'date-fns/addDays'\r\n\r\nclass DateRangeComponent extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.defaultDate = new Date();\r\n    this.startDate = this.defaultDate.getDate() - 7;\r\n    this.endDate = this.defaultDate.getDate() - 1;\r\n\r\n    // Initial State\r\n    this.state = {\r\n      currentDate: Date.now(),\r\n      startDate: Date.now(),\r\n      endDate: Date.now()\r\n    };\r\n    \r\n    this.handleDatePickerRangeChange = this.handleDatePickerRangeChange.bind(this);\r\n    this.handleStartDateChange = this.handleStartDateChange.bind(this);\r\n    this.handleEndDateChange = this.handleEndDateChange.bind(this);\r\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\r\n    // this.showTransitionToaster = this.showTransitionToaster.bind(this)\r\n\r\n    // const form = document.getElementById('formDateRange');\r\n    // this.formDateRange = null;\r\n    this.alertProcessStart = null;\r\n    this.submitBtn = null;\r\n  }\r\n  \r\n  //#region [lifecycle]\r\n  shouldComponentUpdate() { \r\n    console.log('DateRange Component Update');\r\n    return true;\r\n  }\r\n  \r\n  componentDidUpdate() {\r\n    console.log('DateRange Component Did Update');\r\n  }\r\n\r\n  componentDidMount() {\r\n    console.log('DateRange Component Did Load');\r\n    const today = new Date(Date.now());\r\n\r\n    // Set start date to default to seven (7) days\r\n    this.setState({\r\n      currentDate: today,\r\n      endDate: new Date(today).setDate(today.getDate() - 1),\r\n      startDate: new Date(today).setDate(today.getDate() - 7)\r\n    });\r\n\r\n    // const form = document.getElementById('formDateRange');\r\n    this.formDateRange = document.getElementById('formDateRange');\r\n    this.alertProcessStart = document.getElementById('alertProcessStart');\r\n    this.submitDatesBtn = document.getElementById('submitDatesBtn');\r\n\r\n    console.log('DateRange Props:', this.props);\r\n    console.log('DateRange State', this.state);\r\n  }\r\n  //#endregion\r\n\r\n  // Component Callback Handlers\r\n  handleDatePickerRangeChange(event) {\r\n    console.log('DateRange `onChange` Handler: ', event);\r\n\r\n    const startDateFull = event.detail.startDate;\r\n    const endDateFull = event.detail.endDate;\r\n\r\n    this.handleStartDateChange(startDateFull);\r\n    this.handleEndDateChange(endDateFull);\r\n  }\r\n\r\n  // TODO: Pending Deletion?\r\n  handleStartDateChange(date) {\r\n    const tempStartDateObj = new Date(date);\r\n    const startDateIsoString = dateToIsoString(tempStartDateObj);\r\n\r\n    this.state.startDate = startDateIsoString;\r\n    this.props.addToStoreCreator({ startDate: startDateIsoString });\r\n    this.props.addPatternToStoreCreator({ startDate: startDateIsoString });\r\n    // this.props.dispatch({ type: 'ADD_TO_STORE', payload: { startDate: startDateIsoString } });\r\n  }\r\n  // TODO: Pending Deletion?\r\n  handleEndDateChange(date) {\r\n    const tempEndDateObj = new Date(date);\r\n    const endDateIsoString = dateToIsoString(tempEndDateObj);\r\n    \r\n    this.state.endDate = endDateIsoString;\r\n    this.props.addToStoreCreator({ endDate: endDateIsoString });\r\n    this.props.addPatternToStoreCreator({ endDate: endDateIsoString });\r\n    // this.props.dispatch({ type: 'ADD_TO_STORE', payload: { endDate: endDateIsoString } });\r\n  }\r\n  //#region [qp]\r\n  // // NOTE: On submit will open a stargate to a dimension that contains 'dots on map'!\r\n\r\n  handleFormSubmit(event) {\r\n    event.preventDefault();\r\n\r\n    console.log('keyword `this` is: ', this);\r\n\r\n    this.submitDatesBtn.setAttribute('loading', '');\r\n    this.submitDatesBtn.setAttribute('disabled', '');\r\n    this.alertProcessStart.active = \"true\";\r\n\r\n    console.group('Date Range:>');\r\n    console.log(this.state.startDate);\r\n    console.log(this.props.endDate);\r\n    console.groupEnd();\r\n\r\n    const tokenizedPayload = { ...this.props.areaQuery, ...this.props.securityToken }\r\n    const areaQueryData = this.props.sendAreaQueryCreator(tokenizedPayload);\r\n\r\n    console.log('Tokenized_Payload:', tokenizedPayload);\r\n\r\n    return areaQueryData;\r\n  }\r\n  //#endregion\r\n\r\n  //! CODE: https://reactjs.org/docs/handling-events.html\r\n\r\n  render() {\r\n    return (\r\n      <form id=\"formDateRange\">\r\n        {/* <fieldset> */}\r\n          {/* <legend>Date Ranges</legend> */}\r\n          <div className=\"form-group\">\r\n            <CalciteDatePicker\r\n              id=\"dateRangePicker\"\r\n              label=\"Date range picker\"\r\n              range=\"true\"\r\n              scale=\"m\"\r\n              activeRange=\"start\"\r\n              startAsDate={new Date(this.state.startDate)}\r\n              endAsDate={new Date(this.state.endDate)}\r\n              min=\"2017-06-16\"\r\n              maxAsDate={new Date(this.state.currentDate)}\r\n              valueAsDate={new Date(this.state.currentDate)}\r\n              locale=\"en\"\r\n              next-month-label=\"Next month\"\r\n              prev-month-label=\"Previous month\"\r\n              layout=\"vertical\"\r\n              role=\"application\"\r\n              proximity-selection-disabled=\"false\"\r\n              onCalciteDatePickerRangeChange={(e) => this.handleDatePickerRangeChange(e)}\r\n            >\r\n            </CalciteDatePicker>\r\n            {/* <CalciteInputDatePicker\r\n              id=\"dateRangePicker\"\r\n              label=\"Date range picker\"\r\n              startAsDate={new Date(this.startDate)}\r\n              endAsDate={new Date(this.endDate)}\r\n              maxAsDate={new Date()}\r\n              minAsDate={new Date(2017, 5, 16)}\r\n              placeholder=\"Select date range\"\r\n              locale=\"en\"\r\n              next-month-label=\"Next month\"\r\n              prev-month-label=\"Previous month\"\r\n              range=\"\"\r\n              layout=\"vertical\"\r\n              overlayPositioning=\"fixed\"\r\n              role=\"application\"\r\n              scale=\"m\"\r\n              calciteDatePickerRangeChange={this.handleDatePickerRangeChange()}\r\n              >\r\n            </CalciteInputDatePicker> */}\r\n          </div>\r\n          <div className=\"form-group\">\r\n            {/* <Button \r\n              id=\"submitDatesBtn\"\r\n              // icon=\"submit\"\r\n              type=\"submit\">Submit\r\n            </Button> */}\r\n            <CalciteButton\r\n              id=\"submitDatesBtn\"     \r\n              appearance=\"solid\"\r\n              color=\"blue\"\r\n              icon-start=\"submit\"\r\n              scale=\"m\"\r\n              type=\"button\"\r\n              width=\"full\"\r\n              onClick={this.handleFormSubmit}>\r\n              Submit\r\n            </CalciteButton>\r\n\r\n          </div>\r\n          \r\n        {/* </fieldset> */}\r\n        \r\n      </form>\r\n\r\n    );\r\n  \r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {  // store.getState();\r\n  console.log('state: ', state.areaQuery);\r\n  return {\r\n    // startDate: state.areaQuery.startDate,\r\n    // endDate: state.areaQuery.endDate,\r\n    // latitude: state.areaQuery.latitude,\r\n    // longitude: state.areaQuery.longitude,\r\n    // radius: state.areaQuery.radius,\r\n    // status: state.areaQuery.status,\r\n    // locationData: state.areaQuery.locationData\r\n    areaQuery: state.areaQuery,\r\n    patternQuery: state.patternQuery,\r\n    securityToken: state.securityToken\r\n  }\r\n};\r\n\r\n// ACTION CREATORS\r\nconst addToStoreCreator = (options) => ({ type: 'ADD_TO_STORE', payload: options });\r\nconst addPatternToStoreCreator = (options) => ({ type: 'ADD_PATTERN_TO_STORE', payload: options });\r\nconst sendAreaQueryCreator = (options) => ({ type: 'SEND_AREA_QUERY', payload: options });\r\n\r\n\r\nconst actionCreators = {\r\n  addToStoreCreator,\r\n  addPatternToStoreCreator,\r\n  sendAreaQueryCreator\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps, \r\n  actionCreators\r\n)(DateRangeComponent);\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\n// import Button from \"calcite-react/Button\";\r\n// import Tooltip from \"calcite-react/Tooltip\";\r\n\r\n// import InformationIcon from 'calcite-ui-icons-react/InformationIcon';\r\n// import { information16, information24 } from \"@esri/calcite-ui-icons\";\r\n\r\nconst NoticeContainer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst NoticeBuilder = props => {\r\n  return (\r\n    <NoticeContainer>\r\n      <calcite-notice\r\n        class=\"calcite-theme-light\"\r\n        icon=\"data\"\r\n        // active=\"\"\r\n        dismissible=\"\"\r\n        scale=\"m\"\r\n        width=\"auto\"\r\n        color=\"blue\"\r\n      >\r\n        <div slot=\"title\">Notice title</div>\r\n        <div slot=\"message\">Notice message lorem ipsum</div>\r\n\r\n      </calcite-notice>\r\n      \r\n    </NoticeContainer>\r\n\r\n  );\r\n\r\n};\r\n\r\nexport default NoticeBuilder;\r\n","// #region [copyright]\r\n// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.​\r\n//#endregion\r\n\r\n//#region [notes]\r\n// NOTE:\r\n// -- This is a \"special\" react component that does not strictly play by\r\n// -- React's rules.\r\n// --\r\n// -- Conceptually, this component creates a \"portal\" in React by\r\n// -- closing its render method off from updates (by simply rendering a div and\r\n// -- never accepting re-renders) then reconnecting itself to the React lifecycle\r\n// -- by listening for any new props using:\r\n//   --> `componentWillReceiveProps` - Class (stateful) Components\r\n//   --> `useEffect()` - Functional (stateless) Components\r\n// --\r\n// --------------------------------------------------------------------------------\r\n//#endregion\r\n\r\n//#region [imports]\r\n// React\r\nimport React, { useEffect, useState } from \"react\";\r\nimport ReactDOM, { render } from \"react-dom\";\r\n\r\n// Redux\r\nimport { connect, Provider, useDispatch, useSelector, useStore } from \"react-redux\";\r\nimport { refIdQuery } from \"../../../redux/reducers/refid-query\";\r\nimport {\r\n  addToStoreAction,\r\n  sendAreaQueryAction,\r\n  areaQueryDoneAction,\r\n  areaQueryPutsAction,\r\n  areaQueryStatusAction\r\n} from \"../../../redux/reducers/area-query\";\r\nimport {\r\n  addPatternToStoreAction,\r\n  sendPatternQueryAction,\r\n  patternQueryDoneAction,\r\n  patternQueryPutsAction,\r\n  patternQueryStatusAction\r\n} from \"../../../redux/reducers/pattern-of-life-query\";\r\n\r\nimport * as areaTypes from \"../../../redux/types/area-types\";\r\nimport * as patternTypes from \"../../../redux/types/pattern-of-life-types\";\r\n// import { createSelector } from 'reselect';\r\n// import { updateConfig } from \"../../../redux/reducers/config\";\r\n\r\n// Esri\r\nimport { loadModules } from \"esri-loader\";\r\nimport Portal from \"@arcgis/core/portal/Portal\";\r\nimport Map from \"@arcgis/core/Map\";\r\nimport MapView from \"@arcgis/core/views/MapView\";\r\nimport Loader from \"calcite-react/Loader\";\r\nimport BasemapGallery from \"@arcgis/core/widgets/BasemapGallery\";\r\nimport Expand from '@arcgis/core/widgets/Expand';\r\nimport LayerList from \"@arcgis/core/widgets/LayerList\";\r\nimport Legend from \"@arcgis/core/widgets/Legend\";\r\nimport ScaleBar from \"@arcgis/core/widgets/ScaleBar\";\r\nimport Search from \"@arcgis/core/widgets/Search\";\r\nimport Sketch from \"@arcgis/core/widgets/Sketch\";\r\nimport SketchViewModel from \"@arcgis/core/widgets/Sketch/SketchViewModel\";\r\nimport DatePicker from \"@arcgis/core/widgets/support/DatePicker\";\r\nimport CoordinateConversion from \"@arcgis/core/widgets/CoordinateConversion\";\r\nimport {\r\n  CREATE_FEATURE_SERVICE,\r\n  ADD_TO_SERVICE_DEFINITION,\r\n  APPLY_FEATURES_FROM_MEMORY\r\n} from \"../services/FeatureLayerService\";\r\n////import  { geometryEngine } from \"@arcgis/core/geometry/geometryEngine\";\r\nimport { coordinateFormatter, toLatitudeLongitude } from \"@arcgis/core/geometry/coordinateFormatter\";\r\nimport { FeatureLayerView } from '@arcgis/core/views/layers/FeatureLayerView';\r\nimport Graphic from \"@arcgis/core/Graphic\";\r\nimport GraphicsLayer from \"@arcgis/core/layers/GraphicsLayer\";\r\n// import GroupLayer from \"@arcgis/core/layers/GroupLayer\";// import DateTimePickerInput from \"@arcgis/core/form/elements/inputs/DateTimePickerInput\";\r\nimport { Geometry } from \"@arcgis/core/geometry\";\r\n// import Point from \"@arcgis/core/geometry/Point\";\r\n\r\n// Calcite / Styles\r\nimport Alert, {\r\n  AlertTitle,\r\n  AlertMessage\r\n} from 'calcite-react/Alert';\r\nimport Button, {\r\n  ButtonGroup\r\n} from \"calcite-react/Button\";\r\n\r\nimport Card, {\r\n  CardTitle,\r\n  CardContent,\r\n  CardImage\r\n} from 'calcite-react/Card';\r\n\r\n// QP\r\nimport { loadMap } from \"../../../utils/map\";\r\nimport { calcDistance } from \"../../../utils/calculate\";\r\nimport { dateToIsoString } from \"../../../utils/format\";\r\nimport { featureLayerBuilder } from \"../layers/FeatureLayerBuilder\";\r\nimport { patternOfLifeBuilder } from \"../layers/PatternOfLifeBuilder\";\r\nimport {\r\n  AlertBuilderInfo,\r\n  AlertBuilderProcess,\r\n  AlertBuilderProcessSuccess,\r\n  AlertBuilderWarning,\r\n  AlertBuilderNoResultsWarning,\r\n  AlertBuilderDanger\r\n} from \"../../shared/AlertBuilder\";\r\nimport DateRangeComponent from \"../widgets/DateRange\";\r\nimport NoticeBuilder from \"../../shared/NoticeBuilder\";\r\n// import ActionBarPrimary from \"../../ActionBarPrimary\";\r\n// import DateRangeExpandClass from \"../../esri/widgets/DateRangeExpandClass\";\r\n// import DateRangeExpandWidget from \"../../esri/widgets/DateRangeExpandWidget\";\r\n// import PointGraphicBuilder from \"../layers/PointGraphicBuilder\";\r\n\r\nrequire('dotenv').config();\r\n\r\nimport styled from \"styled-components\";\r\nimport SpatialReference from \"@arcgis/core/geometry/SpatialReference\";\r\nimport FeatureLayer from \"@arcgis/core/layers/FeatureLayer\";\r\n//#endregion\r\n\r\n//#region [styles]\r\nconst Container = styled.div`\r\n  height: 100%;\r\n  width: 100%;\r\n`;\r\n\r\nconst DateRangeContainer = styled.div`\r\n  min-height: 10vh;\r\n  width: 100%;\r\n  padding: 10px;\r\n`;\r\n\r\nconst StartDateRangeContainer = styled.div`\r\n  min-height: 10vh;\r\n  width: 12vw;\r\n`;\r\n\r\nconst EndDateRangeContainer = styled.div`\r\n  min-height: 10vh;\r\n  width: 12vw;\r\n`;\r\n\r\nconst SearchBarContainer = styled.div`\r\n  min-height: 10vh;\r\n  width: 100%;\r\n  padding: 10px;\r\n`;\r\n\r\n//#endregion\r\n\r\n/*/\r\n  *  ┌─────────────────────┐\r\n  *  │ |> Map Component    │\r\n  *  └─────────────────────┘\r\n/*/\r\n//#region [component]\r\nconst MapComponent = props => {\r\n\r\n  // Aliases\r\n  const containerId = \"mapViewContainer\";\r\n  const dateRangeId = \"dateRangeContainer\";\r\n  const startDateRangeId = \"startDateRangeContainer\";\r\n  const endDateRangeId = \"endDateRangeContainer\";\r\n\r\n  // Redux store\r\n  const store = useStore();\r\n  const dispatch = useDispatch();\r\n  // const refIdQuery = useSelector(state => state.refIdQuery);\r\n  const areaQueryState = useSelector(state => state.areaQuery);\r\n  const areaQueryStatus = useSelector(state => state.areaQuery.status);\r\n  const patternQueryState = useSelector(state => state.patternQuery);\r\n  const patternQueryStatus = useSelector(state => state.patternQuery.status);\r\n  // const securityTokenState = useSelector(state => state.securityToken);\r\n  // const securityToken = useSelector(state => state.securityToken);\r\n  // const { TempSecurityToken: tempSecurityToken } = securityTokenState;\r\n\r\n  /*/\r\n    *  ┌─────────────────────────────┐\r\n    *  │ |> Local & Global States    │\r\n    *  └─────────────────────────────┘\r\n  /*/\r\n  // DatePicker\r\n  // TODO: Consider replacing `useState` with `useReducer`.\r\n  const [startDate, setStartDate] = useState(null);\r\n  const [endDate, setEndDate] = useState(null);\r\n  const [baseMapState, setBaseMapState] = useState(null);\r\n  const [mapViewState, setMapViewState] = useState(null);\r\n\r\n  // FeatureLayerBuilder\r\n  // const store = useStore();\r\n  const [featureServiceUrl, setFeatureServiceUrl] = useState(\"\");\r\n\r\n  // const { latitude, longitude, radius } = areaQueryState;\r\n\r\n  let baseMap = null;\r\n  let mapView = null;\r\n\r\n  let sketch,\r\n    instructionsExpand,\r\n    boundaryPolygon,\r\n    validSymbol,\r\n    invalidSymbol,\r\n    buffers,\r\n    newDevelopmentGraphic\r\n\r\n  let intersects = false;\r\n  let contains = true;\r\n  let layerCount = 0;\r\n\r\n  let featuredGraphicsLayer, graphicsLayerGeofence\r\n\r\n  //--GraphicsLayer Color Overrides\r\n  // Fills\r\n  const polyFill = [116, 150, 179, 0.20];\r\n  const pointFill = [0, 96, 175];\r\n\r\n  // Strokes\r\n  const polygonStroke = {\r\n    color: [0, 96, 175],\r\n    width: 2\r\n  };\r\n\r\n  const pointStroke = {\r\n    color: [3, 17, 30],\r\n    width: 1\r\n  };\r\n\r\n  /*/\r\n    *  ┌───────────────────────────────┐\r\n    *  │ |> Default Area Query Dates   │\r\n    *  └───────────────────────────────┘\r\n  /*/\r\n  useEffect(() => {\r\n    const sDateObj = new Date(Date.now());\r\n    const eDateObj = new Date(Date.now());\r\n    const sDate = sDateObj.setDate(sDateObj.getDate() - 8);\r\n    const eDate = eDateObj.setDate(eDateObj.getDate() - 1);\r\n    const sDateIso = dateToIsoString(new Date(sDate));\r\n    const eDateIso = dateToIsoString(new Date(eDate));\r\n\r\n    // console.log('Default State: ', store.getState());\r\n    console.log('Start Date: ', sDateObj);\r\n\r\n    // Add local state\r\n    setStartDate(sDate);\r\n    setEndDate(eDate);\r\n\r\n    // Add to Redux store and initialize\r\n    // TODO: Create a utility reducer that will be the single source for time/dates \r\n    dispatch({ type: areaTypes.ADD_TO_STORE, payload: { startDate: sDateIso } });\r\n    dispatch({ type: areaTypes.ADD_TO_STORE, payload: { endDate: eDateIso } });\r\n    dispatch({ type: patternTypes.ADD_PATTERN_TO_STORE, payload: { startDate: sDateIso } });\r\n    dispatch({ type: patternTypes.ADD_PATTERN_TO_STORE, payload: { endDate: eDateIso } });\r\n\r\n  }, []);\r\n\r\n  /*/\r\n    *  ┌─────────────────────────────────┐\r\n    *  │ |> Esri-Loader - Load Modules   │\r\n    *  └─────────────────────────────────┘\r\n  /*/\r\n  useEffect(() => {\r\n    //#region [core]\r\n    loadMap(containerId, props.mapConfig, props.loaderConfig)\r\n      .then(res => {\r\n        console.log('LoadMap(): ', res);\r\n        // console.log('Props: ', props);\r\n        // console.log('window.dojo: ', window.dojoConfig);\r\n\r\n        // TODO: Leverage the ES Module `import` feature in ArcGIS API v4.18\r\n        loadModules([\r\n          \"esri/config\",\r\n          \"esri/geometry/geometryEngine\",], props.loaderConfig)\r\n          .then(([\r\n            esriConfig,\r\n            geometryEngine]) => {\r\n\r\n            // let featuredGroupLayer = new GroupLayer({\r\n            //   title: \"Results\",\r\n            //   visible: true,\r\n            //   visibilityMode: \"exclusive\",\r\n            //   layers: [],\r\n            //   opacity: 0.75\r\n            // });\r\n\r\n            //_esriConfig.portalUrl = \"https://qptampa.maps.arcgis.com/\";\r\n            // esriConfig.apiKey = process.env.REACT_APP_ESRI_API_KEY;\r\n            // console.log('Esri API Key: ', process.env.REACT_APP_ESRI_API_KEY);\r\n\r\n            graphicsLayerGeofence = new GraphicsLayer({ title: \"Geofences\" });\r\n            // featuredGraphicsLayer = new GraphicsLayer({ title: \"Basemap\" });\r\n\r\n            // spatialReference\r\n            const spatialRef = new SpatialReference({ \"wkid\": 102100, \"latestWkid\": 3857 });\r\n            // const spatialRef = new SpatialReference({ \"wkid\": 4326 });\r\n            // Basemap\r\n            baseMap = new Map({\r\n              basemap: \"dark-gray-vector\",\r\n              layers: [graphicsLayerGeofence]\r\n            });\r\n            // Mapview\r\n            mapView = new MapView({\r\n              // let mapView = res;  \r\n              // res = {\r\n              container: \"mapViewContainer\",\r\n              map: baseMap,\r\n              extent: {\r\n                spatialReference: spatialRef,\r\n                xmin: -9177882,\r\n                ymin: 4246761,\r\n                xmax: -9176720,\r\n                ymax: 4247967\r\n              },\r\n              popup: {\r\n                dockEnabled: false,\r\n                dockOptions: {\r\n                  position: \"top-right\",\r\n                  breakpoint: false\r\n                }\r\n              },\r\n              ...props.mapConfig\r\n            });\r\n\r\n            // Add baseMap & mapView to Local State\r\n            setBaseMapState(baseMap);\r\n            setMapViewState(mapView);\r\n\r\n            // mapView.extent = new Extent({\r\n            //   xmin: -9177882,\r\n            //   ymin: 4246761,\r\n            //   xmax: -9176720,\r\n            //   ymax: 4247967,\r\n            //   spatialReference: {\r\n            //     wkid: 102100\r\n            //   }\r\n            // });\r\n\r\n            /*/\r\n             *  ┌─────────────────────────────┐\r\n             *  │ |> Widgets / Query Tools    │\r\n             *  └─────────────────────────────┘\r\n            /*/\r\n            // TODO: Determine LoE to move all widgets into `mapView.when()` promise\r\n            let dateObj = new Date();\r\n\r\n            // --Search Tool\r\n            const search = new Search({\r\n              view: mapView\r\n            });\r\n\r\n            // --Scale Bar\r\n            const scaleBar = new ScaleBar({\r\n              view: mapView,\r\n              unit: \"dual\"\r\n            });\r\n\r\n            // const getJsonData = buildFeatureLayer(baseMap, mapView);\r\n\r\n            //#region [initialize]\r\n            //--- Mount view \"when\" loaded ---|>\r\n            mapView.when(() => {\r\n              // TODO: Move back to its Component when possible `useRef()`\r\n              // --Sketch Tool\r\n              sketch = new Sketch({\r\n                id: \"ampdSketchWidget\",\r\n                availableCreateTools: [\"point\", \"circle\"],\r\n                defaultCreateOptions: \"click\",\r\n                // layout: \"vertical\",\r\n                layout: \"horizontal\",\r\n                layer: graphicsLayerGeofence,\r\n                view: mapView,\r\n                // Graphic will be selected as soon as it is created\r\n                creationMode: \"single\"\r\n              });\r\n              // --Legend\r\n              const legend = new Legend({\r\n                view: mapView,\r\n                layerInfos: [{\r\n                  layer: null,\r\n                  title: \"Legend\"\r\n                }]\r\n              });\r\n\r\n              // --LayerList\r\n              const layerList = new LayerList({\r\n                view: mapView,\r\n                label: \"Active Layers\",\r\n                style: \"card\",\r\n                visibleElements: {\r\n                  statusIndicators: true\r\n                },\r\n                // Executes for each ListItem in the LayerList\r\n                listItemCreatedFunction: event => {\r\n\r\n                  // The event object contains properties of the\r\n                  // layer in the LayerList widget.\r\n\r\n                  layerCount++;\r\n                  const listItem = event.item;\r\n\r\n                  legend.layerInfos.layer = listItem;\r\n\r\n                  // Primary action icon (All layers)\r\n                  // listItem.panel = {\r\n                  //   content: document.getElementById(\"myDiv\"),\r\n                  //   className: \"esri-icon-handle-horizontal\",\r\n                  //   title: \"Save Layer\",\r\n                  //   open: listItem.hidden\r\n                  // };\r\n\r\n                  // Secondary action icon (Specific)\r\n                  if (listItem.title !== \"Geofences\") {\r\n                    // Openitem in the LayerList\r\n                    listItem.open = open;\r\n                    // Add descriptive title\r\n                    listItem.title = \"Layer \" + layerCount;\r\n                    // NOTE: Trigger-Actions - See `region[triggers]`\r\n                    listItem.actionsSections = [\r\n                      [\r\n                        {\r\n                          title: \"Save Layer\",\r\n                          className: \"esri-icon-save gavel-save-layer-status\",\r\n                          id: \"layerSave\"\r\n                        },\r\n                        {\r\n                          title: \"Delete Layer\",\r\n                          className: \"esri-icon-trash gavel-delete-layer-status\",\r\n                          id: \"layerDelete\"\r\n                        }\r\n                      ]\r\n                    ];\r\n                  }\r\n                }\r\n              });\r\n\r\n              let expandLegend = new Expand({\r\n                view: mapView,\r\n                content: legend,\r\n                expandTooltip: \"Toggle Legend\",\r\n              });\r\n\r\n              let expandSketch = new Expand({\r\n                view: mapView,\r\n                content: sketch,\r\n                expandTooltip: \"Sketch Tools\",\r\n                group: \"bottom-right\"\r\n              });\r\n\r\n              let expandLayerList = new Expand({\r\n                view: mapView,\r\n                content: layerList,\r\n                expandTooltip: \"Toggle Layers\",\r\n                group: \"bottom-right\"\r\n              });\r\n\r\n              let expandDateRange = new Expand({\r\n                view: mapView,\r\n                content: dateRangeCard,\r\n                expandIconClass: \"esri-icon-calendar\",\r\n                expandTooltip: \"Query Date Range\",\r\n                group: \"bottom-right\"\r\n              });\r\n\r\n              let expandBaseMap = new Expand({\r\n                content: new BasemapGallery({\r\n                  view: mapView\r\n                }),\r\n                view: mapView,\r\n                expandIconClass: \"esri-icon-basemap\",\r\n                group: \"top-left\"\r\n              });\r\n\r\n              let dateRangeElement = document.getElementById('dateRangeCard');\r\n              dateRangeElement.removeAttribute('qp-hidden');\r\n\r\n              // Geofences\r\n              // Override all default symbol colors and sizes\r\n              const pointSymbol = sketch.viewModel.pointSymbol;\r\n              pointSymbol.color = pointFill;\r\n              pointSymbol.outline = pointStroke;\r\n              pointSymbol.size = 8;\r\n\r\n              const polylineSymbol = sketch.viewModel.polylineSymbol;\r\n              polylineSymbol.color = polygonStroke.color;\r\n              polylineSymbol.width = polygonStroke.width;\r\n\r\n              const polygonSymbol = sketch.viewModel.polygonSymbol;\r\n              polygonSymbol.color = polyFill;\r\n              polygonSymbol.outline = polygonStroke;\r\n\r\n              // Listen to sketchViewModel's update event to do\r\n              // graphic reshape or move validation\r\n              // sketchViewModel.on([\"update\", \"undo\", \"redo\"], onGraphicUpdate);\r\n             sketch.on([\"create\", \"complete\"], onGraphicCreate);\r\n\r\n              // setUpExpandWidget();\r\n              setUpGraphicClickHandler();\r\n\r\n              /*/\r\n              *  ┌───────────────────────────┐\r\n              *  │ |>  Trigger Actions       │\r\n              *  └───────────────────────────┘\r\n              /*/\r\n              // #region [triggers] \r\n              // LayerList\r\n              // _Reference: \"https://developers.arcgis.com/javascript/latest/sample-code/popup-custom-action/\"\r\n              layerList.on(\"trigger-action\", event => {\r\n\r\n                // Capture the action id.\r\n                console.log(\"LayerList Event Listener: \", event);\r\n                const id = event.action.id;\r\n                const layer = event.item;\r\n                let serviceUrl = '';\r\n                let serviceName = '';\r\n                let serviceDetails = {}\r\n\r\n                legend.layerInfos.layer = layer;\r\n\r\n                if (id === \"layerSave\") {\r\n                  const alert = document.getElementById('alertProcessStart');\r\n                  alert.active = \"true\";\r\n                  // <NoticeBuilder\r\n                  //   onInfoClick={event => {\r\n                  //     alert('info clicked')\r\n                  //     event.stopPropagation()\r\n                  //   }}\r\n                  // />\r\n                  // TODO: Move to an outside function\r\n                  // Create feature service and save feature layer \r\n                  console.log(\"Save feature layer method called.\");\r\n                  CREATE_FEATURE_SERVICE()\r\n                    .then(res => {\r\n                      serviceUrl = res.serviceurl;\r\n                      serviceName = res.name;\r\n                      serviceDetails = { serviceUrl, serviceName };\r\n                      setFeatureServiceUrl(serviceUrl);\r\n                      return ADD_TO_SERVICE_DEFINITION(res, layer);\r\n                    })\r\n                    .then(res1 => {\r\n                      return APPLY_FEATURES_FROM_MEMORY(res1, layer, serviceDetails);\r\n                    })\r\n                    .then(res2 => {\r\n                      const alertSuccess = document.getElementById('alertSuccess');\r\n                      alertSuccess.active = \"true\";\r\n                      // const json = res2.json();\r\n                      console.log(\"EDITS_APPLIED_FEATURE_LAYER: \", res2);\r\n                    })\r\n                    .catch(error => {\r\n                      const alertDanger = document.getElementById('alertDanger');\r\n                      alertDanger.active = \"true\";\r\n                      \r\n                      console.error(\"ERROR: Save Feature Layer: \", error);\r\n                    });\r\n\r\n                } else if (id === \"layerDelete\") {\r\n                  // if the information action is triggered, then\r\n                  console.log(\"Delete feature layer method called.\");\r\n                }\r\n\r\n              });\r\n\r\n              async function handlePatternOfLifeQuery() {\r\n                // Access state from store\r\n                const gavelState = store.getState();\r\n                console.log(\"Gavel State: \", gavelState);\r\n\r\n                // const layer = event.item;\r\n                // TODO: Specific to a single ID\r\n                const selectedFeature = mapView.popup.selectedFeature;\r\n\r\n                // legend.layer = mapView.popup.selectedFeature;\r\n\r\n                // NOTE: Ad-Hoc Solution - Leveraging areaQuery state for date range\r\n                // const tempToken = tempSecurityToken;\r\n                const registrationID = selectedFeature.attributes.registrationID;\r\n                const securityToken = gavelState.securityToken.TempSecurityToken;\r\n                const patternQueryState = gavelState.patternQuery;\r\n\r\n                const tempStartDate = patternQueryState.startDate;\r\n                const tempEndDate = patternQueryState.endDate;\r\n\r\n                // TODO: SoC - Move all `Pattern of Life` handlers to `PatternOfLifeService.js`\r\n                function handleSecurityToken() {\r\n                  console.log(\"POL STEP 1\");\r\n                  const tempSecurityToken = securityToken;\r\n                  console.log(\"securityToken: \", tempSecurityToken);\r\n                  return tempSecurityToken;\r\n                }\r\n\r\n                function handleRegistrationId() {\r\n                  console.log(\"POL STEP 2\");\r\n                  // const securityToken = gavelState.securityToken.TempSecurityToken;\r\n                  const registrationID = patternQueryState.registrationIDs;\r\n                  // const registrationID = selectedFeature.attributes.registrationID;\r\n                  // dispatch({  type: patternTypes.ADD_PATTERN_TO_STORE, payload: { \"registrationIDs\": registrationID } });\r\n\r\n                  return registrationID;\r\n                }\r\n\r\n                function handleTokenizedPayload(TempSecurityToken) {\r\n                  console.log(\"POL STEP 3\", TempSecurityToken);\r\n                  const registrationID = patternQueryState.registrationIDs;\r\n                  // Destructure `patternQuery` Redux object from store\r\n                  const { startDate, endDate } = patternQueryState;\r\n                  // Restructure new object using destructured data\r\n                  const tokenizedPayload = { startDate, endDate, registrationID, TempSecurityToken }\r\n                  console.log(\"tokenizedPayload: \", tokenizedPayload);\r\n                  return tokenizedPayload;\r\n                }\r\n\r\n                function handleSendPatternQuery(tokenizedPayload) {\r\n                  console.log(\"POL STEP 4\");\r\n                  dispatch({ type: patternTypes.SEND_PATTERN_QUERY, payload: tokenizedPayload });\r\n                  return tokenizedPayload;\r\n                }\r\n\r\n                function resolvePatternOfLife() {\r\n                  console.log(\"POL COMPLETE\");\r\n                  // TODO: Init `Success Alert` here\r\n                  // Push Notification\r\n                  // Resolve(notify)\r\n                  return \"success\";\r\n                }\r\n\r\n                // Pattern of Life - Async / Await\r\n                try {\r\n                  // _Add function names here\r\n                  const stepOne = await handleSecurityToken();\r\n                  const stepTwo = await handleRegistrationId();\r\n                  const stepThree = handleTokenizedPayload({ \"securityToken\": stepOne, \"registrationID\": stepTwo });\r\n                  const stepFour = await handleSendPatternQuery(stepThree);\r\n                  const finalize = resolvePatternOfLife(stepFour);\r\n\r\n                  console.log(`Patern Of Life Complete: ${finalize}`);\r\n                } catch (error) {\r\n                  console.error(\"ERROR: Pattern Of Life : \", error);\r\n                }\r\n              }\r\n\r\n              // PopUp Template\r\n              mapView.popup.on(\"trigger-action\", event => {\r\n                const id = event.action.id;\r\n                // const layerItem = event.item.layer;\r\n                \r\n                if (id === \"patternOfLife\") {\r\n                  const alert = document.getElementById('alertProcessStart');\r\n                  alert.active = \"true\";\r\n                  // Init Pattern of Life\r\n                  handlePatternOfLifeQuery();\r\n                }\r\n\r\n              });\r\n\r\n                //\r\n              mapView.popup.watch(\"selectedFeature\", graphic => {\r\n                if (graphic) {\r\n                  let graphicTemplate = graphic.getEffectivePopupTemplate();\r\n                  // graphicTemplate.actions.items[0].visible = graphic.attributes.registrationID;\r\n                }\r\n                // const featureSelected = mapView.popup.selectedFeature;\r\n                // const popup = mapView.popup;\r\n                // const popup = mapView.popup;\r\n                // const registrationID = popup.features[0].attributes.registrationID;\r\n\r\n                console.log(\"Listening for \", graphic);\r\n                // console.log(\"Popup Info\", popup);\r\n                // console.log(\"Popup Features: \", features);\r\n                // console.log(\"Selected Feature: \", featureSelected);\r\n\r\n                // dispatch({ type: patternTypes.ADD_PATTERN_TO_STORE, payload: { \"registrationIDs\": featureSelected.attributes.registrationID } });\r\n                // return selectedFeature;\r\n\r\n              });\r\n              //#endregion\r\n\r\n              // Add Sketch 2// mapView.ui.add(dateRangeCard, \"bottom-right\", 0);\r\n              mapView.ui.add(search, \"top-right\", 0);\r\n              mapView.ui.add(scaleBar, \"bottom-left\", 1);\r\n              mapView.ui.add(expandLayerList, \"bottom-right\", 0);\r\n              mapView.ui.add(expandSketch, \"bottom-right\", 0);\r\n              mapView.ui.add(expandDateRange, \"bottom-right\", 0);\r\n              mapView.ui.add(expandBaseMap, \"top-left\", 0);\r\n              mapView.ui.add(expandLegend, \"bottom-left\", 1);\r\n\r\n            });\r\n            //#endregion\r\n            \r\n            const onGraphicCreate = event => {\r\n              // get graphic as it is being created\r\n              const graphic = event.graphic;\r\n\r\n              if (event.state === \"start\" && event.tool === \"circle\") {\r\n                console.log(\"Sketch Tool - Start / Circle: \", event);\r\n              }\r\n\r\n              if (event.state === \"complete\" && event.tool === \"circle\") {\r\n                console.log(\"Sketch Tool - Complete / Circle: \", event);\r\n                // TODO: Simplify code by using object destructuring\r\n                // Use X : Y Coordinates to find the graphical center and ring points\r\n                const pointCoordinateX = graphic.geometry.centroid.x;\r\n                const pointCoordinateY = graphic.geometry.centroid.y;\r\n                const ringCoordinateX = graphic.geometry.rings[0][0][0];\r\n                const ringCoordinateY = graphic.geometry.rings[0][0][1];\r\n\r\n                const locationA = {\r\n                  \"x\": pointCoordinateX,\r\n                  \"y\": pointCoordinateY\r\n                }\r\n                const locationB = {\r\n                  \"x\": ringCoordinateX,\r\n                  \"y\": ringCoordinateY\r\n                }\r\n                const locations = { locationA, locationB }\r\n\r\n                // Compute above coordinates to get geo-fense radius \r\n                // BUG: Max radius guard is not capped off (2500m)\r\n                const circleRadius = calcDistance(locations);\r\n                console.log('Circle Radius: ', circleRadius);\r\n\r\n                const payloadToPush = {\r\n                  latitude: graphic.geometry.centroid.latitude,\r\n                  longitude: graphic.geometry.centroid.longitude,\r\n                  radius: circleRadius\r\n                }\r\n\r\n                // Update Redux State\r\n                dispatch(addToStoreAction(payloadToPush));\r\n                // dispatch({ type: 'ADD_TO_STORE', payload: payloadToPush });\r\n              }\r\n\r\n              if (event.state === \"update\" && event.tool === \"circle\") {\r\n                console.log(\"Sketch Tool - Update / Circle: \", event);\r\n                // TODO: Determine if '_PUSH' needs to be dispatched on update\r\n              }\r\n\r\n            }\r\n\r\n            const onGraphicUpdate = event => {\r\n              // get graphic as it is being updated\r\n              const graphic = event.graphics[0];\r\n              console.log(\"Sketch Tool - Update: \", event);\r\n\r\n              // check if the graphic is intersecting with any other item(s)\r\n              // still contained by the boundary polygon as the graphic is being updated\r\n              // intersects = geometryEngine.intersects(buffers, graphic.geometry);\r\n              contains = geometryEngine.contains(boundaryPolygon, graphic.geometry);\r\n\r\n\r\n              // change the graphic symbol to valid or invalid symbol\r\n              // depending the graphic location\r\n              graphic.symbol = (intersects) ? invalidSymbol : validSymbol;\r\n\r\n              // check if the update event's the toolEventInfo.type is move-stop or reshape-stop\r\n              // then it means user finished moving or reshaping the graphic, call complete method.\r\n              // this will change update event state to complete and we will check the validity of the graphic location.\r\n              if (event.toolEventInfo &&\r\n                (event.toolEventInfo.type === \"move-stop\" ||\r\n                  event.toolEventInfo.type === \"reshape-stop\")\r\n              ) {\r\n                console.log(\"On Stop / Reshape: \", graphic);\r\n                if (contains && !intersects) {\r\n                  console.log(\"On Reshape / Complete: \", graphic);\r\n                  // sketchViewModel.complete();\r\n                }\r\n              } else if (event.state === \"complete\") {\r\n                console.log(\"On Complete: \", graphic);\r\n                // sketchViewModel.complete();\r\n                logGeometry(graphic.geometry);\r\n\r\n                // graphic moving or reshaping has been completed or cancelled (distinguish with aborted property)\r\n                // if the graphic is in an illegal spot, call sketchviewmodel's update method again\r\n                // giving user a chance to correct the location of the graphic\r\n                if (!contains || intersects) {\r\n                  console.log(\"On Reshape: \", graphic);\r\n                  // sketchViewModel.update([graphic], { tool: \"reshape\" });\r\n                  logGeometry(graphic.geometry);\r\n                }\r\n              }\r\n            }\r\n\r\n            // This function is called when a user clicks on the view.\r\n            const setUpGraphicClickHandler = () => {\r\n              mapView.on(\"click\", function (event) {\r\n                // check if the sketch's state active if it is then that means\r\n                // the graphic is already being updated, no action required.\r\n                if (sketch.state === \"active\") {\r\n                  return;\r\n                }\r\n                mapView.hitTest(event).then((response) => {\r\n                  var results = response.results;\r\n                  console.log(\"HitTest Results: \", results);\r\n                  // Check if the new development graphic was clicked and pass\r\n                  // the graphic to sketchViewModel.update() with reshape tool.\r\n                  results.forEach(result => {\r\n                    if (\r\n                      result.graphic.layer === sketch.layer &&\r\n                      result.graphic.attributes &&\r\n                      result.graphic.attributes.newDevelopment\r\n                    ) {\r\n                      console.log('sketch graphic updated', result);\r\n                      sketch.update([result.graphic], { tool: \"reshape\" });\r\n                    }\r\n                    else {\r\n                      console.log('sketch: No graphic clicked and passed in', result);\r\n                    }\r\n\r\n                  });\r\n\r\n                });\r\n\r\n              });\r\n\r\n            }\r\n\r\n            /*/\r\n             *  ┌────────────────────────────────────────┐\r\n             *  │ |> Event Listeners for Sketch Tools    │\r\n             *  └────────────────────────────────────────┘\r\n            /*/\r\n\r\n            // Logging geoFence data via `SketchViewModel` + `eventListener` working in tandem\r\n            function logGeometry(geometry) {\r\n              if (geometry.type === \"point\") {\r\n                // new at 4.6, the compiler knows the geometry is a Point instance\r\n                console.log(\"point coords: \", geometry.x, geometry.y, geometry.z);\r\n              }\r\n              else {\r\n                // the compiler knows the geometry must be a `Extent | Polygon | Multipoint | Polyline`\r\n                console.log(\"The value is a geometry, but isn't a point.\");\r\n              }\r\n\r\n            }\r\n\r\n          });\r\n\r\n        // Call the map loaded event   when we get the map view back\r\n        props.onMapLoaded();\r\n\r\n      });\r\n      //#endregion\r\n\r\n  }, []);\r\n\r\n  // NOTE: Listen for status updates\r\n  if (areaQueryStatus == \"success\") {\r\n    console.log(\"Data Status: \", areaQueryStatus);\r\n    // const renderFeatureLayer = <FeatureLayerBuilder baseMap={baseMapState} mapView={mapViewState} payload={areaQueryState} />\r\n    featureLayerBuilder(baseMapState, mapViewState, areaQueryState)\r\n      .then(res => {\r\n        const submitDatesBtn = document.getElementById('submitDatesBtn');\r\n        const alertSuccess = document.getElementById('alertSuccess');\r\n\r\n        submitDatesBtn.removeAttribute('loading');\r\n        submitDatesBtn.removeAttribute('disabled');\r\n        // alertSuccess.active = true;\r\n\r\n      });\r\n  }\r\n\r\n  if (patternQueryStatus == \"success\") {\r\n    console.log(\"Data Status: \", patternQueryStatus);\r\n    // const renderFeatureLayer = <FeatureLayerBuilder baseMap={baseMapState} mapView={mapViewState} payload={areaQueryState} />\r\n    patternOfLifeBuilder(baseMapState, mapViewState, patternQueryState);\r\n  }\r\n\r\n  // Date Range Event Handlers\r\n  const queryStartHandler = date => {\r\n    // Update State\r\n    console.log('queryStartHandler: ', date);\r\n\r\n    const startDateParsed = Date.parse(date);\r\n    // const startIsoString = date.toISOString().slice(0, -5) + 'Z'\r\n    setStartDate(startDateParsed);\r\n  }\r\n\r\n  const queryEndHandler = date => {\r\n    // Update State\r\n    console.log('queryEndHandler: ', date);\r\n\r\n    const endDateParsed = Date.parse(date);\r\n    // const endIsoString = date.toISOString().slice(0, -5) + 'Z'\r\n    setEndDate(endDateParsed);\r\n  }\r\n\r\n  // Render Component\r\n  return (\r\n    <React.Fragment>\r\n      <AlertBuilderInfo />\r\n      <AlertBuilderProcess />\r\n      <AlertBuilderProcessSuccess />\r\n      <AlertBuilderWarning />\r\n      <AlertBuilderNoResultsWarning />\r\n      <AlertBuilderDanger />\r\n      <Container id={containerId} qp-hidden=\"true\" >\r\n        {/* <ActionBarPrimary></ActionBarPrimary> */}\r\n        <Card\r\n          id=\"dateRangeCard\"\r\n          bar=\"blue\"\r\n          className={'esri-widget'}\r\n          // TODO: Move inline style to the global / custom .scss file\r\n          style={{ mar1gin: '0 5px', flex: '1 0 25%' }}>\r\n          <CardContent>\r\n            <CardTitle>Date Range:</CardTitle>\r\n            <DateRangeComponent\r\n              className={'esri-widget'}\r\n              startDate={startDate}\r\n              endDate={endDate}\r\n              handleStartQuery={queryStartHandler}\r\n              handleEndQuery={queryEndHandler}\r\n            />\r\n\r\n            {/* <Button green>Submit</Button> */}\r\n\r\n          </CardContent>\r\n\r\n        </Card>\r\n\r\n      </Container>\r\n\r\n    </React.Fragment>\r\n  )\r\n}\r\n//#endregion\r\n\r\nexport default MapComponent;\r\n","import { loadModules } from \"esri-loader\";\r\n\r\nexport function loadMap(element, mapConfig, loaderConfig) {\r\n  // TODO: Refactor by importing as ES Modules per ArcGIS JS API v4.18\r\n  ///// TODO: Refactor all Esri 'widget' constructors / instances to live here  \r\n  return loadModules([\"esri/Map\", \"esri/views/MapView\", \"esri/layers/GraphicsLayer\"], loaderConfig)\r\n    .then(([Map, MapView, GraphicsLayer]) => {\r\n            \r\n      // const layer = new GraphicsLayer();\r\n\r\n      // Component or app was likely destroyed \r\n      // TODO: Error handling needed\r\n      if (!element) return;\r\n\r\n      // Create the Map\r\n      const map = new Map(mapConfig);\r\n\r\n      // Show the map at the element\r\n      let view = new MapView({\r\n        map,\r\n        container: element,\r\n        // layers: [layer],\r\n        ...mapConfig\r\n      });\r\n\r\n      // _TODO: Possible home for `FeatureLayerBuilder`\r\n      \r\n      // Wait for the view to load // NOTE: may not need this?\r\n      return view.when(() => {\r\n        // Return a reference to the view\r\n        return view;\r\n      });\r\n  });\r\n}\r\n","//#region [copyright]\r\n// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.​\r\n//#endregion\r\n\r\n//#region [imports]\r\n// React\r\nimport React, { Profiler, Suspense, useRef } from \"react\";\r\n// import { NavLink } from \"react-router-dom\";\r\n\r\n// Redux\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { mapLoaded } from \"../redux/reducers/map\";\r\nimport { startAuth, logout } from \"../redux/reducers/auth\";\r\n\r\n// Calcite Components\r\nimport Button from \"calcite-react/Button\";\r\nimport TopNav from \"calcite-react/TopNav\";\r\nimport TopNavBrand from \"calcite-react/TopNav/TopNavBrand\";\r\nimport TopNavTitle from \"calcite-react/TopNav/TopNavTitle\";\r\nimport TopNavList from \"calcite-react/TopNav/TopNavList\";\r\nimport TopNavLink from \"calcite-react/TopNav/TopNavLink\";\r\nimport SubNav from \"calcite-react/SubNav\";\r\n\r\n// QP Custom\r\nimport UserAccount from \"./UserAccount\";\r\nimport LoadScreen from \"./LoadScreen\";\r\nimport MapComponent from \"./esri/map/Map\";\r\nimport ActionBarPrimary from \"./ActionBarPrimary\";\r\n\r\n// import DateRangeWidget from \"./esri/widgets/DateRangeWidget\";\r\n// import DateRangeEsxpandWidget from \"./esri/widgets/DateRangeExpandWidget\";\r\n\r\n// TODO: Replace QP logo with SVG format\r\nimport logo from \"../styles/images/quiet-professionals-logo.png\";\r\n\r\n// Icons\r\n// import { DataIcon } from \"calcite-ui-icons-react/DataIcon\";\r\n// import { GraphScatterPlotIcon as AmpdIcon } from \"calcite-ui-icons-react/GraphScatterPlotIcon\";\r\n// import { GearIcon } from \"calcite-ui-icons-react/GearIcon\";\r\n\r\n// Styled Components\r\nimport styled from \"styled-components\";\r\n// import SubNavActions from \"calcite-react/SubNav/SubNavActions\";\r\n// import Devices from \"../utils/devices\";\r\n//#endregion\r\n\r\n//#region [styles]\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  text-align: center;\r\n`;\r\n\r\nconst MapWrapper = styled.div`\r\n  display: flex;\r\n  flex: 1;\r\n  flex-direction: column;\r\n  position: relative;\r\n  z-index: 0;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst Logo = styled(TopNavBrand)`\r\n  justify-content: center;\r\n  & img {\r\n    height: 55px;\r\n  }\r\n`;\r\n\r\nconst Nav = styled(TopNav)`\r\n  && {\r\n    z-index: 5;\r\n  }\r\n`;\r\n\r\nconst NavList = styled(TopNavList)`\r\n  text-align: inherit;\r\n`;\r\n\r\n//#endregion\r\n\r\n//#region [component]\r\nconst Main = props => {\r\n  const auth = useSelector(state => state.auth);\r\n  const config = useSelector(state => state.config);\r\n  const user = useSelector(state => state.auth.user);\r\n  const isMapLoaded = useSelector(state => state.map.loaded);\r\n  const dispatch = useDispatch();\r\n\r\n  // #region [oauth]\r\n  // Sign in button click event\r\n  const signIn = () => {\r\n    const { clientId, sessionId, popup } = config;\r\n    console.log(\"Init user authentication\");\r\n    dispatch(\r\n      startAuth({\r\n        clientId,\r\n        sessionId,\r\n        popup,\r\n        signInRequest: true\r\n      })\r\n    );\r\n  }\r\n\r\n  // Sign out button click event\r\n  const signOut = () => {\r\n    console.log(\"Logout current user\");\r\n    dispatch(logout(config.sessionId));\r\n  }\r\n  // //#endregion\r\n\r\n  // #region [utils] \r\n  // Performance Benchmarks\r\n  function callback(\r\n    id, \r\n    phase, \r\n    actualTime, \r\n    baseTime, \r\n    startTime, \r\n    commitTime) \r\n  {\r\n    console.log(\"Main > callback()\");\r\n    console.dir(\r\n      \"id: \" + id,\r\n      \"phase:\" + phase,\r\n      \"actualTime:\" + actualTime,\r\n      \"baseTime: \" + baseTime,\r\n      \"startTime: \" + startTime,\r\n      \"commitTime: \" + commitTime\r\n    )\r\n  }\r\n  // #endregion\r\n  // TODO: Merge Action Bar into this `Main.jsx` Component\r\n  return (\r\n    <Container>\r\n      {/* // IDEA: Consider using `React.Suspense` in place of current `LoadScreen` component */}\r\n      <LoadScreen isLoading={!isMapLoaded} />\r\n      {/* // TODO: Udate Current Nav or possibly extend Calcite TopNav */}\r\n      <Nav>\r\n        <Logo href=\"#\" src={logo} />\r\n        <TopNavTitle href=\"#\">Welcome to Gavel</TopNavTitle>\r\n        { (!user)\r\n          ? <NavList>\r\n\r\n            </NavList>\r\n          : <NavList>\r\n\r\n            </NavList> \r\n        }\r\n\r\n        <UserAccount                                                                            \r\n          user={auth.user}\r\n          portal={auth.portal}\r\n          token={auth.token}\r\n          loggedIn={auth.loggedIn}\r\n          signIn={signIn}\r\n          signOut={signOut}\r\n        />\r\n      </Nav>\r\n\r\n      {/* <ActionBarPrimary> */}\r\n        <MapWrapper>\r\n          {/* //! WARN: Determine if Suspense is still beta release and is an `experimental feature` */}\r\n          <Suspense fallback={<div>Loading Gavel...</div>}>\r\n            <MapComponent\r\n              onMapLoaded={mapLoaded}\r\n              mapConfig={config.mapConfig}\r\n              loaderConfig={config.loaderConfig}\r\n            />\r\n          </Suspense>\r\n\r\n        </MapWrapper>\r\n\r\n      {/* </ActionBarPrimary> */}\r\n\r\n    </Container>\r\n  );\r\n  \r\n}\r\n//#endregion\r\n\r\nexport default Main;\r\n","export default \"data:image/png;base64,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\"","//#region [copyright]\r\n// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.​\r\n//#endregion\r\n\r\n/** -------------------------------------------------------------- ->\r\n *  ┌────────────────────────────────────┐\r\n *  │ |> GAVEL - GAVEL Web Application   │\r\n *  └────────────────────────────────────┘\r\n *\r\n *  @name: 'Gavel - Anonymized marshalling of mobile device data'\r\n *  @description: 'Express API / Server in support of GAVEL'\r\n *  @implements: 'Custom RESTful API'\r\n *  @author: '@quiet-professionals-jsingletary'\r\n *  @copyright: 'Quiet Professionals LLC'\r\n *\r\n*/\r\n\r\n//#region [imports]\r\n// React\r\nimport React, { useEffect, useState, Profiler } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\n// Redux\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { fetchConfig, updateConfig } from \"../redux/reducers/config\";\r\nimport { checkAuth, startAuth, completeAuth } from \"../redux/reducers/auth\";\r\nimport { setSecurityToken } from \"../redux/reducers/security-token\";\r\n\r\n// Axios\r\n// import axios from \"axios\";\r\n\r\n// Components\r\nimport LoadScreen from \"./LoadScreen\";\r\nimport Main from \"./Main\";\r\n\r\n// Calcite Styles\r\nimport '@esri/calcite-components/dist/calcite/calcite.css';\r\nimport '../styles/global.css';\r\n\r\n//#endregion\r\n\r\n//#region [component]\r\n// Component definition\r\nconst App = props => {\r\n\r\n  // we'll use the url to determin sign-in state\r\n  const { pathname } = props.location;\r\n\r\n  console.log('Pathname', props);\r\n\r\n  // redux store state\r\n  const user = useSelector(state => state.auth.user);\r\n  const config = useSelector(state => state.config);\r\n  const securityToken = useSelector(state => state.securityToken);\r\n  const dispatch = useDispatch();\r\n  ////const [jsonData, setJsonData] = useState({});\r\n  \r\n  // Venntel API\r\n  // const securityTokenUrl = \"https://staging-bs-api.venntel.com/v1.5/securityToken\";\r\n  // const securityTokenUrl = \"http://localhost:5000/api/location-data\";\r\n  // const searchURL = \"https://staging-bs-api.venntel.com/v1.5/locationData/search\";\r\n  // const headers = {\r\n  //   'Content-Type': 'application/json',\r\n  //   'Accept': 'application/json',\r\n  //   'Authorization': '995dba95-c33d-456b-a7ea-3fd512e60894'\r\n  // };\r\n\r\n  // when the component mounts request the config and load it into the Redux state\r\n  useEffect(() => {\r\n    dispatch(fetchConfig());\r\n  }, []);\r\n\r\n  // once the component mounts and the config loads, check if we have a saved session\r\n  useEffect(() => {\r\n    // if the config isn't yet loaded then skip this effect\r\n    if (!config.loaded) return;\r\n\r\n    const { portalUrl, clientId, sessionId, dojoConfig } = config;\r\n    // Esri specific\r\n    window.dojoConfig = dojoConfig;\r\n\r\n    dispatch(checkAuth({ portalUrl, clientId, sessionId }));\r\n  }, [config]);\r\n\r\n  // if there's no stored session, we'll watch the url path to see if we need to kick off an authentication\r\n  // this can happen automatically with a portalUrl property in the config\r\n  // or if the user requests a login through an event\r\n  useEffect(() => {\r\n    // if the config isn't yet loaded then skip this effect\r\n    if (!config.loaded) return;\r\n    const { portalUrl, clientId, sessionId } = config;\r\n\r\n    // INIT: Esri Authentication\r\n    // we'll start the authentication here and it will return here to complete\r\n    if (pathname !== \"/auth\") {\r\n      if (portalUrl && !user) {\r\n        dispatch(startAuth({ portalUrl, clientId, sessionId }));\r\n      }\r\n    } else if (pathname === \"/auth\" && !user) {\r\n      dispatch(completeAuth({ portalUrl, clientId, sessionId }));\r\n    }\r\n  }, [user, pathname, config]);\r\n\r\n  // TODO: Move this dispatch and init before `sendAreaQuery()` is called.\r\n  useEffect(() => {\r\n    if (securityToken.isValid) return;\r\n    dispatch(setSecurityToken());\r\n  }, [securityToken]);\r\n\r\n  // set a halt state to allow the authentication process to complete before\r\n  // we redirect to the main component\r\n  let signInRequested = true; // _CODE: Should this `identifier` be moved to local/global state?\r\n  if (pathname === \"/auth\") {\r\n    signInRequested = true;\r\n  }\r\n\r\n  // RENDER RETURN\r\n  // app is initializing for the following reasons, show the load screen\r\n  // 1. config is not yet loaded\r\n  // 2. authentication is required but there is no user information\r\n  // 3. authentication is not required but user has requested to sign-in\r\n  // IDEA: Discuss using `React.Suspense` in favor of `isLoaded` attribute\r\n  if (!config.loaded || ((config.portalUrl && !user) || (signInRequested && !user))) {\r\n    return <LoadScreen isLoaded={false} />;\r\n  }\r\n  \r\n  // App is initialized and user is authenticated if needed, route to main component\r\n  // NOTE: PM2 will handle routing on server-side by leveraging PM2 `--spa` option\r\n  return (\r\n    <React.Fragment>\r\n      <Route path=\"/main\" component={Main} />\r\n      <Redirect to=\"/main\" />\r\n    </React.Fragment>\r\n  );\r\n};\r\n//#endregion\r\n\r\nexport default App;\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === \"localhost\" ||\r\n    // [::1] is the IPv6 localhost address. \r\n    window.location.hostname === \"[::1]\" ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // !!Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // !!from what our page is served on. This might happen if a CDN is used to\r\n      // !!serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener(\"load\", () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (!isLocalhost) {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      } else {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === \"installed\") {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log(\"New content is available; please refresh.\");\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log(\"Content is cached for offline use.\");\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error(\"Error during service worker registration:\", error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get(\"content-type\").indexOf(\"javascript\") === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        console.log(\"Service worker has been located - Proceed as normal\");\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\"No internet connection found. App is running in offline mode.\");\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if (\"serviceWorker\" in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.​\r\n\r\nimport { createGlobalStyle } from \"styled-components\";\r\n\r\n// Global page styling\r\n// override AGIS JS API Widgets here\r\nexport const GlobalStyle = createGlobalStyle`\r\n  html,\r\n  body {\r\n    height: 100%;\r\n    font-family: Montserrat, sans-serif;\r\n  }\r\n\r\n  body {\r\n    margin: 0;\r\n    padding: 0;\r\n    font-weight: 300;\r\n    letter-spacing: 1px;\r\n    font-size: 16px;\r\n  }\r\n\r\n  .esri-layer-list__item{\r\n    &::before {\r\n      width: 100%;\r\n      left: 0;\r\n    }\r\n  }\r\n\r\n  nav.ciBUMa {\r\n    padding: 0 1em;\r\n  }\r\n`;\r\n","//#region [copyright]\r\n// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.​\r\n//#endregion\r\n\r\n//#region [imports]\r\n// Polyfills\r\n// import \"@babel/polyfill\";\r\n\r\n// React\r\nimport React, { useContext } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\n// React Router\r\nimport { \r\n  BrowserRouter,\r\n  Route \r\n} from \"react-router-dom\";\r\n\r\n// Redux\r\nimport { Provider } from \"react-redux\";\r\nimport { initStore } from \"./redux/store\";\r\n\r\n// Components\r\nimport { homepage } from \"../package.json\";\r\nimport App from \"./components/App\";\r\n\r\n// PWA\r\nimport * as serviceWorker from './registerServiceWorker';\r\n\r\n// Utils\r\nrequire('dotenv').config();\r\n\r\n// Calcite-React Components\r\nimport CalciteThemeProvider from \"calcite-react/CalciteThemeProvider\";\r\n\r\n// Calcite-Components\r\nimport '@esri/calcite-components/dist';\r\nimport { \r\n  applyPolyfills,\r\n  defineCustomElements \r\n} from '@esri/calcite-components/dist/loader';\r\n\r\n// Fonts & Styles\r\nimport \"./styles/fonts.css\";\r\nimport { GlobalStyle } from \"./styles/global\";\r\n// import \"@arcgis/core/assets/esri/themes/dark/main.css\";\r\n\r\n//#endregion\r\n\r\n// reportWebVitals(console.log);\r\n\r\n/*/ -------------------------------------------------------------- ->\r\n *  ┌──────────────────────────────────────┐  \r\n *  │ |> Homepage / Entry Point Settings   │\r\n *  └──────────────────────────────────────┘\r\n *  !! App runs at the root locally, but under ${homepage} in prod\r\n *  !! ${homepage} can be adjusted in `../package.json`\r\n * \r\n/*/\r\n// --App runs at the root locally, but under /{homepage} in production\r\nlet basename = null;\r\nprocess.env.NODE_ENV !== \"production\" ? (basename = \".\") : (basename = homepage);\r\n\r\nconsole.log('NODE_ENV: ', process.env.NODE_ENV);\r\nconsole.log('basename: ', basename);\r\n\r\n// Create Redux Store\r\nexport const store = initStore();\r\n\r\n// Apply polyfills and then define the custom elements\r\n// NOTE: Polyfills are not needed if you don't support IE11 or Edge\r\napplyPolyfills().then(() => {\r\n  defineCustomElements(window);\r\n  // App Entry Point\r\n  ReactDOM.render(\r\n    <Provider store={store}>\r\n      <BrowserRouter basename={basename}>\r\n        <CalciteThemeProvider>\r\n          <GlobalStyle />\r\n          <Route path=\"/\" component={App} />\r\n        </CalciteThemeProvider>\r\n      </BrowserRouter>\r\n    </Provider>,\r\n    document.getElementById(\"root\")\r\n  );\r\n});\r\n\r\n// PWAs\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","//#region [copyright]\r\n// Copyright 2019 Esri\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.​\r\n//#endregion\r\n\r\n/**-------------------------------------------------------------\r\n *  #Configure and create the Redux here\r\n *  ~~Includes Saga\r\n *  @type {Object} This is the store object that Redux\r\n * \r\n*/\r\n\r\n/**-------------------------------------------------------------- ->\r\n *  ┌─────────────────────────────────────┐\r\n *  │ |> Redux - Single-Source of Truth   │\r\n *  └─────────────────────────────────────┘\r\n *\r\n *  @name: 'Gavel - Anonymized marshalling of mobile device data'\r\n *  @description: 'Centralizing your application's logics and state persistence.'\r\n *  @author: '@quiet-professionals-jsingletary'\r\n *  @copyright: 'Quiet Professionals LLC'\r\n *\r\n*/\r\n\r\n// REDUX IMPORTS //\r\nimport { applyMiddleware, combineReducers, compose, createStore } from 'redux';\r\nimport createSagaMiddleware from 'redux-saga';\r\nimport rootSaga from './sagas/index';\r\n\r\nimport * as reducers from './';\r\nimport { watcherSaga } from './sagas/root-saga';\r\n\r\nexport function initStore() {\r\n  // Setup Redux dev tools\r\n  // NOTE: Redux Devtool issue - see https://github.com/zalmoxisus/redux-devtools-extension/issues/619\r\n  // TODO: Look into this 'Enhancer' to see if this workaround is still needed.\r\n  const composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\n  // Setup Redux store\r\n  const rootReducer = combineReducers(reducers);\r\n  const sagaMiddleware = createSagaMiddleware();\r\n\r\n  // Add additional middleware to the `middleware` array\r\n  const middleware = [sagaMiddleware];\r\n\r\n  const store = createStore(\r\n    rootReducer,\r\n    composeEnhancer(applyMiddleware(...middleware))\r\n  );\r\n\r\n  // Run sagas\r\n  sagaMiddleware.run(rootSaga);\r\n  sagaMiddleware.run(watcherSaga); // TODO: This watcherSaga() to be merged into rootSaga() ./index.js\r\n\r\n  return store;\r\n}\r\n"],"sourceRoot":""}