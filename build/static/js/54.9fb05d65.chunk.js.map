{"version":3,"sources":["../node_modules/@arcgis/core/portal/support/layersLoader.js","../node_modules/@arcgis/core/layers/support/lazyLayerLoader.js"],"names":["s","n","a","u","instance","portalItem","id","load","t","r","supportedTypes","indexOf","type","e","expectedType","join","d","y","url","f","title","m","read","l","o","FeatureLayer","StreamLayer","SceneLayer","then","p","c","i","responseType","query","data","name","layers","map","tables","h","resourceReferences","paths","readResourcePaths","forEach","layerDefinition","push","filter","reverse","add","clone","layerId","sublayerTitleMode","origin","portal","getDefault","showLegend","supportsData","fetchData","catch","length","BingMapsLayer","default","BuildingSceneLayer","CSVLayer","ElevationLayer","GroupLayer","GeoRSSLayer","ImageryLayer","ImageryTileLayer","IntegratedMeshLayer","KMLLayer","MapImageLayer","MapNotesLayer","OpenStreetMapLayer","PointCloudLayer","RouteLayer","TileLayer","UnknownLayer","UnsupportedLayer","VectorTileLayer","WebTileLayer","WMSLayer","WMTSLayer"],"mappings":"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","file":"static/js/54.9fb05d65.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{resolve as t}from\"../../core/promiseUtils.js\";import r from\"../../request.js\";import n from\"../Portal.js\";import{loadStyleRenderer as l}from\"../../renderers/support/styleUtils.js\";import{createForItem as a}from\"./jsonContext.js\";import{layerLookupMap as o}from\"../../layers/support/lazyLayerLoader.js\";async function s(n,s){const u=n.instance.portalItem;return u&&u.id?(await u.load(s),function(t){const r=t.instance.portalItem;if(-1===t.supportedTypes.indexOf(r.type))throw new e(\"portal:invalid-layer-item-type\",\"Invalid layer item type '${type}', expected '${expectedType}'\",{type:r.type,expectedType:t.supportedTypes.join(\", \")})}(n),async function(n,s){const u=n.instance,d=u.portalItem,{url:y,title:f}=d,m=a(d);if(\"group\"===u.type)return u.read({title:f},m),function(n,l){let a;const s=n.portalItem.type;switch(s){case\"Feature Service\":a=o.FeatureLayer;break;case\"Stream Service\":a=o.StreamLayer;break;case\"Scene Service\":a=o.SceneLayer;break;case\"Feature Collection\":a=o.FeatureLayer;break;default:throw new e(\"portal:unsupported-item-type-as-group\",`The item type '${s}' is not supported as a 'GroupLayer'`)}let u;return a().then((e=>(u=e,p(l)))).then((e=>c(e)>0?i(n,u,e):function(e,n){if(!e.portalItem.url)return t();const l={responseType:\"json\",query:{f:\"json\"}};return r(e.portalItem.url,l).then((t=>{var r,l;const a=t.data;function o(e){return{id:e.id,name:e.name}}a&&i(e,n,{layers:null==(r=a.layers)?void 0:r.map(o),tables:null==(l=a.tables)?void 0:l.map(o)})}))}(n,u)))}(u,n);y&&u.read({url:y},m);const h=await p(n,s);h&&u.read(h,m);return u.resourceReferences={portalItem:d,paths:m.readResourcePaths},u.read({title:f},m),l(u,m)}(n,s)):t()}function i(e,t,r){let n=r.layers||[];const l=r.tables||[];\"Feature Collection\"===e.portalItem.type&&(n.forEach((e=>{var t;\"Table\"===(null==e||null==(t=e.layerDefinition)?void 0:t.type)&&l.push(e)})),n=n.filter((e=>{var t;return\"Table\"!==(null==e||null==(t=e.layerDefinition)?void 0:t.type)}))),n.reverse().forEach((n=>{const l=u(e,t,r,n);e.add(l)})),l.reverse().forEach((n=>{const l=u(e,t,r,n);e.tables.add(l)}))}function u(e,t,r,l){const a=new t({portalItem:e.portalItem.clone(),layerId:l.id,sublayerTitleMode:\"service-name\"});if(\"Feature Collection\"===e.portalItem.type){const t={origin:\"portal-item\",portal:e.portalItem.portal||n.getDefault()};a.read(l,t);const o=r.showLegend;null!=o&&a.read({showLegend:o},t)}return a}function p(e,r){if(!1===e.supportsData)return t();const n=e.instance;return n.portalItem.fetchData(\"json\",r).catch((()=>null)).then((e=>{const t=e;let r;if(function(e){if(\"stream\"===e.type)return!1;return\"layerId\"in e}(n)){let l=!0;return e&&c(t)>0&&(null==n.layerId&&(n.layerId=function(e){const t=e.layers;if(t&&t.length)return t[0].id;const r=e.tables;if(r&&r.length)return r[0].id;return null}(t)),r=function(e,t){const r=e.layers;if(r)for(let e=0;e<r.length;e++)if(r[e].id===t)return r[e];const n=e.tables;if(n)for(let e=0;e<n.length;e++)if(n[e].id===t)return n[e];return null}(t,n.layerId),r&&(1===c(t)&&(l=!1),null!=e.showLegend&&(r.showLegend=e.showLegend))),l&&\"service-name\"!==n.sublayerTitleMode&&(n.sublayerTitleMode=\"item-title-and-service-name\"),r}return e}))}function c(e){var t,r,n,l;return(null!=(t=null==e||null==(r=e.layers)?void 0:r.length)?t:0)+(null!=(n=null==e||null==(l=e.tables)?void 0:l.length)?n:0)}export{s as load};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst a={BingMapsLayer:async()=>(await import(\"../BingMapsLayer.js\")).default,BuildingSceneLayer:async()=>(await import(\"../BuildingSceneLayer.js\")).default,CSVLayer:async()=>(await import(\"../CSVLayer.js\")).default,ElevationLayer:async()=>(await import(\"../ElevationLayer.js\")).default,FeatureLayer:async()=>(await import(\"../FeatureLayer.js\")).default,GroupLayer:async()=>(await import(\"../GroupLayer.js\")).default,GeoRSSLayer:async()=>(await import(\"../GeoRSSLayer.js\")).default,ImageryLayer:async()=>(await import(\"../ImageryLayer.js\")).default,ImageryTileLayer:async()=>(await import(\"../ImageryTileLayer.js\")).default,IntegratedMeshLayer:async()=>(await import(\"../IntegratedMeshLayer.js\")).default,KMLLayer:async()=>(await import(\"../KMLLayer.js\")).default,MapImageLayer:async()=>(await import(\"../MapImageLayer.js\")).default,MapNotesLayer:async()=>(await import(\"../MapNotesLayer.js\")).default,OpenStreetMapLayer:async()=>(await import(\"../OpenStreetMapLayer.js\")).default,PointCloudLayer:async()=>(await import(\"../PointCloudLayer.js\")).default,RouteLayer:async()=>(await import(\"../RouteLayer.js\")).default,SceneLayer:async()=>(await import(\"../SceneLayer.js\")).default,StreamLayer:async()=>(await import(\"../StreamLayer.js\")).default,TileLayer:async()=>(await import(\"../TileLayer.js\")).default,UnknownLayer:async()=>(await import(\"../UnknownLayer.js\")).default,UnsupportedLayer:async()=>(await import(\"../UnsupportedLayer.js\")).default,VectorTileLayer:async()=>(await import(\"../VectorTileLayer.js\")).default,WebTileLayer:async()=>(await import(\"../WebTileLayer.js\")).default,WMSLayer:async()=>(await import(\"../WMSLayer.js\")).default,WMTSLayer:async()=>(await import(\"../WMTSLayer.js\")).default};export{a as layerLookupMap};\n"],"sourceRoot":""}