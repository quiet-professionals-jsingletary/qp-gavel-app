{"version":3,"sources":["../node_modules/@arcgis/core/views/2d/layers/features/support/whereUtils.js","../node_modules/@arcgis/core/layers/graphics/data/FeatureFilter.js","../node_modules/@arcgis/core/layers/graphics/data/utils.js","../node_modules/@arcgis/core/layers/graphics/data/timeSupport.js","../node_modules/@arcgis/core/layers/graphics/contains.js","../node_modules/@arcgis/core/layers/graphics/data/spatialQuerySupport.js"],"names":["t","e","getLogger","a","getAttribute","r","field","s","n","o","WhereClause","create","isStandardized","error","readArcadeFeature","testFeature","warn","m","p","this","_geometryBounds","_idToVisibility","Map","_serviceInfo","_hash","_applyFilter","_resetAllHiddenIds","update","show","hide","forEach","set","i","Set","get","h","has","push","_","geometry","spatialRel","where","timeExtent","objectIds","fromJSON","JSON","stringify","Promise","all","_setGeometryFilter","_setIdFilter","_setAttributeFilter","_setTimeFilter","_clause","d","fieldsIndex","_idsToShow","_idsToHide","hiddenIds","_spatialQueryOperator","geometryType","hasZ","hasM","_timeOperator","timeInfo","l","_filterByGeometry","_filterById","_filterByTime","_filterByExpression","size","getObjectId","readHydratedGeometry","w","esriSRUnit_Meter","esriSRUnit_Kilometer","esriSRUnit_Foot","esriSRUnit_StatuteMile","esriSRUnit_NauticalMile","esriSRUnit_USNauticalMile","j","Object","freeze","U","M","F","G","esriGeometryPoint","u","esriGeometryPolyline","y","esriGeometryPolygon","g","esriGeometryMultipoint","S","N","c","f","J","outFields","orderByFields","groupByFieldsForStatistics","outStatistics","length","trim","onStatisticField","outSR","spatialReference","v","test","Z","distance","units","toJSON","then","b","geodesicBuffer","x","z","parse","B","featureAdapter","startTimeField","endTimeField","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","isNaN","Math","min","max","start","end","coords","lengths","R","esriSpatialRelIntersects","esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelDisjoint","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelOverlaps","esriSpatialRelTouches","esriSpatialRelWithin","esriSpatialRelRelation","esriGeometryEnvelope","resolve","bind","P","query","I","rings"],"mappings":"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","file":"static/js/72.84d49aa5.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/Logger.js\";import r from\"../../../../../core/Error.js\";const t=e.getLogger(\"esri.views.2d.layers.features.support.whereUtils\"),a={getAttribute:(e,r)=>e.field(r)};async function s(e,s){const n=await import(\"../../../../../core/sql/WhereClause.js\");try{const o=n.WhereClause.create(e,s);if(!o.isStandardized){const e=new r(\"mapview - bad input\",\"Unable to apply filter's definition expression, as expression is not standardized.\",o);t.error(e)}return e=>{const r=e.readArcadeFeature();return o.testFeature(r,a)}}catch(o){return t.warn(\"mapview-bad-where-clause\",\"Encountered an error when evaluating where clause\",e),e=>!0}}export{s as createWhereClause};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../core/maybe.js\";import e from\"../../../core/Logger.js\";import i from\"../../../core/Error.js\";import{getBoundsXY as s}from\"../../../geometry/support/boundsUtils.js\";import{create as r}from\"../../../geometry/support/aaBoundingRect.js\";import o from\"../../../tasks/support/Query.js\";import{normalizeQueryLike as h}from\"./utils.js\";import{getSpatialQueryOperator as a}from\"./spatialQuerySupport.js\";import{getTimeOperator as l}from\"./timeSupport.js\";import{featureAdapter as n}from\"../../../views/2d/layers/features/FeatureStore2D.js\";import{createWhereClause as d}from\"../../../views/2d/layers/features/support/whereUtils.js\";const m=e.getLogger(\"esri.views.2d.layers.features.controllers.FeatureFilter\"),_=1,u=2;class p{constructor(t){this._geometryBounds=r(),this._idToVisibility=new Map,this._serviceInfo=t}get hash(){return this._hash}check(t){return this._applyFilter(t)}clear(){const t=this._resetAllHiddenIds();return this.update(),{show:t,hide:[]}}invalidate(){this._idToVisibility.forEach(((t,e)=>{this._idToVisibility.set(e,0)}))}setKnownIds(t){for(const e of t)this._idToVisibility.set(e,_)}setTrue(t){const e=[],i=[],s=new Set(t);return this._idToVisibility.forEach(((t,r)=>{const o=!!(this._idToVisibility.get(r)&_),h=s.has(r);!o&&h?e.push(r):o&&!h&&i.push(r),this._idToVisibility.set(r,h?_|u:0)})),{show:e,hide:i}}createQuery(){const{geometry:t,spatialRel:e,where:i,timeExtent:s,objectIds:r}=this;return o.fromJSON({geometry:t,spatialRel:e,where:i,timeExtent:s,objectIds:r})}async update(t,e){this._hash=JSON.stringify(t);const i=await h(t,null,e);await Promise.all([this._setGeometryFilter(i),this._setIdFilter(i),this._setAttributeFilter(i),this._setTimeFilter(i)])}async _setAttributeFilter(t){if(!t||!t.where)return this._clause=null,void(this.where=null);this._clause=await d(t.where,this._serviceInfo.fieldsIndex),this.where=t.where}_setIdFilter(t){this._idsToShow=t&&t.objectIds&&new Set(t.objectIds),this._idsToHide=t&&t.hiddenIds&&new Set(t.hiddenIds),this.objectIds=t&&t.objectIds}async _setGeometryFilter(t){if(!t||!t.geometry)return this._spatialQueryOperator=null,this.geometry=null,void(this.spatialRel=null);const e=t.geometry,i=t.spatialRel||\"esriSpatialRelIntersects\",r=await a(i,e,this._serviceInfo.geometryType,this._serviceInfo.hasZ,this._serviceInfo.hasM);s(this._geometryBounds,e),this._spatialQueryOperator=r,this.geometry=e,this.spatialRel=i}_setTimeFilter(t){if(this.timeExtent=this._timeOperator=null,t&&t.timeExtent)if(this._serviceInfo.timeInfo)this.timeExtent=t.timeExtent,this._timeOperator=l(this._serviceInfo.timeInfo,t.timeExtent,n);else{const e=new i(\"feature-layer-view:time-filter-not-available\",\"Unable to apply time filter, as layer doesn't have time metadata.\",t.timeExtent);m.error(e)}}_applyFilter(t){return this._filterByGeometry(t)&&this._filterById(t)&&this._filterByTime(t)&&this._filterByExpression(t)}_filterByExpression(t){return!this.where||this._clause(t)}_filterById(t){return(!this._idsToHide||!this._idsToHide.size||!this._idsToHide.has(t.getObjectId()))&&(!this._idsToShow||!this._idsToShow.size||this._idsToShow.has(t.getObjectId()))}_filterByGeometry(t){if(!this.geometry)return!0;const e=t.readHydratedGeometry();return!!e&&this._spatialQueryOperator(e)}_filterByTime(e){return!t(this._timeOperator)||this._timeOperator(e)}_resetAllHiddenIds(){const t=[];return this._idToVisibility.forEach(((e,i)=>{e&_||(this._idToVisibility.set(i,_),t.push(i))})),t}}export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isNone as e}from\"../../../core/maybe.js\";import{JSONMap as t}from\"../../../core/jsonMap.js\";import{isGeographic as r,isWebMercator as i,WGS84 as o}from\"../../../geometry/support/spatialReferenceUtils.js\";import{getGeometryExtent as n}from\"../../../geometry/support/extentUtils.js\";import{fromJSON as s}from\"../../../geometry/support/jsonUtils.js\";import{getUnitString as a}from\"../../../core/unitUtils.js\";import{normalizeCentralMeridian as l}from\"../../../geometry/support/normalizeUtils.js\";import m from\"../OptimizedGeometry.js\";import{quantizeOptimizedGeometry as c,convertToPoint as u,generalizeOptimizedGeometry as f,removeZMValues as p,convertToPolyline as y,convertToPolygon as g,convertToMultipoint as S}from\"../featureConversionUtils.js\";import{getCentroidOptimizedGeometry as R}from\"../centroid.js\";import{checkProjectionSupport as d,project as h}from\"./projectionSupport.js\";const w=new t({esriSRUnit_Meter:\"meters\",esriSRUnit_Kilometer:\"kilometers\",esriSRUnit_Foot:\"feet\",esriSRUnit_StatuteMile:\"miles\",esriSRUnit_NauticalMile:\"nautical-miles\",esriSRUnit_USNauticalMile:\"us-nautical-miles\"}),j=Object.freeze({}),U=new m,M=new m,F=new m,G={esriGeometryPoint:u,esriGeometryPolyline:y,esriGeometryPolygon:g,esriGeometryMultipoint:S};function N(e,t,r,i=e.hasZ,o=e.hasM){const n=e.hasZ&&i,s=e.hasM&&o;if(r){const a=c(F,t,e.hasZ,e.hasM,\"esriGeometryPoint\",r,i,o);return u(a,n,s)}return u(t,n,s)}function O(e,t,r){return\"esriGeometryPolygon\"===e.geometryType&&t&&(t.centroid||t.geometry)?(t.centroid||(t.centroid=R(new m,t.geometry,e.hasZ,e.hasM)),N(e,t.centroid,r)):null}function _(e,t,r,i,o,n,s=t,a=r){const l=t&&s,m=r&&a,u=i?\"coords\"in i?i:i.geometry:null;if(!u)return null;if(o){let i=f(M,u,t,r,e,o,s,a);return n&&(i=c(F,i,l,m,e,n)),G[e](i,l,m)}if(n){const i=c(F,u,t,r,e,n,s,a);return G[e](i,l,m)}return p(U,u,t,r,s,a),G[e](U,l,m)}async function J(e,t,r){const{outFields:i,orderByFields:o,groupByFieldsForStatistics:n,outStatistics:s}=e;if(i)for(let a=0;a<i.length;a++)i[a]=i[a].trim();if(o)for(let a=0;a<o.length;a++)o[a]=o[a].trim();if(n)for(let a=0;a<n.length;a++)n[a]=n[a].trim();if(s)for(let a=0;a<s.length;a++)s[a].onStatisticField&&(s[a].onStatisticField=s[a].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),v(e,t,r)}async function P(e,t,r){return v(e,t,r)}async function v(t,r,i){if(!t)return null;let{where:o}=t;if(t.where=o=o&&o.trim(),(!o||/^1 *= *1$/.test(o)||r&&r===o)&&(t.where=null),!t.geometry)return t;let a=await Z(t);if(t.distance=0,t.units=null,\"esriSpatialRelEnvelopeIntersects\"===t.spatialRel){const{spatialReference:e}=t.geometry;a=n(a),a.spatialReference=e}t.geometry=a,await d(a.spatialReference,i);const m=(await l(s(a)))[0];if(e(m))throw j;const c=m.toJSON(),u=await h(c,c.spatialReference,i);if(!u)throw j;return u.spatialReference=i,t.geometry=u,t}async function Z(e){const{geometry:t,distance:n,units:s}=e;if(null==n||\"vertexAttributes\"in t)return t;const l=t.spatialReference,m=s?w.fromJSON(s):a(l),c=l&&(r(l)||i(l))?t:await d(l,o).then((()=>h(t,o)));return(await b())(c.spatialReference,c,n,m)}async function b(){return(await import(\"../../../geometry/geometryEngineJSON.js\")).geodesicBuffer}function x(e){return e&&z in e?JSON.parse(JSON.stringify(e,B)):e}const z=\"_geVersion\",B=(e,t)=>e!==z?t:void 0;export{j as QUERY_ENGINE_EMPTY_RESULT,x as cleanFromGeometryEngine,O as getCentroid,_ as getGeometry,P as normalizeFilter,J as normalizeQuery,v as normalizeQueryLike,N as transformCentroid};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction t(t,n){if(!t)return null;const e=n.featureAdapter,{startTimeField:u,endTimeField:l}=t;let r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;if(u&&l)n.forEach((t=>{const n=e.getAttribute(t,u),o=e.getAttribute(t,l);null==n||isNaN(n)||(r=Math.min(r,n)),null==o||isNaN(o)||(i=Math.max(i,o))}));else{const t=u||l;n.forEach((n=>{const u=e.getAttribute(n,t);null==u||isNaN(u)||(r=Math.min(r,u),i=Math.max(i,u))}))}return{start:r,end:i}}function n(t,n,r){if(!n||!t)return null;const{startTimeField:i,endTimeField:o}=t;if(!i&&!o)return null;const{start:s,end:a}=n;return null===s&&null===a?null:void 0===s&&void 0===a?l():i&&o?e(r,i,o,s,a):u(r,i||o,s,a)}function e(t,n,e,u,l){return null!=u&&null!=l?r=>{const i=t.getAttribute(r,n),o=t.getAttribute(r,e);return(null==i||i<=l)&&(null==o||o>=u)}:null!=u?n=>{const l=t.getAttribute(n,e);return null==l||l>=u}:null!=l?e=>{const u=t.getAttribute(e,n);return null==u||u<=l}:void 0}function u(t,n,e,u){return null!=e&&null!=u&&e===u?u=>t.getAttribute(u,n)===e:null!=e&&null!=u?l=>{const r=t.getAttribute(l,n);return r>=e&&r<=u}:null!=e?u=>t.getAttribute(u,n)>=e:null!=u?e=>t.getAttribute(e,n)<=u:void 0}function l(){return()=>!1}export{t as getTimeExtent,n as getTimeOperator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction n(n,t){return n?t?4:3:t?3:2}function t(n,t,r,e){return o(n,t,r,e.coords[0],e.coords[1])}function r(t,r,e,c,u,f){const s=n(u,f),{coords:i,lengths:l}=c;if(!l)return!1;for(let n=0,d=0;n<l.length;n++,d+=s)if(!o(t,r,e,i[d],i[d+1]))return!1;return!0}function o(t,r,o,c,u){if(!t)return!1;const f=n(r,o),{coords:s,lengths:i}=t;let l=!1,d=0;for(const n of i)l=e(l,s,f,d,n,c,u),d+=n*f;return l}function e(n,t,r,o,e,c,u){let f=n,s=o;for(let i=o,l=o+e*r;i<l;i+=r){s=i+r,s===l&&(s=o);const n=t[i],e=t[i+1],d=t[s],g=t[s+1];(e<u&&g>=u||g<u&&e>=u)&&n+(u-e)/(g-e)*(d-n)<c&&(f=!f)}return f}export{o as polygonContainsCoords,r as polygonContainsMultipoint,t as polygonContainsPoint};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import{isValid as r}from\"../../../geometry/support/spatialReferenceUtils.js\";import{extentContainsPoint as t,extentContainsMultipoint as i}from\"../../../geometry/support/contains.js\";import{getExtentIntersector as s}from\"../../../geometry/support/intersects.js\";import{isPolygon as o,isExtent as n,getJsonType as l}from\"../../../geometry/support/jsonUtils.js\";import a from\"../OptimizedGeometry.js\";import{convertFromPolygon as p}from\"../featureConversionUtils.js\";import{polygonContainsPoint as m,polygonContainsMultipoint as u}from\"../contains.js\";import{checkProjectionSupport as y}from\"./projectionSupport.js\";import{getGeometry as f}from\"./utils.js\";const c=\"feature-store:unsupported-query\",R={esriSpatialRelIntersects:\"intersects\",esriSpatialRelContains:\"contains\",esriSpatialRelCrosses:\"crosses\",esriSpatialRelDisjoint:\"disjoint\",esriSpatialRelEnvelopeIntersects:\"intersects\",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:\"overlaps\",esriSpatialRelTouches:\"touches\",esriSpatialRelWithin:\"within\",esriSpatialRelRelation:null},S={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};function G(e){return!0===S.spatialRelationship[e]}function g(e){return!0===S.queryGeometry[l(e)]}function j(e){return!0===S.layerGeometry[e]}function h(){return import(\"../../../geometry/geometryEngineJSON.js\")}function v(e,r,l,y,c){if(o(r)&&\"esriGeometryPoint\"===l&&(\"esriSpatialRelIntersects\"===e||\"esriSpatialRelContains\"===e)){const e=p(new a,r,!1,!1);return Promise.resolve((r=>m(e,!1,!1,r)))}if(o(r)&&\"esriGeometryMultipoint\"===l){const t=p(new a,r,!1,!1);if(\"esriSpatialRelContains\"===e)return Promise.resolve((e=>u(t,!1,!1,e,y,c)))}if(n(r)&&\"esriGeometryPoint\"===l&&(\"esriSpatialRelIntersects\"===e||\"esriSpatialRelContains\"===e))return Promise.resolve((e=>t(r,f(l,y,c,e))));if(n(r)&&\"esriGeometryMultipoint\"===l&&\"esriSpatialRelContains\"===e)return Promise.resolve((e=>i(r,f(l,y,c,e))));if(n(r)&&\"esriSpatialRelIntersects\"===e){const e=s(l);return Promise.resolve((t=>e(r,f(l,y,c,t))))}return h().then((t=>{const i=t[R[e]].bind(null,r.spatialReference,r);return e=>i(f(l,y,c,e))}))}async function P(t,i,s){const{spatialRel:o,geometry:n}=t;if(n){if(!G(o))throw new e(c,\"Unsupported query spatial relationship\",{query:t});if(r(n.spatialReference)&&r(s)){if(!g(n))throw new e(c,\"Unsupported query geometry type\",{query:t});if(!j(i))throw new e(c,\"Unsupported layer geometry type\",{query:t});if(t.outSR)return y(t.geometry&&t.geometry.spatialReference,t.outSR)}}}function I(e){if(n(e))return!0;if(o(e)){for(const r of e.rings){if(5!==r.length)return!1;if(r[0][0]!==r[1][0]||r[0][0]!==r[4][0]||r[2][0]!==r[3][0]||r[0][1]!==r[3][1]||r[0][1]!==r[4][1]||r[1][1]!==r[2][1])return!1}return!0}return!1}export{I as canQueryWithRBush,P as checkSpatialQuerySupport,v as getSpatialQueryOperator};\n"],"sourceRoot":""}