{"version":3,"sources":["../node_modules/@arcgis/core/views/interactive/GraphicManipulator.js","../node_modules/@arcgis/core/views/draw/support/input/GraphicMoverEvents.js","../node_modules/@arcgis/core/views/draw/support/GraphicMover.js"],"names":["j","s","getLogger","C","e","layer","interactive","selectable","grabbable","dragging","cursor","events","n","EventEmitter","_circleCollisionCache","_graphicSymbolChangedHandle","_originalSymbol","t","geometry","this","symbol","_set","attachSymbolChanged","error","graphic","elevationInfo","v","i","offset","b","mode","_get","_updateGraphicSymbol","emit","action","detachSymbolChanged","_resetGraphicSymbol","visible","r","l","o","view","type","_intersectDistance2D","_intersectDistance3D","add","remove","watch","focusedSymbol","_focused","f","S","originalPoint","equals","spatialReference","g","y","clone","mapPoint","radiusPx","c","size","h","G","toScreen","a","x","xoffset","yoffset","_","toMap","include","d","w","renderSpatialReference","u","state","camera","eye","constructOnly","nonNullable","prototype","readOnly","dependsOn","value","m","p","index","viewEvent","allGraphics","dx","dy","totalDx","totalDy","defaultPrevented","k","_activeGraphic","_dragEvent","_handles","_hoverGraphic","_initialDragGeometry","_viewHandles","_manipulators","callbacks","onGraphicClick","onGraphicDoubleClick","onGraphicMoveStart","onGraphicMove","onGraphicMoveStop","onGraphicPointerOver","onGraphicPointerOut","onGraphicPointerDown","onGraphicPointerUp","enableMoveAllGraphics","graphics","_setUpManipulators","on","_clickHandler","TOOL","_doubleClickHandler","_pointerDownHandler","_pointerMoveHandler","_pointerUpHandler","_dragHandler","_keyDownHandler","reset","forEach","destroy","removeAll","get","set","_findTargetGraphic","indexOf","stopPropagation","origin","key","Number","MAX_VALUE","intersectionDistance","length","map","EventedAccessor"],"mappings":"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","file":"static/js/57.a8fe3985.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{get as t,isSome as i,isNone as o}from\"../../core/maybe.js\";import s from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as l}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import a from\"../../core/Accessor.js\";import n from\"../../core/Evented.js\";import{pt2px as c,screenPointObjectToArray as h,createScreenPointArray as p}from\"../../core/screenUtils.js\";import{c as m}from\"../../chunks/vec3f64.js\";import{k as u}from\"../../chunks/vec3.js\";import{canProjectWithoutEngine as g,project as y,projectPointToVector as d}from\"../../geometry/projection.js\";import b from\"../../symbols/support/ElevationInfo.js\";import{getDefaultSymbol2D as f}from\"../../symbols/support/defaults.js\";import{j as _}from\"../../chunks/vec2.js\";import{getGraphicEffectiveElevationMode as v}from\"../../support/elevationInfoUtils.js\";import{intersectsDrapedGeometry as S}from\"../support/drapedUtils.js\";const j=s.getLogger(\"esri.views.interactive.GraphicManipulator\");let C=class extends a{constructor(e){super(e),this.layer=null,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.dragging=!1,this.cursor=null,this.events=new n.EventEmitter,this._circleCollisionCache=null,this._graphicSymbolChangedHandle=null,this._originalSymbol=null}set graphic(e){\"mesh\"!==t(e.geometry,\"type\")?(this._circleCollisionCache=null,this._originalSymbol=e.symbol,this._set(\"graphic\",e),this.attachSymbolChanged()):j.error(\"Mesh geometries are not supported\")}get elevationInfo(){const e=\"elevationInfo\"in this.graphic.layer&&this.graphic.layer.elevationInfo,t=v(this.graphic),i=e?e.offset:0;return new b({mode:t,offset:i})}set focusedSymbol(e){e!==this._get(\"focusedSymbol\")&&(this._set(\"focusedSymbol\",e),this._updateGraphicSymbol(),this._circleCollisionCache=null)}grabbableForEvent(){return!0}set grabbing(e){e!==this._get(\"grabbing\")&&(this._set(\"grabbing\",e),this._updateGraphicSymbol())}set hovering(e){e!==this._get(\"hovering\")&&(this._set(\"hovering\",e),this._updateGraphicSymbol())}set selected(e){e!==this._get(\"selected\")&&(this._set(\"selected\",e),this._updateGraphicSymbol(),this.events.emit(\"select-changed\",{action:e?\"select\":\"deselect\"}))}get _focused(){return this._get(\"hovering\")||this._get(\"grabbing\")}destroy(){this.detachSymbolChanged(),this._resetGraphicSymbol(),this._set(\"view\",null)}intersectionDistance(e){const t=this._get(\"graphic\");if(!1===t.visible)return null;const s=this._get(\"focusedSymbol\"),r=i(s)?s:t.symbol,l=t.geometry;return o(l)?null:\"2d\"===this.view.type?this._intersectDistance2D(this.view,e,l,r):this._intersectDistance3D(this.view,e,t)}attach(){this.attachSymbolChanged(),i(this.layer)&&this.layer.add(this.graphic)}detach(){this.detachSymbolChanged(),this._resetGraphicSymbol(),i(this.layer)&&this.layer.remove(this.graphic)}attachSymbolChanged(){this.detachSymbolChanged(),this._graphicSymbolChangedHandle=this.graphic.watch(\"symbol\",(e=>{i(e)&&e!==this.focusedSymbol&&e!==this._originalSymbol&&(this._originalSymbol=e,this._focused&&i(this.focusedSymbol)&&(this.graphic.symbol=this.focusedSymbol))}),!0)}detachSymbolChanged(){i(this._graphicSymbolChangedHandle)&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)}_updateGraphicSymbol(){this.graphic.symbol=this._focused&&i(this.focusedSymbol)?this.focusedSymbol:this._originalSymbol}_resetGraphicSymbol(){this.graphic.symbol=this._originalSymbol}_intersectDistance2D(e,t,s,r){if(r=r||f(s),o(r))return null;let l=this._circleCollisionCache;if(\"point\"!==s.type||\"simple-marker\"!==r.type)return S(t,s,e)?1:null;if(o(l)||!l.originalPoint.equals(s)){const t=s,i=e.spatialReference;if(g(t.spatialReference,i)){const e=y(t,i);l={originalPoint:t.clone(),mapPoint:e,radiusPx:c(r.size)},this._circleCollisionCache=l}}if(i(l)){const i=h(t,G),o=e.toScreen(l.mapPoint),s=l.radiusPx,a=o.x+c(r.xoffset),n=o.y-c(r.yoffset);return _(i,[a,n])<s*s?1:null}return null}_intersectDistance3D(e,t,i){const o=e.toMap(t,{include:[i]});return o&&d(o,w,e.renderSpatialReference)?u(w,e.state.camera.eye):null}};e([r({constructOnly:!0,nonNullable:!0})],C.prototype,\"graphic\",null),e([r({readOnly:!0,dependsOn:[\"graphic\"]})],C.prototype,\"elevationInfo\",null),e([r({constructOnly:!0,nonNullable:!0})],C.prototype,\"view\",void 0),e([r({value:null})],C.prototype,\"focusedSymbol\",null),e([r({constructOnly:!0})],C.prototype,\"layer\",void 0),e([r()],C.prototype,\"interactive\",void 0),e([r()],C.prototype,\"selectable\",void 0),e([r()],C.prototype,\"grabbable\",void 0),e([r({value:!1})],C.prototype,\"grabbing\",null),e([r()],C.prototype,\"dragging\",void 0),e([r()],C.prototype,\"hovering\",null),e([r({value:!1})],C.prototype,\"selected\",null),e([r()],C.prototype,\"cursor\",void 0),C=e([l(\"esri.views.interactive.GraphicManipulator\")],C);const w=m(),G=p();export{C as GraphicManipulator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass t{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-click\"}}class i{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-double-click\"}}class s{constructor(t,i,s,h,e,r,c,a,n,p){this.graphic=t,this.allGraphics=i,this.index=s,this.x=h,this.y=e,this.dx=r,this.dy=c,this.totalDx=a,this.totalDy=n,this.viewEvent=p,this.defaultPrevented=!1,this.type=\"graphic-move-start\"}preventDefault(){this.defaultPrevented=!0}}class h{constructor(t,i,s,h,e,r,c,a,n,p){this.graphic=t,this.allGraphics=i,this.index=s,this.x=h,this.y=e,this.dx=r,this.dy=c,this.totalDx=a,this.totalDy=n,this.viewEvent=p,this.defaultPrevented=!1,this.type=\"graphic-move\"}preventDefault(){this.defaultPrevented=!0}}class e{constructor(t,i,s,h,e,r,c,a,n,p){this.graphic=t,this.allGraphics=i,this.index=s,this.x=h,this.y=e,this.dx=r,this.dy=c,this.totalDx=a,this.totalDy=n,this.viewEvent=p,this.defaultPrevented=!1,this.type=\"graphic-move-stop\"}preventDefault(){this.defaultPrevented=!0}}class r{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-over\"}}class c{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-out\"}}class a{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-down\"}}class n{constructor(t,i,s,h,e){this.graphic=t,this.index=i,this.x=s,this.y=h,this.viewEvent=e,this.type=\"graphic-pointer-up\"}}export{t as GraphicClickEvent,i as GraphicDoubleClickEvent,h as GraphicMoveEvent,s as GraphicMoveStartEvent,e as GraphicMoveStopEvent,a as GraphicPointerDownEvent,c as GraphicPointerOutEvent,r as GraphicPointerOverEvent,n as GraphicPointerUpEvent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{clone as t}from\"../../../core/lang.js\";import{isSome as e}from\"../../../core/maybe.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import a from\"../../../core/Evented.js\";import o from\"../../../core/Handles.js\";import{watch as h,whenOnce as c}from\"../../../core/watchUtils.js\";import{ViewEventPriorities as n}from\"../../input/InputManager.js\";import{createScreenPointFromEvent as p}from\"../../support/screenUtils.js\";import{cloneMove as l}from\"./drawUtils.js\";import{GraphicManipulator as v}from\"../../interactive/GraphicManipulator.js\";import{GraphicClickEvent as d,GraphicDoubleClickEvent as g,GraphicPointerDownEvent as _,GraphicPointerUpEvent as G,GraphicPointerOutEvent as m,GraphicMoveStartEvent as u,GraphicMoveEvent as y,GraphicMoveStopEvent as f,GraphicPointerOverEvent as w}from\"./input/GraphicMoverEvents.js\";let k=class extends a.EventedAccessor{constructor(i){super(i),this._activeGraphic=null,this._dragEvent=null,this._handles=new o,this._hoverGraphic=null,this._initialDragGeometry=null,this._viewHandles=new o,this._manipulators=[],this.type=\"graphic-mover\",this.callbacks={onGraphicClick(){},onGraphicDoubleClick(){},onGraphicMoveStart(){},onGraphicMove(){},onGraphicMoveStop(){},onGraphicPointerOver(){},onGraphicPointerOut(){},onGraphicPointerDown(){},onGraphicPointerUp(){}},this.enableMoveAllGraphics=!1,this.graphics=[],this.view=null}initialize(){this._setUpManipulators(),this._handles.add([h(this,[\"graphics\",\"graphics.length\"],(()=>{this._setUpManipulators()})),c(this,\"view.ready\",(()=>{this._viewHandles.add([this.view.on(\"immediate-click\",(i=>this._clickHandler(i)),n.TOOL),this.view.on(\"double-click\",(i=>this._doubleClickHandler(i)),n.TOOL),this.view.on(\"pointer-down\",(i=>this._pointerDownHandler(i)),n.TOOL),this.view.on(\"pointer-move\",(i=>this._pointerMoveHandler(i)),n.TOOL),this.view.on(\"pointer-up\",(i=>this._pointerUpHandler(i)),n.TOOL),this.view.on(\"drag\",(i=>this._dragHandler(i)),n.TOOL),this.view.on(\"key-down\",(i=>this._keyDownHandler(i)),n.TOOL)])}))])}destroy(){this.reset(),this._manipulators.forEach((i=>i.destroy())),this._manipulators=null,this._viewHandles.removeAll(),this._handles.removeAll()}get state(){const i=!!this.get(\"view.ready\"),t=!!this.get(\"graphics.length\"),e=this._activeGraphic;return i&&t?e?\"moving\":\"active\":i?\"ready\":\"disabled\"}reset(){this._activeGraphic=null,this._hoverGraphic=null,this._dragEvent=null}updateGeometry(i,t){const e=this.graphics[i];e&&e.set(\"geometry\",t)}_clickHandler(i){const t=this._findTargetGraphic(p(i));if(t){const e=new d(t,this.graphics.indexOf(t),i.x,i.y,i);this.emit(\"graphic-click\",e),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(e)}}_doubleClickHandler(i){const t=this._findTargetGraphic(p(i));if(t){const e=new g(t,this.graphics.indexOf(t),i.x,i.y,i);this.emit(\"graphic-double-click\",e),this.callbacks.onGraphicDoubleClick&&this.callbacks.onGraphicDoubleClick(e)}}_pointerDownHandler(i){const t=this._findTargetGraphic(p(i));if(t){this._activeGraphic=t;const{x:e,y:r}=i,s=new _(t,this.graphics.indexOf(t),e,r,i);this.emit(\"graphic-pointer-down\",s),this.callbacks.onGraphicPointerDown&&this.callbacks.onGraphicPointerDown(s)}else this._activeGraphic=null}_pointerUpHandler(i){if(this._activeGraphic){const{x:t,y:e}=i,r=this.graphics.indexOf(this._activeGraphic),s=new G(this._activeGraphic,r,t,e,i);this.emit(\"graphic-pointer-up\",s),this.callbacks.onGraphicPointerUp&&this.callbacks.onGraphicPointerUp(s)}}_pointerMoveHandler(i){if(this._dragEvent)return;const t=this._findTargetGraphic(p(i));if(t){const{x:e,y:r}=i;if(this._hoverGraphic){if(this._hoverGraphic===t)return;const s=this.graphics.indexOf(this._hoverGraphic),a=new m(this.graphics[s],s,e,r,i);this._hoverGraphic=null,this.emit(\"graphic-pointer-out\",a),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(a)}const s=this.graphics.indexOf(t),a=new w(t,s,e,r,i);return this._hoverGraphic=t,this.emit(\"graphic-pointer-over\",a),void(this.callbacks.onGraphicPointerOver&&this.callbacks.onGraphicPointerOver(a))}if(this._hoverGraphic){const{x:t,y:e}=i,r=this.graphics.indexOf(this._hoverGraphic),s=new m(this.graphics[r],r,t,e,i);this._hoverGraphic=null,this.emit(\"graphic-pointer-out\",s),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(s)}}_dragHandler(i){if(\"start\"!==i.action&&!this._dragEvent||!this._activeGraphic||!this._activeGraphic.geometry)return;i.stopPropagation();const{action:e,x:r,y:s}=i,a=this.graphics.indexOf(this._activeGraphic),o=this._activeGraphic.geometry,h=this._dragEvent?r-this._dragEvent.x:0,c=this._dragEvent?s-this._dragEvent.y:0,n=r-i.origin.x,p=s-i.origin.y;if(this._activeGraphic.geometry=l(o,h,c,this.view),this.enableMoveAllGraphics&&this.graphics.forEach((i=>{i!==this._activeGraphic&&(i.geometry=l(i.geometry,h,c,this.view))})),this._dragEvent=i,\"start\"===e){this._initialDragGeometry=t(o);const e=new u(this._activeGraphic,this.graphics,a,r,s,h,c,n,p,i);this.emit(\"graphic-move-start\",e),this.callbacks.onGraphicMoveStart&&this.callbacks.onGraphicMoveStart(e),e.defaultPrevented&&this._activeGraphic.set(\"geometry\",o)}else if(\"update\"===e){const t=new y(this._activeGraphic,this.graphics,a,r,s,h,c,n,p,i);this.emit(\"graphic-move\",t),this.callbacks.onGraphicMove&&this.callbacks.onGraphicMove(t),t.defaultPrevented&&this._activeGraphic.set(\"geometry\",o)}else{const t=new f(this._activeGraphic,this.graphics,a,r,s,h,c,n,p,i);this._dragEvent=null,this._activeGraphic=null,this.emit(\"graphic-move-stop\",t),this.callbacks.onGraphicMoveStop&&this.callbacks.onGraphicMoveStop(t),t.defaultPrevented&&this.graphics[a].set(\"geometry\",this._initialDragGeometry),this._initialDragGeometry=null}}_keyDownHandler(i){\"a\"!==i.key&&\"d\"!==i.key&&\"n\"!==i.key||\"moving\"!==this.state||i.stopPropagation()}_findTargetGraphic(i){let t=null,r=Number.MAX_VALUE;return this._manipulators.forEach((s=>{const a=s.intersectionDistance(i);e(a)&&a<r&&(r=a,t=s.graphic)})),t}_setUpManipulators(){const{graphics:i,view:t}=this;this._manipulators.forEach((i=>i.destroy())),this._manipulators=null!=i&&i.length?i.map((i=>new v({graphic:i,view:t}))):[]}};i([r()],k.prototype,\"_activeGraphic\",void 0),i([r({readOnly:!0})],k.prototype,\"type\",void 0),i([r()],k.prototype,\"callbacks\",void 0),i([r()],k.prototype,\"enableMoveAllGraphics\",void 0),i([r()],k.prototype,\"graphics\",void 0),i([r({dependsOn:[\"view.ready\",\"graphics.length\",\"_activeGraphic\"],readOnly:!0})],k.prototype,\"state\",null),i([r()],k.prototype,\"view\",void 0),k=i([s(\"esri.views.draw.support.GraphicMover\")],k);var b=k;export default b;\n"],"sourceRoot":""}