{"version":3,"sources":["../node_modules/@arcgis/core/views/layers/LayerView.js","../node_modules/@arcgis/core/views/layers/support/ClipRect.js","../node_modules/@arcgis/core/views/layers/support/ClipArea.js","../node_modules/@arcgis/core/views/layers/support/Geometry.js","../node_modules/@arcgis/core/views/layers/support/Path.js","../node_modules/@arcgis/core/views/2d/layers/LayerView2D.js","../node_modules/@arcgis/core/views/2d/engine/webgl/visualVariablesUtils.js","../node_modules/@arcgis/core/AggregateGraphic.js","../node_modules/@arcgis/core/views/2d/layers/features/tileRenderers.js","../node_modules/@arcgis/core/views/2d/layers/support/FeatureLayerProxy.js","../node_modules/@arcgis/core/views/2d/tiling/TileManager.js","../node_modules/@arcgis/core/views/2d/layers/FeatureLayerView2D.js"],"names":["p","e","layer","parent","this","when","name","r","id","s","title","t","getLogger","declaredClass","error","get","canResume","getSuspendInfo","suspended","legendEnabled","updatingHandles","updating","isUpdating","_override","_clearOverride","visible","suspendInfo","view","ready","viewNotReady","loaded","layerNotLoaded","layerInvisible","a","l","n","o","EventedMixin","i","prototype","readOnly","type","Boolean","d","arguments","left","right","top","bottom","_get","Number","String","json","write","y","c","base","key","typeMap","extent","polygon","geometry","clone","types","read","m","path","ofType","rect","clips","moving","attached","lastUpdateId","updateRequested","container","h","fadeTransitionEnabled","opacity","handles","add","requestUpdate","blendMode","effect","on","notifyChange","whenLayerView","then","destroyed","attach","detach","remove","minScale","maxScale","isFulfilled","isResolved","_set","update","isVisibleAtScale","scale","set","minDataValue","maxDataValue","minSize","maxSize","SIZE_MINMAX_VALUE","expression","valueExpression","Array","isArray","stops","SIZE_SCALE_STOPS","field","levels","SIZE_FIELD_STOPS","valueUnit","SIZE_UNIT_VALUE","NONE","isAggregate","popupTemplate","sourceLayer","featureReduction","popupEnabled","objectId","cloneProperties","u","_startupResolver","isReady","_controller","addResolvingPromise","_startWorker","signal","abort","_connection","close","client","tileRenderer","closed","source","transferList","service","config","tileInfo","toJSON","tiles","invoke","resolve","promise","addedFeatures","deletedFeatures","updatedFeatures","value","strategy","_tiles","Map","buffer","acquireTile","releaseTile","tileInfoView","forEach","_releaseTile","push","getTileCoverage","state","spans","lodInfo","level","Set","row","colFrom","f","colTo","getId","normalizeCol","getWorldForColumn","_getOrAcquireTile","_addPlaceholders","has","pool","release","hasMissingTiles","size","added","removed","_addPlaceholderChildren","Math","abs","_addPlaceholderParent","_getTile","_addPlaceholderChild","hasData","contains","getParentKey","patchCount","B","K","W","X","_pipelineIsUpdating","_updatingPipelineConfig","_onGoingEdits","_isRefreshing","_visibilityOverrides","_effect","_highlightIds","_lastPixelBuffer","filter","effectLists","included","V","excluded","doRefresh","b","_lockGPUUploads","_proxy","refresh","_unlockGPUUploads","_doUpdate","_hasRequiredSupport","_updateRequiredFields","_getEffectiveRenderer","renderer","historicMoment","gdbVersion","spatialReference","timeExtent","definitionExpression","fields","geometryType","labelsVisible","labelingInfo","availableFields","pixelBuffer","N","L","_createConfiguration","max","schema","_createTileRendererHash","_tileRendererHash","_initTileRenderer","_serviceOptions","effects","enable","onConfigUpdate","_tileStrategy","tileKeys","openPorts","startup","featuresTilingScheme","hasHighlight","setHighlight","from","keys","_onceTilesUpdated","mesh","targets","aggregate","applyUpdate","_forceAttributeTextureUpload","invalidateLabels","_updateHighlight","destroy","_updateClusterSizeTask","Promise","all","_initProxy","_initServiceOptions","valueRanges","R","includedEffect","excludedEffect","isTable","_createClientOptions","z","_createServiceOptions","enabled","floors","getTime","JSON","stringify","geometryDefinition","filterHash","effectHash","streamFilter","clipsHash","hasEffects","_","getObjectId","isCollection","map","getAttribute","objectIdField","toArray","length","_addHighlight","_removeHighlight","_hitTest","queryStatistics","queryFeaturesJSON","w","fromJSON","features","queryFeatures","_cleanUpQuery","queryObjectIds","queryFeatureCount","queryExtent","count","g","_update","updateTiles","timeline","record","D","_acquireTile","globalIdField","some","includes","onEdits","removeAllChildren","uninstall","clientGraphics","v","validateFetchPopupFeatures","fetchClientPopupFeatures","_fetchServicePopupFeatures","createPopupQuery","event","C","createFetchPopupFeaturesQueryGeometry","attributes","j","_updatingRequiredFieldsPromise","setUpdating","emitEvent","emit","x","capabilities","operations","supportsEditing","mode","featureCount","fullExtent","intersection","width","height","warn","timeInfo","customParameters","getFeatureDefinition","parsedUrl","dynamicDataSource","query","_detectQueryMode","maxRecordCount","tileMaxRecordCount","S","createQuery","outSpatialReference","watch","_updateClusterEffectiveRendererSizeVariable","_effectiveRenderer","dynamicClusterSize","visualVariables","O","indexOf","T","P","q","_aggregateValueRanges","_createUpdateClusterSizeTask","aggregateFields","once","A","layerView","clear","install","getAttributeHash","floorInfo","where","_addFloorFilterClause","G","hiddenIds","viewAllLevelIds","floorField","replace","join","RegExp","trim","F","_injectOverrides","H","U","devicePixelRatio","window","filters","supportsTextureFloat","maxTextureSize","lockGPUUploads","unlockGPUUploads","forceAttributeTextureUpload","begin","_updatingPromise","end","hitTest","getFeature","_createHittestResult","getAggregate","referenceId","k","I","M","E","J","Y"],"mappings":"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","file":"static/js/17.abd31e28.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import t from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../core/Accessor.js\";import o from\"../../core/Evented.js\";import{IdentifiableMixin as l}from\"../../core/Identifiable.js\";import{EsriPromiseMixin as n}from\"../../core/Promise.js\";import{HandleOwnerMixin as a}from\"../../core/HandleOwner.js\";let p=class extends(a(l(n(o.EventedMixin(i))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const r=this.layer&&this.layer.id||\"no id\",s=this.layer&&this.layer.title||\"no title\";throw t.getLogger(this.declaredClass).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${s}', id: '${r}')`,e),e}}))}get fullOpacity(){const e=e=>null==e?1:e;return e(this.get(\"layer.opacity\"))*e(this.get(\"parent.fullOpacity\"))}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get visible(){return!0===this.get(\"layer.visible\")}set visible(e){void 0!==e?this._override(\"visible\",e):this._clearOverride(\"visible\")}canResume(){return!this.get(\"parent.suspended\")&&this.get(\"view.ready\")&&this.get(\"layer.loaded\")&&this.visible||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},t=this;return t.view&&t.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([r()],p.prototype,\"fullOpacity\",null),e([r()],p.prototype,\"layer\",void 0),e([r()],p.prototype,\"parent\",void 0),e([r({readOnly:!0})],p.prototype,\"suspended\",null),e([r({readOnly:!0})],p.prototype,\"suspendInfo\",null),e([r({readOnly:!0})],p.prototype,\"legendEnabled\",null),e([r({type:Boolean,readOnly:!0})],p.prototype,\"updating\",null),e([r()],p.prototype,\"visible\",null),p=e([s(\"esri.views.layers.LayerView\")],p);var d=p;export default d;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import e from\"./ClipArea.js\";var s;let i=s=class extends e{constructor(){super(...arguments),this.type=\"rect\",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get(\"version\")||0)+1}};t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"left\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"right\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"top\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"bottom\",void 0),t([r({readOnly:!0})],i.prototype,\"version\",null),i=s=t([o(\"esri.views.layers.support.ClipRect\")],i);var p=i;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{JSONSupport as s}from\"../../../core/JSONSupport.js\";let e=class extends s{};e=r([o(\"esri.views.layers.support.ClipArea\")],e);var p=e;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import t from\"../../../geometry/Geometry.js\";import s from\"../../../geometry/Extent.js\";import p from\"../../../geometry/Polygon.js\";import{fromJSON as m}from\"../../../geometry/support/jsonUtils.js\";import\"../../../geometry.js\";import i from\"./ClipArea.js\";var y;const c={base:t,key:\"type\",typeMap:{extent:s,polygon:p}};let n=y=class extends i{constructor(){super(...arguments),this.type=\"geometry\",this.geometry=null}get version(){return(this._get(\"version\")||0)+1}clone(){return new y({geometry:this.geometry.clone()})}};r([o({types:c,json:{read:m,write:!0}})],n.prototype,\"geometry\",void 0),r([o({readOnly:!0})],n.prototype,\"version\",null),n=y=r([e(\"esri.views.layers.support.Geometry\")],n);var l=n;export default l;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import t from\"./ClipArea.js\";let e=class extends t{constructor(){super(...arguments),this.type=\"path\",this.path=[]}get version(){return(this._get(\"version\")||0)+1}};r([o({type:[[[Number]]],json:{write:!0}})],e.prototype,\"path\",void 0),r([o({readOnly:!0})],e.prototype,\"version\",null),e=r([s(\"esri.views.layers.support.Path\")],e);var p=e;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import i from\"../../../core/Collection.js\";import{referenceSetter as r}from\"../../../core/collectionUtils.js\";import{init as o}from\"../../../core/watchUtils.js\";import a from\"../../layers/support/ClipArea.js\";import p from\"../../layers/support/ClipRect.js\";import{Container as h}from\"../engine/Container.js\";import n from\"../../layers/support/Geometry.js\";import d from\"../../layers/support/Path.js\";const c=i.ofType({key:\"type\",base:a,typeMap:{rect:p,path:d,geometry:n}}),l=i=>{let a=class extends i{constructor(){super(...arguments),this.clips=new c,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var t;this.container||(this.container=new h),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([o(this,\"suspended\",(t=>{this.container&&(this.container.visible=!t),this.view&&!t&&this.updateRequested&&this.view.requestUpdate()}),!0),o(this,[\"layer.opacity\",\"container\"],(()=>{var t,e;this.container&&(this.container.opacity=null!=(t=null==(e=this.layer)?void 0:e.opacity)?t:1)}),!0),o(this,[\"layer.blendMode\"],(t=>{this.container&&(this.container.blendMode=t)}),!0),o(this,[\"layer.effect\"],(t=>{this.container&&(this.container.effect=t)}),!0),this.clips.on(\"change\",(()=>{this.container.clips=this.clips,this.notifyChange(\"clips\")}))]),null!=(t=this.view)&&t.whenLayerView?this.view.whenLayerView(this.layer).then((t=>{t!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove(\"initialize\"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(t){let e=!0;const s=this.layer,i=s.minScale,r=s.maxScale;if(null!=i&&null!=r){let s=!i,o=!r;!s&&t<=i&&(s=!0),!o&&t>=r&&(o=!0),e=s&&o}return e}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(t){!this.isFulfilled()||this.isResolved()?(this._set(\"updateParameters\",t),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return t([e({type:c,set(t){const e=r(t,this._get(\"clips\"),c);this._set(\"clips\",e)}})],a.prototype,\"clips\",void 0),t([e()],a.prototype,\"moving\",void 0),t([e()],a.prototype,\"attached\",void 0),t([e()],a.prototype,\"container\",void 0),t([e()],a.prototype,\"suspended\",void 0),t([e({readOnly:!0})],a.prototype,\"updateParameters\",void 0),t([e()],a.prototype,\"updateRequested\",void 0),t([e()],a.prototype,\"updating\",null),t([e()],a.prototype,\"view\",void 0),a=t([s(\"esri.views.2d.layers.LayerView2D\")],a),a};export{l as LayerView2DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Logger.js\";import s from\"../../../../core/Error.js\";import{WGLVVFlag as i}from\"./enums.js\";import{isNumber as r}from\"./Utils.js\";const l=e.getLogger(\"esri.views.2d.engine.webgl\");function o(e){return r(e.minDataValue)&&r(e.maxDataValue)&&null!=e.minSize&&null!=e.maxSize?i.SIZE_MINMAX_VALUE:(e.expression&&\"view.scale\"===e.expression||e.valueExpression&&\"$view.scale\"===e.valueExpression)&&Array.isArray(e.stops)?i.SIZE_SCALE_STOPS:(null!=e.field||e.expression&&\"view.scale\"!==e.expression||e.valueExpression&&\"$view.scale\"!==e.valueExpression)&&(Array.isArray(e.stops)||\"levels\"in e&&e.levels)?i.SIZE_FIELD_STOPS:(null!=e.field||e.expression&&\"view.scale\"!==e.expression||e.valueExpression&&\"$view.scale\"!==e.valueExpression)&&null!=e.valueUnit?i.SIZE_UNIT_VALUE:(l.error(new s(\"mapview-bad-type\",\"Found invalid size VisualVariable\",e)),i.NONE)}export{o as getTypeOfSizeVisualVariable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"./chunks/tslib.es6.js\";import\"./core/has.js\";import\"./core/Logger.js\";import\"./core/accessorSupport/ensureType.js\";import{property as r}from\"./core/accessorSupport/decorators/property.js\";import{subclass as o}from\"./core/accessorSupport/decorators/subclass.js\";import\"./core/urlUtils.js\";import\"./core/uuid.js\";import\"./portal/support/resourceExtension.js\";import t from\"./Graphic.js\";var p;let s=p=class extends t{constructor(){super(...arguments),this.isAggregate=!0}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const r=this.sourceLayer&&this.sourceLayer.featureReduction;return r&&\"popupTemplate\"in r&&r.popupEnabled?r.popupTemplate:null}getObjectId(){return this.objectId}clone(){return new p({objectId:this.objectId,...this.cloneProperties()})}};e([r({type:Boolean})],s.prototype,\"isAggregate\",void 0),e([r({type:Number,json:{read:!0}})],s.prototype,\"objectId\",void 0),s=p=e([o(\"esri.AggregateGraphic\")],s);var c=s;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nasync function e(e,a){if(!e)return null;switch(e.type){case\"class-breaks\":case\"simple\":case\"unique-value\":case\"dot-density\":case\"dictionary\":return new((await import(\"./tileRenderers/SymbolTileRenderer.js\")).default)(a);case\"heatmap\":return new((await import(\"./tileRenderers/HeatmapTileRenderer.js\")).default)(a)}}export{e as createOrReuseTileRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import{createResolver as s,createAbortController as o,ignoreAbortErrors as i,throwIfNotAbortError as n}from\"../../../../core/promiseUtils.js\";import{EsriPromise as a}from\"../../../../core/Promise.js\";import{open as c}from\"../../../../core/workers/workers.js\";function l(e){return Array.isArray(e)}let u=class extends a{constructor(e){super(e),this._startupResolver=s(),this.isReady=!1}initialize(){this._controller=o(),this.addResolvingPromise(this._startWorker(this._controller.signal))}destroy(){this._controller.abort(),this._connection&&this._connection.close()}set tileRenderer(e){this.client.tileRenderer=e}get closed(){return this._connection.closed}async startup(e,t,r,s){await this.when();const o=this._controller.signal,i=l(r.source)?{transferList:r.source,signal:o}:void 0,n={service:r,config:t,tileInfo:e.tileInfo.toJSON(),tiles:s};await this._connection.invoke(\"startup\",n,i),this._startupResolver.resolve(),this._set(\"isReady\",!0)}async updateTiles(e){return await this._startupResolver.promise,i(this._connection.invoke(\"updateTiles\",e))}async update(e){const t={config:e};return await this._startupResolver.promise,this._connection.invoke(\"update\",t)}async applyUpdate(e){return await this._startupResolver.promise,this._connection.invoke(\"applyUpdate\",e)}async setHighlight(e){return await this._startupResolver.promise,i(this._connection.invoke(\"controller.setHighlight\",e))}async refresh(){return await this._startupResolver.promise,i(this._connection.invoke(\"controller.refresh\"))}async queryFeatures(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatures\",e.toJSON(),t)}async queryObjectIds(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryObjectIds\",e.toJSON(),t)}async queryFeatureCount(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatureCount\",e.toJSON(),t)}async queryExtent(e,t){return this._connection.invoke(\"controller.queryExtent\",e.toJSON(),t)}async queryLatestObservations(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryLatestObservations\",e.toJSON(),t)}async queryStatistics(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryStatistics\",e)}async getObjectId(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getObjectId\",e)}async getDisplayId(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getDisplayId\",e)}async getFeature(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getFeature\",e)}async getAggregate(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregate\",e)}async getAggregateValueRanges(){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregateValueRanges\")}async mapValidDisplayIds(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.mapValidDisplayIds\",e)}async onEdits(e){await this._startupResolver.promise;const{addedFeatures:t,deletedFeatures:r,updatedFeatures:s}=e;return i(this._connection.invoke(\"controller.onEdits\",{addedFeatures:t,deletedFeatures:r,updatedFeatures:s}))}async enableEvent(e,t){return await this._startupResolver.promise,i(this._connection.invoke(\"controller.enableEvent\",{name:e,value:t}))}async _startWorker(e){try{this._connection=await c(\"Pipeline\",{client:this.client,strategy:\"dedicated\",signal:e})}catch(t){n(t)}}};e([t()],u.prototype,\"isReady\",void 0),e([t()],u.prototype,\"client\",void 0),e([t()],u.prototype,\"tileRenderer\",null),u=e([r(\"esri.views.2d.layers.support.FeatureLayerProxy\")],u);var p=u;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import i from\"./TileKey.js\";import t from\"./TileCoverage.js\";const l=1e-6;class s{constructor(e){this._tiles=new Map,this.buffer=0,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.buffer=e.buffer}destroy(){}clear(){this._tiles.forEach((e=>this._releaseTile(e)))}tileKeys(){const e=[];return this._tiles.forEach(((i,t)=>e.push(t))),e}update(e){const l=this.tileInfoView.getTileCoverage(e.state,this.buffer,\"closest\"),{spans:s,lodInfo:r}=l,{level:a}=r,o=[],d=[],h=new Set,n=new Set;for(const{row:t,colFrom:c,colTo:f}of s)for(let e=c;e<=f;e++){const l=i.getId(a,t,r.normalizeCol(e),r.getWorldForColumn(e)),s=this._getOrAcquireTile(o,l);h.add(l),s.isReady?s.visible=!0:n.add(s.key)}n.forEach((e=>this._addPlaceholders(h,e))),this._tiles.forEach((e=>{h.has(e.key.id)||(d.push(e.key.id),this._releaseTile(e))})),t.pool.release(l);return{hasMissingTiles:n.size>0,added:o,removed:d}}_getOrAcquireTile(e,t){if(!this._tiles.has(t)){const l=this.acquireTile(new i(t));e.push(t),this._tiles.set(t,l),l.visible=!1}return this._tiles.get(t)}_getTile(e){return this._tiles.get(e)}_releaseTile(e){this._tiles.delete(e.key.id),this.releaseTile(e)}_addPlaceholders(e,i){const t=this._addPlaceholderChildren(e,i);if(!(Math.abs(1-t)<l)){if(!this._addPlaceholderParent(e,i)){this._getTile(i.id).visible=!0}}}_addPlaceholderChildren(e,i){let t=0;return this._tiles.forEach((l=>{t+=this._addPlaceholderChild(e,l,i)})),t}_addPlaceholderChild(e,i,t){if(i.key.level<=t.level||!i.hasData||!t.contains(i.key))return 0;i.visible=!0,e.add(i.key.id);return 1/(1<<2*(i.key.level-t.level))}_addPlaceholderParent(i,t){let l=t.getParentKey(),s=0,r=null;for(;e(l);){if(i.has(l.id))return!0;const e=this._getTile(l.id);if(null!=e&&e.isReady)return e.visible=!0,i.add(e.key.id),!0;null!=e&&e.hasData&&e.patchCount>s&&(s=e.patchCount,r=e),l=l.getParentKey()}return!!r&&(r.visible=!0,i.add(r.key.id),!0)}}export{s as TileManager};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/has.js\";import{clone as i}from\"../../../core/lang.js\";import{andThen as r,unwrapOr as s,isSome as a,isNone as n}from\"../../../core/maybe.js\";import o from\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as l}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as h}from\"../../../core/accessorSupport/decorators/subclass.js\";import u from\"../../../core/Error.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{flatten as d}from\"../../../core/arrayUtils.js\";import{debounce as p,isAbortError as c,eachAlwaysValues as f,after as y}from\"../../../core/promiseUtils.js\";import g from\"../../../geometry/Extent.js\";import\"../../../geometry.js\";import m from\"../../../core/Collection.js\";import _ from\"../../../Graphic.js\";import v from\"../../../AggregateGraphic.js\";import{init as R,whenFalseOnce as b}from\"../../../core/watchUtils.js\";import{isHostedAgolService as x}from\"../../../layers/support/arcgisLayerUrl.js\";import w from\"../../../tasks/support/FeatureSet.js\";import S from\"../../../tasks/support/Query.js\";import{MAX_FILTERS as F}from\"../engine/webgl/definitions.js\";import U from\"../../webgl/capabilities.js\";import{RefreshableLayerView as I}from\"../../layers/RefreshableLayerView.js\";import E from\"../../layers/LayerView.js\";import{calculateTolerance as C}from\"../../../renderers/support/clickToleranceUtils.js\";import{createQueryGeometry as j}from\"../../support/drapedUtils.js\";import{findSizeVV as O,createClusterCountSizeVariable as T,isClusterCompatibleRenderer as P,createClusterRenderer as q}from\"./support/clusterUtils.js\";import V from\"../../layers/effects/EffectList.js\";import{computePxBuffer as L}from\"./features/support/pixelBuffering.js\";import{toJSONGeometryType as N}from\"./support/util.js\";import{createSchema as H}from\"./features/schemaUtils.js\";import G from\"../../layers/support/FeatureFilter.js\";import J from\"../../layers/support/FeatureEffect.js\";import{FeatureLayerView as k}from\"../../layers/FeatureLayerView.js\";import{LayerView2DMixin as M}from\"./LayerView2D.js\";import{createOrReuseTileRenderer as A}from\"./features/tileRenderers.js\";import z from\"./support/FeatureLayerProxy.js\";import{TileManager as D}from\"../tiling/TileManager.js\";const $=2147483648,Q=1,B=e=>(e&$)>>>31===Q;function K(e){return e&&\"openPorts\"in e}const W=o.getLogger(\"esri.views.2d.layers.FeatureLayerView2D\");let X=class extends(k(I(M(E)))){constructor(){super(...arguments),this._pipelineIsUpdating=!0,this._updatingPipelineConfig=!1,this._onGoingEdits=0,this._isRefreshing=!1,this._visibilityOverrides=new Set,this._effect=null,this._highlightIds=new Map,this._lastPixelBuffer=0,this.filter=null,this.effectLists={included:new V,excluded:new V},this.doRefresh=p((async()=>{this.isUpdating()&&await b(this,\"updating\"),this._set(\"_isRefreshing\",!0),this._lockGPUUploads();try{await this._proxy.refresh()}catch(e){c(e),0}this._unlockGPUUploads(),this._set(\"_isRefreshing\",!1)})),this._doUpdate=p((async()=>{try{if(this.destroyed||!this._hasRequiredSupport(this.layer))return;this._set(\"_updatingPipelineConfig\",!0),await b(this,\"_isRefreshing\");const{effect:t,filter:i}=this;await this._updateRequiredFields();const{renderer:r}=this._getEffectiveRenderer();this._set(\"_effectiveRenderer\",r);const s=\"feature\"===this.layer.type?this.layer.historicMoment:null,n=\"feature\"===this.layer.type?this.layer.gdbVersion:null,o={renderer:this.layer.renderer,spatialReference:this.layer.spatialReference,timeExtent:this.layer.timeExtent,definitionExpression:this.layer.definitionExpression,featureReduction:this.layer.featureReduction,fields:this.layer.fields,geometryType:this.layer.geometryType,historicMoment:s,labelsVisible:this.layer.labelsVisible,labelingInfo:this.layer.labelingInfo,availableFields:this.availableFields,effect:this.effect,filter:this.filter,gdbVersion:n,pixelBuffer:0},l=N(this.layer.geometryType),h=await L(r,l,this.layer.featureReduction),u=this._createConfiguration(o,i,t);this._lastPixelBuffer=0===h?0:Math.max(h,this._lastPixelBuffer),u.schema.source.pixelBuffer=this._lastPixelBuffer;const d=this._createTileRendererHash(r);if(d!==this._tileRendererHash){await this._initTileRenderer(r);const e=this._serviceOptions;this.effects.forEach((e=>a(e)&&a(e.filter)&&e.filter.enable())),this.tileRenderer.onConfigUpdate(r);const t={added:this._tileStrategy.tileKeys(),removed:[]},i=this.layer;\"stream\"!==i.type&&K(i.source)&&(e.source=await i.source.openPorts()),await this._proxy.startup(this.view.featuresTilingScheme,u,e,t),this.hasHighlight()&&await this._proxy.setHighlight(Array.from(this._highlightIds.keys())),await this._onceTilesUpdated(),this.tileRenderer.onConfigUpdate(r)}else{const t=await this._proxy.update(u);(t.mesh||t.targets.aggregate)&&this._lockGPUUploads();try{await this._proxy.applyUpdate(t)}catch(e){c(e)||W.error(e)}(t.mesh||t.targets.aggregate)&&this._unlockGPUUploads(),this.effects.forEach((e=>a(e)&&a(e.filter)&&e.filter.enable())),this.tileRenderer.onConfigUpdate(r),this._forceAttributeTextureUpload()}this._tileRendererHash=d,this.tileRenderer.invalidateLabels(),this.requestUpdate()}catch(e){}})),this._updateHighlight=p((async()=>this._proxy.setHighlight(Array.from(this._highlightIds.keys()))))}destroy(){var e,t;null==(e=this._proxy)||e.destroy(),r(this._updateClusterSizeTask,(e=>e.remove())),null==(t=this.tileRenderer)||t.destroy()}initialize(){this.addResolvingPromise(Promise.all([this._initProxy(),this._initServiceOptions()])),this.handles.add([this.on(\"valueRangesChanged\",(e=>{this._set(\"_aggregateValueRanges\",e.valueRanges)})),R(this,\"effect\",(e=>{this.effectLists.included.effect=null==e?void 0:e.includedEffect})),R(this,\"effect\",(e=>{this.effectLists.excluded.effect=null==e?void 0:e.excludedEffect}))])}async _initProxy(){if(\"stream\"!==this.layer.type&&\"ogc-feature\"!==this.layer.type&&this.layer.isTable)throw new u(\"featurelayerview:table-not-supported\",\"table feature layer can't be displayed\",{layer:this.layer});this._proxy&&this._proxy.destroy();const e=this._createClientOptions();return this._set(\"_proxy\",new z({client:e})),this._proxy.when()}async _initServiceOptions(){this._set(\"_serviceOptions\",await this._createServiceOptions())}get labelsVisible(){return!this.suspended&&this.layer.labelingInfo&&this.layer.labelsVisible}get effect(){return s(this._effect,null)}set effect(e){const t=this._effect;a(t)&&a(t.filter)&&t.filter.enabled&&a(e)&&a(e.filter)&&e.filter.enable(),this._effect=e,this.notifyChange(\"effect\")}get effects(){return this.effect&&[this.effect]||[]}get queryMode(){return this._serviceOptions.type}get renderingConfigHash(){if(!this.layer)return null;const e=this.availableFields,t=this.layer,i=this.view.floors,{definitionExpression:r,renderer:s,labelingInfo:n}=t,o=\"feature\"===t.type?t.gdbVersion:void 0,l=\"feature\"===t.type&&t.historicMoment?t.historicMoment.getTime():void 0,{timeExtent:h}=this,u=\"stream\"===t.type?`${JSON.stringify(t.geometryDefinition)}${t.definitionExpression}`:null,d=JSON.stringify(this.clips),p=t.featureReduction&&t.featureReduction.toJSON();return JSON.stringify({filterHash:a(this.filter)&&this.filter.toJSON(),effectHash:a(this.effect)&&this.effect.toJSON(),streamFilter:u,gdbVersion:o,definitionExpression:r,historicMoment:l,availableFields:e,renderer:s,labelingInfo:t.labelsVisible&&n,timeExtent:h,floors:i,clipsHash:d,featureReduction:p})}get hasEffects(){return this.effectLists.included.hasEffects||this.effectLists.excluded.hasEffects}highlight(e){let t;return e instanceof _?t=[e.getObjectId()]:\"number\"==typeof e||\"string\"==typeof e?t=[e]:m.isCollection(e)?t=e.map((e=>e&&e.getAttribute(this.layer.objectIdField))).toArray():Array.isArray(e)&&e.length>0&&(t=\"number\"==typeof e[0]||\"string\"==typeof e[0]?e:e.map((e=>e&&e.getAttribute(this.layer.objectIdField)))),t&&t.length?(t=t.filter((e=>null!=e)),this._addHighlight(t),{remove:()=>this._removeHighlight(t)}):{remove:()=>{}}}hasHighlight(){return!!this._highlightIds.size}hitTest(e,t){return this._hitTest(e,t)}queryStatistics(){return this._proxy.queryStatistics()}queryFeatures(e,t){return this.queryFeaturesJSON(e,t).then((e=>{const t=w.fromJSON(e);return t.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),t}))}queryFeaturesJSON(e,t){return this._proxy.queryFeatures(this._cleanUpQuery(e),t)}queryObjectIds(e,t){return this._proxy.queryObjectIds(this._cleanUpQuery(e),t)}queryFeatureCount(e,t){return this._proxy.queryFeatureCount(this._cleanUpQuery(e),t)}queryExtent(e,t){return this._proxy.queryExtent(this._cleanUpQuery(e),t).then((e=>({count:e.count,extent:g.fromJSON(e.extent)})))}setVisibility(e,t){t?this._visibilityOverrides.delete(e):this._visibilityOverrides.add(e),this._update()}update(e){if(!this._tileStrategy||!this.tileRenderer)return;const{hasMissingTiles:t,added:i,removed:r}=this._tileStrategy.update(e);(i.length||r.length)&&this._proxy.updateTiles({added:i,removed:r}),t&&this.requestUpdate(),this.notifyChange(\"updating\")}attach(){this.view.timeline.record(`${this.layer.title} (FeatureLayer) Attach`),this._tileStrategy=new D({acquireTile:e=>this._acquireTile(e),releaseTile:e=>this._releaseTile(e),tileInfoView:this.view.featuresTilingScheme,buffer:0}),this.handles.add(R(this,\"renderingConfigHash\",(()=>this._update())),\"attach\"),\"stream\"!==this.layer.type&&this.handles.add(this.layer.on(\"edits\",(async e=>{this._set(\"_onGoingEdits\",this._onGoingEdits+1);try{const t=\"globalIdField\"in this.layer&&this.layer.globalIdField,i=e.deletedFeatures.some((e=>-1===e.objectId||!e.objectId)),r=t&&this.availableFields.includes(t);if(i&&!r)return void W.error(new u(\"mapview-apply-edits\",`Editing the specified service requires the layer's globalIdField, ${t} to be included the layer's outFields for updates to be reflected on the map`));await this._proxy.onEdits(e)}catch(t){c(t),0}this._set(\"_onGoingEdits\",Math.max(0,this._onGoingEdits-1))})),\"attach\")}detach(){this.container.removeAllChildren(),this.handles.remove(\"attach\"),this._updatingPipelineConfig=!1,this.tileRenderer&&(this.tileRenderer.uninstall(this.container),this.tileRenderer=null),this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null),this._tileRendererHash=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}async fetchPopupFeatures(e,t){if(a(t)&&t.clientGraphics.length){const e=t.clientGraphics[0];if(e instanceof v)return[e]}const i=this.validateFetchPopupFeatures(t);if(i)throw i;if(a(t)&&0===t.clientGraphics.length)return[];const r=this.fetchClientPopupFeatures(t);if(!e)return r;const s=this._fetchServicePopupFeatures(e,t);return f([r,s]).then(d)}async _fetchServicePopupFeatures(e,t){if(\"stream\"===this.layer.type||\"ogc-feature\"===this.layer.type)return[];const i=await this.createPopupQuery(t),{layer:r}=this,{renderer:s}=r,n=a(t)?t.event:null,o=C({renderer:s,event:n});i.geometry=this.createFetchPopupFeaturesQueryGeometry(e,o);const l=new Set,{objectIdField:h}=r,u=a(t)?t.clientGraphics:null;if(u)for(const a of u)l.add(a.attributes[h]);return r.queryFeatures(i).then((e=>e.features.filter((e=>!l.has(e.attributes[h])))))}createFetchPopupFeaturesQueryGeometry(e,t){return j(e,t,this.view)}isUpdating(){return null!=this.layer.renderer&&(null!=this._updatingRequiredFieldsPromise||null==this.tileRenderer||!this._proxy||!this._proxy.isReady||this._pipelineIsUpdating||this._updatingPipelineConfig||this.tileRenderer.updating||this._onGoingEdits>0)}_createClientOptions(){return{setUpdating:e=>{this._set(\"_pipelineIsUpdating\",e)},emitEvent:e=>{this.emit(e.name,e.event)}}}async _detectQueryMode(e){if(\"path\"in e&&x(e.path)&&\"feature\"===this.layer.type&&\"point\"===this.layer.geometryType&&!this.layer.capabilities.operations.supportsEditing&&t(\"featurelayer-snapshot-enabled\"))try{const e=await this.layer.queryFeatureCount();if(e<=t(\"featurelayer-snapshot-point-min-threshold\"))return{mode:\"snapshot\",featureCount:e};const i=t(\"featurelayer-snapshot-point-max-threshold\"),r=t(\"featurelayer-snapshot-point-coverage\"),s=this.view.extent,a=this.layer.fullExtent,n=null==a?void 0:a.clone().intersection(s),o=(null==n?void 0:n.width)*(null==n?void 0:n.height),l=(null==a?void 0:a.width)*(null==a?void 0:a.height),h=0===l?0:o/l;if(e<=i&&h>=r)return{mode:\"snapshot\",featureCount:e}}catch(i){W.warn(\"mapview-feature-layer\",\"Encountered an error when querying for featureCount\",{error:i})}return{mode:\"on-demand\"}}async _createServiceOptions(){const e=this.layer;if(\"stream\"===e.type)return null;const{capabilities:t,objectIdField:r}=e,s=e.fields.map((e=>e.toJSON())),a=e.fullExtent&&e.fullExtent.toJSON(),n=N(e.geometryType),o=e.timeInfo&&e.timeInfo.toJSON()||null,l=e.spatialReference?e.spatialReference.toJSON():null,h=\"feature\"===e.type?e.customParameters:null,u=\"feature\"===e.type?e.globalIdField:null;let d;\"ogc-feature\"===e.type?d=e.source.getFeatureDefinition():K(e.source)?d=await e.source.openPorts():e.parsedUrl&&(d=i(e.parsedUrl),\"dynamicDataSource\"in e&&e.dynamicDataSource&&(d.query={layer:JSON.stringify({source:e.dynamicDataSource})}));const{mode:p,featureCount:c}=await this._detectQueryMode(d);return{type:p,featureCount:c,globalIdField:u,maxRecordCount:t.query.maxRecordCount,tileMaxRecordCount:t.query.tileMaxRecordCount,capabilities:t,fields:s,fullExtent:a,geometryType:n,objectIdField:r,source:d,timeInfo:o,spatialReference:l,customParameters:h}}async _createMemoryServiceOptions(e){const t=await e.openPorts();return{...this._createServiceOptions(),type:\"memory\",source:t}}_cleanUpQuery(e){const t=S.from(e)||this.createQuery();return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t}_createUpdateClusterSizeTask(e,t){return this.watch(\"_aggregateValueRanges\",(async i=>{this._updateClusterEffectiveRendererSizeVariable(e,t,i),this._updatingPipelineConfig||this.tileRenderer.onConfigUpdate(this._effectiveRenderer)}))}async _updateClusterEffectiveRendererSizeVariable(e,t,i){if(e.dynamicClusterSize&&\"visualVariables\"in e&&e.visualVariables){const r=O(e.visualVariables);if(a(r)&&\"cluster_count\"===r.field){const s=e.visualVariables.indexOf(r);e.visualVariables[s]=T(t,i);const a=e.clone();a.dynamicClusterSize=!0,this._set(\"_effectiveRenderer\",a)}}}_getEffectiveRenderer(){const e=this.layer.renderer,t=this.layer.featureReduction;if(a(this._updateClusterSizeTask)&&(this._updateClusterSizeTask.remove(),this._updateClusterSizeTask=null),t&&\"cluster\"===t.type&&P(e)){const i=t,s=[],a=q(s,e,i,this._aggregateValueRanges);return r(this._updateClusterSizeTask,(e=>e.remove())),this._updateClusterSizeTask=this._createUpdateClusterSizeTask(a,i),{renderer:a,aggregateFields:s,featureReduction:t}}return{renderer:e,aggregateFields:[],featureReduction:null}}_acquireTile(e){const t=this.tileRenderer.acquireTile(e);return t.once(\"attach\",(()=>{this.requestUpdate()})),t}_releaseTile(e){this.tileRenderer.releaseTile(e)}async _initTileRenderer(e){const t=await A(e,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer});return this.tileRenderer&&(this._tileStrategy.clear(),this.tileRenderer.uninstall(this.container),this.tileRenderer.destroy(),this.tileRenderer=null),this.destroyed?null:(this._proxy.tileRenderer=t,this._set(\"tileRenderer\",t),this.tileRenderer.install(this.container),this.tileRenderer.onConfigUpdate(e),this.requestUpdate(),this.tileRenderer)}_createTileRendererHash(e){return`${\"heatmap\"===e.type?\"heatmap\":\"symbol\"}.${\"dot-density\"===e.type}`}_createFeatureDataHash(e,t,i){const r=e.getAttributeHash(),s=JSON.stringify(t),n=a(i)&&JSON.stringify(i.filter),o=JSON.stringify(this.timeExtent);let l=\"\";return this._visibilityOverrides.forEach((e=>l+=e)),`${r}.${s}.${n}.${o}.${l}`}get hasFilter(){const e=!!(\"floorInfo\"in this.layer&&this.layer.floorInfo&&this.view.floors&&this.view.floors.length);return!!this.filter||e||!!this._visibilityOverrides.size||!!this.timeExtent}_injectOverrides(e){const t=a(e)?e.timeExtent:null,i=a(this.timeExtent)&&a(t)?this.timeExtent.intersection(t):this.timeExtent||t;let r=null;const s=\"floorInfo\"in this.layer&&this.layer.floorInfo;if(s){const t=a(e)&&e.where;r=this._addFloorFilterClause(t)}if(!this._visibilityOverrides.size&&!i&&!s)return e;const n=a(e)&&e.clone()||new G;return n.hiddenIds=this._visibilityOverrides,n.timeExtent=i,r&&(n.where=r),n}_addFloorFilterClause(e){const t=this.layer;let i=e||\"\";if(\"floorInfo\"in t&&t.floorInfo){var r;let e=this.view.floors;if(!e||!e.length)return i;null!=(r=t.floorInfo.viewAllLevelIds)&&r.length&&(e=t.floorInfo.viewAllLevelIds);const s=e.filter((e=>\"\"!==e)).map((e=>\"'\"+e+\"'\"));s.push(\"''\");const n=t.floorInfo.floorField;let o=\"(\"+n+\" IN ({ids}) OR \"+n+\" IS NULL)\";if(o=o.replace(\"{ids}\",s.join(\", \")),a(i)&&i.includes(n)){let e=new RegExp(\"AND \\\\(\"+n+\".*NULL\\\\)\",\"g\");i=i.replace(e,\"\"),e=new RegExp(\"\\\\(\"+n+\".*NULL\\\\)\",\"g\"),i=i.replace(e,\"\"),i=i.replace(/\\s+/g,\" \").trim()}i=\"\"!==i?\"(\"+i+\") AND \"+o:o}return\"\"!==i?i:null}_createConfiguration(e,t,i){const r=\"feature\"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,s=\"feature\"===this.layer.type?this.layer.gdbVersion:void 0,o=new Array(F),l=this._injectOverrides(t);o[0]=a(l)?l.toJSON():null,o[1]=a(i)&&i.filter?i.filter.toJSON():null;const h=H(e);if(n(h))return null;const u=U();return{definitionExpression:this.layer.definitionExpression,availableFields:this.availableFields,gdbVersion:s,historicMoment:r,devicePixelRatio:window.devicePixelRatio||1,filters:o,schema:h,supportsTextureFloat:u.supportsTextureFloat,maxTextureSize:u.maxTextureSize}}_hasRequiredSupport(e){var t;return!(\"dot-density\"===(null==(t=e.renderer)?void 0:t.type)&&!U().supportsTextureFloat)||(W.error(new u(\"webgl-missing-extension\",\"Missing WebGL extension OES_Texture_Float which is required for DotDensity\")),!1)}_onceTilesUpdated(){return this.requestUpdate(),b(this,\"_pipelineIsUpdating\",!1)}_lockGPUUploads(){this.tileRenderer&&this.tileRenderer.lockGPUUploads()}_unlockGPUUploads(){this.tileRenderer&&this.tileRenderer.unlockGPUUploads()}_forceAttributeTextureUpload(){this.tileRenderer&&this.tileRenderer.forceAttributeTextureUpload()}_update(){this.view.timeline.begin(`${this.layer.title} (FeatureLayer) Initial Pipeline Config`);const e=this._doUpdate();this._updatingPromise=e;const t=()=>{e===this._updatingPromise&&this._set(\"_updatingPipelineConfig\",!1),this.view&&this.view.timeline.end(`${this.layer.title} (FeatureLayer) Initial Pipeline Config`)};e.then(t).catch((e=>{c(e)||W.error(e),t()}))}_addHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t);this._highlightIds.set(t,e+1)}else this._highlightIds.set(t,1);this._updateHighlight().catch((e=>{c(e)||W.error(e)}))}_removeHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t)-1;0===e?this._highlightIds.delete(t):this._highlightIds.set(t,e)}this._updateHighlight().catch((e=>{c(e)||W.error(e)}))}_createHittestResult(e){return e.layer=this.layer,e.sourceLayer=this.layer,a(e.geometry)&&(e.geometry.spatialReference=this.view.spatialReference),e}async _hitTest(e,t){if(this.suspended||!this.tileRenderer)return null;const i=await this.tileRenderer.hitTest(e,t);if(0===i.length)return await y(1),null;const s=i[0];if(!B(s)){const e=await this._proxy.getFeature(s);return r(e,(e=>this._createHittestResult(_.fromJSON(e))))}const o=await this._proxy.getAggregate(s);if(n(o))return null;if(a(o.referenceId)){const e=await this._proxy.getFeature(o.referenceId);return r(e,(e=>this._createHittestResult(_.fromJSON(e))))}return this._createHittestResult(v.fromJSON(o))}};e([l()],X.prototype,\"_serviceOptions\",void 0),e([l()],X.prototype,\"_proxy\",void 0),e([l()],X.prototype,\"_pipelineIsUpdating\",void 0),e([l()],X.prototype,\"_updatingPipelineConfig\",void 0),e([l()],X.prototype,\"_effectiveRenderer\",void 0),e([l()],X.prototype,\"_aggregateValueRanges\",void 0),e([l()],X.prototype,\"_onGoingEdits\",void 0),e([l()],X.prototype,\"_isRefreshing\",void 0),e([l()],X.prototype,\"labelsVisible\",null),e([l({type:G})],X.prototype,\"filter\",void 0),e([l({type:J})],X.prototype,\"effect\",null),e([l({readOnly:!0})],X.prototype,\"effects\",null),e([l({readOnly:!0})],X.prototype,\"queryMode\",null),e([l()],X.prototype,\"renderingConfigHash\",null),e([l()],X.prototype,\"tileRenderer\",void 0),e([l()],X.prototype,\"updating\",void 0),X=e([h(\"esri.views.2d.layers.FeatureLayerView2D\")],X);var Y=X;export default Y;\n"],"sourceRoot":""}