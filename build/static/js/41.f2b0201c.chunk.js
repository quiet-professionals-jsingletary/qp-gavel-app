/*! For license information please see 41.f2b0201c.chunk.js.LICENSE.txt */
(this["webpackJsonpqp-ampd-app"]=this["webpackJsonpqp-ampd-app"]||[]).push([[41],[function(e,t,n){"use strict";function r(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u}));var r=n(13),i=n(17),a=n(180),o=n(187),s=n(521),c=r.a.getLogger("esri.core.accessorSupport.decorators.property");function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n,r){if(t===Function.prototype)throw new Error("Inappropriate use of @property() on a static field: ".concat(t.name,".").concat(n,". Accessor does not support static properties."));var l=Object(o.b)(t,n);r&&(r.get||r.set?(l.get=r.get||l.get,l.set=r.set||l.set):"value"in r&&("value"in e&&c.warn('@property() will redefine the value of "'.concat(n,'" on "').concat(t.constructor.name,'" already defined in the metadata'),e),l.value=e.value=r.value)),null!=e.readOnly&&(l.readOnly=e.readOnly);var u=e.aliasOf;if(u){var p,h="string"==typeof u?u:u.source,b="string"==typeof u?null:!0===u.overridable;l.dependsOn=[h],l.get=function(){var e=Object(a.b)(this,h);if("function"==typeof e){p||(p=h.split(".").slice(0,-1).join("."));var t=Object(a.b)(this,p);t&&(e=e.bind(t))}return e},l.readOnly||(l.set=b?function(e){void 0!==e?this._override(n,e):this._clearOverride(n)}:function(e){Object(s.a)(this,h,e)})}var v=e.type,y=e.types;l.cast||(v?l.cast=d(v):y&&(Array.isArray(y)?l.cast=Object(i.c)(Object(i.k)(y[0])):l.cast=Object(i.k)(y))),e.range&&(l.cast=f(l.cast,e.range)),Object(o.c)(l,e)}}function u(e,t,n){var r=Object(o.b)(e,n);r.json||(r.json={});var i=r.json;return void 0!==t&&(i.origins||(i.origins={}),i.origins[t]||(i.origins[t]={}),i=i.origins[t]),i}function d(e){var t=0,n=e;if(Object(i.n)(e))return Object(i.f)(e);for(;Array.isArray(n)&&1===n.length&&"string"!=typeof n[0]&&"number"!=typeof n[0];)n=n[0],t++;var r=n;if(Object(i.o)(r))return 0===t?Object(i.j)(r):Object(i.h)(Object(i.j)(r),t);if(1===t)return Object(i.b)(r);if(t>1)return Object(i.g)(r,t);var a=e;return a.from?a.from:Object(i.m)(a)}function f(e,t){return function(n){var r=+e(n);return null!=t.step&&(r=Math.round(r/t.step)*t.step),null!=t.min&&(r=Math.max(t.min,r)),null!=t.max&&(r=Math.min(t.max,r)),r}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return w})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return O})),n.d(t,"h",(function(){return y})),n.d(t,"i",(function(){return j})),n.d(t,"j",(function(){return a})),n.d(t,"k",(function(){return i})),n.d(t,"l",(function(){return o})),n.d(t,"m",(function(){return v})),n.d(t,"n",(function(){return m})),n.d(t,"o",(function(){return b})),n.d(t,"p",(function(){return p})),n.d(t,"q",(function(){return c})),n.d(t,"r",(function(){return u})),n.d(t,"s",(function(){return l}));var r=n(14);function i(e){return null!=e}function a(e){return null==e}function o(e){return void 0===e}function s(e,t){return i(e)?t(e):null}function c(e){return e}function l(e,t){if(a(e))throw new Error(t);return e}function u(e,t){return i(e)?e:"function"==typeof t?t():t}function d(e){return i(e)&&e.destroy(),null}function f(e){return i(e)&&e.dispose(),null}function p(e){return i(e)&&e.remove(),null}function h(e){return i(e)&&e.abort(),null}function b(e){return null}function v(e,t){var n,i=new Array,a=Object(r.a)(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;i.push(m(o,null,t))}}catch(s){a.e(s)}finally{a.f()}return i}function y(e,t){var n,i=Object(r.a)(e);try{for(i.s();!(n=i.n()).done;){m(n.value,null,t)}}catch(a){i.e(a)}finally{i.f()}}function m(e,t,n){return i(e)?n(e):t}function g(e,t){return i(e)?t(e):null}function O(e){return e.filter((function(e){return i(e)}))}function j(e){for(var t=e,n=0,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];for(;n<i.length&&t;)t=t[i[n++]];return t}function w(e){return e}},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(50);var i=n(262);function a(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(r.a)(e);if(t){var o=Object(r.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}},function(e,t,n){e.exports=n(817)},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(14),i=n(2),a=n(262),o=n(37),s=n(5),c=n(6),l=(n(16),n(187)),u=[n(291).a];var d=new Set,f=new Set;function p(e){return function(t){t.prototype.declaredClass=e,function(e,t){var n,i=Object(r.a)(u);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.processPrototypePropertyMetadata)for(var o in e){var s=e[o];a.processPrototypePropertyMetadata(o,s,e,t)}}}catch(c){i.e(c)}finally{i.f()}}(Object(l.a)(t.prototype).properties,e),function(e){var t=e.prototype,n=t.declaredClass,i=Object(l.a)(t).properties;!function(e,t){var n,i=Object(r.a)(u);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.processClassPropertyMetadata)for(var o in e){var s=e[o];a.processClassPropertyMetadata(o,s,e,t)}}}catch(c){i.e(c)}finally{i.f()}}(i,n);var a,o={},s=Object(r.a)(Object.getOwnPropertyNames(i));try{var c=function(){var e=a.value,t=i[e];o[e]={enumerable:!0,configurable:!0,get:h(e,t),set:function(n){var r=this.__accessor__;if(void 0!==r){if(!Object.isFrozen(this)){if(r.initialized&&t.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '".concat(e,"' of ").concat(this.declaredClass));if(2===r.lifecycle&&t.constructOnly)throw new TypeError("[accessor] cannot assign to construct-only property '".concat(e,"' of ").concat(this.declaredClass));r.set(e,n)}}else Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:n})}}};for(s.s();!(a=s.n()).done;)c()}catch(d){s.e(d)}finally{s.f()}Object.defineProperties(e.prototype,o)}(t);for(var n=[],p=[],b=t.prototype;b;)b.hasOwnProperty("initialize")&&!d.has(b.initialize)&&(d.add(b.initialize),n.push(b.initialize)),b.hasOwnProperty("destroy")&&!f.has(b.destroy)&&(f.add(b.destroy),p.push(b.destroy)),b=Object.getPrototypeOf(b);d.clear(),f.clear();var v=function(e){Object(s.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(i.a)(this,r);for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];if((e=t.call.apply(t,[this].concat(c))).constructor===r&&"function"==typeof e.postscript){var u;if(n.length&&Object.defineProperty(Object(o.a)(e),"initialize",{enumerable:!1,configurable:!0,value:function(){for(var e=n.length-1;e>=0;e--)n[e].call(this)}}),p.length){var d=!1;Object.defineProperty(Object(o.a)(e),"destroy",{enumerable:!1,configurable:!0,value:function(){if(!d){d=!0;for(var e=0;e<p.length;e++)p[e].call(this)}}})}(u=e).postscript.apply(u,c)}return Object(a.a)(e)}return r}(t);return v.__accessorMetadata__=Object(l.a)(t.prototype),v.prototype.declaredClass=e,v}}function h(e,t){return null==t.get?function(){return this.__accessor__.getterStatic(e)}:function(){return this.__accessor__.getterComputed(e)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=function e(t,n){for(var r=0,i=t.length;r<i;r++){var a=t[r];Array.isArray(a)?e(a,n):null!=a&&!1!==a&&(a.hasOwnProperty("vnodeSelector")||(a={vnodeSelector:"",properties:void 0,children:void 0,text:a.toString(),domNode:null}),n.push(a))}},i=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(1===n.length&&"string"==typeof n[0])return{vnodeSelector:e,properties:t||void 0,children:void 0,text:n[0],domNode:null};var a=[];return r(n,a),{vnodeSelector:e,properties:t||void 0,children:a,text:void 0,domNode:null}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(26);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return x})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return O})),n.d(t,"g",(function(){return g})),n.d(t,"h",(function(){return j})),n.d(t,"i",(function(){return l})),n.d(t,"j",(function(){return o})),n.d(t,"k",(function(){return b})),n.d(t,"l",(function(){return w})),n.d(t,"m",(function(){return R})),n.d(t,"n",(function(){return h})),n.d(t,"o",(function(){return a})),n.d(t,"p",(function(){return E})),n.d(t,"q",(function(){return m})),n.d(t,"r",(function(){return v})),n.d(t,"s",(function(){return y})),n.d(t,"t",(function(){return k})),n.d(t,"u",(function(){return C})),n.d(t,"v",(function(){return s})),n.d(t,"w",(function(){return _})),n.d(t,"x",(function(){return L})),n.d(t,"y",(function(){return A})),n.d(t,"z",(function(){return M}));var r=n(27),i=n(64);function a(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function o(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function s(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function c(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function l(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function u(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function d(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function f(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function p(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function h(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}function b(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function v(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function y(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function m(e,t){var n=t[0],r=t[1],i=t[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e}function g(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function O(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],c=n[2];return e[0]=i*c-a*s,e[1]=a*o-r*c,e[2]=r*s-i*o,e}function j(e,t,n,r){var i=t[0],a=t[1],o=t[2];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e}function w(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12],e[1]=n[1]*r+n[5]*i+n[9]*a+n[13],e[2]=n[2]*r+n[6]*i+n[10]*a+n[14],e}function _(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8],e}function k(e,t,n){var r=n[0],i=n[1],a=n[2],o=n[3],s=t[0],c=t[1],l=t[2],u=i*l-a*c,d=a*s-r*l,f=r*c-i*s,p=i*f-a*d,h=a*u-r*f,b=r*d-i*u,v=2*o;return u*=v,d*=v,f*=v,p*=2,h*=2,b*=2,e[0]=s+u+p,e[1]=c+d+h,e[2]=l+f+b,e}function x(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),a[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),a[2]=i[2],e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}var S=Object(r.e)(),T=Object(r.e)();function E(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}var C=l,P=u,I=d,M=h,A=b,R=a,L=v;Object.freeze({__proto__:null,length:a,copy:o,set:s,add:c,subtract:l,multiply:u,divide:d,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},min:function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},max:function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},scale:f,scaleAndAdd:p,distance:h,squaredDistance:b,squaredLength:v,negate:y,inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},normalize:m,dot:g,cross:O,lerp:j,hermite:function(e,t,n,r,i,a){var o=a*a,s=o*(2*a-3)+1,c=o*(a-2)+a,l=o*(a-1),u=o*(3-2*a);return e[0]=t[0]*s+n[0]*c+r[0]*l+i[0]*u,e[1]=t[1]*s+n[1]*c+r[1]*l+i[1]*u,e[2]=t[2]*s+n[2]*c+r[2]*l+i[2]*u,e},bezier:function(e,t,n,r,i,a){var o=1-a,s=o*o,c=a*a,l=s*o,u=3*a*s,d=3*c*o,f=c*a;return e[0]=t[0]*l+n[0]*u+r[0]*d+i[0]*f,e[1]=t[1]*l+n[1]*u+r[1]*d+i[1]*f,e[2]=t[2]*l+n[2]*u+r[2]*d+i[2]*f,e},random:function(e,t){t=t||1;var n=2*Object(i.b)()*Math.PI,r=2*Object(i.b)()-1,a=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*a,e[1]=Math.sin(n)*a,e[2]=r*t,e},transformMat4:w,transformMat3:_,transformQuat:k,rotateX:function(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0],a[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),a[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e},rotateY:function(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),a[1]=i[1],a[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e},rotateZ:x,angle:function(e,t){o(S,e),o(T,t),m(S,S),m(T,T);var n=g(S,T);return n>1?0:n<-1?Math.PI:Math.acos(n)},str:function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},exactEquals:E,equals:function(e,t){var n=e[0],r=e[1],a=e[2],o=t[0],s=t[1],c=t[2];return Math.abs(n-o)<=i.a*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=i.a*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(a-c)<=i.a*Math.max(1,Math.abs(a),Math.abs(c))},sub:C,mul:P,div:I,dist:M,sqrDist:A,len:R,sqrLen:L})},function(e,t,n){"use strict";n.d(t,"a",(function(){return _})),n.d(t,"b",(function(){return M})),n.d(t,"c",(function(){return F})),n.d(t,"d",(function(){return ye})),n.d(t,"e",(function(){return me})),n.d(t,"f",(function(){return S})),n.d(t,"g",(function(){return k})),n.d(t,"h",(function(){return pe})),n.d(t,"i",(function(){return ee})),n.d(t,"j",(function(){return X})),n.d(t,"k",(function(){return de})),n.d(t,"l",(function(){return z})),n.d(t,"m",(function(){return J})),n.d(t,"n",(function(){return ge})),n.d(t,"o",(function(){return D})),n.d(t,"p",(function(){return I})),n.d(t,"q",(function(){return U})),n.d(t,"r",(function(){return N})),n.d(t,"s",(function(){return Y})),n.d(t,"t",(function(){return K})),n.d(t,"u",(function(){return Z})),n.d(t,"v",(function(){return ne})),n.d(t,"w",(function(){return be})),n.d(t,"x",(function(){return B})),n.d(t,"y",(function(){return $})),n.d(t,"z",(function(){return q})),n.d(t,"A",(function(){return te})),n.d(t,"B",(function(){return H})),n.d(t,"C",(function(){return W})),n.d(t,"D",(function(){return P})),n.d(t,"E",(function(){return E})),n.d(t,"F",(function(){return ue})),n.d(t,"G",(function(){return ve})),n.d(t,"H",(function(){return fe})),n.d(t,"I",(function(){return oe})),n.d(t,"J",(function(){return T}));var r=n(31),i=n(10),a=n(14),o=n(2),s=n(3),c=(n(65),n(98)),l=n(4),u=n(13),d=n(18),f=u.a.getLogger("esri.core.urlUtils"),p=c.a.request,h="esri/config: esriConfig.request.proxyUrl is not set.",b=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,v=/^\s*http:/i,y=/^\s*https:/i,m=/^\s*file:/i,g=/:\d+$/,O=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,j=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),w=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$"),_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(o.a)(this,e),this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;var n=Object(l.d)(this.uri.match(j));this.scheme=n[2]||(n[1]?"":null),this.authority=n[4]||(n[3]?"":null),this.path=n[5],this.query=n[7]||(n[6]?"":null),this.fragment=n[9]||(n[8]?"":null),null!=this.authority&&(n=Object(l.d)(this.authority.match(w)),this.user=n[3]||null,this.password=n[4]||null,this.host=n[6]||n[7],this.port=n[9]||null)}return Object(s.a)(e,[{key:"toString",value:function(){return this.uri}}]),e}(),k=new _(c.a.applicationUrl),x={},S=function(){var e=Object(l.d)(k.path),t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return"".concat("".concat(k.scheme,"://").concat(k.host).concat(null!=k.port?":".concat(k.port):""),t)}();function T(e){var t={path:null,query:null},n=new _(e),r=e.indexOf("?");return null===n.query?t.path=e:(t.path=e.substring(0,r),t.query=E(n.query)),n.fragment&&(t.hash=n.fragment,null===n.query&&(t.path=t.path.substring(0,t.path.length-(n.fragment.length+1)))),t}function E(e){var t,n=e.split("&"),r={},i=Object(a.a)(n);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(o){var s=o.indexOf("="),c=void 0,l=void 0;s<0?(c=decodeURIComponent(o),l=""):(c=decodeURIComponent(o.slice(0,s)),l=decodeURIComponent(o.slice(s+1)));var u=r[c];"string"==typeof u&&(u=r[c]=[u]),Array.isArray(u)?u.push(l):r[c]=l}}}catch(d){i.e(d)}finally{i.f()}return r}function C(e){return e&&"object"==typeof e&&"toJSON"in e&&"function"==typeof e.toJSON}function P(e,t){return e?t&&"function"==typeof t?Object.keys(e).map((function(n){return encodeURIComponent(n)+"="+encodeURIComponent(t(n,e[n]))})).join("&"):Object.keys(e).map((function(n){var r=e[n];if(null==r)return"";var i=encodeURIComponent(n)+"=",a=t&&t[n];return a?i+encodeURIComponent(a(r)):Array.isArray(r)?r.map((function(e){return C(e)?i+encodeURIComponent(JSON.stringify(e)):i+encodeURIComponent(e)})).join("&"):C(r)?i+encodeURIComponent(JSON.stringify(r)):i+encodeURIComponent(r)})).filter((function(e){return e})).join("&"):""}function I(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=p.proxyUrl;if("string"==typeof t){e=ie(t);var r=D(t);r&&(n=r.proxyUrl)}else e=!!t;if(!n)throw f.warn(h),new d.a("urlutils:proxy-not-set",h);return e&&se()&&(n=oe(n)),T(n)}function M(e){var t,n,r=D(e);if(r){var a=R(r.proxyUrl);t=a.path,n=a.query?E(a.query):null}if(t){var o=T(e);e=t+"?"+o.path;var s=P(Object(i.a)(Object(i.a)({},n),o.query));s&&(e="".concat(e,"?").concat(s))}return e}var A={path:"",query:""};function R(e){var t=e.indexOf("?");return-1!==t?(A.path=e.slice(0,t),A.query=e.slice(t+1)):(A.path=e,A.query=null),A}function L(e){return(e=ce(e=function(e){return e&&"/"===e[e.length-1]?e:"".concat(e,"/")}(e=R(e).path),!0)).toLowerCase()}function F(e){for(var t={proxyUrl:e.proxyUrl,urlPrefix:L(e.urlPrefix)},n=p.proxyRules,r=t.urlPrefix,i=n.length,a=0;a<n.length;a++){var o=n[a].urlPrefix;if(0===r.indexOf(o)){if(r.length===o.length)return-1;i=a;break}0===o.indexOf(r)&&(i=a+1)}return n.splice(i,0,t),i}function D(e){for(var t=p.proxyRules,n=L(e),r=0;r<t.length;r++)if(0===n.indexOf(t[r].urlPrefix))return t[r]}function N(e,t){return e=V(e),t=V(t),ce(e)===ce(t)}function V(e){var t=(e=W(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function z(e){var t=function(t){return null==t||t instanceof RegExp&&t.test(e)||"string"==typeof t&&e.startsWith(t)},n=p.interceptors;if(n){var r,i=Object(a.a)(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(Array.isArray(o.urls)){if(o.urls.some(t))return o}else if(t(o.urls))return o}}catch(s){i.e(s)}finally{i.f()}}return null}function U(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=he(e),i=he(t);return!(!n&&r.scheme!==i.scheme)&&null!=r.host&&null!=i.host&&r.host.toLowerCase()===i.host.toLowerCase()&&r.port===i.port}function B(e){if("string"==typeof e){if(!Y(e))return!0;e=he(e)}if(U(e,k))return!0;for(var t=p.trustedServers||[],n=0;n<t.length;n++)for(var r=G(t[n]),i=0;i<r.length;i++)if(U(e,r[i]))return!0;return!1}function G(e){return x[e]||(re(e)||ne(e)?x[e]=[new _(q(e))]:x[e]=[new _("http://".concat(e)),new _("https://".concat(e))]),x[e]}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S,n=arguments.length>2?arguments[2]:void 0;return ne(e)?n&&n.preserveProtocolRelative?e:"http"===k.scheme&&k.authority===J(e).slice(2)?"http:".concat(e):"https:".concat(e):re(e)?e:Object(l.d)($("/"===e[0]?le(t):t,e))}function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S,n=arguments.length>2?arguments[2]:void 0;if(!Y(e))return e;var r=W(e),i=r.toLowerCase(),a=W(t).toLowerCase().replace(/\/+$/,""),o=n?W(n).toLowerCase().replace(/\/+$/,""):null;if(o&&0!==a.indexOf(o))return e;for(var s=function(e,t,n){return-1===(n=e.indexOf(t,n))?e.length:n},c=s(i,"/",i.indexOf("//")+2),l=-1;i.slice(0,c+1)===a.slice(0,c)+"/"&&(l=c+1,c!==i.length);)c=s(i,"/",c+1);if(-1===l)return e;if(o&&l<o.length)return e;e=r.slice(l);var u=a.slice(l-1).replace(/[^/]+/g,"").length;if(u>0)for(var d=0;d<u;d++)e="../".concat(e);else e="./".concat(e);return e}function W(e){return function(e){var t=p.httpsDomains;if(!function(e){return v.test(e)||"http"===k.scheme&&ne(e)}(e))return e;var n,r=e.indexOf("/",7);if(n=(n=-1===r?e:e.slice(0,r)).toLowerCase().slice(7),g.test(n)){if(!n.endsWith(":80"))return e;n=n.slice(0,-3),e=e.replace(":80","")}return"http"===k.scheme&&n===k.authority&&!O.test(e)||(se()&&n===k.authority||t&&t.some((function(e){return n===e||n.endsWith(".".concat(e))}))||se()&&!D(e))&&(e=oe(e)),e}(e=function(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}(e=function(e){if(/^https?:\/\//i.test(e)){var t=R(e);e=(e=t.path.replace(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+="?".concat(t.query))}return e}(e=q(e=e.trim()))))}function $(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(l.k);if(r&&r.length){var i=[];if(Y(r[0])){var a=r[0],o=a.indexOf("//");-1!==o&&(i.push(a.slice(0,o+1)),ae(r[0])&&(i[0]+="/"),r[0]=a.slice(o+2))}else"/"===r[0][0]&&i.push("");for(var s=r.reduce((function(e,t){return t?e.concat(t.split("/")):e}),[]),c=0;c<s.length;c++){var u=s[c];".."===u&&i.length>0&&".."!==i[i.length-1]?i.pop():(!u&&c===s.length-1||u&&("."!==u||0===i.length))&&i.push(u)}return i.join("/")}}function J(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(K(e)||Z(e))return null;var n=e.indexOf("://");if(-1===n&&ne(e))n=2;else{if(-1===n)return null;n+=3}var r=e.indexOf("/",n);return-1!==r&&(e=e.slice(0,r)),t&&(e=ce(e,!0)),e}function Y(e){return ne(e)||re(e)}function K(e){return null!=e&&"blob:"===e.slice(0,5)}function Z(e){return"data:"===e.slice(0,5)}function X(e){var t=ee(e);if(!t||!t.isBase64)return null;for(var n=atob(t.data),r=new Uint8Array(n.length),i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r.buffer}var Q=/^data:(.*?)(;base64)?,(.*)$/;function ee(e){var t=e.match(Q);if(!t)return null;var n=Object(r.a)(t,4);return{mediaType:n[1],isBase64:!!n[2],data:n[3]}}function te(e){return e.isBase64?"data:".concat(e.mediaType,";base64,").concat(e.data):"data:".concat(e.mediaType,",").concat(e.data)}function ne(e){return null!=e&&void 0!==e&&"/"===e[0]&&"/"===e[1]}function re(e){return b.test(e)}function ie(e){return y.test(e)||"https"===k.scheme&&ne(e)}function ae(e){return m.test(e)}function oe(e){return ne(e)?"https:".concat(e):e.replace(v,"https:")}function se(){return"https"===k.scheme}function ce(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return ne(e)?e.slice(2):(e=e.replace(b,""),t&&e.length>1&&"/"===e[0]&&"/"===e[1]&&(e=e.slice(2)),e)}function le(e){var t=e.indexOf("//"),n=e.indexOf("/",t+2);return-1===n?e:e.slice(0,n)}function ue(e){var t=0;if(Y(e)){var n=e.indexOf("//");-1!==n&&(t=n+2)}var r=e.lastIndexOf("/");return r<t?e:e.slice(0,r+1)}function de(e,t){if(!e)return"";var n=T(e).path.replace(/\/+$/,""),r=n.substring(n.lastIndexOf("/")+1);if(null==t||!t.length)return r;var i=new RegExp(".(".concat(t.join("|"),")$"),"ig");return r.replace(i,"")}function fe(e){return e.replace(/\/+$/,"")}function pe(e,t,n){if(!(t&&n&&e&&Y(e)))return e;var r=e.indexOf("//"),i=e.indexOf("/",r+2),a=e.indexOf(":",r+2),o=Math.min(i<0?e.length:i,a<0?e.length:a);return e.slice(r+2,o).toLowerCase()!==t.toLowerCase()?e:"".concat(e.slice(0,r+2)).concat(n).concat(e.slice(o))}function he(e){return"string"==typeof e?new _(q(e)):(e.scheme||(e.scheme=k.scheme),e)}function be(e){return je.test(e)}function ve(e,t){var n=T(e),r=Object.keys(n.query||{});return r.length>0&&t&&t.warn("removeQueryParameters()","Url query parameters are not supported, the following parameters have been removed: ".concat(r.join(", "),".")),n.path}function ye(e,t,n){var r=T(e),i=r.query||{};return i[t]=String(n),"".concat(r.path,"?").concat(P(i))}function me(e,t){var n=T(e),r=n.query||{};for(var i in t)r[i]=t[i];var a=P(r);return a?"".concat(n.path,"?").concat(a):n.path}function ge(e){if(Object(l.j)(e))return null;var t=e.match(Oe);return t?t[1]:null}var Oe=/.*?\.([^\/]*)$/,je=/(^data:image\/svg|\.svg$)/i},function(e,t,n){"use strict";var r=n(14),i=n(2),a=n(3),o=(n(16),n(98)),s=n(4),c=n(123),l={info:0,warn:1,error:2,none:3},u=function(){function e(t){Object(i.a)(this,e),this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},null!=t.level&&(this.level=t.level),null!=t.writer&&(this.writer=t.writer),this._module=t.module,e._loggers[this.module]=this;var n=this.module.lastIndexOf(".");-1!==n&&(this._parent=e.getLogger(this.module.slice(0,n)))}return Object(a.a)(e,[{key:"module",get:function(){return this._module}},{key:"parent",get:function(){return this._parent}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log.apply(this,["error","always"].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log.apply(this,["warn","always"].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log.apply(this,["info","always"].concat(t))}},{key:"errorOnce",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log.apply(this,["error","once"].concat(t))}},{key:"warnOnce",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log.apply(this,["warn","once"].concat(t))}},{key:"infoOnce",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log.apply(this,["info","once"].concat(t))}},{key:"errorOncePerTick",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log.apply(this,["error","oncePerTick"].concat(t))}},{key:"warnOncePerTick",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log.apply(this,["warn","oncePerTick"].concat(t))}},{key:"infoOncePerTick",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log.apply(this,["info","oncePerTick"].concat(t))}},{key:"test",get:function(){var e=this;return{loggedMessages:e._loggedMessages,clearLoggedWarnings:function(){return e._loggedMessages.warn.clear()}}}},{key:"_log",value:function(t,n){if(this._matchLevel(t)){for(var i=arguments.length,a=new Array(i>2?i-2:0),s=2;s<i;s++)a[s-2]=arguments[s];if("always"!==n&&!e._throttlingDisabled){var c=this._argsToKey(a),l=this._loggedMessages[t].get(c);if("once"===n&&null!=l||"oncePerTick"===n&&l&&l>=e._tickCounter)return;this._loggedMessages[t].set(c,e._tickCounter),e._scheduleTickCounterIncrement()}var u,d=Object(r.a)(o.a.log.interceptors);try{for(d.s();!(u=d.n()).done;){var f=u.value;if(f.apply(void 0,[t,this.module].concat(a)))return}}catch(p){d.e(p)}finally{d.f()}this._inheritedWriter().apply(void 0,[t,this.module].concat(a))}}},{key:"_parentWithMember",value:function(e,t){for(var n=this;Object(s.k)(n);){var r=n[e];if(Object(s.k)(r))return r;n=n.parent}return t}},{key:"_inheritedWriter",value:function(){return this._parentWithMember("writer",this._consoleWriter)}},{key:"_consoleWriter",value:function(e,t){for(var n,r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];(n=console)[e].apply(n,["[".concat(t,"]")].concat(i))}},{key:"_matchLevel",value:function(e){var t=o.a.log.level?o.a.log.level:"warn";return l[this._parentWithMember("level",t)]<=l[e]}},{key:"_argsToKey",value:function(){for(var e=function(e,t){return"object"!=typeof t||Array.isArray(t)?t:"[Object]"},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Object(c.b)(JSON.stringify(n,e))}}],[{key:"testSingleton",get:function(){return{resetLoggers:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e._loggers;return e._loggers=t,n},set throttlingDisabled(t){e._throttlingDisabled=t}}}},{key:"getLogger",value:function(t){var n=e._loggers[t];return n||(n=new e({module:t})),n}},{key:"_scheduleTickCounterIncrement",value:function(){e._tickCounterScheduled||(e._tickCounterScheduled=!0,Promise.resolve().then((function(){e._tickCounter++,e._tickCounterScheduled=!1})))}}]),e}();u._loggers={},u._tickCounter=0,u._tickCounterScheduled=!1,u._throttlingDisabled=!1,t.a=u},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(399);function i(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Object(r.a)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw o}}}}},function(e,t,n){"use strict";function r(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function s(e){r(o,i,a,s,c,"next",e)}function c(e){r(o,i,a,s,c,"throw",e)}s(void 0)}))}}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";var r,i,a,o,s,c=n(10),l=n(65);function u(e){return"function"==typeof a[e]?a[e]=a[e](l.a):a[e]}a=null!=(r=l.a.dojoConfig)&&r.has||null!=(i=l.a.esriConfig)&&i.has?Object(c.a)(Object(c.a)({},null==(o=l.a.dojoConfig)?void 0:o.has),null==(s=l.a.esriConfig)?void 0:s.has):{},u.add=function(e,t,n,r){return(r||void 0===a[e])&&(a[e]=t),n&&u(e)},u.cache=a,u.add("esri-deprecation-warnings",!0),function(){u.add("host-webworker",void 0!==l.a.WorkerGlobalScope&&self instanceof l.a.WorkerGlobalScope);var e="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location===location&&window.document===document;if(u.add("host-browser",e),u.add("host-node","object"==typeof l.a.process&&l.a.process.versions&&l.a.process.versions.node&&l.a.process.versions.v8),u.add("dom",e),u("host-browser")){var t=navigator,n=t.userAgent,r=t.appVersion,i=parseFloat(r);if(u.add("wp",parseFloat(n.split("Windows Phone")[1])||void 0),u.add("msapp",parseFloat(n.split("MSAppHost/")[1])||void 0),u.add("khtml",r.indexOf("Konqueror")>=0?i:void 0),u.add("edge",parseFloat(n.split("Edge/")[1])||void 0),u.add("opr",parseFloat(n.split("OPR/")[1])||void 0),u.add("webkit",!u("wp")&&!u("edge")&&parseFloat(n.split("WebKit/")[1])||void 0),u.add("chrome",!u("edge")&&!u("opr")&&parseFloat(n.split("Chrome/")[1])||void 0),u.add("android",!u("wp")&&parseFloat(n.split("Android ")[1])||void 0),u.add("safari",!(r.indexOf("Safari")>=0)||u("wp")||u("chrome")||u("android")||u("edge")||u("opr")?void 0:parseFloat(r.split("Version/")[1])),u.add("mac",r.indexOf("Macintosh")>=0),u.add("quirks","BackCompat"===document.compatMode),!u("wp")&&n.match(/(iPhone|iPod|iPad)/)){var a=RegExp.$1.replace(/P/,"p"),o=n.match(/OS ([\d_]+)/)?RegExp.$1:"1",s=parseFloat(o.replace(/_/,".").replace(/_/g,""));u.add(a,s),u.add("ios",s)}u.add("trident",parseFloat(r.split("Trident/")[1])||void 0),u.add("svg","undefined"!=typeof SVGAngle),u("webkit")||(n.indexOf("Opera")>=0&&u.add("opera",i>=9.8&&parseFloat(n.split("Version/")[1])||i),!(n.indexOf("Gecko")>=0)||u("wp")||u("khtml")||u("trident")||u("edge")||u.add("mozilla",i),u("mozilla")&&u.add("ff",parseFloat(n.split("Firefox/")[1]||n.split("Minefield/")[1])||void 0))}}(),function(){if(l.a.navigator){var e=navigator.userAgent,t=e.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i),n=e.match(/iPhone/i);t&&u.add("esri-mobile",t),n&&u.add("esri-iPhone",n),u.add("esri-geolocation",!!navigator.geolocation)}u.add("esri-canvas-svg-support",!u("trident")),u.add("esri-wasm","WebAssembly"in l.a),u.add("esri-shared-array-buffer",(function(){var e="SharedArrayBuffer"in l.a,t=!1===l.a.crossOriginIsolated;return e&&!t})),u.add("esri-atomics","Atomics"in l.a),u.add("esri-workers","Worker"in l.a),u.add("esri-text-decoder","TextDecoder"in l.a),u.add("esri-text-encoder","TextEncoder"in l.a),u.add("featurelayer-snapshot-enabled",!0),u.add("featurelayer-snapshot-point-min-threshold",8e4),u.add("featurelayer-snapshot-point-max-threshold",4e5),u.add("featurelayer-snapshot-point-coverage",.1),u.add("featurelayer-advanced-symbols",!1),u.add("featurelayer-pbf",!0),u.add("featurelayer-pbf-statistics",!1),u.add("feature-layers-workers",!0),u.add("mapview-transitions-duration",200),u.add("mapserver-pbf-enabled",!1),u("host-webworker")||u("host-browser")&&(u.add("csp-restrictions",(function(){try{new Function}catch(e){return!0}return!1})),u.add("esri-image-decode",(function(){if("decode"in new Image){var e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then((function(){u.add("esri-image-decode",!0,!0,!0)})).catch((function(){u.add("esri-image-decode",!1,!0,!0)}))}return!1})),u.add("esri-url-encodes-apostrophe",(function(){var e=l.a.document.createElement("a");return e.href="?'",e.href.indexOf("?%27")>-1})),u.add("vectortilelayer-max-buffers",(function(){return u("ff")?160:Number.POSITIVE_INFINITY})))}(),t.a=u},function(e,t,n){"use strict";n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return O})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return I})),n.d(t,"g",(function(){return k})),n.d(t,"h",(function(){return _})),n.d(t,"i",(function(){return l})),n.d(t,"j",(function(){return S})),n.d(t,"k",(function(){return T})),n.d(t,"l",(function(){return c})),n.d(t,"m",(function(){return g})),n.d(t,"n",(function(){return P})),n.d(t,"o",(function(){return x})),n.d(t,"p",(function(){return C}));var r=n(2),i=n(14),a=(n(16),n(13).a.getLogger("esri.core.Accessor"));function o(e){return null==e?e:new Date(e)}function s(e){return null==e?e:!!e}function c(e){return null==e?e:e.toString()}function l(e){return null==e?e:(e=parseFloat(e),isNaN(e)?0:e)}function u(e){return null==e?e:Math.round(parseFloat(e))}function d(e){return e&&e.constructor&&void 0!==e.constructor.__accessorMetadata__}function f(e,t){return null!=t&&e&&!(t instanceof e)}function p(e){return e&&"isCollection"in e}function h(e){return e&&e.Type?"function"==typeof e.Type?e.Type:e.Type.base:null}function b(e,t){return!!d(t)&&(a.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+y(e)+"'"),!0)}function v(e,t){return null==t?t:p(e)?function(e,t){if(!t||!t.constructor||!p(t.constructor))return b(e,t)?t:new e(t);var n=h(e.prototype.itemType),r=h(t.constructor.prototype.itemType);return n?r?n===r?t:n.prototype.isPrototypeOf(r.prototype)?new e(t):(b(e,t),t):new e(t):t}(e,t):f(e,t)?b(e,t)?t:new e(t):t}function y(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}function m(e){switch(e){case Number:return l;case E:return u;case Boolean:return s;case String:return c;case Date:return o;default:return v.bind(null,e)}}function g(e,t){var n=m(e);return 1===arguments.length?n:n(t)}function O(e,t,n){return 1===arguments.length?O.bind(null,e):t?Array.isArray(t)?t.map((function(t){return e(t,n)})):[e(t,n)]:t}function j(e,t){return 1===arguments.length?O(g.bind(null,e)):O(g.bind(null,e),t)}function w(e,t,n){return 0!==t&&Array.isArray(n)?n.map((function(n){return w(e,t-1,n)})):e(n)}function _(e,t,n){if(2===arguments.length)return _.bind(null,e,t);if(!n)return n;for(var r=t,i=n=w(e,t,n);r>0&&Array.isArray(i);)r--,i=i[0];if(void 0!==i)for(var a=0;a<r;a++)n=[n];return n}function k(e,t,n){return 2===arguments.length?_(g.bind(null,e),t):_(g.bind(null,e),t,n)}function x(e){return!!Array.isArray(e)&&!e.some((function(t){var n=typeof t;return!("string"===n||"number"===n||"function"===n&&e.length>1)}))}function S(e,t){if(2===arguments.length)return S(e).call(null,t);var n,r=new Set,o=e.filter((function(e){return"function"!=typeof e})),s=e.filter((function(e){return"function"==typeof e})),c=Object(i.a)(e);try{for(c.s();!(n=c.n()).done;){var l=n.value;"string"!=typeof l&&"number"!=typeof l||r.add(l)}}catch(p){c.e(p)}finally{c.f()}var u=null,d=null;return function(e,t){if(null==e)return e;var n=typeof e,i="string"===n||"number"===n;return i&&(r.has(e)||s.some((function(e){return"string"===n&&e===String||"number"===n&&e===Number})))||"object"===n&&s.some((function(t){return!f(e,t)}))?e:(i&&o.length?(u||(u=o.map((function(e){return"string"==typeof e?"'".concat(e,"'"):"".concat(e)})).join(", ")),a.error("Accessor#set","'".concat(e,"' is not a valid value for this property, only the following values are valid: ").concat(u))):"object"==typeof e&&s.length?(d||(d=s.map((function(e){return y(e)})).join(", ")),a.error("Accessor#set","'".concat(e,"' is not a valid value for this property, value must be one of ").concat(d))):a.error("Accessor#set","'".concat(e,"' is not a valid value for this property")),t&&(t.valid=!1),null)}}function T(e,t){if(2===arguments.length)return T(e).call(null,t);var n={},r=[],i=[];for(var o in e.typeMap){var s=e.typeMap[o];n[o]=g(s),r.push(y(s)),i.push(o)}var c=function(){return"'".concat(r.join("', '"),"'")},l=function(){return"'".concat(i.join("', '"),"'")},u="string"==typeof e.key?function(t){return t[e.key]}:e.key;return function(t){if(e.base&&!f(e.base,t))return t;if(null==t)return t;var r=u(t)||e.defaultKeyValue,i=n[r];if(!i)return a.error("Accessor#set","Invalid property value, value needs to be one of ".concat(c(),", or a plain object that can autocast (having .type = ").concat(l(),")")),null;if(!f(e.typeMap[r],t))return t;if("string"==typeof e.key&&!d(t)){var o={};for(var s in t)s!==e.key&&(o[s]=t[s]);return i(o)}return i(t)}}var E=function e(){Object(r.a)(this,e)},C={native:function(e){return{type:"native",value:e}},array:function(e){return{type:"array",value:e}},oneOf:function(e){return{type:"one-of",values:e}}};function P(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function I(e){switch(e.type){case"native":return g(e.value);case"array":return O(I(e.value));case"one-of":return function(e){var t=null;return function(n,r){return A(n,e)?n:(null==t&&(t=M(e)),a.error("Accessor#set","Invalid property value, value needs to be of type ".concat(t)),r&&(r.valid=!1),null)}}(e);default:return null}}function M(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case E:return"integer";case Date:return"date";default:return y(e.value)}case"array":return"array of ".concat(M(e.value));case"one-of":var t=e.values.map((function(e){return M(e)}));return"one of ".concat(t.slice(0,t.length-1)," or ").concat(t[t.length-1])}return"unknown"}function A(e,t){if(null==e)return!0;switch(t.type){case"native":switch(t.value){case Number:case E:return"number"==typeof e;case Boolean:return"boolean"==typeof e;case String:return"string"==typeof e}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some((function(e){return!A(e,t.value)}));case"one-of":return t.values.some((function(t){return A(e,t)}))}}},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(262),o=n(37),s=n(5),c=n(6),l=n(22),u=n(13),d=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,i,s){var c;return Object(r.a)(this,n),c=t.call(this,e,i,s),Object(o.a)(c)instanceof n?Object(a.a)(c):Object(a.a)(c,new n(e,i,s))}return Object(i.a)(n,[{key:"toJSON",value:function(){if(null!=this.details)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(function(e,t){if(t&&"object"==typeof t&&"function"==typeof t.toJSON)return t;try{return Object(l.a)(t)}catch(n){return"[object]"}})))}}catch(e){throw u.a.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}}],[{key:"fromJSON",value:function(e){return new n(e.name,e.message,e.details)}}]),n}(n(522).a);d.prototype.type="error",t.a=d},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(65);function i(){var e=a.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;var t=function(t){return e[t].toString(16)};return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}var a=r.a.crypto||r.a.msCrypto},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(12);function i(e){return a[function(e){return e instanceof Blob?e.type:function(e){var t=Object(r.n)(e);return c[t]||o}(e.url)}(e)]||s}var a={},o="text/plain",s=a[o],c={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip"};for(var l in c)a[c[l]]=l},function(e,t,n){"use strict";e.exports=n(810)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return a}));var r=n(14),i=(n(16),n(107));function a(e,t){var n;if(t)for(n in e)e.hasOwnProperty(n)&&(void 0===e[n]?delete e[n]:e[n]instanceof Object&&a(e[n],!0));else for(n in e)e.hasOwnProperty(n)&&void 0===e[n]&&delete e[n];return e}function o(e){if(!e||"object"!=typeof e||"function"==typeof e)return e;if(Object(i.h)(e)||Object(i.k)(e)||Object(i.l)(e)||Object(i.f)(e)||Object(i.i)(e)||Object(i.g)(e)||Object(i.j)(e)||Object(i.d)(e)||Object(i.e)(e))return Object(i.m)(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){var t=new Map;return e.forEach((function(e,n){t.set(n,o(e))})),t}if(e instanceof Set){var n=new Set;return e.forEach((function(e){n.add(o(e))})),n}var a,s=e;if("function"==typeof s.clone)a=s.clone();else if("function"==typeof s.map&&"function"==typeof s.forEach)a=s.map(o);else if("function"==typeof s.notifyChange&&"function"==typeof s.watch)a=s.clone();else{a={};var c,l=Object(r.a)(Object.getOwnPropertyNames(e));try{for(l.s();!(c=l.n()).done;){var u=c.value;a[u]=o(e[u])}}catch(d){l.e(d)}finally{l.f()}}return a}function s(e,t){return e===t||"number"==typeof e&&isNaN(e)&&"number"==typeof t&&isNaN(t)||"function"==typeof(e||{}).getTime&&"function"==typeof(t||{}).getTime&&e.getTime()===t.getTime()||!1}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}},function(e,t,n){"use strict";n.d(t,"a",(function(){return T})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return w})),n.d(t,"g",(function(){return I})),n.d(t,"h",(function(){return M})),n.d(t,"i",(function(){return P})),n.d(t,"j",(function(){return _})),n.d(t,"k",(function(){return k})),n.d(t,"l",(function(){return j})),n.d(t,"m",(function(){return O})),n.d(t,"n",(function(){return h})),n.d(t,"o",(function(){return E})),n.d(t,"p",(function(){return y})),n.d(t,"q",(function(){return m})),n.d(t,"r",(function(){return x})),n.d(t,"s",(function(){return S})),n.d(t,"t",(function(){return b})),n.d(t,"u",(function(){return f})),n.d(t,"v",(function(){return v})),n.d(t,"w",(function(){return C})),n.d(t,"x",(function(){return g}));var r=n(35),i=n(4),a=(n(13),n(18)),o=n(279),s=n(111);function c(e){return Promise.all(e)}function l(e){return new Promise((function(t,n){try{e(t,n)}catch(r){Promise.resolve().then((function(){return n(r)}))}}))}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Aborted";return new a.a("AbortError",e)}function d(){return new AbortController}function f(e){if(h(e))throw u()}function p(e){return Object(i.k)(e)?"aborted"in e?e:e.signal:e}function h(e){var t=p(e);return Object(i.k)(t)&&t.aborted}function b(e){if(O(e))throw e}function v(e){if(!O(e))throw e}function y(e,t){var n=p(e);if(!Object(i.j)(n)){if(!n.aborted)return Object(s.d)(n,"abort",(function(){return t()}));t()}}function m(e,t){var n=p(e);if(!Object(i.j)(n))return f(n),Object(s.d)(n,"abort",(function(){return t(u())}))}function g(e,t){var n=p(t);return Object(i.j)(n)?e:new Promise((function(n,r){var a=y(t,(function(){return r(u())})),o=function(){return a=Object(i.p)(a)};e.then(o,o),e.then(n,r)}))}function O(e){return e&&"AbortError"===e.name}function j(e){return e.catch((function(e){if(!O(e))throw e}))}function w(){var e=null,t=new Promise((function(t,n){e={promise:void 0,resolve:t,reject:n}}));return e.promise=t,e}function _(e){if(e){if("function"!=typeof e.forEach){var t=Object.keys(e);return _(t.map((function(t){return e[t]}))).then((function(e){var n={};return t.forEach((function(t,r){return n[t]=e[r]})),n}))}var n=e;return l((function(e){var t=[],r=n.length;0===r&&e(t),n.forEach((function(n){var i={promise:n||Promise.resolve(n)};t.push(i),i.promise.then((function(e){i.value=e})).catch((function(e){i.error=e})).then((function(){0===--r&&e(t)}))}))}))}}function k(e){return _(e).then((function(e){return e.filter((function(e){return!!e.value})).map((function(e){return e.value}))}))}function x(e){return Promise.reject(e)}function S(e){return Promise.resolve(e)}function T(e,t,n){var r=d();return y(n,(function(){return r.abort()})),new Promise((function(n,i){var a=setTimeout((function(){a=0,n(t)}),e);y(r,(function(){a&&(clearTimeout(a),i(u()))}))}))}function E(e){return e&&"function"==typeof e.then}function C(e){return e&&"object"==typeof e&&"then"in e&&"function"==typeof e.then?e:Promise.resolve(e)}function P(e){var t,n,a,o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,c=null,l=function l(){for(var f=arguments.length,p=new Array(f),h=0;h<f;h++)p[h]=arguments[h];if(t){n=p,o&&o.reject(u()),o=w();var b=Object(i.d)(o.promise);if(c){var v=c;c=null,v.abort()}return b}if(a=o||w(),o=null,s>0){var y=d(),m=t=C(e.apply(void 0,p.concat([y.signal])));T(s).then((function(){t===m&&(o?y.abort():c=y)}))}else t=1,t=C(e.apply(void 0,p));var g=function(){var e=n;n=a=t=c=null,null!=e&&l.apply(void 0,Object(r.a)(e))},O=t,j=a;return O.then(g,g),O.then(j.resolve,j.reject),Object(i.d)(j.promise)};return l}function I(){var e,t,n=new Promise((function(n,r){e=n,t=r})),r=function(t){e(t)};return r.resolve=function(t){return e(t)},r.reject=function(e){return t(e)},r.timeout=function(e,t){return o.a.setTimeout((function(){return r.reject(t)}),e)},r.promise=n,r}function M(e){var t=d(),n=e(t.signal),r={promise:n,finished:!1,abort:function(){t&&(t.abort(),t=null)}},i=function(){r&&(r.finished=!0,r=null),t=null};return n.then(i,i),r}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return k})),n.d(t,"c",(function(){return _})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return b})),n.d(t,"f",(function(){return j})),n.d(t,"g",(function(){return w})),n.d(t,"h",(function(){return y})),n.d(t,"i",(function(){return m})),n.d(t,"j",(function(){return v})),n.d(t,"k",(function(){return g})),n.d(t,"l",(function(){return O})),n.d(t,"m",(function(){return s}));var r=n(14),i=(n(22),n(111)),a=n(24);function o(e,t,n,i,a){var o=e.watch(t,(function(t,r,a,o){n&&!n(t)||null==i||i.call(e,t,r,a,o)}),a);if(Array.isArray(t)){var s,c=Object(r.a)(t);try{for(c.s();!(s=c.n()).done;){var l=s.value,u=e.get(l);n&&n(u)&&(null==i||i.call(e,u,u,t,e))}}catch(f){c.e(f)}finally{c.f()}}else{var d=e.get(t);n&&n(d)&&(null==i||i.call(e,d,d,t,e))}return o}function s(e,t,n,r,i){var s="function"==typeof r?r:null,c="object"==typeof r?r:null;"boolean"==typeof r&&(i=r);var l,u=!1;function d(){l&&(l.remove(),l=null)}var f=Object(a.f)();Object(a.p)(c,(function(){d(),f.reject(Object(a.e)())}));var p={then:f.promise.then.bind(f.promise),catch:f.promise.catch.bind(f.promise),remove:d};return Object.freeze(p),l=o(e,t,n,(function(t,n,r,i){u=!0,d(),s&&s.call(e,t,n,r,i),f.resolve({value:t,oldValue:n,propertyName:r,target:i})}),i),u&&d(),p}function c(e){return!!e}function l(e){return!e}function u(e){return!0===e}function d(e){return!1===e}var f=/\?(\.|$)/g;function p(e,t,n,i){var a,o=Array.isArray(t)?t:t.indexOf(",")>-1?t.split(","):[t],s=h(e,t,n,i),c=Object(r.a)(o);try{for(c.s();!(a=c.n()).done;){var l=a.value.trim().replace(f,"$1"),u=e.get(l);n.call(e,u,u,l,e)}}catch(d){c.e(d)}finally{c.f()}return s}function h(e,t,n,r){return e.watch(t,n,r)}function b(e,t,n,r){return o(e,t,c,n,r)}function v(e,t,n,r){return s(e,t,c,n,r)}function y(e,t,n,r){return o(e,t,l,n,r)}function m(e,t,n,r){return s(e,t,l,n,r)}function g(e,t,n,r){return o(e,t,u,n,r)}function O(e,t,n,r){return s(e,t,u,n,r)}function j(e,t,n,r){return o(e,t,d,n,r)}function w(e,t,n,r){return s(e,t,d,n,r)}function _(e,t,n,r){var i=!1,a=e.watch(t,(function(t,r,a,o){i||n.call(e,t,r,a,o)}),r);return{remove:function(){a.remove()},pause:function(){i=!0},resume:function(){i=!1}}}function k(e,t,n,r,a,o,s){var c={};function l(t){var r=c[t];r&&(o&&o(r.target,t,e,n),r.handle.remove(),delete c[t])}var u=p(e,t,(function(t,o,s){l(s),Object(i.b)(t)&&(c[s]={handle:Object(i.c)(t,n,r),target:t},a&&a(t,s,e,n))}),s);return{remove:function(){for(var e in u.remove(),c)l(e)}}}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(){return[0,0,0]}function i(e){return[e[0],e[1],e[2]]}function a(e,t,n){return[e,t,n]}function o(e){for(var t=[0,0,0],n=Math.min(3,e.length),r=0;r<n;++r)t[r]=e[r];return t}function s(e,t){return new Float64Array(e,t,3)}function c(){return[0,0,0]}function l(){return a(1,1,1)}function u(){return a(1,0,0)}function d(){return a(0,1,0)}function f(){return a(0,0,1)}n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return a}));var p=[0,0,0],h=l(),b=u(),v=d(),y=f();Object.freeze({__proto__:null,create:r,clone:i,fromValues:a,fromArray:o,createView:s,zeros:c,ones:l,unitX:u,unitY:d,unitZ:f,ZEROS:p,ONES:h,UNIT_X:b,UNIT_Y:v,UNIT_Z:y})},function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return f}));var r=n(2),i=n(3),a=n(5),o=n(6),s=n(0),c=n(8),l=n(36),u=n(413),d=n(323),f=function(e){var t=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){Object(r.a)(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t.call.apply(t,[this].concat(i))}return Object(i.a)(n,[{key:"read",value:function(e,t){Object(u.a)(this,e,t)}},{key:"write",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(d.b)(this,e,t)}},{key:"toJSON",value:function(e){return this.write({},e)}}],[{key:"fromJSON",value:function(e,t){return p.call(this,e,t)}}]),n}(e);return t=Object(s.a)([Object(c.a)("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function p(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");var n=new this;return n.read(e,t),n}var h=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return n}(f(l.a));h=Object(s.a)([Object(c.a)("esri.core.JSONSupport")],h)},function(e,t,n){"use strict";function r(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";e.exports=n(848)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(736);var i=n(399),a=n(737);function o(e,t){return Object(r.a)(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}(e,t)||Object(i.a)(e,t)||Object(a.a)()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(10),i=n(1);function a(e,t){var n=t?Object(r.a)(Object(r.a)({},t),{},{source:e}):e;return Object(i.b)({aliasOf:n})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return T})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return g})),n.d(t,"f",(function(){return j})),n.d(t,"g",(function(){return O})),n.d(t,"h",(function(){return o})),n.d(t,"i",(function(){return h})),n.d(t,"j",(function(){return b})),n.d(t,"k",(function(){return x})),n.d(t,"l",(function(){return v})),n.d(t,"m",(function(){return w})),n.d(t,"n",(function(){return m})),n.d(t,"o",(function(){return p})),n.d(t,"p",(function(){return y})),n.d(t,"q",(function(){return k})),n.d(t,"r",(function(){return a})),n.d(t,"s",(function(){return _})),n.d(t,"t",(function(){return u})),n.d(t,"u",(function(){return d}));var r=n(64);function i(e,t){return e[0]=t[0],e[1]=t[1],e}function a(e,t,n){return e[0]=t,e[1]=n,e}function o(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function s(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function c(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function l(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function u(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function d(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}function f(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function p(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}function h(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}function b(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function v(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)}function y(e){var t=e[0],n=e[1];return t*t+n*n}function m(e,t){return e[0]=-t[0],e[1]=-t[1],e}function g(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e}function O(e,t){return e[0]*t[0]+e[1]*t[1]}function j(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e}function w(e,t,n,r){var i=t[0],a=t[1];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e}function _(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e}function k(e,t,n,r){var i=t[0]-n[0],a=t[1]-n[1],o=Math.sin(r),s=Math.cos(r);return e[0]=i*s-a*o+n[0],e[1]=i*o+a*s+n[1],e}function x(e,t){return e[0]===t[0]&&e[1]===t[1]}var S=v,T=s,E=c,C=l,P=h,I=b,M=y;Object.freeze({__proto__:null,copy:i,set:a,add:o,subtract:s,multiply:c,divide:l,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},min:u,max:d,round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},scale:f,scaleAndAdd:p,distance:h,squaredDistance:b,length:v,squaredLength:y,negate:m,inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},normalize:g,dot:O,cross:j,lerp:w,random:function(e,t){t=t||1;var n=2*Object(r.b)()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e},transformMat2:function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e},transformMat2d:_,transformMat3:function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e},transformMat4:function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e},rotate:k,angle:function(e,t){var n=e[0],r=e[1],i=t[0],a=t[1],o=n*n+r*r;o>0&&(o=1/Math.sqrt(o));var s=i*i+a*a;s>0&&(s=1/Math.sqrt(s));var c=(n*i+r*a)*o*s;return c>1?0:c<-1?Math.PI:Math.acos(c)},str:function(e){return"vec2("+e[0]+", "+e[1]+")"},exactEquals:x,equals:function(e,t){var n=e[0],i=e[1],a=t[0],o=t[1];return Math.abs(n-a)<=r.a*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-o)<=r.a*Math.max(1,Math.abs(i),Math.abs(o))},len:S,sub:T,mul:E,div:C,dist:P,sqrDist:I,sqrLen:M})},function(e,t,n){"use strict";function r(e){for(var t="",n=0;n<(arguments.length<=1?0:arguments.length-1);n++)t+=e[n]+(n+1<1||arguments.length<=n+1?void 0:arguments[n+1]);return t+=e[e.length-1]}n.d(t,"a",(function(){return r})),function(e){e.int=function(e){return Math.round(e).toString()},e.float=function(e){return e.toPrecision(8)}}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(452);var i=n(661),a=n(399);function o(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||Object(i.a)(e)||Object(a.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){"use strict";var r=n(37),i=n(5),a=n(6),o=n(2),s=n(3),c=n(13),l=n(180),u=n(187),d=n(521),f=n(1),p=n(198),h=n(8),b=n(35),v=n(31),y=n(14),m=(n(16),n(22)),g=n(90),O=n(126),j=n(145),w=n(524),_=!1;function k(e){return void 0!==e.flags}var x=function(){function e(t,n,r){Object(o.a)(this,e),this.host=t,this.propertyName=n,this.metadata=r,this.flags=1,this._observers=null,this._accessed=null,this._handles=[],this.flags=1|(r.nonNullable?8:0)|(r.hasOwnProperty("value")?16:0)|(void 0===r.get?32:0)|(void 0===r.dependsOn?64:0)}return Object(s.a)(e,[{key:"destroy",value:function(){this._accessed&&(this._accessed.clear(),this._accessed=null),this._observers&&(this._observers.clear(),this._observers=null),this._clearObservationHandles()}},{key:"onObservableAccessed",value:function(e){e!==this&&(null===this._accessed&&(this._accessed=new Set),this._accessed.add(e))}},{key:"onTrackingEnd",value:function(){this._clearObservationHandles(),this.flags|=32;var e=this._accessed;if(null!==e){var t,n=this._handles,r=Object(y.a)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push(i.observe(this))}}catch(a){r.e(a)}finally{r.f()}e.clear()}}},{key:"observe",value:function(e){return null===this._observers&&(this._observers=new Set),new w.a(this._observers.add(e),e)}},{key:"notify",value:function(){2&~this.flags&&(this.flags|=1),this._notifyObservers()}},{key:"invalidate",value:function(){this.notify()}},{key:"commit",value:function(){this.flags&=-2,this._notifyObservers()}},{key:"_notifyObservers",value:function(){if(null!==this._observers){var e,t=this._observers.size,n=new Array(t),r=t-1,i=Object(y.a)(this._observers);try{for(i.s();!(e=i.n()).done;){var a=e.value;n[r--]=a}}catch(d){i.e(d)}finally{i.f()}for(var o=!_;n.length;){var s=n.pop();if(k(s)){if(2&~s.flags&&(s.flags|=1),null===s._observers)continue;var c,l=Object(y.a)(s._observers);try{for(l.s();!(c=l.n()).done;){var u=c.value;n.push(u)}}catch(d){l.e(d)}finally{l.f()}}else o&&s.notify()}}}},{key:"_clearObservationHandles",value:function(){var e,t=Object(y.a)(this._handles);try{for(t.s();!(e=t.n()).done;){e.value.remove()}}catch(n){t.e(n)}finally{t.f()}this._handles.length=0}}]),e}(),S=function(){function e(){Object(o.a)(this,e),this._values=new Map}return Object(s.a)(e,[{key:"clone",value:function(t){var n=new e;return this._values.forEach((function(e,r){t&&t.has(r)||n.set(r,Object(m.a)(e))})),n}},{key:"get",value:function(e){return this._values.get(e)}},{key:"originOf",value:function(){return 6}},{key:"keys",value:function(){return Object(b.a)(this._values.keys())}},{key:"set",value:function(e,t){this._values.set(e,t)}},{key:"delete",value:function(e){this._values.delete(e)}},{key:"has",value:function(e){return this._values.has(e)}},{key:"forEach",value:function(e){this._values.forEach(e)}}]),e}(),T=n(80);function E(e,t,n){return void 0!==e}function C(e,t,n,r){return void 0!==e&&(!(null==n&&8&e.flags)||(r.lifecycle,!1))}c.a.getLogger("esri.core.accessorSupport.Properties");var P=function(){function e(t){Object(o.a)(this,e),this.host=t,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=0,this.store=new S,this._origin=6;var n=this.host.constructor.__accessorMetadata__,r=n.properties;for(var i in r){var a=new x(t,i,r[i]);this.properties.set(i,a)}this.metadatas=r,this._autoDestroy=n.autoDestroy}return Object(s.a)(e,[{key:"initialize",value:function(){this.lifecycle=1}},{key:"constructed",value:function(){this.lifecycle=2}},{key:"destroy",value:function(){if(this.destroyed=!0,this._autoDestroy){var e,t=Object(y.a)(this.properties);try{for(t.s();!(e=t.n()).done;){var n=Object(v.a)(e.value,2),r=n[0],i=n[1],a=this.internalGet(r);a&&((l=a)&&"function"==typeof l.destroy)&&(a.destroy(),8&~i.flags&&this._internalSet(i,null)),i.destroy()}}catch(u){t.e(u)}finally{t.f()}}else{var o,s=Object(y.a)(this.properties);try{for(s.s();!(o=s.n()).done;){var c=Object(v.a)(o.value,2);c[0];c[1].destroy()}}catch(u){s.e(u)}finally{s.f()}}var l}},{key:"initialized",get:function(){return 0!==this.lifecycle}},{key:"get",value:function(e){return this.properties.get(e).metadata.get?this.getterComputed(e):this.getterStatic(e)}},{key:"getterStatic",value:function(e){var t=this.properties.get(e);if(void 0!==t)return Object(T.c)(t),this.store.has(e)?this.store.get(e):t.metadata.value}},{key:"getterComputed",value:function(e){var t=this.properties.get(e);Object(T.c)(t);var n,r=this.store,i=t.flags,a=this.store.get(e);if(4&i)return a;if(r.has(e)&&(1&~i||_))return a;t.flags|=4;var o=t.metadata.get;64&i?n=Object(T.b)(t,o,this.host):(Object(T.d)(this.host,t),n=o.call(this.host)),r.set(e,n,1);var s=this.store.get(e);return s===a?t.flags&=-2:t.commit(),t.flags&=-5,s}},{key:"originOf",value:function(e){var t=this.store.originOf(e);if(void 0===t){var n=this.properties.get(e);if(void 0!==n&&16&n.flags)return"defaults"}return Object(O.b)(t)}},{key:"has",value:function(e){return!!this.properties.has(e)&&this.store.has(e)}},{key:"keys",value:function(){return Object(b.a)(this.properties.keys())}},{key:"internalGet",value:function(e){var t=this.properties.get(e);if(E(t))return this.store.has(e)?this.store.get(e):t.metadata.value}},{key:"internalSet",value:function(e,t){var n=this.properties.get(e);E(n)&&this._internalSet(n,t)}},{key:"getDependsInfo",value:function(e,t,n){var r=this.properties.get(t);if(!E(r))return"";var i=new Set,a=Object(T.b)({onObservableAccessed:function(e){return i.add(e)},onTrackingEnd:function(){}},(function(){var t;return null==(t=r.metadata.get)?void 0:t.call(e)})),o="".concat(n).concat(e.declaredClass.split(".").pop(),".").concat(t,": ").concat(a,"\n");if(0===i.size)return o;n+="  ";var s,c=Object(y.a)(i);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(l instanceof x){var u=l.host,d=l.propertyName,f=Object(g.a)(u);o+=f?f.getDependsInfo(u,d,n):"".concat(n).concat(d,": undefined\n")}}}catch(p){c.e(p)}finally{c.f()}return o}},{key:"setAtOrigin",value:function(e,t,n){var r=this.properties.get(e);if(E(r))return this._setAtOrigin(r,t,n)}},{key:"isOverridden",value:function(e){var t=this.properties.get(e);return void 0!==t&&!!(2&t.flags)}},{key:"clearOverride",value:function(e){var t=this.properties.get(e);void 0!==t&&2&t.flags&&(t.flags&=-3,t.invalidate())}},{key:"override",value:function(e,t){var n=this.properties.get(e);if(C(n,0,t,this)){var r=n.metadata.cast;if(r){var i=this._cast(r,t),a=i.valid,o=i.value;if(M.release(i),!a)return;t=o}n.flags|=2,this._internalSet(n,t)}}},{key:"set",value:function(e,t){var n=this.properties.get(e);if(C(n,0,t,this)){var r=n.metadata.cast;if(r){var i=this._cast(r,t),a=i.valid,o=i.value;if(M.release(i),!a)return;t=o}var s=n.metadata.set;s?s.call(this.host,t):this._internalSet(n,t)}}},{key:"setDefaultOrigin",value:function(e){this._origin=Object(O.d)(e)}},{key:"getDefaultOrigin",value:function(){return Object(O.b)(this._origin)}},{key:"propertyInvalidated",value:function(e){var t=this.properties.get(e);void 0!==t&&t.invalidate()}},{key:"propertyCommitted",value:function(e){var t=this.properties.get(e);void 0!==t&&t.commit()}},{key:"_internalSet",value:function(e,t){var n=0!==this.lifecycle?this._origin:0;this._setAtOrigin(e,t,n)}},{key:"_setAtOrigin",value:function(e,t,n){var r=this.store,i=e.propertyName;r.has(i,n)&&Object(m.b)(t,r.get(i))&&2&~e.flags&&n===r.originOf(i)||(_=!0,e.invalidate(),_=!1,r.set(i,t,n),e.commit(),Object(T.a)(this.host,e))}},{key:"_cast",value:function(e,t){var n=M.acquire();return n.valid=!0,n.value=t,e&&(n.value=e.call(this.host,t,n)),n}}]),e}(),I=function(){function e(){Object(o.a)(this,e),this.value=null,this.valid=!0}return Object(s.a)(e,[{key:"acquire",value:function(){this.valid=!0}},{key:"release",value:function(){this.value=null}}]),e}(),M=new j.a(I),A=P,R=n(165),L=n(454),F=n(129),D=n(355),N=function(){function e(){Object(o.a)(this,e),this.uid=0,this.target=null,this.path=null,this.oldValue=null,this.callback=null,this.getValue=null,this.removed=!1,this.propertyPath=null}return Object(s.a)(e,[{key:"acquire",value:function(t,n,r,i,a){this.target=t,this.path=n,this.oldValue=r,this.callback=i,this.getValue=a,this.propertyPath=Object(g.g)(n),this.uid=++e.uid,this.removed=!1}},{key:"release",value:function(){this.target=this.path=this.propertyPath=this.callback=this.oldValue=null,this.uid=++e.uid,this.removed=!0}}]),e}();N.pool=new L.a(N),N.uid=0;var V,z=new R.a,U=new Set,B=z.acquire();function G(e){U.has(e)?B.splice(B.indexOf(e),1):U.add(e),B.push(e),V||(V=Object(F.b)(W))}function q(e){if(!e.removed){var t=e.callback,n=e.path,r=e.oldValue,i=e.target,a=e.getValue();H(r,a)&&(e.oldValue=a,t.call(i,a,r,n,i))}}function H(e,t){return!Object(m.b)(e,t)}function W(){for(var e=10;V&&e--;){V=null;var t=B;B=z.acquire(),U.clear();var n,r=z.acquire(),i=Object(y.a)(t);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.uid;q(a),o===a.uid&&a.removed&&r.push(a)}}catch(u){i.e(u)}finally{i.f()}for(var s=0;s<B.length;s++){var c=B[s];c.removed&&(r.push(c),U.delete(c),B.splice(s,1),s-=1)}for(var l=0;l<r.length;l++)N.pool.release(r[l]);z.release(t),z.release(r),$.forEach((function(e){return e()}))}}var $=new Set;function J(e,t,n){var r=Object(g.e)(e,t,n,(function(e,t,n){var i,a,o=Object(D.b)((function(){return Object(l.c)(e,t)}),(function(o,s){e.__accessor__.destroyed||i&&i.uid!==a?r.remove():(i||(i=N.pool.acquire(e,t,o,n,s),a=i.uid),G(i))}));return{remove:Object(g.d)((function(){o.remove(),i&&(i.uid!==a||i.removed||(i.removed=!0,G(i)),i=null),r=o=null}))}}));return r}function Y(e,t,n){var r=Object(g.e)(e,t,n,(function(e,t,n){var i=!1;return Object(D.a)((function(){return Object(l.c)(e,t)}),(function(a,o){e.__accessor__.destroyed?r.remove():i||(i=!0,H(o,a)&&n.call(e,a,o,t,e),i=!1)}))}));return r}function K(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return!e.__accessor__||e.__accessor__.destroyed?{remove:function(){}}:r?Y(e,t,n):J(e,t,n)}function Z(e){if(null==e)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return e.constructor&&e.constructor.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}var X=function(){function e(){if(Object(o.a)(this,e),this.constructor===e)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new A(this)}),n.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,n))}return Object(s.a)(e,[{key:"postscript",value:function(e){var t=this.__accessor__,n=t.ctorArgs||e;t.initialize(),n&&(this.set(n),t.ctorArgs=null),t.constructed(),this.initialize()}},{key:"initialize",value:function(){}},{key:"destroy",value:function(){this.destroyed||(function(e){for(var t=0;t<B.length;t++){var n=B[t];n.target===e&&(n.removed=!0)}}(this),this.__accessor__.destroy())}},{key:"initialized",get:function(){return this.__accessor__&&this.__accessor__.initialized||!1}},{key:"constructed",get:function(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}},{key:"destroyed",get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}},{key:"commitProperty",value:function(e){this.get(e)}},{key:"get",value:function(e){return Object(l.b)(this,e)}},{key:"hasOwnProperty",value:function(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}},{key:"isInstanceOf",value:function(e){return Object(p.b)(c.a.getLogger(this.declaredClass),"isInstanceOf",{replacement:"Use instanceof directly",version:"4.16"}),this instanceof e}},{key:"keys",value:function(){return this.__accessor__?this.__accessor__.keys():[]}},{key:"set",value:function(e,t){return Object(d.a)(this,e,t),this}},{key:"watch",value:function(e,t,n){return K(this,e,t,n)}},{key:"_clearOverride",value:function(e){return this.__accessor__.clearOverride(e)}},{key:"_override",value:function(e,t){return this.__accessor__.override(e,t)}},{key:"_isOverridden",value:function(e){return this.__accessor__.isOverridden(e)}},{key:"notifyChange",value:function(e){this.__accessor__.propertyInvalidated(e)}},{key:"_get",value:function(e){return this.__accessor__.internalGet(e)}},{key:"_set",value:function(e,t){return this.__accessor__.internalSet(e,t),this}}],[{key:"createSubclass",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");var t=e.properties,n=e.declaredClass,s=e.constructor;delete e.declaredClass,delete e.properties,delete e.constructor;var c=this,l=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(){var e;Object(o.a)(this,n);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).inherited=null,s&&s.apply(Object(r.a)(e),a),e}return n}(c);Object(u.a)(l.prototype);var d=function(t){var n=e[t];l.prototype[t]="function"==typeof n?function(){var e,r=this.inherited;this.inherited=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(c.prototype[t])return c.prototype[t].apply(this,n)};try{for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];e=n.apply(this,a)}catch(s){throw this.inherited=r,s}return this.inherited=r,e}:e[t]};for(var p in e)d(p);for(var b in t){var v=Z(t[b]);Object(f.b)(v)(l.prototype,b)}return Object(h.a)(n)(l)}}]),e}();t.a=X},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return i})),n.d(t,"h",(function(){return a})),n.d(t,"i",(function(){return p})),n.d(t,"j",(function(){return o}));var r=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;function i(e){return e?e/72*96:0}function a(e){return e?72*e/96:0}function o(e){if("string"==typeof e){if(r.test(e)){var t=e.match(r),n=Number(t[1]),i=t[3]&&t[3].toLowerCase(),o="-"===e.charAt(0),s="px"===i?a(n):n;return o?-s:s}return console.warn("screenUtils.toPt: input not recognized!"),null}return e}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{x:e,y:t}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[e,t]}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return[e,t,n]}function u(e){return e}function d(e){return e}function f(e){return e}function p(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]}},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(4),o=n(17),s=n(571),c=n(45);function l(e){return Object(c.d)(Object(o.e)(e),0,255)}function u(e,t,n){return e=Number(e),isNaN(e)?n:e<t?t:e>n?n:e}var d=function(){function e(t){Object(r.a)(this,e),this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}return Object(i.a)(e,[{key:"isBright",get:function(){return.299*this.r+.587*this.g+.114*this.b>=127}},{key:"setColor",value:function(t){if("string"==typeof t)e.fromString(t,this);else if(Array.isArray(t))e.fromArray(t,this);else{var n,r,i,a;this._set(null!=(n=t.r)?n:0,null!=(r=t.g)?r:0,null!=(i=t.b)?i:0,null!=(a=t.a)?a:1),t instanceof e||this._sanitize()}return this}},{key:"toRgb",value:function(){return[this.r,this.g,this.b]}},{key:"toRgba",value:function(){return[this.r,this.g,this.b,this.a]}},{key:"toHex",value:function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16);return"#".concat(e.length<2?"0"+e:e).concat(t.length<2?"0"+t:t).concat(n.length<2?"0"+n:n)}},{key:"toCss",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.r+", "+this.g+", "+this.b;return e?"rgba(".concat(t,", ").concat(this.a,")"):"rgb(".concat(t,")")}},{key:"toString",value:function(){return this.toCss(!0)}},{key:"toJSON",value:function(){return this.toArray()}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=l(this.r),n=l(this.g),r=l(this.b);return 0===e||1!==this.a?[t,n,r,l(255*this.a)]:[t,n,r]}},{key:"clone",value:function(){return new e(this.toRgba())}},{key:"hash",value:function(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}},{key:"_sanitize",value:function(){return this.r=Math.round(u(this.r,0,255)),this.g=Math.round(u(this.g,0,255)),this.b=Math.round(u(this.b,0,255)),this.a=u(this.a,0,1),this}},{key:"_set",value:function(e,t,n,r){this.r=e,this.g=t,this.b=n,this.a=r}}],[{key:"blendColors",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new e;return i.r=Math.round(t.r+(n.r-t.r)*r),i.g=Math.round(t.g+(n.g-t.g)*r),i.b=Math.round(t.b+(n.b-t.b)*r),i.a=t.a+(n.a-t.a)*r,i._sanitize()}},{key:"fromRgb",value:function(t,n){var r=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(r){var i=r[2].split(/\s*,\s*/),a=r[1];if("rgb"===a&&3===i.length||"rgba"===a&&4===i.length){var o=i[0];if("%"===o.charAt(o.length-1)){var c=i.map((function(e){return 2.56*parseFloat(e)}));return 4===i.length&&(c[3]=parseFloat(i[3])),e.fromArray(c,n)}return e.fromArray(i.map((function(e){return parseFloat(e)})),n)}if("hsl"===a&&3===i.length||"hsla"===a&&4===i.length)return e.fromArray(Object(s.d)(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3])),n)}return null}},{key:"fromHex",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new e;if(4!==t.length&&7!==t.length||"#"!==t[0])return null;var r=4===t.length?4:8,i=(1<<r)-1,a=Number("0x"+t.substr(1));return isNaN(a)?null:(["b","g","r"].forEach((function(e){var t=a&i;a>>=r,n[e]=4===r?17*t:t})),n.a=1,n)}},{key:"fromArray",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new e;return n._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(n.a)&&(n.a=1),n._sanitize()}},{key:"fromString",value:function(t,n){var r=Object(s.a)(t);return r&&e.fromArray(r,n)||e.fromRgb(t,n)||e.fromHex(t,n)}},{key:"fromJSON",value:function(t){return t&&new e([t[0],t[1],t[2],t[3]/255])}},{key:"toUnitRGB",value:function(e){return Object(a.k)(e)?[e.r/255,e.g/255,e.b/255]:null}},{key:"toUnitRGBA",value:function(e){return Object(a.k)(e)?[e.r/255,e.g/255,e.b/255,null!=e.a?e.a:1]:null}}]),e}();d.prototype.declaredClass="esri.Color",t.a=d},function(e,t,n){"use strict";var r,i=n(14),a=n(35),o=n(7),s=n.n(o),c=n(37),l=n(5),u=n(6),d=n(2),f=n(3),p=n(0),h=n(22),b=n(4),v=n(17),y=n(1),m=n(8),g=n(145),O=n(80),j=n(165),w=n(129),_=n(78),k=n(524),x=function(){function e(){Object(d.a)(this,e),this._observers=new Set}return Object(f.a)(e,[{key:"observe",value:function(e){return new k.a(this._observers.add(e),e)}},{key:"notify",value:function(){var e,t=this._observers,n=this._observers.size,r=new Array(n),a=0,o=Object(i.a)(t);try{for(o.s();!(e=o.n()).done;){var s=e.value;r[a++]=s}}catch(l){o.e(l)}finally{o.f()}for(var c=0;c<n;c++)r[c].notify()}}]),e}(),S=function(){function e(){Object(d.a)(this,e),this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}return Object(f.a)(e,[{key:"preventDefault",value:function(){this.cancellable&&(this.defaultPrevented=!0)}},{key:"reset",value:function(e){this.defaultPrevented=!1,this.item=e}}]),e}(),T=new g.a(S,void 0,(function(e){e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1})),E=function(){};function C(e){return e?e instanceof N?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function P(e){if(e&&e.length)return e[0]}function I(e,t,n,r){for(var i=Math.min(e.length-n,t.length-r),a=0;a<i&&e[n+a]===t[r+a];)a++;return a}function M(e,t,n,r){t&&t.forEach((function(t,i,a){e.push(t),M(e,n.call(r,t,i,a),n,r)}))}var A=new Set,R=new Set,L=new Set,F=new Map,D=0,N=r=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this,e))._chgListeners=[],r._notifications=null,r._timer=null,r._observable=new x,r.length=0,r._items=[],Object.defineProperty(Object(c.a)(r),"uid",{value:D++}),r}return Object(f.a)(n,[{key:"normalizeCtorArgs",value:function(e){return e?Array.isArray(e)||e instanceof r?{items:e}:e:{}}},{key:Symbol.iterator,value:s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.items,"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"items",get:function(){return Object(O.c)(this._observable),this._items}},{key:"items",set:function(e){this._emitBeforeChanges(1)||(this._splice.apply(this,[0,this.length].concat(Object(a.a)(C(e)))),this._emitAfterChanges(1))}},{key:"hasEventListener",value:function(e){return"change"===e?this._chgListeners.length>0:this._emitter.hasEventListener(e)}},{key:"on",value:function(e,t){if("change"===e){var n=this._chgListeners,r={removed:!1,callback:t};return n.push(r),this._notifications&&this._notifications.push({listeners:n.slice(),items:this._items.slice(),changes:[]}),{remove:function(){this.remove=E,r.removed=!0,n.splice(n.indexOf(r),1)}}}return this._emitter.on(e,t)}},{key:"once",value:function(e,t){var n=this.on(e,t);return{remove:function(){n.remove()}}}},{key:"add",value:function(e,t){if(Object(O.c)(this._observable),this._emitBeforeChanges(1))return this;var n=this.getNextIndex(null!=t?t:null);return this._splice(n,0,e),this._emitAfterChanges(1),this}},{key:"addMany",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._items.length;if(Object(O.c)(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(1))return this;var n=this.getNextIndex(t);return this._splice.apply(this,[n,0].concat(Object(a.a)(C(e)))),this._emitAfterChanges(1),this}},{key:"removeAll",value:function(){if(Object(O.c)(this._observable),!this.length||this._emitBeforeChanges(2))return[];var e=this._splice(0,this.length)||[];return this._emitAfterChanges(2),e}},{key:"clone",value:function(){return Object(O.c)(this._observable),this._createNewInstance({items:this._items.map(h.a)})}},{key:"concat",value:function(){var e;Object(O.c)(this._observable);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.map(C);return this._createNewInstance({items:(e=this._items).concat.apply(e,Object(a.a)(i))})}},{key:"drain",value:function(e,t){if(Object(O.c)(this._observable),this.length&&!this._emitBeforeChanges(2)){for(var n=Object(b.d)(this._splice(0,this.length)),r=n.length,i=0;i<r;i++)e.call(t,n[i],i,n);this._emitAfterChanges(2)}}},{key:"every",value:function(e,t){return Object(O.c)(this._observable),this._items.every(e,t)}},{key:"filter",value:function(e,t){var n;return Object(O.c)(this._observable),n=2===arguments.length?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:n})}},{key:"find",value:function(e,t){return Object(O.c)(this._observable),this._items.find(e,t)}},{key:"findIndex",value:function(e,t){return Object(O.c)(this._observable),this._items.findIndex(e,t)}},{key:"flatten",value:function(e,t){Object(O.c)(this._observable);var n=[];return M(n,this,e,t),new r(n)}},{key:"forEach",value:function(e,t){return Object(O.c)(this._observable),this._items.forEach(e,t)}},{key:"getItemAt",value:function(e){return Object(O.c)(this._observable),this._items[e]}},{key:"getNextIndex",value:function(e){Object(O.c)(this._observable);var t=this.length;return(e=null==e?t:e)<0?e=0:e>t&&(e=t),e}},{key:"includes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(O.c)(this._observable),this._items.includes(e,t)}},{key:"indexOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(O.c)(this._observable),this._items.indexOf(e,t)}},{key:"join",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:",";return Object(O.c)(this._observable),this._items.join(e)}},{key:"lastIndexOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length-1;return Object(O.c)(this._observable),this._items.lastIndexOf(e,t)}},{key:"map",value:function(e,t){Object(O.c)(this._observable);var n=this._items.map(e,t);return new r({items:n})}},{key:"reorder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length-1;Object(O.c)(this._observable);var n=this.indexOf(e);if(-1!==n){if(t<0?t=0:t>=this.length&&(t=this.length-1),n!==t){if(this._emitBeforeChanges(4))return e;this._splice(n,1),this._splice(t,0,e),this._emitAfterChanges(4)}return e}}},{key:"pop",value:function(){if(Object(O.c)(this._observable),this.length&&!this._emitBeforeChanges(2)){var e=P(this._splice(this.length-1,1));return this._emitAfterChanges(2),e}}},{key:"push",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(O.c)(this._observable),this._emitBeforeChanges(1)||(this._splice.apply(this,[this.length,0].concat(t)),this._emitAfterChanges(1)),this.length}},{key:"reduce",value:function(e,t){Object(O.c)(this._observable);var n=this._items;return 2===arguments.length?n.reduce(e,t):n.reduce(e)}},{key:"reduceRight",value:function(e,t){Object(O.c)(this._observable);var n=this._items;return 2===arguments.length?n.reduceRight(e,t):n.reduceRight(e)}},{key:"remove",value:function(e){return Object(O.c)(this._observable),this.removeAt(this.indexOf(e))}},{key:"removeAt",value:function(e){if(Object(O.c)(this._observable),!(e<0||e>=this.length||this._emitBeforeChanges(2))){var t=P(this._splice(e,1));return this._emitAfterChanges(2),t}}},{key:"removeMany",value:function(e){if(Object(O.c)(this._observable),!e||!e.length||this._emitBeforeChanges(2))return[];for(var t=e instanceof r?e.toArray():e,n=this._items,i=[],a=t.length,o=0;o<a;o++){var s=t[o],c=n.indexOf(s);if(c>-1){var l=1+I(t,n,o+1,c+1),u=this._splice(c,l);u&&u.length>0&&i.push.apply(i,u),o+=l-1}}return this._emitAfterChanges(2),i}},{key:"reverse",value:function(){if(Object(O.c)(this._observable),this._emitBeforeChanges(4))return this;var e=this._splice(0,this.length);return e&&(e.reverse(),this._splice.apply(this,[0,0].concat(Object(a.a)(e)))),this._emitAfterChanges(4),this}},{key:"shift",value:function(){if(Object(O.c)(this._observable),this.length&&!this._emitBeforeChanges(2)){var e=P(this._splice(0,1));return this._emitAfterChanges(2),e}}},{key:"slice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return Object(O.c)(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}},{key:"some",value:function(e,t){return Object(O.c)(this._observable),this._items.some(e,t)}},{key:"sort",value:function(e){if(Object(O.c)(this._observable),!this.length||this._emitBeforeChanges(4))return this;var t=Object(b.d)(this._splice(0,this.length));return arguments.length?t.sort(e):t.sort(),this._splice.apply(this,[0,0].concat(Object(a.a)(t))),this._emitAfterChanges(4),this}},{key:"splice",value:function(e,t){Object(O.c)(this._observable);for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=(t?2:0)|(r.length?1:0);if(this._emitBeforeChanges(a))return[];var o=this._splice.apply(this,[e,t].concat(r))||[];return this._emitAfterChanges(a),o}},{key:"toArray",value:function(){return Object(O.c)(this._observable),this._items.slice()}},{key:"toJSON",value:function(){return Object(O.c)(this._observable),this.toArray()}},{key:"toLocaleString",value:function(){return Object(O.c)(this._observable),this._items.toLocaleString()}},{key:"toString",value:function(){return Object(O.c)(this._observable),this._items.toString()}},{key:"unshift",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(O.c)(this._observable),!t.length||this._emitBeforeChanges(1)||(this._splice.apply(this,[0,0].concat(t)),this._emitAfterChanges(1)),this.length}},{key:"_createNewInstance",value:function(e){return new this.constructor(e)}},{key:"_splice",value:function(e,t){for(var n=this,r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];var c,l,u=this._items,d=this.constructor.prototype.itemType;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=Object(w.b)((function(){return n._dispatchChange()}))),t){if(l=u.splice(e,t),this.hasEventListener("before-remove")){var f=T.acquire();f.target=this,f.cancellable=!0;for(var p=0,h=l.length;p<h;p++)c=l[p],f.reset(c),this.emit("before-remove",f),f.defaultPrevented&&(l.splice(p,1),u.splice(e,0,c),e+=1,p-=1,h-=1);T.release(f)}if(this.length=this._items.length,this.hasEventListener("after-remove")){var b=T.acquire();b.target=this,b.cancellable=!1;for(var v=l.length,y=0;y<v;y++)b.reset(l[y]),this.emit("after-remove",b);T.release(b)}}if(o&&o.length){if(d){var m,g=[],O=Object(i.a)(o);try{for(O.s();!(m=O.n()).done;){var j=m.value,_=d.ensureType(j);null==_&&null!=j||g.push(_)}}catch(F){O.e(F)}finally{O.f()}o=g}var k=this.hasEventListener("before-add"),x=this.hasEventListener("after-add"),S=e===this.length;if(k||x){var E=T.acquire();E.target=this,E.cancellable=!0;var C=T.acquire();C.target=this,C.cancellable=!1;var P,I=Object(i.a)(o);try{for(I.s();!(P=I.n()).done;){var M=P.value;k?(E.reset(M),this.emit("before-add",E),E.defaultPrevented||(S?u.push(M):u.splice(e++,0,M),this._set("length",u.length),x&&(C.reset(M),this.emit("after-add",C)))):(S?u.push(M):u.splice(e++,0,M),this._set("length",u.length),C.reset(M),this.emit("after-add",C))}}catch(F){I.e(F)}finally{I.f()}T.release(C),T.release(E)}else{if(S){var A,R=Object(i.a)(o);try{for(R.s();!(A=R.n()).done;){var L=A.value;u.push(L)}}catch(F){R.e(F)}finally{R.f()}}else u.splice.apply(u,[e,0].concat(Object(a.a)(o)));this._set("length",u.length)}}return(o&&o.length||l&&l.length)&&this._notifyChangeEvent(o,l),l}},{key:"_emitBeforeChanges",value:function(e){var t=!1;if(this.hasEventListener("before-changes")){var n=T.acquire();n.target=this,n.cancellable=!0,n.type=e,this.emit("before-changes",n),t=n.defaultPrevented,T.release(n)}return t}},{key:"_emitAfterChanges",value:function(e){if(this.hasEventListener("after-changes")){var t=T.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),T.release(t)}this._observable.notify()}},{key:"_notifyChangeEvent",value:function(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}},{key:"_dispatchChange",value:function(){var e=this;if(this._timer&&(this._timer.remove(),this._timer=null),this._notifications){var t=this._notifications;this._notifications=null;var n,r=Object(i.a)(t);try{var a=function(){var t=n.value,r=t.changes;A.clear(),R.clear(),L.clear();var a,o=Object(i.a)(r);try{for(o.s();!(a=o.n()).done;){var s=a.value,c=s.added,l=s.removed;if(c)if(0===L.size&&0===R.size){var u,d=Object(i.a)(c);try{for(d.s();!(u=d.n()).done;){var f=u.value;A.add(f)}}catch(M){d.e(M)}finally{d.f()}}else{var p,h=Object(i.a)(c);try{for(h.s();!(p=h.n()).done;){var b=p.value;R.has(b)?(L.add(b),R.delete(b)):L.has(b)||A.add(b)}}catch(M){h.e(M)}finally{h.f()}}if(l)if(0===L.size&&0===A.size){var v,y=Object(i.a)(l);try{for(y.s();!(v=y.n()).done;){var m=v.value;R.add(m)}}catch(M){y.e(M)}finally{y.f()}}else{var g,O=Object(i.a)(l);try{for(O.s();!(g=O.n()).done;){var w=g.value;A.has(w)?A.delete(w):(L.delete(w),R.add(w))}}catch(M){O.e(M)}finally{O.f()}}}}catch(M){o.e(M)}finally{o.f()}var _=j.a.acquire();A.forEach((function(e){_.push(e)}));var k=j.a.acquire();R.forEach((function(e){k.push(e)}));var x=e._items,S=t.items,T=j.a.acquire();if(L.forEach((function(e){S.indexOf(e)!==x.indexOf(e)&&T.push(e)})),t.listeners&&(_.length||k.length||T.length))for(var E={target:e,added:_,removed:k,moved:T},C=t.listeners.length,P=0;P<C;P++){var I=t.listeners[P];I.removed||I.callback.call(e,E)}j.a.release(_),j.a.release(k),j.a.release(T)};for(r.s();!(n=r.n()).done;)a()}catch(o){r.e(o)}finally{r.f()}A.clear(),R.clear(),L.clear()}}}],[{key:"isCollection",value:function(e){return null!=e&&e instanceof r}}]),n}(_.a.EventedAccessor);N.ofType=function(e){if(!e)return r;if(F.has(e))return F.get(e);var t=null;if("function"==typeof e)t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(var n in e.typeMap){var i=e.typeMap[n].prototype.declaredClass;t?t+=" | ".concat(i):t=i}var a=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return n}(r);a=Object(p.a)([Object(m.a)("esri.core.Collection<".concat(t,">"))],a);var o={Type:e,ensureType:"function"==typeof e?Object(v.m)(e):Object(v.k)(e)};return Object.defineProperty(a.prototype,"itemType",{value:o}),F.set(e,a),a},Object(p.a)([Object(y.b)()],N.prototype,"length",void 0),Object(p.a)([Object(y.b)()],N.prototype,"items",null);var V=N=r=Object(p.a)([Object(m.a)("esri.core.Collection")],N);t.a=V},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(100),i=n(1);function a(e,t,n){var a,o;return void 0===t||Array.isArray(t)?(o=e,n=t,a=[void 0]):(o=t,a=Array.isArray(e)?e:[e]),function(e,t){var s=e.constructor.prototype;a.forEach((function(a){var c=Object(i.c)(e,a,o);c.read&&"object"!=typeof c.read&&(c.read={}),Object(r.c)("read.reader",s[t],c),n&&(c.read.source=(c.read.source||[]).concat(n))}))}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(100),i=n(1);function a(e,t,n){var a,o;return void 0===t?(o=e,a=[void 0]):"string"!=typeof t?(o=e,a=[void 0],n=t):(o=t,a=Array.isArray(e)?e:[e]),function(e,t){var s=e.constructor.prototype;a.forEach((function(a){var c=Object(i.c)(e,a,o);c.write&&"object"!=typeof c.write&&(c.write={}),n&&Object(r.c)("write.target",n,c),Object(r.c)("write.writer",s[t],c)}))}}},function(e,t,n){"use strict";var r=n(31),i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13)),u=n(17),d=n(1),f=n(58),p=n(41),h=n(8),b=n(42),v=(n(12),n(19),n(20),n(59)),y=n(44),m=n(150);var g,O=n(61),j=[0,0];function w(e){return e&&("esri.geometry.SpatialReference"===e.declaredClass||null!=e.wkid)}var _=l.a.getLogger("esri.geometry.Point"),k=g=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).x=0,e.y=0,e.z=void 0,e.m=void 0,e.type="point",e}return Object(a.a)(n,[{key:"normalizeCtorArgs",value:function(e,t,n,r,i){var a;if(Array.isArray(e))i=t,e=(a=e)[0],t=a[1],n=a[2],r=a[3];else if(e&&"object"==typeof e){if(e=null!=(a=e).x?a.x:a.longitude,t=null!=a.y?a.y:a.latitude,n=a.z,r=a.m,(i=a.spatialReference)&&"esri.geometry.SpatialReference"!==i.declaredClass&&(i=new y.a(i)),null!=a.longitude||null!=a.latitude)if(null==a.longitude)_.warn(".longitude=","Latitude was defined without longitude");else if(null==a.latitude)_.warn(".latitude=","Longitude was defined without latitude");else if(!a.declaredClass&&i&&i.isWebMercator){var o=Object(O.c)(a.longitude,a.latitude,j);e=o[0],t=o[1]}}else w(n)?(i=n,n=null):w(r)&&(i=r,r=null);var s={x:e,y:t};return null==s.x&&null!=s.y?_.warn(".y=","Y coordinate was defined without an X coordinate"):null==s.y&&null!=s.x&&_.warn(".x=","X coordinate was defined without a Y coordinate"),null!=i&&(s.spatialReference=i),null!=n&&(s.z=n),null!=r&&(s.m=r),s}},{key:"cache",get:function(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}},{key:"hasM",get:function(){return void 0!==this.m},set:function(e){e!==(void 0!==this._get("m"))&&(this._set("m",e?0:void 0),this._set("hasM",e))}},{key:"hasZ",get:function(){return void 0!==this.z},set:function(e){e!==(void 0!==this._get("z"))&&(this._set("z",e?0:void 0),this._set("hasZ",e))}},{key:"latitude",get:function(){var e=this.spatialReference,t=this.x,n=this.y;if(e){if(e.isWebMercator)return Object(O.g)(t,n,j)[1];if(e.isGeographic)return n}return null},set:function(e){var t=this.spatialReference,n=this.x;t&&(t.isWebMercator?this._set("y",Object(O.c)(n,e,j)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}},{key:"longitude",get:function(){var e=this.x,t=this.y,n=this.spatialReference;if(n){if(n.isWebMercator)return Object(O.g)(e,t,j)[0];if(n.isGeographic)return e}return NaN},set:function(e){var t=this.y,n=this.spatialReference;n&&(n.isWebMercator?this._set("x",Object(O.c)(e,t,j)[0]):n.isGeographic&&this._set("x",e),this._set("longitude",e))}},{key:"writeX",value:function(e,t,n){t[n]=isNaN(e)?"NaN":e}},{key:"readX",value:function(e){return"string"==typeof e?NaN:e}},{key:"clone",value:function(){var e=new g;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}},{key:"copy",value:function(e){return g.copy(e,this),this}},{key:"equals",value:function(e){var t,n;if(!e)return!1;var i=this.x,a=this.y,o=this.z,s=this.m,c=this.spatialReference,l=e.z,u=e.m,d=e.x,f=e.y,p=e.spatialReference;if(!c.equals(p))if(c.isWebMercator&&p.isWGS84)t=Object(O.c)(d,f),d=(n=Object(r.a)(t,2))[0],f=n[1],p=c;else{var h,b;if(!c.isWGS84||!p.isWebMercator)return!1;h=Object(O.g)(d,f),d=(b=Object(r.a)(h,2))[0],f=b[1],p=c}return i===d&&a===f&&o===l&&s===u&&c.wkid===p.wkid}},{key:"offset",value:function(e,t,n){return function(e,t,n,r){return e.x=e.x+t,e.y=e.y+n,null!=r&&null!=e.z&&(e.z=e.z+r),e}(this,e,t,n)}},{key:"normalize",value:function(){if(!this.spatialReference)return this;var e=Object(v.d)(this.spatialReference);if(!e)return this;var t=this.x,n=Object(r.a)(e.valid,2),i=n[0],a=n[1],o=2*a;return t>a?t-=Math.ceil(Math.abs(t-a)/o)*o:t<i&&(t+=Math.ceil(Math.abs(t-i)/o)*o),this._set("x",t),this}},{key:"distance",value:function(e){return function(e,t){var n=e.x-t.x,r=e.y-t.y,i=e.hasZ&&t.hasZ?e.z-t.z:0;return Math.sqrt(n*n+r*r+i*i)}(this,e)}},{key:"toArray",value:function(){var e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}},{key:"toJSON",value:function(e){return this.write(null,e)}}],[{key:"copy",value:function(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));var n=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(n)?n:n.clone())}}]),n}(m.a);Object(c.a)([Object(d.b)({readOnly:!0})],k.prototype,"cache",null),Object(c.a)([Object(d.b)({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],k.prototype,"hasM",null),Object(c.a)([Object(d.b)({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],k.prototype,"hasZ",null),Object(c.a)([Object(d.b)({type:Number})],k.prototype,"latitude",null),Object(c.a)([Object(d.b)({type:Number})],k.prototype,"longitude",null),Object(c.a)([Object(d.b)({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Object(f.a)((function(e){return isNaN(e)?e:Object(u.i)(e)}))],k.prototype,"x",void 0),Object(c.a)([Object(b.a)("x")],k.prototype,"writeX",null),Object(c.a)([Object(p.a)("x")],k.prototype,"readX",null),Object(c.a)([Object(d.b)({type:Number,json:{write:!0}})],k.prototype,"y",void 0),Object(c.a)([Object(d.b)({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],k.prototype,"z",void 0),Object(c.a)([Object(d.b)({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],k.prototype,"m",void 0),(k=g=Object(c.a)([Object(h.a)("esri.geometry.Point")],k)).prototype.toJSON.isDefaultToJSON=!0;var x=k;t.a=x},function(e,t,n){"use strict";var r,i=n(26),a=n(2),o=n(3),s=n(5),c=n(6),l=n(0),u=n(22),d=n(17),f=n(1),p=n(8),h=n(42),b=n(28),v=n(59),y=r=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).latestWkid=null,r.wkid=null,r.wkt=null,r.vcsWkid=null,r.latestVcsWkid=null,r.imageCoordinateSystem=null,r}return Object(o.a)(n,[{key:"normalizeCtorArgs",value:function(e){return e&&"object"==typeof e?e:Object(i.a)({},"string"==typeof e?"wkt":"wkid",e)}},{key:"isWGS84",get:function(){return Object(v.j)(this)}},{key:"isWebMercator",get:function(){return Object(v.m)(this)}},{key:"isGeographic",get:function(){return Object(v.f)(this)}},{key:"isWrappable",get:function(){return Object(v.n)(this)}},{key:"writeWkt",value:function(e,t){this.wkid||(t.wkt=e)}},{key:"clone",value:function(){if(this===r.WGS84)return r.WGS84;if(this===r.WebMercator)return r.WebMercator;var e=new r;return null!=this.wkid?(e.wkid=this.wkid,null!=this.latestWkid&&(e.latestWkid=this.latestWkid),null!=this.vcsWkid&&(e.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(e.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=Object(u.a)(this.imageCoordinateSystem)),e}},{key:"equals",value:function(e){if(null==e)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(null==this.imageCoordinateSystem||null==e.imageCoordinateSystem)return!1;var t=e.imageCoordinateSystem,n=t.id,r=t.referenceServiceName,i=e.imageCoordinateSystem.geodataXform,a=this.imageCoordinateSystem;return null==n||i?JSON.stringify(a)===JSON.stringify(e.imageCoordinateSystem):r?a.id===n&&a.referenceServiceName===r:a.id===n}return Object(v.c)(this,e)}},{key:"toJSON",value:function(e){return this.write(void 0,e)}}],[{key:"fromJSON",value:function(e){if(!e)return null;if(e.wkid){if(102100===e.wkid)return r.WebMercator;if(4326===e.wkid)return r.WGS84}var t=new r;return t.read(e),t}}]),n}(b.a);y.GCS_NAD_1927=null,y.WGS84=null,y.WebMercator=null,Object(l.a)([Object(f.b)({readOnly:!0})],y.prototype,"isWGS84",null),Object(l.a)([Object(f.b)({readOnly:!0})],y.prototype,"isWebMercator",null),Object(l.a)([Object(f.b)({readOnly:!0})],y.prototype,"isGeographic",null),Object(l.a)([Object(f.b)({readOnly:!0})],y.prototype,"isWrappable",null),Object(l.a)([Object(f.b)({type:d.a,json:{write:!0}})],y.prototype,"latestWkid",void 0),Object(l.a)([Object(f.b)({type:d.a,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkt}}}}}}})],y.prototype,"wkid",void 0),Object(l.a)([Object(f.b)({type:String,json:{origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkid}}}}}}})],y.prototype,"wkt",void 0),Object(l.a)([Object(h.a)("wkt"),Object(h.a)("web-scene","wkt")],y.prototype,"writeWkt",null),Object(l.a)([Object(f.b)({type:d.a,json:{write:!0}})],y.prototype,"vcsWkid",void 0),Object(l.a)([Object(f.b)({type:d.a,json:{write:!0}})],y.prototype,"latestVcsWkid",void 0),Object(l.a)([Object(f.b)()],y.prototype,"imageCoordinateSystem",void 0),(y=r=Object(l.a)([Object(p.a)("esri.geometry.SpatialReference")],y)).prototype.toJSON.isDefaultToJSON=!0,y.GCS_NAD_1927=new y({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),y.WGS84=new y(v.a),y.WebMercator=new y(v.b),Object.freeze&&(Object.freeze(y.GCS_NAD_1927),Object.freeze(y.WGS84),Object.freeze(y.WebMercator));var m=y;t.a=m},function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return O})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return g})),n.d(t,"h",(function(){return m})),n.d(t,"i",(function(){return c})),n.d(t,"j",(function(){return i})),n.d(t,"k",(function(){return l})),n.d(t,"l",(function(){return p})),n.d(t,"m",(function(){return f})),n.d(t,"n",(function(){return o})),n.d(t,"o",(function(){return u})),n.d(t,"p",(function(){return b})),n.d(t,"q",(function(){return d}));var r=new Float32Array(1),i=Number.isFinite||function(e){return"number"==typeof e&&window.isFinite(e)},a=Number.isNaN||function(e){return e!=e};function o(e){--e;for(var t=1;t<32;t<<=1)e|=e>>t;return e+1}function s(e,t,n){return e<t?t:e>n?n:e}function c(e,t,n){return Math.min(Math.max(e,t),n)}function l(e){return 0==(e&e-1)}function u(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}var d=Math.sign||function(e){return+(e>0)-+(e<0)||+e},f=Math.log2||function(e){return Math.log(e)/Math.LN2};function p(e,t,n){return e+(t-e)*n}function h(e){return e*Math.PI/180}function b(e){return 180*e/Math.PI}function v(e){return Math.acos(s(e,-1,1))}function y(e){return Math.asin(s(e,-1,1))}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6;if(a(e)||a(t))return!1;if(e===t)return!0;var r=Math.abs(e-t),i=Math.abs(e),o=Math.abs(t);if(0===e||0===t||i<1e-12&&o<1e-12){if(r>.01*n)return!1}else if(r/(i+o)>n)return!1;return!0}function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6;return!a(e)&&!a(t)&&(e>t?e-t:t-e)<=n}function O(e){return j(Math.max(-w,Math.min(e,w)))}function j(e){return r[0]=e,r[0]}var w=j(34028234663852886e22)},function(e,t,n){"use strict";n.d(t,"a",(function(){return L})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return D})),n.d(t,"d",(function(){return j})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return V})),n.d(t,"g",(function(){return W})),n.d(t,"h",(function(){return z})),n.d(t,"i",(function(){return Y})),n.d(t,"j",(function(){return te})),n.d(t,"k",(function(){return ne})),n.d(t,"l",(function(){return ee})),n.d(t,"m",(function(){return re})),n.d(t,"n",(function(){return R})),n.d(t,"o",(function(){return I})),n.d(t,"p",(function(){return F})),n.d(t,"q",(function(){return B})),n.d(t,"r",(function(){return A})),n.d(t,"s",(function(){return ie})),n.d(t,"t",(function(){return X})),n.d(t,"u",(function(){return K})),n.d(t,"v",(function(){return Z})),n.d(t,"w",(function(){return N})),n.d(t,"x",(function(){return U})),n.d(t,"y",(function(){return u})),n.d(t,"z",(function(){return G})),n.d(t,"A",(function(){return M})),n.d(t,"B",(function(){return q})),n.d(t,"C",(function(){return H})),n.d(t,"D",(function(){return $})),n.d(t,"E",(function(){return g})),n.d(t,"F",(function(){return S})),n.d(t,"G",(function(){return s})),n.d(t,"H",(function(){return x})),n.d(t,"I",(function(){return O})),n.d(t,"J",(function(){return P})),n.d(t,"K",(function(){return h})),n.d(t,"L",(function(){return d})),n.d(t,"M",(function(){return y})),n.d(t,"N",(function(){return p})),n.d(t,"O",(function(){return k})),n.d(t,"P",(function(){return c})),n.d(t,"Q",(function(){return f})),n.d(t,"R",(function(){return T})),n.d(t,"S",(function(){return _})),n.d(t,"T",(function(){return w}));var r=n(103),i=n(73),a=n(85),o=n(490),s=function(e){return function(){return e}}(!0),c=function(){};var l=function(e){return e};"function"===typeof Symbol&&Symbol.asyncIterator&&Symbol.asyncIterator;function u(e,t,n){if(!t(e))throw new Error(n)}var d=function(e,t){Object(i.a)(e,t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach((function(n){e[n]=t[n]}))},f=function(e,t){var n;return(n=[]).concat.apply(n,t.map(e))};function p(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}function h(e){var t=!1;return function(){t||(t=!0,e())}}var b=function(e){throw e},v=function(e){return{value:e,done:!0}};function y(e,t,n){void 0===t&&(t=b),void 0===n&&(n="iterator");var r={meta:{name:n},next:e,throw:t,return:v,isSagaIterator:!0};return"undefined"!==typeof Symbol&&(r[Symbol.iterator]=function(){return r}),r}function m(e,t){var n=t.sagaStack;console.error(e),console.error(n)}var g=function(e){return new Error("\n  redux-saga: Error checking hooks detected an inconsistent state. This is likely a bug\n  in redux-saga code and not yours. Thanks for reporting this in the project's github repo.\n  Error: "+e+"\n")},O=function(e){return Array.apply(null,new Array(e))},j=function(e){return function(t){return e(Object.defineProperty(t,r.f,{value:!0}))}},w=function(e){return e===r.k},_=function(e){return e===r.j},k=function(e){return w(e)||_(e)};function x(e,t){var n=Object.keys(e),r=n.length;var i,o=0,s=Object(a.a)(e)?O(r):{},l={};return n.forEach((function(e){var n=function(n,a){i||(a||k(n)?(t.cancel(),t(n,a)):(s[e]=n,++o===r&&(i=!0,t(s))))};n.cancel=c,l[e]=n})),t.cancel=function(){i||(i=!0,n.forEach((function(e){return l[e].cancel()})))},l}function S(e){return{name:e.name||"anonymous",location:T(e)}}function T(e){return e[r.g]}var E={isEmpty:s,put:c,take:c};function C(e,t){void 0===e&&(e=10);var n=new Array(e),r=0,i=0,a=0,o=function(t){n[i]=t,i=(i+1)%e,r++},s=function(){if(0!=r){var t=n[a];return n[a]=null,r--,a=(a+1)%e,t}},c=function(){for(var e=[];r;)e.push(s());return e};return{isEmpty:function(){return 0==r},put:function(s){var l;if(r<e)o(s);else switch(t){case 1:throw new Error("Channel's Buffer overflow!");case 3:n[i]=s,a=i=(i+1)%e;break;case 4:l=2*e,n=c(),r=n.length,i=n.length,a=0,n.length=l,e=l,o(s)}},take:s,flush:c}}var P=function(){return E},I=function(e){return C(e,3)},M=function(e){return C(e,4)},A="TAKE",R="PUT",L="ALL",F="RACE",D="CALL",N="CPS",V="FORK",z="JOIN",U="CANCEL",B="SELECT",G="ACTION_CHANNEL",q="CANCELLED",H="FLUSH",W="GET_CONTEXT",$="SET_CONTEXT",J=function(e,t){var n;return(n={})[r.c]=!0,n.combinator=!1,n.type=e,n.payload=t,n};function Y(e,t){return void 0===e&&(e="*"),Object(a.i)(e)?J(A,{pattern:e}):Object(a.f)(e)&&Object(a.g)(t)&&Object(a.i)(t)?J(A,{channel:e,pattern:t}):Object(a.b)(e)?J(A,{channel:e}):void 0}function K(e,t){return Object(a.n)(t)&&(t=e,e=void 0),J(R,{channel:e,action:t})}function Z(e){var t=J(L,e);return t.combinator=!0,t}function X(e){var t=J(F,e);return t.combinator=!0,t}function Q(e,t){var n,r=null;return Object(a.d)(e)?n=e:(Object(a.a)(e)?(r=e[0],n=e[1]):(r=e.context,n=e.fn),r&&Object(a.k)(n)&&Object(a.d)(r[n])&&(n=r[n])),{context:r,fn:n,args:t}}function ee(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return J(D,Q(e,n))}function te(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return J(V,Q(e,n))}function ne(e){return void 0===e&&(e=r.h),J(U,e)}function re(e,t){return J(G,{pattern:e,buffer:t})}var ie=ee.bind(null,o.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var r=n(2),i=n(3),a=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ignoreUnknown:!1};Object(r.a)(this,e),this.jsonToAPI=t,this.options=i,this.apiValues=[],this.jsonValues=[],this.apiToJSON=this.invertMap(t),this.apiValues=this.getKeysSorted(this.apiToJSON),this.jsonValues=this.getKeysSorted(this.jsonToAPI),this.read=function(e){return n.fromJSON(e)},this.write=function(e,t,r){var i=n.toJSON(e);void 0!==i&&(t[r]=i)},this.write.isJSONMapWriter=!0}return Object(i.a)(e,[{key:"toJSON",value:function(e){return this.apiToJSON.hasOwnProperty(e)?this.apiToJSON[e]:this.options.ignoreUnknown?void 0:e}},{key:"fromJSON",value:function(e){return this.jsonToAPI.hasOwnProperty(e)?this.jsonToAPI[e]:this.options.ignoreUnknown?void 0:e}},{key:"invertMap",value:function(e){var t={};for(var n in e)t[e[n]]=n;return t}},{key:"getKeysSorted",value:function(e){var t=[];for(var n in e)t.push(n);return t.sort(),t}}]),e}();function o(){return function(e){return new a(e,{ignoreUnknown:!0})}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return g}));var r=n(14),i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13)),u=(n(17),n(1)),d=n(8),f=(n(12),n(19),n(20),n(36)),p=n(434),h=n(461),b=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,!0))._onChange=e,r._value="mouse",r.registerIncoming("pointer-down",(function(e){var t="touch"===e.data.native.pointerType;r._setValue(t?"touch":"mouse")})),r._moveHandler=r.registerIncoming("pointer-move",(function(e){var t="touch"===e.data.native.pointerType;r._setValue(t?"touch":"mouse")})),r._moveHandler.pause(),r}return Object(a.a)(n,[{key:"_setValue",value:function(e){e!==this._value&&("touch"===e?this._moveHandler.resume():this._moveHandler.pause(),this._value=e,this._onChange(e))}}]),n}(n(99).a),v=l.a.getLogger("esri.views.input.InputManager"),y=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e))._pointerCaptures=new Map,r._nameToGroup={},r._handlers=[],r._currentPropagation=null,r._sourceEvents=new Set,r._keyModifiers=new Set,r._activeKeyModifiers=new Set,r._stoppedPropagationEventIds=new Set,r.primaryKey=h.c,r.latestPointerType="mouse",r.test={timestamp:void 0,hasCurrentPropagation:function(){return!!r._currentPropagation}},r}return Object(a.a)(n,[{key:"initialize",value:function(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}},{key:"destroy",value:function(){for(var e=0,t=Object.keys(this._nameToGroup);e<t.length;e++){var n=t[e];this.uninstallHandlers(n)}this.eventSource=null,this._currentPropagation=null}},{key:"hasPendingInputs",get:function(){return this._handlers.some((function(e){return e.handler.hasPendingInputs}))}},{key:"installHandlers",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g.INTERNAL;if(this._nameToGroup[e])v.error("There is already an InputHandler group registered under the name `"+e+"`");else if(0!==t.length){var i={name:e,handlers:t.map((function(e){return{handler:e,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}}))};this._nameToGroup[e]=i;for(var a=function(e){var t=i.handlers[e];n._handlers.push(t),t.handler.onInstall({updateDependencies:function(){n.updateDependencies()},emit:function(e,r,i,a,o){n._emitInputEvent(t.priorityIndex+1,e,r,i,o,a)},setPointerCapture:function(e,r){n._setPointerCapture(i,t,e,r)},setEventCallback:function(e){t.eventCallback=e},setUninstallCallback:function(e){t.uninstallCallback=e},refreshHasPendingInputs:function(){n.notifyChange("hasPendingInputs")}})},o=i.handlers.length-1;o>=0;o--)a(o);this.updateDependencies()}else v.error("Can't register a group of zero handlers")}},{key:"uninstallHandlers",value:function(e){var t=this._nameToGroup[e];t?(t.handlers.forEach((function(e){e.removed=!0,e.uninstallCallback()})),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):v.error("There is no InputHandler group registered under the name `"+e+"`")}},{key:"hasHandlers",value:function(e){return void 0!==this._nameToGroup[e]}},{key:"updateDependencies",value:function(){var e=new Set,t=new Set;this._handlersPriority=[];for(var n=this._handlers.length-1;n>=0;n--){var i=this._handlers[n];i.priorityIndex=n,this._handlersPriority.push(i)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(var a=this._handlersPriority.length-1;a>=0;a--){var o=this._handlersPriority[a];o.priorityIndex=a;var s=o.handler.hasSideEffects;if(!s){var c,l=Object(r.a)(o.handler.outgoingEventTypes);try{for(l.s();!(c=l.n()).done;){var u=c.value;if(e.has(u)){s=!0;break}}}catch(m){l.e(m)}finally{l.f()}}if(s){var d,f=Object(r.a)(o.handler.incomingEventMatches);try{for(f.s();!(d=f.n()).done;){var p=d.value;e.add(p.eventType);var b,v=Object(r.a)(p.keyModifiers);try{for(v.s();!(b=v.n()).done;){var y=b.value;Object(h.b)(y)||t.add(y)}}catch(m){v.e(m)}finally{v.f()}}}catch(m){f.e(m)}finally{f.f()}}o.active=s}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}},{key:"_setLatestPointerType",value:function(e){this._set("latestPointerType",e)}},{key:"_onEventReceived",value:function(e,t){if("pointer-capture-lost"===e){var n=t;this._pointerCaptures.delete(n.native.pointerId)}this._updateKeyModifiers(e,t);var r=null!=this.test.timestamp?this.test.timestamp:t.native?t.native.timestamp:void 0,i=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,r,i)}},{key:"_updateKeyModifiers",value:function(e,t){var n=this;if(t){var r=!1,i=function(){if(!r){var e=new Set;n._activeKeyModifiers.forEach((function(t){e.add(t)})),n._activeKeyModifiers=e,r=!0}},a=function(e,t){t&&!n._activeKeyModifiers.has(e)?(i(),n._activeKeyModifiers.add(e)):!t&&n._activeKeyModifiers.has(e)&&(i(),n._activeKeyModifiers.delete(e))};if("key-down"===e||"key-up"===e){var o=t.key;this._keyModifiers.has(o)&&a(o,"key-down"===e)}var s=t.native;a("Alt",!(!s||!s.altKey)),a("Ctrl",!(!s||!s.ctrlKey)),a("Shift",!(!s||!s.shiftKey)),a("Meta",!(!s||!s.metaKey)),a("Primary",this._activeKeyModifiers.has(this.primaryKey))}}},{key:"_installRecognizers",value:function(){var e=this;this._latestPointerTypeHandler=new b((function(t){return e._setLatestPointerType(t)})),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,g.INTERNAL),this.installHandlers("input-manager-logic",[this._latestPointerTypeHandler],g.INTERNAL)}},{key:"_setPointerCapture",value:function(e,t,n,r){var i=e.name+"-"+t.priorityIndex,a=this._pointerCaptures.get(n.pointerId)||new Set;this._pointerCaptures.set(n.pointerId,a),r?(a.add(i),1===a.size&&this.eventSource&&this.eventSource.setPointerCapture(n,!0)):a.has(i)&&(a.delete(i),0===a.size&&(this._pointerCaptures.delete(n.pointerId),this.eventSource&&this.eventSource.setPointerCapture(n,!1)))}},{key:"_garbageCollectRemovedHandlers",value:function(){this._handlers=this._handlers.filter((function(e){return!e.removed})),this.updateDependencies()}},{key:"_emitInputEventFromSource",value:function(e,t,n,r){this._emitInputEvent(0,e,t,n,r)}},{key:"_emitInputEvent",value:function(e,t,n,r,i,a){var o=void 0!==r?r:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),s=void 0!==i&&i,c={event:new m(t,n,o,a||this._activeKeyModifiers,s),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(c):this._doNewPropagation(c)}},{key:"_doNewPropagation",value:function(e){this._currentPropagation={events:new p.a,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}},{key:"_continuePropagation",value:function(){var e=this,t=this._currentPropagation;if(t){for(;this._currentPropagation.events.length>0;){var n=this._currentPropagation.events.pop(),r=n.event,i=n.priorityIndex,a=r.data&&r.data.eventId;if(null==a||!this._stoppedPropagationEventIds.has(a))for(t.currentHandler=this._handlersPriority[i];t.currentHandler;){if(t.currentHandler.removed)t.needsHandlerGarbageCollect=!0;else{if(t.currentHandler.active&&!r.shouldStopPropagation()&&t.currentHandler.eventCallback(r),r.shouldStopPropagation()){null!=a&&this._stoppedPropagationEventIds.add(a);break}if(r.shouldPausePropagation((function(){return e._continuePropagation()})))return void this._pausePropagation({event:r,priorityIndex:t.currentHandler.priorityIndex+1})}t.currentHandler=this._handlersPriority[t.currentHandler.priorityIndex+1]}}t.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null}}},{key:"_pausePropagation",value:function(e){var t=new p.a;for(t.push(e);this._currentPropagation.events.length;)t.push(this._currentPropagation.events.pop());this._currentPropagation.events=t,this._currentPropagation.currentHandler=null}},{key:"_compareHandlerPriority",value:function(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;var n,i=Object(r.a)(e.handler.incomingEventMatches);try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=Object(r.a)(t.handler.incomingEventMatches);try{var c=function(){var e=a.value;if(o.eventType!==e.eventType)return"continue";var t=o.keyModifiers.filter((function(t){return-1!==e.keyModifiers.indexOf(t)}));return t.length===o.keyModifiers.length!==(t.length===e.keyModifiers.length)?{v:o.keyModifiers.length>e.keyModifiers.length?-1:1}:void 0};for(s.s();!(a=s.n()).done;){var l=c();if("continue"!==l&&"object"===typeof l)return l.v}}catch(u){s.e(u)}finally{s.f()}}}catch(u){i.e(u)}finally{i.f()}return e.priorityIndex>t.priorityIndex?-1:1}},{key:"_sortHandlersPriority",value:function(e){var t,n=[],i=Object(r.a)(e);try{for(i.s();!(t=i.n()).done;){for(var a=t.value,o=0;o<n.length&&this._compareHandlerPriority(a,n[o])>=0;)o++;n.splice(o,0,a)}}catch(s){i.e(s)}finally{i.f()}return n}},{key:"debug",get:function(){var e=this,t=function(t){var n=e._setPointerCapture;e._setPointerCapture=function(){},t(),e._setPointerCapture=n};return{injectEvent:function(n,r){t((function(){e._onEventReceived(n,r)}))},disablePointerCapture:t}}}]),n}(f.a);Object(c.a)([Object(u.b)({readOnly:!0})],y.prototype,"hasPendingInputs",null),Object(c.a)([Object(u.b)()],y.prototype,"eventSource",void 0),Object(c.a)([Object(u.b)()],y.prototype,"recognizers",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],y.prototype,"latestPointerType",void 0),y=Object(c.a)([Object(d.a)("esri.views.input.InputManager")],y);var m=function(){function e(t,n,r,a,o){Object(i.a)(this,e),this.type=t,this.data=n,this.timestamp=r,this.modifiers=a,this.cancelable=o,this._propagationState=0,this._resumeCallback=null}return Object(a.a)(e,[{key:"stopPropagation",value:function(){this._propagationState|=1}},{key:"shouldStopPropagation",value:function(){return 0!=(1&this._propagationState)}},{key:"async",value:function(e){var t=this;this._propagationState|=2;var n=function(e,n){t._propagationState&=-3;var r=t._resumeCallback;if(t._resumeCallback=null,r&&r(),n)throw e;return e};return("function"==typeof e?e():e).then((function(e){return n(e,!1)}),(function(e){return n(e,!0)}))}},{key:"shouldPausePropagation",value:function(e){return!!(2&this._propagationState)&&(this._resumeCallback=e,!0)}},{key:"preventDefault",value:function(){this.data.native.preventDefault()}}]),e}(),g={DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(1),i=n(47);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ignoreUnknown:!0},n=e instanceof i.a?e:new i.a(e,t),a={type:null!=t&&t.ignoreUnknown?n.apiValues:String,readOnly:null==t?void 0:t.readOnly,json:{type:n.jsonValues,read:(null==t||!t.readOnly)&&{reader:n.read},write:{writer:n.write}}};return void 0!==(null==t?void 0:t.default)&&(a.json.default=t.default),Object(r.b)(a)}},function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(5),o=n(6),s=n(0),c=n(4),l=n(1),u=n(8),d=n(36),f=n(40),p=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e))._groups=new Map,i}return Object(i.a)(n,[{key:"destroy",value:function(){this.removeAll()}},{key:"size",get:function(){var e=0;return this._groups.forEach((function(t){e+=t.length})),e}},{key:"add",value:function(e,t){var n=this;if(!this._isHandle(e)&&!Array.isArray(e)&&!f.a.isCollection(e))return this;var r=this._getOrCreateGroup(t);return Array.isArray(e)||f.a.isCollection(e)?e.forEach((function(e){return n._isHandle(e)&&r.push(e)})):r.push(e),this.notifyChange("size"),this}},{key:"forEach",value:function(e,t){if("function"==typeof e)this._groups.forEach((function(t){return t.forEach(e)}));else{var n=this._getGroup(e);n&&t&&n.forEach(t)}}},{key:"has",value:function(e){return this._groups.has(this._ensureGroupKey(e))}},{key:"remove",value:function(e){if(Array.isArray(e)||f.a.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;for(var t=this._getGroup(e),n=0;n<t.length;n++)t[n].remove();return this._deleteGroup(e),this.notifyChange("size"),this}},{key:"removeAll",value:function(){return this._groups.forEach((function(e){for(var t=0;t<e.length;t++)e[t].remove()})),this._groups.clear(),this.notifyChange("size"),this}},{key:"_isHandle",value:function(e){return e&&!!e.remove}},{key:"_getOrCreateGroup",value:function(e){if(this.has(e))return this._getGroup(e);var t=[];return this._groups.set(this._ensureGroupKey(e),t),t}},{key:"_getGroup",value:function(e){return Object(c.d)(this._groups.get(this._ensureGroupKey(e)))}},{key:"_deleteGroup",value:function(e){return this._groups.delete(this._ensureGroupKey(e))}},{key:"_ensureGroupKey",value:function(e){return e||"_default_"}}]),n}(d.a);Object(s.a)([Object(l.b)({readOnly:!0})],p.prototype,"size",null);var h=p=Object(s.a)([Object(u.a)("esri.core.Handles")],p);t.a=h},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(581);function i(e){return void 0===e&&(e={}),e.portal?Object(r.a)(e.portal):e.authentication?e.authentication.portal:"https://www.arcgis.com/sharing/rest"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(50);function i(e,t,n){return(i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(r.a)(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return Z})),n.d(t,"b",(function(){return X})),n.d(t,"c",(function(){return k})),n.d(t,"d",(function(){return E})),n.d(t,"e",(function(){return M})),n.d(t,"f",(function(){return O})),n.d(t,"g",(function(){return g})),n.d(t,"h",(function(){return R})),n.d(t,"i",(function(){return N})),n.d(t,"j",(function(){return fe})),n.d(t,"k",(function(){return m})),n.d(t,"l",(function(){return h})),n.d(t,"m",(function(){return v})),n.d(t,"n",(function(){return S})),n.d(t,"o",(function(){return F})),n.d(t,"p",(function(){return D})),n.d(t,"q",(function(){return w})),n.d(t,"r",(function(){return B})),n.d(t,"s",(function(){return ae})),n.d(t,"t",(function(){return _})),n.d(t,"u",(function(){return ne})),n.d(t,"v",(function(){return ee})),n.d(t,"w",(function(){return te})),n.d(t,"x",(function(){return re})),n.d(t,"y",(function(){return j})),n.d(t,"z",(function(){return ie})),n.d(t,"A",(function(){return de}));var r=n(7),i=n.n(r),a=n(15),o=n(14),s=n(100),c=n(4),l=n(18),u=n(154),d=n(138),f=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],p=["field","normalizationField"];function h(e,t){if(null!=e&&null!=t){var n,r=Object(o.a)(Array.isArray(e)?e:[e]);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(b(f,i,t),"visualVariables"in i&&i.visualVariables){var a,s=Object(o.a)(i.visualVariables);try{for(s.s();!(a=s.n()).done;){var c=a.value;b(p,c,t)}}catch(l){s.e(l)}finally{s.f()}}}}catch(l){r.e(l)}finally{r.f()}}}function b(e,t,n){if(e){var r,i=Object(o.a)(e);try{for(i.s();!(r=i.n()).done;){var a=r.value,c=Object(s.b)(a,t),l=c&&"function"!=typeof c&&w(n,c);l&&Object(s.c)(a,l.name,t)}}catch(u){i.e(u)}finally{i.f()}}}function v(e,t){if(null!=e&&null!=t)if("startField"in e){var n=w(t,e.startField),r=w(t,e.endField);e.startField=n&&n.name||null,e.endField=r&&r.name||null}else{var i=w(t,e.startTimeField),a=w(t,e.endTimeField);e.startTimeField=i&&i.name||null,e.endTimeField=a&&a.name||null}}var y=new Set;function m(e,t){return e&&t?(y.clear(),g(y,e,t),Array.from(y).sort()):[]}function g(e,t,n){if(n)if(t&&t.length)if(n.includes("*")){var r,i=Object(o.a)(t);try{for(i.s();!(r=i.n()).done;){var a=r.value.name;e.add(a)}}catch(f){i.e(f)}finally{i.f()}}else{var s,c=Object(o.a)(n);try{for(c.s();!(s=c.n()).done;){O(e,t,s.value)}}catch(f){c.e(f)}finally{c.f()}}else{if(n.includes("*"))return e.clear(),void e.add("*");var l,u=Object(o.a)(n);try{for(u.s();!(l=u.n()).done;){var d=l.value;e.add(d)}}catch(f){u.e(f)}finally{u.f()}}}function O(e,t,n){if(t&&t.length){var r=w(t,n);r&&e.add(r.name)}else"string"==typeof n&&e.add(n)}function j(e,t){return Object(c.j)(t)||Object(c.j)(e)?[]:t.includes("*")?e.map((function(e){return e.name})):t}function w(e,t){if("string"!=typeof t)return null;if(null!=e){t=t.toLowerCase();var n,r=Object(o.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i&&i.name.toLowerCase()===t)return i}}catch(a){r.e(a)}finally{r.f()}}return null}function _(e,t){if(!e||!t||"string"!=typeof t)return!1;t=t.toLowerCase();var n,r=Object(o.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i&&i.name.toLowerCase()===t)return!0}}catch(a){r.e(a)}finally{r.f()}return!1}function k(e,t,n){return x.apply(this,arguments)}function x(){return(x=Object(a.a)(i.a.mark((function e(t,n,r){var a,s,c,l,u,f;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(d.e)();case 4:a=e.sent,s=a.arcadeUtils,c=s.extractFieldNames(r),l=Object(o.a)(c);try{for(l.s();!(u=l.n()).done;)f=u.value,O(t,n,f)}catch(i){l.e(i)}finally{l.f()}case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){var t=e.displayField,n=e.fields;return t||(n&&n.length?T(n,"name-or-title")||T(n,"unique-identifier")||T(n,"type-or-category")||function(e){var t,n=Object(o.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r&&r.name){var i=r.name.toLowerCase();if(i.indexOf("name")>-1||i.indexOf("title")>-1)return r.name}}}catch(a){n.e(a)}finally{n.f()}return null}(n):null)}function T(e,t){var n,r=Object(o.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i&&i.valueType&&i.valueType===t)return i.name}}catch(a){r.e(a)}finally{r.f()}return null}function E(e,t){return C.apply(this,arguments)}function C(){return(C=Object(a.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return r=n.fields,a=Object(s.b)("elevationInfo.featureExpressionInfo",n),e.abrupt("return",a?a.collectRequiredFields(t,r):void 0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t,n){return I.apply(this,arguments)}function I(){return(I=Object(a.a)(i.a.mark((function e(t,n,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.outStatistic.onStatisticValueExpression?k(t,n,r.outStatistic.onStatisticValueExpression):t.add(r.outStatistic.onStatisticField);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t,n){return A.apply(this,arguments)}function A(){return(A=Object(a.a)(i.a.mark((function e(t,n,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&r&&"cluster"===r.type&&r.fields,!e.t0){e.next=4;break}return e.next=4,Promise.all(r.fields.map((function(e){return P(t,n.fields,e)})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t,n){return L.apply(this,arguments)}function L(){return(L=Object(a.a)(i.a.mark((function e(t,r,a){var o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r&&(r.timeInfo&&Object(c.k)(a)&&a.timeExtent&&g(t,r.fields,[r.timeInfo.startField,r.timeInfo.endField]),r.floorInfo&&g(t,r.fields,[r.floorInfo.floorField]),Object(c.k)(a)&&Object(c.k)(a.where)&&a.where&&"1=1"!==a.where))){e.next=7;break}return e.next=3,n.e(6).then(n.bind(null,909));case 3:if((o=e.sent.WhereClause.create(a.where,r.fieldsIndex)).isStandardized){e.next=6;break}throw new l.a("fieldUtils:collectFilterFields","Where clause is not standardized");case 6:g(t,r.fields,o.fieldNames);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){if(!e)return[];var t="editFieldsInfo"in e&&e.editFieldsInfo;return t?m(e.fields,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}function D(e){if(!e)return[];var t=e.geometryFieldsInfo;return t?m(e.fields,[t.shapeAreaField,t.shapeLengthField]):[]}function N(e,t){return V.apply(this,arguments)}function V(){return(V=Object(a.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.labelingInfo,a=n.fields,e.t0=r&&r.length,!e.t0){e.next=5;break}return e.next=5,Promise.all(r.map((function(e){return z(t,a,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e,t,n){return U.apply(this,arguments)}function U(){return(U=Object(a.a)(i.a.mark((function e(t,n,r){var a,o,s,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:if(a=r.getLabelExpression(),o=r.where,"arcade"!==a.type){e.next=8;break}return e.next=6,k(t,n,a.expression);case 6:e.next=10;break;case 8:(s=a.expression.match(/{[^}]*}/g))&&s.forEach((function(e){O(t,n,e.slice(1,-1))}));case 10:c=/['"]+/g,o&&(3===(l=o.split(" ")).length&&O(t,n,l[0].replace(c,"")),7===l.length&&(O(t,n,l[0].replace(c,"")),O(t,n,l[4].replace(c,""))));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){var t=e.defaultValue;return void 0!==t&&K(e,t)?t:e.nullable?null:void 0}function G(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function q(e){return null===e||G(e)}var H="isInteger"in Number?Number.isInteger:function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function W(e){return null===e||H(e)}function $(e){return null!=e&&"string"==typeof e}function J(e){return null===e||$(e)}function Y(){return!0}function K(e,t){var n;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":n=e.nullable?W:H;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":n=e.nullable?q:G;break;case"string":case"esriFieldTypeString":n=e.nullable?J:$;break;default:n=Y}return 1===arguments.length?n:n(t)}var Z,X,Q=new Set([].concat(["integer","small-integer","single","double"],["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]));function ee(e){return null!=e&&Q.has(e.type)}function te(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}function ne(e){return null!=e&&("date"===e.type||"esriFieldTypeDate"===e.type)}function re(e){return null==e||"number"==typeof e&&isNaN(e)?null:e}function ie(e,t){return e.nullable&&null===t?null:ee(e)&&!function(e,t){var n="string"==typeof e?oe(e):e;return!!n&&(n.isInteger?H(t)&&t>=n.min&&t<=n.max:t>=n.min&&t<=n.max)}(e.type,Number(t))?Z.OUT_OF_RANGE:K(e,t)?e.domain?Object(u.e)(e.domain,t):null:X.INVALID_TYPE}function ae(e){return Object(u.c)(e.domain)||(ee(e)?oe(e.type):void 0)}function oe(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return se;case"esriFieldTypeInteger":case"integer":return ce;case"esriFieldTypeSingle":case"single":return le;case"esriFieldTypeDouble":case"double":return ue}}(Z||(Z={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range",function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(X||(X={}));var se={min:-32768,max:32767,isInteger:!0},ce={min:-2147483648,max:2147483647,isInteger:!0},le={min:-34e37,max:12e37,isInteger:!1},ue={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function de(e,t,n){switch(e){case u.a.INVALID_CODED_VALUE:return"Value ".concat(n," is not in the coded domain - field: ").concat(t.name,", domain: ").concat(JSON.stringify(t.domain));case u.a.VALUE_OUT_OF_RANGE:return"Value ".concat(n," is out of the range of valid values - field: ").concat(t.name,", domain: ").concat(JSON.stringify(t.domain));case X.INVALID_TYPE:return"Value ".concat(n," is not a valid value for the field type - field: ").concat(t.name,", type: ").concat(t.type,", nullable: ").concat(t.nullable);case Z.OUT_OF_RANGE:var r=oe(t.type),i=r.min,a=r.max;return"Value ".concat(n," is out of range for the number type - field: ").concat(t.name,", type: ").concat(t.type,", value range is ").concat(i," to ").concat(a)}}function fe(e,t){return!function(e,t,n){if(!t||!t.attributes||!e){if(Object(c.k)(n)){var r,i=Object(o.a)(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;n.add(a)}}catch(p){i.e(p)}finally{i.f()}}return!0}var s,l=t.attributes,u=!1,d=Object(o.a)(e);try{for(d.s();!(s=d.n()).done;){var f=s.value;if(!(f in l)){if(u=!0,!Object(c.k)(n))break;n.add(f)}}}catch(p){d.e(p)}finally{d.f()}return u}(e,t,null)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return y}));var r=n(2),i=n(3),a=n(4),o=n(312),s=n(27),c=n(298),l=n(119),u=n(321),d=n(60),f=n(97),p=function(){function e(t,n,i){var a=this;Object(r.a)(this,e),this.itemByteSize=t,this.itemCreate=n,this.buffers=[],this.items=[],this.itemsPerBuffer=0,this.itemsPtr=0,this.itemsPerBuffer=Math.ceil(i/this.itemByteSize),this.tickHandle=o.a.before((function(){return a.reset()}))}return Object(i.a)(e,[{key:"destroy",value:function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=Object(a.o)(this.tickHandle)),this.itemsPtr=0,this.items=Object(a.o)(this.items),this.buffers=Object(a.o)(this.buffers)}},{key:"get",value:function(){0===this.itemsPtr&&Object(o.a)((function(){}));for(var e=Math.floor(this.itemsPtr/this.itemsPerBuffer);this.buffers.length<=e;){for(var t=new ArrayBuffer(this.itemsPerBuffer*this.itemByteSize),n=0;n<this.itemsPerBuffer;++n)this.items.push(this.itemCreate(t,n*this.itemByteSize));this.buffers.push(t)}return this.items[this.itemsPtr++]}},{key:"reset",value:function(){for(var e=2*(Math.floor(this.itemsPtr/this.itemsPerBuffer)+1);this.buffers.length>e;)this.buffers.pop(),this.items.length=this.buffers.length*this.itemsPerBuffer;this.itemsPtr=0}},{key:"test",get:function(){return{size:this.buffers.length*this.itemsPerBuffer*this.itemByteSize}}}],[{key:"createVec2f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return new e(16,d.c,t)}},{key:"createVec3f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return new e(24,s.c,t)}},{key:"createVec4f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return new e(32,f.e,t)}},{key:"createMat3f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return new e(72,c.b,t)}},{key:"createMat4f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return new e(128,l.d,t)}},{key:"createQuatf64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return new e(32,u.b,t)}}]),e}(),h=4096,b=p.createVec2f64(),v=p.createVec3f64(),y=p.createVec4f64(),m=(p.createMat3f64(),p.createMat4f64()),g=p.createQuatf64()},function(e,t,n){"use strict";n.d(t,"a",(function(){return Oe})),n.d(t,"b",(function(){return ke})),n.d(t,"c",(function(){return we})),n.d(t,"d",(function(){return Ce})),n.d(t,"e",(function(){return Pe})),n.d(t,"f",(function(){return je})),n.d(t,"g",(function(){return Ee})),n.d(t,"h",(function(){return Te})),n.d(t,"i",(function(){return _e}));n(16);var r=n(13),i=n(165);var a,o,s=Function.prototype,c=Object.prototype,l=s.toString,u=c.hasOwnProperty,d=l.call(Object),f=c.toString,p=(a=Object.getPrototypeOf,o=Object,function(e){return a(o(e))});var h=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=f.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}(e))return!1;var t=p(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==d};function b(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}((void 0===t||null===t)&&n.path)}},n.exports),n.exports}function v(){var e={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1};return e}var y=/javascript\s*\:/gim;var m={whiteList:v(),getDefaultWhiteList:v,onAttr:function(e,t,n){},onIgnoreAttr:function(e,t,n){},safeAttrValue:function(e,t){return y.test(t)?"":t}},g=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},O=function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")};var j=function(e,t){";"!==(e=O(e))[e.length-1]&&(e+=";");var n=e.length,r=!1,i=0,a=0,o="";function s(){if(!r){var n=g(e.slice(i,a)),s=n.indexOf(":");if(-1!==s){var c=g(n.slice(0,s)),l=g(n.slice(s+1));if(c){var u=t(i,o.length,c,l,n);u&&(o+=u+"; ")}}}i=a+1}for(;a<n;a++){var c=e[a];if("/"===c&&"*"===e[a+1]){var l=e.indexOf("*/",a+2);if(-1===l)break;i=(a=l+1)+1,r=!1}else"("===c?r=!0:")"===c?r=!1:";"===c?r||s():"\n"===c&&s()}return g(o)};function w(e){return void 0===e||null===e}function _(e){(e=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{})).whiteList=e.whiteList||m.whiteList,e.onAttr=e.onAttr||m.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||m.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||m.safeAttrValue,this.options=e}_.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,n=t.whiteList,r=t.onAttr,i=t.onIgnoreAttr,a=t.safeAttrValue;return j(e,(function(e,t,o,s,c){var l=n[o],u=!1;if(!0===l?u=l:"function"===typeof l?u=l(s):l instanceof RegExp&&(u=l.test(s)),!0!==u&&(u=!1),s=a(o,s)){var d,f={position:t,sourcePosition:e,source:c,isWhite:u};return u?w(d=r(o,s,f))?o+":"+s:d:w(d=i(o,s,f))?void 0:d}}))};var k=_,x=b((function(e,t){for(var n in(t=e.exports=function(e,t){return new k(t).process(e)}).FilterCSS=k,m)t[n]=m[n]})),S=function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},T=function(e,t,n){var r,i;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,i=e.length;r<i;r++)t.call(n,e[r],r,e)},E=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},C=function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1},P=x.FilterCSS,I=x.getDefaultWhiteList;function M(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]}}var A=new P;function R(e){return e.replace(L,"&lt;").replace(F,"&gt;")}var L=/</g,F=/>/g,D=/"/g,N=/&quot;/g,V=/&#([a-zA-Z0-9]*);?/gim,z=/&colon;?/gim,U=/&newline;?/gim,B=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,G=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,q=/u\s*r\s*l\s*\(.*/gi;function H(e){return e.replace(D,"&quot;")}function W(e){return e.replace(N,'"')}function $(e){return e.replace(V,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function J(e){return e.replace(z,":").replace(U," ")}function Y(e){for(var t="",n=0,r=e.length;n<r;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return E(t)}function K(e){return e=Y(e=J(e=$(e=W(e))))}function Z(e){return e=R(e=H(e))}var X=/<!--[\s\S]*?-->/g;var Q={whiteList:{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]},getDefaultWhiteList:M,onTag:function(e,t,n){},onIgnoreTag:function(e,t,n){},onTagAttr:function(e,t,n){},onIgnoreTagAttr:function(e,t,n){},safeAttrValue:function(e,t,n,r){if(n=K(n),"href"===t||"src"===t){if("#"===(n=E(n)))return"#";if("http://"!==n.substr(0,7)&&"https://"!==n.substr(0,8)&&"mailto:"!==n.substr(0,7)&&"tel:"!==n.substr(0,4)&&"data:image/"!==n.substr(0,11)&&"ftp://"!==n.substr(0,6)&&"./"!==n.substr(0,2)&&"../"!==n.substr(0,3)&&"#"!==n[0]&&"/"!==n[0])return""}else if("background"===t){if(B.lastIndex=0,B.test(n))return""}else if("style"===t){if(G.lastIndex=0,G.test(n))return"";if(q.lastIndex=0,q.test(n)&&(B.lastIndex=0,B.test(n)))return"";!1!==r&&(n=(r=r||A).process(n))}return n=Z(n)},escapeHtml:R,escapeQuote:H,unescapeQuote:W,escapeHtmlEntities:$,escapeDangerHtml5Entities:J,clearNonPrintableCharacter:Y,friendlyAttrValue:K,escapeAttrValue:Z,onIgnoreTagStripAll:function(){return""},StripTagBody:function(e,t){"function"!==typeof t&&(t=function(){});var n=!Array.isArray(e),r=[],i=!1;return{onIgnoreTag:function(a,o,s){if(function(t){return!!n||-1!==S(e,t)}(a)){if(s.isClosing){var c="[/removed]",l=s.position+c.length;return r.push([!1!==i?i:s.position,l]),i=!1,c}return i||(i=s.position),"[removed]"}return t(a,o,s)},remove:function(e){var t="",n=0;return T(r,(function(r){t+=e.slice(n,r[0]),n=r[1]})),t+=e.slice(n)}}},stripCommentTag:function(e){return e.replace(X,"")},stripBlankChar:function(e){var t=e.split("");return(t=t.filter((function(e){var t=e.charCodeAt(0);return 127!==t&&(!(t<=31)||(10===t||13===t))}))).join("")},cssFilter:A,getDefaultCSSWhiteList:I};function ee(e){var t=C(e);if(-1===t)var n=e.slice(1,-1);else n=e.slice(1,t+1);return"/"===(n=E(n).toLowerCase()).slice(0,1)&&(n=n.slice(1)),"/"===n.slice(-1)&&(n=n.slice(0,-1)),n}function te(e){return"</"===e.slice(0,2)}var ne=/[^a-zA-Z0-9_:\.\-]/gim;function re(e,t){for(;t<e.length;t++){var n=e[t];if(" "!==n)return"="===n?t:-1}}function ie(e,t){for(;t>0;t--){var n=e[t];if(" "!==n)return"="===n?t:-1}}function ae(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}var oe={parseTag:function(e,t,n){var r="",i=0,a=!1,o=!1,s=0,c=e.length,l="",u="";e:for(s=0;s<c;s++){var d=e.charAt(s);if(!1===a){if("<"===d){a=s;continue}}else if(!1===o){if("<"===d){r+=n(e.slice(i,s)),a=s,i=s;continue}if(">"===d){r+=n(e.slice(i,a)),l=ee(u=e.slice(a,s+1)),r+=t(a,r.length,l,u,te(u)),i=s+1,a=!1;continue}if('"'===d||"'"===d)for(var f=1,p=e.charAt(s-f);" "===p||"="===p;){if("="===p){o=d;continue e}p=e.charAt(s-++f)}}else if(d===o){o=!1;continue}}return i<e.length&&(r+=n(e.substr(i))),r},parseAttr:function(e,t){var n=0,r=[],i=!1,a=e.length;function o(e,n){if(!((e=(e=E(e)).replace(ne,"").toLowerCase()).length<1)){var i=t(e,n||"");i&&r.push(i)}}for(var s=0;s<a;s++){var c,l=e.charAt(s);if(!1!==i||"="!==l)if(!1===i||s!==n||'"'!==l&&"'"!==l||"="!==e.charAt(s-1))if(/\s|\n|\t/.test(l)){if(e=e.replace(/\s|\n|\t/g," "),!1===i){if(-1===(c=re(e,s))){o(E(e.slice(n,s))),i=!1,n=s+1;continue}s=c-1;continue}if(-1===(c=ie(e,s-1))){o(i,ae(E(e.slice(n,s)))),i=!1,n=s+1;continue}}else;else{if(-1===(c=e.indexOf(l,s+1)))break;o(i,E(e.slice(n+1,c))),i=!1,n=(s=c)+1}else i=e.slice(n,s),n=s+1}return n<e.length&&(!1===i?o(e.slice(n)):o(i,ae(E(e.slice(n))))),E(r.join(" "))}},se=x.FilterCSS,ce=oe.parseTag,le=oe.parseAttr;function ue(e){return void 0===e||null===e}function de(e){(e=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Q.onIgnoreTagStripAll),e.whiteList=e.whiteList||Q.whiteList,e.onTag=e.onTag||Q.onTag,e.onTagAttr=e.onTagAttr||Q.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Q.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Q.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Q.safeAttrValue,e.escapeHtml=e.escapeHtml||Q.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new se(e.css))}de.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,n=t.whiteList,r=t.onTag,i=t.onIgnoreTag,a=t.onTagAttr,o=t.onIgnoreTagAttr,s=t.safeAttrValue,c=t.escapeHtml,l=this.cssFilter;t.stripBlankChar&&(e=Q.stripBlankChar(e)),t.allowCommentTag||(e=Q.stripCommentTag(e));var u=!1;if(t.stripIgnoreTagBody){u=Q.StripTagBody(t.stripIgnoreTagBody,i);i=u.onIgnoreTag}var d=ce(e,(function(e,t,u,d,f){var p,h={sourcePosition:e,position:t,isClosing:f,isWhite:n.hasOwnProperty(u)};if(!ue(p=r(u,d,h)))return p;if(h.isWhite){if(h.isClosing)return"</"+u+">";var b=function(e){var t=C(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var n="/"===(e=E(e.slice(t+1,-1)))[e.length-1];return n&&(e=E(e.slice(0,-1))),{html:e,closing:n}}(d),v=n[u],y=le(b.html,(function(e,t){var n,r=-1!==S(v,e);return ue(n=a(u,e,t,r))?r?(t=s(u,e,t,l))?e+'="'+t+'"':e:ue(n=o(u,e,t,r))?void 0:n:n}));d="<"+u;return y&&(d+=" "+y),b.closing&&(d+=" /"),d+=">"}return ue(p=i(u,d,h))?c(d):p}),c);return u&&(d=u.remove(d)),d};var fe,pe,he=de,be=b((function(e,t){function n(e,t){return new he(t).process(e)}for(var r in(t=e.exports=n).filterXSS=n,t.FilterXSS=he,Q)t[r]=Q[r];for(var r in oe)t[r]=oe[r];"undefined"!==typeof self&&"undefined"!==typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)})),ve=function(){function e(e,t){var n,r=this;this.arcgisWhiteList={a:["href","target","style"],img:["src","width","height","border","alt","style"],video:["autoplay","controls","height","loop","muted","poster","preload","width"],audio:["autoplay","controls","loop","muted","preload"],source:["media","src","type"],span:["style"],table:["width","height","cellpadding","cellspacing","border","style"],div:["style","align"],font:["size","color","style"],tr:["height","valign","align","style"],td:["height","width","valign","align","colspan","rowspan","nowrap","style"],th:["height","width","valign","align","colspan","rowspan","nowrap","style"],p:["style"],b:[],strong:[],i:[],em:[],u:[],br:[],li:[],ul:[],ol:[],hr:[],tbody:[]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(e,t,n,i){return"a"===e&&"href"===t||("img"===e||"source"===e)&&"src"===t?r.sanitizeUrl(n):be.safeAttrValue(e,t,n,i)}},e&&!t?n=e:e&&t?(n=Object.create(this.arcgisFilterOptions),Object.keys(e).forEach((function(t){"whiteList"===t?n.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]):n[t]=e[t]}))):(n=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList,this.xssFilterOptions=n,this._xssFilter=new be.FilterXSS(n)}return e.prototype.sanitize=function(e,t){switch(void 0===t&&(t={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,t);default:if(t.allowUndefined&&"undefined"===typeof e)return;return null}},e.prototype.sanitizeUrl=function(e){var t=this._trim(e.substring(0,e.indexOf(":")));return"/"===e||"#"===e||"#"===e[0]||this.allowedProtocols.indexOf(t.toLowerCase())>-1?be.escapeAttrValue(e):""},e.prototype.sanitizeHTMLAttribute=function(e,t,n,r){return"function"===typeof this.xssFilterOptions.safeAttrValue?this.xssFilterOptions.safeAttrValue(e,t,n,r):be.safeAttrValue(e,t,n,r)},e.prototype.validate=function(e,t){void 0===t&&(t={});var n=this.sanitize(e,t);return{isValid:e===n,sanitized:n}},e.prototype._extendObjectOfArrays=function(e){var t={};return e.forEach((function(e){Object.keys(e).forEach((function(n){Array.isArray(e[n])&&Array.isArray(t[n])?t[n]=t[n].concat(e[n]):t[n]=e[n]}))})),t},e.prototype._iterateOverObject=function(e,t){var n=this;void 0===t&&(t={});try{var r=!1,i=void 0;if(Array.isArray(e))i=e.reduce((function(e,i){var a=n.validate(i,t);return a.isValid?e.concat([i]):(r=!0,e.concat([a.sanitized]))}),[]);else{if(!h(e)){if(t.allowUndefined&&"undefined"===typeof e)return;return null}i=Object.keys(e).reduce((function(i,a){var o=e[a],s=n.validate(o,t);return s.isValid?i[a]=o:(r=!0,i[a]=s.sanitized),i}),{})}return r?i:e}catch(a){return null}},e.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},e}(),ye=function(e){fe||function(e){if("WebkitTransition"in e.style)fe="webkitTransitionEnd",pe="webkitAnimationEnd";else{if(!("transition"in e.style))throw new Error("Your browser is not supported!");fe="transitionend",pe="animationend"}}(e)},me=function(e,t){return void 0===t&&(t=e+"-active"),function(n){ye(n);var r=!1,i=function i(a){r||(r=!0,n.removeEventListener(fe,i),n.removeEventListener(pe,i),n.classList.remove(e),n.classList.remove(t))};n.classList.add(e),n.addEventListener(fe,i),n.addEventListener(pe,i),requestAnimationFrame((function(){n.classList.add(t)}))}},ge=function(e,t){return void 0===t&&(t=e+"-active"),function(n,r){ye(n);var i=!1,a=function e(t){i||(i=!0,n.removeEventListener(fe,e),n.removeEventListener(pe,e),r())};n.classList.add(e),n.addEventListener(fe,a),n.addEventListener(pe,a),requestAnimationFrame((function(){n.classList.add(t)}))}};function Oe(e){for(var t=i.a.acquire(),n=0;n<arguments.length;n++){var r=arguments[n],a=typeof r;if("string"===a)t.push(r);else if(Array.isArray(r))t.push.apply(t,r);else if("object"===a)for(var o in r)r[o]&&t.push(o)}var s=t.join(" ");return i.a.release(t),s}function je(){return"rtl"===document.dir}function we(e){this[e.getAttribute("data-node-ref")]=null}function _e(e){this[e.getAttribute("data-node-ref")]=e}function ke(e,t){return("enter"===e?me:ge)(t)}r.a.getLogger("esri.widgets.support.widgetUtils");var xe=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup"].concat(["animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"]).reduce((function(e,t){return e[t]=[],e}),{}),Se=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],Te=new ve({whiteList:xe,onTagAttr:function(e,t,n){var r="".concat(t,'="').concat(n,'"');if(Se.includes(t))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function Ee(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i=n.top+n.height,a=r.top+r.height,o=n.top,s=r.top;(i>a||o<s)&&e.scrollIntoView({block:"end"})}function Ce(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}function Pe(){return Ce().startsWith("dark")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return P})),n.d(t,"b",(function(){return A})),n.d(t,"c",(function(){return L})),n.d(t,"d",(function(){return I})),n.d(t,"e",(function(){return C})),n.d(t,"f",(function(){return M})),n.d(t,"g",(function(){return R})),n.d(t,"h",(function(){return F}));var r=n(246),i=n(11),a=n(55);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;return[e[0],e[1],e[2],e[3]]}function s(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:o();return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}var c=[0,0,1,0],l=(Object.freeze({__proto__:null,create:o,wrap:function(e,t,n,r){return s(e,t,n,r,a.e.get())},wrapAxisAngle:function(e,t){return s(e[0],e[1],e[2],t,a.e.get())},copy:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o();return s(e[0],e[1],e[2],e[3],t)},fromValues:s,fromAxisAndAngle:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o();return Object(i.j)(n,e),n[3]=t,n},fromPoints:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o();return Object(i.f)(n,e,t),Object(i.q)(n,n),n[3]=Object(r.a)(e,t),n},axis:function(e){return e},UP:c}),n(190)),u=n(203),d=n(326),f=n(87),p=n(647),h=n(253),b=n(27),v=n(88),y=n(188),m=n(97),g=n(89);function O(e){return e?[Object(f.c)(e[0]),Object(f.c)(e[1]),Object(f.c)(e[2]),Object(f.c)(e[3]),Object(f.c)(e[4]),Object(f.c)(e[5])]:[Object(f.c)(),Object(f.c)(),Object(f.c)(),Object(f.c)(),Object(f.c)(),Object(f.c)()]}function j(){return[Object(b.e)(),Object(b.e)(),Object(b.e)(),Object(b.e)(),Object(b.e)(),Object(b.e)(),Object(b.e)(),Object(b.e)()]}function w(e,t){Object(f.j)(t[4],t[0],t[3],e[0]),Object(f.j)(t[1],t[5],t[6],e[1]),Object(f.j)(t[4],t[5],t[1],e[2]),Object(f.j)(t[3],t[2],t[6],e[3]),Object(f.j)(t[0],t[1],t[2],e[4]),Object(f.j)(t[5],t[4],t[7],e[5])}function _(e,t){for(var n=0;n<6;n++)if(!Object(f.q)(e[n],t))return!1;return!0}var k=[Object(m.d)(-1,-1,-1,1),Object(m.d)(1,-1,-1,1),Object(m.d)(1,1,-1,1),Object(m.d)(-1,1,-1,1),Object(m.d)(-1,-1,1,1),Object(m.d)(1,-1,1,1),Object(m.d)(1,1,1,1),Object(m.d)(-1,1,1,1)],x=new y.a(h.b),S=j(),T=Object.freeze({__proto__:null,create:O,createPoints:j,copy:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O(),n=0;n<6;n++)Object(f.a)(e[n],t[n])},fromMatrix:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:S,o=Object(v.l)(a.a.get(),t,e);Object(v.a)(o,o);for(var s=0;s<8;++s){var c=Object(g.m)(a.e.get(),k[s],o);Object(i.v)(r[s],c[0]/c[3],c[1]/c[3],c[2]/c[3])}w(n,r)},computePlanes:w,intersectsSphere:function(e,t){for(var n=0;n<6;n++)if(Object(f.k)(e[n],t))return!1;return!0},intersectsRay:function(e,t){return _(e,Object(h.e)(t,x.get()))},intersectClipRay:function(e,t){for(var n=0;n<6;n++){var r=e[n];if(!Object(f.l)(r,t))return!1}return!0},intersectsLineSegment:function(e,t,n){return _(e,Object(h.a)(t,n,x.get()))},intersectsPoint:function(e,t){for(var n=0;n<6;n++)if(Object(f.m)(e[n],t)>0)return!1;return!0},intersectsAABB:function(e,t){for(var n=0;n<6;n++)if(Object(f.o)(e[n],t))return!1;return!0},planePointIndices:{bottom:[5,1,0,4],near:[0,1,2,3],far:[5,4,7,6],right:[1,5,6,2],left:[4,0,3,7],top:[7,3,2,6]}}),E=n(548),C=f.h,P=p.a,I=(E.b,l.d),M=u.g,A=h.c,R=d.d,L=T,F=r.d},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(17),i=n(187),a=Object.prototype.toString;function o(e){var t="__accessorMetadata__"in e?Object(r.m)(e):e;return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.push(t),"number"==typeof n[2])throw new Error("Using @cast has parameter decorator is not supported since 4.16");return s.apply(this,n)}}function s(e,t,n,r){Object(i.b)(e,t).cast=r}function c(e){return function(t,n){Object(i.b)(t,e).cast=t[n]}}function l(){if(3!==arguments.length||"string"!=typeof(arguments.length<=1?void 0:arguments[1]))return 1===arguments.length&&"[object Function]"===a.call(arguments.length<=0?void 0:arguments[0])?o(arguments.length<=0?void 0:arguments[0]):1===arguments.length&&"string"==typeof(arguments.length<=0?void 0:arguments[0])?c(arguments.length<=0?void 0:arguments[0]):void 0}},function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return b})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return g})),n.d(t,"h",(function(){return j})),n.d(t,"i",(function(){return _})),n.d(t,"j",(function(){return v})),n.d(t,"k",(function(){return m})),n.d(t,"l",(function(){return O})),n.d(t,"m",(function(){return y})),n.d(t,"n",(function(){return w}));var r=n(4),i=n(123),a=n(201),o={102113:!0,102100:!0,3857:!0,3785:!0},s={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0},c='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',l=[-20037508.342788905,20037508.342788905],u=[-20037508.342787,20037508.342787],d={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:l,origin:u,dx:1e-5},102100:{wkTemplate:c,valid:l,origin:u,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:l,origin:u,dx:1e-5},3857:{wkTemplate:c,valid:l,origin:u,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function f(e,t){return!Object(r.j)(e)&&!Object(r.j)(t)&&(e===t||(null!=e.wkid||null!=t.wkid?e.wkid===t.wkid||y(e)&&y(t)||null!=t.latestWkid&&e.wkid===t.latestWkid||null!=e.latestWkid&&t.wkid===e.latestWkid:!(!e.wkt||!t.wkt)&&e.wkt.toUpperCase()===t.wkt.toUpperCase()))}function p(e){return _(e)&&e.wkid?d[e.wkid]:null}function h(e){return!!_(e)&&(e.wkid?null==a.a[e.wkid]:!!e.wkt&&!!/^\s*GEOGCS/i.test(e.wkt))}function b(e){return!(g(e)||j(e))}function v(e){return _(e)&&4326===e.wkid}function y(e){return _(e)&&null!=e.wkid&&!0===o[e.wkid]}function m(e){return 104971===e||104905===e}function g(e){return _(e)&&null!=e.wkid&&m(e.wkid)}function O(e){return 104903===e}function j(e){return _(e)&&null!=e.wkid&&O(e.wkid)}function w(e){return _(e)&&null!=e.wkid&&!0===s[e.wkid]}function _(e){return Object(r.k)(e)&&(null!=e.wkid&&e.wkid>=2e3||null!=e.wkt)}var k={wkid:4326,wkt:Object(i.c)(d[4326].wkTemplate,{Central_Meridian:"0.0"})},x={wkid:102100,latestWkid:3857}},function(e,t,n){"use strict";function r(){return[0,0]}function i(e){return[e[0],e[1]]}function a(e,t){return[e,t]}function o(e){for(var t=[0,0],n=Math.min(2,e.length),r=0;r<n;++r)t[r]=e[r];return t}function s(e,t){return new Float64Array(e,t,2)}function c(){return[0,0]}function l(){return a(1,1)}function u(){return a(1,0)}function d(){return a(0,1)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return a}));var f=[0,0],p=l(),h=u(),b=d();Object.freeze({__proto__:null,create:r,clone:i,fromValues:a,fromArray:o,createView:s,zeros:c,ones:l,unitX:u,unitY:d,ZEROS:f,ONES:p,UNIT_X:h,UNIT_Y:b})},function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return O})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return m})),n.d(t,"h",(function(){return d}));var r=n(31),i=n(22),a=n(59),o=n(44),s=n(79);function c(e){return 57.29577951308232*e}function l(e){return.017453292519943*e}function u(e){return e/s.a.radius}function d(e){return Math.PI/2-2*Math.atan(Math.exp(-1*e/s.a.radius))}function f(e){return null!=e.wkid||null!=e.wkt}var p=[0,0];function h(e,t,n,i,a){var o,s,c,l,u=e,d=a;if(d.spatialReference=n,"x"in u&&"x"in d){var f=t(u.x,u.y,p,i),h=Object(r.a)(f,2);d.x=h[0],d.y=h[1]}else if("xmin"in u&&"xmin"in d)o=t(u.xmin,u.ymin,p,i),s=Object(r.a)(o,2),d.xmin=s[0],d.ymin=s[1],c=t(u.xmax,u.ymax,p,i),l=Object(r.a)(c,2),d.xmax=l[0],d.ymax=l[1];else if("paths"in u&&"paths"in d||"rings"in u&&"rings"in d){for(var b,v=("paths"in u?u.paths:u.rings),y=[],m=0;m<v.length;m++){var g=v[m];b=[],y.push(b);for(var O=0;O<g.length;O++)b.push(t(g[O][0],g[O][1],[0,0],i)),g[O].length>2&&b[O].push(g[O][2]),g[O].length>3&&b[O].push(g[O][3])}"paths"in d?d.paths=y:d.rings=y}else if("points"in u&&"points"in d){for(var j=u.points,w=[],_=0;_<j.length;_++)w[_]=t(j[_][0],j[_][1],[0,0],i),j[_].length>2&&w[_].push(j[_][2]),j[_].length>3&&w[_].push(j[_][3]);d.points=w}return a}function b(e,t){var n=e&&(f(e)?e:e.spatialReference),r=t&&(f(t)?t:t.spatialReference);return!(e&&"type"in e&&"mesh"===e.type||t&&"type"in t&&"mesh"===t.type||!n||!r)&&(!!Object(a.c)(r,n)||Object(a.m)(r)&&Object(a.j)(n)||Object(a.m)(n)&&Object(a.j)(r))}function v(e,t){var n=e&&e.spatialReference,r=t&&(f(t)?t:t.spatialReference);return b(n,r)?Object(a.c)(n,r)?Object(i.a)(e):Object(a.m)(r)?h(e,y,o.a.WebMercator,!1,Object(i.a)(e)):Object(a.j)(r)?h(e,m,o.a.WGS84,!1,Object(i.a)(e)):null:null}function y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0];t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);var r=l(t);return n[0]=l(e)*s.a.radius,n[1]=s.a.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),n}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=c(e/s.a.radius);return n[0]=r?i:i-360*Math.floor((i+180)/360),n[1]=c(Math.PI/2-2*Math.atan(Math.exp(-1*t/s.a.radius))),n}function g(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object(i.a)(e);return h(e,y,o.a.WebMercator,t,n)}function O(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object(i.a)(e);return h(e,m,o.a.WGS84,t,n)}},function(e,t,n){"use strict";n.r(t);var r=n(31),i=n(7),a=n.n(i),o=n(10),s=n(14),c=n(15),l=n(65),u=n(16),d=n(22),f=n(98),p=n(4),h=n(18),b=n(12),v=n(24),y=n(115),m=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function g(e){var t=Object(b.m)(e,!0);return t&&t.endsWith(".arcgis.com")&&!m.includes(t)&&!e.endsWith("/sharing/rest/generateToken")}var O,j=n(525);function w(e,t){return _.apply(this,arguments)}function _(){return(_=Object(c.a)(a.a.mark((function e(t,n){var r,i,s,c,l,d,f,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Object(b.u)(t),(i=Object(b.t)(t))||r||(t=Object(b.C)(t)),s={url:t,requestOptions:Object(o.a)({},Object(p.q)(n))},!(c=Object(b.l)(t))){e.next=11;break}return e.next=7,B(c,s);case 7:if(null==(l=e.sent)){e.next=10;break}return e.abrupt("return",{data:l,getHeader:C,requestOptions:s.requestOptions,url:s.url});case 10:c.after||c.error||(c=null);case 11:if(t=s.url,"image"!==(n=s.requestOptions).responseType){e.next=16;break}if(!Object(u.a)("host-webworker")&&!Object(u.a)("host-node")){e.next=14;break}throw M("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),s);case 14:e.next=18;break;case 16:if(!r){e.next=18;break}throw M("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+n.responseType),s);case 18:if("head"!==n.method){e.next=23;break}if(!n.body){e.next=21;break}throw M("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),s);case 21:if(!r&&!i){e.next=23;break}throw M("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),s);case 23:return e.next=25,A();case 25:if(!O){e.next=27;break}return e.abrupt("return",O.execute(t,n));case 27:return d=Object(v.d)(),Object(v.p)(n,(function(){return d.abort()})),f={controller:d,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:c,params:s,redoRequest:!1,useIdentity:k.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},e.next=32,W(f);case 32:return h=e.sent,e.abrupt("return",(c&&c.after&&c.after(h),h));case 34:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=f.a.request,x="FormData"in l.a,S=[499,498,403,401],T=["COM_0056","COM_0057","SB_0008"],E=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],C=function(){return null};function P(e){if(!Object(b.t)(e)&&!Object(b.u)(e)){var t=Object(b.m)(e);t&&-1===w._corsServers.indexOf(t)&&w._corsServers.push(t)}}function I(e){var t=Object(b.m)(e);return!t||t.endsWith(".arcgis.com")||-1!==w._corsServers.indexOf(t)||Object(b.x)(t)}function M(e,t,n,r){var i="Error",a={url:n.url,requestOptions:n.requestOptions,getHeader:C,ssl:!1};if(t instanceof h.a)return t.details?(t.details=Object(d.a)(t.details),t.details.url=n.url,t.details.requestOptions=n.requestOptions):t.details=a,t;if(t){var o=r&&function(e){return r.headers.get(e)},s=r&&r.status,c=t.message;c&&(i=c),o&&(a.getHeader=o),a.httpStatus=(null!=t.httpCode?t.httpCode:t.code)||s||0,a.subCode=t.subcode,a.messageCode=t.messageCode,"string"==typeof t.details?a.messages=[t.details]:a.messages=t.details}return Object(v.m)(t)?Object(v.e)():new h.a(e,i,a)}function A(){return R.apply(this,arguments)}function R(){return(R=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(u.a)("host-webworker")){e.next=8;break}if(e.t0=O,e.t0){e.next=6;break}return e.next=5,n.e(191).then(n.bind(null,1341));case 5:O=e.sent;case 6:e.next=9;break;case 8:w._abortableFetch||(w._abortableFetch=l.a.fetch.bind(l.a));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return F.apply(this,arguments)}function F(){return(F=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=y.b,e.t0){e.next=4;break}return e.next=4,n.e(193).then(n.bind(null,1442));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return N.apply(this,arguments)}function N(){return(N=Object(c.a)(a.a.mark((function e(t){var n,r,i,o,s,c,u,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.params.url,r=t.params.requestOptions,i=t.controller.signal,o=r.body,s=null,c=null,u=null,x&&"HTMLFormElement"in l.a&&(o instanceof FormData?s=o:o instanceof HTMLFormElement&&(c=o,s=new FormData(c))),"string"==typeof o&&(u=o),t.fetchOptions={cache:r.cacheBust&&!w._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:"head"===r.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:i},(s||u)&&(t.fetchOptions.body=s||u),"anonymous"===r.authMode&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(n)||r.query&&r.query.token||s&&s.get&&s.get("token")||c&&c.elements.token),!t.hasToken&&f.a.apiKey&&g(n)&&(r.query||(r.query={}),r.query.token=f.a.apiKey,t.hasToken=!0),!t.useIdentity||t.hasToken||t.credentialToken||V(n)||Object(v.n)(i)){e.next=23;break}if("immediate"!==r.authMode){e.next=12;break}return e.next=6,L();case 6:return e.next=8,y.b.getCredential(n,{signal:i});case 8:d=e.sent,t.credential=d,e.next=22;break;case 12:if("no-prompt"!==r.authMode){e.next=21;break}return e.next=15,L();case 15:return e.next=17,y.b.getCredential(n,{prompt:!1,signal:i}).catch((function(){}));case 17:d=e.sent,t.credential=d,e.next=22;break;case 21:y.b&&(d=y.b.findCredential(n));case 22:d&&(t.credentialToken=d.token,t.useSSL=!!d.ssl);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return E.some((function(t){return t.test(e)}))}function z(e){return U.apply(this,arguments)}function U(){return(U=Object(c.a)(a.a.mark((function e(t){var n,r,i,s,c,l,d,f,p,h,m,g,O,j,_,S,T,E,C,A,R;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.params.url,r=t.params.requestOptions,i=t.fetchOptions,s=Object(b.t)(n)||Object(b.u)(n),c=r.responseType||"json",l=s?0:null!=r.timeout?r.timeout:k.timeout,d=!1,s){e.next=23;break}if(t.useSSL&&(n=Object(b.I)(n)),r.cacheBust&&"default"===i.cache&&(n=Object(b.d)(n,"request.preventCache",Date.now())),f=Object(o.a)({},r.query),t.credentialToken&&(f.token=t.credentialToken),p=Object(b.D)(f),Object(u.a)("esri-url-encodes-apostrophe")&&(p=p.replace(/'/g,"%27")),h=n.length+1+p.length,d="delete"===r.method||"post"===r.method||"put"===r.method||!!r.body||h>k.maxUrlLength,(g=r.useProxy||!!Object(b.o)(n))&&(O=Object(b.p)(n),m=O.path,!d&&m.length+1+h>k.maxUrlLength&&(d=!0),O.query&&(f=Object(o.a)(Object(o.a)({},O.query),f))),"HEAD"!==i.method||!d&&!g){e.next=20;break}if(!d){e.next=18;break}if(!(h>k.maxUrlLength)){e.next=17;break}throw M("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params);case 17:throw M("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);case 18:if(!g){e.next=20;break}throw M("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params);case 20:d?(i.method="delete"===r.method?"DELETE":"put"===r.method?"PUT":"POST",r.body?n=Object(b.e)(n,f):(i.body=Object(b.D)(f),i.headers["Content-Type"]="application/x-www-form-urlencoded")):n=Object(b.e)(n,f),g&&(t.useProxy=!0,n="".concat(m,"?").concat(n)),f.token&&x&&i.body instanceof FormData&&((j=i.body).set?j.set("token",f.token):j.append("token",f.token)),r.hasOwnProperty("withCredentials")?t.withCredentials=r.withCredentials:Object(b.q)(n,b.g)||(Object(b.x)(n)||y.b&&(_=y.b.findServerInfo(n))&&_.webTierAuth)&&(t.withCredentials=!0),t.withCredentials&&(i.credentials="include");case 23:if(E=0,C=!1,l>0&&(E=setTimeout((function(){C=!0,t.controller.abort()}),l)),e.prev=25,"image"===r.responseType&&"default"===i.cache&&"GET"===i.method&&!d&&!q(r.headers)&&(s||t.useProxy||!k.proxyUrl||I(n))){e.next=79;break}return e.next=29,w._abortableFetch(n,i);case 29:if(S=e.sent,t.useProxy||P(n),!S.ok||"HEAD"===i.method){e.next=77;break}e.t0=c,e.next="array-buffer"===e.t0?35:"blob"===e.t0||"image"===e.t0?39:43;break;case 35:return e.next=37,S.arrayBuffer();case 37:return T=e.sent,e.abrupt("break",46);case 39:return e.next=41,S.blob();case 41:return T=e.sent,e.abrupt("break",46);case 43:return e.next=45,S.text();case 45:T=e.sent;case 46:if(E&&(clearTimeout(E),E=0),"json"!==c&&"xml"!==c&&"document"!==c){e.next=59;break}if(!T){e.next=58;break}e.t1=c,e.next="json"===e.t1?51:"xml"===e.t1?53:"document"===e.t1?55:56;break;case 51:return T=JSON.parse(T),e.abrupt("break",56);case 53:return T=H(T,"application/xml"),e.abrupt("break",56);case 55:T=H(T,"text/html");case 56:e.next=59;break;case 58:T=null;case 59:if(!T){e.next=77;break}if("array-buffer"!==c&&"blob"!==c){e.next=72;break}if(A=S.headers.get("Content-Type"),!(/application\/json|text\/plain/i.test(A)&&T["blob"===c?"size":"byteLength"]<=750)){e.next=72;break}return e.prev=63,e.next=66,new Response(T).json();case 66:(R=e.sent).error&&(T=R),e.next=72;break;case 70:e.prev=70,e.t2=e.catch(63);case 72:if(e.t3="image"===c&&T instanceof Blob,!e.t3){e.next=77;break}return e.next=76,K(URL.createObjectURL(T),t,!0);case 76:T=e.sent;case 77:e.next=82;break;case 79:return e.next=81,K(n,t);case 81:T=e.sent;case 82:e.next=93;break;case 84:if(e.prev=84,e.t4=e.catch(25),"AbortError"!==e.t4.name){e.next=90;break}if(!C){e.next=89;break}throw new Error("Timeout exceeded");case 89:throw Object(v.e)("Request canceled");case 90:if(!S&&e.t4 instanceof TypeError&&k.proxyUrl&&!r.body&&"delete"!==r.method&&"head"!==r.method&&"post"!==r.method&&"put"!==r.method&&!t.useProxy){e.next=92;break}throw e.t4;case 92:t.redoRequest=!0,Object(b.c)({proxyUrl:k.proxyUrl,urlPrefix:Object(b.F)(Object(b.J)(n).path)});case 93:return e.prev=93,E&&clearTimeout(E),e.finish(93);case 96:return e.abrupt("return",[S,T]);case 97:case"end":return e.stop()}}),e,null,[[25,84,93,96],[63,70]])})))).apply(this,arguments)}function B(e,t){return G.apply(this,arguments)}function G(){return(G=Object(c.a)(a.a.mark((function e(t,n){var r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.responseData){e.next=2;break}return e.abrupt("return",t.responseData);case 2:if(t.headers&&(n.requestOptions.headers=Object(o.a)(Object(o.a)({},n.requestOptions.headers),t.headers)),t.query&&(n.requestOptions.query=Object(o.a)(Object(o.a)({},n.requestOptions.query),t.query)),!t.before){e.next=15;break}return e.prev=3,e.next=6,t.before(n);case 6:i=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),r=M("request:interceptor",e.t0,n);case 12:if((i instanceof Error||i instanceof h.a)&&(r=M("request:interceptor",i,n)),!r){e.next=14;break}throw t.error&&t.error(r),r;case 14:return e.abrupt("return",i);case 15:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function q(e){if(e){var t,n=Object(s.a)(Object.getOwnPropertyNames(e));try{for(n.s();!(t=n.n()).done;){if(e[t.value])return!0}}catch(r){n.e(r)}finally{n.f()}}return!1}function H(e,t){var n;try{n=(new DOMParser).parseFromString(e,t)}catch(r){}if(!n||n.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return n}function W(e){return $.apply(this,arguments)}function $(){return($=Object(c.a)(a.a.mark((function e(t){var n,i,o,s,c,l,u,d,f,p,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t);case 2:e.prev=2;case 3:return e.next=5,z(t);case 5:o=e.sent,s=Object(r.a)(o,2),n=s[0],i=s[1];case 9:return e.next=11,J(t,n,i);case 11:if(!e.sent){e.next=3;break}case 12:e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(2),(c=M("request:server",e.t0,t.params,n)).details.ssl=t.useSSL,t.interceptor&&t.interceptor.error&&t.interceptor.error(c),c;case 18:return l=t.params.url,/\/sharing\/rest\/(accounts|portals)\/self/i.test(l)&&!t.hasToken&&!t.credentialToken&&i&&i.user&&i.user.username&&!Object(b.x)(l)&&(u=Object(b.m)(l,!0))&&k.trustedServers.push(u),(d=t.credential)&&y.b&&(f=y.b.findServerInfo(d.server),(p=f&&f.owningSystemUrl)&&(p=p.replace(/\/?$/,"/sharing"),(h=y.b.findCredential(p,d.userId))&&-1===y.b._getIdenticalSvcIdx(p,h)&&h.resources.unshift(p))),e.abrupt("return",{data:i,getHeader:n?function(e){return n.headers.get(e)}:C,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url});case 23:case"end":return e.stop()}}),e,null,[[2,14]])})))).apply(this,arguments)}function J(e,t,n){return Y.apply(this,arguments)}function Y(){return(Y=Object(c.a)(a.a.mark((function e(t,n,r){var i,o,s,c,l,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.redoRequest){e.next=2;break}return e.abrupt("return",(t.redoRequest=!1,!1));case 2:if(n){e.next=4;break}return e.abrupt("return",!0);case 4:if(n.ok){e.next=6;break}throw new Error("Unable to load ".concat(n.url," status: ").concat(n.status));case 6:if(r&&r.error&&(i=Object.assign(new Error,r.error)),i&&(o=Number(i.code),s=i.hasOwnProperty("subcode")?Number(i.subcode):null,c=(c=i.messageCode)&&c.toUpperCase()),l=t.params.requestOptions.authMode,403!==o||!(4===s||i.message&&i.message.toLowerCase().indexOf("ssl")>-1&&-1===i.message.toLowerCase().indexOf("permission"))){e.next=13;break}if(t.useSSL){e.next=11;break}return e.abrupt("return",(t.useSSL=!0,!1));case 11:e.next=28;break;case 13:if(t.hasToken||!t.useIdentity||"no-prompt"===l&&498!==o||-1===S.indexOf(o)||V(t.params.url)||!(403!==o||-1===T.indexOf(c)&&(null==s||2===s&&t.credentialToken))){e.next=28;break}return e.next=16,L();case 16:return e.prev=16,e.next=19,y.b.getCredential(t.params.url,{error:M("request:server",i,t.params),prompt:"no-prompt"!==l,signal:t.controller.signal,token:t.credentialToken});case 19:return u=e.sent,e.abrupt("return",(t.credential=u,t.credentialToken=u.token,t.useSSL=t.useSSL||u.ssl,!1));case 23:if(e.prev=23,e.t0=e.catch(16),"no-prompt"!==l){e.next=27;break}return e.abrupt("return",(t.credential=null,t.credentialToken=null,!1));case 27:i=e.t0;case 28:if(!i){e.next=30;break}throw i;case 30:return e.abrupt("return",!0);case 31:case"end":return e.stop()}}),e,null,[[16,23]])})))).apply(this,arguments)}function K(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.controller.signal,i=new Image;return t.withCredentials?i.crossOrigin="use-credentials":i.crossOrigin="anonymous",i.alt="",i.src=e,Object(j.a)(i,e,n,r)}w._abortableFetch=null,w._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];t.default=w},function(e,t,n){"use strict";var r,i=n(31),a=n(2),o=n(3),s=n(5),c=n(6),l=n(0),u=(n(16),n(4)),d=n(123),f=(n(13),n(17),n(1)),p=n(8),h=(n(12),n(19),n(20),n(59)),b=n(44),v=n(150),y=n(61),m=n(43),g=n(153),O=n(467);function j(e,t,n){return null==t?n:null==n?t:e(t,n)}var w=r=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).type="extent",e.xmin=0,e.ymin=0,e.mmin=void 0,e.zmin=void 0,e.xmax=0,e.ymax=0,e.mmax=void 0,e.zmax=void 0,e}return Object(o.a)(n,[{key:"normalizeCtorArgs",value:function(e,t,n,r,i){return function(e){return e&&("esri.geometry.SpatialReference"===e.declaredClass||null!=e.wkid)}(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:"object"==typeof e?(e.spatialReference=null==e.spatialReference?b.a.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:n,ymax:r,spatialReference:null==i?b.a.WGS84:i}}},{key:"cache",get:function(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}},{key:"center",get:function(){var e=new m.a({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}},{key:"extent",get:function(){return this.clone()}},{key:"hasM",get:function(){return null!=this.mmin&&null!=this.mmax}},{key:"hasZ",get:function(){return null!=this.zmin&&null!=this.zmax}},{key:"height",get:function(){return Math.abs(this.ymax-this.ymin)}},{key:"width",get:function(){return Math.abs(this.xmax-this.xmin)}},{key:"centerAt",value:function(e){var t=this.center;return null!=e.z&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}},{key:"clone",value:function(){var e=new r;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,null!=this.zmin&&(e.zmin=this.zmin,e.zmax=this.zmax),null!=this.mmin&&(e.mmin=this.mmin,e.mmax=this.mmax),e}},{key:"contains",value:function(e){if(!e)return!1;var t=this.spatialReference,n=e.spatialReference;return t&&n&&!t.equals(n)&&Object(y.a)(t,n)&&(e=t.isWebMercator?Object(y.b)(e):Object(y.e)(e,!0)),"point"===e.type?Object(g.e)(this,e):"extent"===e.type&&Object(g.c)(this,e)}},{key:"equals",value:function(e){if(!e)return!1;var t=this.spatialReference,n=e.spatialReference;return t&&n&&!t.equals(n)&&Object(y.a)(t,n)&&(e=t.isWebMercator?Object(y.b)(e):Object(y.e)(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}},{key:"expand",value:function(e){var t=.5*(1-e),n=this.width*t,r=this.height*t;if(this.xmin+=n,this.ymin+=r,this.xmax-=n,this.ymax-=r,this.hasZ){var i=(this.zmax-this.zmin)*t;this.zmin+=i,this.zmax-=i}if(this.hasM){var a=(this.mmax-this.mmin)*t;this.mmin+=a,this.mmax-=a}return this}},{key:"intersects",value:function(e){if(Object(u.j)(e))return!1;"mesh"===e.type&&(e=e.extent);var t=this.spatialReference,n=e.spatialReference;return t&&n&&!t.equals(n)&&Object(y.a)(t,n)&&(e=t.isWebMercator?Object(y.b)(e):Object(y.e)(e,!0)),Object(O.b)(e.type)(this,e)}},{key:"normalize",value:function(){var e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}},{key:"offset",value:function(e,t,n){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,null!=n&&(this.zmin+=n,this.zmax+=n),this}},{key:"shiftCentralMeridian",value:function(){return this._normalize(!0)}},{key:"union",value:function(e){return this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=j(Math.min,this.zmin,e.zmin),this.zmax=j(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=j(Math.min,this.mmin,e.mmin),this.mmax=j(Math.max,this.mmax,e.mmax)),this}},{key:"intersection",value:function(e){return this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=j(Math.max,this.zmin,e.zmin),this.zmax=j(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=j(Math.max,this.mmin,e.mmin),this.mmax=j(Math.min,this.mmax,e.mmax)),this):null}},{key:"toJSON",value:function(e){return this.write(null,e)}},{key:"_shiftCM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(h.d)(this.spatialReference);if(!e||!this.spatialReference)return this;var t=this.spatialReference,n=this._getCM(e);if(n){var r=t.isWebMercator?Object(y.e)(n):n;this.xmin-=n.x,this.xmax-=n.x,t.isWebMercator||(r.x=this._normalizeX(r.x,e).x),this.spatialReference=new b.a(Object(d.c)(t.isWGS84?e.altTemplate:e.wkTemplate,{Central_Meridian:r.x}))}return this}},{key:"_getCM",value:function(e){var t=null,n=Object(i.a)(e.valid,2),r=n[0],a=n[1],o=this.xmin,s=this.xmax;return o>=r&&o<=a&&s>=r&&s<=a||(t=this.center),t}},{key:"_normalize",value:function(e,t,n){var r=this.spatialReference;if(!r)return this;if(!(n=n||Object(h.d)(r)))return this;var i=this._getParts(n).map((function(e){return e.extent}));if(i.length<2)return i[0]||this;if(i.length>2)return e?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(e)return this._shiftCM(n);if(t)return i;var a=!0,o=!0;return i.forEach((function(e){e.hasZ||(a=!1),e.hasM||(o=!1)})),{rings:i.map((function(e){var t=[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]];if(a)for(var n=(e.zmax-e.zmin)/2,r=0;r<t.length;r++)t[r].push(n);if(o)for(var i=(e.mmax-e.mmin)/2,s=0;s<t.length;s++)t[s].push(i);return t})),hasZ:a,hasM:o,spatialReference:r}}},{key:"_getParts",value:function(e){var t=this.cache._parts;if(!t){t=[];var n,a=this.ymin,o=this.ymax,s=this.spatialReference,c=this.width,l=this.xmin,u=this.xmax;e=e||Object(h.d)(s);var d=Object(i.a)(e.valid,2),f=d[0],p=d[1],b=(n=this._normalizeX(this.xmin,e)).x,v=n.frameId,y=(n=this._normalizeX(this.xmax,e)).x,m=n.frameId,g=b===y&&c>0;if(c>2*p){var O=new r(l<u?b:y,a,p,o,s),j=new r(f,a,l<u?y:b,o,s),w=new r(0,a,p,o,s),_=new r(f,a,0,o,s),k=[],x=[];O.contains(w)&&k.push(v),O.contains(_)&&x.push(v),j.contains(w)&&k.push(m),j.contains(_)&&x.push(m);for(var S=v+1;S<m;S++)k.push(S),x.push(S);t.push({extent:O,frameIds:[v]},{extent:j,frameIds:[m]},{extent:w,frameIds:k},{extent:_,frameIds:x})}else b>y||g?t.push({extent:new r(b,a,p,o,s),frameIds:[v]},{extent:new r(f,a,y,o,s),frameIds:[m]}):t.push({extent:new r(b,a,y,o,s),frameIds:[v]});this.cache._parts=t}var T=this.hasZ,E=this.hasM;if(T||E){var C={};T&&(C.zmin=this.zmin,C.zmax=this.zmax),E&&(C.mmin=this.mmin,C.mmax=this.mmax);for(var P=0;P<t.length;P++)t[P].extent.set(C)}return t}},{key:"_normalizeX",value:function(e,t){var n,r=Object(i.a)(t.valid,2),a=r[0],o=r[1],s=2*o,c=0;return e>o?(e-=(n=Math.ceil(Math.abs(e-o)/s))*s,c=n):e<a&&(e+=(n=Math.ceil(Math.abs(e-a)/s))*s,c=-n),{x:e,frameId:c}}}],[{key:"fromBounds",value:function(e,t){return new r({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}}]),n}(v.a);Object(l.a)([Object(f.b)({readOnly:!0})],w.prototype,"cache",null),Object(l.a)([Object(f.b)({readOnly:!0})],w.prototype,"center",null),Object(l.a)([Object(f.b)({readOnly:!0})],w.prototype,"extent",null),Object(l.a)([Object(f.b)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],w.prototype,"hasM",null),Object(l.a)([Object(f.b)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],w.prototype,"hasZ",null),Object(l.a)([Object(f.b)({readOnly:!0})],w.prototype,"height",null),Object(l.a)([Object(f.b)({readOnly:!0})],w.prototype,"width",null),Object(l.a)([Object(f.b)({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],w.prototype,"xmin",void 0),Object(l.a)([Object(f.b)({type:Number,json:{write:!0}})],w.prototype,"ymin",void 0),Object(l.a)([Object(f.b)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],w.prototype,"mmin",void 0),Object(l.a)([Object(f.b)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],w.prototype,"zmin",void 0),Object(l.a)([Object(f.b)({type:Number,json:{write:!0}})],w.prototype,"xmax",void 0),Object(l.a)([Object(f.b)({type:Number,json:{write:!0}})],w.prototype,"ymax",void 0),Object(l.a)([Object(f.b)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],w.prototype,"mmax",void 0),Object(l.a)([Object(f.b)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],w.prototype,"zmax",void 0),(w=r=Object(l.a)([Object(p.a)("esri.geometry.Extent")],w)).prototype.toJSON.isDefaultToJSON=!0;var _=w;t.a=_},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return s}));var r=1e-6,i=Math.random,a=Math.PI/180,o=180/Math.PI;function s(e){return e*a}function c(e){return e*o}Object.freeze({__proto__:null,EPSILON:r,RANDOM:i,toRadian:s,toDegree:c,equals:function(e,t){return Math.abs(e-t)<=r*Math.max(1,Math.abs(e),Math.abs(t))}})},function(e,t,n){"use strict";(function(e){var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof e?e:void 0;t.a=n}).call(this,n(433))},function(e,t,n){"use strict";n.d(t,"a",(function(){return V})),n.d(t,"b",(function(){return _})),n.d(t,"c",(function(){return L})),n.d(t,"d",(function(){return R})),n.d(t,"e",(function(){return M})),n.d(t,"f",(function(){return F})),n.d(t,"g",(function(){return A})),n.d(t,"h",(function(){return u})),n.d(t,"i",(function(){return P})),n.d(t,"j",(function(){return z})),n.d(t,"k",(function(){return C})),n.d(t,"l",(function(){return S})),n.d(t,"m",(function(){return T})),n.d(t,"n",(function(){return E})),n.d(t,"o",(function(){return k})),n.d(t,"p",(function(){return x})),n.d(t,"q",(function(){return I}));var r=n(10),i=(n(16),n(47)),a=n(201),o=n(59),s=n(44),c=n(79),l=n(245),u=39.37,d=c.a.radius*Math.PI/200,f=/UNIT\[([^\]]+)\]\]$/i,p=a.a,h=/UNIT\[([^\]]+)\]/i,b=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),v=Object(i.b)()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),y=function(e){return e*e},m=function(e){return e*e*e},g={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:y(.001)},"square-centimeters":{inBaseUnits:y(.01)},"square-decimeters":{inBaseUnits:y(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:y(1e3)},"square-inches":{inBaseUnits:y(.0254)},"square-feet":{inBaseUnits:y(.3048)},"square-yards":{inBaseUnits:y(.9144)},"square-miles":{inBaseUnits:y(1609.344)},"square-us-feet":{inBaseUnits:y(1200/3937)},acres:{inBaseUnits:.0015625*y(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*m(.001)},"cubic-centimeters":{inBaseUnits:1e3*m(.01)},"cubic-decimeters":{inBaseUnits:1e3*m(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*m(1e3)},"cubic-inches":{inBaseUnits:1e3*m(.0254)},"cubic-feet":{inBaseUnits:1e3*m(.3048)},"cubic-yards":{inBaseUnits:1e3*m(.9144)},"cubic-miles":{inBaseUnits:1e3*m(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},O=function(){var e={};for(var t in g)for(var n in g[t].units)e[n]=t;return e}();function j(e){var t=O[e];if(t)return t;throw new Error("unknown measure")}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t=t||j(e),g[t].baseUnit===e}function _(e,t,n){if(t===n)return e;var r=j(t);if(r!==j(n))throw new Error("incompatible units");var i=w(t,r)?e:function(e,t,n){return e*g[n].units[t].inBaseUnits}(e,t,r);return w(n,r)?i:function(e,t,n){return e/g[n].units[t].inBaseUnits}(i,n,r)}function k(e,t){return _(e,t,"meters")<3e3?"meters":"kilometers"}function x(e,t){return _(e,t,"meters")<1e5?"meters":"kilometers"}function S(e,t){return _(e,t,"feet")<1e3?"feet":"miles"}function T(e,t){return _(e,t,"feet")<1e5?"feet":"miles"}function E(e,t){return _(e,t,"square-meters")<3e6?"square-meters":"square-kilometers"}function C(e,t){return _(e,t,"square-feet")<1e6?"square-feet":"square-miles"}function P(e,t,n){return _(e,t,"meters")/(n*Math.PI/180)}function I(e){return v.fromJSON(e.toLowerCase())||null}function M(e){if(e&&"object"==typeof e&&!Object(o.e)(e))return 1;var t=R(e);return t>1e5?1:t}function A(e){return R(e)>=(e instanceof s.a?Object(l.e)(e).metersPerDegree:1e5)?"meters":F(e)}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.a.metersPerDegree;return L(e,!0)||t}function L(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=null;if(null!=e&&("object"==typeof e?(t=e.wkid,n=e.wkt):"number"==typeof e?t=e:"string"==typeof e&&(n=e)),t){if(Object(o.k)(t))return c.b.metersPerDegree;if(Object(o.l)(t))return c.c.metersPerDegree;!(i=p.values[p[t]])&&r&&b.has(t)&&(i=d)}else if(n)if(-1!==n.search(/^PROJCS/i)){var a=f.exec(n);a&&a[1]&&(i=parseFloat(a[1].split(",")[1]))}else if(-1!==n.search(/^GEOCCS/i)){var s=h.exec(n);s&&s[1]&&(i=parseFloat(s[1].split(",")[1]))}return i}function F(e){var t,n,r=null;if(null!=e&&("object"==typeof e?(t=e.wkid,n=e.wkt):"number"==typeof e?t=e:"string"==typeof e&&(n=e)),t)r=p.units[p[t]];else if(n&&-1!==n.search(/^PROJCS/i)){var i=f.exec(n);i&&i[1]&&(r=(i=/[\\"\\']{1}([^\\"\\']+)/.exec(i[1]))&&i[1])}return r?I(r):null}var D={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},N={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},V=Object(i.b)()(D),z=Object(i.b)()(N);Object(i.b)()(Object(r.a)(Object(r.a)({},D),N))},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return h}));var r=n(23),i=n(491),a=n(353),o=n(303),s=n(339),c=n(232),l="@esri/arcgis-rest-js",u={httpMethod:"POST",params:{f:"json"}};function d(e,t){e.authentication&&!t&&Object(c.a)("You should not set `authentication` as a default in a shared environment such as a web server which will process multiple users requests. You can call `setDefaultRequestOptions` with `true` as a second argument to disable this warning."),u=e}var f=function(e){function t(t,n,r,i,a){void 0===t&&(t="AUTHENTICATION_ERROR"),void 0===n&&(n="AUTHENTICATION_ERROR_CODE");var o=e.call(this,t,n,r,i,a)||this;return o.name="ArcGISAuthError",o.message="AUTHENTICATION_ERROR_CODE"===n?t:n+": "+t,o}return Object(r.b)(t,e),t.prototype.retry=function(e,t){var n=this;void 0===t&&(t=3);var i=0,a=function a(o,s){e(n.url,n.options).then((function(e){var t=Object(r.a)(Object(r.a)({},n.options),{authentication:e});return i+=1,h(n.url,t)})).then((function(e){o(e)})).catch((function(e){"ArcGISAuthError"===e.name&&i<t?a(o,s):"ArcGISAuthError"===e.name&&i>=t?s(n):s(e)}))};return new Promise((function(e,t){a(e,t)}))},t}(s.a);function p(e,t,n,r,i){if(e.code>=400){var a=e.message,o=e.code;throw new s.a(a,o,e,t,r)}if(e.error){var c=e.error,l=(a=c.message,o=c.code,c.messageCode),u=l||o||"UNKNOWN_ERROR_CODE";if(498===o||499===o||"GWM_0003"===l||400===o&&"Unable to generate token."===a)throw i||new f(a,u,e,t,r);throw new s.a(a,u,e,t,r)}if("failed"===e.status||"failure"===e.status){a=void 0,o="UNKNOWN_ERROR_CODE";try{a=JSON.parse(e.statusMessage).message,o=JSON.parse(e.statusMessage).code}catch(d){a=e.statusMessage||e.message}throw new s.a(a,o,e,t,r)}return e}function h(e,t){void 0===t&&(t={params:{f:"json"}});var n=Object(r.a)(Object(r.a)(Object(r.a)({httpMethod:"POST"},u),t),{params:Object(r.a)(Object(r.a)({},u.params),t.params),headers:Object(r.a)(Object(r.a)({},u.headers),t.headers)}),c=[],d=[];if(n.fetch||"undefined"===typeof fetch?(c.push("`fetch`"),d.push("`node-fetch`")):n.fetch=fetch.bind(Function("return this")()),"undefined"===typeof Promise&&(c.push("`Promise`"),d.push("`es6-promise`")),"undefined"===typeof FormData&&(c.push("`FormData`"),d.push("`isomorphic-form-data`")),!n.fetch||"undefined"===typeof Promise||"undefined"===typeof FormData)throw new Error("`arcgis-rest-request` requires a `fetch` implementation and global variables for `Promise` and `FormData` to be present in the global scope. You are missing "+c.join(", ")+". We recommend installing the "+d.join(", ")+" modules at the root of your application to add these to the global scope. See https://bit.ly/2KNwWaJ for more info.");var f=n.httpMethod,h=n.authentication,b=n.rawResponse,v=Object(r.a)({f:"json"},n.params),y=null,m={method:f,credentials:"same-origin"};return n.headers&&n.headers["X-Esri-Auth-Client-Id"]&&e.indexOf("/oauth2/platformSelf")>-1&&(m.credentials="include"),(h?h.getToken(e,{fetch:n.fetch}).catch((function(t){return t.url=e,t.options=n,y=t,Promise.resolve("")})):Promise.resolve("")).then((function(t){t.length&&(v.token=t);var s={};if("GET"===m.method){v.token&&n.hideToken&&"undefined"===typeof window&&(s["X-Esri-Authorization"]="Bearer "+v.token,delete v.token);var c=""===Object(a.b)(v)?e:e+"?"+Object(a.b)(v);n.maxUrlLength&&c.length>n.maxUrlLength||v.token&&n.hideToken?(m.method="POST",t.length&&n.hideToken&&(v.token=t,delete s["X-Esri-Authorization"])):e=c}var u=new RegExp("/items/.+/updateResources").test(e);return"POST"===m.method&&(m.body=Object(i.a)(v,u)),m.headers=Object(r.a)(Object(r.a)({},s),n.headers),"undefined"!==typeof window||m.headers.referer||(m.headers.referer=l),Object(o.b)(v)||u||(m.headers["Content-Type"]="application/x-www-form-urlencoded"),n.fetch(e,m)})).then((function(t){if(!t.ok){var r=t.status,i=t.statusText;throw new s.a(i,"HTTP "+r,t,e,n)}if(b)return t;switch(v.f){case"json":case"geojson":return t.json();case"html":case"text":return t.text();default:return t.blob()}})).then((function(t){if("json"!==v.f&&"geojson"!==v.f||b)return t;var r=p(t,e,0,n,y);if(y){var i=e.toLowerCase().split(/\/rest(\/admin)?\/services\//)[0];n.authentication.trustedServers[i]={token:[],expires:new Date(Date.now()+864e5)},y=null}return r}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return p})),n.d(t,"h",(function(){return f}));var r=n(150),i=n(43),a=n(63),o=n(259),s=n(118),c=n(108);function l(e){return void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax}function u(e){return void 0!==e.points}function d(e){return void 0!==e.x&&void 0!==e.y}function f(e){return void 0!==e.paths}function p(e){return void 0!==e.rings}function h(e){return e?e instanceof r.a?e:d(e)?i.a.fromJSON(e):f(e)?c.a.fromJSON(e):p(e)?s.a.fromJSON(e):u(e)?o.a.fromJSON(e):l(e)?a.a.fromJSON(e):null:null}function b(e){return e?d(e)?"esriGeometryPoint":f(e)?"esriGeometryPolyline":p(e)?"esriGeometryPolygon":l(e)?"esriGeometryEnvelope":u(e)?"esriGeometryMultipoint":null:null}var v={esriGeometryPoint:i.a,esriGeometryPolyline:c.a,esriGeometryPolygon:s.a,esriGeometryEnvelope:a.a,esriGeometryMultipoint:o.a};function y(e){return e&&v[e]||null}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var r=n(14),i=n(2),a=n(3),o=n(45),s=function(){function e(){Object(i.a)(this,e),this._key="",this._keyDirty=!1,this._parameterBits=this._parameterBits.map((function(){return 0}))}return Object(a.a)(e,[{key:"key",get:function(){return this._keyDirty&&(this._keyDirty=!1,this._key=String.fromCharCode.apply(String,this._parameterBits)),this._key}},{key:"snapshot",value:function(){var e,t=this._parameterNames,n={key:this.key},i=Object(r.a)(t);try{for(i.s();!(e=i.n()).done;){var a=e.value;n[a]=this[a]}}catch(o){i.e(o)}finally{i.f()}return n}}]),e}();function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n){var r,i;t._parameterNames=null!=(r=t._parameterNames)?r:[],t._parameterNames.push(n);for(var a=t._parameterNames.length-1,s=e.count||2,c=Math.ceil(Object(o.m)(s)),l=null!=(i=t._parameterBits)?i:[0],u=0;l[u]+c>16;)++u>=l.length&&l.push(0);t._parameterBits=l;var d=l[u],f=(1<<c)-1<<d;l[u]+=c,Object.defineProperty(t,n,{get:function(){return this[a]},set:function(e){if(this[a]!==e&&(this[a]=e,this._keyDirty=!0,this._parameterBits[u]=this._parameterBits[u]&~f|+e<<d&f,"number"!=typeof e&&"boolean"!=typeof e))throw"Configuration value for "+n+" must be boolean or number, got "+typeof e}})}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return c}));var r=n(43),i=n(38),a=n(27),o=n(33),s=n(163);function c(e,t){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function l(e,t){var n=e.length===t.length&&e[0]===t[0]&&e[1]===t[1];switch(e.length){case 2:return n;case 3:return n&&e[2]===t[2];case 4:return n&&e[3]===t[3]}return!1}function u(e,t,n,r){return"2d"===r.type?r.toScreen(t.toPoint(e,v)):(d(e,t,n,r,h),r.state.camera.projectToScreen(h,b),Object(i.e)(b[0],b[1]))}function d(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Object(a.e)(),o=t.toXYZ(e);return o[2]=Object(s.b)(r,o,t.spatialReference,n)||0,r.renderCoordsHelper.toRenderCoords(o,t.spatialReference,i),i}function f(e,t,n,r,i,a,o){var c=n.toXYZ(e),l=n.toXYZ(t),u=Object(s.b)(i,c,n.spatialReference,r),d=Object(s.b)(i,l,n.spatialReference,r),f=(null==u?d:null==d?u:Math.min(u,d))||0;c[2]=f,l[2]=f,i.renderCoordsHelper.toRenderCoords(c,n.spatialReference,a),i.renderCoordsHelper.toRenderCoords(l,n.spatialReference,o)}function p(e,t){t.sort((function(t,n){return Object(o.j)(t.targetPoint,e)-Object(o.j)(n.targetPoint,e)}))}var h=Object(a.e)(),b=Object(i.f)(),v=new r.a},function(e,t,n){"use strict";n.d(t,"c",(function(){return d}));var r=n(17),i=n(44);n.d(t,"b",(function(){return i.a}));var a=n(150),o=n(43),s=n(63),c=n(259),l=n(118),u=n(108);n.d(t,"a",(function(){return u.a}));n(219),n(68);var d={base:a.a,key:"type",typeMap:{extent:s.a,multipoint:c.a,point:o.a,polyline:u.a,polygon:l.a}};Object(r.k)(d)},function(e,t,n){"use strict";var r=n(10),i=n(14),a=n(7),o=n.n(a),s=n(15),c=n(2),l=n(3),u=n(37),d=n(5),f=n(6),p=n(0),h=(n(16),n(13)),b=n(1),v=n(58),y=n(198),m=n(8),g=(n(12),n(19)),O=(n(20),n(80)),j=n(24),w=n(425),_=n(78),k=n(95),x=n(159),S=(n(143),n(218)),T=n(51),E=n(25),C=n(181),P=n(56),I=(n(182),n(311)),M=h.a.getLogger("esri.widgets.Widget"),A=0,R="esri-icon-checkbox-unchecked",L=Object(I.a)(),F=!1,D=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r){var a;Object(c.a)(this,n),(a=t.call(this,e,r))._attached=!1,a._internalHandles=new T.a,a._projector=L,a.domNode=null,a.iconClass=R,a.label=a.declaredClass.split(".").pop(),a.visible=!0,a._loadLocale=Object(j.i)(Object(s.a)(o.a.mark((function e(){var t,n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a._messageBundleProps||!a._messageBundleProps.length){e.next=6;break}return e.next=3,Object(j.j)(a._messageBundleProps.map(function(){var e=Object(s.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.bundlePath,r=t.propertyName,e.next=3,Object(x.a)(n);case 3:a[r]=e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:t=e.sent,n=Object(i.a)(t);try{for(n.s();!(r=n.n()).done;)(c=r.value).error&&M.error("widget-intl:locale-error",a.declaredClass,c.error)}catch(l){n.e(l)}finally{n.f()}case 6:return e.next=8,a.loadLocale();case 8:case"end":return e.stop()}}),e)}))));var l=Object(P.d)()||"light";["light","dark"].includes(l)||Object(y.a)(M,"The following themes are deprecated: light-blue, dark-blue, light-green, dark-green, light-purple, dark-purple, light-red, and dark-red.",{version:"4.19",warnOnce:!0,see:"https://developers.arcgis.com/javascript/latest/styling/"});var d="esri-widget-uid-"+Object(g.a)(),f=a.render.bind(Object(u.a)(a)),p=!1;a._trackingTarget=new w.a((function(){return a.scheduleRender()}));var h=function(){if(!p||a.destroyed)return null;var e=f();return e.properties?e.properties.key||(e.properties.key=d):e.properties={key:d},e};return a.render=function(){if(F)return h();var e;a._trackingTarget.clear(),F=!0;try{e=Object(O.b)(a._trackingTarget,h)}finally{F=!1}return e},a.addResolvingPromise(a._resourcesFetch=a.beforeFirstRender().then((function(){p=!0,a._postInitialize()}))),a}return Object(l.a)(n,[{key:"normalizeCtorArgs",value:function(e,t){var n=Object(r.a)({},e);return t&&(n.container=t),n}},{key:"postInitialize",value:function(){}},{key:"beforeFirstRender",value:function(){return this._loadLocale().catch(j.v)}},{key:"loadLocale",value:function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){this.destroyed||(this._trackingTarget.destroy(),this._trackingTarget=null,this.viewModel&&(this.viewModel.destroy(),this.viewModel=null),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=function(){return null},this._projector=null)}},{key:"container",set:function(e){this._get("container")||this._set("container",e)}},{key:"castContainer",value:function(e){return Object(C.a)(e)}},{key:"id",get:function(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+A++},set:function(e){e&&this._set("id",e)}},{key:"renderable",get:function(){return this._resourcesFetch}},{key:"render",value:function(){throw new Error("not implemented")}},{key:"scheduleRender",value:function(){this.destroyed||this._projector.scheduleRender()}},{key:"classes",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return P.a.apply(this,t)}},{key:"own",value:function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments)),this._internalHandles.add(e)}},{key:"renderNow",value:function(){this._projector.renderNow()}},{key:"_postInitialize",value:function(){var e,t=this;this.destroyed||(this.scheduleRender(),null!=(e=this._delegatedEventNames)&&e.length&&this._internalHandles.add(Object(E.a)(this,"viewModel",(function(e,n){n&&t._internalHandles.remove("delegated-events"),e&&t._internalHandles.add(t._delegatedEventNames.map((function(n){return e.on(n,(function(e){t.emit(n,e)}))})),"delegated-events")}))),this.postInitialize(),this._internalHandles.add(Object(k.c)(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._loadLocale().catch(j.v);case 2:t.scheduleRender();case 3:case"end":return e.stop()}}),e)}))))),this._internalHandles.add(Object(E.j)(this,"container",function(){var e=Object(s.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.destroyed||t._attach(n);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())))}},{key:"_attach",value:function(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}},{key:"_detach",value:function(e){e&&this._attached&&(this._projector.detach(this.render),e.parentNode&&e.parentNode.removeChild(e),this._attached=!1)}}]),n}(Object(S.b)(_.a.EventedAccessor));Object(p.a)([Object(b.b)({value:null})],D.prototype,"container",null),Object(p.a)([Object(v.a)("container")],D.prototype,"castContainer",null),Object(p.a)([Object(b.b)({aliasOf:"container"})],D.prototype,"domNode",void 0),Object(p.a)([Object(b.b)()],D.prototype,"iconClass",void 0),Object(p.a)([Object(b.b)()],D.prototype,"id",null),Object(p.a)([Object(b.b)()],D.prototype,"label",void 0),Object(p.a)([Object(b.b)()],D.prototype,"renderable",null),Object(p.a)([Object(b.b)()],D.prototype,"viewModel",void 0),Object(p.a)([Object(b.b)()],D.prototype,"visible",void 0);var N=D=Object(p.a)([Object(m.a)("esri.widgets.Widget")],D);t.a=N},function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r,i=n(10),a=n(26),o=n(2),s=n(3),c=n(37),l=n(5),u=n(6),d=n(0),f=(n(16),n(22)),p=n(4),h=(n(13),n(17),n(1)),b=n(8),v=(n(12),n(19),n(20),n(28)),y=n(68),m=n(71),g=n(205),O=n(76),j=n(240),w=r=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).isAggregate=!1,e.layer=null,e.popupTemplate=null,e.sourceLayer=null,Object.defineProperty(Object(c.a)(e),"uid",{value:Object(j.a)(),configurable:!0}),e}return Object(s.a)(n,[{key:"normalizeCtorArgs",value:function(e,t,n,r){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:n,popupTemplate:r}}},{key:"attributes",set:function(e){var t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}},{key:"geometry",set:function(e){var t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}},{key:"symbol",set:function(e){var t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}},{key:"visible",set:function(e){var t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}},{key:"getEffectivePopupTemplate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.popupTemplate?this.popupTemplate:this.sourceLayer?"popupTemplate"in this.sourceLayer&&this.sourceLayer.popupTemplate?this.sourceLayer.popupTemplate:e&&"defaultPopupTemplate"in this.sourceLayer&&Object(p.k)(this.sourceLayer.defaultPopupTemplate)?this.sourceLayer.defaultPopupTemplate:null:null}},{key:"getAttribute",value:function(e){return this.attributes&&this.attributes[e]}},{key:"setAttribute",value:function(e,t){if(this.attributes){var n=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",n,t,e)}else this.attributes=Object(a.a)({},e,t),this._notifyLayer("attributes",void 0,t,e)}},{key:"getObjectId",value:function(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}},{key:"toJSON",value:function(){return{geometry:Object(p.k)(this.geometry)?this.geometry.toJSON():null,symbol:Object(p.k)(this.symbol)?this.symbol.toJSON():null,attributes:Object(i.a)({},this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}},{key:"clone",value:function(){return new r(this.cloneProperties())}},{key:"cloneProperties",value:function(){return{attributes:Object(f.a)(this.attributes),geometry:Object(f.a)(this.geometry),layer:this.layer,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,symbol:Object(f.a)(this.symbol),visible:this.visible}}},{key:"_notifyLayer",value:function(e,t,n,r){if(this.layer&&"graphicChanged"in this.layer){var i={graphic:this,property:e,oldValue:t,newValue:n};"attributes"===e&&(i.attributeName=r),this.layer.graphicChanged(i)}}}]),n}(v.a);Object(d.a)([Object(h.b)({value:null})],w.prototype,"attributes",null),Object(d.a)([Object(h.b)({value:null,types:m.c,json:{read:y.a}})],w.prototype,"geometry",null),Object(d.a)([Object(h.b)({type:Boolean})],w.prototype,"isAggregate",void 0),Object(d.a)([Object(h.b)()],w.prototype,"layer",void 0),Object(d.a)([Object(h.b)({type:g.a})],w.prototype,"popupTemplate",void 0),Object(d.a)([Object(h.b)()],w.prototype,"sourceLayer",void 0),Object(d.a)([Object(h.b)({value:null,types:O.e})],w.prototype,"symbol",null),Object(d.a)([Object(h.b)({type:Boolean,value:!0})],w.prototype,"visible",null),w=r=Object(d.a)([Object(b.a)("esri.Graphic")],w),(w||(w={})).generateUID=j.a;var _=w;t.a=_},function(e,t,n){"use strict";function r(e){return function(t,n){t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:n})}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return Y})),n.d(t,"b",(function(){return z})),n.d(t,"c",(function(){return U})),n.d(t,"d",(function(){return q})),n.d(t,"e",(function(){return B})),n.d(t,"f",(function(){return G})),n.d(t,"g",(function(){return W})),n.d(t,"h",(function(){return J})),n.d(t,"i",(function(){return H})),n.d(t,"j",(function(){return $}));var r,i=n(17),a=n(243),o=n(125),s=n(200),c=(n(146),n(357),n(120)),l=n(401),u=n(286),d=(n(333),n(202),n(248),n(287),n(358),n(222),n(359),n(196)),f=(n(500),n(501),n(402),n(308)),p=n(309),h=(n(403),n(2)),b=n(3),v=n(5),y=n(6),m=n(0),g=(n(16),n(22)),O=(n(13),n(1)),j=n(49),w=n(8),_=(n(12),n(19),n(20),n(40).a.ofType({base:null,key:"type",typeMap:{fill:u.a}})),k=r=function(e){Object(v.a)(n,e);var t=Object(y.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).symbolLayers=new _,r.type="mesh-3d",r}return Object(b.a)(n,[{key:"clone",value:function(){return new r({styleOrigin:Object(g.a)(this.styleOrigin),symbolLayers:Object(g.a)(this.symbolLayers),thumbnail:Object(g.a)(this.thumbnail)})}}]),n}(d.a);Object(m.a)([Object(O.b)({type:_})],k.prototype,"symbolLayers",void 0),Object(m.a)([Object(j.a)({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],k.prototype,"type",void 0);var x,S=k=r=Object(m.a)([Object(w.a)("esri.symbols.MeshSymbol3D")],k),T=n(53),E=n(50),C=n(38),P=n(426),I=x=function(e){Object(v.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).type="picture-fill",e.url=null,e.xscale=1,e.yscale=1,e.width=12,e.height=12,e.xoffset=0,e.yoffset=0,e.source=null,e}return Object(b.a)(n,[{key:"normalizeCtorArgs",value:function(e,t,n,r){if(e&&"string"!=typeof e&&null==e.imageData)return e;var i={};return e&&(i.url=e),t&&(i.outline=t),null!=n&&(i.width=Object(C.j)(n)),null!=r&&(i.height=Object(C.j)(r)),i}},{key:"clone",value:function(){var e=new x({color:Object(g.a)(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",Object(g.a)(this.source)),e}},{key:"hash",value:function(){var e;return"".concat(Object(T.a)(Object(E.a)(n.prototype),"hash",this).call(this),".").concat(null==(e=this.color)?void 0:e.hash(),".").concat(this.height,".").concat(this.url,".").concat(this.width,".").concat(this.xoffset,".").concat(this.xscale,".").concat(this.yoffset,".").concat(this.yscale)}}]),n}(l.a);Object(m.a)([Object(j.a)({esriPFS:"picture-fill"},{readOnly:!0})],I.prototype,"type",void 0),Object(m.a)([Object(O.b)(P.b)],I.prototype,"url",void 0),Object(m.a)([Object(O.b)({type:Number,json:{write:!0}})],I.prototype,"xscale",void 0),Object(m.a)([Object(O.b)({type:Number,json:{write:!0}})],I.prototype,"yscale",void 0),Object(m.a)([Object(O.b)({type:Number,cast:C.j,json:{write:!0}})],I.prototype,"width",void 0),Object(m.a)([Object(O.b)({type:Number,cast:C.j,json:{write:!0}})],I.prototype,"height",void 0),Object(m.a)([Object(O.b)({type:Number,cast:C.j,json:{write:!0}})],I.prototype,"xoffset",void 0),Object(m.a)([Object(O.b)({type:Number,cast:C.j,json:{write:!0}})],I.prototype,"yoffset",void 0),Object(m.a)([Object(O.b)(P.a)],I.prototype,"source",void 0);var M=I=x=Object(m.a)([Object(w.a)("esri.symbols.PictureFillSymbol")],I),A=n(220),R=n(227),L=n(249),F=n(130),D=n(116),N=n(209),V=n(193);function z(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function U(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}var B={base:o.a,key:"type",typeMap:{"simple-fill":F.default,"picture-fill":M,"picture-marker":A.a,"simple-line":c.default,"simple-marker":D.default,text:N.a,"label-3d":f.a,"line-3d":p.a,"mesh-3d":S,"point-3d":R.a,"polygon-3d":L.a,"web-style":V.a,cim:s.a},errorContext:"symbol"},G={base:o.a,key:"type",typeMap:{"picture-marker":A.a,"simple-marker":D.default,text:N.a,"web-style":V.a,cim:s.a},errorContext:"symbol"},q=Object(a.b)({types:B}),H={base:o.a,key:"type",typeMap:{"simple-fill":F.default,"picture-fill":M,"picture-marker":A.a,"simple-line":c.default,"simple-marker":D.default,text:N.a,"line-3d":p.a,"mesh-3d":S,"point-3d":R.a,"polygon-3d":L.a,"web-style":V.a,cim:s.a},errorContext:"symbol"},W={base:o.a,key:"type",typeMap:{text:N.a,"label-3d":f.a},errorContext:"symbol"},$=(o.a,f.a,p.a,R.a,L.a,V.a,{base:o.a,key:"type",typeMap:{"line-3d":p.a,"mesh-3d":S,"point-3d":R.a,"polygon-3d":L.a,"web-style":V.a},errorContext:"symbol"}),J={base:o.a,key:"type",typeMap:{"label-3d":f.a},errorContext:"symbol"},Y=Object(i.k)(B)},function(e,t,n){"use strict";function r(){return function(e,t){if(!e[t])throw new TypeError("Cannot auto bind undefined function '".concat(t,"'"));return{value:a(e[t])}}}function i(e){var t=e.type;return e instanceof KeyboardEvent||"keyup"===t||"keydown"===t||"keypress"===t}function a(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];i(t)?"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call.apply(e,[this,t].concat(r))}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(37),i=n(5),a=n(6),o=n(35),s=n(2),c=n(3),l=n(0),u=n(136),d=n(8),f=n(36),p=function(){function e(){Object(s.a)(this,e),this._emitter=new e.EventEmitter(this)}return Object(c.a)(e,[{key:"emit",value:function(e,t){return this._emitter.emit(e,t)}},{key:"on",value:function(e,t){return this._emitter.on(e,t)}},{key:"once",value:function(e,t){return this._emitter.once(e,t)}},{key:"hasEventListener",value:function(e){return this._emitter.hasEventListener(e)}}]),e}();!function(e){var t=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(s.a)(this,e),this.target=t,this._listenersMap=null}return Object(c.a)(e,[{key:"clear",value:function(){this._listenersMap&&this._listenersMap.clear()}},{key:"emit",value:function(e,t){var n=this._listenersMap&&this._listenersMap.get(e);if(!n)return!1;var r=this.target||this;return Object(o.a)(n).forEach((function(e){e.call(r,t)})),n.length>0}},{key:"on",value:function(e,t){var n=this;if(Array.isArray(e)){var r=e.map((function(e){return n.on(e,t)}));return Object(u.b)(r)}if(e.indexOf(",")>-1)throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);var i=this._listenersMap.get(e)||[];return i.push(t),this._listenersMap.set(e,i),{remove:function(){var r=n._listenersMap&&n._listenersMap.get(e)||[],i=r.indexOf(t);i>=0&&r.splice(i,1)}}}},{key:"once",value:function(e,t){var n=this.on(e,(function(e){n.remove(),t.call(null,e)}));return n}},{key:"hasEventListener",value:function(e){var t=this._listenersMap&&this._listenersMap.get(e);return null!=t&&t.length>0}}]),e}();e.EventEmitter=t,e.EventedMixin=function(e){var n=function(e){Object(i.a)(r,e);var n=Object(a.a)(r);function r(){var e;return Object(s.a)(this,r),(e=n.apply(this,arguments))._emitter=new t,e}return Object(c.a)(r,[{key:"destroy",value:function(){this._emitter.clear()}},{key:"emit",value:function(e,t){return this._emitter.emit(e,t)}},{key:"on",value:function(e,t){return this._emitter.on(e,t)}},{key:"once",value:function(e,t){return this._emitter.once(e,t)}},{key:"hasEventListener",value:function(e){return this._emitter.hasEventListener(e)}}]),r}(e);return n=Object(l.a)([Object(d.a)("esri.core.Evented")],n)};var n=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.apply(this,arguments))._emitter=new p.EventEmitter(Object(r.a)(e)),e}return Object(c.a)(n,[{key:"emit",value:function(e,t){return this._emitter.emit(e,t)}},{key:"on",value:function(e,t){return this._emitter.on(e,t)}},{key:"once",value:function(e,t){return this._emitter.once(e,t)}},{key:"hasEventListener",value:function(e){return this._emitter.hasEventListener(e)}}]),n}(f.a);n=Object(l.a)([Object(d.a)("esri.core.Evented")],n),e.EventedAccessor=n}(p||(p={}));var h=p;t.a=h},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c}));var r=n(2),i=n(3),a=function(){function e(t,n,i,a){Object(r.a)(this,e),this.semiMajorAxis=t,this.flattening=n,this.outerAtmosphereRimWidth=i;var o=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*o,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=a||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}return Object(i.a)(e,[{key:"radius",get:function(){return this.semiMajorAxis}}]),e}(),o=new a(6378137,1/298.257223563,3e5,.006694379990137799),s=new a(3396190,1/169.8944472236118,23e4),c=new a(1737400,0,0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return m}));var r,i=n(14),a=(n(16),n(13)),o=n(90),s=[],c=a.a.getLogger("esri.core.Accessor");function l(e){void 0!==r&&r.onObservableAccessed(e)}var u=!1,d=!1;function f(e,t,n){if(u)return p(e,t,n);h(e);var r=t.call(n);return b(),r}function p(e,t,n){var r=u;u=!0,h(e);var i=null;try{i=t.call(n)}catch(a){d&&c.error(a)}return b(),u=r,i}function h(e){r=e,s.push(e)}function b(){var e=s.pop();r=s.length>0?s[s.length-1]:void 0,void 0!==e&&e.onTrackingEnd()}function v(e,t){if(!(32&t.flags)){var n=d;d=!1,64&t.flags?p(t,t.metadata.get,e):m(e,t),d=n}}var y=[];function m(e,t){128&t.flags||(t.flags|=128,p(t,(function(){var n,r=t.metadata.dependsOn||y,a=Object(i.a)(r);try{for(a.s();!(n=a.n()).done;){var s=n.value;if("string"==typeof s&&-1===s.indexOf("."))g(e,s,!1);else for(var c=Object(o.f)(s),l=0,u=e;l<c.length&&null!=u&&"object"==typeof u;++l)u=g(u,c[l],l!==c.length-1)}}catch(d){a.e(d)}finally{a.f()}})),t.flags&=-129)}function g(e,t,n){var r="?"===t[t.length-1]?t.slice(0,-1):t;if(null!=e.getItemAt||Array.isArray(e)){var i=parseInt(r,10);if(!isNaN(i))return Array.isArray(e)?e[i]:e.getItemAt(i)}var a=Object(o.a)(e),s=null==a?void 0:a.properties.get(r);return s&&(l(s),v(e,s)),n?e[r]:void 0}},function(e,t,n){"use strict";n.d(t,"a",(function(){return Y})),n.d(t,"b",(function(){return W})),n.d(t,"c",(function(){return U})),n.d(t,"d",(function(){return Z})),n.d(t,"e",(function(){return H})),n.d(t,"f",(function(){return G})),n.d(t,"g",(function(){return $})),n.d(t,"h",(function(){return q})),n.d(t,"i",(function(){return M})),n.d(t,"j",(function(){return A})),n.d(t,"k",(function(){return R})),n.d(t,"l",(function(){return T})),n.d(t,"m",(function(){return E})),n.d(t,"n",(function(){return J})),n.d(t,"o",(function(){return ne})),n.d(t,"p",(function(){return ee})),n.d(t,"q",(function(){return P})),n.d(t,"r",(function(){return N})),n.d(t,"s",(function(){return D}));var r=n(7),i=n.n(r),a=n(35),o=n(10),s=n(15),c=n(4),l=n(123),u=n(13),d=n(18),f=n(54),p=n(102),h=n(147),b=n(341),v=(n(143),u.a.getLogger("esri.widgets.Feature.support.featureUtils")),y=/href=(""|'')/gi,m=/(\{([^\{\r\n]+)\})/g,g=/\'/g,O=/^\s*expression\//i,j=/(\n)/gi,w=/[\u00A0-\u9999<>\&]/gim,_=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,k=/^(?:mailto:|tel:)/,x="relationships/",S=Object(p.a)("short-date-short-time");function T(e){if(!Object(c.j)(e))return e.get("sourceLayer")||e.get("layer")}function E(e,t){return C.apply(this,arguments)}function C(){return(C=Object(s.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","function"==typeof t?t.call(null,n):t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e)return!k.test(e.trim().toLowerCase())}function I(e,t){if(!function(e){return O.test(e)}(t)||!e)return null;var n,r=t.replace(O,"").toLowerCase();return e.some((function(e){return e.name.toLowerCase()===r&&(n=e,!0)})),n}function M(e,t){var n=I(t,null==e?void 0:e.fieldName);return n?n.title||null:e?e.label||e.fieldName:null}function A(e,t){var n=L(t,e);return n?n.name:e}function R(e,t){return e&&e.map((function(e){return A(e,t)}))}function L(e,t){return e&&"function"==typeof e.getField?e.getField(t):null}function F(e){return"".concat(e).trim()}function D(e){var t=e.attributes,n=e.globalAttributes,r=e.layer,i=e.text,a=e.fieldInfoMap;return i?N({formattedAttributes:n,template:B(i,Object(o.a)(Object(o.a)({},n),t),r),fieldInfoMap:a}):""}function N(e){var t=e.formattedAttributes,n=e.template,r=e.fieldInfoMap;return F(function(e){return e.replace(y,"")}(Object(l.c)(Object(l.c)(n,(function(e){return function(e,t){var n=t.get(e.toLowerCase());return"{".concat(n&&n.fieldName||e,"}")}(e,r)})),t)))}function V(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t[e];if("string"==typeof r){var i="%27",a=(n?encodeURIComponent(r):r).replace(g,i);t[e]=a}}function z(e,t,n){var r=(t=F(t))&&"{"!==t[0];return Object(l.c)(e,function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(o.a)({},e);return Object.keys(n).forEach((function(e){return V(e,n,t)})),n}(n,r))}function U(e,t){return e.replace(m,(function(e,n,r){var i=L(t,r);return i?"{".concat(i.name,"}"):n}))}function B(e,t,n){var r=U(e,n);return r?r.replace(_,(function(e,n,r){return z(e,n||r,t)})):r}function G(e,t){var n=t.fieldInfos,r=t.fieldName,i=q(n,r),a=null==i?void 0:i.clone(),s=t.preventPlacesFormatting,c=L(t.layer,r);if(a&&c&&"date"===c.type){var l=a.format||new b.a;l.dateFormat=l.dateFormat||"short-date-short-time",a.format=l}var u=a&&a.format;return"string"==typeof(e=function(e,t){if("string"==typeof e&&t&&null==t.dateFormat&&(null!=t.places||null!=t.digitSeparator)){var n=Number(e);if(!isNaN(n))return n}return e}(e,u))||null==e||null==u?e:s?Object(h.b)(e,Object(o.a)(Object(o.a)({},Object(h.a)(u)),{},{minimumFractionDigits:0,maximumFractionDigits:20})):u.format(e)}function q(e,t){if(e&&e.length&&t){var n,r=t.toLowerCase();return e.some((function(e){return!(!e.fieldName||e.fieldName.toLowerCase()!==r)&&(n=e,!0)})),n}}function H(e,t){var n=e.creatorField,r=e.creationDateField,i=e.editorField,a=e.editDateField;if(t){var o=t[a];if("number"==typeof o){var s=t[i];return{type:"edit",date:Object(p.b)(o,S),user:s}}var c=t[r];if("number"==typeof c){var l=t[n];return{type:"create",date:Object(p.b)(c,S),user:l}}return null}}function W(e,t){var n=new Map;return e&&e.forEach((function(e){var r=A(e.fieldName,t);e.fieldName=r,n.set(r.toLowerCase(),e)})),n}function $(e){var t=[];if(!e)return t;var n=e.fieldInfos,r=e.content;return n&&t.push.apply(t,Object(a.a)(n)),r&&Array.isArray(r)?(r.forEach((function(e){if("fields"===e.type){var n=e&&e.fieldInfos;n&&t.push.apply(t,Object(a.a)(n))}})),t):t}function J(e){return e.replace(w,(function(e){return"&#".concat(e.charCodeAt(0),";")}))}function Y(e){return"string"==typeof e?e.replace(j,'<br class="esri-text-new-line" />'):e}function K(e){var t=e.value,n=e.fieldName,r=e.fieldInfos,i=e.fieldInfoMap,a=e.layer,o=e.graphic;if(null==t)return"";var s=function(e){var t=e.fieldName,n=e.value,r=e.graphic,i=e.layer;if(ne(t))return null;if(!i||"function"!=typeof i.getFieldDomain)return null;var a=i.getFieldDomain(t,{feature:r});return a&&"coded-value"===a.type?a.getName(n):null}({fieldName:n,value:t,graphic:o,layer:a});if(s)return s;var c=function(e){var t=e.fieldName,n=e.graphic,r=e.layer;if(ne(t))return null;if(!r||"function"!=typeof r.getFeatureType)return null;var i=r.typeIdField;if(!i||t!==i)return null;var a=r.getFeatureType(n);return a?a.name:null}({fieldName:n,graphic:o,layer:a});if(c)return c;if(i.get(n.toLowerCase()))return G(t,{fieldInfos:r,fieldName:n,layer:a});var l=a&&a.fieldsIndex;return l&&l.isDateField(n)?Object(p.b)(t,S):Y(t)}function Z(e){var t=e.fieldInfos,n=e.attributes,r=e.layer,i=e.graphic,a=e.fieldInfoMap,s=e.relatedInfos,c=Object(o.a)({},n);return null==s||s.forEach((function(e){return function(e,t){e&&t&&(t.relatedFeatures&&t.relatedFeatures&&t.relatedFeatures.forEach((function(n){return re({attributes:e,graphic:n,relatedInfo:t})})),t.relatedStatsFeatures&&t.relatedStatsFeatures&&t.relatedStatsFeatures.forEach((function(n){return re({attributes:e,graphic:n,relatedInfo:t})})))}(c,e)})),Object.keys(c).forEach((function(e){var n=c[e];c[e]=K({fieldName:e,fieldInfos:t,fieldInfoMap:a,layer:r,value:n,graphic:i})})),c}function X(e,t){return Q.apply(this,arguments)}function Q(){return(Q=Object(s.a)(i.a.mark((function e(t,n){var r,a,o,s,c,l,u,f,p,h,b,y,m,g;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.layer,a=t.graphic,o=t.outFields,s=t.objectIds,c=t.returnGeometry,l=t.spatialReference,"number"==typeof(u=s[0])||"string"==typeof u){e.next=4;break}throw f="Could not query required fields for the specified feature. The feature's ID is invalid.",p={layer:r,graphic:a,objectId:u,requiredFields:o},h=new d.a("layer-query-features-invalid-objectid",f,p),v.warn(f,p),h;case 4:if("function"==typeof r.queryFeatures){e.next=7;break}throw b="The specified layer does not support the method 'queryFeatures'. The following fields will not be available.",y={layer:r,graphic:a,requiredFields:o},m=new d.a("layer-query-features-unsupported",b,y),v.warn(b,y),m;case 7:return(g=r.createQuery()).objectIds=s,g.outFields=o,g.returnGeometry=!!c,g.outSpatialReference=l,e.next=11,r.queryFeatures(g,n);case 11:return e.abrupt("return",e.sent.features[0]);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e,t){return te.apply(this,arguments)}function te(){return(te=Object(s.a)(i.a.mark((function e(t,n){var r,a,s,c,l,u,d,p,h,b,v;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.graphic,a=t.popupTemplate,s=t.layer,c=t.spatialReference,s&&a){e.next=3;break}return e.abrupt("return");case 3:if(l=a.returnGeometry,e.t0="function"==typeof s.load,!e.t0){e.next=8;break}return e.next=8,s.load(n);case 8:if(null!=(u=r.attributes[s.objectIdField])){e.next=11;break}return e.abrupt("return");case 11:return d=[u],e.next=14,a.getRequiredFields(s.fields);case 14:if(p=e.sent,h=Object(f.j)(p,r),b=h?[]:p,!h||l){e.next=19;break}return e.abrupt("return");case 19:return e.next=21,X({layer:s,graphic:r,outFields:b,objectIds:d,returnGeometry:l,spatialReference:c},n);case 21:(v=e.sent)&&(v.geometry&&(r.geometry=v.geometry),v.attributes&&(r.attributes=Object(o.a)(Object(o.a)({},r.attributes),v.attributes)));case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!!e&&-1!==e.indexOf(x)}function re(e){var t=e.attributes,n=e.graphic,r=e.relatedInfo;t&&n&&r&&Object.keys(n.attributes).forEach((function(e){var i=function(e){return e?"".concat(x).concat(e.layerId,"/").concat(e.fieldName):""}({layerId:r.relation.id.toString(),fieldName:e});t[i]=n.attributes[e]}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i.v})),n.d(t,"b",(function(){return i.l})),n.d(t,"c",(function(){return i.j})),n.d(t,"d",(function(){return i.u})),n.d(t,"e",(function(){return u}));n(103),n(73);var r=n(85),i=n(46),a=(n(490),function(e){return{done:!0,value:e}}),o={};function s(e){return Object(r.b)(e)?"channel":Object(r.l)(e)?String(e):Object(r.d)(e)?e.name:String(e)}function c(e,t,n){var r,s,c,l=t;function u(t,n){if(l===o)return a(t);if(n&&!s)throw l=o,n;r&&r(t);var i=n?e[s](n):e[l]();return l=i.nextState,c=i.effect,r=i.stateUpdater,s=i.errorState,l===o?a(t):c}return Object(i.M)(u,(function(e){return u(null,e)}),n)}function l(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var o,l,u={done:!1,value:Object(i.i)(e)},d=function(e){return{done:!1,value:i.j.apply(void 0,[t].concat(r,[e]))}},f=function(e){return{done:!1,value:Object(i.k)(e)}},p=function(e){return o=e},h=function(e){return l=e};return c({q1:function(){return{nextState:"q2",effect:u,stateUpdater:h}},q2:function(){return o?{nextState:"q3",effect:f(o)}:{nextState:"q1",effect:d(l),stateUpdater:p}},q3:function(){return{nextState:"q1",effect:d(l),stateUpdater:p}}},"q1","takeLatest("+s(e)+", "+t.name+")")}function u(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return i.j.apply(void 0,[l,e,t].concat(r))}},function(e,t,n){"use strict";function r(){return new Float32Array(3)}function i(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function a(e,t,n){var r=new Float32Array(3);return r[0]=e,r[1]=t,r[2]=n,r}function o(){return r()}function s(){return a(1,1,1)}function c(){return a(1,0,0)}function l(){return a(0,1,0)}function u(){return a(0,0,1)}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a}));var d=o(),f=s(),p=c(),h=l(),b=u();Object.freeze({__proto__:null,create:r,clone:i,fromValues:a,createView:function(e,t){return new Float32Array(e,t,3)},zeros:o,ones:s,unitX:c,unitY:l,unitZ:u,ZEROS:d,ONES:f,UNIT_X:p,UNIT_Y:h,UNIT_Z:b})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(98),i=n(13),a=n(18),o=n(12),s=(n(62),i.a.getLogger("esri.assets"));function c(e){if(!r.a.assetsPath)throw s.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new a.a("assets:path-not-set","config.assetsPath is not set");return Object(o.y)(r.a.assetsPath,e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return v})),n.d(t,"g",(function(){return a})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return f})),n.d(t,"j",(function(){return u})),n.d(t,"k",(function(){return s})),n.d(t,"l",(function(){return h})),n.d(t,"m",(function(){return b})),n.d(t,"n",(function(){return i}));var r=n(103),i=function(e){return null===e||void 0===e},a=function(e){return null!==e&&void 0!==e},o=function(e){return"function"===typeof e},s=function(e){return"string"===typeof e},c=Array.isArray,l=function(e){return e&&!c(e)&&"object"===typeof e},u=function(e){return e&&o(e.then)},d=function(e){return e&&o(e.next)&&o(e.throw)},f=function e(t){return t&&(s(t)||b(t)||o(t)||c(t)&&t.every(e))},p=function(e){return e&&o(e.take)&&o(e.close)},h=function(e){return o(e)&&e.hasOwnProperty("toString")},b=function(e){return Boolean(e)&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype},v=function(e){return p(e)&&e[r.e]},y=function(e){return e&&e[r.c]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return _})),n.d(t,"g",(function(){return f})),n.d(t,"h",(function(){return y})),n.d(t,"i",(function(){return u})),n.d(t,"j",(function(){return d})),n.d(t,"k",(function(){return m}));var r=n(2),i=n(3),a=n(45),o=(n(27),n(88),n(60),n(97)),s=n(33),c=(n(89),Object(o.c)(),function(){function e(t){Object(r.a)(this,e),this.message=t}return Object(i.a)(e,[{key:"toString",value:function(){return"AssertException: ".concat(this.message)}}]),e}());function l(e,t){if(!e){t=t||"assert";var n=new Error(t);throw n.stack&&console.log(n.stack),new c(t)}}function u(e,t,n,r){var i,a=(n[0]-e[0])/t[0],o=(r[0]-e[0])/t[0];a>o&&(i=a,a=o,o=i);var s=(n[1]-e[1])/t[1],c=(r[1]-e[1])/t[1];if(s>c&&(i=s,s=c,c=i),a>c||s>o)return!1;s>a&&(a=s),c<o&&(o=c);var l=(n[2]-e[2])/t[2],u=(r[2]-e[2])/t[2];return l>u&&(i=l,l=u,u=i),!(a>u||l>o)&&(u<o&&(o=u),!(o<0))}function d(e,t,n,r){e[12]=t,e[13]=n,e[14]=r}function f(e){return 1===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&1===e[10]&&0===e[11]&&1===e[15]}function p(e,t,n){return 2*Math.atan(Math.sqrt(t*t+n*n)*Math.tan(.5*e)/t)}function h(e,t,n){return 2*Math.atan(Math.sqrt(t*t+n*n)*Math.tan(.5*e)/n)}function b(e,t,n){return 2*Math.atan(t*Math.tan(.5*e)/Math.sqrt(t*t+n*n))}function v(e,t,n){return 2*Math.atan(n*Math.tan(.5*e)/Math.sqrt(t*t+n*n))}function y(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Object(a.d)(e,0,j),i=0;i<4;i++)t[n+i]=Math.floor(256*w(r*g[i]))}function m(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0,r=0;r<4;r++)n+=e[t+r]*O[r];return n}var g=[1,256,65536,16777216],O=[1/256,1/65536,1/16777216,1/4294967296],j=m(new Uint8ClampedArray([255,255,255,255]));function w(e){return e-Math.floor(e)}function _(e,t,n,r,i){var a=e;0===e[11]?(r[0]=2/(t*a[0]),r[1]=2/(n*a[5]),r[2]=(1+a[12])/a[0],r[3]=(1+a[13])/a[5],Object(s.r)(i,0,1)):(r[0]=-2/(t*a[0]),r[1]=-2/(n*a[5]),r[2]=(1-a[8])/a[0],r[3]=(1-a[9])/a[5],Object(s.r)(i,1,0))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return x})),n.d(t,"e",(function(){return S})),n.d(t,"f",(function(){return _})),n.d(t,"g",(function(){return E})),n.d(t,"h",(function(){return N})),n.d(t,"i",(function(){return k})),n.d(t,"j",(function(){return h})),n.d(t,"k",(function(){return T})),n.d(t,"l",(function(){return I})),n.d(t,"m",(function(){return R})),n.d(t,"n",(function(){return F})),n.d(t,"o",(function(){return C})),n.d(t,"p",(function(){return M})),n.d(t,"q",(function(){return P})),n.d(t,"r",(function(){return w})),n.d(t,"s",(function(){return u}));var r=n(4),i=n(45),a=n(27),o=n(11),s=n(55),c=n(326);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D;return[e[0],e[1],e[2],e[3]]}function u(e,t,n,r){return f(e,t,n,r,s.e.get())}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l();return f(e[0],e[1],e[2],e[3],t)}function f(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l();return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l();Object(o.j)(n,t);var r=Object(o.g)(t,t);return Math.abs(r-1)>1e-5&&r>1e-12&&Object(o.d)(n,n,1/Math.sqrt(r)),w(n,e,n),n}function h(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l();return _(Object(o.i)(s.d.get(),e,t),Object(o.i)(s.d.get(),n,t),e,r)}function b(e,t,n,r,i){if(e.count<3)return!1;e.getVec(n,y);for(var a=r,s=!1;a<e.count-1&&!s;)e.getVec(a,m),a++,s=!Object(o.p)(y,m);if(!s)return!1;for(a=Math.max(a,i),s=!1;a<e.count&&!s;)e.getVec(a,g),a++,Object(o.i)(O,y,m),Object(o.q)(O,O),Object(o.i)(j,m,g),Object(o.q)(j,j),s=!Object(o.p)(y,g)&&!Object(o.p)(m,g)&&Math.abs(Object(o.g)(O,j))<v;return s?(h(y,m,g,t),!0):(0!==n||1!==r||2!==i)&&b(e,t,0,1,2)}var v=.99619469809,y=Object(a.e)(),m=Object(a.e)(),g=Object(a.e)(),O=Object(a.e)(),j=Object(a.e)();function w(e,t,n){return e!==n&&d(e,n),n[3]=-Object(o.g)(n,t),n}function _(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l();return p(n,Object(o.f)(s.d.get(),t,e),r)}function k(e,t,n){return!!Object(r.k)(t)&&L(e,t.origin,t.direction,!0,!1,n)}function x(e,t,n){return L(e,t.origin,t.vector,!1,!1,n)}function S(e,t,n){return L(e,t.origin,t.vector,!1,!0,n)}function T(e,t){return R(e,Object(c.c)(t))-t[3]>=0}function E(e,t){return R(e,t)>=0}function C(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5];return e[0]*(e[0]>0?n:a)+e[1]*(e[1]>0?r:o)+e[2]*(e[2]>0?i:s)+e[3]>=0}function P(e,t){var n=Object(o.g)(e,t.ray.direction),r=-R(e,t.ray.origin);if(r<0&&n>=0)return!1;if(n>-1e-6&&n<1e-6)return r>0;if((r<0||n<0)&&!(r<0&&n<0))return!0;var i=r/n;return n>0?i<t.c1&&(t.c1=i):i>t.c0&&(t.c0=i),t.c0<=t.c1}function I(e,t){var n=Object(o.g)(e,t.ray.direction),r=-R(e,t.ray.origin);if(n>-1e-6&&n<1e-6)return r>0;var i=r/n;return n>0?i<t.c1&&(t.c1=i):i>t.c0&&(t.c0=i),t.c0<=t.c1}function M(e,t,n){var r=Object(o.d)(s.d.get(),e,-e[3]),i=A(e,Object(o.i)(s.d.get(),t,r),s.d.get());return Object(o.e)(n,i,r),n}function A(e,t,n){var r=Object(o.d)(s.d.get(),e,Object(o.g)(e,t));return Object(o.i)(n,t,r),n}function R(e,t){return Object(o.g)(e,t)+e[3]}function L(e,t,n,r,a,s){var c=Object(o.g)(e,n);if(0===c)return!1;var l=-(Object(o.g)(e,t)+e[3])/c;return a&&(l=r?Math.max(0,l):Object(i.d)(l,0,1)),!(l<0||!r&&l>1)&&(Object(o.e)(s,t,Object(o.d)(s,n,l)),!0)}function F(e){return e}var D=[0,0,1,0],N=Object.freeze({__proto__:null,create:l,wrap:u,copy:d,fromValues:f,fromNormalAndOffset:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l();return Object(o.j)(n,e),n[3]=t,n},fromPositionAndNormal:p,fromPoints:h,fromManyPoints:function(e,t){return b(e,t,0,1,2)},fromManyPointsSampleAt:b,setOffsetFromPoint:w,negate:function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},fromVectorsAndPoint:_,intersectRay:k,intersectLineSegment:x,intersectLineSegmentClamp:S,isSphereFullyInside:T,isSphereFullyOutside:function(e,t){return R(e,Object(c.c)(t))+t[3]<0},isPointInside:E,isPointOutside:function(e,t){return R(e,t)<0},isAABBFullyInside:C,clip:P,clipInfinite:I,projectPoint:M,projectVector:A,distance:function(e,t){return Math.abs(R(e,t))},signedDistance:R,normal:F,UP:D})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return v})),n.d(t,"h",(function(){return k})),n.d(t,"i",(function(){return s})),n.d(t,"j",(function(){return g})),n.d(t,"k",(function(){return S})),n.d(t,"l",(function(){return u})),n.d(t,"m",(function(){return x})),n.d(t,"n",(function(){return m})),n.d(t,"o",(function(){return _})),n.d(t,"p",(function(){return p})),n.d(t,"q",(function(){return f})),n.d(t,"r",(function(){return d})),n.d(t,"s",(function(){return y})),n.d(t,"t",(function(){return O}));var r=n(27),i=n(64);function a(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function o(e,t,n,r,i,a,o,s,c,l,u,d,f,p,h,b,v){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e[6]=s,e[7]=c,e[8]=l,e[9]=u,e[10]=d,e[11]=f,e[12]=p,e[13]=h,e[14]=b,e[15]=v,e}function s(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function c(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function l(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],c=t[6],l=t[7],u=t[8],d=t[9],f=t[10],p=t[11],h=t[12],b=t[13],v=t[14],y=t[15],m=n*s-r*o,g=n*c-i*o,O=n*l-a*o,j=r*c-i*s,w=r*l-a*s,_=i*l-a*c,k=u*b-d*h,x=u*v-f*h,S=u*y-p*h,T=d*v-f*b,E=d*y-p*b,C=f*y-p*v,P=m*C-g*E+O*T+j*S-w*x+_*k;return P?(P=1/P,e[0]=(s*C-c*E+l*T)*P,e[1]=(i*E-r*C-a*T)*P,e[2]=(b*_-v*w+y*j)*P,e[3]=(f*w-d*_-p*j)*P,e[4]=(c*S-o*C-l*x)*P,e[5]=(n*C-i*S+a*x)*P,e[6]=(v*O-h*_-y*g)*P,e[7]=(u*_-f*O+p*g)*P,e[8]=(o*E-s*S+l*k)*P,e[9]=(r*S-n*E-a*k)*P,e[10]=(h*w-b*O+y*m)*P,e[11]=(d*O-u*w-p*m)*P,e[12]=(s*x-o*T-c*k)*P,e[13]=(n*T-r*x+i*k)*P,e[14]=(b*g-h*j-v*m)*P,e[15]=(u*j-d*g+f*m)*P,e):null}function u(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=t[8],f=t[9],p=t[10],h=t[11],b=t[12],v=t[13],y=t[14],m=t[15],g=n[0],O=n[1],j=n[2],w=n[3];return e[0]=g*r+O*s+j*d+w*b,e[1]=g*i+O*c+j*f+w*v,e[2]=g*a+O*l+j*p+w*y,e[3]=g*o+O*u+j*h+w*m,g=n[4],O=n[5],j=n[6],w=n[7],e[4]=g*r+O*s+j*d+w*b,e[5]=g*i+O*c+j*f+w*v,e[6]=g*a+O*l+j*p+w*y,e[7]=g*o+O*u+j*h+w*m,g=n[8],O=n[9],j=n[10],w=n[11],e[8]=g*r+O*s+j*d+w*b,e[9]=g*i+O*c+j*f+w*v,e[10]=g*a+O*l+j*p+w*y,e[11]=g*o+O*u+j*h+w*m,g=n[12],O=n[13],j=n[14],w=n[15],e[12]=g*r+O*s+j*d+w*b,e[13]=g*i+O*c+j*f+w*v,e[14]=g*a+O*l+j*p+w*y,e[15]=g*o+O*u+j*h+w*m,e}function d(e,t,n){var r,i,a,o,s,c,l,u,d,f,p,h,b=n[0],v=n[1],y=n[2];return t===e?(e[12]=t[0]*b+t[4]*v+t[8]*y+t[12],e[13]=t[1]*b+t[5]*v+t[9]*y+t[13],e[14]=t[2]*b+t[6]*v+t[10]*y+t[14],e[15]=t[3]*b+t[7]*v+t[11]*y+t[15]):(r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=t[8],f=t[9],p=t[10],h=t[11],e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=c,e[6]=l,e[7]=u,e[8]=d,e[9]=f,e[10]=p,e[11]=h,e[12]=r*b+s*v+d*y+t[12],e[13]=i*b+c*v+f*y+t[13],e[14]=a*b+l*v+p*y+t[14],e[15]=o*b+u*v+h*y+t[15]),e}function f(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function p(e,t,n,r){var a,o,s,c,l,u,d,f,p,h,b,v,y,m,g,O,j,w,_,k,x,S,T,E,C=r[0],P=r[1],I=r[2],M=Math.sqrt(C*C+P*P+I*I);return M<i.a?null:(C*=M=1/M,P*=M,I*=M,a=Math.sin(n),s=1-(o=Math.cos(n)),c=t[0],l=t[1],u=t[2],d=t[3],f=t[4],p=t[5],h=t[6],b=t[7],v=t[8],y=t[9],m=t[10],g=t[11],O=C*C*s+o,j=P*C*s+I*a,w=I*C*s-P*a,_=C*P*s-I*a,k=P*P*s+o,x=I*P*s+C*a,S=C*I*s+P*a,T=P*I*s-C*a,E=I*I*s+o,e[0]=c*O+f*j+v*w,e[1]=l*O+p*j+y*w,e[2]=u*O+h*j+m*w,e[3]=d*O+b*j+g*w,e[4]=c*_+f*k+v*x,e[5]=l*_+p*k+y*x,e[6]=u*_+h*k+m*x,e[7]=d*_+b*k+g*x,e[8]=c*S+f*T+v*E,e[9]=l*S+p*T+y*E,e[10]=u*S+h*T+m*E,e[11]=d*S+b*T+g*E,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function h(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],c=t[7],l=t[8],u=t[9],d=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+l*r,e[5]=o*i+u*r,e[6]=s*i+d*r,e[7]=c*i+f*r,e[8]=l*i-a*r,e[9]=u*i-o*r,e[10]=d*i-s*r,e[11]=f*i-c*r,e}function b(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],c=t[3],l=t[8],u=t[9],d=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-l*r,e[1]=o*i-u*r,e[2]=s*i-d*r,e[3]=c*i-f*r,e[8]=a*r+l*i,e[9]=o*r+u*i,e[10]=s*r+d*i,e[11]=c*r+f*i,e}function v(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],c=t[3],l=t[4],u=t[5],d=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+l*r,e[1]=o*i+u*r,e[2]=s*i+d*r,e[3]=c*i+f*r,e[4]=l*i-a*r,e[5]=u*i-o*r,e[6]=d*i-s*r,e[7]=f*i-c*r,e}function y(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function m(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function g(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function O(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function j(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=r+r,c=i+i,l=a+a,u=r*s,d=r*c,f=r*l,p=i*c,h=i*l,b=a*l,v=o*s,y=o*c,m=o*l;return e[0]=1-(p+b),e[1]=d+m,e[2]=f-y,e[3]=0,e[4]=d-m,e[5]=1-(u+b),e[6]=h+v,e[7]=0,e[8]=f+y,e[9]=h-v,e[10]=1-(u+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}var w=Object(r.e)();function _(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,c=i+i,l=n*o,u=r*o,d=r*s,f=i*o,p=i*s,h=i*c,b=a*o,v=a*s,y=a*c;return e[0]=1-d-h,e[1]=u+y,e[2]=f-v,e[3]=0,e[4]=u-y,e[5]=1-l-h,e[6]=p+b,e[7]=0,e[8]=f+v,e[9]=p-b,e[10]=1-l-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function k(e,t,n,r,i,a,o){var s=1/(n-t),c=1/(i-r),l=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*c,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*c,e[10]=(o+a)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*l,e[15]=0,e}function x(e,t,n,r,i,a,o){var s=1/(t-n),c=1/(r-i),l=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*c,e[14]=(o+a)*l,e[15]=1,e}function S(e,t,n,r){var a,o,c,l,u,d,f,p,h,b,v=t[0],y=t[1],m=t[2],g=r[0],O=r[1],j=r[2],w=n[0],_=n[1],k=n[2];return Math.abs(v-w)<i.a&&Math.abs(y-_)<i.a&&Math.abs(m-k)<i.a?s(e):(f=v-w,p=y-_,h=m-k,a=O*(h*=b=1/Math.sqrt(f*f+p*p+h*h))-j*(p*=b),o=j*(f*=b)-g*h,c=g*p-O*f,(b=Math.sqrt(a*a+o*o+c*c))?(a*=b=1/b,o*=b,c*=b):(a=0,o=0,c=0),l=p*c-h*o,u=h*a-f*c,d=f*o-p*a,(b=Math.sqrt(l*l+u*u+d*d))?(l*=b=1/b,u*=b,d*=b):(l=0,u=0,d=0),e[0]=a,e[1]=l,e[2]=f,e[3]=0,e[4]=o,e[5]=u,e[6]=p,e[7]=0,e[8]=c,e[9]=d,e[10]=h,e[11]=0,e[12]=-(a*v+o*y+c*m),e[13]=-(l*v+u*y+d*m),e[14]=-(f*v+p*y+h*m),e[15]=1,e)}function T(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}var E=u,C=T;Object.freeze({__proto__:null,copy:a,set:o,identity:s,transpose:c,invert:l,adjoint:function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],c=t[6],l=t[7],u=t[8],d=t[9],f=t[10],p=t[11],h=t[12],b=t[13],v=t[14],y=t[15];return e[0]=s*(f*y-p*v)-d*(c*y-l*v)+b*(c*p-l*f),e[1]=-(r*(f*y-p*v)-d*(i*y-a*v)+b*(i*p-a*f)),e[2]=r*(c*y-l*v)-s*(i*y-a*v)+b*(i*l-a*c),e[3]=-(r*(c*p-l*f)-s*(i*p-a*f)+d*(i*l-a*c)),e[4]=-(o*(f*y-p*v)-u*(c*y-l*v)+h*(c*p-l*f)),e[5]=n*(f*y-p*v)-u*(i*y-a*v)+h*(i*p-a*f),e[6]=-(n*(c*y-l*v)-o*(i*y-a*v)+h*(i*l-a*c)),e[7]=n*(c*p-l*f)-o*(i*p-a*f)+u*(i*l-a*c),e[8]=o*(d*y-p*b)-u*(s*y-l*b)+h*(s*p-l*d),e[9]=-(n*(d*y-p*b)-u*(r*y-a*b)+h*(r*p-a*d)),e[10]=n*(s*y-l*b)-o*(r*y-a*b)+h*(r*l-a*s),e[11]=-(n*(s*p-l*d)-o*(r*p-a*d)+u*(r*l-a*s)),e[12]=-(o*(d*v-f*b)-u*(s*v-c*b)+h*(s*f-c*d)),e[13]=n*(d*v-f*b)-u*(r*v-i*b)+h*(r*f-i*d),e[14]=-(n*(s*v-c*b)-o*(r*v-i*b)+h*(r*c-i*s)),e[15]=n*(s*f-c*d)-o*(r*f-i*d)+u*(r*c-i*s),e},determinant:function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],c=e[7],l=e[8],u=e[9],d=e[10],f=e[11],p=e[12],h=e[13],b=e[14],v=e[15];return(t*o-n*a)*(d*v-f*b)-(t*s-r*a)*(u*v-f*h)+(t*c-i*a)*(u*b-d*h)+(n*s-r*o)*(l*v-f*p)-(n*c-i*o)*(l*b-d*p)+(r*c-i*s)*(l*h-u*p)},multiply:u,translate:d,scale:f,rotate:p,rotateX:h,rotateY:b,rotateZ:v,fromTranslation:y,fromScaling:m,fromRotation:function(e,t,n){var r,a,o,s=n[0],c=n[1],l=n[2],u=Math.sqrt(s*s+c*c+l*l);return u<i.a?null:(s*=u=1/u,c*=u,l*=u,r=Math.sin(t),o=1-(a=Math.cos(t)),e[0]=s*s*o+a,e[1]=c*s*o+l*r,e[2]=l*s*o-c*r,e[3]=0,e[4]=s*c*o-l*r,e[5]=c*c*o+a,e[6]=l*c*o+s*r,e[7]=0,e[8]=s*l*o+c*r,e[9]=c*l*o-s*r,e[10]=l*l*o+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},fromXRotation:g,fromYRotation:function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromZRotation:O,fromRotationTranslation:j,fromQuat2:function(e,t){var n=w,r=-t[0],i=-t[1],a=-t[2],o=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=r*r+i*i+a*a+o*o;return d>0?(n[0]=2*(s*o+u*r+c*a-l*i)/d,n[1]=2*(c*o+u*i+l*r-s*a)/d,n[2]=2*(l*o+u*a+s*i-c*r)/d):(n[0]=2*(s*o+u*r+c*a-l*i),n[1]=2*(c*o+u*i+l*r-s*a),n[2]=2*(l*o+u*a+s*i-c*r)),j(e,t,n),e},getTranslation:function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},getScaling:function(e,t){var n=t[0],r=t[1],i=t[2],a=t[4],o=t[5],s=t[6],c=t[8],l=t[9],u=t[10];return e[0]=Math.sqrt(n*n+r*r+i*i),e[1]=Math.sqrt(a*a+o*o+s*s),e[2]=Math.sqrt(c*c+l*l+u*u),e},getRotation:function(e,t){var n=t[0]+t[5]+t[10],r=0;return n>0?(r=2*Math.sqrt(n+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e},fromRotationTranslationScale:function(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=t[3],c=i+i,l=a+a,u=o+o,d=i*c,f=i*l,p=i*u,h=a*l,b=a*u,v=o*u,y=s*c,m=s*l,g=s*u,O=r[0],j=r[1],w=r[2];return e[0]=(1-(h+v))*O,e[1]=(f+g)*O,e[2]=(p-m)*O,e[3]=0,e[4]=(f-g)*j,e[5]=(1-(d+v))*j,e[6]=(b+y)*j,e[7]=0,e[8]=(p+m)*w,e[9]=(b-y)*w,e[10]=(1-(d+h))*w,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},fromRotationTranslationScaleOrigin:function(e,t,n,r,i){var a=t[0],o=t[1],s=t[2],c=t[3],l=a+a,u=o+o,d=s+s,f=a*l,p=a*u,h=a*d,b=o*u,v=o*d,y=s*d,m=c*l,g=c*u,O=c*d,j=r[0],w=r[1],_=r[2],k=i[0],x=i[1],S=i[2],T=(1-(b+y))*j,E=(p+O)*j,C=(h-g)*j,P=(p-O)*w,I=(1-(f+y))*w,M=(v+m)*w,A=(h+g)*_,R=(v-m)*_,L=(1-(f+b))*_;return e[0]=T,e[1]=E,e[2]=C,e[3]=0,e[4]=P,e[5]=I,e[6]=M,e[7]=0,e[8]=A,e[9]=R,e[10]=L,e[11]=0,e[12]=n[0]+k-(T*k+P*x+A*S),e[13]=n[1]+x-(E*k+I*x+R*S),e[14]=n[2]+S-(C*k+M*x+L*S),e[15]=1,e},fromQuat:_,frustum:k,perspective:function(e,t,n,r,i){var a,o=1/Math.tan(t/2);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(a=1/(r-i),e[10]=(i+r)*a,e[14]=2*i*r*a):(e[10]=-1,e[14]=-2*r),e},perspectiveFromFieldOfView:function(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),c=2/(o+s),l=2/(i+a);return e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(o-s)*c*.5,e[9]=(i-a)*l*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e},ortho:x,lookAt:S,targetTo:function(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=r[0],c=r[1],l=r[2],u=i-n[0],d=a-n[1],f=o-n[2],p=u*u+d*d+f*f;p>0&&(u*=p=1/Math.sqrt(p),d*=p,f*=p);var h=c*f-l*d,b=l*u-s*f,v=s*d-c*u;return(p=h*h+b*b+v*v)>0&&(h*=p=1/Math.sqrt(p),b*=p,v*=p),e[0]=h,e[1]=b,e[2]=v,e[3]=0,e[4]=d*v-f*b,e[5]=f*h-u*v,e[6]=u*b-d*h,e[7]=0,e[8]=u,e[9]=d,e[10]=f,e[11]=0,e[12]=i,e[13]=a,e[14]=o,e[15]=1,e},str:function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},frob:function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e},subtract:T,multiplyScalar:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e},multiplyScalarAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},equals:function(e,t){var n=e[0],r=e[1],a=e[2],o=e[3],s=e[4],c=e[5],l=e[6],u=e[7],d=e[8],f=e[9],p=e[10],h=e[11],b=e[12],v=e[13],y=e[14],m=e[15],g=t[0],O=t[1],j=t[2],w=t[3],_=t[4],k=t[5],x=t[6],S=t[7],T=t[8],E=t[9],C=t[10],P=t[11],I=t[12],M=t[13],A=t[14],R=t[15];return Math.abs(n-g)<=i.a*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(r-O)<=i.a*Math.max(1,Math.abs(r),Math.abs(O))&&Math.abs(a-j)<=i.a*Math.max(1,Math.abs(a),Math.abs(j))&&Math.abs(o-w)<=i.a*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(s-_)<=i.a*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(c-k)<=i.a*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(l-x)<=i.a*Math.max(1,Math.abs(l),Math.abs(x))&&Math.abs(u-S)<=i.a*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(d-T)<=i.a*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(f-E)<=i.a*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(p-C)<=i.a*Math.max(1,Math.abs(p),Math.abs(C))&&Math.abs(h-P)<=i.a*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(b-I)<=i.a*Math.max(1,Math.abs(b),Math.abs(I))&&Math.abs(v-M)<=i.a*Math.max(1,Math.abs(v),Math.abs(M))&&Math.abs(y-A)<=i.a*Math.max(1,Math.abs(y),Math.abs(A))&&Math.abs(m-R)<=i.a*Math.max(1,Math.abs(m),Math.abs(R))},mul:E,sub:C})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return g})),n.d(t,"h",(function(){return O})),n.d(t,"i",(function(){return f})),n.d(t,"j",(function(){return y})),n.d(t,"k",(function(){return b})),n.d(t,"l",(function(){return a})),n.d(t,"m",(function(){return m}));var r=n(64);function i(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function a(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function o(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function s(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function c(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function l(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function u(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function d(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+a*a)}function f(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return n*n+r*r+i*i+a*a}function p(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)}function h(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i}function b(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o),e[0]=n*o,e[1]=r*o,e[2]=i*o,e[3]=a*o),e}function v(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function y(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=t[3];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e[3]=s+r*(n[3]-s),e}function m(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e}function g(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function O(e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=t[0],c=t[1],l=t[2],u=t[3];return Math.abs(n-s)<=r.a*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-c)<=r.a*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(a-l)<=r.a*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(o-u)<=r.a*Math.max(1,Math.abs(o),Math.abs(u))}var j=s,w=c,_=l,k=d,x=f,S=p,T=h;Object.freeze({__proto__:null,copy:i,set:a,add:o,subtract:s,multiply:c,divide:l,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},min:function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},max:function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},scale:u,scaleAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},distance:d,squaredDistance:f,length:p,squaredLength:h,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},normalize:b,dot:v,lerp:y,random:function(e,t){var n,i,a,o,s,c;t=t||1;do{s=(n=2*Object(r.b)()-1)*n+(i=2*Object(r.b)()-1)*i}while(s>=1);do{c=(a=2*Object(r.b)()-1)*a+(o=2*Object(r.b)()-1)*o}while(c>=1);var l=Math.sqrt((1-s)/c);return e[0]=t*n,e[1]=t*i,e[2]=t*a*l,e[3]=t*o*l,e},transformMat4:m,transformQuat:function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],c=n[2],l=n[3],u=l*r+s*a-c*i,d=l*i+c*r-o*a,f=l*a+o*i-s*r,p=-o*r-s*i-c*a;return e[0]=u*l+p*-o+d*-c-f*-s,e[1]=d*l+p*-s+f*-o-u*-c,e[2]=f*l+p*-c+u*-s-d*-o,e[3]=t[3],e},str:function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},exactEquals:g,equals:O,sub:j,mul:w,div:_,dist:k,sqrDist:x,len:S,sqrLen:T})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return b})),n.d(t,"f",(function(){return p})),n.d(t,"g",(function(){return f}));var r=n(35),i=n(14),a=n(22),o=n(4),s=n(136);function c(e){return e?e.__accessor__?e.__accessor__:e.propertyInvalidated?e:null:null}function l(e,t){return null!=e&&e.metadatas&&null!=e.metadatas[t]}function u(e,t,n){return d(e,t,n?{policy:n,path:""}:null)}function d(e,t,n){return t?Object.keys(t).reduce((function(e,r){var i=null,s="merge";if(n&&(i=n.path?"".concat(n.path,".").concat(r):r,s=n.policy(i)),"replace"===s)return e[r]=t[r],e;if(void 0===e[r])return e[r]=Object(a.a)(t[r]),e;var c=e[r],l=t[r];if(c===l)return e;if(Array.isArray(l)||Array.isArray(e))c=c?Array.isArray(c)?e[r]=c.concat():e[r]=[c]:e[r]=[],l&&(Array.isArray(l)||(l=[l]),l.forEach((function(e){-1===c.indexOf(e)&&c.push(e)})));else if(l&&"object"==typeof l)if(n){var u=n.path;n.path=Object(o.d)(i),e[r]=d(c,l,n),n.path=u}else e[r]=d(c,l,null);else e.hasOwnProperty(r)&&!t.hasOwnProperty(r)||(e[r]=l);return e}),e||{}):e}function f(e){return e?"string"==typeof e&&-1===e.indexOf(".")?e:p(e):e}function p(e){return Array.isArray(e)?e:e.split(".")}function h(e){return e.indexOf(",")>-1?e.split(",").map((function(e){return e.trim()})):[e.trim()]}function b(e,t,n,a){var o=function(e){if(Array.isArray(e)){var t,n=[],a=Object(i.a)(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;n.push.apply(n,Object(r.a)(h(o)))}}catch(s){a.e(s)}finally{a.f()}return n}return h(e)}(t);if(1!==o.length){var c=o.map((function(t){return a(e,t,n)}));return Object(s.b)(c)}return a(e,o[0],n)}function v(e){var t=!1;return function(){t||(t=!0,e())}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return p}));var r=n(2),i=n(3),a=n(5),o=n(6),s=n(0),c=n(1),l=n(8),u=n(36),d=n(51),f=n(404),p=function(e){var t=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"destroy",value:function(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())}},{key:"handles",get:function(){return this._get("handles")||new d.a}},{key:"updatingHandles",get:function(){return this._get("updatingHandles")||new f.a}}]),n}(e);return Object(s.a)([Object(c.b)({readOnly:!0})],t.prototype,"handles",null),Object(s.a)([Object(c.b)({readOnly:!0})],t.prototype,"updatingHandles",null),t=Object(s.a)([Object(l.a)("esri.core.HandleOwner")],t),t},h=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return n}(p(u.a));h=Object(s.a)([Object(l.a)("esri.core.HandleOwner")],h)},function(e,t,n){"use strict";n.r(t);var r=n(67);n.d(t,"NODEJS_DEFAULT_REFERER_HEADER",(function(){return r.b})),n.d(t,"setDefaultRequestOptions",(function(){return r.e})),n.d(t,"ArcGISAuthError",(function(){return r.a})),n.d(t,"checkForErrors",(function(){return r.c})),n.d(t,"request",(function(){return r.d}));var i=n(292);n.d(t,"appendCustomParams",(function(){return i.a}));var a=n(339);n.d(t,"ArcGISRequestError",(function(){return a.a}));var o=n(581);n.d(t,"cleanUrl",(function(){return o.a}));var s=n(491);n.d(t,"encodeFormData",(function(){return s.a}));var c=n(353);n.d(t,"encodeParam",(function(){return c.a})),n.d(t,"encodeQueryString",(function(){return c.b}));var l=n(688);n.d(t,"decodeParam",(function(){return l.a})),n.d(t,"decodeQueryString",(function(){return l.b}));var u=n(722);n.d(t,"ErrorTypes",(function(){return u.a}));var d=n(723);for(var f in d)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(f)<0&&function(e){n.d(t,e,(function(){return d[e]}))}(f);var p=n(724);for(var f in p)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(f)<0&&function(e){n.d(t,e,(function(){return p[e]}))}(f);var h=n(725);for(var f in h)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(f)<0&&function(e){n.d(t,e,(function(){return h[e]}))}(f);var b=n(726);for(var f in b)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(f)<0&&function(e){n.d(t,e,(function(){return b[e]}))}(f);var v=n(727);for(var f in v)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(f)<0&&function(e){n.d(t,e,(function(){return v[e]}))}(f);var y=n(728);for(var f in y)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(f)<0&&function(e){n.d(t,e,(function(){return y[e]}))}(f);var m=n(729);for(var f in m)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(f)<0&&function(e){n.d(t,e,(function(){return m[e]}))}(f);var g=n(730);for(var f in g)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(f)<0&&function(e){n.d(t,e,(function(){return g[e]}))}(f);var O=n(731);for(var f in O)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(f)<0&&function(e){n.d(t,e,(function(){return O[e]}))}(f);var j=n(732);for(var f in j)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes"].indexOf(f)<0&&function(e){n.d(t,e,(function(){return j[e]}))}(f);var w=n(303);n.d(t,"requiresFormData",(function(){return w.b})),n.d(t,"processParams",(function(){return w.a}));var _=n(733);for(var f in _)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes","requiresFormData","processParams"].indexOf(f)<0&&function(e){n.d(t,e,(function(){return _[e]}))}(f);var k=n(734);for(var f in k)["default","NODEJS_DEFAULT_REFERER_HEADER","setDefaultRequestOptions","ArcGISAuthError","checkForErrors","request","appendCustomParams","ArcGISRequestError","cleanUrl","encodeFormData","encodeParam","encodeQueryString","decodeParam","decodeQueryString","ErrorTypes","requiresFormData","processParams"].indexOf(f)<0&&function(e){n.d(t,e,(function(){return k[e]}))}(f);var x=n(232);n.d(t,"warn",(function(){return x.a}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s}));n(16);var r=n(38);function i(e){return Object(r.e)(e.x,e.y)}function a(e,t){var n=(e instanceof HTMLElement?e:e.surface).getBoundingClientRect();return Object(r.e)(t.clientX-n.left,t.clientY-n.top)}function o(e,t){return t instanceof Event?a(e,t):i(t)}function s(e){if(e instanceof Event)return!0;if("object"==typeof e&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;case"key-down":case"key-up":case"gamepad":case"focus":case"blur":default:return!1}return!1}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return p}));var r,i,a,o,s,c=n(65),l=null!=(r=null==(i=c.a.esriConfig)?void 0:i.locale)?r:null==(a=c.a.dojoConfig)?void 0:a.locale;function u(){var e,t;return null!=(e=null!=l?l:null==(t=c.a.navigator)?void 0:t.language)?e:"en"}function d(){return void 0===s&&(s=u()),s}var f=[];function p(e){return f.push(e),{remove:function(){f.splice(f.indexOf(e),1)}}}var h=[];function b(e){return h.push(e),{remove:function(){f.splice(h.indexOf(e),1)}}}function v(){var e,t=null!=(e=o)?e:u();s!==t&&(s=t,[].concat(h).forEach((function(e){e.call(null,t)})),[].concat(f).forEach((function(e){e.call(null,t)})))}null==c.a.addEventListener||c.a.addEventListener("languagechange",v)},function(e,t,n){e.exports=n(814)()},function(e,t,n){"use strict";function r(){return[0,0,0,0]}function i(e){return[e[0],e[1],e[2],e[3]]}function a(e,t,n,r){return[e,t,n,r]}function o(e){for(var t=[0,0,0,0],n=Math.min(4,e.length),r=0;r<n;++r)t[r]=e[r];return t}function s(e,t){return new Float64Array(e,t,4)}function c(){return[0,0,0,0]}function l(){return a(1,1,1,1)}function u(){return a(1,0,0,0)}function d(){return a(0,1,0,0)}function f(){return a(0,0,1,0)}function p(){return a(0,0,0,1)}n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return i})),n.d(t,"g",(function(){return o}));var h=[0,0,0,0],b=l(),v=u(),y=d(),m=f(),g=p();Object.freeze({__proto__:null,create:r,clone:i,fromValues:a,fromArray:o,createView:s,zeros:c,ones:l,unitX:u,unitY:d,unitZ:f,unitW:p,ZEROS:h,ONES:b,UNIT_X:v,UNIT_Y:y,UNIT_Z:m,UNIT_W:g})},function(e,t,n){"use strict";var r=n(65),i=(n(16),n(100)),a={apiKey:void 0,applicationUrl:r.a.location&&r.a.location.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryService:null,geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(r.a.esriConfig&&(Object(i.a)(a,r.a.esriConfig,!0),delete a.has),!a.assetsPath){a.assetsPath="https://js.arcgis.com/".concat("4.19.0".slice(0,-2),"/@arcgis/core/assets")}a.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(a,"baseUrl",{set:function(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath")}}),a.request.corsEnabledServers=[],a.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0},t.a=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(14),i=n(2),a=n(3),o=n(13),s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(i.a)(this,e),this.eventType=t,this.keyModifiers=n}return Object(a.a)(e,[{key:"matches",value:function(e){if(e.type!==this.eventType)return!1;if(0===this.keyModifiers.length)return!0;var t,n=e.modifiers,i=Object(r.a)(this.keyModifiers);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(!n.has(a))return!1}}catch(o){i.e(o)}finally{i.f()}return!0}}]),e}(),c=o.a.getLogger("esri.views.input.InputHandler"),l=function(){function e(t){Object(i.a)(this,e),this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}return Object(a.a)(e,[{key:"incomingEventMatches",get:function(){if(!this._incomingEventMatches)for(var e in this._incomingEventMatches=[],this._incoming){var t,n=this._incoming[e],i=Object(r.a)(n);try{for(i.s();!(t=i.n()).done;){var a=t.value;this._incomingEventMatches.push(a.match)}}catch(o){i.e(o)}finally{i.f()}}return this._incomingEventMatches}},{key:"incomingEventTypes",get:function(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map((function(e){return e.eventType}))),this._incomingEventTypes}},{key:"outgoingEventTypes",get:function(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}},{key:"hasSideEffects",get:function(){return this._hasSideEffects}},{key:"hasPendingInputs",get:function(){return!1}},{key:"onInstall",value:function(e){var t=this;this._manager?c.error("This InputHandler has already been registered with an InputManager"):(e.setEventCallback((function(e){return t._handleEvent(e)})),e.setUninstallCallback((function(){return t._onUninstall()})),this._manager=e)}},{key:"onUninstall",value:function(){}},{key:"registerIncoming",value:function(e,t,n){var r,i=this;"function"==typeof t?(n=t,r=[]):r=t||[];var a="string"==typeof e?new s(e,r):e,o=function(){i._incomingEventTypes=null,i._incomingEventMatches=null},c=function(e){var t=i._incoming[e.match.eventType];if(t){var n=t.indexOf(e);t.splice(n,1),o(),i._manager&&i._manager.updateDependencies()}},l=new u(a,n,{onPause:c,onRemove:c,onResume:function(e){var t=i._incoming[e.match.eventType];t&&-1===t.indexOf(e)&&(t.push(e),o(),i._manager&&i._manager.updateDependencies())}}),d=this._incoming[a.eventType];return d||(d=[],this._incoming[a.eventType]=d),d.push(l),o(),this._manager&&this._manager.updateDependencies(),l}},{key:"registerOutgoing",value:function(e){var t=this;if(this._outgoing[e])throw Error("There is already a callback registered for this outgoing InputEvent: "+e);var n=new d(e,{onEmit:function(e,n,r,i){t._manager.emit(e.eventType,n,r,i)},onRemove:function(e){delete t._outgoing[e.eventType],t._manager.updateDependencies()}});return this._outgoing[e]=n,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),n}},{key:"startCapturingPointer",value:function(e){this._manager.setPointerCapture(e,!0)}},{key:"stopCapturingPointer",value:function(e){this._manager.setPointerCapture(e,!1)}},{key:"refreshHasPendingInputs",value:function(){this._manager.refreshHasPendingInputs()}},{key:"_onUninstall",value:function(){this._manager?(this.onUninstall(),this._manager=null):c.error("This InputHandler is not registered with an InputManager")}},{key:"_handleEvent",value:function(e){var t=this._incoming[e.type];if(t){var n,i=Object(r.a)(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.match.matches(e)&&(a.callback(e),e.shouldStopPropagation()))break}}catch(o){i.e(o)}finally{i.f()}}}}]),e}(),u=function(){function e(t,n,r){Object(i.a)(this,e),this.match=t,this._callback=n,this._handler=r}return Object(a.a)(e,[{key:"pause",value:function(){this._handler.onPause(this)}},{key:"resume",value:function(){this._handler.onResume(this)}},{key:"remove",value:function(){this._handler.onRemove(this)}},{key:"callback",get:function(){return this._callback}}]),e}(),d=function(){function e(t,n){Object(i.a)(this,e),this.eventType=t,this._removed=!1,this._handler=n}return Object(a.a)(e,[{key:"emit",value:function(e,t,n){this._removed||this._handler.onEmit(this,e,t,n)}},{key:"remove",value:function(){this._removed=!0,this._handler.onRemove(this)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s}));var r=n(14),i=n(22);function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return l(e,t,n)}function o(e,t){if(null!=t)return t[e]||c(e.split("."),!1,t)}function s(e,t,n){var r=e.split("."),i=r.pop(),a=c(r,!0,n);a&&i&&(a[i]=t)}function c(e,t,n){var i,a=n,o=Object(r.a)(e);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(null==a)return;if(!(s in a)){if(!t)return;a[s]={}}a=a[s]}}catch(c){o.e(c)}finally{o.f()}return a}function l(e,t,n){return t?Object.keys(t).reduce((function(e,r){var a=e[r],o=t[r];return a===o?e:void 0===a?(e[r]=Object(i.a)(o),e):(Array.isArray(o)||Array.isArray(e)?(a=a?Array.isArray(a)?e[r]=a.concat():e[r]=[a]:e[r]=[],o&&(Array.isArray(o)||(o=[o]),n?o.forEach((function(e){-1===a.indexOf(e)&&a.push(e)})):e[r]=o.concat())):o&&"object"==typeof o?e[r]=l(a,o,n):e.hasOwnProperty(r)&&!t.hasOwnProperty(r)||(e[r]=o),e)}),e||{}):e}},function(e,t,n){"use strict";function r(e){var t=JSON.parse(JSON.stringify(e));return t.data&&("undefined"!==typeof Blob&&e.data instanceof Blob||"ReadStream"===e.data.constructor.name?t.file=e.data:t.text=e.data,delete t.data),t}function i(e){return e.owner?Promise.resolve(e.owner):e.item&&e.item.owner?Promise.resolve(e.item.owner):e.authentication&&e.authentication.getUsername?e.authentication.getUsername():Promise.reject(new Error("Could not determine the owner of this item. Pass the `owner`, `item.owner`, or `authentication` option."))}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return y}));var r=n(10),i=n(47),a=n(95),o={year:"numeric",month:"numeric",day:"numeric"},s={year:"numeric",month:"long",day:"numeric"},c={year:"numeric",month:"short",day:"numeric"},l={year:"numeric",month:"long",weekday:"long",day:"numeric"},u={hour:"numeric",minute:"numeric"},d=Object(r.a)(Object(r.a)({},u),{},{second:"numeric"}),f={"short-date":o,"short-date-short-time":Object(r.a)(Object(r.a)({},o),u),"short-date-short-time-24":Object(r.a)(Object(r.a)(Object(r.a)({},o),u),{},{hour12:!1}),"short-date-long-time":Object(r.a)(Object(r.a)({},o),d),"short-date-long-time-24":Object(r.a)(Object(r.a)(Object(r.a)({},o),d),{},{hour12:!1}),"short-date-le":o,"short-date-le-short-time":Object(r.a)(Object(r.a)({},o),u),"short-date-le-short-time-24":Object(r.a)(Object(r.a)(Object(r.a)({},o),u),{},{hour12:!1}),"short-date-le-long-time":Object(r.a)(Object(r.a)({},o),d),"short-date-le-long-time-24":Object(r.a)(Object(r.a)(Object(r.a)({},o),d),{},{hour12:!1}),"long-month-day-year":s,"long-month-day-year-short-time":Object(r.a)(Object(r.a)({},s),u),"long-month-day-year-short-time-24":Object(r.a)(Object(r.a)(Object(r.a)({},s),u),{},{hour12:!1}),"long-month-day-year-long-time":Object(r.a)(Object(r.a)({},s),d),"long-month-day-year-long-time-24":Object(r.a)(Object(r.a)(Object(r.a)({},s),d),{},{hour12:!1}),"day-short-month-year":c,"day-short-month-year-short-time":Object(r.a)(Object(r.a)({},c),u),"day-short-month-year-short-time-24":Object(r.a)(Object(r.a)(Object(r.a)({},c),u),{},{hour12:!1}),"day-short-month-year-long-time":Object(r.a)(Object(r.a)({},c),d),"day-short-month-year-long-time-24":Object(r.a)(Object(r.a)(Object(r.a)({},c),d),{},{hour12:!1}),"long-date":l,"long-date-short-time":Object(r.a)(Object(r.a)({},l),u),"long-date-short-time-24":Object(r.a)(Object(r.a)(Object(r.a)({},l),u),{},{hour12:!1}),"long-date-long-time":Object(r.a)(Object(r.a)({},l),d),"long-date-long-time-24":Object(r.a)(Object(r.a)(Object(r.a)({},l),d),{},{hour12:!1}),"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":u,"long-time":d},p=Object(i.b)()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),h=(p.apiValues,p.toJSON.bind(p),p.fromJSON.bind(p),{ar:"ar-u-nu-latn-ca-gregory"}),b=new WeakMap,v=f["short-date-short-time"];function y(e){var t=e||v;if(!b.has(t)){var n=Object(a.b)(),r=h[Object(a.b)()]||n;b.set(t,new Intl.DateTimeFormat(r,t))}return b.get(t)}function m(e){return f[e]||null}function g(e,t){return y(t).format(e)}Object(a.a)((function(){b=new WeakMap,v=f["short-date-short-time"]}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return h})),n.d(t,"h",(function(){return u})),n.d(t,"i",(function(){return d})),n.d(t,"j",(function(){return f})),n.d(t,"k",(function(){return p}));var r=function(e){return"@@redux-saga/"+e},i=r("CANCEL_PROMISE"),a=r("CHANNEL_END"),o=r("IO"),s=r("MATCH"),c=r("MULTICAST"),l=r("SAGA_ACTION"),u=r("SELF_CANCELLATION"),d=r("TASK"),f=r("TASK_CANCEL"),p=r("TERMINATE"),h=r("LOCATION")},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(2),i=n(5),a=n(6),o=n(0),s=n(1),c=n(8),l=n(28),u=n(39),d=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).enabled=!0,e}return n}(l.a);Object(o.a)([Object(s.b)({type:Boolean})],d.prototype,"enabled",void 0),d=Object(o.a)([Object(c.a)("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],d);var f=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).lineSnapper=new d,i.parallelLineSnapper=new d,i.rightAngleSnapper=new d,i.rightAngleTriangleSnapper=new d,i.shortLineThreshold=15,i.distance=5,i.pointThreshold=1e-6,i.intersectionParallelLineThreshold=1e-6,i.parallelLineThreshold=1e-6,i.touchSensitivityMultiplier=1.5,i.pointOnLineThreshold=1e-6,i.orange=new u.a([255,127,0]),i.lineHintWidthReference=3,i.lineHintWidthTarget=3,i.lineHintFadedExtensions=.3,i.parallelLineHintWidth=2,i.parallelLineHintLength=24,i.parallelLineHintOffset=1.5,i.rightAngleHintSize=24,i.rightAngleHintOutlineSize=1.5,i}return n}(l.a);Object(o.a)([Object(s.b)({type:d,constructOnly:!0,nonNullable:!0,json:{write:!0}})],f.prototype,"lineSnapper",void 0),Object(o.a)([Object(s.b)({type:d,constructOnly:!0,nonNullable:!0,json:{write:!0}})],f.prototype,"parallelLineSnapper",void 0),Object(o.a)([Object(s.b)({type:d,constructOnly:!0,nonNullable:!0,json:{write:!0}})],f.prototype,"rightAngleSnapper",void 0),Object(o.a)([Object(s.b)({type:d,constructOnly:!0,nonNullable:!0,json:{write:!0}})],f.prototype,"rightAngleTriangleSnapper",void 0),Object(o.a)([Object(s.b)({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],f.prototype,"shortLineThreshold",void 0),Object(o.a)([Object(s.b)({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],f.prototype,"distance",void 0),Object(o.a)([Object(s.b)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],f.prototype,"pointThreshold",void 0),Object(o.a)([Object(s.b)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],f.prototype,"intersectionParallelLineThreshold",void 0),Object(o.a)([Object(s.b)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],f.prototype,"parallelLineThreshold",void 0),Object(o.a)([Object(s.b)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],f.prototype,"touchSensitivityMultiplier",void 0),Object(o.a)([Object(s.b)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],f.prototype,"pointOnLineThreshold",void 0),Object(o.a)([Object(s.b)({type:u.a,nonNullable:!0})],f.prototype,"orange",void 0),Object(o.a)([Object(s.b)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],f.prototype,"lineHintWidthReference",void 0),Object(o.a)([Object(s.b)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],f.prototype,"lineHintWidthTarget",void 0),Object(o.a)([Object(s.b)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],f.prototype,"lineHintFadedExtensions",void 0),Object(o.a)([Object(s.b)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],f.prototype,"parallelLineHintWidth",void 0),Object(o.a)([Object(s.b)({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],f.prototype,"parallelLineHintLength",void 0),Object(o.a)([Object(s.b)({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],f.prototype,"parallelLineHintOffset",void 0),Object(o.a)([Object(s.b)({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],f.prototype,"rightAngleHintSize",void 0),Object(o.a)([Object(s.b)({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],f.prototype,"rightAngleHintOutlineSize",void 0);var p=new(f=Object(o.a)([Object(c.a)("esri.views.interactive.snapping.Settings.Defaults")],f))},function(e,t,n){"use strict";var r=n(10),i=n(2),a=n(3),o=n(4),s=n(45),c=n(469),l=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(i.a)(this,e),this._context=null,this._glName=null,this._descriptor=void 0,this._samplingModeDirty=!1,this._wrapModeDirty=!1,t.instanceCounter.increment(0,this),this._context=t,this._descriptor=Object(r.a)({target:3553,samplingMode:9729,wrapMode:10497,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1},n),this.setData(a)}return Object(a.a)(e,[{key:"glName",get:function(){return this._glName}},{key:"descriptor",get:function(){return this._descriptor}},{key:"dispose",value:function(){if(this._context&&this._context.gl){if(this._glName){var e=this._context.gl;this._context.unbindTextureAllUnits(this),e.deleteTexture(this._glName),this._glName=null}this._context.instanceCounter.decrement(0,this),this._context=null}}},{key:"release",value:function(){this.dispose()}},{key:"resize",value:function(e,t){var n=this._descriptor;n.width===e&&n.height===t||(n.width=e,n.height=t,this.setData(null))}},{key:"setData",value:function(t){if(this._context&&this._context.gl){var n=this._context.gl;this._glName||(this._glName=n.createTexture()),void 0===t&&(t=null),null===t&&(this._descriptor.width=this._descriptor.width||4,this._descriptor.height=this._descriptor.height||4);var r=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var i=this._descriptor;e._validateTexture(this._context,i),n.pixelStorei(n.UNPACK_ALIGNMENT,i.unpackAlignment),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,i.flipped?1:0),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.preMultiplyAlpha?1:0);var a=i.pixelFormat,s=i.internalFormat?i.internalFormat:a;if(t instanceof ImageData||t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement){var c=t.width,l=t.height;t instanceof HTMLVideoElement&&(c=t.videoWidth,l=t.videoHeight),i.width&&i.height&&console.assert(c===i.width&&l===i.height),n.texImage2D(n.TEXTURE_2D,0,s,a,i.dataType,t),i.hasMipmap&&this.generateMipmap(),void 0===i.width&&(i.width=c),void 0===i.height&&(i.height=l)}else{null!=i.width&&null!=i.height||console.error("Width and height must be specified!"),n.DEPTH24_STENCIL8&&s===n.DEPTH_STENCIL&&(s=n.DEPTH24_STENCIL8);var u=i.width,d=i.height;if(function(e){return Object(o.k)(e)&&"type"in e&&"compressed"===e.type}(t)){var f=Math.round(Math.log(Math.max(u,d))/Math.LN2)+1;i.hasMipmap=i.hasMipmap&&f===t.levels.length;for(var p=0;;++p){var h=t.levels[Math.min(p,t.levels.length-1)];if(n.compressedTexImage2D(n.TEXTURE_2D,p,s,u,d,0,h),1===u&&1===d||!i.hasMipmap)break;u=Math.max(1,u>>1),d=Math.max(1,d>>1)}}else if(Object(o.k)(t))n.texImage2D(n.TEXTURE_2D,0,s,u,d,0,a,i.dataType,t),i.hasMipmap&&this.generateMipmap();else for(var b=0;n.texImage2D(n.TEXTURE_2D,b,s,u,d,0,a,i.dataType,null),(1!==u||1!==d)&&i.hasMipmap;++b)u=Math.max(1,u>>1),d=Math.max(1,d>>1)}e._applySamplingMode(n,this._descriptor),e._applyWrapMode(n,this._descriptor),e._applyAnisotropicFilteringParameters(this._context,this._descriptor),r&&this._context.bindTexture(r,0)}}},{key:"updateData",value:function(e,t,n,r,i,a){a||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");var o=this._context.gl,s=this._descriptor,c=this._context.getBoundTexture(0);this._context.bindTexture(this,0),(t<0||n<0||r>s.width||i>s.height||t+r>s.width||n+i>s.height)&&console.error("An attempt to update out of bounds of the texture!"),o.pixelStorei(o.UNPACK_ALIGNMENT,s.unpackAlignment),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,s.flipped?1:0),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.preMultiplyAlpha?1:0),a instanceof ImageData||a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement?o.texSubImage2D(o.TEXTURE_2D,e,t,n,s.pixelFormat,s.dataType,a):o.texSubImage2D(o.TEXTURE_2D,e,t,n,r,i,s.pixelFormat,s.dataType,a),this._context.bindTexture(c,0)}},{key:"generateMipmap",value:function(){var t=this._descriptor;t.hasMipmap||(t.hasMipmap=!0,this._samplingModeDirty=!0,e._validateTexture(this._context,t)),9729===t.samplingMode?(this._samplingModeDirty=!0,t.samplingMode=9985):9728===t.samplingMode&&(this._samplingModeDirty=!0,t.samplingMode=9984);var n=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var r=this._context.gl;r.generateMipmap(r.TEXTURE_2D),this._context.bindTexture(n,0)}},{key:"setSamplingMode",value:function(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,e._validateTexture(this._context,this._descriptor),this._samplingModeDirty=!0)}},{key:"setWrapMode",value:function(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,e._validateTexture(this._context,this._descriptor),this._wrapModeDirty=!0)}},{key:"applyChanges",value:function(){var t=this._context.gl,n=this._descriptor;this._samplingModeDirty&&(e._applySamplingMode(t,n),this._samplingModeDirty=!1),this._wrapModeDirty&&(e._applyWrapMode(t,n),this._wrapModeDirty=!1)}}],[{key:"_validateTexture",value:function(e,t){(t.width<0||t.height<0)&&console.error("Negative dimension parameters are not allowed!");var n=Object(s.k)(t.width)&&Object(s.k)(t.height);Object(c.a)(e.gl)||n||("number"==typeof t.wrapMode?33071!==t.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):33071===t.wrapMode.s&&33071===t.wrapMode.t||console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),t.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))}},{key:"_applySamplingMode",value:function(e,t){var n=t.samplingMode,r=t.samplingMode;9985===n||9987===n?(n=9729,t.hasMipmap||(r=9729)):9984!==n&&9986!==n||(n=9728,t.hasMipmap||(r=9728)),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,r)}},{key:"_applyWrapMode",value:function(e,t){"number"==typeof t.wrapMode?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,t.wrapMode),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,t.wrapMode)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,t.wrapMode.s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,t.wrapMode.t))}},{key:"_applyAnisotropicFilteringParameters",value:function(e,t){if(null!=t.maxAnisotropy){var n=e.capabilities.textureFilterAnisotropic;if(n){var r=e.gl;r.texParameterf(r.TEXTURE_2D,n.TEXTURE_MAX_ANISOTROPY,t.maxAnisotropy)}}}}]),e}();t.a=l},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return o}));var r=n(10),i=n(12);function a(e,t){var n={query:e};return t&&((n=Object(r.a)(Object(r.a)({},t),n)).query=Object(r.a)(Object(r.a)({},n.query),t.query)),n}function o(e){return"string"==typeof e?Object(i.J)(e):e}function s(e,t,n){var r={};for(var i in e)if("declaredClass"!==i){var a=e[i];if(null!=a&&"function"!=typeof a)if(Array.isArray(a)){r[i]=[];for(var o=0;o<a.length;o++)r[i][o]=s(a[o])}else if("object"==typeof a)if(a.toJSON){var c=a.toJSON(n&&n[i]);r[i]=t?c:JSON.stringify(c)}else r[i]=t?a:JSON.stringify(a);else r[i]=a}return r}},function(e,t,n){"use strict";function r(e,t){if(e.forEach)e.forEach(t);else for(var n=0;n<e.length;n++)t(e[n],n,e)}function i(e,t,n){if(e.slice)return e.slice(t,n);void 0===t?t=0:(t<0&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),void 0===n?n=e.length:(n<0&&(n+=e.length),n=Math.min(e.length,Math.max(0,n)));for(var r=Math.max(0,n-t),i=new(0,e.constructor)(r),a=0;a<r;a++)i[a]=e[t+a];return i}function a(e){return e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name}function o(e){return e instanceof Int8Array||e&&e.constructor&&"Int8Array"===e.constructor.name}function s(e){return e instanceof Uint8Array||e&&e.constructor&&"Uint8Array"===e.constructor.name}function c(e){return e instanceof Uint8ClampedArray||e&&e.constructor&&"Uint8ClampedArray"===e.constructor.name}function l(e){return e instanceof Int16Array||e&&e.constructor&&"Int16Array"===e.constructor.name}function u(e){return e instanceof Uint16Array||e&&e.constructor&&"Uint16Array"===e.constructor.name}function d(e){return e instanceof Int32Array||e&&e.constructor&&"Int32Array"===e.constructor.name}function f(e){return e instanceof Uint32Array||e&&e.constructor&&"Uint32Array"===e.constructor.name}function p(e){return e instanceof Float32Array||e&&e.constructor&&"Float32Array"===e.constructor.name}function h(e){return e instanceof Float64Array||e&&e.constructor&&"Float64Array"===e.constructor.name}function b(e){for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e[n];return t}function v(e){return e?128+e.buffer.byteLength+64:0}n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"h",(function(){return o})),n.d(t,"i",(function(){return u})),n.d(t,"j",(function(){return f})),n.d(t,"k",(function(){return s})),n.d(t,"l",(function(){return c})),n.d(t,"m",(function(){return i})),n.d(t,"n",(function(){return b}))},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(22)),u=(n(13),n(17),n(1)),d=n(8),f=n(42),p=(n(12),n(19),n(20),n(44)),h=n(150),b=n(43),v=n(63),y=n(313),m=n(470);var g=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).paths=[],e.type="polyline",e}return Object(a.a)(n,[{key:"normalizeCtorArgs",value:function(e,t){var n,r,i,a=null;return e&&!Array.isArray(e)?(a=e.paths?e.paths:null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),n=e.hasZ,r=e.hasM):a=e,a=a||[],t=t||p.a.WGS84,a.length&&a[0]&&null!=a[0][0]&&"number"==typeof a[0][0]&&(a=[a]),(i=a[0]&&a[0][0])&&(void 0===n&&void 0===r?(n=i.length>2,r=!1):void 0===n?n=!r&&i.length>3:void 0===r&&(r=!n&&i.length>3)),{paths:a,spatialReference:t,hasZ:n,hasM:r}}},{key:"cache",get:function(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}},{key:"extent",get:function(){var e=this.spatialReference,t=Object(m.c)(this);if(!t)return null;var n=new v.a(t);return n.spatialReference=e,n}},{key:"writePaths",value:function(e,t){t.paths=Object(l.a)(this.paths)}},{key:"addPath",value:function(e){if(e){var t=this.paths,n=t.length;if(function(e){return!Array.isArray(e[0])}(e)){for(var r=[],i=0,a=e.length;i<a;i++)r[i]=e[i].toArray();t[n]=r}else t[n]=e.concat();return this.notifyChange("paths"),this}}},{key:"clone",value:function(){var e=new r;return e.spatialReference=this.spatialReference,e.paths=Object(l.a)(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}},{key:"getPoint",value:function(e,t){if(!this._validateInputs(e,t))return null;var n=this.paths[e][t],r=this.hasZ,i=this.hasM;return r&&!i?new b.a(n[0],n[1],n[2],void 0,this.spatialReference):i&&!r?new b.a(n[0],n[1],void 0,n[2],this.spatialReference):r&&i?new b.a(n[0],n[1],n[2],n[3],this.spatialReference):new b.a(n[0],n[1],this.spatialReference)}},{key:"insertPoint",value:function(e,t,n){return this._validateInputs(e,t,!0)?(Object(y.a)(this,n),Array.isArray(n)||(n=n.toArray()),this.paths[e].splice(t,0,n),this.notifyChange("paths"),this):this}},{key:"removePath",value:function(e){if(!this._validateInputs(e,null))return null;var t=this.paths.splice(e,1)[0],n=this.spatialReference,r=t.map((function(e){return new b.a(e,n)}));return this.notifyChange("paths"),r}},{key:"removePoint",value:function(e,t){if(!this._validateInputs(e,t))return null;var n=new b.a(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),n}},{key:"setPoint",value:function(e,t,n){return this._validateInputs(e,t)?(Object(y.a)(this,n),Array.isArray(n)||(n=n.toArray()),this.paths[e][t]=n,this.notifyChange("paths"),this):this}},{key:"_validateInputs",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||e<0||e>=this.paths.length)return!1;if(null!=t){var r=this.paths[e];if(n&&(t<0||t>r.length))return!1;if(!n&&(t<0||t>=r.length))return!1}return!0}},{key:"toJSON",value:function(e){return this.write(null,e)}}]),n}(h.a);Object(c.a)([Object(u.b)({readOnly:!0})],g.prototype,"cache",null),Object(c.a)([Object(u.b)({readOnly:!0})],g.prototype,"extent",null),Object(c.a)([Object(u.b)({type:[[[Number]]],json:{write:{isRequired:!0}}})],g.prototype,"paths",void 0),Object(c.a)([Object(f.a)("paths")],g.prototype,"writePaths",null),(g=r=Object(c.a)([Object(d.a)("esri.geometry.Polyline")],g)).prototype.toJSON.isDefaultToJSON=!0;var O=g;t.a=O},function(e,t,n){"use strict";var r=n(10),i=n(7),a=n.n(i),o=n(15),s=n(14),c=n(2),l=n(3),u=n(5),d=n(6),f=n(0),p=(n(16),n(98)),h=n(4),b=(n(13),n(17)),v=n(1),y=n(41),m=n(8),g=n(18),O=(n(12),n(19),n(20),n(24)),j=n(28),w=n(63),_=n(95),k=n(115),x=n(62),S=(n(143),n(133)),T=n(233),E=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).nextQueryParams=null,r.queryParams=null,r.results=null,r.total=null,r}return n}(n(36).a);Object(f.a)([Object(v.b)()],E.prototype,"nextQueryParams",void 0),Object(f.a)([Object(v.b)()],E.prototype,"queryParams",void 0),Object(f.a)([Object(v.b)()],E.prototype,"results",void 0),Object(f.a)([Object(v.b)()],E.prototype,"total",void 0);var C,P,I=E=Object(f.a)([Object(m.a)("esri.portal.PortalQueryResult")],E),M=n(788),A={PortalGroup:function(){return Promise.resolve().then(n.bind(null,595))},PortalItem:function(){return Promise.resolve().then(n.bind(null,435))},PortalUser:function(){return Promise.resolve().then(n.bind(null,788))}},R=C=function(e){Object(u.a)(i,e);var t=Object(d.a)(i);function i(e){var n;return Object(c.a)(this,i),(n=t.call(this,e)).access=null,n.allSSL=!1,n.authMode="auto",n.authorizedCrossOriginDomains=null,n.basemapGalleryGroupQuery=null,n.bingKey=null,n.canListApps=!1,n.canListData=!1,n.canListPreProvisionedItems=!1,n.canProvisionDirectPurchase=!1,n.canSearchPublic=!0,n.canShareBingPublic=!1,n.canSharePublic=!1,n.canSignInArcGIS=!1,n.canSignInIDP=!1,n.colorSetsGroupQuery=null,n.commentsEnabled=!1,n.created=null,n.culture=null,n.customBaseUrl=null,n.defaultBasemap=null,n.defaultExtent=null,n.defaultVectorBasemap=null,n.description=null,n.eueiEnabled=null,n.featuredGroups=null,n.featuredItemsGroupQuery=null,n.galleryTemplatesGroupQuery=null,n.livingAtlasGroupQuery=null,n.hasCategorySchema=!1,n.helperServices=null,n.homePageFeaturedContent=null,n.homePageFeaturedContentCount=null,n.httpPort=null,n.httpsPort=null,n.id=null,n.ipCntryCode=null,n.isPortal=!1,n.isReadOnly=!1,n.layerTemplatesGroupQuery=null,n.maxTokenExpirationMinutes=null,n.modified=null,n.name=null,n.portalHostname=null,n.portalMode=null,n.portalProperties=null,n.region=null,n.rotatorPanels=null,n.showHomePageDescription=!1,n.sourceJSON=null,n.supportsHostedServices=!1,n.symbolSetsGroupQuery=null,n.templatesGroupQuery=null,n.units=null,n.url=p.a.portalUrl,n.urlKey=null,n.user=null,n.useStandardizedQuery=!1,n.useVectorBasemaps=!1,n.vectorBasemapGalleryGroupQuery=null,n}return Object(l.a)(i,[{key:"normalizeCtorArgs",value:function(e){return"string"==typeof e?{url:e}:e}},{key:"destroy",value:function(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)}},{key:"readAuthorizedCrossOriginDomains",value:function(e){if(e){var t,n=Object(s.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;-1===p.a.request.trustedServers.indexOf(r)&&p.a.request.trustedServers.push(r)}}catch(i){n.e(i)}finally{n.f()}}return e}},{key:"readDefaultBasemap",value:function(e){if(e){var t=P.fromJSON(e);return t.portalItem={portal:this},t}return null}},{key:"readDefaultVectorBasemap",value:function(e){if(e){var t=P.fromJSON(e);return t.portalItem={portal:this},t}return null}},{key:"extraQuery",get:function(){var e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?" AND orgid:".concat(this.id):null}},{key:"isOrganization",get:function(){return!!this.access}},{key:"restUrl",get:function(){var e=this.url;if(e){var t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}},{key:"thumbnailUrl",get:function(){var e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}},{key:"readUrlKey",value:function(e){return e?e.toLowerCase():e}},{key:"readUser",value:function(e){var t=null;return e&&((t=M.default.fromJSON(e)).portal=this),t}},{key:"load",value:function(e){var t=this,r=Promise.resolve().then(n.bind(null,226)).then((function(t){var n=t.default;Object(O.u)(e),P=n})).then((function(){return t.sourceJSON?t.sourceJSON:t._fetchSelf(t.authMode,!1,e)})).then((function(e){if(k.b){var n=k.b;t.credential=n.findCredential(t.restUrl),t.credential||t.authMode!==C.AUTH_MODE_AUTO||(t._esriId_credentialCreateHandle=n.on("credential-create",(function(){n.findCredential(t.restUrl)&&t._signIn()})))}t.sourceJSON=e,t.read(e)}));return this.addResolvingPromise(r),Promise.resolve(this)}},{key:"createClosestFacilityTask",value:function(){var e=Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return t=this._getHelperServiceUrl("closestFacility"),e.next=6,Promise.all([n.e(16),n.e(206)]).then(n.bind(null,1451));case 6:return e.t0=e.sent.default,e.t1=t,e.abrupt("return",new e.t0(e.t1));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createElevationLayers",value:function(){var e=Object(o.a)(a.a.mark((function e(){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return t=this._getHelperService("defaultElevationLayers"),e.next=5,Promise.resolve().then(n.bind(null,622));case 5:return r=e.sent.default,e.abrupt("return",t?t.map((function(e){return new r({id:e.id,url:e.url})})):[]);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createGeometryService",value:function(){var e=Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return t=this._getHelperServiceUrl("geometry"),e.next=6,n.e(20).then(n.bind(null,806));case 6:return e.t0=e.sent.default,e.t1={url:t},e.abrupt("return",new e.t0(e.t1));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createPrintTask",value:function(){var e=Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return t=this._getHelperServiceUrl("printTask"),e.next=6,n.e(133).then(n.bind(null,1439));case 6:return e.t0=e.sent.default,e.t1=t,e.abrupt("return",new e.t0(e.t1));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createRouteTask",value:function(){var e=Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return t=this._getHelperServiceUrl("route"),e.next=6,Promise.all([n.e(16),n.e(207)]).then(n.bind(null,1456));case 6:return e.t0=e.sent.default,e.t1=t,e.abrupt("return",new e.t0(e.t1));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createServiceAreaTask",value:function(){var e=Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return t=this._getHelperServiceUrl("serviceArea"),e.next=6,Promise.all([n.e(16),n.e(208)]).then(n.bind(null,1452));case 6:return e.t0=e.sent.default,e.t1=t,e.abrupt("return",new e.t0(e.t1));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBasemaps",value:function(e,t){var n=new T.a;return n.query=e||(this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),n.disableExtraQuery=!0,this.queryGroups(n,t).then((function(e){if(n.num=100,n.query='type:"Web Map" -type:"Web Application"',e.total){var r=e.results[0];return n.sortField=r.sortField||"name",n.sortOrder=r.sortOrder||"desc",r.queryItems(n,t)}return null})).then((function(e){return e&&e.total?e.results.filter((function(e){return"Web Map"===e.type})).map((function(e){return new P({portalItem:e})})):[]}))}},{key:"fetchCategorySchema",value:function(e){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",e).then((function(e){return e.categorySchema})):Object(O.n)(e)?Promise.reject(Object(O.e)()):Promise.resolve([])}},{key:"fetchFeaturedGroups",value:function(e){var t=this.featuredGroups,n=new T.a;if(n.num=100,n.sortField="title",t&&t.length){var r,i=[],a=Object(s.a)(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;i.push('(title:"'.concat(o.title,'" AND owner:').concat(o.owner,")"))}}catch(c){a.e(c)}finally{a.f()}return n.query=i.join(" OR "),this.queryGroups(n,e).then((function(e){return e.results}))}return Object(O.n)(e)?Promise.reject(Object(O.e)()):Promise.resolve([])}},{key:"fetchRegions",value:function(e){var t=this.user&&this.user.culture||this.culture||Object(_.b)();return this._request(this.restUrl+"/portals/regions",Object(r.a)(Object(r.a)({},e),{},{query:{culture:t}}))}},{key:"queryGroups",value:function(e,t){return this._queryPortal("/community/groups",e,"PortalGroup",t)}},{key:"queryItems",value:function(e,t){return this._queryPortal("/search",e,"PortalItem",t)}},{key:"queryUsers",value:function(e,t){return e.sortField||(e.sortField="username"),this._queryPortal("/community/users",e,"PortalUser",t)}},{key:"toJSON",value:function(){throw new g.a("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}},{key:"_getHelperService",value:function(e){var t=this.helperServices&&this.helperServices[e];if(!t)throw new g.a("portal:service-not-found",'The `helperServices` do not include an entry named "'.concat(e,'"'));return t}},{key:"_getHelperServiceUrl",value:function(e){var t=this._getHelperService(e);if(!t.url)throw new g.a("portal:service-url-not-found",'The `helperServices` entry "'.concat(e,'" does not include a `url` value'));return t.url}},{key:"_fetchSelf",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.authMode,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,i=this.restUrl+"/portals/self",a=Object(r.a)({authMode:e,query:{culture:Object(_.b)().toLowerCase()}},n);return"auto"===a.authMode&&(a.authMode="no-prompt"),t&&(a.query.default=!0),this._request(i,a)}},{key:"_queryPortal",value:function(e,t,n,i){var a=this,o=Object(b.m)(T.a,t),s=function(t){return a._request(a.restUrl+e,Object(r.a)(Object(r.a)({},o.toRequestOptions(a)),i)).then((function(e){var n=o.clone();return n.start=e.nextStart,new I({nextQueryParams:n,queryParams:o,total:e.total,results:C._resultsToTypedArray(t,{portal:a},e,i)})})).then((function(e){return Promise.all(e.results.map((function(t){return"function"==typeof t.when?t.when():e}))).then((function(){return e}),(function(t){return Object(O.t)(t),e}))}))};return n&&A[n]?A[n]().then((function(e){var t=e.default;return Object(O.u)(i),s(t)})):s()}},{key:"_signIn",value:function(){var e=this;if(this.authMode===C.AUTH_MODE_ANONYMOUS)return Promise.reject(new g.a("portal:invalid-auth-mode",'Current "authMode"\' is "'.concat(this.authMode,'"')));if("failed"===this.loadStatus)return Promise.reject(this.loadError);var t=function(t){return Promise.resolve().then((function(){return"not-loaded"===e.loadStatus?(t||(e.authMode="immediate"),e.load().then((function(){return null}))):"loading"===e.loadStatus?e.load().then((function(){return e.credential?null:(e.credential=t,e._fetchSelf("immediate"))})):e.user&&e.credential===t?null:(e.credential=t,e._fetchSelf("immediate"))})).then((function(t){t&&(e.sourceJSON=t,e.read(t))}))};return k.b?k.b.getCredential(this.restUrl).then((function(e){return t(e)})):t(this.credential)}},{key:"_normalizeSSL",value:function(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}},{key:"_normalizeUrl",value:function(e){var t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.indexOf("?")>-1?"&":"?")+"token="+t:e)}},{key:"_requestToTypedArray",value:function(e,t,n){var r=this;return this._request(e,t).then((function(e){var t=C._resultsToTypedArray(n,{portal:r},e);return Promise.all(t.map((function(t){return"function"==typeof t.when?t.when():e}))).then((function(){return t}),(function(){return t}))}))}},{key:"_request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(r.a)({f:"json"},t.query),i=t.authMode,a=void 0===i?this.authMode===C.AUTH_MODE_ANONYMOUS?"anonymous":"auto":i,o=t.body,s=void 0===o?null:o,c=t.cacheBust,l=void 0!==c&&c,u=t.method,d=void 0===u?"auto":u,f=t.responseType,p=void 0===f?"json":f,h=t.signal,b={authMode:a,body:s,cacheBust:l,method:d,query:n,responseType:p,timeout:0,signal:h};return Object(x.default)(this._normalizeSSL(e),b).then((function(e){return e.data}))}}],[{key:"getDefault",value:function(){return C._default&&!C._default.destroyed||(C._default=new C),C._default}},{key:"fromJSON",value:function(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new C({sourceJSON:e})}},{key:"_resultsToTypedArray",value:function(e,t,n,r){var i;if(n){var a=Object(h.k)(r)?r.signal:null;i=n.listings||n.notifications||n.userInvitations||n.tags||n.items||n.groups||n.comments||n.provisions||n.results||n.relatedItems||n,(e||t)&&(i=i.map((function(n){var r=Object.assign(e?e.fromJSON(n):n,t);return"function"==typeof r.load&&r.load(a),r})))}else i=[];return i}}]),i}(Object(j.b)(S.a));R.AUTH_MODE_ANONYMOUS="anonymous",R.AUTH_MODE_AUTO="auto",R.AUTH_MODE_IMMEDIATE="immediate",Object(f.a)([Object(v.b)()],R.prototype,"access",void 0),Object(f.a)([Object(v.b)()],R.prototype,"allSSL",void 0),Object(f.a)([Object(v.b)()],R.prototype,"authMode",void 0),Object(f.a)([Object(v.b)()],R.prototype,"authorizedCrossOriginDomains",void 0),Object(f.a)([Object(y.a)("authorizedCrossOriginDomains")],R.prototype,"readAuthorizedCrossOriginDomains",null),Object(f.a)([Object(v.b)()],R.prototype,"basemapGalleryGroupQuery",void 0),Object(f.a)([Object(v.b)()],R.prototype,"bingKey",void 0),Object(f.a)([Object(v.b)()],R.prototype,"canListApps",void 0),Object(f.a)([Object(v.b)()],R.prototype,"canListData",void 0),Object(f.a)([Object(v.b)()],R.prototype,"canListPreProvisionedItems",void 0),Object(f.a)([Object(v.b)()],R.prototype,"canProvisionDirectPurchase",void 0),Object(f.a)([Object(v.b)()],R.prototype,"canSearchPublic",void 0),Object(f.a)([Object(v.b)()],R.prototype,"canShareBingPublic",void 0),Object(f.a)([Object(v.b)()],R.prototype,"canSharePublic",void 0),Object(f.a)([Object(v.b)()],R.prototype,"canSignInArcGIS",void 0),Object(f.a)([Object(v.b)()],R.prototype,"canSignInIDP",void 0),Object(f.a)([Object(v.b)()],R.prototype,"colorSetsGroupQuery",void 0),Object(f.a)([Object(v.b)()],R.prototype,"commentsEnabled",void 0),Object(f.a)([Object(v.b)({type:Date})],R.prototype,"created",void 0),Object(f.a)([Object(v.b)()],R.prototype,"credential",void 0),Object(f.a)([Object(v.b)()],R.prototype,"culture",void 0),Object(f.a)([Object(v.b)()],R.prototype,"currentVersion",void 0),Object(f.a)([Object(v.b)()],R.prototype,"customBaseUrl",void 0),Object(f.a)([Object(v.b)()],R.prototype,"defaultBasemap",void 0),Object(f.a)([Object(y.a)("defaultBasemap")],R.prototype,"readDefaultBasemap",null),Object(f.a)([Object(v.b)({type:w.a})],R.prototype,"defaultExtent",void 0),Object(f.a)([Object(v.b)()],R.prototype,"defaultVectorBasemap",void 0),Object(f.a)([Object(y.a)("defaultVectorBasemap")],R.prototype,"readDefaultVectorBasemap",null),Object(f.a)([Object(v.b)()],R.prototype,"description",void 0),Object(f.a)([Object(v.b)()],R.prototype,"eueiEnabled",void 0),Object(f.a)([Object(v.b)({readOnly:!0})],R.prototype,"extraQuery",null),Object(f.a)([Object(v.b)()],R.prototype,"featuredGroups",void 0),Object(f.a)([Object(v.b)()],R.prototype,"featuredItemsGroupQuery",void 0),Object(f.a)([Object(v.b)()],R.prototype,"galleryTemplatesGroupQuery",void 0),Object(f.a)([Object(v.b)()],R.prototype,"livingAtlasGroupQuery",void 0),Object(f.a)([Object(v.b)()],R.prototype,"hasCategorySchema",void 0),Object(f.a)([Object(v.b)()],R.prototype,"helpBase",void 0),Object(f.a)([Object(v.b)()],R.prototype,"helperServices",void 0),Object(f.a)([Object(v.b)()],R.prototype,"helpMap",void 0),Object(f.a)([Object(v.b)()],R.prototype,"homePageFeaturedContent",void 0),Object(f.a)([Object(v.b)()],R.prototype,"homePageFeaturedContentCount",void 0),Object(f.a)([Object(v.b)()],R.prototype,"httpPort",void 0),Object(f.a)([Object(v.b)()],R.prototype,"httpsPort",void 0),Object(f.a)([Object(v.b)()],R.prototype,"id",void 0),Object(f.a)([Object(v.b)()],R.prototype,"ipCntryCode",void 0),Object(f.a)([Object(v.b)({readOnly:!0})],R.prototype,"isOrganization",null),Object(f.a)([Object(v.b)()],R.prototype,"isPortal",void 0),Object(f.a)([Object(v.b)()],R.prototype,"isReadOnly",void 0),Object(f.a)([Object(v.b)()],R.prototype,"layerTemplatesGroupQuery",void 0),Object(f.a)([Object(v.b)()],R.prototype,"maxTokenExpirationMinutes",void 0),Object(f.a)([Object(v.b)({type:Date})],R.prototype,"modified",void 0),Object(f.a)([Object(v.b)()],R.prototype,"name",void 0),Object(f.a)([Object(v.b)()],R.prototype,"portalHostname",void 0),Object(f.a)([Object(v.b)()],R.prototype,"portalMode",void 0),Object(f.a)([Object(v.b)()],R.prototype,"portalProperties",void 0),Object(f.a)([Object(v.b)()],R.prototype,"region",void 0),Object(f.a)([Object(v.b)({readOnly:!0})],R.prototype,"restUrl",null),Object(f.a)([Object(v.b)()],R.prototype,"rotatorPanels",void 0),Object(f.a)([Object(v.b)()],R.prototype,"showHomePageDescription",void 0),Object(f.a)([Object(v.b)()],R.prototype,"sourceJSON",void 0),Object(f.a)([Object(v.b)()],R.prototype,"staticImagesUrl",void 0),Object(f.a)([Object(v.b)()],R.prototype,"stylesGroupQuery",void 0),Object(f.a)([Object(v.b)()],R.prototype,"supportsHostedServices",void 0),Object(f.a)([Object(v.b)()],R.prototype,"symbolSetsGroupQuery",void 0),Object(f.a)([Object(v.b)()],R.prototype,"templatesGroupQuery",void 0),Object(f.a)([Object(v.b)()],R.prototype,"thumbnail",void 0),Object(f.a)([Object(v.b)({readOnly:!0})],R.prototype,"thumbnailUrl",null),Object(f.a)([Object(v.b)()],R.prototype,"units",void 0),Object(f.a)([Object(v.b)()],R.prototype,"url",void 0),Object(f.a)([Object(v.b)()],R.prototype,"urlKey",void 0),Object(f.a)([Object(y.a)("urlKey")],R.prototype,"readUrlKey",null),Object(f.a)([Object(v.b)()],R.prototype,"user",void 0),Object(f.a)([Object(y.a)("user")],R.prototype,"readUser",null),Object(f.a)([Object(v.b)()],R.prototype,"useStandardizedQuery",void 0),Object(f.a)([Object(v.b)()],R.prototype,"useVectorBasemaps",void 0),Object(f.a)([Object(v.b)()],R.prototype,"vectorBasemapGalleryGroupQuery",void 0);var L=R=C=Object(f.a)([Object(m.a)("esri.portal.Portal")],R);t.a=L},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return l}));var r=n(64);function i(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function a(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],c=n*a-r*i;return c?(c=1/c,e[0]=a*c,e[1]=-r*c,e[2]=-i*c,e[3]=n*c,e[4]=(i*s-a*o)*c,e[5]=(r*o-n*s)*c,e):null}function o(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],c=t[5],l=n[0],u=n[1],d=n[2],f=n[3],p=n[4],h=n[5];return e[0]=r*l+a*u,e[1]=i*l+o*u,e[2]=r*d+a*f,e[3]=i*d+o*f,e[4]=r*p+a*h+s,e[5]=i*p+o*h+c,e}function s(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],c=t[5],l=Math.sin(n),u=Math.cos(n);return e[0]=r*u+a*l,e[1]=i*u+o*l,e[2]=r*-l+a*u,e[3]=i*-l+o*u,e[4]=s,e[5]=c,e}function c(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],c=t[5],l=n[0],u=n[1];return e[0]=r*l,e[1]=i*l,e[2]=a*u,e[3]=o*u,e[4]=s,e[5]=c,e}function l(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],c=t[5],l=n[0],u=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=r*l+a*u+s,e[5]=i*l+o*u+c,e}function u(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e[4]=0,e[5]=0,e}function d(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function f(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e}var p=o,h=f;Object.freeze({__proto__:null,copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},identity:i,set:function(e,t,n,r,i,a,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e},invert:a,determinant:function(e){return e[0]*e[3]-e[1]*e[2]},multiply:o,rotate:s,scale:c,translate:l,fromRotation:u,fromScaling:d,fromTranslation:function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},str:function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},frob:function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e},subtract:f,multiplyScalar:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e},multiplyScalarAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},equals:function(e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],c=e[5],l=t[0],u=t[1],d=t[2],f=t[3],p=t[4],h=t[5];return Math.abs(n-l)<=r.a*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(i-u)<=r.a*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-d)<=r.a*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(o-f)<=r.a*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(s-p)<=r.a*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(c-h)<=r.a*Math.max(1,Math.abs(c),Math.abs(h))},mul:p,sub:h})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o}));var r=n(14);function i(e){return e&&("function"==typeof e.on||"function"==typeof e.addEventListener)}function a(e,t,n){if(!i(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,n);if(Array.isArray(t)){var a,o=t.slice(),s=Object(r.a)(o);try{for(s.s();!(a=s.n()).done;){var c=a.value;e.addEventListener(c,n)}}catch(l){s.e(l)}finally{s.f()}return{remove:function(){var t,i=Object(r.a)(o);try{for(i.s();!(t=i.n()).done;){var a=t.value;e.removeEventListener(a,n)}}catch(l){i.e(l)}finally{i.f()}}}}return e.addEventListener(t,n),{remove:function(){e.removeEventListener(t,n)}}}function o(e,t,n){if(!i(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,n);var r=a(e,t,(function(t){r.remove(),n.call(e,t)}));return{remove:function(){r.remove()}}}var s={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function c(e){var t=e.key;return s[t]||t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(100),i=n(123),a=n(13),o=n(102),s=n(147),c=a.a.getLogger("esri.intl");function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.format,a=void 0===r?{}:r;return Object(i.c)(e,(function(e){return u(e,t,a)}))}function u(e,t,n){var i,a,o=e.indexOf(":");if(-1===o?i=e.trim():(i=e.slice(0,o).trim(),a=e.slice(o+1).trim()),!i)return"";var s=Object(r.b)(i,t);if(null==s)return"";var c=n[a]||n[i];return c?d(s,c):a?f(s,a):p(s)}function d(e,t){switch(t.type){case"date":return Object(o.b)(e,t.intlOptions);case"number":return Object(s.b)(e,t.intlOptions);default:return c.warn("missing format descriptor for key {key}"),p(e)}}function f(e,t){switch(t.toLowerCase()){case"dateformat":return Object(o.b)(e);case"numberformat":return Object(s.b)(e);default:return c.warn("inline format is unsupported since 4.12: ".concat(t)),/^(dateformat|datestring)/i.test(t)?Object(o.b)(e):/^numberformat/i.test(t)?Object(s.b)(e):p(e)}}function p(e){switch(typeof e){case"string":return e;case"number":return Object(s.b)(e);case"boolean":return""+e;default:return e instanceof Date?Object(o.b)(e):""}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return _})),n.d(t,"d",(function(){return k})),n.d(t,"e",(function(){return x})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return a})),n.d(t,"h",(function(){return v})),n.d(t,"i",(function(){return m})),n.d(t,"j",(function(){return R}));var r,i,a,o,s,c=n(14),l=n(2),u=n(3),d=n(5),f=n(6),p=n(16),h=n(84),b=null;function v(){return!!b}function y(){return!!Object(p.a)("esri-wasm")}function m(){return r||(r=Promise.all([n.e(176),n.e(141)]).then(n.bind(null,915)).then((function(e){return e.p})).then((function(e){return(0,e.default)({locateFile:function(e){return Object(h.a)("esri/geometry/support/".concat(e))}})})).then((function(e){C(e)})))}!function(e){function t(e,t,n){b.ensureCache.prepare();var r=M(n),i=n===r,a=b.ensureFloat64(r),o=b._pe_geog_to_proj(b.getPointer(e),t,a);return o&&A(n,t,a,i),o}function n(e,t,n){return r(e,t,n,0)}function r(e,t,n,r){b.ensureCache.prepare();var i=M(n),a=n===i,o=b.ensureFloat64(i),s=b._pe_proj_to_geog_center(b.getPointer(e),t,o,r);return s&&A(n,t,o,a),s}e.geogToProj=t,e.projGeog=function(e,r,i,o){switch(o){case a.PE_TRANSFORM_P_TO_G:return n(e,r,i);case a.PE_TRANSFORM_G_TO_P:return t(e,r,i)}return 0},e.projToGeog=n,e.projToGeogCenter=r}(i||(i={})),(s=a||(a={})).init=function(){s.PE_BUFFER_MAX=b.PeDefs.prototype.PE_BUFFER_MAX,s.PE_NAME_MAX=b.PeDefs.prototype.PE_NAME_MAX,s.PE_MGRS_MAX=b.PeDefs.prototype.PE_MGRS_MAX,s.PE_USNG_MAX=b.PeDefs.prototype.PE_USNG_MAX,s.PE_DD_MAX=b.PeDefs.prototype.PE_DD_MAX,s.PE_DDM_MAX=b.PeDefs.prototype.PE_DDM_MAX,s.PE_DMS_MAX=b.PeDefs.prototype.PE_DMS_MAX,s.PE_UTM_MAX=b.PeDefs.prototype.PE_UTM_MAX,s.PE_PARM_MAX=b.PeDefs.prototype.PE_PARM_MAX,s.PE_TYPE_NONE=b.PeDefs.prototype.PE_TYPE_NONE,s.PE_TYPE_GEOGCS=b.PeDefs.prototype.PE_TYPE_GEOGCS,s.PE_TYPE_PROJCS=b.PeDefs.prototype.PE_TYPE_PROJCS,s.PE_TYPE_GEOGTRAN=b.PeDefs.prototype.PE_TYPE_GEOGTRAN,s.PE_TYPE_COORDSYS=b.PeDefs.prototype.PE_TYPE_COORDSYS,s.PE_TYPE_UNIT=b.PeDefs.prototype.PE_TYPE_UNIT,s.PE_TYPE_LINUNIT=b.PeDefs.prototype.PE_TYPE_LINUNIT,s.PE_STR_OPTS_NONE=b.PeDefs.prototype.PE_STR_OPTS_NONE,s.PE_STR_AUTH_NONE=b.PeDefs.prototype.PE_STR_AUTH_NONE,s.PE_STR_AUTH_TOP=b.PeDefs.prototype.PE_STR_AUTH_TOP,s.PE_STR_NAME_CANON=b.PeDefs.prototype.PE_STR_NAME_CANON,s.PE_PARM_X0=b.PeDefs.prototype.PE_PARM_X0,s.PE_PARM_ND=b.PeDefs.prototype.PE_PARM_ND,s.PE_TRANSFORM_1_TO_2=b.PeDefs.prototype.PE_TRANSFORM_1_TO_2,s.PE_TRANSFORM_2_TO_1=b.PeDefs.prototype.PE_TRANSFORM_2_TO_1,s.PE_TRANSFORM_P_TO_G=b.PeDefs.prototype.PE_TRANSFORM_P_TO_G,s.PE_TRANSFORM_G_TO_P=b.PeDefs.prototype.PE_TRANSFORM_G_TO_P,s.PE_HORIZON_RECT=b.PeDefs.prototype.PE_HORIZON_RECT,s.PE_HORIZON_POLY=b.PeDefs.prototype.PE_HORIZON_POLY,s.PE_HORIZON_LINE=b.PeDefs.prototype.PE_HORIZON_LINE,s.PE_HORIZON_DELTA=b.PeDefs.prototype.PE_HORIZON_DELTA},function(e){var t={},n={},r=function(e){if(e){var t=e.getType();switch(t){case a.PE_TYPE_GEOGCS:e=b.castObject(e,b.PeGeogcs);break;case a.PE_TYPE_PROJCS:e=b.castObject(e,b.PeProjcs);break;case a.PE_TYPE_GEOGTRAN:e=b.castObject(e,b.PeGeogtran);break;default:t&a.PE_TYPE_UNIT&&(e=b.castObject(e,b.PeUnit))}}return e};function i(e,n){var i=null,a=t[e];if(a||(a={},t[e]=a),a.hasOwnProperty(String(n)))i=a[n];else{var o=b.PeFactory.prototype.factoryByType(e,n);b.compare(o,b.NULL)||(i=o,a[n]=i)}return i=r(i)}e.initialize=function(){b.PeFactory.prototype.initialize(null)},e.coordsys=function(e){return i(a.PE_TYPE_COORDSYS,e)},e.factoryByType=i,e.fromString=function(e,t){var i=null,a=n[e];if(a||(a={},n[e]=a),a.hasOwnProperty(t))i=a[t];else{var o=b.PeFactory.prototype.fromString(e,t);b.compare(o,b.NULL)||(i=o,a[t]=i)}return i=r(i)},e.geogcs=function(e){return i(a.PE_TYPE_GEOGCS,e)},e.geogtran=function(e){return i(a.PE_TYPE_GEOGTRAN,e)},e.getCode=function(e){return b.PeFactory.prototype.getCode(e)},e.projcs=function(e){return i(a.PE_TYPE_PROJCS,e)},e.unit=function(e){return i(a.PE_TYPE_UNIT,e)}}(o||(o={}));var g,O,j,w,_,k,x,S,T,E=null;function C(e){function t(e,t,n){e[t]=n(e[t])}b=e,a.init(),g.init(),_.init(),x.init(),S.init(),E=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"destroy",value:function(){b.destroy(this)}}]),n}(b.PeGCSExtent);for(var n=0,r=[b.PeDatum,b.PeGeogcs,b.PeGeogtran,b.PeObject,b.PeParameter,b.PePrimem,b.PeProjcs,b.PeSpheroid,b.PeUnit];n<r.length;n++){t(r[n].prototype,"getName",(function(e){return function(){return e.call(this,new Array(a.PE_NAME_MAX))}}))}for(var i=0,o=[b.PeGeogtran,b.PeProjcs];i<o.length;i++){t(o[i].prototype,"getParameters",(function(e){return function(){for(var t=new Array(a.PE_PARM_MAX),n=e.call(this),r=0;r<t.length;r++){var i=b.getValue(n,"*");t[r]=i?b.wrapPointer(i,b.PeParameter):null,n+=Int32Array.BYTES_PER_ELEMENT}return t}}))}t(b.PeHorizon.prototype,"getCoord",(function(e){return function(){var t=this.getSize();if(!t)return null;var n=[];return A(n,t,e.call(this)),n}})),t(b.PeGTlistExtendedEntry.prototype,"getEntries",(function(e){var t=b._pe_getPeGTlistExtendedGTsSize();return function(){var n=null,r=e.call(this);if(!b.compare(r,b.NULL)){n=[r];var i=this.getSteps();if(i>1)for(var a=b.getPointer(r),o=1;o<i;o++)n.push(b.wrapPointer(a+t*o,b.PeGTlistExtendedGTs))}return n}}));var s=b._pe_getPeHorizonSize(),c=function(e){return function(){var t=this._cache;if(t||(t=new Map,this._cache=t),t.has(e))return t.get(e);var n=null,r=e.call(this);if(!b.compare(r,b.NULL)){n=[r];var i=r.getNump();if(i>1)for(var a=b.getPointer(r),o=1;o<i;o++)n.push(b.wrapPointer(a+s*o,b.PeHorizon))}return t.set(e,n),n}};t(b.PeProjcs.prototype,"horizonGcsGenerate",c),t(b.PeProjcs.prototype,"horizonPcsGenerate",c),b.PeObject.prototype.toString=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.PE_STR_OPTS_NONE;b.ensureCache.prepare();var t=b.getPointer(this),n=b.ensureInt8(new Array(a.PE_BUFFER_MAX));return b.UTF8ToString(b._pe_object_to_string_ext(t,e,n))}}function P(e){if(e){var t=b.getClass(e);if(t){var n=b.getCache(t);if(n){var r=b.getPointer(e);r&&delete n[r]}}}}function I(e,t){for(var n=[],r=new Array(t),i=0;i<e;i++)n.push(b.ensureInt8(r));return n}function M(e){var t;return Array.isArray(e[0])?(t=[],e.forEach((function(e){t.push(e[0],e[1])}))):t=e,t}function A(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(r)for(var i=0;i<2*t;i++)e[i]=b.getValue(n+i*Float64Array.BYTES_PER_ELEMENT,"double");else for(var a=0===e.length,o=0;o<t;o++)a&&(e[o]=new Array(2)),e[o][0]=b.getValue(n,"double"),e[o][1]=b.getValue(n+Float64Array.BYTES_PER_ELEMENT,"double"),n+=2*Float64Array.BYTES_PER_ELEMENT}!function(e){var t;e.init=function(){e.PE_GTLIST_OPTS_COMMON=b.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=b._pe_getPeGTlistExtendedEntrySize()},e.getGTlist=function(e,n,r,i,a,o){var s=null,c=new b.PeInteger(o);try{var l=b.PeGTlistExtended.prototype.getGTlist(e,n,r,i,a,c);if((o=c.val)&&(s=[l],o>1))for(var u=b.getPointer(l),d=1;d<o;d++)s.push(b.wrapPointer(u+t*d,b.PeGTlistExtendedEntry))}finally{b.destroy(c)}return s}}(g||(g={})),function(e){e.destroy=function(e){if(e&&e.length){var t,n=Object(c.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;P(r),r.getEntries().forEach((function(e){P(e);var t=e.getGeogtran();P(t),t.getParameters().forEach(P),[t.getGeogcs1(),t.getGeogcs2()].forEach((function(e){P(e);var t=e.getDatum();P(t),P(t.getSpheroid()),P(e.getPrimem()),P(e.getUnit())}))}))}}catch(i){n.e(i)}finally{n.f()}b.PeGTlistExtendedEntry.prototype.Delete(e[0])}}}(O||(O={})),function(e){e.geogToGeog=function(e,t,n,r,i){b.ensureCache.prepare();var a=M(n),o=n===a,s=b.ensureFloat64(a),c=0;r&&(c=b.ensureFloat64(r));var l=b._pe_geog_to_geog(b.getPointer(e),t,s,c,i);return l&&A(n,t,s,o),l}}(j||(j={})),function(e){var t=function(e,t,n,r,i,o){var s,c;switch(b.ensureCache.prepare(),e){case"dd":s=b._pe_geog_to_dd,c=a.PE_DD_MAX;break;case"ddm":s=b._pe_geog_to_ddm,c=a.PE_DDM_MAX;break;case"dms":s=b._pe_geog_to_dms,c=a.PE_DMS_MAX}var l=0;t&&(l=b.getPointer(t));var u=M(r),d=b.ensureFloat64(u),f=I(n,c),p=s(l,n,d,i,b.ensureInt32(f));if(p)for(var h=0;h<n;h++)o[h]=b.UTF8ToString(f[h]);return p},n=function(e,t,n,r,i){var a;switch(b.ensureCache.prepare(),e){case"dd":a=b._pe_dd_to_geog;break;case"ddm":a=b._pe_ddm_to_geog;break;case"dms":a=b._pe_dms_to_geog}var o=0;t&&(o=b.getPointer(t));var s=r.map((function(e){return b.ensureString(e)})),c=b.ensureInt32(s),l=b.ensureFloat64(new Array(2*n)),u=a(o,n,c,l);return u&&A(i,n,l),u};e.geog_to_dms=function(e,n,r,i,a){return t("dms",e,n,r,i,a)},e.dms_to_geog=function(e,t,r,i){return n("dms",e,t,r,i)},e.geog_to_ddm=function(e,n,r,i,a){return t("ddm",e,n,r,i,a)},e.ddm_to_geog=function(e,t,r,i){return n("ddm",e,t,r,i)},e.geog_to_dd=function(e,n,r,i,a){return t("dd",e,n,r,i,a)},e.dd_to_geog=function(e,t,r,i){return n("dd",e,t,r,i)}}(w||(w={})),function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=b.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=b.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=b.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=b.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=b.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES},e.geog_to_mgrs_extended=function(e,t,n,r,i,o,s){b.ensureCache.prepare();var c=0;e&&(c=b.getPointer(e));var l=M(n),u=b.ensureFloat64(l),d=I(t,a.PE_MGRS_MAX),f=b.ensureInt32(d),p=b._pe_geog_to_mgrs_extended(c,t,u,r,i,o,f);if(p)for(var h=0;h<t;h++)s[h]=b.UTF8ToString(d[h]);return p},e.mgrs_to_geog_extended=function(e,t,n,r,i){b.ensureCache.prepare();var a=0;e&&(a=b.getPointer(e));var o=n.map((function(e){return b.ensureString(e)})),s=b.ensureInt32(o),c=b.ensureFloat64(new Array(2*t)),l=b._pe_mgrs_to_geog_extended(a,t,s,r,c);return l&&A(i,t,c),l}}(_||(_={})),function(e){e.geog_to_usng=function(e,t,n,r,i,o,s){b.ensureCache.prepare();var c=0;e&&(c=b.getPointer(e));var l=M(n),u=b.ensureFloat64(l),d=I(t,a.PE_MGRS_MAX),f=b.ensureInt32(d),p=b._pe_geog_to_usng(c,t,u,r,i,o,f);if(p)for(var h=0;h<t;h++)s[h]=b.UTF8ToString(d[h]);return p},e.usng_to_geog=function(e,t,n,r){b.ensureCache.prepare();var i=0;e&&(i=b.getPointer(e));var a=n.map((function(e){return b.ensureString(e)})),o=b.ensureInt32(a),s=b.ensureFloat64(new Array(2*t)),c=b._pe_usng_to_geog(i,t,o,s);return c&&A(r,t,s),c}}(k||(k={})),function(e){e.init=function(){e.PE_UTM_OPTS_NONE=b.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=b.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=b.PeNotationUtm.prototype.PE_UTM_OPTS_NS},e.geog_to_utm=function(e,t,n,r,i){b.ensureCache.prepare();var o=0;e&&(o=b.getPointer(e));var s=M(n),c=b.ensureFloat64(s),l=I(t,a.PE_UTM_MAX),u=b.ensureInt32(l),d=b._pe_geog_to_utm(o,t,c,r,u);if(d)for(var f=0;f<t;f++)i[f]=b.UTF8ToString(l[f]);return d},e.utm_to_geog=function(e,t,n,r,i){b.ensureCache.prepare();var a=0;e&&(a=b.getPointer(e));var o=n.map((function(e){return b.ensureString(e)})),s=b.ensureInt32(o),c=b.ensureFloat64(new Array(2*t)),l=b._pe_utm_to_geog(a,t,s,r,c);return l&&A(i,t,c),l}}(x||(x={})),function(e){var t=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=b.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=b.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=b.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=b.PePCSInfo.prototype.PE_POLE_POINT},e.generate=function(n){var r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.PE_PCSINFO_OPTION_DOMAIN;return t.has(n)&&((i=t.get(n))[a]&&(r=i[a])),r||(r=b.PePCSInfo.prototype.generate(n,a),i||(i=[],t.set(n,i)),i[a]=r),r}}(S||(S={})),function(e){e.version_string=function(){return b.PeVersion.prototype.version_string()}}(T||(T={}));var R=Object.freeze({__proto__:null,get _pe(){return b},isLoaded:v,isSupported:y,load:m,get PeCSTransformations(){return i},get PeDefs(){return a},get PeFactory(){return o},get PeGCSExtent(){return E},get PeGTlistExtended(){return g},get PeGTlistExtendedEntry(){return O},get PeGTTransformations(){return j},get PeNotationDms(){return w},get PeNotationMgrs(){return _},get PeNotationUsng(){return k},get PeNotationUtm(){return x},get PePCSInfo(){return S},get PeVersion(){return T},_init:C})},function(e,t,n){"use strict";n.d(t,"a",(function(){return _})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return y})),n.d(t,"h",(function(){return v})),n.d(t,"i",(function(){return i})),n.d(t,"j",(function(){return j})),n.d(t,"k",(function(){return l})),n.d(t,"l",(function(){return u})),n.d(t,"m",(function(){return s})),n.d(t,"n",(function(){return o})),n.d(t,"o",(function(){return f})),n.d(t,"p",(function(){return m})),n.d(t,"q",(function(){return O})),n.d(t,"r",(function(){return c})),n.d(t,"s",(function(){return d}));n(16),n(4);var r=n(63);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k;return[e[0],e[1],e[2],e[3]]}function a(e){return[e[0],e[1],e[2],e[3]]}function o(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:i();return a[0]=e,a[1]=t,a[2]=n,a[3]=r,a}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i();return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function c(e,t){return new r.a({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;if("length"in t)w(t)?(n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.max(e[2],t[2]),n[3]=Math.max(e[3],t[3])):2!==t.length&&3!==t.length||(n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.max(e[2],t[0]),n[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":n[0]=Math.min(e[0],t.xmin),n[1]=Math.min(e[1],t.ymin),n[2]=Math.max(e[2],t.xmax),n[3]=Math.max(e[3],t.ymax);break;case"point":n[0]=Math.min(e[0],t.x),n[1]=Math.min(e[1],t.y),n[2]=Math.max(e[2],t.x),n[3]=Math.max(e[3],t.y)}return n}function u(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=t.length,i=e[0],a=e[1],o=e[2],s=e[3],c=0;c<r;c++){var l=t[c];i=Math.min(i,l[0]),a=Math.min(a,l[1]),o=Math.max(o,l[0]),s=Math.max(s,l[1])}return n[0]=i,n[1]=a,n[2]=o,n[3]=s,n}function d(e){return e[0]>=e[2]?0:e[2]-e[0]}function f(e){return e[1]>=e[3]?0:e[3]-e[1]}function p(e){return d(e)*f(e)}function h(e,t){return v(e,t[0],t[1])}function b(e,t){return v(e,t.x,t.y)}function v(e,t,n){return t>=e[0]&&n>=e[1]&&t<=e[2]&&n<=e[3]}function y(e,t,n){return t[0]>=e[0]-n&&t[1]>=e[1]-n&&t[0]<=e[2]+n&&t[1]<=e[3]+n}function m(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function g(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function O(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function j(e){return e?O(e,_):i(_)}function w(e){return 4===e.length}var _=[1/0,1/0,-1/0,-1/0],k=[0,0,0,0]},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s}));var r,i=n(16),a=(n(304),n(12)),o="4.19",s={request:function(e,t){return Promise.resolve().then(n.bind(null,62)).then((function(n){var r=n.default,i=e.options||{};return i.responseType="array-buffer",i.signal=null==t?void 0:t.signal,r(e.url,i)})).then((function(e){return{result:{data:e.data,ssl:e.ssl},transferList:[e.data]}}))}};function c(e){r=e}function l(e){var t=r&&r.findCredential(e);return t&&t.token?Object(a.d)(e,"token",t.token):e}Object(i.a)("host-webworker")||(Object(i.a)("edge")||Object(i.a)("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser")},function(e,t,n){"use strict";n.r(t);var r,i=n(2),a=n(3),o=n(53),s=n(50),c=n(5),l=n(6),u=n(0),d=(n(16),n(22)),f=(n(13),n(17),n(1)),p=n(47),h=n(49),b=n(8),v=n(42),y=(n(12),n(19),n(20),n(39)),m=n(38),g=n(120),O=n(403),j=new p.a({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"}),w=r=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).color=new y.a([255,255,255,.25]),e.type="simple-marker",e.size=12,e.style="circle",e.outline=new g.default,e}return Object(a.a)(n,[{key:"normalizeCtorArgs",value:function(e,t,n,r){if(e&&"string"!=typeof e)return e;var i={};return e&&(i.style=e),null!=t&&(i.size=Object(m.j)(t)),n&&(i.outline=n),r&&(i.color=r),i}},{key:"writeColor",value:function(e,t){e&&"x"!==this.style&&"cross"!==this.style&&(t.color=e.toJSON()),null===e&&(t.color=null)}},{key:"path",set:function(e){this.style="path",this._set("path",e)}},{key:"clone",value:function(){return new r({angle:this.angle,color:Object(d.a)(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}},{key:"hash",value:function(){var e;return"".concat(Object(o.a)(Object(s.a)(n.prototype),"hash",this).call(this),".").concat(this.color&&this.color.hash(),".").concat(this.path,".").concat(this.style,".").concat(null==(e=this.outline)?void 0:e.hash())}}]),n}(O.a);Object(u.a)([Object(f.b)()],w.prototype,"color",void 0),Object(u.a)([Object(v.a)("color")],w.prototype,"writeColor",null),Object(u.a)([Object(h.a)({esriSMS:"simple-marker"},{readOnly:!0})],w.prototype,"type",void 0),Object(u.a)([Object(f.b)()],w.prototype,"size",void 0),Object(u.a)([Object(f.b)({type:j.apiValues,json:{read:j.read,write:j.write}})],w.prototype,"style",void 0),Object(u.a)([Object(f.b)({type:String,json:{write:!0}})],w.prototype,"path",null),Object(u.a)([Object(f.b)({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":g.default}},json:{default:null,write:!0}})],w.prototype,"outline",void 0);var _=w=r=Object(u.a)([Object(b.a)("esri.symbols.SimpleMarkerSymbol")],w);t.default=_},function(e,t,n){"use strict";n.d(t,"a",(function(){return N})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return o}));var r=n(10),i=n(2),a=n(3);function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32774,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0,0,0];return{srcRgb:e,srcAlpha:e,dstRgb:t,dstAlpha:t,opRgb:n,opAlpha:n,color:{r:r[0],g:r[1],b:r[2],a:r[3]}}}function s(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:32774,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:32774,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[0,0,0,0];return{srcRgb:e,srcAlpha:t,dstRgb:n,dstAlpha:r,opRgb:i,opAlpha:a,color:{r:o[0],g:o[1],b:o[2],a:o[3]}}}var c={zNear:0,zFar:1},l={r:!0,g:!0,b:!0,a:!0};function u(e){return j.intern(e)}function d(e){return _.intern(e)}function f(e){return x.intern(e)}function p(e){return T.intern(e)}function h(e){return C.intern(e)}function b(e){return I.intern(e)}function v(e){return A.intern(e)}function y(e){return L.intern(e)}function m(e){return D.intern(e)}var g=function(){function e(t,n){Object(i.a)(this,e),this.makeKey=t,this.makeRef=n,this.interns=new Map}return Object(a.a)(e,[{key:"intern",value:function(e){if(!e)return null;var t=this.makeKey(e),n=this.interns;return n.has(t)||n.set(t,this.makeRef(e)),n.get(t)}}]),e}();function O(e){return"["+e.join(",")+"]"}var j=new g(w,(function(e){return Object(r.a)({__tag:"Blending"},e)}));function w(e){return e?O([e.srcRgb,e.srcAlpha,e.dstRgb,e.dstAlpha,e.opRgb,e.opAlpha,e.color.r,e.color.g,e.color.b,e.color.a]):null}var _=new g(k,(function(e){return Object(r.a)({__tag:"Culling"},e)}));function k(e){return e?O([e.face,e.mode]):null}var x=new g(S,(function(e){return Object(r.a)({__tag:"PolygonOffset"},e)}));function S(e){return e?O([e.factor,e.units]):null}var T=new g(E,(function(e){return Object(r.a)({__tag:"DepthTest"},e)}));function E(e){return e?O([e.func]):null}var C=new g(P,(function(e){return Object(r.a)({__tag:"StencilTest"},e)}));function P(e){return e?O([e.function.func,e.function.ref,e.function.mask,e.operation.fail,e.operation.zFail,e.operation.zPass]):null}var I=new g(M,(function(e){return Object(r.a)({__tag:"DepthWrite"},e)}));function M(e){return e?O([e.zNear,e.zFar]):null}var A=new g(R,(function(e){return Object(r.a)({__tag:"ColorWrite"},e)}));function R(e){return e?O([e.r,e.g,e.b,e.a]):null}var L=new g(F,(function(e){return Object(r.a)({__tag:"StencilWrite"},e)}));function F(e){return e?O([e.mask]):null}var D=new g((function(e){return e?O([w(e.blending),k(e.culling),S(e.polygonOffset),E(e.depthTest),P(e.stencilTest),M(e.depthWrite),R(e.colorWrite),F(e.stencilWrite)]):null}),(function(e){return{blending:u(e.blending),culling:d(e.culling),polygonOffset:f(e.polygonOffset),depthTest:p(e.depthTest),stencilTest:h(e.stencilTest),depthWrite:b(e.depthWrite),colorWrite:v(e.colorWrite),stencilWrite:y(e.stencilWrite)}}));var N=function(){function e(t){Object(i.a)(this,e),this._pipelineInvalid=!0,this._blendingInvalid=!0,this._cullingInvalid=!0,this._polygonOffsetInvalid=!0,this._depthTestInvalid=!0,this._stencilTestInvalid=!0,this._depthWriteInvalid=!0,this._colorWriteInvalid=!0,this._stencilWriteInvalid=!0,this._stateSetters=t}return Object(a.a)(e,[{key:"setPipeline",value:function(e){(this._pipelineInvalid||e!==this._pipeline)&&(this.setBlending(e.blending),this.setCulling(e.culling),this.setPolygonOffset(e.polygonOffset),this.setDepthTest(e.depthTest),this.setStencilTest(e.stencilTest),this.setDepthWrite(e.depthWrite),this.setColorWrite(e.colorWrite),this.setStencilWrite(e.stencilWrite),this._pipeline=e),this._pipelineInvalid=!1}},{key:"invalidateBlending",value:function(){this._blendingInvalid=!0,this._pipelineInvalid=!0}},{key:"invalidateCulling",value:function(){this._cullingInvalid=!0,this._pipelineInvalid=!0}},{key:"invalidatePolygonOffset",value:function(){this._polygonOffsetInvalid=!0,this._pipelineInvalid=!0}},{key:"invalidateDepthTest",value:function(){this._depthTestInvalid=!0,this._pipelineInvalid=!0}},{key:"invalidateStencilTest",value:function(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}},{key:"invalidateDepthWrite",value:function(){this._depthWriteInvalid=!0,this._pipelineInvalid=!0}},{key:"invalidateColorWrite",value:function(){this._colorWriteInvalid=!0,this._pipelineInvalid=!0}},{key:"invalidateStencilWrite",value:function(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}},{key:"setBlending",value:function(e){this._blending=this.setSubState(e,this._blending,this._blendingInvalid,this._stateSetters.setBlending),this._blendingInvalid=!1}},{key:"setCulling",value:function(e){this._culling=this.setSubState(e,this._culling,this._cullingInvalid,this._stateSetters.setCulling),this._cullingInvalid=!1}},{key:"setPolygonOffset",value:function(e){this._polygonOffset=this.setSubState(e,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset),this._polygonOffsetInvalid=!1}},{key:"setDepthTest",value:function(e){this._depthTest=this.setSubState(e,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest),this._depthTestInvalid=!1}},{key:"setStencilTest",value:function(e){this._stencilTest=this.setSubState(e,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest),this._stencilTestInvalid=!1}},{key:"setDepthWrite",value:function(e){this._depthWrite=this.setSubState(e,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite),this._depthWriteInvalid=!1}},{key:"setColorWrite",value:function(e){this._colorWrite=this.setSubState(e,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite),this._colorWriteInvalid=!1}},{key:"setStencilWrite",value:function(e){this._stencilWrite=this.setSubState(e,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite),this._stencilTestInvalid=!1}},{key:"setSubState",value:function(e,t,n,r){return(n||e!==t)&&(r(e),this._pipelineInvalid=!0),e}}]),e}()},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(22)),u=(n(13),n(17),n(1)),d=n(8),f=n(42),p=(n(12),n(19),n(20),n(44)),h=n(150),b=n(61),v=n(43),y=n(153),m=n(467),g=n(63),O=n(313),j=n(156),w=n(472),_=n(470);function k(e){return!Array.isArray(e[0])}var x=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).rings=[],e.type="polygon",e}return Object(a.a)(n,[{key:"normalizeCtorArgs",value:function(e,t){var n,r,i,a=null;return e&&!Array.isArray(e)?(a=e.rings?e.rings:null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),n=e.hasZ,r=e.hasM):a=e,a=a||[],t=t||p.a.WGS84,a.length&&a[0]&&null!=a[0][0]&&"number"==typeof a[0][0]&&(a=[a]),(i=a[0]&&a[0][0])&&(void 0===n&&void 0===r?(n=i.length>2,r=!1):void 0===n?n=!r&&i.length>3:void 0===r&&(r=!n&&i.length>3)),{rings:a,spatialReference:t,hasZ:n,hasM:r}}},{key:"cache",get:function(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}},{key:"centroid",get:function(){var e=Object(w.a)(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;var t=new v.a;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}},{key:"extent",get:function(){var e=this.spatialReference,t=Object(_.b)(this);if(!t)return null;var n=new g.a(t);return n.spatialReference=e,n}},{key:"isSelfIntersecting",get:function(){return Object(m.c)(this.rings)}},{key:"writeRings",value:function(e,t){t.rings=Object(l.a)(this.rings)}},{key:"addRing",value:function(e){if(e){var t=this.rings,n=t.length;if(k(e)){for(var r=[],i=0,a=e.length;i<a;i++)r[i]=e[i].toArray();t[n]=r}else t[n]=e.concat();return this.notifyChange("rings"),this}}},{key:"clone",value:function(){var e=new r;return e.spatialReference=this.spatialReference,e.rings=Object(l.a)(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}},{key:"contains",value:function(e){return!!e&&(Object(b.a)(e,this.spatialReference)&&(e=Object(b.d)(e,this.spatialReference)),Object(y.g)(this,e))}},{key:"isClockwise",value:function(e){var t,n=this;return t=k(e)?e.map((function(e){return n.hasZ?n.hasM?[e.x,e.y,e.z,e.m]:[e.x,e.y,e.z]:[e.x,e.y]})):e,Object(j.g)(t,this.hasM,this.hasZ)}},{key:"getPoint",value:function(e,t){if(!this._validateInputs(e,t))return null;var n=this.rings[e][t],r=this.hasZ,i=this.hasM;return r&&!i?new v.a(n[0],n[1],n[2],void 0,this.spatialReference):i&&!r?new v.a(n[0],n[1],void 0,n[2],this.spatialReference):r&&i?new v.a(n[0],n[1],n[2],n[3],this.spatialReference):new v.a(n[0],n[1],this.spatialReference)}},{key:"insertPoint",value:function(e,t,n){return this._validateInputs(e,t,!0)?(Object(O.a)(this,n),Array.isArray(n)||(n=n.toArray()),this.rings[e].splice(t,0,n),this.notifyChange("rings"),this):this}},{key:"removePoint",value:function(e,t){if(!this._validateInputs(e,t))return null;var n=new v.a(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),n}},{key:"removeRing",value:function(e){if(!this._validateInputs(e,null))return null;var t=this.rings.splice(e,1)[0],n=this.spatialReference,r=t.map((function(e){return new v.a(e,n)}));return this.notifyChange("rings"),r}},{key:"setPoint",value:function(e,t,n){return this._validateInputs(e,t)?(Object(O.a)(this,n),Array.isArray(n)||(n=n.toArray()),this.rings[e][t]=n,this.notifyChange("rings"),this):this}},{key:"_validateInputs",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||e<0||e>=this.rings.length)return!1;if(null!=t){var r=this.rings[e];if(n&&(t<0||t>r.length))return!1;if(!n&&(t<0||t>=r.length))return!1}return!0}},{key:"toJSON",value:function(e){return this.write(null,e)}}],[{key:"fromExtent",value:function(e){var t=e.clone().normalize(),n=e.spatialReference,i=!1,a=!1;t.map((function(e){e.hasZ&&(i=!0),e.hasM&&(a=!0)}));var o={rings:t.map((function(e){var t=[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]];if(i&&e.hasZ)for(var n=e.zmin+.5*(e.zmax-e.zmin),r=0;r<t.length;r++)t[r].push(n);if(a&&e.hasM)for(var o=e.mmin+.5*(e.mmax-e.mmin),s=0;s<t.length;s++)t[s].push(o);return t})),spatialReference:n};return i&&(o.hasZ=!0),a&&(o.hasM=!0),new r(o)}}]),n}(h.a);Object(c.a)([Object(u.b)({readOnly:!0})],x.prototype,"cache",null),Object(c.a)([Object(u.b)({readOnly:!0})],x.prototype,"centroid",null),Object(c.a)([Object(u.b)({readOnly:!0})],x.prototype,"extent",null),Object(c.a)([Object(u.b)({readOnly:!0})],x.prototype,"isSelfIntersecting",null),Object(c.a)([Object(u.b)({type:[[[Number]]],json:{write:{isRequired:!0}}})],x.prototype,"rings",void 0),Object(c.a)([Object(f.a)("rings")],x.prototype,"writeRings",null),(x=r=Object(c.a)([Object(d.a)("esri.geometry.Polygon")],x)).prototype.toJSON.isDefaultToJSON=!0;var S=x;t.a=S},function(e,t,n){"use strict";function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function a(e,t){return new Float64Array(e,t,16)}n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return a}));var o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze({__proto__:null,create:r,clone:i,fromValues:function(e,t,n,r,i,a,o,s,c,l,u,d,f,p,h,b){return[e,t,n,r,i,a,o,s,c,l,u,d,f,p,h,b]},createView:a,IDENTITY:o})},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n(3),a=n(53),o=n(50),s=n(5),c=n(6),l=n(0),u=(n(16),n(22)),d=(n(13),n(17),n(1)),f=n(47),p=n(49),h=n(8),b=(n(12),n(19),n(20),n(38)),v=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).type="simple-line",i.width=.75,i}return Object(i.a)(n,[{key:"hash",value:function(){return"".concat(this.type,".").concat(this.width)}}]),n}(n(125).a);Object(l.a)([Object(p.a)({esriSLS:"simple-line"},{readOnly:!0})],v.prototype,"type",void 0),Object(l.a)([Object(d.b)({type:Number,cast:b.j,json:{write:!0}})],v.prototype,"width",void 0);var y,m=v=Object(l.a)([Object(h.a)("esri.symbols.LineSymbol")],v),g=n(41),O=n(42),j=n(28),w=n(39),_=y=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).placement="begin-end",i.type="line-marker",i.style="arrow",i}return Object(i.a)(n,[{key:"writeStyle",value:function(e,t,n,r){"web-map"===(null==r?void 0:r.origin)?t[n]="arrow":t[n]=e}},{key:"color",set:function(e){this._set("color",e)}},{key:"readColor",value:function(e){return e&&null!=e[0]?[e[0],e[1],e[2],e[3]/255]:e}},{key:"writeColor",value:function(e,t,n,r){"web-map"===(null==r?void 0:r.origin)||(t[n]=e)}},{key:"clone",value:function(){return new y({color:Object(u.a)(this.color),placement:this.placement,style:this.style})}},{key:"hash",value:function(){var e;return"".concat(this.placement,".").concat(null==(e=this.color)?void 0:e.hash(),".").concat(this.style)}}]),n}(j.a);Object(l.a)([Object(d.b)({type:["begin","end","begin-end"],json:{write:!0}})],_.prototype,"placement",void 0),Object(l.a)([Object(p.a)({"line-marker":"line-marker"},{readOnly:!0}),Object(d.b)({json:{origins:{"web-map":{write:!1}}}})],_.prototype,"type",void 0),Object(l.a)([Object(d.b)({type:["arrow","circle","square","diamond","cross","x"]})],_.prototype,"style",void 0),Object(l.a)([Object(O.a)("style")],_.prototype,"writeStyle",null),Object(l.a)([Object(d.b)({type:w.a,value:null,json:{write:{allowNull:!0}}})],_.prototype,"color",null),Object(l.a)([Object(g.a)("color")],_.prototype,"readColor",null),Object(l.a)([Object(O.a)("color")],_.prototype,"writeColor",null);var k,x=_=y=Object(l.a)([Object(h.a)("esri.symbols.LineSymbolMarker")],_),S=new f.a({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"}),T=k=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).type="simple-line",e.style="solid",e.cap="round",e.join="round",e.marker=null,e.miterLimit=2,e}return Object(i.a)(n,[{key:"normalizeCtorArgs",value:function(e,t,n,r,i,a){if(e&&"string"!=typeof e)return e;var o={};return null!=e&&(o.style=e),null!=t&&(o.color=t),null!=n&&(o.width=Object(b.j)(n)),null!=r&&(o.cap=r),null!=i&&(o.join=i),null!=a&&(o.miterLimit=Object(b.j)(a)),o}},{key:"clone",value:function(){var e;return new k({color:Object(u.a)(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:null==(e=this.marker)?void 0:e.clone()})}},{key:"hash",value:function(){var e,t;return"".concat(Object(a.a)(Object(o.a)(n.prototype),"hash",this).call(this),".").concat(null==(e=this.color)?void 0:e.hash(),".").concat(this.style,".").concat(this.cap,".").concat(this.join,".").concat(this.miterLimit,".").concat(null==(t=this.marker)?void 0:t.hash())}}]),n}(m);Object(l.a)([Object(p.a)({esriSLS:"simple-line"},{readOnly:!0})],T.prototype,"type",void 0),Object(l.a)([Object(d.b)({type:S.apiValues,json:{read:S.read,write:S.write}})],T.prototype,"style",void 0),Object(l.a)([Object(d.b)({type:["butt","round","square"],json:{write:{overridePolicy:function(e,t,n){return{enabled:"round"!==e&&(null==n||null==n.origin)}}}}})],T.prototype,"cap",void 0),Object(l.a)([Object(d.b)({type:["miter","round","bevel"],json:{write:{overridePolicy:function(e,t,n){return{enabled:"round"!==e&&(null==n||null==n.origin)}}}}})],T.prototype,"join",void 0),Object(l.a)([Object(d.b)({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":x}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],T.prototype,"marker",void 0),Object(l.a)([Object(d.b)({type:Number,json:{read:!1,write:!1}})],T.prototype,"miterLimit",void 0);var E=T=k=Object(l.a)([Object(h.a)("esri.symbols.SimpleLineSymbol")],T);t.default=E},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(22)),u=n(4),d=(n(13),n(17)),f=n(1),p=n(58),h=n(47),b=n(8),v=n(42),y=(n(12),n(19),n(20),n(28)),m=n(44),g=n(43),O=n(68),j=n(71),w=n(207),_=n(228),k=n(605),x=n(503),S=new h.a({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),T=new h.a({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),E=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).aggregateIds=null,r.cacheHint=void 0,r.datumTransformation=null,r.distance=void 0,r.dynamicDataSource=void 0,r.gdbVersion=null,r.geometry=null,r.geometryPrecision=void 0,r.groupByFieldsForStatistics=null,r.having=null,r.historicMoment=null,r.maxAllowableOffset=void 0,r.maxRecordCountFactor=1,r.multipatchOption=null,r.num=void 0,r.objectIds=null,r.orderByFields=null,r.outFields=null,r.outSpatialReference=null,r.outStatistics=null,r.parameterValues=null,r.pixelSize=null,r.quantizationParameters=null,r.rangeValues=null,r.relationParameter=null,r.resultType=null,r.returnCentroid=!1,r.returnDistinctValues=!1,r.returnExceededLimitFeatures=!0,r.returnGeometry=!1,r.returnQueryGeometry=!1,r.returnM=void 0,r.returnZ=void 0,r.sourceSpatialReference=null,r.spatialRelationship="intersects",r.start=void 0,r.sqlFormat=null,r.text=null,r.timeExtent=null,r.units=null,r.where=null,r}return Object(a.a)(n,[{key:"castDatumTransformation",value:function(e){return"number"==typeof e||"object"==typeof e?e:null}},{key:"writeHistoricMoment",value:function(e,t){t.historicMoment=e&&e.getTime()}},{key:"writeParameterValues",value:function(e,t){if(e){var n={};for(var r in e){var i=e[r];Array.isArray(i)?n[r]=i.map((function(e){return e instanceof Date?e.getTime():e})):i instanceof Date?n[r]=i.getTime():n[r]=i}t.parameterValues=n}}},{key:"writeStart",value:function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}},{key:"writeWhere",value:function(e,t){t.where=e||"1=1"}},{key:"clone",value:function(){return new r(Object(l.a)({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:Object(u.k)(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,units:this.units,where:this.where}))}}],[{key:"from",value:function(e){return Object(d.d)(r,e)}}]),n}(y.a);E.MAX_MAX_RECORD_COUNT_FACTOR=5,Object(c.a)([Object(f.b)({json:{write:!0}})],E.prototype,"aggregateIds",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{write:{writer:function(e,t){null!=e&&(t.cacheHint=e)}}}})],E.prototype,"cacheHint",void 0),Object(c.a)([Object(f.b)({json:{write:!0}})],E.prototype,"datumTransformation",void 0),Object(c.a)([Object(p.a)("datumTransformation")],E.prototype,"castDatumTransformation",null),Object(c.a)([Object(f.b)({type:Number,json:{write:{overridePolicy:function(e){return{enabled:e>0}}}}})],E.prototype,"distance",void 0),Object(c.a)([Object(f.b)({type:_.a,json:{write:!0}})],E.prototype,"dynamicDataSource",void 0),Object(c.a)([Object(f.b)({type:String,json:{write:!0}})],E.prototype,"gdbVersion",void 0),Object(c.a)([Object(f.b)({types:j.c,json:{read:O.a,write:!0}})],E.prototype,"geometry",void 0),Object(c.a)([Object(f.b)({type:Number,json:{write:!0}})],E.prototype,"geometryPrecision",void 0),Object(c.a)([Object(f.b)({type:[String],json:{write:!0}})],E.prototype,"groupByFieldsForStatistics",void 0),Object(c.a)([Object(f.b)({type:String,json:{write:!0}})],E.prototype,"having",void 0),Object(c.a)([Object(f.b)({type:Date})],E.prototype,"historicMoment",void 0),Object(c.a)([Object(v.a)("historicMoment")],E.prototype,"writeHistoricMoment",null),Object(c.a)([Object(f.b)({type:Number,json:{write:!0}})],E.prototype,"maxAllowableOffset",void 0),Object(c.a)([Object(f.b)({type:Number,cast:function(e){return e<1?1:e>r.MAX_MAX_RECORD_COUNT_FACTOR?r.MAX_MAX_RECORD_COUNT_FACTOR:e},json:{write:{overridePolicy:function(e){return{enabled:e>1}}}}})],E.prototype,"maxRecordCountFactor",void 0),Object(c.a)([Object(f.b)({type:String,json:{write:!0}})],E.prototype,"multipatchOption",void 0),Object(c.a)([Object(f.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],E.prototype,"num",void 0),Object(c.a)([Object(f.b)({json:{write:!0}})],E.prototype,"objectIds",void 0),Object(c.a)([Object(f.b)({type:[String],json:{write:!0}})],E.prototype,"orderByFields",void 0),Object(c.a)([Object(f.b)({type:[String],json:{write:!0}})],E.prototype,"outFields",void 0),Object(c.a)([Object(f.b)({type:m.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],E.prototype,"outSpatialReference",void 0),Object(c.a)([Object(f.b)({type:[x.a],json:{write:{enabled:!0,overridePolicy:function(){return{enabled:Object(u.k)(this.outStatistics)&&this.outStatistics.length>0}}}}})],E.prototype,"outStatistics",void 0),Object(c.a)([Object(f.b)({json:{write:!0}})],E.prototype,"parameterValues",void 0),Object(c.a)([Object(v.a)("parameterValues")],E.prototype,"writeParameterValues",null),Object(c.a)([Object(f.b)({type:g.a,json:{write:!0}})],E.prototype,"pixelSize",void 0),Object(c.a)([Object(f.b)({type:k.a,json:{write:!0}})],E.prototype,"quantizationParameters",void 0),Object(c.a)([Object(f.b)({type:[Object],json:{write:!0}})],E.prototype,"rangeValues",void 0),Object(c.a)([Object(f.b)({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy:function(){return{enabled:"relation"===this.spatialRelationship}}}}})],E.prototype,"relationParameter",void 0),Object(c.a)([Object(f.b)({type:String,json:{write:!0}})],E.prototype,"resultType",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],E.prototype,"returnCentroid",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],E.prototype,"returnDistinctValues",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:!e}}}}})],E.prototype,"returnExceededLimitFeatures",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{write:!0}})],E.prototype,"returnGeometry",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],E.prototype,"returnQueryGeometry",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],E.prototype,"returnM",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],E.prototype,"returnZ",void 0),Object(c.a)([Object(f.b)({type:m.a,json:{write:!0}})],E.prototype,"sourceSpatialReference",void 0),Object(c.a)([Object(f.b)({type:String,json:{read:{source:"spatialRel",reader:S.read},write:{target:"spatialRel",writer:S.write}}})],E.prototype,"spatialRelationship",void 0),Object(c.a)([Object(f.b)({type:Number,json:{read:{source:"resultOffset"}}})],E.prototype,"start",void 0),Object(c.a)([Object(v.a)("start"),Object(v.a)("num")],E.prototype,"writeStart",null),Object(c.a)([Object(f.b)({type:String,json:{write:!0}})],E.prototype,"sqlFormat",void 0),Object(c.a)([Object(f.b)({type:String,json:{write:!0}})],E.prototype,"text",void 0),Object(c.a)([Object(f.b)({type:w.a,json:{write:!0}})],E.prototype,"timeExtent",void 0),Object(c.a)([Object(f.b)({type:String,json:{read:T.read,write:{writer:T.write,overridePolicy:function(e){return{enabled:e&&this.distance>0}}}}})],E.prototype,"units",void 0),Object(c.a)([Object(f.b)({type:String,json:{write:{overridePolicy:function(e){return{enabled:null!=e||this.start>0}}}}})],E.prototype,"where",void 0),Object(c.a)([Object(v.a)("where")],E.prototype,"writeWhere",null);var C=E=r=Object(c.a)([Object(b.a)("esri.tasks.support.Query")],E);t.a=C},function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return k})),n.d(t,"c",(function(){return q})),n.d(t,"d",(function(){return J})),n.d(t,"e",(function(){return z})),n.d(t,"f",(function(){return O})),n.d(t,"g",(function(){return j})),n.d(t,"h",(function(){return w})),n.d(t,"i",(function(){return _})),n.d(t,"j",(function(){return M})),n.d(t,"k",(function(){return F})),n.d(t,"l",(function(){return E})),n.d(t,"m",(function(){return y})),n.d(t,"n",(function(){return x})),n.d(t,"o",(function(){return H})),n.d(t,"p",(function(){return Y})),n.d(t,"q",(function(){return U})),n.d(t,"r",(function(){return A})),n.d(t,"s",(function(){return D})),n.d(t,"t",(function(){return C})),n.d(t,"u",(function(){return m})),n.d(t,"v",(function(){return S})),n.d(t,"w",(function(){return W})),n.d(t,"x",(function(){return K})),n.d(t,"y",(function(){return B})),n.d(t,"z",(function(){return R})),n.d(t,"A",(function(){return N})),n.d(t,"B",(function(){return P})),n.d(t,"C",(function(){return g})),n.d(t,"D",(function(){return T})),n.d(t,"E",(function(){return $})),n.d(t,"F",(function(){return Z})),n.d(t,"G",(function(){return G})),n.d(t,"H",(function(){return L})),n.d(t,"I",(function(){return V})),n.d(t,"J",(function(){return I}));var r=n(2),i=n(3),a=n(5),o=n(6),s=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;Object(r.a)(this,e),this.TypedArrayConstructor=t,this.elementCount=9;var s=this.TypedArrayConstructor;void 0===a&&(a=9*s.BYTES_PER_ELEMENT);var c=0===n.byteLength?0:i;this.typedBuffer=null==o?new s(n,c):new s(n,c,(o-i)/s.BYTES_PER_ELEMENT),this.typedBufferStride=a/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}return Object(i.a)(e,[{key:"getMat",value:function(e,t){for(var n=e*this.typedBufferStride,r=0;r<9;r++)t[r]=this.typedBuffer[n+r];return t}},{key:"setMat",value:function(e,t){for(var n=e*this.typedBufferStride,r=0;r<9;r++)this.typedBuffer[n+r]=t[r]}},{key:"get",value:function(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}},{key:"set",value:function(e,t,n){this.typedBuffer[e*this.typedBufferStride+t]=n}},{key:"copyFrom",value:function(e,t,n){for(var r=this.typedBuffer,i=t.typedBuffer,a=e*this.typedBufferStride,o=n*t.typedBufferStride,s=0;s<9;++s)r[a+s]=i[o+s]}},{key:"buffer",get:function(){return this.typedBuffer.buffer}}]),e}();s.ElementCount=9;var c=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;Object(r.a)(this,e),this.TypedArrayConstructor=t,this.elementCount=16;var s=this.TypedArrayConstructor;void 0===a&&(a=16*s.BYTES_PER_ELEMENT);var c=0===n.byteLength?0:i;this.typedBuffer=null==o?new s(n,c):new s(n,c,(o-i)/s.BYTES_PER_ELEMENT),this.typedBufferStride=a/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}return Object(i.a)(e,[{key:"getMat",value:function(e,t){for(var n=e*this.typedBufferStride,r=0;r<16;r++)t[r]=this.typedBuffer[n+r];return t}},{key:"setMat",value:function(e,t){for(var n=e*this.typedBufferStride,r=0;r<16;r++)this.typedBuffer[n+r]=t[r]}},{key:"get",value:function(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}},{key:"set",value:function(e,t,n){this.typedBuffer[e*this.typedBufferStride+t]=n}},{key:"copyFrom",value:function(e,t,n){for(var r=this.typedBuffer,i=t.typedBuffer,a=e*this.typedBufferStride,o=n*t.typedBufferStride,s=0;s<16;++s)r[a+s]=i[o+s]}},{key:"buffer",get:function(){return this.typedBuffer.buffer}}]),e}();c.ElementCount=16;var l=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;Object(r.a)(this,e),this.TypedArrayConstructor=t,this.elementCount=1;var s=this.TypedArrayConstructor;void 0===a&&(a=s.BYTES_PER_ELEMENT);var c=0===n.byteLength?0:i;this.typedBuffer=null==o?new s(n,c):new s(n,c,(o-i)/s.BYTES_PER_ELEMENT),this.typedBufferStride=a/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}return Object(i.a)(e,[{key:"get",value:function(e){return this.typedBuffer[e*this.typedBufferStride]}},{key:"set",value:function(e,t){this.typedBuffer[e*this.typedBufferStride]=t}},{key:"buffer",get:function(){return this.typedBuffer.buffer}}]),e}();l.ElementCount=1;var u=n(33),d=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;Object(r.a)(this,e),this.TypedArrayConstructor=t,this.elementCount=2;var s=this.TypedArrayConstructor;void 0===a&&(a=2*s.BYTES_PER_ELEMENT);var c=0===n.byteLength?0:i;this.typedBuffer=null==o?new s(n,c):new s(n,c,(o-i)/s.BYTES_PER_ELEMENT),this.typedBufferStride=a/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}return Object(i.a)(e,[{key:"getVec",value:function(e,t){return Object(u.r)(t,this.typedBuffer[e*this.typedBufferStride],this.typedBuffer[e*this.typedBufferStride+1])}},{key:"setVec",value:function(e,t){this.typedBuffer[e*this.typedBufferStride]=t[0],this.typedBuffer[e*this.typedBufferStride+1]=t[1]}},{key:"get",value:function(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}},{key:"set",value:function(e,t,n){this.typedBuffer[e*this.typedBufferStride+t]=n}},{key:"setValues",value:function(e,t,n){this.typedBuffer[e*this.typedBufferStride]=t,this.typedBuffer[e*this.typedBufferStride+1]=n}},{key:"copyFrom",value:function(e,t,n){var r=this.typedBuffer,i=t.typedBuffer,a=e*this.typedBufferStride,o=n*t.typedBufferStride;r[a]=i[o],r[a+1]=i[o+1]}},{key:"buffer",get:function(){return this.typedBuffer.buffer}}]),e}();d.ElementCount=2;var f=n(11),p=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;Object(r.a)(this,e),this.TypedArrayConstructor=t,this.elementCount=3;var s=this.TypedArrayConstructor;void 0===a&&(a=3*s.BYTES_PER_ELEMENT);var c=0===n.byteLength?0:i;this.typedBuffer=null==o?new s(n,c):new s(n,c,(o-i)/s.BYTES_PER_ELEMENT),this.typedBufferStride=a/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}return Object(i.a)(e,[{key:"getVec",value:function(e,t){return Object(f.v)(t,this.typedBuffer[e*this.typedBufferStride],this.typedBuffer[e*this.typedBufferStride+1],this.typedBuffer[e*this.typedBufferStride+2])}},{key:"setVec",value:function(e,t){this.typedBuffer[e*this.typedBufferStride]=t[0],this.typedBuffer[e*this.typedBufferStride+1]=t[1],this.typedBuffer[e*this.typedBufferStride+2]=t[2]}},{key:"get",value:function(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}},{key:"set",value:function(e,t,n){this.typedBuffer[e*this.typedBufferStride+t]=n}},{key:"setValues",value:function(e,t,n,r){this.typedBuffer[e*this.typedBufferStride]=t,this.typedBuffer[e*this.typedBufferStride+1]=n,this.typedBuffer[e*this.typedBufferStride+2]=r}},{key:"copyFrom",value:function(e,t,n){var r=this.typedBuffer,i=t.typedBuffer,a=e*this.typedBufferStride,o=n*t.typedBufferStride;r[a]=i[o],r[a+1]=i[o+1],r[a+2]=i[o+2]}},{key:"buffer",get:function(){return this.typedBuffer.buffer}}]),e}();p.ElementCount=3;var h=n(89),b=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;Object(r.a)(this,e),this.TypedArrayConstructor=t,this.elementCount=4;var s=this.TypedArrayConstructor;void 0===a&&(a=4*s.BYTES_PER_ELEMENT);var c=0===n.byteLength?0:i;this.typedBuffer=null==o?new s(n,c):new s(n,c,(o-i)/s.BYTES_PER_ELEMENT),this.typedBufferStride=a/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}return Object(i.a)(e,[{key:"getVec",value:function(e,t){return Object(h.l)(t,this.typedBuffer[e*this.typedBufferStride],this.typedBuffer[e*this.typedBufferStride+1],this.typedBuffer[e*this.typedBufferStride+2],this.typedBuffer[e*this.typedBufferStride+3])}},{key:"setVec",value:function(e,t){this.typedBuffer[e*this.typedBufferStride]=t[0],this.typedBuffer[e*this.typedBufferStride+1]=t[1],this.typedBuffer[e*this.typedBufferStride+2]=t[2],this.typedBuffer[e*this.typedBufferStride+3]=t[3]}},{key:"get",value:function(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}},{key:"set",value:function(e,t,n){this.typedBuffer[e*this.typedBufferStride+t]=n}},{key:"setValues",value:function(e,t,n,r,i){this.typedBuffer[e*this.typedBufferStride]=t,this.typedBuffer[e*this.typedBufferStride+1]=n,this.typedBuffer[e*this.typedBufferStride+2]=r,this.typedBuffer[e*this.typedBufferStride+3]=i}},{key:"copyFrom",value:function(e,t,n){var r=this.typedBuffer,i=t.typedBuffer,a=e*this.typedBufferStride,o=n*t.typedBufferStride;r[a]=i[o],r[a+1]=i[o+1],r[a+2]=i[o+2],r[a+3]=i[o+3]}},{key:"buffer",get:function(){return this.typedBuffer.buffer}}]),e}();b.ElementCount=4;var v=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Float32Array,e,a,o,s)).elementType="f32",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(l);v.ElementType="f32";var y=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Float32Array,e,a,o,s)).elementType="f32",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(d);y.ElementType="f32";var m=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Float32Array,e,a,o,s)).elementType="f32",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(p);m.ElementType="f32";var g=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Float32Array,e,a,o,s)).elementType="f32",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(b);g.ElementType="f32";var O=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Float32Array,e,a,o,s)).elementType="f32",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(s);O.ElementType="f32";var j=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Float64Array,e,a,o,s)).elementType="f64",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(s);j.ElementType="f64";var w=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Float32Array,e,a,o,s)).elementType="f32",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(c);w.ElementType="f32";var _=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Float64Array,e,a,o,s)).elementType="f64",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(c);_.ElementType="f64";var k=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Float64Array,e,a,o,s)).elementType="f64",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(l);k.ElementType="f64";var x=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Float64Array,e,a,o,s)).elementType="f64",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(d);x.ElementType="f64";var S=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Float64Array,e,a,o,s)).elementType="f64",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(p);S.ElementType="f64";var T=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Float64Array,e,a,o,s)).elementType="f64",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(b);T.ElementType="f64";var E=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Uint8Array,e,a,o,s)).elementType="u8",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(l);E.ElementType="u8";var C=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Uint8Array,e,a,o,s)).elementType="u8",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(d);C.ElementType="u8";var P=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Uint8Array,e,a,o,s)).elementType="u8",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(p);P.ElementType="u8";var I=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Uint8Array,e,a,o,s)).elementType="u8",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(b);I.ElementType="u8";var M=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Uint16Array,e,a,o,s)).elementType="u16",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(l);M.ElementType="u16";var A=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Uint16Array,e,a,o,s)).elementType="u16",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(d);A.ElementType="u16";var R=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Uint16Array,e,a,o,s)).elementType="u16",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(p);R.ElementType="u16";var L=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Uint16Array,e,a,o,s)).elementType="u16",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(b);L.ElementType="u16";var F=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Uint32Array,e,a,o,s)).elementType="u32",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(l);F.ElementType="u32";var D=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Uint32Array,e,a,o,s)).elementType="u32",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(d);D.ElementType="u32";var N=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Uint32Array,e,a,o,s)).elementType="u32",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(p);N.ElementType="u32";var V=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Uint32Array,e,a,o,s)).elementType="u32",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(b);V.ElementType="u32";var z=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Int8Array,e,a,o,s)).elementType="i8",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(l);z.ElementType="i8";var U=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Int8Array,e,a,o,s)).elementType="i8",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(d);U.ElementType="i8";var B=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Int8Array,e,a,o,s)).elementType="i8",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(p);B.ElementType="i8";var G=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Int8Array,e,a,o,s)).elementType="i8",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(b);G.ElementType="i8";var q=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Int16Array,e,a,o,s)).elementType="i16",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(l);q.ElementType="i16";var H=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Int16Array,e,a,o,s)).elementType="i16",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(d);H.ElementType="i16";var W=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Int16Array,e,a,o,s)).elementType="i16",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(p);W.ElementType="i16";var $=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Int16Array,e,a,o,s)).elementType="i16",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(b);$.ElementType="i16";var J=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Int32Array,e,a,o,s)).elementType="i32",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(l);J.ElementType="i32";var Y=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Int32Array,e,a,o,s)).elementType="i32",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(d);Y.ElementType="i32";var K=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Int32Array,e,a,o,s)).elementType="i32",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(p);K.ElementType="i32";var Z=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return Object(r.a)(this,n),(i=t.call(this,Int32Array,e,a,o,s)).elementType="i32",i}return Object(i.a)(n,null,[{key:"fromTypedArray",value:function(e,t){return new n(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}]),n}(b);Z.ElementType="i32"},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return l}));var r=n(100),i=/\{([^\}]+)\}/g;function a(e){return null==e?"":e}function o(e,t){return e.replace(i,"object"==typeof t?function(e,n){return a(Object(r.b)(n,t))}:function(e,n){return a(t(n))})}function s(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,(function(e){return t&&-1!==t.indexOf(e)?e:"\\".concat(e)}))}function c(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}function l(e){return(new DOMParser).parseFromString(e||"","text/html").body.innerText||""}},function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return _})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return x})),n.d(t,"g",(function(){return k})),n.d(t,"h",(function(){return g})),n.d(t,"i",(function(){return O})),n.d(t,"j",(function(){return p})),n.d(t,"k",(function(){return m})),n.d(t,"l",(function(){return w})),n.d(t,"m",(function(){return f})),n.d(t,"n",(function(){return b}));var r=n(10),i=n(90),a=n(128),o=n(323),s=n(44),c=n(63),l=n(231),u=n(207),d=n(476),f={type:Boolean,value:!0,json:{origins:{"web-scene":{read:{source:["id","url","layerType"],reader:function(e,t){if(null!=t.screenSizePerspective||"defaults"!==this.originOf("screenSizePerspectiveEnabled"))return t.screenSizePerspective;Object(i.a)(this).store.set("screenSizePerspectiveEnabled",!1,0)}},write:{ignoreOrigin:!0,target:"screenSizePerspective",writer:function(e,t,n,r){("defaults"===this.originOf("screenSizePerspectiveEnabled")&&e||Object(o.a)(this,"screenSizePerspectiveEnabled",{},r))&&(t[n]=e)}}}}}},p={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:function(e,t){return!t.disablePopup}},write:{enabled:!0,writer:function(e,t,n){t[n]=!e}}}},h={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},b={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:a.f}}},v={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},y={value:null,type:d.a,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function m(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}var g={type:Number,json:{origins:{"web-document":{default:1,write:!0,read:!0},"portal-item":{write:!0}}}},O=Object(r.a)(Object(r.a)({},g),{},{json:Object(r.a)(Object(r.a)({},g.json),{},{origins:{"web-document":Object(r.a)(Object(r.a)({},g.json.origins["web-document"]),{},{write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}})},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:function(e,t,n){return n&&"service"!==n.origin||!t.drawingInfo||void 0===t.drawingInfo.transparency?t.layerDefinition&&t.layerDefinition.drawingInfo&&void 0!==t.layerDefinition.drawingInfo.transparency?Object(l.b)(t.layerDefinition.drawingInfo.transparency):void 0:Object(l.b)(t.drawingInfo.transparency)}}})}),j={type:u.a,readOnly:!0,get:function(){var e,t;if(null==(e=this.layer)||!e.timeInfo)return null;var n=null==(t=this.view)?void 0:t.timeExtent,r=this.layer.timeExtent,i=this.layer.useViewTime?n&&r?n.intersection(r):n||r:r;if(!i||i.isEmpty)return i;var a=this.layer.timeOffset,o=a?i.offset(-a.value,a.unit):i,s=this._get("timeExtent");return o.equals(s)?s:o}},w={type:c.a,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:function(e,t){var n=c.a.fromJSON(e);return null!=t.spatialReference&&"object"==typeof t.spatialReference&&(n.spatialReference=s.a.fromJSON(t.spatialReference)),n}}}},read:!1}},_={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},k={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},x={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}}},function(e,t,n){"use strict";var r=n(7),i=n.n(r),a=n(15),o=n(2),s=n(3),c=n(5),l=n(6),u=n(0),d=(n(16),n(13),n(17),n(1)),f=n(47),p=n(41),h=n(8),b=(n(12),n(19),n(20),n(28)),v=n(39),y=new f.a({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"}),m=0,g=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).id="sym"+m++,r.type=null,r}return Object(s.a)(n,[{key:"color",set:function(e){this._set("color",e)}},{key:"readColor",value:function(e){return e&&null!=e[0]?[e[0],e[1],e[2],e[3]/255]:e}},{key:"collectRequiredFields",value:function(){var e=Object(a.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"hash",value:function(){return JSON.stringify(this.toJSON())}},{key:"clone",value:function(){}}]),n}(b.a);Object(u.a)([Object(d.b)({type:y.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:y.write}}})],g.prototype,"type",void 0),Object(u.a)([Object(d.b)({type:v.a,value:new v.a([0,0,0,1]),json:{write:{allowNull:!0}}})],g.prototype,"color",null),Object(u.a)([Object(p.a)("color")],g.prototype,"readColor",null);var O=g=Object(u.a)([Object(h.a)("esri.symbols.Symbol")],g);t.a=O},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return a}));var r=n(4),i=7;function a(e){switch(e){case"defaults":return 0;case"service":return 2;case"portal-item":return 3;case"web-scene":return 4;case"web-map":return 5;case"user":return 6}}function o(e){switch(e){case 0:return"defaults";case 2:return"service";case 3:return"portal-item";case 4:return"web-scene";case 5:return"web-map";case 6:return"user"}return Object(r.d)(void 0)}function s(e){return o(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l}));var r=n(17),i=n(39),a=n(38),o=n(231);var s={type:i.a,json:{type:[r.a],default:null,read:{source:["color","transparency"],reader:function(e,t){var n=null!=t.transparency?Object(o.b)(t.transparency):1,r=t.color;return r&&Array.isArray(r)?new i.a([r[0]||0,r[1]||0,r[2]||0,n]):null}},write:{target:{color:{type:[r.a]},transparency:{type:r.a}},writer:function(e,t){t.color=e.toJSON().slice(0,3);var n=Object(o.a)(e.a);0!==n&&(t.transparency=n)}}}},c={type:Number,cast:a.j,json:{write:!0}},l={type:[Number],cast:function(e){return null!=e?e:Array.isArray(e)?e.map(a.j):null},json:{read:!1,write:!1}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return c}));var r=n(4),i=n(12);function a(e,t){var n=t&&t.url&&t.url.path;if(e&&n&&(e=Object(i.z)(e,n,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){var r=Object(i.B)(e,t.portalItem.itemUrl);u.test(r)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(r).path)}return p(e,t&&t.portal)}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!e)return e;!Object(i.s)(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);var r=Object(i.z)(e);if(t){var a=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(a){var o=p(a,t.portal);(r=Object(i.B)(p(r,t.portal),o,o))!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=f(r,t&&t.portal),Object(i.s)(r)&&(r=Object(i.C)(r)),null!=t&&t.resources&&null!=t&&t.portalItem&&!Object(i.s)(r)&&!Object(i.u)(r)&&0===n&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r)}),r}function s(e,t,n){return a(e,n)}function c(e,t,n,r){var i=o(e,r);void 0!==i&&(t[n]=i)}var l=/\/items\/([^\/]+)\/resources\//,u=/^\.\/resources\//;function d(e){var t=Object(r.k)(e)?e.match(l):null;return Object(r.k)(t)?t[1]:null}function f(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?Object(i.h)(e,"".concat(t.urlKey,".").concat(t.customBaseUrl),t.portalHostname):e}function p(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;var n="".concat(t.urlKey,".").concat(t.customBaseUrl);return Object(i.q)(i.g,"".concat(i.g.scheme,"://").concat(n))?Object(i.h)(e,t.portalHostname,n):Object(i.h)(e,n,t.portalHostname)}var h=Object.freeze({__proto__:null,fromJSON:a,toJSON:o,read:s,write:c,itemIdFromResourceUrl:d})},function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return T}));var r=n(3),i=n(2),a=n(4),o=n(312),s=n(412),c=n(139),l=n(24),u=function e(t){Object(i.a)(this,e),this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1},d=function(){function e(t){Object(i.a)(this,e),this.callback=t,this.isActive=!0}return Object(r.a)(e,[{key:"remove",value:function(){this.isActive=!1}}]),e}(),f=0,p=0,h={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},b=["prepare","preRender","render","postRender","update"],v=[],y=new c.a,m=function(){function e(t){Object(i.a)(this,e),this._task=t}return Object(r.a)(e,[{key:"remove",value:function(){this._task.removed=!0}},{key:"pause",value:function(){this._task.paused=!0}},{key:"resume",value:function(){this._task.paused=!1}}]),e}(),g={frameTasks:y,willDispatch:!1,clearFrameTasks:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];y.forAll((function(e){e.removed=!0})),e&&x()},dispatch:S,executeFrameTasks:function(e){var t=e-f;f=e;for(var n=p>0?p:1e3/60,r=Math.max(0,t-n),i=function(i){var a=performance.now(),o=b[i];y.forAll((function(a){var s;a.paused||a.removed||(0===i&&a.ticks++,a.phases[o]&&(h.time=e,h.deltaTime=0===a.ticks?0:t,h.elapsedFrameTime=performance.now()-e,h.frameDuration=n-r,null==(s=a.phases[o])||s.call(a,h)))})),E[i].record(performance.now()-a)},a=0;a<b.length;a++)i(a);x(),C.record(performance.now()-e)}};function O(e){var t=new d(e);return v.push(t),g.willDispatch||(g.willDispatch=!0,Object(o.a)(S)),t}function j(e){var t=new u(e);return y.push(t),null==w&&(f=performance.now(),w=requestAnimationFrame(_)),new m(t)}var w=null;function _(){var e=performance.now();w=null,w=y.length>0?requestAnimationFrame(_):null,g.executeFrameTasks(e)}var k=new c.a;function x(){y.forAll((function(e){e.removed&&k.push(e)})),y.removeUnorderedMany(k.data,k.length),k.clear()}function S(){for(;v.length;){var e=Object(a.d)(v.shift());e.isActive&&e.callback()}g.willDispatch=!1}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0,n=Object(l.g)(),r=function r(){Object(l.n)(t)?n.reject(Object(l.e)()):0===e?n():(--e,Object(o.a)((function(){return r()})))};return r(),n.promise}var E=b.map((function(e){return new s.a(e)})),C=new s.a("total")},function(e,t,n){"use strict";n.r(t);var r,i=n(2),a=n(3),o=n(53),s=n(50),c=n(5),l=n(6),u=n(0),d=(n(16),n(22)),f=(n(13),n(17),n(1)),p=n(47),h=n(49),b=n(8),v=(n(12),n(19),n(20),n(39)),y=n(120),m=n(401),g=new p.a({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"}),O=r=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).color=new v.a([0,0,0,.25]),e.outline=new y.default,e.type="simple-fill",e.style="solid",e}return Object(a.a)(n,[{key:"normalizeCtorArgs",value:function(e,t,n){if(e&&"string"!=typeof e)return e;var r={};return e&&(r.style=e),t&&(r.outline=t),n&&(r.color=n),r}},{key:"clone",value:function(){return new r({color:Object(d.a)(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}},{key:"hash",value:function(){return"".concat(Object(o.a)(Object(s.a)(n.prototype),"hash",this).call(this)).concat(this.style,".").concat(this.color&&this.color.hash())}}]),n}(m.a);Object(u.a)([Object(f.b)()],O.prototype,"color",void 0),Object(u.a)([Object(f.b)()],O.prototype,"outline",void 0),Object(u.a)([Object(h.a)({esriSFS:"simple-fill"},{readOnly:!0})],O.prototype,"type",void 0),Object(u.a)([Object(f.b)({type:g.apiValues,json:{read:g.read,write:g.write}})],O.prototype,"style",void 0);var j=O=r=Object(u.a)([Object(b.a)("esri.symbols.SimpleFillSymbol")],O);t.default=j},function(e,t,n){"use strict";n.d(t,"a",(function(){return Y})),n.d(t,"b",(function(){return J})),n.d(t,"c",(function(){return K})),n.d(t,"d",(function(){return R})),n.d(t,"e",(function(){return $})),n.d(t,"f",(function(){return C})),n.d(t,"g",(function(){return L})),n.d(t,"h",(function(){return F})),n.d(t,"i",(function(){return B})),n.d(t,"j",(function(){return N})),n.d(t,"k",(function(){return z})),n.d(t,"l",(function(){return G})),n.d(t,"m",(function(){return q})),n.d(t,"n",(function(){return W})),n.d(t,"o",(function(){return H})),n.d(t,"p",(function(){return re})),n.d(t,"q",(function(){return Z})),n.d(t,"r",(function(){return X})),n.d(t,"s",(function(){return Q})),n.d(t,"t",(function(){return ne})),n.d(t,"u",(function(){return te})),n.d(t,"v",(function(){return D})),n.d(t,"w",(function(){return oe}));var r=n(7),i=n.n(r),a=n(14),o=n(15),s=n(4),c=n(59),l=n(44),u=n(150),d=n(79),f=n(61),p=n(43),h=n(63),b=n(40),v=n(64),y=n(210),m=n(66),g=n(60),O=n(33),j=n(110),w=n(211),_=39.37,k=180/Math.PI;function x(e,t,n,r){return r&&n&&!r.equals(n)&&Object(f.a)(r,n)&&r.isWebMercator?r.isWebMercator?function(e,t){var n=t[1];return n>89.99999?n=89.99999:n<-89.99999&&(n=-89.99999),n=Math.sin(Object(v.d)(n)),Object(O.r)(e,Object(v.d)(t[0])*d.a.radius,.5*d.a.radius*Math.log((1+n)/(1-n)))}(e,t):function(e,t,n){var r=Object(v.c)(t[0]/d.a.radius);return Object(O.r)(e,n?r:r-360*Math.floor((r+180)/360),Object(v.c)(.5*Math.PI-2*Math.atan(Math.exp(-1*t[1]/d.a.radius))))}(e,t):Object(O.c)(e,t)}function S(e){return e.wkid?e:e.spatialReference||l.a.WGS84}function T(e,t){return t.type?Object(O.r)(e,t.x,t.y):Object(O.c)(e,t)}function E(e){return Object(m.d)(e)}function C(e,t){return Math.max(e.width/t[0],e.height/t[1])*function(e){return Object(c.i)(e)?E(e)*_*96:1}(e.spatialReference)}function P(e,t,n,r){return I.apply(this,arguments)}function I(){return(I=Object(o.a)(i.a.mark((function e(t,n,r,o){var c,l,d,v,y,m,g,O,j,w,_,k,x,S,T,E,C,I,M,A,R,L,F,D,N,V,z,U,B;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if(!Array.isArray(t)||t.length){e.next=4;break}return e.abrupt("return",null);case 4:if(b.a.isCollection(t)&&(t=t.toArray()),!Array.isArray(t)||!t.length||"object"!=typeof t[0]){e.next=39;break}if(d=t.every((function(e){return"attributes"in e})),v=t.some((function(e){return!e.geometry})),y=t,!(d&&v&&n&&n.allLayerViews)){e.next=20;break}m=new Map,g=Object(a.a)(t);try{for(g.s();!(O=g.n()).done;)j=O.value,w=j.layer,_=m.get(w)||[],null!=(k=j.attributes[w.objectIdField])&&_.push(k),m.set(w,_)}catch(i){g.e(i)}finally{g.f()}return x=[],m.forEach((function(e,t){var r=n.allLayerViews.find((function(e){return e.layer.id===t.id}));if("queryFeatures"in r){var i=t.createQuery();i.objectIds=e,i.returnGeometry=!0,x.push(r.queryFeatures(i))}})),e.next=15,Promise.all(x);case 15:S=e.sent,T=[],E=Object(a.a)(S);try{for(E.s();!(C=E.n()).done;)if((I=C.value)&&I.features&&I.features.length){M=Object(a.a)(I.features);try{for(M.s();!(A=M.n()).done;)R=A.value,Object(s.k)(R.geometry)&&T.push(R.geometry)}catch(i){M.e(i)}finally{M.f()}}}catch(i){E.e(i)}finally{E.f()}y=T;case 20:L=Object(a.a)(y),e.prev=21,L.s();case 23:if((F=L.n()).done){e.next=30;break}return D=F.value,e.next=27,P(D,n,r,o);case 27:o=e.sent;case 28:e.next=23;break;case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(21),L.e(e.t0);case 35:return e.prev=35,L.f(),e.finish(35);case 38:return e.abrupt("return",o);case 39:if(!Array.isArray(t)||2!==t.length||"number"!=typeof t[0]||"number"!=typeof t[1]){e.next=43;break}c=new p.a(t),e.next=61;break;case 43:if(!(t instanceof u.a)){e.next=47;break}c=t,e.next=61;break;case 47:if(!("geometry"in t)){e.next=61;break}if(!t.geometry){e.next=52;break}c=t.geometry,e.next=61;break;case 52:if(!t.layer){e.next=61;break}if(N=t.layer,!("queryFeatures"in(V=n.allLayerViews.find((function(e){return e.layer.id===N.id}))))){e.next=61;break}return(z=N.createQuery()).objectIds=[t.attributes[N.objectIdField]],z.returnGeometry=!0,e.next=59,V.queryFeatures(z);case 59:U=e.sent,c=Object(s.i)(U,"features",0,"geometry");case 61:if(!Object(s.j)(c)){e.next=63;break}return e.abrupt("return",null);case 63:if(l="point"===c.type?new h.a({xmin:c.x,ymin:c.y,xmax:c.x,ymax:c.y,spatialReference:c.spatialReference}):c.extent){e.next=65;break}return e.abrupt("return",null);case 65:if(B=Object(f.a)(l,r),l.spatialReference.equals(r)||!B){e.next=70;break}l=Object(f.d)(l,r),e.next=72;break;case 70:if(B){e.next=72;break}return e.abrupt("return",null);case 72:return e.abrupt("return",o=o?o.union(l):l.clone());case 73:case"end":return e.stop()}}),e,null,[[21,32,35,38]])})))).apply(this,arguments)}function M(e){if(e&&(!Array.isArray(e)||"number"!=typeof e[0])&&("object"==typeof e||Array.isArray(e)&&"object"==typeof e[0])){if("layer"in e&&e.layer&&e.layer.minScale&&e.layer.maxScale){var t=e.layer;return{min:t.minScale,max:t.maxScale}}if(Array.isArray(e)&&e.length&&e.every((function(e){return"layer"in e}))){var n,r=0,i=0,o=Object(a.a)(e);try{for(o.s();!(n=o.n()).done;){var s=n.value.layer;s&&s.minScale&&s.maxScale&&(r=s.minScale<r?s.minScale:r,i=s.maxScale>i?s.maxScale:i)}}catch(c){o.e(c)}finally{o.f()}return r&&i?{min:r,max:i}:null}}}function A(){return(A=Object(o.a)(i.a.mark((function e(t,n){var r,a,o,c,l,u,d,b,v,m,O,j,w,_,k;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}return e.abrupt("return",new y.a({targetGeometry:new p.a,scale:0,rotation:0}));case 2:if(r=n.spatialReference,a=n.constraints,o=n.padding,c=n.viewpoint,l=n.size,u=[o?l[0]-o.left-o.right:l[0],o?l[1]-o.top-o.bottom:l[1]],d=null,t instanceof y.a?d=t:t.viewpoint?d=t.viewpoint:t.target&&"esri.Viewpoint"===t.target.declaredClass&&(d=t.target),b=null,!d||!d.targetGeometry){e.next=11;break}b=d.targetGeometry,e.next=35;break;case 11:if(!(t instanceof h.a)){e.next=15;break}b=t,e.next=35;break;case 15:if(e.t0=t||t&&("center"in t||"extent"in t||"target"in t),!e.t0){e.next=35;break}return e.next=19,P(t.center,n,r);case 19:if(e.t3=e.sent,e.t3){e.next=24;break}return e.next=23,P(t.extent,n,r);case 23:e.t3=e.sent;case 24:if(e.t2=e.t3,e.t2){e.next=29;break}return e.next=28,P(t.target,n,r);case 28:e.t2=e.sent;case 29:if(e.t1=e.t2,e.t1){e.next=34;break}return e.next=33,P(t,n,r);case 33:e.t1=e.sent;case 34:b=e.t1;case 35:if(!b&&c&&c.targetGeometry?b=c.targetGeometry:!b&&n.extent&&(b=n.extent),v=S(b),r||(r=S(n.spatialReference||n.extent||b)),Object(f.a)(b,r)||!v||v.equals(r)){e.next=39;break}return e.abrupt("return",null);case 39:return m=T(Object(g.a)(),b.center?b.center:b),O=new p.a(x(m,m,v,r),r),j=null,j=d&&Object(s.k)(d.targetGeometry)&&"point"===d.targetGeometry.type?d.scale:t.hasOwnProperty("scale")&&t.scale?t.scale:t.hasOwnProperty("zoom")&&-1!==t.zoom&&a&&a.effectiveLODs?a.zoomToScale(t.zoom):Array.isArray(b)||"point"===b.type||"extent"===b.type&&0===b.width&&0===b.height?n.extent&&Object(f.a)(n.extent,r)?C(Object(f.d)(n.extent,r),u):n.extent?C(n.extent,u):c.scale:Object(f.a)(b.extent,r)?C(Object(f.d)(b.extent,r),u):C(b.extent,u),(w=M(t))&&(w.min&&w.min>j?j=w.min:w.max&&w.max<j&&(j=w.max)),_=0,d?_=d.rotation:t.hasOwnProperty("rotation")?_=t.rotation:c&&(_=c.rotation),k=new y.a({targetGeometry:O,scale:j,rotation:_}),e.abrupt("return",(a&&(k=a.fit(k),a.constrainByGeometry(k),a.rotationEnabled||(k.rotation=_)),k));case 48:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t){var n=e.targetGeometry,r=t.targetGeometry;return n.x=r.x,n.y=r.y,n.spatialReference=r.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function L(e,t,n){return n?Object(O.r)(e,.5*(t[0]-n.right+n.left),.5*(t[1]-n.bottom+n.top)):Object(O.a)(e,t,.5)}var F=function(){var e=Object(g.a)();return function(t,n,r){var i=n.targetGeometry;T(e,i);var a=.5*z(n);return t.xmin=e[0]-a*r[0],t.ymin=e[1]-a*r[1],t.xmax=e[0]+a*r[0],t.ymax=e[1]+a*r[1],t.spatialReference=i.spatialReference,t}}();function D(e,t,n,r,i){return K(e,t,n.center),e.scale=C(n,r),i&&i.constraints&&i.constraints.constrain(e),e}var N=function(){var e=Object(g.a)();return function(t,n,r){return Object(O.b)(t,function(e,t){return Object(O.a)(e,t,.5)}(t,n),L(e,n,r))}}(),V=function(){var e=Object(w.b)(),t=Object(g.a)();return function(n,r,i,a){var o=z(r),s=U(r);return Object(O.r)(t,o,o),Object(j.c)(e,t),Object(j.f)(e,e,s),Object(j.h)(e,e,N(t,i,a)),Object(j.h)(e,e,[0,a.top-a.bottom]),Object(O.r)(n,e[4],e[5])}}();function z(e){return e.scale*(t=e.targetGeometry,Object(s.k)(t)&&Object(c.i)(t.spatialReference)?1/(E(t.spatialReference)*_*96):1);var t}function U(e){return Object(v.d)(e.rotation)||0}var B=function(){var e=Object(g.a)(),t=Object(g.a)(),n=Object(g.a)();return function(r,i,a,o,s,c){return Object(O.n)(e,i),Object(O.a)(t,a,.5*c),Object(O.r)(n,1/o*c,-1/o*c),Object(j.d)(r),Object(j.h)(r,r,t),s&&Object(j.f)(r,r,s),Object(j.g)(r,r,n),Object(j.h)(r,r,e),r}}(),G=function(){var e=Object(g.a)();return function(t,n,r,i){var a=z(n),o=U(n);return T(e,n.targetGeometry),B(t,e,r,a,o,i)}}(),q=function(){var e=Object(g.a)();return function(t,n,r,i){var a=z(n);return T(e,n.targetGeometry),B(t,e,r,a,0,i)}}();function H(e){if(e.isWrappable){var t=Object(c.d)(e);return t.valid[1]-t.valid[0]}return 0}function W(e,t){return Math.round(H(e)/t)}function $(e,t){return function(e,t){return A.apply(this,arguments)}(e,t)}var J=function(){var e=Object(g.a)(),t=Object(g.a)(),n=[0,0,0];return function(r,i,a){Object(O.d)(e,r,i),Object(O.e)(e,e),Object(O.d)(t,r,a),Object(O.e)(t,t),Object(O.f)(n,e,t);var o=Math.acos(Object(O.g)(e,t)/(Object(O.l)(e)*Object(O.l)(t)))*k;return n[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),Y=function(){var e=Object(g.a)();return function(t,n,r,i){var a=t.targetGeometry;return R(t,n),V(e,n,r,i),a.x+=e[0],a.y+=e[1],t}}(),K=(function(){var e=Object(g.a)()}(),function(){var e=Object(g.a)();return function(t,n,r){R(t,n);var i=t.targetGeometry,a=S(r),o=S(i);return T(e,r),x(e,e,a,o),i.x=e[0],i.y=e[1],t}}());var Z=function(){var e=Object(g.a)();return function(t,n,r,i,a){a||(a="center"),Object(O.b)(e,r,i),Object(O.a)(e,e,.5);var o=e[0],s=e[1];switch(a){case"center":Object(O.r)(e,0,0);break;case"left":Object(O.r)(e,-o,0);break;case"top":Object(O.r)(e,0,s);break;case"right":Object(O.r)(e,o,0);break;case"bottom":Object(O.r)(e,0,-s);break;case"top-left":Object(O.r)(e,-o,s);break;case"bottom-left":Object(O.r)(e,-o,-s);break;case"top-right":Object(O.r)(e,o,s);break;case"bottom-right":Object(O.r)(e,o,-s)}return oe(t,n,e),t}}();function X(e,t,n){return R(e,t),e.rotation+=n,e}function Q(e,t,n){return R(e,t),e.rotation=n,e}var ee=function(){var e=Object(g.a)();return function(t,n,r,i,a){return R(t,n),isNaN(r)||0===r||(ie(e,i,n,a),t.scale=n.scale*r,ae(e,e,t,a),oe(t,t,Object(O.r)(e,e[0]-i[0],i[1]-e[1]))),t}}();function te(e,t,n){return R(e,t),e.scale=n,e}var ne=function(){var e=Object(g.a)();return function(t,n,r,i,a,o){return R(t,n),isNaN(r)||0===r||(ie(e,a,n,o),t.scale=n.scale*r,t.rotation+=i,ae(e,e,t,o),oe(t,t,Object(O.r)(e,e[0]-a[0],a[1]-e[1]))),t}}(),re=function(){var e=Object(g.a)(),t=Object(g.a)();return function(n,r,i,a,o,s,c){return N(t,s,c),Object(O.h)(e,o,t),a?ne(n,r,i,a,e,s):ee(n,r,i,e,s)}}(),ie=function(){var e=Object(w.b)();return function(t,n,r,i){return Object(O.s)(t,n,function(e,t,n,r){return G(e,t,n,r),Object(j.a)(e,e)}(e,r,i,1))}}(),ae=function(){var e=Object(w.b)();return function(t,n,r,i){return Object(O.s)(t,n,G(e,r,i,1))}}(),oe=function(){var e=Object(g.a)(),t=Object(w.b)();return function(n,r,i){R(n,r);var a=z(r),o=n.targetGeometry;return Object(j.b)(t,U(r)),Object(j.g)(t,t,Object(g.e)(a,a)),Object(O.s)(e,i,t),o.x+=e[0],o.y+=e[1],n}}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return b})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return d})),n.d(t,"i",(function(){return g})),n.d(t,"j",(function(){return v})),n.d(t,"k",(function(){return m}));var r=n(2),i=n(4),a=n(624);function o(e,t,n){if(Object(i.j)(e)&&Object(i.j)(t))return!0;if(Object(i.j)(e)||Object(i.j)(t)||e.length!==t.length)return!1;if(n){for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1}else for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}function s(e,t,n){return e&&t?n?e.filter((function(e){return t.findIndex((function(t){return n(e,t)}))>-1})):e.filter((function(e){return t.indexOf(e)>-1})):[]}function c(e){return e&&"number"==typeof e.length}var l=!!Array.prototype.fill;function u(e,t){if(l)return new Array(e).fill(t);for(var n=new Array(e),r=0;r<e;r++)n[r]=t;return n}function d(e,t){void 0===t&&(t=e,e=0);for(var n=new Array(t-e),r=e;r<t;r++)n[r-e]=r;return n}function f(e){return e.reduce((function(e,t){return e.concat(t||[])}),[])}var p=function e(){Object(r.a)(this,e),this.last=0},h=new p;function b(e,t,n,r){r=r||h;for(var i=Math.max(0,r.last-10),a=i;a<n;++a)if(e[a]===t)return r.last=a,a;for(var o=Math.min(i,n),s=0;s<o;++s)if(e[s]===t)return r.last=s,s;return-1}function v(e,t,n,r){var i=null==n?e.length:n,a=b(e,t,i,r);if(-1!==a)return e[a]=e[i-1],null==n&&e.pop(),t}var y=new Set;function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length,i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;if(0===r||0===n)return n;y.clear();for(var o=0;o<r;++o)y.add(t[o]);i=i||h;for(var s=Math.max(0,i.last-10),c=s;c<n;++c)if(y.has(e[c])&&(a&&a.push(e[c]),y.delete(e[c]),e[c]=e[n-1],--n,--c,0===y.size||0===n))return y.clear(),n;for(var l=0;l<s;++l)if(y.has(e[l])&&(a&&a.push(e[l]),y.delete(e[l]),e[l]=e[n-1],--n,--l,0===y.size||0===n))return y.clear(),n;return y.clear(),n}new a.a;function g(e,t){var n=e.indexOf(t);return-1!==n?(e.splice(n,1),t):null}},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(37),s=n(5),c=n(6),l=n(0),u=n(1),d=n(177),f=n(8),p=n(18),h=n(24),b=n(218),v="not-loaded",y="loading",m="failed",g="loaded",O=function(e){var t=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a)))._loadController=null,e.loadError=null,e.loadStatus="not-loaded",e._set("loadWarnings",[]),e.addResolvingPromise(new Promise((function(t){var n=e.load.bind(Object(o.a)(e));e.load=function(r){var i=new Promise((function(t,n){var i=Object(h.q)(r,n);e.destroyed&&n(new p.a("load:instance-destroyed","Instance of '".concat(e.declaredClass||e.constructor.name,"' is already destroyed"),{instance:Object(o.a)(e)})),e._promiseProps.when(t,n).finally((function(){i&&i.remove()}))}));if(e.loadStatus===v){e._set("loadStatus",y);var a=e._loadController=Object(h.d)();n({signal:a.signal}),Object(h.p)(a.signal,(function(){e._promiseProps.abort()}))}return t(),i}}))),e.when((function(){e._set("loadStatus",g),e._loadController=null}),(function(t){e._set("loadStatus",m),e._set("loadError",t),e._loadController=null})),e}return Object(a.a)(n,[{key:"loaded",get:function(){return this.loadStatus===g}},{key:"loadWarnings",get:function(){return this._get("loadWarnings")}},{key:"load",value:function(){return null}},{key:"cancelLoad",value:function(){var e;return this.isFulfilled()||(this._set("loadError",new p.a("load:cancelled","Cancelled")),null==(e=this._loadController)||e.abort()),this}}]),n}(e);return Object(l.a)([Object(u.b)({readOnly:!0})],t.prototype,"loaded",null),Object(l.a)([Object(u.b)({readOnly:!0})],t.prototype,"loadError",void 0),Object(l.a)([Object(u.b)()],t.prototype,"loadStatus",void 0),Object(l.a)([Object(u.b)({type:[d.a],readOnly:!0})],t.prototype,"loadWarnings",null),t=Object(l.a)([Object(f.a)("esri.core.Loadable")],t),t},j=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return n}(O(b.a));j=Object(l.a)([Object(f.a)("esri.core.Loadable")],j),(r=j||(j={})).LoadableMixin=O,r.isLoadable=function(e){return!(!e||!e.load)};var w=j;t.a=w},function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return p}));var r=n(14),i=n(5),a=n(6),o=n(2),s=n(3),c=n(4),l=n(118),u=n(108),d=(n(71),n(78)),f=n(421),p=function(){function e(t){Object(o.a)(this,e),this.left=null,this.right=null,this.type="vertex",this.index=null,this.component=t}return Object(s.a)(e,[{key:"pos",get:function(){return this._pos},set:function(e){this._pos=e,this.component.unnormalizeVertexPositions()}}]),e}(),h=function e(t,n,r){Object(o.a)(this,e),this.type="edge",this.component=t,this.left=n,this.right=r,n.right=this,r.left=this},b=function(){function e(t){Object(o.a)(this,e),this.vertices=[],this.edges=[],this.data=t}return Object(s.a)(e,[{key:"unnormalizeVertexPositions",value:function(){this.vertices.length<=1||this.data.coordinateHelper.unnormalize(this.vertices)}},{key:"updateVertexIndex",value:function(e,t){if(0!==this.vertices.length){var n=this.vertices[0],r=null,i=e,a=t;do{(r=i).index=a++,i=r.right?r.right.right:null}while(null!=i&&i!==n);r.left&&r!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(r),this.vertices.length-1)}}},{key:"getFirstVertex",value:function(){return 0===this.vertices.length?null:this.vertices[0]}},{key:"getLastVertex",value:function(){return 0===this.vertices.length?null:this.vertices[this.vertices.length-1]}},{key:"swapVertices",value:function(e,t){var n=this.vertices[e];this.vertices[e]=this.vertices[t],this.vertices[t]=n}},{key:"iterateVertices",value:function(e){if(0!==this.vertices.length){var t=this.vertices[0],n=t;do{e(n,n.index),n=Object(c.k)(n.right)?n.right.right:null}while(n!==t&&null!=n)}}}]),e}(),v=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this)).coordinateHelper=e,r.undoStack=[],r.redoStack=[],r.components=[],r}return Object(s.a)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;0!==t&&!Object(c.j)(this.lastOperation)&&this.lastOperation.accumulate(e)||(e.apply(),this.undoStack.push(e),this.redoStack=[])}},{key:"undo",value:function(){if(this.undoStack.length>0){var e=this.undoStack.pop();return e.undo(),this.redoStack.push(e),e}return null}},{key:"canUndo",get:function(){return this.undoStack.length>0}},{key:"lastOperation",get:function(){return this.undoStack.length>0?this.undoStack[this.undoStack.length-1]:null}},{key:"redo",value:function(){if(this.redoStack.length>0){var e=this.redoStack.pop();return e.apply(),this.undoStack.push(e),e}return null}},{key:"canRedo",get:function(){return this.redoStack.length>0}},{key:"toPoint",value:function(){return 0===this.components.length||0===this.components[0].vertices.length?null:this.coordinateHelper.createPoint(this.components[0].vertices[0].pos)}},{key:"toPolyline",value:function(){var e=[],t=this.coordinateHelper.toArray;return this.components.forEach((function(n,r){var i=[],a=n.vertices.find((function(e){return null==e.left})),o=a;do{i.push(t(a.pos)),a=a.right?a.right.right:null}while(a&&a!==o);e.push(i)})),new u.a({paths:e,spatialReference:this.coordinateHelper.spatialReference})}},{key:"toPolygon",value:function(){var e=[],t=this.coordinateHelper.toArray;return this.components.forEach((function(n,r){var i=[],a=n.vertices[0],o=a,s=o;do{i.push(t(o.pos)),o=Object(c.k)(o.right)?o.right.right:null}while(o&&o!==s);i.push(t(a.pos)),e.push(i)})),new l.a({rings:e,spatialReference:this.coordinateHelper.spatialReference})}}],[{key:"fromGeometry",value:function(e,t){var i=Object(f.a)(e.hasZ,e.hasM,e.spatialReference,t),a=new n(i);switch(e.type){case"polygon":for(var o=e.rings,s=0;s<o.length;++s){for(var c=o[s],l=new b(a),u=c.length-1,d=0;d<u;++d){var v=i.fromArray(c[d]),y=new p(l);l.vertices.push(y),y.pos=v,y.index=d}for(var m=l.vertices.length-1,g=0;g<m;++g){var O=l.vertices[g],j=l.vertices[g+1],w=new h(l,O,j);l.edges.push(w)}var _=new h(l,l.vertices[l.vertices.length-1],l.vertices[0]);l.edges.push(_),a.components.push(l)}break;case"polyline":var k,x=Object(r.a)(e.paths);try{for(x.s();!(k=x.n()).done;){for(var S=k.value,T=new b(a),E=S.length,C=0;C<E;++C){var P=i.fromArray(S[C]),I=new p(T);T.vertices.push(I),I.pos=P,I.index=C}for(var M=T.vertices.length-1,A=0;A<M;++A){var R=T.vertices[A],L=T.vertices[A+1],F=new h(T,R,L);T.edges.push(F)}a.components.push(T)}}catch(V){x.e(V)}finally{x.f()}break;case"point":var D=new b(a),N=new p(D);N.index=0,N.pos=a.coordinateHelper.fromPoint(e),D.vertices.push(N),a.components.push(D)}return a}}]),n}(d.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return z})),n.d(t,"c",(function(){return H})),n.d(t,"d",(function(){return Y})),n.d(t,"e",(function(){return G}));var r=n(21),i=n.n(r),a=(n(96),i.a.createContext(null));var o=function(e){e()},s={notify:function(){}};function c(){var e=o,t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var l=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=s,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=c())},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=s)},e}(),u="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect;var d=function(e){var t=e.store,n=e.context,o=e.children,s=Object(r.useMemo)((function(){var e=new l(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),c=Object(r.useMemo)((function(){return t.getState()}),[t]);u((function(){var e=s.subscription;return e.trySubscribe(),c!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[s,c]);var d=n||a;return i.a.createElement(d.Provider,{value:s},o)},f=n(73),p=n(160),h=n(338),b=n.n(h),v=n(278),y=[],m=[null,null];function g(e,t){var n=e[1];return[t.payload,n+1]}function O(e,t,n){u((function(){return e.apply(void 0,t)}),n)}function j(e,t,n,r,i,a,o){e.current=r,t.current=i,n.current=!1,a.current&&(a.current=null,o())}function w(e,t,n,r,i,a,o,s,c,l){if(e){var u=!1,d=null,f=function(){if(!u){var e,n,f=t.getState();try{e=r(f,i.current)}catch(p){n=p,d=p}n||(d=null),e===a.current?o.current||c():(a.current=e,s.current=e,o.current=!0,l({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=f,n.trySubscribe(),f();return function(){if(u=!0,n.tryUnsubscribe(),n.onStateChange=null,d)throw d}}}var _=function(){return[null,0]};function k(e,t){void 0===t&&(t={});var n=t,o=n.getDisplayName,s=void 0===o?function(e){return"ConnectAdvanced("+e+")"}:o,c=n.methodName,u=void 0===c?"connectAdvanced":c,d=n.renderCountProp,h=void 0===d?void 0:d,k=n.shouldHandleStateChanges,x=void 0===k||k,S=n.storeKey,T=void 0===S?"store":S,E=(n.withRef,n.forwardRef),C=void 0!==E&&E,P=n.context,I=void 0===P?a:P,M=Object(p.a)(n,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]),A=I;return function(t){var n=t.displayName||t.name||"Component",a=s(n),o=Object(f.a)({},M,{getDisplayName:s,methodName:u,renderCountProp:h,shouldHandleStateChanges:x,storeKey:T,displayName:a,wrappedComponentName:n,WrappedComponent:t}),c=M.pure;var d=c?r.useMemo:function(e){return e()};function k(n){var a=Object(r.useMemo)((function(){var e=n.reactReduxForwardedRef,t=Object(p.a)(n,["reactReduxForwardedRef"]);return[n.context,e,t]}),[n]),s=a[0],c=a[1],u=a[2],h=Object(r.useMemo)((function(){return s&&s.Consumer&&Object(v.isContextConsumer)(i.a.createElement(s.Consumer,null))?s:A}),[s,A]),b=Object(r.useContext)(h),k=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(b)&&Boolean(b.store);var S=k?n.store:b.store,T=Object(r.useMemo)((function(){return function(t){return e(t.dispatch,o)}(S)}),[S]),E=Object(r.useMemo)((function(){if(!x)return m;var e=new l(S,k?null:b.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[S,k,b]),C=E[0],P=E[1],I=Object(r.useMemo)((function(){return k?b:Object(f.a)({},b,{subscription:C})}),[k,b,C]),M=Object(r.useReducer)(g,y,_),R=M[0][0],L=M[1];if(R&&R.error)throw R.error;var F=Object(r.useRef)(),D=Object(r.useRef)(u),N=Object(r.useRef)(),V=Object(r.useRef)(!1),z=d((function(){return N.current&&u===D.current?N.current:T(S.getState(),u)}),[S,R,u]);O(j,[D,F,V,u,z,N,P]),O(w,[x,S,C,T,D,F,V,N,P,L],[S,C,T]);var U=Object(r.useMemo)((function(){return i.a.createElement(t,Object(f.a)({},z,{ref:c}))}),[c,t,z]);return Object(r.useMemo)((function(){return x?i.a.createElement(h.Provider,{value:I},U):U}),[h,U,I])}var S=c?i.a.memo(k):k;if(S.WrappedComponent=t,S.displayName=k.displayName=a,C){var E=i.a.forwardRef((function(e,t){return i.a.createElement(S,Object(f.a)({},e,{reactReduxForwardedRef:t}))}));return E.displayName=a,E.WrappedComponent=t,b()(E,t)}return b()(S,t)}}function x(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function S(e,t){if(x(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!x(e[n[i]],t[n[i]]))return!1;return!0}function T(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function E(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function C(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=E(e);var i=r(t,n);return"function"===typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=E(i),i=r(t,n)),i},r}}var P=[function(e){return"function"===typeof e?C(e):void 0},function(e){return e?void 0:T((function(e){return{dispatch:e}}))},function(e){return e&&"object"===typeof e?T((function(t){return function(e,t){var n={},r=function(r){var i=e[r];"function"===typeof i&&(n[r]=function(){return t(i.apply(void 0,arguments))})};for(var i in e)r(i);return n}(e,t)})):void 0}];var I=[function(e){return"function"===typeof e?C(e):void 0},function(e){return e?void 0:T((function(){return{}}))}];function M(e,t,n){return Object(f.a)({},n,e,t)}var A=[function(e){return"function"===typeof e?function(e){return function(t,n){n.displayName;var r,i=n.pure,a=n.areMergedPropsEqual,o=!1;return function(t,n,s){var c=e(t,n,s);return o?i&&a(c,r)||(r=c):(o=!0,r=c),r}}}(e):void 0},function(e){return e?void 0:function(){return M}}];function R(e,t,n,r){return function(i,a){return n(e(i,a),t(r,a),a)}}function L(e,t,n,r,i){var a,o,s,c,l,u=i.areStatesEqual,d=i.areOwnPropsEqual,f=i.areStatePropsEqual,p=!1;function h(i,p){var h=!d(p,o),b=!u(i,a);return a=i,o=p,h&&b?(s=e(a,o),t.dependsOnOwnProps&&(c=t(r,o)),l=n(s,c,o)):h?(e.dependsOnOwnProps&&(s=e(a,o)),t.dependsOnOwnProps&&(c=t(r,o)),l=n(s,c,o)):b?function(){var t=e(a,o),r=!f(t,s);return s=t,r&&(l=n(s,c,o)),l}():l}return function(i,u){return p?h(i,u):(s=e(a=i,o=u),c=t(r,o),l=n(s,c,o),p=!0,l)}}function F(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,a=Object(p.a)(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),o=n(e,a),s=r(e,a),c=i(e,a);return(a.pure?L:R)(o,s,c,e,a)}function D(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function N(e,t){return e===t}function V(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?k:n,i=t.mapStateToPropsFactories,a=void 0===i?I:i,o=t.mapDispatchToPropsFactories,s=void 0===o?P:o,c=t.mergePropsFactories,l=void 0===c?A:c,u=t.selectorFactory,d=void 0===u?F:u;return function(e,t,n,i){void 0===i&&(i={});var o=i,c=o.pure,u=void 0===c||c,h=o.areStatesEqual,b=void 0===h?N:h,v=o.areOwnPropsEqual,y=void 0===v?S:v,m=o.areStatePropsEqual,g=void 0===m?S:m,O=o.areMergedPropsEqual,j=void 0===O?S:O,w=Object(p.a)(o,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),_=D(e,a,"mapStateToProps"),k=D(t,s,"mapDispatchToProps"),x=D(n,l,"mergeProps");return r(d,Object(f.a)({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:_,initMapDispatchToProps:k,initMergeProps:x,pure:u,areStatesEqual:b,areOwnPropsEqual:y,areStatePropsEqual:g,areMergedPropsEqual:j},w))}}var z=V();function U(){return Object(r.useContext)(a)}function B(e){void 0===e&&(e=a);var t=e===a?U:function(){return Object(r.useContext)(e)};return function(){return t().store}}var G=B();function q(e){void 0===e&&(e=a);var t=e===a?G:B(e);return function(){return t().dispatch}}var H=q(),W=function(e,t){return e===t};function $(e){void 0===e&&(e=a);var t=e===a?U:function(){return Object(r.useContext)(e)};return function(e,n){void 0===n&&(n=W);var i=t(),a=function(e,t,n,i){var a,o=Object(r.useReducer)((function(e){return e+1}),0)[1],s=Object(r.useMemo)((function(){return new l(n,i)}),[n,i]),c=Object(r.useRef)(),d=Object(r.useRef)(),f=Object(r.useRef)(),p=Object(r.useRef)(),h=n.getState();try{if(e!==d.current||h!==f.current||c.current){var b=e(h);a=void 0!==p.current&&t(b,p.current)?p.current:b}else a=p.current}catch(v){throw c.current&&(v.message+="\nThe error may be correlated with this previous error:\n"+c.current.stack+"\n\n"),v}return u((function(){d.current=e,f.current=h,p.current=a,c.current=void 0})),u((function(){function e(){try{var e=n.getState(),r=d.current(e);if(t(r,p.current))return;p.current=r,f.current=e}catch(v){c.current=v}o()}return s.onStateChange=e,s.trySubscribe(),e(),function(){return s.tryUnsubscribe()}}),[n,s]),a}(e,n,i.store,i.subscription);return Object(r.useDebugValue)(a),a}}var J,Y=$(),K=n(275);J=K.unstable_batchedUpdates,o=J},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o}));var r=n(4);function i(e){return a((function(){return e.forEach((function(e){return Object(r.k)(e)&&e.remove()}))}))}function a(e){return{remove:function(){e&&(e(),e=void 0)}}}function o(e){return a((function(){var t=e();Object(r.k)(t)&&t.remove()}))}function s(e){return a(Object(r.k)(e)?function(){return e.destroy()}:void 0)}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return rt}));var r=n(591),i=n.n(r),a=n(773),o=n.n(a),s=n(21),c=n.n(s),l=n(518),u=n(278),d=n(592),f=(n(96),n(423)),p=n(786),h=function(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n},b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},O=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t},j=function(e){return"object"===("undefined"===typeof e?"undefined":b(e))&&e.constructor===Object},w=Object.freeze([]),_=Object.freeze({});function k(e){return"function"===typeof e}function x(e){return e.displayName||e.name||"Component"}function S(e){return e&&"string"===typeof e.styledComponentId}var T="undefined"!==typeof e&&(Object({NODE_ENV:"production",PUBLIC_URL:"https://qp-gavel-mvp.azurewebsites.net",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"https://qp-gavel-svr-mvp.azurewebsites.net",REACT_APP_API_KEY:"995dba95-c33d-456b-a7ea-3fd512e60894",REACT_APP_API_PRIVATE_KEY:"'-----BEGIN RSA PRIVATE KEY-----\\n' +",REACT_APP_API_VERSION:"/api/v1",REACT_APP_DEFAULT_UNITS_OF_LENGTH:"meters",REACT_APP_MEASUREMENT_SYSTEM:"metric"}).REACT_APP_SC_ATTR||Object({NODE_ENV:"production",PUBLIC_URL:"https://qp-gavel-mvp.azurewebsites.net",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"https://qp-gavel-svr-mvp.azurewebsites.net",REACT_APP_API_KEY:"995dba95-c33d-456b-a7ea-3fd512e60894",REACT_APP_API_PRIVATE_KEY:"'-----BEGIN RSA PRIVATE KEY-----\\n' +",REACT_APP_API_VERSION:"/api/v1",REACT_APP_DEFAULT_UNITS_OF_LENGTH:"meters",REACT_APP_MEASUREMENT_SYSTEM:"metric"}).SC_ATTR)||"data-styled",E="data-styled-version",C="data-styled-streamed",P="undefined"!==typeof window&&"HTMLElement"in window,I="boolean"===typeof SC_DISABLE_SPEEDY&&SC_DISABLE_SPEEDY||"undefined"!==typeof e&&(Object({NODE_ENV:"production",PUBLIC_URL:"https://qp-gavel-mvp.azurewebsites.net",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"https://qp-gavel-svr-mvp.azurewebsites.net",REACT_APP_API_KEY:"995dba95-c33d-456b-a7ea-3fd512e60894",REACT_APP_API_PRIVATE_KEY:"'-----BEGIN RSA PRIVATE KEY-----\\n' +",REACT_APP_API_VERSION:"/api/v1",REACT_APP_DEFAULT_UNITS_OF_LENGTH:"meters",REACT_APP_MEASUREMENT_SYSTEM:"metric"}).REACT_APP_SC_DISABLE_SPEEDY||Object({NODE_ENV:"production",PUBLIC_URL:"https://qp-gavel-mvp.azurewebsites.net",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"https://qp-gavel-svr-mvp.azurewebsites.net",REACT_APP_API_KEY:"995dba95-c33d-456b-a7ea-3fd512e60894",REACT_APP_API_PRIVATE_KEY:"'-----BEGIN RSA PRIVATE KEY-----\\n' +",REACT_APP_API_VERSION:"/api/v1",REACT_APP_DEFAULT_UNITS_OF_LENGTH:"meters",REACT_APP_MEASUREMENT_SYSTEM:"metric"}).SC_DISABLE_SPEEDY)||!1,M={};var A=function(e){function t(n){v(this,t);for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];var o=O(this,e.call(this,"An error occurred. See https://github.com/styled-components/styled-components/blob/master/packages/styled-components/src/utils/errors.md#"+n+" for more information."+(i.length>0?" Additional arguments: "+i.join(", "):"")));return O(o)}return g(t,e),t}(Error),R=/^[^\S\n]*?\/\* sc-component-id:\s*(\S+)\s+\*\//gm,L=function(e){var t=""+(e||""),n=[];return t.replace(R,(function(e,t,r){return n.push({componentId:t,matchIndex:r}),e})),n.map((function(e,r){var i=e.componentId,a=e.matchIndex,o=n[r+1];return{componentId:i,cssFromDOM:o?t.slice(a,o.matchIndex):t.slice(a)}}))},F=/^\s*\/\/.*$/gm,D=new i.a({global:!1,cascade:!0,keyframe:!1,prefix:!1,compress:!1,semicolon:!0}),N=new i.a({global:!1,cascade:!0,keyframe:!1,prefix:!0,compress:!1,semicolon:!1}),V=[],z=function(e){if(-2===e){var t=V;return V=[],t}},U=o()((function(e){V.push(e)})),B=void 0,G=void 0,q=void 0,H=function(e,t,n){return t>0&&-1!==n.slice(0,t).indexOf(G)&&n.slice(t-G.length,t)!==G?"."+B:e};N.use([function(e,t,n){2===e&&n.length&&n[0].lastIndexOf(G)>0&&(n[0]=n[0].replace(q,H))},U,z]),D.use([U,z]);var W=function(e){return D("",e)};function $(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"&",i=e.join("").replace(F,""),a=t&&n?n+" "+t+" { "+i+" }":i;return B=r,G=t,q=new RegExp("\\"+G+"\\b","g"),N(n||!t?"":t,a)}var J=function(){return n.nc},Y=function(e,t,n){n&&((e[t]||(e[t]=Object.create(null)))[n]=!0)},K=function(e,t){e[t]=Object.create(null)},Z=function(e){return function(t,n){return void 0!==e[t]&&e[t][n]}},X=function(e){var t="";for(var n in e)t+=Object.keys(e[n]).join(" ")+" ";return t.trim()},Q=function(e){if(e.sheet)return e.sheet;for(var t=e.ownerDocument.styleSheets.length,n=0;n<t;n+=1){var r=e.ownerDocument.styleSheets[n];if(r.ownerNode===e)return r}throw new A(10)},ee=function(e,t,n){if(!t)return!1;var r=e.cssRules.length;try{e.insertRule(t,n<=r?n:r)}catch(i){return!1}return!0},te=function(e){return"\n/* sc-component-id: "+e+" */\n"},ne=function(e,t){for(var n=0,r=0;r<=t;r+=1)n+=e[r];return n},re=function(e,t){return function(n){var r=J();return"<style "+[r&&'nonce="'+r+'"',T+'="'+X(t)+'"',E+'="4.4.1"',n].filter(Boolean).join(" ")+">"+e()+"</style>"}},ie=function(e,t){return function(){var n,r=((n={})[T]=X(t),n[E]="4.4.1",n),i=J();return i&&(r.nonce=i),c.a.createElement("style",m({},r,{dangerouslySetInnerHTML:{__html:e()}}))}},ae=function(e){return function(){return Object.keys(e)}},oe=function(e,t){return e.createTextNode(te(t))},se=function e(t,n){var r=void 0===t?Object.create(null):t,i=void 0===n?Object.create(null):n,a=function(e){var t=i[e];return void 0!==t?t:i[e]=[""]},o=function(){var e="";for(var t in i){var n=i[t][0];n&&(e+=te(t)+n)}return e};return{clone:function(){var t=function(e){var t=Object.create(null);for(var n in e)t[n]=m({},e[n]);return t}(r),n=Object.create(null);for(var a in i)n[a]=[i[a][0]];return e(t,n)},css:o,getIds:ae(i),hasNameForId:Z(r),insertMarker:a,insertRules:function(e,t,n){a(e)[0]+=t.join(" "),Y(r,e,n)},removeRules:function(e){var t=i[e];void 0!==t&&(t[0]="",K(r,e))},sealed:!1,styleTag:null,toElement:ie(o,r),toHTML:re(o,r)}},ce=function(e,t,n,r,i){if(P&&!n){var a=function(e,t,n){var r=document;e?r=e.ownerDocument:t&&(r=t.ownerDocument);var i=r.createElement("style");i.setAttribute(T,""),i.setAttribute(E,"4.4.1");var a=J();if(a&&i.setAttribute("nonce",a),i.appendChild(r.createTextNode("")),e&&!t)e.appendChild(i);else{if(!t||!e||!t.parentNode)throw new A(6);t.parentNode.insertBefore(i,n?t:t.nextSibling)}return i}(e,t,r);return I?function(e,t){var n=Object.create(null),r=Object.create(null),i=void 0!==t,a=!1,o=function(t){var i=r[t];return void 0!==i?i:(r[t]=oe(e.ownerDocument,t),e.appendChild(r[t]),n[t]=Object.create(null),r[t])},s=function(){var e="";for(var t in r)e+=r[t].data;return e};return{clone:function(){throw new A(5)},css:s,getIds:ae(r),hasNameForId:Z(n),insertMarker:o,insertRules:function(e,r,s){for(var c=o(e),l=[],u=r.length,d=0;d<u;d+=1){var f=r[d],p=i;if(p&&-1!==f.indexOf("@import"))l.push(f);else{p=!1;var h=d===u-1?"":" ";c.appendData(""+f+h)}}Y(n,e,s),i&&l.length>0&&(a=!0,t().insertRules(e+"-import",l))},removeRules:function(o){var s=r[o];if(void 0!==s){var c=oe(e.ownerDocument,o);e.replaceChild(c,s),r[o]=c,K(n,o),i&&a&&t().removeRules(o+"-import")}},sealed:!1,styleTag:e,toElement:ie(s,n),toHTML:re(s,n)}}(a,i):function(e,t){var n=Object.create(null),r=Object.create(null),i=[],a=void 0!==t,o=!1,s=function(e){var t=r[e];return void 0!==t?t:(r[e]=i.length,i.push(0),K(n,e),r[e])},c=function(){var t=Q(e).cssRules,n="";for(var a in r){n+=te(a);for(var o=r[a],s=ne(i,o),c=s-i[o];c<s;c+=1){var l=t[c];void 0!==l&&(n+=l.cssText)}}return n};return{clone:function(){throw new A(5)},css:c,getIds:ae(r),hasNameForId:Z(n),insertMarker:s,insertRules:function(r,c,l){for(var u=s(r),d=Q(e),f=ne(i,u),p=0,h=[],b=c.length,v=0;v<b;v+=1){var y=c[v],m=a;m&&-1!==y.indexOf("@import")?h.push(y):ee(d,y,f+p)&&(m=!1,p+=1)}a&&h.length>0&&(o=!0,t().insertRules(r+"-import",h)),i[u]+=p,Y(n,r,l)},removeRules:function(s){var c=r[s];if(void 0!==c&&!1!==e.isConnected){var l=i[c];!function(e,t,n){for(var r=t-n,i=t;i>r;i-=1)e.deleteRule(i)}(Q(e),ne(i,c)-1,l),i[c]=0,K(n,s),a&&o&&t().removeRules(s+"-import")}},sealed:!1,styleTag:e,toElement:ie(c,n),toHTML:re(c,n)}}(a,i)}return se()},le=/\s+/,ue=void 0;ue=P?I?40:1e3:-1;var de=0,fe=void 0,pe=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P?document.head:null,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];v(this,e),this.getImportRuleTag=function(){var e=t.importRuleTag;if(void 0!==e)return e;var n=t.tags[0];return t.importRuleTag=ce(t.target,n?n.styleTag:null,t.forceServer,!0)},de+=1,this.id=de,this.forceServer=r,this.target=r?null:n,this.tagMap={},this.deferred={},this.rehydratedNames={},this.ignoreRehydratedNames={},this.tags=[],this.capacity=1,this.clones=[]}return e.prototype.rehydrate=function(){if(!P||this.forceServer)return this;var e=[],t=[],n=!1,r=document.querySelectorAll("style["+T+"]["+E+'="4.4.1"]'),i=r.length;if(!i)return this;for(var a=0;a<i;a+=1){var o=r[a];n||(n=!!o.getAttribute(C));for(var s,c=(o.getAttribute(T)||"").trim().split(le),l=c.length,u=0;u<l;u+=1)s=c[u],this.rehydratedNames[s]=!0;t.push.apply(t,L(o.textContent)),e.push(o)}var d=t.length;if(!d)return this;var f=this.makeTag(null);!function(e,t,n){for(var r=0,i=n.length;r<i;r+=1){var a=n[r],o=a.componentId,s=a.cssFromDOM,c=W(s);e.insertRules(o,c)}for(var l=0,u=t.length;l<u;l+=1){var d=t[l];d.parentNode&&d.parentNode.removeChild(d)}}(f,e,t),this.capacity=Math.max(1,ue-d),this.tags.push(f);for(var p=0;p<d;p+=1)this.tagMap[t[p].componentId]=f;return this},e.reset=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];fe=new e(void 0,t).rehydrate()},e.prototype.clone=function(){var t=new e(this.target,this.forceServer);return this.clones.push(t),t.tags=this.tags.map((function(e){for(var n=e.getIds(),r=e.clone(),i=0;i<n.length;i+=1)t.tagMap[n[i]]=r;return r})),t.rehydratedNames=m({},this.rehydratedNames),t.deferred=m({},this.deferred),t},e.prototype.sealAllTags=function(){this.capacity=1,this.tags.forEach((function(e){e.sealed=!0}))},e.prototype.makeTag=function(e){var t=e?e.styleTag:null;return ce(this.target,t,this.forceServer,!1,this.getImportRuleTag)},e.prototype.getTagForId=function(e){var t=this.tagMap[e];if(void 0!==t&&!t.sealed)return t;var n=this.tags[this.tags.length-1];return this.capacity-=1,0===this.capacity&&(this.capacity=ue,n=this.makeTag(n),this.tags.push(n)),this.tagMap[e]=n},e.prototype.hasId=function(e){return void 0!==this.tagMap[e]},e.prototype.hasNameForId=function(e,t){if(void 0===this.ignoreRehydratedNames[e]&&this.rehydratedNames[t])return!0;var n=this.tagMap[e];return void 0!==n&&n.hasNameForId(e,t)},e.prototype.deferredInject=function(e,t){if(void 0===this.tagMap[e]){for(var n=this.clones,r=0;r<n.length;r+=1)n[r].deferredInject(e,t);this.getTagForId(e).insertMarker(e),this.deferred[e]=t}},e.prototype.inject=function(e,t,n){for(var r=this.clones,i=0;i<r.length;i+=1)r[i].inject(e,t,n);var a=this.getTagForId(e);if(void 0!==this.deferred[e]){var o=this.deferred[e].concat(t);a.insertRules(e,o,n),this.deferred[e]=void 0}else a.insertRules(e,t,n)},e.prototype.remove=function(e){var t=this.tagMap[e];if(void 0!==t){for(var n=this.clones,r=0;r<n.length;r+=1)n[r].remove(e);t.removeRules(e),this.ignoreRehydratedNames[e]=!0,this.deferred[e]=void 0}},e.prototype.toHTML=function(){return this.tags.map((function(e){return e.toHTML()})).join("")},e.prototype.toReactElements=function(){var e=this.id;return this.tags.map((function(t,n){var r="sc-"+e+"-"+n;return Object(s.cloneElement)(t.toElement(),{key:r})}))},y(e,null,[{key:"master",get:function(){return fe||(fe=(new e).rehydrate())}},{key:"instance",get:function(){return e.master}}]),e}(),he=function(){function e(t,n){var r=this;v(this,e),this.inject=function(e){e.hasNameForId(r.id,r.name)||e.inject(r.id,r.rules,r.name)},this.toString=function(){throw new A(12,String(r.name))},this.name=t,this.rules=n,this.id="sc-keyframes-"+t}return e.prototype.getName=function(){return this.name},e}(),be=/([A-Z])/g,ve=/^ms-/;function ye(e){return e.replace(be,"-$1").toLowerCase().replace(ve,"-ms-")}var me=function(e){return void 0===e||null===e||!1===e||""===e},ge=function e(t,n){var r=[];return Object.keys(t).forEach((function(n){if(!me(t[n])){if(j(t[n]))return r.push.apply(r,e(t[n],n)),r;if(k(t[n]))return r.push(ye(n)+":",t[n],";"),r;r.push(ye(n)+": "+(i=n,(null==(a=t[n])||"boolean"===typeof a||""===a?"":"number"!==typeof a||0===a||i in l.a?String(a).trim():a+"px")+";"))}var i,a;return r})),n?[n+" {"].concat(r,["}"]):r};function Oe(e,t,n){if(Array.isArray(e)){for(var r,i=[],a=0,o=e.length;a<o;a+=1)null!==(r=Oe(e[a],t,n))&&(Array.isArray(r)?i.push.apply(i,r):i.push(r));return i}return me(e)?null:S(e)?"."+e.styledComponentId:k(e)?"function"!==typeof(s=e)||s.prototype&&s.prototype.isReactComponent||!t?e:Oe(e(t),t,n):e instanceof he?n?(e.inject(n),e.getName()):e:j(e)?ge(e):e.toString();var s}function je(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return k(e)||j(e)?Oe(h(w,[e].concat(n))):Oe(h(e,n))}function we(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_;if(!Object(u.isValidElementType)(t))throw new A(1,String(t));var r=function(){return e(t,n,je.apply(void 0,arguments))};return r.withConfig=function(r){return we(e,t,m({},n,r))},r.attrs=function(r){return we(e,t,m({},n,{attrs:Array.prototype.concat(n.attrs,r).filter(Boolean)}))},r}function _e(e){for(var t,n=0|e.length,r=0|n,i=0;n>=4;)t=1540483477*(65535&(t=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24))+((1540483477*(t>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(t=1540483477*(65535&(t^=t>>>24))+((1540483477*(t>>>16)&65535)<<16)),n-=4,++i;switch(n){case 3:r^=(255&e.charCodeAt(i+2))<<16;case 2:r^=(255&e.charCodeAt(i+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(i)))+((1540483477*(r>>>16)&65535)<<16)}return((r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16))^r>>>15)>>>0}var ke=function(e){return String.fromCharCode(e+(e>25?39:97))};function xe(e){var t="",n=void 0;for(n=e;n>52;n=Math.floor(n/52))t=ke(n%52)+t;return ke(n%52)+t}function Se(e,t){for(var n=0;n<e.length;n+=1){var r=e[n];if(Array.isArray(r)&&!Se(r,t))return!1;if(k(r)&&!S(r))return!1}return!t.some((function(e){return k(e)||function(e){for(var t in e)if(k(e[t]))return!0;return!1}(e)}))}var Te,Ee=function(e){return xe(_e(e))},Ce=function(){function e(t,n,r){v(this,e),this.rules=t,this.isStatic=Se(t,n),this.componentId=r,pe.master.hasId(r)||pe.master.deferredInject(r,[])}return e.prototype.generateAndInjectStyles=function(e,t){var n=this.isStatic,r=this.componentId,i=this.lastClassName;if(P&&n&&"string"===typeof i&&t.hasNameForId(r,i))return i;var a=Oe(this.rules,e,t),o=Ee(this.componentId+a.join(""));return t.hasNameForId(r,o)||t.inject(this.componentId,$(a,"."+o,void 0,r),o),this.lastClassName=o,o},e.generateName=function(e){return Ee(e)},e}(),Pe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_,r=!!n&&e.theme===n.theme,i=e.theme&&!r?e.theme:t||n.theme;return i},Ie=/[[\].#*$><+~=|^:(),"'`-]+/g,Me=/(^-|-$)/g;function Ae(e){return e.replace(Ie,"-").replace(Me,"")}function Re(e){return"string"===typeof e&&!0}var Le={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDerivedStateFromProps:!0,propTypes:!0,type:!0},Fe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},De=((Te={})[u.ForwardRef]={$$typeof:!0,render:!0},Te),Ne=Object.defineProperty,Ve=Object.getOwnPropertyNames,ze=Object.getOwnPropertySymbols,Ue=void 0===ze?function(){return[]}:ze,Be=Object.getOwnPropertyDescriptor,Ge=Object.getPrototypeOf,qe=Object.prototype,He=Array.prototype;function We(e,t,n){if("string"!==typeof t){var r=Ge(t);r&&r!==qe&&We(e,r,n);for(var i=He.concat(Ve(t),Ue(t)),a=De[e.$$typeof]||Le,o=De[t.$$typeof]||Le,s=i.length,c=void 0,l=void 0;s--;)if(l=i[s],!Fe[l]&&(!n||!n[l])&&(!o||!o[l])&&(!a||!a[l])&&(c=Be(t,l)))try{Ne(e,l,c)}catch(u){}return e}return e}var $e=Object(s.createContext)(),Je=$e.Consumer,Ye=(function(e){function t(n){v(this,t);var r=O(this,e.call(this,n));return r.getContext=Object(d.a)(r.getContext.bind(r)),r.renderInner=r.renderInner.bind(r),r}g(t,e),t.prototype.render=function(){return this.props.children?c.a.createElement($e.Consumer,null,this.renderInner):null},t.prototype.renderInner=function(e){var t=this.getContext(this.props.theme,e);return c.a.createElement($e.Provider,{value:t},this.props.children)},t.prototype.getTheme=function(e,t){if(k(e))return e(t);if(null===e||Array.isArray(e)||"object"!==("undefined"===typeof e?"undefined":b(e)))throw new A(8);return m({},t,e)},t.prototype.getContext=function(e,t){return this.getTheme(e,t)}}(s.Component),function(){function e(){v(this,e),this.masterSheet=pe.master,this.instance=this.masterSheet.clone(),this.sealed=!1}e.prototype.seal=function(){if(!this.sealed){var e=this.masterSheet.clones.indexOf(this.instance);this.masterSheet.clones.splice(e,1),this.sealed=!0}},e.prototype.collectStyles=function(e){if(this.sealed)throw new A(2);return c.a.createElement(Ze,{sheet:this.instance},e)},e.prototype.getStyleTags=function(){return this.seal(),this.instance.toHTML()},e.prototype.getStyleElement=function(){return this.seal(),this.instance.toReactElements()},e.prototype.interleaveWithNodeStream=function(e){throw new A(3)}}(),Object(s.createContext)()),Ke=Ye.Consumer,Ze=function(e){function t(n){v(this,t);var r=O(this,e.call(this,n));return r.getContext=Object(d.a)(r.getContext),r}return g(t,e),t.prototype.getContext=function(e,t){if(e)return e;if(t)return new pe(t);throw new A(4)},t.prototype.render=function(){var e=this.props,t=e.children,n=e.sheet,r=e.target;return c.a.createElement(Ye.Provider,{value:this.getContext(n,r)},t)},t}(s.Component),Xe={};var Qe=function(e){function t(){v(this,t);var n=O(this,e.call(this));return n.attrs={},n.renderOuter=n.renderOuter.bind(n),n.renderInner=n.renderInner.bind(n),n}return g(t,e),t.prototype.render=function(){return c.a.createElement(Ke,null,this.renderOuter)},t.prototype.renderOuter=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe.master;return this.styleSheet=e,this.props.forwardedComponent.componentStyle.isStatic?this.renderInner():c.a.createElement(Je,null,this.renderInner)},t.prototype.renderInner=function(e){var t=this.props.forwardedComponent,n=t.componentStyle,r=t.defaultProps,i=(t.displayName,t.foldedComponentIds),a=t.styledComponentId,o=t.target,c=void 0;c=n.isStatic?this.generateAndInjectStyles(_,this.props):this.generateAndInjectStyles(Pe(this.props,e,r)||_,this.props);var l=this.props.as||this.attrs.as||o,u=Re(l),d={},p=m({},this.props,this.attrs),h=void 0;for(h in p)"forwardedComponent"!==h&&"as"!==h&&("forwardedRef"===h?d.ref=p[h]:"forwardedAs"===h?d.as=p[h]:u&&!Object(f.default)(h)||(d[h]=p[h]));return this.props.style&&this.attrs.style&&(d.style=m({},this.attrs.style,this.props.style)),d.className=Array.prototype.concat(i,a,c!==a?c:null,this.props.className,this.attrs.className).filter(Boolean).join(" "),Object(s.createElement)(l,d)},t.prototype.buildExecutionContext=function(e,t,n){var r=this,i=m({},t,{theme:e});return n.length?(this.attrs={},n.forEach((function(e){var t,n=e,a=!1,o=void 0,s=void 0;for(s in k(n)&&(n=n(i),a=!0),n)o=n[s],a||!k(o)||(t=o)&&t.prototype&&t.prototype.isReactComponent||S(o)||(o=o(i)),r.attrs[s]=o,i[s]=o})),i):i},t.prototype.generateAndInjectStyles=function(e,t){var n=t.forwardedComponent,r=n.attrs,i=n.componentStyle;n.warnTooManyClasses;return i.isStatic&&!r.length?i.generateAndInjectStyles(_,this.styleSheet):i.generateAndInjectStyles(this.buildExecutionContext(e,t,r),this.styleSheet)},t}(s.Component);function et(e,t,n){var r=S(e),i=!Re(e),a=t.displayName,o=void 0===a?function(e){return Re(e)?"styled."+e:"Styled("+x(e)+")"}(e):a,s=t.componentId,l=void 0===s?function(e,t,n){var r="string"!==typeof t?"sc":Ae(t),i=(Xe[r]||0)+1;Xe[r]=i;var a=r+"-"+e.generateName(r+i);return n?n+"-"+a:a}(Ce,t.displayName,t.parentComponentId):s,u=t.ParentComponent,d=void 0===u?Qe:u,f=t.attrs,h=void 0===f?w:f,b=t.displayName&&t.componentId?Ae(t.displayName)+"-"+t.componentId:t.componentId||l,v=r&&e.attrs?Array.prototype.concat(e.attrs,h).filter(Boolean):h,y=new Ce(r?e.componentStyle.rules.concat(n):n,v,b),g=void 0,O=function(e,t){return c.a.createElement(d,m({},e,{forwardedComponent:g,forwardedRef:t}))};return O.displayName=o,(g=c.a.forwardRef(O)).displayName=o,g.attrs=v,g.componentStyle=y,g.foldedComponentIds=r?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):w,g.styledComponentId=b,g.target=r?e.target:e,g.withComponent=function(e){var r=t.componentId,i=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["componentId"]),a=r&&r+"-"+(Re(e)?e:Ae(x(e)));return et(e,m({},i,{attrs:v,componentId:a,ParentComponent:d}),n)},Object.defineProperty(g,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=r?Object(p.a)(e.defaultProps,t):t}}),g.toString=function(){return"."+g.styledComponentId},i&&We(g,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,styledComponentId:!0,target:!0,withComponent:!0}),g}var tt=function(e){return we(et,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){tt[e]=tt(e)}));var nt=function(){function e(t,n){v(this,e),this.rules=t,this.componentId=n,this.isStatic=Se(t,w),pe.master.hasId(n)||pe.master.deferredInject(n,[])}return e.prototype.createStyles=function(e,t){var n=$(Oe(this.rules,e,t),"");t.inject(this.componentId,n)},e.prototype.removeStyles=function(e){var t=this.componentId;e.hasId(t)&&e.remove(t)},e.prototype.renderStyles=function(e,t){this.removeStyles(t),this.createStyles(e,t)},e}();function rt(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=je.apply(void 0,[e].concat(n)),a="sc-global-"+_e(JSON.stringify(i)),o=new nt(i,a),s=function(e){function t(n){v(this,t);var r=O(this,e.call(this,n)),i=r.constructor,a=i.globalStyle,o=i.styledComponentId;return P&&(window.scCGSHMRCache[o]=(window.scCGSHMRCache[o]||0)+1),r.state={globalStyle:a,styledComponentId:o},r}return g(t,e),t.prototype.componentWillUnmount=function(){window.scCGSHMRCache[this.state.styledComponentId]&&(window.scCGSHMRCache[this.state.styledComponentId]-=1),0===window.scCGSHMRCache[this.state.styledComponentId]&&this.state.globalStyle.removeStyles(this.styleSheet)},t.prototype.render=function(){var e=this;return c.a.createElement(Ke,null,(function(t){e.styleSheet=t||pe.master;var n=e.state.globalStyle;return n.isStatic?(n.renderStyles(M,e.styleSheet),null):c.a.createElement(Je,null,(function(t){var r=e.constructor.defaultProps,i=m({},e.props);return"undefined"!==typeof t&&(i.theme=Pe(e.props,t,r)),n.renderStyles(i,e.styleSheet),null}))}))},t}(c.a.Component);return s.globalStyle=o,s.styledComponentId=a,s}P&&(window.scCGSHMRCache={});t.b=tt}).call(this,n(382))},function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return p}));var r,i=n(7),a=n.n(i),o=n(26),s=n(10),c=n(2),l=n(3),u=n(15),d=n(4),f=n(44);n(71);function p(){return h.apply(this,arguments)}function h(){return(h=Object(u.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(r||(r=Object(u.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(22).then(n.bind(null,1032));case 2:return t=e.sent,e.next=5,t.arcade.load();case 5:return e.abrupt("return",{arcade:t.arcade,arcadeUtils:t,Dictionary:t.Dictionary,Feature:t.arcadeFeature});case 6:case"end":return e.stop()}}),e)})))()),r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=function(e,t,n){return m.create(e,t,n,null,["$feature"])},v=function(e,t,n){return m.create(e,t,n,null,["$feature","$view"])},y=function(e,t,n,r){return m.create(e,t,n,r,["$feature","$view"])},m=function(){function e(t,n,r,i,a,o,s,l){Object(c.a)(this,e),this.script=t,this.evaluate=a,this.fields=s,this._syntaxTree=i,this._arcade=n,this._arcadeDictionary=r,this._arcadeFeature=o,this._spatialReference=l,this._referencesGeometry=n.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}return Object(l.a)(e,[{key:"repurposeFeature",value:function(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}},{key:"repurposeAdapter",value:function(e){return this._arcadeFeature.repurposeFromAdapter(e,{fields:this.fields}),this._arcadeFeature}},{key:"createDictionary",value:function(){return new this._arcadeDictionary}},{key:"referencesMember",value:function(e){return this._arcade.referencesMember(this._syntaxTree,e)}},{key:"referencesFunction",value:function(e){return this._arcade.referencesFunction(this._syntaxTree,e)}},{key:"referencesGeometry",value:function(){return this._referencesGeometry}},{key:"referencesScale",value:function(){return this._referencesScale}},{key:"extractFieldLiterals",value:function(e){return this._arcade.extractFieldLiterals(this._syntaxTree,e)}}],[{key:"create",value:function(){var t=Object(u.a)(a.a.mark((function t(n,r,i,c,l,u){var h,b,v,y,m,g,O,j,w,_,k,x,S,T,E;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:return h=t.sent,b=h.arcade,v=h.Feature,y=h.Dictionary,m=f.a.fromJSON(r),g=b.parseScript(n,u),O=l.reduce((function(e,t){return Object(s.a)(Object(s.a)({},e),{},Object(o.a)({},t,null))}),{}),j=null,Object(d.k)(c)&&((j=new y(c)).immutable=!0,O.$config=null),w=b.scriptUsesGeometryEngine(g)&&b.enableGeometrySupport(),_=b.scriptUsesFeatureSet(g)&&b.enableFeatureSetSupport(),k=b.scriptIsAsync(g)&&b.enableAsyncSupport(),x={vars:O,spatialReference:m,useAsync:!!k},(S=new y).immutable=!1,S.setField("scale",0),T=b.compileScript(g,x),E=function(e){return"$view"in e&&e.$view&&(S.setField("scale",e.$view.scale),e.$view=S),j&&(e.$config=j),T({vars:e,spatialReference:m})},t.next=16,Promise.all([w,_,k]);case 16:return t.abrupt("return",new e(n,b,y,g,E,new v,i,m));case 17:case"end":return t.stop()}}),t)})));return function(e,n,r,i,a,o){return t.apply(this,arguments)}}()}]),e}()},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(132),s=n(7),c=n.n(s);!function(e){var t=c.a.mark(i),n=function(e,t,n,r){for(var i=t,a=t,o=n>>>1,s=e[i-1];a<=o;){(a=i<<1)<n&&r(e[a-1],e[a])<0&&++a;var c=e[a-1];if(r(c,s)<=0)break;e[i-1]=c,i=a}e[i-1]=s},r=function(e,t){return e<t?-1:e>t?1:0};function i(e,i,a,o){var s,l,u,d;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:void 0===i&&(i=0),void 0===a&&(a=e.length),void 0===o&&(o=r),s=a>>>1;case 2:if(!(s>i)){t.next=9;break}return n(e,s,a,o),void(t.next=6);case 6:s--,t.next=2;break;case 9:l=i+1,u=a-1;case 11:if(!(u>i)){t.next=21;break}return d=e[i],e[i]=e[u],e[u]=d,n(e,l,u,o),void(t.next=18);case 18:u--,t.next=11;break;case 21:case"end":return t.stop()}}),t)}e.sort=function(e,t,i,a){void 0===t&&(t=0),void 0===i&&(i=e.length),void 0===a&&(a=r);for(var o=i>>>1;o>t;o--)n(e,o,i,a);for(var s=t+1,c=i-1;c>t;c--){var l=e[t];e[t]=e[c],e[c]=l,n(e,s,c,a)}},e.iterableSort=i}(r||(r={}));var l=r,u=function(){function e(t){var n=this;Object(i.a)(this,e),this.data=[],this._length=0,this._allocator=void 0,this._deallocator=function(){return null},this._shrink=function(){},this._hint=new o.a,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),void 0!==t.deallocator&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=function(){return d(n)}))}return Object(a.a)(e,[{key:"toArray",value:function(){return this.data.slice(0,this.length)}},{key:"getItemAt",value:function(e){if(!(e<0||e>=this._length))return this.data[e]}},{key:"length",get:function(){return this._length},set:function(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(var t=e;t<this._length;++t)this.data[t]=this._deallocator(this.data[t]);this._length=e,this._shrink()}}},{key:"clear",value:function(){this.length=0}},{key:"prune",value:function(){this.clear(),this.data=[]}},{key:"push",value:function(e){this.data[this._length++]=e}},{key:"pushArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=0;n<t;n++)this.data[this._length++]=e[n]}},{key:"fill",value:function(e,t){for(var n=0;n<t;n++)this.data[this._length++]=e}},{key:"pushNew",value:function(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));var e=this.data[this._length];return++this._length,e}},{key:"unshift",value:function(e){this.data.unshift(e),this._length++,d(this)}},{key:"pop",value:function(){if(0!==this.length){var e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}}},{key:"remove",value:function(e){var t=Object(o.e)(this.data,e,this.length,this._hint);if(-1!==t)return this.data.splice(t,1),this.length=this.length-1,e}},{key:"removeUnordered",value:function(e){var t=Object(o.j)(this.data,e,this.length,this._hint);return void 0!==t&&(this.length=this.length-1),this._shrink(),t}},{key:"removeUnorderedIndex",value:function(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}},{key:"removeUnorderedMany",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=arguments.length>2?arguments[2]:void 0;this.length=Object(o.k)(this.data,e,this.length,t,this._hint,n),this._shrink()}},{key:"front",value:function(){if(0!==this.length)return this.data[0]}},{key:"back",value:function(){if(0!==this.length)return this.data[this.length-1]}},{key:"swapElements",value:function(e,t){var n;e>=this.length||t>=this.length||e===t||(n=[this.data[t],this.data[e]],this.data[e]=n[0],this.data[t]=n[1])}},{key:"sort",value:function(e){l.sort(this.data,0,this.length,e)}},{key:"iterableSort",value:function(e){return l.iterableSort(this.data,0,this.length,e)}},{key:"some",value:function(e,t){for(var n=0;n<this.length;++n)if(e.call(t,this.data[n],n,this.data))return!0;return!1}},{key:"filterInPlace",value:function(e,t){for(var n=0,r=0;r<this._length;++r){var i=this.data[r];e.call(t,i,r,this.data)&&(this.data[r]=this.data[n],this.data[n]=i,n++)}if(this._deallocator)for(var a=n;a<this._length;a++)this.data[a]=this._deallocator(this.data[a]);return this._length=n,this._shrink(),this}},{key:"forAll",value:function(e,t){for(var n=this.length,r=this.data,i=0;i<n;++i)e.call(t,r[i],i,r)}},{key:"map",value:function(e,t){for(var n=new Array(this.length),r=0;r<this.length;++r)n[r]=e.call(t,this.data[r],r,this.data);return n}},{key:"reduce",value:function(e,t){for(var n=t,r=0;r<this.length;++r)n=e(n,this.data[r],r,this.data);return n}},{key:"has",value:function(e){for(var t=this.length,n=this.data,r=0;r<t;++r)if(n[r]===e)return!0;return!1}}]),e}();function d(e){e.data.length>1.5*e.length&&(e.data.length=Math.floor(1.1*e.length))}t.a=u},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.d(t,"a",(function(){return pe})),n.d(t,"b",(function(){return G})),n.d(t,"c",(function(){return oe})),n.d(t,"d",(function(){return ae})),n.d(t,"e",(function(){return U})),n.d(t,"f",(function(){return q})),n.d(t,"g",(function(){return F})),n.d(t,"h",(function(){return D})),n.d(t,"i",(function(){return N})),n.d(t,"j",(function(){return V})),n.d(t,"k",(function(){return re})),n.d(t,"l",(function(){return z})),n.d(t,"m",(function(){return $})),n.d(t,"n",(function(){return ee})),n.d(t,"o",(function(){return Z})),n.d(t,"p",(function(){return ne})),n.d(t,"q",(function(){return me}));var r=n(7),i=n.n(r),a=n(15),o=n(2),s=n(5),c=n(6),l=n(14),u=n(31),d=n(4),f=n(18),p=n(24),h=n(59),b=n(79),v=n(43),y=n(63),m=n(259),g=n(118),O=n(108),j=n(45),w=n(27),_=(n(11),n(245)),k=n(66),x=n(88),S=n(113),T=(n(114),n(155)),E=n(3),C=0,P=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(o.a)(this,e),this.uid=C++,t?(this._wkt=void 0!==t.wkt?t.wkt:null,this._wkid=void 0!==t.wkid?t.wkid:-1,this._isInverse=void 0!==t.isInverse&&!0===t.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}return Object(E.a)(e,[{key:"wkt",get:function(){return this._wkt},set:function(e){this._wkt=e,this.uid=C++}},{key:"wkid",get:function(){return this._wkid},set:function(e){this._wkid=e,this.uid=C++}},{key:"isInverse",get:function(){return this._isInverse},set:function(e){this._isInverse=e,this.uid=C++}},{key:"getInverse",value:function(){var t=new e;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}}],[{key:"fromGE",value:function(t){var n=new e;return n._wkt=t.wkt,n._wkid=t.wkid,n._isInverse=t.isInverse,n}}]),e}(),I=function(){function e(t){if(Object(o.a)(this,e),this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,t&&t.steps){var n,r=Object(l.a)(t.steps);try{for(r.s();!(n=r.n()).done;){var i=n.value;i instanceof P?this.steps.push(i):this.steps.push(new P({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}}catch(a){r.e(a)}finally{r.f()}}}return Object(E.a)(e,[{key:"getInverse",value:function(){var t=new e;t.steps=[];for(var n=this.steps.length-1;n>=0;n--){var r=this.steps[n];t.steps.push(r.getInverse())}return t}},{key:"getGTListEntry",value:function(){var e,t="",n=Object(l.a)(this.steps);try{for(n.s();!(e=n.n()).done;){t+=e.value.uid.toString()+","}}catch(r){n.e(r)}finally{n.f()}return t!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=t),this._gtlistentry}},{key:"assignCachedGe",value:function(t,n,r){this._cached_projection[e.cacheKey(t,n)]=r}},{key:"getCachedGeTransformation",value:function(t,n){var r,i="",a=Object(l.a)(this.steps);try{for(a.s();!(r=a.n()).done;){i+=r.value.uid.toString()+","}}catch(s){a.e(s)}finally{a.f()}i!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=i);var o=this._cached_projection[e.cacheKey(t,n)];return void 0===o?null:o}}],[{key:"cacheKey",value:function(e,t){return[void 0!==e.wkid&&null!==e.wkid?e.wkid.toString():"-1",void 0!==e.wkt&&null!==e.wkt?e.wkt.toString():"",void 0!==t.wkid&&null!==t.wkid?t.wkid.toString():"-1",void 0!==t.wkt&&null!==t.wkt?t.wkt.toString():""].join(",")}},{key:"fromGE",value:function(t){var n,r=new e,i="",a=Object(l.a)(t.steps);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=P.fromGE(o);r.steps.push(s),i+=s.uid.toString()+","}}catch(c){a.e(c)}finally{a.f()}return r._cached_projection={},r._gtlistentry=null,r._chain=i,r}}]),e}(),M=null,A=null,R=null,L={};function F(){return!!M&&Object(S.h)()}function D(){return!0}function N(e){return Object(d.j)(R)&&(R=Promise.all([Object(S.i)(),n.e(5).then(n.bind(null,1149)).then((function(e){return e.g})),n.e(192).then(n.bind(null,1167))])),R.then((function(t){var n=Object(u.a)(t,3),r=n[1],i=n[2].hydratedAdapter;Object(p.u)(e),A=i,(M=r.default)._enableProjection(S.j)}))}function V(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Array.isArray(e)?0===e.length?[]:z(A,e,e[0].spatialReference,t,n):z(A,[e],e.spatialReference,t,n)[0]}function z(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(Object(d.j)(n)||Object(d.j)(r))return t;if(G(n,r,i))return t.map((function(e){return W(e,n,r)}));if(Object(d.j)(i)){var a=I.cacheKey(n,r);void 0!==L[a]?i=L[a]:(i=U(n,r,null),Object(d.j)(i)&&(i=new I),L[a]=i)}if(Object(d.j)(M))throw new B;return M._project(e,t,n,r,i)}function U(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Object(d.j)(M))throw new B;if(Object(d.j)(e)||Object(d.j)(t))return null;var r=M._getTransformation(A,e,t,n,null==n?void 0:n.spatialReference);return null!==r?I.fromGE(r):null}var B=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){return Object(o.a)(this,n),t.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")}return n}(f.a);function G(e,t,n){return!n&&(!!Object(h.c)(e,t)||Object(h.i)(e)&&Object(h.i)(t)&&!!Ce(e,t,Re))}function q(e,t){return H.apply(this,arguments)}function H(){return(H=Object(a.a)(i.a.mark((function e(t,n){var r,a,o,s,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F()){e.next=18;break}r=Object(l.a)(t),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}if(o=a.value,s=o.source,c=o.dest,u=o.geographicTransformation,G(s,c,u)){e.next=8;break}return e.abrupt("return",N(n));case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function W(e,t,n){if(!e)return e;if("x"in e){var r=new v.a;return J(e,t,r,n)?r:null}if("xmin"in e){var i=new y.a;return Q(e,t,i,n)?i:null}if("rings"in e){var a=new g.a;return X(e,t,a,n)?a:null}if("paths"in e){var o=new O.a;return K(e,t,o,n)?o:null}if("points"in e){var s=new m.a;return Y(e,t,s,n)?s:null}return null}function $(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.spatialReference,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return!Object(d.j)(n)&&J(e,e.spatialReference,t,n,r)}function J(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;ze[0]=e.x,ze[1]=e.y;var a=e.z;return ze[2]=void 0!==a?a:i,!!re(ze,t,0,ze,r,0,1)&&(n.x=ze[0],n.y=ze[1],n.spatialReference=r,void 0===a?(n.z=void 0,n.hasZ=!1):(n.z=ze[2],n.hasZ=!0),void 0===e.m?(n.m=void 0,n.hasM=!1):(n.m=e.m,n.hasM=!0),!0)}function Y(e,t,n,r){var i,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=e.points,s=e.hasZ,c=e.hasM,u=[],d=o.length,f=[],p=Object(l.a)(o);try{for(p.s();!(i=p.n()).done;){var h=i.value;f.push(h[0],h[1],s?h[2]:a)}}catch(g){p.e(g)}finally{p.f()}if(!re(f,t,0,f,r,0,d))return!1;for(var b=0;b<d;++b){var v=3*b,y=f[v],m=f[v+1];s&&c?u.push([y,m,f[v+2],o[b][3]]):s?u.push([y,m,f[v+2]]):c?u.push([y,m,o[b][2]]):u.push([y,m])}return n.points=u,n.spatialReference=r,n.hasZ=s,n.hasM=c,!0}function K(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=e.paths,o=e.hasZ,s=e.hasM,c=[];return!!ie(a,o,s,t,c,r,i)&&(n.paths=c,n.spatialReference=r,n.hasZ=o,n.hasM=s,!0)}function Z(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.spatialReference,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return!Object(d.j)(n)&&X(e,e.spatialReference,t,n,r)}function X(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=e.rings,o=e.hasZ,s=e.hasM,c=[];return!!ie(a,o,s,t,c,r,i)&&(n.rings=c,n.spatialReference=r,n.hasZ=o,n.hasM=s,!0)}function Q(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=e.xmin,o=e.ymin,s=e.xmax,c=e.ymax,l=e.hasZ,u=e.hasM;return!!te(a,o,l?e.zmin:i,t,ze,r)&&(n.xmin=ze[0],n.ymin=ze[1],l&&(n.zmin=ze[2]),!!te(s,c,l?e.zmax:i,t,ze,r)&&(n.xmax=ze[0],n.ymax=ze[1],l&&(n.zmax=ze[2]),u&&(n.mmin=e.mmin,n.mmax=e.mmax),n.spatialReference=r,!0))}function ee(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;ze[0]=e.x,ze[1]=e.y;var i=e.z;return ze[2]=void 0!==i?i:r,re(ze,e.spatialReference,0,t,n,0,1)}function te(e,t,n,r,i,a){return De[0]=e,De[1]=t,De[2]=n,re(De,r,0,i,a,0,1)}function ne(e,t,n,r){return!(Object(d.j)(t)||Object(d.j)(r)||e.length<2)&&(2===e.length&&(De[0]=e[0],De[1]=e[1],De[2]=0,e=De),re(e,t,0,n,r,0,1))}function re(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,s=Ce(t,i,Re);if(Object(d.j)(s))return!1;if(s===ce){if(e===r&&n===a)return!0;for(var c=n+3*o,l=n,u=a;l<c;l++,u++)r[u]=e[l];return!0}for(var f=n+3*o,p=n,h=a;p<f;p+=3,h+=3)s(e,p,r,h);return!0}function ie(e,t,n,r,i,a){var o,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=new Array,u=Object(l.a)(e);try{for(u.s();!(o=u.n()).done;){var d,f=o.value,p=Object(l.a)(f);try{for(p.s();!(d=p.n()).done;){var h=d.value;c.push(h[0],h[1],t?h[2]:s)}}catch(_){p.e(_)}finally{p.f()}}}catch(_){u.e(_)}finally{u.f()}if(!re(c,r,0,c,a,0,c.length/3))return!1;var b=0;i.length=0;var v,y=Object(l.a)(e);try{for(y.s();!(v=y.n()).done;){var m,g=v.value,O=new Array,j=Object(l.a)(g);try{for(j.s();!(m=j.n()).done;){var w=m.value;t&&n?O.push([c[b++],c[b++],c[b++],w[3]]):t?O.push([c[b++],c[b++],c[b++]]):n?(O.push([c[b++],c[b++],w[2]]),b++):(O.push([c[b++],c[b++]]),b++)}}catch(_){j.e(_)}finally{j.f()}i.push(O)}}catch(_){y.e(_)}finally{y.f()}return!0}function ae(e,t,n,r){if(Object(d.j)(e)||Object(d.j)(r))return!1;var i=se(e,Me),a=se(r,Ae);if(i===a&&1!==a&&(0!==i||Object(h.c)(e,r)))return Object(x.i)(n),Object(x.r)(n,n,t),!0;if(1===a||7===a||9===a){var o=0,s=0;if(1===a){var c=Ee[i][6],l=Ee[6][a];if(Object(d.j)(c)||Object(d.j)(l))return!1;c(t,0,Ne,0),l(Ne,0,Ve,0),o=Le*Ne[0],s=Le*Ne[1]}else if(7===a||9===a){var u=Ee[i][a];if(Object(d.j)(u))return!1;u(t,0,Ve,0),o=Le*t[0],s=Le*t[1]}return oe(s,o,n),n[12]=Ve[0],n[13]=Ve[1],n[14]=Ve[2],!0}if(3===a&&(2===i||1===i)){var f=Ee[i][6];if(Object(d.j)(f))return!1;f(t,0,Ne,0);var p=Le*Ne[1];fe(Ne,0,Ve,0),Object(x.i)(n),Object(x.r)(n,n,Ve);var b=1/Math.cos(p);return Object(x.q)(n,n,[b,b,1]),!0}return!1}function oe(e,t,n){var r=Math.sin(t),i=Math.cos(t),a=Math.sin(e),o=Math.cos(e),s=n;return s[0]=-r,s[4]=-a*i,s[8]=o*i,s[12]=0,s[1]=i,s[5]=-a*r,s[9]=o*r,s[13]=0,s[2]=0,s[6]=o,s[10]=a,s[14]=0,s[3]=0,s[7]=0,s[11]=0,s[15]=1,s}function se(e,t){return t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=Object(k.d)(e,1)),e.wkt===_.a.wkt?t.spatialReferenceId=1:Object(h.j)(e)?t.spatialReferenceId=2:Object(h.m)(e)?t.spatialReferenceId=3:e.wkt===_.d.wkt?t.spatialReferenceId=4:4490===e.wkid?t.spatialReferenceId=5:e.wkt===_.b.wkt?t.spatialReferenceId=7:e.wkt===_.c.wkt?t.spatialReferenceId=9:Object(h.g)(e)?t.spatialReferenceId=8:Object(h.h)(e)?t.spatialReferenceId=10:t.spatialReferenceId=0)}function ce(e,t,n,r){e!==n&&(n[r++]=e[t++],n[r++]=e[t++],n[r]=e[t])}function le(e,t,n,r){n[r++]=Fe*(e[t++]/b.a.radius),n[r++]=Fe*(Math.PI/2-2*Math.atan(Math.exp(-1*e[t++]/b.a.radius))),n[r]=e[t]}function ue(e,t,n,r){le(e,t,n,r),ye(n,r,n,r)}function de(e,t,n,r){le(e,t,n,r),ke(n,r,n,r)}function fe(e,t,n,r){!function(e,t,n,r,i){var a=.4999999*Math.PI,o=Object(j.d)(Le*e[t+1],-a,a),s=Math.sin(o);n[r++]=Le*e[t]*i.radius,n[r++]=i.halfSemiMajorAxis*Math.log((1+s)/(1-s)),n[r]=e[t+2]}(e,t,n,r,b.a)}function pe(e){if(Object(d.j)(e))return!1;var t=se(e,Me);return!!Ee[t][6]}function he(e,t,n,r,i){var a=i+e[t+2],o=Le*e[t+1],s=Le*e[t],c=Math.cos(o);n[r++]=Math.cos(s)*c*a,n[r++]=Math.sin(s)*c*a,n[r]=Math.sin(o)*a}function be(e,t,n,r){he(e,t,n,r,b.c.radius)}function ve(e,t,n,r){he(e,t,n,r,b.b.radius)}function ye(e,t,n,r){he(e,t,n,r,b.a.radius)}function me(e,t,n,r,i){var a=e[t],o=e[t+1],s=e[t+2],c=Math.sqrt(a*a+o*o+s*s),l=Object(j.c)(s/(0===c?1:c)),u=Math.atan2(o,a);n[r++]=Fe*u,n[r++]=Fe*l,n[r]=c-i}function ge(e,t,n,r){me(e,t,n,r,b.c.radius)}function Oe(e,t,n,r){me(e,t,n,r,b.b.radius)}function je(e,t,n,r){me(e,t,n,r,b.a.radius)}function we(e,t,n,r){je(e,t,n,r),fe(n,r,n,r)}function _e(e,t,n,r){je(e,t,n,r),ke(n,r,n,r)}function ke(e,t,n,r){!function(e,t,n,r,i){var a=Le*e[t],o=Le*e[t+1],s=e[t+2],c=Math.sin(o),l=Math.cos(o),u=i.radius/Math.sqrt(1-i.eccentricitySquared*c*c);n[r++]=(u+s)*l*Math.cos(a),n[r++]=(u+s)*l*Math.sin(a),n[r++]=(u*(1-i.eccentricitySquared)+s)*c}(e,t,n,r,b.a)}function xe(e,t,n,r){var i,a,o,s,c,l,u,d,f,p,h,v,y,m,g,O,j,w,_,k,x,S=T.b,E=e[t],C=e[t+1],P=e[t+2];i=Math.abs(P),a=E*E+C*C,o=Math.sqrt(a),s=a+P*P,c=Math.sqrt(s),k=Math.atan2(C,E),l=P*P/s,u=a/s,m=S.a2/c,g=S.a3-S.a4/c,u>.3?(d=i/c*(1+u*(S.a1+m+l*g)/c),_=Math.asin(d),p=d*d,f=Math.sqrt(1-p)):(f=o/c*(1-l*(S.a5-m-u*g)/c),_=Math.acos(f),p=1-f*f,d=Math.sqrt(p)),h=1-b.a.eccentricitySquared*p,v=b.a.radius/Math.sqrt(h),_+=w=(O=f*(g=i-(y=S.a6*v)*d)-d*(m=o-v*f))/(y/h+(j=f*m+d*g)),x=j+O*w/2,P<0&&(_=-_),n[r++]=Fe*k,n[r++]=Fe*_,n[r]=x}function Se(e,t,n,r){xe(e,t,n,r),ye(n,r,n,r)}function Te(e,t,n,r){xe(e,t,n,r),fe(n,r,n,r)}var Ee={2:{5:null,8:null,10:null,6:ce,1:ye,7:null,9:null,0:null,3:fe,2:ce,4:ke},5:{5:ce,8:null,10:null,6:ce,1:ye,7:null,9:null,0:null,3:null,2:null,4:ke},8:{5:null,8:ce,10:null,6:null,1:null,7:ve,9:null,0:null,3:null,2:null,4:null},10:{5:null,8:null,10:ce,6:null,1:null,7:null,9:be,0:null,3:null,2:null,4:null},3:{5:null,8:null,10:null,6:le,1:ue,7:null,9:null,0:null,3:ce,2:le,4:de},4:{5:xe,8:null,10:null,6:xe,1:Se,7:null,9:null,0:null,3:Te,2:xe,4:ce},1:{5:je,8:null,10:null,6:je,1:ce,7:null,9:null,0:null,3:we,2:je,4:_e},7:{5:null,8:Oe,10:null,6:null,1:null,7:ce,9:null,0:null,3:null,2:null,4:null},9:{5:null,8:null,10:ge,6:null,1:null,7:null,9:ce,0:null,3:null,2:null,4:null},0:{5:null,8:null,10:null,6:null,1:null,7:null,9:null,0:ce,3:null,2:null,4:null},6:{5:null,8:null,10:null,6:ce,1:ye,7:null,9:null,0:null,3:null,2:ce,4:ke}};function Ce(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ie();return Object(d.j)(e)||Object(d.j)(t)?null:Pe(e,t,n).projector}function Pe(e,t,n){if(Object(d.j)(e)||Object(d.j)(t)||n.source.spatialReference===e&&n.dest.spatialReference===t)return n;var r=se(e,n.source),i=se(t,n.dest);return 0===r&&0===i?Object(h.c)(e,t)?n.projector=ce:n.projector=null:n.projector=Ee[r][i],n}function Ie(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:ce}}var Me={spatialReference:null,spatialReferenceId:0},Ae={spatialReference:null,spatialReferenceId:0},Re=Ie(),Le=(Ie(),Object(j.f)(1)),Fe=Object(j.p)(1),De=Object(w.e)(),Ne=Object(w.e)(),Ve=Object(w.e)(),ze=Object(w.e)();Object(w.e)()},function(e,t,n){"use strict";var r,i=n(10),a=n(2),o=n(3),s=n(5),c=n(6),l=n(0),u=(n(16),n(13),n(17)),d=n(1),f=n(47),p=n(41),h=n(8),b=n(42),v=(n(12),n(19),n(20),n(28)),y=n(59),m=n(44),g=n(61),O=n(43),j=(n(71),n(66)),w=n(114),_=n(302),k=new f.a({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"}),x=r=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).dpi=96,r.format=null,r.origin=null,r.minScale=0,r.maxScale=0,r.size=null,r.spatialReference=null,r}return Object(o.a)(n,[{key:"isWrappable",get:function(){var e=this.spatialReference,t=this.origin;if(e&&t){var n=Object(y.d)(e);return e.isWrappable&&Math.abs(n.origin[0]-t.x)<=n.dx}return!1}},{key:"readOrigin",value:function(e,t){return O.a.fromJSON(Object(i.a)({spatialReference:t.spatialReference},e))}},{key:"lods",set:function(e){var t=this,n=0,r=0,i=[];this._levelToLOD={},e&&(n=-1/0,r=1/0,e.forEach((function(e){i.push(e.scale),n=e.scale>n?e.scale:n,r=e.scale<r?e.scale:r,t._levelToLOD[e.level]=e}))),this._set("scales",i),this._set("minScale",n),this._set("maxScale",r),this._set("lods",e),this._initializeUpsampleLevels()}},{key:"readSize",value:function(e,t){return[t.cols,t.rows]}},{key:"writeSize",value:function(e,t){t.cols=e[0],t.rows=e[0]}},{key:"zoomToScale",value:function(e){var t=this.scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];var n=Math.round(e-.5),r=Math.round(e);return t[r]+(r-e)*(t[n]-t[r])}},{key:"scaleToZoom",value:function(e){for(var t=this.scales,n=t.length-1,r=0;r<n;r++){var i=t[r],a=t[r+1];if(i<=e)return r;if(a===e)return r+1;if(i>e&&a<e)return r+1-(e-a)/(i-a)}return r}},{key:"snapScale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,n=this.scaleToZoom(e);return n%Math.floor(n)>=t?this.zoomToScale(Math.ceil(n)):this.zoomToScale(Math.floor(n))}},{key:"tileAt",value:function(e,t,n,r){var i,a,o=this.lodAt(e);if(!o)return null;if("number"==typeof t)i=t,a=n;else if(Object(y.c)(t.spatialReference,this.spatialReference))i=t.x,a=t.y,r=n;else{var s=Object(g.d)(t,this.spatialReference);if(!s)return null;i=s.x,a=s.y,r=n}var c=o.resolution*this.size[0],l=o.resolution*this.size[1];return r||(r={id:null,level:0,row:0,col:0,extent:Object(w.i)()}),r.level=e,r.row=Math.floor((this.origin.y-a)/l+.001),r.col=Math.floor((i-this.origin.x)/c+.001),this.updateTileInfo(r),r}},{key:"updateTileInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.lodAt(e.level);if(!n&&1===t){var r=this.lods[this.lods.length-1];r.level<e.level&&(n=r)}if(n){var i=e.level-n.level,a=n.resolution*this.size[0]/Math.pow(2,i),o=n.resolution*this.size[1]/Math.pow(2,i);e.id="".concat(e.level,"/").concat(e.row,"/").concat(e.col),e.extent||(e.extent=Object(w.i)()),e.extent[0]=this.origin.x+e.col*a,e.extent[1]=this.origin.y-(e.row+1)*o,e.extent[2]=e.extent[0]+a,e.extent[3]=e.extent[1]+o}}},{key:"upsampleTile",value:function(e){var t=this._upsampleLevels[e.level];return!(!t||-1===t.parentLevel)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}},{key:"getTileBounds",value:function(e,t){var n=this.lodAt(t.level).resolution,r=n*this.size[0],i=n*this.size[1];return e[0]=this.origin.x+t.col*r,e[1]=this.origin.y-(t.row+1)*i,e[2]=e[0]+r,e[3]=e[1]+i,e}},{key:"lodAt",value:function(e){return this._levelToLOD&&this._levelToLOD[e]||null}},{key:"clone",value:function(){return r.fromJSON(this.write({}))}},{key:"_initializeUpsampleLevels",value:function(){var e=this.lods;this._upsampleLevels=[];for(var t=null,n=0;n<e.length;n++){var r=e[n];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{size:256,spatialReference:m.a.WebMercator},t=e.resolutionFactor||1,n=e.scales,i=e.size||256,a=e.spatialReference||m.a.WebMercator;if(!Object(y.i)(a)){var o=[];if(n)for(var s=0;s<n.length;s++){var c=n[s];o.push({level:s,scale:c,resolution:c})}else for(var l=5e-4,u=23;u>=0;u--)o.unshift({level:u,scale:l,resolution:l}),l*=2;return new r({dpi:96,lods:o,origin:new O.a(0,0,a),size:[i,i],spatialReference:a})}var d=Object(y.d)(a),f=e.origin?new O.a({x:e.origin.x,y:e.origin.y,spatialReference:a}):new O.a(d?{x:d.origin[0],y:d.origin[1],spatialReference:a}:{x:0,y:0,spatialReference:a}),p=96,h=1/(39.37*Object(j.d)(a)*p),b=[];if(n)for(var v=0;v<n.length;v++){var g=n[v],w=g*h;b.push({level:v,scale:g,resolution:w})}else{var _=Object(y.f)(a)?512/i*591657527.5917094:256/i*591657527.591555,k=Math.ceil(24/t);b.push({level:0,scale:_,resolution:_*h});for(var x=1;x<k;x++){var S=_/Math.pow(2,t),T=S*h;b.push({level:x,scale:S,resolution:T}),_=S}}return new r({dpi:p,lods:b,origin:f,size:[i,i],spatialReference:a})}}]),n}(v.a);Object(l.a)([Object(d.b)({type:Number,json:{write:!0}})],x.prototype,"compressionQuality",void 0),Object(l.a)([Object(d.b)({type:Number,json:{write:!0}})],x.prototype,"dpi",void 0),Object(l.a)([Object(d.b)({type:String,json:{read:k.read,write:k.write,origins:{"web-scene":{read:!1,write:!1}}}})],x.prototype,"format",void 0),Object(l.a)([Object(d.b)({readOnly:!0})],x.prototype,"isWrappable",null),Object(l.a)([Object(d.b)({type:O.a,json:{write:!0}})],x.prototype,"origin",void 0),Object(l.a)([Object(p.a)("origin")],x.prototype,"readOrigin",null),Object(l.a)([Object(d.b)({type:[_.a],value:null,json:{write:!0}})],x.prototype,"lods",null),Object(l.a)([Object(d.b)({readOnly:!0})],x.prototype,"minScale",void 0),Object(l.a)([Object(d.b)({readOnly:!0})],x.prototype,"maxScale",void 0),Object(l.a)([Object(d.b)({readOnly:!0})],x.prototype,"scales",void 0),Object(l.a)([Object(d.b)({cast:function(e){return Array.isArray(e)?e:"number"==typeof e?[e,e]:[256,256]}})],x.prototype,"size",void 0),Object(l.a)([Object(p.a)("size",["rows","cols"])],x.prototype,"readSize",null),Object(l.a)([Object(b.a)("size",{cols:{type:u.a},rows:{type:u.a}})],x.prototype,"writeSize",null),Object(l.a)([Object(d.b)({type:m.a,json:{write:!0}})],x.prototype,"spatialReference",void 0);var S=x=r=Object(l.a)([Object(h.a)("esri.layers.support.TileInfo")],x);t.a=S},function(e,t,n){"use strict";n(95),n(102),n(147),n(112);var r=n(159),i=n(7),a=n.n(i),o=n(2),s=n(3),c=n(15),l=n(65),u=n(4),d=n(18),f=n(62);function p(){return(p=Object(c.a)(a.a.mark((function e(t,n,i,o){var s,c,l,u,f,p,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=n.exec(i)){e.next=3;break}throw new d.a("esri-intl:invalid-bundle",'Bundle id "'.concat(i,'" is not compatible with the pattern "').concat(n,'"'));case 3:return c=s[1]?"".concat(s[1],"/"):"",l=s[2],u=Object(r.b)(o),f="".concat(c).concat(l,".json"),p=u?"".concat(c).concat(l,"_").concat(u,".json"):f,e.prev=4,e.next=7,h(t(p));case 7:b=e.sent,e.next=23;break;case 10:if(e.prev=10,e.t0=e.catch(4),p!==f){e.next=14;break}throw new d.a("intl:unknown-bundle",'Bundle "'.concat(i,'" cannot be loaded'),{error:e.t0});case 14:return e.prev=14,e.next=17,h(t(f));case 17:b=e.sent,e.next=23;break;case 20:throw e.prev=20,e.t1=e.catch(14),new d.a("intl:unknown-bundle",'Bundle "'.concat(i,'" cannot be loaded'),{error:e.t1});case 23:return e.abrupt("return",b);case 24:case"end":return e.stop()}}),e,null,[[4,10],[14,20]])})))).apply(this,arguments)}function h(e){return b.apply(this,arguments)}function b(){return(b=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(u.k)(m.fetchBundleAsset)){e.next=2;break}return e.abrupt("return",m.fetchBundleAsset(t));case 2:return e.next=4,Object(f.default)(t,{responseType:"text"});case 4:return n=e.sent,e.abrupt("return",JSON.parse(n.data));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=function(){function e(t){var n,r=t.base,i=void 0===r?"":r,a=t.pattern,s=t.location,c=void 0===s?new URL(window.location.href):s;Object(o.a)(this,e),n="string"==typeof c?function(e){return new URL(e,new URL(c,l.a.location)).href}:c instanceof URL?function(e){return new URL(e,c).href}:c,this.pattern="string"==typeof a?new RegExp("^".concat(a)):a,this.getAssetUrl=n,i=i?i.endsWith("/")?i:i+"/":"",this.matcher=new RegExp("^".concat(i,"(?:(.*)/)?(.*)$"))}return Object(s.a)(e,[{key:"fetchMessageBundle",value:function(e,t){return function(e,t,n,r){return p.apply(this,arguments)}(this.getAssetUrl,this.matcher,e,t)}}]),e}();var y,m={},g=n(84);Object(r.c)((y={pattern:"esri/",location:g.a},new v(y)))},function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return k})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return _}));var r=n(189),i=n(21),a=n.n(i),o=(n(96),n(234)),s=n(596),c=n(214),l=n(73),u=n(597),d=n.n(u),f=(n(278),n(160)),p=(n(338),function(e){var t=Object(s.a)();return t.displayName=e,t}("Router-History")),h=function(e){var t=Object(s.a)();return t.displayName=e,t}("Router"),b=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}Object(r.a)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.render=function(){return a.a.createElement(h.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},a.a.createElement(p.Provider,{children:this.props.children||null,value:this.props.history}))},t}(a.a.Component);a.a.Component;var v=function(e){function t(){return e.apply(this,arguments)||this}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(a.a.Component);var y={},m=0;function g(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(y[e])return y[e];var t=d.a.compile(e);return m<1e4&&(y[e]=t,m++),t}(e)(t,{pretty:!0})}function O(e){var t=e.computedMatch,n=e.to,r=e.push,i=void 0!==r&&r;return a.a.createElement(h.Consumer,null,(function(e){e||Object(c.a)(!1);var r=e.history,s=e.staticContext,u=i?r.push:r.replace,d=Object(o.c)(t?"string"===typeof n?g(n,t.params):Object(l.a)({},n,{pathname:g(n.pathname,t.params)}):n);return s?(u(d),null):a.a.createElement(v,{onMount:function(){u(d)},onUpdate:function(e,t){var n=Object(o.c)(t.to);Object(o.f)(n,Object(l.a)({},d,{key:n.key}))||u(d)},to:n})}))}var j={},w=0;function _(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,a=void 0!==i&&i,o=n.strict,s=void 0!==o&&o,c=n.sensitive,l=void 0!==c&&c;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=j[n]||(j[n]={});if(r[e])return r[e];var i=[],a={regexp:d()(e,i,t),keys:i};return w<1e4&&(r[e]=a,w++),a}(n,{end:a,strict:s,sensitive:l}),i=r.regexp,o=r.keys,c=i.exec(e);if(!c)return null;var u=c[0],f=c.slice(1),p=e===u;return a&&!p?null:{path:n,url:"/"===n&&""===u?"/":u,isExact:p,params:o.reduce((function(e,t,n){return e[t.name]=f[n],e}),{})}}),null)}var k=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){var e=this;return a.a.createElement(h.Consumer,null,(function(t){t||Object(c.a)(!1);var n=e.props.location||t.location,r=e.props.computedMatch?e.props.computedMatch:e.props.path?_(n.pathname,e.props):t.match,i=Object(l.a)({},t,{location:n,match:r}),o=e.props,s=o.children,u=o.component,d=o.render;return Array.isArray(s)&&0===s.length&&(s=null),a.a.createElement(h.Provider,{value:i},i.match?s?"function"===typeof s?s(i):s:u?a.a.createElement(u,i):d?d(i):null:"function"===typeof s?s(i):null)}))},t}(a.a.Component);function x(e){return"/"===e.charAt(0)?e:"/"+e}function S(e,t){if(!e)return t;var n=x(e);return 0!==t.pathname.indexOf(n)?t:Object(l.a)({},t,{pathname:t.pathname.substr(n.length)})}function T(e){return"string"===typeof e?e:Object(o.e)(e)}function E(e){return function(){Object(c.a)(!1)}}function C(){}a.a.Component;a.a.Component;a.a.useContext},function(e,t,n){"use strict";var r=n(2),i=n(3);function a(e){return e&&e.acquire&&"function"==typeof e.acquire}var o=function(){function e(t,n,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(Object(r.a)(this,e),this.ctor=t,this.acquireFunction=n,this.releaseFunction=i,this.allocationSize=a,this._pool=new Array(o),this._initialSize=o,this.ctor)for(var s=0;s<o;s++)this._pool[s]=new this.ctor;this.allocationSize=Math.max(a,1)}return Object(i.a)(e,[{key:"destroy",value:function(){this.prune(0)}},{key:"acquire",value:function(){var t,n;if(e.test.disabled)n=new this.ctor;else{if(0===this._pool.length)for(var r=this.allocationSize,i=0;i<r;i++)this._pool[i]=new this.ctor;n=this._pool.pop()}for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return this.acquireFunction?this.acquireFunction.apply(this,[n].concat(s)):a(n)&&(t=n).acquire.apply(t,s),n}},{key:"release",value:function(t){t&&!e.test.disabled&&(this.releaseFunction?this.releaseFunction(t):function(e){return e&&e.release&&"function"==typeof e.release}(t)&&t.release(),this._pool.push(t))}},{key:"prune",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._initialSize;if(!(e>=this._pool.length)){for(var t=e;t<this._pool.length;++t){var n=this._pool[t];this._dispose(n)}this._pool.length=e}}},{key:"_dispose",value:function(e){e.dispose&&"function"==typeof e.dispose&&e.dispose()}}]),e}();o.test={disabled:!1},t.a=o},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(5),o=n(6),s=n(0),c=(n(16),n(13),n(17),n(1)),l=n(8),u=n(42),d=(n(12),n(19),n(20),function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).enabled=!0,i.type=null,i}return Object(i.a)(n,[{key:"writeEnabled",value:function(e,t,n){e||(t[n]=e)}}]),n}(n(28).a));Object(s.a)([Object(c.b)({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],d.prototype,"enabled",void 0),Object(s.a)([Object(u.a)("enabled")],d.prototype,"writeEnabled",null),Object(s.a)([Object(c.b)({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],d.prototype,"type",void 0);var f=d=Object(s.a)([Object(l.a)("esri.symbols.Symbol3DLayer")],d);t.a=f},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n(4),i=n(95),a={ar:"ar-u-nu-latn"},o=new WeakMap,s={};function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return null!=e.digitSeparator&&(t.useGrouping=e.digitSeparator),null!=e.places&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function l(e,t){return function(e){var t=e||s;if(!o.has(t)){var n=Object(i.b)(),c=a[Object(i.b)()]||n;o.set(t,new Intl.NumberFormat(c,e))}return Object(r.d)(o.get(t))}(t).format(e)}Object(i.a)((function(){o=new WeakMap,s={}}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return l}));n(16);var r=n(47);function i(e){return e}var a={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}},o=Object(r.b)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:null});function s(e,t,n){var r=new Date(e.getTime());if(t&&n){var i=a[n],o=i.getter,s=i.setter,c=i.multiplier;r[s](r[o]()+t*c)}return r}var c={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function l(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return null}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return l})),n.d(t,"h",(function(){return u}));var r=n(45),i=n(60),a=n(33);function o(e,t){return e[0]*t[1]-e[1]*t[0]}function s(e,t,n){var r=(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0]);return Math.abs(r)/Object(a.i)(t,n)}function c(e,t,n){var r=Object(a.g)(n,t)/Object(a.p)(n);return Object(a.a)(e,n,r)}function l(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;return Object(a.d)(y,r,n),Object(a.d)(g,t,i),c(O,g,y),Object(a.h)(e,i,O)}function u(e,t,n,r){Object(a.d)(y,r,n),Object(a.d)(g,t,n);var i=Object(a.g)(y,g)/Object(a.p)(y);return i>0?Object(a.o)(e,n,y,i):Object(a.c)(e,n)}function d(e,t,n,r){Object(a.d)(y,t,n);var i=r/Object(a.l)(y);return Object(a.o)(e,n,y,i)}function f(e,t){return l(g,t,e.start,e.end),Object(r.g)(g[0],t[0])&&Object(r.g)(g[1],t[1])?[Object(i.b)(t)]:[]}function p(e,t,n){return d(g,n,e,t),Object(r.g)(g[0],n[0])&&Object(r.g)(g[1],n[1])?[Object(i.b)(n)]:[]}function h(e,t){var n=e.start,r=e.end,i=t.start,s=t.end,c=Object(a.d)(y,r,n),l=Object(a.d)(m,s,i),u=o(c,l);if(Math.abs(u)<=v)return[];var d=Object(a.d)(g,n,i),f=o(l,d)/u,p=o(c,d)/u;if(f>=0){if(p>=0||1===t.type)return[Object(a.o)(O,n,c,f)]}else if(1===e.type&&(p>=0||1===t.type))return[Object(a.o)(O,n,c,f)];return[]}function b(e,t,n){var r=[],i=Object(a.d)(y,e.end,e.start),o=Object(a.d)(m,e.start,t),s=Object(a.p)(i),c=2*Object(a.g)(i,o),l=c*c-4*s*(Object(a.p)(o)-n*n);if(0===l){var u=-c/(2*s);(1===e.type||u>=0)&&r.push(Object(a.o)(O,e.start,i,u))}else if(l>0){var d=Math.sqrt(l),f=(-c+d)/(2*s);(1===e.type||f>=0)&&r.push(Object(a.o)(O,e.start,i,f));var p=(-c-d)/(2*s);(1===e.type||p>=0)&&r.push(Object(a.o)(g,e.start,i,p))}return r}var v=1e-6,y=Object(i.a)(),m=Object(i.a)(),g=Object(i.a)(),O=Object(i.a)()},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(5),o=n(6),s=n(0),c=(n(16),n(13),n(17),n(1)),l=n(41),u=n(8),d=(n(12),n(19),n(20),n(28)),f=n(44),p=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).type=null,e.hasM=!1,e.hasZ=!1,e.spatialReference=f.a.WGS84,e}return Object(i.a)(n,[{key:"cache",get:function(){return this.commitProperty("spatialReference"),{}}},{key:"extent",get:function(){return null}},{key:"readSpatialReference",value:function(e,t){if(e instanceof f.a)return e;if(null!=e){var n=new f.a;return n.read(e,t),n}return e}},{key:"clone",value:function(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}},{key:"clearCache",value:function(){this.notifyChange("cache")}},{key:"getCacheValue",value:function(e){return this.cache[e]}},{key:"setCacheValue",value:function(e,t){this.cache[e]=t}}]),n}(d.a);Object(s.a)([Object(c.b)()],p.prototype,"type",void 0),Object(s.a)([Object(c.b)({readOnly:!0})],p.prototype,"cache",null),Object(s.a)([Object(c.b)({readOnly:!0})],p.prototype,"extent",null),Object(s.a)([Object(c.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],p.prototype,"hasM",void 0),Object(s.a)([Object(c.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],p.prototype,"hasZ",void 0),Object(s.a)([Object(c.b)({type:f.a,json:{write:!0}})],p.prototype,"spatialReference",void 0),Object(s.a)([Object(l.a)("spatialReference")],p.prototype,"readSpatialReference",null);var h=p=Object(s.a)([Object(u.a)("esri.geometry.Geometry")],p);t.a=h},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(107),o=n(560),s=function(){function e(t,n,i,a,s){Object(r.a)(this,e),this._context=t,this.bufferType=n,this.usage=i,this._glName=null,this._size=-1,this._indexType=void 0,t.instanceCounter.increment(1,this),this._glName=this._context.gl.createBuffer(),Object(o.a)(this._context.gl),a&&this.setData(a,s)}return Object(i.a)(e,[{key:"glName",get:function(){return this._glName}},{key:"size",get:function(){return this._size}},{key:"indexType",get:function(){return this._indexType}},{key:"byteSize",get:function(){return 34962===this.bufferType?this._size:5125===this._indexType?4*this._size:2*this._size}},{key:"dispose",value:function(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context.instanceCounter.decrement(1,this),this._context=null)}},{key:"setData",value:function(e,t){if(e){if("number"==typeof e){if(e<0&&console.error("Buffer size cannot be negative!"),34963===this.bufferType&&t)switch(this._indexType=t,this._size=e,t){case 5123:e*=2;break;case 5125:e*=4}}else{var n=e.byteLength;Object(a.i)(e)&&(n/=2,this._indexType=5123),Object(a.j)(e)&&(n/=4,this._indexType=5125),this._size=n}var r=this._context.getBoundVAO();this._context.bindVAO(null),this._context.bindBuffer(this),this._context.gl.bufferData(this.bufferType,e,this.usage),this._context.bindVAO(r)}}},{key:"setSubData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.byteLength;if(e){(t<0||t>=this._size)&&console.error("offset is out of range!");var i=t,o=n,s=r,c=e.byteLength;Object(a.i)(e)&&(c/=2,i*=2,o*=2,s*=2),Object(a.j)(e)&&(c/=4,i*=4,o*=4,s*=4),void 0===r&&(r=c-1),n>=r&&console.error("end must be bigger than start!"),t+n-r>this._size&&console.error("An attempt to write beyond the end of the buffer!");var l=this._context.getBoundVAO();this._context.bindVAO(null),this._context.bindBuffer(this);var u=this._context.gl,d=ArrayBuffer.isView(e)?e.buffer:e,f=0===o&&s===e.byteLength?d:d.slice(o,s);u.bufferSubData(this.bufferType,i,f),this._context.bindVAO(l)}}}],[{key:"createIndex",value:function(t,n,r,i){return new e(t,34963,n,r,i)}},{key:"createVertex",value:function(t,n,r){return new e(t,34962,n,r)}}]),e}();t.a=s},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return f})),n.d(t,"h",(function(){return b})),n.d(t,"i",(function(){return p})),n.d(t,"j",(function(){return l})),n.d(t,"k",(function(){return d}));var r=n(31),i=n(14);function a(e,t,n,r){return function(e){return"function"==typeof e}(e)?e(t,n,r):e}function o(e){return[e.r,e.g,e.b,e.a]}function s(e,t,n){var a=function(e){for(var t=e.length;t--;)if(-1===" /-,\n".indexOf(e.charAt(t)))return!1;return!0},o=[],s=0,l=-1;do{if((l=t.indexOf("[",s))>=s){if(l>s){var u=t.substr(s,l-s);o.push([u,null,a(u)])}if(s=l+1,(l=t.indexOf("]",s))>=s){if(l>s){var d=e[t.substr(s,l-s)];d&&o.push([null,d,!1])}s=l+1}}}while(-1!==l);if(s<t.length-1){var f=t.substr(s);o.push([f,null,a(f)])}return function(e){var t,a="",s=null,l=Object(i.a)(o);try{for(l.s();!(t=l.n()).done;){var u=t.value,d=Object(r.a)(u,3),f=d[0],p=d[1],h=d[2];if(f)h?s=f:(s&&(a+=s,s=null),a+=f);else{var b=e.attributes[p];b&&(s&&(a+=s,s=null),a+=b)}}}catch(v){l.e(v)}finally{l.f()}return c(a,n)}}function c(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function l(e,t,n,r,i,a){for(var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=t/i,c=n/a,l=Math.ceil(s/2),u=Math.ceil(c/2),d=0;d<a;d++)for(var f=0;f<i;f++){for(var p=4*(f+(o?a-d-1:d)*i),h=0,b=0,v=0,y=0,m=0,g=0,O=0,j=(d+.5)*c,w=Math.floor(d*c);w<(d+1)*c;w++)for(var _=Math.abs(j-(w+.5))/u,k=(f+.5)*s,x=_*_,S=Math.floor(f*s);S<(f+1)*s;S++){var T=Math.abs(k-(S+.5))/l,E=Math.sqrt(x+T*T);E>=-1&&E<=1&&((h=2*E*E*E-3*E*E+1)>0&&(O+=h*e[(T=4*(S+w*t))+3],v+=h,e[T+3]<255&&(h=h*e[T+3]/250),y+=h*e[T],m+=h*e[T+1],g+=h*e[T+2],b+=h))}r[p]=y/b,r[p+1]=m/b,r[p+2]=g/b,r[p+3]=O/v}}function u(e){return e?{r:e[0],g:e[1],b:e[2],a:e[3]/255}:{r:0,g:0,b:0,a:0}}function d(e){var t;return null==(t=e.data)?void 0:t.symbol}function f(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function p(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function h(e){return"CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type}function b(e){return"CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return p})),n.d(t,"g",(function(){return f}));var r=n(31),i=n(14),a=[0,0];function o(e,t){return d(e,t.x,t.y,t.z)}function s(e,t){if(!t.points||t.points.length)return!1;var n,r=Object(i.a)(t.points);try{for(r.s();!(n=r.n()).done;){if(!l(e,n.value))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}function c(e,t){var n=t.xmin,r=t.ymin,i=t.zmin,a=t.xmax,o=t.ymax,s=t.zmax;return e.hasZ&&t.hasZ?d(e,n,r,i)&&d(e,n,o,i)&&d(e,a,o,i)&&d(e,a,r,i)&&d(e,n,r,s)&&d(e,n,o,s)&&d(e,a,o,s)&&d(e,a,r,s):d(e,n,r)&&d(e,n,o)&&d(e,a,o)&&d(e,a,r)}function l(e,t){return d(e,t[0],t[1])}function u(e,t){return d(e,t[0],t[1],t[2])}function d(e,t,n,r){return t>=e.xmin&&t<=e.xmax&&n>=e.ymin&&n<=e.ymax&&(null==r||!e.hasZ||r>=e.zmin&&r<=e.zmax)}function f(e,t){return a[1]=t.y,a[0]=t.x,p(e,a)}function p(e,t){return function(e,t){if(!e)return!1;if(function(e){return!Array.isArray(e[0][0])}(e))return h(!1,e,t);for(var n=!1,r=0,i=e.length;r<i;r++)n=h(n,e[r],t);return n}(e.rings,t)}function h(e,t,n){for(var i=Object(r.a)(n,2),a=i[0],o=i[1],s=e,c=0,l=0,u=t.length;l<u;l++){++c===u&&(c=0);var d=Object(r.a)(t[l],2),f=d[0],p=d[1],h=Object(r.a)(t[c],2),b=h[0],v=h[1];(p<o&&v>=o||v<o&&p>=o)&&f+(o-p)/(v-p)*(b-f)<a&&(s=!s)}return s}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return l}));n(16);var r,i,a=n(276),o=n(307),s=n(356),c=n(305);function l(e,t){switch(e.type){case"range":var n="range"in e?e.range[0]:e.minValue,i="range"in e?e.range[1]:e.maxValue;if(+t<n||+t>i)return r.VALUE_OUT_OF_RANGE;break;case"coded-value":case"codedValue":if(null==e.codedValues||e.codedValues.every((function(e){return null==e||e.code!==t})))return r.INVALID_CODED_VALUE}return null}(i=r||(r={})).VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",i.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value";var u={key:"type",base:a.a,typeMap:{range:c.a,"coded-value":o.a,inherited:s.a}};function d(e){if(e&&"range"===e.type)return{min:"range"in e?e.range[0]:e.minValue,max:"range"in e?e.range[1]:e.maxValue}}function f(e){if(!e||!e.type)return null;switch(e.type){case"range":return c.a.fromJSON(e);case"codedValue":return o.a.fromJSON(e);case"inherited":return s.a.fromJSON(e)}return null}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return i}));var r=n(79),i=Math.PI/180,a=/SPHEROID\[([^\]]+)]/i,o=r.a.radius,s=r.a.eccentricitySquared,c={a1:o*s,a2:o*s*o*s,a3:o*s*s/2,a4:o*s*o*s*2.5,a5:o*s+o*s*s/2,a6:1-s},l={4326:{a:r.a.radius,f:r.a.flattening},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:r.c.radius,f:r.c.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:r.b.radius,f:r.b.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:r.b.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return p})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return b})),n.d(t,"j",(function(){return v}));var r=n(14),i=n(31),a=n(59);function o(e){if(!e)return null;if(Array.isArray(e))return e;var t=e.hasZ,n=e.hasM;if("point"===e.type)return n&&t?[e.x,e.y,e.z,e.m]:t?[e.x,e.y,e.z]:n?[e.x,e.y,e.m]:[e.x,e.y];if("polygon"===e.type)return e.rings.slice(0);if("polyline"===e.type)return e.paths.slice(0);if("multipoint"===e.type)return e.points.slice(0);if("extent"===e.type){var r=e.clone().normalize();if(!r)return null;var i=!1,a=!1;return r.forEach((function(e){e.hasZ&&(i=!0),e.hasM&&(a=!0)})),r.map((function(e){var t=[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]];if(i&&e.hasZ)for(var n=.5*(e.zmax-e.zmin),r=0;r<t.length;r++)t[r].push(n);if(a&&e.hasM)for(var o=.5*(e.mmax-e.mmin),s=0;s<t.length;s++)t[s].push(o);return t}))}return null}function s(e,t){var n=t[0]-e[0],r=t[1]-e[1];if(e.length>2&&t.length>2){var i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}return Math.sqrt(n*n+r*r)}function c(e,t,n){var r=e[0]+n*(t[0]-e[0]),i=e[1]+n*(t[1]-e[1]);return e.length>2&&t.length>2?[r,i,e[2]+n*(t[2]-e[2])]:[r,i]}function l(e,t,n,r){var a=Object(i.a)(t,2),o=a[0],s=a[1],c=Object(i.a)(n[r],2),l=c[0],u=c[1],d=Object(i.a)(n[r+1],2),f=d[0]-l,p=d[1]-u,h=f*f+p*p,b=(o-l)*f+(s-u)*p,v=Math.min(1,Math.max(0,b/h));return e[0]=l+f*v,e[1]=u+p*v,e}function u(e,t){return c(e,t,.5)}function d(e){for(var t=e.length,n=0,r=0;r<t-1;++r)n+=s(e[r],e[r+1]);return n}function f(e,t){if(t<=0)return e[0];for(var n=e.length,r=0,i=0;i<n-1;++i){var a=s(e[i],e[i+1]);if(t-r<a){var o=(t-r)/a;return c(e[i],e[i+1],o)}r+=a}return e[n-1]}function p(e,t,n){for(var r=e.length,i=0,a=0,o=0,s=0;s<r;s++){var c=e[s],l=e[(s+1)%r],u=2;i+=c[0]*l[1]-l[0]*c[1],c.length>2&&l.length>2&&n&&(a+=c[0]*l[2]-l[0]*c[2],u=3),c.length>u&&l.length>u&&t&&(o+=c[0]*l[u]-l[0]*c[u])}return i<=0&&a<=0&&o<=0}function h(e){if("rings"in e){var t,n=Object(r.a)(e.rings);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.length<3||i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]||i.push([i[0][0],i[0][1]])}}catch(o){n.e(o)}finally{n.f()}if(e.rings.length>0&&!p(e.rings[0],e.hasM,e.hasZ))for(var a=0;a<e.rings.length;++a)e.rings[a]=e.rings[a].reverse()}}function b(e){return"polygon"!==e.type&&"polyline"!==e.type||v("polygon"===e.type?e.rings:e.paths,e.spatialReference),e}function v(e,t){var n=Object(a.d)(t);if(n){var i,o=n.valid[0],s=n.valid[1],c=s-o,l=Object(r.a)(e);try{var u=function(){var e=i.value,t=1/0,n=-1/0;e.forEach((function(e){for(var r=e[0];r<o;)r+=c;for(;r>s;)r-=c;t=Math.min(t,r),n=Math.max(n,r),e[0]=r}));var r=n-t;c-r<r&&e.forEach((function(e){e[0]<0&&(e[0]+=c)}))};for(l.s();!(i=l.n()).done;)u()}catch(d){l.e(d)}finally{l.f()}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return l}));var r=n(14),i=n(44),a=n(108),o=n(68),s={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new a.a({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:i.a.WebMercator}),minus180Line:new a.a({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:i.a.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new a.a({paths:[[[180,-180],[180,180]]],spatialReference:i.a.WGS84}),minus180Line:new a.a({paths:[[[-180,-180],[-180,180]]],spatialReference:i.a.WGS84})}};function c(e,t){return Math.ceil((e-t)/(2*t))}function l(e,t){var n,i=u(e),a=Object(r.a)(i);try{for(a.s();!(n=a.n()).done;){var o,s=n.value,c=Object(r.a)(s);try{for(c.s();!(o=c.n()).done;){o.value[0]+=t}}catch(l){c.e(l)}finally{c.f()}}}catch(l){a.e(l)}finally{a.f()}return e}function u(e){return Object(o.g)(e)?e.rings:e.paths}function d(e){var t=(null==e?void 0:e.isWebMercator)?102100:4326;return[s[t].minX,s[t].maxX]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return s})),n.d(t,"h",(function(){return p})),n.d(t,"i",(function(){return l})),n.d(t,"j",(function(){return a}));var r=n(64);function i(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function a(e,t,n,r,i,a,o,s,c,l){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e[6]=s,e[7]=c,e[8]=l,e}function o(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function s(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=t[8],f=n[0],p=n[1],h=n[2],b=n[3],v=n[4],y=n[5],m=n[6],g=n[7],O=n[8];return e[0]=f*r+p*o+h*l,e[1]=f*i+p*s+h*u,e[2]=f*a+p*c+h*d,e[3]=b*r+v*o+y*l,e[4]=b*i+v*s+y*u,e[5]=b*a+v*c+y*d,e[6]=m*r+g*o+O*l,e[7]=m*i+g*s+O*u,e[8]=m*a+g*c+O*d,e}function c(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=t[8],f=n[0],p=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=c,e[6]=f*r+p*o+l,e[7]=f*i+p*s+u,e[8]=f*a+p*c+d,e}function l(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=t[8],f=Math.sin(n),p=Math.cos(n);return e[0]=p*r+f*o,e[1]=p*i+f*s,e[2]=p*a+f*c,e[3]=p*o-f*r,e[4]=p*s-f*i,e[5]=p*c-f*a,e[6]=l,e[7]=u,e[8]=d,e}function u(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=a*t[6],e[7]=a*t[7],e[8]=a*t[8],e}function d(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e}function f(e,t){var n=t[0],r=t[1],i=t[2],a=t[4],o=t[5],s=t[6],c=t[8],l=t[9],u=t[10],d=u*o-s*l,f=-u*a+s*c,p=l*a-o*c,h=n*d+r*f+i*p;if(!h)return null;var b=1/h;return e[0]=d*b,e[1]=(-u*r+i*l)*b,e[2]=(s*r-i*o)*b,e[3]=f*b,e[4]=(u*n-i*c)*b,e[5]=(-s*n+i*a)*b,e[6]=p*b,e[7]=(-l*n+r*c)*b,e[8]=(o*n-r*a)*b,e}function p(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],c=t[6],l=t[7],u=t[8],d=t[9],f=t[10],p=t[11],h=t[12],b=t[13],v=t[14],y=t[15],m=n*s-r*o,g=n*c-i*o,O=n*l-a*o,j=r*c-i*s,w=r*l-a*s,_=i*l-a*c,k=u*b-d*h,x=u*v-f*h,S=u*y-p*h,T=d*v-f*b,E=d*y-p*b,C=f*y-p*v,P=m*C-g*E+O*T+j*S-w*x+_*k;return P?(P=1/P,e[0]=(s*C-c*E+l*T)*P,e[1]=(c*S-o*C-l*x)*P,e[2]=(o*E-s*S+l*k)*P,e[3]=(i*E-r*C-a*T)*P,e[4]=(n*C-i*S+a*x)*P,e[5]=(r*S-n*E-a*k)*P,e[6]=(b*_-v*w+y*j)*P,e[7]=(v*O-h*_-y*g)*P,e[8]=(h*w-b*O+y*m)*P,e):null}function h(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}var b=s,v=h;Object.freeze({__proto__:null,fromMat4:i,copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},set:a,identity:o,transpose:function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},invert:function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],c=t[6],l=t[7],u=t[8],d=u*o-s*l,f=-u*a+s*c,p=l*a-o*c,h=n*d+r*f+i*p;return h?(h=1/h,e[0]=d*h,e[1]=(-u*r+i*l)*h,e[2]=(s*r-i*o)*h,e[3]=f*h,e[4]=(u*n-i*c)*h,e[5]=(-s*n+i*a)*h,e[6]=p*h,e[7]=(-l*n+r*c)*h,e[8]=(o*n-r*a)*h,e):null},adjoint:function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],c=t[6],l=t[7],u=t[8];return e[0]=o*u-s*l,e[1]=i*l-r*u,e[2]=r*s-i*o,e[3]=s*c-a*u,e[4]=n*u-i*c,e[5]=i*a-n*s,e[6]=a*l-o*c,e[7]=r*c-n*l,e[8]=n*o-r*a,e},determinant:function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],c=e[7],l=e[8];return t*(l*a-o*c)+n*(-l*i+o*s)+r*(c*i-a*s)},multiply:s,translate:c,rotate:l,scale:u,scaleByVec2:d,fromTranslation:function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},fromRotation:function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromScaling:function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromMat2d:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},fromQuat:function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,c=i+i,l=n*o,u=r*o,d=r*s,f=i*o,p=i*s,h=i*c,b=a*o,v=a*s,y=a*c;return e[0]=1-d-h,e[3]=u-y,e[6]=f+v,e[1]=u+y,e[4]=1-l-h,e[7]=p-b,e[2]=f-v,e[5]=p+b,e[8]=1-l-d,e},normalFromMat4Legacy:f,normalFromMat4:p,projection:function(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e},str:function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},frob:function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e},subtract:h,multiplyScalar:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e},multiplyScalarAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},equals:function(e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],c=e[5],l=e[6],u=e[7],d=e[8],f=t[0],p=t[1],h=t[2],b=t[3],v=t[4],y=t[5],m=t[6],g=t[7],O=t[8];return Math.abs(n-f)<=r.a*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(i-p)<=r.a*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(a-h)<=r.a*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(o-b)<=r.a*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(s-v)<=r.a*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(c-y)<=r.a*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(l-m)<=r.a*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(u-g)<=r.a*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(d-O)<=r.a*Math.max(1,Math.abs(d),Math.abs(O))},mul:b,sub:v})},function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return y}));var r=n(7),i=n.n(r),a=n(2),o=n(3),s=n(31),c=n(15),l=n(14),u=n(18),d=n(24),f=n(95),p=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,h=new Set(["ar","bs","ca","cs","da","de","el","en","es","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"]),b=[],v=new Map;function y(e){if(!b.includes(e)){var t,n=Object(l.a)(v.keys());try{for(n.s();!(t=n.n()).done;){var r=t.value;_(e.pattern,r)&&v.delete(r)}}catch(i){n.e(i)}finally{n.f()}b.unshift(e)}}function m(e){return g.apply(this,arguments)}function g(){return(g=Object(c.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(f.b)(),v.has(t)||v.set(t,j(t,n)),r=v.get(t),e.next=5,k.add(r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){if(!p.test(e))return null;var t=p.exec(e),n=Object(s.a)(t,3),r=n[1],i=n[2],a=r+(i?"-"+i.toUpperCase():"");return h.has(a)?a:h.has(r)?r:null}function j(e,t){return w.apply(this,arguments)}function w(){return(w=Object(c.a)(i.a.mark((function e(t,n){var r,a,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=Object(l.a)(b),e.prev=2,a.s();case 4:if((o=a.n()).done){e.next=18;break}if(!_((s=o.value).pattern,t)){e.next=16;break}return e.prev=7,e.next=10,s.fetchMessageBundle(t,n);case 10:return e.abrupt("return",e.sent);case 13:e.prev=13,e.t0=e.catch(7),r.push(e.t0);case 16:e.next=4;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(2),a.e(e.t1);case 23:return e.prev=23,a.f(),e.finish(23);case 26:if(!r.length){e.next=28;break}throw new u.a("intl:message-bundle-error",'Errors occurred while loading "'.concat(t,'"'),{errors:r});case 28:throw new u.a("intl:no-message-bundle-loader",'No loader found for message bundle "'.concat(t,'"'));case 29:case"end":return e.stop()}}),e,null,[[2,20,23,26],[7,13]])})))).apply(this,arguments)}function _(e,t){return"string"==typeof e?t.startsWith(e):e.test(t)}Object(f.a)((function(){v.clear()}));var k=new(function(){function e(){Object(a.a)(this,e),this._numLoading=0}return Object(o.a)(e,[{key:"waitForAll",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._dfd,!e.t0){e.next=4;break}return e.next=4,this._dfd.promise;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"add",value:function(e){var t=this;return this._increase(),e.then((function(){return t._decrease()}),(function(){return t._decrease()})),this.waitForAll()}},{key:"_increase",value:function(){this._numLoading++,this._dfd||(this._dfd=Object(d.f)())}},{key:"_decrease",value:function(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)}}]),e}())},function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return b}));var r=n(10),i=n(7),a=n.n(i),o=n(15),s=n(14),c=(n(16),n(4)),l=n(138),u=n(172),d=null;function f(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function p(e,t,n){var r=e.backgroundColor,i=e.outline,a=e.dotSize,o=n&&n.swatchSize||22,s=Math.round(o*o/Math.pow(a,2)*.8),c=window.devicePixelRatio,l=document.createElement("canvas"),u=o*c;l.width=u,l.height=u,l.style.width=l.width/c+"px",l.style.height=l.height/c+"px";var p=l.getContext("2d");if(r&&(p.fillStyle=r.toCss(!0),p.fillRect(0,0,u,u),p.fill()),p.fillStyle=t.toCss(!0),d&&d.length/2===s)for(var h=0;h<2*s;h+=2){var b=d[h],v=d[h+1];p.fillRect(b,v,a*c,a*c),p.fill()}else{d=[];for(var y=0;y<2*s;y+=2){var m=f(0,u),g=f(0,u);d.push(m,g),p.fillRect(m,g,a*c,a*c),p.fill()}}i&&(i.color&&(p.strokeStyle=i.color.toCss(!0)),p.lineWidth=i.width,p.strokeRect(0,0,u,u));var O=new Image(o,o);return O.src=l.toDataURL(),O}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=24,r=75,i="horizontal"===t.align,a=i?r:n,o=i?n:r,c=t.width,l=void 0===c?a:c,u=t.height,d=void 0===u?o:u,f=t.gradient,p=void 0===f||f,h=window.devicePixelRatio,b=l*h,v=d*h,y=document.createElement("canvas");y.width=b,y.height=v,y.style.width="".concat(l,"px"),y.style.height="".concat(d,"px");var m=y.getContext("2d"),g=i?b:0,O=i?0:v;if(p){var j=m.createLinearGradient(0,0,g,O),w=1/(e.length-1);e.forEach((function(e,t){return j.addColorStop(t*w,e.toString())})),m.fillStyle=j,m.fillRect(0,0,b,v)}else{var _,k=i?b/e.length:b,x=i?v:v/e.length,S=0,T=0,E=Object(s.a)(e);try{for(E.s();!(_=E.n()).done;){var C=_.value;m.fillStyle=C.toString(),m.fillRect(S,T,k,x),S=i?S+k:0,T=i?0:T+x}}catch(I){E.e(I)}finally{E.f()}}var P=document.createElement("div");return P.style.width="".concat(l,"px"),P.style.height="".concat(d,"px"),P.appendChild(y),P}function b(e,t){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(a.a.mark((function e(t,r){var i,o,s,c,l,u,d,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next="web-style"===e.t0?3:"label-3d"===e.t0||"line-3d"===e.t0||"mesh-3d"===e.t0||"point-3d"===e.t0||"polygon-3d"===e.t0?8:"simple-marker"===e.t0||"simple-line"===e.t0||"simple-fill"===e.t0||"picture-marker"===e.t0||"picture-fill"===e.t0||"text"===e.t0?13:"cim"===e.t0?18:23;break;case 3:return e.next=5,n.e(205).then(n.bind(null,913));case 5:return i=e.sent,o=i.previewWebStyleSymbol,e.abrupt("return",o(t,b,r));case 8:return e.next=10,Promise.resolve().then(n.bind(null,586));case 10:return s=e.sent,c=s.previewSymbol3D,e.abrupt("return",c(t,r));case 13:return e.next=15,n.e(204).then(n.bind(null,914));case 15:return l=e.sent,u=l.previewSymbol2D,e.abrupt("return",u(t,r));case 18:return e.next=20,Promise.all([n.e(3),n.e(33),n.e(132)]).then(n.bind(null,1033));case 20:return d=e.sent,f=d.previewCIMSymbol,e.abrupt("return",f(t,r));case 23:return e.abrupt("return");case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return e&&"opacity"in e?e.opacity*y(e.parent):1}function m(e,t){return g.apply(this,arguments)}function g(){return(g=Object(o.a)(a.a.mark((function e(t,i){var o,d,f,p,h,b,v,m,g,O,j,w,_,k,x,S,T,E,C,P,I;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(o=y(t.layer||t.sourceLayer),!Object(c.k)(t.symbol)||Object(c.k)(i)&&!0===i.ignoreGraphicSymbol){e.next=13;break}if("web-style"!==t.symbol.type){e.next=10;break}return e.next=7,t.symbol.fetchSymbol(Object(c.k)(i)?i.abortOptions:null);case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=t.symbol.clone();case 11:return d=e.t0,e.abrupt("return",(Object(u.a)(d,null,o),d));case 13:return f=Object(c.k)(i)&&i.renderer||t.get("layer.renderer")||t.get("sourceLayer.renderer"),e.next=16,f.getSymbolAsync(t,i);case 16:if(p=e.sent){e.next=19;break}return e.abrupt("return");case 19:if("web-style"!==p.type){e.next=25;break}return e.next=22,p.fetchSymbol(Object(c.k)(i)?i.abortOptions:null);case 22:e.t1=e.sent,e.next=26;break;case 25:e.t1=p.clone();case 26:if(p=e.t1,!(!("visualVariables"in f)||"visualVariables"in f&&!f.visualVariables||"visualVariables"in f&&f.visualVariables&&!f.visualVariables.length)){e.next=29;break}return e.abrupt("return",p);case 29:if(!f.arcadeRequiredForVisualVariables||!Object(c.j)(i)&&!Object(c.j)(i.arcade)){e.next=35;break}return h=Object(r.a)({},Object(c.q)(i)),e.next=33,Object(l.e)();case 33:h.arcade=e.sent,i=h;case 35:return e.next=37,Promise.resolve().then(n.bind(null,386));case 37:b=e.sent,v=[],m=[],g=[],O=[],j=Object(s.a)(f.visualVariables),e.prev=43,j.s();case 45:if((w=j.n()).done){e.next=59;break}_=w.value,e.t2=_.type,e.next="color"===e.t2?50:"opacity"===e.t2?52:"rotation"===e.t2?54:"size"===e.t2?56:57;break;case 50:return v.push(_),e.abrupt("break",57);case 52:return m.push(_),e.abrupt("break",57);case 54:return O.push(_),e.abrupt("break",57);case 56:_.target||g.push(_);case 57:e.next=45;break;case 59:e.next=64;break;case 61:e.prev=61,e.t3=e.catch(43),j.e(e.t3);case 64:return e.prev=64,j.f(),e.finish(64);case 67:if(k=!!v.length&&v[v.length-1],x=k?b.getColor(k,t,i):null,S=!!m.length&&m[m.length-1],T=S?b.getOpacity(S,t,i):null,null!=o&&(T=null!=T?T*o:o),Object(u.a)(p,x,T),!g.length){e.next=73;break}return E=b.getAllSizes(g,t,i),e.next=73,Object(u.d)(p,E);case 73:for(C=0,P=O;C<P.length;C++)I=P[C],Object(u.c)(p,b.getRotationAngle(I,t,i),I.axis);return e.abrupt("return",p);case 75:case"end":return e.stop()}}),e,null,[[43,61,64,67]])})))).apply(this,arguments)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return o})),n.d(t,"h",(function(){return d})),n.d(t,"i",(function(){return a})),n.d(t,"j",(function(){return p})),n.d(t,"k",(function(){return s})),n.d(t,"l",(function(){return i}));var r=n(39),i={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function a(e,t,n){var r=22,i=22;e<1?r*=.75:e>1&&(i*=1.25);var a=22,o=22;return t&&n&&(r=i=a=o=0),[{type:"path",path:[{command:"M",values:[a,0]},{command:"L",values:[n?a:.875*a,0]},{command:"L",values:[n?r-.5*a:0,i-.5*o]},{command:"L",values:[r-.5*a,i-.5*o]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[a,0]},{command:"L",values:[a,t?0:.125*o]},{command:"L",values:[r-.5*a,t?i-.5*o:o]},{command:"L",values:[r-.5*a,i-.5*o]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[r-.5*a,i-.5*o]},{command:"L",values:[n?r-.5*a:0,i-.5*o]},{command:"L",values:[n?r-.5*a:0,t?i-.5*o:o]},{command:"L",values:[r-.5*a,t?i-.5*o:o]},{command:"Z",values:[]}]}]}function o(e){var t=22,n=.5*e;return[{type:"path",path:[{command:"M",values:[0,.7*t*.5]},{command:"L",values:[6.6,.7*t]},{command:"L",values:[6.6,.7*t+n]},{command:"L",values:[0,.7*t+n-.7*t*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[6.6,.7*t]},{command:"L",values:[6.6,.7*t+n]},{command:"L",values:[t,n]},{command:"L",values:[t,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[6.6,0]},{command:"L",values:[t,0]},{command:"L",values:[6.6,.7*t]},{command:"L",values:[0,.7*t*.5]},{command:"Z",values:[]}]}]}function s(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function c(e,t){var n=t?20:e,r=t?4:6;n-=n<=22?.5*r:r;var i=t?.35*n:.5*n;return[{type:"path",path:[{command:"M",values:[.5*n,0]},{command:"L",values:[n,.5*i]},{command:"L",values:[.5*n,i]},{command:"L",values:[0,.5*i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*i]},{command:"L",values:[.5*n,i]},{command:"L",values:[.5*n,e]},{command:"L",values:[0,e-.5*i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*n,i]},{command:"L",values:[.5*n,e]},{command:"L",values:[n,e-.5*i]},{command:"L",values:[n,.5*i]},{command:"Z",values:[]}]}]}function l(e,t){var n=t?20:e,r=t?4:6,i=.5*(n-=n<=22?.5*r:r),a=.15*n,o=e-a;return[{type:"ellipse",cx:.5*n,cy:o,rx:i,ry:a},{type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[0,o]},{command:"L",values:[n,o]},{command:"L",values:[n,a]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*n,cy:a,rx:i,ry:a}]}function u(e,t){var n=t?20:e,r=t?4:6,i=.15*(n-=n<=22?.5*r:r),a=e-i;return[{type:"ellipse",cx:.5*n,cy:a,rx:.5*n,ry:i},{type:"path",path:[{command:"M",values:[.5*n,0]},{command:"L",values:[n,a]},{command:"L",values:[0,a]},{command:"Z",values:[]}]}]}function d(e){var t=e,n=.15*(t-=t<22?3:6);return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[t,0]},{command:"L",values:[.5*t,e-n]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*t,cy:0,rx:.5*t,ry:n}]}function f(e){var t=e,n=e,r=t-=t<22?2:4,i=n,a=Math.floor(e/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*r,0]},{command:"L",values:[r,.5*i-a]},{command:"L",values:[.45*r-a,.5*i+a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*r,0]},{command:"L",values:[.45*r-a,.5*i+a]},{command:"L",values:[0,.5*i-a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*i-a]},{command:"L",values:[.45*r-a,.5*i+a]},{command:"L",values:[.45*r,n]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*r,n]},{command:"L",values:[r,.5*i-a]},{command:"L",values:[.45*r-a,.5*i+a]},{command:"Z",values:[]}]}]}function p(e){var t=e;return[{type:"path",path:[{command:"M",values:[.45*e,0]},{command:"L",values:[e,t-=t<22?1:2]},{command:"L",values:[.45*e,.6*t]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*e,0]},{command:"L",values:[.45*e,.6*t]},{command:"L",values:[0,t]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,t]},{command:"L",values:[.45*e,.6*t]},{command:"L",values:[e,t]},{command:"Z",values:[]}]}]}function h(e,t){return Math.round(Math.min(Math.max(e+255*t*.75,0),255))}function b(e,t){if("type"in e&&("linear"===e.type||"pattern"===e.type))return e;var n=new r.a(e);return new r.a([h(n.r,t),h(n.g,t),h(n.b,t),n.a])}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return l}));var r=n(4),i=n(366);function a(e,t){return Object(r.j)(t)||!t.mode?e?"absolute-height":"on-the-ground":t.mode}function o(e,t){return a(!!Object(r.k)(e)&&e.hasZ,t)}function s(e){var t=u(e);return o(e.geometry,t)}function c(e){var t=u(e),n=o(e.geometry,t);return{mode:n,offset:Object(r.k)(t)&&"on-the-ground"!==n?Object(r.r)(t.offset,0)*Object(i.a)(Object(r.r)(t.unit,"meters")):0}}function l(e){if("on-the-ground"===s(e))return!1;var t=u(e),n=Object(r.k)(t)&&t.featureExpressionInfo?t.featureExpressionInfo.expression:null;return!(!n||"0"===n)}function u(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function d(e,t,n){if(!Object(r.j)(n)&&n.mode){var i=e.hasZ?e.z:0,a=Object(r.k)(n.offset)?n.offset:0;switch(n.mode){case"absolute-height":return i-a;case"on-the-ground":return 0;case"relative-to-ground":return i-(Object(r.r)(t.elevationProvider.getElevation(e.x,e.y,e.z,e.spatialReference,"ground"),0)+a);case"relative-to-scene":return i-(Object(r.r)(t.elevationProvider.getElevation(e.x,e.y,e.z,e.spatialReference,"scene"),0)+a)}}}function f(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return h(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,n,r)}function p(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return h(e,t[0],t[1],t.length>2?t[2]:0,n,r,i)}function h(e,t,n,i,a,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(!Object(r.j)(o)){var c=Object(r.k)(s)?s.mode:"absolute-height";return"on-the-ground"===c?0:v(b(t,n,i,a,e,o),t,n,i,a,e,s,c)}}function b(e,t,n,i,a,o){var s=Object(r.k)(o.offset)?o.offset:0;switch(o.mode){case"absolute-height":return n+s;case"on-the-ground":return Object(r.r)(a.elevationProvider.getElevation(e,t,0,i,"ground"),0);case"relative-to-ground":return n+Object(r.r)(a.elevationProvider.getElevation(e,t,n,i,"ground"),0)+s;case"relative-to-scene":return n+Object(r.r)(a.elevationProvider.getElevation(e,t,n,i,"scene"),0)+s}}function v(e,t,n,i,a,o,s,c){var l=Object(r.k)(s)&&Object(r.k)(s.offset)?s.offset:0;switch(c){case"absolute-height":return e-l;case"relative-to-ground":return e-(Object(r.r)(o.elevationProvider.getElevation(t,n,i,a,"ground"),0)+l);case"relative-to-scene":return e-(Object(r.r)(o.elevationProvider.getElevation(t,n,i,a,"scene"),0)+l)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"CalciteTheme",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"EsriColors",{enumerable:!0,get:function(){return a.default}});var r=o(n(838)),i=o(n(672)),a=o(n(840));function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(145),o=Array.prototype.splice;function s(e){e.length=0}var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;Object(r.a)(this,e),this._pool=new a.a(Array,void 0,s,n,t)}return Object(i.a)(e,[{key:"acquire",value:function(){return this._pool.acquire()}},{key:"copy",value:function(e){var t=this.acquire();return e.unshift(0,0),o.apply(t,e),e.splice(0,2),t}},{key:"release",value:function(e){this._pool.release(e)}},{key:"prune",value:function(){this._pool.prune(0)}}],[{key:"acquire",value:function(){return l.acquire()}},{key:"copy",value:function(e){return l.copy(e)}},{key:"release",value:function(e){return l.release(e)}},{key:"prune",value:function(){l.prune()}}]),e}(),l=new c(100);t.a=c},function(e,t,n){"use strict";var r=n(7),i=n.n(r),a=n(15),o=n(2),s=n(3),c=n(5),l=n(6),u=n(0),d=(n(16),n(13),n(17),n(1)),f=n(47),p=n(8),h=(n(12),n(19),n(20),n(28)),b=n(765),v=new f.a({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary"},{ignoreUnknown:!0}),y=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).authoringInfo=null,r.type=null,r}return Object(s.a)(n,[{key:"getRequiredFields",value:function(){var e=Object(a.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.collectRequiredFields){e.next=2;break}return e.abrupt("return",[]);case 2:return n=new Set,e.next=5,this.collectRequiredFields(n,t);case 5:return e.abrupt("return",Array.from(n).sort());case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(e,t){}},{key:"getSymbolAsync",value:function(){var e=Object(a.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){return[]}},{key:"getAttributeHash",value:function(){return JSON.stringify(this)}},{key:"getMeshHash",value:function(){return JSON.stringify(this)}}]),n}(h.a);Object(u.a)([Object(d.b)({type:b.a,json:{write:!0}})],y.prototype,"authoringInfo",void 0),Object(u.a)([Object(d.b)({type:v.apiValues,readOnly:!0,json:{type:v.jsonValues,read:!1,write:{writer:v.write,ignoreOrigin:!0}}})],y.prototype,"type",void 0);var m=y=Object(u.a)([Object(p.a)("esri.renderers.Renderer")],y);t.a=m},function(e,t,n){"use strict";var r=n(2),i=n(5),a=n(6),o=n(0),s=(n(16),n(13),n(17),n(1)),c=n(8),l=(n(12),n(19),n(20),function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).type=null,i}return n}(n(28).a));Object(o.a)([Object(s.b)({type:["attachments","custom","fields","media","text"],readOnly:!0,json:{read:!1,write:!0}})],l.prototype,"type",void 0);var u=l=Object(o.a)([Object(c.a)("esri.popup.content.Content")],l);t.a=u},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return i})),n.d(t,"g",(function(){return d}));var r=n(117),i=Object(r.e)(770,1,771,771),a=Object(r.f)(1,1),o=Object(r.f)(0,771);function s(e){return 2===e?null:1===e?o:a}function c(e){return 2===e?r.c:null}var l=5e5,u={factor:-1,units:-2};function d(e){return e?u:null}function f(e){return 3===e||2===e?513:515}},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(10),i=n(31),a=n(14),o=n(2),s=n(3),c=n(5),l=n(6),u=n(4),d=n(86),f=n(139),p=n(27),h=n(11),b=function(){function e(t,n,r,i){Object(o.a)(this,e),this.primitiveIndices=t,this._numIndexPerPrimitive=n,this.indices=r,this.position=i,this.center=Object(p.e)(),Object(d.a)(t.length>=1),Object(d.a)(r.length%this._numIndexPerPrimitive==0),Object(d.a)(r.length>=t.length*this._numIndexPerPrimitive),Object(d.a)(3===i.size||4===i.size);var a=i.data,s=i.size,c=t.length,l=s*r[this._numIndexPerPrimitive*t[0]];v.clear(),v.push(l),this.bbMin=Object(p.g)(a[l],a[l+1],a[l+2]),this.bbMax=Object(p.d)(this.bbMin);for(var u=0;u<c;++u)for(var f=this._numIndexPerPrimitive*t[u],b=0;b<this._numIndexPerPrimitive;++b){l=s*r[f+b],v.push(l);var y=a[l];this.bbMin[0]=Math.min(y,this.bbMin[0]),this.bbMax[0]=Math.max(y,this.bbMax[0]),y=a[l+1],this.bbMin[1]=Math.min(y,this.bbMin[1]),this.bbMax[1]=Math.max(y,this.bbMax[1]),y=a[l+2],this.bbMin[2]=Math.min(y,this.bbMin[2]),this.bbMax[2]=Math.max(y,this.bbMax[2])}Object(h.h)(this.center,this.bbMin,this.bbMax,.5),this.radius=.5*Math.max(Math.max(this.bbMax[0]-this.bbMin[0],this.bbMax[1]-this.bbMin[1]),this.bbMax[2]-this.bbMin[2]);for(var m=this.radius*this.radius,g=0;g<v.length;++g){var O=a[l=v.getItemAt(g)]-this.center[0],j=a[l+1]-this.center[1],w=a[l+2]-this.center[2],_=O*O+j*j+w*w;if(!(_<=m)){var k=Math.sqrt(_),x=.5*(k-this.radius);this.radius=this.radius+x,m=this.radius*this.radius;var S=x/k;this.center[0]+=O*S,this.center[1]+=j*S,this.center[2]+=w*S}}v.clear()}return Object(s.a)(e,[{key:"getCenter",value:function(){return this.center}},{key:"getBSRadius",value:function(){return this.radius}},{key:"getBBMin",value:function(){return this.bbMin}},{key:"getBBMax",value:function(){return this.bbMax}},{key:"getChildren",value:function(){if(this._children)return this._children;if(Object(h.k)(this.bbMin,this.bbMax)>1){for(var t=Object(h.h)(Object(p.e)(),this.bbMin,this.bbMax,.5),n=this.primitiveIndices.length,r=new Uint8Array(n),i=new Array(8),a=0;a<8;++a)i[a]=0;for(var o=this.position,s=o.data,c=o.size,l=0;l<n;++l){for(var u=0,d=this._numIndexPerPrimitive*this.primitiveIndices[l],f=c*this.indices[d],b=s[f],v=s[f+1],y=s[f+2],m=1;m<this._numIndexPerPrimitive;++m){var g=s[f=c*this.indices[d+m]],O=s[f+1],j=s[f+2];g<b&&(b=g),O<v&&(v=O),j<y&&(y=j)}b<t[0]&&(u|=1),v<t[1]&&(u|=2),y<t[2]&&(u|=4),r[l]=u,++i[u]}for(var w=0,_=0;_<8;++_)i[_]>0&&++w;if(w<2)return;for(var k=new Array(8),x=0;x<8;++x)k[x]=i[x]>0?new Uint32Array(i[x]):void 0;for(var S=0;S<8;++S)i[S]=0;for(var T=0;T<n;++T){var E=r[T];k[E][i[E]++]=this.primitiveIndices[T]}this._children=new Array(8);for(var C=0;C<8;++C)void 0!==k[C]&&(this._children[C]=new e(k[C],this._numIndexPerPrimitive,this.indices,this.position))}return this._children}}],[{key:"prune",value:function(){v.prune()}}]),e}(),v=new f.a({deallocator:null}),y=n(285),m=n(241),g=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var s,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;Object(o.a)(this,n),(s=t.call(this))._primitiveType=l,s.edgeIndicesLength=u,s.type=2,s._vertexAttributes=new Map,s._indices=new Map,s._boundingInfo=null;var d,f=Object(a.a)(e);try{for(f.s();!(d=f.n()).done;){var p=Object(i.a)(d.value,2),h=p[0],b=p[1];b&&s._vertexAttributes.set(h,Object(r.a)({},b))}}catch(C){f.e(C)}finally{f.f()}if(null==c||0===c.length){var v=O(s._vertexAttributes),y=Object(m.d)(v);s.edgeIndicesLength=s.edgeIndicesLength<0?v:s.edgeIndicesLength;var g,w=Object(a.a)(s._vertexAttributes.keys());try{for(w.s();!(g=w.n()).done;){var _=g.value;s._indices.set(_,y)}}catch(C){w.e(C)}finally{w.f()}}else{var k,x=Object(a.a)(c);try{for(x.s();!(k=x.n()).done;){var S=Object(i.a)(k.value,2),T=S[0],E=S[1];E&&(s._indices.set(T,j(E)),"position"===T&&(s.edgeIndicesLength=s.edgeIndicesLength<0?s._indices.get(T).length:s.edgeIndicesLength))}}catch(C){x.e(C)}finally{x.f()}}return s}return Object(s.a)(n,[{key:"vertexAttributes",get:function(){return this._vertexAttributes}},{key:"getMutableAttribute",value:function(e){var t=this._vertexAttributes.get(e);return t&&!t.exclusive&&(t.data=Array.from(t.data),t.exclusive=!0),t}},{key:"indices",get:function(){return this._indices}},{key:"indexCount",get:function(){var e=this._indices.values().next().value;return e?e.length:0}},{key:"primitiveType",get:function(){return this._primitiveType}},{key:"faceCount",get:function(){return this.indexCount/3}},{key:"boundingInfo",get:function(){return Object(u.j)(this._boundingInfo)&&(this._boundingInfo=this._calculateBoundingInfo()),this._boundingInfo}},{key:"computeAttachmentOrigin",value:function(e){return 0===this.primitiveType?this.computeAttachmentOriginTriangles(e):this.computeAttachmentOriginPoints(e)}},{key:"computeAttachmentOriginTriangles",value:function(e){var t=this.indices.get("position"),n=this.vertexAttributes.get("position");return Object(m.c)(n,t,e)}},{key:"computeAttachmentOriginPoints",value:function(e){var t=this.indices.get("position"),n=this.vertexAttributes.get("position");return Object(m.b)(n,t,e)}},{key:"invalidateBoundingInfo",value:function(){this._boundingInfo=null}},{key:"_calculateBoundingInfo",value:function(){var e=this.indices.get("position");if(0===e.length)return null;var t=0===this.primitiveType?3:1;Object(d.a)(e.length%t==0,"Indexing error: "+e.length+" not divisible by "+t);var n=Object(m.d)(e.length/t),r=this.vertexAttributes.get("position");return new b(n,t,e,r)}}]),n}(y.a);function O(e){var t=e.values().next().value;return null==t?0:t.data.length/t.size}function j(e){if(e.BYTES_PER_ELEMENT===Uint16Array.BYTES_PER_ELEMENT)return e;var t,n=Object(a.a)(e);try{for(n.s();!(t=n.n()).done;){if(t.value>=65536)return e}}catch(r){n.e(r)}finally{n.f()}return new Uint16Array(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var r=n(18),i=n(196),a=n(193),o=n(76),s=n(289);function c(e,t,n,o){var c=function(e,t,n){if(!e)return null;if(n&&"web-scene"===n.origin&&!(e instanceof i.a)&&!(e instanceof a.a)){var o="cim"!==e.type?Object(s.a)(e):{symbol:null,error:new r.a("symbol-conversion:unsupported-cim-symbol","CIM symbol is unsupported in web scenes",{symbol:e})};return o.symbol?o.symbol.write(t,n):(n.messages&&n.messages.push(new r.a("symbol:unsupported","Symbols of type '".concat(e.declaredClass,"' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView"),{symbol:e,context:n,error:o.error})),null)}return n&&"web-map"===n.origin&&"web-style"===e.type?(n.messages&&n.messages.push(new r.a("symbol:unsupported","Symbols of type '".concat(e.declaredClass,"' are not supported in webmaps. Use CIMSymbol instead when working with WebMap in MapView."),{symbol:e,context:n})),null):e.write(t,n)}(e,{},o);c&&(t[n]=c)}function l(e,t){return Object(o.d)(e,null,t)}},function(e,t,n){"use strict";function r(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function i(e){return null!=e&&!isNaN(e)&&isFinite(e)}function a(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}function o(e,t){var n=t||a(e),r=e.valueUnit||"unknown";return"unknown"===n?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===r?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return _})),n.d(t,"b",(function(){return w})),n.d(t,"c",(function(){return U})),n.d(t,"d",(function(){return V})),n.d(t,"e",(function(){return j})),n.d(t,"f",(function(){return O})),n.d(t,"g",(function(){return m})),n.d(t,"h",(function(){return g}));var r=n(7),i=n.n(r),a=n(14),o=n(15),s=n(16),c=n(4),l=n(39),u=n(38),d=n(179),f=n(76),p=n(300),h=n(27),b=n(310),v=/\/resource\/(.*?)\.svg$/,y=new l.a("white");function m(e){if(!e)return 0;if(Object(f.c)(e)){var t=function(e){var t=e.symbolLayers&&e.symbolLayers.length;if(t){var n=e.symbolLayers.getItemAt(t-1);return"outline"in n?Object(c.i)(n,"outline","size"):void 0}}(e);return Object(c.k)(t)?t:0}var n=Object(b.d)(e);return n&&Object(u.h)(n.width)||0}function g(e){if(!e||!e.symbolLayers)return!1;switch(e.type){case"point-3d":return e.symbolLayers.some((function(e){return"object"===e.type}));case"line-3d":return e.symbolLayers.some((function(e){return"path"===e.type}));case"polygon-3d":return e.symbolLayers.some((function(e){return"object"===e.type||"extrude"===e.type}));default:return!1}}function O(e,t){var n=t.resource.href;return!Object(s.a)("esri-canvas-svg-support")&&e.styleOrigin&&v.test(n)?n.replace(v,"/resource/png/$1.png"):n}function j(e,t){if(!e)return null;var n=null;return Object(f.c)(e)?n=function(e){var t=e.symbolLayers;if(!t)return null;var n=null;return t.forEach((function(e){"object"===e.type&&null!=e.resource.href||(n="water"===e.type?Object(c.q)(e.color):Object(c.k)(e.material)?Object(c.q)(e.material.color):null)})),n?new l.a(n):null}(e):Object(f.b)(e)&&(n=e.color?new l.a(e.color):null),n?w(n,t):null}function w(e,t){if(null==t)return e;var n=e.toRgba();return n[3]=n[3]*t,new l.a(n)}function _(e,t,n){e&&(t||null!=n)&&(t&&(t=new l.a(t)),Object(f.c)(e)?function(e,t,n){var r=e.symbolLayers;if(r){var i=function(e){var r=Object(c.k)(e)?e:null;return w(t=t||r||null!=n&&y,n)};r.forEach((function(e){if("object"!==e.type||null==e.resource.href||t)if("water"===e.type)e.color=i(e.color);else{var r=Object(c.k)(e.material)?e.material.color:null,a=i(r);Object(c.j)(e.material)?e.material=new d.a({color:a}):e.material.color=a,null!=n&&"outline"in e&&Object(c.k)(e.outline)&&Object(c.k)(e.outline.color)&&(e.outline.color=w(e.outline.color,n))}}))}}(e,t,n):Object(f.b)(e)&&function(e,t,n){(t=t||e.color)&&(e.color=w(t,n)),null!=n&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=w(e.outline.color,n))}(e,t,n))}function k(e,t){return x.apply(this,arguments)}function x(){return(x=Object(o.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.symbolLayers,e.t0=r,!e.t0){e.next=5;break}return e.next=5,Object(p.a)(r,function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t){return T.apply(this,arguments)}function T(){return(T=Object(o.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next="extrude"===e.t0?3:"icon"===e.t0||"line"===e.t0||"text"===e.t0?5:"path"===e.t0?7:"object"===e.t0?9:11;break;case 3:return P(t,n),e.abrupt("break",11);case 5:return E(t,n),e.abrupt("break",11);case 7:return A(t,n),e.abrupt("break",11);case 9:return e.next=11,I(t,n);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){var n=C(t);Object(c.k)(n)&&(e.size=n)}function C(e){var t,n=Object(a.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("number"==typeof r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function P(e,t){e.size="number"==typeof t[2]?t[2]:0}function I(e,t){return M.apply(this,arguments)}function M(){return(M=Object(o.a)(i.a.mark((function e(t,n){var r,a,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(t);case 2:r=e.sent,a=r.resourceSize,o=r.symbolSize,s=R(n,a,o),t.width=D(n[0],o[0],a[0],s),t.depth=D(n[1],o[1],a[1],s),t.height=D(n[2],o[2],a[2],s);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t){var n=R(t,h.a,[e.width,void 0,e.height]);e.width=D(t[0],e.width,1,n),e.height=D(t[2],e.height,1,n)}function R(e,t,n){for(var r=0;r<3;r++){var i=e[r];switch(i){case"symbol-value":return null!=n[r]?n[r]/t[r]:1;case"proportional":break;default:if(i&&t[r])return i/t[r]}}return 1}function L(e){return F.apply(this,arguments)}function F(){return(F=Object(o.a)(i.a.mark((function e(t){var r,a,o,s,c,l,u,d,f;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(19).then(n.bind(null,1035));case 2:return r=e.sent,e.next=5,r.computeObjectLayerResourceSize(t,10);case 5:a=e.sent,o=t.width,s=t.height,c=t.depth,l=[o,c,s],u=1,d=0;case 12:if(!(d<3)){e.next=19;break}if(null==l[d]){e.next=16;break}return u=l[d]/a[d],e.abrupt("break",19);case 16:d++,e.next=12;break;case 19:for(f=0;f<3;f++)null==l[f]&&(l[f]=a[f]*u);return e.abrupt("return",{resourceSize:a,symbolSize:l});case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t,n,r){switch(e){case"proportional":return n*r;case"symbol-value":return null!=t?t:n;default:return e}}function N(e,t){var n=C(t);if(!Object(c.j)(n))switch(e.type){case"simple-marker":e.size=n;break;case"picture-marker":var r=e.width/e.height;r>1?(e.width=n,e.height=n*r):(e.width=n*r,e.height=n);break;case"simple-line":e.width=n;break;case"text":e.font.size=n}}function V(e,t){return z.apply(this,arguments)}function z(){return(z=Object(o.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!n){e.next=2;break}return e.abrupt("return",Object(f.c)(t)?k(t,n):void(Object(f.b)(t)&&N(t,n)));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e,t,n){if(e&&null!=t)if(Object(f.c)(e)){var r=e.symbolLayers;r&&r.forEach((function(e){if(e&&"object"===e.type)switch(n){case"tilt":e.tilt=t;break;case"roll":e.roll=t;break;default:e.heading=t}}))}else Object(f.b)(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle=t))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return l})),n.d(t,"h",(function(){return u}));var r=Number.POSITIVE_INFINITY,i=Math.PI,a=2*i,o=128/i,s=i/180,c=1/Math.LN2;function l(e,t){return(e%=t)>=0?e:e+t}function u(e){return l(e*o,256)}function d(e){return Math.log(e)*c}function f(e,t,n){return e*(1-n)+t*n}},function(e,t,n){"use strict";var r=n(7),i=n.n(r),a=n(15),o=n(2),s=n(3),c=n(5),l=n(6),u=n(0),d=(n(16),n(98)),f=n(13),p=(n(17),n(1)),h=n(8),b=n(18),v=n(12),y=(n(19),n(20),n(24)),m=n(44),g=n(63),O=(n(71),n(78)),j=n(192),w=n(62),_=n(133),k=0,x=f.a.getLogger("esri.layers.Layer"),S=function(e){Object(c.a)(r,e);var t=Object(l.a)(r);function r(){var e;return Object(o.a)(this,r),(e=t.apply(this,arguments)).attributionDataUrl=null,e.fullExtent=new g.a(-180,-90,180,90,m.a.WGS84),e.id=Date.now().toString(16)+"-layer-"+k++,e.legendEnabled=!0,e.listMode="show",e.opacity=1,e.parent=null,e.popupEnabled=!0,e.attributionVisible=!0,e.spatialReference=m.a.WGS84,e.title=null,e.type=null,e.url=null,e.visible=!0,e}return Object(s.a)(r,[{key:"initialize",value:function(){var e=this;this.when().catch((function(t){var n,r;Object(y.m)(t)||f.a.getLogger(e.declaredClass).error("#load()","Failed to load layer (title: '".concat(null!=(n=e.title)?n:"no title","', id: '").concat(null!=(r=e.id)?r:"no id","')"),{error:t})}))}},{key:"destroy",value:function(){if(this.parent){var e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}},{key:"hasAttributionData",get:function(){return null!=this.attributionDataUrl}},{key:"parsedUrl",get:function(){var e=this.url;return e?Object(v.J)(e):null}},{key:"fetchAttributionData",value:function(){var e=Object(a.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.attributionDataUrl,!this.hasAttributionData||!t){e.next=5;break}return e.next=4,Object(w.default)(t,{query:{f:"json"},responseType:"json"});case 4:return e.abrupt("return",e.sent.data);case 5:throw new b.a("layer:no-attribution-data","Layer does not have attribution data");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"fromArcGISServerUrl",value:function(){var e=Object(a.a)(i.a.mark((function e(t){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"==typeof t?{url:t}:t,e.next=3,n.e(130).then(n.bind(null,911));case 3:return a=e.sent,e.prev=4,e.next=7,a.fromUrl(r);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(4),x.error("#fromArcGISServerUrl({ url: '"+r.url+"'})","Failed to create layer from arcgis server url",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"fromPortalItem",value:function(){var e=Object(a.a)(i.a.mark((function e(t){var r,a,o,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="portalItem"in t?t:{portalItem:t},e.next=3,n.e(100).then(n.bind(null,910));case 3:return a=e.sent,e.prev=4,e.next=7,a.fromItem(r);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(4),o=r&&r.portalItem,s=o&&o.id||"unset",c=o&&o.portal&&o.portal.url||d.a.portalUrl,x.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+c+"', id: '"+s+"')",e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}()}]),r}(O.a.EventedMixin(Object(j.a)(_.a)));Object(u.a)([Object(p.b)({type:String})],S.prototype,"attributionDataUrl",void 0),Object(u.a)([Object(p.b)({type:g.a})],S.prototype,"fullExtent",void 0),Object(u.a)([Object(p.b)({readOnly:!0})],S.prototype,"hasAttributionData",null),Object(u.a)([Object(p.b)({type:String})],S.prototype,"id",void 0),Object(u.a)([Object(p.b)({type:Boolean,nonNullable:!0})],S.prototype,"legendEnabled",void 0),Object(u.a)([Object(p.b)({type:["show","hide","hide-children"]})],S.prototype,"listMode",void 0),Object(u.a)([Object(p.b)({type:Number,range:{min:0,max:1},nonNullable:!0})],S.prototype,"opacity",void 0),Object(u.a)([Object(p.b)()],S.prototype,"parent",void 0),Object(u.a)([Object(p.b)({readOnly:!0})],S.prototype,"parsedUrl",null),Object(u.a)([Object(p.b)({type:Boolean})],S.prototype,"popupEnabled",void 0),Object(u.a)([Object(p.b)({type:Boolean})],S.prototype,"attributionVisible",void 0),Object(u.a)([Object(p.b)({type:m.a})],S.prototype,"spatialReference",void 0),Object(u.a)([Object(p.b)({type:String})],S.prototype,"title",void 0),Object(u.a)([Object(p.b)({type:String,readOnly:!0,json:{read:!1}})],S.prototype,"type",void 0),Object(u.a)([Object(p.b)()],S.prototype,"url",void 0),Object(u.a)([Object(p.b)({type:Boolean,nonNullable:!0})],S.prototype,"visible",void 0);var T=S=Object(u.a)([Object(h.a)("esri.layers.Layer")],S);t.a=T},function(e,t,n){"use strict";n.d(t,"a",(function(){return T})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return w})),n.d(t,"f",(function(){return S})),n.d(t,"g",(function(){return o})),n.d(t,"h",(function(){return c})),n.d(t,"i",(function(){return l})),n.d(t,"j",(function(){return s})),n.d(t,"k",(function(){return _})),n.d(t,"l",(function(){return a})),n.d(t,"m",(function(){return m})),n.d(t,"n",(function(){return x})),n.d(t,"o",(function(){return b})),n.d(t,"p",(function(){return y})),n.d(t,"q",(function(){return j})),n.d(t,"r",(function(){return O})),n.d(t,"s",(function(){return g})),n.d(t,"t",(function(){return h}));var r=n(4);n(63),n(114);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E;return[e[0],e[1],e[2],e[3],e[4],e[5]]}function a(e,t,n,r,a,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:i();return s[0]=e,s[1]=t,s[2]=n,s[3]=r,s[4]=a,s[5]=o,s}function o(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function s(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function c(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length/3,i=e[0],a=e[1],o=e[2],s=e[3],c=e[4],l=e[5],u=0;u<r;u++)i=Math.min(i,t[n+3*u]),a=Math.min(a,t[n+3*u+1]),o=Math.min(o,t[n+3*u+2]),s=Math.max(s,t[n+3*u]),c=Math.max(c,t[n+3*u+1]),l=Math.max(l,t[n+3*u+2]);e[0]=i,e[1]=a,e[2]=o,e[3]=s,e[4]=c,e[5]=l}function l(e,t,n){var r=t.length,i=e[0],a=e[1],o=e[2],s=e[3],c=e[4],l=e[5];if(n)for(var u=0;u<r;u++){var d=t[u];i=Math.min(i,d[0]),a=Math.min(a,d[1]),o=Math.min(o,d[2]),s=Math.max(s,d[0]),c=Math.max(c,d[1]),l=Math.max(l,d[2])}else for(var f=0;f<r;f++){var p=t[f];i=Math.min(i,p[0]),a=Math.min(a,p[1]),s=Math.max(s,p[0]),c=Math.max(c,p[1])}e[0]=i,e[1]=a,e[2]=o,e[3]=s,e[4]=c,e[5]=l}function u(e){return e[0]>=e[3]?0:e[3]-e[0]}function d(e){return e[1]>=e[4]?0:e[4]-e[1]}function f(e){return e[2]>=e[5]?0:e[5]-e[2]}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return t[0]=e[0]+u(e)/2,t[1]=e[1]+d(e)/2,t[2]=e[2]+f(e)/2,t}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return t[0]=u(e),t[1]=d(e),t[2]=f(e),t}function b(e){return Math.max(u(e),f(e),d(e))}function v(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=e[0]+u(e)/2,i=e[1]+d(e)/2,a=e[2]+f(e)/2;return n[0]=r+(e[0]-r)*t,n[1]=i+(e[1]-i)*t,n[2]=a+(e[2]-a)*t,n[3]=r+(e[3]-r)*t,n[4]=i+(e[4]-i)*t,n[5]=a+(e[5]-a)*t,n}function m(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return n[0]=t[0],n[1]=t[1],n[2]=t[2],n!==e&&(n[3]=e[3],n[4]=e[4],n[5]=e[5]),n}function O(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return n[3]=t[0],n[4]=t[1],n[5]=t[2],n!==e&&(n[0]=e[0],n[1]=e[1],n[2]=e[2]),e}function j(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function w(e){return e?j(e,T):i(T)}function _(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function k(e){return 6===e.length}function x(e){return 0===u(e)&&0===d(e)&&0===f(e)}function S(e,t,n){if(Object(r.j)(e)||Object(r.j)(t))return e===t;if(!k(e)||!k(t))return!1;if(n){for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1}else for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}var T=[1/0,1/0,1/0,-1/0,-1/0,-1/0],E=[0,0,0,0,0,0];i()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useContextState=t.rtlPlacement=t.getAccessibleOnClickHandlers=t.getChildType=t.transition=t.backgroundGradient=t.subNavLinkActive=t.subNavUnderline=t.fontSize=t.clearfix=t.unitCalc=void 0;var r=n(21),i=n(766),a=n(164);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}t.unitCalc=function(e,t,n){var r,i;"string"===typeof e&&(r=e.replace(parseFloat(e),""),e=parseFloat(e)),"string"===typeof t&&(i=t.replace(parseFloat(t),""),t=parseFloat(t));var a=r||i;switch(n){case"+":return e+t+a;case"-":return e-t+a;case"*":return e*t+a;case"/":return e/t+a;case"%":return e%t+a;default:return console.warn("unitCalc only supports the following operators: +, -, *, /, %"),e}};t.clearfix=function(){return"\n    &::after {\n      content: '';\n      display: table;\n      clear: both;\n    }\n  "};t.fontSize=function(e,t){switch(e){case-3:return"\n        font-size: 0.8125rem;\n        line-height: 1.55rem;\n      ";case-2:return"\n        font-size: 0.875rem;\n        line-height: 1.55rem;\n      ";case-1:return"\n        font-size: 0.9375rem;\n        line-height: 1.55rem;\n      ";case 0:return"\n        font-size: 1rem;\n        line-height: 1.55rem;\n      ";case 1:return"\n        font-size: 1.2019rem;\n        line-height: 1.55rem;\n      ";case 2:return"\n        font-size: 1.414rem;\n        line-height: 1.55rem;\n      ";case 3:return"\n        font-size: 1.69949rem;\n        line-height: 2.325rem;\n      ";case 4:return"\n        font-size: 1.9994rem;\n        line-height: 2.325rem;\n      ";case 5:return"\n        font-size: 2.40307rem;\n        line-height: 3.1rem;\n      ";case 6:return"\n        font-size: 2.82715rem;\n        line-height: 3.1rem;\n      ";case 7:return"\n        font-size: 3.39795rem;\n        line-height: 3.1rem;\n      ";case 8:return"\n        font-size: 3.99758rem;\n        line-height: 3.875rem;\n      ";default:return"\n        font-size: 1rem;\n        line-height: 1.55rem;\n      "}};t.subNavUnderline=function(e){return"\n    background-image: linear-gradient(to top, transparent 94%, ".concat(e.theme.palette.white," 96%, ").concat(e.theme.palette.white," 100%);\n  ")};t.backgroundGradient=function(e,t,n,r){return t&&n?r?"\n        background: linear-gradient(to right, ".concat((0,i.transparentize)(.3,t)," 0%, ").concat((0,i.transparentize)(.3,n)," 100%), url(").concat(e,") no-repeat center center, linear-gradient(to right, ").concat(t," 0%, ").concat(n," 100%);\n        background-size: cover;\n      "):"\n        background: url(".concat(e,") no-repeat center center, linear-gradient(to right, ").concat(t," 0%, ").concat(n," 100%);\n        background-size: cover;\n      "):"\n      background: url(".concat(e,") no-repeat top center;\n      background-size: cover;\n    ")};t.transition=function(e){return e?"\n      ".concat(a.CalciteTheme.transitionDuration," ").concat(e," ").concat(a.CalciteTheme.easingFunc,"\n    "):"\n    ".concat(a.CalciteTheme.transitionDuration," ").concat(a.CalciteTheme.easingFunc,"\n  ")};t.getChildType=function(e){return e.type&&e.type.target&&e.type.target.displayName||e.type&&e.type.displayName};t.getAccessibleOnClickHandlers=function(e){return e?{onClick:e,onKeyPress:e&&function(t){"Enter"!==t.key&&"Space"!==t.key||e()}}:void 0};t.rtlPlacement=function(e){if(e&&document&&"rtl"===document.documentElement.dir){var t={end:"start",start:"end",left:"right",right:"left"};e=e.replace(/start|end|right|left/g,(function(e){return t[e]}))}return e};t.subNavLinkActive=function(e){return"\n    background-color: rgba(0,0,0,.25);\n    color: ".concat(e.theme.palette.white,";\n    text-decoration: none;\n    border-bottom-color: rgba(0, 0, 0, 0.4);\n  ")};t.useContextState=function(e){var t=o((0,r.useState)(e),2),n=t[0],i=t[1];return(0,r.useEffect)((function(){i(e)}),Object.values(e)),n}},function(e,t,n){"use strict";var r=n(2),i=n(262),a=n(37),o=n(5),s=n(6),c=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,o,s){var c;return Object(r.a)(this,n),c=t.call(this,e,o,s),Object(a.a)(c)instanceof n?Object(i.a)(c):Object(i.a)(c,new n(e,o,s))}return n}(n(522).a);c.prototype.type="warning",t.a=c},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(35);function i(e){return function(t){t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);var n=t._delegatedEventNames,i=Array.isArray(e)?e:function(e){return e.split(",").map((function(e){return e.trim()}))}(e);n.push.apply(n,Object(r.a)(i))}}},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(4)),u=(n(13),n(17),n(1)),d=n(8),f=(n(12),n(19),n(20),n(28)),p=n(127),h=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).color=null,e}return Object(a.a)(n,[{key:"clone",value:function(){return new r({color:Object(l.k)(this.color)?this.color.clone():null})}}]),n}(f.a);Object(c.a)([Object(u.b)(p.a)],h.prototype,"color",void 0);var b=h=r=Object(c.a)([Object(d.a)("esri.symbols.support.Symbol3DMaterial")],h);t.a=b},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return o}));var r=n(90);function i(e,t){var n="?"===e[e.length-1]?e.slice(0,-1):e;if(null!=t.getItemAt||Array.isArray(t)){var i=parseInt(n,10);if(!isNaN(i))return Array.isArray(t)?t[i]:t.getItemAt(i)}var a=Object(r.a)(t);return Object(r.b)(a,n)?a.get(n):t[n]}function a(e,t,n){if(null==e)return e;var r=i(t[n],e);return!r&&n<t.length-1?void 0:n===t.length-1?r:a(r,t,n+1)}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return"string"==typeof t&&-1===t.indexOf(".")?i(t,e):a(e,Object(r.f)(t),n)}function s(e,t){return o(e,t)}function c(e,t){return void 0!==o(t,e)}},function(e,t,n){"use strict";function r(e){return"string"==typeof e?document.getElementById(e):e}function i(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function a(e,t){var n=t.parentNode;n&&n.insertBefore(e,t)}function o(e,t){for(;;){var n=e.firstChild;if(!n)break;t.appendChild(n)}}function s(e){e.parentNode&&e.parentNode.removeChild(e)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return o}));!function(){if("function"==typeof Element.prototype.closest)return function(e,t){return e.closest(t)};var e=Element.prototype.matches||Element.prototype.msMatchesSelector}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return E})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return _}));var r,i=n(14),a=n(56),o="http://www.w3.org/",s="".concat(o,"2000/svg"),c="".concat(o,"1999/xlink"),l=[],u=function(e,t){var n={};return Object.keys(e).forEach((function(t){n[t]=e[t]})),t&&Object.keys(t).forEach((function(e){n[e]=t[e]})),n},d=function(e,t){return e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties)},f=function(e){if("string"!=typeof e)throw new Error("Style values must be strings")},p=function(e,t,n){if(""!==t.vnodeSelector)for(var r=n;r<e.length;r++)if(d(e[r],t))return r;return-1},h=function(e,t,n,r){var i=e[t];if(""!==i.vnodeSelector){var a=i.properties;if(!(a?void 0===a.key?a.bind:a.key:void 0))for(var o=0;o<e.length;o++)if(o!==t){var s=e[o];if(d(s,i))throw new Error("".concat(n.vnodeSelector," had a ").concat(i.vnodeSelector," child ").concat("added"===r?r:"removed",", but there is now more than one. You must add unique key properties to make them distinguishable."))}}},b=function(e){if(e.properties){var t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},v=[],y=!1,m=function e(t){(t.children||[]).forEach(e),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},g=function(){y=!1,v.forEach(m),v.length=0},O=function(e){v.push(e),y||(y=!0,"undefined"!=typeof window&&"requestIdleCallback"in window?window.requestIdleCallback(g,{timeout:16}):setTimeout(g,16))},j=function(e){var t=e.domNode;if(e.properties){var n=e.properties.exitAnimation;if(n){t.style.pointerEvents="none";return void n(t,(function(){t.parentNode&&(t.parentNode.removeChild(t),O(e))}),e.properties)}}t.parentNode&&(t.parentNode.removeChild(t),O(e))},w=function(e,t,n){if(t)for(var r=n.eventHandlerInterceptor,i=Object.keys(t),o=i.length,l=function(o){var l=i[o],u=t[l];if("className"===l)throw new Error('Property "className" is not supported, use "class".');if("class"===l)x(e,u,!0);else if("classes"===l)for(var d=Object.keys(u),p=d.length,h=0;h<p;h++){var b=d[h];u[b]&&e.classList.add(b)}else if("styles"===l)for(var v=Object.keys(u),y=v.length,m=0;m<y;m++){var g=v[m],O=u[g];O&&(f(O),n.styleApplyer(e,g,O))}else if("key"!==l&&null!=u){var j=typeof u;"function"===j?(0===l.lastIndexOf("on",0)&&(r&&(u=r(l,u,e,t)),"oninput"===l&&function(){var e=u;u=function(t){e.apply(this,[t]),t.target["oninput-value"]=t.target.value}}()),e[l]=u):n.namespace===s?"href"===l?e.setAttributeNS(c,l,u):e.setAttribute(l,u):"string"===j&&"value"!==l?"innerHTML"===l?e[l]=a.h.sanitize(u):e.setAttribute(l,u):e[l]=u}},u=0;u<o;u++)l(u)},_=function(e,t,n){(function(e,t,n){if(t){var r,a=Object(i.a)(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;k(o,e,void 0,n)}}catch(s){a.e(s)}finally{a.f()}}})(e,t.children,n),t.text&&(e.textContent=t.text),w(e,t.properties,n),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,n,t.vnodeSelector,t.properties,t.children])},k=function(e,t,n,r){var i,a=0,o=e.vnodeSelector,c=t.ownerDocument;if(""===o)i=e.domNode=c.createTextNode(e.text),void 0!==n?t.insertBefore(i,n):t.appendChild(i);else{for(var l=0;l<=o.length;++l){var d=o.charAt(l);if(l===o.length||"."===d||"#"===d){var f=o.charAt(a-1),p=o.slice(a,l);"."===f?i.classList.add(p):"#"===f?i.id=p:("svg"===p&&(r=u(r,{namespace:s})),void 0!==r.namespace?i=e.domNode=c.createElementNS(r.namespace,p):(i=e.domNode=e.domNode||c.createElement(p),"input"===p&&e.properties&&void 0!==e.properties.type&&i.setAttribute("type",e.properties.type)),void 0!==n?t.insertBefore(i,n):i.parentNode!==t&&t.appendChild(i)),a=l+1}}_(i,e,r)}},x=function(e,t,n){t&&t.split(" ").forEach((function(t){t&&e.classList.toggle(t,n)}))},S=function(e,t,n,r){if(n){for(var i=!1,o=Object.keys(n),l=o.length,u=0;u<l;u++){var d=o[u],p=n[d],h=t[d];if("class"===d)h!==p&&(x(e,h,!1),x(e,p,!0));else if("classes"===d)for(var b=e.classList,v=Object.keys(p),y=v.length,m=0;m<y;m++){var g=v[m],O=!!p[g];O!==!!h[g]&&(i=!0,O?b.add(g):b.remove(g))}else if("styles"===d)for(var j=Object.keys(p),w=j.length,_=0;_<w;_++){var k=j[_],S=p[k];S!==h[k]&&(i=!0,S?(f(S),r.styleApplyer(e,k,S)):r.styleApplyer(e,k,""))}else if(p||"string"!=typeof h||(p=""),"value"===d){var T=e[d];T!==p&&(e["oninput-value"]?T===e["oninput-value"]:p!==h)&&(e[d]=p,e["oninput-value"]=void 0),p!==h&&(i=!0)}else if(p!==h){var E=typeof p;"function"===E&&r.eventHandlerInterceptor||(r.namespace===s?"href"===d?e.setAttributeNS(c,d,p):e.setAttribute(d,p):"string"===E?"innerHTML"===d?e[d]=a.h.sanitize(p):"role"===d&&""===p?e.removeAttribute(d):e.setAttribute(d,p):e[d]!==p&&(e[d]=p),i=!0)}}return i}},T=function(e,t,n,i,a){if(n===i)return!1;i=i||l;for(var o,s=(n=n||l).length,c=i.length,u=0,f=0,v=!1;f<c;){var y=u<s?n[u]:void 0,m=i[f];if(void 0!==y&&d(y,m))v=r(y,m,a)||v,u++;else{var g=p(n,m,u+1);if(g>=0){for(o=u;o<g;o++)j(n[o]),h(n,o,e,"removed");v=r(n[g],m,a)||v,u=g+1}else k(m,t,u<s?n[u].domNode:void 0,a),b(m),h(i,f,e,"added")}f++}if(s>u)for(o=u;o<s;o++)j(n[o]),h(n,o,e,"removed");return v};r=function(e,t,n){var r=e.domNode,i=!1;if(e===t)return!1;var a=!1;if(""===t.vnodeSelector){if(t.text!==e.text){var o=r.ownerDocument.createTextNode(t.text);return r.parentNode.replaceChild(o,r),t.domNode=o,i=!0}t.domNode=r}else 0===t.vnodeSelector.lastIndexOf("svg",0)&&(n=u(n,{namespace:s})),e.text!==t.text&&(a=!0,void 0===t.text?r.removeChild(r.firstChild):r.textContent=t.text),t.domNode=r,a=T(t,r,e.children,t.children,n)||a,a=S(r,e.properties,t.properties,n)||a,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[r,n,t.vnodeSelector,t.properties,t.children]);return a&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(r,t.properties,e.properties),i};var E=function(e,t){return{getLastRender:function(){return e},update:function(n){if(e.vnodeSelector!==n.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");var i=e;e=n,r(i,n,t)},domNode:e.domNode}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return o})),n.d(t,"h",(function(){return a}));var r={func:513},i={func:519},a={mask:255},o={mask:0},s={function:{func:519,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:0}},c={function:{func:519,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7681}},l={function:{func:514,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7680}},u={function:{func:517,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7680}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n(40);function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.a;return t||(t=new n),t===e||(t.removeAll(),o(e)?t.addMany(e):e&&t.add(e)),t}function a(e){return e}function o(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return p})),n.d(t,"g",(function(){return y})),n.d(t,"h",(function(){return m})),n.d(t,"i",(function(){return b})),n.d(t,"j",(function(){return g}));var r=n(31),i=n(4),a=n(12),o=n(128),s=["MapServer","ImageServer","FeatureServer","SceneServer","StreamServer","VectorTileServer"],c=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(".concat(s.join("|"),"))(?:\\/(?:layers\\/)?(\\d+))?"),"i"),l=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(".concat(s.join("|"),"))(?:\\/(?:layers\\/)?(\\d+))?"),"i"),u=/(.*)\/(\d+)\/?$/i;function d(e){return!!c.test(e)}function f(e){var t=Object(a.J)(e),n=t.path.match(c)||t.path.match(l);if(!n)return null;var i=Object(r.a)(n,5),o=i[1],s=i[2],u=i[3],d=i[4],f=s.indexOf("/");return{title:h(-1!==f?s.slice(f+1):s),serverType:u,sublayer:null!=d&&""!==d?parseInt(d,10):null,url:{path:o}}}function p(e){var t=Object(a.J)(e).path.match(u);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function h(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function b(e,t){var n=[];if(e){var r=f(e);Object(i.k)(r)&&r.title&&n.push(r.title)}if(t){var a=h(t);n.push(a)}if(2===n.length){if(-1!==n[0].toLowerCase().indexOf(n[1].toLowerCase()))return n[0];if(-1!==n[1].toLowerCase().indexOf(n[0].toLowerCase()))return n[1]}return n.join(" - ")}function v(e){if(!e)return!1;var t=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),n=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return t&&n}function y(e,t){return e?Object(a.H)(Object(a.G)(e,t)):e}function m(e){var t=e.url;if(!t)return{url:t};t=Object(a.G)(t,e.logger);var n,r=Object(a.J)(t),o=f(r.path);if(Object(i.k)(o))null!=o.sublayer&&null==e.layer.layerId&&(n=o.sublayer),t=o.url.path;else if(e.nonStandardUrlAllowed){var s=p(r.path);Object(i.k)(s)&&(t=s.serviceUrl,n=s.sublayerId)}return{url:Object(a.H)(t),layerId:n}}function g(e,t,n,r,i){Object(o.f)(t,r,"url",i),r.url&&null!=e.layerId&&(r.url=Object(a.y)(r.url,n,e.layerId.toString()))}function O(e){if(!e)return!1;var t=e.toLowerCase(),n=-1!==t.indexOf("/services/"),r=-1!==t.indexOf("/mapserver/wmsserver"),i=-1!==t.indexOf("/imageserver/wmsserver"),a=-1!==t.indexOf("/wmsserver");return n&&(r||i||a)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l}));n(14);var r=n(2),i=(n(16),n(107),n(4),n(44),n(219),n(240),n(114)),a=(n(266),n(752),n(175)),o=(n(430),n(407),function e(t,n,i){Object(r.a)(this,e),this.uid=t,this.geometry=n,this.attributes=i,this.visible=!0,this.objectId=null,this.centroid=null});var s=function e(){Object(r.a)(this,e),this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null};function c(e){return"point"===e.type}function l(e,t,n,r){return{x:e,y:t,z:n,hasZ:null!=n,hasM:!1,spatialReference:r,type:"point"}}Object(a.d)(),Object(i.i)()},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return d}));var r=n(2),i=n(22),a=n(4),o=n(90),s=function e(t){Object(r.a)(this,e),this.autoDestroy=!1,this.properties=t};function c(e){var t=e.constructor.__accessorMetadata__,n=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!n){var r=Object.create(t.properties),o=t.autoDestroy;for(var c in r)r[c]=Object(i.a)(r[c]);(t=new s(r)).autoDestroy=o,Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t=new s({}),Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return Object(a.d)(e.constructor.__accessorMetadata__)}function l(e){return c(e).properties}function u(e,t){var n=l(e),r=n[t];return r||(r=n[t]={}),r}function d(e,t){return Object(o.c)(e,t,p)}var f=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function p(e){return f.test(e)?"replace":"merge"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(2),i=n(3),a=n(4),o=n(312),s=function(){function e(t){var n=this;Object(r.a)(this,e),this.allocator=t,this.items=[],this.itemsPtr=0,this.tickHandle=o.a.before((function(){return n.reset()})),this.grow()}return Object(i.a)(e,[{key:"destroy",value:function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=Object(a.o)(this.tickHandle)),this.items=Object(a.o)(this.items)}},{key:"get",value:function(){return 0===this.itemsPtr&&Object(o.a)((function(){})),this.itemsPtr===this.items.length&&this.grow(),this.items[this.itemsPtr++]}},{key:"reset",value:function(){var e=Math.min(3*Math.max(8,this.itemsPtr),this.itemsPtr+3*c);this.items.length=Math.min(e,this.items.length),this.itemsPtr=0}},{key:"grow",value:function(){for(var e=0;e<Math.max(8,Math.min(this.items.length,c));e++)this.items.push(this.allocator())}}]),e}(),c=1024},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return f}));var r=n(45),i=n(27),a=n(11),o=n(188),s=n(55);function c(e){return e?{origin:Object(i.d)(e.origin),vector:Object(i.d)(e.vector)}:{origin:Object(i.e)(),vector:Object(i.e)()}}function l(e,t){var n=b.get();return n.origin=e,n.vector=t,n}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c();return Object(a.j)(n.origin,e),Object(a.j)(n.vector,t),n}function d(e,t){var n=Object(a.i)(s.d.get(),t,e.origin),i=Object(a.g)(e.vector,n),o=Object(a.g)(e.vector,e.vector),c=Object(r.d)(i/o,0,1),l=Object(a.i)(s.d.get(),Object(a.d)(s.d.get(),e.vector,c),n);return Object(a.g)(l,l)}function f(e,t,n,i,o){var c=e.vector,l=e.origin,u=Object(a.i)(s.d.get(),t,l),d=Object(a.g)(c,u)/Object(a.r)(c);return Object(a.d)(o,c,Object(r.d)(d,n,i)),Object(a.e)(o,o,e.origin)}function p(e,t,n,i){var o=1e-6,c=e.origin,l=Object(a.e)(s.d.get(),c,e.vector),u=t.origin,d=Object(a.e)(s.d.get(),u,t.vector),f=s.d.get(),p=s.d.get();if(f[0]=c[0]-u[0],f[1]=c[1]-u[1],f[2]=c[2]-u[2],p[0]=d[0]-u[0],p[1]=d[1]-u[1],p[2]=d[2]-u[2],Math.abs(p[0])<o&&Math.abs(p[1])<o&&Math.abs(p[2])<o)return!1;var h=s.d.get();if(h[0]=l[0]-c[0],h[1]=l[1]-c[1],h[2]=l[2]-c[2],Math.abs(h[0])<o&&Math.abs(h[1])<o&&Math.abs(h[2])<o)return!1;var b=f[0]*p[0]+f[1]*p[1]+f[2]*p[2],v=p[0]*h[0]+p[1]*h[1]+p[2]*h[2],y=f[0]*h[0]+f[1]*h[1]+f[2]*h[2],m=p[0]*p[0]+p[1]*p[1]+p[2]*p[2],g=(h[0]*h[0]+h[1]*h[1]+h[2]*h[2])*m-v*v;if(Math.abs(g)<o)return!1;var O=(b*v-y*m)/g,j=(b+v*O)/m;n&&(O=Object(r.d)(O,0,1),j=Object(r.d)(j,0,1));var w=s.d.get(),_=s.d.get();return w[0]=c[0]+O*h[0],w[1]=c[1]+O*h[1],w[2]=c[2]+O*h[2],_[0]=u[0]+j*p[0],_[1]=u[1]+j*p[1],_[2]=u[2]+j*p[2],i.tA=O,i.tB=j,i.pA=w,i.pB=_,i.distance2=Object(a.k)(w,_),!0}var h={tA:0,tB:0,pA:Object(i.e)(),pB:Object(i.e)(),distance2:0},b=new o.a((function(){return{origin:null,vector:null}})),v=Object.freeze({__proto__:null,create:c,wrap:l,copy:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c();return u(e.origin,e.vector,t)},fromValues:u,fromPoints:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c();return Object(a.j)(n.origin,e),Object(a.i)(n.vector,t,e),n},distance2:d,distance:function(e,t){return Math.sqrt(d(e,t))},projectPoint:function(e,t,n){return f(e,t,0,1,n)},pointAt:function(e,t,n){return Object(a.e)(n,e.origin,Object(a.d)(n,e.vector,t))},projectPointClamp:f,closestRayDistance2:function(e,t){if(p(e,l(t.origin,t.direction),!1,h)){var n=h.tA,r=h.pB,i=h.distance2;if(n>=0&&n<=1)return i;if(n<0)return Object(a.k)(e.origin,r);if(n>1)return Object(a.k)(Object(a.e)(s.d.get(),e.origin,e.vector),r)}return null},closestLineSegmentPoint:function(e,t,n){return!!p(e,t,!0,h)&&(Object(a.j)(n,h.pA),!0)},closestLineSegmentDistance2:function(e,t){return p(e,t,!0,h)?h.distance2:null}})},function(e,t,n){"use strict";var r=n(2),i=n(3),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(r.a)(this,e),this.lengths=null!=t?t:[],this.coords=null!=n?n:[],this.hasIndeterminateRingOrder=i}return Object(i.a)(e,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"forEachVertex",value:function(e){var t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(var n=0;n<this.lengths.length;n++){for(var r=this.lengths[n],i=0;i<r;i++)e(this.coords[2*(i+t)],this.coords[2*(i+t)+1]);t+=r}}},{key:"clone",value:function(){return new e(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}]),e}();t.a=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(2),i=n(37),a=n(5),o=n(6),s=n(0),c=n(8),l=0,u=function(e){var t=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o)),Object.defineProperty(Object(i.a)(e),"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+l++}),e}return n}(e);return t=Object(s.a)([Object(c.a)("esri.core.Identifiable")],t)},d=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return n}(u(function(){return function e(){Object(r.a)(this,e)}}()));d=Object(s.a)([Object(c.a)("esri.core.Identifiable")],d)},function(e,t,n){"use strict";var r,i=n(7),a=n.n(i),o=n(15),s=n(2),c=n(3),l=n(53),u=n(50),d=n(5),f=n(6),p=n(0),h=(n(16),n(13)),b=(n(17),n(1)),v=n(49),y=n(8),m=(n(12),n(19),n(20),n(128)),g=n(24),O=n(125),j=n(109),w=n(363),_=h.a.getLogger("esri.symbols.WebStyleSymbol"),k=r=function(e){Object(d.a)(i,e);var t=Object(f.a)(i);function i(e){var n;return Object(s.a)(this,i),(n=t.call(this,e)).styleName=null,n.portal=null,n.styleUrl=null,n.thumbnail=null,n.name=null,n.type="web-style",n}return Object(c.a)(i,[{key:"read",value:function(e,t){this.portal=t?t.portal:void 0,Object(l.a)(Object(u.a)(i.prototype),"read",this).call(this,e,t)}},{key:"clone",value:function(){return new r({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}},{key:"fetchSymbol",value:function(e){return this._fetchSymbol("webRef",e)}},{key:"fetchCIMSymbol",value:function(e){return this._fetchSymbol("cimRef",e)}},{key:"_fetchSymbol",value:function(){var e=Object(o.a)(a.a.mark((function e(t,r){var i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.bind(null,451));case 2:return i=e.sent,Object(g.u)(r),o=i.resolveWebStyleSymbol(this,{portal:this.portal},t,r),e.abrupt("return",(o.catch((function(e){_.error("#fetchSymbol()","Failed to create symbol from style",e)})),o));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),i}(O.a);Object(p.a)([Object(b.b)({json:{write:!1}})],k.prototype,"color",void 0),Object(p.a)([Object(b.b)({type:String,json:{write:!0}})],k.prototype,"styleName",void 0),Object(p.a)([Object(b.b)({type:j.a,json:{write:!1}})],k.prototype,"portal",void 0),Object(p.a)([Object(b.b)({type:String,json:{read:m.d,write:m.f}})],k.prototype,"styleUrl",void 0),Object(p.a)([Object(b.b)({type:w.a,json:{read:!1}})],k.prototype,"thumbnail",void 0),Object(p.a)([Object(b.b)({type:String,json:{write:!0}})],k.prototype,"name",void 0),Object(p.a)([Object(v.a)({styleSymbolReference:"web-style"},{readOnly:!0})],k.prototype,"type",void 0);var x=k=r=Object(p.a)([Object(y.a)("esri.symbols.WebStyleSymbol")],k);t.a=x},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"ServerStyleSheet",(function(){return Ve})),n.d(t,"StyleSheetConsumer",(function(){return ie})),n.d(t,"StyleSheetContext",(function(){return re})),n.d(t,"StyleSheetManager",(function(){return ue})),n.d(t,"ThemeConsumer",(function(){return Ie})),n.d(t,"ThemeContext",(function(){return Pe})),n.d(t,"ThemeProvider",(function(){return Me})),n.d(t,"__PRIVATE__",(function(){return Be})),n.d(t,"createGlobalStyle",(function(){return De})),n.d(t,"css",(function(){return ge})),n.d(t,"isStyledComponent",(function(){return O})),n.d(t,"keyframes",(function(){return Ne})),n.d(t,"useTheme",(function(){return Ue})),n.d(t,"version",(function(){return w})),n.d(t,"withTheme",(function(){return ze}));var r=n(278),i=n(21),a=n.n(i),o=n(770),s=n.n(o),c=n(771),l=n(518),u=n(423),d=n(338),f=n.n(d);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var h=function(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n},b=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!Object(r.typeOf)(e)},v=Object.freeze([]),y=Object.freeze({});function m(e){return"function"==typeof e}function g(e){return e.displayName||e.name||"Component"}function O(e){return e&&"string"==typeof e.styledComponentId}var j="undefined"!=typeof e&&(Object({NODE_ENV:"production",PUBLIC_URL:"https://qp-gavel-mvp.azurewebsites.net",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"https://qp-gavel-svr-mvp.azurewebsites.net",REACT_APP_API_KEY:"995dba95-c33d-456b-a7ea-3fd512e60894",REACT_APP_API_PRIVATE_KEY:"'-----BEGIN RSA PRIVATE KEY-----\\n' +",REACT_APP_API_VERSION:"/api/v1",REACT_APP_DEFAULT_UNITS_OF_LENGTH:"meters",REACT_APP_MEASUREMENT_SYSTEM:"metric"}).REACT_APP_SC_ATTR||Object({NODE_ENV:"production",PUBLIC_URL:"https://qp-gavel-mvp.azurewebsites.net",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"https://qp-gavel-svr-mvp.azurewebsites.net",REACT_APP_API_KEY:"995dba95-c33d-456b-a7ea-3fd512e60894",REACT_APP_API_PRIVATE_KEY:"'-----BEGIN RSA PRIVATE KEY-----\\n' +",REACT_APP_API_VERSION:"/api/v1",REACT_APP_DEFAULT_UNITS_OF_LENGTH:"meters",REACT_APP_MEASUREMENT_SYSTEM:"metric"}).SC_ATTR)||"data-styled",w="5.3.0",_="undefined"!=typeof window&&"HTMLElement"in window,k=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof e&&void 0!==Object({NODE_ENV:"production",PUBLIC_URL:"https://qp-gavel-mvp.azurewebsites.net",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"https://qp-gavel-svr-mvp.azurewebsites.net",REACT_APP_API_KEY:"995dba95-c33d-456b-a7ea-3fd512e60894",REACT_APP_API_PRIVATE_KEY:"'-----BEGIN RSA PRIVATE KEY-----\\n' +",REACT_APP_API_VERSION:"/api/v1",REACT_APP_DEFAULT_UNITS_OF_LENGTH:"meters",REACT_APP_MEASUREMENT_SYSTEM:"metric"}).REACT_APP_SC_DISABLE_SPEEDY&&""!==Object({NODE_ENV:"production",PUBLIC_URL:"https://qp-gavel-mvp.azurewebsites.net",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"https://qp-gavel-svr-mvp.azurewebsites.net",REACT_APP_API_KEY:"995dba95-c33d-456b-a7ea-3fd512e60894",REACT_APP_API_PRIVATE_KEY:"'-----BEGIN RSA PRIVATE KEY-----\\n' +",REACT_APP_API_VERSION:"/api/v1",REACT_APP_DEFAULT_UNITS_OF_LENGTH:"meters",REACT_APP_MEASUREMENT_SYSTEM:"metric"}).REACT_APP_SC_DISABLE_SPEEDY?"false"!==Object({NODE_ENV:"production",PUBLIC_URL:"https://qp-gavel-mvp.azurewebsites.net",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"https://qp-gavel-svr-mvp.azurewebsites.net",REACT_APP_API_KEY:"995dba95-c33d-456b-a7ea-3fd512e60894",REACT_APP_API_PRIVATE_KEY:"'-----BEGIN RSA PRIVATE KEY-----\\n' +",REACT_APP_API_VERSION:"/api/v1",REACT_APP_DEFAULT_UNITS_OF_LENGTH:"meters",REACT_APP_MEASUREMENT_SYSTEM:"metric"}).REACT_APP_SC_DISABLE_SPEEDY&&Object({NODE_ENV:"production",PUBLIC_URL:"https://qp-gavel-mvp.azurewebsites.net",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"https://qp-gavel-svr-mvp.azurewebsites.net",REACT_APP_API_KEY:"995dba95-c33d-456b-a7ea-3fd512e60894",REACT_APP_API_PRIVATE_KEY:"'-----BEGIN RSA PRIVATE KEY-----\\n' +",REACT_APP_API_VERSION:"/api/v1",REACT_APP_DEFAULT_UNITS_OF_LENGTH:"meters",REACT_APP_MEASUREMENT_SYSTEM:"metric"}).REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof e&&void 0!==Object({NODE_ENV:"production",PUBLIC_URL:"https://qp-gavel-mvp.azurewebsites.net",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"https://qp-gavel-svr-mvp.azurewebsites.net",REACT_APP_API_KEY:"995dba95-c33d-456b-a7ea-3fd512e60894",REACT_APP_API_PRIVATE_KEY:"'-----BEGIN RSA PRIVATE KEY-----\\n' +",REACT_APP_API_VERSION:"/api/v1",REACT_APP_DEFAULT_UNITS_OF_LENGTH:"meters",REACT_APP_MEASUREMENT_SYSTEM:"metric"}).SC_DISABLE_SPEEDY&&""!==Object({NODE_ENV:"production",PUBLIC_URL:"https://qp-gavel-mvp.azurewebsites.net",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"https://qp-gavel-svr-mvp.azurewebsites.net",REACT_APP_API_KEY:"995dba95-c33d-456b-a7ea-3fd512e60894",REACT_APP_API_PRIVATE_KEY:"'-----BEGIN RSA PRIVATE KEY-----\\n' +",REACT_APP_API_VERSION:"/api/v1",REACT_APP_DEFAULT_UNITS_OF_LENGTH:"meters",REACT_APP_MEASUREMENT_SYSTEM:"metric"}).SC_DISABLE_SPEEDY&&("false"!==Object({NODE_ENV:"production",PUBLIC_URL:"https://qp-gavel-mvp.azurewebsites.net",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"https://qp-gavel-svr-mvp.azurewebsites.net",REACT_APP_API_KEY:"995dba95-c33d-456b-a7ea-3fd512e60894",REACT_APP_API_PRIVATE_KEY:"'-----BEGIN RSA PRIVATE KEY-----\\n' +",REACT_APP_API_VERSION:"/api/v1",REACT_APP_DEFAULT_UNITS_OF_LENGTH:"meters",REACT_APP_MEASUREMENT_SYSTEM:"metric"}).SC_DISABLE_SPEEDY&&Object({NODE_ENV:"production",PUBLIC_URL:"https://qp-gavel-mvp.azurewebsites.net",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"https://qp-gavel-svr-mvp.azurewebsites.net",REACT_APP_API_KEY:"995dba95-c33d-456b-a7ea-3fd512e60894",REACT_APP_API_PRIVATE_KEY:"'-----BEGIN RSA PRIVATE KEY-----\\n' +",REACT_APP_API_VERSION:"/api/v1",REACT_APP_DEFAULT_UNITS_OF_LENGTH:"meters",REACT_APP_MEASUREMENT_SYSTEM:"metric"}).SC_DISABLE_SPEEDY)),x={};function S(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var T=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)(i<<=1)<0&&S(16,""+e);this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var a=r;a<i;a++)this.groupSizes[a]=0}for(var o=this.indexOfGroup(e+1),s=0,c=t.length;s<c;s++)this.tag.insertRule(o,t[s])&&(this.groupSizes[e]++,o++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,a=r;a<i;a++)t+=this.tag.getRule(a)+"/*!sc*/\n";return t},e}(),E=new Map,C=new Map,P=1,I=function(e){if(E.has(e))return E.get(e);for(;C.has(P);)P++;var t=P++;return E.set(e,t),C.set(t,e),t},M=function(e){return C.get(e)},A=function(e,t){E.set(e,t),C.set(t,e)},R="style["+j+'][data-styled-version="5.3.0"]',L=new RegExp("^"+j+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),F=function(e,t,n){for(var r,i=n.split(","),a=0,o=i.length;a<o;a++)(r=i[a])&&e.registerName(t,r)},D=function(e,t){for(var n=t.innerHTML.split("/*!sc*/\n"),r=[],i=0,a=n.length;i<a;i++){var o=n[i].trim();if(o){var s=o.match(L);if(s){var c=0|parseInt(s[1],10),l=s[2];0!==c&&(A(l,c),F(e,l,s[3]),e.getTag().insertRules(c,r)),r.length=0}else r.push(o)}}},N=function(){return"undefined"!=typeof window&&void 0!==window.__webpack_nonce__?window.__webpack_nonce__:null},V=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(j))return r}}(n),a=void 0!==i?i.nextSibling:null;r.setAttribute(j,"active"),r.setAttribute("data-styled-version","5.3.0");var o=N();return o&&r.setAttribute("nonce",o),n.insertBefore(r,a),r},z=function(){function e(e){var t=this.element=V(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}S(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),U=function(){function e(e){var t=this.element=V(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),B=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),G=_,q={isServer:!_,useCSSOMInjection:!k},H=function(){function e(e,t,n){void 0===e&&(e=y),void 0===t&&(t={}),this.options=p({},q,{},e),this.gs=t,this.names=new Map(n),!this.options.isServer&&_&&G&&(G=!1,function(e){for(var t=document.querySelectorAll(R),n=0,r=t.length;n<r;n++){var i=t[n];i&&"active"!==i.getAttribute(j)&&(D(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this))}e.registerId=function(e){return I(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(p({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,i=t.target,e=n?new B(i):r?new z(i):new U(i),new T(e)));var e,t,n,r,i},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(I(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(I(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(I(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=0;i<n;i++){var a=M(i);if(void 0!==a){var o=e.names.get(a),s=t.getGroup(i);if(void 0!==o&&0!==s.length){var c=j+".g"+i+'[id="'+a+'"]',l="";void 0!==o&&o.forEach((function(e){e.length>0&&(l+=e+",")})),r+=""+s+c+'{content:"'+l+'"}/*!sc*/\n'}}}return r}(this)},e}(),W=/(a)(d)/gi,$=function(e){return String.fromCharCode(e+(e>25?39:97))};function J(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=$(t%52)+n;return($(t%52)+n).replace(W,"$1-$2")}var Y=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},K=function(e){return Y(5381,e)};function Z(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(m(n)&&!O(n))return!1}return!0}var X=K("5.3.0"),Q=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&Z(e),this.componentId=t,this.baseHash=Y(X,t),this.baseStyle=n,H.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,i=[];if(this.baseStyle&&i.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))i.push(this.staticRulesId);else{var a=me(this.rules,e,t,n).join(""),o=J(Y(this.baseHash,a.length)>>>0);if(!t.hasNameForId(r,o)){var s=n(a,"."+o,void 0,r);t.insertRules(r,o,s)}i.push(o),this.staticRulesId=o}else{for(var c=this.rules.length,l=Y(this.baseHash,n.hash),u="",d=0;d<c;d++){var f=this.rules[d];if("string"==typeof f)u+=f;else if(f){var p=me(f,e,t,n),h=Array.isArray(p)?p.join(""):p;l=Y(l,h+d),u+=h}}if(u){var b=J(l>>>0);if(!t.hasNameForId(r,b)){var v=n(u,"."+b,void 0,r);t.insertRules(r,b,v)}i.push(b)}}return i.join(" ")},e}(),ee=/^\s*\/\/.*$/gm,te=[":","[",".","#"];function ne(e){var t,n,r,i,a=void 0===e?y:e,o=a.options,s=void 0===o?y:o,l=a.plugins,u=void 0===l?v:l,d=new c.a(s),f=[],p=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,i,a,o,s,c,l,u,d){switch(n){case 1:if(0===u&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===l)return r+"/*|*/";break;case 3:switch(l){case 102:case 112:return e(i[0]+r),"";default:return r+(0===d?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}((function(e){f.push(e)})),h=function(e,r,a){return 0===r&&-1!==te.indexOf(a[n.length])||a.match(i)?e:"."+t};function b(e,a,o,s){void 0===s&&(s="&");var c=e.replace(ee,""),l=a&&o?o+" "+a+" { "+c+" }":c;return t=s,n=a,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),d(o||!a?"":a,l)}return d.use([].concat(u,[function(e,t,i){2===e&&i.length&&i[0].lastIndexOf(n)>0&&(i[0]=i[0].replace(r,h))},p,function(e){if(-2===e){var t=f;return f=[],t}}])),b.hash=u.length?u.reduce((function(e,t){return t.name||S(15),Y(e,t.name)}),5381).toString():"",b}var re=a.a.createContext(),ie=re.Consumer,ae=a.a.createContext(),oe=(ae.Consumer,new H),se=ne();function ce(){return Object(i.useContext)(re)||oe}function le(){return Object(i.useContext)(ae)||se}function ue(e){var t=Object(i.useState)(e.stylisPlugins),n=t[0],r=t[1],o=ce(),c=Object(i.useMemo)((function(){var t=o;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),l=Object(i.useMemo)((function(){return ne({options:{prefix:!e.disableVendorPrefixes},plugins:n})}),[e.disableVendorPrefixes,n]);return Object(i.useEffect)((function(){s()(n,e.stylisPlugins)||r(e.stylisPlugins)}),[e.stylisPlugins]),a.a.createElement(re.Provider,{value:c},a.a.createElement(ae.Provider,{value:l},e.children))}var de=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=se);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return S(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=se),this.name+e.hash},e}(),fe=/([A-Z])/,pe=/([A-Z])/g,he=/^ms-/,be=function(e){return"-"+e.toLowerCase()};function ve(e){return fe.test(e)?e.replace(pe,be).replace(he,"-ms-"):e}var ye=function(e){return null==e||!1===e||""===e};function me(e,t,n,r){if(Array.isArray(e)){for(var i,a=[],o=0,s=e.length;o<s;o+=1)""!==(i=me(e[o],t,n,r))&&(Array.isArray(i)?a.push.apply(a,i):a.push(i));return a}return ye(e)?"":O(e)?"."+e.styledComponentId:m(e)?"function"!=typeof(c=e)||c.prototype&&c.prototype.isReactComponent||!t?e:me(e(t),t,n,r):e instanceof de?n?(e.inject(n,r),e.getName(r)):e:b(e)?function e(t,n){var r,i,a=[];for(var o in t)t.hasOwnProperty(o)&&!ye(t[o])&&(b(t[o])?a.push.apply(a,e(t[o],o)):m(t[o])?a.push(ve(o)+":",t[o],";"):a.push(ve(o)+": "+(r=o,(null==(i=t[o])||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||r in l.a?String(i).trim():i+"px")+";")));return n?[n+" {"].concat(a,["}"]):a}(e):e.toString();var c}function ge(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return m(e)||b(e)?me(h(v,[e].concat(n))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:me(h(e,n))}new Set;var Oe=function(e,t,n){return void 0===n&&(n=y),e.theme!==n.theme&&e.theme||t||n.theme},je=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,we=/(^-|-$)/g;function _e(e){return e.replace(je,"-").replace(we,"")}var ke=function(e){return J(K(e)>>>0)};function xe(e){return"string"==typeof e&&!0}var Se=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},Te=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function Ee(e,t,n){var r=e[n];Se(t)&&Se(r)?Ce(r,t):e[n]=t}function Ce(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];if(Se(o))for(var s in o)Te(s)&&Ee(e,o[s],s)}return e}var Pe=a.a.createContext(),Ie=Pe.Consumer;function Me(e){var t=Object(i.useContext)(Pe),n=Object(i.useMemo)((function(){return function(e,t){return e?m(e)?e(t):Array.isArray(e)||"object"!=typeof e?S(8):t?p({},t,{},e):e:S(14)}(e.theme,t)}),[e.theme,t]);return e.children?a.a.createElement(Pe.Provider,{value:n},e.children):null}var Ae={};function Re(e,t,n){var r=O(e),o=!xe(e),s=t.attrs,c=void 0===s?v:s,l=t.componentId,d=void 0===l?function(e,t){var n="string"!=typeof e?"sc":_e(e);Ae[n]=(Ae[n]||0)+1;var r=n+"-"+ke("5.3.0"+n+Ae[n]);return t?t+"-"+r:r}(t.displayName,t.parentComponentId):l,h=t.displayName,b=void 0===h?function(e){return xe(e)?"styled."+e:"Styled("+g(e)+")"}(e):h,j=t.displayName&&t.componentId?_e(t.displayName)+"-"+t.componentId:t.componentId||d,w=r&&e.attrs?Array.prototype.concat(e.attrs,c).filter(Boolean):c,_=t.shouldForwardProp;r&&e.shouldForwardProp&&(_=t.shouldForwardProp?function(n,r,i){return e.shouldForwardProp(n,r,i)&&t.shouldForwardProp(n,r,i)}:e.shouldForwardProp);var k,x=new Q(n,j,r?e.componentStyle:void 0),S=x.isStatic&&0===c.length,T=function(e,t){return function(e,t,n,r){var a=e.attrs,o=e.componentStyle,s=e.defaultProps,c=e.foldedComponentIds,l=e.shouldForwardProp,d=e.styledComponentId,f=e.target,h=function(e,t,n){void 0===e&&(e=y);var r=p({},t,{theme:e}),i={};return n.forEach((function(e){var t,n,a,o=e;for(t in m(o)&&(o=o(r)),o)r[t]=i[t]="className"===t?(n=i[t],a=o[t],n&&a?n+" "+a:n||a):o[t]})),[r,i]}(Oe(t,Object(i.useContext)(Pe),s)||y,t,a),b=h[0],v=h[1],g=function(e,t,n,r){var i=ce(),a=le();return t?e.generateAndInjectStyles(y,i,a):e.generateAndInjectStyles(n,i,a)}(o,r,b),O=n,j=v.$as||t.$as||v.as||t.as||f,w=xe(j),_=v!==t?p({},t,{},v):t,k={};for(var x in _)"$"!==x[0]&&"as"!==x&&("forwardedAs"===x?k.as=_[x]:(l?l(x,u.default,j):!w||Object(u.default)(x))&&(k[x]=_[x]));return t.style&&v.style!==t.style&&(k.style=p({},t.style,{},v.style)),k.className=Array.prototype.concat(c,d,g!==d?g:null,t.className,v.className).filter(Boolean).join(" "),k.ref=O,Object(i.createElement)(j,k)}(k,e,t,S)};return T.displayName=b,(k=a.a.forwardRef(T)).attrs=w,k.componentStyle=x,k.displayName=b,k.shouldForwardProp=_,k.foldedComponentIds=r?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):v,k.styledComponentId=j,k.target=r?e.target:e,k.withComponent=function(e){var r=t.componentId,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["componentId"]),a=r&&r+"-"+(xe(e)?e:_e(g(e)));return Re(e,p({},i,{attrs:w,componentId:a}),n)},Object.defineProperty(k,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=r?Ce({},e.defaultProps,t):t}}),k.toString=function(){return"."+k.styledComponentId},o&&f()(k,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),k}var Le=function(e){return function e(t,n,i){if(void 0===i&&(i=y),!Object(r.isValidElementType)(n))return S(1,String(n));var a=function(){return t(n,i,ge.apply(void 0,arguments))};return a.withConfig=function(r){return e(t,n,p({},i,{},r))},a.attrs=function(r){return e(t,n,p({},i,{attrs:Array.prototype.concat(i.attrs,r).filter(Boolean)}))},a}(Re,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){Le[e]=Le(e)}));var Fe=function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=Z(e),H.registerId(this.componentId+1)}var t=e.prototype;return t.createStyles=function(e,t,n,r){var i=r(me(this.rules,t,n,r).join(""),""),a=this.componentId+e;n.insertRules(a,a,i)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&H.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)},e}();function De(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=ge.apply(void 0,[e].concat(n)),s="sc-global-"+ke(JSON.stringify(o)),c=new Fe(o,s);function l(e){var t=ce(),n=le(),r=Object(i.useContext)(Pe),a=Object(i.useRef)(t.allocateGSInstance(s)).current;return Object(i.useLayoutEffect)((function(){return u(a,e,t,r,n),function(){return c.removeStyles(a,t)}}),[a,e,t,r,n]),null}function u(e,t,n,r,i){if(c.isStatic)c.renderStyles(e,x,n,i);else{var a=p({},t,{theme:Oe(t,r,l.defaultProps)});c.renderStyles(e,a,n,i)}}return a.a.memo(l)}function Ne(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=ge.apply(void 0,[e].concat(n)).join(""),a=ke(i);return new de(a,i)}var Ve=function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString(),n=N();return"<style "+[n&&'nonce="'+n+'"',j+'="true"','data-styled-version="5.3.0"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?S(2):e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)return S(2);var n=((t={})[j]="",t["data-styled-version"]="5.3.0",t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),r=N();return r&&(n.nonce=r),[a.a.createElement("style",p({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new H({isServer:!0}),this.sealed=!1}var t=e.prototype;return t.collectStyles=function(e){return this.sealed?S(2):a.a.createElement(ue,{sheet:this.instance},e)},t.interleaveWithNodeStream=function(e){return S(3)},e}(),ze=function(e){var t=a.a.forwardRef((function(t,n){var r=Object(i.useContext)(Pe),o=e.defaultProps,s=Oe(t,r,o);return a.a.createElement(e,p({},t,{theme:s,ref:n}))}));return f()(t,e),t.displayName="WithTheme("+g(e)+")",t},Ue=function(){return Object(i.useContext)(Pe)},Be={StyleSheet:H,masterSheet:oe};t.default=Le}.call(this,n(382))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));n(16);function r(e){}function i(e){return function(){return e}}},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(5),o=n(6),s=n(0),c=(n(16),n(13)),l=n(1),u=n(58),d=n(41),f=n(177),p=n(8),h=n(42),b=n(12),v=(n(19),n(20),n(128)),y=n(40),m=n(125),g=n(146),O=n(357),j=n(286),w=n(202),_=n(184),k=n(109),x=n(248),S=n(287),T=n(358),E=n(222),C=n(359),P=n(370),I=n(363),M={icon:w.a,object:S.a,line:x.a,path:T.a,fill:j.a,extrude:O.a,text:E.a,water:C.a},A=y.a.ofType({base:g.a,key:"type",typeMap:M,errorContext:"symbol-layer"}),R=c.a.getLogger("esri.symbols.Symbol3D"),L=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;Object(r.a)(this,n),(i=t.call(this,e)).styleOrigin=null,i.thumbnail=null,i.type=null;var a=i.__accessor__&&i.__accessor__.metadatas&&i.__accessor__.metadatas.symbolLayers,o=a&&a.type||y.a;return i._set("symbolLayers",new o),i}return Object(i.a)(n,[{key:"color",get:function(){return null},set:function(e){R.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}},{key:"symbolLayers",set:function(e){Object(_.b)(e,this._get("symbolLayers"))}},{key:"readStyleOrigin",value:function(e,t,n){if(e.styleUrl&&e.name){var r=Object(v.a)(e.styleUrl,n);return new P.a({styleUrl:r,name:e.name})}if(e.styleName&&e.name)return new P.a({portal:n&&n.portal||k.a.getDefault(),styleName:e.styleName,name:e.name});n&&n.messages&&n.messages.push(new f.a("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:n,definition:e}))}},{key:"writeStyleOrigin",value:function(e,t,n,r){if(e.styleUrl&&e.name){var i=Object(v.e)(e.styleUrl,r);Object(b.s)(i)&&(i=Object(b.C)(i)),t.styleOrigin={styleUrl:i,name:e.name}}else e.styleName&&e.name&&(e.portal&&r&&r.portal&&!Object(b.r)(e.portal.restUrl,r.portal.restUrl)?r&&r.messages&&r.messages.push(new f.a("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):t.styleOrigin={styleName:e.styleName,name:e.name})}},{key:"normalizeCtorArgs",value:function(e){return e instanceof g.a||e&&M[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}}]),n}(m.a);Object(s.a)([Object(l.b)({json:{read:!1,write:!1}})],L.prototype,"color",null),Object(s.a)([Object(l.b)({type:A,nonNullable:!0,json:{write:!0}}),Object(u.a)(_.a)],L.prototype,"symbolLayers",null),Object(s.a)([Object(l.b)({type:P.a})],L.prototype,"styleOrigin",void 0),Object(s.a)([Object(d.a)("styleOrigin")],L.prototype,"readStyleOrigin",null),Object(s.a)([Object(h.a)("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],L.prototype,"writeStyleOrigin",null),Object(s.a)([Object(l.b)({type:I.a,json:{read:!1}})],L.prototype,"thumbnail",void 0),Object(s.a)([Object(l.b)({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],L.prototype,"type",void 0);var F=L=Object(s.a)([Object(p.a)("esri.symbols.Symbol3D")],L);t.a=F},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(2),i=n(3),a=n(5),o=n(6),s=(n(16),n(13)),c=n(70),l=n(284);s.a.getLogger("esri.views.interactive.snapping.hints.LineSnappingHint");var u=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e,i,a){var o,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],c=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return Object(r.a)(this,n),(o=t.call(this)).type=e,o.lineStart=i,o.lineEnd=a,o.fadeLeft=s,o.fadeRight=c,o}return Object(i.a)(n,[{key:"equals",value:function(e){return e instanceof n&&this.type===e.type&&Object(c.d)(this.lineStart,e.lineStart)&&Object(c.d)(this.lineEnd,e.lineEnd)&&this.fadeLeft===e.fadeLeft&&this.fadeRight===e.fadeRight}}]),n}(l.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s}));var r=n(16),i=new Set;function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n&&i.has(t)||(n&&i.add(t),e.warn("\ud83d\uded1 DEPRECATED - ".concat(t)))}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object(r.a)("esri-deprecation-warnings")){var i=n.moduleName;c(e,"Function: ".concat((i?i+"::":"")+t+"()"),n)}}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object(r.a)("esri-deprecation-warnings")){var i=n.moduleName;c(e,"Property: ".concat((i?i+"::":"")+t),n)}}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object(r.a)("esri-deprecation-warnings")){var i=n.replacement,o=n.version,s=n.see,c=n.warnOnce,l=t;i&&(l+="\n\t\ud83d\udee0\ufe0f Replacement: ".concat(i)),o&&(l+="\n\t\u2699\ufe0f Version: ".concat(o)),s&&(l+="\n\t\ud83d\udd17 See ".concat(s," for more details.")),a(e,l,c)}}},function(e,t,n){"use strict";function r(e){return"h"in e&&"s"in e&&"v"in e}function i(e){return"l"in e&&"a"in e&&"b"in e}function a(e){return"l"in e&&"c"in e&&"h"in e}function o(e){return"x"in e&&"y"in e&&"z"in e}n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return O})),n.d(t,"d",(function(){return j})),n.d(t,"e",(function(){return m}));var s=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],c=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function l(e,t){var n,r,i=[];if(e[0].length!==t.length)throw"dimensions do not match";var a=e.length,o=e[0].length,s=0;for(n=0;n<a;n++){for(s=0,r=0;r<o;r++)s+=e[n][r]*t[r];i.push(s)}return i}function u(e){var t=[e.r/255,e.g/255,e.b/255].map((function(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)})),n=l(s,t);return{x:100*n[0],y:100*n[1],z:100*n[2]}}function d(e){var t=l(c,[e.x/100,e.y/100,e.z/100]).map((function(e){var t=e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055;return Math.min(1,Math.max(t,0))}));return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function f(e){var t=[e.x/95.047,e.y/100,e.z/108.883].map((function(e){return e>Math.pow(6/29,3)?Math.pow(e,1/3):1/3*Math.pow(29/6,2)*e+4/29}));return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function p(e){var t=e.l,n=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map((function(e){return e>6/29?Math.pow(e,3):3*Math.pow(6/29,2)*(e-4/29)}));return{x:95.047*n[0],y:100*n[1],z:108.883*n[2]}}function h(e){return f(u(e))}function b(e){return d(p(e))}function v(e){return function(e){var t=e.l,n=e.a,r=e.b,i=Math.sqrt(n*n+r*r),a=Math.atan2(r,n);return{l:t,c:i,h:a=a>0?a:a+2*Math.PI}}(f(u(e)))}function y(e){return d(p(function(e){var t=e.l,n=e.c,r=e.h;return{l:t,a:n*Math.cos(r),b:n*Math.sin(r)}}(e)))}function m(e){return function(e){return"r"in e&&"g"in e&&"b"in e}(e)?e:a(e)?y(e):i(e)?b(e):o(e)?d(e):r(e)?function(e){var t,n=(e.h+360)%360/60,r=e.s/100,i=e.v/100*255,a=i*r,o=a*(1-Math.abs(n%2-1));switch(Math.floor(n)){case 0:t={r:a,g:o,b:0};break;case 1:t={r:o,g:a,b:0};break;case 2:t={r:0,g:a,b:o};break;case 3:t={r:0,g:o,b:a};break;case 4:t={r:o,g:0,b:a};break;case 5:case 6:t={r:a,g:0,b:o};break;default:t={r:0,g:0,b:0}}return t.r=Math.round(t.r+i-a),t.g=Math.round(t.g+i-a),t.b=Math.round(t.b+i-a),t}(e):e}function g(e){return r(e)?e:function(e){var t=e.r,n=e.g,r=e.b,i=Math.max(t,n,r),a=i-Math.min(t,n,r),o=i,s=0===a?0:i===t?(n-r)/a%6:i===n?(r-t)/a+2:(t-n)/a+4,c=0===a?0:a/o;return s<0&&(s+=6),{h:s*=60,s:c*=100,v:o*=100/255}}(m(e))}function O(e){return i(e)?e:h(m(e))}function j(e){return a(e)?e:v(m(e))}function w(e,t){var n=h(e);return n.l*=1-t,b(n)}},function(e,t,n){"use strict";var r,i=n(7),a=n.n(i),o=n(15),s=n(2),c=n(3),l=n(5),u=n(6),d=n(0),f=(n(16),n(22)),p=n(123),h=(n(13),n(17),n(1)),b=n(49),v=n(41),y=n(8),m=n(42),g=(n(12),n(19),n(20),n(54)),O=n(125),j=r=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).data=null,r.type="cim",r}return Object(c.a)(n,[{key:"readData",value:function(e,t){return t}},{key:"writeData",value:function(e,t){if(e)for(var n in e)t[n]=e[n]}},{key:"collectRequiredFields",value:function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("CIMSymbolReference"!==this.data.type){e.next=6;break}if(!(r=this.data.primitiveOverrides)){e.next=6;break}return i=r.map((function(e){var r=e.valueExpressionInfo;return Object(g.c)(t,n,r.expression)})),e.next=6,Promise.all(i);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"clone",value:function(){return new r({data:Object(f.a)(this.data)})}},{key:"hash",value:function(){return Object(p.b)(JSON.stringify(this.data)).toString()}}]),n}(O.a);Object(d.a)([Object(h.b)({json:{write:!1}})],j.prototype,"color",void 0),Object(d.a)([Object(h.b)({json:{write:!0}})],j.prototype,"data",void 0),Object(d.a)([Object(v.a)("data",["symbol"])],j.prototype,"readData",null),Object(d.a)([Object(m.a)("data")],j.prototype,"writeData",null),Object(d.a)([Object(b.a)({CIMSymbolReference:"cim"},{readOnly:!0})],j.prototype,"type",void 0);var w=j=r=Object(d.a)([Object(y.a)("esri.symbols.CIMSymbol")],j);t.a=w},function(e,t,n){"use strict";var r,i={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9367:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(r=2e3;r<=2045;r++)i[r]=0;for(r=2056;r<=2065;r++)i[r]=0;for(r=2067;r<=2135;r++)i[r]=0;for(r=2137;r<=2154;r++)i[r]=0;for(r=2161;r<=2170;r++)i[r]=0;for(r=2172;r<=2193;r++)i[r]=0;for(r=2195;r<=2198;r++)i[r]=0;for(r=2200;r<=2203;r++)i[r]=0;for(r=2205;r<=2217;r++)i[r]=0;for(r=2222;r<=2224;r++)i[r]=1;for(r=2225;r<=2250;r++)i[r]=2;for(r=2251;r<=2253;r++)i[r]=1;for(r=2257;r<=2264;r++)i[r]=2;for(r=2274;r<=2279;r++)i[r]=2;for(r=2280;r<=2282;r++)i[r]=1;for(r=2283;r<=2289;r++)i[r]=2;for(r=2290;r<=2292;r++)i[r]=0;for(r=2308;r<=2313;r++)i[r]=0;for(r=2315;r<=2491;r++)i[r]=0;for(r=2494;r<=2866;r++)i[r]=0;for(r=2867;r<=2869;r++)i[r]=1;for(r=2870;r<=2888;r++)i[r]=2;for(r=2891;r<=2895;r++)i[r]=2;for(r=2896;r<=2898;r++)i[r]=1;for(r=2902;r<=2908;r++)i[r]=2;for(r=2915;r<=2920;r++)i[r]=2;for(r=2921;r<=2923;r++)i[r]=1;for(r=2924;r<=2930;r++)i[r]=2;for(r=2931;r<=2962;r++)i[r]=0;for(r=2964;r<=2968;r++)i[r]=2;for(r=2969;r<=2973;r++)i[r]=0;for(r=2975;r<=2991;r++)i[r]=0;for(r=2995;r<=3051;r++)i[r]=0;for(r=3054;r<=3079;r++)i[r]=0;for(r=3081;r<=3088;r++)i[r]=0;for(r=3092;r<=3101;r++)i[r]=0;for(r=3106;r<=3138;r++)i[r]=0;for(r=3146;r<=3151;r++)i[r]=0;for(r=3153;r<=3166;r++)i[r]=0;for(r=3168;r<=3172;r++)i[r]=0;for(r=3174;r<=3203;r++)i[r]=0;for(r=3294;r<=3358;r++)i[r]=0;for(r=3367;r<=3403;r++)i[r]=0;for(r=3408;r<=3416;r++)i[r]=0;for(r=3417;r<=3438;r++)i[r]=2;for(r=3441;r<=3446;r++)i[r]=2;for(r=3447;r<=3450;r++)i[r]=0;for(r=3451;r<=3459;r++)i[r]=2;for(r=3460;r<=3478;r++)i[r]=0;for(r=3554;r<=3559;r++)i[r]=0;for(r=3560;r<=3570;r++)i[r]=2;for(r=3571;r<=3581;r++)i[r]=0;for(r=3594;r<=3597;r++)i[r]=0;for(r=3601;r<=3604;r++)i[r]=0;for(r=3637;r<=3639;r++)i[r]=0;for(r=3665;r<=3667;r++)i[r]=0;for(r=3693;r<=3695;r++)i[r]=0;for(r=3701;r<=3727;r++)i[r]=0;for(r=3728;r<=3739;r++)i[r]=2;for(r=3740;r<=3751;r++)i[r]=0;for(r=3753;r<=3760;r++)i[r]=2;for(r=3761;r<=3773;r++)i[r]=0;for(r=3775;r<=3777;r++)i[r]=0;for(r=3779;r<=3781;r++)i[r]=0;for(r=3783;r<=3785;r++)i[r]=0;for(r=3788;r<=3791;r++)i[r]=0;for(r=3797;r<=3802;r++)i[r]=0;for(r=3814;r<=3816;r++)i[r]=0;for(r=3825;r<=3829;r++)i[r]=0;for(r=3832;r<=3841;r++)i[r]=0;for(r=3844;r<=3852;r++)i[r]=0;for(r=3873;r<=3885;r++)i[r]=0;for(r=3890;r<=3893;r++)i[r]=0;for(r=3907;r<=3912;r++)i[r]=0;for(r=3942;r<=3950;r++)i[r]=0;for(r=3968;r<=3970;r++)i[r]=0;for(r=3973;r<=3976;r++)i[r]=0;for(r=3986;r<=3989;r++)i[r]=0;for(r=3994;r<=3997;r++)i[r]=0;for(r=4048;r<=4051;r++)i[r]=0;for(r=4056;r<=4063;r++)i[r]=0;for(r=4093;r<=4096;r++)i[r]=0;for(r=4390;r<=4398;r++)i[r]=0;for(r=4399;r<=4413;r++)i[r]=2;for(r=4418;r<=4433;r++)i[r]=2;for(r=4455;r<=4457;r++)i[r]=2;for(r=4484;r<=4489;r++)i[r]=0;for(r=4491;r<=4554;r++)i[r]=0;for(r=4568;r<=4589;r++)i[r]=0;for(r=4652;r<=4656;r++)i[r]=0;for(r=4766;r<=4800;r++)i[r]=0;for(r=5014;r<=5016;r++)i[r]=0;for(r=5069;r<=5072;r++)i[r]=0;for(r=5105;r<=5130;r++)i[r]=0;for(r=5173;r<=5188;r++)i[r]=0;for(r=5253;r<=5259;r++)i[r]=0;for(r=5269;r<=5275;r++)i[r]=0;for(r=5292;r<=5311;r++)i[r]=0;for(r=5329;r<=5331;r++)i[r]=0;for(r=5343;r<=5349;r++)i[r]=0;for(r=5355;r<=5357;r++)i[r]=0;for(r=5387;r<=5389;r++)i[r]=0;for(r=5459;r<=5463;r++)i[r]=0;for(r=5479;r<=5482;r++)i[r]=0;for(r=5518;r<=5520;r++)i[r]=0;for(r=5530;r<=5539;r++)i[r]=0;for(r=5550;r<=5552;r++)i[r]=0;for(r=5562;r<=5583;r++)i[r]=0;for(r=5623;r<=5625;r++)i[r]=2;for(r=5631;r<=5639;r++)i[r]=0;for(r=5649;r<=5653;r++)i[r]=0;for(r=5663;r<=5680;r++)i[r]=0;for(r=5682;r<=5685;r++)i[r]=0;for(r=5875;r<=5877;r++)i[r]=0;for(r=5896;r<=5899;r++)i[r]=0;for(r=5921;r<=5940;r++)i[r]=0;for(r=6050;r<=6125;r++)i[r]=0;for(r=6244;r<=6275;r++)i[r]=0;for(r=6328;r<=6348;r++)i[r]=0;for(r=6350;r<=6356;r++)i[r]=0;for(r=6366;r<=6372;r++)i[r]=0;for(r=6381;r<=6387;r++)i[r]=0;for(r=6393;r<=6404;r++)i[r]=0;for(r=6480;r<=6483;r++)i[r]=0;for(r=6511;r<=6514;r++)i[r]=0;for(r=6579;r<=6581;r++)i[r]=0;for(r=6619;r<=6624;r++)i[r]=0;for(r=6625;r<=6627;r++)i[r]=2;for(r=6628;r<=6632;r++)i[r]=0;for(r=6634;r<=6637;r++)i[r]=0;for(r=6669;r<=6692;r++)i[r]=0;for(r=6707;r<=6709;r++)i[r]=0;for(r=6720;r<=6723;r++)i[r]=0;for(r=6732;r<=6738;r++)i[r]=0;for(r=6931;r<=6933;r++)i[r]=0;for(r=6956;r<=6959;r++)i[r]=0;for(r=7005;r<=7007;r++)i[r]=0;for(r=7057;r<=7070;r++)i[r]=2;for(r=7074;r<=7082;r++)i[r]=0;for(r=7109;r<=7118;r++)i[r]=0;for(r=7119;r<=7127;r++)i[r]=1;for(r=7374;r<=7376;r++)i[r]=0;for(r=7528;r<=7586;r++)i[r]=0;for(r=7587;r<=7645;r++)i[r]=2;for(r=7692;r<=7696;r++)i[r]=0;for(r=7755;r<=7787;r++)i[r]=0;for(r=7791;r<=7795;r++)i[r]=0;for(r=7799;r<=7801;r++)i[r]=0;for(r=7803;r<=7805;r++)i[r]=0;for(r=7825;r<=7831;r++)i[r]=0;for(r=7845;r<=7859;r++)i[r]=0;for(r=8013;r<=8032;r++)i[r]=0;for(r=8065;r<=8068;r++)i[r]=1;for(r=8518;r<=8529;r++)i[r]=2;for(r=8533;r<=8536;r++)i[r]=2;for(r=8538;r<=8540;r++)i[r]=2;for(r=8677;r<=8679;r++)i[r]=0;for(r=8836;r<=8840;r++)i[r]=0;for(r=8857;r<=8859;r++)i[r]=0;for(r=8908;r<=8910;r++)i[r]=0;for(r=9154;r<=9159;r++)i[r]=0;for(r=9205;r<=9218;r++)i[r]=0;for(r=9271;r<=9273;r++)i[r]=0;for(r=9295;r<=9297;r++)i[r]=0;for(r=20002;r<=20032;r++)i[r]=0;for(r=20062;r<=20092;r++)i[r]=0;for(r=20135;r<=20138;r++)i[r]=0;for(r=20248;r<=20258;r++)i[r]=0;for(r=20348;r<=20358;r++)i[r]=0;for(r=20436;r<=20440;r++)i[r]=0;for(r=20822;r<=20824;r++)i[r]=0;for(r=20934;r<=20936;r++)i[r]=0;for(r=21035;r<=21037;r++)i[r]=0;for(r=21095;r<=21097;r++)i[r]=0;for(r=21148;r<=21150;r++)i[r]=0;for(r=21413;r<=21423;r++)i[r]=0;for(r=21453;r<=21463;r++)i[r]=0;for(r=21473;r<=21483;r++)i[r]=0;for(r=21780;r<=21782;r++)i[r]=0;for(r=21891;r<=21894;r++)i[r]=0;for(r=21896;r<=21899;r++)i[r]=0;for(r=22171;r<=22177;r++)i[r]=0;for(r=22181;r<=22187;r++)i[r]=0;for(r=22191;r<=22197;r++)i[r]=0;for(r=22234;r<=22236;r++)i[r]=0;for(r=22521;r<=22525;r++)i[r]=0;for(r=22991;r<=22994;r++)i[r]=0;for(r=23028;r<=23038;r++)i[r]=0;for(r=23830;r<=23853;r++)i[r]=0;for(r=23866;r<=23872;r++)i[r]=0;for(r=23877;r<=23884;r++)i[r]=0;for(r=23886;r<=23894;r++)i[r]=0;for(r=23946;r<=23948;r++)i[r]=0;for(r=24311;r<=24313;r++)i[r]=0;for(r=24342;r<=24347;r++)i[r]=0;for(r=24370;r<=24374;r++)i[r]=10;for(r=24375;r<=24381;r++)i[r]=0;for(r=24718;r<=24721;r++)i[r]=0;for(r=24817;r<=24821;r++)i[r]=0;for(r=24877;r<=24882;r++)i[r]=0;for(r=24891;r<=24893;r++)i[r]=0;for(r=25391;r<=25395;r++)i[r]=0;for(r=25828;r<=25838;r++)i[r]=0;for(r=26191;r<=26195;r++)i[r]=0;for(r=26391;r<=26393;r++)i[r]=0;for(r=26701;r<=26722;r++)i[r]=0;for(r=26729;r<=26799;r++)i[r]=2;for(r=26801;r<=26803;r++)i[r]=2;for(r=26811;r<=26813;r++)i[r]=2;for(r=26847;r<=26870;r++)i[r]=2;for(r=26891;r<=26899;r++)i[r]=0;for(r=26901;r<=26923;r++)i[r]=0;for(r=26929;r<=26946;r++)i[r]=0;for(r=26948;r<=26998;r++)i[r]=0;for(r=27037;r<=27040;r++)i[r]=0;for(r=27205;r<=27232;r++)i[r]=0;for(r=27258;r<=27260;r++)i[r]=0;for(r=27391;r<=27398;r++)i[r]=0;for(r=27561;r<=27564;r++)i[r]=0;for(r=27571;r<=27574;r++)i[r]=0;for(r=27581;r<=27584;r++)i[r]=0;for(r=27591;r<=27594;r++)i[r]=0;for(r=28191;r<=28193;r++)i[r]=0;for(r=28348;r<=28358;r++)i[r]=0;for(r=28402;r<=28432;r++)i[r]=0;for(r=28462;r<=28492;r++)i[r]=0;for(r=29118;r<=29122;r++)i[r]=0;for(r=29168;r<=29172;r++)i[r]=0;for(r=29177;r<=29185;r++)i[r]=0;for(r=29187;r<=29195;r++)i[r]=0;for(r=29900;r<=29903;r++)i[r]=0;for(r=30161;r<=30179;r++)i[r]=0;for(r=30491;r<=30494;r++)i[r]=0;for(r=30729;r<=30732;r++)i[r]=0;for(r=31251;r<=31259;r++)i[r]=0;for(r=31265;r<=31268;r++)i[r]=0;for(r=31275;r<=31279;r++)i[r]=0;for(r=31281;r<=31297;r++)i[r]=0;for(r=31461;r<=31469;r++)i[r]=0;for(r=31491;r<=31495;r++)i[r]=0;for(r=31917;r<=31922;r++)i[r]=0;for(r=31965;r<=32e3;r++)i[r]=0;for(r=32001;r<=32003;r++)i[r]=2;for(r=32005;r<=32031;r++)i[r]=2;for(r=32033;r<=32060;r++)i[r]=2;for(r=32064;r<=32067;r++)i[r]=2;for(r=32074;r<=32077;r++)i[r]=2;for(r=32081;r<=32086;r++)i[r]=0;for(r=32107;r<=32130;r++)i[r]=0;for(r=32133;r<=32158;r++)i[r]=0;for(r=32164;r<=32167;r++)i[r]=2;for(r=32180;r<=32199;r++)i[r]=0;for(r=32201;r<=32260;r++)i[r]=0;for(r=32301;r<=32360;r++)i[r]=0;for(r=32601;r<=32662;r++)i[r]=0;for(r=32664;r<=32667;r++)i[r]=2;for(r=32701;r<=32761;r++)i[r]=0;for(r=53001;r<=53004;r++)i[r]=0;for(r=53008;r<=53019;r++)i[r]=0;for(r=53021;r<=53032;r++)i[r]=0;for(r=53034;r<=53037;r++)i[r]=0;for(r=53042;r<=53046;r++)i[r]=0;for(r=53074;r<=53080;r++)i[r]=0;for(r=54001;r<=54004;r++)i[r]=0;for(r=54008;r<=54019;r++)i[r]=0;for(r=54021;r<=54032;r++)i[r]=0;for(r=54034;r<=54037;r++)i[r]=0;for(r=54042;r<=54046;r++)i[r]=0;for(r=54048;r<=54053;r++)i[r]=0;for(r=54074;r<=54080;r++)i[r]=0;for(r=54098;r<=54101;r++)i[r]=0;for(r=102001;r<=102040;r++)i[r]=0;for(r=102042;r<=102063;r++)i[r]=0;for(r=102065;r<=102067;r++)i[r]=0;for(r=102070;r<=102117;r++)i[r]=0;for(r=102122;r<=102216;r++)i[r]=0;for(r=102221;r<=102377;r++)i[r]=0;for(r=102382;r<=102388;r++)i[r]=0;for(r=102389;r<=102398;r++)i[r]=2;for(r=102399;r<=102444;r++)i[r]=0;for(r=102445;r<=102447;r++)i[r]=2;for(r=102448;r<=102458;r++)i[r]=0;for(r=102459;r<=102468;r++)i[r]=2;for(r=102469;r<=102499;r++)i[r]=0;for(r=102500;r<=102519;r++)i[r]=1;for(r=102520;r<=102524;r++)i[r]=0;for(r=102525;r<=102529;r++)i[r]=2;for(r=102530;r<=102588;r++)i[r]=0;for(r=102590;r<=102598;r++)i[r]=0;for(r=102601;r<=102603;r++)i[r]=0;for(r=102605;r<=102628;r++)i[r]=0;for(r=102629;r<=102646;r++)i[r]=2;for(r=102648;r<=102700;r++)i[r]=2;for(r=102701;r<=102703;r++)i[r]=0;for(r=102707;r<=102730;r++)i[r]=2;for(r=102733;r<=102758;r++)i[r]=2;for(r=102767;r<=102900;r++)i[r]=0;for(r=102965;r<=102969;r++)i[r]=0;for(r=102971;r<=102973;r++)i[r]=0;for(r=102975;r<=102989;r++)i[r]=0;for(r=102990;r<=102992;r++)i[r]=1;for(r=102997;r<=103002;r++)i[r]=0;for(r=103003;r<=103008;r++)i[r]=2;for(r=103009;r<=103011;r++)i[r]=0;for(r=103012;r<=103014;r++)i[r]=2;for(r=103019;r<=103021;r++)i[r]=0;for(r=103022;r<=103024;r++)i[r]=2;for(r=103029;r<=103031;r++)i[r]=0;for(r=103032;r<=103034;r++)i[r]=2;for(r=103065;r<=103068;r++)i[r]=0;for(r=103074;r<=103076;r++)i[r]=0;for(r=103077;r<=103079;r++)i[r]=1;for(r=103080;r<=103082;r++)i[r]=0;for(r=103083;r<=103085;r++)i[r]=2;for(r=103090;r<=103093;r++)i[r]=0;for(r=103097;r<=103099;r++)i[r]=0;for(r=103100;r<=103102;r++)i[r]=2;for(r=103107;r<=103109;r++)i[r]=0;for(r=103110;r<=103112;r++)i[r]=2;for(r=103113;r<=103116;r++)i[r]=0;for(r=103117;r<=103120;r++)i[r]=2;for(r=103153;r<=103157;r++)i[r]=0;for(r=103158;r<=103162;r++)i[r]=2;for(r=103163;r<=103165;r++)i[r]=0;for(r=103166;r<=103168;r++)i[r]=1;for(r=103169;r<=103171;r++)i[r]=2;for(r=103186;r<=103188;r++)i[r]=0;for(r=103189;r<=103191;r++)i[r]=2;for(r=103192;r<=103195;r++)i[r]=0;for(r=103196;r<=103199;r++)i[r]=2;for(r=103200;r<=103224;r++)i[r]=0;for(r=103225;r<=103227;r++)i[r]=1;for(r=103232;r<=103237;r++)i[r]=0;for(r=103238;r<=103243;r++)i[r]=2;for(r=103244;r<=103246;r++)i[r]=0;for(r=103247;r<=103249;r++)i[r]=2;for(r=103254;r<=103256;r++)i[r]=0;for(r=103257;r<=103259;r++)i[r]=2;for(r=103264;r<=103266;r++)i[r]=0;for(r=103267;r<=103269;r++)i[r]=2;for(r=103300;r<=103375;r++)i[r]=0;for(r=103381;r<=103383;r++)i[r]=0;for(r=103384;r<=103386;r++)i[r]=1;for(r=103387;r<=103389;r++)i[r]=0;for(r=103390;r<=103392;r++)i[r]=2;for(r=103397;r<=103399;r++)i[r]=0;for(r=103400;r<=103471;r++)i[r]=2;for(r=103476;r<=103478;r++)i[r]=0;for(r=103479;r<=103481;r++)i[r]=2;for(r=103486;r<=103488;r++)i[r]=0;for(r=103489;r<=103491;r++)i[r]=2;for(r=103492;r<=103495;r++)i[r]=0;for(r=103496;r<=103499;r++)i[r]=2;for(r=103528;r<=103543;r++)i[r]=0;for(r=103544;r<=103548;r++)i[r]=2;for(r=103549;r<=103551;r++)i[r]=0;for(r=103552;r<=103554;r++)i[r]=1;for(r=103555;r<=103557;r++)i[r]=2;for(r=103558;r<=103560;r++)i[r]=0;for(r=103571;r<=103573;r++)i[r]=0;for(r=103574;r<=103576;r++)i[r]=2;for(r=103577;r<=103580;r++)i[r]=0;for(r=103581;r<=103583;r++)i[r]=2;for(r=103595;r<=103694;r++)i[r]=0;for(r=103696;r<=103699;r++)i[r]=0;for(r=103700;r<=103793;r++)i[r]=2;for(r=103794;r<=103872;r++)i[r]=0;for(r=103900;r<=103971;r++)i[r]=2;t.a=i},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(4)),u=n(13),d=(n(17),n(1)),f=n(49),p=n(8),h=n(12),b=(n(19),n(20),n(146)),v=n(127),y=n(179),m=n(288),g=n(456),O=n(536),j=n(582),w=u.a.getLogger("esri.symbols.IconSymbol3DLayer"),_=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).material=null,r.resource=null,r.type="icon",r.size=12,r.anchor="center",r.anchorPosition=void 0,r.outline=void 0,r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:Object(l.k)(this.material)?this.material.clone():null,outline:Object(l.k)(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}}],[{key:"fromSimpleMarkerSymbol",value:function(e){var t=e.color||m.c,n=k(e),i=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||m.c).clone()}:null;return new r({size:e.size,resource:{primitive:T(e.style)},material:{color:t},outline:i,anchor:n?"relative":void 0,anchorPosition:n})}},{key:"fromPictureMarkerSymbol",value:function(e){var t=!e.color||Object(m.a)(e.color)?m.c:e.color,n=k(e);return new r({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:n?"relative":void 0,anchorPosition:n})}},{key:"fromCIMSymbol",value:function(e){return new r({resource:{href:Object(h.A)({mediaType:"application/json",data:JSON.stringify(e.data)})}})}}]),n}(b.a);function k(e){var t="width"in e?e.width:e.size,n="height"in e?e.height:e.size,r=x(e.xoffset),i=x(e.yoffset);return(r||i)&&t&&n?{x:-r/t,y:i/n}:null}function x(e){return isFinite(e)?e:0}Object(c.a)([Object(d.b)({type:y.a,json:{write:!0}})],_.prototype,"material",void 0),Object(c.a)([Object(d.b)({type:O.a,json:{write:!0}})],_.prototype,"resource",void 0),Object(c.a)([Object(f.a)({Icon:"icon"},{readOnly:!0})],_.prototype,"type",void 0),Object(c.a)([Object(d.b)(v.b)],_.prototype,"size",void 0),Object(c.a)([Object(f.a)({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),Object(d.b)({json:{default:"center"}})],_.prototype,"anchor",void 0),Object(c.a)([Object(d.b)({type:j.a,json:{type:[Number],read:{reader:function(e){return new j.a({x:e[0],y:e[1]})}},write:{writer:function(e,t){t.anchorPosition=[e.x,e.y]},overridePolicy:function(){return{enabled:"relative"===this.anchor}}}}})],_.prototype,"anchorPosition",void 0),Object(c.a)([Object(d.b)({type:g.a,json:{write:!0}})],_.prototype,"outline",void 0),_=r=Object(c.a)([Object(p.a)("esri.symbols.IconSymbol3DLayer")],_);var S={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function T(e){return S[e]||(w.warn("".concat(e,' cannot be mapped to Icon symbol. Fallback to "circle"')),"circle")}var E=_;t.a=E},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return y})),n.d(t,"g",(function(){return O}));var r=n(4),i=n(38),a=n(27),o=n(11),s=n(188),c=n(33),l=n(55);function u(e){return e?{origin:Object(a.d)(e.origin),direction:Object(a.d)(e.direction)}:{origin:Object(a.e)(),direction:Object(a.e)()}}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u();return f(e.origin,e.direction,t)}function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u();return Object(o.j)(n.origin,e),Object(o.j)(n.direction,t),n}function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u(),a=Object(i.b)(Object(c.c)(l.d.get(),t));if(a[2]=0,!e.unprojectFromRenderScreen(a,n.origin))return null;var s=Object(i.b)(Object(c.c)(l.d.get(),t));s[2]=1;var d=e.unprojectFromRenderScreen(s,l.d.get());return Object(r.j)(d)?null:(Object(o.i)(n.direction,d,n.origin),n)}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u();return b(e,e.screenToRender(t,Object(i.b)(l.d.get())),n)}function b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u();Object(o.j)(n.origin,e.eye);var i=Object(o.v)(l.d.get(),t[0],t[1],1),a=e.unprojectFromRenderScreen(i,l.d.get());return Object(r.j)(a)?null:(Object(o.i)(n.direction,a,n.origin),n)}function v(e,t){var n=Object(o.f)(l.d.get(),Object(o.q)(l.d.get(),e.direction),Object(o.i)(l.d.get(),t,e.origin));return Object(o.g)(n,n)}function y(e,t,n){var r=Object(o.g)(e.direction,Object(o.i)(n,t,e.origin));return Object(o.e)(n,e.origin,Object(o.d)(n,e.direction,r)),n}function m(){return{origin:null,direction:null}}var g=new s.a(m),O=Object.freeze({__proto__:null,create:u,wrap:function(e,t){var n=g.get();return n.origin=e,n.direction=t,n},copy:d,fromPoints:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u();return Object(o.j)(n.origin,e),Object(o.i)(n.direction,t,e),n},fromValues:f,fromScreen:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u();return p(e,e.screenToRender(t,Object(i.b)(l.d.get())),n)},fromRender:p,fromScreenAtEye:h,fromRenderAtEye:b,distance2:v,distance:function(e,t){return Math.sqrt(v(e,t))},closestPoint:y,createWrapper:m})},function(e,t,n){"use strict";n.r(t);var r=n(31),i=n(14),a=n(2),o=n(3),s=n(5),c=n(6),l=n(0),u=(n(16),n(4)),d=(n(13),n(17),n(1)),f=n(47),p=n(41),h=n(8),b=n(42),v=(n(12),n(19),n(20),n(28)),y=n(44),m=n(68),g=n(71),O=n(74),j=n(266),w=new f.a({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null}),_=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).displayFieldName=null,r.exceededTransferLimit=!1,r.features=[],r.fields=null,r.geometryType=null,r.hasM=!1,r.hasZ=!1,r.queryGeometry=null,r.spatialReference=null,r}return Object(o.a)(n,[{key:"readFeatures",value:function(e,t){for(var n=y.a.fromJSON(t.spatialReference),r=[],i=0;i<e.length;i++){var a=e[i],o=O.a.fromJSON(a),s=a.geometry&&a.geometry.spatialReference;Object(u.k)(o.geometry)&&!s&&(o.geometry.spatialReference=n),r.push(o)}return r}},{key:"writeGeometryType",value:function(e,t,n,r){if(e)w.write(e,t,n,r);else{var a=this.features;if(a){var o,s=Object(i.a)(a);try{for(s.s();!(o=s.n()).done;){var c=o.value;if(c&&Object(u.k)(c.geometry))return void w.write(c.geometry.type,t,n,r)}}catch(l){s.e(l)}finally{s.f()}}}}},{key:"readQueryGeometry",value:function(e,t){if(!e)return null;var n=!!e.spatialReference,r=Object(m.a)(e);return!n&&t.spatialReference&&(r.spatialReference=y.a.fromJSON(t.spatialReference)),r}},{key:"writeSpatialReference",value:function(e,t){if(e)t.spatialReference=e.toJSON();else{var n=this.features;if(n){var r,a=Object(i.a)(n);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o&&Object(u.k)(o.geometry)&&o.geometry.spatialReference)return void(t.spatialReference=o.geometry.spatialReference.toJSON())}}catch(s){a.e(s)}finally{a.f()}}}}},{key:"toJSON",value:function(e){var t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(var n=0;n<t.features.length;n++){var r=t.features[n];if(r.geometry){var i=e&&e[n];r.geometry=i&&i.toJSON()||r.geometry}}return t}},{key:"quantize",value:function(e){for(var t=Object(r.a)(e.scale,2),n=t[0],i=t[1],a=Object(r.a)(e.translate,2),o=a[0],s=a[1],c=this.features,l=this._getQuantizationFunction(this.geometryType,(function(e){return Math.round((e-o)/n)}),(function(e){return Math.round((s-e)/i)})),d=0,f=c.length;d<f;d++)l(Object(u.q)(c[d].geometry))||(c.splice(d,1),d--,f--);return this.transform=e,this}},{key:"unquantize",value:function(){var e=this.geometryType,t=this.features,n=this.transform;if(!n)return this;var a,o=Object(r.a)(n.translate,2),s=o[0],c=o[1],l=Object(r.a)(n.scale,2),d=l[0],f=l[1],p=this._getHydrationFunction(e,(function(e){return e*d+s}),(function(e){return c-e*f})),h=Object(i.a)(t);try{for(h.s();!(a=h.n()).done;){var b=a.value.geometry;Object(u.k)(b)&&p(b)}}catch(v){h.e(v)}finally{h.f()}return this.transform=null,this}},{key:"_quantizePoints",value:function(e,t,n){for(var r,i,a=[],o=0,s=e.length;o<s;o++){var c=e[o];if(o>0){var l=t(c[0]),u=n(c[1]);l===r&&u===i||(a.push([l-r,u-i]),r=l,i=u)}else r=t(c[0]),i=n(c[1]),a.push([r,i])}return a.length>0?a:null}},{key:"_getQuantizationFunction",value:function(e,t,n){var r=this;return"point"===e?function(e){return e.x=t(e.x),e.y=n(e.y),e}:"polyline"===e||"polygon"===e?function(e){for(var i=Object(m.g)(e)?e.rings:e.paths,a=[],o=0,s=i.length;o<s;o++){var c=i[o],l=r._quantizePoints(c,t,n);l&&a.push(l)}return a.length>0?(Object(m.g)(e)?e.rings=a:e.paths=a,e):null}:"multipoint"===e?function(e){var i=r._quantizePoints(e.points,t,n);return i.length>0?(e.points=i,e):null}:"extent"===e?function(e){return e}:null}},{key:"_getHydrationFunction",value:function(e,t,n){return"point"===e?function(e){e.x=t(e.x),e.y=n(e.y)}:"polyline"===e||"polygon"===e?function(e){for(var r,i,a=Object(m.g)(e)?e.rings:e.paths,o=0,s=a.length;o<s;o++)for(var c=a[o],l=0,u=c.length;l<u;l++){var d=c[l];l>0?(r+=d[0],i+=d[1]):(r=d[0],i=d[1]),d[0]=t(r),d[1]=n(i)}}:"extent"===e?function(e){e.xmin=t(e.xmin),e.ymin=n(e.ymin),e.xmax=t(e.xmax),e.ymax=n(e.ymax)}:"multipoint"===e?function(e){for(var r,i,a=e.points,o=0,s=a.length;o<s;o++){var c=a[o];o>0?(r+=c[0],i+=c[1]):(r=c[0],i=c[1]),c[0]=t(r),c[1]=n(i)}}:void 0}}]),n}(v.a);Object(l.a)([Object(d.b)({type:String,json:{write:!0}})],_.prototype,"displayFieldName",void 0),Object(l.a)([Object(d.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],_.prototype,"exceededTransferLimit",void 0),Object(l.a)([Object(d.b)({type:[O.a],json:{write:!0}})],_.prototype,"features",void 0),Object(l.a)([Object(p.a)("features")],_.prototype,"readFeatures",null),Object(l.a)([Object(d.b)({type:[j.a],json:{write:!0}})],_.prototype,"fields",void 0),Object(l.a)([Object(d.b)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:w.read}}})],_.prototype,"geometryType",void 0),Object(l.a)([Object(b.a)("geometryType")],_.prototype,"writeGeometryType",null),Object(l.a)([Object(d.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],_.prototype,"hasM",void 0),Object(l.a)([Object(d.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],_.prototype,"hasZ",void 0),Object(l.a)([Object(d.b)({types:g.c,json:{write:!0}})],_.prototype,"queryGeometry",void 0),Object(l.a)([Object(p.a)("queryGeometry")],_.prototype,"readQueryGeometry",null),Object(l.a)([Object(d.b)({type:y.a,json:{write:!0}})],_.prototype,"spatialReference",void 0),Object(l.a)([Object(b.a)("spatialReference")],_.prototype,"writeSpatialReference",null),Object(l.a)([Object(d.b)({json:{write:!0}})],_.prototype,"transform",void 0),(_=Object(l.a)([Object(h.a)("esri.tasks.support.FeatureSet")],_)).prototype.toJSON.isDefaultToJSON=!0,_||(_={});var k=_;t.default=k},function(e,t,n){"use strict";var r=n(7),i=n.n(r),a=n(35),o=n(15),s=n(14),c=n(2),l=n(3),u=n(5),d=n(6),f=n(0),p=(n(16),n(22)),h=n(13),b=n(17),v=n(1),y=n(58),m=n(41),g=n(8),O=n(42),j=(n(12),n(19),n(20),n(24)),w=n(28),_=n(40),k=n(54),x=n(167),S=n(280),T=n(441),E=n(281),C=n(247),P=n(529),I=n(306),M=n(244);var A,R={base:null,key:"type",typeMap:{attachment:S.a,media:I.a,text:M.a,field:C.a}},L=n(499),F=A=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).returnTopmostRaster=null,r.showNoDataRecords=null,r}return Object(l.a)(n,[{key:"clone",value:function(){return new A({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}}]),n}(w.a);Object(f.a)([Object(v.b)({type:Boolean,json:{write:!0}})],F.prototype,"returnTopmostRaster",void 0),Object(f.a)([Object(v.b)({type:Boolean,json:{write:!0}})],F.prototype,"showNoDataRecords",void 0);var D,N=F=A=Object(f.a)([Object(g.a)("esri.popup.LayerOptions")],F),V=n(535),z=D=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).showRelatedRecords=null,r.orderByFields=null,r}return Object(l.a)(n,[{key:"clone",value:function(){return new D({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?Object(p.a)(this.orderByFields):null})}}]),n}(w.a);Object(f.a)([Object(v.b)({type:Boolean,json:{write:!0}})],z.prototype,"showRelatedRecords",void 0),Object(f.a)([Object(v.b)({type:[V.a],json:{write:!0}})],z.prototype,"orderByFields",void 0);var U,B=z=D=Object(f.a)([Object(g.a)("esri.popup.RelatedRecordsInfo")],z),G=n(224),q=n(252),H=n(415),W=_.a.ofType({key:"type",defaultKeyValue:"button",base:G.a,typeMap:{button:q.a,toggle:H.a}}),$={base:x.a,key:"type",typeMap:{media:I.a,custom:T.a,text:M.a,attachments:S.a,fields:C.a}},J="esri.PopupTemplate",Y=h.a.getLogger(J),K=["attachments","fields","media","text"],Z=U=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.apply(this,arguments)).actions=null,e.content="",e.expressionInfos=null,e.fieldInfos=null,e.layerOptions=null,e.lastEditInfoEnabled=!0,e.outFields=null,e.overwriteActions=!1,e.returnGeometry=!1,e.title="",e.relatedRecordsInfo=null,e}return Object(l.a)(n,[{key:"castContent",value:function(e){return Array.isArray(e)?e.map((function(e){return Object(b.k)($,e)})):"string"==typeof e||"function"==typeof e||e instanceof HTMLElement||Object(j.o)(e)?e:(Y.error("content error","unsupported content value",{value:e}),null)}},{key:"readContent",value:function(e,t){var n=t.popupElements;return Array.isArray(n)&&n.length>0?this._readPopupInfoElements(t):this._readPopupInfo(t)}},{key:"writeContent",value:function(e,t,n,r){var i=this;"string"!=typeof e?Array.isArray(e)&&(t.popupElements=e.filter((function(e){return-1!==K.indexOf(e.type)})).map((function(e){return e&&e.toJSON(r)})),t.popupElements.forEach((function(e){"attachments"===e.type?i._writeAttachmentContent(t):"media"===e.type?i._writeMediaContent(e,t):"text"===e.type&&i._writeTextContent(e,t)}))):t.description=e}},{key:"writeFieldInfos",value:function(e,t,n,r){var i=this.content,a=Array.isArray(i)?i:null;if(e){var o=a?a.filter((function(e){return"fields"===e.type})):[],c=o.length&&o.every((function(e){var t;return null==(t=e.fieldInfos)?void 0:t.length}));t.fieldInfos=e.filter(Boolean).map((function(e){var t=e.toJSON(r);return c&&(t.visible=!1),t}))}if(a){var l,u=Object(s.a)(a);try{for(u.s();!(l=u.n()).done;){var d=l.value;"fields"===d.type&&this._writeFieldsContent(d,t)}}catch(f){u.e(f)}finally{u.f()}}}},{key:"writeLayerOptions",value:function(e,t,n,r){t[n]=!e||null===e.showNoDataRecords&&null===e.returnTopmostRaster?null:e.toJSON(r)}},{key:"writeTitle",value:function(e,t){t.title=e||""}},{key:"clone",value:function(){var e=this.actions,t=e?Object(p.a)(e.toArray()):[];return new U({actions:t,content:Array.isArray(this.content)?Object(p.a)(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?Object(p.a)(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?Object(p.a)(this.fieldInfos):null,layerOptions:this.layerOptions?Object(p.a)(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?Object(p.a)(this.outFields):null,overwriteActions:this.overwriteActions,returnGeometry:this.returnGeometry,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?Object(p.a)(this.relatedRecordsInfo):null})}},{key:"collectRequiredFields",value:function(){var e=Object(o.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._collectExpressionInfoFields(t,n,this.expressionInfos);case 2:Object(k.g)(t,n,[].concat(Object(a.a)(this.outFields||[]),Object(a.a)(this._getActionsFields(this.actions)),Object(a.a)(this._getTitleFields(this.title)),Object(a.a)(this._getContentFields(this.content))));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getRequiredFields",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Set,e.next=3,this.collectRequiredFields(n,t);case 3:return e.abrupt("return",Object(a.a)(n).sort());case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_writeFieldsContent",value:function(e,t){if(Array.isArray(e.fieldInfos)&&e.fieldInfos.length){var n=Object(p.a)(e.fieldInfos);Array.isArray(t.fieldInfos)?n.forEach((function(e){var n=t.fieldInfos.find((function(t){return t.fieldName.toLowerCase()===e.fieldName.toLowerCase()}));n?n.visible=!0:t.fieldInfos.push(e)})):t.fieldInfos=n}}},{key:"_writeAttachmentContent",value:function(e){e.showAttachments||(e.showAttachments=!0)}},{key:"_writeTextContent",value:function(e,t){!t.description&&e.text&&(t.description=e.text)}},{key:"_writeMediaContent",value:function(e,t){if(Array.isArray(e.mediaInfos)&&e.mediaInfos.length){var n=Object(p.a)(e.mediaInfos);Array.isArray(t.mediaInfos)?t.mediaInfos=[].concat(Object(a.a)(t.mediaInfos),Object(a.a)(n)):t.mediaInfos=n}}},{key:"_readPopupInfoElements",value:function(e){var t=e.description,n=e.mediaInfos,r=e.popupElements,i={description:!1,mediaInfos:!1};return r.map((function(e){return"media"===e.type?(e.mediaInfos||!n||i.mediaInfos||(e.mediaInfos=n,i.mediaInfos=!0),I.a.fromJSON(e)):"text"===e.type?(e.text||!t||i.description||(e.text=t,i.description=!0),M.a.fromJSON(e)):"attachments"===e.type?S.a.fromJSON(e):"fields"===e.type?C.a.fromJSON(e):void 0})).filter(Boolean)}},{key:"_readPopupInfo",value:function(e){var t=e.description,n=e.mediaInfos,r=e.showAttachments,i=[];return t?i.push(new M.a({text:t})):i.push(new C.a),Array.isArray(n)&&n.length&&i.push(I.a.fromJSON({mediaInfos:n})),r&&i.push(S.a.fromJSON({displayType:"list"})),i.length?i:t}},{key:"_getContentElementFields",value:function(e){var t=this;return e&&"attachments"!==e.type?"custom"===e.type?e.outFields||[]:"fields"===e.type?this._getFieldInfoFields(e.fieldInfos||this.fieldInfos):"media"===e.type?(e.mediaInfos||[]).reduce((function(e,n){return[].concat(Object(a.a)(e),Object(a.a)(t._getMediaInfoFields(n)))}),[]):"text"===e.type?this._extractFieldNames(e.text):void 0:[]}},{key:"_getMediaInfoFields",value:function(e){var t=e.caption,n=e.title,r=e.value||{},i=r.fields,o=void 0===i?[]:i,s=r.normalizeField,c=r.tooltipField,l=r.sourceURL,u=r.linkURL,d=[].concat(Object(a.a)(this._extractFieldNames(n)),Object(a.a)(this._extractFieldNames(t)),Object(a.a)(this._extractFieldNames(l)),Object(a.a)(this._extractFieldNames(u)),Object(a.a)(o));return s&&d.push(s),c&&d.push(c),d}},{key:"_getContentFields",value:function(e){var t=this;return"string"==typeof e?this._extractFieldNames(e):Array.isArray(e)?e.reduce((function(e,n){return[].concat(Object(a.a)(e),Object(a.a)(t._getContentElementFields(n)))}),[]):[]}},{key:"_collectExpressionInfoFields",value:function(){var e=Object(o.a)(i.a.mark((function e(t,n,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r,!e.t0){e.next=4;break}return e.next=4,Promise.all(r.map((function(e){return Object(k.c)(t,n,e.expression)})));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_getFieldInfoFields",value:function(e){return e?e.filter((function(e){return void 0===e.visible||!!e.visible})).map((function(e){return e.fieldName})).filter((function(e){return-1===e.indexOf("relationships/")&&-1===e.indexOf("expression/")})):[]}},{key:"_getActionsFields",value:function(e){var t=this;return e?e.toArray().reduce((function(e,n){return[].concat(Object(a.a)(e),Object(a.a)(t._getActionFields(n)))}),[]):[]}},{key:"_getActionFields",value:function(e){var t=e.className,n=e.title,r=e.type,i="button"===r||"toggle"===r?e.image:"";return[].concat(Object(a.a)(this._extractFieldNames(n)),Object(a.a)(this._extractFieldNames(t)),Object(a.a)(this._extractFieldNames(i)))}},{key:"_getTitleFields",value:function(e){return"string"==typeof e?this._extractFieldNames(e):[]}},{key:"_extractFieldNames",value:function(e){if(!e||"string"!=typeof e)return[];var t=e.match(/{[^}]*}/g);if(!t)return[];var n=/\{(\w+):.+\}/,r=t.filter((function(e){return!(0===e.indexOf("{relationships/")||0===e.indexOf("{expression/"))})).map((function(e){return e.replace(n,"{$1}")}));return r?r.map((function(e){return e.slice(1,-1)})):[]}}]),n}(w.a);Object(f.a)([Object(v.b)({type:W})],Z.prototype,"actions",void 0),Object(f.a)([Object(v.b)()],Z.prototype,"content",void 0),Object(f.a)([Object(y.a)("content")],Z.prototype,"castContent",null),Object(f.a)([Object(m.a)("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments"])],Z.prototype,"readContent",null),Object(f.a)([Object(O.a)("content",{popupElements:{type:_.a.ofType(R)},showAttachments:{type:Boolean},mediaInfos:{type:_.a.ofType(P.a)},description:{type:String}})],Z.prototype,"writeContent",null),Object(f.a)([Object(v.b)({type:[L.a],json:{write:!0}})],Z.prototype,"expressionInfos",void 0),Object(f.a)([Object(v.b)({type:[E.a]})],Z.prototype,"fieldInfos",void 0),Object(f.a)([Object(O.a)("fieldInfos")],Z.prototype,"writeFieldInfos",null),Object(f.a)([Object(v.b)({type:N})],Z.prototype,"layerOptions",void 0),Object(f.a)([Object(O.a)("layerOptions")],Z.prototype,"writeLayerOptions",null),Object(f.a)([Object(v.b)({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Z.prototype,"lastEditInfoEnabled",void 0),Object(f.a)([Object(v.b)()],Z.prototype,"outFields",void 0),Object(f.a)([Object(v.b)()],Z.prototype,"overwriteActions",void 0),Object(f.a)([Object(v.b)()],Z.prototype,"returnGeometry",void 0),Object(f.a)([Object(v.b)({json:{type:String}})],Z.prototype,"title",void 0),Object(f.a)([Object(O.a)("title")],Z.prototype,"writeTitle",null),Object(f.a)([Object(v.b)({type:B,json:{write:!0}})],Z.prototype,"relatedRecordsInfo",void 0);var X=Z=U=Object(f.a)([Object(g.a)(J)],Z);t.a=X},function(e,t,n){"use strict";var r=n(662),i=Object.prototype.toString;function a(e){return"[object Array]"===i.call(e)}function o(e){return"undefined"===typeof e}function s(e){return null!==e&&"object"===typeof e}function c(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function l(e){return"[object Function]"===i.call(e)}function u(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),a(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!==typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:s,isPlainObject:c,isUndefined:o,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:l,isStream:function(e){return s(e)&&l(e.pipe)},isURLSearchParams:function(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:u,merge:function e(){var t={};function n(n,r){c(t[r])&&c(n)?t[r]=e(t[r],n):c(n)?t[r]=e({},n):a(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)u(arguments[r],n);return t},extend:function(e,t,n){return u(t,(function(t,i){e[i]=n&&"function"===typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(41),d=n(8),f=n(42),p=(n(12),n(19),n(20),n(28)),h=n(148),b=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).end=null,r.start=null,r}return Object(a.a)(n,[{key:"readEnd",value:function(e,t){return null!=t.end?new Date(t.end):null}},{key:"writeEnd",value:function(e,t){t.end=e?e.getTime():null}},{key:"isAllTime",get:function(){return this.equals(r.allTime)}},{key:"isEmpty",get:function(){return this.equals(r.empty)}},{key:"readStart",value:function(e,t){return null!=t.start?new Date(t.start):null}},{key:"writeStart",value:function(e,t){t.start=e?e.getTime():null}},{key:"clone",value:function(){return new r({end:this.end,start:this.start})}},{key:"expandTo",value:function(e){if(this.isEmpty||this.isAllTime)return this.clone();var t=this.start?Object(h.e)(this.start,e):null,n=this.end?Object(h.c)(Object(h.e)(this.end,e),1,e):null;return new r({start:t,end:n})}},{key:"intersection",value:function(e){var t,n,i,a,o,s,c,l;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return r.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();var u,d,f=null!=(t=null==(n=this.start)?void 0:n.getTime())?t:-1/0,p=null!=(i=null==(a=this.end)?void 0:a.getTime())?i:1/0,h=null!=(o=null==(s=e.start)?void 0:s.getTime())?o:-1/0,b=null!=(c=null==(l=e.end)?void 0:l.getTime())?c:1/0;if(h>=f&&h<=p?u=h:f>=h&&f<=b&&(u=f),p>=h&&p<=b?d=p:b>=f&&b<=p&&(d=b),!isNaN(u)&&!isNaN(d)){var v=new r;return v.start=u===-1/0?null:new Date(u),v.end=d===1/0?null:new Date(d),v}return r.empty}},{key:"offset",value:function(e,t){if(this.isEmpty||this.isAllTime)return this.clone();var n=new r,i=this.start,a=this.end;return i&&(n.start=Object(h.c)(i,e,t)),a&&(n.end=Object(h.c)(a,e,t)),n}},{key:"equals",value:function(e){if(!e)return!1;var t=this.start?this.start.getTime():this.start,n=this.end?this.end.getTime():this.end,r=e.start?e.start.getTime():e.start,i=e.end?e.end.getTime():e.end;return t===r&&n===i}},{key:"union",value:function(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return v.clone();var t=this.start&&e.start?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,n=this.end&&e.end?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new r({start:t,end:n})}}],[{key:"allTime",get:function(){return v}},{key:"empty",get:function(){return y}}]),n}(p.a);Object(c.a)([Object(l.b)({type:Date,json:{write:{allowNull:!0}}})],b.prototype,"end",void 0),Object(c.a)([Object(u.a)("end")],b.prototype,"readEnd",null),Object(c.a)([Object(f.a)("end")],b.prototype,"writeEnd",null),Object(c.a)([Object(l.b)({readOnly:!0,json:{read:!1}})],b.prototype,"isAllTime",null),Object(c.a)([Object(l.b)({readOnly:!0,json:{read:!1}})],b.prototype,"isEmpty",null),Object(c.a)([Object(l.b)({type:Date,json:{write:{allowNull:!0}}})],b.prototype,"start",void 0),Object(c.a)([Object(u.a)("start")],b.prototype,"readStart",null),Object(c.a)([Object(f.a)("start")],b.prototype,"writeStart",null);var v=new(b=r=Object(c.a)([Object(d.a)("esri.TimeExtent")],b)),y=new b({start:void 0,end:void 0}),m=b;t.a=m},function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return T})),n.d(t,"c",(function(){return _})),n.d(t,"d",(function(){return x})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return k})),n.d(t,"g",(function(){return j}));var r=n(31),i=n(4),a=n(45),o=n(27),s=n(11),c=n(175),l=n(86),u=n(242),d=n(374),f=Object(c.d)();function p(e,t,n,r,i,a,o){var s=Object(u.d)(t),c=n.tolerance;if(!s)if(e.boundingInfo)Object(l.a)(0===e.primitiveType),b(e.boundingInfo,r,i,c,a,o);else{var d=e.indices.get("position"),f=e.vertexAttributes.get("position");y(r,i,0,d.length/3,d,f,void 0,a,o)}}var h=Object(o.e)();function b(e,t,n,r,a,o){if(!Object(i.j)(e)){var l=function(e,t,n){return Object(s.v)(n,1/(t[0]-e[0]),1/(t[1]-e[1]),1/(t[2]-e[2]))}(t,n,h);if(Object(c.s)(f,e.getBBMin()),Object(c.r)(f,e.getBBMax()),Object(i.k)(a)&&a.applyToAabb(f),function(e,t,n,r){return function(e,t,n,r,i){var a=(e[0]-r-t[0])*n[0],o=(e[3]+r-t[0])*n[0],s=Math.min(a,o),c=Math.max(a,o),l=(e[1]-r-t[1])*n[1],u=(e[4]+r-t[1])*n[1];if((c=Math.min(c,Math.max(l,u)))<0)return!1;if((s=Math.max(s,Math.min(l,u)))>c)return!1;var d=(e[2]-r-t[2])*n[2],f=(e[5]+r-t[2])*n[2];return!((c=Math.min(c,Math.max(d,f)))<0)&&!((s=Math.max(s,Math.min(d,f)))>c)&&s<i}(e,t,n,r,1/0)}(f,t,l,r)){var u=e.primitiveIndices,d=e.indices,p=e.position,v=u?u.length:d.length/3;if(v>E){var m=e.getChildren();if(void 0!==m){for(var g=0;g<8;++g)void 0!==m[g]&&b(m[g],t,n,r,a,o);return}}y(t,n,0,v,d,p,u,a,o)}}}var v=Object(o.e)();function y(e,t,n,a,o,s,c,l,u){if(c)return function(e,t,n,a,o,s,c,l,u){for(var d=s.data,f=s.stride||s.size,p=e[0],h=e[1],b=e[2],y=t[0]-p,m=t[1]-h,g=t[2]-b,j=n;j<a;++j){var w,_,k,x,S,T,E=c[j],C=3*E,P=f*o[C++],I=d[P++],M=d[P++],A=d[P];P=f*o[C++];var R=d[P++],L=d[P++],F=d[P];P=f*o[C];var D=d[P++],N=d[P++],V=d[P];Object(i.k)(l)&&(w=l.applyToVertex(I,M,A,j),I=(_=Object(r.a)(w,3))[0],M=_[1],A=_[2],k=l.applyToVertex(R,L,F,j),R=(x=Object(r.a)(k,3))[0],L=x[1],F=x[2],S=l.applyToVertex(D,N,V,j),D=(T=Object(r.a)(S,3))[0],N=T[1],V=T[2]);var z=R-I,U=L-M,B=F-A,G=D-I,q=N-M,H=V-A,W=m*H-q*g,$=g*G-H*y,J=y*q-G*m,Y=z*W+U*$+B*J;if(!(Math.abs(Y)<=Number.EPSILON)){var K=p-I,Z=h-M,X=b-A,Q=K*W+Z*$+X*J;if(Y>0){if(Q<0||Q>Y)continue}else if(Q>0||Q<Y)continue;var ee=Z*B-U*X,te=X*z-B*K,ne=K*U-z*Z,re=y*ee+m*te+g*ne;if(Y>0){if(re<0||Q+re>Y)continue}else if(re>0||Q+re<Y)continue;var ie=(G*ee+q*te+H*ne)/Y;ie>=0&&u(ie,O(z,U,B,G,q,H,v),E)}}}(e,t,n,a,o,s,c,l,u);for(var d=s.data,f=s.stride||s.size,p=e[0],h=e[1],b=e[2],y=t[0]-p,m=t[1]-h,g=t[2]-b,j=n,w=3*n;j<a;++j){var _,k,x,S,T,E,C=f*o[w++],P=d[C++],I=d[C++],M=d[C];C=f*o[w++];var A=d[C++],R=d[C++],L=d[C];C=f*o[w++];var F=d[C++],D=d[C++],N=d[C];Object(i.k)(l)&&(_=l.applyToVertex(P,I,M,j),P=(k=Object(r.a)(_,3))[0],I=k[1],M=k[2],x=l.applyToVertex(A,R,L,j),A=(S=Object(r.a)(x,3))[0],R=S[1],L=S[2],T=l.applyToVertex(F,D,N,j),F=(E=Object(r.a)(T,3))[0],D=E[1],N=E[2]);var V=A-P,z=R-I,U=L-M,B=F-P,G=D-I,q=N-M,H=m*q-G*g,W=g*B-q*y,$=y*G-B*m,J=V*H+z*W+U*$;if(!(Math.abs(J)<=Number.EPSILON)){var Y=p-P,K=h-I,Z=b-M,X=Y*H+K*W+Z*$;if(J>0){if(X<0||X>J)continue}else if(X>0||X<J)continue;var Q=K*U-z*Z,ee=Z*V-U*Y,te=Y*z-V*K,ne=y*Q+m*ee+g*te;if(J>0){if(ne<0||X+ne>J)continue}else if(ne>0||X+ne<J)continue;var re=(B*Q+G*ee+q*te)/J;re>=0&&u(re,O(V,z,U,B,G,q,v),j)}}}var m=Object(o.e)(),g=Object(o.e)();function O(e,t,n,r,i,a,o){return Object(s.v)(m,e,t,n),Object(s.v)(g,r,i,a),Object(s.f)(o,m,g),Object(s.q)(o,o),o}function j(e,t,n,r,i){var o=(n.screenLength||0)*e.pixelRatio;i&&(o=Object(d.d)(o,r,t,i));var s=o*Math.tan(.5*e.fovY)/(.5*e.fullHeight);return Object(a.i)(s*t,n.minWorldLength||0,null!=n.maxWorldLength?n.maxWorldLength:1/0)}function w(e,t,n){if(e){var r=e.parameters,i=e.paddingPixelsOverride;t.setUniform4f(n,r.divisor,r.offset,r.minPixelSize,i)}}function _(e,t){var n=t?_(t):{};for(var r in e){var i=e[r];i&&i.forEach&&(i=S(i)),null==i&&r in n||(n[r]=i)}return n}function k(e,t){var n=!1;for(var r in t){var i=t[r];void 0!==i&&(n=!0,Array.isArray(i)?e[r]=i.slice():e[r]=i)}return n}function x(e,t,n,r,i){if(t.options.selectionMode){for(var o=e.vertexAttributes.get("position").data,s=e.vertexAttributes.get("size"),c=s&&s.data[0],l=n[0],u=n[1],d=((c+r)/2+4)*e.screenToWorldRatio,f=Number.MAX_VALUE,p=0;p<o.length-5;p+=3){var h=o[p],b=o[p+1],v=l-h,y=u-b,m=o[p+3]-h,g=o[p+4]-b,O=Object(a.d)((m*v+g*y)/(m*m+g*g),0,1),j=m*O-v,w=g*O-y,_=j*j+w*w;_<f&&(f=_)}f<d*d&&i()}}function S(e){var t=[];return e.forEach((function(e){return t.push(e)})),t}var T={multiply:1,ignore:2,replace:3,tint:4},E=1e3},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(22)),u=(n(13),n(1)),d=n(58),f=n(49),p=n(8),h=n(42),b=(n(12),n(19),n(20),n(39)),v=n(125),y=n(38),m=n(333),g=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).backgroundColor=null,e.borderLineColor=null,e.borderLineSize=null,e.font=new m.a,e.horizontalAlignment="center",e.kerning=!0,e.haloColor=null,e.haloSize=null,e.rightToLeft=null,e.rotated=!1,e.text="",e.type="text",e.verticalAlignment=null,e.xoffset=0,e.yoffset=0,e.angle=0,e.width=null,e.lineWidth=192,e.lineHeight=1,e}return Object(a.a)(n,[{key:"normalizeCtorArgs",value:function(e,t,n){if(e&&"string"!=typeof e)return e;var r={};return e&&(r.text=e),t&&(r.font=t),n&&(r.color=n),r}},{key:"writeLineWidth",value:function(e,t,n,r){r&&"string"!=typeof r?r.origin:t[n]=e}},{key:"castLineWidth",value:function(e){return Object(y.j)(e)}},{key:"writeLineHeight",value:function(e,t,n,r){r&&"string"!=typeof r?r.origin:t[n]=e}},{key:"clone",value:function(){return new r({angle:this.angle,backgroundColor:Object(l.a)(this.backgroundColor),borderLineColor:Object(l.a)(this.borderLineColor),borderLineSize:this.borderLineSize,color:Object(l.a)(this.color),font:this.font&&this.font.clone(),haloColor:Object(l.a)(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}},{key:"hash",value:function(){return"".concat(this.backgroundColor&&this.backgroundColor.hash(),".").concat(this.borderLineColor,".").concat(this.borderLineSize,".").concat(this.color.hash(),".").concat(this.font&&this.font.hash(),".").concat(this.haloColor&&this.haloColor.hash(),".").concat(this.haloSize,".").concat(this.horizontalAlignment,".").concat(this.kerning,".").concat(this.rightToLeft,".").concat(this.rotated,".").concat(this.text,".").concat(this.verticalAlignment,".").concat(this.width,".").concat(this.xoffset,".").concat(this.yoffset,".").concat(this.lineHeight,".").concat(this.lineWidth,".").concat(this.angle)}}]),n}(v.a);Object(c.a)([Object(u.b)({type:b.a,json:{write:!0}})],g.prototype,"backgroundColor",void 0),Object(c.a)([Object(u.b)({type:b.a,json:{write:!0}})],g.prototype,"borderLineColor",void 0),Object(c.a)([Object(u.b)({type:Number,json:{write:!0}})],g.prototype,"borderLineSize",void 0),Object(c.a)([Object(u.b)({type:m.a,json:{write:!0}})],g.prototype,"font",void 0),Object(c.a)([Object(u.b)({type:["left","right","center","justify"],json:{write:!0}})],g.prototype,"horizontalAlignment",void 0),Object(c.a)([Object(u.b)({type:Boolean,json:{write:!0}})],g.prototype,"kerning",void 0),Object(c.a)([Object(u.b)({type:b.a,json:{write:!0}})],g.prototype,"haloColor",void 0),Object(c.a)([Object(u.b)({type:Number,cast:y.j,json:{write:!0}})],g.prototype,"haloSize",void 0),Object(c.a)([Object(u.b)({type:Boolean,json:{write:!0}})],g.prototype,"rightToLeft",void 0),Object(c.a)([Object(u.b)({type:Boolean,json:{write:!0}})],g.prototype,"rotated",void 0),Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],g.prototype,"text",void 0),Object(c.a)([Object(f.a)({esriTS:"text"},{readOnly:!0})],g.prototype,"type",void 0),Object(c.a)([Object(u.b)({type:["baseline","top","middle","bottom"],json:{write:!0}})],g.prototype,"verticalAlignment",void 0),Object(c.a)([Object(u.b)({type:Number,cast:y.j,json:{write:!0}})],g.prototype,"xoffset",void 0),Object(c.a)([Object(u.b)({type:Number,cast:y.j,json:{write:!0}})],g.prototype,"yoffset",void 0),Object(c.a)([Object(u.b)({type:Number,json:{read:function(e){return e&&-1*e},write:function(e,t){return t.angle=e&&-1*e}}})],g.prototype,"angle",void 0),Object(c.a)([Object(u.b)({type:Number,json:{write:!0}})],g.prototype,"width",void 0),Object(c.a)([Object(u.b)({type:Number})],g.prototype,"lineWidth",void 0),Object(c.a)([Object(h.a)("lineWidth")],g.prototype,"writeLineWidth",null),Object(c.a)([Object(d.a)("lineWidth")],g.prototype,"castLineWidth",null),Object(c.a)([Object(u.b)({type:Number})],g.prototype,"lineHeight",void 0),Object(c.a)([Object(h.a)("lineHeight")],g.prototype,"writeLineHeight",null);var O=g=r=Object(c.a)([Object(p.a)("esri.symbols.TextSymbol")],g);t.a=O},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(4)),u=(n(13),n(1)),d=n(58),f=n(8),p=(n(12),n(19),n(20),n(28)),h=n(68),b=n(71),v=n(17),y=n(41),m=n(42),g=n(43),O=n(45),j=n(272),w=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).position=new g.a([0,0,0]),e.heading=0,e.tilt=0,e.fov=55,e}return Object(a.a)(n,[{key:"normalizeCtorArgs",value:function(e,t,n,r){if(e&&"object"==typeof e&&("x"in e||Array.isArray(e))){var i={position:e};return null!=t&&(i.heading=t),null!=n&&(i.tilt=n),null!=r&&(i.fov=r),i}return e}},{key:"writePosition",value:function(e,t,n,r){var i=e.clone();i.x=Object(v.i)(e.x||0),i.y=Object(v.i)(e.y||0),i.z=e.hasZ?Object(v.i)(e.z||0):e.z,t[n]=i.write(null,r)}},{key:"readPosition",value:function(e,t){var n=new g.a;return n.read(e,t),n.x=Object(v.i)(n.x||0),n.y=Object(v.i)(n.y||0),n.z=n.hasZ?Object(v.i)(n.z||0):n.z,n}},{key:"equals",value:function(e){return!!e&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}},{key:"clone",value:function(){return new r({position:this.position.clone(),heading:this.heading,tilt:this.tilt,fov:this.fov})}}]),n}(p.a);Object(c.a)([Object(u.b)({type:g.a,json:{write:{isRequired:!0}}})],w.prototype,"position",void 0),Object(c.a)([Object(m.a)("position")],w.prototype,"writePosition",null),Object(c.a)([Object(y.a)("position")],w.prototype,"readPosition",null),Object(c.a)([Object(u.b)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Object(d.a)((function(e){return j.b.normalize(Object(v.i)(e))}))],w.prototype,"heading",void 0),Object(c.a)([Object(u.b)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Object(d.a)((function(e){return Object(O.d)(Object(v.i)(e),-180,180)}))],w.prototype,"tilt",void 0),Object(c.a)([Object(u.b)({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],w.prototype,"fov",void 0);var _,k=w=r=Object(c.a)([Object(f.a)("esri.Camera")],w),x=_=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).rotation=0,r.scale=0,r.targetGeometry=null,r.camera=null,r}return Object(a.a)(n,[{key:"castRotation",value:function(e){return(e%=360)<0&&(e+=360),e}},{key:"clone",value:function(){return new _({rotation:this.rotation,scale:this.scale,targetGeometry:Object(l.k)(this.targetGeometry)?this.targetGeometry.clone():null,camera:Object(l.k)(this.camera)?this.camera.clone():null})}}]),n}(p.a);function S(){return{enabled:!this.camera}}Object(c.a)([Object(u.b)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:S}}}}})],x.prototype,"rotation",void 0),Object(c.a)([Object(d.a)("rotation")],x.prototype,"castRotation",null),Object(c.a)([Object(u.b)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:S}}}}})],x.prototype,"scale",void 0),Object(c.a)([Object(u.b)({types:b.c,json:{read:h.a,write:!0,origins:{"web-scene":{read:h.a,write:{overridePolicy:S}}}}})],x.prototype,"targetGeometry",void 0),Object(c.a)([Object(u.b)({type:k,json:{write:!0}})],x.prototype,"camera",void 0);var T=x=_=Object(c.a)([Object(f.a)("esri.Viewpoint")],x);t.a=T},function(e,t,n){"use strict";function r(){return[1,0,0,1,0,0]}function i(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));Object.freeze({__proto__:null,create:r,clone:i,fromValues:function(e,t,n,r,i,a){return[e,t,n,r,i,a]},createView:function(e,t){return new Float64Array(e,t,6)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s}));var r=n(4),i=n(40),a=n(422);function o(e,t){var n=e.view;n&&(t&&n.ready&&n.activeTool!==e?(n.activeTool=e,Object(a.b)(n)&&n.focus()):t||n.activeTool!==e||(n.activeTool=null))}function s(e,t,n){var i=e.activeTool;t!==i&&(Object(r.k)(i)&&i.deactivate&&i.deactivate(),n(t),Object(r.k)(t)&&t.activate&&t.activate())}function c(){var e=new i.a;return e.on("after-add",(function(e){var t=e.item;t.view&&t.view.ready&&t.attach()})),e.on("after-remove",(function(e){var t=e.item;o(t,!1),t.destroyed||t.detach()})),e}function l(e){return!1!==e.visible&&!1!==e.editable&&(null==e.hasEditableFlag||e.hasEditableFlag(1))}function u(e){return Object(r.j)(e)?{}:"function"==typeof e?e():e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return M})),n.d(t,"b",(function(){return w})),n.d(t,"c",(function(){return _})),n.d(t,"d",(function(){return I})),n.d(t,"e",(function(){return A})),n.d(t,"f",(function(){return x})),n.d(t,"g",(function(){return R})),n.d(t,"h",(function(){return j}));var r=n(14),i=n(16),a=(n(13),n(39)),o=(n(56),n(9)),s=n(110),c=n(429),l=0,u=0,d=Object(i.a)("android"),f=Object(i.a)("chrome")||d&&d>=4?"auto":"optimizeLegibility",p={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},h=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,b={},v={},y={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},m=Math.PI;function g(e,t){var n=e*(m/180);return Math.abs(t*Math.sin(n))+Math.abs(t*Math.cos(n))}function O(e){return e.map((function(e){return"".concat(e.command," ").concat(e.values.join(" "))})).join(" ").trim()}function j(e,t,n,r){if(e){if("circle"===e.type)return Object(o.a)("circle",{fill:t,"fill-rule":"evenodd",stroke:n.color,"stroke-width":n.width,"stroke-linecap":n.cap,"stroke-linejoin":n.join,"stroke-dasharray":n.dashArray,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,r:e.r});if("ellipse"===e.type)return Object(o.a)("ellipse",{fill:t,"fill-rule":"evenodd",stroke:n.color,"stroke-width":n.width,"stroke-linecap":n.cap,"stroke-linejoin":n.join,"stroke-dasharray":n.dashArray,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,rx:e.rx,ry:e.ry});if("rect"===e.type)return Object(o.a)("rect",{fill:t,"fill-rule":"evenodd",stroke:n.color,"stroke-width":n.width,"stroke-linecap":n.cap,"stroke-linejoin":n.join,"stroke-dasharray":n.dashArray,"stroke-miterlimit":"4",x:e.x,y:e.y,width:e.width,height:e.height});if("image"===e.type)return Object(o.a)("image",{href:e.src,x:e.x,y:e.y,width:e.width,height:e.height,preserveAspectRatio:"none"});if("path"===e.type){var i="string"!=typeof e.path?O(e.path):e.path;return Object(o.a)("path",{fill:t,"fill-rule":"evenodd",stroke:n.color,"stroke-width":n.width,"stroke-linecap":n.cap,"stroke-linejoin":n.join,"stroke-dasharray":n.dashArray,"stroke-miterlimit":"4",d:i})}if("text"===e.type)return Object(o.a)("text",{fill:t,"fill-rule":"evenodd",stroke:n.color,"stroke-width":n.width,"stroke-linecap":n.cap,"stroke-linejoin":n.join,"stroke-dasharray":n.dashArray,"stroke-miterlimit":"4","text-anchor":r.align,"text-decoration":r.decoration,kerning:r.kerning,rotate:r.rotate,"text-rendering":f,"font-style":r.font.style,"font-variant":r.font.variant,"font-weight":r.font.weight,"font-size":r.font.size,"font-family":r.font.family,x:e.x,y:e.y},e.text)}return null}function w(e){var t={fill:"none",pattern:null,linearGradient:null};if(e)if("type"in e&&"pattern"===e.type){var n="patternId-"+ ++l;t.fill="url(#".concat(n,")"),t.pattern={id:n,x:e.x,y:e.y,width:e.width,height:e.height,image:{x:0,y:0,width:e.width,height:e.height,href:e.src}}}else if("type"in e&&"linear"===e.type){var r="linearGradientId-"+ ++u;t.fill="url(#".concat(r,")"),t.linearGradient={id:r,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stops:e.colors.map((function(e){return{offset:e.offset,color:e.color&&new a.a(e.color).toString()}}))}}else if(e){var i=new a.a(e);t.fill=i.toString()}return t}function _(e){var t={color:"none",width:1,cap:"butt",join:"4",dashArray:"none"};if(e&&(null!=e.width&&(t.width=e.width),e.cap&&(t.cap=e.cap),e.join&&(t.join=e.join.toString()),e.color&&(t.color=new a.a(e.color).toString()),e.style)){var n=null;if(e.style in y&&(n=y[e.style]),Array.isArray(n)){n=n.slice(0);for(var r=0;r<n.length;++r)n[r]*=e.width;if("butt"!==e.cap){for(var i=0;i<n.length;i+=2)n[i]-=e.width,n[i]<1&&(n[i]=1);for(var o=1;o<n.length;o+=2)n[o]+=e.width}n=n.join(",")}t.dashArray=n}return t}function k(e,t){var n={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};return e&&(n.align=e.align,n.decoration=e.decoration,n.kerning=e.kerning?"auto":"0",n.rotate=e.rotated?"90":"0",n.font.style=t.style||"normal",n.font.variant=t.variant||"normal",n.font.weight=t.weight||"normal",n.font.size=t.size&&t.size.toString()||"10pt",n.font.family=t.family||"serif"),n}function x(e){var t=e.pattern,n=e.linearGradient;if(t)return Object(o.a)("pattern",{id:t.id,patternUnits:"userSpaceOnUse",x:t.x,y:t.y,width:t.width,height:t.height},Object(o.a)("image",{x:t.image.x,y:t.image.y,width:t.image.width,height:t.image.height,href:t.image.href}));if(n){var r=n.stops.map((function(e,t){return Object(o.a)("stop",{key:"".concat(t,"-stop"),offset:e.offset,"stop-color":e.color})}));return Object(o.a)("linearGradient",{id:n.id,gradientUnits:"userSpaceOnUse",x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2},r)}return null}function S(e,t,n){return Object(s.h)(e,Object(s.d)(e),[t,n])}function T(e,t,n,r,i){return Object(s.g)(e,Object(s.d)(e),[t,n]),e[4]=e[4]*t-r*t+r,e[5]=e[5]*n-i*n+i,e}function E(e,t){b&&"left"in b?(b.left>e&&(b.left=e),b.right<e&&(b.right=e),b.top>t&&(b.top=t),b.bottom<t&&(b.bottom=t)):b={left:e,bottom:t,right:e,top:t}}function C(e){var t,n=e.args,r=n.length;switch(e.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(t=0;t<r;t+=2)E(n[t],n[t+1]);v.x=n[r-2],v.y=n[r-1];break;case"H":for(t=0;t<r;++t)E(n[t],v.y);v.x=n[r-1];break;case"V":for(t=0;t<r;++t)E(v.x,n[t]);v.y=n[r-1];break;case"m":var i=0;"x"in v||(E(v.x=n[0],v.y=n[1]),i=2);for(t=i;t<r;t+=2)E(v.x+=n[t],v.y+=n[t+1]);break;case"l":case"t":for(t=0;t<r;t+=2)E(v.x+=n[t],v.y+=n[t+1]);break;case"h":for(t=0;t<r;++t)E(v.x+=n[t],v.y);break;case"v":for(t=0;t<r;++t)E(v.x,v.y+=n[t]);break;case"c":for(t=0;t<r;t+=6)E(v.x+n[t],v.y+n[t+1]),E(v.x+n[t+2],v.y+n[t+3]),E(v.x+=n[t+4],v.y+=n[t+5]);break;case"s":case"q":for(t=0;t<r;t+=4)E(v.x+n[t],v.y+n[t+1]),E(v.x+=n[t+2],v.y+=n[t+3]);break;case"A":for(t=0;t<r;t+=7)E(n[t+5],n[t+6]);v.x=n[r-2],v.y=n[r-1];break;case"a":for(t=0;t<r;t+=7)E(v.x+=n[t+5],v.y+=n[t+6])}}function P(e,t,n){var r,i=p[e.toLowerCase()];"number"==typeof i&&(i?t.length>=i&&(r={action:e,args:t.slice(0,t.length-t.length%i)},n.push(r),C(r)):(r={action:e,args:[]},n.push(r),C(r)))}function I(e){var t={x:0,y:0,width:0,height:0};if("circle"===e.type)t.x=e.cx-e.r,t.y=e.cy-e.r,t.width=2*e.r,t.height=2*e.r;else if("ellipse"===e.type)t.x=e.cx-e.rx,t.y=e.cy-e.ry,t.width=2*e.rx,t.height=2*e.ry;else if("image"===e.type||"rect"===e.type)t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height;else if("path"===e.type){var n=function(e){var t=("string"!=typeof e.path?O(e.path):e.path).match(h),n=[];if(b={},v={},!t)return null;for(var r="",i=[],a=t.length,o=0;o<a;++o){var s=t[o],c=parseFloat(s);isNaN(c)?(r&&P(r,i,n),i=[],r=s):i.push(c)}P(r,i,n);var l={x:0,y:0,width:0,height:0};return b&&"left"in b&&(l.x=b.left,l.y=b.top,l.width=b.right-b.left,l.height=b.bottom-b.top),l}(e);t.x=n.x,t.y=n.y,t.width=n.width,t.height=n.height}return t}function M(e){var t,n={x:0,y:0,width:0,height:0},i=null,a=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY,s=Object(r.a)(e);try{for(s.s();!(t=s.n()).done;){var c=t.value;i?(i.x=Math.min(i.x,c.x),i.y=Math.min(i.y,c.y),a=Math.max(a,c.x+c.width),o=Math.max(o,c.y+c.height)):((i=n).x=c.x,i.y=c.y,a=c.x+c.width,o=c.y+c.height)}}catch(l){s.e(l)}finally{s.f()}return i&&(i.width=a-i.x,i.height=o-i.y),i}function A(e,t,n,r,i,a,o,l){var u=(o&&a?g(a,t):t)/2,d=(o&&a?g(a,n):n)/2,f=e.width+r,p=e.height+r,h=Object(c.a)(),b=Object(c.a)(),v=!1;if(i&&0!==f&&0!==p){var y=f/p,m=t>n?t:n,O=1,j=1;isNaN(m)||(y>1?(O=m/f,j=m/y/p):(j=m/p,O=m*y/f)),Object(s.e)(b,b,T(h,O,j,u,d)),v=!0}var w=e.x+(f-r)/2,_=e.y+(p-r)/2;if(Object(s.e)(b,b,S(h,u-w,d-_)),!v&&(f>t||p>n)){var k=f/t>p/n,x=(k?t:n)/(k?f:p);Object(s.e)(b,b,T(h,x,x,w,_))}return a&&Object(s.e)(b,b,function(e,t,n,r){var i=t%360*Math.PI/180;Object(s.f)(e,Object(s.d)(e),i);var a=Math.cos(i),o=Math.sin(i),c=e[4],l=e[5];return e[4]=c*a-l*o+r*o-n*a+n,e[5]=l*a+c*o-n*o-r*a+r,e}(h,a,w,_)),l&&Object(s.e)(b,b,S(h,l[0],l[1])),"matrix(".concat(b[0],",").concat(b[1],",").concat(b[2],",").concat(b[3],",").concat(b[4],",").concat(b[5],")")}function R(e,t,n,i){var a,s=[],c=[],l=Object(r.a)(e);try{for(l.s();!(a=l.n()).done;){var u,d=a.value,f=[],p=[],h=0,b=0,v=0,y=Object(r.a)(d);try{for(y.s();!(u=y.n()).done;){var m=u.value,O=m.shape,S=m.fill,T=m.stroke,E=m.font,C=m.offset;h+=T&&T.width||0;var P=w(S),R=_(T),L="text"===O.type?k(O,E):null;s.push(x(P)),f.push(j(O,P.fill,R,L)),p.push(I(O)),C&&(b+=C[0],v+=C[1])}}catch(D){y.e(D)}finally{y.f()}var F=A(M(p),t,n,h,null==i?void 0:i.scale,null==i?void 0:i.rotation,null==i?void 0:i.useRotationSize,[b,v]);c.push(Object(o.a)("g",{transform:F},f))}}catch(D){l.e(D)}finally{l.f()}return null!=i&&i.useRotationSize&&null!=i&&i.rotation&&(t=g(null==i?void 0:i.rotation,t),n=g(null==i?void 0:i.rotation,n)),Object(o.a)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:n},Object(o.a)("defs",null,s),c)}},function(e,t,n){"use strict";var r="Invariant failed";t.a=function(e,t){if(!e)throw new Error(r)}},function(e,t,n){"use strict";var r=n(31),i=n(2),a=n(3),o=n(145),s=function(){function e(t,n,r,a){Object(i.a)(this,e),this.set(t,n,r,a)}return Object(a.a)(e,[{key:"key",get:function(){return this}},{key:"id",get:function(){return this.toString()},set:function(e){this.set(e)}},{key:"acquire",value:function(e,t,n,r){this.set(e,t,n,r)}},{key:"contains",value:function(e){var t=e.level-this.level;return this.row===e.row>>t&&this.col===e.col>>t&&this.world===e.world}},{key:"equals",value:function(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}},{key:"clone",value:function(){return new e(this)}},{key:"release",value:function(){this.level=0,this.row=0,this.col=0,this.world=0}},{key:"set",value:function(e,t,n,i){if(null==e)this.level=0,this.row=0,this.col=0,this.world=0;else if("object"==typeof e)this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if("string"==typeof e){var a=e.split("/"),o=Object(r.a)(a,4),s=o[0],c=o[1],l=o[2],u=o[3];this.level=parseFloat(s),this.row=parseFloat(c),this.col=parseFloat(l),this.world=parseFloat(u)}else this.level=+e,this.row=+t,this.col=+n,this.world=+i||0;return this}},{key:"toString",value:function(){return"".concat(this.level,"/").concat(this.row,"/").concat(this.col,"/").concat(this.world)}},{key:"getParentKey",value:function(){return this.level<=0?null:new e(this.level-1,this.row>>1,this.col>>1,this.world)}},{key:"getChildKeys",value:function(){var t=this.level+1,n=this.row<<1,r=this.col<<1,i=this.world;return[new e(t,n,r,i),new e(t,n,r+1,i),new e(t,n+1,r,i),new e(t,n+1,r+1,i)]}},{key:"compareRowMajor",value:function(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}}],[{key:"getId",value:function(e,t,n,r){return"object"==typeof e?"".concat(e.level,"/").concat(e.row,"/").concat(e.col,"/").concat(e.world):"".concat(e,"/").concat(t,"/").concat(n,"/").concat(r)}}]),e}();s.pool=new o.a(s,null,null,25,50),t.a=s},function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return x}));var r=n(14),i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=n(90),u=n(8),d=n(126),f=n(36),p=n(323),h=n(37),b=n(4),v=n(413),y=n(35),m=n(22),g=function(){function e(){Object(i.a)(this,e),this._propertyOriginMap=new Map,this._originStores=new Array(d.a),this._values=new Map}return Object(a.a)(e,[{key:"clone",value:function(t){var n=this,r=new e,i=this._originStores[0];i&&i.forEach((function(e,t){r.set(t,Object(m.a)(e),0)}));for(var a=function(e){var i=n._originStores[e];i&&i.forEach((function(n,i){t&&t.has(i)||r.set(i,Object(m.a)(n),e)}))},o=2;o<d.a;o++)a(o);return r}},{key:"get",value:function(e,t){var n=void 0===t?this._values:this._originStores[t];return n?n.get(e):void 0}},{key:"keys",value:function(e){var t=null==e?this._values:this._originStores[e];return t?Object(y.a)(t.keys()):[]}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,r=this._originStores[n];if(r||(r=new Map,this._originStores[n]=r),r.set(e,t),!this._values.has(e)||Object(b.d)(this._propertyOriginMap.get(e))<=n){var i=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,n),i!==t}return!1}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=this._originStores[t];if(n){var r=n.get(e);if(n.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(var i=t-1;i>=0;i--){var a=this._originStores[i];if(a&&a.has(e)){this._values.set(e,a.get(e)),this._propertyOriginMap.set(e,i);break}}}return r}}},{key:"has",value:function(e,t){var n=void 0===t?this._values:this._originStores[t];return!!n&&n.has(e)}},{key:"revert",value:function(e,t){for(;t>0&&!this.has(e,t);)--t;var n=this._originStores[t],r=n&&n.get(e),i=this._values.get(e);return this._values.set(e,r),this._propertyOriginMap.set(e,t),i!==r}},{key:"originOf",value:function(e){return this._propertyOriginMap.get(e)||0}},{key:"forEach",value:function(e){this._values.forEach(e)}}]),e}(),O=function(e){var t=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];e=t.call.apply(t,[this].concat(a));var s=Object(b.d)(Object(l.a)(Object(h.a)(e))),c=s.metadatas,u=s.store,d=new g;return s.store=d,u.keys().forEach((function(e){d.set(e,u.get(e),0)})),Object.keys(c).forEach((function(e){s.internalGet(e)&&d.set(e,s.internalGet(e),0)})),e}return Object(a.a)(n,[{key:"read",value:function(e,t){Object(v.a)(this,e,t)}},{key:"getAtOrigin",value:function(e,t){var n=j(this),r=Object(d.d)(t);if("string"==typeof e)return n.get(e,r);var i={};return e.forEach((function(e){i[e]=n.get(e,r)})),i}},{key:"originOf",value:function(e){return Object(d.b)(this.originIdOf(e))}},{key:"originIdOf",value:function(e){return j(this).originOf(e)}},{key:"revert",value:function(e,t){var n=j(this),r=Object(d.d)(t),i=Object(l.a)(this);("string"==typeof e?"*"===e?n.keys(r):[e]:e).forEach((function(e){i.propertyInvalidated(e),n.revert(e,r),i.propertyCommitted(e)}))}}]),n}(e);return t=Object(c.a)([Object(u.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function j(e){return Object(l.a)(e).store}var w=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return n}(O(f.a));w=Object(c.a)([Object(u.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],w);function _(e){return Object(l.a)(e).store}var k=function(e){var t=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){Object(i.a)(this,n);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t.call.apply(t,[this].concat(r))}return n}(function(e){var t=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){Object(i.a)(this,n);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t.call.apply(t,[this].concat(r))}return Object(a.a)(n,[{key:"clear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user";return _(this).delete(e,Object(d.d)(t))}},{key:"write",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(p.b)(this,e=e||{},t),e}},{key:"setAtOrigin",value:function(e,t,n){Object(l.a)(this).setAtOrigin(e,t,Object(d.d)(n))}},{key:"removeOrigin",value:function(e){var t,n=_(this),i=Object(d.d)(e),a=n.keys(i),o=Object(r.a)(a);try{for(o.s();!(t=o.n()).done;){var s=t.value;n.originOf(s)===i&&n.set(s,n.get(s,i),6)}}catch(c){o.e(c)}finally{o.f()}}},{key:"updateOrigin",value:function(e,t){for(var n=_(this),r=Object(d.d)(t),i=this.get(e),a=r+1;a<d.a;++a)n.delete(e,a);n.set(e,i,r)}},{key:"toJSON",value:function(e){return this.write({},e)}}]),n}(e);return(t=Object(c.a)([Object(u.a)("esri.core.WriteableMultiOriginJSONSupport")],t)).prototype.toJSON.isDefaultToJSON=!0,t}(O(e)));return t=Object(c.a)([Object(u.a)("esri.core.MultiOriginJSONSupport")],t)},x=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return n}(k(f.a));x=Object(c.a)([Object(u.a)("esri.core.MultiOriginJSONSupport")],x)},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r,i,a,o,s,c,l=n(29),u=n(4),d=n(27),f=n(11),p=n(34);function h(e,t){if(t.slicePlaneEnabled){e.extensions.add("GL_OES_standard_derivatives"),t.sliceEnabledForVertexPrograms&&(e.vertex.uniforms.add("slicePlaneOrigin","vec3"),e.vertex.uniforms.add("slicePlaneBasis1","vec3"),e.vertex.uniforms.add("slicePlaneBasis2","vec3")),e.fragment.uniforms.add("slicePlaneOrigin","vec3"),e.fragment.uniforms.add("slicePlaneBasis1","vec3"),e.fragment.uniforms.add("slicePlaneBasis2","vec3");var n=Object(p.a)(r||(r=Object(l.a)(["\n      struct SliceFactors {\n        float front;\n        float side0;\n        float side1;\n        float side2;\n        float side3;\n      };\n\n      SliceFactors calculateSliceFactors(vec3 pos) {\n        vec3 rel = pos - slicePlaneOrigin;\n\n        vec3 slicePlaneNormal = -cross(slicePlaneBasis1, slicePlaneBasis2);\n        float slicePlaneW = -dot(slicePlaneNormal, slicePlaneOrigin);\n\n        float basis1Len2 = dot(slicePlaneBasis1, slicePlaneBasis1);\n        float basis2Len2 = dot(slicePlaneBasis2, slicePlaneBasis2);\n\n        float basis1Dot = dot(slicePlaneBasis1, rel);\n        float basis2Dot = dot(slicePlaneBasis2, rel);\n\n        return SliceFactors(\n          dot(slicePlaneNormal, pos) + slicePlaneW,\n          -basis1Dot - basis1Len2,\n          basis1Dot - basis1Len2,\n          -basis2Dot - basis2Len2,\n          basis2Dot - basis2Len2\n        );\n      }\n\n      bool sliceByFactors(SliceFactors factors) {\n        return factors.front < 0.0\n          && factors.side0 < 0.0\n          && factors.side1 < 0.0\n          && factors.side2 < 0.0\n          && factors.side3 < 0.0;\n      }\n\n      bool sliceEnabled() {\n        // a slicePlaneBasis1 vector of zero length is used to disable slicing in the shader during draped rendering.\n        return dot(slicePlaneBasis1, slicePlaneBasis1) != 0.0;\n      }\n\n      bool sliceByPlane(vec3 pos) {\n        return sliceEnabled() && sliceByFactors(calculateSliceFactors(pos));\n      }\n\n      #define rejectBySlice(_pos_) sliceByPlane(_pos_)\n      #define discardBySlice(_pos_) { if (sliceByPlane(_pos_)) discard; }\n    "]))),c=Object(p.a)(i||(i=Object(l.a)(["\n      vec4 applySliceHighlight(vec4 color, vec3 pos) {\n        SliceFactors factors = calculateSliceFactors(pos);\n\n        if (sliceByFactors(factors)) {\n          return color;\n        }\n\n        const float HIGHLIGHT_WIDTH = 1.0;\n        const vec4 HIGHLIGHT_COLOR = vec4(0.0, 0.0, 0.0, 0.3);\n\n        factors.front /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.front);\n        factors.side0 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side0);\n        factors.side1 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side1);\n        factors.side2 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side2);\n        factors.side3 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side3);\n\n        float highlightFactor = (1.0 - step(0.5, factors.front))\n          * (1.0 - step(0.5, factors.side0))\n          * (1.0 - step(0.5, factors.side1))\n          * (1.0 - step(0.5, factors.side2))\n          * (1.0 - step(0.5, factors.side3));\n\n        return mix(color, vec4(HIGHLIGHT_COLOR.rgb, color.a), highlightFactor * HIGHLIGHT_COLOR.a);\n      }\n    "]))),u=t.sliceHighlightDisabled?Object(p.a)(a||(a=Object(l.a)(["#define highlightSlice(_color_, _pos_) (_color_)"]))):Object(p.a)(o||(o=Object(l.a)(["\n        ","\n        #define highlightSlice(_color_, _pos_) (sliceEnabled() ? applySliceHighlight(_color_, _pos_) : (_color_))\n      "])),c);t.sliceEnabledForVertexPrograms&&e.vertex.code.add(n),e.fragment.code.add(n),e.fragment.code.add(u)}else{var d=Object(p.a)(s||(s=Object(l.a)(["\n      #define rejectBySlice(_pos_) false\n      #define discardBySlice(_pos_) {}\n      #define highlightSlice(_color_, _pos_) (_color_)\n    "])));t.sliceEnabledForVertexPrograms&&e.vertex.code.add(d),e.fragment.code.add(d)}}(c=h||(h={})).bindUniformsWithOrigin=function(e,t,n){c.bindUniforms(e,t,n.slicePlane,n.origin)},c.bindUniforms=function(e,t,n,r){t.slicePlaneEnabled&&(Object(u.k)(n)?(r?(Object(f.i)(b,n.origin,r),e.setUniform3fv("slicePlaneOrigin",b)):e.setUniform3fv("slicePlaneOrigin",n.origin),e.setUniform3fv("slicePlaneBasis1",n.basis1),e.setUniform3fv("slicePlaneBasis2",n.basis2)):(e.setUniform3fv("slicePlaneBasis1",d.b),e.setUniform3fv("slicePlaneBasis2",d.b),e.setUniform3fv("slicePlaneOrigin",d.b)))};var b=Object(d.e)()},function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return b}));var r=n(37),i=n(5),a=n(6),o=n(35),s=n(2),c=n(3),l=n(0),u=n(4),d=n(8),f=n(24),p=n(36),h=function(){function e(t){var n=this;Object(s.a)(this,e),this.instance=t,this._resolver=Object(f.f)(),this._status=0,this._resolvingPromises=[],this._resolver.promise.then((function(){n._status=1,n._cleanUp()}),(function(){n._status=2,n._cleanUp()}))}return Object(c.a)(e,[{key:"addResolvingPromise",value:function(e){this._resolvingPromises.push(e),this._tryResolve()}},{key:"isResolved",value:function(){return 1===this._status}},{key:"isRejected",value:function(){return 2===this._status}},{key:"isFulfilled",value:function(){return 0!==this._status}},{key:"abort",value:function(){this._resolver.reject(Object(f.e)())}},{key:"when",value:function(e,t){return this._resolver.promise.then(e,t)}},{key:"_cleanUp",value:function(){this._allPromise=this._resolvingPromises=this._allPromise=null}},{key:"_tryResolve",value:function(){var e=this;if(!this.isFulfilled()){var t=Object(f.f)(),n=[].concat(Object(o.a)(this._resolvingPromises),[Object(u.d)(t.promise)]),r=this._allPromise=Promise.all(n);r.then((function(){e.isFulfilled()||e._allPromise!==r||e._resolver.resolve(e.instance)}),(function(t){e.isFulfilled()||e._allPromise!==r||Object(f.m)(t)||e._resolver.reject(t)})),t.resolve()}}}]),e}(),b=function(e){var t=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(){var e;Object(s.a)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a)))._promiseProps=new h(Object(r.a)(e)),e.addResolvingPromise(Promise.resolve()),e}return Object(c.a)(n,[{key:"isResolved",value:function(){return this._promiseProps.isResolved()}},{key:"isRejected",value:function(){return this._promiseProps.isRejected()}},{key:"isFulfilled",value:function(){return this._promiseProps.isFulfilled()}},{key:"when",value:function(e,t){var n=this;return new Promise((function(e,t){n._promiseProps.when(e,t)})).then(e,t)}},{key:"catch",value:function(e){return this.when(null,e)}},{key:"addResolvingPromise",value:function(e){e&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in e?e.when():e)}}]),n}(e);return t=Object(l.a)([Object(d.a)("esri.core.Promise")],t)},v=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return n}(b(p.a));v=Object(l.a)([Object(d.a)("esri.core.Promise")],v)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o}));var r=n(47);function i(e){return"point"===e||"multipoint"===e||"polyline"===e||"polygon"===e}var a=Object(r.b)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),o=Object(r.b)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"})},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(53),s=n(50),c=n(5),l=n(6),u=n(0),d=(n(16),n(22)),f=(n(13),n(17),n(1)),p=n(49),h=n(41),b=n(8),v=(n(12),n(19),n(20),n(38)),y=n(403),m=n(426),g=r=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).color=null,e.type="picture-marker",e.url=null,e.source=null,e.height=12,e.width=12,e.size=null,e}return Object(a.a)(n,[{key:"normalizeCtorArgs",value:function(e,t,n){if(e&&"string"!=typeof e&&null==e.imageData)return e;var r={};return e&&(r.url=e),null!=t&&(r.width=Object(v.j)(t)),null!=n&&(r.height=Object(v.j)(n)),r}},{key:"readHeight",value:function(e,t){return t.size||e}},{key:"readWidth",value:function(e,t){return t.size||e}},{key:"clone",value:function(){var e=new r({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",Object(d.a)(this.source)),e}},{key:"hash",value:function(){return"".concat(Object(o.a)(Object(s.a)(n.prototype),"hash",this).call(this),".").concat(this.height,".").concat(this.url,".").concat(this.width)}}]),n}(y.a);Object(u.a)([Object(f.b)({json:{write:!1}})],g.prototype,"color",void 0),Object(u.a)([Object(p.a)({esriPMS:"picture-marker"},{readOnly:!0})],g.prototype,"type",void 0),Object(u.a)([Object(f.b)(m.b)],g.prototype,"url",void 0),Object(u.a)([Object(f.b)(m.a)],g.prototype,"source",void 0),Object(u.a)([Object(f.b)({type:Number,cast:v.j,json:{write:!0}})],g.prototype,"height",void 0),Object(u.a)([Object(h.a)("height",["height","size"])],g.prototype,"readHeight",null),Object(u.a)([Object(f.b)({type:Number,cast:v.j,json:{write:!0}})],g.prototype,"width",void 0),Object(u.a)([Object(f.b)({json:{write:!1}})],g.prototype,"size",void 0);var O=g=r=Object(u.a)([Object(b.a)("esri.symbols.PictureMarkerSymbol")],g);t.a=O},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(53),o=n(50),s=n(5),c=n(6),l=n(0),u=(n(16),n(13),n(17),n(1)),d=n(8),f=(n(12),n(19),n(20),n(174)),p=n(476),h=n(264),b=n(260),v=n(398),y=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).elevationInfo=null,i.graphics=new v.b,i.screenSizePerspectiveEnabled=!0,i.type="graphics",i.internal=!1,i}return Object(i.a)(n,[{key:"destroy",value:function(){this.removeAll(),this.graphics.destroy()}},{key:"add",value:function(e){return this.graphics.add(e),this}},{key:"addMany",value:function(e){return this.graphics.addMany(e),this}},{key:"removeAll",value:function(){return this.graphics.removeAll(),this}},{key:"remove",value:function(e){this.graphics.remove(e)}},{key:"removeMany",value:function(e){this.graphics.removeMany(e)}},{key:"on",value:function(e,t){return Object(a.a)(Object(o.a)(n.prototype),"on",this).call(this,e,t)}},{key:"graphicChanged",value:function(e){this.emit("graphic-update",e)}}]),n}(Object(h.a)(Object(b.a)(f.a)));Object(l.a)([Object(u.b)({type:p.a})],y.prototype,"elevationInfo",void 0),Object(l.a)([Object(u.b)(Object(v.c)())],y.prototype,"graphics",void 0),Object(l.a)([Object(u.b)({type:["show","hide"]})],y.prototype,"listMode",void 0),Object(l.a)([Object(u.b)()],y.prototype,"screenSizePerspectiveEnabled",void 0),Object(l.a)([Object(u.b)({readOnly:!0})],y.prototype,"type",void 0),Object(l.a)([Object(u.b)({constructOnly:!0})],y.prototype,"internal",void 0);var m=y=Object(l.a)([Object(d.a)("esri.layers.GraphicsLayer")],y);t.a=m},function(e,t,n){"use strict";var r,i=n(10),a=n(2),o=n(3),s=n(5),c=n(6),l=n(0),u=(n(16),n(22)),d=n(4),f=(n(13),n(17),n(1)),p=n(49),h=n(8),b=n(42),v=(n(12),n(19),n(20),n(146)),y=n(127),m=n(179),g=n(333),O=n(28),j=n(39),w=r=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.apply(this,arguments)).color=new j.a([0,0,0,1]),e.size=0,e}return Object(o.a)(n,[{key:"clone",value:function(){return new r({color:Object(u.a)(this.color),size:this.size})}}]),n}(O.a);Object(l.a)([Object(f.b)(y.a)],w.prototype,"color",void 0),Object(l.a)([Object(f.b)(y.b)],w.prototype,"size",void 0);var _,k=w=r=Object(l.a)([Object(h.a)("esri.symbols.support.Symbol3DHalo")],w),x=_=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e))._userSize=void 0,r.halo=null,r.material=null,r.text=void 0,r.type="text",r}return Object(o.a)(n,[{key:"font",get:function(){return this._get("font")||null},set:function(e){e&&this._userSize&&(e.size=this._userSize),this._set("font",e)}},{key:"writeFont",value:function(e,t,n,r){var a=Object(i.a)(Object(i.a)({},r),{},{textSymbol3D:!0});t.font=e.write({},a),delete t.font.size}},{key:"size",get:function(){return null!=this._userSize?this._userSize:this.font&&null!=this.font.size?this.font.size:9},set:function(e){this._userSize=e,this.font&&(this.font.size=this._userSize),this.notifyChange("size")}},{key:"clone",value:function(){return new _({enabled:this.enabled,font:this.font&&Object(u.a)(this.font),halo:this.halo&&Object(u.a)(this.halo),material:Object(d.k)(this.material)?this.material.clone():null,size:this.size,text:this.text})}}],[{key:"fromTextSymbol",value:function(e){var t=function(e,t){return e&&t>0?{color:Object(u.a)(e),size:t}:null}(e.haloColor,e.haloSize),n=e.font?e.font.clone():new g.a;return new _({size:n.size,font:n,halo:t,material:e.color?{color:e.color.clone()}:null,text:e.text})}}]),n}(v.a);Object(l.a)([Object(f.b)({type:g.a,json:{write:!0}})],x.prototype,"font",null),Object(l.a)([Object(b.a)("font")],x.prototype,"writeFont",null),Object(l.a)([Object(f.b)({type:k,json:{write:!0}})],x.prototype,"halo",void 0),Object(l.a)([Object(f.b)({type:m.a,json:{write:!0}})],x.prototype,"material",void 0),Object(l.a)([Object(f.b)(y.b),Object(f.b)()],x.prototype,"size",null),Object(l.a)([Object(f.b)({type:String,json:{write:!0}})],x.prototype,"text",void 0),Object(l.a)([Object(p.a)({Text:"text"},{readOnly:!0})],x.prototype,"type",void 0);var S=x=_=Object(l.a)([Object(h.a)("esri.symbols.TextSymbol3DLayer")],x);t.a=S},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return c}));var r=n(52),i=n(495);function a(e){var t=e.authentication.username,n=e.owner||t;return Object(r.a)(e)+"/content/users/"+encodeURIComponent(n)+"/items/"+e.id+"/share"}function o(e){var t=e.authentication.username;return(e.owner||t)===t}function s(e){return e.authentication.getUser(e).then((function(e){return e&&"org_admin"===e.role&&!e.roleId}))}function c(e){return Object(i.a)(e.groupId,e).then((function(e){return e.userMembership.memberType})).catch((function(){return"none"}))}},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(8),d=(n(12),n(19),n(20),n(36)),f=n(192),p=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).active=!1,r.className=null,r.disabled=!1,r.id=null,r.indicator=!1,r.title=null,r.type=null,r.visible=!0,r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}}]),n}(Object(f.a)(d.a));Object(c.a)([Object(l.b)()],p.prototype,"active",void 0),Object(c.a)([Object(l.b)()],p.prototype,"className",void 0),Object(c.a)([Object(l.b)()],p.prototype,"disabled",void 0),Object(c.a)([Object(l.b)()],p.prototype,"id",void 0),Object(c.a)([Object(l.b)()],p.prototype,"indicator",void 0),Object(c.a)([Object(l.b)()],p.prototype,"title",void 0),Object(c.a)([Object(l.b)()],p.prototype,"type",void 0),Object(c.a)([Object(l.b)()],p.prototype,"visible",void 0);var h=p=r=Object(c.a)([Object(u.a)("esri.support.actions.ActionBase")],p);t.a=h},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(2),i=function e(t,n,i){Object(r.a)(this,e),this.coordinateHelper=t,this.targetPoint=n,this.constraint=i}},function(e,t,n){"use strict";n.r(t);var r,i=n(7),a=n.n(i),o=n(15),s=n(10),c=n(14),l=n(2),u=n(3),d=n(37),f=n(53),p=n(50),h=n(5),b=n(6),v=n(0),y=(n(16),n(22)),m=n(4),g=n(13),O=(n(17),n(1)),j=n(8),w=n(42),_=n(12),k=(n(19),n(20),n(24)),x=n(28),S=n(44),T=n(40),E=n(184),C=n(133),P=n(109),I=n(391),M=n(435),A=n(345),R=n(455),L=0,F=g.a.getLogger("esri.Basemap"),D=r=function(e){Object(h.a)(i,e);var t=Object(b.a)(i);function i(e){var n;Object(l.a)(this,i),(n=t.call(this,e)).id=null,n.portalItem=null,n.spatialReference=null,n.thumbnailUrl=null,n.title="Basemap",n.id=Date.now().toString(16)+"-basemap-"+L++,n.baseLayers=new T.a,n.referenceLayers=new T.a;var r=function(e){e.parent&&e.parent!==Object(d.a)(n)&&"remove"in e.parent&&e.parent.remove(e),e.parent=Object(d.a)(n),"elevation"===e.type&&F.error("Layer '".concat(e.title,", id:").concat(e.id,"' of type '").concat(e.type,"' is not supported as a basemap layer and will therefore be ignored."))},a=function(e){e.parent=null};return n.baseLayers.on("after-add",(function(e){return r(e.item)})),n.referenceLayers.on("after-add",(function(e){return r(e.item)})),n.baseLayers.on("after-remove",(function(e){return a(e.item)})),n.referenceLayers.on("after-remove",(function(e){return a(e.item)})),n}return Object(u.a)(i,[{key:"initialize",value:function(){var e=this;this.when().catch((function(t){F.error("#load()","Failed to load basemap (title: '".concat(e.title,"', id: '").concat(e.id,"')"),t)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}},{key:"destroy",value:function(){var e,t,n=this.baseLayers.removeAll(),r=Object(c.a)(n);try{for(r.s();!(t=r.n()).done;){t.value.destroy()}}catch(s){r.e(s)}finally{r.f()}var i,a=this.referenceLayers.removeAll(),o=Object(c.a)(a);try{for(o.s();!(i=o.n()).done;){i.value.destroy()}}catch(s){o.e(s)}finally{o.f()}this.baseLayers.destroy(),this.referenceLayers.destroy(),null==(e=this.portalItem)||e.destroy(),this.portalItem=null}},{key:"normalizeCtorArgs",value:function(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e=Object(s.a)({},e)).resourceInfo),e}},{key:"baseLayers",set:function(e){this._set("baseLayers",Object(E.b)(e,this._get("baseLayers")))}},{key:"_writeBaseLayers",value:function(e,t,n){var r=[];e?(n=Object(s.a)(Object(s.a)({},n),{},{layerContainerType:"basemap"}),this.baseLayers.forEach((function(e){var t=Object(R.a)(e,n.webmap?n.webmap.getLayerJSONFromResourceInfo(e):null,n);Object(m.k)(t)&&r.push(t)})),this.referenceLayers.forEach((function(e){var t=Object(R.a)(e,n.webmap?n.webmap.getLayerJSONFromResourceInfo(e):null,n);Object(m.k)(t)&&(t.isReference=!0,r.push(t))})),t.baseMapLayers=r):t.baseMapLayers=r}},{key:"referenceLayers",set:function(e){this._set("referenceLayers",Object(E.b)(e,this._get("referenceLayers")))}},{key:"writeTitle",value:function(e,t){t.title=e||"Basemap"}},{key:"load",value:function(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}},{key:"loadAll",value:function(){var e=this;return Object(I.a)(this,(function(t){t(e.baseLayers,e.referenceLayers)}))}},{key:"clone",value:function(){var e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(e.loadStatus="loaded"),new r({resourceInfo:this.resourceInfo}).set(e)}},{key:"read",value:function(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),Object(f.a)(Object(p.a)(i.prototype),"read",this).call(this,e,t)}},{key:"write",value:function(e,t){return e=e||{},t&&t.origin||(t=Object(s.a)({origin:"web-map"},t)),Object(f.a)(Object(p.a)(i.prototype),"write",this).call(this,e,t),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map((function(e){var t=Object(y.a)(e);return t.url&&Object(_.v)(t.url)&&(t.url="https:".concat(t.url)),t.templateUrl&&Object(_.v)(t.templateUrl)&&(t.templateUrl="https:".concat(t.templateUrl)),t}))),e}},{key:"_loadFromSource",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,i,o,s,c=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.resourceInfo,r=this.portalItem,Object(k.u)(t),i=[],n?(o=n.context?n.context.url:null,i.push(this._loadLayersFromJSON(n.data,o,t)),n.data.id&&!n.data.title&&(s=n.data.id,i.push(Object(A.b)(s).then((function(e){e&&c.read({title:e},n.context)}))))):r&&i.push(this._loadFromItem(r,t)),e.next=6,Promise.all(i);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_loadLayersFromJSON",value:function(){var e=Object(o.a)(a.a.mark((function e(t,r,i){var o,s,c,l,u,d,f,p,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.resourceInfo&&this.resourceInfo.context,s=this.portalItem&&this.portalItem.portal||o&&o.portal||null,c=o&&"web-scene"===o.origin?"web-scene":"web-map",e.next=5,n.e(32).then(n.bind(null,1034));case 5:return l=e.sent,u=l.populateOperationalLayers,d=[],Object(k.u)(i),t.baseMapLayers&&Array.isArray(t.baseMapLayers)&&(f={context:{origin:c,url:r,portal:s,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},p=u(this.baseLayers,t.baseMapLayers.filter((function(e){return!e.isReference})),f),d.push(p),h=u(this.referenceLayers,t.baseMapLayers.filter((function(e){return e.isReference})),f),d.push(h)),e.next=11,Object(k.j)(d);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_loadFromItem",value:function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load(n);case 2:return r=e.sent,e.next=5,r.fetchData("json",n);case 5:return i=e.sent,o=Object(_.J)(t.itemUrl),e.abrupt("return",(this._set("resourceInfo",{data:i.baseMap,context:{origin:"web-map",portal:t.portal||P.a.getDefault(),url:o}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),this.read({title:t.title,thumbnailUrl:t.thumbnailUrl},{origin:"portal-item",portal:t.portal||P.a.getDefault(),url:o}),this._loadLayersFromJSON(this.resourceInfo.data,o,n)));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"fromId",value:function(e){var t=A.a[e];return t?r.fromJSON(t):null}}]),i}(Object(x.b)(C.a));Object(v.a)([Object(O.b)({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer:function(e,t,n,r){this._writeBaseLayers(e,t,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:T.a}},writer:function(e,t,n,r){this._writeBaseLayers(e,t,r)}}}}}})],D.prototype,"baseLayers",null),Object(v.a)([Object(O.b)({type:String,json:{origins:{"web-scene":{write:!0}}}})],D.prototype,"id",void 0),Object(v.a)([Object(O.b)({type:M.default})],D.prototype,"portalItem",void 0),Object(v.a)([Object(O.b)()],D.prototype,"referenceLayers",null),Object(v.a)([Object(O.b)({readOnly:!0})],D.prototype,"resourceInfo",void 0),Object(v.a)([Object(O.b)({type:S.a})],D.prototype,"spatialReference",void 0),Object(v.a)([Object(O.b)()],D.prototype,"thumbnailUrl",void 0),Object(v.a)([Object(O.b)({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],D.prototype,"title",void 0),Object(v.a)([Object(w.a)("title")],D.prototype,"writeTitle",null);var N=D=r=Object(v.a)([Object(j.a)("esri.Basemap")],D);t.default=N},function(e,t,n){"use strict";var r,i=n(14),a=n(2),o=n(3),s=n(5),c=n(6),l=n(0),u=(n(16),n(22)),d=(n(13),n(17),n(1)),f=n(49),p=n(8),h=n(42),b=n(18),v=(n(12),n(19),n(20),n(40)),y=n(202),m=n(287),g=n(222),O=n(196),j=n(346),w=n(402),_=v.a.ofType({base:null,key:"type",typeMap:{icon:y.a,object:m.a,text:g.a}}),k=v.a.ofType({base:null,key:"type",typeMap:{icon:y.a,object:m.a}}),x=r=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).verticalOffset=null,r.callout=null,r.symbolLayers=new _,r.type="point-3d",r}return Object(o.a)(n,[{key:"writeSymbolLayers",value:function(e,t,n,r){var i=e.filter((function(e){return"text"!==e.type}));if(r&&r.messages&&i.length<e.length){var a=e.find((function(e){return"text"===e.type}));r.messages.push(new b.a("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PointSymbol3D",{symbolLayer:a}))}t[n]=i.map((function(e){return e.write({},r)})).toArray()}},{key:"supportsCallout",value:function(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;var e,t=Object(i.a)(this.symbolLayers.items);try{for(t.s();!(e=t.n()).done;){switch(e.value.type){case"icon":case"text":case"object":continue;default:return!1}}}catch(n){t.e(n)}finally{t.f()}return!0}},{key:"hasVisibleCallout",value:function(){return Object(j.b)(this)}},{key:"hasVisibleVerticalOffset",value:function(){return Object(j.c)(this)}},{key:"clone",value:function(){return new r({verticalOffset:Object(u.a)(this.verticalOffset),callout:Object(u.a)(this.callout),styleOrigin:Object(u.a)(this.styleOrigin),symbolLayers:Object(u.a)(this.symbolLayers),thumbnail:Object(u.a)(this.thumbnail)})}}],[{key:"fromSimpleMarkerSymbol",value:function(e){return new r({symbolLayers:[y.a.fromSimpleMarkerSymbol(e)]})}},{key:"fromPictureMarkerSymbol",value:function(e){return new r({symbolLayers:[y.a.fromPictureMarkerSymbol(e)]})}},{key:"fromCIMSymbol",value:function(e){if(e.data&&e.data.symbol){var t=e.data.symbol;if("CIMPointSymbol"===t.type&&t.callout)return new r({symbolLayers:[y.a.fromCIMSymbol(e)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}})}return new r({symbolLayers:[y.a.fromCIMSymbol(e)]})}},{key:"fromTextSymbol",value:function(e){return new r({symbolLayers:[g.a.fromTextSymbol(e)]})}}]),n}(O.a);Object(l.a)([Object(d.b)({type:w.a,json:{write:!0}})],x.prototype,"verticalOffset",void 0),Object(l.a)([Object(d.b)(j.a)],x.prototype,"callout",void 0),Object(l.a)([Object(d.b)({type:_,json:{type:k,origins:{"web-scene":{type:k}}}})],x.prototype,"symbolLayers",void 0),Object(l.a)([Object(h.a)("web-scene","symbolLayers")],x.prototype,"writeSymbolLayers",null),Object(l.a)([Object(f.a)({PointSymbol3D:"point-3d"},{readOnly:!0})],x.prototype,"type",void 0);var S=x=r=Object(l.a)([Object(p.a)("esri.symbols.PointSymbol3D")],x);t.a=S},function(e,t,n){"use strict";n.d(t,"a",(function(){return F}));var r,i,a=n(2),o=n(3),s=n(5),c=n(6),l=n(0),u=(n(16),n(13),n(17)),d=n(1),f=n(58),p=n(47),h=n(49),b=n(41),v=n(243),y=n(8),m=(n(12),n(19),n(20),n(28)),g=n(266),O=n(427),j=n(44),w=n(219),_=(n(71),r=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).type="query-table",r}return Object(o.a)(n,[{key:"clone",value:function(){var e,t=this.workspaceId,n=this.query,i=this.oidFields,a=this.spatialReference,o=this.geometryType,s={workspaceId:t,query:n,oidFields:i,spatialReference:null!=(e=null==a?void 0:a.clone())?e:void 0,geometryType:o};return new r(s)}}]),n}(m.a));Object(l.a)([Object(h.a)({queryTable:"query-table"})],_.prototype,"type",void 0),Object(l.a)([Object(d.b)({type:String,json:{write:!0}})],_.prototype,"workspaceId",void 0),Object(l.a)([Object(d.b)({type:String,json:{write:!0}})],_.prototype,"query",void 0),Object(l.a)([Object(d.b)({type:String,json:{write:!0}})],_.prototype,"oidFields",void 0),Object(l.a)([Object(d.b)({type:j.a,json:{write:!0}})],_.prototype,"spatialReference",void 0),Object(l.a)([Object(h.a)(w.a)],_.prototype,"geometryType",void 0),_=r=Object(l.a)([Object(y.a)("esri.layers.support.source.QueryTableDataSource")],_);var k,x=i=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).type="raster",r}return Object(o.a)(n,[{key:"clone",value:function(){var e=this.workspaceId,t=this.dataSourceName;return new i({workspaceId:e,dataSourceName:t})}}]),n}(m.a);Object(l.a)([Object(h.a)({raster:"raster"})],x.prototype,"type",void 0),Object(l.a)([Object(d.b)({type:String,json:{write:!0}})],x.prototype,"dataSourceName",void 0),Object(l.a)([Object(d.b)({type:String,json:{write:!0}})],x.prototype,"workspaceId",void 0),x=i=Object(l.a)([Object(y.a)("esri.layers.support.source.RasterDataSource")],x);var S,T,E=k=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).type="table",r}return Object(o.a)(n,[{key:"clone",value:function(){var e=this.workspaceId,t=this.gdbVersion,n=this.dataSourceName;return new k({workspaceId:e,gdbVersion:t,dataSourceName:n})}}]),n}(m.a);Object(l.a)([Object(h.a)({table:"table"})],E.prototype,"type",void 0),Object(l.a)([Object(d.b)({type:String,json:{write:!0}})],E.prototype,"workspaceId",void 0),Object(l.a)([Object(d.b)({type:String,json:{write:!0}})],E.prototype,"gdbVersion",void 0),Object(l.a)([Object(d.b)({type:String,json:{write:!0}})],E.prototype,"dataSourceName",void 0),E=k=Object(l.a)([Object(y.a)("esri.layers.support.source.TableDataSource")],E);var C=Object(p.b)()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"}),P=S=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).type="join-table",r}return Object(o.a)(n,[{key:"readLeftTableSource",value:function(e,t,n){return M()(e,t,n)}},{key:"castLeftTableSource",value:function(e){return Object(u.k)(R(),e)}},{key:"readRightTableSource",value:function(e,t,n){return M()(e,t,n)}},{key:"castRightTableSource",value:function(e){return Object(u.k)(R(),e)}},{key:"clone",value:function(){var e,t,n=this.leftTableKey,r=this.rightTableKey,i=this.leftTableSource,a=this.rightTableSource,o=this.joinType,s={leftTableKey:n,rightTableKey:r,leftTableSource:null!=(e=null==i?void 0:i.clone())?e:void 0,rightTableSource:null!=(t=null==a?void 0:a.clone())?t:void 0,joinType:o};return new S(s)}}]),n}(m.a);Object(l.a)([Object(h.a)({joinTable:"join-table"})],P.prototype,"type",void 0),Object(l.a)([Object(d.b)({type:String,json:{write:!0}})],P.prototype,"leftTableKey",void 0),Object(l.a)([Object(d.b)({type:String,json:{write:!0}})],P.prototype,"rightTableKey",void 0),Object(l.a)([Object(d.b)({json:{write:!0}})],P.prototype,"leftTableSource",void 0),Object(l.a)([Object(b.a)("leftTableSource")],P.prototype,"readLeftTableSource",null),Object(l.a)([Object(f.a)("leftTableSource")],P.prototype,"castLeftTableSource",null),Object(l.a)([Object(d.b)({json:{write:!0}})],P.prototype,"rightTableSource",void 0),Object(l.a)([Object(b.a)("rightTableSource")],P.prototype,"readRightTableSource",null),Object(l.a)([Object(f.a)("rightTableSource")],P.prototype,"castRightTableSource",null),Object(l.a)([Object(h.a)(C)],P.prototype,"joinType",void 0),P=S=Object(l.a)([Object(y.a)("esri.layers.support.source.JoinTableDataSource")],P);var I=null;function M(){return I||(I=Object(v.b)({types:R()})),I}var A=null;function R(){return A||(A={key:"type",base:null,typeMap:{"data-layer":F,"map-layer":O.a}}),A}var L={key:"type",base:null,typeMap:{"join-table":P,"query-table":_,raster:x,table:E}},F=T=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).type="data-layer",r}return Object(o.a)(n,[{key:"clone",value:function(){var e=this.fields,t=this.dataSource;return new T({fields:e,dataSource:t})}}]),n}(m.a);Object(l.a)([Object(h.a)({dataLayer:"data-layer"})],F.prototype,"type",void 0),Object(l.a)([Object(d.b)({type:[g.a],json:{write:!0}})],F.prototype,"fields",void 0),Object(l.a)([Object(d.b)({types:L,json:{write:!0}})],F.prototype,"dataSource",void 0),(F=T=Object(l.a)([Object(y.a)("esri.layers.support.source.DataLayerSource")],F)).from=Object(u.m)(F)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));n(56),n(77),n(75),n(16),n(13),n(198);n(178),n(9);function r(e){return e&&"function"==typeof e.render}function i(e){return e&&"function"==typeof e.postMixInProperties&&"function"==typeof e.buildRendering&&"function"==typeof e.postCreate&&"function"==typeof e.startup}},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(5),o=n(6),s=n(0),c=(n(16),n(13),n(17),n(1)),l=n(8),u=(n(12),n(19),n(20),n(36)),d=n(40),f=n(104),p=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).layer=null,i.enabled=!0,i.updating=!1,i.availability=1,i}return n}(u.a);Object(s.a)([Object(c.b)({constructOnly:!0})],p.prototype,"layer",void 0),Object(s.a)([Object(c.b)()],p.prototype,"enabled",void 0),Object(s.a)([Object(c.b)()],p.prototype,"updating",void 0),Object(s.a)([Object(c.b)()],p.prototype,"availability",void 0);var h=p=Object(s.a)([Object(l.a)("esri.views.interactive.snapping.SnappingLayerSource")],p),b=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).enabled=!1,i.enabledToggled=!1,i.selfEnabled=!0,i.featureEnabled=!0,i.featureSources=new d.a,i.distance=f.a.distance,i.touchSensitivityMultiplier=f.a.touchSensitivityMultiplier,i}return Object(i.a)(n,[{key:"effectiveEnabled",get:function(){return this.enabledToggled?!this.enabled:this.enabled}},{key:"effectiveSelfEnabled",get:function(){return this.effectiveEnabled&&this.selfEnabled}},{key:"effectiveFeatureEnabled",get:function(){return this.effectiveEnabled&&this.featureEnabled}}]),n}(u.a);Object(s.a)([Object(c.b)()],b.prototype,"enabled",void 0),Object(s.a)([Object(c.b)()],b.prototype,"enabledToggled",void 0),Object(s.a)([Object(c.b)()],b.prototype,"selfEnabled",void 0),Object(s.a)([Object(c.b)()],b.prototype,"featureEnabled",void 0),Object(s.a)([Object(c.b)({type:d.a.ofType(h)})],b.prototype,"featureSources",void 0),Object(s.a)([Object(c.b)()],b.prototype,"distance",void 0),Object(s.a)([Object(c.b)()],b.prototype,"touchSensitivityMultiplier",void 0),Object(s.a)([Object(c.b)({readOnly:!0})],b.prototype,"effectiveEnabled",null),Object(s.a)([Object(c.b)({readOnly:!0})],b.prototype,"effectiveSelfEnabled",null),Object(s.a)([Object(c.b)({readOnly:!0})],b.prototype,"effectiveFeatureEnabled",null);var v=b=Object(s.a)([Object(l.a)("esri.views.interactive.snapping.SnappingOptions")],b);t.a=v},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n(17);function i(e){var t=Object(r.e)(100*(1-e));return Math.max(0,Math.min(t,100))}function a(e){var t=1-e/100;return Math.max(0,Math.min(t,1))}},function(e,t,n){"use strict";function r(e){console&&console.warn&&console.warn.apply(console,[e])}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r,i=n(10),a=n(2),o=n(3),s=n(5),c=n(6),l=n(0),u=(n(16),n(22)),d=(n(13),n(17),n(1)),f=n(47),p=n(8),h=(n(12),n(19),n(20),n(36)),b=n(44),v=n(61),y=n(63),m=new f.a({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"}),g=r=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).categories=null,r.disableExtraQuery=!1,r.extent=null,r.num=10,r.query=null,r.sortField=null,r.start=1,r}return Object(o.a)(n,[{key:"sortOrder",get:function(){return this._get("sortOrder")||"asc"},set:function(e){"asc"!==e&&"desc"!==e||this._set("sortOrder",e)}},{key:"clone",value:function(){return new r({categories:this.categories?Object(u.a)(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}},{key:"toRequestOptions",value:function(e,t){var n,r;if(this.categories&&(n=this.categories.map((function(e){return Array.isArray(e)?JSON.stringify(e):e}))),this.extent){var a=Object(v.d)(this.extent,b.a.WGS84);a&&(r="".concat(a.xmin,",").concat(a.ymin,",").concat(a.xmax,",").concat(a.ymax))}var o=this.query;!this.disableExtraQuery&&e.extraQuery&&(o="("+o+")"+e.extraQuery);var s={categories:n,bbox:r,q:o,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map((function(e){return m.toJSON(e.trim())})).join(","),s.sortOrder=this.sortOrder),{query:Object(i.a)(Object(i.a)({},t),s)}}}]),n}(h.a);Object(l.a)([Object(d.b)()],g.prototype,"categories",void 0),Object(l.a)([Object(d.b)()],g.prototype,"disableExtraQuery",void 0),Object(l.a)([Object(d.b)({type:y.a})],g.prototype,"extent",void 0),Object(l.a)([Object(d.b)()],g.prototype,"num",void 0),Object(l.a)([Object(d.b)()],g.prototype,"query",void 0),Object(l.a)([Object(d.b)()],g.prototype,"sortField",void 0),Object(l.a)([Object(d.b)()],g.prototype,"sortOrder",null),Object(l.a)([Object(d.b)()],g.prototype,"start",void 0);var O=g=r=Object(l.a)([Object(p.a)("esri.portal.PortalQueryParams")],g);t.a=O},function(e,t,n){"use strict";n.d(t,"a",(function(){return _})),n.d(t,"b",(function(){return C})),n.d(t,"d",(function(){return I})),n.d(t,"c",(function(){return b})),n.d(t,"f",(function(){return v})),n.d(t,"e",(function(){return h}));var r=n(73);function i(e){return"/"===e.charAt(0)}function a(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var o=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],o=t&&t.split("/")||[],s=e&&i(e),c=t&&i(t),l=s||c;if(e&&i(e)?o=r:r.length&&(o.pop(),o=o.concat(r)),!o.length)return"/";if(o.length){var u=o[o.length-1];n="."===u||".."===u||""===u}else n=!1;for(var d=0,f=o.length;f>=0;f--){var p=o[f];"."===p?a(o,f):".."===p?(a(o,f),d++):d&&(a(o,f),d--)}if(!l)for(;d--;d)o.unshift("..");!l||""===o[0]||o[0]&&i(o[0])||o.unshift("");var h=o.join("/");return n&&"/"!==h.substr(-1)&&(h+="/"),h};function s(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var c=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"===typeof t||"object"===typeof n){var r=s(t),i=s(n);return r!==t||i!==n?e(r,i):Object.keys(Object.assign({},t,n)).every((function(r){return e(t[r],n[r])}))}return!1},l=n(214);function u(e){return"/"===e.charAt(0)?e:"/"+e}function d(e){return"/"===e.charAt(0)?e.substr(1):e}function f(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function p(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function h(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function b(e,t,n,i){var a;"string"===typeof e?(a=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(a=Object(r.a)({},e)).pathname&&(a.pathname=""),a.search?"?"!==a.search.charAt(0)&&(a.search="?"+a.search):a.search="",a.hash?"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash):a.hash="",void 0!==t&&void 0===a.state&&(a.state=t));try{a.pathname=decodeURI(a.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return n&&(a.key=n),i?a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=o(a.pathname,i.pathname)):a.pathname=i.pathname:a.pathname||(a.pathname="/"),a}function v(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&c(e.state,t.state)}function y(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var m=!("undefined"===typeof window||!window.document||!window.document.createElement);function g(e,t){t(window.confirm(e))}var O="popstate",j="hashchange";function w(){try{return window.history.state||{}}catch(e){return{}}}function _(e){void 0===e&&(e={}),m||Object(l.a)(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),i=!(-1===window.navigator.userAgent.indexOf("Trident")),a=e,o=a.forceRefresh,s=void 0!==o&&o,c=a.getUserConfirmation,d=void 0===c?g:c,v=a.keyLength,_=void 0===v?6:v,k=e.basename?p(u(e.basename)):"";function x(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return k&&(a=f(a,k)),b(a,r,n)}function S(){return Math.random().toString(36).substr(2,_)}var T=y();function E(e){Object(r.a)(z,e),z.length=t.length,T.notifyListeners(z.location,z.action)}function C(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||M(x(e.state))}function P(){M(x(w()))}var I=!1;function M(e){if(I)I=!1,E();else{T.confirmTransitionTo(e,"POP",d,(function(t){t?E({action:"POP",location:e}):function(e){var t=z.location,n=R.indexOf(t.key);-1===n&&(n=0);var r=R.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(I=!0,F(i))}(e)}))}}var A=x(w()),R=[A.key];function L(e){return k+h(e)}function F(e){t.go(e)}var D=0;function N(e){1===(D+=e)&&1===e?(window.addEventListener(O,C),i&&window.addEventListener(j,P)):0===D&&(window.removeEventListener(O,C),i&&window.removeEventListener(j,P))}var V=!1;var z={length:t.length,action:"POP",location:A,createHref:L,push:function(e,r){var i="PUSH",a=b(e,r,S(),z.location);T.confirmTransitionTo(a,i,d,(function(e){if(e){var r=L(a),o=a.key,c=a.state;if(n)if(t.pushState({key:o,state:c},null,r),s)window.location.href=r;else{var l=R.indexOf(z.location.key),u=R.slice(0,l+1);u.push(a.key),R=u,E({action:i,location:a})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",a=b(e,r,S(),z.location);T.confirmTransitionTo(a,i,d,(function(e){if(e){var r=L(a),o=a.key,c=a.state;if(n)if(t.replaceState({key:o,state:c},null,r),s)window.location.replace(r);else{var l=R.indexOf(z.location.key);-1!==l&&(R[l]=a.key),E({action:i,location:a})}else window.location.replace(r)}}))},go:F,goBack:function(){F(-1)},goForward:function(){F(1)},block:function(e){void 0===e&&(e=!1);var t=T.setPrompt(e);return V||(N(1),V=!0),function(){return V&&(V=!1,N(-1)),t()}},listen:function(e){var t=T.appendListener(e);return N(1),function(){N(-1),t()}}};return z}var k="hashchange",x={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+d(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:d,decodePath:u},slash:{encodePath:u,decodePath:u}};function S(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function T(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function E(e){window.location.replace(S(window.location.href)+"#"+e)}function C(e){void 0===e&&(e={}),m||Object(l.a)(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),i=n.getUserConfirmation,a=void 0===i?g:i,o=n.hashType,s=void 0===o?"slash":o,c=e.basename?p(u(e.basename)):"",d=x[s],v=d.encodePath,O=d.decodePath;function j(){var e=O(T());return c&&(e=f(e,c)),b(e)}var w=y();function _(e){Object(r.a)(z,e),z.length=t.length,w.notifyListeners(z.location,z.action)}var C=!1,P=null;function I(){var e,t,n=T(),r=v(n);if(n!==r)E(r);else{var i=j(),o=z.location;if(!C&&(t=i,(e=o).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(P===h(i))return;P=null,function(e){if(C)C=!1,_();else{var t="POP";w.confirmTransitionTo(e,t,a,(function(n){n?_({action:t,location:e}):function(e){var t=z.location,n=L.lastIndexOf(h(t));-1===n&&(n=0);var r=L.lastIndexOf(h(e));-1===r&&(r=0);var i=n-r;i&&(C=!0,F(i))}(e)}))}}(i)}}var M=T(),A=v(M);M!==A&&E(A);var R=j(),L=[h(R)];function F(e){t.go(e)}var D=0;function N(e){1===(D+=e)&&1===e?window.addEventListener(k,I):0===D&&window.removeEventListener(k,I)}var V=!1;var z={length:t.length,action:"POP",location:R,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=S(window.location.href)),n+"#"+v(c+h(e))},push:function(e,t){var n="PUSH",r=b(e,void 0,void 0,z.location);w.confirmTransitionTo(r,n,a,(function(e){if(e){var t=h(r),i=v(c+t);if(T()!==i){P=t,function(e){window.location.hash=e}(i);var a=L.lastIndexOf(h(z.location)),o=L.slice(0,a+1);o.push(t),L=o,_({action:n,location:r})}else _()}}))},replace:function(e,t){var n="REPLACE",r=b(e,void 0,void 0,z.location);w.confirmTransitionTo(r,n,a,(function(e){if(e){var t=h(r),i=v(c+t);T()!==i&&(P=t,E(i));var a=L.indexOf(h(z.location));-1!==a&&(L[a]=t),_({action:n,location:r})}}))},go:F,goBack:function(){F(-1)},goForward:function(){F(1)},block:function(e){void 0===e&&(e=!1);var t=w.setPrompt(e);return V||(N(1),V=!0),function(){return V&&(V=!1,N(-1)),t()}},listen:function(e){var t=w.appendListener(e);return N(1),function(){N(-1),t()}}};return z}function P(e,t,n){return Math.min(Math.max(e,t),n)}function I(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,i=t.initialEntries,a=void 0===i?["/"]:i,o=t.initialIndex,s=void 0===o?0:o,c=t.keyLength,l=void 0===c?6:c,u=y();function d(e){Object(r.a)(O,e),O.length=O.entries.length,u.notifyListeners(O.location,O.action)}function f(){return Math.random().toString(36).substr(2,l)}var p=P(s,0,a.length-1),v=a.map((function(e){return b(e,void 0,"string"===typeof e?f():e.key||f())})),m=h;function g(e){var t=P(O.index+e,0,O.entries.length-1),r=O.entries[t];u.confirmTransitionTo(r,"POP",n,(function(e){e?d({action:"POP",location:r,index:t}):d()}))}var O={length:v.length,action:"POP",location:v[p],index:p,entries:v,createHref:m,push:function(e,t){var r="PUSH",i=b(e,t,f(),O.location);u.confirmTransitionTo(i,r,n,(function(e){if(e){var t=O.index+1,n=O.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),d({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=b(e,t,f(),O.location);u.confirmTransitionTo(i,r,n,(function(e){e&&(O.entries[O.index]=i,d({action:r,location:i}))}))},go:g,goBack:function(){g(-1)},goForward:function(){g(1)},canGo:function(e){var t=O.index+e;return t>=0&&t<O.entries.length},block:function(e){return void 0===e&&(e=!1),u.setPrompt(e)},listen:function(e){return u.appendListener(e)}};return O}},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(4),o=n(352),s=function(){function e(t,n,i,a,o){Object(r.a)(this,e),this._context=t,this._locations=n,this._layout=i,this._buffers=a,this._indexBuffer=o,this._glName=null,this._initialized=!1,t.instanceCounter.increment(2,this)}return Object(i.a)(e,[{key:"glName",get:function(){return this._glName}},{key:"vertexBuffers",get:function(){return this._buffers}},{key:"indexBuffer",get:function(){return this._indexBuffer}},{key:"size",get:function(){var e=this;return Object.keys(this._buffers).reduce((function(t,n){return t+e._buffers[n].size}),this._indexBuffer?this._indexBuffer.size:0)}},{key:"layout",get:function(){return this._layout}},{key:"locations",get:function(){return this._locations}},{key:"dispose",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this._context){var t=this._context.capabilities.vao;if(t&&this._glName&&(t.deleteVertexArray(this._glName),this._glName=null),this._context.getBoundVAO()===this&&this._context.bindVAO(null),e){for(var n in this._buffers)this._buffers[n].dispose(),delete this._buffers[n];this._indexBuffer=Object(a.f)(this._indexBuffer)}this._context.instanceCounter.decrement(2,this),this._context=null}}},{key:"initialize",value:function(){if(!this._initialized){var e=this._context.capabilities.vao;if(e){var t=e.createVertexArray();e.bindVertexArray(t),this._bindLayout(),e.bindVertexArray(null),this._glName=t}this._initialized=!0}}},{key:"bind",value:function(){this.initialize();var e=this._context.capabilities.vao;e?e.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())}},{key:"_bindLayout",value:function(){var e=this._buffers,t=!!this._context.capabilities.vao,n=this._layout,r=this._indexBuffer;e||console.error("Vertex buffer dictionary is empty!");var i=this._context.gl;for(var a in e){var s=e[a];s||console.error("Vertex buffer is uninitialized!");var c=n[a];c||console.error("Vertex element descriptor is empty!"),Object(o.a)(this._context,this._locations,s,c)}r&&(t?i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,r.glName):this._context.bindBuffer(r))}},{key:"unbind",value:function(){this.initialize();var e=this._context.capabilities.vao;e?e.bindVertexArray(null):this._unbindLayout()}},{key:"_unbindLayout",value:function(){var e=this._buffers,t=this._layout;for(var n in e||console.error("Vertex buffer dictionary is empty!"),e){var r=e[n];r||console.error("Vertex buffer is uninitialized!");var i=t[n];Object(o.e)(this._context,this._locations,r,i)}this._indexBuffer&&this._context.unbindBuffer(this._indexBuffer.bufferType)}}]),e}();t.a=s},function(e,t,n){"use strict";n.r(t),n.d(t,"executeQuery",(function(){return y})),n.d(t,"executeQueryForCount",(function(){return _})),n.d(t,"executeQueryForExtent",(function(){return k})),n.d(t,"executeQueryForIds",(function(){return w})),n.d(t,"executeQueryPBF",(function(){return g})),n.d(t,"executeQueryPBFBuffer",(function(){return j})),n.d(t,"queryToQueryStringParameters",(function(){return v})),n.d(t,"runQuery",(function(){return x}));var r=n(7),i=n.n(r),a=n(10),o=n(15),s=n(4),c=n(12),l=n(68),u=n(62),d=n(377),f=n(457),p=n(416),h=n(741),b="Layer does not support extent calculation.";function v(e,t){var n=e.geometry,r=e.toJSON(),i=r;if(Object(s.k)(n)&&(i.geometry=JSON.stringify(n),i.geometryType=Object(l.c)(n),i.inSR=n.spatialReference.wkid||JSON.stringify(n.spatialReference)),r.groupByFieldsForStatistics&&(i.groupByFieldsForStatistics=r.groupByFieldsForStatistics.join(",")),r.objectIds&&(i.objectIds=r.objectIds.join(",")),r.orderByFields&&(i.orderByFields=r.orderByFields.join(",")),!r.outFields||!r.returnDistinctValues&&(null!=t&&t.returnCountOnly||null!=t&&t.returnExtentOnly||null!=t&&t.returnIdsOnly)?delete i.outFields:-1!==r.outFields.indexOf("*")?i.outFields="*":i.outFields=r.outFields.join(","),r.outSR?i.outSR=r.outSR.wkid||JSON.stringify(r.outSR):n&&(r.returnGeometry||r.returnCentroid)&&(i.outSR=i.inSR),r.returnGeometry&&delete r.returnGeometry,r.outStatistics&&(i.outStatistics=JSON.stringify(r.outStatistics)),r.pixelSize&&(i.pixelSize=JSON.stringify(r.pixelSize)),r.quantizationParameters&&(i.quantizationParameters=JSON.stringify(r.quantizationParameters)),r.parameterValues&&(i.parameterValues=JSON.stringify(r.parameterValues)),r.rangeValues&&(i.rangeValues=JSON.stringify(r.rangeValues)),r.dynamicDataSource&&(i.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r.timeExtent){var a=r.timeExtent,o=a.start,c=a.end;null==o&&null==c||(i.time=o===c?o:"".concat(null==o?"null":o,",").concat(null==c?"null":c)),delete r.timeExtent}return i}function y(e,t,n,r){return m.apply(this,arguments)}function m(){return(m=Object(o.a)(i.a.mark((function e(t,n,r,a){var o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(s.k)(n.timeExtent)||!n.timeExtent.isEmpty){e.next=4;break}e.t0={data:{features:[]}},e.next=7;break;case 4:return e.next=6,x(t,n,"json",a);case 6:e.t0=e.sent;case 7:return o=e.t0,e.abrupt("return",(Object(f.a)(n,r,o.data),o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t,n,r){return O.apply(this,arguments)}function O(){return(O=Object(o.a)(i.a.mark((function e(t,n,r,a){var o,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(s.k)(n.timeExtent)||!n.timeExtent.isEmpty){e.next=2;break}return e.abrupt("return",Promise.resolve({data:r.createFeatureResult()}));case 2:return e.next=4,j(t,n,a);case 4:return o=e.sent,c=o,e.abrupt("return",(c.data=Object(h.a)(o.data,r),c));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t,n){return x(e,t,"pbf",n)}function w(e,t,n){return Object(s.k)(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):x(e,t,"json",n,{returnIdsOnly:!0})}function _(e,t,n){return Object(s.k)(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):x(e,t,"json",n,{returnIdsOnly:!0,returnCountOnly:!0})}function k(e,t,n){return Object(s.k)(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):x(e,t,"json",n,{returnExtentOnly:!0,returnCountOnly:!0}).then((function(e){var t=e.data;if(t.hasOwnProperty("extent"))return e;if(t.features)throw new Error(b);if(t.hasOwnProperty("count"))throw new Error(b);return e}))}function x(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o="string"==typeof e?Object(c.J)(e):e,l=t.geometry?[t.geometry]:[];return r.responseType="pbf"===n?"array-buffer":"json",Object(d.a)(l,null,r).then((function(e){var l=e&&e[0];Object(s.k)(l)&&((t=t.clone()).geometry=l);var d=Object(p.a)(Object(a.a)(Object(a.a)(Object(a.a)({},o.query),{},{f:n},i),v(t,i)));return Object(u.default)(Object(c.y)(o.path,"query"),Object(a.a)(Object(a.a)({},r),{},{query:Object(a.a)(Object(a.a)({},d),r.query)}))}))}},function(e,t,n){"use strict";function r(){return new Float32Array(4)}function i(e){var t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function a(e,t,n,r){var i=new Float32Array(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function o(){return r()}function s(){return a(1,1,1,1)}function c(){return a(1,0,0,0)}function l(){return a(0,1,0,0)}function u(){return a(0,0,1,0)}function d(){return a(0,0,0,1)}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a}));var f=o(),p=s(),h=c(),b=l(),v=u(),y=d();Object.freeze({__proto__:null,create:r,clone:i,fromValues:a,createView:function(e,t){return new Float32Array(e,t,4)},zeros:o,ones:s,unitX:c,unitY:l,unitZ:u,unitW:d,ZEROS:f,ONES:p,UNIT_X:h,UNIT_Y:b,UNIT_Z:v,UNIT_W:y})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r,i=n(88),a=n(757);!function(e){function t(e,t,n){Object(i.r)(o,n,t),e.setUniform3fv("localOrigin",t),e.setUniformMatrix4fv("view",o)}e.bindCamPosition=function(e,t,n){e.setUniform3f("camPos",n[3]-t[0],n[7]-t[1],n[11]-t[2])},e.bindProjectionMatrix=function(e,t){e.setUniformMatrix4fv("proj",t)},e.bindNearFar=function(e,t){e.setUniform2fv("nearFar",t)},e.bindViewCustomOrigin=t,e.bindView=function(e,n){t(e,n.origin,n.camera.viewMatrix)},e.bindViewport=function(e,t){e.setUniform4fv("viewport",t.camera.fullViewport)}}(r||(r={}));var o=Object(a.a)()},function(e,t,n){"use strict";var r=n(14),i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=n(1),u=n(8),d=n(40),f=n(51),p=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e))._handles=new f.a,r.root=null,r}return Object(a.a)(n,[{key:"initialize",value:function(){var e=this;this._handles.add(this.rootCollectionNames.map((function(t){return e.watch("root."+t,(function(){return e.updateCollections()}),!0)}))),this.updateCollections()}},{key:"destroy",value:function(){this.root=null,this.refresh(),this._handles.destroy(),this._handles=null}},{key:"updateCollections",value:function(){var e=this;this._collections=this.rootCollectionNames.map((function(t){return e.get("root."+t)})).filter((function(e){return null!=e})),this.refresh()}},{key:"refresh",value:function(){var e=this,t=this._handles;t.remove("collections");var n,i=new Array,a=0,o=Object(r.a)(this._collections);try{for(o.s();!(n=o.n()).done;){var s=n.value;a=this._processCollection(i,a,s)}}catch(d){o.e(d)}finally{o.f()}this.splice(a,this.length);for(var c=0,l=i;c<l.length;c++){var u=l[c];t.add(u.on("after-changes",(function(){return e.refresh()})),"collections")}}},{key:"_createNewInstance",value:function(e){return new d.a(e)}},{key:"_processCollection",value:function(e,t,n){var r=this;return n?(e.push(n),n.forEach((function(n){if(n){if(!r.itemFilterFunction||r.itemFilterFunction(n)){var i=r.indexOf(n,t);i>=0?i!==t&&r.reorder(n,t):r.add(n,t),++t}r.getChildrenFunction&&(t=r._processCollection(e,t,r.getChildrenFunction(n)))}})),t):t}}]),n}(d.a);Object(c.a)([Object(l.b)()],p.prototype,"rootCollectionNames",void 0),Object(c.a)([Object(l.b)()],p.prototype,"root",void 0),Object(c.a)([Object(l.b)()],p.prototype,"getChildrenFunction",void 0),Object(c.a)([Object(l.b)()],p.prototype,"itemFilterFunction",void 0);var h=p=Object(c.a)([Object(u.a)("esri.core.CollectionFlattener")],p);t.a=h},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=0;function i(){return++r}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return l}));var r=n(27),i=n(11),a=n(548),o=function(){for(var e=new Uint32Array(131072),t=0;t<e.length;++t)e[t]=t;return e}(),s=new Uint16Array([0]),c=function(){for(var e=new Uint16Array(65536),t=0;t<e.length;++t)e[t]=t;return e}();function l(e){if(1===e)return s;if(e<c.length)return new Uint16Array(c.buffer,0,e);if(e>o.length){var t=Math.max(2*o.length,e);o=new Uint32Array(t);for(var n=0;n<o.length;n++)o[n]=n}return new Uint32Array(o.buffer,0,e)}function u(e,t,n){if(!e)return!1;var r=e.size,o=e.data;Object(i.v)(n,0,0,0),Object(i.v)(v,0,0,0);for(var s=0,c=0,l=0;l<t.length-2;l+=3){var u=t[l+0]*r,d=t[l+1]*r,f=t[l+2]*r;Object(i.v)(p,o[u+0],o[u+1],o[u+2]),Object(i.v)(h,o[d+0],o[d+1],o[d+2]),Object(i.v)(b,o[f+0],o[f+1],o[f+2]);var y=Object(a.a)(p,h,b);y?(Object(i.e)(p,p,h),Object(i.e)(p,p,b),Object(i.d)(p,p,1/3*y),Object(i.e)(n,n,p),s+=y):(Object(i.e)(v,v,p),Object(i.e)(v,v,h),Object(i.e)(v,v,b),c+=3)}return(0!==c||0!==s)&&(0!==s?(Object(i.d)(n,n,1/s),!0):0!==c&&(Object(i.d)(n,v,1/c),!0))}function d(e,t,n){if(!e||!t)return!1;var r=e.size,a=e.data;Object(i.v)(n,0,0,0);for(var o=-1,s=0,c=0;c<t.length;c++){var l=t[c]*r;o!==l&&(n[0]+=a[l+0],n[1]+=a[l+1],n[2]+=a[l+2],s++),o=l}return s>1&&Object(i.d)(n,n,1/s),s>0}function f(e,t,n,r){if(!e)return!1;var a=e.size,o=e.data;Object(i.v)(r,0,0,0),Object(i.v)(v,0,0,0);for(var s=0,c=0,l=t?t.length-1:o.length/a-1,u=l+(n?2:0),d=0;d<u;d+=2){var f=d<l?d:l,b=d<l?d+1:0,y=(t?t[f]:f)*a,m=(t?t[b]:b)*a;p[0]=o[y+0],p[1]=o[y+1],p[2]=o[y+2],h[0]=o[m+0],h[1]=o[m+1],h[2]=o[m+2],Object(i.d)(p,Object(i.e)(p,p,h),.5);var g=Object(i.z)(p,h);g>0?(Object(i.e)(r,r,Object(i.d)(p,p,g)),s+=g):(Object(i.e)(v,v,p),c++)}return 0!==s?(Object(i.d)(r,r,1/s),!0):0!==c&&(Object(i.d)(r,v,1/c),!0)}var p=Object(r.e)(),h=Object(r.e)(),b=Object(r.e)(),v=Object(r.e)()},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return c}));var r=n(4),i=n(88),a=n(119),o=n(86);n(649);function s(e,t){return Object(r.j)(e)&&(e=[]),e.push(t),e}function c(e,t){if(Object(r.j)(e))return e;var n=e.filter((function(e){return e!==t}));return 0===n.length?null:n}function l(e){return!!Object(r.k)(e)&&!e.visible}function u(e,t){var n=new Map;return n.set(0,t.acquire(e,0)),n.set(1,t.acquire(e,7)),n.set(4,t.acquire(e,3)),n.set(3,t.acquire(e,2)),n.set(2,t.acquire(e,1)),n.set(5,t.acquire(e,4)),n.set(7,t.acquire(e,3)),n.set(6,t.acquire(e,3)),n}function d(e,t){t.release(e,0),t.release(e,7),t.release(e,3),t.release(e,2),t.release(e,1),t.release(e,4)}function f(e,t,n){var a=e.origin.vec3;Object(o.j)(p,-a[0],-a[1],-a[2]),Object(r.k)(e.transformation)?Object(i.l)(t,p,e.transformation):Object(i.c)(t,p),n&&(Object(i.a)(n,t),Object(i.b)(n,n))}new Float64Array(3),new Float32Array(6);var p=Object(a.b)()},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var r=n(14),i=n(100),a=n(13),o=n(187),s=n(177),c=n(523),l=a.a.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function u(e,t,n){var r,a,o;e&&(!n&&!t.read||null!=(r=t.read)&&r.reader||!1===(null==(a=t.read)?void 0:a.enabled)||("types"in(o=e)?y(o.types):v(o.type))&&Object(i.c)("read.reader",d(e),t))}function d(e){var t,n=null!=(t=e.ndimArray)?t:0;if(n>1)return function(e){var t,n=f(e),r=p.bind(null,n),i=null!=(t=e.ndimArray)?t:0;return function(e,t,n){if(null==e)return e;e=r(e,n,i);for(var a=i,o=e;a>0&&Array.isArray(o);)a--,o=o[0];if(void 0!==o)for(var s=0;s<a;s++)e=[e];return e}}(e);if(1===n)return h(e);if("type"in e&&b(e.type)){var r,i,a=null==(r=e.type.prototype)||null==(i=r.itemType)?void 0:i.Type,o=h("function"==typeof a?{type:a}:{types:a});return function(t,n,r){var i=o(t,n,r);return i?new e.type(i):i}}return f(e)}function f(e){return"type"in e?function(e){return e.prototype.read?function(t,n,r){if(null==t)return t;var i=typeof t;if("object"===i){var a=new e;return a.read(t,r),a}l.error("Expected JSON value of type 'object' to deserialize type '".concat(e.prototype.declaredClass,"', but got '").concat(i,"'"))}:e.fromJSON}(e.type):function(e){var t,n=null,r=null!=(t=e.errorContext)?t:"type";return function(t,i,a){if(null==t)return t;var c=typeof t;if("object"===c){n||(n=function(e){var t={};for(var n in e.typeMap){var r,i,a=e.typeMap[n],s=Object(o.a)(a.prototype);if("function"!=typeof e.key){var c=s.properties[e.key];if(c){null!=(r=c.json)&&r.type&&Array.isArray(c.json.type)&&1===c.json.type.length&&"string"==typeof c.json.type[0]&&(t[c.json.type[0]]=a);var l=null==(i=c.json)?void 0:i.write;if(l&&l.writer){var u=l.target,d="string"==typeof u?u:e.key,f={};l.writer(n,f,d),f[d]&&(t[f[d]]=a)}else t[n]=a}}}return t}(e));var u=e.key;if("string"==typeof u){var d=t[u],f=d?n[d]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!f){var p="Type '".concat(d||"unknown","' is not supported");return a&&a.messages&&t&&a.messages.push(new s.a("".concat(r,":unsupported"),p,{definition:t,context:a})),void l.error(p)}var h=new f;return h.read(t,a),h}}else l.error("Expected JSON value of type 'object' to deserialize, but got '".concat(c,"'"))}}(e.types)}function p(e,t,n,r){return 0!==r&&Array.isArray(t)?t.map((function(t){return p(e,t,n,r-1)})):e(t,void 0,n)}function h(e){var t=f(e);return function(e,n,i){if(null==e)return e;if(Array.isArray(e)){var a,o=[],s=Object(r.a)(e);try{for(s.s();!(a=s.n()).done;){var c=a.value,l=t(c,void 0,i);void 0!==l&&o.push(l)}}catch(d){s.e(d)}finally{s.f()}return o}var u=t(e,void 0,i);return void 0!==u?[u]:void 0}}function b(e){if(!Object(c.a)(e))return!1;var t=e.prototype.itemType;return!(!t||!t.Type)&&("function"==typeof t.Type?v(t.Type):y(t.Type))}function v(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||b(e))}function y(e){for(var t in e.typeMap)if(!v(e.typeMap[t]))return!1;return!0}},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(8),d=(n(12),n(19),n(20),n(167)),f=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).text=null,r.type="text",r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({text:this.text})}}]),n}(d.a);Object(c.a)([Object(l.b)({type:String,json:{write:!0}})],f.prototype,"text",void 0),Object(c.a)([Object(l.b)({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],f.prototype,"type",void 0);var p=f=r=Object(c.a)([Object(u.a)("esri.popup.content.TextContent")],f);t.a=p},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return f}));var r=n(59),i=n(44),a=n(79);function o(e){return new i.a({wkt:'GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",'.concat(e.radius,',0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]')})}var s=o(a.a),c=o(a.b),l=o(a.c),u=new i.a({wkt:'GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",'.concat(a.a.radius,',298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]')});function d(e){return e&&(Object(r.g)(e)||e===c)?a.b:e&&(Object(r.h)(e)||e===l)?a.c:a.a}function f(e){return Object(r.k)(e)?a.b:Object(r.l)(e)?a.c:a.a}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return d}));var r=n(45),i=n(27),a=n(11);function o(e,t){return Object(a.g)(e,t)/Object(a.o)(e)}function s(e,t){var n=Object(a.g)(e,t)/(Object(a.o)(e)*Object(a.o)(t));return-Object(r.b)(n)}function c(e,t,n){Object(a.q)(l,e),Object(a.q)(u,t);var i=Object(a.g)(l,u),o=Object(r.b)(i),s=Object(a.f)(l,l,u);return Object(a.g)(s,n)<0?2*Math.PI-o:o}var l=Object(i.e)(),u=Object(i.e)(),d=Object.freeze({__proto__:null,projectPoint:function(e,t,n){var r=Object(a.g)(e,t)/Object(a.g)(e,e);return Object(a.d)(n,e,r)},projectPointSignedLength:o,angle:s,angleAroundAxis:c})},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(22)),u=(n(13),n(17),n(1)),d=n(8),f=n(42),p=(n(12),n(19),n(20),n(167)),h=n(281),b=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).description=null,r.fieldInfos=null,r.title=null,r.type="fields",r}return Object(a.a)(n,[{key:"writeFieldInfos",value:function(e,t){t.fieldInfos=e&&e.map((function(e){return e.toJSON()}))}},{key:"clone",value:function(){return new r({description:this.description,fieldInfos:Array.isArray(this.fieldInfos)?Object(l.a)(this.fieldInfos):null,title:this.title})}}]),n}(p.a);Object(c.a)([Object(u.b)({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],b.prototype,"description",void 0),Object(c.a)([Object(u.b)({type:[h.a]})],b.prototype,"fieldInfos",void 0),Object(c.a)([Object(f.a)("fieldInfos")],b.prototype,"writeFieldInfos",null),Object(c.a)([Object(u.b)({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],b.prototype,"title",void 0),Object(c.a)([Object(u.b)({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],b.prototype,"type",void 0);var v=b=r=Object(c.a)([Object(d.a)("esri.popup.content.FieldsContent")],b);t.a=v},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(4)),u=(n(13),n(17),n(1)),d=n(49),f=n(8),p=(n(12),n(19),n(20),n(39)),h=n(146),b=n(38),v=n(127),y=n(179),m=n(288),g=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).material=null,r.type="line",r.join="miter",r.cap="butt",r.size=Object(b.h)(1),r.stipplePattern=null,r.stippleOffColor=null,r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({enabled:this.enabled,material:Object(l.k)(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,stipplePattern:this.stipplePattern?this.stipplePattern.slice():null,stippleOffColor:this.stippleOffColor?this.stippleOffColor.clone():null})}}],[{key:"fromSimpleLineSymbol",value:function(e){return new r({size:e.width||1,cap:e.cap||"butt",join:e.join||"miter",material:{color:(e.color||m.c).clone()}})}}]),n}(h.a);Object(c.a)([Object(u.b)({type:y.a,json:{write:!0}})],g.prototype,"material",void 0),Object(c.a)([Object(d.a)({Line:"line"},{readOnly:!0})],g.prototype,"type",void 0),Object(c.a)([Object(u.b)({type:["miter","bevel","round"],json:{write:!0,default:"miter"}})],g.prototype,"join",void 0),Object(c.a)([Object(u.b)({type:["butt","square","round"],json:{write:!0,default:"butt"}})],g.prototype,"cap",void 0),Object(c.a)([Object(u.b)(v.b)],g.prototype,"size",void 0),Object(c.a)([Object(u.b)(v.c)],g.prototype,"stipplePattern",void 0),Object(c.a)([Object(u.b)({type:p.a})],g.prototype,"stippleOffColor",void 0);var O=g=r=Object(c.a)([Object(f.a)("esri.symbols.LineSymbol3DLayer")],g);t.a=O},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(22)),u=n(4),d=(n(13),n(17),n(1)),f=n(49),p=n(8),h=n(42),b=n(18),v=(n(12),n(19),n(20),n(40)),y=n(357),m=n(286),g=n(202),O=n(248),j=n(287),w=n(222),_=n(359),k=n(196),x=v.a.ofType({base:null,key:"type",typeMap:{extrude:y.a,fill:m.a,icon:g.a,line:O.a,object:j.a,text:w.a,water:_.a}}),S=v.a.ofType({base:null,key:"type",typeMap:{extrude:y.a,fill:m.a,icon:g.a,line:O.a,object:j.a,water:_.a}}),T=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).symbolLayers=new x,r.type="polygon-3d",r}return Object(a.a)(n,[{key:"writeSymbolLayers",value:function(e,t,n,r){var i=e.filter((function(e){return"text"!==e.type}));if(r&&r.messages&&i.length<e.length){var a=e.find((function(e){return"text"===e.type}));r.messages.push(new b.a("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",{symbolLayer:a}))}t[n]=i.map((function(e){return e.write({},r)})).toArray()}},{key:"clone",value:function(){return new r({styleOrigin:Object(l.a)(this.styleOrigin),symbolLayers:Object(l.a)(this.symbolLayers),thumbnail:Object(l.a)(this.thumbnail)})}}],[{key:"fromJSON",value:function(e){var t=new r;if(t.read(e),2===t.symbolLayers.length&&"fill"===t.symbolLayers.getItemAt(0).type&&"line"===t.symbolLayers.getItemAt(1).type){var n=t.symbolLayers.getItemAt(0),i=t.symbolLayers.getItemAt(1);!i.enabled||e.symbolLayers&&e.symbolLayers[1]&&!1===e.symbolLayers[1].enable||(n.outline={size:i.size,color:Object(u.k)(i.material)?i.material.color:null}),t.symbolLayers.removeAt(1)}return t}},{key:"fromSimpleFillSymbol",value:function(e){return new r({symbolLayers:[m.a.fromSimpleFillSymbol(e)]})}}]),n}(k.a);Object(c.a)([Object(d.b)({type:x,json:{type:S}})],T.prototype,"symbolLayers",void 0),Object(c.a)([Object(h.a)("web-scene","symbolLayers")],T.prototype,"writeSymbolLayers",null),Object(c.a)([Object(f.a)({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],T.prototype,"type",void 0);var E=T=r=Object(c.a)([Object(p.a)("esri.symbols.PolygonSymbol3D")],T);t.a=E},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(22)),u=(n(13),n(17)),d=n(1),f=n(8),p=n(42),h=(n(12),n(19),n(20),n(28)),b=n(44),v=(n(71),n(228)),y=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).dynamicDataSource=void 0,r.gdbVersion=null,r.geometryPrecision=void 0,r.historicMoment=null,r.maxAllowableOffset=void 0,r.objectIds=null,r.orderByFields=null,r.outFields=null,r.outSpatialReference=null,r.relationshipId=void 0,r.start=void 0,r.num=void 0,r.returnGeometry=!1,r.returnM=void 0,r.returnZ=void 0,r.where=null,r}return Object(a.a)(n,[{key:"_writeHistoricMoment",value:function(e,t){t.historicMoment=e&&e.getTime()}},{key:"writeStart",value:function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}},{key:"clone",value:function(){return new r(Object(l.a)({dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}}]),n}(h.a);Object(c.a)([Object(d.b)({type:v.a,json:{write:!0}})],y.prototype,"dynamicDataSource",void 0),Object(c.a)([Object(d.b)({type:String,json:{write:!0}})],y.prototype,"gdbVersion",void 0),Object(c.a)([Object(d.b)({type:Number,json:{write:!0}})],y.prototype,"geometryPrecision",void 0),Object(c.a)([Object(d.b)({type:Date})],y.prototype,"historicMoment",void 0),Object(c.a)([Object(p.a)("historicMoment")],y.prototype,"_writeHistoricMoment",null),Object(c.a)([Object(d.b)({type:Number,json:{write:!0}})],y.prototype,"maxAllowableOffset",void 0),Object(c.a)([Object(d.b)({type:[Number],json:{write:!0}})],y.prototype,"objectIds",void 0),Object(c.a)([Object(d.b)({type:[String],json:{write:!0}})],y.prototype,"orderByFields",void 0),Object(c.a)([Object(d.b)({type:[String],json:{write:!0}})],y.prototype,"outFields",void 0),Object(c.a)([Object(d.b)({type:b.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],y.prototype,"outSpatialReference",void 0),Object(c.a)([Object(d.b)({json:{write:!0}})],y.prototype,"relationshipId",void 0),Object(c.a)([Object(d.b)({type:Number,json:{read:{source:"resultOffset"}}})],y.prototype,"start",void 0),Object(c.a)([Object(p.a)("start"),Object(p.a)("num")],y.prototype,"writeStart",null),Object(c.a)([Object(d.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],y.prototype,"num",void 0),Object(c.a)([Object(d.b)({json:{write:!0}})],y.prototype,"returnGeometry",void 0),Object(c.a)([Object(d.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],y.prototype,"returnM",void 0),Object(c.a)([Object(d.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],y.prototype,"returnZ",void 0),Object(c.a)([Object(d.b)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],y.prototype,"where",void 0),(y=r=Object(c.a)([Object(f.a)("esri.tasks.support.RelationshipQuery")],y)).from=Object(u.m)(y);var m=y;t.a=m},function(e,t,n){"use strict";var r,i=n(10),a=n(2),o=n(3),s=n(53),c=n(50),l=n(5),u=n(6),d=n(0),f=(n(16),n(13),n(17),n(1)),p=n(47),h=n(41),b=n(177),v=n(8),y=n(42),m=(n(12),n(19),n(20),n(132)),g=n(28),O=n(66),j=Object(p.b)()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),w=j.jsonValues.slice();Object(m.j)(w,"orthometric");var _=Object(p.b)()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"}),k=r=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).heightModel="gravity-related-height",r.heightUnit="meters",r.vertCRS=null,r}return Object(o.a)(n,[{key:"writeHeightModel",value:function(e,t,n){return j.write(e,t,n)}},{key:"readHeightModel",value:function(e,t,n){return j.read(e)||(n&&n.messages&&n.messages.push(function(e,t){return new b.a("height-model:unsupported","Height model of value '".concat(e,"' is not supported"),t)}(e,{context:n})),null)}},{key:"readHeightUnit",value:function(e,t,n){return _.read(e)||(n&&n.messages&&n.messages.push(x(e,{context:n})),null)}},{key:"readHeightUnitService",value:function(e,t,n){return Object(O.q)(e)||_.read(e)||(n&&n.messages&&n.messages.push(x(e,{context:n})),null)}},{key:"readVertCRS",value:function(e,t){return t.vertCRS||t.ellipsoid||t.geoid}},{key:"clone",value:function(){return new r({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}},{key:"equals",value:function(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}},{key:"write",value:function(e,t){return t=Object(i.a)({origin:"web-scene"},t),Object(s.a)(Object(c.a)(n.prototype),"write",this).call(this,e,t)}}],[{key:"deriveUnitFromSR",value:function(e,t){var n=Object(O.g)(t);return new r({heightModel:e.heightModel,heightUnit:n,vertCRS:e.vertCRS})}},{key:"fromJSON",value:function(e){if(!e)return null;var t=new r;return t.read(e,{origin:"web-scene"}),t}}]),n}(g.a);function x(e,t){return new b.a("height-unit:unsupported","Height unit of value '".concat(e,"' is not supported"),t)}Object(d.a)([Object(f.b)({type:j.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:w,default:"ellipsoidal"}}}})],k.prototype,"heightModel",void 0),Object(d.a)([Object(y.a)("web-scene","heightModel")],k.prototype,"writeHeightModel",null),Object(d.a)([Object(h.a)(["web-scene","service"],"heightModel")],k.prototype,"readHeightModel",null),Object(d.a)([Object(f.b)({type:_.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:_.jsonValues,write:_.write}}}})],k.prototype,"heightUnit",void 0),Object(d.a)([Object(h.a)("web-scene","heightUnit")],k.prototype,"readHeightUnit",null),Object(d.a)([Object(h.a)("service","heightUnit")],k.prototype,"readHeightUnitService",null),Object(d.a)([Object(f.b)({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],k.prototype,"vertCRS",void 0),Object(d.a)([Object(h.a)("service","vertCRS",["vertCRS","ellipsoid","geoid"])],k.prototype,"readVertCRS",null);var S=k=r=Object(d.a)([Object(v.a)("esri.geometry.HeightModelInfo")],k);t.a=S},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(8),d=(n(12),n(19),n(20),n(224)),f=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).image=null,r.type="button",r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}}]),n}(d.a);Object(c.a)([Object(l.b)()],f.prototype,"image",void 0);var p=f=r=Object(c.a)([Object(u.a)("esri.support.Action.ActionButton")],f);t.a=p},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return d}));var r=n(11),i=n(188),a=n(55),o=n(203);function s(e){return e?{ray:Object(o.b)(e.ray),c0:e.c0,c1:e.c1}:{ray:Object(o.b)(),c0:0,c1:Number.MAX_VALUE}}function c(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s();return Object(o.a)(e,r.ray),r.c0=t,r.c1=n,r}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s();return Object(o.a)(e,t.ray),t.c0=0,t.c1=Number.MAX_VALUE,t}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s(),i=Object(r.o)(e.vector);return Object(o.d)(e.origin,t,n.ray),n.c0=0,n.c1=i,n}function d(e,t){return p(e,e.c0,t)}function f(e,t){return p(e,e.c1,t)}function p(e,t,n){return Object(r.e)(n,e.ray.origin,Object(r.d)(n,e.ray.direction,t))}var h=new i.a((function(){return{c0:0,c1:0,ray:null}})),b=Object.freeze({__proto__:null,create:s,wrap:function(e,t,n){var r=h.get();return r.ray=e,r.c0=t,r.c1=n,r},copy:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s();return c(e.ray,e.c0,e.c1,t)},fromValues:c,fromRay:l,fromLineSegment:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s();return u(e,Object(r.q)(a.d.get(),e.vector),t)},fromLineSegmentAndDirection:u,getStart:d,getEnd:f,getAt:p})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={DIFFUSE:0,NORMAL:1,EMISSION:2,OCCLUSION:3,METALLIC_ROUGHNESS:4,SSAO:6,SHADOW_MAP:7}},function(e,t,n){"use strict";n.d(t,"a",(function(){return Ve})),n.d(t,"b",(function(){return Ge})),n.d(t,"c",(function(){return ze})),n.d(t,"d",(function(){return qe})),n.d(t,"e",(function(){return Ue})),n.d(t,"f",(function(){return Be})),n.d(t,"g",(function(){return He}));var r=n(5),i=n(6),a=n(14),o=n(2),s=n(3),c=n(10),l=n(237),u=n(643),d=function(){function e(t){Object(o.a)(this,e),this._color=Object(l.b)(),this._key=t}return Object(s.a)(e,[{key:"key",get:function(){return this._key}},{key:"type",get:function(){return 7&this._key}},{key:"defines",value:function(){return[]}},{key:"getStride",value:function(){return this._layoutInfo||this._buildAttributesInfo(),this._stride}},{key:"getAttributeLocations",value:function(){return this._locations||this._buildAttributesInfo(),this._locations}},{key:"getLayoutInfo",value:function(){return this._layoutInfo||this._buildAttributesInfo(),this._layoutInfo}},{key:"getEncodingInfos",value:function(){return this._propertyEncodingInfo||this._buildAttributesInfo(),this._propertyEncodingInfo}},{key:"getUniforms",value:function(){return this._uniforms||this._buildAttributesInfo(),this._uniforms}},{key:"getShaderHeader",value:function(){return this._shaderHeader||this._buildAttributesInfo(),this._shaderHeader}},{key:"getShaderMain",value:function(){return this._shaderMain||this._buildAttributesInfo(),this._shaderMain}},{key:"setDataUniforms",value:function(e,t,n,r){var i=this.getUniforms();for(var a in i){var o=i[a];switch(o.type){case"float":e.setUniform1f(o.name,o.getValue(n,t,r));break;case"vec2":e.setUniform2fv(o.name,o.getValue(n,t,r));break;case"vec4":var s=o.getValue(n,t,r),c=s[3];this._color[0]=c*s[0],this._color[1]=c*s[1],this._color[2]=c*s[2],this._color[3]=c,e.setUniform4fv(o.name,this._color)}}}},{key:"encodeAttributes",value:function(e,t,n){for(var r=this.attributesInfo(),i=this.getEncodingInfos(),o=[],s=0,c=Object.keys(i);s<c.length;s++){var l,u,d=c[s],f=i[d],p=r[d],h=p.type,b=p.precisionFactor,v=p.isLayout?n.getLayoutProperty(d):n.getPaintProperty(d),y=null==(l=v.interpolator)?void 0:l.getInterpolationRange(t),m=0,g=Object(a.a)(f);try{for(g.s();!(u=g.n()).done;){var O=u.value;O.dataIndex>=o.length&&o.push(0);var j=v.getValue(y?y[m]:t,e);switch(h){case 0:o[O.dataIndex]|=this._encodeByte(j*(b||1),8*O.offset);break;case 1:o[O.dataIndex]|=this._encodeByte(j*(b||1)+128,8*O.offset);break;case 2:o[O.dataIndex]=this._encodeColor(j);break;default:throw new Error("Unsupported encoding type")}++m}}catch(w){g.e(w)}finally{g.f()}}return o}},{key:"getAtributeState",value:function(e){var t=0,n=3+2*e;return t|=this._bit(n),t|=this._bit(n+1)<<1}},{key:"_buildAttributesInfo",value:function(){var t,n=[],r={},i={},o=-1,s=this.attributesInfo(),c=this.attributes(),l=-1,u=Object(a.a)(c);try{for(u.s();!(t=u.n()).done;){var d=t.value;++l;var f=this.getAtributeState(l);if(0!==f){var p=s[d],h=[];r[d]=h;for(var b=p.type,v=0;v<f;++v){var y=e._encodingInfo[b],m=y.dataType,g=y.bytesPerElement,O=y.count,j=y.normalized,w=m<<2|O,_=i[w];_&&4!==_.offset||(++o,i[w]=_={dataIndex:o,offset:0},n.push({location:-1,name:"a_data_"+o,count:4/g,type:m,normalized:j})),h.push({dataIndex:_.dataIndex,offset:_.offset}),_.offset+=g*O}}}}catch(M){u.e(M)}finally{u.f()}this._buildVertexBufferLayout(n);var k,x={},S=0,T=this._layoutInfo.geometry,E=Object(a.a)(T);try{for(E.s();!(k=E.n()).done;){x[k.value.name]=S++}}catch(M){E.e(M)}finally{E.f()}var C=this._layoutInfo.opacity;if(C){var P,I=Object(a.a)(C);try{for(I.s();!(P=I.n()).done;){x[P.value.name]=S++}}catch(M){I.e(M)}finally{I.f()}}this._buildShaderInfo(n,r),this._propertyEncodingInfo=r,this._locations=x}},{key:"_buildVertexBufferLayout",value:function(e){var t={},n=this.geometryInfo(),r=n[0].stride;if(0===e.length)t.geometry=n;else{var i=[],o=r;r+=4*e.length;var s,l=Object(a.a)(n);try{for(l.s();!(s=l.n()).done;){var u=s.value,d=Object(c.a)({},u);d.stride=r,i.push(d)}}catch(v){l.e(v)}finally{l.f()}var p,h=Object(a.a)(e);try{for(h.s();!(p=h.n()).done;){var b=p.value;i.push({name:b.name,count:b.count,type:b.type,offset:o,stride:r,normalized:b.normalized||!1,divisor:0}),o+=f(b.type)*b.count}}catch(v){h.e(v)}finally{h.f()}t.geometry=i}this.opacityInfo()&&(t.opacity=this.opacityInfo()),this._layoutInfo=t,this._stride=r}},{key:"_buildShaderInfo",value:function(t,n){var r,i=this,o="\n",s="\n",c=[],l=Object(a.a)(t);try{for(l.s();!(r=l.n()).done;){var u=r.value;o+="attribute ".concat(this._getType(u.count)," ").concat(u.name,";\n")}}catch(y){l.e(y)}finally{l.f()}var d,f=this.attributes(),p=this.attributesInfo(),h=-1,b=Object(a.a)(f);try{var v=function(){var t=d.value;++h;var r=p[t],a=r.name,l=r.type,u=r.precisionFactor,f=r.isLayout,b=u&&1!==u?" * "+1/u:"",v=e._encodingInfo[l],y=v.bytesPerElement,m=v.count,g=function(e){var t=2===l?"":"[".concat(e.offset/y,"]");return"a_data_".concat(e.dataIndex).concat(t)};switch(i.getAtributeState(h)){case 0:var O=i._getType(m),j="u_".concat(a);c.push({name:j,type:O,getValue:function(e,n){return f?e.getLayoutValue(t,n):e.getPaintValue(t,n)}}),o+="uniform ".concat(O," ").concat(j,";\n"),s+="".concat(O," ").concat(a," = ").concat(j,";\n");break;case 1:var w=g(n[t][0]);s+="".concat(i._getType(m)," ").concat(a," = ").concat(w).concat(b,";\n");break;case 2:var _="u_t_".concat(a);c.push({name:_,type:"float",getValue:function(e,n,r){return(f?e.getLayoutProperty(t):e.getPaintProperty(t)).interpolator.interpolationUniformValue(r,n)}}),o+="uniform float ".concat(_,";\n");var k=g(n[t][0]),x=g(n[t][1]);s+="".concat(i._getType(m)," ").concat(a," = mix(").concat(k).concat(b,", ").concat(x).concat(b,", ").concat(_,");\n")}};for(b.s();!(d=b.n()).done;)v()}catch(y){b.e(y)}finally{b.f()}this._shaderHeader=o,this._shaderMain=s,this._uniforms=c}},{key:"_bit",value:function(e){return(this._key&1<<e)>>e}},{key:"_getType",value:function(e){switch(e){case 1:return"float";case 2:return"vec2";case 4:return"vec4"}throw new Error("Invalid count")}},{key:"_encodeColor",value:function(e){var t=255*e[3];return u.a.i8888to32(e[0]*t,e[1]*t,e[2]*t,t)}},{key:"_encodeByte",value:function(e,t){return(255&e)<<t}}]),e}();d._encodingInfo=[{dataType:5121,bytesPerElement:1,count:1,normalized:!1},{dataType:5121,bytesPerElement:1,count:1,normalized:!1},{dataType:5121,bytesPerElement:1,count:4,normalized:!0}];var f=function(e){switch(e){case 5126:case 5124:case 5125:return 4;case 5122:case 5123:return 2;case 5120:case 5121:return 1}},p=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(s.a)(n,[{key:"geometryInfo",value:function(){return n.GEOMETRY_LAYOUT}},{key:"opacityInfo",value:function(){return null}},{key:"attributes",value:function(){return n.ATTRIBUTES}},{key:"attributesInfo",value:function(){return n.ATTRIBUTES_INFO}}]),n}(d);p.ATTRIBUTES=[],p.GEOMETRY_LAYOUT=[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}],p.ATTRIBUTES_INFO={};var h=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(s.a)(n,[{key:"geometryInfo",value:function(){return n.GEOMETRY_LAYOUT}},{key:"opacityInfo",value:function(){return null}},{key:"attributes",value:function(){return n.ATTRIBUTES}},{key:"attributesInfo",value:function(){return n.ATTRIBUTES_INFO}}]),n}(d);h.ATTRIBUTES=["circle-radius","circle-color","circle-opacity","circle-stroke-width","circle-stroke-color","circle-stroke-opacity","circle-blur"],h.GEOMETRY_LAYOUT=[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}],h.ATTRIBUTES_INFO={"circle-radius":{name:"radius",type:0},"circle-color":{name:"color",type:2},"circle-opacity":{name:"opacity",type:0,precisionFactor:100},"circle-stroke-width":{name:"stroke_width",type:0,precisionFactor:4},"circle-stroke-color":{name:"stroke_color",type:2},"circle-stroke-opacity":{name:"stroke_opacity",type:0,precisionFactor:100},"circle-blur":{name:"blur",type:0,precisionFactor:32}};var b=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(s.a)(n,[{key:"geometryInfo",value:function(){return n.GEOMETRY_LAYOUT}},{key:"opacityInfo",value:function(){return null}},{key:"attributes",value:function(){return n.ATTRIBUTES}},{key:"attributesInfo",value:function(){return n.ATTRIBUTES_INFO}}]),n}(d);b.ATTRIBUTES=["fill-color","fill-opacity"],b.GEOMETRY_LAYOUT=[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}],b.ATTRIBUTES_INFO={"fill-color":{name:"color",type:2},"fill-opacity":{name:"opacity",type:0,precisionFactor:100}};var v=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e,r){var i;return Object(o.a)(this,n),(i=t.call(this,e)).usefillColor=r,i}return Object(s.a)(n,[{key:"geometryInfo",value:function(){return n.GEOMETRY_LAYOUT}},{key:"opacityInfo",value:function(){return null}},{key:"attributes",value:function(){return this.usefillColor?n.ATTRIBUTES_FILL:n.ATTRIBUTES_OUTLINE}},{key:"attributesInfo",value:function(){return this.usefillColor?n.ATTRIBUTES_INFO_FILL:n.ATTRIBUTES_INFO_OUTLINE}}]),n}(d);v.ATTRIBUTES_OUTLINE=["fill-outline-color","fill-opacity"],v.ATTRIBUTES_FILL=["fill-color","fill-opacity"],v.GEOMETRY_LAYOUT=[{name:"a_pos",count:2,type:5122,offset:0,stride:8,normalized:!1,divisor:0},{name:"a_offset",count:2,type:5120,offset:4,stride:8,normalized:!1,divisor:0},{name:"a_xnormal",count:2,type:5120,offset:6,stride:8,normalized:!1,divisor:0}],v.ATTRIBUTES_INFO_OUTLINE={"fill-outline-color":{name:"color",type:2},"fill-opacity":{name:"opacity",type:0,precisionFactor:100}},v.ATTRIBUTES_INFO_FILL={"fill-color":{name:"color",type:2},"fill-opacity":{name:"opacity",type:0,precisionFactor:100}};var y=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(s.a)(n,[{key:"geometryInfo",value:function(){return n.GEOMETRY_LAYOUT}},{key:"opacityInfo",value:function(){return null}},{key:"attributes",value:function(){return n.ATTRIBUTES}},{key:"attributesInfo",value:function(){return n.ATTRIBUTES_INFO}}]),n}(d);y.ATTRIBUTES=["line-blur","line-color","line-gap-width","line-offset","line-opacity","line-width"],y.GEOMETRY_LAYOUT=[{name:"a_pos",count:2,type:5122,offset:0,stride:12,normalized:!1,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:4,stride:12,normalized:!1,divisor:0},{name:"a_accumulatedDistance",count:2,type:5123,offset:8,stride:12,normalized:!1,divisor:0}],y.ATTRIBUTES_INFO={"line-width":{name:"width",type:0,precisionFactor:2},"line-gap-width":{name:"gap_width",type:0,precisionFactor:2},"line-offset":{name:"offset",type:1,precisionFactor:2},"line-color":{name:"color",type:2},"line-opacity":{name:"opacity",type:0,precisionFactor:100},"line-blur":{name:"blur",type:0,precisionFactor:4}};var m=[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:16,normalized:!1,divisor:0},{name:"a_texAngleRange",count:4,type:5121,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}],g=[{name:"a_opacityInfo",count:1,type:5121,offset:0,stride:1,normalized:!1,divisor:0}],O=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(s.a)(n,[{key:"geometryInfo",value:function(){return m}},{key:"opacityInfo",value:function(){return g}},{key:"attributes",value:function(){return n.ATTRIBUTES}},{key:"attributesInfo",value:function(){return n.ATTRIBUTES_INFO}}]),n}(d);O.ATTRIBUTES=["icon-color","icon-opacity","icon-halo-blur","icon-halo-color","icon-halo-width","icon-size"],O.ATTRIBUTES_INFO={"icon-color":{name:"color",type:2},"icon-opacity":{name:"opacity",type:0,precisionFactor:100},"icon-halo-color":{name:"halo_color",type:2},"icon-halo-width":{name:"halo_width",type:0,precisionFactor:4},"icon-halo-blur":{name:"halo_blur",type:0,precisionFactor:4},"icon-size":{name:"size",type:0,precisionFactor:32,isLayout:!0}};var j=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(s.a)(n,[{key:"geometryInfo",value:function(){return m}},{key:"opacityInfo",value:function(){return g}},{key:"attributes",value:function(){return n.ATTRIBUTES}},{key:"attributesInfo",value:function(){return n.ATTRIBUTES_INFO}}]),n}(d);j.ATTRIBUTES=["text-color","text-opacity","text-halo-blur","text-halo-color","text-halo-width","text-size"],j.ATTRIBUTES_INFO={"text-color":{name:"color",type:2},"text-opacity":{name:"opacity",type:0,precisionFactor:100},"text-halo-color":{name:"halo_color",type:2},"text-halo-width":{name:"halo_width",type:0,precisionFactor:4},"text-halo-blur":{name:"halo_blur",type:0,precisionFactor:4},"text-size":{name:"size",type:0,isLayout:!0}};var w=n(39),_={kind:"null"},k={kind:"number"},x={kind:"string"},S={kind:"boolean"},T={kind:"color"},E={kind:"object"},C={kind:"value"};function P(e,t){return{kind:"array",itemType:e,n:t}}var I=[_,k,x,S,T,E,P(C)];function M(e){if("array"===e.kind){var t=M(e.itemType);return"number"==typeof e.n?"array<".concat(t,", ").concat(e.n,">"):"value"===e.itemType.kind?"array":"array<".concat(t,">")}return e.kind}function A(e){if(null===e)return _;if("string"==typeof e)return x;if("boolean"==typeof e)return S;if("number"==typeof e)return k;if(e instanceof w.a)return T;if(Array.isArray(e)){var t,n,r=Object(a.a)(e);try{for(r.s();!(n=r.n()).done;){var i=A(n.value);if(t){if(t!==i){t=C;break}}else t=i}}catch(o){r.e(o)}finally{r.f()}return P(t||C,e.length)}return"object"==typeof e?E:C}function R(e,t){if("array"===t.kind)return"array"===e.kind&&(0===e.n&&"value"===e.itemType.kind||R(e.itemType,t.itemType))&&("number"!=typeof t.n||t.n===e.n);if("value"===t.kind){var n,r=Object(a.a)(I);try{for(r.s();!(n=r.n()).done;){if(R(e,n.value))return!0}}catch(i){r.e(i)}finally{r.f()}}return t.kind===e.kind}function L(e){if(null===e)return"";var t=typeof e;return"string"===t?e:"number"===t||"boolean"===t?String(e):e instanceof w.a?e.toString():JSON.stringify(e)}var F=n(35),D=n(199),N=n(373),V=n(173),z=function(){function e(t){Object(o.a)(this,e),this.parent=t,this.vars={}}return Object(s.a)(e,[{key:"add",value:function(e,t){this.vars[e]=t}},{key:"get",value:function(e){return this.vars[e]?this.vars[e]:this.parent?this.parent.get(e):null}}]),e}(),U=function(){function e(){Object(o.a)(this,e),this.type=C}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){return e.id||null}}],[{key:"parse",value:function(t){if(t.length>1)throw new Error('"id" does not expect arguments');return new e}}]),e}(),B=function(){function e(){Object(o.a)(this,e),this.type=x}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){switch(e.type){case 1:return"Point";case 2:return"LineString";case 3:return"Polygon";default:return null}}}],[{key:"parse",value:function(t){if(t.length>1)throw new Error('"geometry-type" does not expect arguments');return new e}}]),e}(),G=function(){function e(){Object(o.a)(this,e),this.type=E}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){return e.values}}],[{key:"parse",value:function(t){if(t.length>1)throw new Error('"properties" does not expect arguments');return new e}}]),e}(),q=function(){function e(){Object(o.a)(this,e),this.type=k}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){return t}}],[{key:"parse",value:function(t){if(t.length>1)throw new Error('"zoom" does not expect arguments');return new e}}]),e}(),H=function(){function e(t,n,r){Object(o.a)(this,e),this.lhs=t,this.rhs=n,this.compare=r,this.type=S}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){return this.compare(this.lhs.evaluate(e,t),this.rhs.evaluate(e,t))}}],[{key:"parse",value:function(t,n,r){if(3!==t.length&&4!==t.length)throw new Error('"'.concat(t[0],'" expects 2 or 3 arguments'));if(4===t.length)throw new Error('"'.concat(t[0],'" collator not supported'));return new e(Me(t[1],n),Me(t[2],n),r)}}]),e}(),W=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,null,[{key:"parse",value:function(e,t){return H.parse(e,t,(function(e,t){return e===t}))}}]),n}(H),$=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,null,[{key:"parse",value:function(e,t){return H.parse(e,t,(function(e,t){return e!==t}))}}]),n}(H),J=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,null,[{key:"parse",value:function(e,t){return H.parse(e,t,(function(e,t){return e<t}))}}]),n}(H),Y=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,null,[{key:"parse",value:function(e,t){return H.parse(e,t,(function(e,t){return e<=t}))}}]),n}(H),K=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,null,[{key:"parse",value:function(e,t){return H.parse(e,t,(function(e,t){return e>t}))}}]),n}(H),Z=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,null,[{key:"parse",value:function(e,t){return H.parse(e,t,(function(e,t){return e>=t}))}}]),n}(H),X=function(){function e(t){Object(o.a)(this,e),this.arg=t,this.type=S}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){return!this.arg.evaluate(e,t)}}],[{key:"parse",value:function(t,n){if(2!==t.length)throw new Error('"!" expects 1 argument');return new e(Me(t[1],n))}}]),e}(),Q=function(){function e(t){Object(o.a)(this,e),this.args=t,this.type=S}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){var n,r=Object(a.a)(this.args);try{for(r.s();!(n=r.n()).done;){if(!n.value.evaluate(e,t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}}],[{key:"parse",value:function(t,n){for(var r=[],i=1;i<t.length;i++)r.push(Me(t[i],n));return new e(r)}}]),e}(),ee=function(){function e(t){Object(o.a)(this,e),this.args=t,this.type=S}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){var n,r=Object(a.a)(this.args);try{for(r.s();!(n=r.n()).done;){if(n.value.evaluate(e,t))return!0}}catch(i){r.e(i)}finally{r.f()}return!1}}],[{key:"parse",value:function(t,n){for(var r=[],i=1;i<t.length;i++)r.push(Me(t[i],n));return new e(r)}}]),e}(),te=function(){function e(t){Object(o.a)(this,e),this.args=t,this.type=S}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){var n,r=Object(a.a)(this.args);try{for(r.s();!(n=r.n()).done;){if(n.value.evaluate(e,t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}}],[{key:"parse",value:function(t,n){for(var r=[],i=1;i<t.length;i++)r.push(Me(t[i],n));return new e(r)}}]),e}(),ne=function(){function e(t,n,r){Object(o.a)(this,e),this.type=t,this.args=n,this.fallback=r}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){var n,r=Object(a.a)(this.args);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.condition.evaluate(e,t))return i.output.evaluate(e,t)}}catch(o){r.e(o)}finally{r.f()}return this.fallback.evaluate(e,t)}}],[{key:"parse",value:function(t,n,r){if(t.length<4)throw new Error('"case" expects at least 3 arguments');if(t.length%2==1)throw new Error('"case" expects an odd number of arguments');for(var i,a=[],o=1;o<t.length-1;o+=2){var s=Me(t[o],n),c=Me(t[o+1],n,r);i||(i=c.type),a.push({condition:s,output:c})}var l=Me(t[t.length-1],n,r);return i||(i=l.type),new e(i,a,l)}}]),e}(),re=function(){function e(t,n){Object(o.a)(this,e),this.type=t,this.args=n}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){var n,r=Object(a.a)(this.args);try{for(r.s();!(n=r.n()).done;){var i=n.value.evaluate(e,t);if(null!==i)return i}}catch(o){r.e(o)}finally{r.f()}return null}}],[{key:"parse",value:function(t,n){if(t.length<2)throw new Error('"coalesce" expects at least 1 argument');for(var r,i=[],a=1;a<t.length;a++){var o=Me(t[a],n);r||(r=o.type),i.push(o)}return new e(r,i)}}]),e}(),ie=function(){function e(t,n,r,i,a){Object(o.a)(this,e),this.type=t,this.input=n,this.labels=r,this.outputs=i,this.fallback=a}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){var n=this.input.evaluate(e,t);return(this.outputs[this.labels[n]]||this.fallback).evaluate(e,t)}}],[{key:"parse",value:function(t,n){if(t.length<3)throw new Error('"match" expects at least 3 arguments');if(t.length%2==0)throw new Error('"case" expects an even number of arguments');for(var r,i,o=Me(t[1],n),s=[],c={},l=2;l<t.length-1;l+=2){var u=t[l];Array.isArray(u)||(u=[u]);var d,f=Object(a.a)(u);try{for(f.s();!(d=f.n()).done;){var p=d.value,h=typeof p;if("string"!==h&&"number"!==h)throw new Error('"match" requires string or number literal as labels');if(i){if(h!==i)throw new Error('"match" requires labels to have the same type')}else i=h;c[p]=s.length}}catch(v){f.e(v)}finally{f.f()}var b=Me(t[l+1],n);r||(r=b.type),s.push(b)}return new e(r,o,c,s,Me(t[t.length-1],n))}}]),e}(),ae=function(){function e(t,n,r,i,a){Object(o.a)(this,e),this.operator=t,this.type=n,this.interpolation=r,this.input=i,this.stops=a}return Object(s.a)(e,[{key:"evaluate",value:function(t,n){var r=this.stops;if(1===r.length)return r[0][1].evaluate(t,n);var i=this.input.evaluate(t,n);if(i<=r[0][0])return r[0][1].evaluate(t,n);if(i>=r[r.length-1][0])return r[r.length-1][1].evaluate(t,n);for(var a=0;++a<r.length&&!(i<r[a][0]););var o=r[a-1][0],s=r[a][0],l=e.interpolationRatio(this.interpolation,i,o,s),u=r[a-1][1].evaluate(t,n),d=r[a][1].evaluate(t,n);if("interpolate"===this.operator){if("array"===this.type.kind&&Array.isArray(u)&&Array.isArray(d))return u.map((function(e,t){return Object(V.e)(e,d[t],l)}));if("color"===this.type.kind&&u instanceof w.a&&d instanceof w.a){var f=new w.a(u),p=new w.a(d);return new w.a([Object(V.e)(f.r,p.r,l),Object(V.e)(f.g,p.g,l),Object(V.e)(f.b,p.b,l),Object(V.e)(f.a,p.a,l)])}if("number"===this.type.kind&&"number"==typeof u&&"number"==typeof d)return Object(V.e)(u,d,l);throw new Error('"'.concat(this.operator,'" cannot interpolate type ').concat(M(this.type)))}if("interpolate-hcl"===this.operator){var h=Object(D.d)(u),b=Object(D.d)(d),v=b.h-h.h,y=Object(D.e)({h:h.h+l*(v>180||v<-180?v-360*Math.round(v/360):v),c:Object(V.e)(h.c,b.c,l),l:Object(V.e)(h.l,b.l,l)});return new w.a(Object(c.a)({a:Object(V.e)(u.a,d.a,l)},y))}if("interpolate-lab"===this.operator){var m=Object(D.c)(u),g=Object(D.c)(d),O=Object(D.e)({l:Object(V.e)(m.l,g.l,l),a:Object(V.e)(m.a,g.a,l),b:Object(V.e)(m.b,g.b,l)});return new w.a(Object(c.a)({a:Object(V.e)(u.a,d.a,l)},O))}throw new Error('Unexpected operator "'.concat(this.operator,'"'))}},{key:"interpolationUniformValue",value:function(t,n){var r=this.stops;if(1===r.length)return 0;if(t>=r[r.length-1][0])return 0;for(var i=0;++i<r.length&&!(t<r[i][0]););var a=r[i-1][0],o=r[i][0];return e.interpolationRatio(this.interpolation,n,a,o)}},{key:"getInterpolationRange",value:function(e){var t=this.stops;if(1===t.length){var n=t[0][0];return[n,n]}var r=t[t.length-1][0];if(e>=r)return[r,r];for(var i=0;++i<t.length&&!(e<t[i][0]););return[t[i-1][0],t[i][0]]}}],[{key:"parse",value:function(t,n,r){var i=t[0];if(t.length<5)throw new Error('"'.concat(i,'" expects at least 4 arguments'));var a=t[1];if(!Array.isArray(a)||0===a.length)throw new Error('"'.concat(a,'" is not a valid interpolation'));switch(a[0]){case"linear":if(1!==a.length)throw new Error("Linear interpolation cannot have parameters");break;case"exponential":if(2!==a.length||"number"!=typeof a[1])throw new Error("Exponential interpolation requires one numeric argument");break;case"cubic-bezier":if(5!==a.length)throw new Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");for(var o=1;o<5;o++){var s=a[o];if("number"!=typeof s||s<0||s>1)throw new Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1")}break;default:throw new Error('"'.concat(t[0],'" unknown interpolation type "').concat(a[0],'"'))}if(t.length%2!=1)throw new Error('"'.concat(i,'" expects an even number of arguments'));var c,l=Me(t[2],n,k);"interpolate-hcl"===i||"interpolate-lab"===i?c=T:r&&"value"!==r.kind&&(c=r);for(var u=[],d=3;d<t.length;d+=2){var f=t[d];if("number"!=typeof f)throw new Error('"'.concat(i,'" requires stop inputs as literal numbers'));if(u.length&&u[u.length-1][0]>=f)throw new Error('"'.concat(i,'" requires strictly ascending stop inputs'));var p=Me(t[d+1],n,c);c||(c=p.type),u.push([f,p])}if(c&&c!==T&&c!==k&&("array"!==c.kind||c.itemType!==k))throw new Error('"'.concat(i,'" cannot interpolate type ').concat(M(c)));return new e(i,c,a,l,u)}},{key:"interpolationRatio",value:function(t,n,r,i){var a=0;return"linear"===t[0]?a=e.exponentialInterpolationRatio(n,1,r,i):"exponential"===t[0]?a=e.exponentialInterpolationRatio(n,t[1],r,i):"cubic-bezier"===t[0]&&(a=Object(N.c)(t[1],t[2],t[3],t[4])(e.exponentialInterpolationRatio(n,1,r,i),1e-5)),a<0?a=0:a>1&&(a=1),a}},{key:"exponentialInterpolationRatio",value:function(e,t,n,r){var i=r-n;if(0===i)return 0;var a=e-n;return 1===t?a/i:(Math.pow(t,a)-1)/(Math.pow(t,i)-1)}}]),e}(),oe=function(){function e(t,n,r){Object(o.a)(this,e),this.type=t,this.input=n,this.stops=r}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){var n=this.stops;if(1===n.length)return n[0][1].evaluate(e,t);for(var r=this.input.evaluate(e,t),i=0;++i<n.length&&!(r<n[i][0]););return this.stops[i-1][1].evaluate(e,t)}}],[{key:"parse",value:function(t,n){if(t.length<5)throw new Error('"step" expects at least 4 arguments');if(t.length%2!=1)throw new Error('"step" expects an even number of arguments');var r,i=Me(t[1],n,k),a=[];a.push([-1/0,Me(t[2],n)]);for(var o=3;o<t.length;o+=2){var s=t[o];if("number"!=typeof s)throw new Error('"step" requires stop inputs as literal numbers');if(a.length&&a[a.length-1][0]>=s)throw new Error('"step" requires strictly ascending stop inputs');var c=Me(t[o+1],n);r||(r=c.type),a.push([s,c])}return new e(r,i,a)}}]),e}(),se=function(){function e(t,n){Object(o.a)(this,e),this.type=t,this.output=n}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){return this.output.evaluate(e,t)}}],[{key:"parse",value:function(t,n,r){if(t.length<4)throw new Error('"let" expects at least 3 arguments');if(t.length%2==1)throw new Error('"let" expects an odd number of arguments');for(var i=new z(n),a=1;a<t.length-1;a+=2){var o=t[a];if("string"!=typeof o)throw new Error('"let" requires a string to define variable names - found '.concat(o));i.add(o,Me(t[a+1],n))}var s=Me(t[t.length-1],i,r);return new e(s.type,s)}}]),e}(),ce=function(){function e(t,n){Object(o.a)(this,e),this.type=t,this.output=n}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){return this.output.evaluate(e,t)}}],[{key:"parse",value:function(t,n,r){if(2!==t.length||"string"!=typeof t[1])throw new Error('"var" requires just one literal string argument');var i=n.get(t[1]);if(!i)throw new Error("".concat(t[1],' must be defined before being used in a "var" expression'));return new e(r||C,i)}}]),e}(),le=function(){function e(t,n,r){Object(o.a)(this,e),this.type=t,this.index=n,this.array=r}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){var n=this.index.evaluate(e,t),r=this.array.evaluate(e,t);if(n<0||n>=r.length)throw new Error('"at" index out of bounds');if(n!==Math.floor(n))throw new Error('"at" index must be an integer');return r[n]}}],[{key:"parse",value:function(t,n){if(3!==t.length)throw new Error('"at" expects 2 arguments');var r=Me(t[1],n,k),i=Me(t[2],n);return new e(i.type.itemType,r,i)}}]),e}(),ue=function(){function e(t,n){Object(o.a)(this,e),this.key=t,this.obj=n,this.type=C}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){var n=this.key.evaluate(e,t);return this.obj?this.obj.evaluate(e,t)[n]:e.values[n]}}],[{key:"parse",value:function(t,n){switch(t.length){case 2:return new e(Me(t[1],n));case 3:return new e(Me(t[1],n),Me(t[2],n));default:throw new Error('"get" expects 1 or 2 arguments')}}}]),e}(),de=function(){function e(t,n){Object(o.a)(this,e),this.key=t,this.obj=n,this.type=S}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){var n=this.key.evaluate(e,t);return this.obj?n in this.obj.evaluate(e,t):void 0!==e.values[n]}}],[{key:"parse",value:function(t,n){switch(t.length){case 2:return new e(Me(t[1],n));case 3:return new e(Me(t[1],n),Me(t[2],n));default:throw new Error('"has" expects 1 or 2 arguments')}}}]),e}(),fe=function(){function e(t,n){Object(o.a)(this,e),this.key=t,this.vals=n,this.type=S}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){var n=this.key.evaluate(e,t);return-1!==this.vals.evaluate(e,t).indexOf(n)}}],[{key:"parse",value:function(t,n){if(3!==t.length)throw new Error('"in" expects 2 arguments');return new e(Me(t[1],n),Me(t[2],n))}}]),e}(),pe=function(){function e(t,n,r){Object(o.a)(this,e),this.item=t,this.array=n,this.from=r,this.type=k}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){var n=this.item.evaluate(e,t),r=this.array.evaluate(e,t);if(this.from){var i=this.from.evaluate(e,t);if(i!==Math.floor(i))throw new Error('"index-of" index must be an integer');return r.indexOf(n,i)}return r.indexOf(n)}}],[{key:"parse",value:function(t,n){if(t.length<3||t.length>4)throw new Error('"index-of" expects 3 or 4 arguments');var r=Me(t[1],n),i=Me(t[2],n);return 4===t.length?new e(r,i,Me(t[3],n,k)):new e(r,i)}}]),e}(),he=function(){function e(t){Object(o.a)(this,e),this.arg=t,this.type=k}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){var n=this.arg.evaluate(e,t);if("string"==typeof n)return n.length;if(Array.isArray(n))return n.length;throw new Error('"length" expects string or array')}}],[{key:"parse",value:function(t,n){if(2!==t.length)throw new Error('"length" expects 2 arguments');return new e(Me(t[1],n))}}]),e}(),be=function(){function e(t,n,r,i){Object(o.a)(this,e),this.type=t,this.array=n,this.from=r,this.to=i}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){var n=this.array.evaluate(e,t);if(!Array.isArray(n)&&"string"!=typeof n)throw new Error('"slice" input must be an array or a string');var r=this.from.evaluate(e,t);if(r<0||r>=n.length)throw new Error('"slice" index out of bounds');if(r!==Math.floor(r))throw new Error('"slice" index must be an integer');if(this.to){var i=this.to.evaluate(e,t);if(i<0||i>=n.length)throw new Error('"slice" index out of bounds');if(i!==Math.floor(i))throw new Error('"slice" index must be an integer');return n.slice(r,i)}return n.slice(r)}}],[{key:"parse",value:function(t,n){if(t.length<3||t.length>4)throw new Error('"slice" expects 2 or 3 arguments');var r=Me(t[1],n),i=Me(t[2],n,k);if(i.type!==k)throw new Error('"slice" index must return a number');if(4===t.length){var a=Me(t[3],n,k);if(a.type!==k)throw new Error('"slice" index must return a number');return new e(r.type,r,i,a)}return new e(r.type,r,i)}}]),e}(),ve=function(){function e(){Object(o.a)(this,e),this.type=S}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){return void 0!==e.id}}],[{key:"parse",value:function(t){if(1!==t.length)throw new Error('"has-id" expects no arguments');return new e}}]),e}(),ye=function(){function e(t,n){Object(o.a)(this,e),this.args=t,this.calculate=n,this.type=k}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){var n;return this.args&&(n=this.args.map((function(n){return n.evaluate(e,t)}))),this.calculate(n)}}],[{key:"parse",value:function(t,n,r){return new e(t.slice(1).map((function(e){return Me(e,n)})),r)}}]),e}(),me=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,null,[{key:"parse",value:function(e,t){switch(e.length){case 2:return ye.parse(e,t,(function(e){return-e[0]}));case 3:return ye.parse(e,t,(function(e){return e[0]-e[1]}));default:throw new Error('"-" expects 1 or 2 arguments')}}}]),n}(ye),ge=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,null,[{key:"parse",value:function(e,t){return ye.parse(e,t,(function(e){var t,n=1,r=Object(a.a)(e);try{for(r.s();!(t=r.n()).done;){n*=t.value}}catch(i){r.e(i)}finally{r.f()}return n}))}}]),n}(ye),Oe=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,null,[{key:"parse",value:function(e,t){if(3===e.length)return ye.parse(e,t,(function(e){return e[0]/e[1]}));throw new Error('"/" expects 2 arguments')}}]),n}(ye),je=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,null,[{key:"parse",value:function(e,t){if(3===e.length)return ye.parse(e,t,(function(e){return e[0]%e[1]}));throw new Error('"%" expects 2 arguments')}}]),n}(ye),we=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,null,[{key:"parse",value:function(e,t){if(3===e.length)return ye.parse(e,t,(function(e){return Math.pow(e[0],e[1])}));throw new Error('"^" expects 1 or 2 arguments')}}]),n}(ye),_e=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,null,[{key:"parse",value:function(e,t){return ye.parse(e,t,(function(e){var t,n=0,r=Object(a.a)(e);try{for(r.s();!(t=r.n()).done;){n+=t.value}}catch(i){r.e(i)}finally{r.f()}return n}))}}]),n}(ye),ke=function(){function e(t,n){Object(o.a)(this,e),this.args=t,this.calculate=n,this.type=k}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){var n;return this.args&&(n=this.args.map((function(n){return n.evaluate(e,t)}))),this.calculate(n)}}],[{key:"parse",value:function(t,n){return new e(t.slice(1).map((function(e){return Me(e,n)})),e.ops[t[0]])}}]),e}();ke.ops={abs:function(e){return Math.abs(e[0])},acos:function(e){return Math.acos(e[0])},asin:function(e){return Math.asin(e[0])},atan:function(e){return Math.atan(e[0])},ceil:function(e){return Math.ceil(e[0])},cos:function(e){return Math.cos(e[0])},e:function(){return Math.E},floor:function(e){return Math.floor(e[0])},ln:function(e){return Math.log(e[0])},ln2:function(){return Math.LN2},log10:function(e){return Math.log(e[0])/Math.LN10},log2:function(e){return Math.log(e[0])/Math.LN2},max:function(e){return Math.max.apply(Math,Object(F.a)(e))},min:function(e){return Math.min.apply(Math,Object(F.a)(e))},pi:function(){return Math.PI},round:function(e){return Math.round(e[0])},sin:function(e){return Math.sin(e[0])},sqrt:function(e){return Math.sqrt(e[0])},tan:function(e){return Math.tan(e[0])}};var xe=function(){function e(t){Object(o.a)(this,e),this.args=t,this.type=x}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){return this.args.map((function(n){return n.evaluate(e,t)})).join("")}}],[{key:"parse",value:function(t,n){return new e(t.slice(1).map((function(e){return Me(e,n)})))}}]),e}(),Se=function(){function e(t,n){Object(o.a)(this,e),this.arg=t,this.calculate=n,this.type=x}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){return this.calculate(this.arg.evaluate(e,t))}}],[{key:"parse",value:function(t,n){if(2!==t.length)throw new Error("".concat(t[0]," expects 1 argument"));return new e(Me(t[1],n),e.ops[t[0]])}}]),e}();Se.ops={downcase:function(e){return e.toLowerCase()},upcase:function(e){return e.toUpperCase()}};var Te=function(){function e(t){Object(o.a)(this,e),this.args=t,this.type=T}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){var n=this._validate(this.args[0].evaluate(e,t)),r=this._validate(this.args[1].evaluate(e,t)),i=this._validate(this.args[2].evaluate(e,t));return new w.a({r:n,g:r,b:i})}},{key:"_validate",value:function(e){if("number"!=typeof e||e<0||e>255)throw new Error("".concat(e,": invalid color component"));return Math.round(e)}}],[{key:"parse",value:function(t,n){if(4!==t.length)throw new Error('"rgb" expects 3 arguments');return new e(t.slice(1).map((function(e){return Me(e,n)})))}}]),e}(),Ee=function(){function e(t){Object(o.a)(this,e),this.args=t,this.type=T}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){var n=this._validate(this.args[0].evaluate(e,t)),r=this._validate(this.args[1].evaluate(e,t)),i=this._validate(this.args[2].evaluate(e,t)),a=this._validateAlpha(this.args[3].evaluate(e,t));return new w.a({r:n,g:r,b:i,a:a})}},{key:"_validate",value:function(e){if("number"!=typeof e||e<0||e>255)throw new Error("".concat(e,": invalid color component"));return Math.round(e)}},{key:"_validateAlpha",value:function(e){if("number"!=typeof e||e<0||e>1)throw new Error("".concat(e,": invalid alpha color component"));return e}}],[{key:"parse",value:function(t,n){if(5!==t.length)throw new Error('"rgba" expects 4 arguments');return new e(t.slice(1).map((function(e){return Me(e,n)})))}}]),e}(),Ce=function(){function e(t){Object(o.a)(this,e),this.color=t,this.type=P(k,4)}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){return new w.a(this.color.evaluate(e,t)).toRgba()}}],[{key:"parse",value:function(t,n){if(2!==t.length)throw new Error('"to-rgba" expects 1 argument');return new e(Me(t[1],n))}}]),e}(),Pe=function(){function e(t,n){Object(o.a)(this,e),this.type=t,this.args=n}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){var n,r,i=Object(a.a)(this.args);try{for(i.s();!(r=i.n()).done;){var o=r.value.evaluate(e,t);if(R(n=A(o),this.type))return o}}catch(s){i.e(s)}finally{i.f()}throw new Error("Expected ".concat(M(this.type)," but got ").concat(M(n)))}}],[{key:"parse",value:function(t,n){var r=t[0];if(t.length<2)throw new Error("".concat(r," expects at least one argument"));var i,a=1;if("array"===r){if(t.length>2){switch(t[1]){case"string":i=x;break;case"number":i=k;break;case"boolean":i=S;break;default:throw new Error('"array" type argument must be string, number or boolean')}a++}else i=C;var o;if(t.length>3){if(null!==(o=t[2])&&("number"!=typeof o||o<0||o!==Math.floor(o)))throw new Error('"array" length argument must be a positive integer literal');a++}i=P(i,o)}else switch(r){case"string":i=x;break;case"number":i=k;break;case"boolean":i=S;break;case"object":i=E}for(var s=[];a<t.length;a++){var c=Me(t[a],n);s.push(c)}return new e(i,s)}}]),e}(),Ie=function(){function e(t,n){Object(o.a)(this,e),this.type=t,this.args=n}return Object(s.a)(e,[{key:"evaluate",value:function(t,n){if(this.type===S)return Boolean(this.args[0].evaluate(t,n));if(this.type===x)return L(this.args[0].evaluate(t,n));if(this.type===k){var r,i=Object(a.a)(this.args);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=Number(o.evaluate(t,n));if(!isNaN(s))return s}}catch(f){i.e(f)}finally{i.f()}return null}if(this.type===T){var c,l=Object(a.a)(this.args);try{for(l.s();!(c=l.n()).done;){var u=c.value;try{var d=e.toColor(u.evaluate(t,n));if(d instanceof w.a)return d}catch(p){}}}catch(f){l.e(f)}finally{l.f()}return null}}}],[{key:"parse",value:function(t,n){var r=t[0],i=e.types[r];if(i===S||i===x){if(2!==t.length)throw new Error("".concat(r," expects one argument"))}else if(t.length<2)throw new Error("".concat(r," expects at least one argument"));for(var a=[],o=1;o<t.length;o++){var s=Me(t[o],n);a.push(s)}return new e(i,a)}},{key:"toBoolean",value:function(e){return Boolean(e)}},{key:"toString",value:function(e){return L(e)}},{key:"toNumber",value:function(e){var t=Number(e);if(isNaN(t))throw new Error('"'.concat(e,'" is not a number'));return t}},{key:"toColor",value:function(e){if(e instanceof w.a)return e;if("string"==typeof e){var t=w.a.fromString(e);if(t)return t;throw new Error('"'.concat(e,'" is not a color'))}if(Array.isArray(e))return w.a.fromArray(e);throw new Error('"'.concat(e,'" is not a color'))}}]),e}();function Me(e,t,n){var r=typeof e;if("string"===r||"boolean"===r||"number"===r||null===e){if(n)switch(n.kind){case"string":"string"!==r&&(e=Ie.toString(e));break;case"number":"number"!==r&&(e=Ie.toNumber(e));break;case"color":e=Ie.toColor(e)}e=["literal",e]}if(!Array.isArray(e)||0===e.length)throw new Error("Expression must be a non empty array");var i=e[0];if("string"!=typeof i)throw new Error("First element of expression must be a string");var a=Ae[i];if(void 0===a)throw new Error('Invalid expression operator "'.concat(i,'"'));if(!a)throw new Error('Unimplemented expression operator "'.concat(i,'"'));return a.parse(e,t,n)}Ie.types={"to-boolean":S,"to-color":T,"to-number":k,"to-string":x};var Ae={array:Pe,boolean:Pe,collator:null,format:null,image:null,literal:function(){function e(t){Object(o.a)(this,e),this.val=t,this.type=A(t)}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){return this.val}}],[{key:"parse",value:function(t){if(2!==t.length)throw new Error('"literal" expects 1 argument');return new e(t[1])}}]),e}(),number:Pe,"number-format":null,object:Pe,string:Pe,"to-boolean":Ie,"to-color":Ie,"to-number":Ie,"to-string":Ie,typeof:function(){function e(t){Object(o.a)(this,e),this.arg=t,this.type=x}return Object(s.a)(e,[{key:"evaluate",value:function(e,t){return M(A(this.arg.evaluate(e,t)))}}],[{key:"parse",value:function(t,n){if(2!==t.length)throw new Error('"typeof" expects 1 argument');return new e(Me(t[1],n))}}]),e}(),accumulated:null,"feature-state":null,"geometry-type":B,id:U,"line-progress":null,properties:G,at:le,get:ue,has:de,in:fe,"index-of":pe,length:he,slice:be,"!":X,"!=":$,"<":J,"<=":Y,"==":W,">":K,">=":Z,all:Q,any:ee,case:ne,coalesce:re,match:ie,within:null,interpolate:ae,"interpolate-hcl":ae,"interpolate-lab":ae,step:oe,let:se,var:ce,concat:xe,downcase:Se,"is-supported-script":null,"resolved-locale":null,upcase:Se,rgb:Te,rgba:Ee,"to-rgba":Ce,"-":me,"*":ge,"/":Oe,"%":je,"^":we,"+":_e,abs:ke,acos:ke,asin:ke,atan:ke,ceil:ke,cos:ke,e:ke,floor:ke,ln:ke,ln2:ke,log10:ke,log2:ke,max:ke,min:ke,pi:ke,round:ke,sin:ke,sqrt:ke,tan:ke,zoom:q,"heatmap-density":null,"has-id":ve,none:te},Re=function(){function e(t){Object(o.a)(this,e),this._expression=t}return Object(s.a)(e,[{key:"filter",value:function(e,t){if(!this._expression)return!0;try{return this._expression.evaluate(e,t)}catch(n){return console.log(n.message),!0}}}],[{key:"createFilter",value:function(t){if(!t)return null;this.isLegacyFilter(t)&&(t=this.convertLegacyFilter(t));try{var n;return new e(Me(t,null,S))}catch(n){return console.log(n.message),null}}},{key:"isLegacyFilter",value:function(e){if(!Array.isArray(e))return!0;if(0===e.length)return!0;switch(e[0]){case"==":case"!=":case">":case"<":case">=":case"<=":return 3===e.length&&"string"==typeof e[1]&&!Array.isArray(e[2]);case"in":return e.length>=3&&"string"==typeof e[1]&&!Array.isArray(e[2]);case"!in":return!0;case"any":case"all":for(var t=1;t<e.length;t++)if(!this.isLegacyFilter(e[1]))return!1;return!0;case"none":return!0;case"has":return 2===e.length&&("$id"===e[1]||"$type"===e[1]);case"!has":return!0;default:return!1}}},{key:"convertLegacyFilter",value:function(t){if(!Array.isArray(t)||0===t.length)return!0;var n=t[0];if(1===t.length)return"any"!==n;switch(n){case"==":return e.convertComparison("==",t[1],t[2]);case"!=":return e.negate(e.convertComparison("==",t[1],t[2]));case">":case"<":case">=":case"<=":return e.convertComparison(n,t[1],t[2]);case"in":return e.convertIn(t[1],t.slice(2));case"!in":return e.negate(e.convertIn(t[1],t.slice(2)));case"any":case"all":case"none":return e.convertCombining(n,t.slice(1));case"has":return e.convertHas(t[1]);case"!has":return e.negate(e.convertHas(t[1]));default:throw new Error("Unexpected legacy filter.")}}},{key:"convertComparison",value:function(e,t,n){switch(t){case"$type":return[e,["geometry-type"],n];case"$id":return[e,["id"],n];default:return[e,["get",t],n]}}},{key:"convertIn",value:function(e,t){switch(e){case"$type":return["in",["geometry-type"],["literal",t]];case"$id":return["in",["id"],["literal",t]];default:return["in",["get",e],["literal",t]]}}},{key:"convertHas",value:function(e){switch(e){case"$type":return!0;case"$id":return["has-id"];default:return["has",e]}}},{key:"convertCombining",value:function(e,t){return[e].concat(t.map(this.convertLegacyFilter))}},{key:"negate",value:function(e){return["!",e]}}]),e}(),Le=function e(){Object(o.a)(this,e)};Le.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:0}},Le.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:0}},Le.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:0},"line-cap":{type:"enum",values:["butt","round","square"],default:0},"line-join":{type:"enum",values:["bevel","round","miter"],default:2},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}},Le.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:0},"symbol-avoid-edges":{type:"boolean",default:!1},"symbol-placement":{type:"enum",values:["point","line","line-center"],default:0},"symbol-sort-key":{type:"number",default:-1},"symbol-spacing":{type:"number",minimum:1,default:250},"icon-allow-overlap":{type:"boolean",default:!1},"icon-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:0},"icon-ignore-placement":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"icon-optional":{type:"boolean",default:!1},"icon-padding":{type:"number",minimum:0,default:2},"icon-rotate":{type:"number",default:0},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:2},"icon-size":{type:"number",minimum:0,default:1},"text-allow-overlap":{type:"boolean",default:!1},"text-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:0},"text-field":{type:"string"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-ignore-placement":{type:"boolean",default:!1},"text-justify":{type:"enum",values:["auto","left","center","right"],default:2},"text-keep-upright":{type:"boolean",default:!0},"text-letter-spacing":{type:"number",default:0},"text-line-height":{type:"number",default:1.2},"text-max-angle":{type:"number",minimum:0,default:45},"text-max-width":{type:"number",minimum:0,default:10},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-optional":{type:"boolean",default:!1},"text-padding":{type:"number",minimum:0,default:2},"text-rotate":{type:"number",default:0},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:2},"text-size":{type:"number",minimum:0,default:16},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:0},"text-writing-mode":{type:"array",value:"enum",values:["horizontal","vertical"],default:[0]}},Le.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:0}},Le.backgroundPaintDefinition={"background-color":{type:"color",default:[0,0,0,1]},"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-pattern":{type:"string"}},Le.fillPaintDefinition={"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-pattern":{type:"string"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:0}},Le.linePaintDefinition={"line-blur":{type:"number",minimum:0,default:0},"line-color":{type:"color",default:[0,0,0,1]},"line-dasharray":{type:"array",value:"number",default:[]},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-pattern":{type:"string"},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:0},"line-width":{type:"number",minimum:0,default:1}},Le.symbolPaintDefinition={"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:0},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-blur":{type:"number",minimum:0,default:0},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:0}},Le.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}},Le.circlePaintDefinition={"circle-blur":{type:"number",minimum:0,default:0},"circle-color":{type:"color",default:[0,0,0,1]},"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:0}};var Fe=function(){function e(t,n){var r;switch(Object(o.a)(this,e),this.isDataDriven=!1,this.interpolator=null,t.type){case"number":case"color":r=!0;break;case"array":r="number"===t.value;break;default:r=!1}if(null==n&&(n=t.default),Array.isArray(n)&&n.length>0&&Ae[n[0]]){var i={number:k,color:T,string:x,boolean:S,enum:x};try{var s=Me(n,null,"array"===t.type?P(i[t.value]||C,t.length):i[t.type]);this.getValue=this._buildExpression(s,t),this.isDataDriven=!0,s instanceof ae&&s.input instanceof q&&(this.interpolator=s)}catch(f){console.log(f.message),this.getValue=this._buildSimple(t.default)}}else{r&&"interval"===n.type&&(r=!1);var c=n&&n.stops&&n.stops.length>0;if(c){var l,u=Object(a.a)(n.stops);try{for(u.s();!(l=u.n()).done;){var d=l.value;d[1]=this._validate(d[1],t)}}catch(p){u.e(p)}finally{u.f()}}if(this.isDataDriven=!!n&&!!n.property,this.isDataDriven)if(void 0!==n.default&&(n.default=this._validate(n.default,t)),c)switch(n.type){case"identity":this.getValue=this._buildIdentity(n,t);break;case"categorical":this.getValue=this._buildCategorical(n,t);break;default:this.getValue=r?this._buildInterpolate(n,t):this._buildInterval(n,t)}else this.getValue=this._buildIdentity(n,t);else c?this.getValue=r?this._buildZoomInterpolate(n):this._buildZoomInterval(n):(n=this._validate(n,t),this.getValue=this._buildSimple(n))}}return Object(s.a)(e,[{key:"_validate",value:function(t,n){if("number"===n.type){if(t<n.minimum)return n.minimum;if(t>n.maximum)return n.maximum}else"color"===n.type?t=e._parseColor(t):"enum"===n.type?"string"==typeof t&&(t=n.values.indexOf(t)):"array"===n.type&&"enum"===n.value?t=t.map((function(e){return"string"==typeof t?n.values.indexOf(e):e})):"string"===n.type&&(t=L(t));return t}},{key:"_buildSimple",value:function(e){return function(){return e}}},{key:"_buildExpression",value:function(e,t){var n=this;return function(r,i){try{var a=e.evaluate(i,r);return void 0===a?t.default:n._validate(a,t)}catch(o){return console.log(o.message),t.default}}}},{key:"_buildIdentity",value:function(e,t){var n=this;return function(r,i){var a;return i&&(a=i.values[e.property]),void 0!==a?n._validate(a,t):void 0!==e.default?e.default:t.default}}},{key:"_buildCategorical",value:function(e,t){var n=this;return function(r,i){var a;return i&&(a=i.values[e.property]),void 0!==(a=n._categorical(a,e.stops))?a:void 0!==e.default?e.default:t.default}}},{key:"_buildInterval",value:function(e,t){var n=this;return function(r,i){var a;return i&&(a=i.values[e.property]),"number"==typeof a?n._interval(a,e.stops):void 0!==e.default?e.default:t.default}}},{key:"_buildInterpolate",value:function(e,t){var n=this;return function(r,i){var a;return i&&(a=i.values[e.property]),"number"==typeof a?n._interpolate(a,e.stops,e.base||1):void 0!==e.default?e.default:t.default}}},{key:"_buildZoomInterpolate",value:function(e){var t=this;return function(n){return t._interpolate(n,e.stops,e.base||1)}}},{key:"_buildZoomInterval",value:function(e){var t=this;return function(n){return t._interval(n,e.stops)}}},{key:"_categorical",value:function(e,t){for(var n=t.length,r=0;r<n;r++)if(t[r][0]===e)return t[r][1]}},{key:"_interval",value:function(e,t){for(var n=t.length,r=0,i=0;i<n&&t[i][0]<=e;i++)r=i;return t[r][1]}},{key:"_interpolate",value:function(e,t,n){for(var r,i,a=t.length,o=0;o<a;o++){var s=t[o];if(!(s[0]<=e)){i=s;break}r=s}if(r&&i){var c=i[0]-r[0],l=e-r[0],u=1===n?l/c:(Math.pow(n,l)-1)/(Math.pow(n,c)-1);if(Array.isArray(r[1])){for(var d=r[1],f=i[1],p=[],h=0;h<d.length;h++)p.push(Object(V.e)(d[h],f[h],u));return p}return Object(V.e)(r[1],i[1],u)}return r?r[1]:i?i[1]:void 0}}],[{key:"_isEmpty",value:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"_parseColor",value:function(e){return Array.isArray(e)?e:("string"==typeof e&&(e=new w.a(e)),e instanceof w.a?this._isEmpty(e)?void 0:w.a.toUnitRGBA(e):e)}}]),e}(),De=n(599),Ne=function(){function e(t,n,r,i){switch(Object(o.a)(this,e),this.type=t,this.typeName=n.type,this.id=n.id,this.source=n.source,this.sourceLayer=n["source-layer"],this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,this.filter=n.filter,this.layout=n.layout,this.paint=n.paint,this.z=r,this.uid=i,t){case 0:this._layoutDefinition=Le.backgroundLayoutDefinition,this._paintDefinition=Le.backgroundPaintDefinition;break;case 1:this._layoutDefinition=Le.fillLayoutDefinition,this._paintDefinition=Le.fillPaintDefinition;break;case 2:this._layoutDefinition=Le.lineLayoutDefinition,this._paintDefinition=Le.linePaintDefinition;break;case 3:this._layoutDefinition=Le.symbolLayoutDefinition,this._paintDefinition=Le.symbolPaintDefinition;break;case 4:this._layoutDefinition=Le.circleLayoutDefinition,this._paintDefinition=Le.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout),this._paintProperties=this._parsePaint(this.paint)}return Object(s.a)(e,[{key:"getFeatureFilter",value:function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=Re.createFilter(this.filter)}},{key:"getLayoutProperty",value:function(e){return this._layoutProperties[e]}},{key:"getPaintProperty",value:function(e){return this._paintProperties[e]}},{key:"getLayoutValue",value:function(e,t,n){var r,i=this._layoutProperties[e];return i&&(r=i.getValue(t,n)),void 0===r&&(r=this._layoutDefinition[e].default),r}},{key:"getPaintValue",value:function(e,t,n){var r,i=this._paintProperties[e];return i&&(r=i.getValue(t,n)),void 0===r&&(r=this._paintDefinition[e].default),r}},{key:"isPainterDataDriven",value:function(){var e=this._paintProperties;if(e)for(var t in e)if(e[t].isDataDriven)return!0;return!1}},{key:"_parseLayout",value:function(e){var t={};for(var n in e){var r=this._layoutDefinition[n];r&&(t[n]=new Fe(r,e[n]))}return t}},{key:"_parsePaint",value:function(e){var t={};for(var n in e){var r=this._paintDefinition[n];r&&(t[n]=new Fe(r,e[n]))}return t}},{key:"computeAttributesKey",value:function(e,t){var n,r=0,i=0,o=Object(a.a)(t);try{for(o.s();!(n=o.n()).done;){var s=n.value,c="icon-size"===s||"text-size"===s?this.getLayoutProperty(s):this.getPaintProperty(s);i|=(null!=c&&c.interpolator?2:null!=c&&c.isDataDriven?1:0)<<r,r+=2}}catch(l){o.e(l)}finally{o.f()}return i<<3|e}}]),e}(),Ve=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e,r,i,a){var s;return Object(o.a)(this,n),(s=t.call(this,e,r,i,a)).backgroundMaterial=new p(s.computeAttributesKey(0,p.ATTRIBUTES)),s}return n}(Ne),ze=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e,r,i,a){var s;Object(o.a)(this,n);var c=(s=t.call(this,e,r,i,a)).getPaintProperty("fill-color"),l=s.getPaintProperty("fill-opacity"),u=s.getPaintProperty("fill-pattern");s.hasDataDrivenColor=null==c?void 0:c.isDataDriven,s.hasDataDrivenOpacity=null==l?void 0:l.isDataDriven,s.hasDataDrivenFill=s.hasDataDrivenColor||s.hasDataDrivenOpacity||(null==u?void 0:u.isDataDriven);var d=s.getPaintProperty("fill-outline-color");return s.outlineUsesFillColor=!d,s.hasDataDrivenOutlineColor=null==d?void 0:d.isDataDriven,s.hasDataDrivenOutline=d?d.isDataDriven:!!c&&c.isDataDriven,s.hasDataDrivenOutline=(d?s.hasDataDrivenOutlineColor:s.hasDataDrivenColor)||s.hasDataDrivenOpacity,s.fillMaterial=new b(s.computeAttributesKey(1,b.ATTRIBUTES)),s.outlineMaterial=new v(s.computeAttributesKey(2,s.outlineUsesFillColor?v.ATTRIBUTES_FILL:v.ATTRIBUTES_OUTLINE),s.outlineUsesFillColor),s}return n}(Ne),Ue=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e,r,i,a){var s,c,l,u,d,f,p,h;Object(o.a)(this,n),(s=t.call(this,e,r,i,a)).lineMaterial=new y(s.computeAttributesKey(3,y.ATTRIBUTES)),s.hasDataDrivenLine=(null==(c=s.getPaintProperty("line-blur"))?void 0:c.isDataDriven)||(null==(l=s.getPaintProperty("line-color"))?void 0:l.isDataDriven)||(null==(u=s.getPaintProperty("line-gap-width"))?void 0:u.isDataDriven)||(null==(d=s.getPaintProperty("line-offset"))?void 0:d.isDataDriven)||(null==(f=s.getPaintProperty("line-opacity"))?void 0:f.isDataDriven)||(null==(p=s.getPaintProperty("line-pattern"))?void 0:p.isDataDriven)||(null==(h=s.getPaintProperty("line-width"))?void 0:h.isDataDriven);var b=r.paint["line-width"];b||(b=Le.linePaintDefinition["line-width"].default);var v=s.getPaintProperty("line-width");return s.isThinLine=!(null!=v&&v.isDataDriven)&&"number"==typeof b&&b<De.D,s}return n}(Ne),Be=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e,r,i,a){var s,c,l,u,d,f,p,h,b,v,y,m,g;return Object(o.a)(this,n),(s=t.call(this,e,r,i,a)).iconMaterial=new O(s.computeAttributesKey(4,O.ATTRIBUTES)),s.textMaterial=new j(s.computeAttributesKey(6,j.ATTRIBUTES)),s.hasDataDrivenIcon=(null==(c=s.getPaintProperty("icon-color"))?void 0:c.isDataDriven)||(null==(l=s.getPaintProperty("icon-halo-blur"))?void 0:l.isDataDriven)||(null==(u=s.getPaintProperty("icon-halo-color"))?void 0:u.isDataDriven)||(null==(d=s.getPaintProperty("icon-halo-width"))?void 0:d.isDataDriven)||(null==(f=s.getPaintProperty("icon-opacity"))?void 0:f.isDataDriven)||(null==(p=s.getLayoutProperty("icon-size"))?void 0:p.isDataDriven),s.hasDataDrivenText=(null==(h=s.getPaintProperty("text-color"))?void 0:h.isDataDriven)||(null==(b=s.getPaintProperty("text-halo-blur"))?void 0:b.isDataDriven)||(null==(v=s.getPaintProperty("text-halo-color"))?void 0:v.isDataDriven)||(null==(y=s.getPaintProperty("text-halo-width"))?void 0:y.isDataDriven)||(null==(m=s.getPaintProperty("text-opacity"))?void 0:m.isDataDriven)||(null==(g=s.getLayoutProperty("text-size"))?void 0:g.isDataDriven),s}return n}(Ne),Ge=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e,r,i,a){var s;return Object(o.a)(this,n),(s=t.call(this,e,r,i,a)).circleMaterial=new h(s.computeAttributesKey(5,h.ATTRIBUTES)),s}return n}(Ne),qe=function(){function e(t,n,r){var i,a,s,c,l,u;Object(o.a)(this,e),this.allowOverlap=t.getLayoutValue("icon-allow-overlap",n),this.ignorePlacement=t.getLayoutValue("icon-ignore-placement",n),this.keepUpright=t.getLayoutValue("icon-keep-upright",n),this.optional=t.getLayoutValue("icon-optional",n),this.rotationAlignment=t.getLayoutValue("icon-rotation-alignment",n),2===this.rotationAlignment&&(this.rotationAlignment=r?0:1),null!=(i=u=t.getLayoutProperty("icon-anchor"))&&i.isDataDriven?this._anchorProp=u:this.anchor=t.getLayoutValue("icon-anchor",n),null!=(a=u=t.getLayoutProperty("icon-offset"))&&a.isDataDriven?this._offsetProp=u:this.offset=t.getLayoutValue("icon-offset",n),null!=(s=u=t.getLayoutProperty("icon-padding"))&&s.isDataDriven?this._paddingProp=u:this.padding=t.getLayoutValue("icon-padding",n),null!=(c=u=t.getLayoutProperty("icon-rotate"))&&c.isDataDriven?this._rotateProp=u:this.rotate=t.getLayoutValue("icon-rotate",n),null!=(l=u=t.getLayoutProperty("icon-size"))&&l.isDataDriven?this._sizeProp=u:this.size=t.getLayoutValue("icon-size",n)}return Object(s.a)(e,[{key:"update",value:function(e,t){this._anchorProp&&(this.anchor=this._anchorProp.getValue(e,t)),this._offsetProp&&(this.offset=this._offsetProp.getValue(e,t)),this._paddingProp&&(this.padding=this._paddingProp.getValue(e,t)),this._rotateProp&&(this.rotate=this._rotateProp.getValue(e,t)),this._sizeProp&&(this.size=this._sizeProp.getValue(e,t))}}]),e}(),He=function(){function e(t,n,r){var i,a,s,c,l,u,d,f,p,h,b,v;Object(o.a)(this,e),this.allowOverlap=t.getLayoutValue("text-allow-overlap",n),this.ignorePlacement=t.getLayoutValue("text-ignore-placement",n),this.keepUpright=t.getLayoutValue("text-keep-upright",n),this.optional=t.getLayoutValue("text-optional",n),this.rotationAlignment=t.getLayoutValue("text-rotation-alignment",n),2===this.rotationAlignment&&(this.rotationAlignment=r?0:1),null!=(i=v=t.getLayoutProperty("text-anchor"))&&i.isDataDriven?this._anchorProp=v:this.anchor=t.getLayoutValue("text-anchor",n),null!=(a=v=t.getLayoutProperty("text-justify"))&&a.isDataDriven?this._justifyProp=v:this.justify=t.getLayoutValue("text-justify",n),null!=(s=v=t.getLayoutProperty("text-letter-spacing"))&&s.isDataDriven?this._letterSpacingProp=v:this.letterSpacing=t.getLayoutValue("text-letter-spacing",n),null!=(c=v=t.getLayoutProperty("text-line-height"))&&c.isDataDriven?this._lineHeightProp=v:this.lineHeight=t.getLayoutValue("text-line-height",n),null!=(l=v=t.getLayoutProperty("text-max-angle"))&&l.isDataDriven?this._maxAngleProp=v:this.maxAngle=t.getLayoutValue("text-max-angle",n),null!=(u=v=t.getLayoutProperty("text-max-width"))&&u.isDataDriven?this._maxWidthProp=v:this.maxWidth=t.getLayoutValue("text-max-width",n),null!=(d=v=t.getLayoutProperty("text-offset"))&&d.isDataDriven?this._offsetProp=v:this.offset=t.getLayoutValue("text-offset",n),null!=(f=v=t.getLayoutProperty("text-padding"))&&f.isDataDriven?this._paddingProp=v:this.padding=t.getLayoutValue("text-padding",n),null!=(p=v=t.getLayoutProperty("text-rotate"))&&p.isDataDriven?this._rotateProp=v:this.rotate=t.getLayoutValue("text-rotate",n),null!=(h=v=t.getLayoutProperty("text-size"))&&h.isDataDriven?this._sizeProp=v:this.size=t.getLayoutValue("text-size",n),null!=(b=v=t.getLayoutProperty("text-writing-mode"))&&b.isDataDriven?this._writingModeProp=v:this.writingMode=t.getLayoutValue("text-writing-mode",n)}return Object(s.a)(e,[{key:"update",value:function(e,t){this._anchorProp&&(this.anchor=this._anchorProp.getValue(e,t)),this._justifyProp&&(this.justify=this._justifyProp.getValue(e,t)),this._letterSpacingProp&&(this.letterSpacing=this._letterSpacingProp.getValue(e,t)),this._lineHeightProp&&(this.lineHeight=this._lineHeightProp.getValue(e,t)),this._maxAngleProp&&(this.maxAngle=this._maxAngleProp.getValue(e,t)),this._maxWidthProp&&(this.maxWidth=this._maxWidthProp.getValue(e,t)),this._offsetProp&&(this.offset=this._offsetProp.getValue(e,t)),this._paddingProp&&(this.padding=this._paddingProp.getValue(e,t)),this._rotateProp&&(this.rotate=this._rotateProp.getValue(e,t)),this._sizeProp&&(this.size=this._sizeProp.getValue(e,t)),this._writingModeProp&&(this.writingMode=this._writingModeProp.getValue(e,t))}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(5),i=n(6),a=n(2),o=n(3),s=n(13).a.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder"),c=function(){function e(){Object(a.a)(this,e),this.includedModules=new Map}return Object(o.a)(e,[{key:"include",value:function(e,t){this.includedModules.has(e)?this.includedModules.get(e)!==t&&s.error("Trying to include shader module multiple times with different sets of options."):(this.includedModules.set(e,t),e(this.builder,t))}}]),e}(),l=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.apply(this,arguments)).vertex=new f,e.fragment=new f,e.attributes=new p,e.varyings=new h,e.extensions=new b,e.constants=new v,e}return Object(o.a)(n,[{key:"builder",get:function(){return this}},{key:"generateSource",value:function(e){var t=this.extensions.generateSource(e),n=this.attributes.generateSource(e),r=this.varyings.generateSource(),i="vertex"===e?this.vertex:this.fragment,a=i.uniforms.generateSource(),o=i.code.generateSource(),s="vertex"===e?m:y,c=this.constants.generateSource().concat(i.constants.generateSource());return"\n".concat(t.join("\n"),"\n\n").concat(s,"\n\n").concat(c.join("\n"),"\n\n").concat(a.join("\n"),"\n\n").concat(n.join("\n"),"\n\n").concat(r.join("\n"),"\n\n").concat(o.join("\n"))}}]),n}(c),u=function(){function e(){Object(a.a)(this,e),this._entries=new Array,this._set=new Set}return Object(o.a)(e,[{key:"add",value:function(e,t,n){var r="".concat(e,"_").concat(t,"_").concat(n);return this._set.has(r)||(this._entries.push([e,t,n]),this._set.add(r)),this}},{key:"generateSource",value:function(){return this._entries.map((function(e){return"uniform ".concat(e[1]," ").concat(e[0]).concat((t=e[2])?"[".concat(t,"]"):"",";");var t}))}}]),e}(),d=function(){function e(){Object(a.a)(this,e),this._entries=new Array}return Object(o.a)(e,[{key:"add",value:function(e){this._entries.push(e)}},{key:"generateSource",value:function(){return this._entries}}]),e}(),f=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.apply(this,arguments)).uniforms=new u,e.code=new d,e.constants=new v,e}return Object(o.a)(n,[{key:"builder",get:function(){return this}}]),n}(c),p=function(){function e(){Object(a.a)(this,e),this._entries=new Array}return Object(o.a)(e,[{key:"add",value:function(e,t){this._entries.push([e,t])}},{key:"generateSource",value:function(e){return"fragment"===e?[]:this._entries.map((function(e){return"attribute ".concat(e[1]," ").concat(e[0],";")}))}}]),e}(),h=function(){function e(){Object(a.a)(this,e),this._entries=new Array}return Object(o.a)(e,[{key:"add",value:function(e,t){this._entries.push([e,t])}},{key:"generateSource",value:function(){return this._entries.map((function(e){return"varying ".concat(e[1]," ").concat(e[0],";")}))}}]),e}(),b=function(){function e(){Object(a.a)(this,e),this._entries=new Set}return Object(o.a)(e,[{key:"add",value:function(e){this._entries.add(e)}},{key:"generateSource",value:function(t){var n="vertex"===t?e.ALLOWLIST_VERTEX:e.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter((function(e){return n.includes(e)})).map((function(e){return"#extension ".concat(e," : enable")}))}}]),e}();b.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"],b.ALLOWLIST_VERTEX=[];var v=function(){function e(){Object(a.a)(this,e),this._entries=[]}return Object(o.a)(e,[{key:"add",value:function(t,n,r){var i="ERROR_CONSTRUCTOR_STRING";switch(n){case"float":i=e.numberToFloatStr(r);break;case"int":i=e.numberToIntStr(r);break;case"bool":i=r.toString();break;case"vec2":i="vec2(".concat(e.numberToFloatStr(r[0]),",                            ").concat(e.numberToFloatStr(r[1]),")");break;case"vec3":i="vec3(".concat(e.numberToFloatStr(r[0]),",                            ").concat(e.numberToFloatStr(r[1]),",                            ").concat(e.numberToFloatStr(r[2]),")");break;case"vec4":i="vec4(".concat(e.numberToFloatStr(r[0]),",                            ").concat(e.numberToFloatStr(r[1]),",                            ").concat(e.numberToFloatStr(r[2]),",                            ").concat(e.numberToFloatStr(r[3]),")");break;case"ivec2":i="ivec2(".concat(e.numberToIntStr(r[0]),",                             ").concat(e.numberToIntStr(r[1]),")");break;case"ivec3":i="ivec3(".concat(e.numberToIntStr(r[0]),",                             ").concat(e.numberToIntStr(r[1]),",                             ").concat(e.numberToIntStr(r[2]),")");break;case"ivec4":i="ivec4(".concat(e.numberToIntStr(r[0]),",                             ").concat(e.numberToIntStr(r[1]),",                             ").concat(e.numberToIntStr(r[2]),",                             ").concat(e.numberToIntStr(r[3]),")");break;case"bvec2":i="bvec2(".concat(r[0].toString(),",                             ").concat(r[1].toString(),")");break;case"bvec3":i="bvec3(".concat(r[0].toString(),",                             ").concat(r[1].toString(),",                             ").concat(r[2].toString(),")");break;case"bvec4":i="bvec4(".concat(r[0].toString(),",                             ").concat(r[1].toString(),",                             ").concat(r[2].toString(),",                             ").concat(r[3].toString(),")");break;case"mat2":case"mat3":case"mat4":i="".concat(n,"(").concat(Array.prototype.map.call(r,(function(t){return e.numberToFloatStr(t)})).join(", "),")")}return this._entries.push("const ".concat(n," ").concat(t," = ").concat(i,";")),this}},{key:"generateSource",value:function(){return Array.from(this._entries)}}],[{key:"numberToIntStr",value:function(e){return e.toFixed(0)}},{key:"numberToFloatStr",value:function(e){return Number.isInteger(e)?e.toFixed(1):e.toString()}}]),e}(),y="#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp sampler2D;\n#else\n  precision mediump float;\n  precision mediump sampler2D;\n#endif",m="precision highp float;\nprecision highp sampler2D;"},function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(10),i=n(7),a=n.n(i),o=n(15),s=n(2),c=n(3),l=n(53),u=n(50),d=n(5),f=n(6),p=n(0),h=(n(16),n(13)),b=(n(17),n(1)),v=n(41),y=n(8),m=n(42),g=n(18),O=n(12),j=(n(19),n(20),n(24)),w=n(109),_=n(435),k=h.a.getLogger("esri.layers.mixins.PortalLayer"),x=function(e){var t=function(e){Object(d.a)(i,e);var t=Object(f.a)(i);function i(){var e;return Object(s.a)(this,i),(e=t.apply(this,arguments)).resourceReferences={portalItem:null,paths:[]},e}return Object(c.a)(i,[{key:"destroy",value:function(){var e;null==(e=this.portalItem)||e.destroy(),this.portalItem=null}},{key:"portalItem",set:function(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}},{key:"readPortalItem",value:function(e,t,n){if(t.itemId)return new _.default({id:t.itemId,portal:n&&n.portal})}},{key:"writePortalItem",value:function(e,t){e&&e.id&&(t.itemId=e.id)}},{key:"loadFromPortal",value:function(){var e=Object(o.a)(a.a.mark((function e(t,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.portalItem||!this.portalItem.id){e.next=14;break}return e.prev=1,e.next=4,n.e(131).then(n.bind(null,912));case 4:return i=e.sent,Object(j.u)(r),e.next=8,i.load({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData},r);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(1),Object(j.m)(e.t0)||k.warn("Failed to load layer (".concat(this.title,", ").concat(this.id,") portal item (").concat(this.portalItem.id,")\n  ").concat(e.t0)),e.t0;case 14:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"read",value:function(e,t){t&&(t.layer=this),Object(l.a)(Object(u.a)(i.prototype),"read",this).call(this,e,t)}},{key:"write",value:function(e,t){var n=t&&t.portal,a=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||w.a.getDefault());return n&&a&&!Object(O.r)(a.restUrl,n.restUrl)?(t.messages&&t.messages.push(new g.a("layer:cross-portal","The layer '".concat(this.title," (").concat(this.id,")' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer"),{layer:this})),null):Object(l.a)(Object(u.a)(i.prototype),"write",this).call(this,e,Object(r.a)(Object(r.a)({},t),{},{layer:this}))}}]),i}(e);return Object(p.a)([Object(b.b)({type:_.default})],t.prototype,"portalItem",null),Object(p.a)([Object(v.a)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),Object(p.a)([Object(m.a)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),Object(p.a)([Object(b.b)()],t.prototype,"resourceReferences",void 0),t=Object(p.a)([Object(y.a)("esri.layers.mixins.PortalLayer")],t),t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(10),i=n(2),a=n(3),o=n(53),s=n(50),c=n(5),l=n(6),u=n(0),d=(n(16),n(13),n(17),n(1)),f=n(8),p=n(42),h=n(18),b=(n(12),n(19),n(20),n(413)),v=n(323),y={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,VectorTileLayer:!0,WMS:!0,KML:!0,RasterDataLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISFeatureLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0,CSV:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,VectorTileLayer:!0,WFS:!0,SubtypeGroupLayer:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}},m=n(124),g=function(e){var t=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).title=null,e}return Object(a.a)(n,[{key:"writeListMode",value:function(e,t,n,r){(r&&"ground"===r.layerContainerType||e&&Object(v.a)(this,n,{},r))&&(t[n]=e)}},{key:"writeOperationalLayerType",value:function(e,t,n,r){!e||r&&"tables"===r.layerContainerType||(t.layerType=e)}},{key:"writeTitle",value:function(e,t){t.title=e||"Layer"}},{key:"read",value:function(e,t){var r=this;t&&(t.layer=this),Object(b.b)(this,e,(function(t){return Object(o.a)(Object(s.a)(n.prototype),"read",r).call(r,e,t)}),t)}},{key:"write",value:function(e,t){if(t&&t.origin){var i="".concat(t.origin,"/").concat(t.layerContainerType||"operational-layers"),a=y[i],c=a&&a[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===i&&(c=!1),!c)return t.messages&&t.messages.push(new h.a("layer:unsupported","Layers (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' are not supported in the context of '").concat(i,"'"),{layer:this})),null}var l=Object(o.a)(Object(s.a)(n.prototype),"write",this).call(this,e,Object(r.a)(Object(r.a)({},t),{},{layer:this})),u=!!t&&!!t.messages&&!!t.messages.filter((function(e){return e instanceof h.a&&"web-document-write:property-required"===e.name})).length;return!this.url&&u?null:l}},{key:"beforeSave",value:function(){}}]),n}(e);return Object(u.a)([Object(d.b)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),Object(u.a)([Object(d.b)({json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}})],t.prototype,"listMode",void 0),Object(u.a)([Object(p.a)("listMode")],t.prototype,"writeListMode",null),Object(u.a)([Object(d.b)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),Object(u.a)([Object(p.a)("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),Object(u.a)([Object(d.b)(m.h)],t.prototype,"opacity",void 0),Object(u.a)([Object(d.b)({type:String,json:{write:{ignoreOrigin:!0,allowNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,allowNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),Object(u.a)([Object(p.a)("title")],t.prototype,"writeTitle",null),Object(u.a)([Object(d.b)({type:Boolean,json:{name:"visibility",origins:{"web-document":{name:"visibility",default:!0},"portal-item":{name:"visibility",read:{source:["visible","visibility"]}}}}})],t.prototype,"visible",void 0),t=Object(u.a)([Object(f.a)("esri.layers.mixins.OperationalLayer")],t)}},function(e,t,n){"use strict";var r,i=n(31),a=n(2),o=n(3),s=n(5),c=n(6),l=n(0),u=(n(16),n(22)),d=(n(13),n(17),n(1)),f=n(8),p=n(42),h=(n(12),n(19),n(20),n(150)),b=n(43),v=n(63),y=n(313);function m(e){return function(t,n){return null==t?n:null==n?t:e(t,n)}}var g=r=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).points=[],e.type="multipoint",e}return Object(o.a)(n,[{key:"normalizeCtorArgs",value:function(e,t){if(!e&&!t)return null;var n={};Array.isArray(e)?(n.points=e,n.spatialReference=t):function(e){return e&&("esri.geometry.SpatialReference"===e.declaredClass||null!=e.wkid)}(e)?n.spatialReference=e:(e.points&&(n.points=e.points),e.spatialReference&&(n.spatialReference=e.spatialReference),e.hasZ&&(n.hasZ=e.hasZ),e.hasM&&(n.hasM=e.hasM));var r=n.points&&n.points[0];return r&&(void 0===n.hasZ&&void 0===n.hasM?(n.hasZ=r.length>2,n.hasM=!1):void 0===n.hasZ?n.hasZ=r.length>3:void 0===n.hasM&&(n.hasM=r.length>3)),n}},{key:"cache",get:function(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}},{key:"extent",get:function(){var e=this.points;if(!e.length)return null;for(var t,n,r,a,o=new v.a,s=this.hasZ,c=this.hasM,l=s?3:2,u=e[0],d=m(Math.min),f=m(Math.max),p=Object(i.a)(u,2),h=p[0],b=p[1],y=Object(i.a)(u,2),g=y[0],O=y[1],j=0,w=e.length;j<w;j++){var _=e[j],k=Object(i.a)(_,2),x=k[0],S=k[1];if(h=d(h,x),b=d(b,S),g=f(g,x),O=f(O,S),s&&_.length>2){var T=_[2];t=d(t,T),r=f(r,T)}if(c&&_.length>l){var E=_[l];n=d(n,E),a=f(a,E)}}return o.xmin=h,o.ymin=b,o.xmax=g,o.ymax=O,o.spatialReference=this.spatialReference,s?(o.zmin=t,o.zmax=r):(o.zmin=null,o.zmax=null),c?(o.mmin=n,o.mmax=a):(o.mmin=null,o.mmax=null),o}},{key:"writePoints",value:function(e,t){t.points=Object(u.a)(this.points)}},{key:"addPoint",value:function(e){return Object(y.a)(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}},{key:"clone",value:function(){var e={points:Object(u.a)(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new r(e)}},{key:"getPoint",value:function(e){if(!this._validateInputs(e))return null;var t=this.points[e],n={x:t[0],y:t[1],spatialReference:this.spatialReference},r=2;return this.hasZ&&(n.z=t[2],r=3),this.hasM&&(n.m=t[r]),new b.a(n)}},{key:"removePoint",value:function(e){if(!this._validateInputs(e))return null;var t=new b.a(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}},{key:"setPoint",value:function(e,t){return this._validateInputs(e)?(Object(y.a)(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}},{key:"toJSON",value:function(e){return this.write(null,e)}},{key:"_validateInputs",value:function(e){return null!=e&&e>=0&&e<this.points.length}}]),n}(h.a);Object(l.a)([Object(d.b)({readOnly:!0})],g.prototype,"cache",null),Object(l.a)([Object(d.b)()],g.prototype,"extent",null),Object(l.a)([Object(d.b)({type:[[Number]],json:{write:{isRequired:!0}}})],g.prototype,"points",void 0),Object(l.a)([Object(p.a)("points")],g.prototype,"writePoints",null),(g=r=Object(l.a)([Object(f.a)("esri.geometry.Multipoint")],g)).prototype.toJSON.isDefaultToJSON=!0;var O=g;t.a=O},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(2),i=n(3),a=n(5),o=n(6),s=n(0),c=(n(16),n(13),n(17),n(1)),l=n(8),u=(n(12),n(19),n(20),function(e){var t=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).minScale=0,e.maxScale=0,e}return Object(i.a)(n,[{key:"scaleRangeId",get:function(){return"".concat(this.minScale,",").concat(this.maxScale)}}]),n}(e);return Object(s.a)([Object(c.b)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),Object(s.a)([Object(c.b)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),Object(s.a)([Object(c.b)({readOnly:!0})],t.prototype,"scaleRangeId",null),t=Object(s.a)([Object(l.a)("esri.layers.mixins.ScaleRangeLayer")],t)})},function(e,t,n){"use strict";var r=n(14),i=n(2),a=n(3),o=(n(16),n(4)),s=["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"],c=n(315),l=999,u=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function d(){var e,t,n,r=0,i=0,a=l,o=[],s=[],d=1,f=0,p=0,h=!1,b=!1,v="";return function(e){return s=[],null!==e?m(e.replace?e.replace(/\r\n/g,"\n"):e):(o.length&&y(o.join("")),a=10,y("(eof)"),s)};function y(e){e.length&&s.push({type:u[a],data:e,position:p,line:d,column:f})}function m(c){var u;for(r=0,n=(v+=c).length;e=v[r],r<n;){switch(u=r,a){case 0:r="/"===e&&"*"===t?(o.push(e),y(o.join("")),a=l,r+1):(o.push(e),t=e,r+1);break;case 1:case 2:r=g();break;case 3:r=O();break;case 4:r="."===e||/[eE]/.test(e)?(o.push(e),a=5,t=e,r+1):"x"===e&&1===o.length&&"0"===o[0]?(a=11,o.push(e),t=e,r+1):/[^\d]/.test(e)?(y(o.join("")),a=l,r):(o.push(e),t=e,r+1);break;case 11:r=/[^a-fA-F0-9]/.test(e)?(y(o.join("")),a=l,r):(o.push(e),t=e,r+1);break;case 5:"f"===e&&(o.push(e),t=e,r+=1),r=/[eE]/.test(e)||"-"===e&&/[eE]/.test(t)?(o.push(e),t=e,r+1):/[^\d]/.test(e)?(y(o.join("")),a=l,r):(o.push(e),t=e,r+1);break;case 9999:r=w();break;case 9:r=/[^\s]/g.test(e)?(y(o.join("")),a=l,r):(o.push(e),t=e,r+1);break;case l:o=o.length?[]:o,r="/"===t&&"*"===e?(p=i+r-1,a=0,t=e,r+1):"/"===t&&"/"===e?(p=i+r-1,a=1,t=e,r+1):"#"===e?(a=2,p=i+r,r):/\s/.test(e)?(a=9,p=i+r,r):(h=/\d/.test(e),b=/[^\w_]/.test(e),p=i+r,a=h?4:b?3:9999,r)}if(u!==r)switch(v[u]){case"\n":f=0,++d;break;default:++f}}return i+=r,v=v.slice(r),s}function g(){return"\r"!==e&&"\n"!==e||"\\"===t?(o.push(e),t=e,r+1):(y(o.join("")),a=l,r)}function O(){if("."===t&&/\d/.test(e))return a=5,r;if("/"===t&&"*"===e)return a=0,r;if("/"===t&&"/"===e)return a=1,r;if("."===e&&o.length){for(;j(o););return a=5,r}if(";"===e||")"===e||"("===e){if(o.length)for(;j(o););return y(e),a=l,r+1}var n=2===o.length&&"="!==e;if(/[\w_\d\s]/.test(e)||n){for(;j(o););return a=l,r}return o.push(e),t=e,r+1}function j(e){for(var t,n,r=0;;){if(t=c.c.indexOf(e.slice(0,e.length+r).join("")),n=c.c[t],-1===t){if(r--+e.length>0)continue;n=e.slice(0,1).join("")}return y(n),p+=n.length,(o=o.slice(n.length)).length}}function w(){if(/[^\d\w_]/.test(e)){var n=o.join("");return a=c.b.indexOf(n)>-1?8:c.a.indexOf(n)>-1?7:6,y(o.join("")),a=l,r}return o.push(e),t=e,r+1}}function f(e){return function(e){var t=d(),n=[];return(n=n.concat(t(e))).concat(t(null))}(e)}var p=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];function h(e,t){for(var n=t-1;n>=0;n--){var r=e[n];if("whitespace"!==r.type&&"block-comment"!==r.type){if("keyword"!==r.type)break;if("attribute"===r.data||"in"===r.data)return!0}}return!1}function b(e,t,n,i){i=i||n;var a,o=Object(r.a)(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;if("ident"===s.type&&s.data===n)return i in t?t[i]++:t[i]=0,b(e,t,i+"_"+t[i],i)}}catch(c){o.e(c)}finally{o.f()}return n}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"afterVersion";function i(e,t){for(var n=t;n<e.length;n++){var r=e[n];if("operator"===r.type&&";"===r.data)return n}return null}function a(e){for(var t=-1,r=0,a=-1,o=0;o<e.length;o++){var s=e[o];if("preprocessor"===s.type&&(s.data.match(/\#(if|ifdef|ifndef)\s+.+/)?++r:s.data.match(/\#endif\s*.*/)&&--r),"afterVersion"!==n&&"afterPrecision"!==n||"preprocessor"===s.type&&/^#version/.test(s.data)&&(a=Math.max(a,o)),"afterPrecision"===n&&"keyword"===s.type&&"precision"===s.data){var c=i(e,o);if(null===c)throw new Error("precision statement not followed by any semicolons!");a=Math.max(a,c)}t<a&&0===r&&(t=o)}return t+1}var o={data:"\n",type:"whitespace"},s=function(t){return t<e.length&&/[^\r\n]$/.test(e[t].data)},c=a(e);s(c-1)&&e.splice(c++,0,o);var l,u=Object(r.a)(t);try{for(u.s();!(l=u.n()).done;){var d=l.value;e.splice(c++,0,d)}}catch(f){u.e(f)}finally{u.f()}s(c-1)&&s(c)&&e.splice(c,0,o)}function y(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"lowp";v(e,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:r},{type:"whitespace",data:" "},{type:"keyword",data:n},{type:"whitespace",data:" "},{type:"ident",data:t},{type:"operator",data:";"}],"afterPrecision")}function m(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"lowp";v(e,[{type:"keyword",data:"layout"},{type:"operator",data:"("},{type:"keyword",data:"location"},{type:"whitespace",data:" "},{type:"operator",data:"="},{type:"whitespace",data:" "},{type:"integer",data:r.toString()},{type:"operator",data:")"},{type:"whitespace",data:" "},{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:i},{type:"whitespace",data:" "},{type:"keyword",data:n},{type:"whitespace",data:" "},{type:"ident",data:t},{type:"operator",data:";"}],"afterPrecision")}function g(e,t){for(var n,r,i=-1,a=t;a<e.length;a++){var o=e[a];if("operator"===o.type&&("["===o.data&&(n=a),"]"===o.data)){r=a;break}"integer"===o.type&&(i=parseInt(o.data,10))}return n&&r&&e.splice(n,r-n+1),i}function O(e,t){var n=f(e);if("300 es"===function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"100",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"300 es",a=/^\s*\#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/,o=Object(r.a)(e);try{for(o.s();!(t=o.n()).done;){var s=t.value;if("preprocessor"===s.type){var c=a.exec(s.data);if(c){var l=c[1].replace(/\s\s+/g," ");if(l===i)return l;if(l===n)return s.data="#version "+i,n;throw new Error("unknown glsl version: "+l)}}}}catch(u){o.e(u)}finally{o.f()}return e.splice(0,0,{type:"preprocessor",data:"#version "+i},{type:"whitespace",data:"\n"}),null}(n,"100","300 es"))throw new Error("shader is already glsl 300 es");for(var i=null,a=null,o={},c={},l=0;l<n.length;++l){var u=n[l];switch(u.type){case"keyword":"vertex"===t&&"attribute"===u.data?u.data="in":"varying"===u.data&&(u.data="vertex"===t?"out":"in");break;case"builtin":if(/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(u.data.trim())&&(u.data=u.data.replace(/(2D|Cube|EXT)/g,"")),"fragment"===t&&"gl_FragColor"===u.data&&(i||y(n,i=b(n,o,"fragColor"),"vec4"),u.data=i),"fragment"===t&&"gl_FragData"===u.data){var d=g(n,l+1),v=b(n,o,"fragData");m(n,v,"vec4",d,"mediump"),u.data=v}else"fragment"===t&&"gl_FragDepthEXT"===u.data&&(a||(a=b(n,o,"gl_FragDepth")),u.data=a);break;case"ident":if(s.indexOf(u.data)>=0){if("vertex"===t&&h(n,l))throw new Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");u.data in c||(c[u.data]=b(n,o,u.data)),u.data=c[u.data]}}}for(var O=n.length-1;O>=0;--O){var j=n[O];if("preprocessor"===j.type){var w=j.data.match(/\#extension\s+(.*)\:/);if(w&&w[1]&&p.indexOf(w[1].trim())>=0){var _=n[O+1];n.splice(O,_&&"whitespace"===_.type?2:1)}var k=j.data.match(/\#ifdef\s+(.*)/);k&&k[1]&&p.indexOf(k[1].trim())>=0&&(j.data="#if 1");var x=j.data.match(/\#ifndef\s+(.*)/);x&&x[1]&&p.indexOf(x[1].trim())>=0&&(j.data="#if 0")}}return n.map((function(e){return"eof"!==e.type?e.data:""})).join("")}var j=function(){function e(t,n,a,o){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(Object(i.a)(this,e),this._context=null,this._glName=null,this._locations={},this._initialized=!1,this._vShader=null,this._fShader=null,this._defines={},this._nameToUniformLocation={},this._nameToAttribLocation={},this._nameToUniform1={},this._nameToUniform1v={},this._nameToUniform2={},this._nameToUniform3={},this._nameToUniform4={},this._nameToUniformMatrix3={},this._nameToUniformMatrix4={},t||console.error("RenderingContext isn't initialized!"),0===n.length&&console.error("Shaders source should not be empty!"),t.instanceCounter.increment(3,this),this._context=t,this._vertexShaderSource=n,this._fragmentShaderSource=a,Array.isArray(s)){var c,l=Object(r.a)(s);try{for(l.s();!(c=l.n()).done;){var u=c.value;this._defines[u]="1"}}catch(d){l.e(d)}finally{l.f()}}else this._defines=s;this._locations=o}return Object(a.a)(e,[{key:"glName",get:function(){return this._glName}},{key:"locations",get:function(){return this._locations}},{key:"getDefine",value:function(e){return this._defines[e]}},{key:"dispose",value:function(){if(this._context){var e=this._context.gl;if(this._vShader){var t=this._vShader;e.deleteShader(t),this._vShader=null}if(this._fShader){var n=this._fShader;e.deleteShader(n),this._fShader=null}this._glName&&(e.deleteProgram(this._glName),this._glName=null),this._context.instanceCounter.decrement(3,this),this._context=null}}},{key:"initialize",value:function(){if(!this._initialized){this._vShader=this._loadShader(35633),this._fShader=this._loadShader(35632),this._vShader&&this._fShader||console.error("Error loading shaders!");var e=this._context.gl,t=e.createProgram();for(var n in e.attachShader(t,this._vShader),e.attachShader(t,this._fShader),this._locations){var r=this._locations[n];e.bindAttribLocation(t,r,n)}e.linkProgram(t),this._glName=t,this._initialized=!0}}},{key:"getUniformLocation",value:function(e){return this.initialize(),void 0===this._nameToUniformLocation[e]&&(this._nameToUniformLocation[e]=this._context.gl.getUniformLocation(this._glName,e)),this._nameToUniformLocation[e]}},{key:"hasUniform",value:function(e){return null!==this.getUniformLocation(e)}},{key:"getAttribLocation",value:function(e){return this.initialize(),void 0===this._nameToAttribLocation[e]&&(this._nameToAttribLocation[e]=this._context.gl.getAttribLocation(this._glName,e)),this._nameToAttribLocation[e]}},{key:"setUniform1i",value:function(e,t){var n=this._nameToUniform1[e];void 0!==n&&t===n||(this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(e),t),this._nameToUniform1[e]=t)}},{key:"setUniform1iv",value:function(t,n){var r=this._nameToUniform1v[t];w(r,n)&&(this._context.bindProgram(this),this._context.gl.uniform1iv(this.getUniformLocation(t),n),void 0===r?this._nameToUniform1v[t]=e._arrayCopy(n):e._arrayAssign(n,r))}},{key:"setUniform2iv",value:function(t,n){var r=this._nameToUniform2[t];w(r,n)&&(this._context.bindProgram(this),this._context.gl.uniform2iv(this.getUniformLocation(t),n),void 0===r?this._nameToUniform2[t]=e._arrayCopy(n):e._arrayAssign(n,r))}},{key:"setUniform3iv",value:function(t,n){var r=this._nameToUniform3[t];w(r,n)&&(this._context.bindProgram(this),this._context.gl.uniform3iv(this.getUniformLocation(t),n),void 0===r?this._nameToUniform3[t]=e._arrayCopy(n):e._arrayAssign(n,r))}},{key:"setUniform4iv",value:function(t,n){var r=this._nameToUniform4[t];w(r,n)&&(this._context.bindProgram(this),this._context.gl.uniform4iv(this.getUniformLocation(t),n),void 0===r?this._nameToUniform4[t]=e._arrayCopy(n):e._arrayAssign(n,r))}},{key:"setUniform1f",value:function(e,t){var n=this._nameToUniform1[e];void 0!==n&&t===n||(this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(e),t),this._nameToUniform1[e]=t)}},{key:"setUniform1fv",value:function(t,n){var r=this._nameToUniform1v[t];w(r,n)&&(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(t),n),void 0===r?this._nameToUniform1v[t]=e._arrayCopy(n):e._arrayAssign(n,r))}},{key:"setUniform2f",value:function(e,t,n){var r=this._nameToUniform2[e];void 0!==r&&t===r[0]&&n===r[1]||(this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(e),t,n),void 0===r?this._nameToUniform2[e]=[t,n]:(r[0]=t,r[1]=n))}},{key:"setUniform2fv",value:function(t,n){var r=this._nameToUniform2[t];w(r,n)&&(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(t),n),void 0===r?this._nameToUniform2[t]=e._arrayCopy(n):e._arrayAssign(n,r))}},{key:"setUniform3f",value:function(e,t,n,r){var i=this._nameToUniform3[e];void 0!==i&&t===i[0]&&n===i[1]&&r===i[2]||(this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(e),t,n,r),void 0===i?this._nameToUniform3[e]=[t,n,r]:(i[0]=t,i[1]=n,i[2]=r))}},{key:"setUniform3fv",value:function(t,n){var r=this._nameToUniform3[t];w(r,n)&&(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(t),n),void 0===r?this._nameToUniform3[t]=e._arrayCopy(n):e._arrayAssign(n,r))}},{key:"setUniform4f",value:function(e,t,n,r,i){var a=this._nameToUniform4[e];void 0!==a&&t===a[0]&&n===a[1]&&r===a[2]&&i===a[3]||(this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(e),t,n,r,i),void 0===a?this._nameToUniform4[e]=[t,n,r,i]:(a[0]=t,a[1]=n,a[2]=r,a[3]=i))}},{key:"setUniform4fv",value:function(t,n){var r=this._nameToUniform4[t];w(r,n)&&(this._context.bindProgram(this),this._context.gl.uniform4fv(this.getUniformLocation(t),n),void 0===r?this._nameToUniform4[t]=e._arrayCopy(n):e._arrayAssign(n,r))}},{key:"setUniformMatrix3fv",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this._nameToUniformMatrix3[t];_(i,n)&&(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(t),r,n),void 0===i?this._nameToUniformMatrix3[t]=e._arrayCopy(n):e._arrayAssign(n,i))}},{key:"setUniformMatrix4fv",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this._nameToUniformMatrix4[t];k(i,n)&&(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(t),r,n),void 0===i?this._nameToUniformMatrix4[t]=e._arrayCopy(n):e._arrayAssign(n,i))}},{key:"assertCompatibleVertexAttributeLocations",value:function(e){var t=e.locations===this.locations;return t||console.error("VertexAttributeLocations are incompatible"),t}},{key:"_addLineNumbers",value:function(t){var n=2;return t.replace(/\n/g,(function(){return"\n"+e._padToThree(n++)+":"}))}},{key:"_loadShader",value:function(e){var t=35633===e,n=t?this._vertexShaderSource:this._fragmentShaderSource,r="";for(var i in this._defines)r+="#define ".concat(i," ").concat(this._defines[i],"\n");n=r+n,"webgl2"===this._context.contextVersion&&(n=O(n,t?"vertex":"fragment"));var a=this._context.gl,o=a.createShader(e);return a.shaderSource(o,n),a.compileShader(o),o}}],[{key:"_padToThree",value:function(e){var t=e.toString();return e<1e3&&(t=("  "+e).slice(-3)),t}},{key:"_arrayCopy",value:function(e){for(var t=[],n=0;n<e.length;++n)t.push(e[n]);return t}},{key:"_arrayAssign",value:function(e,t){for(var n=0;n<e.length;++n)t[n]=e[n]}}]),e}();function w(e,t){if(Object(o.j)(e)||e.length!==t.length)return!0;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!0;return!1}function _(e,t){return!!Object(o.j)(e)||(9!==e.length?w(e,t):9!==e.length||e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||e[4]!==t[4]||e[5]!==t[5]||e[6]!==t[6]||e[7]!==t[7]||e[8]!==t[8])}function k(e,t){return!!Object(o.j)(e)||(16!==e.length?w(e,t):16!==e.length||e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||e[4]!==t[4]||e[5]!==t[5]||e[6]!==t[6]||e[7]!==t[7]||e[8]!==t[8]||e[9]!==t[9]||e[10]!==t[10]||e[11]!==t[11]||e[12]!==t[12]||e[13]!==t[13]||e[14]!==t[14]||e[15]!==t[15])}t.a=j},function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",(function(){return a}));var i=n(37);function a(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?Object(i.a)(e):t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u}));var r,i,a,o,s=n(29),c=n(34),l=.1,u=.001;function d(e,t){var n=e.fragment;switch(t.alphaDiscardMode){case 0:n.code.add(Object(c.a)(r||(r=Object(s.a)(["\n        #define discardOrAdjustAlpha(color) { if (color.a < ",") { discard; } }\n      "])),c.a.float(u)));break;case 1:n.code.add(Object(c.a)(i||(i=Object(s.a)(["\n        void discardOrAdjustAlpha(inout vec4 color) {\n          color.a = 1.0;\n        }\n      "]))));break;case 2:n.uniforms.add("textureAlphaCutoff","float"),n.code.add(Object(c.a)(a||(a=Object(s.a)(["\n        #define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } else { color.a = 1.0; } }\n      "]))));break;case 3:e.fragment.uniforms.add("textureAlphaCutoff","float"),e.fragment.code.add(Object(c.a)(o||(o=Object(s.a)(["\n        #define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } }\n      "]))))}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(2),i=n(5),a=n(6),o=n(0),s=(n(16),n(13),n(17),n(1)),c=n(8),l=(n(12),n(19),n(20),function(e){var t=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).blendMode="normal",e.effect=null,e}return n}(e);return Object(o.a)([Object(s.b)({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{default:"normal",read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),Object(o.a)([Object(s.b)()],t.prototype,"effect",void 0),t=Object(o.a)([Object(c.a)("esri.layers.mixins.BlendLayer")],t)})},function(e,t,n){"use strict";n.r(t);var r=n(14),i=n(7),a=n.n(i),o=n(15),s=n(10),c=n(2),l=n(3),u=n(53),d=n(50),f=n(5),p=n(6),h=n(0),b=n(16),v=n(100),y=n(4),m=n(13),g=n(1),O=n(58),j=n(47),w=n(41),_=n(243),k=n(8),x=n(42),S=n(18),T=n(12),E=(n(19),n(20),n(24)),C=n(44),P=n(63),I=n(40),M=n(54),A=n(205),R=n(62),L=n(76),F=n(51),D=n(174),N=n(216),V=n(185),z=n(251),U=n(124),B=n(258),G=(n(166),n(432),n(379)),q=(n(477),n(479),n(478),n(384)),H=n(320),W=n(349),$=n(464),J=n(552),Y=n(204),K=n(17);var Z,X=n(118),Q=n(219),ee=(n(71),n(218)),te=n(133),ne=n(74),re=n(381),ie=n(392),ae=n(457),oe=0,se=m.a.getLogger("esri.layers.graphics.sources.MemorySource"),ce=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e))._idToClientGraphic=null,r.type="memory",r}return Object(l.a)(n,[{key:"load",value:function(e){var t=Object(y.k)(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}},{key:"destroy",value:function(){var e;null==(e=this._connection)||e.close(),this._connection=null}},{key:"workerGeometryType",get:function(){var e=this.layer&&this.layer.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}},{key:"applyEdits",value:function(e){var t=this;return this.load().then((function(){return t._applyEdits(e)}))}},{key:"openPorts",value:function(){var e=this;return this.load().then((function(){return e._connection.openPorts()}))}},{key:"queryFeatures",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var n,i,o,s,c,l,u,d,f,p=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:{},e.next=3,this.load(n);case 3:return e.next=5,this._connection.invoke("queryFeatures",t?t.toJSON():null,n);case 5:if(i=e.sent,Object(ae.a)(t,this.layer.spatialReference,i),o=Y.default.fromJSON(i),this._requiresClientGraphicMapping()){e.next=10;break}return e.abrupt("return",o);case 10:s=this.layer.objectIdField,c=Object(r.a)(o.features);try{for(c.s();!(l=c.n()).done;)u=l.value,d=u.attributes[s],(f=this._idToClientGraphic.get(d))&&(u.geometry=f.geometry)}catch(a){c.e(a)}finally{c.f()}return e.abrupt("return",(o.geometryType=this.layer.geometryType,o));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryFeaturesJSON",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,i=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:{},!this._requiresClientGraphicMapping()){e.next=3;break}throw new S.a("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");case 3:return e.next=5,this.load(n);case 5:return e.next=7,this._connection.invoke("queryFeatures",t?t.toJSON():null,n);case 7:return r=e.sent,e.abrupt("return",(Object(ae.a)(t,this.layer.spatialReference,r),r));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryFeatureCount",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(n).then((function(){return t._connection.invoke("queryFeatureCount",e?e.toJSON():null,n)}))}},{key:"queryObjectIds",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(n).then((function(){return t._connection.invoke("queryObjectIds",e?e.toJSON():null,n)}))}},{key:"queryExtent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(n).then((function(){return t._connection.invoke("queryExtent",e?e.toJSON():null,n)})).then((function(e){return{count:e.count,extent:P.a.fromJSON(e.extent)}}))}},{key:"querySnapping",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(n).then((function(){return t._connection.invoke("querySnapping",e,n)}))}},{key:"_applyEdits",value:function(e){var t=this;if(!this._connection)throw new S.a("feature-layer-source:edit-failure","Memory source not loaded");var n=this.layer.objectIdField,i=null,a=[],o=[],s=function(e){return"objectId"in e&&null!=e.objectId?e.objectId:"attributes"in e&&null!=e.attributes[n]?e.attributes[n]:null};if(e.addFeatures&&(i=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures){var c,l=Object(r.a)(e.deleteFeatures);try{for(l.s();!(c=l.n()).done;){var u=s(c.value);null!=u&&a.push(u)}}catch(v){l.e(v)}finally{l.f()}}var d=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){var f,p=Object(r.a)(e.updateFeatures);try{for(p.s();!(f=p.n()).done;){var h=f.value;if(o.push(this._serializeFeature(h)),d){var b=s(h);null!=b&&d.set(b,h)}}}catch(v){p.e(v)}finally{p.f()}}return Object(ie.b)(i?i.features:null,o,this.layer.spatialReference),this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:o,deletes:a}).then((function(e){var n=e.fullExtent,a=e.featureEditResults;if(t.fullExtent=n,i&&i.finish(a.uidToObjectId),t._idToClientGraphic){if(d){var o,s=Object(r.a)(a.updateResults);try{for(s.s();!(o=s.n()).done;){var c=o.value;if(c.success){var l=d.get(c.objectId);null!=l&&t._addIdToClientGraphic(l)}}}catch(v){s.e(v)}finally{s.f()}}var u,f=Object(r.a)(a.deleteResults);try{for(f.s();!(u=f.n()).done;){var p=u.value;p.success&&t._idToClientGraphic.delete(p.objectId)}}catch(v){f.e(v)}finally{f.f()}}return t._createEditsResult(a)}))}},{key:"_createEditsResult",value:function(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}},{key:"_createFeatureEditResult",value:function(e){var t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new S.a("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}},{key:"_prepareAddFeatures",value:function(e){for(var t=new Map,n=new Array(e.length),r=null,i=0;i<e.length;i++){var a=e[i],o=this._serializeFeature(a);!r&&Object(y.k)(a.geometry)&&(r=a.geometry.type),n[i]=o,t.set("".concat(o.uid),a)}var s=this;return{features:n,inferredGeometryType:r,finish:function(e){var n=s.sourceJSON.objectIdField;for(var r in e){var i=e[r],a=t.get(r);a&&(a.attributes||(a.attributes={}),-1===i?delete a.attributes[n]:a.attributes[n]=i,s._addIdToClientGraphic(a))}}}}},{key:"_addIdToClientGraphic",value:function(e){if(this._idToClientGraphic){var t=this.sourceJSON.objectIdField,n=e.attributes&&e.attributes[t];null!=n&&this._idToClientGraphic.set(n,e)}}},{key:"_requiresClientGraphicMapping",value:function(){var e=this.layer.geometryType||this.sourceJSON.geometryType;return this._geometryTypeRequiresClientGraphicMapping(e)}},{key:"_geometryRequiresClientGraphicMapping",value:function(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}},{key:"_geometryTypeRequiresClientGraphicMapping",value:function(e){return"mesh"===e||"multipatch"===e||"extent"===e}},{key:"_serializeFeature",value:function(e){var t=e.attributes,n=this._geometryForSerialization(e),r=(oe++).toString();return n?{uid:r,geometry:n.toJSON(),attributes:t}:{uid:r,attributes:t}}},{key:"_geometryForSerialization",value:function(e){var t=e.geometry;return Object(y.j)(t)?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?X.a.fromExtent(t.extent):null:t}},{key:"_startWorker",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var n,i,o,s,c,l,u,d,f,p,h,v,y,m,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(re.b)("MemorySourceWorker",{strategy:Object(b.a)("feature-layers-workers")?"dedicated":"local",signal:t});case 2:return this._connection=e.sent,n=this.layer,i=n.fields,o=n.spatialReference,s=n.objectIdField,c=n.hasM,l=n.hasZ,u=n.timeInfo,d="defaults"===this.layer.originOf("spatialReference"),f=this._prepareAddFeatures(this.items),this.on("before-changes",(function(e){se.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),e.preventDefault()})),p={features:f.features,fields:i&&i.map((function(e){return e.toJSON()})),geometryType:Q.c.toJSON(this.workerGeometryType),hasM:c,hasZ:l,objectIdField:s,spatialReference:d?null:o&&o.toJSON(),timeInfo:u?u.toJSON():null},e.next=8,this._connection.invoke("load",p,{signal:t});case 8:h=e.sent,v=Object(r.a)(h.warnings);try{for(v.s();!(y=v.n()).done;)m=y.value,se.warn(m.message,{layer:this.layer,warning:m})}catch(a){v.e(a)}finally{v.f()}h.featureErrors.length&&se.warn("Encountered ".concat(h.featureErrors.length," validation errors while loading features"),h.featureErrors),g=h.layerDefinition,this._geometryTypeRequiresClientGraphicMapping(f.inferredGeometryType)&&(g.geometryType=Q.c.toJSON(f.inferredGeometryType)),"mesh"!==g.geometryType&&"mesh"!==this.layer.geometryType||(g.hasZ=!0),this.sourceJSON=g,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),f.finish(h.assignedObjectIds);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(te.a.LoadableMixin(Object(ee.b)(I.a)));Object(h.a)([(Z={Type:ne.a,ensureType:Object(K.m)(ne.a)},function(e,t){e[t]=Z})],ce.prototype,"itemType",void 0),Object(h.a)([Object(g.b)()],ce.prototype,"type",void 0),Object(h.a)([Object(g.b)({constructOnly:!0})],ce.prototype,"layer",void 0),Object(h.a)([Object(g.b)({readOnly:!0})],ce.prototype,"workerGeometryType",null),Object(h.a)([Object(g.b)()],ce.prototype,"sourceJSON",void 0);var le,ue=ce=Object(h.a)([Object(k.a)("esri.layers.graphics.sources.MemorySource")],ce),de=n(319),fe=n(264),pe=n(507),he=n(257),be=n(468),ve=n(260),ye=n(516),me=n(616),ge=n(28),Oe=le=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(l.a)(n,[{key:"clone",value:function(){var e=this.name,t=this.fields,n=this.isAscending,r=this.isUnique,i=this.description;return new le({name:e,fields:t,isAscending:n,isUnique:r,description:i})}}]),n}(ge.a);Object(h.a)([Object(g.b)({constructOnly:!0})],Oe.prototype,"name",void 0),Object(h.a)([Object(g.b)({constructOnly:!0})],Oe.prototype,"fields",void 0),Object(h.a)([Object(g.b)({constructOnly:!0})],Oe.prototype,"isAscending",void 0),Object(h.a)([Object(g.b)({constructOnly:!0})],Oe.prototype,"isUnique",void 0),Object(h.a)([Object(g.b)({constructOnly:!0})],Oe.prototype,"description",void 0);Oe=le=Object(h.a)([Object(k.a)("esri.layers.support.FeatureIndex")],Oe);var je=n(405),we=n(322),_e=n(554),ke=n(448),xe=n(542),Se=n(459),Te=n(449),Ee=n(626),Ce=n(66),Pe=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).shapeAreaField=null,r.shapeLengthField=null,r.units=null,r}return n}(ge.a);Object(h.a)([Object(g.b)({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Pe.prototype,"shapeAreaField",void 0),Object(h.a)([Object(g.b)({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Pe.prototype,"shapeLengthField",void 0),Object(h.a)([Object(g.b)({type:String,json:{read:function(e){return Ce.a.read(e)||Ce.j.read(e)}}})],Pe.prototype,"units",void 0);var Ie=Pe=Object(h.a)([Object(k.a)("esri.layers.support.GeometryFieldsInfo")],Pe),Me=n(572),Ae=n(744),Re=new j.a({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),Le=new j.a({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"}),Fe=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).cardinality=null,r.composite=null,r.id=null,r.keyField=null,r.keyFieldInRelationshipTable=null,r.name=null,r.relatedTableId=null,r.relationshipTableId=null,r.role=null,r}return n}(ge.a);Object(h.a)([Object(g.b)({json:{read:Re.read,write:Re.write}})],Fe.prototype,"cardinality",void 0),Object(h.a)([Object(g.b)({json:{read:!0,write:!0}})],Fe.prototype,"composite",void 0),Object(h.a)([Object(g.b)({json:{read:!0,write:!0}})],Fe.prototype,"id",void 0),Object(h.a)([Object(g.b)({json:{read:!0,write:!0}})],Fe.prototype,"keyField",void 0),Object(h.a)([Object(g.b)({json:{read:!0,write:!0}})],Fe.prototype,"keyFieldInRelationshipTable",void 0),Object(h.a)([Object(g.b)({json:{read:!0,write:!0}})],Fe.prototype,"name",void 0),Object(h.a)([Object(g.b)({json:{read:!0,write:!0}})],Fe.prototype,"relatedTableId",void 0),Object(h.a)([Object(g.b)({json:{read:!0,write:!0}})],Fe.prototype,"relationshipTableId",void 0),Object(h.a)([Object(g.b)({json:{read:Le.read,write:Le.write}})],Fe.prototype,"role",void 0);var De=Fe=Object(h.a)([Object(k.a)("esri.layers.support.Relationship")],Fe),Ne=n(228),Ve=n(617),ze=n(475),Ue=n(365),Be=n(121),Ge=n(250),qe=new j.a({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),He={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},We="FeatureLayer",$e=m.a.getLogger("esri.layers.FeatureLayer");function Je(e){return e&&e instanceof I.a}function Ye(e,t,n){return!!(e&&e.hasOwnProperty(t)?e[t]:n)}function Ke(e,t,n){return e&&e.hasOwnProperty(t)?e[t]:n}var Ze=Object(Ee.a)();function Xe(e,t,n){var r=!(null==n||!n.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}var Qe=function(e){Object(f.a)(i,e);var t=Object(p.a)(i);function i(){var e;Object(c.a)(this,i);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r)))._handles=new F.a,e.capabilities=null,e.charts=null,e.copyright=null,e.displayField=null,e.definitionExpression=null,e.dynamicDataSource=null,e.editFieldsInfo=null,e.editingEnabled=!0,e.editingInfo=null,e.elevationInfo=null,e.featureReduction=null,e.fields=null,e.floorInfo=null,e.formTemplate=null,e.fullExtent=null,e.gdbVersion=null,e.geometryFieldsInfo=null,e.geometryType=null,e.hasM=void 0,e.hasZ=void 0,e.heightModelInfo=null,e.historicMoment=null,e.isTable=!1,e.labelsVisible=!0,e.labelingInfo=null,e.layerId=void 0,e.legendEnabled=!0,e.minScale=0,e.maxScale=0,e.globalIdField=null,e.objectIdField=null,e.outFields=null,e.path=null,e.popupEnabled=!0,e.popupTemplate=null,e.relationships=null,e.sourceJSON=null,e.returnM=void 0,e.returnZ=void 0,e.screenSizePerspectiveEnabled=!0,e.serviceDefinitionExpression=null,e.spatialReference=C.a.WGS84,e.templates=null,e.timeInfo=null,e.title=null,e.sublayerTitleMode="item-title",e.trackIdField=null,e.type="feature",e.typeIdField=null,e.types=null,e.indexes=new(I.a.ofType(Oe)),e.userIsAdmin=!1,e.version=void 0,e.visible=!0,e}return Object(l.a)(i,[{key:"destroy",value:function(){var e;null==(e=this.source)||e.destroy(),this._handles=Object(y.e)(this._handles)}},{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?Object(s.a)({url:e},t):e}},{key:"load",value:function(e){var t=this,n=Object(y.k)(e)?e.signal:null;if(!(this.portalItem&&this.portalItem.loaded&&this.source)){var r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch((function(e){return e})).then(Object(o.a)(a.a.mark((function e(){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.url||null!=t.layerId||!/FeatureServer|MapServer\/*$/i.test(t.url)){e.next=5;break}return e.next=3,t._fetchFirstLayerId(n);case 3:null!=(r=e.sent)&&(t.layerId=r);case 5:if(t.url||t._hasMemorySource()){e.next=7;break}throw new S.a("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");case 7:return e.t0=t,e.next=10,t.createGraphicsSource(n);case 10:return e.t1=e.sent,e.abrupt("return",e.t0._initLayerProperties.call(e.t0,e.t1));case 12:case"end":return e.stop()}}),e)}))));return this.addResolvingPromise(r),Promise.resolve(this)}this.addResolvingPromise(this.createGraphicsSource(n).then((function(e){return t._initLayerProperties(e)})))}},{key:"readCapabilities",value:function(e,t){return t=t.layerDefinition||t,{attachment:this._readAttachmentCapabilities(t.attachmentProperties),data:this._readDataCapabilities(t),metadata:this._readMetadataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),editing:this._readEditingCapabilities(t)}}},{key:"createQueryVersion",get:function(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")||0)+1}},{key:"readEditingEnabled",value:function(e,t){return this._readEditingEnabled(t,!1)}},{key:"readEditingEnabledFromWebMap",value:function(e,t,n){return this._readEditingEnabled(t,!0,n)}},{key:"writeEditingEnabled",value:function(e,t){this._writeEditingEnabled(e,t,!1)}},{key:"writeEditingEnabledToWebMap",value:function(e,t,n,r){this._writeEditingEnabled(e,t,!0,r)}},{key:"readEditingInfo",value:function(e,t){var n=t.editingInfo;return n?{lastEditDate:null!=n.lastEditDate?new Date(n.lastEditDate):null}:null}},{key:"readFeatureReduction",value:function(e,t){return Object(xe.a)(e,t)}},{key:"writeWebSceneFeatureReduction",value:function(e,t,n,r){Object(xe.c)(e,t,"layerDefinition.featureReduction",r)}},{key:"fieldsIndex",get:function(){return new $.a(this.fields||[])}},{key:"readIsTable",value:function(e,t){return"Table"===(t=t&&t.layerDefinition||t).type||!t.geometryType}},{key:"writeIsTable",value:function(e,t,n,r){null!=r&&r.writeLayerSchema&&Object(v.c)(n,e?"Table":"Feature Layer",t)}},{key:"readMinScale",value:function(e,t){return t.effectiveMinScale||e||0}},{key:"readMaxScale",value:function(e,t){return t.effectiveMaxScale||e||0}},{key:"readGlobalIdFieldFromService",value:function(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){var n,i=Object(r.a)(t.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;if("esriFieldTypeGlobalID"===a.type)return a.name}}catch(o){i.e(o)}finally{i.f()}}}},{key:"readObjectIdFieldFromService",value:function(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){var n,i=Object(r.a)(t.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;if("esriFieldTypeOID"===a.type)return a.name}}catch(o){i.e(o)}finally{i.f()}}}},{key:"parsedUrl",get:function(){var e=this.url?Object(T.J)(this.url):null;return null!=e&&(null!=this.dynamicDataSource?e.path=Object(T.y)(e.path,"dynamicLayer"):null!=this.layerId&&(e.path=Object(T.y)(e.path,this.layerId.toString()))),e}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"renderer",set:function(e){Object(M.l)(e,this.fields),this._set("renderer",e)}},{key:"readRenderer",value:function(e,t,n){var r=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(r){var i=Object(W.b)(r,t,n)||void 0;return i||$e.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:n}),i}if(t.defaultSymbol)return t.types&&t.types.length?new G.a({defaultSymbol:et(t.defaultSymbol,t,n),field:t.typeIdField,uniqueValueInfos:t.types.map((function(e){return{id:e.id,symbol:et(e.symbol,e,n)}}))}):new q.a({symbol:et(t.defaultSymbol,t,n)})}},{key:"source",set:function(e){var t=this._get("source");t!==e&&(Je(t)&&this._resetMemorySource(t),Je(e)&&this._initMemorySource(e),this._set("source",e))}},{key:"castSource",value:function(e){return e?Array.isArray(e)||e instanceof I.a?new ue({layer:this,items:e}):e:null}},{key:"readSource",value:function(e,t){var n=Y.default.fromJSON(t.featureSet);return new ue({layer:this,items:n&&n.features||[]})}},{key:"readServiceDefinitionExpression",value:function(e,t){return t.definitionQuery||t.definitionExpression}},{key:"readTemplates",value:function(e,t){var n=t.editFieldsInfo,r=n&&n.creatorField,i=n&&n.editorField;return e=e&&e.map((function(e){return Se.a.fromJSON(e)})),this._fixTemplates(e,r),this._fixTemplates(e,i),e}},{key:"readTitle",value:function(e,t){var n=t.layerDefinition&&t.layerDefinition.name||t.name,r=t.title||t.layerDefinition&&t.layerDefinition.title;if(n){var i=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?Object(V.i)(this.url,n):n;var a=n;if(!a&&this.url){var o=Object(V.e)(this.url);Object(y.k)(o)&&(a=o.title)}if(!a)return;return"item-title-and-service-name"===this.sublayerTitleMode&&i&&i!==a&&(a=i+" - "+a),Object(V.a)(a)}if("item-title"===this.sublayerTitleMode&&r)return r}},{key:"readTitleFromWebMap",value:function(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}},{key:"readTypeIdField",value:function(e,t){var n=(t=t.layerDefinition||t).typeIdField;if(n){var r=Object(M.q)(t.fields,n);r&&(n=r.name)}return n}},{key:"readTypes",value:function(e,t){var n=this;e=(t=t.layerDefinition||t).types;var r=t.editFieldsInfo,i=r&&r.creatorField,a=r&&r.editorField;return e&&e.map((function(e){return e=Te.a.fromJSON(e),n._fixTemplates(e.templates,i),n._fixTemplates(e.templates,a),e}))}},{key:"url",set:function(e){var t=Object(V.h)({layer:this,url:e,nonStandardUrlAllowed:!0,logger:$e});this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)}},{key:"writeUrl",value:function(e,t,n,r){Object(V.j)(this,e,null,t,r)}},{key:"readVersion",value:function(e,t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}},{key:"readVisible",value:function(e,t){return t.layerDefinition&&null!=t.layerDefinition.defaultVisibility?!!t.layerDefinition.defaultVisibility:null!=t.visibility?!!t.visibility:void 0}},{key:"addAttachment",value:function(e,t){var n=this;return this.load().then((function(){return n._checkAttachmentSupport(e)})).then((function(){if(!("addAttachment"in n.source))throw new S.a(We,"Layer source does not support addAttachment capability");return n.source.addAttachment(e,t)}))}},{key:"updateAttachment",value:function(e,t,n){var r=this;return this.load().then((function(){return r._checkAttachmentSupport(e)})).then((function(){if(!("updateAttachment"in r.source))throw new S.a(We,"Layer source does not support updateAttachment capability");return r.source.updateAttachment(e,t,n)}))}},{key:"applyEdits",value:function(){var e=Object(o.a)(a.a.mark((function e(t,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.bind(null,779));case 2:return i=e.sent,e.next=5,this.load();case 5:return e.abrupt("return",i.applyEdits(this,this.source,t,r));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"on",value:function(e,t){return Object(u.a)(Object(d.a)(i.prototype),"on",this).call(this,e,t)}},{key:"createPopupTemplate",value:function(e){return Object(ze.a)(this,e)}},{key:"createGraphicsSource",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._hasMemorySource()){e.next=2;break}return e.abrupt("return",(this.emit("graphics-source-create",{graphicsSource:this.source}),this.source.load({signal:t})));case 2:return e.next=4,n.e(127).then(n.bind(null,1390));case 4:return r=e.sent,Object(E.u)(t),e.next=8,new r.default({layer:this}).load({signal:t});case 8:return i=e.sent,e.abrupt("return",(this.emit("graphics-source-create",{graphicsSource:i}),i));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createQuery",value:function(){var e=new Be.a,t=this.get("capabilities.data");e.dynamicDataSource=this.dynamicDataSource,e.gdbVersion=this.gdbVersion,e.historicMoment=this.historicMoment,e.returnGeometry=!0,t&&(t.supportsZ&&null!=this.returnZ&&(e.returnZ=this.returnZ),t.supportsM&&null!=this.returnM&&(e.returnM=this.returnM)),e.outFields=["*"],e.where=this.definitionExpression||"1=1";var n=this.timeOffset,r=this.timeExtent;return e.timeExtent=null!=n&&null!=r?r.offset(-n.value,n.unit):r||null,e.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null,e}},{key:"deleteAttachments",value:function(e,t){var n=this;return this.load().then((function(){return n._checkAttachmentSupport(e)})).then((function(){if(!("deleteAttachments"in n.source))throw new S.a(We,"Layer source does not support deleteAttachments capability");return n.source.deleteAttachments(e,t)}))}},{key:"fetchRecomputedExtents",value:function(e){var t=this;return this.load({signal:null==e?void 0:e.signal}).then((function(){if(t.source.fetchRecomputedExtents)return t.source.fetchRecomputedExtents(e);throw new S.a(We,"Layer source does not support fetchUpdates capability")}))}},{key:"getFeatureType",value:function(e){var t=this.typeIdField,n=this.types;if(!t||!e)return null;var r=e.attributes?e.attributes[t]:void 0;if(null==r)return null;var i=null;return n.some((function(e){var t=e.id;return null!=t&&(t.toString()===r.toString()&&(i=e),!!i)})),i}},{key:"getFieldDomain",value:function(e,t){var n=t&&t.feature,r=this.getFeatureType(n);if(r){var i=r.domains&&r.domains[e];if(i&&"inherited"!==i.type)return i}return this._getLayerDomain(e)}},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"queryAttachments",value:function(e,t){var n=this;return e=Ue.a.from(e),this.load().then((function(){if(!n.get("capabilities.data.supportsAttachment"))throw new S.a(We,"this layer doesn't support attachments");var t=e,r=t.attachmentTypes,i=t.objectIds,a=t.globalIds,o=t.num,s=t.size,c=t.start,l=t.where;if(!n.get("capabilities.operations.supportsQueryAttachments")){var u=i&&i.length>1,d=r&&r.length,f=a&&a.length,p=s&&s.length;if(u||d||f||p||o||c||l)throw new S.a(We,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e)}if(!(i&&i.length||l))throw new S.a(We,"'objectIds' or 'where' are required to perform attachment query",e);if(!("queryAttachments"in n.source))throw new S.a(We,"Layer source does not support queryAttachments capability",e);return n.source.queryAttachments(e)}))}},{key:"queryFeatures",value:function(e,t){var n=this;return this.load().then((function(){return n.source.queryFeatures(Be.a.from(e)||n.createQuery(),t)})).then((function(e){if(e&&e.features){var t,i=Object(r.a)(e.features);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.layer=a.sourceLayer=n}}catch(o){i.e(o)}finally{i.f()}}return e}))}},{key:"queryObjectIds",value:function(e,t){var n=this;return this.load().then((function(){if(n.source.queryObjectIds)return n.source.queryObjectIds(Be.a.from(e)||n.createQuery(),t);throw new S.a(We,"Layer source does not support queryObjectIds capability")}))}},{key:"queryFeatureCount",value:function(e,t){var n=this;return this.load().then((function(){if(n.source.queryFeatureCount)return n.source.queryFeatureCount(Be.a.from(e)||n.createQuery(),t);throw new S.a(We,"Layer source does not support queryFeatureCount capability")}))}},{key:"queryExtent",value:function(e,t){var n=this;return this.load().then((function(){if(n.source.queryExtent)return n.source.queryExtent(Be.a.from(e)||n.createQuery(),t);throw new S.a(We,"Layer source does not support queryExtent capability")}))}},{key:"queryRelatedFeatures",value:function(e,t){var n=this;return this.load().then((function(){if("queryRelatedFeatures"in n.source)return n.source.queryRelatedFeatures(Ge.a.from(e),t);throw new S.a(We,"Layer source does not support queryRelatedFeatures capability")}))}},{key:"queryRelatedFeaturesCount",value:function(e,t){var n=this;return this.load().then((function(){if("queryRelatedFeaturesCount"in n.source)return n.source.queryRelatedFeaturesCount(Ge.a.from(e),t);throw new S.a(We,"Layer source does not support queryRelatedFeaturesCount capability")}))}},{key:"read",value:function(e,t){var n=e.featureCollection;if(n){var r=n.layers;r&&1===r.length&&(Object(u.a)(Object(d.a)(i.prototype),"read",this).call(this,r[0],t),null!=n.showLegend&&Object(u.a)(Object(d.a)(i.prototype),"read",this).call(this,{showLegend:n.showLegend},t))}Object(u.a)(Object(d.a)(i.prototype),"read",this).call(this,e,t),t&&"service"===t.origin&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}},{key:"write",value:function(e,t){var n,r,a=(t=Object(s.a)(Object(s.a)({},t),{},{writeLayerSchema:null!=(n=null==(r=t)?void 0:r.writeLayerSchema)?n:this._hasMemorySource()})).origin,o=t.layerContainerType,c=t.messages;if(this.isTable){if("web-scene"===a||"web-map"===a&&"tables"!==o)return c&&c.push(new S.a("layer:unsupported","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' using a Table source cannot be written to web scenes and web maps"),{layer:this})),null;if(this._hasMemorySource())return c&&c.push(new S.a("layer:unsupported","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' using an in-memory Table source cannot be written to web scenes and web maps"),{layer:this})),null}else if(this.loaded&&"web-map"===a&&"tables"===o)return c&&c.push(new S.a("layer:unsupported","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' using a non-table source cannot be written to tables in web maps"),{layer:this})),null;return Object(u.a)(Object(d.a)(i.prototype),"write",this).call(this,e,t)}},{key:"_readEditingEnabled",value:function(e,t,n){var r,i=null==(r=e.layerDefinition)?void 0:r.capabilities;return i?this._hasEditingCapability(i):(i=e.capabilities,!(t&&"web-map"===(null==n?void 0:n.origin)&&!this._hasMemorySource()&&i)||this._hasEditingCapability(i))}},{key:"_hasEditingCapability",value:function(e){return e.toLowerCase().split(",").map((function(e){return e.trim()})).includes("editing")}},{key:"_writeEditingEnabled",value:function(e,t,n,r){if(!e){var i,a,o=null!=(i=this.capabilities)&&null!=(a=i.operations)&&a.supportsSync?"Query,Sync":"Query";Object(v.c)("layerDefinition.capabilities",o,t),!n||null!=r&&r.writeLayerSchema||(t.capabilities=o)}}},{key:"_checkAttachmentSupport",value:function(e){var t=e.attributes,n=this.objectIdField;return this.get("capabilities.data.supportsAttachment")?e?t?t[n]?void 0:Promise.reject(new S.a(We,"feature is missing the identifying attribute ".concat(n))):Promise.reject(new S.a(We,"'attributes' are required on a feature to query attachments")):Promise.reject(new S.a(We,"A feature is required to add/delete/update attachments")):Promise.reject(new S.a(We,"this layer doesn't support attachments"))}},{key:"_getLayerDomain",value:function(e){var t=this.fieldsIndex.get(e);return t?t.domain:null}},{key:"_fetchFirstLayerId",value:function(e){return Object(R.default)(this.url,{query:Object(s.a)({f:"json"},this.customParameters),responseType:"json",signal:e}).then((function(e){var t=e.data;if(t)return Array.isArray(t.layers)&&t.layers.length>0?t.layers[0].id:Array.isArray(t.tables)&&t.tables.length>0?t.tables[0].id:void 0}))}},{key:"_initLayerProperties",value:function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this._set("source",t),t.sourceJSON&&(this.sourceJSON=t.sourceJSON,this.read(t.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),Object(M.l)(this.renderer,this.fields),Object(M.m)(this.timeInfo,this.fields),Object(Ve.a)(this,{origin:"service"})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_verifyFields",value:function(){var e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||-1!==e.search(/\/FeatureServer\//i)||this.fields&&this.fields.some((function(e){return"geometry"===e.type}))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}},{key:"_fixTemplates",value:function(e,t){e&&e.forEach((function(e){var n=e.prototype&&e.prototype.attributes;n&&t&&delete n[t]}))}},{key:"_verifySource",value:function(){if(this._hasMemorySource()){if(this.url)throw new S.a("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new S.a("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}},{key:"_initMemorySource",value:function(e){var t=this;e.forEach((function(e){e.layer=t,e.sourceLayer=t})),this._handles.add([e.on("after-add",(function(e){e.item.layer=t,e.item.sourceLayer=t})),e.on("after-remove",(function(e){e.item.layer=null,e.item.sourceLayer=null}))],"fl-source")}},{key:"_resetMemorySource",value:function(e){e.forEach((function(e){e.layer=null,e.sourceLayer=null})),this._handles.remove("fl-source")}},{key:"_hasMemorySource",value:function(){return!(this.url||!this.source)}},{key:"_readAttachmentCapabilities",value:function(e){var t={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1};return e&&Array.isArray(e)&&e.forEach((function(e){var n=He[e.name];n&&(t[n]=!!e.isEnabled)})),t}},{key:"_readDataCapabilities",value:function(e){return{isVersioned:Ye(e,"isDataVersioned",!1),supportsAttachment:Ye(e,"hasAttachments",!1),supportsM:Ye(e,"hasM",!1),supportsZ:Ye(e,"hasZ",!1)}}},{key:"_readMetadataCapabilities",value:function(e){return{supportsAdvancedFieldProperties:Ye(e,"supportsFieldDescriptionProperty",!1)}}},{key:"_readOperationsCapabilities",value:function(e,t){var n=e?e.toLowerCase().split(",").map((function(e){return e.trim()})):[],r=-1!==n.indexOf("editing"),i=r&&-1!==n.indexOf("create"),a=r&&-1!==n.indexOf("delete"),o=r&&-1!==n.indexOf("update"),s=-1!==n.indexOf("changetracking");return r&&!(i||a||o)&&(i=a=o=!0),{supportsCalculate:Ye(t,"supportsCalculate",!1),supportsTruncate:Ye(t,"supportsTruncate",!1),supportsValidateSql:Ye(t,"supportsValidateSql",!1),supportsAdd:i,supportsDelete:a,supportsEditing:r,supportsChangeTracking:s,supportsQuery:-1!==n.indexOf("query"),supportsQueryAttachments:Ye(t.advancedQueryCapabilities,"supportsQueryAttachments",!1),supportsResizeAttachments:Ye(t,"supportsAttachmentsResizing",!1),supportsSync:-1!==n.indexOf("sync"),supportsUpdate:o,supportsExceedsLimitStatistics:Ye(t,"supportsExceedsLimitStatistics",!1)}}},{key:"_readQueryCapabilities",value:function(e){var t,n=e.advancedQueryCapabilities,r=e.ownershipBasedAccessControlForFeatures,i=e.archivingInfo,a=null==(t=this.url)?void 0:t.includes("MapServer"),o=!Object(b.a)("mapserver-pbf-enabled")&&a&&this.version<10.81,s=(e.supportedQueryFormats||"").split(",").reduce((function(e,t){var n=t.toLowerCase().trim();return n&&e.add(n),e}),new Set);return{supportsStatistics:Ye(n,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:Ye(n,"supportsPercentileStatistics",!1),supportsCentroid:Ye(n,"supportsReturningGeometryCentroid",!1),supportsDistance:Ye(n,"supportsQueryWithDistance",!1),supportsDistinct:Ye(n,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:Ye(n,"supportsReturningQueryExtent",!1),supportsGeometryProperties:Ye(n,"supportsReturningGeometryProperties",!1),supportsHavingClause:Ye(n,"supportsHavingClause",!1),supportsOrderBy:Ye(n,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:Ye(n,"supportsPagination",!1),supportsQuantization:Ye(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Ye(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:Ye(e,"supportsReturningQueryGeometry",!1),supportsResultType:Ye(n,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:Ye(n,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:Ye(n,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Ye(e,"useStandardizedQueries",!1),supportsQueryByOthers:Ye(r,"allowOthersToQuery",!0),supportsHistoricMoment:Ye(i,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!o&&s.has("pbf"),supportsDisjointSpatialRelationship:Ye(n,"supportsDisjointSpatialRel",!1),supportsCacheHint:Ye(n,"supportsQueryWithCacheHint",!1),maxRecordCountFactor:Ke(e,"maxRecordCountFactor",void 0),maxRecordCount:Ke(e,"maxRecordCount",void 0),standardMaxRecordCount:Ke(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:Ke(e,"tileMaxRecordCount",void 0)}}},{key:"_readQueryRelatedCapabilities",value:function(e){var t=e.advancedQueryCapabilities,n=Ye(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Ye(t,"supportsQueryRelatedPagination",!1),supportsCount:n,supportsOrderBy:n}}},{key:"_readEditingCapabilities",value:function(e){var t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:Ye(e,"allowGeometryUpdates",!0),supportsGlobalId:Ye(e,"supportsApplyEditsWithGlobalIds",!1),supportsRollbackOnFailure:Ye(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Ye(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Ye(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Ye(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Ye(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Ye(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Ye(t,"allowOthersToUpdate",!0)}}}]),i}(Object(fe.a)(Object(me.a)(Object(ve.a)(Object(be.a)(Object(de.a)(Object(B.a)(Object(he.a)(Object(N.a)(Object(pe.a)(D.a))))))))));Object(h.a)([Object(g.b)({readOnly:!0,json:{read:!1}})],Qe.prototype,"capabilities",void 0),Object(h.a)([Object(w.a)("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],Qe.prototype,"readCapabilities",null),Object(h.a)([Object(g.b)({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Qe.prototype,"charts",void 0),Object(h.a)([Object(g.b)({readOnly:!0})],Qe.prototype,"createQueryVersion",null),Object(h.a)([Object(g.b)({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],Qe.prototype,"copyright",void 0),Object(h.a)([Object(g.b)({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],Qe.prototype,"displayField",void 0),Object(h.a)([Object(g.b)({type:String,json:{origins:{service:{read:!1,write:!1}},read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],Qe.prototype,"definitionExpression",void 0),Object(h.a)([Object(g.b)({types:L.e,readOnly:!0})],Qe.prototype,"defaultSymbol",void 0),Object(h.a)([Object(g.b)({type:Ne.a})],Qe.prototype,"dynamicDataSource",void 0),Object(h.a)([Object(g.b)({readOnly:!0})],Qe.prototype,"editFieldsInfo",void 0),Object(h.a)([Object(g.b)({type:Boolean})],Qe.prototype,"editingEnabled",void 0),Object(h.a)([Object(w.a)(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Qe.prototype,"readEditingEnabled",null),Object(h.a)([Object(w.a)("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Qe.prototype,"readEditingEnabledFromWebMap",null),Object(h.a)([Object(x.a)(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Qe.prototype,"writeEditingEnabled",null),Object(h.a)([Object(x.a)("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Qe.prototype,"writeEditingEnabledToWebMap",null),Object(h.a)([Object(g.b)({readOnly:!0})],Qe.prototype,"editingInfo",void 0),Object(h.a)([Object(w.a)("editingInfo")],Qe.prototype,"readEditingInfo",null),Object(h.a)([Object(g.b)(U.b)],Qe.prototype,"elevationInfo",void 0),Object(h.a)([Object(g.b)({types:{key:"type",base:je.a,typeMap:{selection:ke.a,cluster:_e.a}},json:{write:{target:"layerDefinition.featureReduction"}}})],Qe.prototype,"featureReduction",void 0),Object(h.a)([Object(w.a)("featureReduction",["layerDefinition.featureReduction"])],Qe.prototype,"readFeatureReduction",null),Object(h.a)([Object(x.a)("web-scene","featureReduction",{"layerDefinition.featureReduction":{types:xe.b}})],Qe.prototype,"writeWebSceneFeatureReduction",null),Object(h.a)([Object(g.b)(Object(s.a)(Object(s.a)({},Ze.fields),{},{json:{read:{source:"layerDefinition.fields"},origins:{service:{read:!0},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:Xe}}}}}))],Qe.prototype,"fields",void 0),Object(h.a)([Object(g.b)({readOnly:!0})],Qe.prototype,"fieldsIndex",null),Object(h.a)([Object(g.b)({type:Ae.a,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"},origins:{"web-scene":{write:!1}}}})],Qe.prototype,"floorInfo",void 0),Object(h.a)([Object(g.b)({type:J.a,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Qe.prototype,"formTemplate",void 0),Object(h.a)([Object(g.b)({type:P.a,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],Qe.prototype,"fullExtent",void 0),Object(h.a)([Object(g.b)()],Qe.prototype,"gdbVersion",void 0),Object(h.a)([Object(g.b)({readOnly:!0,type:Ie,json:{read:{source:"geometryProperties"}}})],Qe.prototype,"geometryFieldsInfo",void 0),Object(h.a)([Object(g.b)({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:qe.read},"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:Xe,writer:function(e,t,n){var r=e?qe.toJSON(e):null;r&&Object(v.c)(n,r,t)}}}},read:{source:"layerDefinition.geometryType",reader:qe.read}}})],Qe.prototype,"geometryType",void 0),Object(h.a)([Object(g.b)({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],Qe.prototype,"hasM",void 0),Object(h.a)([Object(g.b)({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],Qe.prototype,"hasZ",void 0),Object(h.a)([Object(g.b)({readOnly:!0,type:z.a})],Qe.prototype,"heightModelInfo",void 0),Object(h.a)([Object(g.b)({type:Date})],Qe.prototype,"historicMoment",void 0),Object(h.a)([Object(g.b)(U.c)],Qe.prototype,"id",void 0),Object(h.a)([Object(g.b)({readOnly:!0,json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Qe.prototype,"isTable",void 0),Object(h.a)([Object(w.a)("service","isTable",["type","geometryType"]),Object(w.a)("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Qe.prototype,"readIsTable",null),Object(h.a)([Object(x.a)("web-map","isTable")],Qe.prototype,"writeIsTable",null),Object(h.a)([Object(g.b)(U.d)],Qe.prototype,"labelsVisible",void 0),Object(h.a)([Object(g.b)({type:[we.a],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:Me.a},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:Me.a},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],Qe.prototype,"labelingInfo",void 0),Object(h.a)([Object(g.b)(U.i)],Qe.prototype,"opacity",void 0),Object(h.a)([Object(g.b)({type:Number,json:{origins:{service:{read:{source:"id"}}},read:!1}})],Qe.prototype,"layerId",void 0),Object(h.a)([Object(g.b)(U.e)],Qe.prototype,"legendEnabled",void 0),Object(h.a)([Object(g.b)({type:["show","hide"]})],Qe.prototype,"listMode",void 0),Object(h.a)([Object(g.b)(U.g)],Qe.prototype,"minScale",void 0),Object(h.a)([Object(w.a)("service","minScale",["minScale","effectiveMinScale"])],Qe.prototype,"readMinScale",null),Object(h.a)([Object(g.b)(U.f)],Qe.prototype,"maxScale",void 0),Object(h.a)([Object(w.a)("service","maxScale",["maxScale","effectiveMaxScale"])],Qe.prototype,"readMaxScale",null),Object(h.a)([Object(g.b)({type:String})],Qe.prototype,"globalIdField",void 0),Object(h.a)([Object(w.a)("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),Object(w.a)("service","globalIdField",["globalIdField","fields"])],Qe.prototype,"readGlobalIdFieldFromService",null),Object(h.a)([Object(g.b)({type:String,json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:Xe}}}}})],Qe.prototype,"objectIdField",void 0),Object(h.a)([Object(w.a)("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),Object(w.a)("service","objectIdField",["objectIdField","fields"])],Qe.prototype,"readObjectIdFieldFromService",null),Object(h.a)([Object(g.b)({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Qe.prototype,"operationalLayerType",void 0),Object(h.a)([Object(g.b)(Ze.outFields)],Qe.prototype,"outFields",void 0),Object(h.a)([Object(g.b)({readOnly:!0})],Qe.prototype,"parsedUrl",null),Object(h.a)([Object(g.b)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Qe.prototype,"path",void 0),Object(h.a)([Object(g.b)(U.j)],Qe.prototype,"popupEnabled",void 0),Object(h.a)([Object(g.b)({type:A.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Qe.prototype,"popupTemplate",void 0),Object(h.a)([Object(g.b)({readOnly:!0})],Qe.prototype,"defaultPopupTemplate",null),Object(h.a)([Object(g.b)({type:[De],readOnly:!0})],Qe.prototype,"relationships",void 0),Object(h.a)([Object(g.b)({types:H.a,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:H.b,write:{target:"layerDefinition.drawingInfo.renderer",writer:W.c}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:function(e,t,n){return{ignoreOrigin:null==n?void 0:n.writeLayerSchema}},writer:W.c}}})],Qe.prototype,"renderer",null),Object(h.a)([Object(w.a)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),Object(w.a)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Qe.prototype,"readRenderer",null),Object(h.a)([Object(g.b)()],Qe.prototype,"sourceJSON",void 0),Object(h.a)([Object(g.b)({type:Boolean})],Qe.prototype,"returnM",void 0),Object(h.a)([Object(g.b)({type:Boolean})],Qe.prototype,"returnZ",void 0),Object(h.a)([Object(g.b)(U.m)],Qe.prototype,"screenSizePerspectiveEnabled",void 0),Object(h.a)([Object(g.b)()],Qe.prototype,"source",null),Object(h.a)([Object(O.a)("source")],Qe.prototype,"castSource",null),Object(h.a)([Object(w.a)("portal-item","source",["featureSet"]),Object(w.a)("web-map","source",["featureSet"])],Qe.prototype,"readSource",null),Object(h.a)([Object(g.b)({readOnly:!0})],Qe.prototype,"serviceDefinitionExpression",void 0),Object(h.a)([Object(w.a)("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],Qe.prototype,"readServiceDefinitionExpression",null),Object(h.a)([Object(g.b)({type:C.a,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],Qe.prototype,"spatialReference",void 0),Object(h.a)([Object(g.b)({type:[Se.a]})],Qe.prototype,"templates",void 0),Object(h.a)([Object(w.a)("templates",["editFieldsInfo","creatorField","editorField","templates"])],Qe.prototype,"readTemplates",null),Object(h.a)([Object(g.b)({type:ye.a})],Qe.prototype,"timeInfo",void 0),Object(h.a)([Object(g.b)()],Qe.prototype,"title",void 0),Object(h.a)([Object(w.a)("service","title",["name"]),Object(w.a)("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Qe.prototype,"readTitle",null),Object(h.a)([Object(w.a)("web-map","title",["layerDefinition.name","title"])],Qe.prototype,"readTitleFromWebMap",null),Object(h.a)([Object(g.b)({type:String})],Qe.prototype,"sublayerTitleMode",void 0),Object(h.a)([Object(g.b)({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],Qe.prototype,"trackIdField",void 0),Object(h.a)([Object(g.b)({json:{read:!1}})],Qe.prototype,"type",void 0),Object(h.a)([Object(g.b)({type:String})],Qe.prototype,"typeIdField",void 0),Object(h.a)([Object(w.a)("service","typeIdField"),Object(w.a)("typeIdField",["layerDefinition.typeIdField"])],Qe.prototype,"readTypeIdField",null),Object(h.a)([Object(g.b)({type:[Te.a]})],Qe.prototype,"types",void 0),Object(h.a)([Object(w.a)("service","types",["types"]),Object(w.a)("types",["layerDefinition.types"])],Qe.prototype,"readTypes",null),Object(h.a)([Object(g.b)({readOnly:!0,json:{write:!1}})],Qe.prototype,"serverGens",void 0),Object(h.a)([Object(g.b)({type:I.a.ofType(Oe),readOnly:!0})],Qe.prototype,"indexes",void 0),Object(h.a)([Object(g.b)(U.n)],Qe.prototype,"url",null),Object(h.a)([Object(x.a)("url")],Qe.prototype,"writeUrl",null),Object(h.a)([Object(g.b)({readOnly:!0})],Qe.prototype,"userIsAdmin",void 0),Object(h.a)([Object(g.b)({json:{origins:{service:{read:!0}},read:!1}})],Qe.prototype,"version",void 0),Object(h.a)([Object(w.a)("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],Qe.prototype,"readVersion",null),Object(h.a)([Object(g.b)({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Qe.prototype,"visible",void 0),Object(h.a)([Object(w.a)("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Qe.prototype,"readVisible",null),Qe=Object(h.a)([Object(k.a)("esri.layers.FeatureLayer")],Qe);var et=Object(_.b)({types:L.i}),tt=Qe;t.default=tt},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17)),u=n(1),d=n(47),f=n(49),p=n(41),h=n(8),b=(n(12),n(19),n(20),n(28)),v=n(154),y=n(625),m=new d.a({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"}),g=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).alias=null,r.defaultValue=void 0,r.description=null,r.domain=null,r.editable=!0,r.length=-1,r.name=null,r.nullable=!0,r.type=null,r.valueType=null,r}return Object(a.a)(n,[{key:"readDescription",value:function(e,t){var n,r=t.description;try{n=JSON.parse(r)}catch(i){}return n?n.value:null}},{key:"readValueType",value:function(e,t){var n,r=t.description;try{n=JSON.parse(r)}catch(i){}return n?m.fromJSON(n.fieldValueType):null}},{key:"clone",value:function(){return new r({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}}]),n}(b.a);Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],g.prototype,"alias",void 0),Object(c.a)([Object(u.b)({type:[String,Number],json:{write:{allowNull:!0}}})],g.prototype,"defaultValue",void 0),Object(c.a)([Object(u.b)()],g.prototype,"description",void 0),Object(c.a)([Object(p.a)("description")],g.prototype,"readDescription",null),Object(c.a)([Object(u.b)({types:v.d,json:{read:{reader:v.b},write:!0}})],g.prototype,"domain",void 0),Object(c.a)([Object(u.b)({type:Boolean,json:{write:!0}})],g.prototype,"editable",void 0),Object(c.a)([Object(u.b)({type:l.a,json:{write:!0}})],g.prototype,"length",void 0),Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],g.prototype,"name",void 0),Object(c.a)([Object(u.b)({type:Boolean,json:{write:!0}})],g.prototype,"nullable",void 0),Object(c.a)([Object(f.a)(y.a)],g.prototype,"type",void 0),Object(c.a)([Object(u.b)()],g.prototype,"valueType",void 0),Object(c.a)([Object(p.a)("valueType",["description"])],g.prototype,"readValueType",null);var O=g=r=Object(c.a)([Object(h.a)("esri.layers.support.Field")],g);t.a=O},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r,i=n(29),a=n(97),o=n(34),s=Object(a.d)(1,1,0,1),c=Object(a.d)(1,0,1,1);function l(e){e.fragment.uniforms.add("depthTex","sampler2D"),e.fragment.uniforms.add("highlightViewportPixelSz","vec4"),e.fragment.constants.add("occludedHighlightFlag","vec4",s).add("unoccludedHighlightFlag","vec4",c),e.fragment.code.add(Object(o.a)(r||(r=Object(i.a)(["\n    void outputHighlight() {\n      vec4 fragCoord = gl_FragCoord;\n\n      float sceneDepth = texture2D(depthTex, (fragCoord.xy - highlightViewportPixelSz.xy) * highlightViewportPixelSz.zw).r;\n      if (fragCoord.z > sceneDepth + 5e-7) {\n        gl_FragColor = occludedHighlightFlag;\n      }\n      else {\n        gl_FragColor = unoccludedHighlightFlag;\n      }\n    }\n  "]))))}(l||(l={})).bindOutputHighlight=function(e,t,n){e.bindTexture(n.highlightDepthTexture,5),t.setUniform1i("depthTex",5),t.setUniform4f("highlightViewportPixelSz",0,0,n.inverseViewport[0],n.inverseViewport[1])}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(7),i=n.n(r),a=n(15),o=n(2),s=n(3),c=function(){function e(t,n){Object(o.a)(this,e),this._module=t,this._loadModule=n}return Object(s.a)(e,[{key:"get",value:function(){return this._module}},{key:"reload",value:function(){var e=Object(a.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._loadModule();case 2:return this._module=e.sent,e.abrupt("return",this._module);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={position:0,normal:1,uv0:2,color:3,size:4,tangent:4,auxpos1:5,symbolColor:5,auxpos2:6,featureAttribute:6,instanceFeatureAttribute:6,instanceColor:7,model:8,modelNormal:12,modelOriginHi:11,modelOriginLo:15}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(2),i=n(3),a=function(){function e(t,n){Object(r.a)(this,e),n&&(this._config=n.snapshot()),this._program=this.initializeProgram(t),t.commonUniformStore&&(this._commonUniformStore=t.commonUniformStore,this._commonUniformStore.subscribeProgram(this._program)),this._pipeline=this.initializePipeline(t)}return Object(i.a)(e,[{key:"dispose",value:function(){this._program&&(this._commonUniformStore&&this._commonUniformStore.unsubscribeProgram(this._program),this._program.dispose(),this._program=null)}},{key:"reload",value:function(e){this._program&&(this._commonUniformStore&&this._commonUniformStore.unsubscribeProgram(this._program),this._program.dispose()),this._program=this.initializeProgram(e),this._commonUniformStore&&this._commonUniformStore.subscribeProgram(this._program)}},{key:"program",get:function(){return this._program}},{key:"pipeline",get:function(){return this._pipeline}},{key:"key",get:function(){return this._config.key}},{key:"configuration",get:function(){return this._config}},{key:"bindPass",value:function(e,t,n){}},{key:"bindMaterial",value:function(e,t,n){}},{key:"bindDraw",value:function(e,t,n){}},{key:"bindPipelineState",value:function(e){e.setPipelineState(this.pipeline)}},{key:"ensureAttributeLocations",value:function(e){this.program.assertCompatibleVertexAttributeLocations(e)}},{key:"primitiveType",get:function(){return 4}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return j})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return m}));var r=n(53),i=n(50),a=n(35),o=n(3),s=n(5),c=n(6),l=n(2),u=n(60),d=n(33),f=n(104),p=n(70),h=n(149),b=function e(t){Object(l.a)(this,e),this.coordinateHelper=t},v=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r){var i;return Object(l.a)(this,n),(i=t.call(this,e)).point=r,i}return Object(o.a)(n,[{key:"objectEqual",value:function(e){return e instanceof n&&Object(p.d)(this.point,e.point)}},{key:"check",value:function(e){return Object(d.j)(e,this.point)<f.a.pointThreshold}},{key:"closestTo",value:function(){return this.coordinateHelper.clone(this.point)}},{key:"intersect",value:function(e){var t=this,n=[];return e instanceof y?n.push.apply(n,Object(a.a)(Object(h.b)({start:e.start,end:e.end,type:e instanceof g?1:0},this.point))):e instanceof j&&n.push.apply(n,Object(a.a)(Object(h.a)(e.center,e.radius,this.point))),n.map((function(n){return new O(t.coordinateHelper,n,t,e)}))}}]),n}(b),y=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r,i){var a;return Object(l.a)(this,n),(a=t.call(this,e)).start=r,a.end=i,a}return Object(o.a)(n,[{key:"objectEqual",value:function(e){return e instanceof n&&Object(p.d)(this.start,e.start)&&Object(p.d)(this.end,e.end)}},{key:"intersect",value:function(e){var t=this,r=[];return e instanceof v?r.push.apply(r,Object(a.a)(Object(h.b)({start:this.start,end:this.end,type:this instanceof g?1:0},e.point))):e instanceof n?r.push.apply(r,Object(a.a)(Object(h.c)({start:this.start,end:this.end,type:this instanceof g?1:0},{start:e.start,end:e.end,type:e instanceof g?1:0}))):e instanceof j&&r.push.apply(r,Object(a.a)(Object(h.d)({start:this.start,end:this.end,type:this instanceof g?1:0},e.center,e.radius))),r.map((function(n){return new O(t.coordinateHelper,n,t,e)}))}}]),n}(b),m=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r,i){var a;return Object(l.a)(this,n),(a=t.call(this,e,r,i)).dir=Object(u.a)(),a.p=Object(u.a)(),a}return Object(o.a)(n,[{key:"objectEqual",value:function(e){return e instanceof n&&Object(r.a)(Object(i.a)(n.prototype),"objectEqual",this).call(this,e)}},{key:"check",value:function(e){return Object(d.d)(this.dir,this.end,this.start),Object(d.d)(this.p,e,this.start),Object(d.g)(this.dir,this.p)>=0&&Object(h.e)(e,this.start,this.end)<f.a.pointOnLineThreshold}},{key:"closestTo",value:function(e){var t=this.coordinateHelper.clone(e);return Object(h.h)(t,e,this.start,this.end),t}}]),n}(y),g=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r,i){return Object(l.a)(this,n),t.call(this,e,r,i)}return Object(o.a)(n,[{key:"objectEqual",value:function(e){return e instanceof n&&Object(r.a)(Object(i.a)(n.prototype),"objectEqual",this).call(this,e)}},{key:"check",value:function(e){return Object(h.e)(e,this.start,this.end)<f.a.pointOnLineThreshold}},{key:"closestTo",value:function(e){var t=this.coordinateHelper.clone(e);return Object(h.g)(t,e,this.start,this.end),t}}]),n}(y),O=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,a){var o;return Object(l.a)(this,n),(o=t.call(this,e)).intersection=r,o.first=i,o.second=a,o}return Object(o.a)(n,[{key:"objectEqual",value:function(e){return e instanceof n&&this.first.objectEqual(e.first)&&this.second.objectEqual(e.second)}},{key:"check",value:function(){return!1}},{key:"closestTo",value:function(e){var t=this.coordinateHelper.clone(e);return Object(d.c)(t,this.intersection),t}},{key:"intersect",value:function(){return[]}}]),n}(b),j=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r,i){var a;return Object(l.a)(this,n),(a=t.call(this,e)).center=r,a.radius=i,a}return Object(o.a)(n,[{key:"objectEqual",value:function(e){return e instanceof n&&this.center[0]===e.center[0]&&this.center[1]===e.center[1]&&this.radius===e.radius}},{key:"check",value:function(){return!1}},{key:"closestTo",value:function(e){var t=this.coordinateHelper.clone(e);return Object(h.f)(t,e,this.center,this.radius),t}},{key:"intersect",value:function(e){var t=this,n=[];return e instanceof y?n.push.apply(n,Object(a.a)(Object(h.d)({start:e.start,end:e.end,type:e instanceof g?1:0},this.center,this.radius))):e instanceof v&&n.push.apply(n,Object(a.a)(Object(h.a)(this.center,this.radius,e.point))),n.map((function(n){return new O(t.coordinateHelper,n,t,e)}))}}]),n}(b)},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return c}));var r=n(2),i=n(3),a=n(45),o=n(27),s=n(11);function c(e){var t=e[0]*e[0]+e[4]*e[4]+e[8]*e[8],n=e[1]*e[1]+e[5]*e[5]+e[9]*e[9],r=e[2]*e[2]+e[6]*e[6]+e[10]*e[10];return Math.sqrt(Math.max(Math.max(t,n),r))}function l(e,t){var n=Object(s.o)(e),r=Object(a.c)(e[2]/n),i=Math.atan2(e[1]/n,e[0]/n);return Object(s.v)(t,n,r,i),t}function u(e,t,n){var r=n[0]-t[0],i=n[1]-t[1],a=n[2]-t[2],o=r*r+i*i+a*a;return o?(o=1/Math.sqrt(o),e[0]=r*o,e[1]=i*o,e[2]=a*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}var d=function(){function e(t,n){Object(r.a)(this,e),this.min=t,this.max=n,this.range=n-t}return Object(i.a)(e,[{key:"ndiff",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.ceil((e-t)/this.range)*this.range+t}},{key:"_normalize",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(n-=r)<e?n+=this.ndiff(e-n):n>t&&(n-=this.ndiff(n-t)),i&&n===t&&(n=e),n+r}},{key:"normalize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._normalize(this.min,this.max,e,t,n)}},{key:"clamp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(a.d)(e-t,this.min,this.max)+t}},{key:"monotonic",value:function(e,t,n){return e<t?t:t+this.ndiff(e-t,n)}},{key:"minimalMonotonic",value:function(e,t,n){return this._normalize(e,e+this.range,t,n)}},{key:"center",value:function(e,t,n){return t=this.monotonic(e,t,n),this.normalize((e+t)/2,n)}},{key:"diff",value:function(e,t,n){return this.monotonic(e,t,n)-e}},{key:"shortestSignedDiff",value:function(e,t){e=this.normalize(e);var n=(t=this.normalize(t))-e,r=t<e?this.minimalMonotonic(e,t)-e:t-this.minimalMonotonic(t,e);return Math.abs(n)<Math.abs(r)?n:r}},{key:"contains",value:function(e,t,n){return t=this.minimalMonotonic(e,t),(n=this.minimalMonotonic(e,n))>e&&n<t}}]),e}();Object(o.e)(),Object(o.e)();function f(e){for(var t in e){var n=e[t];n instanceof Function&&(e[t]=n.bind(e))}return e}f(new d(0,2*Math.PI));var p=f(new d(-Math.PI,Math.PI)),h=f(new d(0,360));Object(o.e)(),Object(o.e)(),Object(o.e)()},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(31),i=n(14);function a(e,t){var n,a=Object(i.a)(e);try{for(a.s();!(n=a.n()).done;){var o=Object(r.a)(n.value,2),s=o[0];if(t(o[1],s))return!0}}catch(c){a.e(c)}finally{a.f()}return!1}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(14),i=n(2),a=n(3),o=n(122),s=n(648),c=function(){function e(t,n){Object(i.a)(this,e),this.layout=t,this.buffer="number"==typeof n?new ArrayBuffer(n*t.stride):n;var a,o=Object(r.a)(t.fieldNames);try{for(o.s();!(a=o.n()).done;){var s=a.value,c=t.fields.get(s);this[s]=new c.constructor(this.buffer,c.offset,this.stride)}}catch(l){o.e(l)}finally{o.f()}}return Object(a.a)(e,[{key:"stride",get:function(){return this.layout.stride}},{key:"count",get:function(){return this.buffer.byteLength/this.stride}},{key:"byteLength",get:function(){return this.buffer.byteLength}},{key:"getField",value:function(e,t){var n=this[e];return n&&n.elementCount===t.ElementCount&&n.elementType===t.ElementType?n:null}},{key:"slice",value:function(t,n){return new e(this.layout,this.buffer.slice(t*this.stride,n*this.stride))}},{key:"copyFrom",value:function(e,t,n,r){var i=this.stride;if(i%4==0){var a=new Uint32Array(e.buffer,t*i,r*i/4);new Uint32Array(this.buffer,n*i,r*i/4).set(a)}else{var o=new Uint8Array(e.buffer,t*i,r*i);new Uint8Array(this.buffer,n*i,r*i).set(o)}}}]),e}(),l=function(){function e(){Object(i.a)(this,e),this.stride=0,this.fields=new Map,this.fieldNames=[]}return Object(a.a)(e,[{key:"vec2f",value:function(e,t){return this.appendField(e,o.m,t),this}},{key:"vec2f64",value:function(e,t){return this.appendField(e,o.n,t),this}},{key:"vec3f",value:function(e,t){return this.appendField(e,o.u,t),this}},{key:"vec3f64",value:function(e,t){return this.appendField(e,o.v,t),this}},{key:"vec4f",value:function(e,t){return this.appendField(e,o.C,t),this}},{key:"vec4f64",value:function(e,t){return this.appendField(e,o.D,t),this}},{key:"mat3f",value:function(e,t){return this.appendField(e,o.f,t),this}},{key:"mat3f64",value:function(e,t){return this.appendField(e,o.g,t),this}},{key:"mat4f",value:function(e,t){return this.appendField(e,o.h,t),this}},{key:"mat4f64",value:function(e,t){return this.appendField(e,o.i,t),this}},{key:"vec4u8",value:function(e,t){return this.appendField(e,o.J,t),this}},{key:"f32",value:function(e,t){return this.appendField(e,o.a,t),this}},{key:"f64",value:function(e,t){return this.appendField(e,o.b,t),this}},{key:"u8",value:function(e,t){return this.appendField(e,o.l,t),this}},{key:"u16",value:function(e,t){return this.appendField(e,o.j,t),this}},{key:"i8",value:function(e,t){return this.appendField(e,o.e,t),this}},{key:"vec2i8",value:function(e,t){return this.appendField(e,o.q,t),this}},{key:"vec2i16",value:function(e,t){return this.appendField(e,o.o,t),this}},{key:"vec2u8",value:function(e,t){return this.appendField(e,o.t,t),this}},{key:"vec4u16",value:function(e,t){return this.appendField(e,o.H,t),this}},{key:"u32",value:function(e,t){return this.appendField(e,o.k,t),this}},{key:"appendField",value:function(e,t,n){var r=t.ElementCount*Object(s.a)(t.ElementType),i=this.stride;this.fields.set(e,{size:r,constructor:t,offset:i,optional:n}),this.stride+=r,this.fieldNames.push(e)}},{key:"alignTo",value:function(e){return this.stride=Math.floor((this.stride+e-1)/e)*e,this}},{key:"hasField",value:function(e){return this.fieldNames.indexOf(e)>=0}},{key:"createBuffer",value:function(e){return new c(this,e)}},{key:"createView",value:function(e){return new c(this,e)}},{key:"clone",value:function(){var t=new e;return t.stride=this.stride,t.fields=new Map,this.fields.forEach((function(e,n){return t.fields.set(n,e)})),t.fieldNames=this.fieldNames.slice(),t.BufferType=this.BufferType,t}}]),e}();function u(){return new l}},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(811)},function(e,t,n){"use strict";var r=n(2),i=n(5),a=n(6),o=n(0),s=(n(16),n(13),n(17),n(1)),c=n(47),l=n(49),u=n(8),d=(n(12),n(19),n(20),n(28)),f=new c.a({inherited:"inherited",codedValue:"coded-value",range:"range"}),p=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).name=null,i.type=null,i}return n}(d.a);Object(o.a)([Object(s.b)({type:String,json:{write:!0}})],p.prototype,"name",void 0),Object(o.a)([Object(l.a)(f)],p.prototype,"type",void 0);var h=p=Object(o.a)([Object(u.a)("esri.layers.support.Domain")],p);t.a=h},function(e,t,n){"use strict";n.d(t,"a",(function(){return W}));var r,i=n(7),a=n.n(i),o=n(15),s=n(14),c=n(2),l=n(3),u=n(5),d=n(6),f=n(0),p=(n(16),n(13)),h=n(17),b=n(1),v=n(41),y=n(8),m=n(42),g=(n(12),n(19),n(20),n(54)),O=n(283),j=n(53),w=n(50),_=n(640),k=r=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).type="color",r.normalizationField=null,r}return Object(l.a)(n,[{key:"cache",get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}},{key:"stops",set:function(e){e&&Array.isArray(e)&&(e=e.filter((function(e){return!!e}))).sort((function(e,t){return e.value-t.value})),this._set("stops",e)}},{key:"clone",value:function(){return new r({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((function(e){return e.clone()})),legendOptions:this.legendOptions&&this.legendOptions.clone()})}},{key:"getAttributeHash",value:function(){return"".concat(Object(j.a)(Object(w.a)(n.prototype),"getAttributeHash",this).call(this),"-").concat(this.normalizationField)}},{key:"_interpolateData",value:function(){return this.stops&&this.stops.map((function(e){return e.value||0}))}}]),n}(O.a);Object(f.a)([Object(b.b)({readOnly:!0})],k.prototype,"cache",null),Object(f.a)([Object(b.b)({type:["color"],json:{type:["colorInfo"]}})],k.prototype,"type",void 0),Object(f.a)([Object(b.b)({type:String,json:{write:!0}})],k.prototype,"normalizationField",void 0),Object(f.a)([Object(b.b)({type:[_.a],json:{write:!0}})],k.prototype,"stops",null);var x,S=k=r=Object(f.a)([Object(y.a)("esri.renderers.visualVariables.ColorVariable")],k),T=n(28),E=n(231),C=x=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).label=null,r.opacity=null,r.value=null,r}return Object(l.a)(n,[{key:"readOpacity",value:function(e,t){return Object(E.b)(t.transparency)}},{key:"writeOpacity",value:function(e,t,n){t[n]=Object(E.a)(e)}},{key:"clone",value:function(){return new x({label:this.label,opacity:this.opacity,value:this.value})}}]),n}(T.a);Object(f.a)([Object(b.b)({type:String,json:{write:!0}})],C.prototype,"label",void 0),Object(f.a)([Object(b.b)({type:Number,json:{type:h.a,write:{target:"transparency"}}})],C.prototype,"opacity",void 0),Object(f.a)([Object(v.a)("opacity",["transparency"])],C.prototype,"readOpacity",null),Object(f.a)([Object(m.a)("opacity")],C.prototype,"writeOpacity",null),Object(f.a)([Object(b.b)({type:Number,json:{write:!0}})],C.prototype,"value",void 0);var P,I=C=x=Object(f.a)([Object(y.a)("esri.renderers.visualVariables.support.OpacityStop")],C),M=P=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).type="opacity",r.normalizationField=null,r}return Object(l.a)(n,[{key:"cache",get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}},{key:"stops",set:function(e){e&&Array.isArray(e)&&(e=e.filter((function(e){return!!e}))).sort((function(e,t){return e.value-t.value})),this._set("stops",e)}},{key:"clone",value:function(){return new P({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((function(e){return e.clone()})),legendOptions:this.legendOptions&&this.legendOptions.clone()})}},{key:"getAttributeHash",value:function(){return"".concat(Object(j.a)(Object(w.a)(n.prototype),"getAttributeHash",this).call(this),"-").concat(this.normalizationField)}},{key:"_interpolateData",value:function(){return this.stops&&this.stops.map((function(e){return e.value||0}))}}]),n}(O.a);Object(f.a)([Object(b.b)({readOnly:!0})],M.prototype,"cache",null),Object(f.a)([Object(b.b)({type:["opacity"],json:{type:["transparencyInfo"]}})],M.prototype,"type",void 0),Object(f.a)([Object(b.b)({type:String,json:{write:!0}})],M.prototype,"normalizationField",void 0),Object(f.a)([Object(b.b)({type:[I],json:{write:!0}})],M.prototype,"stops",null);var A=M=P=Object(f.a)([Object(y.a)("esri.renderers.visualVariables.OpacityVariable")],M),R=n(505),L=n(385),F=n(47),D=n(177),N=n(36),V=p.a.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),z={color:S,size:L.a,opacity:A,rotation:R.a},U=new F.a({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),B=/^\[([^\]]+)\]$/i,G=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.apply(this,arguments)).colorVariables=null,e.opacityVariables=null,e.rotationVariables=null,e.sizeVariables=null,e}return Object(l.a)(n,[{key:"visualVariables",set:function(e){if(this._resetVariables(),(e=e&&e.filter((function(e){return!!e})))&&e.length){var t,n=Object(s.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;switch(r.type){case"color":this.colorVariables.push(r);break;case"opacity":this.opacityVariables.push(r);break;case"rotation":this.rotationVariables.push(r);break;case"size":this.sizeVariables.push(r)}}}catch(a){n.e(a)}finally{n.f()}this.sizeVariables.length&&this.sizeVariables.some((function(e){return!!e.target}))&&e.sort((function(e,t){return e.target===t.target?0:e.target?1:-1}));for(var i=0;i<e.length;i++)e[i].index=i;this._set("visualVariables",e)}else this._set("visualVariables",e)}},{key:"readVariables",value:function(e,t,n){var r=t.rotationExpression,i=t.rotationType,a=r&&r.match(B),o=a&&a[1];if(o&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:i,field:o})),e)return e.map((function(e){var t=U.read(e.type),r=z[t];r||(V.warn("Unknown variable type: ".concat(t)),n&&n.messages&&n.messages.push(new D.a("visual-variable:unsupported","visualVariable of type '".concat(t,"' is not supported"),{definition:e,context:n})));var i=new r;return i.read(e,n),i}))}},{key:"writeVariables",value:function(e,t){var n,r=[],i=Object(s.a)(e);try{for(i.s();!(n=i.n()).done;){var a=n.value.toJSON(t);a&&r.push(a)}}catch(o){i.e(o)}finally{i.f()}return r}},{key:"_resetVariables",value:function(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}}]),n}(N.a);Object(f.a)([Object(b.b)()],G.prototype,"visualVariables",null);var q=G=Object(f.a)([Object(y.a)("esri.renderers.visualVariables.VisualVariableFactory")],G),H={base:O.a,key:"type",typeMap:{opacity:A,color:S,rotation:R.a,size:L.a}},W=function(e){var t=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.apply(this,arguments))._vvFactory=new q,e}return Object(l.a)(n,[{key:"visualVariables",set:function(e){this._vvFactory.visualVariables=e,this._set("visualVariables",this._vvFactory.visualVariables)}},{key:"readVisualVariables",value:function(e,t,n){return this._vvFactory.readVariables(e,t,n)}},{key:"writeVisualVariables",value:function(e,t,n,r){t[n]=this._vvFactory.writeVariables(e,r)}},{key:"arcadeRequiredForVisualVariables",get:function(){if(!this.visualVariables)return!1;var e,t=Object(s.a)(this.visualVariables);try{for(t.s();!(e=t.n()).done;){if(e.value.arcadeRequired)return!0}}catch(n){t.e(n)}finally{t.f()}return!1}},{key:"hasVisualVariables",value:function(e,t){return e?!!this.getVisualVariablesForType(e,t):!!(this.getVisualVariablesForType("size",t)||this.getVisualVariablesForType("color",t)||this.getVisualVariablesForType("opacity",t)||this.getVisualVariablesForType("rotation",t))}},{key:"getVisualVariablesForType",value:function(e,t){var n=this.visualVariables;if(n){var r=n.filter((function(n){return n.type===e&&("string"==typeof t?n.target===t:!1!==t||!n.target)}));return r&&0===r.length?void 0:r}}},{key:"collectVVRequiredFields",value:function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,i,o,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],this.visualVariables&&(r=r.concat(this.visualVariables)),i=Object(s.a)(r),e.prev=3,i.s();case 5:if((o=i.n()).done){e.next=17;break}if(c=o.value,e.t0=c,!e.t0){e.next=15;break}if(c.field&&Object(g.f)(t,n,c.field),c.normalizationField&&Object(g.f)(t,n,c.normalizationField),e.t1=c.valueExpression,!e.t1){e.next=15;break}return e.next=15,Object(g.c)(t,n,c.valueExpression);case 15:e.next=5;break;case 17:e.next=22;break;case 19:e.prev=19,e.t2=e.catch(3),i.e(e.t2);case 22:return e.prev=22,i.f(),e.finish(22);case 25:case"end":return e.stop()}}),e,this,[[3,19,22,25]])})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(e);return Object(f.a)([Object(b.b)({types:[H],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),Object(f.a)([Object(v.a)("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),Object(f.a)([Object(m.a)("visualVariables")],t.prototype,"writeVisualVariables",null),t=Object(f.a)([Object(y.a)("esri.renderers.mixins.VisualVariablesMixin")],t)}},function(e,t,n){"use strict";e.exports=n(816)},function(e,t,n){"use strict";var r=n(65);var i,a=(i=r.a,{setTimeout:function(e,t){var n=i.setTimeout(e,t);return{remove:function(){return i.clearTimeout(n)}}}});t.a=a},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(8),d=(n(12),n(19),n(20),n(167)),f=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).description=null,r.displayType=null,r.title=null,r.type="attachments",r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({description:this.description,displayType:this.displayType,title:this.title})}}]),n}(d.a);Object(c.a)([Object(l.b)({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],f.prototype,"description",void 0),Object(c.a)([Object(l.b)({type:["preview","list"],json:{write:!0}})],f.prototype,"displayType",void 0),Object(c.a)([Object(l.b)({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],f.prototype,"title",void 0),Object(c.a)([Object(l.b)({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],f.prototype,"type",void 0);var p=f=r=Object(c.a)([Object(u.a)("esri.popup.content.AttachmentsContent")],f);t.a=p},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(22)),u=(n(13),n(17),n(1)),d=n(47),f=n(49),p=n(8),h=(n(12),n(19),n(20),n(28)),b=n(341),v=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).fieldName=null,r.format=null,r.isEditable=!1,r.label=null,r.stringFieldOption="text-box",r.statisticType=null,r.tooltip=null,r.visible=!0,r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({fieldName:this.fieldName,format:this.format?Object(l.a)(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}}]),n}(h.a);Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],v.prototype,"fieldName",void 0),Object(c.a)([Object(u.b)({type:b.a,json:{write:!0}})],v.prototype,"format",void 0),Object(c.a)([Object(u.b)({type:Boolean,json:{write:!0,default:!1}})],v.prototype,"isEditable",void 0),Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],v.prototype,"label",void 0),Object(c.a)([Object(f.a)(new d.a({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],v.prototype,"stringFieldOption",void 0),Object(c.a)([Object(u.b)({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],v.prototype,"statisticType",void 0),Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],v.prototype,"tooltip",void 0),Object(c.a)([Object(u.b)({type:Boolean,json:{write:!0}})],v.prototype,"visible",void 0);var y=v=r=Object(c.a)([Object(p.a)("esri.popup.FieldInfo")],v);t.a=y},function(e,t,n){"use strict";n.d(t,"a",(function(){return I})),n.d(t,"b",(function(){return i}));var r,i,a,o=n(2),s=n(3),c=n(37),l=n(5),u=n(6),d=n(26),f=n(0),p=(n(16),n(4)),h=n(13),b=(n(17),n(1)),v=n(8),y=(n(12),n(19),n(20),n(412)),m=n(139),g=n(24),O=n(36),j=n(25),w=n(738),_=n(739),k=h.a.getLogger("esri.views.support.Scheduler");(a=i||(i={})).REMOTE_CLIENT="worker messages",a.SLIDE="slide",a.STAGE="stage",a.STREAM_DATA_LOADER="stream loader",a.ELEVATION_QUERY="elevation query",a.TERRAIN_SURFACE="terrain",a.SURFACE_GEOMETRY_UPDATES="surface geometry updates",a.GRAPHICS_CORE="Graphics3D",a.I3S_CONTROLLER="I3S",a.POINT_CLOUD_LAYER="point cloud",a.FEATURE_TILE_FETCHER="feature fetcher",a.LABELER="labeler",a.GRAPHICS_DECONFLICTOR="graphics deconflictor",a.FILTER_VISIBILITY="Graphics3D filter visibility",a.FEATURE_QUERY_ENGINE="feature query",a.SCALE_VISIBILITY="Graphics3D scale visibility",a.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",a.POINT_OF_INTEREST_FREQUENT="POI frequent",a.POINT_OF_INTEREST_INFREQUENT="POI infrequent",a.FEATURE_TILE_TREE="feature tile tree",a.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",a.ELEVATION_ALIGNMENT="elevation alignment",a.TEXT_TEXTURE_ATLAS="text texture atlas",a.TEXTURE_UNLOAD="texture unload",a.OVERLAY_MANAGER="overlay manager",a.LINE_OF_SIGHT_TOOL="line of sight tool",a.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",a.ELEVATION_PROFILE="elevation profile",a.SNAPPING="snapping",a[a.TEST_PRIO=1]="TEST_PRIO";var x=(r={},Object(d.a)(r,i.REMOTE_CLIENT,0),Object(d.a)(r,i.SLIDE,0),Object(d.a)(r,i.STREAM_DATA_LOADER,0),Object(d.a)(r,i.ELEVATION_QUERY,0),Object(d.a)(r,i.STAGE,1),Object(d.a)(r,i.TERRAIN_SURFACE,1),Object(d.a)(r,i.SURFACE_GEOMETRY_UPDATES,1),Object(d.a)(r,i.GRAPHICS_CORE,2),Object(d.a)(r,i.I3S_CONTROLLER,2),Object(d.a)(r,i.POINT_CLOUD_LAYER,2),Object(d.a)(r,i.FEATURE_TILE_FETCHER,2),Object(d.a)(r,i.LABELER,8),Object(d.a)(r,i.GRAPHICS_DECONFLICTOR,4),Object(d.a)(r,i.FILTER_VISIBILITY,4),Object(d.a)(r,i.FEATURE_QUERY_ENGINE,8),Object(d.a)(r,i.SCALE_VISIBILITY,4),Object(d.a)(r,i.FRUSTUM_VISIBILITY,4),Object(d.a)(r,i.POINT_OF_INTEREST_FREQUENT,6),Object(d.a)(r,i.POINT_OF_INTEREST_INFREQUENT,30),Object(d.a)(r,i.FEATURE_TILE_TREE,16),Object(d.a)(r,i.FEATURE_TILE_TREE_ACTIVE,0),Object(d.a)(r,i.ELEVATION_ALIGNMENT,12),Object(d.a)(r,i.TEXT_TEXTURE_ATLAS,12),Object(d.a)(r,i.TEXTURE_UNLOAD,12),Object(d.a)(r,i.OVERLAY_MANAGER,12),Object(d.a)(r,i.LINE_OF_SIGHT_TOOL,16),Object(d.a)(r,i.LINE_OF_SIGHT_TOOL_INTERACTIVE,0),Object(d.a)(r,i.SNAPPING,0),r);function S(e){return e in x?x[e]:"number"==typeof e?e:1}var T,E,C=1e3/30;!function(e){var t=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n,s;for(var l in Object(o.a)(this,a),(n=t.call(this,e)).updating=!0,n.performanceInfo={total:new y.a("total"),tasks:new Array},n._budget=null,n._state=1,n._tasks=new m.a,n._runQueue=new m.a,n._load=0,n._idleStateCallbacks=new m.a,n._idleUpdatesStartFired=!1,n._maxReschedule=M,n._forceTask=!1,n._debug=!1,n._debugHandle=Object(j.a)(_.a,"SCHEDULER_LOG_SLOW_TASKS",(function(e){return n._debug=e})),n._budget=new r(e.nowFunc),R.length=0,i)A.set(i[l],n.performanceInfo.tasks.length),n.performanceInfo.tasks.push(new y.a(i[l])),R.push(0);var u=Object(c.a)(n);return n._test={get state(){return Object(p.j)(s)?u._state:s},set state(e){s=e},FRAME_SAFETY_BUDGET:6.5,INTERACTING_BUDGET:C,IDLE_BUDGET:100,get budget(){return u._budget.budget},usedBudget:0,updateTask:function(e){return n._updateTask(e)},getState:function(e){return n._getState(e)},getRuntime:function(e){return n._getRuntime(e)},resetRuntimes:function(){return n._resetRuntimes()},getRunning:function(){return n._getRunning()}},n}return Object(s.a)(a,[{key:"destroy",value:function(){this._debugHandle&&this._debugHandle.remove()}},{key:"registerTask",value:function(e,t,r){var i=S(e),a=new n(this,e,t,r,i);return this._tasks.push(a),a}},{key:"registerIdleStateCallbacks",value:function(e,t){var n=this,r={idleBegin:e,idleEnd:t};this._idleStateCallbacks.push(r),2===this.state&&this._idleUpdatesStartFired&&r.idleBegin();var i=this;return{remove:function(){return n._removeIdleStateCallbacks(r)},set idleBegin(e){i._idleUpdatesStartFired&&(r.idleEnd(),2===i._state&&e()),r.idleBegin=e},set idleEnd(e){r.idleEnd=e}}}},{key:"now",get:function(){return this.nowFunc()}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return Object(p.j)(this._test.state)?this._state:this._test.state},set:function(e){this._state!==e&&(this._state=e,2!==this.state&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll((function(e){return e.idleEnd()}))))}},{key:"updateBudget",value:function(e){this._test.usedBudget=0;var t=6.5,n=e.frameDuration,r=1;switch(this.state){case 2:t=0,n=Math.max(100,e.frameDuration),r=30;break;case 1:n=Math.max(C,e.frameDuration)}return n-=e.elapsedFrameTime+t,2!==this.state&&n<1&&!this._forceTask?(this._forceTask=!0,!1):(n=Math.max(n,r),this._budget.reset(n,this.state),this._maxReschedule=M,this._updateLoad(),this._schedule())}},{key:"frame",value:function(){switch(this._forceTask=!1,this.state){case 2:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll((function(e){return e.idleBegin()}))),this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}},{key:"_removeIdleStateCallbacks",value:function(e){this._idleUpdatesStartFired&&e.idleEnd(),this._idleStateCallbacks.removeUnordered(e)}},{key:"removeTask",value:function(e){this._tasks.removeUnordered(e),this._runQueue.removeUnordered(e)}},{key:"_updateTask",value:function(e){this._tasks.forAll((function(t){t.name===e&&t.setPriority(e)}))}},{key:"_getState",value:function(e){if(this._runQueue.some((function(t){return t.name===e})))return E.SCHEDULED;var t=E.IDLE;return this._tasks.forAll((function(n){n.name===e&&n.needsUpdate&&(n.schedulePriority<=1?t=E.READY:t!==E.READY&&(t=E.WAITING))})),t}},{key:"_getRuntime",value:function(e){var t=0;return this._tasks.forAll((function(n){n.name===e&&(t+=n.runtime)})),t}},{key:"_resetRuntimes",value:function(){this._tasks.forAll((function(e){return e.runtime=0}))}},{key:"_getRunning",value:function(){var e=new Map;if(this._tasks.forAll((function(t){t.needsUpdate&&e.set(t.name,(e.get(t.name)||0)+1)})),0===e.size)return null;var t="";return e.forEach((function(e,n){t+=e>1?" ".concat(e,"x ").concat(n):" ".concat(n)})),t}},{key:"_runIdle",value:function(){this._run()}},{key:"_runInteracting",value:function(){this._run()}},{key:"_runAnimating",value:function(){this._run()}},{key:"_updateLoad",value:function(){var e=this._tasks.reduce((function(e,t){return t.needsUpdate?++e:e}),0);this._load=.9*this._load+e*(1-.9)}},{key:"_schedule",value:function(){var e=this;if(this._maxReschedule<=0)return!1;var t=function(){var t=!1,n=0;if(e._tasks.forAll((function(r){if(r.needsUpdate&&0!==r.schedulePriority&&0!==r.priority)switch(t=!0,n=Math.max(n,r.priority),r.schedulePriority){case 1:r.schedulePriority=0,e._runQueue.push(r);break;default:--r.schedulePriority}})),!t)return{v:(e.updating=!1,!1)};e._maxReschedule===M&&(e._maxReschedule=n),--e._maxReschedule};for(this._runQueue.filterInPlace((function(e){return!!e.needsUpdate||(e.schedulePriority=e.priority,!1)})),this._tasks.forAll((function(t){0===t.priority&&t.needsUpdate&&!e._runQueue.some((function(e){return e===t}))&&e._runQueue.unshift(t)}));0===this._runQueue.length;){var n=t();if("object"===typeof n)return n.v}return this.updating=!0,!0}},{key:"_run",value:function(){for(var e=this._budget.now(),t=0;t<R.length;++t)R[t]=0;do{for(;this._runQueue.length>0;){var n=this._budget.now(),r=this._runQueue.pop();this._budget.resetProgress();try{r.update(this._budget)}catch(a){k.error('Exception in task "'.concat(r.name,'"'),a)}r.schedulePriority=r.priority;var i=this._budget.now()-n;if(r.runtime+=i,R[A.get(r.task)]+=i,this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",r.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return void this._recordFrameTaskTimes(R,this._budget.now()-e)}}while(this._schedule());this._recordFrameTaskTimes(R,this._budget.now()-e)}},{key:"_recordFrameTaskTimes",value:function(e,t){for(var n=0;n<e.length;++n)this.performanceInfo.tasks[n].record(e[n]);this.performanceInfo.total.record(t)}},{key:"test",get:function(){return this._test}}]),a}(O.a);Object(f.a)([Object(b.b)()],t.prototype,"updating",void 0),Object(f.a)([Object(b.b)()],t.prototype,"nowFunc",void 0),t=Object(f.a)([Object(v.a)("esri.views.support.Scheduler")],t),e.Scheduler=t;var n=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e,r,i,a,s){var c;return Object(o.a)(this,n),(c=t.call(this,{}))._scheduler=e,c.name=r,c.update=i,c._needsUpdateCB=a,c._priority=s,c.runtime=0,c._queue=new w.a,c.updating=!1,c.schedulePriority=c._priority,c}return Object(s.a)(n,[{key:"normalizeCtorArgs",value:function(){return{}}},{key:"remove",value:function(){this.processQueue(P),this._scheduler.removeTask(this),this.schedule=I.schedule,this.reschedule=I.reschedule}},{key:"priority",get:function(){return this._priority}},{key:"setPriority",value:function(e){this.name=e;var t=S(e);0!==this._priority&&0===this.schedulePriority||(this.schedulePriority=t),this._priority=t}},{key:"task",get:function(){return this.name},set:function(e){this.setPriority(e)}},{key:"needsUpdate",get:function(){return this.updating||this._needsUpdateCB()}},{key:"schedule",value:function(e,t){return this.updating=!0,this._queue.push(e,t)}},{key:"reschedule",value:function(e,t){return this.updating=!0,this._queue.unshift(e,t)}},{key:"processQueue",value:function(e){for(;!e.done&&this._queue.process();)e.madeProgress();this.updating=this._queue.length>0}}]),n}(O.a);Object(f.a)([Object(b.b)()],n.prototype,"updating",void 0),n=Object(f.a)([Object(v.a)("esri.views.support.SchedulerTask")],n);var r=function(){function e(t){Object(o.a)(this,e),this.now=t,this._begin=0,this._budget=0,this._state=2,this._didWork=!1,this._enabled=!0}return Object(s.a)(e,[{key:"run",value:function(e){return!this.done&&(!0===e()&&(this._didWork=!0),!0)}},{key:"done",get:function(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}},{key:"budget",get:function(){return this._budget}},{key:"madeProgress",value:function(){this._didWork=!0}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled=e}},{key:"reset",value:function(e,t){this._begin=this.now(),this._budget=e,this._state=t,this._didWork=!1}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return this.now()-this._begin}},{key:"resetProgress",value:function(){this._didWork=!1}},{key:"hasProgressed",get:function(){return this._didWork}}]),e}();e.Budget=r}(T||(T={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(E||(E={}));var P=function(){var e=new T.Budget((function(){return performance.now()}));return e.enabled=!1,e}(),I=new(function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"remove",value:function(){}},{key:"processQueue",value:function(){}},{key:"schedule",value:function(e){return Object(g.w)(e())}},{key:"reschedule",value:function(e){return Object(g.w)(e())}}]),e}()),M=Number.MAX_SAFE_INTEGER,A=new Map,R=new Array},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(5),o=n(6),s=n(0),c=(n(16),n(13)),l=n(17),u=n(1),d=n(58),f=n(47),p=n(8),h=(n(12),n(19),n(20),n(28)),b=n(539),v=c.a.getLogger("esri.renderers.visualVariables.VisualVariable"),y=new f.a({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),m=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).index=null,i.type=null,i.field=null,i.valueExpression=null,i.valueExpressionTitle=null,i.legendOptions=null,i}return Object(i.a)(n,[{key:"castField",value:function(e){return null==e?e:"function"==typeof e?(v.error(".field: field must be a string value"),null):Object(l.l)(e)}},{key:"arcadeRequired",get:function(){return!!this.valueExpression}},{key:"clone",value:function(){}},{key:"getAttributeHash",value:function(){return"".concat(this.type,"-").concat(this.field,"-").concat(this.valueExpression)}}]),n}(h.a);Object(s.a)([Object(u.b)()],m.prototype,"index",void 0),Object(s.a)([Object(u.b)({type:y.apiValues,readOnly:!0,json:{read:y.read,write:y.write}})],m.prototype,"type",void 0),Object(s.a)([Object(u.b)({type:String,json:{write:!0}})],m.prototype,"field",void 0),Object(s.a)([Object(d.a)("field")],m.prototype,"castField",null),Object(s.a)([Object(u.b)({type:String,json:{write:!0}})],m.prototype,"valueExpression",void 0),Object(s.a)([Object(u.b)({type:String,json:{write:!0}})],m.prototype,"valueExpressionTitle",void 0),Object(s.a)([Object(u.b)({readOnly:!0})],m.prototype,"arcadeRequired",null),Object(s.a)([Object(u.b)({type:b.a,json:{write:!0}})],m.prototype,"legendOptions",void 0);var g=m=Object(s.a)([Object(p.a)("esri.renderers.visualVariables.VisualVariable")],m);t.a=g},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(2),i=function e(){Object(r.a)(this,e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(2),i=n(3),a=n(240),o=function(){function e(){Object(r.a)(this,e),this.id=Object(a.a)()}return Object(i.a)(e,[{key:"unload",value:function(){}}]),e}()},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(5),o=n(6),s=n(0),c=(n(16),n(4)),l=(n(13),n(17),n(1)),u=n(49),d=n(8),f=(n(12),n(19),n(20),n(146)),p=n(515),h=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){return Object(r.a)(this,n),t.call(this,e)}return Object(i.a)(n,[{key:"clone",value:function(){}}]),n}(n(28).a);Object(s.a)([Object(l.b)({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],h.prototype,"type",void 0);var b,v=h=Object(s.a)([Object(d.a)("esri.symbols.patterns.Pattern3D")],h),y=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"],m=b=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).type="style",i.style="solid",i}return Object(i.a)(n,[{key:"clone",value:function(){return new b({style:this.style})}}]),n}(v);Object(s.a)([Object(l.b)({type:["style"]})],m.prototype,"type",void 0),Object(s.a)([Object(l.b)({type:y,json:{read:!0,write:!0}})],m.prototype,"style",void 0);var g=m=b=Object(s.a)([Object(d.a)("esri.symbols.patterns.StylePattern3D")],m);var O,j={types:{key:"type",base:v,typeMap:{style:g}},json:{read:function(e,t,n){if(!e)return e;switch(e.type){case"style":var r=new g;return r.read(e,n),r}},write:!0}},w=n(288),_=n(179),k=O=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"clone",value:function(){return new O({color:Object(c.k)(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode})}}]),n}(_.a);Object(s.a)([Object(u.a)({multiply:"multiply",replace:"replace",tint:"tint"})],k.prototype,"colorMixMode",void 0);var x,S=k=O=Object(s.a)([Object(d.a)("esri.symbols.support.Symbol3DFillMaterial")],k),T=n(456),E=x=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).type="fill",i.material=null,i.pattern=null,i.castShadows=!0,i.outline=null,i.edges=null,i}return Object(i.a)(n,[{key:"clone",value:function(){return new x({edges:Object(c.k)(this.edges)?this.edges.clone():null,enabled:this.enabled,material:Object(c.k)(this.material)?this.material.clone():null,pattern:Object(c.k)(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:Object(c.k)(this.outline)?this.outline.clone():null})}}],[{key:"fromSimpleFillSymbol",value:function(e){return new x({material:{color:(e.color||w.b).clone()},pattern:e.style&&"solid"!==e.style?new g({style:e.style}):null,outline:e.outline?new T.a({size:e.outline.width||0,color:(e.outline.color||w.c).clone()}):null})}}]),n}(f.a);Object(s.a)([Object(u.a)({Fill:"fill"},{readOnly:!0})],E.prototype,"type",void 0),Object(s.a)([Object(l.b)({type:S,json:{write:!0}})],E.prototype,"material",void 0),Object(s.a)([Object(l.b)(j)],E.prototype,"pattern",void 0),Object(s.a)([Object(l.b)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],E.prototype,"castShadows",void 0),Object(s.a)([Object(l.b)({type:T.a,json:{write:!0}})],E.prototype,"outline",void 0),Object(s.a)([Object(l.b)(p.a)],E.prototype,"edges",void 0);var C=E=x=Object(s.a)([Object(d.a)("esri.symbols.FillSymbol3DLayer")],E);t.a=C},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(4)),u=(n(13),n(17),n(1)),d=n(49),f=n(8),p=(n(12),n(19),n(20),n(146)),h=n(179),b=n(537),v=n(36),y=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).x=0,e.y=0,e.z=0,e}return Object(a.a)(n,[{key:"clone",value:function(){return new r({x:this.x,y:this.y,z:this.z})}}]),n}(v.a);Object(c.a)([Object(u.b)({type:Number})],y.prototype,"x",void 0),Object(c.a)([Object(u.b)({type:Number})],y.prototype,"y",void 0),Object(c.a)([Object(u.b)({type:Number})],y.prototype,"z",void 0);y=r=Object(c.a)([Object(f.a)("esri.symbols.support.Symbol3DAnchorPosition3D")],y);var m,g=m=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).material=null,r.castShadows=!0,r.resource=null,r.type="object",r.width=void 0,r.height=void 0,r.depth=void 0,r.anchor=void 0,r.anchorPosition=void 0,r.heading=void 0,r.tilt=void 0,r.roll=void 0,r}return Object(a.a)(n,[{key:"clone",value:function(){return new m({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:Object(l.k)(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}},{key:"isPrimitive",get:function(){return!this.resource||"string"!=typeof this.resource.href}}]),n}(p.a);Object(c.a)([Object(u.b)({type:h.a,json:{write:!0}})],g.prototype,"material",void 0),Object(c.a)([Object(u.b)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],g.prototype,"castShadows",void 0),Object(c.a)([Object(u.b)({type:b.a,json:{write:!0}})],g.prototype,"resource",void 0),Object(c.a)([Object(d.a)({Object:"object"},{readOnly:!0})],g.prototype,"type",void 0),Object(c.a)([Object(u.b)({type:Number,json:{write:!0}})],g.prototype,"width",void 0),Object(c.a)([Object(u.b)({type:Number,json:{write:!0}})],g.prototype,"height",void 0),Object(c.a)([Object(u.b)({type:Number,json:{write:!0}})],g.prototype,"depth",void 0),Object(c.a)([Object(d.a)({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),Object(u.b)({json:{default:"origin"}})],g.prototype,"anchor",void 0),Object(c.a)([Object(u.b)({type:y,json:{type:[Number],read:{reader:function(e){return new y({x:e[0],y:e[1],z:e[2]})}},write:{writer:function(e,t){t.anchorPosition=[e.x,e.y,e.z]},overridePolicy:function(){return{enabled:"relative"===this.anchor}}}}})],g.prototype,"anchorPosition",void 0),Object(c.a)([Object(u.b)({type:Number,json:{write:!0}})],g.prototype,"heading",void 0),Object(c.a)([Object(u.b)({type:Number,json:{write:!0}})],g.prototype,"tilt",void 0),Object(c.a)([Object(u.b)({type:Number,json:{write:!0}})],g.prototype,"roll",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],g.prototype,"isPrimitive",null);var O=g=m=Object(c.a)([Object(f.a)("esri.symbols.ObjectSymbol3DLayer")],g);t.a=O},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i}));var r=n(39),i=new r.a("white"),a=(new r.a("black"),new r.a([255,255,255,0]));function o(e){return 0===e.r&&0===e.g&&0===e.b}},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(18),i=n(120),a=n(308),o=n(309),s=n(220),c=n(227),l=n(249),u=n(130),d=n(116),f=n(209),p=n(193),h=n(76);function b(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],b=arguments.length>2&&void 0!==arguments[2]&&arguments[2],v=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!e)return{symbol:null};if(Object(h.c)(e)||e instanceof p.a)t=e.clone();else if("cim"===e.type)t=c.a.fromCIMSymbol(e);else if(e instanceof i.default)t=o.a.fromSimpleLineSymbol(e);else if(e instanceof d.default)t=c.a.fromSimpleMarkerSymbol(e);else if(e instanceof s.a)t=c.a.fromPictureMarkerSymbol(e);else if(e instanceof u.default)t=l.a.fromSimpleFillSymbol(e);else{if(!(e instanceof f.a))return{error:new r.a("symbol-conversion:unsupported-2d-symbol","2D symbol of type '".concat(e.type||e.declaredClass,"' is unsupported in 3D"),{symbol:e})};t=v?a.a.fromTextSymbol(e):c.a.fromTextSymbol(e)}if(n&&(t.id=e.id),b&&Object(h.c)(t))for(var y=0;y<t.symbolLayers.length;++y)t.symbolLayers.getItemAt(y)._ignoreDrivers=!0;return{symbol:t}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return d})),n.d(t,"h",(function(){return u})),n.d(t,"i",(function(){return f})),n.d(t,"j",(function(){return h})),n.d(t,"k",(function(){return p}));n(16),n(315),n(560);var r=n(105);n(376);function i(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=!(a&&"u8"===t.pixelType),s=o?5126:5121,c=null==t.pixels||0===t.pixels.length?null:o?t.getAsRGBAFloat():t.getAsRGBA(),l=null==(n=e.capabilities.textureFloat)?void 0:n.textureFloatLinear,u={width:t.width,height:t.height,target:3553,pixelFormat:6408,internalFormat:e.isWebGL2Context()?34836:6408,samplingMode:!l||"bilinear"!==i&&"cubic"!==i?9728:9729,dataType:s,wrapMode:33071,flipped:!1};return new r.a(e,u,c)}function a(e,t){for(var n=4*t.size[0],i=t.size[1],a={width:n,height:i,target:3553,pixelFormat:6408,internalFormat:e.isWebGL2Context()?34836:6408,dataType:5126,samplingMode:9728,wrapMode:33071,flipped:!1},o=new Float32Array(n*i*4),s=0,c=0;c<t.coefficients.length;c++)o[s++]=t.coefficients[c],c%3==2&&(o[s++]=1);return new r.a(e,a,o)}function o(e,t){var n={width:t.length/4,height:1,target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,flipped:!1};return new r.a(e,n,t)}function s(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return{u_flipY:i,u_isFloatTexture:a,u_applyTransform:!!e,u_opacity:r,u_transformSpacing:e?e.spacing:null,u_transformGridSize:e?e.size:null,u_targetImageSize:t,u_srcImageSize:n}}function c(e,t){return{u_colormapOffset:t||0,u_colormapMaxIndex:e?e.length/4-1:null}}function l(e,t){return{u_scale:e,u_offset:t}}function u(e){return{u_bandCount:e.bandCount,u_minOutput:e.outMin,u_maxOutput:e.outMax,u_minCutOff:e.minCutOff,u_maxCutOff:e.maxCutOff,u_factor:e.factor,u_useGamma:e.useGamma,u_gamma:e.gamma,u_gammaCorrection:e.gammaCorrection}}function d(e){return{u_hillshadeType:e.hillshadeType,u_sinZcosAs:e.sinZcosAs,u_sinZsinAs:e.sinZsinAs,u_cosZs:e.cosZs,u_weights:e.weights,u_factor:e.factor,u_minValue:e.minValue,u_maxValue:e.maxValue}}function f(e,t){for(var n,r=e.gl,i=t.glName,a=r.getProgramParameter(i,r.ACTIVE_UNIFORMS),o=new Map,s=0;s<a;s++)(n=r.getActiveUniform(i,s))&&o.set(n.name,{location:r.getUniformLocation(i,n.name),info:n});return o}function p(e,t,n){Object.keys(n).forEach((function(r){var i=t.get(r)||t.get(r+"[0]");i&&function(e,t,n,r){if(null===r||null==n)return!1;var i=r.info;switch(i.type){case 5126:i.size>1?e.setUniform1fv(t,n):e.setUniform1f(t,n);break;case 35664:e.setUniform2fv(t,n);break;case 35665:e.setUniform3fv(t,n);break;case 35666:e.setUniform4fv(t,n);break;case 35675:e.setUniformMatrix3fv(t,n);break;case 35676:e.setUniformMatrix4fv(t,n);break;case 5124:i.size>1?e.setUniform1iv(t,n):e.setUniform1i(t,n);break;case 35670:e.setUniform1i(t,n?1:0);break;case 35667:case 35671:e.setUniform2iv(t,n);break;case 35668:case 35672:e.setUniform3iv(t,n);break;case 35669:case 35673:e.setUniform4iv(t,n);break;default:return!1}}(e,r,n[r],i)}))}function h(e,t,n,r){n.length===r.length&&(r.some((function(e){return null==e}))||n.some((function(e){return null==e}))||n.forEach((function(n,i){t.setUniform1i(n,i),e.bindTexture(r[i],i)})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u}));var r=n(17);var i=n(243);function a(e){e.name&&(e.read&&"object"==typeof e.read?void 0===e.read.source&&(e.read.source=e.name):e.read={source:e.name},e.write&&"object"==typeof e.write?void 0===e.write.target&&(e.write.target=e.name):e.write={target:e.name})}function o(e){"boolean"==typeof e.read?e.read={enabled:e.read}:"function"==typeof e.read?e.read={enabled:!0,reader:e.read}:e.read&&"object"==typeof e.read&&void 0===e.read.enabled&&(e.read.enabled=!0)}function s(e){"boolean"==typeof e.write?e.write={enabled:e.write}:"function"==typeof e.write?e.write={enabled:!0,writer:e.write}:e.write&&"object"==typeof e.write&&void 0===e.write.enabled&&(e.write.enabled=!0)}var c=n(369);function l(e,t){return d(e,"read",t)}function u(e,t){return d(e,"write",t)}function d(e,t,n){var r=e&&e.json;if(e&&e.json&&e.json.origins&&n){var i=e.json.origins[n.origin];i&&("any"===t||t in i)&&(r=i)}return r}function f(e){var t=function(e){return e.type?function(e){if(!e.type)return;for(var t=0,n=e.type;Array.isArray(n)&&!Object(r.o)(n);)n=n[0],t++;return{type:n,ndimArray:t}}(e):function(e){if(!e.types)return;for(var t=0,n=e.types;Array.isArray(n);)n=n[0],t++;return{types:n,ndimArray:t}}(e)}(e);if(e.json.origins)for(var n in e.json.origins){var a=e.json.origins[n];Object(i.a)(t,a,!1),Object(c.a)(t,a)}Object(i.a)(t,e.json,!0),Object(c.a)(t,e.json)}var p={processPrototypePropertyMetadata:function(e,t){var n;(function(e){if(e.json||(e.json={}),o(e.json),s(e.json),a(e.json),e.json.origins)for(var t in e.json.origins)o(e.json.origins[t]),s(e.json.origins[t]),a(e.json.origins[t]);return!0})(t)&&((n=t).json&&n.json.origins&&function(){var e=n.json.origins,t={"web-document":["web-scene","web-map"]};for(var r in t)e[r]&&function(){var n=e[r];t[r].forEach((function(t){e[t]=n})),delete e[r]}()}(),f(t))}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(23);function i(e,t,n){var i=Object(r.a)(Object(r.a)({params:{}},n),e);return i.params=t.reduce((function(t,n){return(e[n]||"boolean"===typeof e[n])&&(t[n]=e[n]),t}),i.params),["params","httpMethod","rawResponse","authentication","portal","fetch","maxUrlLength","headers"].reduce((function(e,t){return i[t]&&(e[t]=i[t]),e}),{})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return p})),n.d(t,"h",(function(){return h}));var r=n(18),i=n(44),a=n(43),o=n(113);function s(e,t){var n=[];e=e.replace(/\u2032/g,"'");var r=b(t);return o.a.dms_to_geog(r,1,[e],n)?new a.a(n[0][0],n[0][1],t||i.a.WGS84):null}function c(e,t,n){var r=[],s=v(n);if(-1===s)return console.warn("invalid conversionMode: ".concat(n)),null;var c=b(t);return o.c.mgrs_to_geog_extended(c,1,[e],s,r)?new a.a(r[0][0],r[0][1],t||i.a.WGS84):null}function l(e,t){var n=[];!t&&/\(.+27/.test(e)&&(t=i.a.GCS_NAD_1927);var r=b(t);return o.d.usng_to_geog(r,1,[e],n)?new a.a(n[0][0],n[0][1],t||i.a.WGS84):null}function u(e,t,n){var r=[],s=y(n);if(-1===s)return console.warn("invalid conversionMode: ".concat(n)),null;var c=b(t);return o.e.utm_to_geog(c,1,[e],s,r)?new a.a(r[0][0],r[0][1],t||i.a.WGS84):null}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[[e.x,e.y]],i=[],a=b(e.spatialReference),s=0;switch(t){case"dd":s=o.a.geog_to_dd(a,1,r,n,i);break;case"ddm":s=o.a.geog_to_ddm(a,1,r,n,i);break;case"dms":s=o.a.geog_to_dms(a,1,r,n,i);break;default:return console.warn("invalid format: ".concat(t)),null}return s?i[0]:null}function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=[[e.x,e.y]],a=[],s=b(e.spatialReference),c=v(t);return-1===c?(console.warn("invalid conversionMode: ".concat(t)),null):(r&&(c|=o.c.PE_MGRS_ADD_SPACES),o.c.geog_to_mgrs_extended(s,1,i,n,!1,c,a)?a[0]:null)}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[[e.x,e.y]],i=[],a=b(e.spatialReference);return o.d.geog_to_usng(a,1,r,t,!1,n,i)?i[0]:null}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[[e.x,e.y]],i=[],a=b(e.spatialReference),s=y(t);return-1===s?(console.warn("invalid conversionMode: ".concat(t)),null):(n&&(s|=o.e.PE_UTM_OPTS_ADD_SPACES),o.e.geog_to_utm(a,1,r,s,i)?i[0]:null)}function b(e){var t=null;if(e||(e=i.a.WGS84),e.wkid){if(!(t=o.f.geogcs(e.wkid)))throw new r.a("coordinate-formatter:invalid-spatial-reference","wkid is not valid")}else{if(!e.wkt)throw new r.a("coordinate-formatter:invalid-spatial-reference","wkid and wkt are missing");if(!(t=o.f.fromString(o.g.PE_TYPE_GEOGCS,e.wkt)))throw new r.a("coordinate-formatter:invalid-spatial-reference","wkt is not valid")}return t}function v(e){var t=-1;switch(e){case"automatic":t=o.c.PE_MGRS_STYLE_AUTO;break;case"new-180-in-zone-01":t=o.c.PE_MGRS_STYLE_NEW|o.c.PE_MGRS_180_ZONE_1_PLUS;break;case"new-180-in-zone-60":t=o.c.PE_MGRS_STYLE_NEW;break;case"old-180-in-zone-01":t=o.c.PE_MGRS_STYLE_OLD|o.c.PE_MGRS_180_ZONE_1_PLUS;break;case"old-180-in-zone-60":t=o.c.PE_MGRS_STYLE_OLD}return t}function y(e){var t=-1;switch(e){case"latitude-band-indicators":t=o.e.PE_UTM_OPTS_NONE;break;case"north-south-indicators":t=o.e.PE_UTM_OPTS_NS}return t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return De})),n.d(t,"c",(function(){return B})),n.d(t,"d",(function(){return w})),n.d(t,"e",(function(){return Le})),n.d(t,"f",(function(){return fe})),n.d(t,"g",(function(){return Fe})),n.d(t,"h",(function(){return Oe})),n.d(t,"i",(function(){return de})),n.d(t,"j",(function(){return z})),n.d(t,"k",(function(){return O})),n.d(t,"l",(function(){return ze})),n.d(t,"m",(function(){return y}));var r,i,a,o,s,c=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),l=function(e,t,n,r){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function o(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())}))},u=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},d=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},f=!1,p=!1,h=!1,b=!1,v=!1,y="undefined"!==typeof window?window:{},m=y.CSS,g=y.document||{head:{}},O={$flags$:0,$resourcesUrl$:"",jmp:function(e){return e()},raf:function(e){return requestAnimationFrame(e)},ael:function(e,t,n,r){return e.addEventListener(t,n,r)},rel:function(e,t,n,r){return e.removeEventListener(t,n,r)},ce:function(e,t){return new CustomEvent(e,t)}},j=(g.head.attachShadow+"").indexOf("[native")>-1,w=function(e){return Promise.resolve(e)},_=function(){try{return new CSSStyleSheet,"function"===typeof(new CSSStyleSheet).replace}catch(o){}return!1}(),k=function(e,t,n,r){n&&n.map((function(n){var r=n[0],i=n[1],a=n[2],o=S(e,r),s=x(t,a),c=T(r);O.ael(o,i,s,c),(t.$rmListeners$=t.$rmListeners$||[]).push((function(){return O.rel(o,i,s,c)}))}))},x=function(e,t){return function(n){try{256&e.$flags$?e.$lazyInstance$[t](n):(e.$queuedListeners$=e.$queuedListeners$||[]).push([t,n])}catch(r){Ge(r)}}},S=function(e,t){return 4&t?g:8&t?y:16&t?g.body:e},T=function(e){return 0!==(2&e)},E="s-id",C="sty-id",P="c-id",I="http://www.w3.org/1999/xlink",M=function(e,t){return void 0===t&&(t=""),function(){}},A=new WeakMap,R=function(e,t,n){var r=We.get(e);_&&n?(r=r||new CSSStyleSheet).replace(t):r=t,We.set(e,r)},L=function(e,t,n,r){var i=F(t),a=We.get(i);if(e=11===e.nodeType?e:g,a)if("string"===typeof a){e=e.head||e;var o=A.get(e),s=void 0;if(o||A.set(e,o=new Set),!o.has(i)){if(e.host&&(s=e.querySelector('[sty-id="'+i+'"]')))s.innerHTML=a;else{if(O.$cssShim$){var c=(s=O.$cssShim$.createHostStyle(r,i,a,!!(10&t.$flags$)))["s-sc"];c&&(i=c,o=null)}else(s=g.createElement("style")).innerHTML=a;e.insertBefore(s,e.querySelector("link"))}o&&o.add(i)}}else e.adoptedStyleSheets.includes(a)||(e.adoptedStyleSheets=d(d([],e.adoptedStyleSheets),[a]));return i},F=function(e,t){return"sc-"+e.$tagName$},D=function(e){return e.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{")},N={},V=function(e){return"object"===(e=typeof e)||"function"===e},z=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=null,a=null,o=null,s=!1,c=!1,l=[],u=function t(n){for(var r=0;r<n.length;r++)i=n[r],Array.isArray(i)?t(i):null!=i&&"boolean"!==typeof i&&((s="function"!==typeof e&&!V(i))&&(i=String(i)),s&&c?l[l.length-1].$text$+=i:l.push(s?U(null,i):i),c=s)};if(u(n),t){t.key&&(a=t.key),t.name&&(o=t.name);var d=t.className||t.class;d&&(t.class="object"!==typeof d?d:Object.keys(d).filter((function(e){return d[e]})).join(" "))}if("function"===typeof e)return e(null===t?{}:t,l,G);var f=U(e,null);return f.$attrs$=t,l.length>0&&(f.$children$=l),f.$key$=a,f.$name$=o,f},U=function(e,t){var n={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null};return n},B={},G={forEach:function(e,t){return e.map(q).forEach(t)},map:function(e,t){return e.map(q).map(t).map(H)}},q=function(e){return{vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}},H=function(e){if("function"===typeof e.vtag){var t=Object.assign({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),z.apply(void 0,d([e.vtag,t],e.vchildren||[]))}var n=U(e.vtag,e.vtext);return n.$attrs$=e.vattrs,n.$children$=e.vchildren,n.$key$=e.vkey,n.$name$=e.vname,n},W=function(e,t,n,r,i,a){if(n!==r){var o=Be(e,t),s=t.toLowerCase();if("class"===t){var c=e.classList,l=J(n),u=J(r);c.remove.apply(c,l.filter((function(e){return e&&!u.includes(e)}))),c.add.apply(c,u.filter((function(e){return e&&!l.includes(e)})))}else if("style"===t){for(var d in n)r&&null!=r[d]||(d.includes("-")?e.style.removeProperty(d):e.style[d]="");for(var d in r)n&&r[d]===n[d]||(d.includes("-")?e.style.setProperty(d,r[d]):e.style[d]=r[d])}else if("key"===t);else if("ref"===t)r&&r(e);else if(o||"o"!==t[0]||"n"!==t[1]){var f=V(r);if((o||f&&null!==r)&&!i)try{if(e.tagName.includes("-"))e[t]=r;else{var p=null==r?"":r;"list"===t?o=!1:null!=n&&e[t]==p||(e[t]=p)}}catch(b){}var h=!1;s!==(s=s.replace(/^xlink\:?/,""))&&(t=s,h=!0),null==r||!1===r?!1===r&&""!==e.getAttribute(t)||(h?e.removeAttributeNS(I,t):e.removeAttribute(t)):(!o||4&a||i)&&!f&&(r=!0===r?"":r,h?e.setAttributeNS(I,t,r):e.setAttribute(t,r))}else t="-"===t[2]?t.slice(3):Be(y,s)?s.slice(2):s[2]+t.slice(3),n&&O.rel(e,t,n,!1),r&&O.ael(e,t,r,!1)}},$=/\s/,J=function(e){return e?e.split($):[]},Y=function(e,t,n,r){var i=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,a=e&&e.$attrs$||N,o=t.$attrs$||N;for(r in a)r in o||W(i,r,a[r],void 0,n,t.$flags$);for(r in o)W(i,r,a[r],o[r],n,t.$flags$)},K=function e(t,n,o,s){var c,l,u,d=n.$children$[o],p=0;if(f||(h=!0,"slot"===d.$tag$&&(r&&s.classList.add(r+"-s"),d.$flags$|=d.$children$?2:1)),null!==d.$text$)c=d.$elm$=g.createTextNode(d.$text$);else if(1&d.$flags$)c=d.$elm$=g.createTextNode("");else{if(b||(b="svg"===d.$tag$),c=d.$elm$=g.createElementNS(b?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&d.$flags$?"slot-fb":d.$tag$),b&&"foreignObject"===d.$tag$&&(b=!1),Y(null,d,b),function(e){return null!=e}(r)&&c["s-si"]!==r&&c.classList.add(c["s-si"]=r),d.$children$)for(p=0;p<d.$children$.length;++p)(l=e(t,d,p,c))&&c.appendChild(l);"svg"===d.$tag$?b=!1:"foreignObject"===c.tagName&&(b=!0)}return c["s-hn"]=a,3&d.$flags$&&(c["s-sr"]=!0,c["s-cr"]=i,c["s-sn"]=d.$name$||"",(u=t&&t.$children$&&t.$children$[o])&&u.$tag$===d.$tag$&&t.$elm$&&Z(t.$elm$,!1)),c},Z=function e(t,n){O.$flags$|=1;for(var r=t.childNodes,i=r.length-1;i>=0;i--){var o=r[i];o["s-hn"]!==a&&o["s-ol"]&&(re(o).insertBefore(o,ne(o)),o["s-ol"].remove(),o["s-ol"]=void 0,h=!0),n&&e(o,n)}O.$flags$&=-2},X=function(e,t,n,r,i,o){var s,c=e["s-cr"]&&e["s-cr"].parentNode||e;for(c.shadowRoot&&c.tagName===a&&(c=c.shadowRoot);i<=o;++i)r[i]&&(s=K(null,n,i,e))&&(r[i].$elm$=s,c.insertBefore(s,ne(t)))},Q=function(e,t,n,r,i){for(;t<=n;++t)(r=e[t])&&(i=r.$elm$,le(r),p=!0,i["s-ol"]?i["s-ol"].remove():Z(i,!0),i.remove())},ee=function(e,t,n,r){for(var i,a,o=0,s=0,c=0,l=0,u=t.length-1,d=t[0],f=t[u],p=r.length-1,h=r[0],b=r[p];o<=u&&s<=p;)if(null==d)d=t[++o];else if(null==f)f=t[--u];else if(null==h)h=r[++s];else if(null==b)b=r[--p];else if(te(d,h))ie(d,h),d=t[++o],h=r[++s];else if(te(f,b))ie(f,b),f=t[--u],b=r[--p];else if(te(d,b))"slot"!==d.$tag$&&"slot"!==b.$tag$||Z(d.$elm$.parentNode,!1),ie(d,b),e.insertBefore(d.$elm$,f.$elm$.nextSibling),d=t[++o],b=r[--p];else if(te(f,h))"slot"!==d.$tag$&&"slot"!==b.$tag$||Z(f.$elm$.parentNode,!1),ie(f,h),e.insertBefore(f.$elm$,d.$elm$),f=t[--u],h=r[++s];else{for(c=-1,l=o;l<=u;++l)if(t[l]&&null!==t[l].$key$&&t[l].$key$===h.$key$){c=l;break}c>=0?((a=t[c]).$tag$!==h.$tag$?i=K(t&&t[s],n,c,e):(ie(a,h),t[c]=void 0,i=a.$elm$),h=r[++s]):(i=K(t&&t[s],n,s,e),h=r[++s]),i&&re(d.$elm$).insertBefore(i,ne(d.$elm$))}o>u?X(e,null==r[p+1]?null:r[p+1].$elm$,n,r,s,p):s>p&&Q(t,o,u)},te=function(e,t){return e.$tag$===t.$tag$&&("slot"===e.$tag$?e.$name$===t.$name$:e.$key$===t.$key$)},ne=function(e){return e&&e["s-ol"]||e},re=function(e){return(e["s-ol"]?e["s-ol"]:e).parentNode},ie=function(e,t){var n,r=t.$elm$=e.$elm$,i=e.$children$,a=t.$children$,o=t.$tag$,s=t.$text$;null===s?(b="svg"===o||"foreignObject"!==o&&b,"slot"===o||Y(e,t,b),null!==i&&null!==a?ee(r,i,t,a):null!==a?(null!==e.$text$&&(r.textContent=""),X(r,null,t,a,0,a.length-1)):null!==i&&Q(i,0,i.length-1),b&&"svg"===o&&(b=!1)):(n=r["s-cr"])?n.parentNode.textContent=s:e.$text$!==s&&(r.data=s)},ae=function e(t){var n,r,i,a,o,s,c=t.childNodes;for(r=0,i=c.length;r<i;r++)if(1===(n=c[r]).nodeType){if(n["s-sr"])for(o=n["s-sn"],n.hidden=!1,a=0;a<i;a++)if(s=c[a].nodeType,c[a]["s-hn"]!==n["s-hn"]||""!==o){if(1===s&&o===c[a].getAttribute("slot")){n.hidden=!0;break}}else if(1===s||3===s&&""!==c[a].textContent.trim()){n.hidden=!0;break}e(n)}},oe=[],se=function e(t){for(var n,r,i,a,o,s,c=0,l=t.childNodes,u=l.length;c<u;c++){if((n=l[c])["s-sr"]&&(r=n["s-cr"])&&r.parentNode)for(i=r.parentNode.childNodes,a=n["s-sn"],s=i.length-1;s>=0;s--)(r=i[s])["s-cn"]||r["s-nr"]||r["s-hn"]===n["s-hn"]||(ce(r,a)?(o=oe.find((function(e){return e.$nodeToRelocate$===r})),p=!0,r["s-sn"]=r["s-sn"]||a,o?o.$slotRefNode$=n:oe.push({$slotRefNode$:n,$nodeToRelocate$:r}),r["s-sr"]&&oe.map((function(e){ce(e.$nodeToRelocate$,r["s-sn"])&&(o=oe.find((function(e){return e.$nodeToRelocate$===r})))&&!e.$slotRefNode$&&(e.$slotRefNode$=o.$slotRefNode$)}))):oe.some((function(e){return e.$nodeToRelocate$===r}))||oe.push({$nodeToRelocate$:r}));1===n.nodeType&&e(n)}},ce=function(e,t){return 1===e.nodeType?null===e.getAttribute("slot")&&""===t||e.getAttribute("slot")===t:e["s-sn"]===t||""===t},le=function e(t){t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(e)},ue=function(e,t){var n=e.$hostElement$,o=e.$cmpMeta$,s=e.$vnode$||U(null,null),c=function(e){return e&&e.$tag$===B}(t)?t:z(null,null,t);if(a=n.tagName,o.$attrsToReflect$&&(c.$attrs$=c.$attrs$||{},o.$attrsToReflect$.map((function(e){var t=e[0],r=e[1];return c.$attrs$[r]=n[t]}))),c.$tag$=null,c.$flags$|=4,e.$vnode$=c,c.$elm$=s.$elm$=n.shadowRoot||n,r=n["s-sc"],i=n["s-cr"],f=j&&0!==(1&o.$flags$),p=!1,ie(s,c),O.$flags$|=1,h){se(c.$elm$);for(var l=void 0,u=void 0,d=void 0,b=void 0,v=void 0,y=void 0,m=0;m<oe.length;m++)(u=(l=oe[m]).$nodeToRelocate$)["s-ol"]||((d=g.createTextNode(""))["s-nr"]=u,u.parentNode.insertBefore(u["s-ol"]=d,u));for(m=0;m<oe.length;m++)if(u=(l=oe[m]).$nodeToRelocate$,l.$slotRefNode$){for(b=l.$slotRefNode$.parentNode,v=l.$slotRefNode$.nextSibling,d=u["s-ol"];d=d.previousSibling;)if((y=d["s-nr"])&&y["s-sn"]===u["s-sn"]&&b===y.parentNode&&(!(y=y.nextSibling)||!y["s-nr"])){v=y;break}(!v&&b!==u.parentNode||u.nextSibling!==v)&&u!==v&&(!u["s-hn"]&&u["s-ol"]&&(u["s-hn"]=u["s-ol"].parentNode.nodeName),b.insertBefore(u,v))}else 1===u.nodeType&&(u.hidden=!0)}p&&ae(c.$elm$),O.$flags$&=-2,oe.length=0},de=function(e){return Ve(e).$hostElement$},fe=function(e,t,n){var r=de(e);return{emit:function(e){return pe(r,t,{bubbles:!!(4&n),composed:!!(2&n),cancelable:!!(1&n),detail:e})}}},pe=function(e,t,n){var r=O.ce(t,n);return e.dispatchEvent(r),r},he=function(e,t){t&&!e.$onRenderResolve$&&t["s-p"]&&t["s-p"].push(new Promise((function(t){return e.$onRenderResolve$=t})))},be=function(e,t){if(e.$flags$|=16,!(4&e.$flags$)){he(e,e.$ancestorComponent$);return Xe((function(){return ve(e,t)}))}e.$flags$|=512},ve=function(e,t){var n,r=M(0,e.$cmpMeta$.$tagName$),i=e.$lazyInstance$;return t&&(e.$flags$|=256,e.$queuedListeners$&&(e.$queuedListeners$.map((function(e){var t=e[0],n=e[1];return we(i,t,n)})),e.$queuedListeners$=null),n=we(i,"componentWillLoad")),n=_e(n,(function(){return we(i,"componentWillRender")})),r(),_e(n,(function(){return ye(e,i,t)}))},ye=function(e,t,n){return l(void 0,void 0,void 0,(function(){var r,i,a,o,s,c;return u(this,(function(l){return r=e.$hostElement$,i=M(0,e.$cmpMeta$.$tagName$),a=r["s-rc"],n&&function(e){var t=e.$cmpMeta$,n=e.$hostElement$,r=t.$flags$,i=M(0,t.$tagName$),a=L(j&&n.shadowRoot?n.shadowRoot:n.getRootNode(),t,e.$modeName$,n);10&r&&(n["s-sc"]=a,n.classList.add(a+"-h"),2&r&&n.classList.add(a+"-s")),i()}(e),o=M(0,e.$cmpMeta$.$tagName$),me(e,t),O.$cssShim$&&O.$cssShim$.updateHost(r),a&&(a.map((function(e){return e()})),r["s-rc"]=void 0),o(),i(),s=r["s-p"],c=function(){return ge(e)},0===s.length?c():(Promise.all(s).then(c),e.$flags$|=4,s.length=0),[2]}))}))},me=function(e,t,n){try{t=t.render(),e.$flags$&=-17,e.$flags$|=2,ue(e,t)}catch(r){Ge(r,e.$hostElement$)}return null},ge=function(e){var t=e.$cmpMeta$.$tagName$,n=e.$hostElement$,r=M(0,t),i=e.$lazyInstance$,a=e.$ancestorComponent$;we(i,"componentDidRender"),64&e.$flags$?(we(i,"componentDidUpdate"),r()):(e.$flags$|=64,ke(n),we(i,"componentDidLoad"),r(),e.$onReadyResolve$(n),a||je()),e.$onInstanceResolve$(n),e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),512&e.$flags$&&Ze((function(){return be(e,!1)})),e.$flags$&=-517},Oe=function(e){var t=Ve(e),n=t.$hostElement$.isConnected;return n&&2===(18&t.$flags$)&&be(t,!1),n},je=function(e){ke(g.documentElement),Ze((function(){return pe(y,"appload",{detail:{namespace:"calcite"}})}))},we=function(e,t,n){if(e&&e[t])try{return e[t](n)}catch(r){Ge(r)}},_e=function(e,t){return e&&e.then?e.then(t):t()},ke=function(e){return e.setAttribute("calcite-hydrated","")},xe=function e(t,n,r,i,a,o,s){var c,l,u,d;if(1===o.nodeType){for((c=o.getAttribute(P))&&((l=c.split("."))[0]!==s&&"0"!==l[0]||(u={$flags$:0,$hostId$:l[0],$nodeId$:l[1],$depth$:l[2],$index$:l[3],$tag$:o.tagName.toLowerCase(),$elm$:o,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},n.push(u),o.removeAttribute(P),t.$children$||(t.$children$=[]),t.$children$[u.$index$]=u,t=u,i&&"0"===u.$depth$&&(i[u.$index$]=u.$elm$))),d=o.childNodes.length-1;d>=0;d--)e(t,n,r,i,a,o.childNodes[d],s);if(o.shadowRoot)for(d=o.shadowRoot.childNodes.length-1;d>=0;d--)e(t,n,r,i,a,o.shadowRoot.childNodes[d],s)}else if(8===o.nodeType)(l=o.nodeValue.split("."))[1]!==s&&"0"!==l[1]||(c=l[0],u={$flags$:0,$hostId$:l[1],$nodeId$:l[2],$depth$:l[3],$index$:l[4],$elm$:o,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===c?(u.$elm$=o.nextSibling,u.$elm$&&3===u.$elm$.nodeType&&(u.$text$=u.$elm$.textContent,n.push(u),o.remove(),t.$children$||(t.$children$=[]),t.$children$[u.$index$]=u,i&&"0"===u.$depth$&&(i[u.$index$]=u.$elm$))):u.$hostId$===s&&("s"===c?(u.$tag$="slot",l[5]?o["s-sn"]=u.$name$=l[5]:o["s-sn"]="",o["s-sr"]=!0,i&&(u.$elm$=g.createElement(u.$tag$),u.$name$&&u.$elm$.setAttribute("name",u.$name$),o.parentNode.insertBefore(u.$elm$,o),o.remove(),"0"===u.$depth$&&(i[u.$index$]=u.$elm$)),r.push(u),t.$children$||(t.$children$=[]),t.$children$[u.$index$]=u):"r"===c&&(i?o.remove():(a["s-cr"]=o,o["s-cn"]=!0))));else if(t&&"style"===t.$tag$){var f=U(null,o.textContent);f.$elm$=o,f.$index$="0",t.$children$=[f]}},Se=function e(t,n){if(1===t.nodeType){for(var r=0;r<t.childNodes.length;r++)e(t.childNodes[r],n);if(t.shadowRoot)for(r=0;r<t.shadowRoot.childNodes.length;r++)e(t.shadowRoot.childNodes[r],n)}else if(8===t.nodeType){var i=t.nodeValue.split(".");"o"===i[0]&&(n.set(i[1]+"."+i[2],t),t.nodeValue="",t["s-en"]=i[3])}},Te=function(e,t,n,r){var i=Ve(e),a=i.$hostElement$,o=i.$instanceValues$.get(t),s=i.$flags$,c=i.$lazyInstance$;if(n=function(e,t){return null==e||V(e)?e:4&t?"false"!==e&&(""===e||!!e):2&t?parseFloat(e):1&t?String(e):e}(n,r.$members$[t][0]),(!(8&s)||void 0===o)&&n!==o&&(i.$instanceValues$.set(t,n),c)){if(r.$watchers$&&128&s){var l=r.$watchers$[t];l&&l.map((function(e){try{c[e](n,o,t)}catch(r){Ge(r,a)}}))}if(2===(18&s)){if(c.componentShouldUpdate&&!1===c.componentShouldUpdate(n,o,t))return;be(i,!1)}}},Ee=function(e,t,n){if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);var r=Object.entries(t.$members$),i=e.prototype;if(r.map((function(e){var r=e[0],a=e[1][0];31&a||2&n&&32&a?Object.defineProperty(i,r,{get:function(){return function(e,t){return Ve(e).$instanceValues$.get(t)}(this,r)},set:function(e){Te(this,r,e,t)},configurable:!0,enumerable:!0}):1&n&&64&a&&Object.defineProperty(i,r,{value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Ve(this);return n.$onInstancePromise$.then((function(){var t;return(t=n.$lazyInstance$)[r].apply(t,e)}))}})})),1&n){var a=new Map;i.attributeChangedCallback=function(e,t,n){var r=this;O.jmp((function(){var t=a.get(e);r[t]=(null!==n||"boolean"!==typeof r[t])&&n}))},e.observedAttributes=r.filter((function(e){e[0];return 15&e[1][0]})).map((function(e){var n=e[0],r=e[1],i=r[1]||n;return a.set(i,n),512&r[0]&&t.$attrsToReflect$.push([n,i]),i}))}}return e},Ce=function(e){we(e,"connectedCallback")},Pe=function(e){if(0===(1&O.$flags$)){var t=Ve(e),r=t.$cmpMeta$,i=M(0,r.$tagName$);if(1&t.$flags$)k(e,t,r.$listeners$),Ce(t.$lazyInstance$);else{t.$flags$|=1;var a;if(a=e.getAttribute(E)){if(j&&1&r.$flags$){var o=L(e.shadowRoot,r);e.classList.remove(o+"-h",o+"-s")}!function(e,t,n,r){var i=M(0,t),a=e.shadowRoot,o=[],s=a?[]:null,c=r.$vnode$=U(t,null);O.$orgLocNodes$||Se(g.body,O.$orgLocNodes$=new Map),e["s-id"]=n,e.removeAttribute(E),xe(c,o,[],s,e,e,n),o.map((function(e){var n=e.$hostId$+"."+e.$nodeId$,r=O.$orgLocNodes$.get(n),i=e.$elm$;r&&j&&""===r["s-en"]&&r.parentNode.insertBefore(i,r.nextSibling),a||(i["s-hn"]=t,r&&(i["s-ol"]=r,i["s-ol"]["s-nr"]=i)),O.$orgLocNodes$.delete(n)})),a&&s.map((function(e){e&&a.appendChild(e)})),i()}(e,r.$tagName$,a,t)}a||12&r.$flags$&&Ie(e);for(var s=e;s=s.parentNode||s.host;)if(1===s.nodeType&&s.hasAttribute("s-id")&&s["s-p"]||s["s-p"]){he(t,t.$ancestorComponent$=s);break}r.$members$&&Object.entries(r.$members$).map((function(t){var n=t[0];if(31&t[1][0]&&e.hasOwnProperty(n)){var r=e[n];delete e[n],e[n]=r}})),function(e,t,r,i,a){l(void 0,void 0,void 0,(function(){var e,i,o,s,c,l,d;return u(this,(function(u){switch(u.label){case 0:return 0!==(32&t.$flags$)?[3,5]:(t.$flags$|=32,(a=He(r)).then?(e=function(){},[4,a]):[3,2]);case 1:a=u.sent(),e(),u.label=2;case 2:a.isProxied||(r.$watchers$=a.watchers,Ee(a,r,2),a.isProxied=!0),i=M(0,r.$tagName$),t.$flags$|=8;try{new a(t)}catch(f){Ge(f)}return t.$flags$&=-9,t.$flags$|=128,i(),Ce(t.$lazyInstance$),a.style?(o=a.style,s=F(r),We.has(s)?[3,5]:(c=M(0,r.$tagName$),8&r.$flags$?[4,n.e(244).then(n.bind(null,979)).then((function(e){return e.scopeCss(o,s,!1)}))]:[3,4])):[3,5];case 3:o=u.sent(),u.label=4;case 4:R(s,o,!!(1&r.$flags$)),c(),u.label=5;case 5:return l=t.$ancestorComponent$,d=function(){return be(t,!0)},l&&l["s-rc"]?l["s-rc"].push(d):d(),[2]}}))}))}(0,t,r)}i()}},Ie=function(e){var t=e["s-cr"]=g.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},Me=function(e){return e["s-sn"]||1===e.nodeType&&e.getAttribute("slot")||""},Ae=function e(t,n){for(var r,i=0;i<t.length;i++){if((r=t[i])["s-sr"]&&r["s-sn"]===n)return r;if(r=e(r.childNodes,n))return r}return null},Re=function(e,t){for(var n=[e];(e=e.nextSibling)&&e["s-sn"]===t;)n.push(e);return n},Le=function(e,t){void 0===t&&(t={});var n,r=M(),i=[],a=t.exclude||[],o=y.customElements,s=g.head,l=s.querySelector("meta[charset]"),u=g.createElement("style"),d=[],f=g.querySelectorAll("[sty-id]"),p=!0,h=0;for(Object.assign(O,t),O.$resourcesUrl$=new URL(t.resourcesUrl||"./",g.baseURI).href,O.$flags$|=2;h<f.length;h++)R(f[h].getAttribute(C),D(f[h].innerHTML),!0);e.map((function(e){return e[1].map((function(t){var r={$flags$:t[0],$tagName$:t[1],$members$:t[2],$listeners$:t[3]};r.$members$=t[2],r.$listeners$=t[3],r.$attrsToReflect$=[],r.$watchers$={},!j&&1&r.$flags$&&(r.$flags$|=8);var s=r.$tagName$,l=function(e){function t(t){var n=e.call(this,t)||this;return Ue(t=n,r),1&r.$flags$&&(j?t.attachShadow({mode:"open"}):"shadowRoot"in t||(t.shadowRoot=t)),function(e,t){var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.item=function(e){return this[e]},t}(Array);if(8&t.$flags$){var r=e.__lookupGetter__("childNodes");Object.defineProperty(e,"children",{get:function(){return this.childNodes.map((function(e){return 1===e.nodeType}))}}),Object.defineProperty(e,"childElementCount",{get:function(){return e.children.length}}),Object.defineProperty(e,"childNodes",{get:function(){var e=r.call(this);if(0===(1&O.$flags$)&&2&Ve(this).$flags$){for(var t=new n,i=0;i<e.length;i++){var a=e[i]["s-nr"];a&&t.push(a)}return t}return n.from(e)}})}}(t,r),n}return c(t,e),t.prototype.connectedCallback=function(){var e=this;n&&(clearTimeout(n),n=null),p?d.push(this):O.jmp((function(){return Pe(e)}))},t.prototype.disconnectedCallback=function(){var e=this;O.jmp((function(){return function(e){if(0===(1&O.$flags$)){var t=Ve(e),n=t.$lazyInstance$;t.$rmListeners$&&(t.$rmListeners$.map((function(e){return e()})),t.$rmListeners$=void 0),O.$cssShim$&&O.$cssShim$.removeHost(e),we(n,"disconnectedCallback")}}(e)}))},t.prototype.componentOnReady=function(){return Ve(this).$onReadyPromise$},t}(HTMLElement);!function(e){e.__appendChild=e.appendChild,e.appendChild=function(e){var t=e["s-sn"]=Me(e),n=Ae(this.childNodes,t);if(n){var r=Re(n,t),i=r[r.length-1];return i.parentNode.insertBefore(e,i.nextSibling)}return this.__appendChild(e)}}(l.prototype),r.$lazyBundleId$=e[0],a.includes(s)||o.get(s)||(i.push(s),o.define(s,Ee(l,r,1)))}))})),u.innerHTML=i+"{visibility:hidden}[calcite-hydrated]{visibility:inherit}",u.setAttribute("data-styles",""),s.insertBefore(u,l?l.nextSibling:s.firstChild),p=!1,d.length?d.map((function(e){return e.connectedCallback()})):O.jmp((function(){return n=setTimeout(je,30)})),r()},Fe=function(e){var t=new URL(e,O.$resourcesUrl$);return t.origin!==y.location.origin?t.href:t.pathname},De=function(e,t){return t},Ne=new WeakMap,Ve=function(e){return Ne.get(e)},ze=function(e,t){return Ne.set(t.$lazyInstance$=e,t)},Ue=function(e,t){var n={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return n.$onInstancePromise$=new Promise((function(e){return n.$onInstanceResolve$=e})),n.$onReadyPromise$=new Promise((function(e){return n.$onReadyResolve$=e})),e["s-p"]=[],e["s-rc"]=[],k(e,n,t.$listeners$),Ne.set(e,n)},Be=function(e,t){return t in e},Ge=function(e,t){return(0,console.error)(e,t)},qe=new Map,He=function(e,t,r){var i=e.$tagName$.replace(/-/g,"_"),a=e.$lazyBundleId$,o=qe.get(a);return o?o[i]:n(901)("./"+a+".entry.js").then((function(e){return qe.set(a,e),e[i]}),Ge)},We=new Map,$e=[],Je=[],Ye=function(e){for(var t=0;t<e.length;t++)try{e[t](performance.now())}catch(n){Ge(n)}e.length=0},Ke=function e(){Ye($e),Ye(Je),(v=$e.length>0)&&O.raf(e)},Ze=function(e){return w().then(e)},Xe=(o=Je,s=!0,function(e){o.push(e),v||(v=!0,s&&4&O.$flags$?Ze(Ke):O.raf(Ke))})},function(e,t,n){"use strict";function r(){var e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function i(e){var t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));Object.freeze({__proto__:null,create:r,clone:i,fromValues:function(e,t,n,r,i,a,o,s,c){var l=new Float32Array(9);return l[0]=e,l[1]=t,l[2]=n,l[3]=r,l[4]=i,l[5]=a,l[6]=o,l[7]=s,l[8]=c,l},createView:function(e,t){return new Float32Array(e,t,9)}})},function(e,t,n){"use strict";var r,i,a=n(27),o=n(11),s=n(83),c=n(57);(i=r||(r={})).length=function(e,t){var n=e[t],r=e[t+1],i=e[t+2];return Math.sqrt(n*n+r*r+i*i)},i.normalize=function(e,t){var n=e[t],r=e[t+1],i=e[t+2],a=1/Math.sqrt(n*n+r*r+i*i);e[t]*=a,e[t+1]*=a,e[t+2]*=a},i.scale=function(e,t,n){e[t]*=n,e[t+1]*=n,e[t+2]*=n},i.add=function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t;(i=i||e)[a]=e[t]+n[r],i[a+1]=e[t+1]+n[r+1],i[a+2]=e[t+2]+n[r+2]},i.subtract=function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t;(i=i||e)[a]=e[t]-n[r],i[a+1]=e[t+1]-n[r+1],i[a+2]=e[t+2]-n[r+2]};var l,u,d,f,p=n(86),h=n(241),b=n(169),v=r;!function(e){for(var t=.5,n=[[-t,-t,t],[t,-t,t],[t,t,t],[-t,t,t],[-t,-t,-t],[t,-t,-t],[t,t,-t],[-t,t,-t]],r=[0,0,1,-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1],i=[0,0,1,0,1,1,0,1],a=new Uint16Array([0,1,2,2,3,0,4,0,3,3,7,4,1,5,6,6,2,1,1,0,4,4,5,1,3,2,6,6,7,3,5,4,7,7,6,5]),o=new Uint16Array(36),s=0;s<6;s++)for(var c=0;c<6;c++)o[6*s+c]=s;for(var l=new Uint16Array(36),u=0;u<6;u++)l[6*u+0]=0,l[6*u+1]=1,l[6*u+2]=2,l[6*u+3]=2,l[6*u+4]=3,l[6*u+5]=0;e.createGeometry=function(e){Array.isArray(e)||(e=[e,e,e]);for(var t=new Array(24),s=0;s<8;s++)t[3*s]=n[s][0]*e[0],t[3*s+1]=n[s][1]*e[1],t[3*s+2]=n[s][2]*e[2];return new b.a([["position",{size:3,data:t,exclusive:!0}],["normal",{size:3,data:r}],["uv0",{size:2,data:i}]],[["position",a],["normal",o],["uv0",l]])}}(l||(l={})),function(e){var t=.5,n=[[-t,0,-t],[t,0,-t],[t,0,t],[-t,0,t],[0,-t,0],[0,t,0]],r=[0,1,-1,1,1,0,0,1,1,-1,1,0,0,-1,-1,1,-1,0,0,-1,1,-1,-1,0],i=new Uint16Array([5,1,0,5,2,1,5,3,2,5,0,3,4,0,1,4,1,2,4,2,3,4,3,0]),a=new Uint16Array([0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7]);e.createGeometry=function(e){Array.isArray(e)||(e=[e,e,e]);for(var t=new Array(18),o=0;o<6;o++)t[3*o]=n[o][0]*e[0],t[3*o+1]=n[o][1]*e[1],t[3*o+2]=n[o][2]*e[2];return new b.a([["position",{size:3,data:t,exclusive:!0}],["normal",{size:3,data:r}]],[["position",i],["normal",a]])}}(u||(u={})),function(e){var t=.5,n=Object(s.c)(-t,0,-t),r=Object(s.c)(t,0,-t),i=Object(s.c)(0,0,t),a=Object(s.c)(0,.5,0),c=Object(s.b)(),l=Object(s.b)(),u=Object(s.b)(),d=Object(s.b)(),f=Object(s.b)();Object(o.i)(c,n,a),Object(o.i)(l,n,r),Object(o.f)(u,c,l),Object(o.q)(u,u),Object(o.i)(c,r,a),Object(o.i)(l,r,i),Object(o.f)(d,c,l),Object(o.q)(d,d),Object(o.i)(c,i,a),Object(o.i)(l,i,n),Object(o.f)(f,c,l),Object(o.q)(f,f);var p=[n,r,i,a],h=[0,-1,0,u[0],u[1],u[2],d[0],d[1],d[2],f[0],f[1],f[2]],v=[0,1,2,3,1,0,3,2,1,3,0,2],y=[0,0,0,1,1,1,2,2,2,3,3,3];e.createGeometry=function(e){Array.isArray(e)||(e=[e,e,e]);for(var t=new Array(12),n=0;n<4;n++)t[3*n]=p[n][0]*e[0],t[3*n+1]=p[n][1]*e[1],t[3*n+2]=p[n][2]*e[2];return new b.a([["position",{size:3,data:t,exclusive:!0}],["normal",{size:3,data:h}]],[["position",new Uint16Array(v)],["normal",new Uint16Array(y)]])}}(d||(d={})),function(e){e.createBoxGeometry=l.createGeometry,e.createDiamondGeometry=u.createGeometry,e.createTetrahedronGeometry=d.createGeometry,e.createSphereGeometry=function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{uv:!0},i=-Math.PI,a=2*Math.PI,o=-Math.PI/2,s=Math.PI,c=Math.max(3,Math.floor(t)),l=Math.max(2,Math.floor(n)),u=(c+1)*(l+1),d=new Float32Array(3*u),f=new Float32Array(3*u),p=new Float32Array(2*u),h=[],v=0,y=0;y<=l;y++){for(var m=[],g=y/l,O=o+g*s,j=Math.cos(O),w=0;w<=c;w++){var _=w/c,k=i+_*a,x=Math.cos(k)*j,S=Math.sin(O),T=-Math.sin(k)*j;d[3*v]=x*e,d[3*v+1]=S*e,d[3*v+2]=T*e,f[3*v]=x,f[3*v+1]=S,f[3*v+2]=T,p[2*v]=_,p[2*v+1]=g,m.push(v),++v}h.push(m)}var E=new Uint32Array(2*c*(l-1)*3);v=0;for(var C=0;C<l;C++)for(var P=0;P<c;P++){var I=h[C][P],M=h[C][P+1],A=h[C+1][P+1],R=h[C+1][P];0===C?(E[v++]=I,E[v++]=A,E[v++]=R):C===l-1?(E[v++]=I,E[v++]=M,E[v++]=A):(E[v++]=I,E[v++]=M,E[v++]=A,E[v++]=A,E[v++]=R,E[v++]=I)}var L=[["position",E],["normal",E]],F=[["position",{size:3,data:d,exclusive:!0}],["normal",{size:3,data:f,exclusive:!0}]];return r.uv&&(F.push(["uv0",{size:2,data:p,exclusive:!0}]),L.push(["uv0",E])),r.offset&&(L[0][0]="offset",F[0][0]="offset",L.push(["position",new Uint32Array(E.length)]),F.push(["position",{size:3,data:Float64Array.from(r.offset),exclusive:!0}])),new b.a(F,L)},e.createPolySphereGeometry=function(e,t,n){var r,i,a=e;if(n)r=[0,-1,0,1,0,0,0,0,1,-1,0,0,0,0,-1,0,1,0],i=new Uint32Array([0,1,2,0,2,3,0,3,4,0,4,1,1,5,2,2,5,3,3,5,4,4,5,1]);else{var o=a*(1+Math.sqrt(5))/2;r=[-a,o,0,a,o,0,-a,-o,0,a,-o,0,0,-a,o,0,a,o,0,-a,-o,0,a,-o,o,0,-a,o,0,a,-o,0,-a,-o,0,a],i=new Uint32Array([0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1])}for(var s=0;s<r.length;s+=3)v.scale(r,s,e/v.length(r,s));var c={};function l(t,n){var i;t>n&&(t=(i=[n,t])[0],n=i[1]);var a=t.toString()+"."+n.toString();if(c[a])return c[a];var o=r.length;return r.length+=3,v.add(r,3*t,r,3*n,r,o),v.scale(r,o,e/v.length(r,o)),o/=3,c[a]=o,o}for(var u=0;u<t;u++){for(var d=i.length,f=new Uint32Array(4*d),p=0;p<d;p+=3){var h=i[p],y=i[p+1],m=i[p+2],g=l(h,y),O=l(y,m),j=l(m,h),w=4*p;f[w]=h,f[w+1]=g,f[w+2]=j,f[w+3]=y,f[w+4]=O,f[w+5]=g,f[w+6]=m,f[w+7]=j,f[w+8]=O,f[w+9]=g,f[w+10]=O,f[w+11]=j}i=f,c={}}for(var _=new Float32Array(r),k=0;k<_.length;k+=3)v.normalize(_,k);var x=[["position",i],["normal",i]],S=[["position",{size:3,data:new Float32Array(r),exclusive:!0}],["normal",{size:3,data:_,exclusive:!0}]];return new b.a(S,x)},e.createPointGeometry=function(e,t,n,r,i,a,o){var s=t?[t[0],t[1],t[2]]:[0,0,0],c=e?[e[0],e[1],e[2]]:[0,0,1];a=a||[0,0];var l=n?[255*n[0],255*n[1],255*n[2],n.length>3?255*n[3]:255]:[255,255,255,255],u=null!=r&&2===r.length?r:[1,1],d=[["position",{size:3,data:s,exclusive:!0}],["normal",{size:3,data:c,exclusive:!0}],["uv0",{size:a.length,data:a}],["color",{size:4,data:l,exclusive:!0}],["size",{size:2,data:u}]];if(null!=i){var f=new Float32Array([i[0],i[1],i[2],i[3]]);d.push(["auxpos1",{size:4,data:f}])}if(null!=o){var p=new Float32Array([o[0],o[1],o[2],o[3]]);d.push(["auxpos2",{size:4,data:p}])}return new b.a(d,null,1)},e.updatePointGeometry=function(e,t,n,r,i,a,o,s){if(null!=e){var c=s.getMutableAttribute("normal").data;c[0]=e[0],c[1]=e[1],c[2]=e[2]}if(null!=t){var l=s.getMutableAttribute("position").data;l[0]=t[0],l[1]=t[1],l[2]=t[2]}if(null!=n){var u=s.getMutableAttribute("color").data;u[0]=n[0],u[1]=n[1],u[2]=n[2],u[3]=n[3]}if(null!=r){var d=s.getMutableAttribute("size").data;d[0]=r[0],d[1]=r[1]}if(null!=i){var f=s.getMutableAttribute("auxpos1").data;f[0]=i[0],f[1]=i[1],f[2]=i[2],f[3]=i[3]}if(null!=a){var p=s.getMutableAttribute("uv0").data;p[0]=a[0],p[1]=a[1]}if(null!=o){var h=s.getMutableAttribute("auxpos2").data;h[0]=o[0],h[1]=o[1],h[2]=o[2],h[3]=o[3]}},e.createPointArrayGeometry=function(e,t){for(var n=new Float32Array(3*e.length),r=new Float32Array(t?3*e.length:3),i=new Uint32Array(e.length),a=new Uint32Array(e.length),o=0;o<e.length;o++)n[3*o]=e[o][0],n[3*o+1]=e[o][1],n[3*o+2]=e[o][2],t&&(r[3*o]=t[o][0],r[3*o+1]=t[o][1],r[3*o+2]=t[o][2]),i[o]=o,a[o]=0;return t||(r[0]=0,r[1]=1,r[2]=0),new b.a([["position",{size:3,data:n,exclusive:!0}],["normal",{size:3,data:r,exclusive:!0}],["uv0",{size:2,data:[0,0],exclusive:!0}]],[["position",i],["normal",t?i:a],["uv0",a]],1)},e.createTriangleGeometry=function(){var e=new Uint16Array([0,1,2]),t=new Uint16Array([0,0,0]),n=new Uint16Array([0,0,0]);return new b.a([["position",{size:3,data:[0,0,0,0,0,100,100,0,0],exclusive:!0}],["normal",{size:3,data:[0,1,0],exclusive:!0}],["uv0",{size:2,data:[0,0],exclusive:!0}]],[["position",e],["normal",t],["uv0",n]])};var t=[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0]];function n(e,t,n,r,i){return!(Math.abs(Object(o.g)(t,e))>i)&&(Object(o.f)(n,e,t),Object(o.q)(n,n),Object(o.f)(r,n,e),Object(o.q)(r,r),!0)}function r(e,t,r,i,a,o,s){return n(e,t,a,o,s)||n(e,r,a,o,s)||n(e,i,a,o,s)}e.createSquareGeometry=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,n=new Array(12),r=0;r<4;r++)for(var i=0;i<3;i++)n[3*r+i]=e[r][i];var a=new Uint32Array([0,1,2,2,3,0]),o=[0,0,1],s=new Uint32Array([0,0,0,0,0,0]);return new b.a([["position",{size:3,data:n,exclusive:!0}],["normal",{size:3,data:o,exclusive:!0}],["uv0",{size:2,data:[0,0,1,0,1,1,0,1],exclusive:!0}],["color",{size:4,data:[255,255,255,255],exclusive:!0}]],[["position",a],["normal",s],["uv0",a],["color",s]])},e.createConeGeometry=function(e,t,n,r){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=0,c=t,l=e,u=Object(s.c)(0,o,0),d=Object(s.c)(0,o+l,0),f=Object(s.c)(0,-1,0),p=Object(s.c)(0,1,0);r&&(o=l,d=Object(s.c)(0,0,0),u=Object(s.c)(0,o,0),f=Object(s.c)(0,1,0),p=Object(s.c)(0,-1,0));var h=[d,u],v=[f,p],y=n+2,m=Math.sqrt(l*l+c*c);if(r)for(var g=n-1;g>=0;g--){var O=g*(2*Math.PI/n),j=Object(s.c)(Math.cos(O)*c,o,Math.sin(O)*c);h.push(j);var w=Object(s.c)(l*Math.cos(O)/m,-c/m,l*Math.sin(O)/m);v.push(w)}else for(var _=0;_<n;_++){var k=_*(2*Math.PI/n),x=Object(s.c)(Math.cos(k)*c,o,Math.sin(k)*c);h.push(x);var S=Object(s.c)(l*Math.cos(k)/m,c/m,l*Math.sin(k)/m);v.push(S)}var T=new Uint32Array(2*(n+2)*3),E=new Uint32Array(2*(n+2)*3),C=0,P=0;if(i){for(var I=3;I<h.length;I++)T[C++]=1,T[C++]=I-1,T[C++]=I,E[P++]=0,E[P++]=0,E[P++]=0;T[C++]=h.length-1,T[C++]=2,T[C++]=1,E[P++]=0,E[P++]=0,E[P++]=0}if(a){for(var M=3;M<h.length;M++)T[C++]=M,T[C++]=M-1,T[C++]=0,E[P++]=M,E[P++]=M-1,E[P++]=1;T[C++]=0,T[C++]=2,T[C++]=h.length-1,E[P++]=1,E[P++]=2,E[P++]=v.length-1}for(var A=new Float32Array(3*y),R=0;R<y;R++)A[3*R]=h[R][0],A[3*R+1]=h[R][1],A[3*R+2]=h[R][2];for(var L=new Float32Array(3*y),F=0;F<y;F++)L[3*F]=v[F][0],L[3*F+1]=v[F][1],L[3*F+2]=v[F][2];return new b.a([["position",{size:3,data:A,exclusive:!0}],["normal",{size:3,data:L,exclusive:!0}]],[["position",T],["normal",E]])},e.createCylinderGeometry=function(e,t,n,r,i,a){var c=r?Object(s.a)(r):Object(s.c)(1,0,0),l=i?Object(s.a)(i):Object(s.c)(0,0,0);a=null==a||a;var u=Object(s.b)();Object(o.q)(u,c);var d=Object(s.b)();Object(o.d)(d,u,Math.abs(e));var f=Object(s.b)();Object(o.d)(f,d,-.5),Object(o.e)(f,f,l);var p=Object(s.c)(0,1,0);Math.abs(1-Object(o.g)(u,p))<.2&&Object(o.v)(p,0,0,1);var h=Object(s.b)();Object(o.f)(h,u,p),Object(o.q)(h,h),Object(o.f)(p,h,u);var v=2*n+(a?2:0),y=n+(a?2:0),m=new Float32Array(3*v),g=new Float32Array(3*y),O=new Float32Array(2*v),j=new Uint32Array(3*n*(a?4:2)),w=new Uint32Array(3*n*(a?4:2));a&&(m[3*(v-2)+0]=f[0],m[3*(v-2)+1]=f[1],m[3*(v-2)+2]=f[2],O[2*(v-2)]=0,O[2*(v-2)+1]=0,m[3*(v-1)+0]=m[3*(v-2)+0]+d[0],m[3*(v-1)+1]=m[3*(v-2)+1]+d[1],m[3*(v-1)+2]=m[3*(v-2)+2]+d[2],O[2*(v-1)]=1,O[2*(v-1)+1]=1,g[3*(y-2)+0]=-u[0],g[3*(y-2)+1]=-u[1],g[3*(y-2)+2]=-u[2],g[3*(y-1)+0]=u[0],g[3*(y-1)+1]=u[1],g[3*(y-1)+2]=u[2]);for(var _=function(e,t,n){j[e]=t,w[e]=n},k=0,x=Object(s.b)(),S=Object(s.b)(),T=0;T<n;T++){var E=T*(2*Math.PI/n);Object(o.d)(x,p,Math.sin(E)),Object(o.d)(S,h,Math.cos(E)),Object(o.e)(x,x,S),g[3*T+0]=x[0],g[3*T+1]=x[1],g[3*T+2]=x[2],Object(o.d)(x,x,t),Object(o.e)(x,x,f),m[3*T+0]=x[0],m[3*T+1]=x[1],m[3*T+2]=x[2],O[2*T+0]=T/n,O[2*T+1]=0,m[3*(T+n)+0]=m[3*T+0]+d[0],m[3*(T+n)+1]=m[3*T+1]+d[1],m[3*(T+n)+2]=m[3*T+2]+d[2],O[2*(T+n)+0]=T/n,O[2*T+1]=1;var C=(T+1)%n;_(k++,T,T),_(k++,T+n,T),_(k++,C,C),_(k++,C,C),_(k++,T+n,T),_(k++,C+n,C)}if(a){for(var P=0;P<n;P++){var I=(P+1)%n;_(k++,v-2,y-2),_(k++,P,y-2),_(k++,I,y-2)}for(var M=0;M<n;M++){var A=(M+1)%n;_(k++,M+n,y-1),_(k++,v-1,y-1),_(k++,A+n,y-1)}}return new b.a([["position",{size:3,data:m,exclusive:!0}],["normal",{size:3,data:g,exclusive:!0}],["uv0",{size:2,data:O,exclusive:!0}]],[["position",j],["normal",w],["uv0",j]])},e.createTubeGeometry=function(t,n,r,i,a){r=r||10,i=null==i||i,Object(p.a)(t.length>1);for(var o=[],s=[],c=0;c<r;c++){o.push([0,-c-1,-(c+1)%r-1]);var l=c/r*2*Math.PI;s.push([Math.cos(l)*n,Math.sin(l)*n])}return e.createPathExtrusionGeometry(s,t,[[0,0,0]],o,i,a)},e.createPathExtrusionGeometry=function(e,t,n,i,l){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Object(s.c)(0,0,0),d=e.length,f=new Float32Array(t.length*d*3+(6*n.length||0)),p=new Float32Array(t.length*d*3+(n?6:0)),h=(t.length-1)*d*6+3*i.length*2,v=new Uint32Array(h),m=new Uint32Array(h),g=0,O=0,j=0,w=0,_=Object(s.b)(),k=Object(s.b)(),x=Object(s.b)(),S=Object(s.b)(),T=Object(s.b)(),E=Object(s.b)(),C=Object(s.b)(),P=Object(a.e)(),I=Object(s.b)(),M=Object(s.b)(),A=Object(s.b)(),R=Object(s.b)(),L=Object(s.b)(),F=c.e.create();Object(o.v)(I,0,1,0),Object(o.i)(k,t[1],t[0]),Object(o.q)(k,k),l?(Object(o.e)(P,t[0],u),Object(o.q)(x,P)):Object(o.v)(x,0,0,1),r(k,x,I,I,T,x,y),Object(o.j)(S,x),Object(o.j)(R,T);for(var D=0;D<n.length;D++)Object(o.d)(E,T,n[D][0]),Object(o.d)(P,x,n[D][2]),Object(o.e)(E,E,P),Object(o.e)(E,E,t[0]),f[g++]=E[0],f[g++]=E[1],f[g++]=E[2];p[O++]=-k[0],p[O++]=-k[1],p[O++]=-k[2];for(var N=0;N<i.length;N++)v[j++]=i[N][0]>0?i[N][0]:-i[N][0]-1+n.length,v[j++]=i[N][1]>0?i[N][1]:-i[N][1]-1+n.length,v[j++]=i[N][2]>0?i[N][2]:-i[N][2]-1+n.length,m[w++]=0,m[w++]=0,m[w++]=0;for(var V=n.length,z=n.length-1,U=0;U<t.length;U++){var B=!1;U>0&&(Object(o.j)(_,k),U<t.length-1?(Object(o.i)(k,t[U+1],t[U]),Object(o.q)(k,k)):B=!0,Object(o.e)(M,_,k),Object(o.q)(M,M),Object(o.e)(A,t[U-1],S),c.e.fromPositionAndNormal(t[U],M,F),c.e.intersectRay(F,c.f.wrap(A,_),P)?(Object(o.i)(P,P,t[U]),Object(o.q)(x,P),Object(o.f)(T,M,x),Object(o.q)(T,T)):r(M,S,R,I,T,x,y),Object(o.j)(S,x),Object(o.j)(R,T)),l&&(Object(o.e)(P,t[U],u),Object(o.q)(L,P));for(var G=0;G<d;G++)if(Object(o.d)(E,T,e[G][0]),Object(o.d)(P,x,e[G][1]),Object(o.e)(E,E,P),Object(o.q)(C,E),p[O++]=C[0],p[O++]=C[1],p[O++]=C[2],Object(o.e)(E,E,t[U]),f[g++]=E[0],f[g++]=E[1],f[g++]=E[2],!B){var q=(G+1)%d;v[j++]=V+G,v[j++]=V+d+G,v[j++]=V+q,v[j++]=V+q,v[j++]=V+d+G,v[j++]=V+d+q;for(var H=0;H<6;H++)m[w++]=v[j-6+H]-z}V+=d}for(var W=t[t.length-1],$=0;$<n.length;$++)Object(o.d)(E,T,n[$][0]),Object(o.d)(P,x,n[$][1]),Object(o.e)(E,E,P),Object(o.e)(E,E,W),f[g++]=E[0],f[g++]=E[1],f[g++]=E[2];var J=O/3;p[O++]=k[0],p[O++]=k[1],p[O++]=k[2];for(var Y=V-d,K=0;K<i.length;K++)v[j++]=i[K][0]>=0?V+i[K][0]:-i[K][0]-1+Y,v[j++]=i[K][2]>=0?V+i[K][2]:-i[K][2]-1+Y,v[j++]=i[K][1]>=0?V+i[K][1]:-i[K][1]-1+Y,m[w++]=J,m[w++]=J,m[w++]=J;return new b.a([["position",{size:3,data:f,exclusive:!0}],["normal",{size:3,data:p,exclusive:!0}]],[["position",v],["normal",m]])},e.createPolylineGeometry=function(e,t,n){Object(p.a)(e.length>1,"createPolylineGeometry(): polyline needs at least 2 points"),Object(p.a)(3===e[0].length,"createPolylineGeometry(): malformed vertex"),Object(p.a)(null==t||t.length===e.length,"createPolylineGeometry: need same number of points and normals"),Object(p.a)(null==t||3===t[0].length,"createPolylineGeometry(): malformed normal");for(var r=new Float64Array(3*e.length),i=new Uint32Array(2*(e.length-1)),a=0,o=0,s=0;s<e.length;s++){for(var c=0;c<3;c++)r[a++]=e[s][c];s>0&&(i[o++]=s-1,i[o++]=s)}var l=[],u=[];if(l.push(["position",i]),u.push(["position",{size:3,data:r,exclusive:!0}]),t){for(var d=new Float32Array(3*t.length),f=0,v=0;v<e.length;v++)for(var y=0;y<3;y++)d[f++]=t[v][y];l.push(["normal",i]),u.push(["normal",{size:3,data:d,exclusive:!0}])}return n&&(u.push(["color",{size:4,data:n}]),l.push(["color",Object(h.d)(n.length/4)])),new b.a(u,l,2)},e.createExtrudedTriangle=function(e,t,n,r){for(var i=new Array(18),a=[[-t,0,r/2],[n,0,r/2],[0,e,r/2],[-t,0,-r/2],[n,0,-r/2],[0,e,-r/2]],o=new Uint16Array([0,1,2,3,0,2,2,5,3,1,4,5,5,2,1,1,0,3,3,4,1,4,3,5]),s=0;s<6;s++)i[3*s]=a[s][0],i[3*s+1]=a[s][1],i[3*s+2]=a[s][2];return new b.a([["position",{size:3,data:i,exclusive:!0}]],[["position",o]])},e.transformInPlace=function(e,t){for(var n=e.getMutableAttribute("position").data,r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],s=n[r+2];Object(o.v)(m,i,a,s),Object(o.l)(m,m,t),n[r]=m[0],n[r+1]=m[1],n[r+2]=m[2]}},e.cgToGIS=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=e.vertexAttributes,r=n.get("position").data,i=n.get("normal").data;if(i)for(var a=t.getMutableAttribute("normal").data,o=0;o<i.length;o+=3){var s=i[o+1];a[o+1]=-i[o+2],a[o+2]=s}if(r)for(var c=t.getMutableAttribute("position").data,l=0;l<r.length;l+=3){var u=r[l+1];c[l+1]=-r[l+2],c[l+2]=u}return t},e.makeOrthoBasisDirUp=n,e.makeOrthoBasisDirUpFallback=r}(f||(f={}));var y=.99619469809,m=Object(s.b)(),g=f;t.a=g},function(e,t,n){"use strict";var r=n(2),i=n(3),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;Object(r.a)(this,e),this.displayId=0,this.geohashX=0,this.geohashY=0,this.geometry=t,n&&(this.attributes=n),i&&(this.centroid=i),null!=a&&(this.objectId=a)}return Object(i.a)(e,[{key:"hasGeometry",get:function(){return!(!this.geometry||!this.geometry.coords||!this.geometry.coords.length)}},{key:"weakClone",value:function(){var t=new e(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}}]),e}();t.a=a},function(e,t,n){"use strict";function r(){return[1,0,0,0,1,0,0,0,1]}function i(e,t){return new Float64Array(e,t,9)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));Object.freeze({__proto__:null,create:r,clone:function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},fromValues:function(e,t,n,r,i,a,o,s,c){return[e,t,n,r,i,a,o,s,c]},createView:i})},,function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s}));var r=n(24);function i(e,t,n){return Object(r.j)(e.map((function(e,r){return t.apply(n,[e,r])})))}function a(e,t,n){return Object(r.j)(e.map((function(e,r){return t.apply(n,[e,r])}))).then((function(e){return e.map((function(e){return e.value}))}))}function o(e){return e.then((function(e){return{ok:!0,value:e}})).catch((function(e){return{ok:!1,error:e}}))}function s(e){return e.then((function(e){return{ok:!0,value:e}})).catch((function(e){return Object(r.t)(e),{ok:!1,error:e}}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return f}));var r=n(2),i=n(3),a=n(5),o=n(6),s=n(4),c=n(269),l=n(285),u=n(208),d=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e,i){var a;return Object(r.a)(this,n),(a=t.call(this)).type=3,a.supportsEdges=!1,a._visible=!0,a._renderPriority=0,a._insertOrder=0,a._vertexAttributeLocations=c.a,a._params=Object(u.c)(e,i),a.validateParameterValues(a._params),a}return Object(i.a)(n,[{key:"dispose",value:function(){}},{key:"params",get:function(){return this._params}},{key:"update",value:function(e){return!1}},{key:"setParameterValues",value:function(e){Object(u.f)(this._params,e)&&(this.validateParameterValues(this._params),this.parametersChanged())}},{key:"validateParameterValues",value:function(e){}},{key:"visible",get:function(){return this._visible},set:function(e){e!==this._visible&&(this._visible=e,this.parametersChanged())}},{key:"isVisibleInPass",value:function(e){return!0}},{key:"renderOccluded",get:function(){return this.params.renderOccluded}},{key:"renderPriority",get:function(){return this._renderPriority},set:function(e){e!==this._renderPriority&&(this._renderPriority=e,this.parametersChanged())}},{key:"insertOrder",get:function(){return this._insertOrder},set:function(e){e!==this._insertOrder&&(this._insertOrder=e,this.parametersChanged())}},{key:"vertexAttributeLocations",get:function(){return this._vertexAttributeLocations}},{key:"isVisible",value:function(){return this._visible}},{key:"parametersChanged",value:function(){Object(s.k)(this.materialRepository)&&this.materialRepository.materialChanged(this)}}]),n}(l.a);function f(e,t){return e.isVisible()&&e.isVisibleInPass(t.pass)&&0!=(e.renderOccluded&t.renderOccludedMask)}var p={renderOccluded:1}},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17)),u=n(1),d=n(8),f=(n(12),n(19),n(20),n(28)),p=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).level=0,r.levelValue=null,r.resolution=0,r.scale=0,r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}}]),n}(f.a);Object(c.a)([Object(u.b)({type:l.a,json:{write:!0}})],p.prototype,"level",void 0),Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],p.prototype,"levelValue",void 0),Object(c.a)([Object(u.b)({type:Number,json:{write:!0}})],p.prototype,"resolution",void 0),Object(c.a)([Object(u.b)({type:Number,json:{write:!0}})],p.prototype,"scale",void 0);var h=p=r=Object(c.a)([Object(d.a)("esri.layers.support.LOD")],p);t.a=h},function(e,t,n){"use strict";function r(e){return Object.keys(e).some((function(t){var n=e[t];if(!n)return!1;switch(n&&n.toParam&&(n=n.toParam()),n.constructor.name){case"Array":case"Object":case"Date":case"Function":case"Boolean":case"String":case"Number":return!1;default:return!0}}))}function i(e){var t={};return Object.keys(e).forEach((function(n){var r,i,a=e[n];if(a&&a.toParam&&(a=a.toParam()),a||0===a||"boolean"===typeof a||"string"===typeof a){var o;switch(a.constructor.name){case"Array":var s=null===(i=null===(r=a[0])||void 0===r?void 0:r.constructor)||void 0===i?void 0:i.name;o="Array"===s?a:"Object"===s?JSON.stringify(a):a.join(",");break;case"Object":o=JSON.stringify(a);break;case"Date":o=a.valueOf();break;case"Function":o=null;break;case"Boolean":o=a+"";break;default:o=a}(o||0===o||"string"===typeof o||Array.isArray(o))&&(t[n]=o)}})),t}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r="20210506",i="b02ca94fa7b6dac5fa148245a7cdc7caae582829"},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(49),d=n(8),f=(n(12),n(19),n(20),n(276)),p=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).maxValue=null,r.minValue=null,r.type="range",r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}}]),n}(f.a);Object(c.a)([Object(l.b)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[1]}},write:{enabled:!1,overridePolicy:function(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer:function(e,t,n){t[n]=[this.minValue||0,e]}}}})],p.prototype,"maxValue",void 0),Object(c.a)([Object(l.b)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[0]}},write:{target:"range",writer:function(e,t,n){t[n]=[e,this.maxValue||0]}}}})],p.prototype,"minValue",void 0),Object(c.a)([Object(u.a)({range:"range"})],p.prototype,"type",void 0);var h=p=r=Object(c.a)([Object(d.a)("esri.layers.support.RangeDomain")],p);t.a=h},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(22)),u=(n(13),n(17),n(1)),d=n(41),f=n(8),p=n(42),h=(n(12),n(19),n(20),n(167)),b=n(530),v=n(532),y=n(556),m=n(533),g=n(534),O=n(529),j=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).activeMediaInfoIndex=null,r.description=null,r.mediaInfos=null,r.title=null,r.type="media",r}return Object(a.a)(n,[{key:"readMediaInfos",value:function(e){return e&&e.map((function(e){return"image"===e.type?y.a.fromJSON(e):"barchart"===e.type?b.a.fromJSON(e):"columnchart"===e.type?v.a.fromJSON(e):"linechart"===e.type?m.a.fromJSON(e):"piechart"===e.type?g.a.fromJSON(e):void 0})).filter(Boolean)}},{key:"writeMediaInfos",value:function(e,t){t.mediaInfos=e&&e.map((function(e){return e.toJSON()}))}},{key:"clone",value:function(){return new r({activeMediaInfoIndex:this.activeMediaInfoIndex,description:this.description,mediaInfos:this.mediaInfos?Object(l.a)(this.mediaInfos):null,title:this.title})}}]),n}(h.a);Object(c.a)([Object(u.b)()],j.prototype,"activeMediaInfoIndex",void 0),Object(c.a)([Object(u.b)({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],j.prototype,"description",void 0),Object(c.a)([Object(u.b)({types:[O.a]})],j.prototype,"mediaInfos",void 0),Object(c.a)([Object(d.a)("mediaInfos")],j.prototype,"readMediaInfos",null),Object(c.a)([Object(p.a)("mediaInfos")],j.prototype,"writeMediaInfos",null),Object(c.a)([Object(u.b)({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],j.prototype,"title",void 0),Object(c.a)([Object(u.b)({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],j.prototype,"type",void 0);var w=j=r=Object(c.a)([Object(f.a)("esri.popup.content.MediaContent")],j);t.a=w},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(22)),u=(n(13),n(17),n(1)),d=n(49),f=n(8),p=(n(12),n(19),n(20),n(28)),h=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).name=null,r.code=null,r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({name:this.name,code:this.code})}}]),n}(p.a);Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],h.prototype,"name",void 0),Object(c.a)([Object(u.b)({type:[String,Number],json:{write:!0}})],h.prototype,"code",void 0);var b,v=h=r=Object(c.a)([Object(f.a)("esri.layers.support.CodedValue")],h),y=n(276),m=b=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).codedValues=null,r.type="coded-value",r}return Object(a.a)(n,[{key:"getName",value:function(e){var t=null;if(this.codedValues){var n=String(e);this.codedValues.some((function(e){return String(e.code)===n&&(t=e.name),!!t}))}return t}},{key:"clone",value:function(){return new b({codedValues:Object(l.a)(this.codedValues),name:this.name})}}]),n}(y.a);Object(c.a)([Object(u.b)({type:[v],json:{write:!0}})],m.prototype,"codedValues",void 0),Object(c.a)([Object(d.a)({codedValue:"coded-value"})],m.prototype,"type",void 0);var g=m=b=Object(c.a)([Object(f.a)("esri.layers.support.CodedValueDomain")],m);t.a=g},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(22)),u=(n(13),n(17),n(1)),d=n(49),f=n(8),p=(n(12),n(19),n(20),n(40)),h=n(222),b=n(196),v=n(346),y=n(402),m=p.a.ofType({base:null,key:"type",typeMap:{text:h.a}}),g=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).verticalOffset=null,r.callout=null,r.styleOrigin=null,r.symbolLayers=new m,r.type="label-3d",r}return Object(a.a)(n,[{key:"supportsCallout",value:function(){return!0}},{key:"hasVisibleCallout",value:function(){return Object(v.b)(this)}},{key:"hasVisibleVerticalOffset",value:function(){return Object(v.c)(this)}},{key:"clone",value:function(){return new r({styleOrigin:Object(l.a)(this.styleOrigin),symbolLayers:Object(l.a)(this.symbolLayers),thumbnail:Object(l.a)(this.thumbnail),callout:Object(l.a)(this.callout),verticalOffset:Object(l.a)(this.verticalOffset)})}}],[{key:"fromTextSymbol",value:function(e){return new r({symbolLayers:[h.a.fromTextSymbol(e)]})}}]),n}(b.a);Object(c.a)([Object(u.b)({type:y.a,json:{write:!0}})],g.prototype,"verticalOffset",void 0),Object(c.a)([Object(u.b)(v.a)],g.prototype,"callout",void 0),Object(c.a)([Object(u.b)({json:{read:!1,write:!1}})],g.prototype,"styleOrigin",void 0),Object(c.a)([Object(u.b)({type:m})],g.prototype,"symbolLayers",void 0),Object(c.a)([Object(d.a)({LabelSymbol3D:"label-3d"},{readOnly:!0})],g.prototype,"type",void 0);var O=g=r=Object(c.a)([Object(f.a)("esri.symbols.LabelSymbol3D")],g);t.a=O},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(22)),u=(n(13),n(17),n(1)),d=n(49),f=n(8),p=(n(12),n(19),n(20),n(40)),h=n(248),b=n(358),v=n(196),y=p.a.ofType({base:null,key:"type",typeMap:{line:h.a,path:b.a}}),m=p.a.ofType({base:null,key:"type",typeMap:{line:h.a,path:b.a}}),g=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).symbolLayers=new y,r.type="line-3d",r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({styleOrigin:Object(l.a)(this.styleOrigin),symbolLayers:Object(l.a)(this.symbolLayers),thumbnail:Object(l.a)(this.thumbnail)})}}],[{key:"fromSimpleLineSymbol",value:function(e){return new r({symbolLayers:[h.a.fromSimpleLineSymbol(e)]})}}]),n}(v.a);Object(c.a)([Object(u.b)({type:y,json:{type:m}})],g.prototype,"symbolLayers",void 0),Object(c.a)([Object(d.a)({LineSymbol3D:"line-3d"},{readOnly:!0})],g.prototype,"type",void 0);var O=g=r=Object(c.a)([Object(f.a)("esri.symbols.LineSymbol3D")],g);t.a=O},function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return b}));var r=n(39),i=n(38),a=n(62),o=n(84),s=n(627),c=n(397),l="picture-fill",u="simple-fill",d="simple-marker",f=new s.a(1e3);function p(e){var t=e.style,n=null;if(e)switch(e.type){case d:"cross"!==t&&"x"!==t&&(n=e.color);break;case u:"solid"===t?n=e.color:"none"!==t&&(n={type:"pattern",x:0,y:0,src:Object(o.a)("esri/symbols/patterns/".concat(t,".png")),width:5,height:5});break;case l:n={type:"pattern",src:e.url,width:Object(i.g)(e.width)*e.xscale,height:Object(i.g)(e.height)*e.yscale,x:Object(i.g)(e.xoffset),y:Object(i.g)(e.yoffset)};break;case"text":n=e.color;break;case"cim":n=Object(c.b)(e)}return n}function h(e,t){var n=e+"-"+t;return void 0!==f.get(n)?Promise.resolve(f.get(n)):Object(a.default)(e,{responseType:"image"}).then((function(e){var r=e.data,i=r.naturalWidth,a=r.naturalHeight,o=document.createElement("canvas");o.width=i,o.height=a;var s=o.getContext("2d");s.fillStyle=t,s.fillRect(0,0,i,a),s.globalCompositeOperation="destination-in",s.drawImage(r,0,0);var c=o.toDataURL();return f.put(n,c),c}))}function b(e){if(!e)return null;var t;switch(e.type){case u:case l:case d:t=b(e.outline);break;case"simple-line":var n=Object(i.g)(e.width);"none"!==e.style&&0!==n&&(t={color:e.color,style:v(e.style),width:n,cap:e.cap,join:"miter"===e.join?Object(i.g)(e.miterLimit):e.join});break;default:t=null}return t}var v=function(){var e={};return function(t){if(e[t])return e[t];var n=t.replace(/-/g,"");return e[t]=n,n}}(),y=new r.a([128,128,128])},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r,i=n(182),a={namespace:void 0,performanceLogger:function(){},eventHandlerInterceptor:void 0,styleApplyer:function(e,t,n){"-"===t.charAt(0)?e.style.setProperty(t,n):e.style[t]=n}},o=function(e){return Object(i.c)(a,e)},s=function(e,t,n){return n=o(n),Object(i.a)(t,e,void 0,n),Object(i.b)(t,n)},c=function(e,t,n){return n=o(n),Object(i.a)(t,e.parentNode,e,n),Object(i.b)(t,n)},l=function(e,t,n){return n=o(n),t.domNode=e,Object(i.d)(e,t,n),Object(i.b)(t,n)},u=function(e,t,n){return n=o(n),Object(i.a)(t,e.parentNode,e,n),e.parentNode.removeChild(e),Object(i.b)(t,n)},d=function(e,t){for(var n=[];e&&e!==t;)n.push(e),e=e.parentNode;return n};r=Array.prototype.find?function(e,t){return e.find(t)}:function(e,t){return e.filter(t)[0]};var f=function(e,t){var n=e;return t.forEach((function(e){n=n&&n.children?r(n.children,(function(t){return t.domNode===e})):void 0})),n},p=function(e){var t,n,r=o(e),i=r.performanceLogger,a=!0,p=!1,h=[],b=[],v=function(e,n,a){var o;r.eventHandlerInterceptor=function(e,t,n){var r=function(r){n("domEvent",r);var i=t(),a=d(r.currentTarget,i.domNode);a.reverse();var o,s=f(i.getLastRender(),a);return e.scheduleRender(),s&&(o=s.properties["on".concat(r.type)].apply(s.properties.bind||this,arguments)),n("domEventProcessed",r),o};return function(e,t,n,i){return r}}(t,(function(){return o}),i),o=e(n,a(),r),h.push(o),b.push(a)},y=function(){if(n=void 0,a){a=!1,i("renderStart",void 0);for(var e=0;e<h.length;e++){var t=b[e]();i("rendered",void 0),h[e].update(t),i("patched",void 0)}i("renderDone",void 0),a=!0}};return t={renderNow:y,scheduleRender:function(){n||p||(n=requestAnimationFrame(y))},stop:function(){n&&(cancelAnimationFrame(n),n=void 0),p=!0},resume:function(){p=!1,a=!0,t.scheduleRender()},append:function(e,t){v(s,e,t)},insertBefore:function(e,t){v(c,e,t)},merge:function(e,t){v(l,e,t)},replace:function(e,t){v(u,e,t)},detach:function(e){for(var t=0;t<b.length;t++)if(b[t]===e)return b.splice(t,1),h.splice(t,1)[0];throw new Error("renderFunction was not found")}}}},function(e,t,n){"use strict";var r=n(14),i=n(65);var a=i.a.queueMicrotask?i.a.queueMicrotask:function(e){i.a.Promise.resolve().then(e)},o=[],s=[];function c(e){o.push(e),1===o.length&&a((function(){var e,t=Object(r.a)(s);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(c){t.e(c)}finally{t.f()}var n=o.slice();o.length=0;var i,a=Object(r.a)(n);try{for(a.s();!(i=a.n()).done;){(0,i.value)()}}catch(c){a.e(c)}finally{a.f()}}))}(c||(c={})).before=function(e){return s.push(e),{remove:function(){s=s.filter((function(t){return t!==e}))}}};var l=c;t.a=l},function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.hasM,i=e.hasZ;Array.isArray(t)?4!==t.length||r||i?3===t.length&&n&&!r?(i=!0,r=!1):3===t.length&&r&&i&&(r=!1,i=!1):(r=!0,i=!0):(i=!i&&t.hasZ&&(!r||t.hasM),r=!r&&t.hasM&&(!i||t.hasZ)),e.hasZ=i,e.hasM=r}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return O})),n.d(t,"f",(function(){return d}));var r=n(123),i="__begin__",a="__end__",o=new RegExp(i,"ig"),s=new RegExp(a,"ig"),c=new RegExp("^"+i,"i"),l=new RegExp(a+"$","i"),u='"';function d(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function f(e){var t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=function(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}(e.labelExpression),t.type="conventional"),t}function p(e){var t=f(e);if(!t)return null;switch(t.type){case"conventional":return b(t.expression);case"arcade":return t.expression}return null}function h(e){var t=f(e);if(!t)return null;switch(t.type){case"conventional":return function(e){var t=e.match(v);return t&&t[1].trim()||null}(t.expression);case"arcade":return O(t.expression)}return null}function b(e){var t;return e?(t=Object(r.c)(e,(function(e){return i+'$feature["'+e+'"]'+a})),t=c.test(t)?t.replace(c,""):u+t,t=(t=l.test(t)?t.replace(l,""):t+u).replace(o,'" + ').replace(s,' + "')):t='""',t}var v=/^\s*\{([^}]+)\}\s*$/i;var y=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,m=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,g=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function O(e){if(!e)return null;var t=y.exec(e)||m.exec(e);return t?t[1]||t[3]:(t=g.exec(e))?t[2]:null}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a}));var r=n(463),i=Object(r.b)((function(e){var t;void 0!==(t=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"])&&(e.exports=t)})),a=Object(r.b)((function(e){var t;void 0!==(t=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"])&&(e.exports=t)})),o=Object(r.b)((function(e){var t;void 0!==(t=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"])&&(e.exports=t)}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o}));var r,i=n(29),a=n(34);function o(e,t){e.fragment.uniforms.add("terrainDepthTexture","sampler2D"),e.fragment.uniforms.add("cameraNearFar","vec2"),e.fragment.uniforms.add("inverseViewport","vec2"),e.fragment.code.add(Object(a.a)(r||(r=Object(i.a)(["\n    //Compare the linearized depths of the fragment and the terrain. If fragment is on the wrong side of the terrain, discard it.\n    void terrainDepthTest(vec4 fragCoord, float fragmentDepth){\n\n      float terrainDepth = linearDepthFromTexture(terrainDepthTexture, fragCoord.xy * inverseViewport, cameraNearFar);\n      if(fragmentDepth "," terrainDepth){\n        discard;\n      }\n    }\n  "])),t.cullAboveGround?">":"<="))}function s(e,t,n){n.multipassTerrainEnabled&&n.terrainLinearDepthTexture&&(e.setUniform1i("terrainDepthTexture",10),t.bindTexture(n.terrainLinearDepthTexture,10))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r,i=n(29),a=n(34),o=n(393);function s(e){e.include(o.a),e.code.add(Object(a.a)(r||(r=Object(i.a)(["\n    float linearDepthFromFloat(float depth, vec2 nearFar) {\n      return -(depth * (nearFar[1] - nearFar[0]) + nearFar[0]);\n    }\n\n    float linearDepthFromTexture(sampler2D depthTex, vec2 uv, vec2 nearFar) {\n      return linearDepthFromFloat(rgba2float(texture2D(depthTex, uv)), nearFar);\n    }\n  "]))))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(79),i=n(66),a={inches:Object(i.b)(1,"meters","inches"),feet:Object(i.b)(1,"meters","feet"),"us-feet":Object(i.b)(1,"meters","us-feet"),yards:Object(i.b)(1,"meters","yards"),miles:Object(i.b)(1,"meters","miles"),"nautical-miles":Object(i.b)(1,"meters","nautical-miles"),millimeters:Object(i.b)(1,"meters","millimeters"),centimeters:Object(i.b)(1,"meters","centimeters"),decimeters:Object(i.b)(1,"meters","decimeters"),meters:Object(i.b)(1,"meters","meters"),kilometers:Object(i.b)(1,"meters","kilometers"),"decimal-degrees":1/Object(i.i)(1,"meters",r.a.radius)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(2),i=n(3),a=n(5),o=n(6),s=n(0),c=(n(16),n(4)),l=n(13),u=(n(17),n(1)),d=n(8),f=(n(12),n(19),n(20),n(185)),p=function(e){var t=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"title",get:function(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){var e=Object(f.e)(this.url);if(Object(c.k)(e)&&e.title)return e.title}return this._get("title")||""},set:function(e){this._set("title",e)}},{key:"url",set:function(e){this._set("url",Object(f.g)(e,l.a.getLogger(this.declaredClass)))}}]),n}(e);return Object(s.a)([Object(u.b)()],t.prototype,"title",null),Object(s.a)([Object(u.b)({type:String})],t.prototype,"url",null),t=Object(s.a)([Object(d.a)("esri.layers.mixins.ArcGISService")],t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var r=n(166),i=n(432),a=n(379),o=n(477),s=n(479),c=n(478),l=n(384),u={key:"type",base:r.a,typeMap:{heatmap:c.a,simple:l.a,"unique-value":a.a,"class-breaks":i.a,"dot-density":s.a,dictionary:o.default},errorContext:"renderer"},d={key:"type",base:r.a,typeMap:{simple:l.a,"unique-value":a.a,"class-breaks":i.a},errorContext:"renderer"}},function(e,t,n){"use strict";function r(){return[0,0,0,1]}function i(e,t){return new Float64Array(e,t,4)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var a=[0,0,0,1];Object.freeze({__proto__:null,create:r,clone:function(e){return[e[0],e[1],e[2],e[3]]},fromValues:function(e,t,n,r){return[e,t,n,r]},createView:i,IDENTITY:a})},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(22)),u=(n(13),n(17),n(1)),d=n(47),f=n(41),p=n(8),h=n(42),b=(n(12),n(19),n(20),n(28)),v=n(76),y=n(170),m=n(314),g=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).expression=null,e.title=null,e.value=null,e}return Object(a.a)(n,[{key:"readExpression",value:function(e,t){return t.value?Object(m.a)(t.value):e}},{key:"writeExpression",value:function(e,t,n){null!=this.value&&(e=Object(m.a)(this.value)),t[n]=e}},{key:"clone",value:function(){return new r({expression:this.expression,title:this.title,value:this.value})}}]),n}(b.a);Object(c.a)([Object(u.b)({type:String,json:{write:{allowNull:!0}}})],g.prototype,"expression",void 0),Object(c.a)([Object(f.a)("expression",["expression","value"])],g.prototype,"readExpression",null),Object(c.a)([Object(h.a)("expression")],g.prototype,"writeExpression",null),Object(c.a)([Object(u.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],g.prototype,"title",void 0),Object(c.a)([Object(u.b)({json:{read:!1,write:!1}})],g.prototype,"value",void 0);var O,j=g=r=Object(c.a)([Object(p.a)("esri.layers.support.LabelExpressionInfo")],g),w=n(600),_=new d.a({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function k(e){return!e||"service"!==e.origin&&!x(e.layer)}function x(e){return"map-image"===(null==e?void 0:e.type)}function S(e){var t,n;return!!x(e)&&!(null==(t=e.capabilities)||null==(n=t.exportMap)||!n.supportsArcadeExpressionForLabeling)}var T=O=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).type="label",r.name=null,r.deconflictionStrategy="static",r.labelExpression=null,r.labelExpressionInfo=null,r.labelPlacement=null,r.maxScale=0,r.minScale=0,r.symbol=w.a,r.useCodedValues=void 0,r.where=null,r}return Object(a.a)(n,[{key:"readLabelExpression",value:function(e,t){var n=t.labelExpressionInfo;if(!n||!n.value&&!n.expression)return e}},{key:"writeLabelExpression",value:function(e,t,n){if(this.labelExpressionInfo)if(null!=this.labelExpressionInfo.value)e=Object(m.f)(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){var r=Object(m.e)(this.labelExpressionInfo.expression);r&&(e="["+r+"]")}null!=e&&(t[n]=e)}},{key:"writeLabelExpressionInfo",value:function(e,t,n,r){if(null==e&&null!=this.labelExpression&&k(r))e=new j({expression:this.getLabelExpressionArcade()});else if(!e)return;var i=e.toJSON(r);i.expression&&(t[n]=i)}},{key:"writeMaxScale",value:function(e,t){(e||this.minScale)&&(t.maxScale=e)}},{key:"writeMinScale",value:function(e,t){(e||this.maxScale)&&(t.minScale=e)}},{key:"getLabelExpression",value:function(){return Object(m.b)(this)}},{key:"getLabelExpressionArcade",value:function(){return Object(m.c)(this)}},{key:"getLabelExpressionSingleField",value:function(){return Object(m.d)(this)}},{key:"hash",value:function(){return JSON.stringify(this)}},{key:"clone",value:function(){return new O({deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:Object(l.a)(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:Object(l.a)(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}}],[{key:"evaluateWhere",value:function(e,t){var n=function(e,t,n){switch(t){case"=":return e==n;case"<>":return e!=n;case">":return e>n;case">=":return e>=n;case"<":return e<n;case"<=":return e<=n}return!1};try{if(null==e)return!0;var r=e.split(" ");if(3===r.length)return n(t[r[0]],r[1],r[2]);if(7===r.length){var i=n(t[r[0]],r[1],r[2]),a=r[3],o=n(t[r[4]],r[5],r[6]);switch(a){case"AND":return i&&o;case"OR":return i||o}}return!1}catch(s){console.log("Error.: can't parse = "+e)}}}]),n}(b.a);Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],T.prototype,"name",void 0),Object(c.a)([Object(u.b)({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],T.prototype,"deconflictionStrategy",void 0),Object(c.a)([Object(u.b)({type:String,json:{write:{overridePolicy:function(e,t,n){return this.labelExpressionInfo&&"service"===(null==n?void 0:n.origin)&&S(n.layer)?{enabled:!1}:{allowNull:!0}}}}})],T.prototype,"labelExpression",void 0),Object(c.a)([Object(f.a)("labelExpression")],T.prototype,"readLabelExpression",null),Object(c.a)([Object(h.a)("labelExpression")],T.prototype,"writeLabelExpression",null),Object(c.a)([Object(u.b)({type:j,json:{write:{overridePolicy:function(e,t,n){return function(e){return k(e)||S(e.layer)}(n)?{allowNull:!0}:{enabled:!1}}}}})],T.prototype,"labelExpressionInfo",void 0),Object(c.a)([Object(h.a)("labelExpressionInfo")],T.prototype,"writeLabelExpressionInfo",null),Object(c.a)([Object(u.b)({type:_.apiValues,json:{type:_.jsonValues,read:_.read,write:_.write}})],T.prototype,"labelPlacement",void 0),Object(c.a)([Object(u.b)({type:Number})],T.prototype,"maxScale",void 0),Object(c.a)([Object(h.a)("maxScale")],T.prototype,"writeMaxScale",null),Object(c.a)([Object(u.b)({type:Number})],T.prototype,"minScale",void 0),Object(c.a)([Object(h.a)("minScale")],T.prototype,"writeMinScale",null),Object(c.a)([Object(u.b)({types:v.g,json:{origins:{"web-scene":{types:v.h,write:y.b,default:null}},write:y.b,default:null}})],T.prototype,"symbol",void 0),Object(c.a)([Object(u.b)({type:Boolean,json:{write:!0}})],T.prototype,"useCodedValues",void 0),Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],T.prototype,"where",void 0);var E=T=O=Object(c.a)([Object(p.a)("esri.layers.support.LabelClass")],T);t.a=E},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f}));var r=n(13),i=n(90),a=n(291),o=n(18),s=n(126),c=n(132),l=r.a.getLogger("esri.core.accessorSupport.write");function u(e,t,n,r,i,a){if(!r||!r.write)return!1;var u=e.get(n);if(!i&&r.write.overridePolicy){var d=r.write.overridePolicy.call(e,u,n,a);void 0!==d&&(i=d)}if(i||(i=r.write),!i||!1===i.enabled)return!1;if((null===u&&!i.allowNull||void 0===u)&&i.isRequired){var f=new o.a("web-document-write:property-required","Missing value for required property '".concat(n,"' on '").concat(e.declaredClass,"'"),{propertyName:n,target:e});return f&&a&&a.messages?a.messages.push(f):f&&!a&&l.error(f.name,f.message),!1}return void 0!==u&&(!(null===u&&!i.allowNull)&&(!function(e,t,n,r,i){var a=r.default;if(void 0===a)return!1;if(null!=r.defaultEquals)return r.defaultEquals(i);if("function"==typeof a){if(Array.isArray(i)){var o=a.call(e,t,n);return Object(c.c)(o,i)}return!1}return a===i}(e,n,a,r,u)&&(void 0!==r.default||!(!i.ignoreOrigin&&a&&a.origin&&t.store.originOf(n)<Object(s.d)(a.origin)))))}function d(e,t,n,r){var o=Object(i.a)(e),s=o.metadatas,c=Object(a.d)(s[t],r);return!!c&&u(e,o,t,c,n,r)}function f(e,t,n){if(e&&"function"==typeof e.toJSON&&(!e.toJSON.isDefaultToJSON||!e.write))return Object(i.c)(t,e.toJSON());var r=Object(i.a)(e),o=r.metadatas,c=function(c){var l=Object(a.d)(o[c],n);if(!u(e,r,c,l,void 0,n))return"continue";var p=e.get(c),h=function(e,t,n,r,i){var a,o,s={};return null==(a=t.write)||null==(o=a.writer)||o.call(e,r,s,n,i),s}(e,l,l.write&&"string"==typeof l.write.target?l.write.target:c,p,n);Object.keys(h).length>0&&(t=Object(i.c)(t,h),null!=n&&null!=(d=n.resources)&&null!=(f=d.pendingOperations)&&f.length&&Promise.all(n.resources.pendingOperations).then((function(){return Object(i.c)(t,h)})),n&&n.writtenProperties&&n.writtenProperties.push({target:e,propName:c,oldOrigin:Object(s.c)(r.store.originOf(c)),newOrigin:n.origin}))};for(var l in o){var d,f;c(l)}return t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return l}));var r=[252,146,31,255],i={type:"esriSMS",style:"esriSMSCircle",size:6,color:r,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},a={type:"esriSLS",style:"esriSLSSolid",width:.75,color:r},o={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},s={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},c={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},l={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},u={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var r=n(2),i=n(3),a=function(){function e(t,n,i){Object(r.a)(this,e),this.editGeometry=t,this.vertices=n,this.operation=i,this.undone=!1}return Object(i.a)(e,[{key:"apply",value:function(){var e=this;this.vertices.forEach((function(t){return e.operation.apply(t)})),this.editGeometry.components.forEach((function(e){return e.unnormalizeVertexPositions()}));var t={updatedVertices:this.vertices,operation:this.undone?"redo":"apply"};this.editGeometry.emit("change",t)}},{key:"undo",value:function(){var e=this;this.vertices.forEach((function(t){e.operation.undo(t)}));var t={updatedVertices:this.vertices,operation:"undo"};this.editGeometry.emit("change",t),this.undone=!0}},{key:"canAccumulate",value:function(e){if(this.undone)return!1;if(e.vertices.length!==this.vertices.length)return!1;for(var t=0;t<e.vertices.length;++t)if(e.vertices[t]!==this.vertices[t])return!1;return this.operation.canAccumulate(e.operation)}},{key:"accumulate",value:function(t){var n=this;if(t instanceof e&&this.canAccumulate(t)){this.vertices.forEach((function(e){return n.operation.accumulate(e,t.operation)})),this.operation.accumulateParams(t.operation),this.editGeometry.components.forEach((function(e){return e.unnormalizeVertexPositions()}));var r={updatedVertices:this.vertices,operation:"apply"};return this.editGeometry.emit("change",r),!0}return!1}}]),e}(),o=function e(t){Object(r.a)(this,e),this.helper=t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return O})),n.d(t,"d",(function(){return I}));n(16);var r=n(4),i=n(13),a=n(45),o=n(27),s=n(11),c=n(272),l=n(88),u=n(97),d=n(89),f=n(55),p=n(246),h=n(203),b=i.a.getLogger("esri.views.3d.support.geometryUtils.sphere");function v(){return Object(u.c)()}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v();return Object(d.c)(t,e)}function m(e){e[0]=e[1]=e[2]=e[3]=0}function g(e){return Array.isArray(e)?e[3]:e}function O(e){return Array.isArray(e)?e:C}function j(e,t,n){if(Object(r.j)(t))return!1;var i=Object(s.i)(f.d.get(),t.origin,O(e)),a=Object(s.g)(t.direction,t.direction),o=2*Object(s.g)(t.direction,i),c=o*o-4*a*(Object(s.g)(i,i)-e[3]*e[3]);if(c<0)return!1;var l=Math.sqrt(c),u=(-o-l)/(2*a),d=(-o+l)/(2*a);return(u<0||d<u&&d>0)&&(u=d),!(u<0)&&(n&&Object(s.e)(n,t.origin,Object(s.d)(f.d.get(),t.direction,u)),!0)}function w(e,t,n){var r=f.d.get(),i=f.a.get();Object(s.f)(r,t.origin,t.direction);var a=g(e);Object(s.f)(n,r,t.origin),Object(s.d)(n,n,1/Object(s.o)(n)*a);var o=k(e,t.origin),c=Object(p.a)(t.origin,n);return Object(l.i)(i),Object(l.p)(i,i,c+o,r),Object(s.l)(n,n,i),n}function _(e,t,n){var r=Object(s.i)(f.d.get(),t,O(e)),i=Object(s.d)(f.d.get(),r,e[3]/Object(s.o)(r));return Object(s.e)(n,i,O(e))}function k(e,t){var n=Object(s.i)(f.d.get(),t,O(e)),r=Object(s.o)(n),i=g(e),o=i+Math.abs(i-r);return Object(a.b)(i/o)}var x=Object(o.e)();function S(e,t,n,r){var i=Object(s.i)(x,t,O(e));switch(n){case 0:var a=Object(c.a)(i,x)[2];return Object(s.v)(r,-Math.sin(a),Math.cos(a),0);case 1:var o=Object(c.a)(i,x),l=o[1],u=o[2],d=Math.sin(l);return Object(s.v)(r,-d*Math.cos(u),-d*Math.sin(u),Math.cos(l));case 2:return Object(s.q)(r,i);default:return}}function T(e,t){var n=Object(s.i)(P,t,O(e));return Object(s.o)(n)-e[3]}var E=Object(h.b)(),C=Object(o.e)(),P=Object(o.e)();Object.freeze(C);var I=Object.freeze({__proto__:null,create:v,copy:y,fromCenterAndRadius:function(e,t){return Object(u.d)(e[0],e[1],e[2],t)},wrap:function(e){return e},clear:m,fromRadius:function(e){return e},getRadius:g,getCenter:O,fromValues:function(e,t,n,r){return Object(u.d)(e,t,n,r)},elevate:function(e,t,n){return e!==n&&Object(s.j)(n,e),n[3]=e[3]+t,n},setExtent:function(e,t,n){return b.error("sphere.setExtent is not yet supported"),e===n?n:y(e,n)},intersectRay:j,intersectScreen:function(e,t,n,r){return j(e,Object(h.e)(t,n,E),r)},intersectsRay:function(e,t){return j(e,t,null)},intersectRayClosestSilhouette:function(e,t,n){if(j(e,t,n))return n;var r=w(e,t,f.d.get());return Object(s.e)(n,t.origin,Object(s.d)(f.d.get(),t.direction,Object(s.n)(t.origin,r)/Object(s.o)(t.direction))),n},closestPointOnSilhouette:w,closestPoint:function(e,t,n){return j(e,t,n)?n:(Object(h.f)(t,O(e),n),_(e,n,n))},projectPoint:_,distanceToSilhouette:function(e,t){var n=Object(s.i)(f.d.get(),t,O(e)),r=Object(s.r)(n),i=e[3]*e[3];return Math.sqrt(Math.abs(r-i))},angleToSilhouette:k,axisAt:S,altitudeAt:T,setAltitudeAt:function(e,t,n,r){var i=T(e,t),a=S(e,t,2,P),o=Object(s.d)(P,a,n-i);return Object(s.e)(r,t,o),r}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return l}));var r=n(14),i=n(122),a=n(86);function o(e,t,n,r){var i=n.typedBuffer,a=n.typedBufferStride,o=e.length;r*=a;for(var s=0;s<o;++s){var c=2*e[s];i[r]=t[c],i[r+1]=t[c+1],r+=a}}function s(e,t,n,r,i){var a=n.typedBuffer,o=n.typedBufferStride,s=e.length;if(r*=o,null==i||1===i)for(var c=0;c<s;++c){var l=3*e[c];a[r]=t[l],a[r+1]=t[l+1],a[r+2]=t[l+2],r+=o}else for(var u=0;u<s;++u)for(var d=3*e[u],f=0;f<i;++f)a[r]=t[d],a[r+1]=t[d+1],a[r+2]=t[d+2],r+=o}function c(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=n.typedBuffer,o=n.typedBufferStride,s=e.length;if(r*=o,1===i)for(var c=0;c<s;++c){var l=4*e[c];a[r]=t[l],a[r+1]=t[l+1],a[r+2]=t[l+2],a[r+3]=t[l+3],r+=o}else for(var u=0;u<s;++u)for(var d=4*e[u],f=0;f<i;++f)a[r]=t[d],a[r+1]=t[d+1],a[r+2]=t[d+2],a[r+3]=t[d+3],r+=o}function l(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;if(n){var o=r.typedBuffer,c=r.typedBufferStride,l=e.length,u=n[0],d=n[1],f=n[2],p=n[4],h=n[5],b=n[6],v=n[8],y=n[9],m=n[10],g=n[12],O=n[13],j=n[14];if(i*=c,1===a)for(var w=0;w<l;++w){var _=3*e[w],k=t[_],x=t[_+1],S=t[_+2];o[i]=u*k+p*x+v*S+g,o[i+1]=d*k+h*x+y*S+O,o[i+2]=f*k+b*x+m*S+j,i+=c}else for(var T=0;T<l;++T)for(var E=3*e[T],C=t[E],P=t[E+1],I=t[E+2],M=u*C+p*P+v*I+g,A=d*C+h*P+y*I+O,R=f*C+b*P+m*I+j,L=0;L<a;++L)o[i]=M,o[i+1]=A,o[i+2]=R,i+=c}else s(e,t,r,i,a)}function u(e,t,n,r,i,a){if(n){var o=n,c=r.typedBuffer,l=r.typedBufferStride,u=e.length,d=o[0],f=o[1],p=o[2],h=o[4],b=o[5],v=o[6],y=o[8],m=o[9],g=o[10],O=Math.abs(1-d*d+h*h+y*y)>1e-5||Math.abs(1-f*f+b*b+m*m)>1e-5||Math.abs(1-p*p+v*v+g*g)>1e-5,j=1e-6,w=1-j;if(i*=l,1===a)for(var _=0;_<u;++_){var k=3*e[_],x=t[k],S=t[k+1],T=t[k+2],E=d*x+h*S+y*T,C=f*x+b*S+m*T,P=p*x+v*S+g*T;if(O){var I=E*E+C*C+P*P;if(I<w&&I>j){var M=Math.sqrt(I);E/=M,C/=M,P/=M}}c[i+0]=E,c[i+1]=C,c[i+2]=P,i+=l}else for(var A=0;A<u;++A){var R=3*e[A],L=t[R],F=t[R+1],D=t[R+2],N=d*L+h*F+y*D,V=f*L+b*F+m*D,z=p*L+v*F+g*D;if(O){var U=N*N+V*V+z*z;if(U<w&&U>j){var B=Math.sqrt(U);N/=B,V/=B,z/=B}}for(var G=0;G<a;++G)c[i+0]=N,c[i+1]=V,c[i+2]=z,i+=l}}else s(e,t,r,i,a)}function d(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=r.typedBuffer,s=r.typedBufferStride,c=e.length;if(i*=s,1===a){if(4===n)for(var l=0;l<c;++l){var u=4*e[l];o[i]=t[u],o[i+1]=t[u+1],o[i+2]=t[u+2],o[i+3]=t[u+3],i+=s}else if(3===n)for(var d=0;d<c;++d){var f=3*e[d];o[i]=t[f],o[i+1]=t[f+1],o[i+2]=t[f+2],o[i+3]=255,i+=s}}else if(4===n)for(var p=0;p<c;++p)for(var h=4*e[p],b=0;b<a;++b)o[i]=t[h],o[i+1]=t[h+1],o[i+2]=t[h+2],o[i+3]=t[h+3],i+=s;else if(3===n)for(var v=0;v<c;++v)for(var y=3*e[v],m=0;m<a;++m)o[i]=t[y],o[i+1]=t[y+1],o[i+2]=t[y+2],o[i+3]=255,i+=s}function f(e,t,n,s,f,p){var h,b=Object(r.a)(t.fieldNames);try{for(b.s();!(h=b.n()).done;){var v=h.value,y=e.vertexAttributes.get(v),m=e.indices.get(v);if(y&&m)switch(v){case"position":Object(a.a)(3===y.size);var g=f.getField(v,i.u);g&&l(m,y.data,n,g,p);break;case"normal":Object(a.a)(3===y.size);var O=f.getField(v,i.u);O&&u(m,y.data,s,O,p,1);break;case"uv0":Object(a.a)(2===y.size);var j=f.getField(v,i.m);j&&o(m,y.data,j,p);break;case"color":Object(a.a)(3===y.size||4===y.size);var w=f.getField(v,i.J);w&&d(m,y.data,y.size,w,p);break;case"symbolColor":Object(a.a)(3===y.size||4===y.size);var _=f.getField(v,i.J);_&&d(m,y.data,y.size,_,p);break;case"tangent":Object(a.a)(4===y.size);var k=f.getField(v,i.C);k&&c(m,y.data,k,p)}}}catch(x){b.e(x)}finally{b.f()}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r,i,a,o,s,c,l,u=n(29),d=n(34),f=n(208);function p(e){e.vertex.code.add(Object(d.a)(r||(r=Object(u.a)(["\n    float screenSizePerspectiveMinSize(float size, vec4 factor) {\n      float nonZeroSize = 1.0 - step(size, 0.0);\n\n      return (\n        factor.z * (\n          1.0 +\n          // Multiply by nzs ensures if size is 0, then we ignore proportionally scaled padding\n          nonZeroSize *\n          2.0 * factor.w / (\n            size + (1.0 - nonZeroSize) // Adding 1 - nzs ensures we divide either by size, or by 1\n          )\n        )\n      );\n    }\n  "])))),e.vertex.code.add(Object(d.a)(i||(i=Object(u.a)(["\n    float screenSizePerspectiveViewAngleDependentFactor(float absCosAngle) {\n      return absCosAngle * absCosAngle * absCosAngle;\n    }\n  "])))),e.vertex.code.add(Object(d.a)(a||(a=Object(u.a)(["\n    vec4 screenSizePerspectiveScaleFactor(float absCosAngle, float distanceToCamera, vec4 params) {\n      return vec4(\n        min(params.x / (distanceToCamera - params.y), 1.0),\n        screenSizePerspectiveViewAngleDependentFactor(absCosAngle),\n        params.z,\n        params.w\n      );\n    }\n  "])))),e.vertex.code.add(Object(d.a)(o||(o=Object(u.a)(["\n    float applyScreenSizePerspectiveScaleFactorFloat(float size, vec4 factor) {\n      return max(mix(size * factor.x, size, factor.y), screenSizePerspectiveMinSize(size, factor));\n    }\n  "])))),e.vertex.code.add(Object(d.a)(s||(s=Object(u.a)(["\n    float screenSizePerspectiveScaleFloat(float size, float absCosAngle, float distanceToCamera, vec4 params) {\n      return applyScreenSizePerspectiveScaleFactorFloat(\n        size,\n        screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params)\n      );\n    }\n  "])))),e.vertex.code.add(Object(d.a)(c||(c=Object(u.a)(["\n    vec2 applyScreenSizePerspectiveScaleFactorVec2(vec2 size, vec4 factor) {\n      return mix(size * clamp(factor.x, screenSizePerspectiveMinSize(size.y, factor) / size.y, 1.0), size, factor.y);\n    }\n  "])))),e.vertex.code.add(Object(d.a)(l||(l=Object(u.a)(["\n    vec2 screenSizePerspectiveScaleVec2(vec2 size, float absCosAngle, float distanceToCamera, vec4 params) {\n      return applyScreenSizePerspectiveScaleFactorVec2(size, screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params));\n    }\n  "]))))}(p||(p={})).bindUniforms=function(e,t){if(t.screenSizePerspective){Object(f.a)(t.screenSizePerspective,e,"screenSizePerspective");var n=t.screenSizePerspectiveAlignment||t.screenSizePerspective;Object(f.a)(n,e,"screenSizePerspectiveAlignment")}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return M}));var r=n(7),i=n.n(r),a=n(15),o=n(10),s=n(2),c=n(3),l=n(5),u=n(6),d=n(0),f=(n(16),n(13)),p=n(1),h=n(58),b=n(8),v=n(18),y=n(12),m=(n(19),n(20),n(139)),g=n(24),O=n(129),j=n(36),w=n(62),_=n(51),k=n(25),x=n(471),S=n(22),T=n(132),E=function(){function e(){Object(s.a)(this,e),this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}return Object(c.a)(e,[{key:"getAvailability",value:function(e,t){if("unknown"!==this._allAvailability)return this._allAvailability;var n=(e-this.location.top)*this.location.width+(t-this.location.left),r=n%8,i=n>>3,a=this._tileAvailabilityBitSet;return i<0||i>a.length?"unknown":a[i]&1<<r?"available":"unavailable"}},{key:"_updateFromData",value:function(e){for(var t=this.location.width,n=this.location.height,r=!0,i=!0,a=Math.ceil(t*n/8),o=new Uint8Array(a),s=0,c=0;c<e.length;c++){var l=c%8;e[c]?(i=!1,o[s]|=1<<l):r=!1,7===l&&++s}i?this._allAvailability="unavailable":r?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=o,this.byteSize+=o.length)}}],[{key:"fromDefinition",value:function(t,n){var r=t.service.request||w.default,i=t.row,a=t.col,s=t.width,c=t.height,l={query:{f:"json"}};return n=n?Object(o.a)(Object(o.a)({},l),n):l,r(function(e){var t;if("vector-tile"===e.service.type)t="".concat(e.service.url,"/tilemap/").concat(e.level,"/").concat(e.row,"/").concat(e.col,"/").concat(e.width,"/").concat(e.height);else{var n=e.service.tileServers;t="".concat(n&&n.length?n[e.row%n.length]:e.service.url,"/tilemap/").concat(e.level,"/").concat(e.row,"/").concat(e.col,"/").concat(e.width,"/").concat(e.height)}var r=e.service.query;return r&&(t="".concat(t,"?").concat(r)),t}(t),n).then((function(e){return e.data})).catch((function(e){if(e&&e.details&&422===e.details.httpStatus)return{location:{top:i,left:a,width:s,height:c},valid:!0,data:Object(T.b)(s*c,0)};throw e})).then((function(t){if(t.location&&(t.location.top!==i||t.location.left!==a||t.location.width!==s||t.location.height!==c))throw new v.a("tilemap:location-mismatch","Tilemap response for different location than requested",{response:t,definition:{top:i,left:a,width:s,height:c}});return e.fromJSON(t)}))}},{key:"fromJSON",value:function(t){e.validateJSON(t);var n=new e;return n.location=Object.freeze(Object(S.a)(t.location)),n._updateFromData(t.data),Object.freeze(n)}},{key:"validateJSON",value:function(e){if(!e||!e.location)throw new v.a("tilemap:missing-location","Location missing from tilemap response");if(!1===e.valid)throw new v.a("tilemap:invalid","Tilemap response was marked as invalid");if(!e.data)throw new v.a("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(e.data))throw new v.a("tilemap:data-mismatch","Data must be an array of numbers");if(e.data.length!==e.location.width*e.location.height)throw new v.a("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}]),e}();function C(e){return"".concat(e.level,"/").concat(e.row,"/").concat(e.col,"/").concat(e.width,"/").concat(e.height)}var P,I=f.a.getLogger("esri.layers.support.TilemapCache"),M=P=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e))._handles=new _.a,r._pendingTilemapRequests={},r._availableLevels={},r.levels=5,r.cacheByteSize=2097152,r.request=w.default,r._prefetchingEnabled=!0,r}return Object(c.a)(n,[{key:"initialize",value:function(){var e=this;this._tilemapCache=new x.a(this.cacheByteSize),this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers?"],(function(){return e._initializeTilemapDefinition()})),Object(k.a)(this,"layer.tileInfo.lods",(function(t){return e._initializeAvailableLevels(t)}),!0)]),this._initializeTilemapDefinition()}},{key:"destroy",value:function(){this._handles&&(this._handles.destroy(),this._handles=null)}},{key:"castLevels",value:function(e){return e<=2?(I.error("Minimum levels for Tilemap is 3, but got ",e),3):e}},{key:"size",get:function(){return 1<<this.levels}},{key:"fetchTilemap",value:function(e,t,n,r){var i=this;if(!this._availableLevels[e])return Promise.reject(new v.a("tilemap-cache:level-unavailable","Level ".concat(e," is unavailable in the service")));var a=this._tmpTilemapDefinition,s=this._tilemapFromCache(e,t,n,a);if(s)return Promise.resolve(s);var c=r&&r.signal;return r=Object(o.a)(Object(o.a)({},r),{},{signal:null}),new Promise((function(e,t){Object(g.p)(c,(function(){return t(Object(g.e)())}));var n=C(a),o=i._pendingTilemapRequests[n];if(!o){o=E.fromDefinition(a,r).then((function(e){return i._tilemapCache.put(n,e,e.byteSize),e}));var s=function(){return delete i._pendingTilemapRequests[n]};i._pendingTilemapRequests[n]=o,o.then(s,s)}o.then(e,t)}))}},{key:"getAvailability",value:function(e,t,n){if(!this._availableLevels[e])return"unavailable";var r=this._tilemapFromCache(e,t,n,this._tmpTilemapDefinition);return r?r.getAvailability(t,n):"unknown"}},{key:"getAvailabilityUpsample",value:function(e,t,n,r){r.level=e,r.row=t,r.col=n;var i=this.layer.tileInfo;for(i.updateTileInfo(r);;){var a=this.getAvailability(r.level,r.row,r.col);if("unavailable"!==a)return a;if(!i.upsampleTile(r))return"unavailable"}}},{key:"fetchAvailability",value:function(e,t,n,r){return this._availableLevels[e]?this.fetchTilemap(e,t,n,r).catch((function(e){return e})).then((function(r){if(r instanceof E){var i=r.getAvailability(t,n);return"unavailable"===i?Promise.reject(new v.a("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:n})):i}if(Object(g.m)(r))throw r;return"unknown"})):Promise.reject(new v.a("tilemap-cache:level-unavailable","Level ".concat(e," is unavailable in the service")))}},{key:"fetchAvailabilityUpsample",value:function(e,t,n,r,i){var a=this;r.level=e,r.row=t,r.col=n;var o=this.layer.tileInfo;o.updateTileInfo(r);var s=this.fetchAvailability(e,t,n,i).catch((function(e){if(Object(g.m)(e))throw e;if(o.upsampleTile(r))return a.fetchAvailabilityUpsample(r.level,r.row,r.col,r);throw e}));return this._fetchAvailabilityUpsamplePrefetch(r.id,e,t,n,i,s),s}},{key:"_fetchAvailabilityUpsamplePrefetch",value:function(){var e=Object(a.a)(i.a.mark((function e(t,n,r,a,s,c){var l,u,d,f,p,h,b,v,y,m=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._prefetchingEnabled){e.next=2;break}return e.abrupt("return");case 2:if(l="prefetch-".concat(t),!this._handles.has(l)){e.next=5;break}return e.abrupt("return");case 5:return u=Object(g.d)(),c.then((function(){return u.abort()}),(function(){return u.abort()})),d=!1,f={remove:function(){d||(d=!0,u.abort())}},this._handles.add(f,l),e.next=12,Object(O.c)(10,u.signal).catch((function(){}));case 12:if(d||(d=!0,this._handles.remove(l)),!Object(g.n)(u)){e.next=15;break}return e.abrupt("return");case 15:for(p={id:t,level:n,row:r,col:a},h=Object(o.a)(Object(o.a)({},s),{},{signal:u.signal}),b=this.layer.tileInfo,v=function(e){var t=m.fetchAvailability(p.level,p.row,p.col,h);P._prefetches.push(t);var n=function(){P._prefetches.removeUnordered(t)};t.then(n,n)},y=0;P._prefetches.length<P._maxPrefetch&&b.upsampleTile(p);++y)v();case 18:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,a,o){return e.apply(this,arguments)}}()},{key:"_initializeTilemapDefinition",value:function(){if(this.layer.parsedUrl){var e=this.layer.parsedUrl,t=e.query;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:t?Object(y.D)(t):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}}},{key:"_tilemapFromCache",value:function(e,t,n,r){r.level=e,r.row=t-t%this.size,r.col=n-n%this.size;var i=C(r);return this._tilemapCache.get(i)}},{key:"_initializeAvailableLevels",value:function(e){var t=this;this._availableLevels={},e&&e.forEach((function(e){return t._availableLevels[e.level]=!0}))}},{key:"test",get:function(){var e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:function(t,n,r){return!!e._tilemapFromCache(t,n,r,e._tmpTilemapDefinition)}}}}]),n}(j.a);M._maxPrefetch=4,M._prefetches=new m.a({initialSize:P._maxPrefetch}),Object(d.a)([Object(p.b)({constructOnly:!0,type:Number})],M.prototype,"levels",void 0),Object(d.a)([Object(h.a)("levels")],M.prototype,"castLevels",null),Object(d.a)([Object(p.b)({readOnly:!0,type:Number})],M.prototype,"size",null),Object(d.a)([Object(p.b)({constructOnly:!0,type:Number})],M.prototype,"cacheByteSize",void 0),Object(d.a)([Object(p.b)({constructOnly:!0})],M.prototype,"layer",void 0),Object(d.a)([Object(p.b)({constructOnly:!0})],M.prototype,"request",void 0),M=P=Object(d.a)([Object(b.a)("esri.layers.support.TilemapCache")],M)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(67);function i(e,t){var n=t;return n.rawResponse=!1,Object(r.d)(e,n).then((function(e){var t={token:e.access_token,username:e.username,expires:new Date(Date.now()+(1e3*e.expires_in-1e3)),ssl:!0===e.ssl};return e.refresh_token&&(t.refreshToken=e.refresh_token),t}))}},function(e,t,n){"use strict";function r(e,t){if(0===e.length)return[];for(var n=[],r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(47),i=Object(r.b)()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"})},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(1)),u=n(58),d=n(8),f=(n(12),n(19),n(20),n(28)),p=n(38),h=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).decoration="none",r.family="sans-serif",r.size=9,r.style="normal",r.weight="normal",r}return Object(a.a)(n,[{key:"castSize",value:function(e){return Object(p.j)(e)}},{key:"clone",value:function(){return new r({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}},{key:"hash",value:function(){return"".concat(this.decoration,".").concat(this.family,".").concat(this.size,".").concat(this.style,".").concat(this.weight)}}]),n}(f.a);Object(c.a)([Object(l.b)({type:["underline","line-through","none"],json:{default:"none",write:!0}})],h.prototype,"decoration",void 0),Object(c.a)([Object(l.b)({type:String,json:{write:!0}})],h.prototype,"family",void 0),Object(c.a)([Object(l.b)({type:Number,json:{write:{overridePolicy:function(e,t,n){return{enabled:!n||!n.textSymbol3D}}}}})],h.prototype,"size",void 0),Object(c.a)([Object(u.a)("size")],h.prototype,"castSize",null),Object(c.a)([Object(l.b)({type:["normal","italic","oblique"],json:{default:"normal",write:!0}})],h.prototype,"style",void 0),Object(c.a)([Object(l.b)({type:["normal","bold","bolder","lighter"],json:{default:"normal",write:!0}})],h.prototype,"weight",void 0);var b=h=r=Object(c.a)([Object(d.a)("esri.symbols.Font")],h);t.a=b},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(2),i=n(3),a=n(5),o=n(6),s=n(0),c=(n(16),n(13),n(17),n(1)),l=n(8),u=(n(12),n(19),n(20),function(e){var t=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).goToOverride=null,e.view=null,e}return Object(i.a)(n,[{key:"callGoTo",value:function(e){var t=this.view;return this.goToOverride?this.goToOverride(t,e):t.goTo(e.target,e.options)}}]),n}(e);return Object(s.a)([Object(c.b)()],t.prototype,"goToOverride",void 0),Object(s.a)([Object(c.b)()],t.prototype,"view",void 0),t=Object(s.a)([Object(l.a)("esri.widgets.support.GoTo")],t)})},function(e,t,n){"use strict";var r,i=n(31),a=n(14),o=n(7),s=n.n(o),c=n(10),l=n(15),u=n(2),d=n(3),f=n(5),p=n(6),h=n(0),b=(n(16),n(22)),v=n(13),y=n(17),m=n(90),g=n(1),O=n(58),j=n(41),w=n(8),_=n(42),k=n(18),x=n(12),S=(n(19),n(126)),T=(n(20),n(63)),E=(n(71),n(40)),C=n(54),P=n(192),I=n(205),M=n(62),A=n(133),R=n(76),L=n(216),F=(n(166),n(432),n(379),n(477),n(479),n(478),n(384),n(320)),D=(n(349),n(266)),N=n(464),V=n(322),z=n(449),U=n(427),B=n(228),G=n(475),q=n(121),H=n(91);function W(e){return e&&"esriSMS"===e.type}function $(e,t,n){var r;return{ignoreOrigin:!0,enabled:!!n&&"map-image"===(null==(r=n.layer)?void 0:r.type)&&(n.writeSublayerStructure||this.originIdOf(t)>=Object(S.d)(n.origin))}}function J(e,t,n){var r;return{enabled:!!n&&"tile"===(null==(r=n.layer)?void 0:r.type)&&this._isOverridden(t)}}function Y(e,t,n){return{ignoreOrigin:!0,enabled:n&&n.writeSublayerStructure||!1}}function K(e,t,n){return{ignoreOrigin:!0,enabled:!!n&&(n.writeSublayerStructure||this.originIdOf(t)>=Object(S.d)(n.origin))}}var Z=v.a.getLogger("esri.layers.support.Sublayer"),X=0,Q=new Set;Q.add("layer"),Q.add("parent"),Q.add("loaded"),Q.add("loadStatus"),Q.add("loadError"),Q.add("loadWarnings");var ee=r=function(e){Object(f.a)(o,e);var t=Object(p.a)(o);function o(e){var n;return Object(u.a)(this,o),(n=t.call(this,e)).capabilities=void 0,n.fields=null,n.fullExtent=null,n.globalIdField=null,n.legendEnabled=!0,n.objectIdField=null,n.popupEnabled=!0,n.popupTemplate=null,n.sourceJSON=null,n.title=null,n.typeIdField=null,n.types=null,n}return Object(d.a)(o,[{key:"load",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.addResolvingPromise(Object(l.a)(s.a.mark((function e(){var r,i,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.layer||n.url){e.next=2;break}throw new k.a("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:n});case 2:if(i=null,n.layer&&!(n.originIdOf("url")>2)&&"data-layer"!==(null==(r=n.source)?void 0:r.type)){e.next=9;break}return e.next=6,Object(M.default)(n.url,Object(c.a)({responseType:"json",query:{f:"json"}},t));case 6:i=e.sent.data,e.next=14;break;case 9:return o=n.id,"map-layer"===(null==(a=n.source)?void 0:a.type)&&(o=n.source.mapLayerId),e.next=13,n.layer.fetchSublayerInfo(o,t);case 13:i=e.sent;case 14:i&&(n.sourceJSON=i,n.read({layerDefinition:i},{origin:"service"}));case 15:case"end":return e.stop()}}),e)})))()),this));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readCapabilities",value:function(e,t){var n=(e=(t=t.layerDefinition||t).capabilities||e)?e.toLowerCase().split(",").map((function(e){return e.trim()})):[];return{exportMap:{supportsModification:!!t.canModifyLayer},operations:{supportsQuery:-1!==n.indexOf("query")}}}},{key:"definitionExpression",set:function(e){this._setAndNotifyLayer("definitionExpression",e)}},{key:"fieldsIndex",get:function(){return new N.a(this.fields||[])}},{key:"readGlobalIdFieldFromService",value:function(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){var n,r=Object(a.a)(t.fields);try{for(r.s();!(n=r.n()).done;){var i=n.value;if("esriFieldTypeGlobalID"===i.type)return i.name}}catch(o){r.e(o)}finally{r.f()}}}},{key:"id",get:function(){var e=this._get("id");return null==e?X++:e},set:function(e){this._get("id")!==e&&(!1!==this.get("layer.capabilities.exportMap.supportsDynamicLayers")?this._set("id",e):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}},{key:"labelingInfo",set:function(e){this._setAndNotifyLayer("labelingInfo",e)}},{key:"writeLabelingInfo",value:function(e,t,n,r){e&&e.length&&(t.layerDefinition={drawingInfo:{labelingInfo:e.map((function(e){return e.write({},r)}))}})}},{key:"labelsVisible",set:function(e){this._setAndNotifyLayer("labelsVisible",e)}},{key:"layer",set:function(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach((function(t){return t.layer=e}))}},{key:"listMode",set:function(e){this._set("listMode",e)}},{key:"minScale",set:function(e){this._setAndNotifyLayer("minScale",e)}},{key:"readMinScale",value:function(e,t){return t.minScale||t.layerDefinition&&t.layerDefinition.minScale||0}},{key:"maxScale",set:function(e){this._setAndNotifyLayer("maxScale",e)}},{key:"readMaxScale",value:function(e,t){return t.maxScale||t.layerDefinition&&t.layerDefinition.maxScale||0}},{key:"readObjectIdFieldFromService",value:function(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){var n,r=Object(a.a)(t.fields);try{for(r.s();!(n=r.n()).done;){var i=n.value;if("esriFieldTypeOID"===i.type)return i.name}}catch(o){r.e(o)}finally{r.f()}}}},{key:"opacity",set:function(e){this._setAndNotifyLayer("opacity",e)}},{key:"readOpacity",value:function(e,t){var n=t.layerDefinition;return 1-.01*(null!=n.transparency?n.transparency:n.drawingInfo.transparency)}},{key:"writeOpacity",value:function(e,t,n,r){t.layerDefinition={drawingInfo:{transparency:100-100*e}}}},{key:"writeParent",value:function(e,t){this.parent&&this.parent!==this.layer?t.parentLayerId=Object(y.e)(this.parent.id):t.parentLayerId=-1}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"renderer",set:function(e){if(e){var t,n=Object(a.a)(e.getSymbols());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(Object(R.c)(r)){Z.warn("Sublayer renderer should use 2D symbols");break}}}catch(i){n.e(i)}finally{n.f()}}this._setAndNotifyLayer("renderer",e)}},{key:"source",get:function(){return this._get("source")||new U.a({mapLayerId:this.id})},set:function(e){this._setAndNotifyLayer("source",e)}},{key:"sublayers",set:function(e){this._handleSublayersChange(e,this._get("sublayers")),this._set("sublayers",e)}},{key:"castSublayers",value:function(e){return Object(y.m)(E.a.ofType(r),e)}},{key:"writeSublayers",value:function(e,t,n){this.get("sublayers.length")&&(t[n]=this.sublayers.map((function(e){return e.id})).toArray().reverse())}},{key:"readTypeIdField",value:function(e,t){var n=(t=t.layerDefinition||t).typeIdField;if(n){var r=Object(C.q)(t.fields,n);if(r)return r.name}return null}},{key:"url",get:function(){var e,t,n=null!=(e=null==(t=this.layer)?void 0:t.parsedUrl)?e:this._lastParsedUrl,r=this.source;if(!n)return null;if(this._lastParsedUrl=n,"map-layer"===(null==r?void 0:r.type))return"".concat(n.path,"/").concat(r.mapLayerId);var i={layer:JSON.stringify({source:this.source})};return"".concat(n.path,"/dynamicLayer?").concat(Object(x.D)(i))},set:function(e){e?this._override("url",e):this._clearOverride("url")}},{key:"visible",set:function(e){this._setAndNotifyLayer("visible",e)}},{key:"writeVisible",value:function(e,t,n,r){t[n]=this.getAtOrigin("defaultVisibility","service")||e}},{key:"clone",value:function(){var e=Object(m.a)(this).store,t=new r;return Object(m.a)(t).store=e.clone(Q),this.commitProperty("url"),t._lastParsedUrl=this._lastParsedUrl,t}},{key:"createPopupTemplate",value:function(e){return Object(G.a)(this,e)}},{key:"createQuery",value:function(){return new q.a({returnGeometry:!0,where:this.definitionExpression||"1=1"})}},{key:"createFeatureLayer",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,r,i,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasOwnProperty("sublayers")){e.next=2;break}return e.abrupt("return",null);case 2:return i=null==(t=this.layer)?void 0:t.parsedUrl,e.next=6,Promise.resolve().then(n.bind(null,265));case 6:return e.t0=e.sent.default,e.t1={url:i.path},a=new e.t0(e.t1),e.abrupt("return",(i&&this.source&&("map-layer"===this.source.type?a.layerId=this.source.mapLayerId:a.dynamicDataSource=this.source),null!=this.layer.refreshInterval&&(a.refreshInterval=this.layer.refreshInterval),this.definitionExpression&&(a.definitionExpression=this.definitionExpression),this.originIdOf("labelingInfo")>2&&(a.labelingInfo=Object(b.a)(this.labelingInfo)),this.originIdOf("labelsVisible")>0&&(a.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>0&&(a.legendEnabled=this.legendEnabled),this.originIdOf("visible")>0&&(a.visible=this.visible),this.originIdOf("minScale")>0&&(a.minScale=this.minScale),this.originIdOf("maxScale")>0&&(a.maxScale=this.maxScale),this.originIdOf("opacity")>0&&(a.opacity=this.opacity),this.originIdOf("popupTemplate")>0&&(a.popupTemplate=Object(b.a)(this.popupTemplate)),this.originIdOf("renderer")>2&&(a.renderer=Object(b.a)(this.renderer)),"data-layer"===(null==(r=this.source)?void 0:r.type)&&(a.dynamicDataSource=this.source.clone()),this.originIdOf("title")>0&&(a.title=this.title),"map-image"===this.layer.type&&this.layer.originIdOf("customParameters")>0&&(a.customParameters=this.layer.customParameters),"tile"===this.layer.type&&this.layer.originIdOf("customParameters")>0&&(a.customParameters=this.layer.customParameters),a));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFeatureType",value:function(e){var t=this.typeIdField,n=this.types;if(!t||!e)return null;var r=e.attributes?e.attributes[t]:void 0;if(null==r)return null;var i=null;return n.some((function(e){var t=e.id;return null!=t&&(t.toString()===r.toString()&&(i=e),!!i)})),i}},{key:"getFieldDomain",value:function(e,t){var n=t&&t.feature,r=this.getFeatureType(n);if(r){var i=r.domains&&r.domains[e];if(i&&"inherited"!==i.type)return i}return this._getLayerDomain(e)}},{key:"queryFeatures",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.createQuery(),r=arguments.length>1?arguments[1]:void 0;return this.load().then((function(){if(!e.get("capabilities.operations.supportsQuery"))throw new k.a("Sublayer.queryFeatures","this layer doesn't support queries.");return Promise.all([Promise.resolve().then(n.bind(null,236)),Promise.resolve().then(n.bind(null,204))])})).then((function(n){var a=Object(i.a)(n,2),o=a[0].executeQuery,s=a[1].default;return o(e.url,q.a.from(t),e.layer?e.layer.spatialReference:null,Object(c.a)(Object(c.a)({},r),{},{query:Object(c.a)({},e.layer.customParameters)})).then((function(e){return s.fromJSON(e.data)}))})).then((function(t){return t&&t.features&&t.features.forEach((function(t){t.sourceLayer=e})),t}))}},{key:"toExportImageJSON",value:function(){var e,t=this,n={id:this.id,source:(null==(e=this.source)?void 0:e.toJSON())||{mapLayerId:this.id,type:"mapLayer"}};this.definitionExpression&&(n.definitionExpression=this.definitionExpression);var r=["renderer","labelingInfo","opacity","labelsVisible"].reduce((function(e,n){return e[n]=t.originIdOf(n),e}),{});if(Object.keys(r).some((function(e){return r[e]>2}))){var i=n.drawingInfo={};r.renderer>2&&(i.renderer=this.renderer?this.renderer.toJSON():null),r.labelsVisible>2&&(i.showLabels=this.labelsVisible),this.labelsVisible&&r.labelingInfo>2&&(i.labelingInfo=this.labelingInfo?this.labelingInfo.map((function(e){return e.write({},{origin:"service",layer:t.layer})})):null,i.showLabels=!0),r.opacity>2&&(i.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(i.renderer)}return n}},{key:"_assignDefaultSymbolColors",value:function(e){this._forEachSimpleMarkerSymbols(e,(function(e){e.color||"esriSMSX"!==e.style&&"esriSMSCross"!==e.style||(e.outline&&e.outline.color?e.color=e.outline.color:e.color=[0,0,0,0])}))}},{key:"_forEachSimpleMarkerSymbols",value:function(e,t){if(e){var n,r="uniqueValueInfos"in e?e.uniqueValueInfos:"classBreakInfos"in e?e.classBreakInfos:[],i=Object(a.a)(r);try{for(i.s();!(n=i.n()).done;){var o=n.value;W(o.symbol)&&t(o.symbol)}}catch(s){i.e(s)}finally{i.f()}"symbol"in e&&W(e.symbol)&&t(e.symbol),"defaultSymbol"in e&&W(e.defaultSymbol)&&t(e.defaultSymbol)}}},{key:"_setAndNotifyLayer",value:function(e,t){var n,r,i=this.layer,a=this._get(e);switch(e){case"definitionExpression":n="supportsSublayerDefinitionExpression";case"minScale":case"maxScale":case"visible":n="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":n="supportsDynamicLayers",r="supportsModification"}var o=Object(m.a)(this).getDefaultOrigin();if("service"!==o){if(n&&!1===this.get("layer.capabilities.exportMap.".concat(n)))return void this._logLockedError(e,"capability not available 'layer.capabilities.exportMap.".concat(n,"'"));if(r&&!1===this.get("capabilities.exportMap.".concat(r)))return void this._logLockedError(e,"capability not available 'capabilities.exportMap.".concat(r,"'"))}"source"!==e||"not-loaded"===this.loadStatus?(this._set(e,t),"service"!==o&&a!==t&&i&&i.emit&&i.emit("sublayer-update",{propertyName:e,target:this})):this._logLockedError(e,"'source' can't be changed after calling sublayer.load()")}},{key:"_handleSublayersChange",value:function(e,t){var n=this;t&&(t.forEach((function(e){e.parent=null,e.layer=null})),this.handles.removeAll()),e&&(e.forEach((function(e){e.parent=n,e.layer=n.layer})),this.handles.add([e.on("after-add",(function(e){var t=e.item;t.parent=n,t.layer=n.layer})),e.on("after-remove",(function(e){var t=e.item;t.parent=null,t.layer=null})),e.on("before-changes",(function(e){var t=n.get("layer.capabilities.exportMap.supportsSublayersChanges");null==t||t||(Z.error(new k.a("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:n,layer:n.layer})),e.preventDefault())}))]))}},{key:"_logLockedError",value:function(e,t){Z.error(new k.a("sublayer:locked","Property '".concat(e,"' can't be changed on Sublayer from the layer '").concat(this.layer.id,"'"),{reason:t,sublayer:this,layer:this.layer}))}},{key:"_getLayerDomain",value:function(e){var t=this.fieldsIndex.get(e);return t?t.domain:null}}]),o}(Object(H.b)(Object(L.a)(Object(P.a)(A.a))));ee.test={isMapImageLayerOverridePolicy:function(e){return e===Y||e===$},isTileImageLayerOverridePolicy:function(e){return e===J}},Object(h.a)([Object(g.b)({readOnly:!0})],ee.prototype,"capabilities",void 0),Object(h.a)([Object(j.a)("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],ee.prototype,"readCapabilities",null),Object(h.a)([Object(g.b)({type:String,value:null,json:{read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression",overridePolicy:$}}})],ee.prototype,"definitionExpression",null),Object(h.a)([Object(g.b)({type:[D.a],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],ee.prototype,"fields",void 0),Object(h.a)([Object(g.b)({readOnly:!0})],ee.prototype,"fieldsIndex",null),Object(h.a)([Object(g.b)({type:T.a,json:{read:{source:"layerDefinition.extent"}}})],ee.prototype,"fullExtent",void 0),Object(h.a)([Object(g.b)({type:String})],ee.prototype,"globalIdField",void 0),Object(h.a)([Object(j.a)("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],ee.prototype,"readGlobalIdFieldFromService",null),Object(h.a)([Object(g.b)({type:y.a,json:{write:{ignoreOrigin:!0}}})],ee.prototype,"id",null),Object(h.a)([Object(g.b)({value:null,type:[V.a],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:Y}}})],ee.prototype,"labelingInfo",null),Object(h.a)([Object(_.a)("labelingInfo")],ee.prototype,"writeLabelingInfo",null),Object(h.a)([Object(g.b)({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:Y}}})],ee.prototype,"labelsVisible",null),Object(h.a)([Object(g.b)({value:null})],ee.prototype,"layer",null),Object(h.a)([Object(g.b)({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:K}}})],ee.prototype,"legendEnabled",void 0),Object(h.a)([Object(g.b)({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],ee.prototype,"listMode",null),Object(h.a)([Object(g.b)({type:Number,value:0,json:{write:{overridePolicy:Y}}})],ee.prototype,"minScale",null),Object(h.a)([Object(j.a)("minScale",["minScale","layerDefinition.minScale"])],ee.prototype,"readMinScale",null),Object(h.a)([Object(g.b)({type:Number,value:0,json:{write:{overridePolicy:Y}}})],ee.prototype,"maxScale",null),Object(h.a)([Object(j.a)("maxScale",["maxScale","layerDefinition.maxScale"])],ee.prototype,"readMaxScale",null),Object(h.a)([Object(g.b)({type:String})],ee.prototype,"objectIdField",void 0),Object(h.a)([Object(j.a)("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],ee.prototype,"readObjectIdFieldFromService",null),Object(h.a)([Object(g.b)({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:Y}}})],ee.prototype,"opacity",null),Object(h.a)([Object(j.a)("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],ee.prototype,"readOpacity",null),Object(h.a)([Object(_.a)("opacity")],ee.prototype,"writeOpacity",null),Object(h.a)([Object(g.b)({json:{type:y.a,write:{target:"parentLayerId",allowNull:!0,overridePolicy:Y}}})],ee.prototype,"parent",void 0),Object(h.a)([Object(_.a)("parent")],ee.prototype,"writeParent",null),Object(h.a)([Object(g.b)({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:function(e,t){return!t.disablePopup}},write:{target:"disablePopup",overridePolicy:K,writer:function(e,t,n){t[n]=!e}}}})],ee.prototype,"popupEnabled",void 0),Object(h.a)([Object(g.b)({type:I.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:K}}})],ee.prototype,"popupTemplate",void 0),Object(h.a)([Object(g.b)({readOnly:!0})],ee.prototype,"defaultPopupTemplate",null),Object(h.a)([Object(g.b)({types:F.a,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:Y},origins:{"web-scene":{types:F.b,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:Y}}}}})],ee.prototype,"renderer",null),Object(h.a)([Object(g.b)({types:{key:"type",base:null,typeMap:{"data-layer":B.a,"map-layer":U.a}},cast:function(e){if(e){if("mapLayerId"in e)return Object(y.d)(U.a,e);if("dataSource"in e)return Object(y.d)(B.a,e)}return e},json:{name:"layerDefinition.source",write:{overridePolicy:Y}}})],ee.prototype,"source",null),Object(h.a)([Object(g.b)()],ee.prototype,"sourceJSON",void 0),Object(h.a)([Object(g.b)({value:null,json:{type:[y.a],write:{target:"subLayerIds",allowNull:!0,overridePolicy:Y}}})],ee.prototype,"sublayers",null),Object(h.a)([Object(O.a)("sublayers")],ee.prototype,"castSublayers",null),Object(h.a)([Object(_.a)("sublayers")],ee.prototype,"writeSublayers",null),Object(h.a)([Object(g.b)({type:String,json:{read:{source:"name"},write:{target:"name",allowNull:!0,overridePolicy:K}}})],ee.prototype,"title",void 0),Object(h.a)([Object(g.b)({type:String})],ee.prototype,"typeIdField",void 0),Object(h.a)([Object(j.a)("typeIdField",["layerDefinition.typeIdField"])],ee.prototype,"readTypeIdField",null),Object(h.a)([Object(g.b)({type:[z.a],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],ee.prototype,"types",void 0),Object(h.a)([Object(g.b)({type:String,json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:J}}})],ee.prototype,"url",null),Object(h.a)([Object(g.b)({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:Y}}})],ee.prototype,"visible",null),Object(h.a)([Object(_.a)("visible")],ee.prototype,"writeVisible",null);var te=ee=r=Object(h.a)([Object(w.a)("esri.layers.support.Sublayer")],ee);t.a=te},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(5),o=n(6),s=n(0),c=(n(16),n(13),n(17),n(1)),l=n(8),u=(n(12),n(19),n(20),n(28)),d=n(68),f=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).geometries=null,i.outSpatialReference=null,i.transformation=null,i.transformForward=null,i}return Object(i.a)(n,[{key:"toJSON",value:function(){var e=this.geometries.map((function(e){return e.toJSON()})),t=this.geometries[0],n={};return n.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),n.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),n.geometries=JSON.stringify({geometryType:Object(d.c)(t),geometries:e}),this.transformation&&(n.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(n.transformForward=this.transformForward),n}}]),n}(u.a);Object(s.a)([Object(c.b)()],f.prototype,"geometries",void 0),Object(s.a)([Object(c.b)({json:{read:{source:"outSR"}}})],f.prototype,"outSpatialReference",void 0),Object(s.a)([Object(c.b)()],f.prototype,"transformation",void 0),Object(s.a)([Object(c.b)()],f.prototype,"transformForward",void 0);var p=f=Object(s.a)([Object(l.a)("esri.tasks.support.ProjectParameters")],f);t.a=p},function(e,t,n){"use strict";var r,i=n(2),a=n(5),o=n(6),s=n(0),c=(n(16),n(13),n(17),n(1)),l=n(8),u=(n(12),n(19),n(20),n(414)),d=n(3),f=n(22),p=n(28),h=n(531),b=r=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).fields=[],r.normalizeField=null,r.series=[],r.tooltipField=null,r}return Object(d.a)(n,[{key:"clone",value:function(){return new r({fields:Object(f.a)(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}}]),n}(p.a);Object(s.a)([Object(c.b)({type:[String],json:{write:!0}})],b.prototype,"fields",void 0),Object(s.a)([Object(c.b)({type:String,json:{write:!0}})],b.prototype,"normalizeField",void 0),Object(s.a)([Object(c.b)({type:[h.a],json:{read:!1}})],b.prototype,"series",void 0),Object(s.a)([Object(c.b)({type:String,json:{write:!0}})],b.prototype,"tooltipField",void 0);var v=b=r=Object(s.a)([Object(l.a)("esri.popup.content.support.ChartMediaInfoValue")],b),y=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).type=null,r.value=null,r}return n}(u.a);Object(s.a)([Object(c.b)({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],y.prototype,"type",void 0),Object(s.a)([Object(c.b)({type:v,json:{write:!0}})],y.prototype,"value",void 0);var m=y=Object(s.a)([Object(l.a)("esri.popup.content.mixins.ChartMediaInfo")],y);t.a=m},function(e,t,n){"use strict";var r=n(278),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function c(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var l=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(h){var i=p(n);i&&i!==h&&e(t,i,r)}var o=u(n);d&&(o=o.concat(d(n)));for(var s=c(t),b=c(n),v=0;v<o.length;++v){var y=o[v];if(!a[y]&&(!r||!r[y])&&(!b||!b[y])&&(!s||!s[y])){var m=f(n,y);try{l(t,y,m)}catch(g){}}}}return t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e,t,n,r,i){e=e||"UNKNOWN_ERROR",t=t||"UNKNOWN_ERROR_CODE",this.name="ArcGISRequestError",this.message="UNKNOWN_ERROR_CODE"===t?e:t+": "+e,this.originalMessage=e,this.code=t,this.response=n,this.url=r,this.options=i};r.prototype=Object.create(Error.prototype),r.prototype.constructor=r},function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return p}));var r=n(13),i=n(17),a=n(12),o=n(40),s=n(345),c=n(226),l=r.a.getLogger("esri.support.basemapUtils");function u(){return{}}function d(e){for(var t in e){var n=e[t];!1===(null==n?void 0:n.destroyed)&&n.destroy(),delete e[t]}}function f(e,t){var n,r;if("string"==typeof e){if(!(e in s.a)){var a=Object.keys(s.a).map((function(e){return'"'.concat(e,'"')})).join(", ");return l.warn("Unable to find basemap definition for: ".concat(e,". Try one of these: ").concat(a)),null}t&&(r=t[e]),r||(r=c.default.fromId(e),t&&(t[e]=r))}else r=Object(i.m)(c.default,e);return null!=(n=r)&&n.destroyed&&(l.warn("The provided basemap is already destroyed",{basemap:r}),r=null),r}function p(e){var t=null,n=b(e),r=!n.baseLayers.length;for(var i in s.a){var a=O(n,m(s.a[i]),{mustMatchReferences:r});if("equal"===a){t=i;break}"base-layers-equal"===a&&(t=i)}return t}function h(e,t){return e===t||"equal"===O(b(e),b(t),{mustMatchReferences:!0})}function b(e){return e?!e.loaded&&e.resourceInfo?m(e.resourceInfo.data):{baseLayers:v(e.baseLayers),referenceLayers:v(e.referenceLayers)}:null}function v(e){return(o.a.isCollection(e)?e.toArray():e).map(y)}function y(e){return{type:e.type,url:_("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl),minScale:"minScale"in e&&null!=e.minScale?e.minScale:0,maxScale:"maxScale"in e&&null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visible||!!e.visible}}function m(e){return e?{baseLayers:g(e.baseMapLayers.filter((function(e){return!e.isReference}))),referenceLayers:g(e.baseMapLayers.filter((function(e){return e.isReference})))}:null}function g(e){return e.map((function(e){return function(e){var t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;default:t="unknown"}return{type:t,url:_(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:null!=e.minScale?e.minScale:0,maxScale:null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visibility||!!e.visibility}}(e)}))}function O(e,t,n){return null!=e!=(null!=t)?"not-equal":e?j(e.baseLayers,t.baseLayers)?j(e.referenceLayers,t.referenceLayers)?"equal":n.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function j(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!w(e[n],t[n]))return!1;return!0}function w(e,t){return e.type===t.type&&e.url===t.url&&e.minScale===t.minScale&&e.maxScale===t.maxScale&&e.visible===t.visible&&e.opacity===t.opacity}function _(e){return e?Object(a.C)(e).replace(/^\s*https?:/i,"").toLowerCase():""}},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17)),u=n(1),d=n(49),f=n(8),p=(n(12),n(19),n(20),n(28)),h=n(528),b=n(102),v=n(147),y=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).dateFormat=null,r.digitSeparator=!1,r.places=null,r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}},{key:"format",value:function(e){return this.dateFormat?Object(b.b)(e,Object(b.a)(this.dateFormat)):Object(v.b)(e,Object(v.a)(this))}}]),n}(p.a);Object(c.a)([Object(d.a)(h.a)],y.prototype,"dateFormat",void 0),Object(c.a)([Object(u.b)({type:Boolean,json:{write:!0}})],y.prototype,"digitSeparator",void 0),Object(c.a)([Object(u.b)({type:l.a,json:{write:!0}})],y.prototype,"places",void 0);var m=y=r=Object(c.a)([Object(f.a)("esri.popup.support.FieldInfoFormat")],y);t.a=m},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s}));var r=n(125),i=n(249),a=n(76),o=n(170),s={types:a.i,json:{write:{writer:o.b},origins:{"web-scene":{types:a.j,write:{writer:o.b}}}}},c={types:{base:r.a,key:"type",typeMap:{"simple-fill":a.e.typeMap["simple-fill"],"picture-fill":a.e.typeMap["picture-fill"],"polygon-3d":a.e.typeMap["polygon-3d"]}},json:{write:{writer:o.b},origins:{"web-scene":{type:i.a,write:{writer:o.b}}}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var r=["freehand","hybrid","click"],i="click"},function(e,t,n){"use strict";var r=n(26),i=n(2),a=n(3),o=n(37),s=n(5),c=n(6),l=n(0),u=(n(16),n(13),n(17),n(1)),d=n(32),f=n(8),p=(n(12),n(19),n(20),n(77)),h=n(75),b=n(9),v=n(229),y=n(72),m=n(36),g=n(51),O=n(25),j=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e))._viewpointHandle=null,r._handles=new g.a,r.group=null,r}return Object(a.a)(n,[{key:"initialize",value:function(){var e=this;this._handles.add(Object(O.b)(this,"view.ui","expand",(function(t){var n=t.target;n&&n!==e&&n.expanded&&n.group&&n.group===e.group&&e._collapse()})))}},{key:"destroy",value:function(){this._viewpointHandle=null,this.view=null,this._handles.destroy(),this._handles=null}},{key:"autoCollapse",set:function(e){this._set("autoCollapse",e),this._watchViewpoint()}},{key:"expanded",set:function(e){var t=!!e;this._set("expanded",t);var n=this.get("view.ui");n&&n.emit("expand",{target:this}),this._viewpointHandleChange(t)}},{key:"state",get:function(){return this.get("view.ready")?"ready":"disabled"}},{key:"view",set:function(e){var t=this;this._get("view")!==e&&(this._set("view",e),e&&Object(O.l)(e,"ready",(function(){t.view===e&&t._watchViewpoint()})))}},{key:"_viewpointHandleChange",value:function(e){var t=this;this._viewpointHandle&&(e?Object(O.l)(this.view,"stationary",(function(){return t._viewpointHandle.resume()})):this._viewpointHandle.pause())}},{key:"_watchViewpoint",value:function(){var e=this,t="viewpoint";this._handles.remove(t),this._viewpointHandle=null;var n=this.autoCollapse,r=this.view;if(r&&n){var i="3d"===r.type?"camera":"viewpoint",a=Object(O.c)(r,i,(function(){return e._collapse()}));this._handles.add(a,t),this._viewpointHandle=a}}},{key:"_collapse",value:function(){this.expanded=!1}}]),n}(m.a);Object(l.a)([Object(u.b)({value:!1})],j.prototype,"autoCollapse",null),Object(l.a)([Object(u.b)({value:!1})],j.prototype,"expanded",null),Object(l.a)([Object(u.b)()],j.prototype,"group",void 0),Object(l.a)([Object(u.b)({readOnly:!0})],j.prototype,"state",null),Object(l.a)([Object(u.b)({value:null})],j.prototype,"view",null);var w=j=Object(l.a)([Object(f.a)("esri.widgets.Expand.ExpandViewModel")],j),_="esri-expand esri-widget",k="esri-expand--auto",x="esri-expand--drawer",S="esri-expand--floating",T="esri-expand__container",E="esri-expand__container--expanded",C="esri-expand__panel",P="esri-widget--button",I="esri-icon-font-fallback-text",M="esri-collapse__icon",A="esri-expand__icon--expanded",R="esri-expand__icon-number",L="esri-expand__icon-number--expanded",F="esri-icon-expand",D="esri-icon-collapse",N="esri-expand__content",V="esri-expand__content--expanded",z="esri-expand__mask",U="esri-expand__mask--expanded",B=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r){var a;return Object(i.a)(this,n),(a=t.call(this,e,r)).autoCollapse=null,a.closeOnEsc=!0,a.collapseTooltip="",a.content="",a.expanded=null,a.expandTooltip="",a.group=null,a.iconNumber=0,a.label=void 0,a.messages=null,a.messagesCommon=null,a.mode="auto",a.view=null,a.viewModel=new w,a._handleKeyDown=function(e){var t=Object(o.a)(a),n=t.closeOnEsc,r=t._toggleButtonEl;t.expanded&&n&&e.target!==r&&"Escape"===e.key&&("function"==typeof n?n(e):n)&&(a.expanded=!1,null==r||r.focus())},a}return Object(a.a)(n,[{key:"contentId",get:function(){return"".concat(this.id,"_controls_content")}},{key:"expandTitle",get:function(){var e=this.expanded,t=this.messagesCommon,n=this.collapseTooltip,r=this.expandTooltip;return e?n||t.collapse:r||t.expand}},{key:"collapseIconClass",get:function(){return D},set:function(e){e?this._override("collapseIconClass",e):this._clearOverride("collapseIconClass")}},{key:"expandIconClass",get:function(){return Object(v.b)(this.content)?this.content.iconClass:F},set:function(e){e?this._override("expandIconClass",e):this._clearOverride("expandIconClass")}},{key:"expand",value:function(){this.viewModel.expanded=!0}},{key:"collapse",value:function(){this.viewModel.expanded=!1}},{key:"toggle",value:function(){this.viewModel.expanded=!this.viewModel.expanded}},{key:"render",value:function(){var e,t=this.mode,n=(e={},Object(r.a)(e,k,"auto"===t),Object(r.a)(e,x,"drawer"===t),Object(r.a)(e,S,"floating"===t),e);return Object(b.a)("div",{class:this.classes(_,n),onkeydown:this._handleKeyDown},this.renderMask(),this.renderContainer())}},{key:"renderContainer",value:function(){var e=this.expanded,t=Object(r.a)({},E,e);return Object(b.a)("div",{class:this.classes(T,t)},this.renderPanel(),this.renderContent())}},{key:"renderMask",value:function(){var e=this.expanded,t=Object(r.a)({},U,e);return Object(b.a)("div",{bind:this,onclick:this._toggle,class:this.classes(z,t)})}},{key:"renderBadgeNumber",value:function(){var e=this.expanded,t=this.iconNumber;return t&&!e?Object(b.a)("span",{key:"expand__icon-number",class:R},t):null}},{key:"renderPanelNumber",value:function(){var e=this.iconNumber,t=this.expanded;return e&&t?Object(b.a)("span",{key:"expand__expand-icon-number",class:this.classes(R,L)},e):null}},{key:"renderIcon",value:function(){var e,t=this.collapseIconClass,n=this.expandIconClass,i=this.expanded,a=(e={},Object(r.a)(e,A,i),Object(r.a)(e,t,i),Object(r.a)(e,n,!i),e);return t===n&&(a[t]=!0),Object(b.a)("span",{"aria-hidden":"true",class:this.classes(M,a)})}},{key:"renderTitle",value:function(){return Object(b.a)("span",{class:I},this.expandTitle)}},{key:"renderExpandButton",value:function(){var e=this.expanded,t=this.expandTitle,n=this.contentId;return Object(b.a)("div",{afterCreate:this._storeToggleButtonEl,"aria-controls":n,"aria-expanded":e?"true":"false",bind:this,class:P,onclick:this._toggle,onkeydown:this._toggle,role:"button",tabindex:"0",title:t},this.renderBadgeNumber(),this.renderIcon(),this.renderTitle())}},{key:"renderPanel",value:function(){return Object(b.a)("div",{class:C},this.renderExpandButton(),this.renderPanelNumber())}},{key:"renderContent",value:function(){var e=this.expanded,t=this.contentId,n=Object(r.a)({},V,e);return Object(b.a)("div",{id:t,role:"region",class:this.classes(N,n)},this.renderContentContainer())}},{key:"renderContentContainer",value:function(){var e=this.content;return"string"==typeof e?Object(b.a)("div",{innerHTML:e}):Object(v.b)(e)?e.render():e instanceof HTMLElement?Object(b.a)("div",{bind:e,afterCreate:this._attachToNode}):Object(v.a)(e)?Object(b.a)("div",{bind:e.domNode,afterCreate:this._attachToNode}):null}},{key:"_toggle",value:function(){this.toggle()}},{key:"_attachToNode",value:function(e){e.appendChild(this)}},{key:"_storeToggleButtonEl",value:function(e){this._toggleButtonEl=e}}]),n}(y.a);Object(l.a)([Object(u.b)({readOnly:!0})],B.prototype,"contentId",null),Object(l.a)([Object(u.b)({readOnly:!0})],B.prototype,"expandTitle",null),Object(l.a)([Object(d.a)("viewModel.autoCollapse")],B.prototype,"autoCollapse",void 0),Object(l.a)([Object(u.b)()],B.prototype,"closeOnEsc",void 0),Object(l.a)([Object(u.b)()],B.prototype,"collapseIconClass",null),Object(l.a)([Object(u.b)()],B.prototype,"collapseTooltip",void 0),Object(l.a)([Object(u.b)()],B.prototype,"content",void 0),Object(l.a)([Object(d.a)("viewModel.expanded")],B.prototype,"expanded",void 0),Object(l.a)([Object(u.b)()],B.prototype,"expandIconClass",null),Object(l.a)([Object(u.b)()],B.prototype,"expandTooltip",void 0),Object(l.a)([Object(d.a)("viewModel.group")],B.prototype,"group",void 0),Object(l.a)([Object(u.b)()],B.prototype,"iconNumber",void 0),Object(l.a)([Object(u.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],B.prototype,"label",void 0),Object(l.a)([Object(u.b)(),Object(h.a)("esri/widgets/Expand/t9n/Expand")],B.prototype,"messages",void 0),Object(l.a)([Object(u.b)(),Object(h.a)("esri/t9n/common")],B.prototype,"messagesCommon",void 0),Object(l.a)([Object(u.b)()],B.prototype,"mode",void 0),Object(l.a)([Object(d.a)("viewModel.view")],B.prototype,"view",void 0),Object(l.a)([Object(u.b)({type:w})],B.prototype,"viewModel",void 0),Object(l.a)([Object(p.a)()],B.prototype,"_toggle",null);var G=B=Object(l.a)([Object(f.a)("esri.widgets.Expand")],B);t.a=G},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c}));var r=n(7),i=n.n(r),a=n(15),o=n(159),s=n(84);function c(e){return l.apply(this,arguments)}function l(){return(l=Object(a.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=t.indexOf("-vector")>-1?t.slice(0,t.indexOf("-vector")):t,e.next=5,Object(o.a)("esri/t9n/basemaps");case 5:return r=e.sent,e.abrupt("return",r[t]||r[n]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var u={streets:{id:"streets",get thumbnailUrl(){return Object(s.a)("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",get thumbnailUrl(){return Object(s.a)("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",get thumbnailUrl(){return Object(s.a)("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",get thumbnailUrl(){return Object(s.a)("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",get thumbnailUrl(){return Object(s.a)("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",get thumbnailUrl(){return Object(s.a)("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",get thumbnailUrl(){return Object(s.a)("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",get thumbnailUrl(){return Object(s.a)("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",get thumbnailUrl(){return Object(s.a)("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",get thumbnailUrl(){return Object(s.a)("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",get thumbnailUrl(){return Object(s.a)("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",get thumbnailUrl(){return Object(s.a)("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",get thumbnailUrl(){return Object(s.a)("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",get thumbnailUrl(){return Object(s.a)("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",get thumbnailUrl(){return Object(s.a)("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",get thumbnailUrl(){return Object(s.a)("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",get thumbnailUrl(){return Object(s.a)("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return Object(s.a)("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return Object(s.a)("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return Object(s.a)("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return Object(s.a)("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return Object(s.a)("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return Object(s.a)("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return Object(s.a)("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return Object(s.a)("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return Object(s.a)("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return Object(s.a)("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a}));var r=n(538),i=n(501);function a(e){if(!e)return!1;var t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength<=0)}function o(e){if(!e)return!1;if(!e.supportsCallout||!e.supportsCallout())return!1;var t=e.callout;return!!t&&!!t.visible&&!!a(e)}var s={types:{key:"type",base:r.a,typeMap:{line:i.a}},json:{write:!0}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return h}));var r=n(31);function i(e){return void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax}function a(e){return void 0!==e.points}function o(e){return void 0!==e.x&&void 0!==e.y}function s(e){return void 0!==e.paths}function c(e){return void 0!==e.rings}function l(e){return function(t,n){return null==t?n:null==n?t:e(t,n)}}var u=l(Math.min),d=l(Math.max);function f(e,t){return s(t)?h(e,t.paths,!1,!1):c(t)?h(e,t.rings,!1,!1):a(t)?v(e,t.points,!1,!1,!1,!1):i(t)?b(e,t):(o(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function p(e,t){return s(t)?h(e,t.paths,!0,!1):c(t)?h(e,t.rings,!0,!1):a(t)?v(e,t.points,!0,!1,!0,!1):i(t)?b(e,t,!0,!1,!0,!1):(o(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function h(e,t,n,i){var a=n?3:2;if(!t.length||!t[0].length)return null;for(var o,s,c,l,f=Object(r.a)(t[0][0],2),p=f[0],h=f[1],b=Object(r.a)(t[0][0],2),v=b[0],y=b[1],m=0;m<t.length;m++)for(var g=t[m],O=0;O<g.length;O++){var j=g[O],w=Object(r.a)(j,2),_=w[0],k=w[1];if(p=u(p,_),h=u(h,k),v=d(v,_),y=d(y,k),n&&j.length>2){var x=j[2];o=u(o,x),s=d(s,x)}if(i&&j.length>a){var S=j[a];c=u(o,S),l=d(s,S)}}return n?i?(e[0]=p,e[1]=h,e[2]=o,e[3]=c,e[4]=v,e[5]=y,e[6]=s,e[7]=l,e.length=8,e):(e[0]=p,e[1]=h,e[2]=o,e[3]=v,e[4]=y,e[5]=s,e.length=6,e):i?(e[0]=p,e[1]=h,e[2]=c,e[3]=v,e[4]=y,e[5]=l,e.length=6,e):(e[0]=p,e[1]=h,e[2]=v,e[3]=y,e.length=4,e)}function b(e,t,n,r,i,a){var o=t.xmin,s=t.xmax,c=t.ymin,l=t.ymax,u=t.zmin,d=t.zmax,f=t.mmin,p=t.mmax;return i?(u=u||0,d=d||0,a?(f=f||0,p=p||0,e[0]=o,e[1]=c,e[2]=u,e[3]=f,e[4]=s,e[5]=l,e[6]=d,e[7]=p,e):(e[0]=o,e[1]=c,e[2]=u,e[3]=s,e[4]=l,e[5]=d,e)):a?(f=f||0,p=p||0,e[0]=o,e[1]=c,e[2]=f,e[3]=s,e[4]=l,e[5]=p,e):(e[0]=o,e[1]=c,e[2]=s,e[3]=l,e)}function v(e,t,n,i,a,o){var s=n?3:2,c=i&&o,l=n&&a;if(!t.length||!t[0].length)return null;for(var f,p,h,b,v=Object(r.a)(t[0],2),y=v[0],m=v[1],g=Object(r.a)(t[0],2),O=g[0],j=g[1],w=0;w<t.length;w++){var _=t[w],k=Object(r.a)(_,2),x=k[0],S=k[1];if(y=u(y,x),m=u(m,S),O=d(O,x),j=d(j,S),l&&_.length>2){var T=_[2];f=u(f,T),p=d(p,T)}if(c&&_.length>s){var E=_[s];h=u(f,E),b=d(p,E)}}return a?(f=f||0,p=p||0,o?(h=h||0,b=b||0,e[0]=y,e[1]=m,e[2]=f,e[3]=h,e[4]=O,e[5]=j,e[6]=p,e[7]=b,e):(e[0]=y,e[1]=m,e[2]=f,e[3]=O,e[4]=j,e[5]=p,e)):o?(h=h||0,b=b||0,e[0]=y,e[1]=m,e[2]=h,e[3]=O,e[4]=j,e[5]=b,e):(e[0]=y,e[1]=m,e[2]=O,e[3]=j,e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return w})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return _})),n.d(t,"g",(function(){return v})),n.d(t,"h",(function(){return y})),n.d(t,"i",(function(){return m})),n.d(t,"j",(function(){return g})),n.d(t,"k",(function(){return O}));var r=n(2),i=n(3),a=n(10),o=n(14),s=n(22),c=n(4),l=(n(136),n(61)),u=n(45),d=n(38),f=n(611);function p(e,t){return e.events.on("drag",function(e,t){var n=null,r=null;return function(i){if("cancel"!==i.action){var a={action:i.action,screenStart:i.start,screenEnd:i.screenPoint};"start"===i.action&&Object(c.j)(n)&&(n=new k,r=new k,t(e,n,r,i.pointerType,a)),Object(c.k)(n)&&n.execute(a),"end"===i.action&&Object(c.k)(n)&&(n=null,r=null)}else Object(c.k)(r)&&(r.execute({action:"cancel"}),n=null,r=null)}}(e,t))}function h(e,t){var n=[e.x,e.y,e.z],r=t,i=[Math.cos(r),Math.sin(r)],a=Math.sqrt(i[0]*i[0]+i[1]*i[1]);if(0===a)return null;i[0]/=a,i[1]/=a;var o=function(e){var t=(e.x-n[0])*i[0]+(e.y-n[1])*i[1];e.x=n[0]+t*i[0],e.y=n[1]+t*i[1]};return function(e){return o(e.mapStart),o(e.mapEnd),e}}function b(e,t){var n=null,r=Object(c.k)(e[t])?e[t].spatialReference:null;return function(i){if("start"===i.action&&Object(c.k)(e[t])&&(n=function(e,t){return Object(c.j)(e)||"mesh"===e.type?null:e.spatialReference.equals(t)?e.clone():Object(l.a)(e,t)?Object(l.d)(e,t):null}(e[t],i.mapStart.spatialReference)),Object(c.j)(n))return null;var o=i.mapEnd.x-i.mapStart.x,s=i.mapEnd.y-i.mapStart.y,u=i.mapEnd.z-i.mapStart.z,d=Object(f.d)(n.clone(),o,s,u);return d.spatialReference.equals(r)?e[t]=d:e[t]=Object(l.d)(d,r),Object(a.a)(Object(a.a)({},i),{},{translationX:o,translationY:s,translationZ:u})}}function v(e){return b(e,"geometry")}function y(e){var t=e.map((function(e){return Object(c.q)(v(e))})).filter((function(e){return Object(c.k)(e)}));return function(e){var n=e.mapEnd.x-e.mapStart.x,r=e.mapEnd.y-e.mapStart.y,i=e.mapEnd.z-e.mapStart.z;return t.forEach((function(t){return t(e)})),Object(a.a)(Object(a.a)({},e),{},{translationX:n,translationY:r,translationZ:i})}}function m(e){return function(e,t){var n,r=new Map,i=Object(o.a)(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;r.set(a,Object(s.a)(e[a]))}}catch(c){i.e(c)}finally{i.f()}return function(t){return r.forEach((function(t,n){e[n]=t})),t}}(e,["geometry"])}function g(e){var t=e.map((function(e){return Object(c.q)(m(e))})).filter((function(e){return Object(c.k)(e)}));return function(e){return t.forEach((function(t){return t(e)})),e}}function O(e){var t=Object(c.k)(e.symbol)?e.symbol.clone():null;return function(n){return e.symbol=t,n}}function j(){var e=0,t=0,n=0;return function(r){"start"===r.action&&(e=r.mapStart.x,t=r.mapStart.y,n=r.mapStart.z);var i=r.mapEnd.x-e,o=r.mapEnd.y-t,s=r.mapEnd.z-n;return e=r.mapEnd.x,t=r.mapEnd.y,n=r.mapEnd.z,Object(a.a)(Object(a.a)({},r),{},{mapDeltaX:i,mapDeltaY:o,mapDeltaZ:s,mapDeltaSpatialReference:r.mapStart.spatialReference})}}function w(){var e=0,t=0;return function(n){"start"===n.action&&(e=n.screenStart.x,t=n.screenStart.y);var r=n.screenEnd.x-e,i=n.screenEnd.y-t;return e=n.screenEnd.x,t=n.screenEnd.y,Object(a.a)(Object(a.a)({},n),{},{screenDeltaX:r,screenDeltaY:i})}}function _(e,t){var n=null,r=0,i=0;return function(a){if("start"===a.action&&((n=e.toScreen(t)).x<0||n.x>e.width||n.y<0||n.y>e.height?n=null:(r=a.screenStart.x-n.x,i=a.screenStart.y-n.y)),null==n)return null;var o=Object(u.d)(a.screenEnd.x-r,0,e.width),s=Object(u.d)(a.screenEnd.y-i,0,e.height),c=Object(d.e)(o,s);return a.screenStart=n,a.screenEnd=c,a}}var k=function(){function e(){Object(r.a)(this,e),this.execute=function(){}}return Object(i.a)(e,[{key:"next",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new e;return Object(c.k)(t)&&(this.execute=function(e){var r=t(e);Object(c.k)(r)&&n.execute(r)}),n}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return c}));n(16);var r=n(100),i=n(177),a=n(243),o=n(18),s=n(320);function c(e,t,n,i){var a=function(e,t){return e?function(e,t){if(!t||"web-scene"!==t.origin)return!0;switch(e.type){case"simple":case"unique-value":case"class-breaks":return!0;case"heatmap":case"dictionary":case"dot-density":default:return!1}}(e,t)?e.write({},t):(t.messages&&t.messages.push(new o.a("renderer:unsupported","Renderer of type '".concat(e.declaredClass,"' are not supported in scenes."),{renderer:e,context:t})),null):null}(e,i);a&&Object(r.c)(n,a,t)}function l(e,t){return d(e,null,t)}var u=Object(a.b)({types:s.a});function d(e,t,n){return e?e&&(e.styleName||e.styleUrl)&&"uniqueValue"!==e.type?(n&&n.messages&&n.messages.push(new i.a("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:n})),null):u(e,t,n):null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"CalciteHtml",{enumerable:!0,get:function(){return r.CalciteHtml}}),Object.defineProperty(t,"CalciteBody",{enumerable:!0,get:function(){return r.CalciteBody}}),Object.defineProperty(t,"CalciteP",{enumerable:!0,get:function(){return r.CalciteP}}),Object.defineProperty(t,"CalciteA",{enumerable:!0,get:function(){return r.CalciteA}}),Object.defineProperty(t,"CalciteH1",{enumerable:!0,get:function(){return r.CalciteH1}}),Object.defineProperty(t,"CalciteH2",{enumerable:!0,get:function(){return r.CalciteH2}}),Object.defineProperty(t,"CalciteH3",{enumerable:!0,get:function(){return r.CalciteH3}}),Object.defineProperty(t,"CalciteH4",{enumerable:!0,get:function(){return r.CalciteH4}}),Object.defineProperty(t,"CalciteH5",{enumerable:!0,get:function(){return r.CalciteH5}}),Object.defineProperty(t,"CalciteH6",{enumerable:!0,get:function(){return r.CalciteH6}}),Object.defineProperty(t,"CalciteOl",{enumerable:!0,get:function(){return r.CalciteOl}}),Object.defineProperty(t,"CalciteUl",{enumerable:!0,get:function(){return r.CalciteUl}}),Object.defineProperty(t,"CalciteLi",{enumerable:!0,get:function(){return r.CalciteLi}}),Object.defineProperty(t,"CalciteFigure",{enumerable:!0,get:function(){return r.CalciteFigure}});var r=n(841)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(2),i=n(3),a=function(){function e(t){Object(r.a)(this,e),this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.geometry=t.geometry,this.elevationInfo=t.elevationInfo,this.pointer=t.pointer,this.vertexHandle=t.vertexHandle,this.excludeFeature=t.excludeFeature,this.visualizer=t.visualizer}return Object(i.a)(e,[{key:"coordinateHelper",get:function(){return this.geometry.editGeometry.coordinateHelper}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return a}));var r=n(14),i=(n(10),n(16),n(4));function a(e,t){return e.vertexBuffers[t].size/o(e.layout[t])}function o(e){return e[0].stride}function s(e,t,n,i,a){var o=e.gl,s=e.capabilities.instancing;e.bindBuffer(n);var c,l=Object(r.a)(i);try{for(l.s();!(c=l.n()).done;){var u=c.value,d=t[u.name],f=(a||(0+u.baseInstance?u.baseInstance:0))*u.stride;if(void 0===d&&console.error("There is no location for vertex attribute '".concat(u.name,"' defined.")),u.baseInstance&&!u.divisor&&console.error("Vertex attribute '".concat(u.name,"' uses baseInstanceOffset without divisor.")),u.count<=4)o.vertexAttribPointer(d,u.count,u.type,u.normalized,u.stride,u.offset+f),o.enableVertexAttribArray(d),u.divisor&&u.divisor>0&&s&&s.vertexAttribDivisor(d,u.divisor);else if(9===u.count)for(var p=0;p<3;p++)o.vertexAttribPointer(d+p,3,u.type,u.normalized,u.stride,u.offset+12*p+f),o.enableVertexAttribArray(d+p),u.divisor&&u.divisor>0&&s&&s.vertexAttribDivisor(d+p,u.divisor);else if(16===u.count)for(var h=0;h<4;h++)o.vertexAttribPointer(d+h,4,u.type,u.normalized,u.stride,u.offset+16*h+f),o.enableVertexAttribArray(d+h),u.divisor&&u.divisor>0&&s&&s.vertexAttribDivisor(d+h,u.divisor);else console.error("Unsupported vertex attribute element count: "+u.count)}}catch(b){l.e(b)}finally{l.f()}}function c(e,t,n,i){var a=e.gl,o=e.capabilities.instancing;e.bindBuffer(n);var s,c=Object(r.a)(i);try{for(c.s();!(s=c.n()).done;){var l=s.value,u=t[l.name];if(l.count<=4)a.disableVertexAttribArray(u),l.divisor&&l.divisor>0&&o&&o.vertexAttribDivisor(u,0);else if(9===l.count)for(var d=0;d<3;d++)a.disableVertexAttribArray(u+d),l.divisor&&l.divisor>0&&o&&o.vertexAttribDivisor(u+d,0);else if(16===l.count)for(var f=0;f<4;f++)a.disableVertexAttribArray(u+f),l.divisor&&l.divisor>0&&o&&o.vertexAttribDivisor(u+f,0);else console.error("Unsupported vertex attribute element count: "+l.count)}}catch(p){c.e(p)}finally{c.f()}e.unbindBuffer(34962)}function l(e){switch(e){case 6406:case 6409:case 36168:return 1;case 6410:case 32854:case 33325:case 32854:case 33189:return 2;case 6407:case 6402:return 3;case 6408:case 34041:case 33326:case 35898:case 33327:case 34041:return 4;case 33328:case 34842:return 8;case 34836:return 16;case 33776:case 33777:return.5;case 33778:case 33779:return 1;case 37488:case 37489:case 37492:case 37493:case 37494:case 37495:return.5;case 37490:case 37491:case 37496:case 37497:return 1}return 0}function u(e){if(Object(i.j)(e))return 0;if("colorAttachment"in e)return e.glName?u(e.colorAttachment)+u(e.depthStencilAttachment):0;if("descriptor"in e)return e.glName?u(e.descriptor):0;var t=e.internalFormat||"pixelFormat"in e&&e.pixelFormat;if(!t)return 0;var n="hasMipmap"in e&&e.hasMipmap?1.3:1,r=e.width*e.height;return l(t)*r*n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n(303);function i(e,t){return Array.isArray(t)&&t[0]&&Array.isArray(t[0])?t.map((function(t){return i(e,t)})).join("&"):encodeURIComponent(e)+"="+encodeURIComponent(t)}function a(e){var t=Object(r.a)(e);return Object.keys(t).map((function(e){return i(e,t[e])})).join("&")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(23),i=n(67),a=n(52);function o(e){var t,n={httpMethod:"GET"};if("string"===typeof e)t="https://www.arcgis.com/sharing/rest/community/users/"+e;else{var o=e.username||e.authentication.username;t=Object(a.a)(e)+"/community/users/"+encodeURIComponent(o),n=Object(r.a)(Object(r.a)({},e),n)}return Object(i.d)(t,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var r=n(80),i=n(425),a={runImmediately:!1};function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,o=new i.a(l),s=null,c=!1;function l(){if(o&&!c){var n=s;o.clear(),c=!0,s=Object(r.b)(o,e),c=!1,t(s,n)}}function u(){o&&(o.destroy(),o=null,s=null)}return c=!0,s=Object(r.b)(o,e),c=!1,n.runImmediately&&t(s,s),{remove:u}}function s(e,t){var n=new i.a((function(){t(a,o)})),a=null;function o(){return n?(n.clear(),a=Object(r.b)(n,e)):null}return o(),{remove:function(){n&&(n.destroy(),n=null),a=null}}}},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1),n(49)),u=n(8),d=(n(12),n(19),n(20),n(276)),f=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).type="inherited",r}return Object(a.a)(n,[{key:"clone",value:function(){return new r}}]),n}(d.a);Object(c.a)([Object(l.a)({inherited:"inherited"})],f.prototype,"type",void 0);var p=f=r=Object(c.a)([Object(u.a)("esri.layers.support.InheritedDomain")],f);t.a=p},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(4)),u=(n(13),n(17),n(1)),d=n(49),f=n(8),p=(n(12),n(19),n(20),n(146)),h=n(515),b=n(179),v=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).type="extrude",r.size=1,r.material=null,r.castShadows=!0,r.edges=null,r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:Object(l.k)(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}}]),n}(p.a);Object(c.a)([Object(d.a)({Extrude:"extrude"},{readOnly:!0})],v.prototype,"type",void 0),Object(c.a)([Object(u.b)({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],v.prototype,"size",void 0),Object(c.a)([Object(u.b)({type:b.a,json:{write:!0}})],v.prototype,"material",void 0),Object(c.a)([Object(u.b)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],v.prototype,"castShadows",void 0),Object(c.a)([Object(u.b)(h.a)],v.prototype,"edges",void 0);var y=v=r=Object(c.a)([Object(f.a)("esri.symbols.ExtrudeSymbol3DLayer")],v);t.a=y},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(4)),u=(n(13),n(17),n(1)),d=n(49),f=n(41),p=n(8),h=(n(12),n(19),n(20),n(146)),b=n(179),v=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).material=null,r.castShadows=!0,r.type="path",r.profile="circle",r.join="miter",r.cap="butt",r.width=void 0,r.height=void 0,r.anchor="center",r.profileRotation="all",r}return Object(a.a)(n,[{key:"size",get:function(){return this.width&&this.height?this.width===this.height?this.width:void 0:this.width?this.width:this.height?this.height:void 0},set:function(e){this.width=e,this.height=e}},{key:"readSize",value:function(e,t){return t.height||t.width?e:t.size}},{key:"clone",value:function(){return new r({enabled:this.enabled,material:Object(l.k)(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}}]),n}(h.a);Object(c.a)([Object(u.b)({type:b.a,json:{write:!0}})],v.prototype,"material",void 0),Object(c.a)([Object(u.b)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],v.prototype,"castShadows",void 0),Object(c.a)([Object(d.a)({Path:"path"},{readOnly:!0})],v.prototype,"type",void 0),Object(c.a)([Object(u.b)({type:Number})],v.prototype,"size",null),Object(c.a)([Object(f.a)("size")],v.prototype,"readSize",null),Object(c.a)([Object(u.b)({type:["circle","quad"],json:{write:!0,default:"circle"}})],v.prototype,"profile",void 0),Object(c.a)([Object(u.b)({type:["miter","bevel","round"],json:{write:!0,default:"miter"}})],v.prototype,"join",void 0),Object(c.a)([Object(u.b)({type:["none","butt","square","round"],json:{write:!0,default:"butt"}})],v.prototype,"cap",void 0),Object(c.a)([Object(u.b)({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],v.prototype,"width",void 0),Object(c.a)([Object(u.b)({type:Number,json:{write:!0}})],v.prototype,"height",void 0),Object(c.a)([Object(u.b)({type:["center","bottom","top"],json:{write:!0,default:"center"}})],v.prototype,"anchor",void 0),Object(c.a)([Object(u.b)({type:["heading","all"],json:{write:!0,default:"all"}})],v.prototype,"profileRotation",void 0);var y=v=r=Object(c.a)([Object(p.a)("esri.symbols.PathSymbol3DLayer")],v);t.a=y},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(22)),u=(n(13),n(17)),d=n(1),f=n(49),p=n(8),h=(n(12),n(19),n(20),n(39)),b=n(146),v=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).color=y.clone(),r.type="water",r.waterbodySize="medium",r.waveDirection=null,r.waveStrength="moderate",r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({color:Object(l.a)(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}}]),n}(b.a);Object(c.a)([Object(d.b)({type:h.a,nonNullable:!0,json:{type:[u.a],write:function(e,t,n){return t[n]=e.toArray(1)},default:function(){return y.clone()},defaultEquals:function(e){return e.toCss(!0)===y.toCss(!0)}}})],v.prototype,"color",void 0),Object(c.a)([Object(f.a)({Water:"water"},{readOnly:!0})],v.prototype,"type",void 0),Object(c.a)([Object(d.b)({type:["small","medium","large"],json:{write:!0,default:"medium"}})],v.prototype,"waterbodySize",void 0),Object(c.a)([Object(d.b)({type:Number,json:{write:!0,default:null}})],v.prototype,"waveDirection",void 0),Object(c.a)([Object(d.b)({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],v.prototype,"waveStrength",void 0),v=r=Object(c.a)([Object(p.a)("esri.symbols.WaterSymbol3DLayer")],v);var y=new h.a([0,119,190]),m=v;t.a=m},function(e,t,n){"use strict";var r=n(35),i=n(7),a=n.n(i),o=n(15),s=n(10),c=n(14),l=n(2),u=n(3),d=n(5),f=n(6),p=n(0),h=(n(16),n(4)),b=n(13),v=(n(17),n(1)),y=n(8),m=n(18),g=(n(12),n(19),n(20),n(24)),O=n(43),j=n(156),w=(n(71),n(78)),_=n(40),k=n(200),x=n(38),S=n(120),T=n(130),E=n(116),C=n(76),P=n(74),I=n(51),M=n(25),A=n(245),R=n(221),L=n(48),F=n(422),D=n(93),N=n(36),V=n(53),z=n(50),U=n(186),B=n(753),G=n(421),q=n(134),H=n(388),W=n(351),$=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r,i;return Object(l.a)(this,n),(r=t.call(this,e))._hasZ=null,r._snappingTask=null,r._stagedVertex=null,r._stagedVertexUnsnapped=null,r._lastVertexUnsnapped=null,r._nativeEventHistory={undoStack:[],redoStack:[]},r.interactiveUndoDisabled=!1,r.history=[],r.redoHistory=[],r.snapToScene=!1,r.view=null,r.elevationInfo=null,r.defaultZ=0,r._coordinateHelper=Object(G.a)(e.hasZ,!1,e.view.spatialReference,"local"),r._snappingManager=e.snappingManager,r._editGeometry=new H.a(new q.c(r._coordinateHelper),null!=(i=e.editGeometryType)?i:"polygon"),r._snappingContext=new W.a({geometry:r._editGeometry,elevationInfo:{mode:"on-the-ground",offset:0},pointer:"mouse",visualizer:new B.a}),r._activeComponent=new q.a(r._editGeometry.editGeometry),r._editGeometry.editGeometry.components.push(r._activeComponent),r}return Object(u.a)(n,[{key:"destroy",value:function(){this._snappingTask=Object(h.a)(this._snappingTask),Object(h.k)(this._snappingManager)&&this._snappingManager.doneSnapping(),this._editGeometry.destroy()}},{key:"_committedVertices",get:function(){return this._editGeometry.editGeometry.components[0].vertices.map((function(e){return e.pos}))}},{key:"vertices",get:function(){return Object(h.k)(this._stagedVertex)?[].concat(Object(r.a)(this._committedVertices),[this._coordinateHelper.pointToArray(this._stagedVertex)]):this._committedVertices}},{key:"hasZ",get:function(){return Object(h.k)(this._hasZ)?this._hasZ:"3d"===this.view.type},set:function(e){this._hasZ=e,this.notifyChange("hasZ")}},{key:"canUndo",value:function(){return this._editGeometry.editGeometry.canUndo}},{key:"canRedo",value:function(){return this._editGeometry.editGeometry.canRedo}},{key:"undo",value:function(){this.canUndo()&&this._editGeometry.undo()}},{key:"redo",value:function(){this.canRedo()&&this._editGeometry.redo()}},{key:"getCoordsFromScreenPoint",value:function(e){var t=this.screenToMap(e);return Object(h.k)(t)?t.hasZ?[t.x,t.y,t.z]:[t.x,t.y]:null}},{key:"getCoordsAndPointFromScreenPoint",value:function(e){var t=this.screenToMap(e);return Object(h.k)(t)?t.hasZ?{vertex:[t.x,t.y,t.z],mapPoint:t}:{vertex:[t.x,t.y],mapPoint:t}:null}},{key:"_pushCursorVertex",value:function(e){var t=this,n=Object(U.d)(e[0],e[1],null,this.view.spatialReference);this._stagedVertexUnsnapped=n,Object(h.j)(this._snappingManager)?this._stagedVertex=n:(this._stagedVertex=this._snappingManager.update(n,this._snappingContext),this._snappingTask=Object(g.h)(function(){var e=Object(o.a)(a.a.mark((function e(r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(h.k)(t._snappingManager)){e.next=5;break}return e.next=3,t._snappingManager.snap(n,t._snappingContext,r);case 3:return i=e.sent,e.abrupt("return",(i.valid&&(t._stagedVertex=i.apply(),t.notifyChange("vertices")),i));case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}},{key:"_popCursorVertex",value:function(){this._stagedVertex=null,this._stagedVertexUnsnapped=null,this.notifyChange("vertices")}},{key:"getGeometryZValue",value:function(){return this.defaultZ}},{key:"screenToMap",value:function(e){var t=null;if("3d"===this.view.type)if(this.hasZ){var n=Object(h.r)(this.elevationInfo,J);t=this.view.sceneIntersectionHelper.intersectElevationFromScreen(Object(x.f)(e.x,e.y),n,this.getGeometryZValue())}else{var r=Object(h.r)(this.elevationInfo,Y);t=this.view.sceneIntersectionHelper.intersectElevationFromScreen(Object(x.f)(e.x,e.y),r,0),Object(h.k)(t)&&(t.z=void 0)}else t=this.view.toMap(e),Object(h.k)(t)&&(t.z=this.hasZ?this.getGeometryZValue():void 0);return t}},{key:"_isDuplicateOfLastVertex",value:function(e){var t=this._editGeometry.editGeometry.components[0].getLastVertex();if(Object(h.k)(t)&&e[0]===t[0]&&e[1]===t[1])return!0;var n=this._coordinateHelper.createDehydratedPoint(e),r=n.x,i=n.y;return!(!Object(h.k)(this._lastVertexUnsnapped)||r!==this._lastVertexUnsnapped.x||i!==this._lastVertexUnsnapped.y)}}]),n}(w.a.EventedAccessor);Object(p.a)([Object(v.b)({readOnly:!0})],$.prototype,"vertices",null),Object(p.a)([Object(v.b)({type:Boolean,nonNullable:!0})],$.prototype,"interactiveUndoDisabled",void 0),Object(p.a)([Object(v.b)({readOnly:!0})],$.prototype,"history",void 0),Object(p.a)([Object(v.b)({readOnly:!0})],$.prototype,"redoHistory",void 0),Object(p.a)([Object(v.b)()],$.prototype,"snapToScene",void 0),Object(p.a)([Object(v.b)()],$.prototype,"view",void 0),Object(p.a)([Object(v.b)()],$.prototype,"elevationInfo",void 0),Object(p.a)([Object(v.b)({nonNullable:!0})],$.prototype,"defaultZ",void 0),Object(p.a)([Object(v.b)()],$.prototype,"hasZ",null),$=Object(p.a)([Object(y.a)("esri.views.draw.DrawAction")],$);var J={mode:"absolute-height",offset:0},Y={mode:"on-the-ground",offset:0},K=$,Z=function(){function e(t,n,r,i){Object(l.a)(this,e),this.view=t,this.native=n,this.vertexIndex=r,this.vertices=i,this.defaultPrevented=!1,this.type="vertex-add"}return Object(u.a)(e,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),e}(),X=function(){function e(t,n,r,i){Object(l.a)(this,e),this.view=t,this.native=n,this.vertexIndex=r,this.vertices=i,this.defaultPrevented=!1,this.type="vertex-remove"}return Object(u.a)(e,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),e}(),Q=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Object(l.a)(this,e),this.view=t,this.native=n,this.vertexIndex=r,this.vertices=i,this.mapPoint=a,this.coordinates=null,this.defaultPrevented=!1,this.type="cursor-update",this.coordinates=1===i.length?i[0]:null}return Object(u.a)(e,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),e}(),ee=function(){function e(t,n){Object(l.a)(this,e),this.native=t,this.vertices=n,this.coordinates=null,this.defaultPrevented=!1,this.type="draw-complete",this.coordinates=1===n.length?n[0]:null}return Object(u.a)(e,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),e}(),te="c",ne="r",re="z",ie="f",ae=" ",oe=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e))._cursorScreenPoint=null,r._popVertexOnPointerMove=!1,r._addVertexOnPointerUp=!1,r._activePointerId=null,r._viewHandles=new I.a,r._undoRedoHandles=new I.a,r}return Object(u.a)(n,[{key:"initialize",value:function(){this._addViewHandles(),this._addUndoRedoHandles()}},{key:"destroy",value:function(){this._removeViewHandles(),this._viewHandles.destroy(),this._removeUndoRedoHandles(),this._undoRedoHandles.destroy(),this.emit("destroy")}},{key:"undo",value:function(){Object(V.a)(Object(z.a)(n.prototype),"undo",this).call(this),this.notifyChange("vertices")}},{key:"redo",value:function(){Object(V.a)(Object(z.a)(n.prototype),"redo",this).call(this),this.notifyChange("vertices")}},{key:"complete",value:function(){this._completeDrawing()}},{key:"_addViewHandles",value:function(){var e=this;this._removeViewHandles(),this._viewHandles.add([this.view.on("click",(function(e){e.stopPropagation()}),L.b.TOOL),this.view.on("pointer-down",(function(t){e._shouldHandlePointerEvent(t)&&(e._snappingTask=Object(h.a)(e._snappingTask),e._activePointerId=t.pointerId,e._addVertexOnPointerUp=!0,e._cursorScreenPoint=Object(D.a)(t),"touch"===t.pointerType&&e._updateCursor(t.native))}),L.b.TOOL),this.view.on("pointer-move",(function(t){e._popVertexOnPointerMove&&(e.undo(),e._popVertexOnPointerMove=!1),e._snappingTask=Object(h.a)(e._snappingTask),e._cursorScreenPoint=Object(D.a)(t),"touch"!==t.pointerType&&e._updateCursor(t.native)}),L.b.TOOL),this.view.on("pointer-drag",(function(t){e._shouldHandlePointerEvent(t)&&(e._snappingTask=Object(h.a)(e._snappingTask),e._addVertexOnPointerUp=!1)}),L.b.TOOL),this.view.on("pointer-up",(function(t){if(e._shouldHandlePointerEvent(t))if(e._snappingTask=Object(h.a)(e._snappingTask),e._activePointerId=null,e._addVertexOnPointerUp)e._vertexAddHandler(t);else{var n="touch"===t.pointerType;e._updateCursor(t.native,n)}}),L.b.TOOL),this.view.on("drag",["Shift"],(function(e){e.stopPropagation()}),L.b.TOOL),this.view.on("double-click",(function(t){t.stopPropagation(),e._drawCompleteHandler(t)}),L.b.TOOL),this.view.on("double-click",["Control"],(function(t){t.stopPropagation(),e._drawCompleteHandler(t)}),L.b.TOOL),this.view.on("key-down",(function(t){var n=t.key,r=t.repeat;n===ie&&!r&&e._cursorScreenPoint?(t.stopPropagation(),e._snappingTask=Object(h.a)(e._snappingTask),e._vertexAddHandler(t)):n===te&&!r&&e._cursorScreenPoint&&e.vertices.length>2?(t.stopPropagation(),e._snappingTask=Object(h.a)(e._snappingTask),e._vertexAddHandler(t),e._drawCompleteHandler(t)):n!==re||e.interactiveUndoDisabled||r?n!==ne||e.interactiveUndoDisabled||r?n!==ae||r||t.stopPropagation():(t.stopPropagation(),e.redo()):(t.stopPropagation(),e.undo())}),L.b.TOOL),this.view.on("key-up",(function(e){e.key===ae&&e.stopPropagation()}),L.b.TOOL)])}},{key:"_addUndoRedoHandles",value:function(){var e=this;this._removeUndoRedoHandles(),this._undoRedoHandles.add([this._editGeometry.on("vertex-remove",(function(t){if(e.notifyChange("vertices"),"undo"===t.operation){var n=e._nativeEventHistory.undoStack.pop();e._nativeEventHistory.redoStack.push(n);var i=Object(r.a)(e._committedVertices);Object(h.k)(e._stagedVertex)&&i.push(e._coordinateHelper.pointToArray(e._stagedVertex)),e.emit("undo",new X(e.view,n,t.vertices[0].index,i))}})),this._editGeometry.on("vertex-add",(function(t){if(e.notifyChange("vertices"),"apply"===t.operation){var n=e._nativeEventHistory.undoStack[e._nativeEventHistory.undoStack.length],i=e._committedVertices.length-1,a=new Z(e.view,n,i,e.vertices);e.emit("vertex-add",a),a.defaultPrevented&&(e._popVertexOnPointerMove=!0)}else if("redo"===t.operation){var o=e._nativeEventHistory.redoStack.pop();e._nativeEventHistory.undoStack.push(o);var s=Object(r.a)(e._committedVertices);Object(h.k)(e._stagedVertex)&&s.push(e._coordinateHelper.pointToArray(e._stagedVertex)),e.emit("redo",new Z(e.view,o,t.vertices[0].index,s))}}))])}},{key:"_removeViewHandles",value:function(){this._viewHandles.removeAll()}},{key:"_removeUndoRedoHandles",value:function(){this._undoRedoHandles.removeAll()}},{key:"_addVertex",value:function(e,t){var n=this._coordinateHelper.fromArray(e);if(!this._isDuplicateOfLastVertex(n)){this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometry.appendVertex(n);var r=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(r)}}},{key:"_updateCursor",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._popCursorVertex(),this._cursorScreenPoint){var r=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);if(Object(h.k)(r)&&!n){this._pushCursorVertex(r.vertex);var i=function(){return new Q(t.view,e,t._activeComponent.vertices.length,t.vertices,Object(h.k)(t._stagedVertex)?new O.a(t._stagedVertex):null)};this.emit("cursor-update",i()),Object(h.k)(this._snappingTask)&&this._snappingTask.promise.then((function(e){e.valid&&t.emit("cursor-update",i())}),(function(){}))}}}},{key:"_completeDrawing",value:function(e){if(this._activePointerId=null,this._popCursorVertex(),this._snappingTask=Object(h.a)(this._snappingTask),Object(h.k)(this._snappingManager)&&this._snappingManager.doneSnapping(),!(this.vertices.length<2)){var t=new ee(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}}},{key:"_shouldHandlePointerEvent",value:function(e){return function(e){return"mouse"!==e.pointerType||0===e.button}(e)&&(Object(h.j)(this._activePointerId)||this._activePointerId===e.pointerId)}},{key:"_vertexAddHandler",value:function(e){var t=Object(h.k)(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);Object(h.k)(t)&&this._addVertex(t,e.native)}},{key:"_drawCompleteHandler",value:function(e){this._completeDrawing(e.native)}}]),n}(K);oe=Object(p.a)([Object(y.a)("esri.views.draw.MultipointDrawAction")],oe);Object.freeze({__proto__:null,get MultipointDrawAction(){return oe}});var se=n(198),ce=n(638),le=n(588),ue=n(613),de=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).drawOperation=null,r.hasZ=!0,r.defaultZ=0,r.elevationInfo=null,r.snapToScene=null,r.mode=null,r.geometryType=null,r.type="draw-3d",r}return Object(u.a)(n,[{key:"initialize",value:function(){var e=this,t=Object(h.r)(this.elevationInfo,{mode:this.hasZ?"absolute-height":"on-the-ground",offset:0});this.drawOperation=new ce.a({view:this.view,manipulators:this.manipulators,geometryType:this.geometryType,drawingMode:this.mode,hasZ:this.hasZ,defaultZ:this.defaultZ,snapToSceneEnabled:this.snapToScene,snappingDrawSurface:new le.b(this.view,t),elevationDrawSurface:new le.a(t,this.defaultZ,this.view),hasM:!1,elevationInfo:t}),this.drawOperation.on("vertex-add",(function(t){return e.onVertexAdd(t)})),this.drawOperation.on("vertex-remove",(function(t){return e.onVertexRemove(t)})),this.drawOperation.on("vertex-update",(function(t){return e.onVertexUpdate(t)})),this.drawOperation.on("cursor-update",(function(t){return e.onCursorUpdate(t)})),this.drawOperation.on("complete",(function(t){return e.onComplete(t)}))}},{key:"destroy",value:function(){this.drawOperation.destroy(),this.drawOperation=null,this._set("view",null)}},{key:"onInputEvent",value:function(e){this.drawOperation.onInputEvent(e)}},{key:"enabled",set:function(e){this.drawOperation.interactive=e,this._set("enabled",e)}},{key:"reset",value:function(){}},{key:"canRedo",get:function(){return this.drawOperation.canRedo}},{key:"redo",value:function(){this.drawOperation.redo()}},{key:"canUndo",get:function(){return this.drawOperation.canUndo}},{key:"undo",value:function(){this.drawOperation.undo()}},{key:"completeCreateOperation",value:function(){this.drawOperation.complete()}},{key:"activate",value:function(){}},{key:"deactivate",value:function(){this.drawOperation.isCompleted||this.drawOperation.cancel()}},{key:"getVertexCoords",value:function(){return this.drawOperation.vertices}},{key:"onVertexAdd",value:function(e){this.emit("vertex-add",e)}},{key:"onVertexRemove",value:function(e){this.emit("vertex-remove",e)}},{key:"onVertexUpdate",value:function(e){this.emit("vertex-update",e)}},{key:"onCursorUpdate",value:function(e){this.emit("cursor-update",e)}},{key:"onComplete",value:function(e){this.emit("complete",e)}}]),n}(w.a.EventedMixin(ue.a));Object(p.a)([Object(v.b)({constructOnly:!0,nonNullable:!0})],de.prototype,"view",void 0),Object(p.a)([Object(v.b)({value:!0})],de.prototype,"enabled",null),Object(p.a)([Object(v.b)({constructOnly:!0})],de.prototype,"hasZ",void 0),Object(p.a)([Object(v.b)({constructOnly:!0,nonNullable:!0})],de.prototype,"defaultZ",void 0),Object(p.a)([Object(v.b)({constructOnly:!0})],de.prototype,"elevationInfo",void 0),Object(p.a)([Object(v.b)()],de.prototype,"snapToScene",void 0),Object(p.a)([Object(v.b)({constructOnly:!0})],de.prototype,"mode",void 0),Object(p.a)([Object(v.b)({constructOnly:!0})],de.prototype,"geometryType",void 0),Object(p.a)([Object(v.b)({readOnly:!0})],de.prototype,"type",void 0),de=Object(p.a)([Object(y.a)("esri.views.3d.interactive.editingTools.draw.DrawTool")],de);var fe=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e))._cursorScreenPoint=null,r._addVertexOnPointerUp=!1,r._activePointerId=null,r._viewHandles=new I.a,r}return Object(u.a)(n,[{key:"initialize",value:function(){"2d"===this.view.type?this._addViewHandles():this._addDrawTool(this.view)}},{key:"destroy",value:function(){"2d"===this.view.type?(this._removeViewHandles(),this._viewHandles.destroy()):this._removeDrawTool(),this.emit("destroy")}},{key:"coordinates",get:function(){return Object(se.c)(b.a.getLogger("esri.views.draw.PointDrawAction"),"coordinates",{replacement:"vertices",version:"4.19"}),this.vertices[0]}},{key:"complete",value:function(){"2d"===this.view.type?this._cursorScreenPoint&&this._completeDrawing():this._drawTool.completeCreateOperation()}},{key:"_addViewHandles",value:function(){var e=this;this._removeViewHandles(),this._viewHandles.add([this.view.on("pointer-down",(function(t){e._shouldHandlePointerEvent(t)&&(e._snappingTask=Object(h.a)(e._snappingTask),e._activePointerId=t.pointerId,e._addVertexOnPointerUp=!0,e._cursorScreenPoint=Object(D.a)(t),"touch"===t.pointerType&&e._updateCursor(t.native))}),L.b.TOOL),this.view.on("pointer-move",(function(t){e._snappingTask=Object(h.a)(e._snappingTask),e._cursorScreenPoint=Object(D.a)(t),"touch"!==t.pointerType&&e._updateCursor(t.native)}),L.b.TOOL),this.view.on("pointer-drag",(function(t){e._shouldHandlePointerEvent(t)&&(e._snappingTask=Object(h.a)(e._snappingTask),e._addVertexOnPointerUp=!1)}),L.b.TOOL),this.view.on("pointer-up",(function(t){if(e._shouldHandlePointerEvent(t))if(e._snappingTask=Object(h.a)(e._snappingTask),e._activePointerId=null,e._addVertexOnPointerUp)t.stopPropagation(),e._vertexAddHandler();else{var n="touch"===t.pointerType;e._updateCursor(t.native,n)}}),L.b.TOOL),this.view.on("drag",["Shift"],(function(e){e.stopPropagation()}),L.b.TOOL),this.view.on("key-down",(function(t){t.key===te&&e._cursorScreenPoint&&(e._snappingTask=Object(h.a)(e._snappingTask),e._vertexAddHandler())}),L.b.TOOL)])}},{key:"_removeViewHandles",value:function(){this._viewHandles.removeAll()}},{key:"_addDrawTool",value:function(e){var t=this;this._drawTool=new de({view:e,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"point",mode:"click"}),this.view.toolViewManager.tools.push(this._drawTool),this.view.activeTool=this._drawTool,this._drawTool.on("cursor-update",(function(e){1===e.vertices.length&&t.emit("cursor-update",new Q(t.view,null,e.vertices[0].vertexIndex,t._drawTool.getVertexCoords()))})),this._drawTool.on("complete",(function(e){t.emit("draw-complete",new ee(null,t._drawTool.getVertexCoords())),t._removeDrawTool()}))}},{key:"_removeDrawTool",value:function(){Object(h.k)(this._drawTool)&&(this.view.tools.remove(this._drawTool),this._drawTool.destroy(),this._drawTool=null)}},{key:"_addVertex",value:function(e){var t=this._coordinateHelper.fromArray(e);this._isDuplicateOfLastVertex(t)||(this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometry.appendVertex(t),this.notifyChange("vertices"))}},{key:"_updateCursor",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._popCursorVertex(),this._cursorScreenPoint){var r=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);if(Object(h.k)(r)&&!n){this._pushCursorVertex(r.vertex);var i=function(){return new Q(t.view,e,t._activeComponent.vertices.length,t.vertices,Object(h.k)(t._stagedVertex)?new O.a(t._stagedVertex):null)};this.emit("cursor-update",i()),Object(h.k)(this._snappingTask)&&this._snappingTask.promise.then((function(e){e.valid&&t.emit("cursor-update",i())}),(function(){}))}}}},{key:"_completeDrawing",value:function(e){this._activePointerId=null,this._popCursorVertex(),this._snappingTask=Object(h.a)(this._snappingTask),Object(h.k)(this._snappingManager)&&this._snappingManager.doneSnapping();var t=new ee(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}},{key:"_shouldHandlePointerEvent",value:function(e){return function(e){return"mouse"!==e.pointerType||0===e.button}(e)&&(Object(h.j)(this._activePointerId)||this._activePointerId===e.pointerId)}},{key:"_vertexAddHandler",value:function(){var e=Object(h.k)(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);Object(h.k)(e)&&(this._addVertex(e),this._completeDrawing())}}]),n}(K);Object(p.a)([Object(v.b)({readOnly:!0})],fe.prototype,"coordinates",null),fe=Object(p.a)([Object(y.a)("esri.views.draw.PointDrawAction")],fe);var pe=n(343),he=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e))._cursorScreenPoint=null,r._panEnabled=!1,r._popVertexOnPointerMove=!1,r._addVertexOnPointerUp=!1,r._activePointerId=null,r._viewHandles=new I.a,r._undoRedoHandles=new I.a,r.mode=pe.a,r}return Object(u.a)(n,[{key:"initialize",value:function(){"2d"===this.view.type?(this._addViewHandles(),this._addUndoRedoHandles()):this._addDrawTool(this.view)}},{key:"destroy",value:function(){"2d"===this.view.type?(this._removeViewHandles(),this._viewHandles.destroy(),this._removeUndoRedoHandles(),this._undoRedoHandles.destroy()):this._removeDrawTool(),this.emit("destroy")}},{key:"_dragEnabled",get:function(){return"freehand"===this.mode||"hybrid"===this.mode}},{key:"_clickEnabled",get:function(){return"click"===this.mode||"hybrid"===this.mode}},{key:"undo",value:function(){Object(V.a)(Object(z.a)(n.prototype),"undo",this).call(this),this.notifyChange("vertices")}},{key:"redo",value:function(){Object(V.a)(Object(z.a)(n.prototype),"redo",this).call(this),this.notifyChange("vertices")}},{key:"complete",value:function(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()}},{key:"getGeometryZValue",value:function(){return this.vertices.length>0&&this.vertices[0].length>2?this.vertices[0][2]:this._get("defaultZ")}},{key:"_addViewHandles",value:function(){var e=this;this._removeViewHandles(),this._viewHandles.add([this.view.on("click",(function(e){e.stopPropagation()}),L.b.TOOL),this.view.on("pointer-down",(function(t){e._shouldHandlePointerEvent(t)&&(e._snappingTask=Object(h.a)(e._snappingTask),e._activePointerId=t.pointerId,e._addVertexOnPointerUp=!0,e._cursorScreenPoint=Object(D.a)(t),"touch"===t.pointerType&&e._updateCursor(t.native))}),L.b.TOOL),this.view.on("pointer-move",(function(t){e._snappingTask=Object(h.a)(e._snappingTask),e._popVertexOnPointerMove&&(e.undo(),e._popVertexOnPointerMove=!1),e._cursorScreenPoint=Object(D.a)(t),"touch"!==t.pointerType&&e._updateCursor(t.native)}),L.b.TOOL),this.view.on("pointer-drag",(function(t){e._shouldHandlePointerEvent(t)&&(e._snappingTask=Object(h.a)(e._snappingTask),e._cursorScreenPoint=Object(D.a)(t),e._dragEnabled&&!e._panEnabled?e._vertexAddHandler(t):e._addVertexOnPointerUp=!1)}),L.b.TOOL),this.view.on("pointer-up",(function(t){if(e._shouldHandlePointerEvent(t))if(e._snappingTask=Object(h.a)(e._snappingTask),e._activePointerId=null,e._addVertexOnPointerUp){if(!e._clickEnabled)return 1===e.vertices.length&&e.vertices.pop(),void e._drawCompleteHandler(t);e._vertexAddHandler(t)}else{var n="touch"===t.pointerType;e._updateCursor(t.native,n)}}),L.b.TOOL),this.view.on("drag",(function(t){e._dragEnabled&&Object(h.k)(e._activePointerId)&&!e._panEnabled&&t.stopPropagation()}),L.b.TOOL),this.view.on("drag",["Shift"],(function(e){e.stopPropagation()}),L.b.TOOL),this.view.on("double-click",(function(t){t.stopPropagation(),e._drawCompleteHandler(t)}),L.b.TOOL),this.view.on("double-click",["Control"],(function(t){t.stopPropagation(),e._drawCompleteHandler(t)}),L.b.TOOL),this.view.on("key-down",(function(t){var n=t.key,r=t.repeat;n===ie&&!r&&e._cursorScreenPoint?(t.stopPropagation(),e._snappingTask=Object(h.a)(e._snappingTask),e._vertexAddHandler(t)):n===te&&!r&&e._cursorScreenPoint&&e.vertices.length>2?(t.stopPropagation(),e._snappingTask=Object(h.a)(e._snappingTask),e._vertexAddHandler(t),e._drawCompleteHandler(t)):n!==re||e.interactiveUndoDisabled||r?n!==ne||e.interactiveUndoDisabled||r?n!==ae||r||(t.stopPropagation(),e._panEnabled=!0):(t.stopPropagation(),e.redo()):(t.stopPropagation(),e.undo())}),L.b.TOOL),this.view.on("key-up",(function(t){t.key===ae&&(t.stopPropagation(),e._panEnabled=!1)}),L.b.TOOL)])}},{key:"_addUndoRedoHandles",value:function(){var e=this;this._removeUndoRedoHandles(),this._undoRedoHandles.add([this._editGeometry.on("vertex-remove",(function(t){if(e.notifyChange("vertices"),"undo"===t.operation){var n=e._nativeEventHistory.undoStack.pop();e._nativeEventHistory.redoStack.push(n);var i=Object(r.a)(e._committedVertices);Object(h.k)(e._stagedVertex)&&i.push(e._coordinateHelper.pointToArray(e._stagedVertex)),e.emit("undo",new X(e.view,n,t.vertices[0].index,i))}})),this._editGeometry.on("vertex-add",(function(t){if(e.notifyChange("vertices"),"apply"===t.operation){var n=e._nativeEventHistory.undoStack[e._nativeEventHistory.undoStack.length],i=e._committedVertices.length-1,a=new Z(e.view,n,i,e.vertices);e.emit("vertex-add",a),a.defaultPrevented&&(e._popVertexOnPointerMove=!0)}else if("redo"===t.operation){var o=e._nativeEventHistory.redoStack.pop();e._nativeEventHistory.undoStack.push(o);var s=Object(r.a)(e._committedVertices);Object(h.k)(e._stagedVertex)&&s.push(e._coordinateHelper.pointToArray(e._stagedVertex)),e.emit("redo",new Z(e.view,o,t.vertices[0].index,s))}}))])}},{key:"_removeViewHandles",value:function(){this._viewHandles.removeAll()}},{key:"_removeUndoRedoHandles",value:function(){this._undoRedoHandles.removeAll()}},{key:"_addDrawTool",value:function(e){var t=this;this._drawTool=new de({view:e,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"polygon",mode:this.mode}),this.view.toolViewManager.tools.push(this._drawTool),this.view.activeTool=this._drawTool,this._drawTool.on("vertex-add",(function(e){1===e.vertices.length&&t.emit("vertex-add",new Z(t.view,null,e.vertices[0].vertexIndex,t._drawTool.getVertexCoords()))})),this._drawTool.on("cursor-update",(function(e){1===e.vertices.length&&t.emit("cursor-update",new Q(t.view,null,e.vertices[0].vertexIndex,t._drawTool.getVertexCoords()))})),this._drawTool.on("complete",(function(e){t.emit("draw-complete",new ee(null,t._drawTool.getVertexCoords())),t._removeDrawTool()}))}},{key:"_removeDrawTool",value:function(){Object(h.k)(this._drawTool)&&(this.view.tools.remove(this._drawTool),this._drawTool.destroy(),this._drawTool=null)}},{key:"_addVertex",value:function(e,t){var n=this._coordinateHelper.fromArray(e);if(!this._isDuplicateOfLastVertex(n)){this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometry.appendVertex(n);var r=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(r)}}},{key:"_updateCursor",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._popCursorVertex(),this._cursorScreenPoint){var r=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);if(Object(h.k)(r)&&!n){this._pushCursorVertex(r.vertex);var i=function(){return new Q(t.view,e,t._activeComponent.vertices.length,t.vertices,Object(h.k)(t._stagedVertex)?new O.a(t._stagedVertex):null)};this.emit("cursor-update",i()),Object(h.k)(this._snappingTask)&&this._snappingTask.promise.then((function(e){e.valid&&t.emit("cursor-update",i())}),(function(){}))}}}},{key:"_completeDrawing",value:function(e){if(this._activePointerId=null,this._popCursorVertex(),this._snappingTask=Object(h.a)(this._snappingTask),Object(h.k)(this._snappingManager)&&this._snappingManager.doneSnapping(),!(this.vertices.length<3)){var t=new ee(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}}},{key:"_shouldHandlePointerEvent",value:function(e){return function(e){return"mouse"!==e.pointerType||0===e.button}(e)&&(Object(h.j)(this._activePointerId)||this._activePointerId===e.pointerId)}},{key:"_vertexAddHandler",value:function(e){var t=Object(h.k)(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);Object(h.k)(t)&&this._addVertex(t,e.native)}},{key:"_drawCompleteHandler",value:function(e){this._completeDrawing(e.native)}}]),n}(K);Object(p.a)([Object(v.b)()],he.prototype,"_dragEnabled",null),Object(p.a)([Object(v.b)()],he.prototype,"_clickEnabled",null),Object(p.a)([Object(v.b)({type:pe.b})],he.prototype,"mode",void 0),he=Object(p.a)([Object(y.a)("esri.views.draw.PolygonDrawAction")],he);var be=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e))._cursorScreenPoint=null,r._panEnabled=!1,r._popVertexOnPointerMove=!1,r._addVertexOnPointerUp=!1,r._activePointerId=null,r._viewHandles=new I.a,r._undoRedoHandles=new I.a,r.mode=pe.a,r}return Object(u.a)(n,[{key:"initialize",value:function(){"2d"===this.view.type?(this._addViewHandles(),this._addUndoRedoHandles()):this._addDrawTool(this.view)}},{key:"destroy",value:function(){"2d"===this.view.type?(this._removeViewHandles(),this._viewHandles.destroy(),this._removeUndoRedoHandles(),this._undoRedoHandles.destroy()):this._removeDrawTool(),this.emit("destroy")}},{key:"_clickEnabled",get:function(){return"click"===this.mode||"hybrid"===this.mode}},{key:"_dragEnabled",get:function(){return"freehand"===this.mode||"hybrid"===this.mode}},{key:"undo",value:function(){Object(V.a)(Object(z.a)(n.prototype),"undo",this).call(this),this.notifyChange("vertices")}},{key:"redo",value:function(){Object(V.a)(Object(z.a)(n.prototype),"redo",this).call(this),this.notifyChange("vertices")}},{key:"complete",value:function(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()}},{key:"_addViewHandles",value:function(){var e=this;this._removeViewHandles(),this._viewHandles.add([this.view.on("click",(function(e){e.stopPropagation()}),L.b.TOOL),this.view.on("pointer-down",(function(t){e._shouldHandlePointerEvent(t)&&!e._panEnabled&&(e._snappingTask=Object(h.a)(e._snappingTask),e._activePointerId=t.pointerId,e._addVertexOnPointerUp=!0,e._cursorScreenPoint=Object(D.a)(t),"touch"===t.pointerType&&e._updateCursor(t.native))}),L.b.TOOL),this.view.on("pointer-move",(function(t){e._popVertexOnPointerMove&&(e.undo(),e._popVertexOnPointerMove=!1),e._snappingTask=Object(h.a)(e._snappingTask),e._cursorScreenPoint=Object(D.a)(t),"touch"!==t.pointerType&&e._updateCursor(t.native)}),L.b.TOOL),this.view.on("pointer-drag",(function(t){e._shouldHandlePointerEvent(t)&&(e._snappingTask=Object(h.a)(e._snappingTask),e._cursorScreenPoint=Object(D.a)(t),e._dragEnabled&&!e._panEnabled?e._vertexAddHandler(t):e._addVertexOnPointerUp=!1)}),L.b.TOOL),this.view.on("pointer-up",(function(t){if(e._shouldHandlePointerEvent(t))if(e._snappingTask=Object(h.a)(e._snappingTask),e._activePointerId=null,e._addVertexOnPointerUp){if(!e._clickEnabled)return 1===e.vertices.length&&e.vertices.pop(),void e._drawCompleteHandler(t);e._vertexAddHandler(t)}else{var n="touch"===t.pointerType;e._updateCursor(t.native,n)}}),L.b.TOOL),this.view.on("drag",(function(t){e._dragEnabled&&Object(h.k)(e._activePointerId)&&!e._panEnabled&&t.stopPropagation()}),L.b.TOOL),this.view.on("drag",["Shift"],(function(e){e.stopPropagation()}),L.b.TOOL),this.view.on("double-click",(function(t){t.stopPropagation(),e._drawCompleteHandler(t)}),L.b.TOOL),this.view.on("double-click",["Control"],(function(t){t.stopPropagation(),e._drawCompleteHandler(t)}),L.b.TOOL),this.view.on("key-down",(function(t){var n=t.key,r=t.repeat;n===ie&&!r&&e._cursorScreenPoint?(t.stopPropagation(),e._snappingTask=Object(h.a)(e._snappingTask),e._vertexAddHandler(t)):n===te&&!r&&e._cursorScreenPoint&&e.vertices.length>1?(t.stopPropagation(),e._snappingTask=Object(h.a)(e._snappingTask),e._vertexAddHandler(t),e._drawCompleteHandler(t)):n!==re||e.interactiveUndoDisabled||r?n!==ne||e.interactiveUndoDisabled||r?n!==ae||r||(t.stopPropagation(),e._panEnabled=!0):(t.stopPropagation(),e.redo()):(t.stopPropagation(),e.undo())}),L.b.TOOL),this.view.on("key-up",(function(t){t.key===ae&&(t.stopPropagation(),e._panEnabled=!1)}),L.b.TOOL)])}},{key:"_addUndoRedoHandles",value:function(){var e=this;this._removeUndoRedoHandles(),this._undoRedoHandles.add([this._editGeometry.on("vertex-remove",(function(t){if(e.notifyChange("vertices"),"undo"===t.operation){var n=e._nativeEventHistory.undoStack.pop();e._nativeEventHistory.redoStack.push(n);var i=Object(r.a)(e._committedVertices);Object(h.k)(e._stagedVertex)&&i.push(e._coordinateHelper.pointToArray(e._stagedVertex)),e.emit("undo",new X(e.view,n,t.vertices[0].index,i))}})),this._editGeometry.on("vertex-add",(function(t){if(e.notifyChange("vertices"),"apply"===t.operation){var n=e._nativeEventHistory.undoStack[e._nativeEventHistory.undoStack.length],i=e._committedVertices.length-1,a=new Z(e.view,n,i,e.vertices);e.emit("vertex-add",a),a.defaultPrevented&&(e._popVertexOnPointerMove=!0)}else if("redo"===t.operation){var o=e._nativeEventHistory.redoStack.pop();e._nativeEventHistory.undoStack.push(o);var s=Object(r.a)(e._committedVertices);Object(h.k)(e._stagedVertex)&&s.push(e._coordinateHelper.pointToArray(e._stagedVertex)),e.emit("redo",new Z(e.view,o,t.vertices[0].index,s))}}))])}},{key:"_removeViewHandles",value:function(){this._viewHandles.removeAll()}},{key:"_removeUndoRedoHandles",value:function(){this._undoRedoHandles.removeAll()}},{key:"_addDrawTool",value:function(e){var t=this;this._drawTool=new de({view:e,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"polyline",mode:this.mode}),this.view.toolViewManager.tools.push(this._drawTool),this.view.activeTool=this._drawTool,this._drawTool.on("vertex-add",(function(e){1===e.vertices.length&&t.emit("vertex-add",new Z(t.view,null,e.vertices[0].vertexIndex,t._drawTool.getVertexCoords()))})),this._drawTool.on("cursor-update",(function(e){1===e.vertices.length&&t.emit("cursor-update",new Q(t.view,null,e.vertices[0].vertexIndex,t._drawTool.getVertexCoords()))})),this._drawTool.on("complete",(function(e){t.emit("draw-complete",new ee(null,t._drawTool.getVertexCoords())),t._removeDrawTool()}))}},{key:"_removeDrawTool",value:function(){Object(h.k)(this._drawTool)&&(this.view.tools.remove(this._drawTool),this._drawTool=Object(h.e)(this._drawTool))}},{key:"_addVertex",value:function(e,t){var n=this._coordinateHelper.fromArray(e);if(!this._isDuplicateOfLastVertex(n)){this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometry.appendVertex(n);var r=t||new Event("placeholder");this._nativeEventHistory.undoStack.push(r)}}},{key:"_updateCursor",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._popCursorVertex(),this._cursorScreenPoint){var r=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);if(Object(h.k)(r)&&!n){this._pushCursorVertex(r.vertex);var i=function(){return new Q(t.view,e,t._activeComponent.vertices.length,t.vertices,Object(h.k)(t._stagedVertex)?new O.a(t._stagedVertex):null)};this.emit("cursor-update",i()),Object(h.k)(this._snappingTask)&&this._snappingTask.promise.then((function(e){e.valid&&t.emit("cursor-update",i())}),(function(){}))}}}},{key:"_completeDrawing",value:function(e){if(this._activePointerId=null,this._popCursorVertex(),this._snappingTask=Object(h.a)(this._snappingTask),Object(h.k)(this._snappingManager)&&this._snappingManager.doneSnapping(),!(this.vertices.length<2)){var t=new ee(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}}},{key:"_shouldHandlePointerEvent",value:function(e){return function(e){return"mouse"!==e.pointerType||0===e.button}(e)&&(Object(h.j)(this._activePointerId)||this._activePointerId===e.pointerId)}},{key:"_vertexAddHandler",value:function(e){var t=Object(h.k)(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);Object(h.k)(t)&&this._addVertex(t,e.native)}},{key:"_drawCompleteHandler",value:function(e){this._completeDrawing(e.native)}}]),n}(K);Object(p.a)([Object(v.b)()],be.prototype,"_clickEnabled",null),Object(p.a)([Object(v.b)()],be.prototype,"_dragEnabled",null),Object(p.a)([Object(v.b)({type:pe.b})],be.prototype,"mode",void 0),be=Object(p.a)([Object(y.a)("esri.views.draw.PolylineDrawAction")],be);var ve=n(634),ye=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e))._isDragging=!1,r._panEnabled=!1,r._cursorScreenPoint=null,r._viewHandles=new I.a,r._activePointerId=null,r._addVertexOnPointerUp=!1,r.viewAlignedCoordinateSystem=null,r.mode="freehand",r}return Object(u.a)(n,[{key:"initialize",value:function(){"2d"===this.view.type?this._addViewHandles():this._addDrawTool(this.view)}},{key:"destroy",value:function(){"2d"===this.view.type?(this._removeViewHandles(),this._viewHandles.destroy()):this._removeDrawTool(),this.emit("destroy")}},{key:"complete",value:function(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()}},{key:"getGeometryZValue",value:function(){return this.vertices.length>0&&this.vertices[0].length>2?this.vertices[0][2]:this._get("defaultZ")}},{key:"_addViewHandles",value:function(){this._removeViewHandles(),"click"===this.mode?this._viewHandles.add(this._getClickModeViewHandles()):this._viewHandles.add(this._getDragModeViewHandles())}},{key:"_getDragModeViewHandles",value:function(){var e=this;return[this.view.on("immediate-click",(function(t){if(t.stopPropagation(),t.mapPoint&&!e._panEnabled){var n=e.getCoordsFromScreenPoint(Object(D.a)(t));Object(h.k)(n)&&(e._vertexAddHandler(t),e._drawCompleteHandler(t))}}),L.b.TOOL),this.view.on("pointer-down",(function(t){e._shouldHandlePointerEvent(t)&&(e._snappingTask=Object(h.a)(e._snappingTask),e._panEnabled||(e._resetGeometry(),e._addVertexOnPointerUp=!0,e._cursorScreenPoint=Object(D.a)(t),e._activePointerId=t.pointerId,e._vertexAddHandler(t),e._isDragging=!1,"touch"===t.pointerType&&e._updateCursor(t.native)))}),L.b.TOOL),this.view.on("pointer-move",(function(t){e._snappingTask=Object(h.a)(e._snappingTask),Object(h.j)(e._activePointerId)&&"touch"!==t.pointerType&&(e._cursorScreenPoint=Object(D.a)(t),e._updateCursor(t.native))}),L.b.TOOL),this.view.on("pointer-drag",(function(t){e._shouldHandlePointerEvent(t)&&(e._snappingTask=Object(h.a)(e._snappingTask),e._isDragging=!0,e._cursorScreenPoint=Object(D.a)(t),e._updateCursor(t.native))}),L.b.TOOL),this.view.on("pointer-up",(function(t){e._shouldHandlePointerEvent(t)&&e._addVertexOnPointerUp&&(e._snappingTask=Object(h.a)(e._snappingTask),e._activePointerId=null,e._isDragging&&e._vertexAddHandler(t),2===e._committedVertices.length&&e._drawCompleteHandler(t),e._isDragging=!1)}),L.b.TOOL),this.view.on("key-down",(function(t){t.key===te&&e._cursorScreenPoint?(e._snappingTask=Object(h.a)(e._snappingTask),e._drawCompleteHandler(t)):t.key===ae&&(e._panEnabled=!0)}),L.b.TOOL),this.view.on("key-up",(function(t){t.key===ae&&(e._panEnabled=!1)}),L.b.TOOL),this.view.on("drag",(function(t){Object(h.k)(e._activePointerId)&&t.stopPropagation()}),L.b.TOOL),this.view.on("drag",["Shift"],(function(e){e.stopPropagation()}),L.b.TOOL)]}},{key:"_getClickModeViewHandles",value:function(){var e=this;return[this.view.on("pointer-down",(function(t){e._snappingTask=Object(h.a)(e._snappingTask),e._cursorScreenPoint=Object(D.a)(t),e._activePointerId=t.pointerId,e._isDragging=!1,"touch"===t.pointerType&&e._updateCursor(t.native)}),L.b.TOOL),this.view.on("pointer-move",(function(t){e._snappingTask=Object(h.a)(e._snappingTask),e._cursorScreenPoint=Object(D.a)(t),Object(h.j)(e._activePointerId)&&"touch"!==t.pointerType&&e._updateCursor(t.native)}),L.b.TOOL),this.view.on("pointer-drag",(function(t){e._shouldHandlePointerEvent(t)&&(e._snappingTask=Object(h.a)(e._snappingTask),e._isDragging=!0)}),L.b.TOOL),this.view.on("pointer-up",(function(t){e._shouldHandlePointerEvent(t)&&(e._snappingTask=Object(h.a)(e._snappingTask),e._activePointerId=null,t.stopPropagation(),e._isDragging||e._vertexAddHandler(t),2!==e.vertices.length||e._isDragging||e._drawCompleteHandler(t),e._isDragging=!1)}),L.b.TOOL),this.view.on("key-down",(function(t){t.key===ie&&e._cursorScreenPoint&&(e._vertexAddHandler(t),2===e.vertices.length&&e._drawCompleteHandler(t)),t.key===te&&e._cursorScreenPoint&&2===e.vertices.length&&e._drawCompleteHandler(t)}),L.b.TOOL)]}},{key:"_removeViewHandles",value:function(){this._viewHandles.removeAll()}},{key:"_addDrawTool",value:function(e){var t=this;this._drawTool=new de({view:e,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"segment",mode:this.mode}),this.view.toolViewManager.tools.push(this._drawTool),this.view.activeTool=this._drawTool,this._drawTool.on("vertex-add",(function(e){1===e.vertices.length&&t.emit("vertex-add",new Z(t.view,null,e.vertices[0].vertexIndex,t._drawTool.getVertexCoords()))})),this._drawTool.on("cursor-update",(function(e){1===e.vertices.length&&t.emit("cursor-update",new Q(t.view,null,e.vertices[0].vertexIndex,t._drawTool.getVertexCoords()))})),this._drawTool.on("complete",(function(e){t.emit("draw-complete",new ee(null,t._drawTool.getVertexCoords())),t._removeDrawTool()}))}},{key:"_removeDrawTool",value:function(){Object(h.k)(this._drawTool)&&(this.view.tools.remove(this._drawTool),this._drawTool.destroy(),this._drawTool=null)}},{key:"_addVertex",value:function(e,t){var n=this._coordinateHelper.fromArray(e);if(!this._isDuplicateOfLastVertex(n)){this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometry.appendVertex(n),1===this._committedVertices.length&&(this.viewAlignedCoordinateSystem=Object(ve.a)(this.view,this._committedVertices[0]));var r=this._committedVertices.length-1,i=new Z(this.view,t,r,this.vertices);this.emit("vertex-add",i)}}},{key:"_updateCursor",value:function(e){var t=this;if(this._popCursorVertex(),this._cursorScreenPoint){var n=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);if(Object(h.k)(n)){this._pushCursorVertex(n.vertex);var r=function(){return new Q(t.view,e,t._activeComponent.vertices.length,t.vertices,Object(h.k)(t._stagedVertex)?new O.a(t._stagedVertex):null)};this.emit("cursor-update",r()),Object(h.k)(this._snappingTask)&&this._snappingTask.promise.then((function(e){e.valid&&t.emit("cursor-update",r())}),(function(){}))}}}},{key:"_completeDrawing",value:function(e){if(this._activePointerId=null,this._popCursorVertex(),this._cursorScreenPoint=null,this._isDragging=!1,this._snappingTask=Object(h.a)(this._snappingTask),Object(h.k)(this._snappingManager)&&this._snappingManager.doneSnapping(),!(this.vertices.length<1)){var t=new ee(e,this.vertices);this.emit("draw-complete",t),t.defaultPrevented||this._removeViewHandles()}}},{key:"_resetGeometry",value:function(){this._editGeometry.destroy(),this._editGeometry=new H.a(new q.c(this._coordinateHelper),"polygon"),this._activeComponent=new q.a(this._editGeometry.editGeometry),this._editGeometry.editGeometry.components.push(this._activeComponent)}},{key:"_shouldHandlePointerEvent",value:function(e){return function(e){return"mouse"!==e.pointerType||0===e.button}(e)&&(Object(h.j)(this._activePointerId)||this._activePointerId===e.pointerId)}},{key:"_vertexAddHandler",value:function(e){var t=Object(h.k)(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);Object(h.k)(t)&&this._addVertex(t,e.native)}},{key:"_drawCompleteHandler",value:function(e){this._completeDrawing(e.native)}}]),n}(K);Object(p.a)([Object(v.b)({type:["freehand","click"]})],ye.prototype,"mode",void 0),ye=Object(p.a)([Object(y.a)("esri/views/2d/engine/markup/SegmentDrawAction")],ye);var me=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.apply(this,arguments)).activeAction=null,e.type="draw",e.view=null,e}return Object(u.a)(n,[{key:"destroy",value:function(){this.activeAction&&(this.activeAction.destroy(),this.activeAction=null)}},{key:"create",value:function(e,t){this.reset();var n=Object(s.a)({view:this.view},t);switch(e){case"point":n.editGeometryType="point",this.activeAction=new fe(n);break;case"polyline":n.editGeometryType="polyline",this.activeAction=new be(n);break;case"multipoint":n.editGeometryType="polygon",this.activeAction=new oe(n);break;case"polygon":n.editGeometryType="polygon",this.activeAction=new he(n);break;case"rectangle":case"circle":case"ellipse":case"triangle":n.editGeometryType="polygon",this.activeAction=new ye(n)}return this.activeAction}},{key:"complete",value:function(){this.activeAction&&this.activeAction.complete(),this.activeAction=null}},{key:"reset",value:function(){this.activeAction&&this.activeAction.destroy(),this.activeAction=null}}]),n}(N.a);Object(p.a)([Object(v.b)()],me.prototype,"activeAction",void 0),Object(p.a)([Object(v.b)({readOnly:!0})],me.prototype,"type",void 0),Object(p.a)([Object(v.b)()],me.prototype,"view",void 0);var ge=me=Object(p.a)([Object(y.a)("esri.views.draw.Draw")],me),Oe=n(230);function je(e){switch(e){case 0:break;case 1:return"not owned by a graphics layer";case 2:return"no geometry";case 3:return"the geometry type is not supported";case 4:return"the elevation mode is not supported";case 5:return"the symbol type is not supported"}return""}var we=n(761),_e=n(551),ke=n(163);function xe(e){var t;if("graphics"!==(null==(t=e.layer)?void 0:t.type))return 1;if(Object(h.j)(e.geometry))return 2;switch(e.geometry.type){case"point":break;case"polygon":case"polyline":return 0;case"multipoint":case"extent":case"mesh":default:return 3}var n=Object(h.k)(e.symbol)&&"point-3d"===e.symbol.type&&e.symbol.symbolLayers;return n&&n.length>0&&n.some((function(e){return"object"===e.type}))?"on-the-ground"!==Object(ke.e)(e)&&Object(ke.g)(e)?4:0:5}var Se=null;function Te(){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Se,e.t0){e.next=5;break}return e.next=4,Promise.all([n.e(5),n.e(96)]).then(n.bind(null,1314));case 4:Se=e.sent;case 5:return e.abrupt("return",Se);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ce=n(574),Pe=n(355),Ie=n(44),Me=n(91),Ae=n(33),Re=n(70),Le=n(31),Fe=n(27),De=n(273),Ne=n(609),Ve=function(e){Object(d.a)(r,e);var t=Object(f.a)(r);function r(e){var n;return Object(l.a)(this,r),(n=t.call(this,e)).sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null}},n}return Object(u.a)(r,[{key:"updating",get:function(){return Object(De.a)(this.snappingSources,(function(e){return e.snappingSource.updating}))||this.updatingHandles.updating}},{key:"snappingSources",get:function(){var e,t=this._get("snappingSources")||new Map,n=new Map;if(null!=(e=this.options)&&e.featureSources){var r,i=Object(c.a)(this.options.featureSources.items);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a.layer.uid,s=t.get(o);if(s)t.delete(o),n.set(o,s);else if(a.layer.loaded){var l=this.createSourceInfo(a);Object(h.k)(l)&&n.set(o,l)}else this.updatingHandles.addPromise(a.layer.load())}}catch(f){i.e(f)}finally{i.f()}}var u,d=Object(c.a)(t);try{for(d.s();!(u=d.n()).done;){Object(Le.a)(u.value,2)[1].destroy()}}catch(f){d.e(f)}finally{d.f()}return n}},{key:"initialize",value:function(){var e,t=this;this.updatingHandles.add(this,"snappingSources",(function(){t.notifyChange("updating")}),1),Object(h.k)(this.view)&&this.handles.add([null==(e=this.view.refreshManager)?void 0:e.on("refresh",(function(e){"interval"===e.trigger&&t.refreshSourceOfLayer(e.layerView.layer)})),this.view.on("layerview-create",(function(e){return t.updateLayerView(e.layer,e.layerView)})),this.view.on("layerview-destroy",(function(e){return t.updateLayerView(e.layer,null)}))])}},{key:"refreshSourceOfLayer",value:function(e){var t,n=Object(c.a)(this.snappingSources);try{for(n.s();!(t=n.n()).done;){var r=Object(Le.a)(t.value,2)[1].snappingSource;r.layerSource.layer===e&&r.refresh()}}catch(i){n.e(i)}finally{n.f()}}},{key:"updateLayerView",value:function(e,t){var n,r=Object(c.a)(this.snappingSources);try{for(r.s();!(n=r.n()).done;){var i=Object(Le.a)(n.value,2)[1];i.snappingSource.layerSource.layer===e&&(i.layerView=t)}}catch(a){r.e(a)}finally{r.f()}}},{key:"destroy",value:function(){this._set("options",null);var e,t=Object(c.a)(this.snappingSources);try{for(t.s();!(e=t.n()).done;){Object(Le.a)(e.value,2)[1].destroy()}}catch(n){t.e(n)}finally{t.f()}}},{key:"fetchCandidates",value:function(){var e=Object(o.a)(a.a.mark((function e(t,n,r){var i,o,s,l,u,d,f=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.options.effectiveFeatureEnabled){e.next=2;break}return e.abrupt("return",[]);case 2:i=[],o={distance:this.computeScreeenSizeDistanceParameters(t,n),point:t,coordinateHelper:n.coordinateHelper,types:this.types,filter:null},s=Object(c.a)(this.snappingSources);try{for(u=function(){var e=Object(Le.a)(l.value,2)[1],t=e.snappingSource,a=e.layerView;!t.layerSource.enabled||Object(h.k)(a)&&a.suspended||i.push(t.fetchCandidates(o,r).then((function(e){return e.candidates.filter((function(e){return!f.candidateIsExcluded(t,e,n.excludeFeature)}))})))},s.s();!(l=s.n()).done;)u()}catch(a){s.e(a)}finally{s.f()}return e.next=7,Object(g.k)(i);case 7:return d=e.sent.flat(),e.abrupt("return",(Object(g.u)(r),Object(Re.e)(t,d),d));case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"computeScreeenSizeDistanceParameters",value:function(e,t){var n=this.options.distance*("touch"===t.pointer?this.options.touchSensitivityMultiplier:1);return Object(h.j)(this.view)?n:"2d"===this.view.type?n*this.view.resolution:this.computeScreeenSizeDistanceParameters3D(e,n,this.view,t)}},{key:"computeScreeenSizeDistanceParameters3D",value:function(e,t,n,r){var i=r.coordinateHelper,a=r.elevationInfo,o=n.state.camera.computeScreenPixelSizeAt(Object(Re.a)(e,i,a,n,Ue))*n.renderCoordsHelper.unitInMeters/n.mapCoordsHelper.unitInMeters,s=t*o;return{x:s/this.computeScreenMagnitudeOfMapOffset(e,o,0,n,r),y:s/this.computeScreenMagnitudeOfMapOffset(e,0,o,n,r)}}},{key:"computeScreenMagnitudeOfMapOffset",value:function(e,t,n,r,i){var a=i.coordinateHelper,o=i.elevationInfo,s=a.clone(e);s[0]+=t,s[1]+=n;var c=Object(Re.b)(e,a,o,r),l=Object(Re.b)(s,a,o,r),u=l.x-c.x,d=l.y-c.y;return Math.sqrt(u*u+d*d)}},{key:"types",get:function(){return 3}},{key:"candidateIsExcluded",value:function(e,t,n){if(Object(h.j)(n))return!1;var r=this.getCandidateObjectId(t);if(Object(h.j)(r))return!1;var i=e.layerSource.layer;return"graphics"===i.type?n.uid===r:n.sourceLayer===i&&!(!n.attributes||!("objectIdField"in i))&&n.attributes[i.objectIdField]===r}},{key:"getCandidateObjectId",value:function(e){return e instanceof Ne.a?e.objectId:null}},{key:"createSourceInfo",value:function(e){var t=this,n=this.createFeatureSnappingSourceType(e);if(Object(h.j)(n))return null;if("loading"in n)return this.updatingHandles.addPromise(n.loading.then((function(){t.destroyed||t.notifyChange("snappingSources")}))),null;var r=Object(h.k)(this.view)?this.view.allLayerViews.find((function(t){return t.layer===e.layer})):null;return new ze(n.source,r)}},{key:"createFeatureSnappingSourceType",value:function(e){switch(e.layer.type){case"feature":case"geojson":case"csv":return this.createFeatureSnappingSourceFeatureLayer(e);case"graphics":return this.createFeatureSnappingSourceGraphicsLayer(e)}return null}},{key:"createFeatureSnappingSourceFeatureLayer",value:function(e){switch(e.layer.source.type){case"feature-layer":var t=this.getSourceModule("featureService");return Object(h.k)(t.module)?{source:new t.module.FeatureServiceSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:t.loader};case"memory":case"csv":case"geojson":if("mesh"===e.layer.geometryType)return null;var n=this.getSourceModule("featureCollection");return Object(h.k)(n.module)?{source:new n.module.FeatureCollectionSnappingSource({layerSource:e})}:{loading:n.loader}}return null}},{key:"createFeatureSnappingSourceGraphicsLayer",value:function(e){var t=this.getSourceModule("graphics");return Object(h.k)(t.module)?{source:new t.module.GraphicsSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:t.loader}}},{key:"getSourceModule",value:function(e){var t=this.sourceModules[e];if(Object(h.j)(t.loader)){var n=this.loadSourceModule(e).then((function(e){t.module=e}));return t.loader=n,{module:t.module,loader:n}}return{module:t.module,loader:t.loader}}},{key:"loadSourceModule",value:function(e){switch(e){case"featureService":return this.updatingHandles.addPromise(n.e(136).then(n.bind(null,1443)));case"featureCollection":return this.updatingHandles.addPromise(n.e(135).then(n.bind(null,1406)));case"graphics":return this.updatingHandles.addPromise(Promise.all([n.e(6),n.e(7),n.e(57)]).then(n.bind(null,1407)))}return null}}]),r}(Me.a);Object(p.a)([Object(v.b)({constructOnly:!0})],Ve.prototype,"spatialReference",void 0),Object(p.a)([Object(v.b)({constructOnly:!0})],Ve.prototype,"view",void 0),Object(p.a)([Object(v.b)()],Ve.prototype,"options",void 0),Object(p.a)([Object(v.b)({readOnly:!0})],Ve.prototype,"updating",null),Object(p.a)([Object(v.b)({readOnly:!0})],Ve.prototype,"snappingSources",null),Ve=Object(p.a)([Object(y.a)("esri.views.interactive.snapping.FeatureSnappingEngine")],Ve);var ze=function(){function e(t,n){Object(l.a)(this,e),this.snappingSource=t,this.layerView=n,this.handles=new I.a;var r=this.snappingSource.layerSource.layer;if("refresh"in r){var i=r;this.handles.add(i.on("refresh",(function(){return t.refresh()})))}this.handles.add([Object(M.a)(t,"updating",(function(e){return t.layerSource.updating=e}),!0),Object(M.a)(t,"availability",(function(e){return t.layerSource.availability=e}),!0)])}return Object(u.a)(e,[{key:"destroy",value:function(){this.snappingSource.destroy(),this.handles.destroy()}}]),e}(),Ue=Object(Fe.e)(),Be=n(60),Ge=n(104),qe=function(){function e(t,n){Object(l.a)(this,e),this.view=t,this.options=n,this.squaredShortLineThreshold=Ge.a.shortLineThreshold*Ge.a.shortLineThreshold}return Object(u.a)(e,[{key:"snap",value:function(e,t){return Object(h.k)(t.vertexHandle)?"vertex"!==t.vertexHandle.type?[]:this.snapExistingVertex(e,t):this.snapNewVertex(e,t)}},{key:"edgeExceedsShortLineThreshold",value:function(e,t){return this.exceedsShortLineThreshold(e.left.pos,e.right.pos,t)}},{key:"exceedsShortLineThreshold",value:function(e,t,n){var r=n.elevationInfo,i=n.geometry.editGeometry.coordinateHelper;return 0===this.squaredShortLineThreshold||Object(Re.f)(Object(Re.b)(t,i,r,this.view),Object(Re.b)(e,i,r,this.view))>this.squaredShortLineThreshold}},{key:"squaredProximityTreshold",value:function(e){return"touch"===e?this.squaredTouchProximityThreshold:this.squaredMouseProximityTreshold}},{key:"squaredMouseProximityTreshold",get:function(){return this.options.distance*this.options.distance}},{key:"squaredTouchProximityThreshold",get:function(){var e=this.options,t=e.distance*e.touchSensitivityMultiplier;return t*t}}]),e}(),He=n(149),We=n(45),$e=n(197),Je=n(225),Ye=n(271),Ke=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r,i=e.coordinateHelper,a=e.lineStart,o=e.lineEnd,s=e.targetPoint;return Object(l.a)(this,n),(r=t.call(this,i,s,new Ye.b(i,a,o))).referenceLineHint=new $e.a(2,a,o),r}return Object(u.a)(n,[{key:"hints",get:function(){return[this.referenceLineHint,new $e.a(0,this.lineEndClosestToTarget(),this.targetPoint)]}},{key:"lineEndClosestToTarget",value:function(){var e=this.constraint.start,t=this.constraint.end;return Object(We.q)(Object(Ae.g)(Object(Ae.d)(Xe,t,e),Object(Ae.d)(Ze,this.targetPoint,e)))>0?t:e}}]),n}(Je.a),Ze=Object(Be.a)(),Xe=Object(Be.a)(),Qe=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"snapNewVertex",value:function(e,t){var n=t.geometry.editGeometry.components[0],r=n.edges.length,i=[];if(r<1)return i;var a=t.coordinateHelper,o=Object(Re.b)(e,a,t.elevationInfo,this.view),s=n.edges[r-1],c=s;do{this.edgeExceedsShortLineThreshold(c,t)&&this._processCandidateProposal(c.left.pos,c.right.pos,e,o,t,i),c=c.left.left}while(c&&c!==s);return i}},{key:"snapExistingVertex",value:function(e,t){var n=[],r=Object(h.q)(t.vertexHandle),i=r.component;if(i.edges.length<2)return n;var a=t.coordinateHelper,o=Object(Re.b)(e,a,t.elevationInfo,this.view),s=r.left,c=r.right;s&&c&&this.edgeExceedsShortLineThreshold(s,t)&&this.edgeExceedsShortLineThreshold(c,t)&&this._processCandidateProposal(s.left.pos,c.right.pos,e,o,t,n);var l=i.edges[0],u=l;do{u!==r.left&&u!==r.right&&this.edgeExceedsShortLineThreshold(u,t)&&this._processCandidateProposal(u.left.pos,u.right.pos,e,o,t,n),u=u.right.right}while(u&&u!==l);return n}},{key:"_processCandidateProposal",value:function(e,t,n,r,i,a){var o=Object(He.g)(Object(Be.a)(),n,e,t),s=i.coordinateHelper,c=s.fromXYZ(o,s.getZ(n,0));Object(Re.f)(r,Object(Re.b)(c,s,i.elevationInfo,this.view))<this.squaredProximityTreshold(i.pointer)&&a.push(new Ke({coordinateHelper:i.coordinateHelper,lineStart:e,lineEnd:t,targetPoint:c}))}}]),n}(qe),et=n(547),tt=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r,i=e.coordinateHelper,a=e.referenceLine,o=e.lineStart,s=e.targetPoint;Object(l.a)(this,n);var c=i.clone(o);return Object(Ae.d)(c,Object(Ae.h)(c,c,a.right.pos),a.left.pos),(r=t.call(this,i,s,new Ye.b(i,o,c)))._referenceLines=[{edge:a,fadeLeft:!0,fadeRight:!0}],r}return Object(u.a)(n,[{key:"hints",get:function(){return[new $e.a(0,this.constraint.start,this.targetPoint),new et.a(this.constraint.start,this.targetPoint)].concat(Object(r.a)(this._referenceLines.map((function(e){return new $e.a(1,e.edge.left.pos,e.edge.right.pos,e.fadeLeft,e.fadeRight)}))))}},{key:"addReferenceLine",value:function(e){var t={edge:e,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach((function(n){e.right.right===n.edge&&(n.fadeLeft=!1,t.fadeRight=!1),e.left.left===n.edge&&(n.fadeRight=!1,t.fadeLeft=!1)})),this._referenceLines.push(t)}}]),n}(Je.a),nt=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.apply(this,arguments))._tmpProjection=Object(Be.a)(),e}return Object(u.a)(n,[{key:"snapNewVertex",value:function(e,t){var n=t.geometry.editGeometry.components[0],r=n.edges.length,i=n.vertices.length,a=[];if(r<2)return a;var o=Object(Re.b)(e,t.coordinateHelper,t.elevationInfo,this.view),s=n.vertices[i-1],c=n.vertices[0],l=n.edges[r-1],u=l;do{this.edgeExceedsShortLineThreshold(u,t)&&(this._checkEdgeForParalleLines(u,s.pos,e,o,t,a),this._checkEdgeForParalleLines(u,c.pos,e,o,t,a)),u=u.left.left}while(u&&u!==l);return a}},{key:"snapExistingVertex",value:function(e,t){var n=[],r=Object(h.q)(t.vertexHandle),i=r.component;if(i.edges.length<3)return n;var a=Object(Re.b)(e,t.coordinateHelper,t.elevationInfo,this.view),o=r.left,s=r.right,c=i.vertices[0],l=i.vertices.length,u=i.vertices[l-1],d=i.edges[0],f=d;do{f!==o&&f!==s&&this.edgeExceedsShortLineThreshold(f,t)&&(o&&this._checkEdgeForParalleLines(f,o.left.pos,e,a,t,n),s&&this._checkEdgeForParalleLines(f,s.right.pos,e,a,t,n),r===c?this._checkEdgeForParalleLines(f,u.pos,e,a,t,n):r===u&&this._checkEdgeForParalleLines(f,c.pos,e,a,t,n)),f=f.right.right}while(f&&f!==d);return n}},{key:"_checkEdgeForParalleLines",value:function(e,t,n,r,i,a){var o=e.left.pos,s=e.right.pos;if(Object(He.g)(this._tmpProjection,t,o,s),!(Object(Ae.j)(this._tmpProjection,t)<Ge.a.parallelLineThreshold)){Object(He.g)(this._tmpProjection,n,o,s,t);var c=i.coordinateHelper,l=c.fromXYZ(this._tmpProjection,c.getZ(n,0));if(Object(Re.f)(r,Object(Re.b)(l,c,i.elevationInfo,this.view))<this.squaredProximityTreshold(i.pointer)){if(this.parallelToPreviousCandidate(e,a))return;a.push(new tt({coordinateHelper:c,referenceLine:e,lineStart:t,targetPoint:l}))}}}},{key:"parallelToPreviousCandidate",value:function(e,t){var n,r=e.left.pos,i=e.right.pos,a=Object(c.a)(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(Object(He.g)(this._tmpProjection,i,o.constraint.start,o.constraint.end,r),Object(Ae.j)(this._tmpProjection,i)<Ge.a.parallelLineThreshold)return o.addReferenceLine(e),!0}}catch(s){a.e(s)}finally{a.f()}return!1}}]),n}(qe),rt=n(420),it=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r,i=e.coordinateHelper,a=e.targetPoint,o=e.constraint,s=e.previousVertex,c=e.centerVertex;return Object(l.a)(this,n),(r=t.call(this,i,a,o)).previousVertex=s,r.centerVertex=c,r.referenceLine=new $e.a(1,s,o.start),r}return Object(u.a)(n,[{key:"hints",get:function(){return[new $e.a(0,this.constraint.start,this.targetPoint),this.referenceLine,new rt.a(this.previousVertex,this.centerVertex,this.targetPoint)]}}]),n}(Je.a),at=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.apply(this,arguments))._tmp=Object(Be.a)(),e}return Object(u.a)(n,[{key:"snapNewVertex",value:function(e,t){var n=t.geometry.editGeometry.components[0],r=n.vertices.length,i=[];if(r<2)return i;var a=Object(Re.b)(e,t.coordinateHelper,t.elevationInfo,this.view),o=n.vertices[r-1];this._checkForSnappingCandidate(i,o.left,o.pos,e,o.left.left.pos,o.pos,t,e,a);var s=n.vertices[0];return this._checkForSnappingCandidate(i,s.right,s.pos,e,s.right.right.pos,s.pos,t,e,a),i}},{key:"snapExistingVertex",value:function(e,t){var n=[],r=Object(h.q)(t.vertexHandle),i=r.component,a=i.vertices.length;if(a<3)return n;var o=Object(Re.b)(e,t.coordinateHelper,t.elevationInfo,this.view),s=r.left,c=r.right,l=i.vertices[0],u=i.vertices[a-1];if(!s)return this._checkForSnappingCandidate(n,l.right.right.right,l.right.right.pos,e,l.right.right.right.right.pos,l.right.right.pos,t,e,o),n;if(!c)return this._checkForSnappingCandidate(n,u.left.left.left,u.left.left.pos,e,u.left.left.left.left.pos,u.left.left.pos,t,e,o),n;if(s&&s.left.left){var d=s.left.left;this._checkForSnappingCandidate(n,d,s.left.pos,e,d.left.pos,s.left.pos,t,e,o)}if(c&&c.right.right){var f=c.right.right;this._checkForSnappingCandidate(n,f,c.right.pos,e,f.right.pos,c.right.pos,t,e,o)}return n}},{key:"_checkForSnappingCandidate",value:function(e,t,n,r,i,a,o,s,c){if(this.edgeExceedsShortLineThreshold(t,o)){Object(Ae.d)(this._tmp,t.right.pos,t.left.pos);var l=Object(Be.e)(this._tmp[1],-this._tmp[0]),u=Object(Ae.g)(l,Object(Ae.d)(this._tmp,r,n))/Object(Ae.p)(l),d=o.coordinateHelper,f=d.fromXYZ(Object(Ae.o)(Object(Be.a)(),a,l,u),d.getZ(s,0));Object(Re.f)(c,Object(Re.b)(f,d,o.elevationInfo,this.view))<this.squaredProximityTreshold(o.pointer)&&e.push(new it({coordinateHelper:d,targetPoint:f,constraint:new Ye.e(d,a,Object(Ae.o)(d.createNew(),a,l,Object(We.q)(u))),previousVertex:i,centerVertex:a}))}}}]),n}(qe),ot=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r,i=e.coordinateHelper,a=e.targetPoint,o=e.point1,s=e.point2;return Object(l.a)(this,n),(r=t.call(this,i,a,new Ye.c(i,Object(Ae.m)(st,o,s,.5),.5*Object(Ae.i)(o,s)))).p1=o,r.p2=s,r}return Object(u.a)(n,[{key:"hints",get:function(){return[new $e.a(1,this.targetPoint,this.p1),new $e.a(1,this.targetPoint,this.p2),new rt.a(this.p1,this.targetPoint,this.p2)]}}]),n}(Je.a),st=Object(Be.a)(),ct=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"snapNewVertex",value:function(e,t){var n=t.geometry.editGeometry.components[0],r=[],i=n.vertices.length;if("polygon"!==t.geometry.type||i<2)return r;var a=n.vertices[0],o=n.vertices[i-1];return this._processCandidateProposal(a.pos,o.pos,e,t,r),r}},{key:"snapExistingVertex",value:function(e,t){var n=[],r=Object(h.q)(t.vertexHandle),i=r.component;return i.edges.length<2?n:"polyline"!==t.geometry.type||0!==r.index&&r.index!==i.vertices.length-1?(this._processCandidateProposal(r.left.left.pos,r.right.right.pos,e,t,n),n):n}},{key:"_processCandidateProposal",value:function(e,t,n,r,i){if(this.exceedsShortLineThreshold(e,t,r)){var a=Object(Ae.m)(Object(Be.a)(),e,t,.5),o=.5*Object(Ae.i)(e,t),s=Object(He.f)(Object(Be.a)(),n,a,o),c=r.coordinateHelper,l=c.fromXYZ(s,c.getZ(n,0)),u=Object(Re.b)(n,c,r.elevationInfo,this.view);Object(Re.f)(u,Object(Re.b)(l,c,r.elevationInfo,this.view))<this.squaredProximityTreshold(r.pointer)&&i.push(new ot({coordinateHelper:c,targetPoint:l,point1:e,point2:t}))}}}]),n}(qe),lt=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).updating=!1,r._snappers=new _.a,r}return Object(u.a)(n,[{key:"initialize",value:function(){this._snappers.push(new nt(this.view,this.options),new Qe(this.view,this.options),new at(this.view,this.options),new ct(this.view,this.options))}},{key:"options",set:function(e){this._set("options",e);var t,n=Object(c.a)(this._snappers);try{for(n.s();!(t=n.n()).done;){t.value.options=e}}catch(r){n.e(r)}finally{n.f()}}},{key:"fetchCandidates",value:function(){var e=Object(o.a)(a.a.mark((function e(t,n){var i,o,s,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.options.effectiveSelfEnabled){e.next=2;break}return e.abrupt("return",[]);case 2:i=[],o=Object(c.a)(this._snappers.items);try{for(o.s();!(s=o.n()).done;)l=s.value,i.push.apply(i,Object(r.a)(l.snap(t,n)))}catch(a){o.e(a)}finally{o.f()}return e.abrupt("return",(Object(Re.e)(t,i),i));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(N.a);Object(p.a)([Object(v.b)({readOnly:!0})],lt.prototype,"updating",void 0),Object(p.a)([Object(v.b)({constructOnly:!0})],lt.prototype,"view",void 0),Object(p.a)([Object(v.b)()],lt.prototype,"options",null),lt=Object(p.a)([Object(y.a)("esri.views.interactive.snapping.SelfSnappingEngine")],lt);var ut=n(546),dt=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a){var o;return Object(l.a)(this,n),(o=t.call(this,e,r,new Ye.a(e,r,i.constraint,a.constraint))).first=i,o.second=a,o}return Object(u.a)(n,[{key:"hints",get:function(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[].concat(Object(r.a)(this.first.hints),Object(r.a)(this.second.hints),[new ut.a(this.targetPoint)])}}]),n}(Je.a),ft=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).options=new Oe.a,r.engines=[],r._currentMainCandidate=null,r._currentOtherActiveCandidates=[],r.options=new Oe.a,r}return Object(u.a)(n,[{key:"initialize",value:function(){var e=this;this.handles.add([Object(Pe.a)((function(){var t=e.options;return{effectiveFeatureEnabled:t.effectiveFeatureEnabled,effectiveSelfEnabled:t.effectiveSelfEnabled,touchSensitivityMultiplier:t.touchSensitivityMultiplier,distance:t.distance}}),(function(){e.doneSnapping(),e.emit("changed")})),this.watch("options",(function(t){var n,r=Object(c.a)(e.engines);try{for(r.s();!(n=r.n()).done;){n.value.options=t}}catch(i){r.e(i)}finally{r.f()}}),!0),Object(M.a)(this.view,"ready",(function(t){return e.onViewReady(t)}),!0)])}},{key:"destroy",value:function(){this.destroyEngines()}},{key:"updating",get:function(){return this.engines.some((function(e){return e.updating}))}},{key:"onViewReady",value:function(e){var t,n;this.destroyEngines(),e&&(this.engines=[new lt({view:this.view,options:this.options}),new Ve({view:this.view,spatialReference:null!=(t=null==(n=this.view)?void 0:n.spatialReference)?t:Ie.a.WGS84,options:this.options})])}},{key:"destroyEngines",value:function(){var e,t=Object(c.a)(this.engines);try{for(t.s();!(e=t.n()).done;){e.value.destroy()}}catch(n){t.e(n)}finally{t.f()}this.engines.length=0}},{key:"squaredMouseProximityTreshold",get:function(){return this.options.distance*this.options.distance}},{key:"squaredTouchProximityThreshold",get:function(){var e=this.options,t=e.distance*e.touchSensitivityMultiplier;return t*t}},{key:"snap",value:function(){var e=Object(o.a)(a.a.mark((function e(t,n,r){var i,o,s=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.coordinateHelper.fromPoint(t),e.next=3,this.fetchCandidates(i,n,r);case 3:return o=e.sent,e.t0=function(){var e=s.processCandidates(i,o,n),t=e.snappedPoint,r=e.hints;return s.removeVisualization(),Object(h.k)(n.visualizer)&&s.handles.add(n.visualizer.draw(r,{coordinateHelper:n.coordinateHelper,elevationInfo:n.elevationInfo,view:s.view}),pt),t},e.abrupt("return",{get valid(){return!Object(g.n)(r)},apply:e.t0});case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"update",value:function(e,t){this.removeVisualization();var n=e,i=[];if(Object(h.k)(this._currentMainCandidate)){var a=t.coordinateHelper,o=a.fromPoint(e),s=this._currentMainCandidate.constraint.closestTo(o);if(Object(Re.f)(Object(Re.b)(o,a,t.elevationInfo,this.view),Object(Re.b)(s,a,t.elevationInfo,this.view))<this.squaredPointProximityThreshold(t.pointer)){n=a.createDehydratedPoint(s),this._currentMainCandidate.targetPoint=s,i.push.apply(i,Object(r.a)(this._currentMainCandidate.hints));var l,u=Object(c.a)(this._currentOtherActiveCandidates);try{for(u.s();!(l=u.n()).done;){var d=l.value;d.targetPoint=s,i.push.apply(i,Object(r.a)(d.hints))}}catch(f){u.e(f)}finally{u.f()}}else this._currentMainCandidate=null,this._currentOtherActiveCandidates=[]}return Object(h.k)(t.visualizer)&&this.handles.add(t.visualizer.draw(i,{coordinateHelper:t.coordinateHelper,elevationInfo:t.elevationInfo,view:this.view}),pt),n}},{key:"doneSnapping",value:function(){this.removeVisualization(),this._currentMainCandidate=null,this._currentOtherActiveCandidates=[]}},{key:"removeVisualization",value:function(){this.handles.remove(pt)}},{key:"fetchCandidates",value:function(){var e=Object(o.a)(a.a.mark((function e(t,n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.engines.map((function(e){return e.fetchCandidates(t,n,r)})));case 2:return e.abrupt("return",e.sent.flat());case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"processCandidates",value:function(e,t,n){if(t.length<1)return this.doneSnapping(),{snappedPoint:n.coordinateHelper.toPoint(e,new O.a),hints:[]};Object(Re.e)(e,t);var r=this._currentMainCandidate;if(Object(h.k)(r)){var i=this.findOldConstraintInNewCandidates(r,t);if(i>=0){if(!(t[i]instanceof dt))return this.intersectWithOtherCandidates(i,t,e,n);if(Object(Ae.j)(e,r.targetPoint)<this.squaredPointProximityThreshold(n.pointer))return this.updateSnappingCandidate(r,t,n)}}return this.intersectWithOtherCandidates(0,t,e,n)}},{key:"findOldConstraintInNewCandidates",value:function(e,t){return e instanceof dt?this.findOldCandidateIndex(t,e.first)>=0&&this.findOldCandidateIndex(t,e.second)>=0?0:-1:this.findOldCandidateIndex(t,e)}},{key:"intersectWithOtherCandidates",value:function(e,t,n,r){for(var i=t[e],a=[],o=r.coordinateHelper,s=0;s<t.length;++s)if(s!==e){var l,u=t[s],d=Object(c.a)(i.constraint.intersect(u.constraint));try{for(d.s();!(l=d.n()).done;){var f=l.value,p=o.fromXYZ(f.intersection,i.targetPoint[2]);a.push([new dt(o,p,i,u),Object(Re.f)(Object(Re.b)(n,r.coordinateHelper,r.elevationInfo,this.view),Object(Re.b)(p,r.coordinateHelper,r.elevationInfo,this.view))])}}catch(h){d.e(h)}finally{d.f()}}return a.length>0&&(a.sort((function(e,t){return e[1]-t[1]})),a[0][1]<this.squaredPointProximityThreshold(r.pointer))?this.updateSnappingCandidate(a[0][0],t,r):this.updateSnappingCandidate(i,t,r)}},{key:"updateSnappingCandidate",value:function(e,t,n){this.doneSnapping(),this._currentMainCandidate=e;var i=this._currentMainCandidate.targetPoint,a=[];a.push.apply(a,Object(r.a)(e.hints));var o,s=Object(c.a)(t);try{for(s.s();!(o=s.n()).done;){var l=o.value;if(e instanceof dt){if(l.constraint.objectEqual(e.first.constraint)||l.constraint.objectEqual(e.second.constraint))continue}else if(l.constraint.objectEqual(e.constraint))continue;l.constraint.check(i)&&(l.targetPoint=i,this._currentOtherActiveCandidates.push(l),a.push.apply(a,Object(r.a)(l.hints)))}}catch(u){s.e(u)}finally{s.f()}return{snappedPoint:n.coordinateHelper.createDehydratedPoint(i),hints:a}}},{key:"squaredPointProximityThreshold",value:function(e){return"touch"===e?this.squaredTouchProximityThreshold:this.squaredMouseProximityTreshold}},{key:"findOldCandidateIndex",value:function(e,t){for(var n=-1,r=0;r<e.length;++r)if(t.constraint.objectEqual(e[r].constraint)){n=r;break}return n}},{key:"test",get:function(){return{visualizationsActive:this.handles.has(pt)}}}]),n}(w.a.EventedMixin(Me.a));Object(p.a)([Object(v.b)({constructOnly:!0})],ft.prototype,"view",void 0),Object(p.a)([Object(v.b)()],ft.prototype,"options",void 0),Object(p.a)([Object(v.b)({readOnly:!0})],ft.prototype,"updating",null),Object(p.a)([Object(v.b)()],ft.prototype,"engines",void 0),Object(p.a)([Object(v.b)()],ft.prototype,"squaredMouseProximityTreshold",null),Object(p.a)([Object(v.b)()],ft.prototype,"squaredTouchProximityThreshold",null),ft=Object(p.a)([Object(y.a)("esri.views.interactive.snapping.SnappingManager")],ft);var pt="visualization-handle",ht=n(195),bt=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).cancelled=!1,r.history={undo:[],redo:[]},r.type=null,r}return Object(u.a)(n,[{key:"tool",get:function(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw":case"draw-3d":return null;default:Object(ht.a)(this.activeComponent)}return null}},{key:"addToHistory",value:function(e){this.history.redo=[],this.history.undo.push(e)}},{key:"resetHistory",value:function(){this.history.redo=[],this.history.undo=[]}},{key:"canUndo",value:function(){return this.history.undo.length>0}},{key:"canRedo",value:function(){return this.history.redo.length>0}},{key:"complete",value:function(){this.reset(),this.onEnd(),this.emit("complete")}},{key:"cancel",value:function(){this.cancelled=!0,this.complete()}},{key:"reset",value:function(){this.activeComponent.reset()}},{key:"refreshComponent",value:function(){var e=this.activeComponent;e&&("box"!==e.type&&"reshape"!==e.type||e.refresh())}},{key:"undo",set:function(e){var t=this;this._set("undo",(function(){t.canUndo()&&e()}))}},{key:"redo",set:function(e){var t=this;this._set("redo",(function(){t.canRedo()&&e()}))}}]),n}(w.a.EventedAccessor);Object(p.a)([Object(v.b)()],bt.prototype,"activeComponent",void 0),Object(p.a)([Object(v.b)()],bt.prototype,"cancelled",void 0),Object(p.a)([Object(v.b)()],bt.prototype,"history",void 0),Object(p.a)([Object(v.b)()],bt.prototype,"tool",null),Object(p.a)([Object(v.b)()],bt.prototype,"type",void 0),Object(p.a)([Object(v.b)()],bt.prototype,"canUndo",null),Object(p.a)([Object(v.b)()],bt.prototype,"canRedo",null),Object(p.a)([Object(v.b)()],bt.prototype,"onEnd",void 0),Object(p.a)([Object(v.b)()],bt.prototype,"undo",null),Object(p.a)([Object(v.b)()],bt.prototype,"redo",null),Object(p.a)([Object(v.b)()],bt.prototype,"toggleTool",void 0),Object(p.a)([Object(v.b)()],bt.prototype,"addToSelection",void 0),Object(p.a)([Object(v.b)()],bt.prototype,"removeFromSelection",void 0),bt=Object(p.a)([Object(y.a)("esri.widgets.Sketch.support.OperationHandle")],bt);var vt="esri.widgets.Sketch.SketchViewModel",yt=b.a.getLogger(vt),mt={redoKey:"r",undoKey:"z",centerKey:"Alt",constraintKey:"Control",snappingKey:"Control",cancelKey:"Escape",deleteKeys:["Backspace","Delete"],complete:"c",pan:" "},gt={defaultZ:0},Ot={enableMidpoints:!0,enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,tool:"transform",enableZ:!0,enableMoveGraphic:!0},jt=function(e){Object(d.a)(i,e);var t=Object(f.a)(i);function i(e){var n;return Object(l.a)(this,i),(n=t.call(this,e))._activeFillGraphic=null,n._activeLineGraphic=null,n._centerIndicatorGraphic=null,n._centerSymbol=new E.default({style:"cross",size:6,color:[255,255,255]}),n._defaultSegmentOffset=48,n._numUpdating=0,n._handles=new I.a,n._internalGraphicsLayer=new R.a({listMode:"hide",internal:!0}),n._lineGraphic=null,n._operationHandle=null,n._vertexGraphics=[],n._viewHandles=new I.a,n._doUnnormalization=!1,n._moveOperationCloneInfos=[],n.activeFillSymbol=new T.default({style:"solid",color:[150,150,150,.2],outline:{color:[50,50,50],width:0}}),n.activeLineSymbol=new k.a({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[3.75,3.75],lineDashEnding:"HalfPattern",controlPointEnding:"NoConstraint"}],enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:1.6,color:[255,255,255,255]},{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:2,color:[0,0,0,255]}]}}}),n.activeVertexSymbol=new E.default({style:"circle",size:6,color:[255,127,0,1],outline:{color:[50,50,50],width:1}}),n.layer=null,n.pointSymbol=new E.default({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),n.polygonSymbol=new T.default({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),n.polylineSymbol=new S.default({color:[130,130,130,1],width:2}),n._snappingManager=null,n.updateGraphics=new _.a,n.updateOnGraphicClick=!0,n.updatePointSymbol=new E.default({size:10,color:[0,200,255,.5],outline:{color:"black",width:1}}),n.updatePolygonSymbol=new T.default({color:[12,207,255,.2],outline:{join:"round",color:[12,207,255],width:2}}),n.updatePolylineSymbol=new S.default({color:[12,207,255],width:2}),n.vertexSymbol=new E.default({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),n._moduleLoaderAbortController=null,n._viewReadyAbortController=null,n._originalAutoOpenEnabled=null,n.defaultCreateOptions=gt,n.defaultUpdateOptions=Ot,n.snappingOptions=new Oe.a,n}return Object(u.a)(i,[{key:"initialize",value:function(){var e=this;this._handles.add([Object(M.d)(this,"layer",(function(){e.cancel(),e._internalGraphicsLayer.elevationInfo=Object(h.k)(e.layer)?e.layer.elevationInfo:null})),Object(M.b)(this,"view.map.layers","change",(function(t){t.removed.indexOf(e.layer)>=0&&e.cancel()})),Object(M.b)(this,"layer.graphics","change",(function(t){if(Object(h.k)(e._operationHandle)){var n,r=Object(c.a)(t.removed);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.updateGraphics.includes(i)&&(e.updateGraphics.length>1?e._operationHandle.removeFromSelection(i):e._operationHandle.cancel())}}catch(a){r.e(a)}finally{r.f()}}})),Object(M.a)(this,"layer.elevationInfo",(function(){e.cancel(),e._internalGraphicsLayer.elevationInfo=Object(h.k)(e.layer)?e.layer.elevationInfo:null}),!0),Object(M.a)(this,"view",(function(t){Object(h.e)(e._snappingManager),t&&(e._snappingManager=new ft({view:t,options:e.snappingOptions}))}),!0)])}},{key:"destroy",value:function(){this.cancel(),this._handles=Object(h.e)(this._handles),this._viewHandles=Object(h.e)(this._viewHandles),this._removeDefaultLayer(),Object(h.e)(this._draw),Object(h.e)(this._snappingManager),this._set("view",null),this.emit("destroy")}},{key:"_defaultUpdateTool",get:function(){return"3d"===this.view.type?"move":"transform"}},{key:"_draw",get:function(){return"ready"===this.state||"active"===this.state?new ge({view:this.view}):null}},{key:"updating",get:function(){return this._numUpdating>0}},{key:"activeTool",get:function(){return this._operationHandle&&this._operationHandle.tool?this._operationHandle.tool:null}},{key:"activeComponent",get:function(){return this._operationHandle?this._operationHandle.activeComponent:null}},{key:"createGraphic",get:function(){return this.view&&"3d"===this.view.type&&Object(h.k)(this.activeComponent)&&"draw-3d"===this.activeComponent.type?Object(h.q)(this.activeComponent.createGraphic):this._get("createGraphic")}},{key:"defaultCreateOptions",set:function(e){this._set("defaultCreateOptions",Object(s.a)(Object(s.a)({},gt),e))}},{key:"defaultUpdateOptions",set:function(e){this._set("defaultUpdateOptions",Object(s.a)(Object(s.a)({},Ot),e))}},{key:"snappingOptions",set:function(e){Object(h.k)(this._snappingManager)&&(this._snappingManager.options=e),this._set("snappingOptions",e)}},{key:"state",get:function(){var e,t=!(null==(e=this.view)||!e.ready||!this.layer),n=this._operationHandle;return t&&n?"active":t?"ready":"disabled"}},{key:"view",get:function(){return this._get("view")},set:function(e){var t=this,n=this._get("view");if(n){var r=n.container,i=n.map;r&&(n.cursor=null),i&&i.remove(this._internalGraphicsLayer),this._viewHandles.removeAll(),this.cancel()}this._doUnnormalization=null!=e&&"3d"===e.type&&"global"===e.viewingMode;var a="view-ready";this._handles.remove(a),e&&this._handles.add(Object(M.e)(e,"ready",(function(n){t._viewHandles.removeAll(),n&&t._viewHandles.add(t._generateViewHandles(e))}),!0),a),this._set("view",e)}},{key:"cancel",value:function(){this._moduleLoaderAbortController=Object(h.a)(this._moduleLoaderAbortController),this._viewReadyAbortController=Object(h.a)(this._viewReadyAbortController),this._operationHandle&&this._operationHandle.cancel()}},{key:"complete",value:function(){this._operationHandle&&this._operationHandle.complete()}},{key:"delete",value:function(){var e=this.state,t=this.updateGraphics;if("active"===e&&t.length){var n=this.activeTool,r=this.layer,i=t.toArray();r.removeMany(i),this.cancel(),this._emitDeleteEvent({graphics:i,tool:n})}}},{key:"create",value:function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,i,o=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._waitViewReady();case 2:if("disabled"!==this.state){e.next=4;break}throw this.layer||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),this.view||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),Object(g.e)();case 4:if(this.cancel(),t){e.next=6;break}return e.abrupt("return",void this._logError("sketch:missing-parameter","Missing parameter 'tool'."));case 6:return e.next=8,this._setupCreateOperation(t,n);case 8:if(r=e.sent,!Object(h.j)(r)&&!this.destroyed){e.next=11;break}return e.abrupt("return");case 11:Object(Ce.a)(this.view,this._internalGraphicsLayer),i=function(){if(r===o._operationHandle){var e=o.createGraphic,n=o._operationHandle.cancelled;o._operationHandle.destroy(),o._operationHandle=null,o._set("createGraphic",null),o.view&&o.view.map&&o.view.map.remove(o._internalGraphicsLayer),r.cancelled||null==e||o.layer.add(e),o.emit("create",{graphic:e,state:n?"cancel":"complete",tool:t,toolEventInfo:null,type:"create"})}},r.on("complete",i),this._operationHandle=r,this.view.ready&&Object(F.b)(this.view)&&this.view.focus();case 14:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,i,o,s,c=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._waitViewReady();case 2:if(r=this.layer,i=this.view,"disabled"!==this.state){e.next=5;break}throw i||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),r||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),Object(g.e)();case 5:if(this.cancel(),o=Array.isArray(t)?t:[t],null!=t&&o&&o.length){e.next=9;break}return e.abrupt("return",void this._logError("sketch:missing-parameter","Missing parameter 'graphics'."));case 9:if(!o.some((function(e){return e.layer!==r?(c._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):Object(h.j)(e.geometry)?(c._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0):"2d"===i.type&&!i.spatialReference.equals(e.geometry.spatialReference)&&(c._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with a spatial reference different from the supplied MapView."),!0)}))){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,this._setupUpdateOperation(o,n);case 13:s=e.sent,this.destroyed||Object(h.j)(s)||St(s)||(Object(Ce.a)(this.view,this._internalGraphicsLayer),this._setUpdateOperationHandle(s,n),this.emit("update",{graphics:o,state:"start",aborted:!1,tool:s.tool,toolEventInfo:null,type:"update"}));case 15:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"undo",value:function(){this.canUndo()&&this._operationHandle.undo()}},{key:"redo",value:function(){this.canRedo()&&this._operationHandle.redo()}},{key:"canUndo",value:function(){return!(!this._operationHandle||!this._operationHandle.canUndo())}},{key:"canRedo",value:function(){return!(!this._operationHandle||!this._operationHandle.canRedo())}},{key:"toggleUpdateTool",value:function(){this._operationHandle&&this._operationHandle.toggleTool&&this._operationHandle.toggleTool()}},{key:"_getFirstHit",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,i,o,s,c,l,u,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],e.t0=this.view.type,e.next="2d"===e.t0?4:"3d"===e.t0?9:15;break;case 4:return e.next=6,this.view.hitTest(t);case 6:return(r=e.sent).results.length>0&&(i=r.results[0]).graphic&&(c=i.graphic,"vector-tile"!==(null==(o=c.layer)?void 0:o.type)&&"imagery"!==(null==(s=c.layer)?void 0:s.type)&&n.push(i)),e.abrupt("break",15);case 9:return l=[this.view.map.ground],this.view.map.allLayers.forEach((function(e){"integrated-mesh"===e.type&&l.push(e)})),e.next=13,this.view.hitTest(t,{exclude:l});case 13:(u=e.sent).results.length>0&&(d=u.results[0],(!u.ground.mapPoint||this.view.map.ground.opacity<1||u.ground.distance-d.distance>-Math.min(3*u.ground.distance,"global"===this.view.viewingMode?Object(A.e)(this.view.renderCoordsHelper.spatialReference).radius/this.view.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY))&&n.push(d));case 15:return e.abrupt("return",{screenPoint:t,results:n});case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_generateViewHandles",value:function(e){var t=this;return[e.on("immediate-click",(function(n){var r=t._operationHandle,i=t.defaultUpdateOptions,a=t.layer,o=t.state,c=t.updateGraphics,l=t.updateOnGraphicClick,u="active"===o&&"create"===r.type;"disabled"!==o&&!u&&l&&(t._beginAsyncOperation(),t._getFirstHit(Object(D.a)(n)).then((function(r){var i=r.results;if(i.length)for(var s=0;s<i.length;++s){var l=i[s];if(l.graphic){var u=l.graphic;if(c.indexOf(u)>-1||u.layer===a)return n.stopPropagation(),u;"2d"!==e.type||t._isComponentGraphic(u)||"active"!==o||t.cancel()}}else"active"===o&&t.cancel();return null})).then((function(e){return Object(h.k)(e)&&-1===c.indexOf(e)?t.update([e],Object(s.a)({},i)):null})).then((function(){t._endAsyncOperation()})))}),L.b.WIDGET)]}},{key:"_setupCreateOperation",value:function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if(r=Object(s.a)(Object(s.a)({hasZ:"3d"===this.view.type},this.defaultCreateOptions),n),"2d"!==this.view.type){e.next=26;break}e.t0=t,e.next="point"===e.t0?7:"multipoint"===e.t0?9:"polygon"===e.t0||"polyline"===e.t0?13:"rectangle"===e.t0?17:"circle"===e.t0?21:24;break;case 7:return i=this._setupCreatePointOperation(t,r),e.abrupt("break",24);case 9:return e.next=11,this._setupCreateMultipointOperation(t,r);case 11:return i=e.sent,e.abrupt("break",24);case 13:return e.next=15,this._setupCreatePolyOperation(t,r);case 15:return i=e.sent,e.abrupt("break",24);case 17:return e.next=19,this._setupCreateRectangleOperation(t,r);case 19:return i=e.sent,e.abrupt("break",24);case 21:return e.next=23,this._setupCreateCircleOperation(t,r);case 23:i=e.sent;case 24:e.next=32;break;case 26:return e.next=28,this._setupCreate3DOperation(t,this.view,r);case 28:if(o=e.sent,!Object(h.j)(o)&&!St(o)){e.next=31;break}return e.abrupt("return",null);case 31:i=o;case 32:return e.abrupt("return",i);case 33:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_setupCreate3DOperation",value:function(){var e=Object(o.a)(a.a.mark((function e(t,r,i){var o,c,l,u,d,f,p,b,v,y=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("multipoint"!==t){e.next=2;break}return e.abrupt("return",null);case 2:return o={point:this.pointSymbol,multipoint:null,polyline:this.polylineSymbol,polygon:this.polygonSymbol,rectangle:this.polygonSymbol,circle:this.polygonSymbol}[t],this._removeCreateOperationGraphics(),c="rectangle"!==t,l="rectangle"!==t,this.snappingOptions.enabledToggled=!1,u=Object(s.a)(Object(s.a)({view:r,mode:"rectangle"===t||"circle"===t?"hybrid":"click"},i),{},{elevationInfo:this.layer.elevationInfo,geometryType:t,createGraphicSymbol:o,snapToScene:!Object(h.k)(this.layer.elevationInfo)||"absolute-height"===this.layer.elevationInfo.mode,snappingManager:this._snappingManager,forceUniformSize:l,centered:c}),e.next=9,this._requireModule(Promise.all([n.e(5),n.e(8)]).then(n.bind(null,1435)));case 9:if(!St(d=e.sent)){e.next=12;break}return e.abrupt("return",d);case 12:if(!this.destroyed){e.next=14;break}return e.abrupt("return",null);case 14:return f=new d.module.DrawGraphicTool(u),this.view.tools.add(f),p=null,this.view.activeTool=f,b=[],v=new bt({activeComponent:f,tool:t,type:"update",onEnd:function(){var e;b.forEach((function(e){return e.remove()})),b.length=0,null==(e=y.view.tools)||e.remove(f),f.destroy()},undo:function(){f.canUndo&&f.undo()},redo:function(){f.canRedo&&f.redo()},canUndo:function(){return f.canUndo},canRedo:function(){return f.canRedo}}),e.abrupt("return",(b.push(this.view.on("key-down",(function(e){e.key===mt.pan?(e.stopPropagation(),e.repeat||(f.enabled=!1)):e.key===mt.complete?(e.stopPropagation(),f.completeCreateOperation()):e.key===mt.undoKey?(e.stopPropagation(),v.undo()):e.key===mt.redoKey?(e.stopPropagation(),v.redo()):e.key!==mt.snappingKey||"rectangle"===t||"circle"===t||e.repeat?e.key!==mt.constraintKey||"rectangle"!==t&&"circle"!==t||e.repeat?e.key===mt.centerKey&&(e.repeat||(f.centered=!c,e.stopPropagation())):(f.forceUniformSize=!l,e.stopPropagation()):(y.snappingOptions.enabledToggled=!0,e.stopPropagation())}),L.b.WIDGET),this.view.on("key-up",(function(e){e.key===mt.pan?f.enabled=!0:e.key===mt.snappingKey&&"rectangle"!==t&&"circle"!==t?(y.snappingOptions.enabledToggled=!1,e.stopPropagation()):e.key!==mt.constraintKey||"rectangle"!==t&&"circle"!==t?e.key===mt.centerKey&&(f.centered=c,e.stopPropagation()):(f.forceUniformSize=l,e.stopPropagation())}),L.b.WIDGET),f.on("vertex-add",(function(e){switch(p=Object(h.j)(p)?"start":"active",e.operation){case"apply":y.emit("create",{graphic:Object(h.q)(f.createGraphic),state:p,tool:y.activeTool,toolEventInfo:e,type:"create"});break;case"undo":y._emitUndoEvent({graphics:[Object(h.q)(f.createGraphic)],tool:t});break;case"redo":y._emitRedoEvent({graphics:[Object(h.q)(f.createGraphic)],tool:t})}})),f.on("cursor-update",(function(e){f.drawOperation.numCommittedVertices>0&&y.emit("create",{graphic:Object(h.q)(f.createGraphic),state:"active",tool:y.activeTool,toolEventInfo:{coordinates:e.vertices[0].coordinates,type:"cursor-update"},type:"create"})})),f.on("vertex-remove",(function(e){switch(e.operation){case"apply":y.emit("create",{graphic:Object(h.q)(f.createGraphic),state:"active",tool:y.activeTool,toolEventInfo:e,type:"create"});break;case"undo":y._emitUndoEvent({graphics:[Object(h.q)(f.createGraphic)],tool:t});break;case"redo":y._emitRedoEvent({graphics:[Object(h.q)(f.createGraphic)],tool:t})}})),f.on("complete",(function(e){y._removeCreateOperationGraphics(),y._set("createGraphic",Object(h.q)(e.graphic)),p="complete",e.aborted?v&&v.cancel():v&&v.complete()}))),v));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_setupCreatePointOperation",value:function(e,t){var n=this,r={elevationInfo:this.layer.elevationInfo,hasZ:t.hasZ,defaultZ:t.defaultZ,snappingManager:this._snappingManager,interactiveUndoDisabled:!0},i=this._draw.create(e,r),a=[i.on("cursor-update",(function(e){Object(h.k)(e.vertexIndex)?n._displayCrosshairCursor():n._displayDefaultCursor()})),i.on("draw-complete",(function(e){var t=n.createPointFromVertex(e.vertices[0]),r=new P.a(t,n.pointSymbol);n._set("createGraphic",r),s&&s.complete()}))],o=[this.view.on("key-down",(function(e){e.key===mt.cancelKey&&(s&&s.cancel(),e.stopPropagation())}),L.b.WIDGET)],s=this._operationHandleForCreateAction(i,[].concat(a,o),e);return s}},{key:"_setupCreateMultipointOperation",value:function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,i,o,c,l,u,d=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te();case 2:return r=e.sent,i=Object(s.a)(Object(s.a)({},n),{},{elevationInfo:this.layer.elevationInfo,snappingManager:this._snappingManager,interactiveUndoDisabled:!0}),o=this._draw.create(t,i),c=null,l=[],u=this._operationHandleForCreateAction(o,l,t),e.abrupt("return",(l.push(o.on("vertex-add",(function(e){var n=e.type,i=e.vertexIndex,a=e.vertices,o=a[i];c=e,d._drawMultipointGraphic(r,a,!0),d.emit("create",{graphic:d.createGraphic,state:1===a.length?"start":"active",tool:t,toolEventInfo:{added:o,vertices:[{coordinates:o,componentIndex:0,vertexIndex:i}],type:n},type:"create"})})),o.on("vertex-remove",(function(e){var n=e.type,i=e.vertexIndex,a=e.vertices,o=a[i];c=e,d._drawMultipointGraphic(r,a,!0),d.emit("create",{graphic:d.createGraphic,state:"active",tool:t,toolEventInfo:{removed:o,vertices:[{coordinates:o,componentIndex:0,vertexIndex:i}],type:n},type:"create"})})),o.on("vertex-update",(function(e){var n=e.type,i=e.vertexIndex,a=e.vertices,o=a[i];c=e,d._drawMultipointGraphic(r,a,!0),d.emit("create",{graphic:d.createGraphic,state:"active",tool:t,toolEventInfo:{type:n,updated:o,vertices:[{coordinates:o,componentIndex:0,vertexIndex:i}]},type:"create"})})),o.on("cursor-update",(function(e){c=e})),o.on("draw-complete",(function(e){var t=e.vertices.slice(0),n=r.createMultipoint(t,d.view.spatialReference);n&&d.createGraphic&&(d.createGraphic.geometry=n),u&&u.complete()})),o.on("undo",(function(e){var t=e.vertices,n=c&&"cursor-update"!==c.type;d._resetCreateOperationGraphics(),t.length&&d._drawMultipointGraphic(r,t,n)})),o.on("redo",(function(e){var t=e.vertices,n=c&&"cursor-update"!==c.type;d._resetCreateOperationGraphics(),t.length&&d._drawMultipointGraphic(r,t,n)}))),l.push(this.view.on("pointer-move",(function(){return d._displayCrosshairCursor()}),L.b.WIDGET),this.view.on("key-down",(function(e){return d._getCommonUpdateOperationKeyDownHandlers(u,e)}),L.b.WIDGET)),u));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_setupCreatePolyOperation",value:function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,i,o,c,l,u,d,f,p,b,v=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te();case 2:return r=e.sent,i=Object(s.a)(Object(s.a)({},n),{},{elevationInfo:this.layer.elevationInfo,snappingManager:this._snappingManager,interactiveUndoDisabled:!0}),o=null,("polyline"===t||"polygon"===t)&&(o=this._draw.create(t,i)),c=null,l=[o.on("vertex-add",(function(e){var n=e.type,i=e.vertexIndex,a=e.vertices,o=a[i];v._snapLastPolygonVertexToFirst(t,a),c=e,v._drawVertexGraphics(r,t,a,{userClicked:!0}),v.emit("create",{graphic:v.createGraphic,state:1===a.length?"start":"active",tool:t,toolEventInfo:{added:o,vertices:[{coordinates:o,componentIndex:0,vertexIndex:i}],type:n},type:"create"})})),o.on("vertex-remove",(function(e){var n=e.type,i=e.vertexIndex,a=e.vertices,o=a[i];v._snapLastPolygonVertexToFirst(t,a),c=e,v._drawVertexGraphics(r,t,a,{userClicked:!0}),v.emit("create",{graphic:v.createGraphic,state:"active",tool:t,toolEventInfo:{removed:o,vertices:[{coordinates:o,componentIndex:0,vertexIndex:i}],type:n},type:"create"})})),o.on("vertex-update",(function(e){var n=e.type,i=e.vertexIndex,a=e.vertices,o=a[i];v._snapLastPolygonVertexToFirst(t,a),c=e,v._drawVertexGraphics(r,t,a,{userClicked:!0}),v.emit("create",{graphic:v.createGraphic,state:"active",tool:t,toolEventInfo:{type:n,updated:o,vertices:[{coordinates:o,componentIndex:0,vertexIndex:i}]},type:"create"})})),o.on("cursor-update",(function(e){var n=e.type,i=e.vertices;if(e.mapPoint&&(v._snapLastPolygonVertexToFirst(t,i),c=e,v._drawVertexGraphics(r,t,i,{userClicked:!1}),i.length>1)){var a=i[i.length-1];v.emit("create",{graphic:v.createGraphic,state:"active",tool:t,toolEventInfo:{coordinates:a,type:n},type:"create"})}})),o.on("draw-complete",(function(e){var n=e.vertices.slice(0),i=null;"polyline"===t?i=r.createPolyline([n],v.view.spatialReference,v._doUnnormalization):"polygon"===t&&(i=r.createPolygon([n],v.view.spatialReference,v._doUnnormalization,!0)),i&&(v.createGraphic.geometry=i),b&&b.complete()})),o.on("undo",(function(e){var n=e.vertices,i=c&&"cursor-update"!==c.type;v._resetCreateOperationGraphics(),v._snapLastPolygonVertexToFirst(t,n),n.length&&v._drawVertexGraphics(r,t,n,{userClicked:i})})),o.on("redo",(function(e){var n=e.vertices,i=c&&"cursor-update"!==c.type;v._resetCreateOperationGraphics(),v._snapLastPolygonVertexToFirst(t,n),n.length&&v._drawVertexGraphics(r,t,n,{userClicked:i})}))],u=[this.view.on("pointer-move",(function(e){Object(h.k)(o.getCoordsFromScreenPoint(Object(x.e)(e.x,e.y)))?v._displayCrosshairCursor():v._displayDefaultCursor()}),L.b.WIDGET),this.view.on("key-down",(function(e){e.key!==mt.snappingKey||e.repeat?e.key===mt.undoKey&&b&&b.canUndo()?(e.stopPropagation(),b.undo()):e.key===mt.redoKey&&b&&b.canRedo()?(e.stopPropagation(),b.redo()):e.key===mt.cancelKey&&b&&b.cancel():(v.snappingOptions.enabledToggled=!0,e.stopPropagation())}),L.b.WIDGET),this.view.on("key-up",(function(e){e.key===mt.snappingKey&&(v.snappingOptions.enabledToggled=!1,e.stopPropagation())}),L.b.WIDGET)],"polygon"===t&&(d=function(e,t,n){if(!e||!e.layer||!e.visible)return!1;var r=v.view.toScreen(e.geometry);return v._isWithinScreenDistance(r,t,n)},f=function(e){if(!(v._vertexGraphics.length<=2))return d(v._vertexGraphics[0],e,v._getVertexIntersectDistance())},p=!1,u.push(this.view.on("pointer-move",(function(){p=!1}),L.b.WIDGET),this.view.on("pointer-down",(function(e){if(f(e))return p=!0,void e.stopPropagation();v._vertexGraphics.some((function(t){return d(t,e,v._getVertexIntersectDistance())}))&&e.stopPropagation()}),L.b.WIDGET),this.view.on("pointer-up",(function(e){p&&(e.stopPropagation(),o.complete())})))),b=this._operationHandleForCreateAction(o,[].concat(l,u),t),e.abrupt("return",b);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_setupCreateCircleOperation",value:function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,i,o,c,l,u,d,f,p=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te();case 2:return r=e.sent,i=Object(s.a)(Object(s.a)({},n),{},{elevationInfo:this.layer.elevationInfo,snappingManager:this._snappingManager,interactiveUndoDisabled:!0}),o=this._draw.create(t,i),c=!1,l=!0,u=[o.on("vertex-add",(function(e){var n=e.type,i=e.vertexIndex,a=e.vertices,s=a[i];p._drawSegmentGraphic(r,t,a,{centered:l,constrainToggle:c},o.viewAlignedCoordinateSystem),p.emit("create",{graphic:p.createGraphic,state:1===a.length?"start":"active",tool:t,toolEventInfo:{added:s,vertices:[{coordinates:s,componentIndex:0,vertexIndex:i}],type:n},type:"create"})})),o.on("cursor-update",(function(e){var n=e.type,i=e.vertices;if(p._drawSegmentGraphic(r,t,i,{centered:l,constrainToggle:c},o.viewAlignedCoordinateSystem),2===i.length){var a=i[i.length-1];p.emit("create",{graphic:p.createGraphic,state:"active",tool:t,toolEventInfo:{coordinates:a,type:n},type:"create"})}})),o.on("draw-complete",(function(e){var t,n=e.vertices.slice(0);1===n.length?(n.push(o.viewAlignedCoordinateSystem.makeMapPoint(n[0][0]+p._defaultSegmentOffset*p.view.resolution,n[0][1])),t=r.createCircle(n,o.viewAlignedCoordinateSystem,!0,p.view.resolution)):t=c?r.createEllipse(n,o.viewAlignedCoordinateSystem,l):r.createCircle(n,o.viewAlignedCoordinateSystem,l,p.view.resolution),p.createGraphic?p.createGraphic.geometry=t:(p._removeCreateGraphic(),p._set("createGraphic",new P.a(t,p.polygonSymbol))),f&&f.complete()}))],d=[this.view.on("pointer-move",(function(e){Object(h.k)(o.getCoordsFromScreenPoint(Object(x.e)(e.x,e.y)))?p._displayCrosshairCursor():p._displayDefaultCursor()}),L.b.WIDGET),this.view.on("key-down",(function(e){e.key===mt.constraintKey?c||(c=!0,p._drawSegmentGraphic(r,t,o.vertices,{centered:l,constrainToggle:c},o.viewAlignedCoordinateSystem)):e.key===mt.centerKey?l&&(l=!1,p._drawSegmentGraphic(r,t,o.vertices,{centered:l,constrainToggle:c},o.viewAlignedCoordinateSystem)):e.key===mt.cancelKey&&f&&f.cancel()}),L.b.WIDGET),this.view.on("key-up",(function(e){e.key===mt.constraintKey?(c=!1,p._drawSegmentGraphic(r,t,o.vertices,{centered:l,constrainToggle:c},o.viewAlignedCoordinateSystem)):e.key===mt.centerKey&&(l=!0,p._drawSegmentGraphic(r,t,o.vertices,{centered:l,constrainToggle:c},o.viewAlignedCoordinateSystem))}),L.b.WIDGET)],f=this._operationHandleForCreateAction(o,[].concat(u,d),t),e.abrupt("return",f);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_setupCreateRectangleOperation",value:function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,i,o,c,l,u,d,f,p=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te();case 2:return r=e.sent,i=Object(s.a)(Object(s.a)({},n),{},{elevationInfo:this.layer.elevationInfo,snappingManager:this._snappingManager,interactiveUndoDisabled:!0}),o=this._draw.create(t,i),c=!1,l=!1,u=[o.on("vertex-add",(function(e){var n=e.type,i=e.vertexIndex,a=e.vertices,s=a[i];p._drawSegmentGraphic(r,t,a,{centered:l,constrainToggle:c},o.viewAlignedCoordinateSystem),p.emit("create",{graphic:p.createGraphic,state:1===a.length?"start":"active",tool:t,toolEventInfo:{added:s,vertices:[{coordinates:s,componentIndex:0,vertexIndex:i}],type:n},type:"create"})})),o.on("cursor-update",(function(e){var n=e.type,i=e.vertices;if(p._drawSegmentGraphic(r,t,i,{centered:l,constrainToggle:c},o.viewAlignedCoordinateSystem),2===i.length){var a=i[i.length-1];p.emit("create",{graphic:p.createGraphic,state:"active",tool:t,toolEventInfo:{coordinates:a,type:n},type:"create"})}})),o.on("draw-complete",(function(e){var t,n=e.vertices.slice(0);1===n.length&&(c=!1,l=!1),t=c?r.createSquare(n,o.viewAlignedCoordinateSystem,l):r.createRectangle(n,o.viewAlignedCoordinateSystem,l),p.createGraphic?p.createGraphic.geometry=t:(p._removeCreateGraphic(),p._set("createGraphic",new P.a(t,p.polygonSymbol))),f&&f.complete()}))],d=[this.view.on("pointer-move",(function(e){Object(h.k)(o.getCoordsFromScreenPoint(Object(x.e)(e.x,e.y)))?p._displayCrosshairCursor():p._displayDefaultCursor()}),L.b.WIDGET),this.view.on("key-down",(function(e){e.key===mt.constraintKey?c||(c=!0,p._drawSegmentGraphic(r,t,o.vertices,{centered:l,constrainToggle:c},o.viewAlignedCoordinateSystem)):e.key===mt.centerKey?l||(l=!0,p._drawSegmentGraphic(r,t,o.vertices,{centered:l,constrainToggle:c},o.viewAlignedCoordinateSystem)):e.key===mt.cancelKey&&f&&f.cancel()}),L.b.WIDGET),this.view.on("key-up",(function(e){e.key===mt.constraintKey?(c=!1,p._drawSegmentGraphic(r,t,o.vertices,{centered:l,constrainToggle:c},o.viewAlignedCoordinateSystem)):e.key===mt.centerKey&&(l=!1,p._drawSegmentGraphic(r,t,o.vertices,{centered:l,constrainToggle:c},o.viewAlignedCoordinateSystem))}),L.b.WIDGET)],f=this._operationHandleForCreateAction(o,[].concat(u,d),t),e.abrupt("return",f);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_setupUpdateOperation",value:function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,i,o,l,u,d,f,p,b,v,y,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this._defaultUpdateTool,i=this.defaultUpdateOptions,o=this.layer,l=this.view,u=Object(s.a)(Object(s.a)({},i),n),d=u.tool||r,f=Object(c.a)(t);try{for(f.s();!(p=f.n()).done;)b=p.value,o.remove(b),o.add(b)}catch(a){f.e(a)}finally{f.f()}if("3d"!==l.type){e.next=15;break}if(0!==t.length){e.next=6;break}return e.abrupt("return",null);case 6:e.t0=d,e.next="move"===e.t0?9:"reshape"===e.t0?10:"transform"===e.t0?14:15;break;case 9:return e.abrupt("return",this._setupMove3DOperation(t,u,l,d));case 10:if(!(t.length>1)){e.next=12;break}return e.abrupt("return",(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null));case 12:return v=Object(_e.a)(t[0]),e.abrupt("return",0===v?this._setupReshape3DOperation(t[0],u,l):(this._logError("sketch:reshape","Reshape operation not supported for provided graphic(s) (".concat(je(v),").")),null));case 14:return e.abrupt("return",this._setupGraphicTransform3DOperation(t,u,l));case 15:if("move"!==d){e.next=17;break}return e.abrupt("return",this._setupMoveOperation(t,u,l));case 17:if(!(t.length>1)){e.next=19;break}return e.abrupt("return","reshape"===d?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupTransformOrReshapeOperation(t,d,u,l));case 19:if(1!==t.length){e.next=25;break}if(y=t[0],"point"!==(m=Object(h.i)(y.geometry,"type"))&&"multipoint"!==m){e.next=23;break}return e.abrupt("return",this._setupMoveOperation(t,u,l));case 23:if("transform"!==d&&"reshape"!==d){e.next=25;break}return e.abrupt("return",this._setupTransformOrReshapeOperation(t,d,u,l));case 25:return e.abrupt("return",null);case 26:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_setupMove3DOperation",value:function(){var e=Object(o.a)(a.a.mark((function e(t,i,s,l){var u,d,f,p,h,b,v,y,m,g=this,O=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=O.length>4&&void 0!==O[4]&&O[4],d=Object(c.a)(t),e.prev=2,d.s();case 4:if((f=d.n()).done){e.next=11;break}if(p=f.value,0===(h=Object(we.a)(p))){e.next=9;break}return e.abrupt("return",(this._logError("sketch:move","Move operation not supported for provided graphic(s) (".concat(je(h),").")),null));case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),d.e(e.t0);case 16:return e.prev=16,d.f(),e.finish(16);case 19:return e.next=21,this._requireModule(Promise.all([n.e(5),n.e(8)]).then(n.bind(null,1435)));case 21:if(!St(b=e.sent)){e.next=24;break}return e.abrupt("return",b);case 24:return v=new b.module.GraphicMoveTool({view:s,enableZ:i.enableZ,snappingManager:this._snappingManager}),this.view.tools.add(v),v.graphics.addMany(t),u||this.updateGraphics.addMany(t),y=[],m=new bt({activeComponent:v,tool:l,type:"update",onEnd:function(){var e;y.forEach((function(e){return e.remove()})),y.length=0,null==(e=g.view.tools)||e.remove(v),v.destroyed||v.destroy()},undo:function(){wt(m,g.updateGraphics.toArray()),g._emitUndoEvent({graphics:g.updateGraphics.toArray(),tool:l})},redo:function(){_t(m,g.updateGraphics.toArray()),g._emitRedoEvent({graphics:g.updateGraphics.toArray(),tool:l})},addToSelection:function(e){g.updateGraphics.push(e),v.graphics.push(e),g.emit("update",{graphics:g.updateGraphics.toArray(),state:"active",aborted:!1,tool:g.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:function(e){var t=g.updateGraphics.indexOf(e);m.history.undo.forEach((function(e){return e.updates.splice(t,1)})),m.history.redo.forEach((function(e){return e.updates.splice(t,1)})),g.updateGraphics.remove(e),g.emit("update",{graphics:g.updateGraphics.toArray(),state:"active",aborted:!1,tool:g.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),0!==g.updateGraphics.length?v.graphics.remove(e):m.complete()},toggleTool:function(){var e=Object(o.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1===g.updateGraphics.length&&!1!==i.toggleToolOnClick){e.next=2;break}return e.abrupt("return");case 2:if("transform"===l){e.next=4;break}return e.abrupt("return");case 4:if(t=g.updateGraphics.getItemAt(0),0===Object(_e.a)(t)){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,g._setupReshape3DOperation(t,i,s,!0);case 9:St(n=e.sent)||(m.onEnd(),m.destroy(),g._setUpdateOperationHandle(n,i));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),e.abrupt("return",(y.push.apply(y,Object(r.a)(this._getHandlesForComponent(m,i)).concat([this.view.on("immediate-click",(function(e){return g._getCommonUpdateOperationClickHandlers(m,e,i)}),L.b.WIDGET),this.view.on("key-down",(function(e){return g._getCommonUpdateOperationKeyDownHandlers(m,e)}),L.b.WIDGET)])),m));case 28:case"end":return e.stop()}}),e,this,[[2,13,16,19]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_setupGraphicTransform3DOperation",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(1===e.length&&0===xe(e[0])){var i=e[0];if(Object(h.k)(i.geometry)&&"point"===i.geometry.type)return this._setupPointTransform3DOperation(i,t,n);if(Object(h.k)(i.geometry)&&("polygon"===i.geometry.type||"polyline"===i.geometry.type))return this._setupPolyTransform3DOperation(i,t,n,r)}return this._setupMove3DOperation(e,t,n,"transform",r)}},{key:"_setupPointTransform3DOperation",value:function(){var e=Object(o.a)(a.a.mark((function e(t,i,s){var c,l,u,d,f,p,h,b,v=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="transform",l=i.enableRotation,u=i.enableScaling,d=i.enableZ,e.next=6,this._requireModule(Promise.all([n.e(5),n.e(8)]).then(n.bind(null,1435)));case 6:if(!St(f=e.sent)){e.next=9;break}return e.abrupt("return",f);case 9:return p=new f.module.GraphicTransformTool({graphic:t,view:s,enableRotation:l,enableScaling:u,enableZ:d,snappingManager:this._snappingManager}),this.view.tools.add(p),this.updateGraphics.add(t),h=[],b=new bt({activeComponent:p,tool:c,type:"update",onEnd:function(){var e;h.forEach((function(e){return e.remove()})),h.length=0,null==(e=v.view.tools)||e.remove(p),p.destroyed||p.destroy()},undo:function(){wt(b,v.updateGraphics.toArray()),v._emitUndoEvent({graphics:v.updateGraphics.toArray(),tool:c})},redo:function(){_t(b,v.updateGraphics.toArray()),v._emitRedoEvent({graphics:v.updateGraphics.toArray(),tool:c})},addToSelection:function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v.updateGraphics.add(t),e.next=3,v._setupMove3DOperation(v.updateGraphics.toArray(),i,s,"transform",!0);case 3:St(n=e.sent)||(b.onEnd(),b.destroy(),v._setUpdateOperationHandle(n,i));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),e.abrupt("return",(h.push.apply(h,Object(r.a)(this._getHandlesForComponent(b,i)).concat([this.view.on("immediate-click",(function(e){return v._getCommonUpdateOperationClickHandlers(b,e,i)}),L.b.WIDGET),this.view.on("key-down",(function(e){return v._getCommonUpdateOperationKeyDownHandlers(b,e)}),L.b.WIDGET)])),b));case 13:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_setupPolyTransform3DOperation",value:function(){var e=Object(o.a)(a.a.mark((function e(t,i,s){var c,l,u,d,f,p,h,b,v,y,m=this,g=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=g.length>3&&void 0!==g[3]&&g[3],l="transform",u=i.enableRotation,d=i.enableScaling,f=i.enableZ,p=i.preserveAspectRatio,e.next=8,this._requireModule(Promise.all([n.e(5),n.e(8)]).then(n.bind(null,1435)));case 8:if(!St(h=e.sent)){e.next=11;break}return e.abrupt("return",h);case 11:return b=new h.module.ExtentTransformTool({graphic:t,view:s,enableRotation:u,enableScaling:d,enableZ:f,preserveAspectRatio:p}),this.view.tools.add(b),c||this.updateGraphics.add(t),v=[],y=new bt({activeComponent:b,tool:l,type:"update",onEnd:function(){var e;v.forEach((function(e){return e.remove()})),v.length=0,null==(e=m.view.tools)||e.remove(b),b.destroyed||b.destroy()},canUndo:function(){return b.canUndo()},undo:function(){b.undo(),m._emitUndoEvent({graphics:m.updateGraphics.toArray(),tool:l})},canRedo:function(){return b.canRedo()},redo:function(){b.redo(),m._emitRedoEvent({graphics:m.updateGraphics.toArray(),tool:l})},addToSelection:function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.updateGraphics.add(t),m.emit("update",{graphics:m.updateGraphics.toArray(),state:"active",aborted:!1,tool:m.activeTool,toolEventInfo:{added:[t],removed:[],type:"selection-change"},type:"update"}),e.next=3,m._setupMove3DOperation(m.updateGraphics.toArray(),i,s,"transform",!0);case 3:St(n=e.sent)||(y.onEnd(),y.destroy(),m._setUpdateOperationHandle(n,i));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeFromSelection:function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.updateGraphics.remove(t),m.emit("update",{graphics:m.updateGraphics.toArray(),state:"active",aborted:!1,tool:m.activeTool,toolEventInfo:{added:[],removed:[t],type:"selection-change"},type:"update"}),y.complete();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),toggleTool:function(){var e=Object(o.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1===m.updateGraphics.length&&!1!==i.toggleToolOnClick){e.next=2;break}return e.abrupt("return");case 2:if(t=m.updateGraphics.getItemAt(0),0===Object(_e.a)(t)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,m._setupReshape3DOperation(t,i,s,!0);case 7:St(n=e.sent)||(y.onEnd(),y.destroy(),m._setUpdateOperationHandle(n,i));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),e.abrupt("return",(v.push.apply(v,Object(r.a)(this._getHandlesForComponent(y,i)).concat([this.view.on("immediate-click",(function(e){return m._getCommonUpdateOperationClickHandlers(y,e,i)}),L.b.WIDGET),this.view.on("key-down",(function(e){return m._getCommonUpdateOperationKeyDownHandlers(y,e)}),L.b.WIDGET),this.view.on("key-down",(function(e){e.key!==mt.constraintKey||e.repeat||(b.preserveAspectRatio=!b.preserveAspectRatio,e.stopPropagation())}),L.b.WIDGET),this.view.on("key-up",(function(e){e.key===mt.constraintKey&&(b.preserveAspectRatio=!b.preserveAspectRatio,e.stopPropagation())}),L.b.WIDGET)])),y));case 15:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_setupMoveOperation",value:function(){var e=Object(o.a)(a.a.mark((function e(t,n,i){var o,s,c,l,u,d=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="move",this.updateGraphics.addMany(t),e.next=4,this._getGraphicMover(t,n,i);case 4:if(!St(s=e.sent)){e.next=7;break}return e.abrupt("return",s);case 7:return this._syncCloneInfos(),c=new bt({activeComponent:s,tool:o,type:"update",onEnd:function(){var e;d._displayDefaultCursor(),u.forEach((function(e){return e.remove()})),l.forEach((function(e){return e.remove()})),u=[],l=[],s.destroy(),null==(e=d._internalGraphicsLayer)||e.removeMany(Object(r.a)(d.updateGraphics.toArray())),d._removeCloneGraphics()},undo:function(){var e=d.updateGraphics.toArray();wt(c,e),d._syncCloneInfos(),d._emitUndoEvent({graphics:e,tool:o})},redo:function(){var e=d.updateGraphics.toArray();_t(c,e),d._syncCloneInfos(),d._emitRedoEvent({graphics:e,tool:o})},addToSelection:function(e){d.updateGraphics.push(e),s.graphics=d.updateGraphics.toArray();var t=d._createClone(e);d._moveOperationCloneInfos.push({graphic:e,clone:t}),d._internalGraphicsLayer.add(t),d.emit("update",{graphics:d.updateGraphics.toArray(),state:"active",aborted:!1,tool:d.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:function(e){var t=d.updateGraphics.indexOf(e);c.history.undo.forEach((function(e){return e.updates.splice(t,1)})),c.history.redo.forEach((function(e){return e.updates.splice(t,1)}));var n=d._moveOperationCloneInfos.findIndex((function(t){return t.graphic===e})),r=d._moveOperationCloneInfos[n];d._internalGraphicsLayer.remove(r.clone),d.updateGraphics.remove(e),d._moveOperationCloneInfos.splice(n,1);var i=d.updateGraphics.toArray();d.emit("update",{graphics:i,state:"active",aborted:!1,tool:d.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),0!==d.updateGraphics.length?s.graphics=i:c.complete()}}),l=[i.on("immediate-click",(function(e){return d._getCommonUpdateOperationClickHandlers(c,e,n)}),L.b.WIDGET),i.on("key-down",(function(e){d._getCommonUpdateOperationKeyDownHandlers(c,e),e.key!==mt.constraintKey||e.repeat||(s.enableMoveAllGraphics=!s.enableMoveAllGraphics)}),L.b.WIDGET),i.on("key-up",(function(e){e.key===mt.constraintKey&&(s.enableMoveAllGraphics=!s.enableMoveAllGraphics)}),L.b.WIDGET)],u=this._getHandlesForComponent(c,n),e.abrupt("return",(u.push(s.on("graphic-move",(function(e){d._moveOperationCloneInfos.forEach((function(t){var n=e.allGraphics.find((function(e){return e===t.graphic}));n&&(t.clone.geometry=n.geometry)}))}))),c));case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_removeCloneGraphics",value:function(){if(this._moveOperationCloneInfos.length){var e,t=Object(c.a)(this._moveOperationCloneInfos);try{for(t.s();!(e=t.n()).done;){var n=e.value.clone;this._internalGraphicsLayer.remove(n),n.destroy()}}catch(r){t.e(r)}finally{t.f()}this._moveOperationCloneInfos=[]}}},{key:"_syncCloneInfos",value:function(){this._removeCloneGraphics(),this._moveOperationCloneInfos=this._generateCloneInfos(this.updateGraphics.toArray());var e,t=Object(c.a)(this._moveOperationCloneInfos);try{for(t.s();!(e=t.n()).done;){var n=e.value.clone;this._internalGraphicsLayer.add(n)}}catch(r){t.e(r)}finally{t.f()}}},{key:"_generateCloneInfos",value:function(e){var t=this;return(null==e?void 0:e.map((function(e){return{graphic:e,clone:t._createClone(e)}})))||[]}},{key:"_createClone",value:function(e){var t=e.clone();return t.symbol=this._getSymbolForClone(e),t}},{key:"_getSymbolForClone",value:function(e){if(Object(h.j)(e.symbol))return null;switch(e.symbol.type){case"cim":return new E.default({style:"circle",size:12,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}});case"picture-marker":var t=e.symbol,n=t.xoffset,r=t.yoffset,i=t.height,a=t.width,o=i===a?a:Math.max(i,a);return new E.default({xoffset:n,yoffset:r,size:o,style:"square",color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}});case"simple-marker":var s=e.symbol,c=s.xoffset,l=s.yoffset,u=s.size,d=s.style;return new E.default({xoffset:c,yoffset:l,style:"circle"===d?"circle":"square",size:u+2,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}});case"simple-fill":return new T.default({color:[0,0,0,0],outline:{style:"dash",color:[255,127,0,1],width:1}});case"simple-line":return new S.default({color:[255,127,0,1],style:"dash",width:1});case"text":var f=e.symbol,p=f.xoffset,b=f.yoffset;return new E.default({xoffset:p,yoffset:b,size:12,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}});default:return null}}},{key:"_setupReshape3DOperation",value:function(){var e=Object(o.a)(a.a.mark((function e(t,i,s){var c,l,u,d,f,p,h=this,b=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=b.length>3&&void 0!==b[3]&&b[3],l="reshape",e.next=4,this._requireModule(Promise.all([n.e(5),n.e(8)]).then(n.bind(null,1435)));case 4:if(!St(u=e.sent)){e.next=7;break}return e.abrupt("return",u);case 7:return this.snappingOptions.enabledToggled=!1,d=new u.module.GraphicReshapeTool({view:s,graphic:t,enableZ:i.enableZ,enableMoveGraphic:i.enableMoveGraphic,snappingManager:this._snappingManager}),s.tools.add(d),c||this.updateGraphics.add(t),f=[],p=new bt({activeComponent:d,tool:l,type:"update",onEnd:function(){var e;f.forEach((function(e){return e.remove()})),f.length=0,null==(e=h.view.tools)||e.remove(d),d.destroyed||d.destroy()},undo:function(){d.beforeUndo(),wt(p,h.updateGraphics.toArray()),h._emitUndoEvent({graphics:h.updateGraphics.toArray(),tool:l})},redo:function(){_t(p,h.updateGraphics.toArray()),h._emitRedoEvent({graphics:h.updateGraphics.toArray(),tool:l})},addToSelection:function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.updateGraphics.add(t),h.emit("update",{graphics:h.updateGraphics.toArray(),state:"active",aborted:!1,tool:h.activeTool,toolEventInfo:{added:[t],removed:[],type:"selection-change"},type:"update"}),e.next=3,h._setupMove3DOperation(h.updateGraphics.toArray(),i,s,"transform",!0);case 3:St(n=e.sent)||(p.onEnd(),p.destroy(),h._setUpdateOperationHandle(n,i));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeFromSelection:function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.updateGraphics.remove(t),h.emit("update",{graphics:h.updateGraphics.toArray(),state:"active",aborted:!1,tool:h.activeTool,toolEventInfo:{added:[],removed:[t],type:"selection-change"},type:"update"}),p.complete();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),toggleTool:function(){var e=Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==i.toggleToolOnClick){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,h._setupGraphicTransform3DOperation(h.updateGraphics.toArray(),i,s,!0);case 4:St(t=e.sent)||(p.onEnd(),p.destroy(),h._setUpdateOperationHandle(t,i));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),e.abrupt("return",(f.push.apply(f,Object(r.a)(this._getHandlesForComponent(p,i)).concat([s.on("immediate-click",(function(e){return h._getCommonUpdateOperationClickHandlers(p,e,i)}),L.b.WIDGET),s.on("key-down",(function(e){h._getCommonUpdateOperationKeyDownHandlers(p,e),e.key===mt.snappingKey&&(h.snappingOptions.enabledToggled=!0,e.stopPropagation())}),L.b.WIDGET),s.on("key-up",(function(e){e.key===mt.snappingKey&&(h.snappingOptions.enabledToggled=!1,e.stopPropagation())}),L.b.WIDGET)])),p));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_setupTransformOrReshapeOperation",value:function(){var e=Object(o.a)(a.a.mark((function e(t,n,r,i){var s,c,l,u,d,f=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r.multipleSelectionEnabled,this.updateGraphics.addMany(t),"transform"!==n){e.next=8;break}return e.next=5,this._getBox(t,r,i);case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,this._getReshape(t,r,i);case 10:e.t0=e.sent;case 11:if(!St(c=e.t0)){e.next=14;break}return e.abrupt("return",c);case 14:return l=new bt({activeComponent:c,type:"update",onEnd:function(){d.forEach((function(e){return e.remove()})),u.forEach((function(e){return e.remove()})),d=[],u=[],l.activeComponent&&!l.activeComponent.destroyed&&l.activeComponent.destroy(),f._internalGraphicsLayer.removeMany(f.updateGraphics.toArray())},undo:function(){wt(l,f.updateGraphics.toArray()),l.refreshComponent(),f._emitUndoEvent({graphics:f.updateGraphics.toArray(),tool:l.tool})},redo:function(){_t(l,f.updateGraphics.toArray()),l.refreshComponent(),f._emitRedoEvent({graphics:f.updateGraphics.toArray(),tool:l.tool})},addToSelection:function(e){var t=l.activeComponent;f.updateGraphics.add(e),t.graphics=f.updateGraphics.toArray(),t.refresh(),l.resetHistory(),f.emit("update",{graphics:f.updateGraphics.toArray(),state:"active",aborted:!1,tool:f.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:function(e){var t=l.activeComponent,n=f.updateGraphics.indexOf(e);l.history.undo.forEach((function(e){return e.updates.splice(n,1)})),l.history.redo.forEach((function(e){return e.updates.splice(n,1)})),f.updateGraphics.remove(e);var r=f.updateGraphics.toArray();f.emit("update",{graphics:r,state:"active",aborted:!1,tool:f.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),0!==f.updateGraphics.length?t.graphics=r:l.complete()},toggleTool:function(){var e=Object(o.a)(a.a.mark((function e(){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(f.updateGraphics.length>1)){e.next=2;break}return e.abrupt("return");case 2:if(n=null,"transform"!==l.tool){e.next=9;break}return e.next=6,f._getReshape(t,r,i);case 6:n=e.sent,e.next=14;break;case 9:if(e.t0="reshape"===l.tool,!e.t0){e.next=14;break}return e.next=13,f._getBox(t,r,i);case 13:n=e.sent;case 14:St(n)||(l.activeComponent.destroy(),l.activeComponent=n,l.activeComponent&&(d.forEach((function(e){return e.remove()})),d=f._getHandlesForComponent(l,r)));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),u=[i.on("immediate-click",(function(e){f._getFirstHit(Object(D.a)(e)).then((function(t){var n;if(l)if(null!=(n=t.results)&&n.length){var r=l.activeComponent;t.results.some((function(t){if(t.graphic){var n,i=t.graphic;if("box"===(null==r?void 0:r.type)&&null!=(n=e.native)&&n.shiftKey&&s)return l.addToSelection(i),!0;i.layer===f.layer&&l.complete()}return!1}))&&e.stopPropagation()}else l.complete()}))}),L.b.WIDGET),i.on("key-down",(function(e){if(f._getCommonUpdateOperationKeyDownHandlers(l,e),e.key!==mt.snappingKey||e.repeat||(f.snappingOptions.enabledToggled=!0,e.stopPropagation()),e.key===mt.constraintKey&&!e.repeat&&l){var t=l.activeComponent;t&&"box"===t.type&&(t.preserveAspectRatio=!t.preserveAspectRatio)}}),L.b.WIDGET),i.on("key-up",(function(e){var t;if(e.key===mt.snappingKey&&"reshape"===(null==l||null==(t=l.activeComponent)?void 0:t.type)&&(f.snappingOptions.enabledToggled=!1,e.stopPropagation()),e.key===mt.constraintKey&&l){var n=l.activeComponent;n&&"box"===n.type&&(n.preserveAspectRatio=!n.preserveAspectRatio)}}),L.b.WIDGET)],d=this._getHandlesForComponent(l,r),e.abrupt("return",l);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_getGraphicMover",value:function(){var e=Object(o.a)(a.a.mark((function e(t,r,i){var o,s,c=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.enableMoveAllGraphics,e.next=3,this._requireModule(n.e(134).then(n.bind(null,1230)));case 3:return s=e.sent,e.abrupt("return",St(s)?s:new s.module.default({enableMoveAllGraphics:o,graphics:t,view:i,callbacks:{onGraphicMoveStart:function(e){var t=e.dx,n=e.dy,r=e.graphic;c._displayGrabbingCursor(),c.emit("update",{graphics:c.updateGraphics.toArray(),state:"active",aborted:!1,tool:c.activeTool,toolEventInfo:{dx:t,dy:n,mover:r,type:"move-start"},type:"update"})},onGraphicMove:function(e){var t=e.dx,n=e.dy,r=e.graphic;return c.emit("update",{graphics:c.updateGraphics.toArray(),state:"active",aborted:!1,tool:c.activeTool,toolEventInfo:{dx:t,dy:n,mover:r,type:"move"},type:"update"})},onGraphicMoveStop:function(e){var t=e.dx,n=e.dy,r=e.graphic;c._displayPointerCursor(),c.emit("update",{graphics:c.updateGraphics.toArray(),state:"active",aborted:!1,tool:c.activeTool,toolEventInfo:{dx:t,dy:n,mover:r,type:"move-stop"},type:"update"})},onGraphicPointerOver:function(){return c._displayPointerCursor()},onGraphicPointerOut:function(){return c._displayDefaultCursor()}}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_getBox",value:function(){var e=Object(o.a)(a.a.mark((function e(t,r,i){var o,c,l,u,d=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.enableRotation,c=r.enableScaling,l=r.preserveAspectRatio,e.next=5,this._requireModule(n.e(102).then(n.bind(null,1457)));case 5:return u=e.sent,e.abrupt("return",St(u)?u:new u.module.default({graphics:t,enableRotation:o,enableScaling:c,preserveAspectRatio:l,layer:this._internalGraphicsLayer,view:i,callbacks:{onMoveStart:function(e){return d.emit("update",{graphics:d.updateGraphics.toArray(),state:"active",aborted:!1,tool:d.activeTool,toolEventInfo:Object(s.a)({},e),type:"update"})},onMove:function(e){return d.emit("update",{graphics:d.updateGraphics.toArray(),state:"active",aborted:!1,tool:d.activeTool,toolEventInfo:Object(s.a)({},e),type:"update"})},onMoveStop:function(e){return d.emit("update",{graphics:d.updateGraphics.toArray(),state:"active",aborted:!1,tool:d.activeTool,toolEventInfo:Object(s.a)({},e),type:"update"})},onScaleStart:function(e){return d.emit("update",{graphics:d.updateGraphics.toArray(),state:"active",aborted:!1,tool:d.activeTool,toolEventInfo:Object(s.a)({},e),type:"update"})},onScale:function(e){return d.emit("update",{graphics:d.updateGraphics.toArray(),state:"active",aborted:!1,tool:d.activeTool,toolEventInfo:Object(s.a)({},e),type:"update"})},onScaleStop:function(e){return d.emit("update",{graphics:d.updateGraphics.toArray(),state:"active",aborted:!1,tool:d.activeTool,toolEventInfo:Object(s.a)({},e),type:"update"})},onRotateStart:function(e){return d.emit("update",{graphics:d.updateGraphics.toArray(),state:"active",aborted:!1,tool:d.activeTool,toolEventInfo:Object(s.a)({},e),type:"update"})},onRotate:function(e){return d.emit("update",{graphics:d.updateGraphics.toArray(),state:"active",aborted:!1,tool:d.activeTool,toolEventInfo:Object(s.a)({},e),type:"update"})},onRotateStop:function(e){return d.emit("update",{graphics:d.updateGraphics.toArray(),state:"active",aborted:!1,tool:d.activeTool,toolEventInfo:Object(s.a)({},e),type:"update"})}}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_getReshape",value:function(){var e=Object(o.a)(a.a.mark((function e(t,r,i){var o,c,l,u=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.enableMidpoints,c=void 0===o||o,e.next=4,this._requireModule(n.e(103).then(n.bind(null,1399)));case 4:return l=e.sent,e.abrupt("return",St(l)?l:new l.module.default({enableMidpoints:c,graphic:t[0],layer:this._internalGraphicsLayer,snappingManager:this._snappingManager,view:i,callbacks:{onReshapeStart:function(e){return u.emit("update",{graphics:u.updateGraphics.toArray(),state:"active",aborted:!1,tool:u.activeTool,toolEventInfo:Object(s.a)({},e),type:"update"})},onReshape:function(e){return u.emit("update",{graphics:u.updateGraphics.toArray(),state:"active",aborted:!1,tool:u.activeTool,toolEventInfo:Object(s.a)({},e),type:"update"})},onReshapeStop:function(e){var t=e.mover,n=e.type;return u.emit("update",{graphics:u.updateGraphics.toArray(),state:"active",aborted:!1,tool:u.activeTool,toolEventInfo:{mover:t,type:n},type:"update"})},onMoveStart:function(e){var t=e.dx,n=e.dy,r=e.mover,i=e.type;return u.emit("update",{graphics:u.updateGraphics.toArray(),state:"active",aborted:!1,tool:u.activeTool,toolEventInfo:{dx:t,dy:n,mover:r,type:i},type:"update"})},onMove:function(e){var t=e.dx,n=e.dy,r=e.mover,i=e.type;return u.emit("update",{graphics:u.updateGraphics.toArray(),state:"active",aborted:!1,tool:u.activeTool,toolEventInfo:{dx:t,dy:n,mover:r,type:i},type:"update"})},onMoveStop:function(e){var t=e.dx,n=e.dy,r=e.mover,i=e.type;return u.emit("update",{graphics:u.updateGraphics.toArray(),state:"active",aborted:!1,tool:u.activeTool,toolEventInfo:{dx:t,dy:n,mover:r,type:i},type:"update"})},onVertexAdd:function(e){var t=e.added,n=e.type,r=e.vertices,i=t.map((function(e){return Object(j.b)(e.geometry)}));u.emit("update",{graphics:u.updateGraphics.toArray(),state:"active",aborted:!1,tool:u.activeTool,toolEventInfo:{added:i,vertices:r,type:n},type:"update"})},onVertexRemove:function(e){var t=e.removed,n=e.type,r=e.vertices,i=t.map((function(e){return Object(j.b)(e.geometry)}));u.emit("update",{graphics:u.updateGraphics.toArray(),state:"active",aborted:!1,tool:u.activeTool,toolEventInfo:{removed:i,vertices:r,type:n},type:"update"})}}}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_getHandlesForComponent",value:function(e,t){var n=this,r=e.activeComponent;switch(r.type){case"graphic-mover":return[r.on("graphic-click",(function(t){var n,r=t.graphic,i=t.viewEvent;null!=(n=i.native)&&n.shiftKey&&(i.stopPropagation(),e.removeFromSelection(r))})),r.on("graphic-move-start",(function(t){return e.addToHistory(kt(t.allGraphics))}))];case"box":return[r.on("graphic-click",(function(r){return n._onTransformOrReshape2DGraphicClick(e,t,r)})),r.on("move-start",(function(t){return e.addToHistory(kt(t.graphics))})),r.on("rotate-start",(function(t){return e.addToHistory(kt(t.graphics))})),r.on("scale-start",(function(t){return e.addToHistory(kt(t.graphics))}))];case"reshape":return[r.on("graphic-click",(function(r){return n._onTransformOrReshape2DGraphicClick(e,t,r)})),r.on("move-start",(function(t){return e.addToHistory(kt([t.mover]))})),r.on("reshape-start",(function(t){return e.addToHistory(kt([t.graphic]))})),r.on("vertex-add",(function(t){return e.addToHistory(kt([t.oldGraphic]))})),r.on("vertex-remove",(function(t){return e.addToHistory(kt([t.oldGraphic]))}))];case"move-3d":return[r.on("graphic-move-start",(function(t){e.addToHistory(kt(t.allGraphics)),n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{dx:0,dy:0,mover:t.allGraphics.length>0?t.allGraphics[0]:null,type:"move-start"},type:"update"})})),r.on("graphic-move",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{dx:e.dx,dy:e.dy,mover:e.allGraphics.length>0?e.allGraphics[0]:null,type:"move"},type:"update"})})),r.on("graphic-move-stop",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{dx:0,dy:0,mover:e.allGraphics.length>0?e.allGraphics[0]:null,type:"move-stop"},type:"update"})})),r.on("immediate-click",(function(r){r.shiftKey?n._toggleSelection([r.graphic],e,t):e.toggleTool()}))];case"transform-3d":return[r.on("graphic-translate-start",(function(t){e.addToHistory(kt([t.graphic])),n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:t.graphic,dx:t.dxScreen,dy:t.dyScreen,type:"move-start"},type:"update"})})),r.on("graphic-translate-stop",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move-stop"},type:"update"})})),r.on("graphic-rotate-start",(function(t){e.addToHistory(xt([t.graphic])),n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:t.graphic,angle:t.angle,type:"rotate-start"},type:"update"})})),r.on("graphic-rotate-stop",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,angle:e.angle,type:"rotate-stop"},type:"update"})})),r.on("graphic-scale-start",(function(t){e.addToHistory(xt([t.graphic])),n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:t.graphic,xScale:t.xScale,yScale:t.yScale,type:"scale-start"},type:"update"})})),r.on("graphic-scale-stop",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,xScale:e.xScale,yScale:e.yScale,type:"scale-stop"},type:"update"})})),r.on("graphic-translate",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move"},type:"update"})})),r.on("graphic-rotate",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,angle:e.angle,type:"rotate"},type:"update"})})),r.on("graphic-scale",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,xScale:e.xScale,yScale:e.yScale,type:"scale"},type:"update"})})),r.on("immediate-click",(function(r){r.shiftKey?n._toggleSelection([r.graphic],e,t):e.toggleTool()}))];case"reshape-3d":return[r.on("reshape",(function(t){"reshape-start"===t.type&&e.addToHistory(kt([t.mover])),n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:t,type:"update"})})),r.on("move",(function(t){"move-start"===t.type&&e.addToHistory(kt([t.mover])),n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:t,type:"update"})})),r.on("vertex-add",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:e,type:"update"})})),r.on("vertex-remove",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:e,type:"update"})})),r.on("immediate-click",(function(r){r.shiftKey?n._toggleSelection([r.graphic],e,t):e.toggleTool()}))];case"draw":case"draw-3d":return null;default:return}}},{key:"_onTransformOrReshape2DGraphicClick",value:function(e,t,n){var r,i=n.graphic,a=n.viewEvent;null!=(r=a.native)&&r.shiftKey?(a.stopPropagation(),e.removeFromSelection(i)):t.toggleToolOnClick&&(Object(h.j)(i.geometry)||"extent"!==i.geometry.type?(a.stopPropagation(),e.toggleTool()):this._logError("sketch:reshape-extent","Reshape operation does not support graphics with geometry of type 'extent'."))}},{key:"_setUpdateOperationHandle",value:function(e,t){var n=this;this._operationHandle=e;var r=this.view.map;this._disablePopup(t);e.on("complete",(function(){if(e===n._operationHandle){var i=n.updateGraphics.toArray(),a=n._operationHandle.tool;n._operationHandle.destroy(),n._operationHandle=null,n._internalGraphicsLayer.removeMany(n.updateGraphics.toArray()),n.updateGraphics.removeAll(),r&&r.remove(n._internalGraphicsLayer),n._restorePopup(t),n.emit("update",{graphics:i,state:"complete",aborted:e.cancelled,tool:a,toolEventInfo:null,type:"update"})}}))}},{key:"_getCommonUpdateOperationClickHandlers",value:function(e,t,n){var r=this,i=Object(D.a)(t);this._getFirstHit(i).then((function(i){var a=i.results;a.length&&(t.native.shiftKey&&r._toggleSelection(a.map((function(e){return e.graphic})),e,n)||a.some((function(e){return e.graphic&&r.updateGraphics.indexOf(e.graphic)>-1})))?t.stopPropagation():e.complete()}))}},{key:"_toggleSelection",value:function(e,t,n){var r=this,i=!!n.multipleSelectionEnabled;return e.some((function(e){return null!=e&&!(!i||e.layer!==r.layer)&&(-1===r.updateGraphics.indexOf(e)?t.addToSelection(e):t.removeFromSelection(e),!0)}))}},{key:"_getCommonUpdateOperationKeyDownHandlers",value:function(e,t){if(e){var n=t.key;n===mt.undoKey&&e.canUndo()?(t.stopPropagation(),e.undo()):n===mt.redoKey&&e.canRedo()?(t.stopPropagation(),e.redo()):n===mt.cancelKey?(t.stopPropagation(),e.cancel()):mt.deleteKeys.indexOf(n)>=0&&this._onDeleteKey(t)}}},{key:"_onDeleteKey",value:function(e){if(this._operationHandle&&"update"===this._operationHandle.type){var t=this.activeComponent;if(!Object(h.j)(t)&&"reshape"!==t.type&&"reshape-3d"!==t.type){e.stopPropagation();var n=this.updateGraphics.toArray();this.layer.removeMany(n),this._emitDeleteEvent({graphics:n,tool:this.activeTool})}}}},{key:"_drawMultipointGraphic",value:function(e,t,n){var r=null;if(!n&&t.length>1){var i=t.slice(0);i.pop(),r=e.createMultipoint(i,this.view.spatialReference)}else r=e.createMultipoint(t,this.view.spatialReference);this.createGraphic?this.createGraphic.geometry=r:this._set("createGraphic",new P.a(r,this.pointSymbol)),n&&1===t.length&&this._internalGraphicsLayer.add(this.createGraphic)}},{key:"_drawVertexGraphics",value:function(e,t,n,r){if(n.length){var i=this._doUnnormalization,a=this.activeLineSymbol,o=this.activeVertexSymbol,s=this.polygonSymbol,l=this.polylineSymbol,u=this.vertexSymbol,d=this.view.spatialReference,f=!(!r||!r.userClicked),p="polygon"===t,h=p?s:l;if(1===n.length){this._removeLineGraphic(),this._removeActiveLineGraphic();var b=this.createPointFromVertex(n[0]),v=p?e.createPolygon([n],d,i,!0):e.createPolyline([n],d,i);this._vertexGraphics.length?this._vertexGraphics[0].geometry=b:this._vertexGraphics.push(new P.a(b,o)),this.createGraphic?this.createGraphic.set({geometry:v,symbol:h}):this._set("createGraphic",new P.a(v,h)),f&&this._internalGraphicsLayer.add(this._vertexGraphics[0])}else if(2===n.length){var y=this.createPointFromVertex(n[1]),m=e.createPolyline([n],d,i),g=p?e.createPolygon([n],d,i,!0):e.createPolyline([n],d,i);if(!this._vertexGraphics.length){var O=this.createPointFromVertex(n[0]),j=new P.a(O,u);this._vertexGraphics.push(j)}if(1===this._vertexGraphics.length){var w=this._vertexGraphics[0],_=new P.a(y,u);this._removeLineGraphic(),this._removeActiveFillGraphic(),this._vertexGraphics.push(_),this._internalGraphicsLayer.remove(w),this._internalGraphicsLayer.add(w)}else this._vertexGraphics[1].geometry=y;this._showActiveLineGraphic(m);var k=this._vertexGraphics[0];f&&(this._activeLineGraphic.symbol=l,k.symbol=u,this._internalGraphicsLayer.add(this._vertexGraphics[1])),this.createGraphic?this.createGraphic.set({geometry:g,symbol:h}):this._set("createGraphic",new P.a(g,h)),this._internalGraphicsLayer.remove(k),this._internalGraphicsLayer.add(k)}else if(n.length>2){var x=p?e.createPolygon([n],d,i,!0):e.createPolyline([n],d,i);"polygon"===t&&this._showFillGraphic(x);var S=n.map((function(e){return e.slice()})),T=S.pop(),E=[S[S.length-1],T],C=e.createPolyline([S],d,i),I=e.createPolyline([E],d,i);this._showLineGraphic(C),this._showActiveLineGraphic(I);for(var M=0;M<S.length;M++){var A=this._vertexGraphics[M];if(A)f||M!==this._vertexGraphics.length-1?A.symbol=u:A.symbol=o;else{var R=this.createPointFromVertex(n[M]);this._showVertexGraphic(R)}}if(f){this._activeLineGraphic.symbol=l;var L=n.length-1,F=this.createPointFromVertex(n[L]);this._showVertexGraphic(F)}else this._activeLineGraphic.symbol=a;this.createGraphic?this.createGraphic.set({geometry:x,symbol:h}):(this._removeCreateGraphic(),this._set("createGraphic",new P.a(x,h)));var D,N=Object(c.a)(this._vertexGraphics);try{for(N.s();!(D=N.n()).done;){var V=D.value;this._internalGraphicsLayer.remove(V),this._internalGraphicsLayer.add(V)}}catch(z){N.e(z)}finally{N.f()}}}}},{key:"_drawSegmentGraphic",value:function(e,t,n,r,i){if(n.length){var a,o=!(null==r||!r.centered),s=!(null==r||!r.constrainToggle);1===n.length?this._removeCenterIndicatorGraphic():("rectangle"===t?a=s?e.createSquare(n,i,o):e.createRectangle(n,i,o):"circle"===t&&(a=s?e.createEllipse(n,i,o):e.createCircle(n,i,o,this.view.resolution)),Object(h.k)(a)&&a.extent&&a.extent.center&&this._showCenterIndicatorGraphic(a.extent.center)),a?this.createGraphic?this.createGraphic.geometry=a:(this._removeCreateGraphic(),this._set("createGraphic",new P.a(a,this.polygonSymbol)),this._internalGraphicsLayer.add(this.createGraphic)):this._removeCreateGraphic()}}},{key:"_showCenterIndicatorGraphic",value:function(e){this._centerIndicatorGraphic?this._centerIndicatorGraphic.geometry=e:(this._centerIndicatorGraphic=new P.a(e,this._centerSymbol),this._internalGraphicsLayer.add(this._centerIndicatorGraphic))}},{key:"_removeCenterIndicatorGraphic",value:function(){this._centerIndicatorGraphic&&(this._internalGraphicsLayer.remove(this._centerIndicatorGraphic),this._centerIndicatorGraphic.destroy(),this._centerIndicatorGraphic=null)}},{key:"_showActiveLineGraphic",value:function(e){this._activeLineGraphic?(this._activeLineGraphic.set({geometry:e,symbol:this.activeLineSymbol}),this._internalGraphicsLayer.remove(this._activeLineGraphic)):this._activeLineGraphic=new P.a(e,this.activeLineSymbol),this._internalGraphicsLayer.add(this._activeLineGraphic)}},{key:"_showFillGraphic",value:function(e){this._activeFillGraphic?(this._activeFillGraphic.set({geometry:e,symbol:this.activeFillSymbol}),this._internalGraphicsLayer.remove(this._activeFillGraphic)):this._activeFillGraphic=new P.a(e,this.activeFillSymbol),this._internalGraphicsLayer.add(this._activeFillGraphic)}},{key:"_showLineGraphic",value:function(e){this._lineGraphic?(this._lineGraphic.set({geometry:e,symbol:this.polylineSymbol}),this._internalGraphicsLayer.remove(this._lineGraphic)):this._lineGraphic=new P.a(e,this.polylineSymbol),this._internalGraphicsLayer.add(this._lineGraphic)}},{key:"_showVertexGraphic",value:function(e,t){var n=t?this.activeVertexSymbol:this.vertexSymbol,r=new P.a(e,n);this._vertexGraphics.push(r),this._internalGraphicsLayer.add(r)}},{key:"_resetCreateOperationGraphics",value:function(){this._removeActiveFillGraphic(),this._removeLineGraphic(),this._removeActiveLineGraphic(),this._removeVertexGraphics(),this._removeCloneGraphics()}},{key:"_removeCreateGraphic",value:function(){this.createGraphic&&(this._internalGraphicsLayer.remove(this.createGraphic),this._set("createGraphic",null))}},{key:"_removeCreateOperationGraphics",value:function(){this._removeCenterIndicatorGraphic(),this._removeActiveLineGraphic(),this._removeActiveFillGraphic(),this._removeLineGraphic(),this._removeVertexGraphics()}},{key:"_removeActiveLineGraphic",value:function(){this._activeLineGraphic&&(this._internalGraphicsLayer.remove(this._activeLineGraphic),this._activeLineGraphic.destroy(),this._activeLineGraphic=null)}},{key:"_removeActiveFillGraphic",value:function(){this._activeFillGraphic&&(this._internalGraphicsLayer.remove(this._activeFillGraphic),this._activeFillGraphic.destroy(),this._activeFillGraphic=null)}},{key:"_removeLineGraphic",value:function(){this._lineGraphic&&(this._internalGraphicsLayer.remove(this._lineGraphic),this._lineGraphic.destroy(),this._lineGraphic=null)}},{key:"_removeVertexGraphics",value:function(){this._vertexGraphics.length&&(this._internalGraphicsLayer.removeMany(this._vertexGraphics),this._vertexGraphics.forEach((function(e){return e.destroy()})),this._vertexGraphics=[])}},{key:"_removeDefaultLayer",value:function(){this._internalGraphicsLayer&&(this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer),this._internalGraphicsLayer.destroy(),this._internalGraphicsLayer=null)}},{key:"_operationHandleForCreateAction",value:function(e,t,n){var r=this;return new bt({activeComponent:this._draw,tool:n,type:"create",onEnd:function(){t.forEach((function(e){return e.remove()})),t.length=0,r._removeCreateOperationGraphics(),r._internalGraphicsLayer&&r._internalGraphicsLayer.remove(r.createGraphic),r._displayDefaultCursor()},undo:function(){e.undo(),r._emitUndoEvent({graphics:[r.createGraphic],tool:n})},redo:function(){e.redo(),r._emitRedoEvent({graphics:[r.createGraphic],tool:n})},canUndo:function(){return e&&e.canUndo()},canRedo:function(){return e&&e.canRedo()}})}},{key:"_isComponentGraphic",value:function(e){var t=this.activeComponent;return!(!e||Object(h.j)(t))&&(!(!e.attributes||!e.attributes.esriSketchTool)||("box"===t.type||"reshape"===t.type)&&t.isUIGraphic(e))}},{key:"_snapLastPolygonVertexToFirst",value:function(e,t){if(!("polygon"!==e&&t.length<=2)){var n=t[0],r=t[t.length-1],i=this.view.toScreen(new O.a(n[0],n[1],this.view.spatialReference)),a=this.view.toScreen(new O.a(r[0],r[1],this.view.spatialReference));this._isWithinScreenDistance(i,a,this._getVertexIntersectDistance())&&(r[0]=n[0],r[1]=n[1])}}},{key:"_getVertexIntersectDistance",value:function(){return this.vertexSymbol&&"simple-marker"===this.vertexSymbol.type?Object(x.g)(this.vertexSymbol.size)/2+3:3}},{key:"_isWithinScreenDistance",value:function(e,t,n){var r=e.x-t.x,i=e.y-t.y;return Math.sqrt(r*r+i*i)<=n}},{key:"_displayPointerCursor",value:function(){this.view&&this.view.container&&"pointer"!==this.view.cursor&&(this.view.cursor="pointer")}},{key:"_displayGrabbingCursor",value:function(){this.view&&this.view.container&&"grabbing"!==this.view.cursor&&(this.view.cursor="grabbing")}},{key:"_displayCrosshairCursor",value:function(){this.view&&this.view.container&&"crosshair"!==this.view.cursor&&(this.view.cursor="crosshair")}},{key:"_displayDefaultCursor",value:function(){this.view&&this.view.container&&null!==this.view.cursor&&(this.view.cursor=null)}},{key:"_logError",value:function(e,t,n){yt.error(new m.a(e,t,n))}},{key:"_requireModule",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new AbortController,this._moduleLoaderAbortController=n,e.next=4,t;case 4:return r=e.sent,e.abrupt("return",this._moduleLoaderAbortController!==n||n.signal.aborted?{requireError:"aborted"}:{module:r});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_emitUndoEvent",value:function(e){this.emit("undo",Object(s.a)(Object(s.a)({},e),{},{type:"undo"}))}},{key:"_emitRedoEvent",value:function(e){this.emit("redo",Object(s.a)(Object(s.a)({},e),{},{type:"redo"}))}},{key:"_emitDeleteEvent",value:function(e){this.emit("delete",Object(s.a)(Object(s.a)({},e),{},{type:"delete"}))}},{key:"createPointFromVertex",value:function(e){return e.length>2?new O.a(e[0],e[1],e[2],this.view.spatialReference):new O.a(e[0],e[1],this.view.spatialReference)}},{key:"test",value:function(){return this._operationHandle}},{key:"wait",value:function(){return Object(M.i)(this,"updating")}},{key:"_beginAsyncOperation",value:function(){this._numUpdating+=1,this.notifyChange("updating")}},{key:"_endAsyncOperation",value:function(){this._numUpdating-=1,this.notifyChange("updating")}},{key:"_disablePopupEnabled",value:function(e){var t;return"3d"!==(null==(t=this.view)?void 0:t.type)||this.updateOnGraphicClick||Object(h.k)(e)&&e.toggleToolOnClick}},{key:"_disablePopup",value:function(e){if(this._disablePopupEnabled(e)){var t=this.view.popup;t&&Object(h.j)(this._originalAutoOpenEnabled)&&(this._originalAutoOpenEnabled=t.autoOpenEnabled,t.autoOpenEnabled=!1)}}},{key:"_restorePopup",value:function(e){if(this._disablePopupEnabled(e)){var t=this.view.popup;t&&Object(h.k)(this._originalAutoOpenEnabled)&&(t.autoOpenEnabled=this._originalAutoOpenEnabled,this._originalAutoOpenEnabled=null)}}},{key:"_waitViewReady",value:function(){var e=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.view,!e.t0){e.next=6;break}return Object(h.a)(this._viewReadyAbortController),this._viewReadyAbortController=Object(g.d)(),e.next=6,Object(g.x)(Object(M.j)(this.view,"ready"),this._viewReadyAbortController.signal);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),i}(w.a.EventedAccessor);function wt(e,t){var n=e.history.undo.pop().updates,r=[];t.forEach((function(e,t){var i=n[t],a={};null!=i&&(Object(h.k)(i.geometry)&&(a.geometry=e.geometry,e.geometry=i.geometry),Object(h.k)(i.symbol)&&(a.symbol=e.symbol,e.symbol=i.symbol),r.push(a))})),e.history.redo.push({updates:r})}function _t(e,t){var n=e.history.redo.pop().updates,r=[];t.forEach((function(e,t){var i=n[t],a={};null!=i&&(Object(h.k)(i.geometry)&&(a.geometry=e.geometry,e.geometry=i.geometry),Object(h.k)(i.symbol)&&(a.symbol=e.symbol,e.symbol=i.symbol),r.push(a))})),e.history.undo.push({updates:r})}function kt(e){return{updates:e.map((function(e){return{geometry:e.geometry}}))}}function xt(e){return{updates:e.map((function(e){return{symbol:e.symbol}}))}}function St(e){return"requireError"in e&&"aborted"===e.requireError}Object(p.a)([Object(v.b)({readOnly:!0})],jt.prototype,"_draw",null),Object(p.a)([Object(v.b)()],jt.prototype,"updating",null),Object(p.a)([Object(v.b)()],jt.prototype,"_operationHandle",void 0),Object(p.a)([Object(v.b)({readOnly:!0})],jt.prototype,"activeTool",null),Object(p.a)([Object(v.b)()],jt.prototype,"activeFillSymbol",void 0),Object(p.a)([Object(v.b)()],jt.prototype,"activeLineSymbol",void 0),Object(p.a)([Object(v.b)()],jt.prototype,"activeVertexSymbol",void 0),Object(p.a)([Object(v.b)({readOnly:!0})],jt.prototype,"createGraphic",null),Object(p.a)([Object(v.b)()],jt.prototype,"defaultCreateOptions",null),Object(p.a)([Object(v.b)()],jt.prototype,"defaultUpdateOptions",null),Object(p.a)([Object(v.b)()],jt.prototype,"layer",void 0),Object(p.a)([Object(v.b)({types:C.e})],jt.prototype,"pointSymbol",void 0),Object(p.a)([Object(v.b)({types:C.e})],jt.prototype,"polygonSymbol",void 0),Object(p.a)([Object(v.b)({types:C.e})],jt.prototype,"polylineSymbol",void 0),Object(p.a)([Object(v.b)({type:Oe.a,nonNullable:!0})],jt.prototype,"snappingOptions",null),Object(p.a)([Object(v.b)()],jt.prototype,"_snappingManager",void 0),Object(p.a)([Object(v.b)({readOnly:!0})],jt.prototype,"state",null),Object(p.a)([Object(v.b)({readOnly:!0})],jt.prototype,"updateGraphics",void 0),Object(p.a)([Object(v.b)()],jt.prototype,"updateOnGraphicClick",void 0),Object(p.a)([Object(v.b)({types:C.e})],jt.prototype,"updatePointSymbol",void 0),Object(p.a)([Object(v.b)({types:C.e})],jt.prototype,"updatePolygonSymbol",void 0),Object(p.a)([Object(v.b)({types:C.e})],jt.prototype,"updatePolylineSymbol",void 0),Object(p.a)([Object(v.b)({types:C.e})],jt.prototype,"vertexSymbol",void 0),Object(p.a)([Object(v.b)({value:null})],jt.prototype,"view",null),Object(p.a)([Object(v.b)()],jt.prototype,"cancel",null),Object(p.a)([Object(v.b)()],jt.prototype,"complete",null),Object(p.a)([Object(v.b)()],jt.prototype,"delete",null),Object(p.a)([Object(v.b)()],jt.prototype,"create",null),Object(p.a)([Object(v.b)()],jt.prototype,"update",null),Object(p.a)([Object(v.b)()],jt.prototype,"undo",null),Object(p.a)([Object(v.b)()],jt.prototype,"redo",null),Object(p.a)([Object(v.b)()],jt.prototype,"canUndo",null),Object(p.a)([Object(v.b)()],jt.prototype,"canRedo",null),Object(p.a)([Object(v.b)()],jt.prototype,"toggleUpdateTool",null);var Tt=jt=Object(p.a)([Object(y.a)(vt)],jt);t.a=Tt},function(e,t,n){"use strict";function r(e){return Object.keys(e).some((function(t){var n=e[t];if(!n)return!1;switch(n&&n.toParam&&(n=n.toParam()),n.constructor.name){case"Array":case"Object":case"Date":case"Function":case"Boolean":case"String":case"Number":return!1;default:return!0}}))}function i(e){var t={};return Object.keys(e).forEach((function(n){var r,i,a=e[n];if(a&&a.toParam&&(a=a.toParam()),a||0===a||"boolean"===typeof a||"string"===typeof a){var o;switch(a.constructor.name){case"Array":var s=null===(i=null===(r=a[0])||void 0===r?void 0:r.constructor)||void 0===i?void 0:i.name;o="Array"===s?a:"Object"===s?JSON.stringify(a):a.join(",");break;case"Object":o=JSON.stringify(a);break;case"Date":o=a.valueOf();break;case"Function":o=null;break;case"Boolean":o=a+"";break;default:o=a}(o||0===o||"string"===typeof o||Array.isArray(o))&&(t[n]=o)}})),t}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(292),i=n(67),a=n(411),o=n(52);function s(e,t){var n,c,l;switch(c="string"===typeof e||e instanceof a.a?{httpMethod:"GET",params:{q:e}}:Object(r.a)(e,["q","num","start","sortField","sortOrder"],{httpMethod:"GET"}),t){case"item":l="/search";break;case"group":l="/community/groups";break;case"groupContent":if("string"===typeof e||e instanceof a.a||!e.groupId)return Promise.reject(new Error("you must pass a `groupId` option to `searchGroupContent`"));l="/content/groups/"+e.groupId+"/search";break;default:l="/portals/self/users/search"}return n=Object(o.a)(c)+l,Object(i.d)(n,c).then((function(n){return n.nextStart&&-1!==n.nextStart&&(n.nextPage=function(){var r;return"string"===typeof e||e instanceof a.a?r={q:e,start:n.nextStart}:(r=e).start=n.nextStart,s(r,t)}),n}))}},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(8),d=(n(12),n(19),n(20),n(36)),f=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"clone",value:function(){return new r({url:this.url})}}]),n}(d.a);Object(c.a)([Object(l.b)({type:String})],f.prototype,"url",void 0);var p=f=r=Object(c.a)([Object(u.a)("esri.symbols.support.Thumbnail")],f);t.a=p},function(e,t,n){"use strict";var r=n(7),i=n.n(r),a=n(15),o=n(10),s=n(2),c=n(3),l=n(37),u=n(5),d=n(6),f=n(0),p=(n(16),n(4)),h=(n(13),n(1)),b=n(58),v=n(8),y=n(18),m=(n(12),n(19),n(20),n(40)),g=n(74),O=n(25),j=n(365),w=n(557),_=n(91),k=n(81),x={editing:!1,operations:{add:!0,update:!0,delete:!0}},S=m.a.ofType(w.a),T=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e))._getAttachmentsPromise=null,r._attachmentLayer=null,r.abilities=Object(o.a)({},x),r.activeAttachmentInfo=null,r.attachmentInfos=new S,r.graphic=null,r.mode="view",r.handles.add([Object(O.a)(Object(l.a)(r),"graphic",(function(){return r._graphicChanged()}))]),r}return Object(c.a)(n,[{key:"destroy",value:function(){this._attachmentLayer=null,this.graphic=null}},{key:"castAbilities",value:function(e){return Object(o.a)(Object(o.a)({},x),e)}},{key:"state",get:function(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}},{key:"supportsResizeAttachments",get:function(){return this.get("graphic.layer.capabilities.operations.supportsResizeAttachments")||!1}},{key:"getAttachments",value:function(){var e=Object(a.a)(i.a.mark((function e(){var t,n,r,a,o,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._attachmentLayer,n=this.attachmentInfos,t&&"function"==typeof t.queryAttachments){e.next=3;break}throw new y.a("invalid-layer","getAttachments(): A valid layer is required.");case 3:return r=this._getFeatureId(),a=new j.a({objectIds:[r],returnMetadata:!0}),o=[],s=t.queryAttachments(a).then((function(e){return e[r]||o})).catch((function(){return o})),this._getAttachmentsPromise=s,this.notifyChange("state"),e.next=7,s;case 7:return c=e.sent,e.abrupt("return",(n.removeAll(),c.length&&n.addMany(c),this._getAttachmentsPromise=null,this.notifyChange("state"),c));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addAttachment",value:function(){var e=Object(a.a)(i.a.mark((function e(t){var n,r,a,o,s,c,l=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._attachmentLayer,r=this.attachmentInfos,a=this.graphic,o=this.abilities,t){e.next=3;break}throw new y.a("invalid-attachment","addAttachment(): An attachment is required.",{attachment:t});case 3:if(o.operations.add){e.next=5;break}throw new y.a("invalid-abilities","addAttachment(): add abilities are required.");case 5:if(n&&"function"==typeof n.addAttachment){e.next=7;break}throw new y.a("invalid-layer","addAttachment(): A valid layer is required.");case 7:return s=n.addAttachment(a,t).then((function(e){return l._queryAttachment(e.objectId)})),e.next=10,s;case 10:return c=e.sent,e.abrupt("return",(r.add(c),c));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteAttachment",value:function(){var e=Object(a.a)(i.a.mark((function e(t){var n,r,a,o,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._attachmentLayer,r=this.attachmentInfos,a=this.graphic,o=this.abilities,t){e.next=3;break}throw new y.a("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:t});case 3:if(o.operations.delete){e.next=5;break}throw new y.a("invalid-abilities","deleteAttachment(): delete abilities are required.");case 5:if(n&&"function"==typeof n.deleteAttachments){e.next=7;break}throw new y.a("invalid-layer","deleteAttachment(): A valid layer is required.");case 7:return s=n.deleteAttachments(a,[t.id]).then((function(){return t})),e.next=10,s;case 10:return c=e.sent,e.abrupt("return",(r.remove(c),c));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateAttachment",value:function(){var e=Object(a.a)(i.a.mark((function e(t){var n,r,a,o,s,c,l,u,d=this,f=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=f.length>1&&void 0!==f[1]?f[1]:this.activeAttachmentInfo,r=this._attachmentLayer,a=this.attachmentInfos,o=this.graphic,s=this.abilities,t){e.next=4;break}throw new y.a("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:t});case 4:if(n){e.next=6;break}throw new y.a("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:n});case 6:if(s.operations.update){e.next=8;break}throw new y.a("invalid-abilities","updateAttachment(): Update abilities are required.");case 8:if(c=a.findIndex((function(e){return e===n})),r&&"function"==typeof r.updateAttachment){e.next=11;break}throw new y.a("invalid-layer","updateAttachment(): A valid layer is required.");case 11:return l=r.updateAttachment(o,n.id,t).then((function(e){return d._queryAttachment(e.objectId)})),e.next=14,l;case 14:return u=e.sent,e.abrupt("return",(a.splice(c,1,u),u));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_queryAttachment",value:function(){var e=Object(a.a)(i.a.mark((function e(t){var n,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new y.a("invalid-attachment-id","Could not query attachment.");case 2:return n=this._attachmentLayer,r=this._getFeatureId(),a=new j.a({objectIds:[r],attachmentsWhere:"AttachmentId=".concat(t),returnMetadata:!0}),e.abrupt("return",n.queryAttachments(a).then((function(e){return e[r][0]})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getFeatureId",value:function(){var e=this._attachmentLayer,t=this.graphic;if(!e||!t)return null;var n=e.objectIdField,r=t.attributes;return r&&r[n]}},{key:"_graphicChanged",value:function(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch((function(){})))}},{key:"_setAttachmentLayer",value:function(){var e=this.graphic,t=Object(k.l)(e);this._attachmentLayer=t?"scene"===t.type&&Object(p.k)(t.associatedLayer)?t.associatedLayer:t:null}}]),n}(_.a);Object(f.a)([Object(h.b)()],T.prototype,"abilities",void 0),Object(f.a)([Object(b.a)("abilities")],T.prototype,"castAbilities",null),Object(f.a)([Object(h.b)()],T.prototype,"activeAttachmentInfo",void 0),Object(f.a)([Object(h.b)({readOnly:!0,type:S})],T.prototype,"attachmentInfos",void 0),Object(f.a)([Object(h.b)({type:g.a})],T.prototype,"graphic",void 0),Object(f.a)([Object(h.b)()],T.prototype,"mode",void 0),Object(f.a)([Object(h.b)({readOnly:!0})],T.prototype,"state",null),Object(f.a)([Object(h.b)({readOnly:!0})],T.prototype,"supportsResizeAttachments",null);var E=T=Object(f.a)([Object(v.a)("esri.widgets.Attachments.AttachmentsViewModel")],T);t.a=E},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(22)),u=(n(13),n(17)),d=n(1),f=n(8),p=n(42),h=(n(12),n(19),n(20),n(28)),b=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).attachmentTypes=null,r.attachmentsWhere=null,r.keywords=null,r.globalIds=null,r.name=null,r.num=null,r.objectIds=null,r.returnMetadata=!1,r.size=null,r.start=null,r.where=null,r}return Object(a.a)(n,[{key:"writeStart",value:function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}},{key:"clone",value:function(){return new r(Object(l.a)({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}}]),n}(h.a);Object(c.a)([Object(d.b)({type:[String],json:{write:!0}})],b.prototype,"attachmentTypes",void 0),Object(c.a)([Object(d.b)({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],b.prototype,"attachmentsWhere",void 0),Object(c.a)([Object(d.b)({type:[String],json:{write:!0}})],b.prototype,"keywords",void 0),Object(c.a)([Object(d.b)({type:[Number],json:{write:!0}})],b.prototype,"globalIds",void 0),Object(c.a)([Object(d.b)({json:{write:!0}})],b.prototype,"name",void 0),Object(c.a)([Object(d.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],b.prototype,"num",void 0),Object(c.a)([Object(d.b)({type:[Number],json:{write:!0}})],b.prototype,"objectIds",void 0),Object(c.a)([Object(d.b)({type:Boolean,json:{default:!1,write:!0}})],b.prototype,"returnMetadata",void 0),Object(c.a)([Object(d.b)({type:[Number],json:{write:!0}})],b.prototype,"size",void 0),Object(c.a)([Object(d.b)({type:Number,json:{read:{source:"resultOffset"}}})],b.prototype,"start",void 0),Object(c.a)([Object(p.a)("start"),Object(p.a)("num")],b.prototype,"writeStart",null),Object(c.a)([Object(d.b)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],b.prototype,"where",void 0),(b=r=Object(c.a)([Object(f.a)("esri.tasks.support.AttachmentQuery")],b)).from=Object(u.m)(b);var v=b;t.a=v},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i}));var r=n(318);function i(e){return null!=r.a[e]}function a(e){return 1/(r.a[e]||1)}var o=function(){var e=Object.keys(r.a);return e.sort(),e}()},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,n.apply(this,arguments)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(21)),i=o(n(96)),a=n(438);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=function(e){var t=e.children,n=s(e,["children"]);return r.default.createElement(a.StyledArcgisAccountMenuItem,n,t)};c.propTypes={children:i.default.node},c.defaultProps={},c.displayName="ArcgisAccountMenuItem";var l=c;t.default=l},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var r=n(100),i=n(523);function a(e,t){var n;if(t.write&&!t.write.writer&&(!1!==t.write.enabled||t.write.overridePolicy)){var a,s=null!=(n=null==e?void 0:e.ndimArray)?n:0;e&&(1===s||"type"in e&&Object(i.a)(e.type))?t.write.writer=l:t.write.writer=s>1?(a=s,function(e,t,n,i){var o;if(null===e)o=null;else{o=u(e,i,a);for(var s=a,c=o;s>0&&Array.isArray(c);)s--,c=c[0];if(void 0!==c)for(var l=0;l<s;l++)o=[o]}Object(r.c)(n,o,t)}):o}}function o(e,t,n,i){Object(r.c)(n,s(e,i),t)}function s(e,t){return e&&"function"==typeof e.write?e.write({},t):e&&"function"==typeof e.toJSON?e.toJSON():"number"==typeof e?c(e):e}function c(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function l(e,t,n,i){var a;null===e?a=null:e&&"function"==typeof e.map?"function"==typeof(a=e.map((function(e){return s(e,i)}))).toArray&&(a=a.toArray()):a=[s(e,i)],Object(r.c)(n,a,t)}function u(e,t,n){return 0!==n&&Array.isArray(e)?e.map((function(e){return u(e,t,n-1)})):s(e,t)}},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(8),d=(n(12),n(19),n(20),n(36)),f=n(109),p=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).portal=null,e}return Object(a.a)(n,[{key:"clone",value:function(){return new r({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}}]),n}(d.a);Object(c.a)([Object(l.b)({type:String})],p.prototype,"name",void 0),Object(c.a)([Object(l.b)({type:String})],p.prototype,"styleUrl",void 0),Object(c.a)([Object(l.b)({type:String})],p.prototype,"styleName",void 0),Object(c.a)([Object(l.b)({type:f.a})],p.prototype,"portal",void 0);var h=p=r=Object(c.a)([Object(u.a)("esri.symbols.support.StyleOrigin")],p);t.a=h},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(8),d=(n(12),n(19),n(20),n(28)),f=n(39),p=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).color=null,r.ratio=null,r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({color:this.color,ratio:this.ratio})}}]),n}(d.a);Object(c.a)([Object(l.b)({type:f.a,json:{write:!0}})],p.prototype,"color",void 0),Object(c.a)([Object(l.b)({type:Number,json:{write:!0}})],p.prototype,"ratio",void 0);var h=p=r=Object(c.a)([Object(u.a)("esri.renderers.support.HeatmapColorStop")],p);t.a=h},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(8),d=(n(12),n(19),n(20),n(28)),f=n(148),p=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).value=0,r.unit="milliseconds",r}return Object(a.a)(n,[{key:"toMilliseconds",value:function(){return this.value*f.b[this.unit]}},{key:"clone",value:function(){return new r({value:this.value,unit:this.unit})}}]),n}(d.a);Object(c.a)([Object(l.b)({type:Number,json:{write:!0},nonNullable:!0})],p.prototype,"value",void 0),Object(c.a)([Object(l.b)({type:f.d.apiValues,json:{type:f.d.jsonValues,read:f.d.read,write:f.d.write},nonNullable:!0})],p.prototype,"unit",void 0);var h=p=r=Object(c.a)([Object(u.a)("esri.TimeInterval")],p);t.a=h},function(e,t,n){"use strict";function r(e,t,n,r){var i=3*e,a=3*(n-e)-i,o=1-i-a,s=3*t,c=3*(r-t)-s,l=1-s-c;function u(e){return((o*e+a)*e+i)*e}function d(e){return((l*e+c)*e+s)*e}function f(e){return(3*o*e+2*a)*e+i}function p(e,t){var n,r,i,a,o,s;for(i=e,s=0;s<8;s++){if(a=u(i)-e,Math.abs(a)<t)return i;if(o=f(i),Math.abs(o)<1e-6)break;i-=a/o}if((i=e)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(a=u(i),Math.abs(a-e)<t)return i;e>a?n=i:r=i,i=.5*(r-n)+n}return i}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-6;return d(p(e,t))}}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r}));var i=/^cubic-bezier\((.*)\)/,a={};function o(e){var t=a[e]||null;if(!t){var n=i.exec(e);if(n){var o=n[1].split(",").map((function(e){return parseFloat(e.trim())}));4!==o.length||o.some((function(e){return isNaN(e)}))||(t=r.apply(r,o))}}return t}a.ease=r(.25,.1,.25,1),a.linear=r(0,0,1,1),a.easeIn=a["ease-in"]=r(.42,0,1,1),a.easeOut=a["ease-out"]=r(0,0,.58,1),a.easeInOut=a["ease-in-out"]=r(.42,0,.58,1)},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return l}));n(2),n(3);var r=n(45);function i(e,t,n){var r=n.parameters,i=n.paddingPixelsOverride;return u.scale=Math.min(r.divisor/(t-r.offset),1),u.factor=function(e){return Math.abs(e*e*e)}(e),u.minPixelSize=r.minPixelSize,u.paddingPixels=i,u}function a(e,t){return 0===e?t.minPixelSize:t.minPixelSize*(1+2*t.paddingPixels/e)}function o(e,t){return Math.max(Object(r.l)(e*t.scale,e,t.factor),a(e,t))}function s(e,t,n,r){r.scale=function(e,t,n){var r=i(e,t,n);return r.minPixelSize=0,r.paddingPixels=0,o(1,r)}(e,t,n),r.factor=0,r.minPixelSize=n.parameters.minPixelSize,r.paddingPixels=n.paddingPixelsOverride}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],r=Math.min(Math.max(t.scale,a(e[1],t)/e[1]),1);return n[0]=e[0]*r,n[1]=e[1]*r,n}function l(e,t,n,r){return o(e,i(t,n,r))}Object(r.f)(10),Object(r.f)(12),Object(r.f)(70),Object(r.f)(40);var u={scale:0,factor:0,minPixelSize:0,paddingPixels:0}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return d}));var s="function"===typeof Symbol&&Symbol.observable||"@@observable",c=function(){return Math.random().toString(36).substring(7).split("").join(".")},l={INIT:"@@redux/INIT"+c(),REPLACE:"@@redux/REPLACE"+c(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+c()}};function u(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function d(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(o(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(o(1));return n(d)(e,t)}if("function"!==typeof e)throw new Error(o(2));var i=e,a=t,c=[],f=c,p=!1;function h(){f===c&&(f=c.slice())}function b(){if(p)throw new Error(o(3));return a}function v(e){if("function"!==typeof e)throw new Error(o(4));if(p)throw new Error(o(5));var t=!0;return h(),f.push(e),function(){if(t){if(p)throw new Error(o(6));t=!1,h();var n=f.indexOf(e);f.splice(n,1),c=null}}}function y(e){if(!u(e))throw new Error(o(7));if("undefined"===typeof e.type)throw new Error(o(8));if(p)throw new Error(o(9));try{p=!0,a=i(a,e)}finally{p=!1}for(var t=c=f,n=0;n<t.length;n++){(0,t[n])()}return e}function m(e){if("function"!==typeof e)throw new Error(o(10));i=e,y({type:l.REPLACE})}function g(){var e,t=v;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(o(11));function n(){e.next&&e.next(b())}return n(),{unsubscribe:t(n)}}})[s]=function(){return this},e}return y({type:l.INIT}),(r={dispatch:y,subscribe:v,getState:b,replaceReducer:m})[s]=g,r}function f(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,s=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:l.INIT}))throw new Error(o(12));if("undefined"===typeof n(void 0,{type:l.PROBE_UNKNOWN_ACTION()}))throw new Error(o(13))}))}(n)}catch(c){a=c}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},c=0;c<s.length;c++){var l=s[c],u=n[l],d=e[l],f=u(d,t);if("undefined"===typeof f){t&&t.type;throw new Error(o(14))}i[l]=f,r=r||f!==d}return(r=r||s.length!==Object.keys(e).length)?i:e}}function p(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function h(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(o(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},s=t.map((function(e){return e(i)}));return r=p.apply(void 0,s)(n.dispatch),a(a({},n),{},{dispatch:r})}}}},function(e,t,n){"use strict";var r=n(14),i=n(10),a=n(2),o=n(3),s=(n(16),n(13)),c=n(105),l=n(442),u=s.a.getLogger("esri.views.webgl.FrameBufferObject"),d=function(){function e(t,n,o,s){var u,d;if(Object(a.a)(this,e),this._context=t,this._glName=null,this._depthAttachment=null,this._stencilAttachment=null,this._colorAttachments=new Map,this._initialized=!1,this._desc=Object(i.a)({},n),t.instanceCounter.increment(4,this),o)if(Array.isArray(o)){var f,p=Object(r.a)(o);try{for(p.s();!(f=p.n()).done;){var h=f.value,b=h.attachmentPoint,v=h.texture,y=v instanceof c.a?v:new c.a(t,v);u=y.descriptor,this._colorAttachments.set(b,y),this._validateColorAttachmentPoint(b),this._validateTextureDimensions(u,this._desc)}}catch(j){p.e(j)}finally{p.f()}}else o instanceof c.a?(u=o.descriptor,this._colorAttachments.set(36064,o)):(u=o,this._colorAttachments.set(36064,new c.a(t,o))),0!==(null==(d=this._desc)?void 0:d.colorTarget)&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!"),this._validateTextureDimensions(u,this._desc);if(s instanceof l.a){var m,g=null!=(m=this._desc.depthStencilTarget)?m:3;2===g?this._stencilAttachment=s:1===g||3===g?this._depthAttachment=s:console.error('If a Renderbuffer is provided, "depthStencilTarget" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER'),e._validateBufferDimensions(s.descriptor,this._desc)}else if(s){var O;this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),s instanceof c.a?(this._depthStencilTexture=s,O=this._depthStencilTexture.descriptor):(O=s,this._depthStencilTexture=new c.a(this._context,O)),this._validateTextureDimensions(O,this._desc)}}return Object(o.a)(e,[{key:"dispose",value:function(){if(this._desc){var e=this._context.getBoundFramebufferObject();this._disposeColorAttachments(),this._disposeDepthStencilAttachments(),this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null),this._context.bindFramebuffer(e),this._context.instanceCounter.decrement(4,this),this._desc=null}}},{key:"glName",get:function(){return this._glName}},{key:"descriptor",get:function(){return this._desc}},{key:"colorTexture",get:function(){var e=this._colorAttachments.get(36064);return e&&e instanceof c.a?e:null}},{key:"colorAttachment",get:function(){return this._colorAttachments.get(36064)}},{key:"depthStencilAttachment",get:function(){return this._depthStencilTexture||this._depthAttachment||this._stencilAttachment}},{key:"depthStencilTexture",get:function(){return this._depthStencilTexture}},{key:"width",get:function(){return this._desc.width}},{key:"height",get:function(){return this._desc.height}},{key:"getColorTexture",value:function(e){var t=this._colorAttachments.get(e);return t&&t instanceof c.a?t:null}},{key:"attachColorTexture",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:36064;if(e){this._validateColorAttachmentPoint(t);var n=e.descriptor;if(this._validateTextureDimensions(n,this._desc),this._disposeColorAttachments(),this._initialized){this._context.bindFramebuffer(this);var r=this._context.gl;r.framebufferTexture2D(r.FRAMEBUFFER,t,r.TEXTURE_2D,e.glName,0)}this._colorAttachments.set(t,e)}}},{key:"detachColorTexture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,t=this._colorAttachments.get(e);if(t instanceof c.a){var n=t;if(this._initialized){this._context.bindFramebuffer(this);var r=this._context.gl;r.framebufferTexture2D(r.FRAMEBUFFER,e,r.TEXTURE_2D,null,0)}return this._colorAttachments.delete(e),n}}},{key:"attachDepthStencilTexture",value:function(e){if(e){var t=e.descriptor;if(34041!==t.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!"),34042!==t.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!"),this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!"),this._validateTextureDimensions(t,this._desc),this._desc.depthStencilTarget&&4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4),this._disposeDepthStencilAttachments(),this._initialized){this._context.bindFramebuffer(this);var n=this._context.gl;n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,e.glName,0)}this._depthStencilTexture=e}}},{key:"detachDepthStencilTexture",value:function(){var e=this._depthStencilTexture;if(e&&this._initialized){this._context.bindFramebuffer(this);var t=this._context.gl;this._context.gl.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,null,0)}return this._depthStencilTexture=null,e}},{key:"attachDepthStencilBuffer",value:function(t){if(t){var n=t.descriptor;if(34041!==n.internalFormat&&33189!==n.internalFormat&&console.error("Depth/Stencil buffer must have correct internalFormat"),e._validateBufferDimensions(n,this._desc),this._disposeDepthStencilAttachments(),this._desc.depthStencilTarget=34041===n.internalFormat?3:1,this._initialized){this._context.bindFramebuffer(this);var r=this._context.gl,i=1===this._desc.depthStencilTarget?r.DEPTH_ATTACHMENT:r.DEPTH_STENCIL_ATTACHMENT;r.framebufferRenderbuffer(r.FRAMEBUFFER,i,r.RENDERBUFFER,t.glName)}this._depthAttachment=t}}},{key:"detachDepthStencilBuffer",value:function(){var e=this._context.gl,t=this._depthAttachment;if(t&&this._initialized){this._context.bindFramebuffer(this);var n=1===this._desc.depthStencilTarget?e.DEPTH_ATTACHMENT:e.DEPTH_STENCIL_ATTACHMENT;e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,null)}return this._depthAttachment=null,t}},{key:"copyToTexture",value:function(e,t,n,r,i,a,o){(e<0||t<0||i<0||a<0)&&console.error("Offsets cannot be negative!"),(n<=0||r<=0)&&console.error("Copy width and height must be greater than zero!");var s=this._desc,c=o.descriptor;3553!==o.descriptor.target&&console.error("Texture target must be TEXTURE_2D!"),(e+n>s.width||t+r>s.height||i+n>c.width||a+r>c.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");var l=this._context;l.bindTexture(o,0),l.bindFramebuffer(this),l.gl.copyTexSubImage2D(3553,0,i,a,e,t,n,r)}},{key:"readPixels",value:function(e,t,n,r,i,a,o){(n<=0||r<=0)&&console.error("Copy width and height must be greater than zero!"),o||console.error("Target memory is not initialized!"),this._context.bindFramebuffer(this),this._context.gl.readPixels(e,t,n,r,i,a,o)}},{key:"resize",value:function(e,t){var n=this._desc;if(n.width!==e||n.height!==t){if(!this._initialized)return n.width=e,n.height=t,this._colorAttachments.forEach((function(n){n&&n.resize(e,t)})),void(this._depthStencilTexture&&this._depthStencilTexture.resize(e,t));n.width=e,n.height=t,this._colorAttachments.forEach((function(n){n&&n.resize(e,t)})),null!=this._depthStencilTexture?this._depthStencilTexture.resize(e,t):(this._depthAttachment||this._stencilAttachment)&&(this._depthAttachment&&this._depthAttachment.resize(e,t),this._stencilAttachment&&this._stencilAttachment.resize(e,t)),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1}}},{key:"initializeAndBind",value:function(){var e,t,n,r,i=this._context.gl;if(this._initialized)i.bindFramebuffer(i.FRAMEBUFFER,this.glName);else{this._glName&&i.deleteFramebuffer(this._glName);var a=this._context,o=i.createFramebuffer(),s=this._desc,u=null!=(e=s.colorTarget)?e:1,d=null!=(t=s.width)?t:1,p=null!=(n=s.height)?n:1;if(i.bindFramebuffer(i.FRAMEBUFFER,o),0===this._colorAttachments.size)if(0===u)this._colorAttachments.set(36064,f(a,s));else{var h=new l.a(a,{internalFormat:32854,width:d,height:p});this._colorAttachments.set(36064,h)}this._colorAttachments.forEach((function(e,t){e&&(e instanceof c.a?i.framebufferTexture2D(i.FRAMEBUFFER,t,i.TEXTURE_2D,e.glName,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,e.glName))}));var b=null!=(r=s.depthStencilTarget)?r:0;switch(b){case 1:case 3:this._depthAttachment||(this._depthAttachment=new l.a(a,{internalFormat:1===s.depthStencilTarget?33189:34041,width:d,height:p}));var v=1===b?i.DEPTH_ATTACHMENT:i.DEPTH_STENCIL_ATTACHMENT;i.framebufferRenderbuffer(i.FRAMEBUFFER,v,i.RENDERBUFFER,this._depthAttachment.glName);break;case 2:this._stencilAttachment||(this._stencilAttachment=new l.a(a,{internalFormat:36168,width:d,height:p})),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.STENCIL_ATTACHMENT,i.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:if(!this._depthStencilTexture){a.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!");var y={target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:d,height:p};this._depthStencilTexture=new c.a(a,y)}i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,this._depthStencilTexture.glName,0)}this._glName=o,this._initialized=!0}}},{key:"_disposeColorAttachments",value:function(){var e=this;this._colorAttachments.forEach((function(t,n){if(t instanceof c.a){if(e._initialized){e._context.bindFramebuffer(e);var r=e._context.gl;r.framebufferTexture2D(r.FRAMEBUFFER,n,r.TEXTURE_2D,null,0)}t.dispose()}else if(t instanceof WebGLRenderbuffer){var i=e._context.gl;e._initialized&&(e._context.bindFramebuffer(e),i.framebufferRenderbuffer(i.FRAMEBUFFER,n,i.RENDERBUFFER,null)),e._context.gl.deleteRenderbuffer(t)}})),this._colorAttachments.clear()}},{key:"_disposeDepthStencilAttachments",value:function(){var e=this._context.gl;if(this._depthAttachment){if(this._initialized){this._context.bindFramebuffer(this);var t=1===this._desc.depthStencilTarget?e.DEPTH_ATTACHMENT:e.DEPTH_STENCIL_ATTACHMENT;e.framebufferRenderbuffer(e.FRAMEBUFFER,t,e.RENDERBUFFER,null)}this._depthAttachment.dispose(),this._depthAttachment=null}this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null),this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)}},{key:"_validateTextureDimensions",value:function(e,t){console.assert(e.width>=0&&e.height>=0),3553!==e.target&&console.error("Texture type must be TEXTURE_2D!"),void 0!==t.width&&t.width>=0&&void 0!==t.height&&t.height>=0?t.width===e.width&&t.height===e.height||console.error("Color attachment texture must match the framebuffer's!"):(t.width=e.width,t.height=e.height)}},{key:"_validateColorAttachmentPoint",value:function(t){if(-1===e._MAX_COLOR_ATTACHMENTS){var n=this._context.capabilities.drawBuffers;if(n){var r=this._context.gl;e._MAX_COLOR_ATTACHMENTS=r.getParameter(n.MAX_COLOR_ATTACHMENTS)}else e._MAX_COLOR_ATTACHMENTS=1}var i=t-36064;i+1>e._MAX_COLOR_ATTACHMENTS&&u.error("esri.FrameBufferObject","illegal attachment point for color attachment: ".concat(i+1,". Implementation supports up to ").concat(e._MAX_COLOR_ATTACHMENTS," color attachments"))}}],[{key:"_validateBufferDimensions",value:function(e,t){console.assert(e.width>=0&&e.height>=0),void 0!==t.width&&t.width>=0&&void 0!==t.height&&t.height>=0?t.width===e.width&&t.height===e.height||console.error("Renderbuffer dimensions must match the framebuffer's!"):(t.width=e.width,t.height=e.height)}}]),e}();d._MAX_COLOR_ATTACHMENTS=-1;var f=function(e,t){return new c.a(e,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:t.width,height:t.height})};t.a=d},function(e,t,n){"use strict";n.d(t,"a",(function(){return M})),n.d(t,"b",(function(){return R})),n.d(t,"c",(function(){return E}));var r=n(7),i=n.n(r),a=n(31),o=n(15),s=n(14),c=n(98),l=n(4),u=n(13),d=n(18),f=n(59),p=n(61),h=n(118),b=n(108),v=n(157),y=n(10),m=n(12),g=n(68),O=(n(71),n(62));function j(e,t,n,r){return w.apply(this,arguments)}function w(){return(w=Object(o.a)(i.a.mark((function e(t,n,r,a){var o,s,c,l,u,d,f,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="string"==typeof t?Object(m.J)(t):t,s=n[0].spatialReference,c=Object(y.a)(Object(y.a)({},a),{},{query:Object(y.a)(Object(y.a)({},o.query),{},{f:"json",sr:JSON.stringify(s),target:JSON.stringify({geometryType:Object(g.c)(n[0]),geometries:n}),cutter:JSON.stringify(r)})}),e.next=5,Object(O.default)(o.path+"/cut",c);case 5:return l=e.sent,u=l.data,d=u.cutIndexes,f=u.geometries,p=void 0===f?[]:f,e.abrupt("return",{cutIndexes:d,geometries:p.map((function(e){var t=Object(g.a)(e);return t.spatialReference=s,t}))});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t,n){return k.apply(this,arguments)}function k(){return(k=Object(o.a)(i.a.mark((function e(t,n,r){var a,o,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="string"==typeof t?Object(m.J)(t):t,o=n[0].spatialReference,s=Object(g.c)(n[0]),c=Object(y.a)(Object(y.a)({},r),{},{query:Object(y.a)(Object(y.a)({},a.query),{},{f:"json",sr:o.wkid?o.wkid:JSON.stringify(o),geometries:JSON.stringify(x(n))})}),e.t0=S,e.next=4,Object(O.default)(a.path+"/simplify",c);case 4:return e.t1=e.sent.data,e.t2=s,e.t3=o,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return{geometryType:Object(g.c)(e[0]),geometries:e.map((function(e){return e.toJSON()}))}}function S(e,t,n){var r=Object(g.b)(t);return e.map((function(e){var t=r.fromJSON(e);return t.spatialReference=n,t}))}var T=u.a.getLogger("esri.geometry.support.normalizeUtils");function E(e,t){if(!(e instanceof b.a||e instanceof h.a)){var n="straightLineDensify: the input geometry is neither polyline nor polygon";throw T.error(n),new d.a(n)}var r,i=Object(v.b)(e),a=[],o=Object(s.a)(i);try{for(o.s();!(r=o.n()).done;){var c=r.value,l=[];a.push(l),l.push([c[0][0],c[0][1]]);for(var u=0;u<c.length-1;u++){var f=c[u][0],p=c[u][1],y=c[u+1][0],m=c[u+1][1],g=Math.sqrt((y-f)*(y-f)+(m-p)*(m-p)),O=(m-p)/g,j=(y-f)/g,w=g/t;if(w>1){for(var _=1;_<=w-1;_++){var k=_*t,x=j*k+f,S=O*k+p;l.push([x,S])}var E=(g+Math.floor(w-1)*t)/2,C=j*E+f,P=O*E+p;l.push([C,P])}l.push([y,m])}}}catch(I){o.e(I)}finally{o.f()}return function(e){return"polygon"===e.type}(e)?new h.a({rings:a,spatialReference:e.spatialReference}):new b.a({paths:a,spatialReference:e.spatialReference})}function C(e,t,n){if(t){var r=E(e,1e6);e=Object(p.e)(r,!0)}return n&&(e=Object(v.e)(e,n)),e}function P(e,t,n){if(Array.isArray(e)){var r=e[0];if(r>t){var i=Object(v.d)(r,t);e[0]=r+i*(-2*t)}else if(r<n){var a=Object(v.d)(r,n);e[0]=r+a*(-2*n)}}else{var o=e.x;if(o>t){var s=Object(v.d)(o,t);e=e.clone().offset(s*(-2*t),0)}else if(o<n){var c=Object(v.d)(o,n);e=e.clone().offset(c*(-2*n),0)}}return e}function I(e,t){for(var n=-1,r=function(r){for(var i=t.cutIndexes[r],a=t.geometries[r],o=Object(v.b)(a),c=function(e){var t=o[e];t.some((function(n){if(n[0]<180)return!0;for(var r=0,i=0;i<t.length;i++){var o=t[i][0];r=o>r?o:r}r=Number(r.toFixed(9));for(var s=-360*Object(v.d)(r,180),c=0;c<t.length;c++){var l=a.getPoint(e,c);a.setPoint(e,c,l.clone().offset(s,0))}return!0}))},l=0;l<o.length;l++)c(l);if(i===n){if(function(e){return"polygon"===e[0].type}(e)){var u,d=Object(s.a)(Object(v.b)(a));try{for(d.s();!(u=d.n()).done;){var f=u.value;e[i]=e[i].addRing(f)}}catch(y){d.e(y)}finally{d.f()}}else if(function(e){return"polyline"===e[0].type}(e)){var p,h=Object(s.a)(Object(v.b)(a));try{for(h.s();!(p=h.n()).done;){var b=p.value;e[i]=e[i].addPath(b)}}catch(y){h.e(y)}finally{h.f()}}}else n=i,e[i]=a},i=0;i<t.cutIndexes.length;i++)r(i);return e}function M(e,t,n){return A.apply(this,arguments)}function A(){return(A=Object(o.a)(i.a.mark((function e(t,n,r){var a,o,u,d,y,m,g,O,w,k,x,S,T,E,A,R,L,F,D,N,V,z,U,B,G,q,H,W,$,J,Y,K,Z,X,Q,ee,te,ne,re,ie;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)){e.next=2;break}return e.abrupt("return",M([t],n));case 2:a=n?n.url:c.a.geometryServiceUrl,k=0,x=[],S=[],T=Object(s.a)(t);try{for(T.s();!(E=T.n()).done;)A=E.value,Object(l.j)(A)?S.push(A):(o||(o=A.spatialReference,u=Object(f.d)(o),d=o.isWebMercator,g=d?102100:4326,y=v.a[g].maxX,m=v.a[g].minX,O=v.a[g].plus180Line,w=v.a[g].minus180Line),u?"mesh"===A.type?S.push(A):"point"===A.type?S.push(P(A.clone(),y,m)):"multipoint"===A.type?((R=A.clone()).points=R.points.map((function(e){return P(e,y,m)})),S.push(R)):"extent"===A.type?(L=A.clone()._normalize(!1,!1,u),S.push(L.rings?new h.a(L):L)):A.extent?(F=A.extent,D=Object(v.d)(F.xmin,m)*(2*y),N=0===D?A.clone():Object(v.e)(A.clone(),D),F.offset(D,0),F.intersects(O)&&F.xmax!==y?(k=F.xmax>k?F.xmax:k,N=C(N,d),x.push(N),S.push("cut")):F.intersects(w)&&F.xmin!==m?(k=F.xmax*(2*y)>k?F.xmax*(2*y):k,N=C(N,d,360),x.push(N),S.push("cut")):S.push(N)):S.push(A.clone()):S.push(A))}catch(i){T.e(i)}finally{T.f()}for(V=Object(v.d)(k,y),z=-90,U=V,B=new b.a;V>0;)G=360*V-180,B.addPath([[G,z],[G,-1*z]]),z*=-1,V--;if(!(x.length>0&&U>0)){e.next=28;break}return e.t0=I,e.t1=x,e.next=15,j(a,x,B,r);case 15:for(e.t2=e.sent,q=(0,e.t0)(e.t1,e.t2),H=[],W=[],$=0;$<S.length;$++)"cut"!==(J=S[$])?W.push(J):(Y=q.shift(),K=t[$],Object(l.k)(K)&&"polygon"===K.type&&K.rings&&K.rings.length>1&&Y.rings.length>=K.rings.length?(H.push(Y),W.push("simplify")):W.push(d?Object(p.b)(Y):Y));if(H.length){e.next=22;break}return e.abrupt("return",W);case 22:return e.next=24,_(a,H,r);case 24:for(Z=e.sent,X=[],Q=0;Q<W.length;Q++)"simplify"!==(ee=W[Q])?X.push(ee):X.push(d?Object(p.b)(Z.shift()):Z.shift());return e.abrupt("return",X);case 28:for(te=[],ne=0;ne<S.length;ne++)"cut"!==(re=S[ne])?te.push(re):(ie=x.shift(),te.push(!0===d?Object(p.b)(ie):ie));return e.abrupt("return",Promise.resolve(te));case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t){var n=Object(f.d)(t);if(n){var r=Object(a.a)(n.valid,2),i=r[0],o=r[1],s=o-i;if(e<i)for(;e<i;)e+=s;if(e>o)for(;e>o;)e-=s}return e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r,i=n(29),a=n(34);function o(e){e.code.add(Object(a.a)(r||(r=Object(i.a)(["\n    vec4 premultiplyAlpha(vec4 v) {\n      return vec4(v.rgb * v.a, v.a);\n    }\n\n    // Note: the min in the last line has been added to fix an instability in chrome.\n    // See https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/23911\n    // With proper floating point handling, the value could never be >1.\n    vec3 rgb2hsv(vec3 c) {\n      vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n      vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n      vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n      float d = q.x - min(q.w, q.y);\n      float e = 1.0e-10;\n      return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);\n    }\n\n    vec3 hsv2rgb(vec3 c) {\n      vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n      vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n      return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n    }\n\n    float rgb2v(vec3 c) {\n      return max(c.x, max(c.y, c.z));\n    }\n  "]))))}},function(e,t,n){"use strict";var r,i=n(35),a=n(14),o=n(7),s=n.n(o),c=n(10),l=n(15),u=n(2),d=n(3),f=n(5),p=n(6),h=n(0),b=(n(16),n(22)),v=n(100),y=n(4),m=n(13),g=n(17),O=n(1),j=n(58),w=n(49),_=n(41),k=n(8),x=n(42),S=n(18),T=(n(12),n(19),n(20),n(128)),E=n(138),C=n(54),P=n(109),I=n(193),M=n(76),A=n(383),R=n(166),L=n(277),F=n(342),D=n(466),N=n(458),V=n(451),z=m.a.getLogger("esri.renderers.UniqueValueRenderer"),U=Object(g.m)(N.a),B=r=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e))._valueInfoMap={},r._isDefaultSymbolDerived=!1,r.type="unique-value",r.backgroundFillSymbol=null,r.field=null,r.field2=null,r.field3=null,r.valueExpression=null,r.valueExpressionTitle=null,r.legendOptions=null,r.defaultLabel=null,r.fieldDelimiter=null,r.portal=null,r.styleOrigin=null,r.diff={uniqueValueInfos:function(e,t){if(e||t){if(!e||!t)return{type:"complete",oldValue:e,newValue:t};for(var n=!1,r={type:"collection",added:[],removed:[],changed:[],unchanged:[]},i=function(i){var a=e.find((function(e){return e.value===t[i].value}));a?Object(D.a)(a,t[i])?(r.changed.push({type:"complete",oldValue:a,newValue:t[i]}),n=!0):r.unchanged.push({oldValue:a,newValue:t[i]}):(r.added.push(t[i]),n=!0)},a=0;a<t.length;a++)i(a);for(var o=function(i){t.find((function(t){return t.value===e[i].value}))||(r.removed.push(e[i]),n=!0)},s=0;s<e.length;s++)o(s);return n?r:void 0}}},r._set("uniqueValueInfos",[]),r}return Object(d.a)(n,[{key:"_cache",get:function(){return{compiledFunc:null}}},{key:"castField",value:function(e){return null==e||"function"==typeof e?e:Object(g.l)(e)}},{key:"writeField",value:function(e,t,n,r){"string"==typeof e?t[n]=e:r&&r.messages?r.messages.push(new S.a("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):z.error(".field: cannot write field to JSON since it's not a string value")}},{key:"defaultSymbol",set:function(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}},{key:"readPortal",value:function(e,t,n){return n.portal||P.a.getDefault()}},{key:"readStyleOrigin",value:function(e,t,n){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){var r=Object(T.a)(t.styleUrl,n);return Object.freeze({styleUrl:r})}}},{key:"writeStyleOrigin",value:function(e,t,n,r){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=Object(T.e)(e.styleUrl,r))}},{key:"uniqueValueInfos",set:function(e){this.styleOrigin?z.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap())}},{key:"addUniqueValueInfo",value:function(e,t){var n;this.styleOrigin?z.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(n="object"==typeof e?U(e):new N.a({value:e,symbol:Object(M.a)(t)}),this.uniqueValueInfos.push(n),this._valueInfoMap[n.value]=n)}},{key:"removeUniqueValueInfo",value:function(e){if(this.styleOrigin)z.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(var t=0;t<this.uniqueValueInfos.length;t++)if(this.uniqueValueInfos[t].value===e+""){delete this._valueInfoMap[e],this.uniqueValueInfos.splice(t,1);break}}},{key:"getUniqueValueInfo",value:function(){var e=Object(l.a)(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n,e.t0=this.valueExpression&&(Object(y.j)(n)||Object(y.j)(n.arcade)),!e.t0){e.next=11;break}return e.t1=c.a,e.t2=Object(c.a)({},r),e.t3={},e.next=8,Object(E.e)();case 8:e.t4=e.sent,e.t5={arcade:e.t4},r=(0,e.t1)(e.t2,e.t3,e.t5);case 11:return e.abrupt("return",this._getUniqueValueInfo(t,r));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(e,t){if(!this.valueExpression||!Object(y.j)(t)&&!Object(y.j)(t.arcade)){var n=this._getUniqueValueInfo(e,t);return n&&n.symbol||this.defaultSymbol}z.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used")}},{key:"getSymbolAsync",value:function(){var e=Object(l.a)(s.a.mark((function e(t,n){var r,i,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n,!this.valueExpression||!Object(y.j)(r)&&!Object(y.j)(r.arcade)){e.next=11;break}return e.next=4,Object(E.e)();case 4:if(i=e.sent,a=i.arcadeUtils,e.t0=a.hasGeometryOperations(this.valueExpression),!e.t0){e.next=10;break}return e.next=10,a.enableGeometryOperations();case 10:r=Object(c.a)(Object(c.a)({},r),{},{arcade:i});case 11:return o=this._getUniqueValueInfo(t,r),e.abrupt("return",o&&o.symbol||this.defaultSymbol);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){var e,t=[],n=Object(a.a)(this.uniqueValueInfos);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.symbol&&t.push(r.symbol)}}catch(i){n.e(i)}finally{n.f()}return this.defaultSymbol&&t.push(this.defaultSymbol),t}},{key:"getAttributeHash",value:function(){return this.visualVariables&&this.visualVariables.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){return"".concat(JSON.stringify(this.backgroundFillSymbol),".").concat(JSON.stringify(this.defaultSymbol),".").concat(this.uniqueValueInfos.reduce((function(e,t){return e+t.getMeshHash()}),""),".","".concat(this.field,".").concat(this.field2,".").concat(this.field3,".").concat(this.fieldDelimiter),".").concat(this.valueExpression)}},{key:"clone",value:function(){var e=new r({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:Object(b.a)(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:Object(b.a)(this.visualVariables),legendOptions:Object(b.a)(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:Object(b.a)(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);var t=Object(b.a)(this.uniqueValueInfos);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(Object(b.a)(this.styleOrigin))),Object.freeze(t)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e}},{key:"arcadeRequired",get:function(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}},{key:"collectRequiredFields",value:function(){var e=Object(l.a)(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[this.collectVVRequiredFields(t,n),this.collectSymbolFields(t,n)],e.next=3,Promise.all(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"collectSymbolFields",value:function(){var e=Object(l.a)(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[].concat(Object(i.a)(this.getSymbols().map((function(e){return e.collectRequiredFields(t,n)}))),[Object(C.c)(t,n,this.valueExpression)]),Object(C.f)(t,n,this.field),Object(C.f)(t,n,this.field2),Object(C.f)(t,n,this.field3),e.next=6,Promise.all(r);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"populateFromStyle",value:function(){var e=this;return Object(V.fetchStyle)(this.styleOrigin,{portal:this.portal}).then((function(t){var n=[];return e._valueInfoMap={},t&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach((function(r){var i=new I.a({styleUrl:t.styleUrl,styleName:t.styleName,portal:e.portal,name:r.name});e.defaultSymbol||r.name!==t.data.defaultItem||(e.defaultSymbol=i,e._isDefaultSymbolDerived=!0);var a=new N.a({value:r.name,symbol:i});n.push(a),e._valueInfoMap[r.name]=a})),e._set("uniqueValueInfos",Object.freeze(n)),!e.defaultSymbol&&e.uniqueValueInfos.length&&(e.defaultSymbol=e.uniqueValueInfos[0].symbol,e._isDefaultSymbolDerived=!0),e}))}},{key:"_updateValueInfoMap",value:function(){var e=this;this._valueInfoMap={},this.uniqueValueInfos.forEach((function(t){return e._valueInfoMap[t.value+""]=t}))}},{key:"_getUniqueValueInfo",value:function(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}},{key:"_getUnqiueValueInfoForExpression",value:function(e,t){var n=Object(y.r)(t,{}),r=n.viewingMode,i=n.scale,a=n.spatialReference,o=n.arcade,s=this._cache.compiledFunc,c=Object(y.q)(o).arcadeUtils;if(!s){var l=c.createSyntaxTree(this.valueExpression);s=c.createFunction(l),this._cache.compiledFunc=s}var u=c.executeFunction(s,c.createExecContext(e,c.getViewInfo({viewingMode:r,scale:i,spatialReference:a})));return this._valueInfoMap[u+""]}},{key:"_getUnqiueValueInfoForFields",value:function(e){var t,n=this.field,r=e.attributes;if("function"!=typeof n&&this.field2){var i=this.field2,a=this.field3,o=[];n&&o.push(r[n]),i&&o.push(r[i]),a&&o.push(r[a]),t=o.join(this.fieldDelimiter||"")}else"function"==typeof n?t=n(e):n&&(t=r[n]);return this._valueInfoMap[t+""]}}],[{key:"fromPortalStyle",value:function(e,t){var n=new r(t&&t.properties);n._set("styleOrigin",Object.freeze({styleName:e})),n._set("portal",t&&t.portal||P.a.getDefault());var i=n.populateFromStyle();return i.catch((function(t){z.error("#fromPortalStyle('".concat(e,"'[, ...])"),"Failed to create unique value renderer from style name",t)})),i}},{key:"fromStyleUrl",value:function(e,t){var n=new r(t&&t.properties);n._set("styleOrigin",Object.freeze({styleUrl:e}));var i=n.populateFromStyle();return i.catch((function(t){z.error("#fromStyleUrl('".concat(e,"'[, ...])"),"Failed to create unique value renderer from style URL",t)})),i}}]),n}(Object(L.a)(R.a));Object(h.a)([Object(O.b)({readOnly:!0})],B.prototype,"_cache",null),Object(h.a)([Object(w.a)({uniqueValue:"unique-value"})],B.prototype,"type",void 0),Object(h.a)([Object(O.b)(F.a)],B.prototype,"backgroundFillSymbol",void 0),Object(h.a)([Object(O.b)({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],B.prototype,"field",void 0),Object(h.a)([Object(j.a)("field")],B.prototype,"castField",null),Object(h.a)([Object(x.a)("field")],B.prototype,"writeField",null),Object(h.a)([Object(O.b)({type:String,json:{write:!0}})],B.prototype,"field2",void 0),Object(h.a)([Object(O.b)({type:String,json:{write:!0}})],B.prototype,"field3",void 0),Object(h.a)([Object(O.b)({type:String,json:{write:!0}})],B.prototype,"valueExpression",void 0),Object(h.a)([Object(O.b)({type:String,json:{write:!0}})],B.prototype,"valueExpressionTitle",void 0),Object(h.a)([Object(O.b)({type:A.a,json:{write:!0}})],B.prototype,"legendOptions",void 0),Object(h.a)([Object(O.b)({type:String,json:{write:!0}})],B.prototype,"defaultLabel",void 0),Object(h.a)([Object(O.b)(Object(v.a)(Object(c.a)({},F.b),{json:{write:{overridePolicy:function(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy:function(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],B.prototype,"defaultSymbol",null),Object(h.a)([Object(O.b)({type:String,json:{write:!0}})],B.prototype,"fieldDelimiter",void 0),Object(h.a)([Object(O.b)({type:P.a,readOnly:!0})],B.prototype,"portal",void 0),Object(h.a)([Object(_.a)("portal",["styleName"])],B.prototype,"readPortal",null),Object(h.a)([Object(O.b)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:function(){return{enabled:!0}}}}})],B.prototype,"styleOrigin",void 0),Object(h.a)([Object(_.a)("styleOrigin",["styleName","styleUrl"])],B.prototype,"readStyleOrigin",null),Object(h.a)([Object(x.a)("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],B.prototype,"writeStyleOrigin",null),Object(h.a)([Object(O.b)({type:[N.a],json:{write:{overridePolicy:function(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],B.prototype,"uniqueValueInfos",null);var G=B=r=Object(h.a)([Object(k.a)("esri.renderers.UniqueValueRenderer")],B);t.a=G},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r,i,a,o,s,c,l,u=n(29),d=n(34);function f(e,t){t.vvInstancingEnabled&&(t.vvSize||t.vvColor)&&e.attributes.add("instanceFeatureAttribute","vec4"),t.vvSize?(e.vertex.uniforms.add("vvSizeMinSize","vec3"),e.vertex.uniforms.add("vvSizeMaxSize","vec3"),e.vertex.uniforms.add("vvSizeOffset","vec3"),e.vertex.uniforms.add("vvSizeFactor","vec3"),e.vertex.uniforms.add("vvSymbolRotationMatrix","mat3"),e.vertex.uniforms.add("vvSymbolAnchor","vec3"),e.vertex.code.add(Object(d.a)(r||(r=Object(u.a)(["\n      vec3 vvScale(vec4 _featureAttribute) {\n        return clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);\n      }\n\n      vec4 vvTransformPosition(vec3 position, vec4 _featureAttribute) {\n        return vec4(vvSymbolRotationMatrix * ( vvScale(_featureAttribute) * (position + vvSymbolAnchor)), 1.0);\n      }\n    "])))),e.vertex.code.add(Object(d.a)(i||(i=Object(u.a)(["\n      const float eps = 1.192092896e-07;\n      vec4 vvTransformNormal(vec3 _normal, vec4 _featureAttribute) {\n        vec3 vvScale = clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize + eps, vvSizeMaxSize);\n        return vec4(vvSymbolRotationMatrix * _normal / vvScale, 1.0);\n      }\n\n      ","\n    "])),t.vvInstancingEnabled?Object(d.a)(a||(a=Object(u.a)(["\n      vec4 vvLocalNormal(vec3 _normal) {\n        return vvTransformNormal(_normal, instanceFeatureAttribute);\n      }\n\n      vec4 localPosition() {\n        return vvTransformPosition(position, instanceFeatureAttribute);\n      }"]))):""))):e.vertex.code.add(Object(d.a)(o||(o=Object(u.a)(["\n      vec4 localPosition() { return vec4(position, 1.0); }\n\n      vec4 vvLocalNormal(vec3 _normal) { return vec4(_normal, 1.0); }\n    "])))),t.vvColor?(e.vertex.constants.add("vvColorNumber","int",8),e.vertex.code.add(Object(d.a)(s||(s=Object(u.a)(["\n      uniform float vvColorValues[vvColorNumber];\n      uniform vec4 vvColorColors[vvColorNumber];\n\n      vec4 vvGetColor(vec4 featureAttribute, float values[vvColorNumber], vec4 colors[vvColorNumber]) {\n        float value = featureAttribute.y;\n        if (value <= values[0]) {\n          return colors[0];\n        }\n\n        for (int i = 1; i < vvColorNumber; ++i) {\n          if (values[i] >= value) {\n            float f = (value - values[i-1]) / (values[i] - values[i-1]);\n            return mix(colors[i-1], colors[i], f);\n          }\n        }\n        return colors[vvColorNumber - 1];\n      }\n\n      ","\n    "])),t.vvInstancingEnabled?Object(d.a)(c||(c=Object(u.a)(["\n      vec4 vvColor() {\n        return vvGetColor(instanceFeatureAttribute, vvColorValues, vvColorColors);\n      }"]))):""))):e.vertex.code.add(Object(d.a)(l||(l=Object(u.a)(["\n      vec4 vvColor() { return vec4(1.0); }\n    "]))))}!function(e){function t(e,t){t.vvSizeEnabled&&(e.setUniform3fv("vvSizeMinSize",t.vvSizeMinSize),e.setUniform3fv("vvSizeMaxSize",t.vvSizeMaxSize),e.setUniform3fv("vvSizeOffset",t.vvSizeOffset),e.setUniform3fv("vvSizeFactor",t.vvSizeFactor)),t.vvColorEnabled&&(e.setUniform1fv("vvColorValues",t.vvColorValues),e.setUniform4fv("vvColorColors",t.vvColorColors))}e.bindUniforms=t,e.bindUniformsWithOpacity=function(e,n){t(e,n),n.vvOpacityEnabled&&(e.setUniform1fv("vvOpacityValues",n.vvOpacityValues),e.setUniform1fv("vvOpacityOpacities",n.vvOpacityOpacities))},e.bindUniformsForSymbols=function(e,n){t(e,n),n.vvSizeEnabled&&(e.setUniform3fv("vvSymbolAnchor",n.vvSymbolAnchor),e.setUniformMatrix3fv("vvSymbolRotationMatrix",n.vvSymbolRotationMatrix))}}(f||(f={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return Oe})),n.d(t,"b",(function(){return ke})),n.d(t,"c",(function(){return je}));var r,i,a=n(10),o=n(7),s=n.n(o),c=n(15),l=n(16),u=n(18),d=n(24),f=n(14),p=n(2),h=n(3),b=n(304),v=n(4),y=n(111),m=n(115),g=n(282),O={geometryEngineWorker:function(){return Promise.all([n.e(5),n.e(93)]).then(n.bind(null,1343))},CSVSourceWorker:function(){return Promise.all([n.e(6),n.e(7),n.e(62)]).then(n.bind(null,1461))},EdgeProcessingWorker:function(){return n.e(120).then(n.bind(null,1445))},ElevationSamplerWorker:function(){return n.e(94).then(n.bind(null,1344))},GeoJSONSourceWorker:function(){return Promise.all([n.e(6),n.e(7),n.e(29),n.e(128)]).then(n.bind(null,1345))},LercWorker:function(){return n.e(118).then(n.bind(null,1346))},MemorySourceWorker:function(){return Promise.all([n.e(6),n.e(7),n.e(29),n.e(126)]).then(n.bind(null,1347))},PBFDecoderWorker:function(){return n.e(220).then(n.bind(null,1462))},Pipeline:function(){return Promise.all([n.e(6),n.e(7),n.e(31),n.e(51)]).then(n.bind(null,1437))},PointCloudWorker:function(){return n.e(64).then(n.bind(null,1448))},RasterWorker:function(){return Promise.all([n.e(10),n.e(14),n.e(201)]).then(n.bind(null,1348))},SceneLayerWorker:function(){return n.e(219).then(n.bind(null,1463))},WorkerTileHandler:function(){return Promise.all([n.e(30),n.e(61)]).then(n.bind(null,1440))},FeatureServiceSnappingSourceWorker:function(){return Promise.all([n.e(6),n.e(7),n.e(69)]).then(n.bind(null,1446))}};(i=r||(r={}))[i.HANDSHAKE=0]="HANDSHAKE",i[i.OPEN=1]="OPEN",i[i.OPENED=2]="OPENED",i[i.RESPONSE=3]="RESPONSE",i[i.INVOKE=4]="INVOKE",i[i.ABORT=5]="ABORT",i[i.CLOSE=6]="CLOSE",i[i.OPEN_PORT=7]="OPEN_PORT",i[i.ON=8]="ON";var j=0;function w(){return j++}function _(e){return e?"string"==typeof e?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function k(e,t,n,i){var a;t.type!==r.OPEN_PORT?t.type===r.INVOKE||t.type===r.RESPONSE?(!function(e){return e&&"object"==typeof e&&("result"in e||"transferList"in e)}(n)?(a=S(i),t.data=n):(a=S(n.transferList),t.data=n.result),a?e.postMessage(t,a):e.postMessage(t)):e.postMessage(t):e.postMessage(t,[t.port])}function x(e){if(!e)return null;var t=e.data;return t?"string"==typeof t?JSON.parse(t):t:null}function S(e){if(!e||!e.length)return null;if(Object(l.a)("esri-workers-arraybuffer-transfer"))return e;var t=e.filter((function(e){return!function(e){return e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name}(e)}));return t.length?t:null}var T=r.CLOSE,E=r.ABORT,C=r.INVOKE,P=r.RESPONSE,I=r.OPEN_PORT,M=r.ON,A=function(){function e(t){Object(p.a)(this,e),this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=t,this._timer=null,this._process=this._process.bind(this)}return Object(h.a)(e,[{key:"push",value:function(e){e.type===r.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),null===this._timer&&(this._timer=setTimeout(this._process,0)))}},{key:"clear",value:function(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}},{key:"_process",value:function(){this._timer=null;var e,t=Object(f.a)(this._invokeMessages);try{for(t.s();!(e=t.n()).done;){var n=e.value;this._cancelledJobIds.has(n.jobId)||this._invoke(n)}}catch(r){t.e(r)}finally{t.f()}this._cancelledJobIds.clear(),this._invokeMessages.length=0}}]),e}(),R=function(){function e(t,n){var r=this;Object(p.a)(this,e),this._port=t,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new A((function(e){return r._onInvokeMessage(e)})),this._messageQueue=new Array,this._client=n.client,this._onMessage=this._onMessage.bind(this),this._channel=n.channel,Object(v.k)(n.scheduler)&&(this._frameTask=n.scheduler.registerTask(g.b.REMOTE_CLIENT,(function(e){return r._update(e)}),(function(){return r._messageQueue.length>0}))),this._port.addEventListener("message",this._onMessage),this._port.start()}return Object(h.a)(e,[{key:"close",value:function(){this._post({type:T}),this._close()}},{key:"isBusy",value:function(){return this._outJobs.size>0}},{key:"invoke",value:function(e,t,n){var r=this,i=n&&n.signal,a=n&&n.transferList;if(!this._port)return Promise.reject(new u.a("worker:port-closed","Cannot call invoke('".concat(e,"'), port is closed"),{methodName:e,data:t}));var o=w();return new Promise((function(n,s){var c=Object(d.q)(i,(function(){var e,t=r._outJobs.get(o);t&&(r._outJobs.delete(o),null==(e=t.abortHandle)||e.remove(),r._post({type:E,jobId:o}),s(Object(d.e)()))})),l={resolve:n,reject:s,abortHandle:c,debugInfo:e};r._outJobs.set(o,l),r._post({type:C,jobId:o,methodName:e,abortable:null!=i},t,a)}))}},{key:"on",value:function(e,t){var n=new MessageChannel;function i(e){t(e.data)}return this._port.postMessage({type:r.ON,eventType:e,port:n.port2},[n.port2]),n.port1.addEventListener("message",i),n.port1.start(),{remove:function(){n.port1.postMessage({type:r.CLOSE}),n.port1.close(),n.port1.removeEventListener("message",i)}}}},{key:"openPort",value:function(){var e=new MessageChannel;return this._post({type:I,port:e.port2}),e.port1}},{key:"_close",value:function(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach((function(e){var t;null==(t=e.abortHandle)||t.remove(),e.reject(Object(d.e)("Worker closing, aborting job calling '".concat(e.debugInfo,"'")))})),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=null,this._frameTask=Object(v.p)(this._frameTask)}},{key:"_onMessage",value:function(e){Object(v.k)(this._frameTask)?this._messageQueue.push(e):this._processMessage(e)}},{key:"_processMessage",value:function(e){var t=x(e);if(t)switch(t.type){case P:this._onResponseMessage(t);break;case C:this._invokeQueue.push(t);break;case E:this._onAbortMessage(t);break;case T:this._onCloseMessage();break;case I:this._onOpenPortMessage(t);break;case M:this._onOnMessage(t)}}},{key:"_onAbortMessage",value:function(e){var t=this._inJobs,n=e.jobId,r=t.get(n);this._invokeQueue.push(e),r&&(r.controller&&r.controller.abort(),t.delete(n))}},{key:"_onCloseMessage",value:function(){var t=this._client;this._close(),t&&"destroy"in t&&e.clients.get(this)===t&&t.destroy(),e.clients.delete(this),t&&t.remoteClient&&(t.remoteClient=null)}},{key:"_onInvokeMessage",value:function(e){var t,n=this,r=e.methodName,i=e.jobId,a=e.data,o=e.abortable?Object(d.d)():null,s=this._inJobs,c=this._client,l=c[r];try{if(!l&&r&&-1!==r.indexOf("."))for(var u=r.split("."),f=0;f<u.length-1;f++)l=(c=c[u[f]])[u[f+1]];if("function"!=typeof l)throw new TypeError("".concat(r," is not a function"));t=l.call(c,a,{client:this,signal:o?o.signal:null})}catch(p){return void this._post({type:P,jobId:i,error:_(p)})}Object(d.o)(t)?(s.set(i,{controller:o,promise:t}),t.then((function(e){s.has(i)&&(s.delete(i),n._post({type:P,jobId:i},e))}),(function(e){s.has(i)&&(s.delete(i),Object(d.m)(e)||n._post({type:P,jobId:i,error:_(e||{message:"Error encountered at method ".concat(r)})}))}))):this._post({type:P,jobId:i},t)}},{key:"_onOpenPortMessage",value:function(t){new e(t.port,{client:this._client})}},{key:"_onOnMessage",value:function(e){var t=e.port,n=this._client.on(e.eventType,(function(e){t.postMessage(e)})),i=Object(y.c)(e.port,"message",(function(e){x(e).type===r.CLOSE&&(i.remove(),n.remove(),t.close())}))}},{key:"_onResponseMessage",value:function(e){var t,n=e.jobId,r=e.error,i=e.data,a=this._outJobs;if(a.has(n)){var o=a.get(n);a.delete(n),null==(t=o.abortHandle)||t.remove(),r?o.reject(u.a.fromJSON(JSON.parse(r))):o.resolve(i)}}},{key:"_update",value:function(e){for(;!e.done&&this._messageQueue.length>0;)this._processMessage(this._messageQueue.shift()),e.madeProgress()}},{key:"_post",value:function(e,t,n){return k(this._port,e,t,n)}}],[{key:"connect",value:function(t){var n,r=new MessageChannel;n="function"==typeof t?new t:"default"in t&&"function"==typeof t.default?new t.default:t;var i=new e(r.port1,{channel:r,client:n});return"object"==typeof n&&"remoteClient"in n&&(n.remoteClient=i),e.clients.set(i,n),r.port2}},{key:"loadWorker",value:function(e){var t=O[e];return t?t():Promise.resolve(null)}}]),e}();R.kernelInfo={revision:b.b,version:m.d,buildDate:b.a},R.clients=new Map;var L=R,F=n(13),D=n(136),N=F.a.getLogger("esri.core.workers.Connection"),V=function(){function e(){Object(p.a)(this,e),this._clients=new Array,this._clientPromises=new Array,this._clientIdx=0}return Object(h.a)(e,[{key:"destroy",value:function(){this.close()}},{key:"closed",get:function(){return!this._clients||!this._clients.length}},{key:"open",value:function(e,t){var n=this;return new Promise((function(r,i){var a=!0,o=function(e){Object(d.u)(t.signal),a&&(a=!1,e())};n._clients.length=e.length,n._clientPromises.length=e.length;for(var s=function(a){var s=e[a];Object(d.o)(s)?n._clientPromises[a]=s.then((function(e){return n._clients[a]=new L(e,t),o(r),n._clients[a]}),(function(){return o(i),null})):(n._clients[a]=new L(s,t),n._clientPromises[a]=Promise.resolve(n._clients[a]),o(r))},c=0;c<e.length;++c)s(c)}))}},{key:"broadcast",value:function(e,t,n){for(var r=new Array(this._clientPromises.length),i=0;i<this._clientPromises.length;++i){var a=this._clientPromises[i];r[i]=a.then((function(r){return r.invoke(e,t,n)}))}return r}},{key:"close",value:function(){var e,t=Object(f.a)(this._clientPromises);try{for(t.s();!(e=t.n()).done;){e.value.then((function(e){return e.close()}))}}catch(n){t.e(n)}finally{t.f()}this._clients.length=0,this._clientPromises.length=0}},{key:"getAvailableClient",value:function(){for(var e,t=0;t<this._clients.length;++t){var n=this._clients[t];if(n){if(!n.isBusy())return Promise.resolve(n)}else(e=e||[]).push(this._clientPromises[t])}return e?Promise.race(e):(this._clientIdx=(this._clientIdx+1)%this._clients.length,Promise.resolve(this._clients[this._clientIdx]))}},{key:"invoke",value:function(e,t,n){var r=null;return Array.isArray(n)?(N.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),r={transferList:n}):r=n,this.closed?Promise.reject(new Error("Connection closed")):this.getAvailableClient().then((function(n){return n.invoke(e,t,r)}))}},{key:"on",value:function(e,t){var n=this;return Promise.all(this._clientPromises).then((function(){return Object(D.b)(n._clients.map((function(n){return n.on(e,t)})))}))}},{key:"openPorts",value:function(){var e=this;return new Promise((function(t){for(var n=new Array(e._clientPromises.length),r=n.length,i=function(i){e._clientPromises[i].then((function(e){n[i]=e.openPort(),0==--r&&t(n)}))},a=0;a<e._clientPromises.length;++a)i(a)}))}},{key:"test",get:function(){return{numClients:this._clients.length}}}]),e}(),z=n(98),U=n(12),B=n(95),G=n(84),q=(n(143),{});var H=function(e){var t,n={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:Object(a.a)({},e.has),map:Object(a.a)({},e.map),packages:e.packages&&e.packages.concat()||[],paths:Object(a.a)({},e.paths)};return e.hasOwnProperty("async")||(n.async=!0),e.hasOwnProperty("isDebug")||(n.isDebug=!1),e.baseUrl||(n.baseUrl=q.baseUrl),null==(t=q.packages)||t.forEach((function(e){!function(e,t){var n,r=Object(f.a)(e);try{for(r.s();!(n=r.n()).done;)if(n.value.name===t.name)return}catch(i){r.e(i)}finally{r.f()}e.push(t)}(n.packages,e)})),n},W=n(65),$=function e(){var t=this;Object(p.a)(this,e);var n=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach((function(e){t[e]=function(){return n[e].apply(n,arguments)}}))},J=W.a.MutationObserver||W.a.WebKitMutationObserver,Y=function(){var e;if(W.a.process&&W.a.process.nextTick)e=function(e){W.a.process.nextTick(e)};else if(W.a.Promise)e=function(e){W.a.Promise.resolve().then(e)};else if(J){var t=[],n=document.createElement("div");new J((function(){for(;t.length>0;)t.shift()()})).observe(n,{attributes:!0}),e=function(e){t.push(e),n.setAttribute("queueStatus","1")}}return e}(),K=function(){var e=W.a.MessageEvent;try{new e("message",{data:null})}catch(t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.data,r=t.bubbles,i=void 0!==r&&r,a=t.cancelable,o=void 0!==a&&a,s=document.createEvent("Event");return s.initEvent(e,i,o),s.data=n,s}}return function(t,n){return new e(t,n)}}(),Z=function(){function e(){Object(p.a)(this,e),this._dispatcher=new $,this._workerPostMessage({type:r.HANDSHAKE})}return Object(h.a)(e,[{key:"terminate",value:function(){}},{key:"onmessage",get:function(){return this._onmessageHandler},set:function(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}},{key:"onmessageerror",get:function(){return this._onmessageerrorHandler},set:function(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}},{key:"onerror",get:function(){return this._onerrorHandler},set:function(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}},{key:"postMessage",value:function(e){var t=this;Y((function(){t._workerMessageHandler(K("message",{data:e}))}))}},{key:"dispatchEvent",value:function(e){return this._dispatcher.dispatchEvent(e)}},{key:"addEventListener",value:function(e,t,n){this._dispatcher.addEventListener(e,t,n)}},{key:"removeEventListener",value:function(e,t,n){this._dispatcher.removeEventListener(e,t,n)}},{key:"_workerPostMessage",value:function(e){var t=this;Y((function(){t.dispatchEvent(K("message",{data:e}))}))}},{key:"_workerMessageHandler",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var n,i,a,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=x(t))||n.type!==r.OPEN){e.next=13;break}return i=n.modulePath,a=n.jobId,e.next=5,L.loadWorker(i);case 5:if(o=e.sent,e.t0=o,e.t0){e.next=11;break}return e.next=10,import(i);case 10:o=e.sent;case 11:c=L.connect(o),this._workerPostMessage({type:r.OPENED,jobId:a,data:c});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),X=F.a.getLogger("esri.core.workers");l.a.add("esri-workers-arraybuffer-transfer",!Object(l.a)("safari")||Object(l.a)("safari")>=12);var Q,ee,te=r.HANDSHAKE,ne='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,buildDate:r,version:t}=configuration.kernelInfo,{revision:n,buildDate:i,version:s}=e.kernelInfo;o!==n&&console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let e;function t(o){const t=e.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}"function"==typeof define&&define.amd?require([workerPath],(r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((r=>(e=r.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):(self.RemoteClient||importScripts(workerPath),e=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e=outgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});',re="Failed to create Worker. Fallback to execute module in main thread";function ie(){return ae.apply(this,arguments)}function ae(){return(ae=Object(c.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(l.a)("esri-workers")){e.next=2;break}return e.abrupt("return",oe(new Z));case 2:if(!Q&&!ee)try{t=ne.replace('"{CONFIGURATION}"',"'".concat(ce(),"'")),Q=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(r){ee=r||{}}if(Q)try{n=new Worker(Q,{name:"esri-worker-"+le++})}catch(r){X.warn(re,ee),n=new Z}else X.warn(re,ee),n=new Z;return e.abrupt("return",oe(n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e){return se.apply(this,arguments)}function se(){return(se=Object(c.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){function n(i){var a=x(i);a&&a.type===te&&(t.removeEventListener("message",n),t.removeEventListener("error",r),e(t))}function r(e){e.preventDefault(),t.removeEventListener("message",n),t.removeEventListener("error",r),X.warn("Failed to create Worker. Fallback to execute module in main thread",e),(t=new Z).addEventListener("message",n),t.addEventListener("error",r)}t.addEventListener("message",n),t.addEventListener("error",r)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(){var e;if(null!=z.a.default){var t=Object(a.a)({},z.a);delete t.default,e=JSON.parse(JSON.stringify(t))}else e=JSON.parse(JSON.stringify(z.a));e.assetsPath=Object(U.z)(e.assetsPath),e.request.interceptors=[],e.log.interceptors=[],e.locale=Object(B.b)(),e.has={"csp-restrictions":Object(l.a)("csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":Object(l.a)("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":Object(l.a)("esri-2d-query-centroid-enabled"),"featurelayer-pbf":Object(l.a)("featurelayer-pbf"),"featurelayer-snapshot-point-threshold":Object(l.a)("featurelayer-snapshot-point-threshold"),"esri-atomics":Object(l.a)("esri-atomics"),"esri-shared-array-buffer":Object(l.a)("esri-shared-array-buffer"),"esri-tiles-debug":Object(l.a)("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":Object(l.a)("esri-workers-arraybuffer-transfer"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=Object(U.z)(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=Object(U.z)(e.workers.workerPath):e.workers.workerPath=Object(U.z)(Object(G.a)("esri/core/workers/RemoteClient.js"));var n=z.a.workers.loaderConfig,r=H({baseUrl:null==n?void 0:n.baseUrl,locale:Object(B.b)(),has:Object(a.a)({"csp-restrictions":Object(l.a)("csp-restrictions"),"dojo-test-sniff":0,"host-webworker":1},null==n?void 0:n.has),map:Object(a.a)({},null==n?void 0:n.map),paths:Object(a.a)({},null==n?void 0:n.paths),packages:(null==n?void 0:n.packages)||[]}),i={version:m.d,buildDate:b.a,revision:b.b};return JSON.stringify({esriConfig:e,loaderConfig:r,kernelInfo:i})}var le=0,ue=F.a.getLogger("esri.core.workers"),de=r.ABORT,fe=r.INVOKE,pe=r.OPEN,he=r.OPENED,be=r.RESPONSE,ve=function(){function e(t,n){Object(p.a)(this,e),this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=n,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",(function(e){e.preventDefault(),ue.error(e)}))}return Object(h.a)(e,[{key:"terminate",value:function(){this.worker.terminate()}},{key:"open",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var n,r,i,a=this,o=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r=n.signal,i=w(),e.abrupt("return",new Promise((function(e,n){var o={resolve:e,reject:n,abortHandle:Object(d.q)(r,(function(){a._outJobs.delete(i),a._post({type:de,jobId:i})}))};a._outJobs.set(i,o),a._post({type:pe,jobId:i,modulePath:t})})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_onMessage",value:function(e){var t=x(e);if(t)switch(t.type){case he:this._onOpenedMessage(t);break;case be:this._onResponseMessage(t);break;case de:this._onAbortMessage(t);break;case fe:this._onInvokeMessage(t)}}},{key:"_onAbortMessage",value:function(e){var t=this._inJobs,n=e.jobId,r=t.get(n);r&&(r.controller&&r.controller.abort(),t.delete(n))}},{key:"_onInvokeMessage",value:function(e){var t,n=this,r=e.methodName,i=e.jobId,a=e.data,o=e.abortable?Object(d.d)():null,s=this._inJobs,c=m.e[r];try{if("function"!=typeof c)throw new TypeError("".concat(r," is not a function"));t=c.call(null,a,{signal:o?o.signal:null})}catch(l){return void this._post({type:be,jobId:i,error:_(l)})}Object(d.o)(t)?(s.set(i,{controller:o,promise:t}),t.then((function(e){s.has(i)&&(s.delete(i),n._post({type:be,jobId:i},e))}),(function(e){s.has(i)&&(s.delete(i),e||(e={message:"Error encountered at method"+r}),Object(d.m)(e)||n._post({type:be,jobId:i,error:_(e||{message:"Error encountered at method ".concat(r)})}))}))):this._post({type:be,jobId:i},t)}},{key:"_onOpenedMessage",value:function(e){var t,n=e.jobId,r=e.data,i=this._outJobs.get(n);i&&(this._outJobs.delete(n),null==(t=i.abortHandle)||t.remove(),i.resolve(r))}},{key:"_onResponseMessage",value:function(e){var t,n=e.jobId,r=e.error,i=e.data,a=this._outJobs.get(n);a&&(this._outJobs.delete(n),null==(t=a.abortHandle)||t.remove(),r?a.reject(u.a.fromJSON(JSON.parse(r))):a.resolve(i))}},{key:"_post",value:function(e,t,n){return k(this.worker,e,t,n)}}],[{key:"create",value:function(){var t=Object(c.a)(s.a.mark((function t(n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ie();case 2:return r=t.sent,t.abrupt("return",new e(r,n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}(),ye=Object(l.a)("esri-workers-debug")?1:Object(l.a)("host-browser")?navigator.hardwareConcurrency-1:0;ye||(ye=Object(l.a)("safari")&&Object(l.a)("mac")||Object(l.a)("trident")?7:2);var me=0,ge=[];function Oe(){Te()}function je(e,t){return we(e,{client:t})}function we(e,t){return _e.apply(this,arguments)}function _e(){return(_e=Object(c.a)(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new V,e.next=3,r.open(t,n);case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e){return xe.apply(this,arguments)}function xe(){return(xe=Object(c.a)(s.a.mark((function e(t){var n,r,i,o,c,f,p,h,b,v=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=v.length>1&&void 0!==v[1]?v[1]:{},"string"==typeof t){e.next=3;break}throw new u.a("workers:undefined-module","modulePath is missing");case 3:if(r=n.strategy||"distributed",Object(l.a)("host-webworker")&&!Object(l.a)("esri-workers")&&(r="local"),"local"!==r){e.next=16;break}return e.next=7,L.loadWorker(t);case 7:if(i=e.sent,e.t0=i,e.t0){e.next=13;break}return e.next=12,import(t);case 12:i=e.sent;case 13:return Object(d.u)(n.signal),o=n.client||i,e.abrupt("return",we([L.connect(i)],Object(a.a)(Object(a.a)({},n),{},{client:o})));case 16:return e.next=18,Te();case 18:if(Object(d.u)(n.signal),"dedicated"!==r){e.next=28;break}return c=me++%ye,e.t1=we,e.next=24,ge[c].open(t,n);case 24:return e.t2=e.sent,e.t3=[e.t2],e.t4=n,e.abrupt("return",(0,e.t1)(e.t3,e.t4));case 28:if(!(n.maxNumWorkers&&n.maxNumWorkers>0)){e.next=34;break}if(!((f=Math.min(n.maxNumWorkers,ye))<ye)){e.next=34;break}for(p=new Array(f),h=0;h<f;++h)b=me++%ye,p[h]=ge[b].open(t,n);return e.abrupt("return",we(p,n));case 34:return e.abrupt("return",we(ge.map((function(e){return e.open(t,n)})),n));case 35:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Se=null;function Te(){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(c.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Se){e.next=2;break}return e.abrupt("return",Se);case 2:for(Object(d.d)(),t=[],n=function(e){var n=ve.create(e).then((function(t){return ge[e]=t,t}));t.push(n)},r=0;r<ye;r++)n(r);return e.abrupt("return",Se=Promise.all(t));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"===typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var c,l=[],u=!1,d=-1;function f(){u&&c&&(u=!1,c.length?l=c.concat(l):d=-1,l.length&&p())}function p(){if(!u){var e=s(f);u=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function b(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new h(e,t)),1!==l.length||u||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=b,i.addListener=b,i.once=b,i.off=b,i.removeListener=b,i.removeAllListeners=b,i.emit=b,i.prependListener=b,i.prependOnceListener=b,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(8),d=(n(12),n(19),n(20),n(28)),f=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).title=null,e}return Object(a.a)(n,[{key:"clone",value:function(){return new r({title:this.title})}}]),n}(d.a);Object(c.a)([Object(l.b)({type:String,json:{write:!0}})],f.prototype,"title",void 0);var p=f=r=Object(c.a)([Object(u.a)("esri.renderers.support.LegendOptions")],f);t.a=p},function(e,t,n){"use strict";var r,i=n(7),a=n.n(i),o=n(15),s=n(2),c=n(3),l=n(5),u=n(6),d=n(0),f=(n(16),n(22)),p=(n(13),n(17),n(1)),h=n(49),b=n(8),v=(n(12),n(19),n(20),n(166)),y=n(277),m=n(342),g=r=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).description=null,r.label=null,r.symbol=null,r.type="simple",r}return Object(c.a)(n,[{key:"collectRequiredFields",value:function(){var e=Object(o.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.collectSymbolFields(t,n),this.collectVVRequiredFields(t,n)]);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"collectSymbolFields",value:function(){var e=Object(o.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.getSymbols().map((function(e){return e.collectRequiredFields(t,n)})));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(e,t){return this.symbol}},{key:"getSymbolAsync",value:function(){var e=Object(o.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.symbol);case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){return this.symbol?[this.symbol]:[]}},{key:"getAttributeHash",value:function(){return this.visualVariables&&this.visualVariables.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){return this.getSymbols().reduce((function(e,t){return e+JSON.stringify(t)}),"")}},{key:"arcadeRequired",get:function(){return this.arcadeRequiredForVisualVariables}},{key:"clone",value:function(){return new r({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:Object(f.a)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}}]),n}(Object(y.a)(v.a));Object(d.a)([Object(p.b)({type:String,json:{write:!0}})],g.prototype,"description",void 0),Object(d.a)([Object(p.b)({type:String,json:{write:!0}})],g.prototype,"label",void 0),Object(d.a)([Object(p.b)(m.b)],g.prototype,"symbol",void 0),Object(d.a)([Object(h.a)({simple:"simple"})],g.prototype,"type",void 0);var O=g=r=Object(d.a)([Object(b.a)("esri.renderers.SimpleRenderer")],g);t.a=O},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(53),s=n(50),c=n(5),l=n(6),u=n(10),d=n(0),f=(n(16),n(13)),p=n(1),h=n(58),b=n(47),v=n(41),y=n(8),m=n(42),g=n(18),O=(n(12),n(19),n(20),n(38)),j=n(283),w=n(743),_=n(540),k=n(171),x=n(386),S=f.a.getLogger("esri.renderers.visualVariables.SizeVariable"),T=new b.a({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),E=new b.a({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function C(e){if(null!=e)return"string"==typeof e||"number"==typeof e?Object(O.j)(e):"size"===e.type?Object(k.c)(e)?e:(delete(e=Object(u.a)({},e)).type,new I(e)):void 0}function P(e,t,n){if("object"!=typeof e)return e;var r=new I;return r.read(e,n),r}var I=r=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).axis=null,r.legendOptions=null,r.normalizationField=null,r.scaleBy=null,r.target=null,r.type="size",r.useSymbolValue=null,r.valueExpression=null,r.valueRepresentation=null,r.valueUnit=null,r}return Object(a.a)(n,[{key:"cache",get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:x.viewScaleRE.test(this.valueExpression)}}},{key:"expression",set:function(e){S.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),"view.scale"===e?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}},{key:"index",set:function(e){Object(k.c)(this.maxSize)&&(this.maxSize.index="visualVariables[".concat(e,"].maxSize")),Object(k.c)(this.minSize)&&(this.minSize.index="visualVariables[".concat(e,"].minSize")),this._set("index",e)}},{key:"inputValueType",get:function(){return Object(k.a)(this)}},{key:"maxDataValue",set:function(e){e&&this.stops&&(S.warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}},{key:"maxSize",set:function(e){e&&this.stops&&(S.warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}},{key:"castMaxSize",value:function(e){return C(e)}},{key:"readMaxSize",value:function(e,t,n){return P(e,0,n)}},{key:"minDataValue",set:function(e){e&&this.stops&&(S.warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}},{key:"minSize",set:function(e){e&&this.stops&&(S.warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}},{key:"castMinSize",value:function(e){return C(e)}},{key:"readMinSize",value:function(e,t,n){return P(e,0,n)}},{key:"arcadeRequired",get:function(){return!!this.valueExpression||this.minSize&&"object"==typeof this.minSize&&this.minSize.arcadeRequired||this.maxSize&&"object"==typeof this.maxSize&&this.maxSize.arcadeRequired}},{key:"stops",set:function(e){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?e&&Array.isArray(e)&&(e=e.filter((function(e){return!!e}))).sort((function(e,t){return e.value-t.value})):e&&(S.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}},{key:"transformationType",get:function(){return Object(k.b)(this,this.inputValueType)}},{key:"readValueExpression",value:function(e,t){return e||t.expression&&"$view.scale"}},{key:"writeValueExpressionWebScene",value:function(e,t,n,r){if("$view.scale"===e){if(r&&r.messages){var i=this.index,a="string"==typeof i?i:"visualVariables[".concat(i,"]");r.messages.push(new g.a("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:a+".valueExpression",context:r}))}}else t[n]=e}},{key:"readValueUnit",value:function(e){return e?E.read(e):null}},{key:"clone",value:function(){return new r({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:Object(k.c)(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:Object(k.c)(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map((function(e){return e.clone()})),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}},{key:"flipSizes",value:function(){if("clamped-linear"===this.transformationType){var e=this.minSize,t=this.maxSize;return this.minSize=t,this.maxSize=e,this}if("stops"===this.transformationType){for(var n=this.stops,r=n.map((function(e){return e.size})).reverse(),i=n.length,a=0;a<i;a++)n[a].size=r[a];return this}return this}},{key:"getAttributeHash",value:function(){return"".concat(Object(o.a)(Object(s.a)(n.prototype),"getAttributeHash",this).call(this),"-").concat(this.target,"-").concat(this.normalizationField)}},{key:"_interpolateData",value:function(){return this.stops&&this.stops.map((function(e){return e.value||0}))}}]),n}(j.a);Object(d.a)([Object(p.b)({readOnly:!0})],I.prototype,"cache",null),Object(d.a)([Object(p.b)({type:T.apiValues,json:{type:T.jsonValues,origins:{"web-map":{read:!1}},read:T.read,write:T.write}})],I.prototype,"axis",void 0),Object(d.a)([Object(p.b)({type:String,value:null,json:{read:!1}})],I.prototype,"expression",null),Object(d.a)([Object(p.b)()],I.prototype,"index",null),Object(d.a)([Object(p.b)({type:String,readOnly:!0})],I.prototype,"inputValueType",null),Object(d.a)([Object(p.b)({type:_.a,json:{write:!0}})],I.prototype,"legendOptions",void 0),Object(d.a)([Object(p.b)({type:Number,value:null,json:{write:!0}})],I.prototype,"maxDataValue",null),Object(d.a)([Object(p.b)({type:Number,value:null,json:{write:!0}})],I.prototype,"maxSize",null),Object(d.a)([Object(h.a)("maxSize")],I.prototype,"castMaxSize",null),Object(d.a)([Object(v.a)("maxSize")],I.prototype,"readMaxSize",null),Object(d.a)([Object(p.b)({type:Number,value:null,json:{write:!0}})],I.prototype,"minDataValue",null),Object(d.a)([Object(p.b)({type:Number,value:null,json:{write:!0}})],I.prototype,"minSize",null),Object(d.a)([Object(h.a)("minSize")],I.prototype,"castMinSize",null),Object(d.a)([Object(v.a)("minSize")],I.prototype,"readMinSize",null),Object(d.a)([Object(p.b)({type:String,json:{write:!0}})],I.prototype,"normalizationField",void 0),Object(d.a)([Object(p.b)({readOnly:!0})],I.prototype,"arcadeRequired",null),Object(d.a)([Object(p.b)({type:String})],I.prototype,"scaleBy",void 0),Object(d.a)([Object(p.b)({type:[w.a],value:null,json:{write:!0}})],I.prototype,"stops",null),Object(d.a)([Object(p.b)({type:["outline"],json:{write:!0}})],I.prototype,"target",void 0),Object(d.a)([Object(p.b)({type:String,readOnly:!0})],I.prototype,"transformationType",null),Object(d.a)([Object(p.b)({type:["size"],json:{type:["sizeInfo"]}})],I.prototype,"type",void 0),Object(d.a)([Object(p.b)({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],I.prototype,"useSymbolValue",void 0),Object(d.a)([Object(p.b)({type:String,json:{write:!0}})],I.prototype,"valueExpression",void 0),Object(d.a)([Object(v.a)("valueExpression",["valueExpression","expression"])],I.prototype,"readValueExpression",null),Object(d.a)([Object(m.a)("web-scene","valueExpression")],I.prototype,"writeValueExpressionWebScene",null),Object(d.a)([Object(p.b)({type:["radius","diameter","area","width","distance"],json:{write:!0}})],I.prototype,"valueRepresentation",void 0),Object(d.a)([Object(p.b)({type:E.apiValues,json:{write:E.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],I.prototype,"valueUnit",void 0),Object(d.a)([Object(v.a)("valueUnit")],I.prototype,"readValueUnit",null);var M=I=r=Object(d.a)([Object(y.a)("esri.renderers.visualVariables.SizeVariable")],I);t.a=M},function(e,t,n){"use strict";n.r(t),n.d(t,"getAllSizes",(function(){return S})),n.d(t,"getColor",(function(){return v})),n.d(t,"getOpacity",(function(){return y})),n.d(t,"getRotationAngle",(function(){return m})),n.d(t,"getSize",(function(){return g})),n.d(t,"getSizeForValue",(function(){return w})),n.d(t,"getSizeFromNumberOrVariable",(function(){return O})),n.d(t,"getSizeRangeAtScale",(function(){return _})),n.d(t,"getVisualVariableValues",(function(){return k})),n.d(t,"viewScaleRE",(function(){return b}));var r=n(14),i=n(31),a=n(195),o=n(4),s=n(13),c=n(39),l=n(74),u=n(318),d=n(171),f=s.a.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),p=new l.a,h=Math.PI,b=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function v(e,t,n){var r="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"color"===e.type}))[0]:e;if(r)if("esri.renderers.visualVariables.ColorVariable"===r.declaredClass){var i="number"==typeof t,a=i?null:t,s=a&&a.attributes,l=i?t:null,u=r.field,d=r.cache,p=d.ipData,h=d.hasExpression,b=r.cache.compiledFunc;if(!u&&!h){var v=r.stops;return v&&v[0]&&v[0].color}if("number"!=typeof l)if(h){if(!Object(o.k)(n)||!Object(o.k)(n.arcade))return void f.error("Use of arcade expressions requires an arcade context");var y={viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference},m=n.arcade.arcadeUtils,g=m.getViewInfo(y),O=m.createExecContext(a,g);if(!b){var j=m.createSyntaxTree(r.valueExpression);b=m.createFunction(j),r.cache.compiledFunc=b}l=m.executeFunction(b,O)}else s&&(l=s[u]);var w=r.normalizationField,_=s?parseFloat(s[w]):void 0;if(null!=l&&(!w||i||!isNaN(_)&&0!==_)){isNaN(_)||i||(l/=_);var k=x(l,p);if(k){var S=k[0],T=k[1],E=S===T?r.stops[S].color:c.a.blendColors(r.stops[S].color,r.stops[T].color,k[2],Object(o.k)(n)?n.color:void 0);return new c.a(E)}}}else f.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable")}function y(e,t,n){var r="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"opacity"===e.type}))[0]:e;if(r)if("esri.renderers.visualVariables.OpacityVariable"===r.declaredClass){var i="number"==typeof t,a=i?null:t,s=a&&a.attributes,c=i?t:null,l=r.field,u=r.cache,d=u.ipData,p=u.hasExpression,h=r.cache.compiledFunc;if(!l&&!p){var b=r.stops;return b&&b[0]&&b[0].opacity}if("number"!=typeof c)if(p){if(Object(o.j)(n)||Object(o.j)(n.arcade))return void f.error("Use of arcade expressions requires an arcade context");var v={viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference},y=n.arcade.arcadeUtils,m=y.getViewInfo(v),g=y.createExecContext(a,m);if(!h){var O=y.createSyntaxTree(r.valueExpression);h=y.createFunction(O),r.cache.compiledFunc=h}c=y.executeFunction(h,g)}else s&&(c=s[l]);var j=r.normalizationField,w=s?parseFloat(s[j]):void 0;if(null!=c&&(!j||i||!isNaN(w)&&0!==w)){isNaN(w)||i||(c/=w);var _=x(c,d);if(_){var k=_[0],S=_[1];if(k===S)return r.stops[k].opacity;var T=r.stops[k].opacity;return T+(r.stops[S].opacity-T)*_[2]}}}else f.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable")}function m(e,t,n){var r="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"rotation"===e.type}))[0]:e;if(r){if("esri.renderers.visualVariables.RotationVariable"===r.declaredClass){var i=r.axis||"heading",a="heading"===i&&"arithmetic"===r.rotationType?90:0,s="heading"===i&&"arithmetic"===r.rotationType?-1:1,c="number"==typeof t?null:t,l=c&&c.attributes,u=r.field,d=r.cache.hasExpression,p=r.cache.compiledFunc,h=0;if(!u&&!d)return h;if(d){if(Object(o.j)(n)||Object(o.j)(n.arcade))return void f.error("Use of arcade expressions requires an arcade context");var b={viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference},v=n.arcade.arcadeUtils,y=v.getViewInfo(b),m=v.createExecContext(c,y);if(!p){var g=v.createSyntaxTree(r.valueExpression);p=v.createFunction(g),r.cache.compiledFunc=p}h=v.executeFunction(p,m)}else l&&(h=l[u]||0);return h="number"!=typeof h||isNaN(h)?null:a+s*h}f.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable")}}function g(e,t,n){var r="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"size"===e.type}))[0]:e;if(r){if("esri.renderers.visualVariables.SizeVariable"===r.declaredClass){var i=w(function(e,t,n){var r="number"==typeof t,i=r?null:t,a=i&&i.attributes,s=r?t:null,c=e.cache.isScaleDriven,l=e.cache.compiledFunc;if(c){var u=Object(o.k)(n)?n.scale:void 0,p=Object(o.k)(n)?n.view:void 0;s=null==u||"3d"===p?function(e){var t=null,n=null,r=e.stops;return r?(t=r[0].value,n=r[r.length-1].value):(t=e.minDataValue||0,n=e.maxDataValue||0),(t+n)/2}(e):u}else if(!r)switch(e.inputValueType){case"expression":if(Object(o.j)(n)||Object(o.j)(n.arcade))return void f.error("Use of arcade expressions requires an arcade context");var h={viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference},b=n.arcade.arcadeUtils,v=b.getViewInfo(h),y=b.createExecContext(i,v);if(!l){var m=b.createSyntaxTree(e.valueExpression);l=b.createFunction(m),e.cache.compiledFunc=l}s=b.executeFunction(l,y);break;case"field":a&&(s=a[e.field]);break;case"unknown":s=null}if(!Object(d.d)(s))return null;if(r||!e.normalizationField)return s;var g=a?parseFloat(a[e.normalizationField]):null;return Object(d.d)(g)&&0!==g?s/g:null}(r,t,n),r,t,n,r.cache.ipData);return null==i||isNaN(i)?0:i}f.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable")}}function O(e,t,n){return null==e?null:Object(d.c)(e)?g(e,t,n):Object(d.d)(e)?e:null}function j(e,t,n){return Object(d.d)(n)&&e>n?n:Object(d.d)(t)&&e<t?t:e}function w(e,t,n,r,a){switch(t.transformationType){case"additive":return function(e,t,n,r){return e+(O(t.minSize,n,r)||t.minDataValue)}(e,t,n,r);case"constant":return function(e,t,n){var r=e.stops,i=r&&r.length&&r[0].size;return null==i&&(i=e.minSize),O(i,t,n)}(t,n,r);case"clamped-linear":return function(e,t,n,r){var i=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),a=O(t.minSize,n,r),s=O(t.maxSize,n,r),c=Object(o.k)(r)?r.shape:void 0;if(e<=t.minDataValue)return a;if(e>=t.maxDataValue)return s;if("area"===t.scaleBy&&c){var l="circle"===c,u=l?h*Math.pow(a/2,2):a*a,d=u+i*((l?h*Math.pow(s/2,2):s*s)-u);return l?2*Math.sqrt(d/h):Math.sqrt(d)}return a+i*(s-a)}(e,t,n,r);case"proportional":return function(e,t,n,r){var i=Object(o.k)(r)?r.shape:void 0,a=e/t.minDataValue,s=O(t.minSize,n,r),c=O(t.maxSize,n,r);return j("circle"===i?2*Math.sqrt(a*Math.pow(s/2,2)):"square"===i||"diamond"===i||"image"===i?Math.sqrt(a*Math.pow(s,2)):a*s,s,c)}(e,t,n,r);case"stops":return function(e,t,n,r,a){var o=x(e,a),s=Object(i.a)(o,3),c=s[0],l=s[1],u=s[2];if(c===l)return O(t.stops[c].size,n,r);var d=O(t.stops[c].size,n,r);return d+(O(t.stops[l].size,n,r)-d)*u}(e,t,n,r,a);case"real-world-size":return function(e,t,n,r){var i=(Object(o.k)(r)&&r.resolution?r.resolution:1)*u.a[t.valueUnit],a=O(t.minSize,n,r),s=O(t.maxSize,n,r),c=t.valueRepresentation;return j("area"===c?2*Math.sqrt(e/h)/i:"radius"===c||"distance"===c?2*e/i:e/i,a,s)}(e,t,n,r);case"identity":return e;case"unknown":return null}}function _(e,t,n){if(!(e.cache.isScaleDriven&&"3d"===n||t))return null;var r={scale:t,view:n},i=O(e.minSize,p,r),a=O(e.maxSize,p,r);if(null!=i||null!=a){if(i>a){var o=a;a=i,i=o}return{minSize:i,maxSize:a}}}function k(e,t,n){if(e.visualVariables){var i,a=[],o=[],s=[],c=[],l=[],u=Object(r.a)(e.visualVariables);try{for(u.s();!(i=u.n()).done;){var d=i.value;switch(d.type){case"color":o.push(d);break;case"opacity":s.push(d);break;case"rotation":l.push(d);break;case"size":c.push(d)}}}catch(f){u.e(f)}finally{u.f()}return o.forEach((function(e){var r=v(e,t,n);a.push({variable:e,value:r})})),s.forEach((function(e){var r=y(e,t,n);a.push({variable:e,value:r})})),l.forEach((function(e){var r=m(e,t,n);a.push({variable:e,value:r})})),c.forEach((function(e){var r=g(e,t,n);a.push({variable:e,value:r})})),a.filter((function(e){return null!=e.value}))}}function x(e,t){if(t){var n=0,r=t.length-1;return t.some((function(t,i){return e<t?(r=i,!0):(n=i,!1)})),[n,r,(e-t[n])/(t[r]-t[n])]}}function S(e,t,n){var i,o=["proportional","proportional","proportional"],s=Object(r.a)(e);try{for(s.s();!(i=s.n()).done;){var c=i.value,l=c.useSymbolValue?"symbol-value":g(c,t,n);switch(c.axis){case"width":o[0]=l;break;case"depth":o[1]=l;break;case"height":o[2]=l;break;case"width-and-depth":o[0]=l,o[1]=l;break;case"all":case void 0:case null:o[0]=l,o[1]=l,o[2]=l;break;default:Object(a.a)(c.axis)}}}catch(u){s.e(u)}finally{s.f()}return o}},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(5),o=n(6),s=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this)).material=e.material,i.techniqueRep=e.techniqueRep,i.output=e.output,i}return Object(i.a)(n,[{key:"getTechnique",value:function(){return this.technique}},{key:"getPipelineState",value:function(e,t){return this.getTechnique().pipeline}},{key:"ensureResources",value:function(e){return 2}},{key:"ensureParameters",value:function(e){}}]),n}(n(650).a);t.a=s},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(2),i=n(3),a=n(5),o=n(6),s=n(78),c=n(134),l=n(4),u=function(){function e(t,n,i){Object(r.a)(this,e),this.editGeometry=t,this.component=n,this.pos=i,this.addedVertex=null,this.originalEdge=null,this.left=null,this.right=null}return Object(i.a)(e,[{key:"apply",value:function(){var e="redo";if(Object(l.j)(this.addedVertex)&&(e="apply",this.addedVertex=new c.d(this.component)),0===this.component.vertices.length)this.component.vertices.push(this.addedVertex),this.addedVertex.pos=this.pos,this.addedVertex.index=0;else{var t=Object(l.q)(this.component.getLastVertex()),n=null;t.right&&(this.originalEdge=t.right,n=this.originalEdge.right,this.component.edges.splice(this.component.edges.indexOf(this.originalEdge),1)),this.component.vertices.push(this.addedVertex),this.addedVertex.pos=this.pos,Object(l.j)(this.left)&&(this.left=new c.b(this.component,t,this.addedVertex)),this.component.edges.push(this.left),t.right=this.left,Object(l.k)(this.originalEdge)&&Object(l.k)(n)&&(Object(l.j)(this.right)&&(this.right=new c.b(this.component,this.addedVertex,n)),this.component.edges.push(this.right),n.left=this.right),this.component.updateVertexIndex(this.addedVertex,t.index+1)}var r={addedVertices:[this.addedVertex],operation:e};this.editGeometry.emit("change",r)}},{key:"undo",value:function(){if(Object(l.j)(this.addedVertex))return null;this.component.vertices.splice(this.component.vertices.indexOf(this.addedVertex),1),Object(l.k)(this.left)&&(this.component.edges.splice(this.component.edges.indexOf(this.left),1),this.left.left.right=null),Object(l.k)(this.right)&&(this.component.edges.splice(this.component.edges.indexOf(this.right),1),this.right.right.left=null),Object(l.k)(this.originalEdge)&&(this.component.edges.push(this.originalEdge),this.originalEdge.left.right=this.originalEdge,this.originalEdge.right.left=this.originalEdge),Object(l.k)(this.left)?this.component.updateVertexIndex(this.left.left,this.left.left.index):this.component.updateVertexIndex(this.addedVertex,0);var e={removedVertices:[this.addedVertex],operation:"undo"};this.editGeometry.emit("change",e)}},{key:"accumulate",value:function(e){return!1}}]),e}(),d=n(325),f=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(r.a)(this,e),this.editGeometry=t,this.removedVertices=null,this._minNumberOfVertices=0,this.vertices=n,this._minNumberOfVertices=i}return Object(i.a)(e,[{key:"apply",value:function(){var e=this,t="redo";null==this.removedVertices?(this.removedVertices=[],this.vertices.forEach((function(t){var n=e._removeVertex(t);Object(l.k)(n)&&e.removedVertices.push(n)})),t="apply"):this.removedVertices.forEach((function(t){e._redoRemoveVertex(t)}));var n={removedVertices:this.vertices,operation:t};this.editGeometry.emit("change",n)}},{key:"undo",value:function(){var e=this;this.removedVertices.forEach((function(t){e._undoRemoveVertex(t)}));var t={addedVertices:this.vertices,operation:"undo"};this.editGeometry.emit("change",t)}},{key:"accumulate",value:function(e){return!1}},{key:"_removeVertex",value:function(e){var t=e.component;if(t.vertices.length<=this._minNumberOfVertices)return null;var n={removedVertex:e,createdEdge:null},r=e.left,i=e.right;return t.vertices.splice(t.vertices.indexOf(e),1),r&&(t.edges.splice(t.edges.indexOf(r),1),r.left.right=null),i&&(t.edges.splice(t.edges.indexOf(i),1),i.right.left=null),0===e.index&&i&&this.vertices.length>0&&t.swapVertices(t.vertices.indexOf(i.right),0),r&&i&&(n.createdEdge=new c.b(t,r.left,i.right),t.edges.push(n.createdEdge)),i&&t.updateVertexIndex(i.right,i.right.index-1),n}},{key:"_redoRemoveVertex",value:function(e){console.warn("redo remove vertex not implemented yet")}},{key:"_undoRemoveVertex",value:function(e){var t=e.removedVertex,n=e.removedVertex.component,r=t.left,i=t.right;e.createdEdge&&n.edges.splice(n.edges.indexOf(e.createdEdge),1),n.vertices.push(t),r&&(n.edges.push(r),r.left.right=r),i&&(n.edges.push(i),i.right.left=i),n.updateVertexIndex(t,t.index)}}]),e}(),p=function(){function e(t,n,i){Object(r.a)(this,e),this.editGeometry=t,this.edge=n,this.t=i,this.createdVertex=null,this.left=null,this.right=null}return Object(i.a)(e,[{key:"apply",value:function(){var e="redo",t=this.edge,n=t.component,r=t.component.data,i=t.left,a=t.right;n.edges.splice(n.edges.indexOf(t),1),Object(l.j)(this.createdVertex)&&(e="apply",this.createdVertex=new c.d(t.component)),n.vertices.push(this.createdVertex),this.createdVertex.pos=r.coordinateHelper.lerp(t.left.pos,t.right.pos,this.t,r.coordinateHelper.createNew()),Object(l.j)(this.left)&&(this.left=new c.b(n,i,this.createdVertex)),this.left.left.left?n.edges.push(this.left):n.edges.unshift(this.left),i.right=this.left,Object(l.j)(this.right)&&(this.right=new c.b(n,this.createdVertex,a)),n.edges.push(this.right),a.left=this.right,n.updateVertexIndex(this.createdVertex,i.index+1);var o={addedVertices:[this.createdVertex],operation:e};this.editGeometry.emit("change",o)}},{key:"undo",value:function(){if(Object(l.j)(this.createdVertex)||Object(l.j)(this.left)||Object(l.j)(this.right))return null;var e=this.edge,t=e.component,n=this.createdVertex.left,r=this.createdVertex.right,i=n.left,a=r.right;t.vertices.splice(t.vertices.indexOf(this.createdVertex),1),t.edges.splice(t.edges.indexOf(this.left),1),t.edges.splice(t.edges.indexOf(this.right),1),this.edge.left.left?t.edges.push(this.edge):t.edges.unshift(this.edge),i.right=e,a.left=e,t.updateVertexIndex(i,i.index);var o={removedVertices:[this.createdVertex],operation:"undo"};this.editGeometry.emit("change",o)}},{key:"accumulate",value:function(e){return!1}}]),e}(),h=n(754),b=n(755),v=n(756),y=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e,i){var a;return Object(r.a)(this,n),(a=t.call(this)).editGeometry=e,a.type=i,a._geometry=null,a._dirty=!0,a._listener=a.editGeometry.on("change",(function(e){e.addedVertices&&a.emit("vertex-add",{type:"vertex-add",vertices:e.addedVertices,operation:e.operation}),e.removedVertices&&a.emit("vertex-remove",{type:"vertex-remove",vertices:e.removedVertices,operation:e.operation}),e.updatedVertices&&a.emit("vertex-update",{type:"vertex-update",vertices:e.updatedVertices,operation:e.operation}),a._dirty=!0})),a}return Object(i.a)(n,[{key:"destroy",value:function(){this._listener.remove()}},{key:"splitEdge",value:function(e,t){var n=new p(this.editGeometry,e,t);return this.editGeometry.apply(n),n}},{key:"updateVertices",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=new d.b(this.editGeometry,e,t);return this.editGeometry.apply(r,n),r}},{key:"moveVertices",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return this.updateVertices(e,new h.a(this.editGeometry.coordinateHelper,t,n,r),i)}},{key:"scaleVertices",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;return this.updateVertices(e,new v.a(this.editGeometry.coordinateHelper,t,n,r,i,o),a)}},{key:"rotateVertices",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return this.updateVertices(e,new b.a(this.editGeometry.coordinateHelper,t,n,i),r)}},{key:"removeVertices",value:function(e){var t=0;switch(this.type){case"point":t=1;break;case"polyline":t=2;break;case"polygon":t=3}var n=new f(this.editGeometry,e,t);return this.editGeometry.apply(n),n}},{key:"appendVertex",value:function(e){if(0===this.editGeometry.components.length)return null;var t=new u(this.editGeometry,this.editGeometry.components[0],e);return this.editGeometry.apply(t),t}},{key:"canRemoveVertex",value:function(){var e=0;switch(this.type){case"point":e=1;break;case"polyline":e=2;break;case"polygon":e=3}return this.editGeometry.components[0].vertices.length>e}},{key:"undo",value:function(){return this.editGeometry.undo()}},{key:"canUndo",get:function(){return this.editGeometry.canUndo}},{key:"redo",value:function(){return this.editGeometry.redo()}},{key:"canRedo",get:function(){return this.editGeometry.canRedo}},{key:"geometry",get:function(){if(this._dirty){switch(this.type){case"point":this._geometry=this.editGeometry.toPoint();break;case"polyline":this._geometry=this.editGeometry.toPolyline();break;case"polygon":this._geometry=this.editGeometry.toPolygon()}this._dirty=!1}return this._geometry}}]),n}(s.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return $}));var r,i=n(10),a=n(2),o=n(3),s=n(5),c=n(6),l=n(4),u=n(13),d=n(45),f=n(38),p=n(27),h=n(11),b=n(33),v=n(274),y=n(57),m=n(86),g=n(241),O=n(242),j=n(387),w=n(301),_=n(298),k=n(83);(r||(r={})).Default={vvSizeEnabled:!1,vvSizeMinSize:Object(k.c)(1,1,1),vvSizeMaxSize:Object(k.c)(100,100,100),vvSizeOffset:Object(k.c)(0,0,0),vvSizeFactor:Object(k.c)(1,1,1),vvSizeValue:Object(k.c)(1,1,1),vvColorEnabled:!1,vvColorValues:[0,0,0,0,0,0,0,0],vvColorColors:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],vvOpacityEnabled:!1,vvOpacityValues:[0,0,0,0,0,0,0,0],vvOpacityOpacities:[1,1,1,1,1,1,1,1],vvSymbolAnchor:[0,0,0],vvSymbolRotationMatrix:Object(_.a)()};var x=r,S=n(53),T=n(50),E=n(0),C=n(268),P=n(270),I=n(69),M=n(261),A=n(117),R=n(238),L=n(217),F=n(267),D=n(380),N=n(168),V=n(316),z=n(183),U=n(651),B={position:0,subdivisionFactor:1,uv0:2,auxpos1:3,auxpos2:4,size:6,sizeFeatureAttribute:6,color:5,colorFeatureAttribute:5,opacityFeatureAttribute:7},G=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r){var i;return Object(a.a)(this,n),(i=t.call(this,e,r)).stipplePattern=null,i.stippleTextureBind=null,i.stippleTextureRepository=e.stippleTextureRepository,i}return Object(o.a)(n,[{key:"initializeProgram",value:function(e){var t=n.shader.get(),r=this.configuration,i=t.build({OITEnabled:0===r.transparencyPassType,output:r.output,slicePlaneEnabled:r.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,stippleEnabled:r.stippleEnabled,stippleOffColorEnabled:r.stippleOffColorEnabled,stippleUVMaxEnabled:r.stippleIntegerRepeatsEnabled,stippleIntegerRepeatsEnabled:r.stippleIntegerRepeatsEnabled,roundCaps:r.roundCaps,roundJoins:r.roundJoins,vvColor:r.vvColor,vvSize:r.vvSize,vvInstancingEnabled:!0,vvOpacity:r.vvOpacity,falloffEnabled:r.falloffEnabled,innerColorEnabled:r.innerColorEnabled,multipassTerrainEnabled:r.multipassTerrainEnabled,cullAboveGround:r.cullAboveGround});return new M.a(e.rctx,i.generateSource("vertex"),i.generateSource("fragment"),B)}},{key:"dispose",value:function(){Object(S.a)(Object(T.a)(n.prototype),"dispose",this).call(this),this.stippleTextureRepository.release(this.stipplePattern),this.stipplePattern=null,this.stippleTextureBind=null}},{key:"bindPass",value:function(e,t,n){if(R.a.bindProjectionMatrix(this.program,n.camera.projectionMatrix),4===this.configuration.output&&F.a.bindOutputHighlight(e,this.program,n),n.multipassTerrainEnabled&&(this.program.setUniform2fv("inverseViewport",n.inverseViewport),Object(V.a)(this.program,e,n)),this.program.setUniform1f("intrinsicWidth",t.width),this.program.setUniform4fv("intrinsicColor",t.color),this.program.setUniform1f("miterLimit","miter"!==t.join?0:t.miterLimit),this.program.setUniform2fv("cameraNearFar",n.camera.nearFar),this.program.setUniform1f("pixelRatio",n.camera.pixelRatio),this.program.setUniform2f("screenSize",n.camera.fullViewport[2],n.camera.fullViewport[3]),D.a.bindUniformsWithOpacity(this.program,t),this.stipplePattern!==t.stipplePattern){var r=t.stipplePattern;this.stippleTextureBind=this.stippleTextureRepository.swap(this.stipplePattern,r),this.stipplePattern=r}if(this.configuration.stippleEnabled){var i=Object(l.k)(this.stippleTextureBind)?this.stippleTextureBind(e,0)*n.camera.pixelRatio:1;if(this.program.setUniform1i("stipplePatternTexture",0),this.program.setUniform1f("stipplePatternPixelSizeInv",1/i),this.configuration.stippleOffColorEnabled){var a=Object(l.q)(t.stippleOffColor);this.program.setUniform4f("stippleOffColor",a[0],a[1],a[2],a.length>3?a[3]:1)}}this.configuration.falloffEnabled&&this.program.setUniform1f("falloff",t.falloff),this.configuration.innerColorEnabled&&(this.program.setUniform4fv("innerColor",Object(l.r)(t.innerColor,t.color)),this.program.setUniform1f("innerWidth",t.innerWidth*n.camera.pixelRatio))}},{key:"bindDraw",value:function(e){R.a.bindView(this.program,e),L.a.bindUniformsWithOrigin(this.program,this.configuration,e)}},{key:"setPipelineState",value:function(e,t){var n=this.configuration,r=3===e,i=2===e;return Object(A.d)({blending:0===n.output||7===n.output?r?N.f:Object(N.a)(e):null,depthTest:{func:Object(N.b)(e)},depthWrite:r?!n.transparent&&n.writeDepth&&A.c:Object(N.c)(e),colorWrite:A.b,stencilWrite:n.sceneHasOcludees?z.h:null,stencilTest:n.sceneHasOcludees?t?z.d:z.c:null,polygonOffset:r||i?n.polygonOffset&&q:N.d})}},{key:"initializePipeline",value:function(){var e=this.configuration,t=e.polygonOffset&&q;return e.occluder&&(this._occluderPipelineTransparent=Object(A.d)({blending:N.f,polygonOffset:t,depthTest:z.a,depthWrite:null,colorWrite:A.b,stencilWrite:null,stencilTest:z.f}),this._occluderPipelineOpaque=Object(A.d)({blending:N.f,polygonOffset:t,depthTest:z.a,depthWrite:null,colorWrite:A.b,stencilWrite:z.g,stencilTest:z.e}),this._occluderPipelineMaskWrite=Object(A.d)({blending:null,polygonOffset:t,depthTest:z.b,depthWrite:null,colorWrite:null,stencilWrite:z.h,stencilTest:z.d})),this._occludeePipelineState=this.setPipelineState(this.configuration.transparencyPassType,!0),this.setPipelineState(this.configuration.transparencyPassType,!1)}},{key:"primitiveType",get:function(){return 5}},{key:"getPipelineState",value:function(e,t){return t?this._occludeePipelineState:this.configuration.occluder?11===e?this._occluderPipelineTransparent:10===e?this._occluderPipelineOpaque:this._occluderPipelineMaskWrite:this.pipeline}}]),n}(P.a);G.shader=new C.a(U.a,(function(){return n.e(230).then(n.bind(null,1400))}));var q={factor:0,units:-4},H=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.apply(this,arguments)).output=0,e.occluder=!1,e.slicePlaneEnabled=!1,e.transparent=!1,e.polygonOffset=!1,e.writeDepth=!1,e.stippleEnabled=!1,e.stippleOffColorEnabled=!1,e.stippleIntegerRepeatsEnabled=!1,e.roundCaps=!1,e.roundJoins=!1,e.vvSize=!1,e.vvColor=!1,e.vvOpacity=!1,e.falloffEnabled=!1,e.innerColorEnabled=!1,e.sceneHasOcludees=!1,e.transparencyPassType=3,e.multipassTerrainEnabled=!1,e.cullAboveGround=!0,e}return n}(I.a);Object(E.a)([Object(I.b)({count:8})],H.prototype,"output",void 0),Object(E.a)([Object(I.b)()],H.prototype,"occluder",void 0),Object(E.a)([Object(I.b)()],H.prototype,"slicePlaneEnabled",void 0),Object(E.a)([Object(I.b)()],H.prototype,"transparent",void 0),Object(E.a)([Object(I.b)()],H.prototype,"polygonOffset",void 0),Object(E.a)([Object(I.b)()],H.prototype,"writeDepth",void 0),Object(E.a)([Object(I.b)()],H.prototype,"stippleEnabled",void 0),Object(E.a)([Object(I.b)()],H.prototype,"stippleOffColorEnabled",void 0),Object(E.a)([Object(I.b)()],H.prototype,"stippleIntegerRepeatsEnabled",void 0),Object(E.a)([Object(I.b)()],H.prototype,"roundCaps",void 0),Object(E.a)([Object(I.b)()],H.prototype,"roundJoins",void 0),Object(E.a)([Object(I.b)()],H.prototype,"vvSize",void 0),Object(E.a)([Object(I.b)()],H.prototype,"vvColor",void 0),Object(E.a)([Object(I.b)()],H.prototype,"vvOpacity",void 0),Object(E.a)([Object(I.b)()],H.prototype,"falloffEnabled",void 0),Object(E.a)([Object(I.b)()],H.prototype,"innerColorEnabled",void 0),Object(E.a)([Object(I.b)()],H.prototype,"sceneHasOcludees",void 0),Object(E.a)([Object(I.b)({count:4})],H.prototype,"transparencyPassType",void 0),Object(E.a)([Object(I.b)()],H.prototype,"multipassTerrainEnabled",void 0),Object(E.a)([Object(I.b)()],H.prototype,"cullAboveGround",void 0);var W=u.a.getLogger("esri.views.3d.webgl-engine.materials.RibbonLineMaterial"),$=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e,Y))._vertexAttributeLocations=B,r.techniqueConfig=new H,r.layout=r.createLayout(),r}return Object(o.a)(n,[{key:"isClosed",value:function(e,t){return Q(this.params,e,t)}},{key:"dispose",value:function(){}},{key:"getPassParameters",value:function(){return this.params}},{key:"getTechniqueConfig",value:function(e,t){this.techniqueConfig.output=e;var n=Object(l.k)(this.params.stipplePattern);return this.techniqueConfig.stippleEnabled=n,this.techniqueConfig.stippleIntegerRepeatsEnabled=n&&this.params.stippleIntegerRepeats,this.techniqueConfig.stippleOffColorEnabled=n&&Object(l.k)(this.params.stippleOffColor),this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled,this.techniqueConfig.sceneHasOcludees=this.params.sceneHasOcludees,this.techniqueConfig.roundJoins="round"===this.params.join,this.techniqueConfig.roundCaps="round"===this.params.cap,this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.polygonOffset=this.params.polygonOffset,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.vvColor=this.params.vvColorEnabled,this.techniqueConfig.vvOpacity=this.params.vvOpacityEnabled,this.techniqueConfig.vvSize=this.params.vvSizeEnabled,this.techniqueConfig.innerColorEnabled=this.params.innerWidth>0&&Object(l.k)(this.params.innerColor),this.techniqueConfig.falloffEnabled=this.params.falloff>0,this.techniqueConfig.occluder=8===this.params.renderOccluded,this.techniqueConfig.transparencyPassType=t?t.transparencyPassType:3,this.techniqueConfig.multipassTerrainEnabled=!!t&&t.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!t||t.cullAboveGround,this.techniqueConfig}},{key:"intersect",value:function(e,t,n,r,i,a,o,s,c){c?this.intersectDrapedLineGeometry(e,r,a,o):this.intersectLineGeometry(e,t,n,r,this.params.width,o)}},{key:"intersectDrapedLineGeometry",value:function(e,t,n,r){if(t.options.selectionMode){var i=e.vertexAttributes.get("position").data,a=e.vertexAttributes.get("size"),o=this.params.width;if(this.params.vvSizeEnabled){var s=e.vertexAttributes.get("sizeFeatureAttribute").data[0];o*=Object(d.d)(this.params.vvSizeOffset[0]+s*this.params.vvSizeFactor[0],this.params.vvSizeMinSize[0],this.params.vvSizeMaxSize[0])}else a&&(o*=a.data[0]);for(var c=n[0],l=n[1],u=(o/2+4)*e.screenToWorldRatio,f=Number.MAX_VALUE,p=0;p<i.length-5;p+=3){var h=i[p],b=i[p+1],v=c-h,y=l-b,m=i[p+3]-h,g=i[p+4]-b,O=Object(d.d)((m*v+g*y)/(m*m+g*g),0,1),j=m*O-v,w=g*O-y,_=j*j+w*w;_<f&&(f=_)}f<u*u&&r()}}},{key:"intersectLineGeometry",value:function(e,t,n,r,i,a){if(r.options.selectionMode&&!Object(O.d)(t))if(Object(m.g)(n)){var o=e.vertexAttributes,s=o.get("position").data,c=i;if(this.params.vvSizeEnabled){var l=o.get("sizeFeatureAttribute").data[0];c*=Object(d.d)(this.params.vvSizeOffset[0]+l*this.params.vvSizeFactor[0],this.params.vvSizeMinSize[0],this.params.vvSizeMaxSize[0])}else o.has("size")&&(c*=o.get("size").data[0]);var u=r.camera,f=oe;Object(b.c)(f,r.point);var p=c*u.pixelRatio/2+4*u.pixelRatio;Object(h.v)(ve[0],f[0]-p,f[1]+p,0),Object(h.v)(ve[1],f[0]+p,f[1]+p,0),Object(h.v)(ve[2],f[0]+p,f[1]-p,0),Object(h.v)(ve[3],f[0]-p,f[1]-p,0);for(var v=0;v<4;v++)if(!u.unprojectFromRenderScreen(ve[v],ye[v]))return;y.e.fromPoints(u.eye,ye[0],ye[1],me),y.e.fromPoints(u.eye,ye[1],ye[2],ge),y.e.fromPoints(u.eye,ye[2],ye[3],Oe),y.e.fromPoints(u.eye,ye[3],ye[0],je);for(var g=Number.MAX_VALUE,j=X(this.params,o,e.indices)?s.length-2:s.length-5,w=0;w<j;w+=3){ne[0]=s[w]+n[12],ne[1]=s[w+1]+n[13],ne[2]=s[w+2]+n[14];var _=(w+3)%s.length;if(re[0]=s[_]+n[12],re[1]=s[_+1]+n[13],re[2]=s[_+2]+n[14],!(y.e.signedDistance(me,ne)<0&&y.e.signedDistance(me,re)<0||y.e.signedDistance(ge,ne)<0&&y.e.signedDistance(ge,re)<0||y.e.signedDistance(Oe,ne)<0&&y.e.signedDistance(Oe,re)<0||y.e.signedDistance(je,ne)<0&&y.e.signedDistance(je,re)<0)){if(u.projectToRenderScreen(ne,se),u.projectToRenderScreen(re,ce),se[2]<0&&ce[2]>0){Object(h.i)(ie,ne,re);var k=u.frustum,x=-y.e.signedDistance(k[4],ne)/Object(h.g)(ie,y.e.normal(k[4]));Object(h.d)(ie,ie,x),Object(h.e)(ne,ne,ie),u.projectToRenderScreen(ne,se)}else if(se[2]>0&&ce[2]<0){Object(h.i)(ie,re,ne);var S=u.frustum,T=-y.e.signedDistance(S[4],re)/Object(h.g)(ie,y.e.normal(S[4]));Object(h.d)(ie,ie,T),Object(h.e)(re,re,ie),u.projectToRenderScreen(re,ce)}else if(se[2]<0&&ce[2]<0)continue;se[2]=0,ce[2]=0;var E=y.d.distance2(y.d.fromPoints(se,ce,de),f);E<g&&(g=E,Object(h.j)(le,ne),Object(h.j)(ue,re))}}var C=r.rayBeginPoint,P=r.rayEndPoint;if(g<p*p){var I=Number.MAX_VALUE;if(y.d.closestLineSegmentPoint(y.d.fromPoints(le,ue,de),y.d.fromPoints(C,P,fe),ae)){Object(h.i)(ae,ae,C);var M=Object(h.o)(ae);Object(h.d)(ae,ae,1/M),I=M/Object(h.n)(C,P)}a(I,ae)}}else W.error("intersection assumes a translation-only matrix")}},{key:"computeAttachmentOrigin",value:function(e,t){var n=e.vertexAttributes;if(!n)return null;var r=e.indices,i=n.get("position");return Object(g.a)(i,r?r.get("position"):null,r&&X(this.params,n,r),t)}},{key:"createLayout",value:function(){var e=Object(v.a)().vec3f("position").f32("subdivisionFactor").vec2f("uv0").vec3f("auxpos1").vec3f("auxpos2");return this.params.vvSizeEnabled?e.f32("sizeFeatureAttribute"):e.f32("size"),this.params.vvColorEnabled?e.f32("colorFeatureAttribute"):e.vec4f("color"),this.params.vvOpacityEnabled&&e.f32("opacityFeatureAttribute"),e}},{key:"createBufferWriter",value:function(){return new K(this.layout,this.params)}},{key:"getGLMaterial",value:function(e){return 0===e.output||7===e.output||4===e.output||1===e.output?new J(e):void 0}},{key:"validateParameterValues",value:function(e){"miter"!==e.join&&(e.miterLimit=0),this.requiresTransparent(e)&&(e.transparent=!0)}},{key:"requiresTransparent",value:function(e){return!!((e.color&&e.color[3])<1||e.innerWidth>0&&this.colorRequiresTransparent(e.innerColor)||e.stipplePattern&&this.colorRequiresTransparent(e.stippleOffColor)||e.falloff>0)}},{key:"colorRequiresTransparent",value:function(e){return Object(l.k)(e)&&e[3]<1&&e[3]>0}}]),n}(w.a),J=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).updateParameters(),r}return Object(o.a)(n,[{key:"updateParameters",value:function(e){this.technique=this.techniqueRep.acquireAndReleaseExisting(G,this.material.getTechniqueConfig(this.output,e),this.technique)}},{key:"beginSlot",value:function(e){return this.technique.configuration.occluder?3===e||10===e||11===e:0===this.output||7===this.output?(this.targetSlot=this.technique.configuration.writeDepth?5:8,e===this.targetSlot):3===e}},{key:"_updateOccludeeState",value:function(e){e.hasOccludees!==this.material.params.sceneHasOcludees&&this.material.setParameterValues({sceneHasOcludees:e.hasOccludees})}},{key:"ensureParameters",value:function(e){0!==this.output&&7!==this.output||this._updateOccludeeState(e),this.updateParameters(e)}},{key:"bind",value:function(e,t){e.bindProgram(this.technique.program),this.technique.bindPass(e,this.material.getPassParameters(),t)}},{key:"getPipelineState",value:function(e,t){return this.technique.getPipelineState(e,t)}}]),n}(j.a),Y=Object(i.a)(Object(i.a)({width:0,color:[1,1,1,1],join:"miter",cap:"butt",miterLimit:5,writeDepth:!0,polygonOffset:!1,stipplePattern:null,stippleIntegerRepeats:!1,stippleOffColor:null,slicePlaneEnabled:!1,vvFastUpdate:!1,transparent:!1,isClosed:!1,falloff:0,innerWidth:0,innerColor:null,sceneHasOcludees:!1},w.b),x.Default),K=function(){function e(t,n){switch(Object(a.a)(this,e),this.params=n,this.numJoinSubdivisions=0,this.vertexBufferLayout=t,this.params.join){case"miter":case"bevel":this.numJoinSubdivisions=n.stipplePattern?1:0;break;case"round":this.numJoinSubdivisions=te}}return Object(o.a)(e,[{key:"isClosed",value:function(e){return X(this.params,e.vertexAttributes,e.indices)}},{key:"numCapSubdivisions",value:function(e){if(this.isClosed(e))return 0;switch(this.params.cap){case"butt":return 0;case"square":return 1;case"round":return ee}}},{key:"allocate",value:function(e){return this.vertexBufferLayout.createBuffer(e)}},{key:"elementCount",value:function(e){var t=2*this.numCapSubdivisions(e)+2,n=e.indices.get("position").length/2+1,r=this.isClosed(e),i=r?2:2*t,a=r?0:1,o=r?n:n-1;if(e.vertexAttributes.has("subdivisions"))for(var s=e.vertexAttributes.get("subdivisions").data,c=a;c<o;++c)i+=4+2*s[c];else i+=(o-a)*(2*this.numJoinSubdivisions+4);return i+=2}},{key:"write",value:function(e,t,n,r){var i=this,a=pe,o=he,s=be,c=t.vertexAttributes.get("position").data,l=t.indices&&t.indices.get("position"),u=this.numCapSubdivisions(t);l&&l.length!==2*(c.length/3-1)&&console.warn("RibbonLineMaterial does not support indices");var d=null;t.vertexAttributes.has("subdivisions")&&(d=t.vertexAttributes.get("subdivisions").data);var f=1,p=0;this.params.vvSizeEnabled?p=t.vertexAttributes.get("sizeFeatureAttribute").data[0]:t.vertexAttributes.has("size")&&(f=t.vertexAttributes.get("size").data[0]);var b=[1,1,1,1],v=0;this.params.vvColorEnabled?v=t.vertexAttributes.get("colorFeatureAttribute").data[0]:t.vertexAttributes.has("color")&&(b=t.vertexAttributes.get("color").data);var y=0;this.params.vvOpacityEnabled&&(y=t.vertexAttributes.get("opacityFeatureAttribute").data[0]);var m=c.length/3,g=e.transformation,O=new Float32Array(n.buffer),j=this.vertexBufferLayout.stride/4,w=r*j,_=w,k=function(e,t,n,r,a,o,s){if(O[w++]=t[0],O[w++]=t[1],O[w++]=t[2],O[w++]=r,O[w++]=a,O[w++]=o,O[w++]=e[0],O[w++]=e[1],O[w++]=e[2],O[w++]=n[0],O[w++]=n[1],O[w++]=n[2],i.params.vvSizeEnabled?O[w++]=p:O[w++]=f,i.params.vvColorEnabled)O[w++]=v;else{var c=Math.min(4*s,b.length-4);O[w++]=b[c+0],O[w++]=b[c+1],O[w++]=b[c+2],O[w++]=b[c+3]}i.params.vvOpacityEnabled&&(O[w++]=y)};w+=j,Object(h.v)(o,c[0],c[1],c[2]),g&&Object(h.l)(o,o,g);var x=this.isClosed(t);if(x){var S=c.length-3;Object(h.v)(a,c[S],c[S+1],c[S+2]),g&&Object(h.l)(a,a,g)}else{Object(h.j)(a,o),Object(h.v)(s,c[3],c[4],c[5]),g&&Object(h.l)(s,s,g);for(var T=0;T<u;++T){var E=1-T/u;k(a,o,s,E,1,-4,0),k(a,o,s,E,1,4,0)}k(a,o,s,0,0,-4,0),k(a,o,s,0,0,4,0),Object(h.j)(a,o),Object(h.j)(o,s)}for(var C=x?m:m-1,P=x?0:1;P<C;P++){var I=(P+1)%m*3;Object(h.v)(s,c[I+0],c[I+1],c[I+2]),g&&Object(h.l)(s,s,g),k(a,o,s,0,1,-1,P),k(a,o,s,0,1,1,P);for(var M=d?d[P]:this.numJoinSubdivisions,A=0;A<M;++A){var R=(A+1)/(M+1);k(a,o,s,R,1,-2,P),k(a,o,s,R,1,2,P)}k(a,o,s,1,0,-2,P),k(a,o,s,1,0,2,P),Object(h.j)(a,o),Object(h.j)(o,s)}if(x)w=Z(O,_+j,O,w,2*j);else{k(a,o,s,0,1,-5,C),k(a,o,s,0,1,5,C);for(var L=0;L<u;++L){var F=(L+1)/u;k(a,o,s,F,1,-5,C),k(a,o,s,F,1,5,C)}}Z(O,_+j,O,_,j),w=Z(O,w-j,O,w,j)}}]),e}();function Z(e,t,n,r,i){for(var a=0;a<i;a++)n[r++]=e[t++];return r}function X(e,t,n){return Q(e,t.get("position").data,n?n.get("position"):null)}function Q(e,t,n){return!!e.isClosed&&(n?n.length>2:t.length>6)}var ee=3,te=1,ne=Object(p.e)(),re=Object(p.e)(),ie=Object(p.e)(),ae=Object(p.e)(),oe=Object(p.e)(),se=Object(f.d)(),ce=Object(f.d)(),le=Object(p.e)(),ue=Object(p.e)(),de=y.d.create(),fe=y.d.create(),pe=Object(p.e)(),he=Object(p.e)(),be=Object(p.e)(),ve=[Object(f.d)(),Object(f.d)(),Object(f.d)(),Object(f.d)()],ye=[Object(p.e)(),Object(p.e)(),Object(p.e)(),Object(p.e)()],me=y.e.create(),ge=y.e.create(),Oe=y.e.create(),je=y.e.create()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StyledTopNavTitle=t.StyledTopNavList=t.StyledTopNavLink=t.StyledTopNavBrandImg=t.StyledTopNavBrandLink=t.StyledTopNavActions=t.StyledTopNav=t.StyledTopNavContainer=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(194)),i=n(176),a=n(164),o=n(350);var s=r.default.header.withConfig({displayName:"StyledTopNavContainer",componentId:"sc-10bmdec-0"})(["background-color:",";border-bottom:1px solid ",";position:relative;display:flex;width:100%;"],(function(e){return e.theme.palette.white}),(function(e){return e.theme.palette.lightestGray}));t.StyledTopNavContainer=s,s.defaultProps={theme:a.CalciteTheme};var c=r.default.div.withConfig({displayName:"StyledTopNav",componentId:"sc-10bmdec-1"})(["display:flex;align-items:center;background-color:",";width:",";max-width:",";padding:0 1rem;margin:0 auto;z-index:100;",";"],(function(e){return e.theme.palette.white}),(function(e){return e.contentWidth||e.theme.contentWidth}),(function(e){return e.contentMaxWidth||e.theme.contentMaxWidth}),(0,i.clearfix)());t.StyledTopNav=c,c.defaultProps={theme:a.CalciteTheme};var l=r.default.div.withConfig({displayName:"StyledTopNavActions",componentId:"sc-10bmdec-2"})(["display:flex;align-items:center;margin-left:auto;padding-left:",";html[dir='rtl'] &{margin-left:initial;margin-right:auto;padding-left:initial;padding-right:",";}> a,> button{margin-left:0.75em;&:first-child{margin-left:0;}}"],(function(e){return e.theme.baseline}),(function(e){return e.theme.baseline}));t.StyledTopNavActions=l,l.defaultProps={theme:a.CalciteTheme};var u=r.default.a.withConfig({displayName:"StyledTopNavBrandLink",componentId:"sc-10bmdec-3"})(["padding-right:",";display:inline-flex;align-items:center;text-decoration:none;html[dir='rtl'] &{padding-right:initial;padding-left:",";}"],(function(e){return e.theme.baseline}),(function(e){return e.theme.baseline}));t.StyledTopNavBrandLink=u,u.defaultProps={theme:a.CalciteTheme};var d=r.default.img.withConfig({displayName:"StyledTopNavBrandImg",componentId:"sc-10bmdec-4"})(["height:30px;"]);t.StyledTopNavBrandImg=d,d.defaultProps={theme:a.CalciteTheme};var f=(0,r.default)(o.CalciteA).withConfig({displayName:"StyledTopNavLink",componentId:"sc-10bmdec-5"})(["",";color:",";padding-top:1.1625rem;padding-bottom:calc(1.1625rem - 4px);border-bottom:4px solid transparent;line-height:1.5rem;display:inline-flex;align-items:center;margin-left:0.75em;font-weight:300;html[dir='rtl'] &{margin-left:initial;margin-right:0.75em;}&:hover,&:focus{color:",";border-bottom-color:",";text-decoration:none;}&:focus{outline:none;}",";&.active,.active > &{color:",";border-bottom-color:",";}"],(0,i.fontSize)(0),(function(e){return e.theme.palette.darkGray}),(function(e){return e.theme.palette.blue}),(function(e){return e.theme.palette.blue}),(function(e){return e.active&&(0,r.css)(["color:",";border-bottom-color:",";"],(function(e){return e.theme.palette.offBlack}),e.theme.palette.blue)}),(function(e){return e.theme.palette.offBlack}),(function(e){return e.theme.palette.blue}));t.StyledTopNavLink=f,f.defaultProps={theme:a.CalciteTheme};var p=r.default.nav.withConfig({displayName:"StyledTopNavList",componentId:"sc-10bmdec-6"})(["padding:0;flex:1 0 auto;margin-left:-0.75em;html[dir='rtl'] &{margin-left:initial;margin-right:-0.75em;}",";"],(function(e){return e.right&&(0,r.css)(["float:right;html[dir='rtl'] &{float:left;}"])}));t.StyledTopNavList=p,p.defaultProps={theme:a.CalciteTheme};var h=(0,r.default)(o.CalciteA).withConfig({displayName:"StyledTopNavTitle",componentId:"sc-10bmdec-7"})(["margin-right:1.5rem;padding-top:1.125rem;padding-bottom:1.25rem;",";color:",";html[dir='rtl'] &{margin-right:initial;margin-left:1.5rem;}&:hover{text-decoration:none;}"],(0,i.fontSize)(1),(function(e){return e.theme.palette.black}));t.StyledTopNavTitle=h,h.defaultProps={theme:a.CalciteTheme}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p}));var r=n(35),i=n(7),a=n.n(i),o=n(15),s=n(4),c=n(40),l=n(133),u=n(300);function d(e,t){return f.apply(this,arguments)}function f(){return(f=Object(o.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load();case 2:return e.abrupt("return",p(t,n));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e,t){return h.apply(this,arguments)}function h(){return(h=Object(o.a)(a.a.mark((function e(t,n){var i,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],n((function e(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];for(var o=0,u=n;o<u.length;o++){var d=u[o];Object(s.j)(d)||(Array.isArray(d)?e.apply(void 0,Object(r.a)(d)):c.a.isCollection(d)?d.forEach((function(t){return e(t)})):l.a.isLoadable(d)&&i.push(d))}})),d=null,e.next=5,Object(u.b)(i,function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t1=!1,e.next=3,Object(u.c)(b(t)?t.loadAll():t.load());case 3:if(e.t2=e.sent.ok,e.t0=e.t1!==e.t2,e.t0){e.next=7;break}e.t0=d;case 7:if(e.t3=e.t0,e.t3){e.next=10;break}d=t;case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:if(!d){e.next=7;break}throw d.loadError;case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return"loadAll"in e&&"function"==typeof e.loadAll}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));var r=n(14),i=n(4),a=n(59),o=n(66);function s(e,t,n){if(Object(i.j)(t)||Object(i.j)(n)||n.vcsWkid||Object(a.c)(t,n))return null;var s=Object(o.e)(t)/Object(o.e)(n);if(1===s)return null;switch(e){case"point":case"esriGeometryPoint":return function(e){return function(e,t){e&&null!=e.z&&(e.z*=t)}(e,s)};case"polyline":case"esriGeometryPolyline":return function(e){return function(e,t){if(e){var n,i=Object(r.a)(e.paths);try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=Object(r.a)(o);try{for(s.s();!(a=s.n()).done;){var c=a.value;c.length>2&&(c[2]*=t)}}catch(l){s.e(l)}finally{s.f()}}}catch(l){i.e(l)}finally{i.f()}}}(e,s)};case"polygon":case"esriGeometryPolygon":return function(e){return function(e,t){if(e){var n,i=Object(r.a)(e.rings);try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=Object(r.a)(o);try{for(s.s();!(a=s.n()).done;){var c=a.value;c.length>2&&(c[2]*=t)}}catch(l){s.e(l)}finally{s.f()}}}catch(l){i.e(l)}finally{i.f()}}}(e,s)};case"multipoint":case"esriGeometryMultipoint":return function(e){return function(e,t){if(e){var n,i=Object(r.a)(e.points);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.length>2&&(a[2]*=t)}}catch(o){i.e(o)}finally{i.f()}}}(e,s)};default:return null}}function c(e,t,n){if(null==e.hasM||e.hasZ){var i,a=Object(r.a)(t);try{for(a.s();!(i=a.n()).done;){var o,s=i.value,c=Object(r.a)(s);try{for(c.s();!(o=c.n()).done;){var l=o.value;l.length>2&&(l[2]*=n)}}catch(u){c.e(u)}finally{c.f()}}}catch(u){a.e(u)}finally{a.f()}}}function l(e,t,n){if((e||t)&&n){var r=Object(o.e)(n);u(e,n,r),u(t,n,r)}}function u(e,t,n){if(e){var i,a=Object(r.a)(e);try{for(a.s();!(i=a.n()).done;){d(i.value.geometry,t,n)}}catch(o){a.e(o)}finally{a.f()}}}function d(e,t,n){if(e&&e.spatialReference&&!Object(a.c)(e.spatialReference,t)){var i=Object(o.e)(e.spatialReference)/n;if(1!==i)if("x"in e)null!=e.z&&(e.z*=i);else if("rings"in e)c(e,e.rings,i);else if("paths"in e)c(e,e.paths,i);else if("points"in e&&(null==e.hasM||e.hasZ)){var s,l=Object(r.a)(e.points);try{for(l.s();!(s=l.n()).done;){var u=s.value;u.length>2&&(u[2]*=i)}}catch(d){l.e(d)}finally{l.f()}}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r,i=n(29),a=n(34);function o(e){e.code.add(Object(a.a)(r||(r=Object(i.a)(["\n    // This is the maximum float value representable as 32bit fixed point,\n    // it is rgba2float(vec4(1)) inlined.\n    const float MAX_RGBA_FLOAT =\n      255.0 / 256.0 +\n      255.0 / 256.0 / 256.0 +\n      255.0 / 256.0 / 256.0 / 256.0 +\n      255.0 / 256.0 / 256.0 / 256.0 / 256.0;\n\n    // Factors to convert to fixed point, i.e. factors (256^0, 256^1, 256^2, 256^3)\n    const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);\n\n    vec4 float2rgba(const float value) {\n      // Make sure value is in the domain we can represent\n      float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);\n\n      // Decompose value in 32bit fixed point parts represented as\n      // uint8 rgba components. Decomposition uses the fractional part after multiplying\n      // by a power of 256 (this removes the bits that are represented in the previous\n      // component) and then converts the fractional part to 8bits.\n      vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);\n\n      // Convert uint8 values (from 0 to 255) to floating point representation for\n      // the shader\n      const float toU8AsFloat = 1.0 / 255.0;\n\n      return fixedPointU8 * toU8AsFloat;\n    }\n\n    // Factors to convert rgba back to float\n    const vec4 RGBA_2_FLOAT_FACTORS = vec4(\n      255.0 / (256.0),\n      255.0 / (256.0 * 256.0),\n      255.0 / (256.0 * 256.0 * 256.0),\n      255.0 / (256.0 * 256.0 * 256.0 * 256.0)\n    );\n\n    float rgba2float(vec4 rgba) {\n      // Convert components from 0->1 back to 0->255 and then\n      // add the components together with their corresponding\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\n      return dot(rgba, RGBA_2_FLOAT_FACTORS);\n    }\n  "]))))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(2),i=n(3),a=n(5),o=n(6),s=n(4),c=n(88),l=n(119),u=n(480),d=n(488),f=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e.view))._resources=null,i._transform=Object(l.b)(),i}return Object(i.a)(n,[{key:"object",get:function(){return Object(s.k)(this._resources)?this._resources.object:null}},{key:"transform",get:function(){return this._transform},set:function(e){Object(c.c)(this._transform,e),Object(s.k)(this._resources)&&(this._resources.object.transformation=this._transform,this._resources.layer.commit())}},{key:"recreate",value:function(){this.attached&&this.createResources()}},{key:"recreateGeometry",value:function(){if(!Object(s.j)(this._resources)){var e=this._resources.object,t=this.view._stage;t.removeMany(e.geometries),e.removeAllGeometries(),this.createGeometries(e),this.visible||e.setVisible(this.visible),t.addMany(e.geometries),this._resources.layer.commit()}}},{key:"createResources",value:function(){this.destroyResources();var e=this.view._stage;if(e){var t=new d.a({isPickable:!1});e.add(t);var n=new u.a({castShadow:!1});n.transformation=this._transform,this.createExternalResources(),this.createGeometries(n),e.addMany(n.geometries),this.forEachExternalMaterial((function(t){return e.add(t)})),e.add(n),t.add(n),t.commit(),this.visible||(n.setVisible(!1),t.commit()),this._resources={layer:t,object:n}}}},{key:"destroyResources",value:function(){var e=this.view._stage;!Object(s.j)(this._resources)&&e&&(e.remove(this._resources.object),e.remove(this._resources.layer),this.forEachExternalMaterial((function(t){e.remove(t),t.dispose()})),e.removeMany(this._resources.object.geometries),this._resources.object.dispose(),this.destroyExternalResources(),this._resources=null)}},{key:"updateVisibility",value:function(e){Object(s.j)(this._resources)||(this._resources.object.setVisible(e),this._resources.layer.commit())}}]),n}(n(549).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return G})),n.d(t,"c",(function(){return V})),n.d(t,"d",(function(){return z}));var r,i,a,o,s,c,l,u,d,f,p,h,b,v,y,m,g,O,j,w,_=n(29),k=n(60),x=n(97),S=n(33),T=n(34),E=n(256),C=n(378),P=n(759),I=n(217),M=n(328),A=n(450),R=n(393),L=n(510),F=n(267),D=n(380),N=n(263);function V(e){var t=new E.a,n=e.signedDistanceFieldEnabled;if(t.include(P.a),t.include(A.a,e),t.include(I.a,e),6===e.output)return t.include(L.b,e),t;t.include(M.a),t.fragment.include(R.a),t.fragment.include(C.a),t.include(D.a,e),t.varyings.add("vcolor","vec4"),t.varyings.add("vtc","vec2"),t.varyings.add("vsize","vec2"),e.binaryHighlightOcclusionEnabled&&t.varyings.add("voccluded","float"),t.vertex.uniforms.add("screenOffset","vec2").add("anchorPos","vec2").add("textureCoordinateScaleFactor","vec2").add("materialColor","vec4"),n&&t.vertex.uniforms.add("outlineColor","vec4"),e.screenSizePerspectiveEnabled&&t.vertex.uniforms.add("screenSizePerspective","vec4"),(e.debugDrawBorder||e.binaryHighlightOcclusionEnabled)&&t.varyings.add("debugBorderCoords","vec4"),t.attributes.add("uv0","vec2"),t.attributes.add("color","vec4"),t.attributes.add("size","vec2"),t.attributes.add("auxpos2","vec4"),t.vertex.code.add(Object(T.a)(r||(r=Object(_.a)(["\n    void main(void) {\n      ProjectHUDAux projectAux;\n      vec4 posProj = projectPositionHUD(projectAux);\n\n      if (rejectBySlice(projectAux.posModel)) {\n        // Project outside of clip plane\n        gl_Position = vec4(1e038, 1e038, 1e038, 1.0);\n        return;\n      }\n      vec2 inputSize;\n      ","\n\n      ","\n\n      vec2 combinedSize = inputSize * pixelRatio;\n      vec4 quadOffset = vec4(0.0);\n\n      ","\n\n      ","\n    "])),e.screenSizePerspectiveEnabled?Object(T.a)(i||(i=Object(_.a)(["\n      inputSize = screenSizePerspectiveScaleVec2(size, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspective);\n      vec2 screenOffsetScaled = screenSizePerspectiveScaleVec2(screenOffset, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspectiveAlignment);\n         "]))):Object(T.a)(a||(a=Object(_.a)(["\n      inputSize = size;\n      vec2 screenOffsetScaled = screenOffset;"]))),e.vvSize?"inputSize *= vvScale(auxpos2).xx;":"",e.occlusionTestEnabled||e.binaryHighlightOcclusionEnabled?"bool visible = testVisibilityHUD(posProj);":"",e.binaryHighlightOcclusionEnabled?"voccluded = visible ? 0.0 : 1.0;":""));var w=Object(T.a)(o||(o=Object(_.a)(["\n      vec2 uv01 = floor(uv0);\n      vec2 uv = uv0 - uv01;\n      quadOffset.xy = ((uv01 - anchorPos) * 2.0 * combinedSize + screenOffsetScaled) / viewport.zw * posProj.w;\n  "]))),k=e.pixelSnappingEnabled?n?Object(T.a)(s||(s=Object(_.a)(["\n  posProj = alignToPixelOrigin(posProj, viewport.zw) + quadOffset;"]))):Object(T.a)(c||(c=Object(_.a)(["\n  posProj += quadOffset;\n  if (inputSize.x == size.x) {\n    posProj = alignToPixelOrigin(posProj, viewport.zw);\n  }"]))):Object(T.a)(l||(l=Object(_.a)(["posProj += quadOffset;"])));t.vertex.code.add(Object(T.a)(u||(u=Object(_.a)(["\n      ","\n      ","\n      ","\n\n      bool alphaDiscard = vcolor.a < ",";\n      ",'\n      if (alphaDiscard) {\n        // "early discard" if both symbol color (= fill) and outline color (if applicable) are transparent\n        gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n        return;\n      } else {\n        ',"\n        gl_Position = posProj;\n      }\n\n      vtc = uv * textureCoordinateScaleFactor;\n\n      ","\n      vsize = inputSize;\n      ","\n    }\n    "])),e.occlusionTestEnabled?"if (visible) {":"",w,e.vvColor?"vcolor = vvGetColor(auxpos2, vvColorValues, vvColorColors) * materialColor;":"vcolor = color / 255.0 * materialColor;",T.a.float(N.c),n?"alphaDiscard = alphaDiscard && outlineColor.a < ".concat(T.a.float(N.c),";"):"",k,e.debugDrawBorder?"debugBorderCoords = vec4(uv01, 1.5 / combinedSize);":"",e.occlusionTestEnabled?Object(T.a)(d||(d=Object(_.a)(["} else { vtc = vec2(0.0);\n        ",""])),e.debugDrawBorder?"debugBorderCoords = vec4(0.5, 0.5, 1.5 / combinedSize);}":"}"):"")),t.fragment.uniforms.add("tex","sampler2D"),n&&(t.fragment.uniforms.add("outlineColor","vec4"),t.fragment.uniforms.add("outlineSize","float"));var x=e.debugDrawBorder?Object(T.a)(f||(f=Object(_.a)(["(isBorder > 0.0 ? 0.0 : ",")"])),T.a.float(N.b)):T.a.float(N.b),S=Object(T.a)(p||(p=Object(_.a)(["\n    ","\n\n    ","\n\n    ","\n  "])),e.debugDrawBorder?Object(T.a)(h||(h=Object(_.a)(["\n      float isBorder = float(any(lessThan(debugBorderCoords.xy, debugBorderCoords.zw)) || any(greaterThan(debugBorderCoords.xy, 1.0 - debugBorderCoords.zw)));"]))):"",n?Object(T.a)(b||(b=Object(_.a)(["\n      vec4 fillPixelColor = vcolor;\n\n      // Attempt to sample texel centers to avoid that thin cross outlines\n      // disappear with large symbol sizes.\n      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/7058#issuecomment-603041\n      const float txSize = 128.0;\n      const float texelSize = 1.0 / txSize;\n      // Calculate how much we have to add/subtract to/from each texel to reach the size of an onscreen pixel\n      vec2 scaleFactor = (vsize - txSize) * texelSize;\n      vec2 samplePos = vtc + (vec2(1.0, -1.0) * texelSize) * scaleFactor;\n\n      // Get distance and map it into [-0.5, 0.5]\n      float d = rgba2float(texture2D(tex, samplePos)) - 0.5;\n\n      // Distance in output units (i.e. pixels)\n      float dist = d * vsize.x;\n\n      // Create smooth transition from the icon into its outline\n      float fillAlphaFactor = clamp(0.5 - dist, 0.0, 1.0);\n      fillPixelColor.a *= fillAlphaFactor;\n\n      if (outlineSize > 0.25) {\n        vec4 outlinePixelColor = outlineColor;\n        float clampedOutlineSize = min(outlineSize, 0.5*vsize.x);\n\n        // Create smooth transition around outline\n        float outlineAlphaFactor = clamp(0.5 - (abs(dist) - 0.5*clampedOutlineSize), 0.0, 1.0);\n        outlinePixelColor.a *= outlineAlphaFactor;\n\n        if (\n          outlineAlphaFactor + fillAlphaFactor < "," ||\n          fillPixelColor.a + outlinePixelColor.a < ","\n        ) {\n          discard;\n        }\n\n        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Description)\n        float compositeAlpha = outlinePixelColor.a + fillPixelColor.a * (1.0 - outlinePixelColor.a);\n        vec3 compositeColor = vec3(outlinePixelColor) * outlinePixelColor.a +\n          vec3(fillPixelColor) * fillPixelColor.a * (1.0 - outlinePixelColor.a);\n\n        gl_FragColor = vec4(compositeColor, compositeAlpha);\n      } else {\n        if (fillAlphaFactor < ",") {\n          discard;\n        }\n\n        gl_FragColor = premultiplyAlpha(fillPixelColor);\n      }\n\n      // visualize SDF:\n      // gl_FragColor = vec4(clamp(-dist/vsize.x*2.0, 0.0, 1.0), clamp(dist/vsize.x*2.0, 0.0, 1.0), 0.0, 1.0);\n      "])),x,T.a.float(N.c),x):Object(T.a)(v||(v=Object(_.a)(["\n          vec4 texColor = texture2D(tex, vtc, -0.5);\n          if (texColor.a < ",") {\n            discard;\n          }\n          gl_FragColor = texColor * premultiplyAlpha(vcolor);\n          "])),x),e.debugDrawBorder?Object(T.a)(y||(y=Object(_.a)(["gl_FragColor = mix(gl_FragColor, vec4(1.0, 0.0, 1.0, 1.0), isBorder);"]))):"");return 7===e.output&&t.fragment.code.add(Object(T.a)(m||(m=Object(_.a)(["\n      void main() {\n        ","\n        gl_FragColor = vec4(gl_FragColor.a);\n      }\n      "])),S)),0===e.output&&t.fragment.code.add(Object(T.a)(g||(g=Object(_.a)(["\n    void main() {\n      ","\n      ","\n    }\n    "])),S,e.FrontFacePass?"gl_FragColor.rgb /= gl_FragColor.a;":"")),4===e.output&&(t.include(F.a),t.fragment.code.add(Object(T.a)(O||(O=Object(_.a)(["\n    void main() {\n      ","\n      ","\n    }\n    "])),S,e.binaryHighlightOcclusionEnabled?Object(T.a)(j||(j=Object(_.a)(["\n          if (voccluded == 1.0) {\n            gl_FragColor = vec4(1.0, 1.0, 0.0, 1.0);\n          } else {\n            gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n          }"]))):"outputHighlight();"))),t}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B;return e.textureIsSignedDistanceField?U(e.anchorPos,e.distanceFieldBoundingBox,t):Object(S.c)(t,e.anchorPos),t}function U(e,t,n){n[0]=e[0]*(t[2]-t[0])+t[0],n[1]=e[1]*(t[3]-t[1])+t[1]}(w||(w={})).bindUniforms=function(e,t,n){e.setUniform4fv("materialColor",t.color),t.textureIsSignedDistanceField&&(t.outlineColor[3]<=0||t.outlineSize<=0?(e.setUniform4fv("outlineColor",x.b),e.setUniform1f("outlineSize",0)):(e.setUniform4fv("outlineColor",t.outlineColor),e.setUniform1f("outlineSize",t.outlineSize))),e.setUniform2f("screenOffset",2*t.screenOffset[0]*n,2*t.screenOffset[1]*n),e.setUniform2fv("anchorPos",z(t))};var B=Object(k.a)(),G=Object.freeze({__proto__:null,build:V,get HUDMaterial(){return w},calculateAnchorPosForRendering:z})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"ButtonGroup",{enumerable:!0,get:function(){return i.default}});var r=a(n(849)),i=a(n(674));function a(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return c}));var r=n(10),i=n(14),a=n(39),o=n(152);function s(e){var t=Object(o.k)(e);if("CIMTextSymbol"===t.type)return t.height;var n=0;if(t.symbolLayers){var r,a=Object(i.a)(t.symbolLayers);try{for(a.s();!(r=a.n()).done;){var s=r.value;Object(o.g)(s)&&s.size>n?n=s.size:Object(o.i)(s)&&s.width>n?n=s.width:Object(o.f)(s)}}catch(c){a.e(c)}finally{a.f()}}return n}function c(e,t,n){var r=Object(o.k)(e),a=s(e);0!==a?l(r,t/a,!1,n):function(e,t){if("CIMTextSymbol"!==e.type){if(e.symbolLayers){var n,r=Object(i.a)(e.symbolLayers);try{for(r.s();!(n=r.n()).done;){var a=n.value;switch(a.type){case"CIMPictureMarker":case"CIMVectorMarker":a.size=t;break;case"CIMPictureStroke":case"CIMSolidStroke":a.width=t}}}catch(o){r.e(o)}finally{r.f()}}}else e.height=t}(r,t)}function l(e,t,n,a){if("CIMTextSymbol"!==e.type){if(n&&e.effects){var o,s=Object(i.a)(e.effects);try{for(s.s();!(o=s.n()).done;){d(o.value,t)}}catch(h){s.e(h)}finally{s.f()}}if(e.symbolLayers){var c,f=Object(i.a)(e.symbolLayers);try{for(f.s();!(c=f.n()).done;){var p=c.value;switch(p.type){case"CIMPictureMarker":case"CIMVectorMarker":u(p,t,a);break;case"CIMPictureStroke":case"CIMSolidStroke":null!=a&&a.preserveOutlineWidth||(p.width*=t);break;case"CIMPictureFill":p.height*=t,p.offsetX*=t,p.offsetY*=t;break;case"CIMHatchFill":l(p.lineSymbol,t,!0,Object(r.a)(Object(r.a)({},a),{},{preserveOutlineWidth:!1})),p.offsetX*=t,p.offsetY*=t,p.separation*=t}}}catch(h){f.e(h)}finally{f.f()}}}else e.height*=t}function u(e,t,n){if(e.markerPlacement&&function(e,t){switch(Object(o.h)(e)&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset*=t,e.offsetAlongLine*=t,e.placementTemplate&&e.placementTemplate.length){var n=e.placementTemplate.map((function(e){return e*t}));e.placementTemplate=n}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset*=t,e.placementTemplate&&e.placementTemplate.length){var r=e.placementTemplate.map((function(e){return e*t}));e.placementTemplate=r}break;case"CIMMarkerPlacementOnLine":e.startPointOffset*=t;break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine*=t;break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition*=t,e.endPosition*=t;break;case"CIMMarkerPlacementPolygonCenter":e.offsetX*=t,e.offsetY*=t;break;case"CIMMarkerPlacementInsidePolygon":e.offsetX*=t,e.offsetY*=t,e.stepX*=t,e.stepY*=t}}(e.markerPlacement,t),e.offsetX*=t,e.offsetY*=t,e.anchorPoint&&"Absolute"===e.anchorPointUnits&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size*=t,"CIMVectorMarker"===e.type&&e.markerGraphics){var r,a=Object(i.a)(e.markerGraphics);try{for(a.s();!(r=a.n()).done;){var s=r.value;e.scaleSymbolsProportionally||l(s.symbol,t,!0,n)}}catch(c){a.e(c)}finally{a.f()}}}function d(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width*=t;break;case"CIMGeometricEffectBuffer":e.size*=t;break;case"CIMGeometricEffectCut":e.beginCut*=t,e.endCut*=t,e.middleCut*=t;break;case"CIMGeometricEffectDashes":if(e.customEndingOffset*=t,e.offsetAlongLine*=t,e.dashTemplate&&e.dashTemplate.length){var n=e.dashTemplate.map((function(e){return e*t}));e.dashTemplate=n}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length*=t;break;case"CIMGeometricEffectMove":e.offsetX*=t,e.offsetY*=t;break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset*=t;break;case"CIMGeometricEffectRegularPolygon":e.radius*=t;break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth*=t,e.length*=t,e.toWidth*=t;break;case"CIMGeometricEffectWave":e.amplitude*=t,e.period*=t}}function f(e){var t=[];return p(Object(o.k)(e),t),t.length?new a.a(Object(o.e)(t[0])):null}function p(e,t){var n;n="CIMTextSymbol"===e.type?e.symbol:e;var r="CIMPolygonSymbol"===e.type;if(n.symbolLayers){var a,s=Object(i.a)(n.symbolLayers);try{for(s.s();!(a=s.n()).done;){var c=a.value;if(!(c.colorLocked||r&&(Object(o.i)(c)||Object(o.g)(c)&&c.markerPlacement&&Object(o.h)(c.markerPlacement))))switch(c.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":break;case"CIMVectorMarker":c.markerGraphics.forEach((function(e){p(e.symbol,t)}));break;case"CIMSolidStroke":case"CIMSolidFill":h(t,c.color);break;case"CIMHatchFill":p(c.lineSymbol,t)}}}catch(l){s.e(l)}finally{s.f()}}}function h(e,t){var n,r=Object(i.a)(e);try{for(r.s();!(n=r.n()).done;){if(n.value.join(".")===t.join("."))return}}catch(a){r.e(a)}finally{r.f()}e.push(t)}function b(e,t){t instanceof a.a||(t=new a.a(t)),v(Object(o.k)(e),t)}function v(e,t){var n;n="CIMTextSymbol"===e.type?e.symbol:e;var r="CIMPolygonSymbol"===e.type;if(n.symbolLayers){var a,s=Object(i.a)(n.symbolLayers);try{for(s.s();!(a=s.n()).done;){var c=a.value;if(!c.colorLocked&&(!r||!(Object(o.i)(c)||Object(o.g)(c)&&c.markerPlacement&&Object(o.h)(c.markerPlacement)))){var l=t.toArray(0);switch(c.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":break;case"CIMVectorMarker":c.markerGraphics.forEach((function(e){v(e.symbol,t)}));break;case"CIMSolidStroke":case"CIMSolidFill":c.color=l;break;case"CIMHatchFill":v(c.lineSymbol,t)}}}}catch(u){s.e(u)}finally{s.f()}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return v}));var r=n(2),i=n(3),a=n(5),o=n(6),s=n(0),c=(n(16),n(13)),l=(n(17),n(1)),u=n(8),d=(n(12),n(19),n(20),n(40)),f=n(184),p=n(74),h=d.a.ofType(p.a);c.a.getLogger("esri.support.GraphicsCollection");var b=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).on("before-add",(function(e){e.item||e.preventDefault()})),i.on("after-add",(function(e){return i._own(e.item)})),i.on("after-remove",(function(e){e.item.layer=null})),i}return Object(i.a)(n,[{key:"destroy",value:function(){this._unownAll()}},{key:"owner",get:function(){return this._get("owner")},set:function(e){e!==this._get("owner")&&(this._unownAll(),this._set("owner",e),this._ownAll())}},{key:"_createNewInstance",value:function(e){return new h(e)}},{key:"_ownAll",value:function(){var e=this;this.items.forEach((function(t){return e._own(t)}))}},{key:"_own",value:function(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}},{key:"_unownAll",value:function(){var e=this;this.items.forEach((function(t){return e._unown(t)}))}},{key:"_unown",value:function(e){e.layer===this.owner&&(e.layer=null)}}]),n}(h);Object(s.a)([Object(l.b)()],b.prototype,"owner",null),b=Object(s.a)([Object(u.a)("esri.support.GraphicsCollection")],b);var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"graphics";return{type:b,cast:f.a,set:function(t){var n=Object(f.b)(t,this._get(e),b);n.owner=this,this._set(e,n)}}},y=b;t.b=y},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(452);function i(e,t){if(e){if("string"===typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(496);function i(e){var t={q:"id: "+e.id+" AND group: "+e.groupId,start:1,num:10,sortField:"title",authentication:e.authentication,httpMethod:"POST"};return Object(r.a)(t).then((function(t){if(t.total>0)return t.results.some((function(t){return t.id===e.id}))}))}},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(5),o=n(6),s=n(0),c=(n(16),n(13),n(17),n(1)),l=n(8),u=(n(12),n(19),n(20),n(125)),d=n(120),f=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).outline=null,i.type=null,i}return Object(i.a)(n,[{key:"hash",value:function(){return"".concat(this.type,".").concat(this.outline&&this.outline.hash())}}]),n}(u.a);Object(s.a)([Object(c.b)({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":d.default}},json:{default:null,write:!0}})],f.prototype,"outline",void 0),Object(s.a)([Object(c.b)({type:["simple-fill","picture-fill"],readOnly:!0})],f.prototype,"type",void 0);var p=f=Object(s.a)([Object(l.a)("esri.symbols.FillSymbol")],f);t.a=p},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(8),d=(n(12),n(19),n(20),n(28)),f=n(127),p=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).screenLength=0,e.minWorldLength=0,e}return Object(a.a)(n,[{key:"clone",value:function(){return new r({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}}]),n}(d.a);Object(c.a)([Object(l.b)(f.b)],p.prototype,"screenLength",void 0),Object(c.a)([Object(l.b)({type:Number,json:{write:!0,default:0}})],p.prototype,"minWorldLength",void 0),Object(c.a)([Object(l.b)({type:Number,json:{write:!0}})],p.prototype,"maxWorldLength",void 0);var h=p=r=Object(c.a)([Object(u.a)("esri.symbols.support.Symbol3DVerticalOffset")],p);t.a=h},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(5),o=n(6),s=n(0),c=(n(16),n(13),n(17),n(1)),l=n(8),u=(n(12),n(19),n(20),n(125)),d=n(38),f=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).angle=0,i.type=null,i.xoffset=0,i.yoffset=0,i.size=9,i}return Object(i.a)(n,[{key:"hash",value:function(){return"".concat(this.type,".").concat(this.angle,".").concat(this.size,".").concat(this.xoffset,".").concat(this.yoffset)}}]),n}(u.a);Object(s.a)([Object(c.b)({type:Number,json:{read:function(e){return e&&-1*e},write:function(e,t){return t.angle=e&&-1*e}}})],f.prototype,"angle",void 0),Object(s.a)([Object(c.b)({type:["simple-marker","picture-marker"],readOnly:!0})],f.prototype,"type",void 0),Object(s.a)([Object(c.b)({type:Number,cast:d.j,json:{write:!0}})],f.prototype,"xoffset",void 0),Object(s.a)([Object(c.b)({type:Number,cast:d.j,json:{write:!0}})],f.prototype,"yoffset",void 0),Object(s.a)([Object(c.b)({type:Number,cast:function(e){return"auto"===e?e:Object(d.j)(e)},json:{write:!0}})],f.prototype,"size",void 0);var p=f=Object(s.a)([Object(l.a)("esri.symbols.MarkerSymbol")],f);t.a=p},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(2),i=n(3),a=n(5),o=n(6),s=n(0),c=n(4),l=n(180),u=n(1),d=n(8),f=n(129),p=n(355),h=n(36),b=n(51),v=n(25),y=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).updating=!1,e.handleId=0,e.handles=new b.a,e.scheduleHandleId=0,e.pendingPromises=new Set,e}return Object(i.a)(n,[{key:"destroy",value:function(){this.removeAll(),this.handles.destroy()}},{key:"add",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=0!=(1&i),o=++this.handleId;a||this.installSyncUpdatingWatch(e,t,o);var s=0!=(2&i)?Object(v.a)(e,t,n,a):e.watch(t,n,a);return this.handles.add(s,o),{remove:function(){r.handles.remove(o)}}}},{key:"addOnCollectionPropertyChange",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=0!=(2&i),o=++this.handleId;return this.handles.add([Object(v.b)(e,t,"after-changes",this.createSyncUpdatingCallback()),Object(v.b)(e,t,"change",n,a?function(e){n({added:e.items,removed:[],moved:[],target:e})}:void 0)],o),{remove:function(){r.handles.remove(o)}}}},{key:"addOnCollectionChange",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=0!=(2&r),a=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",t)],a),i&&t({added:e.items,removed:[],moved:[],target:e}),{remove:function(){n.handles.remove(a)}}}},{key:"addPromise",value:function(e){var t=this;if(Object(c.j)(e))return e;var n=++this.handleId;this.handles.add({remove:function(){t.pendingPromises.delete(e)&&(0!==t.pendingPromises.size||t.handles.has(m)||t._set("updating",!1))}},n),this.pendingPromises.add(e),this._set("updating",!0);var r=function(){return t.handles.remove(n)};return e.then(r,r),e}},{key:"removeAll",value:function(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}},{key:"installSyncUpdatingWatch",value:function(e,t,n){var r=this.createSyncUpdatingCallback(),i=Object(p.a)((function(){return Object(l.c)(e,t)}),r);return this.handles.add(i,n),i}},{key:"createSyncUpdatingCallback",value:function(){var e=this;return function(){e.handles.remove(m),++e.scheduleHandleId;var t=e.scheduleHandleId;e._get("updating")||e._set("updating",!0),e.handles.add(Object(f.b)((function(){t===e.scheduleHandleId&&(e._set("updating",e.pendingPromises.size>0),e.handles.remove(m))})),m)}}}]),n}(h.a);Object(s.a)([Object(u.b)({readOnly:!0})],y.prototype,"updating",void 0),y=Object(s.a)([Object(d.a)("esri.views.support.WatchUpdatingTracking")],y);var m=-42},function(e,t,n){"use strict";var r=n(2),i=n(5),a=n(6),o=n(0),s=(n(16),n(13),n(17),n(1)),c=n(8),l=(n(12),n(19),n(20),function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).type=null,e}return n}(n(28).a));Object(o.a)([Object(s.b)({type:["selection","cluster"],readOnly:!0,json:{read:!1,write:!0}})],l.prototype,"type",void 0);var u=l=Object(o.a)([Object(c.a)("esri.layers.support.FeatureReduction")],l);t.a=u},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n(4);function i(e){return e&&"function"==typeof e.highlight}function a(e,t,n){return Object(r.j)(e)||e>n&&(0===t||e<t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(16),n(4);function r(e,t){return!!i(e.spatialReference,t.spatialReference)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.m===t.m}function i(e,t){return e===t||e&&t&&e.equals(t)}},function(e,t,n){e.exports=n(818)},function(e,t,n){var r=n(865);e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(67);function i(e,t){var n=t;return"undefined"!==typeof window&&window.location&&window.location.host?n.params.referer=window.location.host:n.params.referer=r.b,Object(r.d)(e,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(232),i=function(){function e(e){void 0===e&&(e=""),this.termStack=[],this.rangeStack=[],this.openGroups=0,this.q=e}return e.prototype.match=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.termStack=this.termStack.concat(e),this},e.prototype.in=function(e){var t="`in("+(e?'"'+e+'"':"")+")`";return this.hasRange||this.hasTerms?(e&&"*"!==e&&(this.q+=e+":"),this.commit()):(Object(r.a)(t+" was called with no call to `match(...)` or `from(...)`/`to(...)`. Your query was not modified."),this)},e.prototype.startGroup=function(){return this.commit(),this.openGroups>0&&(this.q+=" "),this.openGroups++,this.q+="(",this},e.prototype.endGroup=function(){return this.openGroups<=0?(Object(r.a)("`endGroup(...)` was called without calling `startGroup(...)` first. Your query was not modified."),this):(this.commit(),this.openGroups--,this.q+=")",this)},e.prototype.and=function(){return this.addModifier("and")},e.prototype.or=function(){return this.addModifier("or")},e.prototype.not=function(){return this.addModifier("not")},e.prototype.from=function(e){return this.hasTerms?(Object(r.a)("`from(...)` is not allowed after `match(...)` try using `.from(...).to(...).in(...)`. Your query was not modified."),this):(this.rangeStack[0]=e,this)},e.prototype.to=function(e){return this.hasTerms?(Object(r.a)("`to(...)` is not allowed after `match(...)` try using `.from(...).to(...).in(...)`. Your query was not modified."),this):(this.rangeStack[1]=e,this)},e.prototype.boost=function(e){return this.commit(),this.q+="^"+e,this},e.prototype.toParam=function(){return this.commit(),this.cleanup(),this.q},e.prototype.clone=function(){return this.commit(),this.cleanup(),new e(this.q+"")},e.prototype.addModifier=function(e){return this.currentModifer?(Object(r.a)("You have called `"+this.currentModifer+"()` after `"+e+"()`. Your current query was not modified."),this):(this.commit(),""===this.q&&"not"!==e?(Object(r.a)("You have called `"+e+"()` without calling another method to modify your query first. Try calling `match()` first."),this):(this.currentModifer=e,this.q+=""===this.q?"":" ",this.q+=e.toUpperCase()+" ",this))},e.prototype.hasWhiteSpace=function(e){return/\s/g.test(e)},e.prototype.formatTerm=function(e){return e instanceof Date?e.getTime():"string"===typeof e&&this.hasWhiteSpace(e)?'"'+e+'"':e},e.prototype.commit=function(){var e=this;return this.currentModifer=void 0,this.hasRange&&(this.q+="["+this.formatTerm(this.rangeStack[0])+" TO "+this.formatTerm(this.rangeStack[1])+"]",this.rangeStack=[void 0,void 0]),this.hasTerms&&(this.q+=this.termStack.map((function(t){return e.formatTerm(t)})).join(" "),this.termStack=[]),this},Object.defineProperty(e.prototype,"hasTerms",{get:function(){return this.termStack.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasRange",{get:function(){return this.rangeStack.length&&this.rangeStack[0]&&this.rangeStack[1]},enumerable:!1,configurable:!0}),e.prototype.cleanup=function(){if(this.openGroups>0)for(Object(r.a)("Automatically closing "+this.openGroups+" group(s). You can use `endGroup(...)` to remove this warning.");this.openGroups>0;)this.q+=")",this.openGroups--;var e=this.q;this.q=e.replace(/( AND ?| NOT ?| OR ?)*$/,""),e!==this.q&&Object(r.a)("`startGroup(...)` was called without calling `endGroup(...)` first. Your query was not modified."),this.q=this.q.replace(/(\(\))*/,"")},e}()},function(e,t,n){"use strict";var r=n(2),i=n(3),a=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:29;Object(r.a)(this,e),this.name=t,this._counter=0,this._items=new Array(n)}return Object(i.a)(e,[{key:"record",value:function(e){this._items[++this._counter%this._items.length]=e}},{key:"median",get:function(){return this._items.slice().sort()[Math.floor(this._items.length/2)]}},{key:"average",get:function(){return this._items.reduce((function(e,t){return e+t}),0)/this._items.length}},{key:"last",get:function(){return this._items[this._counter%this._items.length]}}]),e}();t.a=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return p}));var r=n(10),i=n(14),a=n(90),o=n(180),s=n(291);function c(e,t,n){if(!e||!e.read||!1===e.read.enabled||!e.read.source)return!1;var r=e.read.source;if("string"==typeof r){if(r===t)return!0;if(r.indexOf(".")>-1&&0===r.indexOf(t)&&Object(o.a)(r,n))return!0}else{var a,s=Object(i.a)(r);try{for(s.s();!(a=s.n()).done;){var c=a.value;if(c===t)return!0;if(c.indexOf(".")>-1&&0===c.indexOf(t)&&Object(o.a)(c,n))return!0}}catch(l){s.e(l)}finally{s.f()}}return!1}function l(e,t,n,r,a){var o=Object(s.c)(t[n],a);(function(e){return e&&(!e.read||!1!==e.read.enabled&&!e.read.source)})(o)&&(e[n]=!0);var l,u=Object(i.a)(Object.getOwnPropertyNames(t));try{for(u.s();!(l=u.n()).done;){var d=l.value;c(o=Object(s.c)(t[d],a),n,r)&&(e[d]=!0)}}catch(f){u.e(f)}finally{u.f()}}function u(e,t,n,r){var i=n.metadatas,a=Object(s.b)(i[t],"any",r),o=a&&a.default;if(void 0!==o){var c="function"==typeof o?o.call(e,t,r):o;void 0!==c&&n.set(t,c)}}var d={origin:"service"};function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;if(t&&"object"==typeof t){var r,c=Object(a.a)(e),f=c.metadatas,p={},h=Object(i.a)(Object.getOwnPropertyNames(t));try{for(h.s();!(r=h.n()).done;){var b=r.value;l(p,f,b,t,n)}}catch(x){h.e(x)}finally{h.f()}c.setDefaultOrigin(n.origin);var v,y=Object(i.a)(Object.getOwnPropertyNames(p));try{for(y.s();!(v=y.n()).done;){var m=v.value,g=Object(s.c)(f[m],n).read,O=g&&g.source,j=void 0;j=O&&"string"==typeof O?Object(o.c)(t,O):t[m],g&&g.reader&&(j=g.reader.call(e,j,t,n)),void 0!==j&&c.set(m,j)}}catch(x){y.e(x)}finally{y.f()}if(!n||!n.ignoreDefaults){var w,_=Object(i.a)(Object.getOwnPropertyNames(f));try{for(_.s();!(w=_.n()).done;){var k=w.value;p[k]||u(e,k,c,n)}}catch(x){_.e(x)}finally{_.f()}}c.setDefaultOrigin("user")}}function p(e,t,n){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d,o=Object(r.a)(Object(r.a)({},a),{},{messages:[]});n(o),null==(i=o.messages)||i.forEach((function(t){"warning"!==t.type||e.loaded?a&&a.messages&&a.messages.push(t):e.loadWarnings.push(t)}))}},function(e,t,n){"use strict";var r=n(2),i=n(5),a=n(6),o=n(0),s=(n(16),n(13),n(17),n(1)),c=n(8),l=(n(12),n(19),n(20),function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).altText=null,i.caption="",i.title="",i.type=null,i}return n}(n(28).a));Object(o.a)([Object(s.b)({type:String,json:{write:!0}})],l.prototype,"altText",void 0),Object(o.a)([Object(s.b)({type:String,json:{write:!0}})],l.prototype,"caption",void 0),Object(o.a)([Object(s.b)({type:String,json:{write:!0}})],l.prototype,"title",void 0),Object(o.a)([Object(s.b)({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],l.prototype,"type",void 0);var u=l=Object(o.a)([Object(c.a)("esri.popup.content.mixins.MediaInfo")],l);t.a=u},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(8),d=(n(12),n(19),n(20),n(224)),f=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).image=null,r.type="toggle",r.value=!1,r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}}]),n}(d.a);Object(c.a)([Object(l.b)()],f.prototype,"image",void 0),Object(c.a)([Object(l.b)()],f.prototype,"value",void 0);var p=f=r=Object(c.a)([Object(u.a)("esri.support.Action.ActionToggle")],f);t.a=p},function(e,t,n){"use strict";function r(e){var t={};for(var n in e)if("declaredClass"!==n){var i=e[n];if(null!=i&&"function"!=typeof i)if(Array.isArray(i)){t[n]=[];for(var a=0;a<i.length;a++)t[n][a]=r(i[a])}else"object"==typeof i?i.toJSON&&(t[n]=JSON.stringify(i)):t[n]=i}return t}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(2),i=n(5),a=n(6),o=n(0),s=(n(16),n(13),n(17),n(1)),c=n(8),l=(n(12),n(19),n(20),function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).type=null,i}return n}(n(28).a));Object(o.a)([Object(s.b)({readOnly:!0,json:{read:!1,write:!0}})],l.prototype,"type",void 0);var u=l=Object(o.a)([Object(c.a)("esri.tasks.support.ColorRamp")],l);t.a=u},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(2),i=n(3),a=n(5),o=n(6),s=n(0),c=(n(16),n(13),n(17),n(1)),l=n(41),u=n(8),d=(n(12),n(19),n(20),n(44)),f=(n(71),n(508)),p=n(329),h=function(e){var t=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).copyright=null,e.minScale=0,e.maxScale=0,e.spatialReference=null,e.tileInfo=null,e.tilemapCache=null,e}return Object(i.a)(n,[{key:"readMinScale",value:function(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}},{key:"readMaxScale",value:function(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}},{key:"supportsBlankTile",get:function(){return this.version>=10.2}},{key:"readTilemapCache",value:function(e,t){return t.capabilities&&t.capabilities.indexOf("Tilemap")>-1?new p.a({layer:this}):null}}]),n}(e);return Object(s.a)([Object(c.b)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),Object(s.a)([Object(c.b)()],t.prototype,"minScale",void 0),Object(s.a)([Object(l.a)("service","minScale")],t.prototype,"readMinScale",null),Object(s.a)([Object(c.b)()],t.prototype,"maxScale",void 0),Object(s.a)([Object(l.a)("service","maxScale")],t.prototype,"readMaxScale",null),Object(s.a)([Object(c.b)({type:d.a})],t.prototype,"spatialReference",void 0),Object(s.a)([Object(c.b)({readOnly:!0})],t.prototype,"supportsBlankTile",null),Object(s.a)([Object(c.b)(f.b)],t.prototype,"tileInfo",void 0),Object(s.a)([Object(c.b)()],t.prototype,"tilemapCache",void 0),Object(s.a)([Object(l.a)("service","tilemapCache",["capabilities"])],t.prototype,"readTilemapCache",null),Object(s.a)([Object(c.b)()],t.prototype,"version",void 0),t=Object(s.a)([Object(u.a)("esri.layers.mixins.ArcGISCachedService")],t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return u}));n(14);var r=n(18),i=n(44),a=(n(43),n(118),n(108),n(71),n(66)),o=n(155);function s(e){if(!e)return null;if(e.isGeographic&&e.wkid){var t=o.c[e.wkid];if(t)return t}if(e.wkt){var n=o.a.exec(e.wkt);if(!n||2!==n.length)return null;var r=n[1].split(",");if(!r||r.length<3)return null;var i=parseFloat(r[1]),a=parseFloat(r[2]);return isNaN(i)||isNaN(a)?null:{a:i,f:0===a?0:1/a}}return null}function c(e){var t=s(e||i.a.WGS84);if(function(e){return"b"in e&&"eSq"in e&&"radius"in e}(t))return t;var n=t.a*(1-t.f);return Object.assign(t,{b:n,eSq:1-Math.pow(n/t.a,2),radius:(2*t.a+n)/3,densificationRatio:1e4/((2*t.a+n)/3)})}function l(e){return null!==s(e)}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"meters",n=e,i=e;if(!n&&!i)throw new r.a("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(n?n.some((function(e){return!l(e.spatialReference)})):i.some((function(e){return!l(e.spatialReference)})))throw new r.a("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");for(var o=[],s=0;s<e.length;s++){for(var c=e[s],u=c.spatialReference,d="polyline"===c.type?c.paths:c.rings,p=0,h=0;h<d.length;h++){for(var b=d[h],v=0,y=1;y<b.length;y++){var m=b[y-1][0],g=b[y][0],O=b[y-1][1],j=b[y][1];if(O!==j||m!==g){var w={distance:null};f(w,[m,O],[g,j],u),v+=w.distance}}p+=v}p=Object(a.b)(p,"meters",t),o.push(p)}return o}function d(e,t,n,r,i){for(var a,s,l,u=t[0],d=t[1],f=u*o.d,p=d*o.d,h=n*o.d,b=c(i),v=b.a,y=b.b,m=b.f,g=Math.sin(h),O=Math.cos(h),j=(1-m)*Math.tan(p),w=1/Math.sqrt(1+j*j),_=j*w,k=Math.atan2(j,O),x=w*g,S=x*x,T=1-S,E=T*(v*v-y*y)/(y*y),C=1+E/16384*(4096+E*(E*(320-175*E)-768)),P=E/1024*(256+E*(E*(74-47*E)-128)),I=r/(y*C),M=2*Math.PI;Math.abs(I-M)>1e-12;)l=Math.cos(2*k+I),M=I,I=r/(y*C)+P*(a=Math.sin(I))*(l+P/4*((s=Math.cos(I))*(2*l*l-1)-P/6*l*(4*a*a-3)*(4*l*l-3)));var A=_*a-w*s*O,R=Math.atan2(_*s+w*a*O,(1-m)*Math.sqrt(S+A*A)),L=Math.atan2(a*g,w*s-_*a*O),F=m/16*T*(4+m*(4-3*T)),D=R/o.d,N=(f+(L-(1-F)*m*x*(I+F*a*(l+F*s*(2*l*l-1)))))/o.d;return e[0]=N,e[1]=D,e}function f(e,t,n,r){var i,a,s,l,u,d,f,p,h,b,v=t[0]*o.d,y=t[1]*o.d,m=n[0]*o.d,g=n[1]*o.d,O=c(r),j=O.a,w=O.b,_=O.f,k=O.radius,x=m-v,S=Math.atan((1-_)*Math.tan(y)),T=Math.atan((1-_)*Math.tan(g)),E=Math.sin(S),C=Math.cos(S),P=Math.sin(T),I=Math.cos(T),M=1e3,A=x;do{if(f=Math.sin(A),p=Math.cos(A),0===(s=Math.sqrt(I*f*(I*f)+(C*P-E*I*p)*(C*P-E*I*p))))return e.distance=0,e.azimuth=void 0,e.reverseAzimuth=void 0,e;u=E*P+C*I*p,d=Math.atan2(s,u),l=u-2*E*P/(a=1-(h=C*I*f/s)*h),isNaN(l)&&(l=0),i=A,A=x+(1-(b=_/16*a*(4+_*(4-3*a))))*_*h*(d+b*s*(l+b*u*(2*l*l-1)))}while(Math.abs(A-i)>1e-12&&--M>0);if(0===M){var R=k,L=Math.acos(Math.sin(y)*Math.sin(g)+Math.cos(y)*Math.cos(g)*Math.cos(m-v))*R,F=m-v,D=Math.sin(F)*Math.cos(g),N=Math.cos(y)*Math.sin(g)-Math.sin(y)*Math.cos(g)*Math.cos(F),V=Math.atan2(D,N);return e.azimuth=V/o.d,e.distance=L,e.reverseAzimuth=void 0,e}var z=a*(j*j-w*w)/(w*w),U=z/1024*(256+z*(z*(74-47*z)-128)),B=w*(1+z/16384*(4096+z*(z*(320-175*z)-768)))*(d-U*s*(l+U/4*(u*(2*l*l-1)-U/6*l*(4*s*s-3)*(4*l*l-3)))),G=Math.atan2(I*Math.sin(A),C*P-E*I*Math.cos(A)),q=Math.atan2(C*Math.sin(A),C*P*Math.cos(A)-E*I);return e.azimuth=G/o.d,e.distance=B,e.reverseAzimuth=q/o.d,e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(2),i=n(3),a=n(5),o=n(6),s=(n(16),n(13)),c=n(70),l=n(284);s.a.getLogger("esri.views.interactive.snapping.hints.RightAngleSnappingHint");var u=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e,i,a){var o;return Object(r.a)(this,n),(o=t.call(this)).previousVertex=e,o.centerVertex=i,o.nextVertex=a,o}return Object(i.a)(n,[{key:"equals",value:function(e){return e instanceof n&&Object(c.d)(this.previousVertex,e.previousVertex)&&Object(c.d)(this.centerVertex,e.centerVertex)&&Object(c.d)(this.nextVertex,e.nextVertex)}}]),n}(l.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(2),i=n(3),a=n(59),o=n(43),s=(n(71),n(27)),c=n(11),l=n(60),u=n(97),d=n(33),f=n(89),p=n(55),h=function(){function e(t,n){Object(r.a)(this,e),this.spatialReference=t,this.viewingMode=n,this._unnormalizationInfo=g(t,n)}return Object(i.a)(e,[{key:"tag",value:function(e){return e}},{key:"createNew",value:function(){return this.tag(Object(l.a)())}},{key:"fromPoint",value:function(e){return this.tag(Object(l.e)(e.x,e.y))}},{key:"fromArray",value:function(e){return this.tag(Object(l.e)(e[0],e[1]))}},{key:"toArray",value:function(e){return[e[0],e[1]]}},{key:"clone",value:function(e){return this.tag(Object(l.d)(e))}},{key:"toPoint",value:function(e,t){return t.x=e[0],t.y=e[1],t.hasZ=!1,t.hasM=!1,t.spatialReference=this.spatialReference,t}},{key:"createPoint",value:function(e){return new o.a({x:e[0],y:e[1],z:void 0,m:void 0,spatialReference:this.spatialReference})}},{key:"createPointFromArray",value:function(e){return new o.a({x:e[0],y:e[1],z:void 0,m:void 0,spatialReference:this.spatialReference})}},{key:"createDehydratedPoint",value:function(e){return{x:e[0],y:e[1],z:void 0,m:void 0,hasZ:!1,hasM:!1,spatialReference:this.spatialReference,type:"point"}}},{key:"lerp",value:function(e,t,n,r){return Object(d.m)(r,e,t,n)}},{key:"addDelta",value:function(e,t,n){e[0]+=t,e[1]+=n}},{key:"scale",value:function(e,t,n,r){var i=p.c.get(),a=Object(d.d)(i,e,t),o=Object(d.a)(i,n,Object(d.g)(n,a));Object(d.o)(e,e,o,r-1)}},{key:"rotate",value:function(e,t,n){Object(d.q)(e,e,t,n)}},{key:"pointToArray",value:function(e){return[e.x,e.y]}},{key:"getZ",value:function(e,t){return t}},{key:"hasZ",value:function(){return!1}},{key:"unnormalize",value:function(e){m(e,this._unnormalizationInfo)}},{key:"fromXYZ",value:function(e){return this.tag(Object(l.e)(e[0],e[1]))}},{key:"toXYZ",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(s.g)(e[0],e[1],t)}}]),e}(),b=function(){function e(t,n,i){Object(r.a)(this,e),this.valueType=t,this.spatialReference=n,this._unnormalizationInfo=g(n,i)}return Object(i.a)(e,[{key:"tag",value:function(e){return e}},{key:"createNew",value:function(){return this.tag(Object(s.e)())}},{key:"fromPoint",value:function(e){return this.tag(Object(s.g)(e.x,e.y,0===this.valueType?e.z:e.m))}},{key:"fromArray",value:function(e){return this.tag(Object(s.g)(e[0],e[1],e[2]||0))}},{key:"toArray",value:function(e){return[e[0],e[1],e[2]]}},{key:"clone",value:function(e){return this.tag(Object(s.f)(e))}},{key:"toPoint",value:function(e,t){return t.x=e[0],t.y=e[1],0===this.valueType?(t.z=e[2],t.hasZ=!0,t.hasM=!1):(t.m=e[2],t.hasZ=!1,t.hasM=!0),t.spatialReference=this.spatialReference,t}},{key:"createPoint",value:function(e){return new o.a({x:e[0],y:e[1],z:0===this.valueType?e[2]:void 0,m:1===this.valueType?e[2]:void 0,spatialReference:this.spatialReference})}},{key:"createPointFromArray",value:function(e){return new o.a({x:e[0],y:e[1],z:0===this.valueType?e[2]:void 0,m:1===this.valueType?e[2]:void 0,spatialReference:this.spatialReference})}},{key:"createDehydratedPoint",value:function(e){var t=0===this.valueType,n=1===this.valueType;return{x:e[0],y:e[1],z:t?e[2]:void 0,m:n?e[2]:void 0,hasZ:t,hasM:n,spatialReference:this.spatialReference,type:"point"}}},{key:"lerp",value:function(e,t,n,r){return Object(c.h)(r,e,t,n)}},{key:"addDelta",value:function(e,t,n,r){e[0]+=t,e[1]+=n,0===this.valueType&&(e[2]+=r)}},{key:"scale",value:function(e,t,n,r){var i=p.c.get(),a=Object(d.d)(i,e,t),o=Object(d.a)(i,n,Object(d.g)(n,a));Object(d.o)(e,e,o,r-1)}},{key:"rotate",value:function(e,t,n){Object(d.q)(e,e,t,n)}},{key:"pointToArray",value:function(e){return 0===this.valueType?[e.x,e.y,e.z]:[e.x,e.y,e.m]}},{key:"getZ",value:function(e,t){return 0===this.valueType?e[2]:t}},{key:"hasZ",value:function(){return 0===this.valueType}},{key:"unnormalize",value:function(e){m(e,this._unnormalizationInfo)}},{key:"fromXYZ",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.tag(Object(s.g)(e[0],e[1],0===this.valueType?e.length>2?e[2]:t:n))}},{key:"toXYZ",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.tag(Object(s.g)(e[0],e[1],0===this.valueType?e[2]:t))}}]),e}(),v=function(){function e(t,n){Object(r.a)(this,e),this.spatialReference=t,this._unnormalizationInfo=g(t,n)}return Object(i.a)(e,[{key:"tag",value:function(e){return e}},{key:"createNew",value:function(){return this.tag(Object(u.c)())}},{key:"fromPoint",value:function(e){return this.tag(Object(u.d)(e.x,e.y,e.z,e.m))}},{key:"fromArray",value:function(e){return this.tag(Object(u.d)(e[0],e[1],e[2]||0,e[3]||0))}},{key:"toArray",value:function(e){return[e[0],e[1],e[2],e[3]]}},{key:"clone",value:function(e){return this.tag(Object(u.g)(e))}},{key:"toPoint",value:function(e,t){return t.x=e[0],t.y=e[1],t.z=e[2],t.m=e[3],t.hasZ=!0,t.hasM=!0,t.spatialReference=this.spatialReference,t}},{key:"createPoint",value:function(e){return new o.a({x:e[0],y:e[1],z:e[2],m:e[3],spatialReference:this.spatialReference})}},{key:"createPointFromArray",value:function(e){return new o.a({x:e[0],y:e[1],z:e[2],m:e[3],spatialReference:this.spatialReference})}},{key:"createDehydratedPoint",value:function(e){return{x:e[0],y:e[1],z:e[2],m:e[3],hasZ:!0,hasM:!0,spatialReference:this.spatialReference,type:"point"}}},{key:"lerp",value:function(e,t,n,r){return Object(f.j)(r,e,t,n)}},{key:"addDelta",value:function(e,t,n,r){e[0]+=t,e[1]+=n,e[2]+=r}},{key:"scale",value:function(e,t,n,r){var i=p.c.get(),a=Object(d.d)(i,e,t),o=Object(d.a)(i,n,Object(d.g)(n,a));Object(d.o)(e,e,o,r-1)}},{key:"rotate",value:function(e,t,n){Object(d.q)(e,e,t,n)}},{key:"pointToArray",value:function(e){return[e.x,e.y,e.z,e.m]}},{key:"getZ",value:function(e){return e[2]}},{key:"hasZ",value:function(){return!0}},{key:"unnormalize",value:function(e){m(e,this._unnormalizationInfo)}},{key:"fromXYZ",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.tag(Object(u.d)(e[0],e[1],e.length>2?e[2]:t,n))}},{key:"toXYZ",value:function(e){return Object(s.g)(e[0],e[1],e[2])}}]),e}();function y(e,t,n,r){return e&&t?new v(n,r):t?new b(1,n,r):e?new b(0,n,r):new h(n,r)}function m(e,t){if(t.supported){var n=1/0,r=-1/0,i=t.upperBoundX-t.lowerBoundX;e.forEach((function(e){for(var a=e.pos[0];a<t.lowerBoundX;)a+=i;for(;a>t.upperBoundX;)a-=i;n=Math.min(n,a),r=Math.max(r,a),e.pos[0]=a}));var a=r-n;i-a<a&&e.forEach((function(e){e.pos[0]<0&&(e.pos[0]+=i)}))}}function g(e,t){var n=Object(a.d)(e);return"global"===t&&n?{supported:!0,lowerBoundX:n.valid[0],upperBoundX:n.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return Si})),n.d(t,"b",(function(){return Ti}));var r=n(31),i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13)),u=(n(17),n(1)),d=n(8),f=(n(12),n(19),n(20),n(129)),p=n(25),h=n(181),b=n(36),v=n(40),y=n(404),m=(n(182),n(311)),g=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).items=new v.a,e._watchUpdatingTracking=new y.a,e._callbacks=new Map,e._projector=Object(m.a)(),e._hiddenProjector=Object(m.a)(),e}return Object(a.a)(n,[{key:"needsRender",get:function(){return this.items.length>0}},{key:"initialize",value:function(){var e=this,t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(this.items,(function(t){t.added.map((function(t){var n=function(){return t.render()};e._callbacks.set(t,n),e._projector.append(e.surface,n)})),t.removed.map((function(t){var n=e._projector.detach(e._callbacks.get(t));e.surface.removeChild(n.domNode),e._callbacks.delete(t)}))}))}},{key:"addItem",value:function(e){this.items.add(e)}},{key:"removeItem",value:function(e){this.items.remove(e)}},{key:"destroy",value:function(){var e=this;this.items.removeAll(),this._callbacks.forEach((function(t){return e._projector.detach(t)})),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}},{key:"render",value:function(){this._projector.renderNow()}},{key:"computeBoundingRect",value:function(e){var t=this._hiddenSurface,n=this._hiddenProjector,r=null,i=function(){return r=e.render()};n.append(t,i),n.renderNow();var a={left:0,top:0,right:0,bottom:0};if(r&&r.domNode){var o=r.domNode.getBoundingClientRect();a.left=o.left,a.top=o.top,a.right=o.right,a.bottom=o.bottom}for(n.detach(i);t.firstChild;)t.removeChild(t.firstChild);return a}},{key:"overlaps",value:function(e,t){var n=this.computeBoundingRect(e),r=this.computeBoundingRect(t);return Math.max(n.left,r.left)<=Math.min(n.right,r.right)&&Math.max(n.top,r.top)<=Math.min(n.bottom,r.bottom)}},{key:"hasVisibleItems",get:function(){return this.items.some((function(e){return e.visible}))}},{key:"renderCanvas",value:function(e){if(this.items.some((function(e){return e.visible}))){var t=e.getContext("2d");t.save(),t.font="10px ".concat(getComputedStyle(this.surface).fontFamily),this.items.forEach((function(e){t.save(),e.renderCanvas(t),t.restore()})),t.restore()}}}]),n}(b.a);Object(c.a)([Object(u.b)({readOnly:!0})],g.prototype,"surface",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],g.prototype,"items",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],g.prototype,"needsRender",null),Object(c.a)([Object(u.b)({readOnly:!0})],g.prototype,"_watchUpdatingTracking",void 0),Object(c.a)([Object(u.b)({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],g.prototype,"updating",void 0);var O=g=Object(c.a)([Object(d.a)("esri.views.overlay.ViewOverlay")],g),j=n(26),w=n(10),_=n(37),k=n(4),x=n(32),S=n(58),T=n(198),E=n(111),C=n(112),P=(n(143),n(51)),I=n(502),M=n(56),A=n(77),R=n(75),L=n(178),F=n(9),D=n(72),N=n(229),V=function(e){var t=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).renderNodeContent=function(t){return Object(N.b)(t)&&!t.destroyed?Object(F.a)("div",{key:t},t.render()):t instanceof HTMLElement?Object(F.a)("div",{key:t,bind:t,afterCreate:e._attachToNode}):Object(N.a)(t)?Object(F.a)("div",{key:t,bind:t.domNode,afterCreate:e._attachToNode}):null},e}return Object(a.a)(n,[{key:"_attachToNode",value:function(e){e.appendChild(this)}}]),n}(e);return t=Object(c.a)([Object(d.a)("esri.widgets.Feature.ContentMixin")],t)},z=n(555),U=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).description=null,r.title=null,r}return n}(n(364).a);Object(c.a)([Object(u.b)()],U.prototype,"description",void 0),Object(c.a)([Object(u.b)()],U.prototype,"title",void 0);var B=U=Object(c.a)([Object(d.a)("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],U),G="esri-feature-element-info",q="esri-feature-element-info__title",H="esri-feature-element-info__description",W=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,r){var a;return Object(i.a)(this,n),(a=t.call(this,e,r)).description=null,a.title=null,a}return Object(a.a)(n,[{key:"render",value:function(){return Object(F.a)("div",{class:G},this.renderTitle(),this.renderDescription())}},{key:"renderTitle",value:function(){var e=this.title;return e?Object(F.a)("h2",{key:"title",class:q},e):null}},{key:"renderDescription",value:function(){var e=this.description;return e?Object(F.a)("div",{key:"description",class:H},e):null}}]),n}(D.a);Object(c.a)([Object(u.b)()],W.prototype,"description",void 0),Object(c.a)([Object(u.b)()],W.prototype,"title",void 0);var $=W=Object(c.a)([Object(d.a)("esri.widgets.Feature.support.FeatureElementInfo")],W),J="esri-feature-attachments",Y=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,r){var a;return Object(i.a)(this,n),(a=t.call(this,e,r))._featureElementInfo=null,a.attachmentsWidget=new z.a,a.description=null,a.displayType=null,a.graphic=null,a.title=null,a.viewModel=new B,a}return Object(a.a)(n,[{key:"initialize",value:function(){var e=this;this._featureElementInfo=new $,Object(p.a)(this,["viewModel.description","viewModel.title"],(function(){return e._setupFeatureElementInfo()})),Object(p.a)(this,"viewModel.graphic",(function(t){return e.attachmentsWidget.graphic=t}))}},{key:"destroy",value:function(){this.attachmentsWidget.destroy(),this._featureElementInfo.destroy()}},{key:"render",value:function(){var e,t=this.attachmentsWidget;return Object(F.a)("div",{class:J},null==(e=this._featureElementInfo)?void 0:e.render(),null==t?void 0:t.render())}},{key:"_setupFeatureElementInfo",value:function(){var e=this.description,t=this.title;this._featureElementInfo.set({description:e,title:t})}}]),n}(D.a);Object(c.a)([Object(u.b)({readOnly:!0})],Y.prototype,"attachmentsWidget",void 0),Object(c.a)([Object(x.a)("viewModel.description")],Y.prototype,"description",void 0),Object(c.a)([Object(x.a)("attachmentsWidget.displayType")],Y.prototype,"displayType",void 0),Object(c.a)([Object(x.a)("viewModel.graphic")],Y.prototype,"graphic",void 0),Object(c.a)([Object(x.a)("viewModel.title")],Y.prototype,"title",void 0),Object(c.a)([Object(u.b)({type:B})],Y.prototype,"viewModel",void 0);var K=Y=Object(c.a)([Object(d.a)("esri.widgets.Feature.FeatureAttachments")],Y),Z=n(81),X=n(7),Q=n.n(X),ee=n(15),te=n(74),ne=n(91),re=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e))._loadingPromise=null,r.created=null,r.creator=null,r.destroyer=null,r.graphic=null,r.handles.add(Object(p.a)(Object(_.a)(r),"creator",(function(e){r._destroyContent(),r._createContent(e)}))),r}return Object(a.a)(n,[{key:"destroy",value:function(){this._destroyContent()}},{key:"state",get:function(){return this._loadingPromise?"loading":"ready"}},{key:"_destroyContent",value:function(){var e=this.created,t=this.graphic,n=this.destroyer;e&&(Object(Z.m)(n,{graphic:t}).catch((function(){return null})),this._set("created",null))}},{key:"_createContent",value:function(){var e=Object(ee.a)(Q.a.mark((function e(t){var n,r,i;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.graphic,r=Object(Z.m)(t,{graphic:n}).catch((function(){return null})),this._loadingPromise=r,this.notifyChange("state"),e.next=4,r;case 4:i=e.sent,r===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",i));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Object(ne.b)(b.a));Object(c.a)([Object(u.b)({readOnly:!0})],re.prototype,"created",void 0),Object(c.a)([Object(u.b)()],re.prototype,"creator",void 0),Object(c.a)([Object(u.b)()],re.prototype,"destroyer",void 0),Object(c.a)([Object(u.b)({type:te.a})],re.prototype,"graphic",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],re.prototype,"state",null);var ie=re=Object(c.a)([Object(d.a)("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],re),ae="esri-feature-content",oe="esri-feature-content__loader-container",se="esri-feature-content__loader",ce=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,r){var a;return Object(i.a)(this,n),(a=t.call(this,e,r)).creator=null,a.graphic=null,a.viewModel=null,a._addTargetToAnchors=function(e){Array.from(e.querySelectorAll("a")).forEach((function(e){Object(Z.q)(e.href)&&!e.hasAttribute("target")&&e.setAttribute("target","_blank")}))},a}return Object(a.a)(n,[{key:"renderLoading",value:function(){return Object(F.a)("div",{class:oe,key:"loader"},Object(F.a)("div",{class:se}))}},{key:"renderCreated",value:function(){var e,t=null==(e=this.viewModel)?void 0:e.created;return t?t instanceof HTMLElement?Object(F.a)("div",{key:t,bind:t,afterCreate:this._attachToNode}):Object(N.b)(t)?Object(F.a)("div",{key:t},!t.destroyed&&t.render()):Object(F.a)("div",{key:t,innerHTML:t,afterCreate:this._addTargetToAnchors}):null}},{key:"render",value:function(){var e,t=null==(e=this.viewModel)?void 0:e.state;return Object(F.a)("div",{class:ae},"loading"===t?this.renderLoading():this.renderCreated())}},{key:"_attachToNode",value:function(e){e.appendChild(this)}}]),n}(D.a);Object(c.a)([Object(x.a)("viewModel.creator")],ce.prototype,"creator",void 0),Object(c.a)([Object(x.a)("viewModel.graphic")],ce.prototype,"graphic",void 0),Object(c.a)([Object(u.b)({type:ie})],ce.prototype,"viewModel",void 0);var le=ce=Object(c.a)([Object(d.a)("esri.widgets.Feature.FeatureContent")],ce),ue=n(281),de=n(499),fe=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).attributes=null,r.expressionInfos=null,r.description=null,r.fieldInfos=null,r.title=null,r}return Object(a.a)(n,[{key:"formattedFieldInfos",get:function(){var e=this.expressionInfos,t=this.fieldInfos,n=[];return null==t||t.forEach((function(t){if(!t.hasOwnProperty("visible")||t.visible){var r=t.clone();r.label=Object(Z.i)(r,e),n.push(r)}})),n}}]),n}(b.a);Object(c.a)([Object(u.b)()],fe.prototype,"attributes",void 0),Object(c.a)([Object(u.b)({type:[de.a]})],fe.prototype,"expressionInfos",void 0),Object(c.a)([Object(u.b)()],fe.prototype,"description",void 0),Object(c.a)([Object(u.b)({type:[ue.a]})],fe.prototype,"fieldInfos",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],fe.prototype,"formattedFieldInfos",null),Object(c.a)([Object(u.b)()],fe.prototype,"title",void 0);var pe=fe=Object(c.a)([Object(d.a)("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],fe),he=n(123),be=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function ve(e,t){if("string"!=typeof t||!t)return t;var n=function(e){var t=null;return be.some((function(n){return n.pattern.test(e)&&(t=n),!!t})),t}(t);if(!n)return t;var r=t.match(n.pattern),i=r&&r[2],a=Object(he.c)(Object(he.c)(n.label,{messages:e,hierPart:i}),{appName:n.appName}),o=n.target?' target="'.concat(n.target,'"'):"",s="_blank"===n.target?' rel="noreferrer"':"";return t.replace(n.pattern,"<a".concat(o,' href="$1"').concat(s,">").concat(a,"</a>"))}var ye="esri-feature-fields",me="esri-feature-fields__field-header",ge="esri-feature-fields__field-data",Oe="esri-feature-fields__field-data--date",je="esri-widget__table",we=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,r){var a;return Object(i.a)(this,n),(a=t.call(this,e,r))._featureElementInfo=null,a.attributes=null,a.description=null,a.expressionInfos=null,a.fieldInfos=null,a.title=null,a.viewModel=new pe,a.messages=null,a.messagesURIUtils=null,a}return Object(a.a)(n,[{key:"initialize",value:function(){var e=this;this._featureElementInfo=new $,Object(p.a)(this,["viewModel.description","viewModel.title"],(function(){return e._setupFeatureElementInfo()}))}},{key:"destroy",value:function(){this._featureElementInfo.destroy()}},{key:"renderFieldInfo",value:function(e,t){var n=this.viewModel.attributes,r=e.fieldName,i=e.label||r,a=n?null==n[r]?"":n[r]:"",o=!(!e.format||!e.format.dateFormat),s="number"!=typeof a||o?ve(this.messagesURIUtils,a):this._forceLTR(a),c=Object(j.a)({},Oe,o);return Object(F.a)("tr",{key:"fields-element-info-row-".concat(r,"-").concat(t)},Object(F.a)("th",{key:"fields-element-info-row-header-".concat(r,"-").concat(t),class:me,innerHTML:i}),Object(F.a)("td",{key:"fields-element-info-row-data-".concat(r,"-").concat(t),class:this.classes(ge,c),innerHTML:s}))}},{key:"renderFields",value:function(){var e=this,t=this.viewModel.formattedFieldInfos;return t.length?Object(F.a)("table",{class:je,summary:this.messages.fieldsSummary},Object(F.a)("tbody",null,t.map((function(t,n){return e.renderFieldInfo(t,n)})))):null}},{key:"render",value:function(){var e;return Object(F.a)("div",{class:ye},null==(e=this._featureElementInfo)?void 0:e.render(),this.renderFields())}},{key:"_setupFeatureElementInfo",value:function(){var e=this.description,t=this.title;this._featureElementInfo.set({description:e,title:t})}},{key:"_forceLTR",value:function(e){return"&lrm;".concat(e)}}]),n}(D.a);Object(c.a)([Object(x.a)("viewModel.attributes")],we.prototype,"attributes",void 0),Object(c.a)([Object(x.a)("viewModel.description")],we.prototype,"description",void 0),Object(c.a)([Object(x.a)("viewModel.expressionInfos")],we.prototype,"expressionInfos",void 0),Object(c.a)([Object(x.a)("viewModel.fieldInfos")],we.prototype,"fieldInfos",void 0),Object(c.a)([Object(x.a)("viewModel.title")],we.prototype,"title",void 0),Object(c.a)([Object(u.b)({type:pe})],we.prototype,"viewModel",void 0),Object(c.a)([Object(u.b)(),Object(R.a)("esri/widgets/Feature/t9n/Feature")],we.prototype,"messages",void 0),Object(c.a)([Object(u.b)(),Object(R.a)("esri/widgets/support/t9n/uriUtils")],we.prototype,"messagesURIUtils",void 0);var _e=we=Object(c.a)([Object(d.a)("esri.widgets.Feature.FeatureFields")],we),ke=n(35),xe=n(531),Se=n(18),Te=n(24),Ee=n(54),Ce=n(62),Pe=n(503),Ie=n(121),Me=n(250),Ae=n(635),Re=l.a.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),Le=new Map;function Fe(e){if(!Object(Z.o)(e))return null;var t=e.split("/").slice(1),n=Object(r.a)(t,2);return{layerId:n[0],fieldName:n[1]}}function De(e){var t,n=e.originRelationship,r=e.relationships,i=e.layerId;return r&&r.some((function(e){return"".concat(e.relatedTableId)===i&&e.id===n.id&&(t=e),!!t})),t}function Ne(e,t){var n=t.toLowerCase();for(var r in e)if(r.toLowerCase()===n)return e[r];return null}function Ve(e,t){var n=function(e,t){if(!t.relationships)return null;var n=null;return t.relationships.some((function(t){return t.id===parseInt(e,10)&&(n=t,!0)})),n}(e,t);if(n){var r="".concat(t.url,"/").concat(n.relatedTableId);return{url:r,queryTask:new Ae.a({url:r,sourceSpatialReference:t.spatialReference}),relation:n,relatedFields:[],outStatistics:[]}}}function ze(e,t){if(t&&e){var n=e.features,r=e.statsFeatures,i=n&&n.value;t.relatedFeatures=i?i.features:[];var a=r&&r.value;t.relatedStatsFeatures=a?a.features:[]}}function Ue(e,t,n,r){var i=new Me.a;return i.outFields=["*"],i.relationshipId="number"==typeof t.id?t.id:parseInt(t.id,10),i.objectIds=[e.attributes[n.objectIdField]],n.queryRelatedFeatures(i,r)}function Be(e,t,n){for(var r=0,i=[];r<t.length;)i.push("".concat(e," IN (").concat(t.slice(r,n+r),")")),r+=n;return i.join(" OR ")}function Ge(){return(Ge=Object(ee.a)(Q.a.mark((function e(t,n,r,i){var a,o,s,c,l,u,d,f,p,h,b,v,y,m,g,O,j,w;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.layerId.toString(),o=n.layerInfo,s=n.queryTask,c=n.relation,l=n.relatedFields,u=n.outStatistics,!(d=De({originRelationship:c,relationships:o.relationships,layerId:a})).relationshipTableId||!d.keyFieldInRelationshipTable){e.next=14;break}return e.next=4,Ue(t,d,r,i);case 4:if(e.t0=t.attributes[r.objectIdField],f=e.sent[e.t0]){e.next=8;break}return e.abrupt("return",null);case 8:if(p=f.features.map((function(e){return e.attributes[o.objectIdField]})),!((null==u?void 0:u.length)>0&&o.supportsStatistics)){e.next=14;break}return(h=new Ie.a).where=Be(o.objectIdField,p,1e3),h.outFields=l,h.outStatistics=u,b={features:Promise.resolve(f),statsFeatures:s.execute(h)},e.abrupt("return",Object(Te.j)(b));case 14:if(!(v=null==d?void 0:d.keyField)){e.next=18;break}return y=Object(Ee.v)(Object(Ee.q)(o.fields,v)),m=Ne(t.attributes,c.keyField),g=y?"".concat(v,"=").concat(m):"".concat(v,"='").concat(m,"'"),O=s.execute(new Ie.a({where:g,outFields:n.relatedFields}),i),j=n.outStatistics&&n.outStatistics.length>0&&o.supportsStatistics?s.execute(new Ie.a({where:g,outFields:n.relatedFields,outStatistics:n.outStatistics}),i):null,w={features:O},e.abrupt("return",(j&&(w.statsFeatures=j),Object(Te.j)(w)));case 18:return e.abrupt("return",null);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qe(e,t){var n=e.relatedInfos,r=e.layer,i={};return n.forEach((function(e,n){var a=e.relation;if(!a){var o=new Se.a("relation-required","A relation is required on a layer to retrieve related records.");throw Re.error(o),o}var s=a.relatedTableId;if("number"!=typeof s){var c=new Se.a("A related table ID is required on a layer to retrieve related records.");throw Re.error(c),c}var l="".concat(r.url,"/").concat(s),u=Le.get(l),d=u||function(e,t){return Object(Ce.default)(e,{query:{f:"json"},signal:t&&t.signal})}(l,t);u||Le.set(l,d),i[n]=d})),Object(Te.j)(i)}function He(e,t){var n=e.graphic,r=e.relatedInfos,i=e.layer,a={};return r.forEach((function(e,r){e.layerInfo&&(a[r]=function(e,t,n,r){return Ge.apply(this,arguments)}(n,e,i,t))})),Object(Te.j)(a)}var We=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).activeMediaInfoIndex=0,r.attributes=null,r.description=null,r.fieldInfoMap=null,r.formattedAttributes=null,r.layer=null,r.mediaInfos=null,r.popupTemplate=null,r.relatedInfos=null,r.title=null,r}return Object(a.a)(n,[{key:"activeMediaInfo",get:function(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}},{key:"formattedMediaInfos",get:function(){return this._formatMediaInfos()||[]}},{key:"formattedMediaInfoCount",get:function(){return this.formattedMediaInfos.length}},{key:"setActiveMedia",value:function(e){this._setContentElementMedia(e)}},{key:"next",value:function(){this._pageContentElementMedia(1)}},{key:"previous",value:function(){this._pageContentElementMedia(-1)}},{key:"_setContentElementMedia",value:function(e){var t=this.formattedMediaInfoCount,n=(e+t)%t;this.activeMediaInfoIndex=n}},{key:"_pageContentElementMedia",value:function(e){var t=this.activeMediaInfoIndex+e;this._setContentElementMedia(t)}},{key:"_formatMediaInfos",value:function(){var e=this,t=this.attributes,n=this.mediaInfos,r=this.formattedAttributes,i=this.fieldInfoMap,a=this.layer;return null==n?void 0:n.map((function(n){if(!n)return null;if(n.title=Object(Z.s)({attributes:t,fieldInfoMap:i,globalAttributes:r,layer:a,text:n.title}),n.caption=Object(Z.s)({attributes:t,fieldInfoMap:i,globalAttributes:r,layer:a,text:n.caption}),n.altText=Object(Z.s)({attributes:t,fieldInfoMap:i,globalAttributes:r,layer:a,text:n.altText}),"image"===n.type){var o=n.value;return e._setImageValue({value:o,formattedAttributes:r,layer:a}),n.value.sourceURL?n:void 0}if("pie-chart"===n.type||"line-chart"===n.type||"column-chart"===n.type||"bar-chart"===n.type){var s=n.value;return e._setChartValue({value:s,chartType:n.type,attributes:t,formattedAttributes:r,layer:a}),n}return null})).filter(Boolean)}},{key:"_setImageValue",value:function(e){var t=this.fieldInfoMap,n=e.value,r=e.formattedAttributes,i=e.layer,a=n.linkURL,o=n.sourceURL;if(o){var s=Object(Z.c)(o,i);n.sourceURL=Object(Z.r)({formattedAttributes:r,template:s,fieldInfoMap:t})}if(a){var c=Object(Z.c)(a,i);n.linkURL=Object(Z.r)({formattedAttributes:r,template:c,fieldInfoMap:t})}}},{key:"_setChartValue",value:function(e){var t=this,n=e.value,r=e.attributes,i=e.formattedAttributes,a=e.chartType,o=e.layer,s=this.popupTemplate,c=this.relatedInfos,l=n.fields,u=n.normalizeField;if(n.fields=Object(Z.k)(l,o),u&&(n.normalizeField=Object(Z.j)(u,o)),l.some((function(e){return!!(null!=i[e]||Object(Z.o)(e)&&c.size)}))){var d=null==s?void 0:s.fieldInfos;l.forEach((function(e){if(Object(Z.o)(e))n.series=[].concat(Object(ke.a)(n.series),Object(ke.a)(t._getRelatedChartInfos({fieldInfos:d,fieldName:e,formattedAttributes:i,chartType:a,value:n})));else{var o=t._getChartOption({value:n,attributes:r,chartType:a,formattedAttributes:i,fieldName:e,fieldInfos:d});n.series.push(o)}}))}}},{key:"_getRelatedChartInfos",value:function(e){var t,n=this,r=e.fieldInfos,i=e.fieldName,a=e.formattedAttributes,o=e.chartType,s=e.value,c=[],l=Fe(i),u=l.layerId,d=l.fieldName,f=null==(t=this.relatedInfos)?void 0:t.get(u.toString());if(!f)return c;var p=f.relatedFeatures,h=f.relation;if(!h||!p)return c;var b=h.cardinality;return p.forEach((function(e){var t=e.attributes;t&&Object.keys(t).forEach((function(e){e===d&&c.push(n._getChartOption({value:s,attributes:t,formattedAttributes:a,fieldName:i,chartType:o,relatedFieldName:e,fieldInfos:r}))}))})),"one-to-many"===b||"many-to-many"===b?c:[c[0]]}},{key:"_getTooltip",value:function(e){var t=e.label,n=e.value;return"pie-chart"===e.chartType?t:"".concat(t,": ").concat(n)}},{key:"_getChartOption",value:function(e){var t,n=e.value,r=e.attributes,i=e.formattedAttributes,a=e.fieldName,o=e.relatedFieldName,s=e.fieldInfos,c=e.chartType,l=this.layer,u=n.normalizeField,d=n.tooltipField,f=u?Object(Z.o)(u)?r[Fe(u).fieldName]:r[u]:null,p=o&&void 0!==r[o]?r[o]:void 0!==r[a]?r[a]:i[a],h=void 0===p?null:p&&f?p/f:p,b=new xe.a({value:h});if(Object(Z.o)(a)){var v=Fe(a),y=Fe(d),m=y?y.fieldName:null,g=Object(Z.f)(h,{fieldInfos:s,fieldName:o,layer:l,preventPlacesFormatting:!!f}),O=v?v.label||v.fieldName:o,j=m&&void 0!==r[m]?r[m]:O;return b.tooltip=this._getTooltip({label:j,value:g,chartType:c}),b}var w=Object(Z.h)(s,a),_=Object(Z.j)(a,l),k=d&&void 0!==i[d]?i[d]:Object(Z.i)(w||new ue.a({fieldName:_}),null==(t=this.popupTemplate)?void 0:t.expressionInfos),x=i[_];return b.tooltip=this._getTooltip({label:k,value:x,chartType:c}),b}}]),n}(b.a);Object(c.a)([Object(u.b)()],We.prototype,"activeMediaInfoIndex",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],We.prototype,"activeMediaInfo",null),Object(c.a)([Object(u.b)()],We.prototype,"attributes",void 0),Object(c.a)([Object(u.b)()],We.prototype,"description",void 0),Object(c.a)([Object(u.b)()],We.prototype,"fieldInfoMap",void 0),Object(c.a)([Object(u.b)()],We.prototype,"formattedAttributes",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],We.prototype,"formattedMediaInfos",null),Object(c.a)([Object(u.b)()],We.prototype,"layer",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],We.prototype,"formattedMediaInfoCount",null),Object(c.a)([Object(u.b)()],We.prototype,"mediaInfos",void 0),Object(c.a)([Object(u.b)()],We.prototype,"popupTemplate",void 0),Object(c.a)([Object(u.b)()],We.prototype,"relatedInfos",void 0),Object(c.a)([Object(u.b)()],We.prototype,"title",void 0);var $e,Je,Ye=We=Object(c.a)([Object(d.a)("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],We),Ke=Ye,Ze=n(14),Xe=n(95),Qe=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],et=[].concat(Qe.slice(30,39),Qe.slice(28,30).reverse()),tt=[{name:"default",colors:et},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}],nt="en-us",rt=new Map([["ar",function(){return n.e(148).then(n.bind(null,1349)).then((function(e){return e.a}))}],["bs-ba",function(){return n.e(150).then(n.bind(null,1350)).then((function(e){return e.b}))}],["ca-es",function(){return n.e(151).then(n.bind(null,1351)).then((function(e){return e.c}))}],["cs-cz",function(){return n.e(152).then(n.bind(null,1352)).then((function(e){return e.c}))}],["da-dk",function(){return n.e(153).then(n.bind(null,1353)).then((function(e){return e.d}))}],["de-de",function(){return n.e(155).then(n.bind(null,1354)).then((function(e){return e.d}))}],["de-ch",function(){return n.e(154).then(n.bind(null,1355)).then((function(e){return e.d}))}],["el-gr",function(){return n.e(156).then(n.bind(null,1356)).then((function(e){return e.e}))}],["en-us",function(){return n.e(158).then(n.bind(null,1357)).then((function(e){return e.e}))}],["en-ca",function(){return n.e(157).then(n.bind(null,1358)).then((function(e){return e.e}))}],["es-es",function(){return n.e(159).then(n.bind(null,1359)).then((function(e){return e.e}))}],["et-ee",function(){return n.e(160).then(n.bind(null,1360)).then((function(e){return e.e}))}],["fi-fi",function(){return n.e(161).then(n.bind(null,1361)).then((function(e){return e.f}))}],["fr-fr",function(){return n.e(162).then(n.bind(null,1362)).then((function(e){return e.f}))}],["he-il",function(){return n.e(163).then(n.bind(null,1363)).then((function(e){return e.h}))}],["hr-hr",function(){return n.e(164).then(n.bind(null,1364)).then((function(e){return e.h}))}],["hu-hu",function(){return n.e(165).then(n.bind(null,1365)).then((function(e){return e.h}))}],["id-id",function(){return n.e(167).then(n.bind(null,1366)).then((function(e){return e.i}))}],["it-it",function(){return n.e(169).then(n.bind(null,1367)).then((function(e){return e.i}))}],["ja-jp",function(){return n.e(170).then(n.bind(null,1368)).then((function(e){return e.j}))}],["ko-kr",function(){return n.e(171).then(n.bind(null,1369)).then((function(e){return e.k}))}],["lt-lt",function(){return n.e(172).then(n.bind(null,1370)).then((function(e){return e.l}))}],["lv-lv",function(){return n.e(173).then(n.bind(null,1371)).then((function(e){return e.l}))}],["nb-no",function(){return n.e(174).then(n.bind(null,1372)).then((function(e){return e.n}))}],["nl-nl",function(){return n.e(175).then(n.bind(null,1373)).then((function(e){return e.n}))}],["pl-pl",function(){return n.e(177).then(n.bind(null,1374)).then((function(e){return e.p}))}],["pt-br",function(){return n.e(178).then(n.bind(null,1375)).then((function(e){return e.p}))}],["pt-pt",function(){return n.e(179).then(n.bind(null,1376)).then((function(e){return e.p}))}],["ro-ro",function(){return n.e(180).then(n.bind(null,1377)).then((function(e){return e.r}))}],["ru-ru",function(){return n.e(181).then(n.bind(null,1378)).then((function(e){return e.r}))}],["sk-sk",function(){return n.e(182).then(n.bind(null,1379)).then((function(e){return e.s}))}],["sl-sl",function(){return n.e(183).then(n.bind(null,1380)).then((function(e){return e.s}))}],["sr-rs",function(){return n.e(184).then(n.bind(null,1381)).then((function(e){return e.s}))}],["sv-se",function(){return n.e(185).then(n.bind(null,1382)).then((function(e){return e.s}))}],["th-th",function(){return n.e(186).then(n.bind(null,1383)).then((function(e){return e.t}))}],["tr-tr",function(){return n.e(187).then(n.bind(null,1384)).then((function(e){return e.t}))}],["uk-ua",function(){return n.e(188).then(n.bind(null,1385)).then((function(e){return e.u}))}],["vi-vn",function(){return n.e(189).then(n.bind(null,1386)).then((function(e){return e.v}))}],["zh-cn",function(){return n.e(190).then(n.bind(null,1387)).then((function(e){return e.z}))}],["zh-hk",function(){return n.e(35).then(n.bind(null,1388)).then((function(e){return e.z}))}],["zh-tw",function(){return n.e(35).then(n.bind(null,1388)).then((function(e){return e.z}))}]]);function it(e){return e?rt.has(e.toLowerCase())?e.toLowerCase():function(e){var t,n=e.split("-")[0].toLowerCase(),r=null,i=Object(Ze.a)(rt.keys());try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.startsWith(n)){r=a;break}}}catch(o){i.e(o)}finally{i.f()}return r}(e)||nt:nt}function at(){return ot.apply(this,arguments)}function ot(){return(ot=Object(ee.a)(Q.a.mark((function e(){var t,i,a,o,s,c=arguments;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=it(t=c.length>0&&void 0!==c[0]?c[0]:Object(Xe.b)()),!$e||t!==Je){e.next=3;break}return e.abrupt("return",$e);case 3:return $e=n.e(168).then(n.bind(null,1389)).then((function(e){return e.i})),Je=t,e.prev=4,e.next=7,Promise.all([$e,rt.get(Je)()]);case 7:i=e.sent,a=Object(r.a)(i,2),o=a[0],s=a[1],Je===t&&(o.am4core.options.defaultLocale=s.default),o.am4core.options.suppressWarnings=!0,o.am4core.options.autoDispose=!0,e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(4),e.abrupt("return",($e=null,Je=null,null));case 17:return e.abrupt("return",$e);case 18:case"end":return e.stop()}}),e,null,[[4,14]])})))).apply(this,arguments)}var st="esri-feature-media",ct="esri-feature-media__container",lt="esri-feature-media__item-container",ut="esri-feature-media__item",dt="esri-feature-media__item-title",ft="esri-feature-media__item-caption",pt="esri-feature-media__previous",ht="esri-feature-media__previous-icon",bt="esri-feature-media__previous-icon--rtl",vt="esri-feature-media__next",yt="esri-feature-media__next-icon",mt="esri-feature-media__next-icon--rtl",gt="esri-feature-media__chart",Ot="esri-feature-media__button",jt="esri-feature-media__icon",wt="esri-icon-left-triangle-arrow",_t="esri-icon-right-triangle-arrow",kt=.05,xt=.95,St=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,r){var a;return Object(i.a)(this,n),(a=t.call(this,e,r))._refreshTimer=null,a._refreshIntervalInfo=null,a._featureElementInfo=null,a.attributes=null,a.activeMediaInfoIndex=null,a.description=null,a.fieldInfoMap=null,a.layer=null,a.mediaInfos=null,a.popupTemplate=null,a.relatedInfos=null,a.title=null,a.viewModel=new Ke,a.messages=null,a}return Object(a.a)(n,[{key:"initialize",value:function(){var e=this;this._featureElementInfo=new $,this.own(Object(p.a)(this,["viewModel.activeMediaInfo","viewModel.activeMediaInfoIndex"],(function(){return e._setupMediaRefreshTimer()})),Object(p.a)(this,["viewModel.description","viewModel.title"],(function(){return e._setupFeatureElementInfo()})))}},{key:"destroy",value:function(){this._clearMediaRefreshTimer(),this._featureElementInfo.destroy()}},{key:"render",value:function(){var e;return Object(F.a)("div",{bind:this,class:st,onkeyup:this._handleMediaKeyup},null==(e=this._featureElementInfo)?void 0:e.render(),this.renderMedia())}},{key:"renderMedia",value:function(){return this.viewModel.formattedMediaInfoCount?Object(F.a)("div",{key:"media-element-container",class:ct},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}},{key:"renderImageMediaInfo",value:function(e){var t=this._refreshIntervalInfo,n=this.viewModel,r=n.activeMediaInfoIndex,i=n.formattedMediaInfoCount,a=e.value,o=e.refreshInterval,s=e.altText,c=e.title,l=e.type,u=a.sourceURL,d=a.linkURL,f=Object(Z.q)(d)?"_blank":"_self",p="_blank"===f?"noreferrer":"",h=o?t:null,b=h?h.timestamp:0,v=h?h.sourceURL:u,y=Object(F.a)("img",{alt:s||c,key:"media-".concat(l,"-").concat(r,"-").concat(i,"-").concat(b),src:v});return(d?Object(F.a)("a",{title:c,href:d,rel:p,target:f},y):null)||y}},{key:"renderChartMediaInfo",value:function(e){var t=this.viewModel,n=t.activeMediaInfoIndex,r=t.formattedMediaInfoCount;return Object(F.a)("div",{key:"media-".concat(e.type,"-").concat(n,"-").concat(r),bind:this,class:gt,afterCreate:this._getChartDependencies})}},{key:"renderMediaInfoType",value:function(){var e=this.viewModel.activeMediaInfo;return e?"image"===e.type?this.renderImageMediaInfo(e):-1!==e.type.indexOf("chart")?this.renderChartMediaInfo(e):null:null}},{key:"renderMediaInfo",value:function(){var e=this.viewModel.activeMediaInfo,t=e.title?Object(F.a)("div",{key:"media-title",class:dt,innerHTML:e.title}):null,n=e.caption?Object(F.a)("div",{key:"media-caption",class:ft,innerHTML:e.caption}):null;return Object(F.a)("div",{key:"media-container",class:lt},Object(F.a)("div",{key:"media-item-container",class:ut},this.renderMediaInfoType()),t,n)}},{key:"renderMediaPageButton",value:function(e){if(this.viewModel.formattedMediaInfoCount<2)return null;var t="previous"===e,n=t?this.messages.previous:this.messages.next,r=t?this.classes(Ot,pt):this.classes(Ot,vt),i=t?this.classes(jt,ht,wt):this.classes(jt,yt,_t),a=t?this.classes(jt,bt,_t):this.classes(jt,mt,wt),o=t?"media-previous":"media-next",s=t?this._previous:this._next;return Object(F.a)("button",{type:"button",key:o,title:n,"aria-label":n,tabIndex:0,class:r,bind:this,onclick:s},Object(F.a)("span",{"aria-hidden":"true",class:i}),Object(F.a)("span",{"aria-hidden":"true",class:a}))}},{key:"_setupFeatureElementInfo",value:function(){var e=this.description,t=this.title;this._featureElementInfo.set({description:e,title:t})}},{key:"_next",value:function(){this.viewModel.next()}},{key:"_previous",value:function(){this.viewModel.previous()}},{key:"_getChartDependencies",value:function(){var e=Object(ee.a)(Q.a.mark((function e(t){var n,r;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at();case 2:n=e.sent,r=this.viewModel.activeMediaInfo,this._renderChart({chartDiv:t,mediaInfo:r,chartsModule:n});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_handleMediaKeyup",value:function(e){var t=Object(E.a)(e);"ArrowLeft"===t&&(e.stopPropagation(),this.viewModel.previous()),"ArrowRight"===t&&(e.stopPropagation(),this.viewModel.next())}},{key:"_renderChart",value:function(e){var t=e.chartsModule,n=e.chartDiv,r=e.mediaInfo,i=r.value,a=r.type,o=t.am4core,s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=tt.find((function(e){return e.name===t}));return n?n.colors.map((function(t){return e.color(t)})):null}(o);Object(M.e)()&&o.useTheme(t.am4themes_dark),o.useTheme(t.am4themes_animated),o.useTheme((function(e){e instanceof o.ColorSet&&s&&(e.list=s)}));var c="pie-chart"===a?this._createPieChart(e):this._createXYChart(e);n.setAttribute("aria-label",r.altText||r.title),c.data=i.series.map((function(e){return{tooltip:e.tooltip,value:e.value}})).filter((function(e){return"pie-chart"!==a||e.value>0}))}},{key:"_customizeChartTooltip",value:function(e,t){e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=t.color("#ffffff"),e.background.fill=t.color({r:0,g:0,b:0,a:.7})}},{key:"_createPieChart",value:function(e){var t=e.chartDiv,n=e.chartsModule,r=n.am4core,i=n.am4charts,a=r.create(t,i.PieChart);a.rtl=Object(M.f)();var o=a.series.push(new i.PieSeries);return o.labels.template.disabled=!0,o.ticks.template.disabled=!0,o.dataFields.value="value",o.dataFields.category="tooltip",this._customizeChartTooltip(o.tooltip,r),a}},{key:"_getMinSeriesValue",value:function(e){var t=0;return e.forEach((function(e){return t=Math.min(e.value,t)})),t}},{key:"_createColumnChart",value:function(e,t){var n=t.chartsModule,r=t.mediaInfo.value,i=n.am4core,a=n.am4charts,o=e.xAxes.push(new a.CategoryAxis);o.dataFields.category="tooltip",o.renderer.labels.template.disabled=!0,this._customizeChartTooltip(o.tooltip,i),o.tooltip.events.on("sizechanged",(function(){o.tooltip.dy=-o.tooltip.contentHeight}));var s=e.yAxes.push(new a.ValueAxis),c=s.renderer.labels.template;s.renderer.minLabelPosition=kt,s.renderer.maxLabelPosition=xt,s.min=this._getMinSeriesValue(r.series),this._customizeChartTooltip(s.tooltip,i),c.wrap=!0;var l=e.series.push(new a.ColumnSeries);l.dataFields.valueY="value",l.dataFields.categoryX="tooltip",e.cursor=new a.XYCursor,r.series.length>15&&(e.scrollbarX=new i.Scrollbar)}},{key:"_createBarChart",value:function(e,t){var n=t.chartsModule,r=t.mediaInfo.value,i=n.am4core,a=n.am4charts,o=e.yAxes.push(new a.CategoryAxis);o.dataFields.category="tooltip",o.renderer.inversed=!0,o.renderer.labels.template.disabled=!0,this._customizeChartTooltip(o.tooltip,i),o.tooltip.events.on("sizechanged",(function(){o.tooltip.dx=o.tooltip.contentWidth}));var s=e.xAxes.push(new a.ValueAxis),c=s.renderer.labels.template;s.renderer.minLabelPosition=kt,s.renderer.maxLabelPosition=xt,s.min=this._getMinSeriesValue(r.series),this._customizeChartTooltip(s.tooltip,i),c.wrap=!0;var l=e.series.push(new a.ColumnSeries);l.dataFields.valueX="value",l.dataFields.categoryY="tooltip",e.cursor=new a.XYCursor,r.series.length>15&&(e.scrollbarY=new i.Scrollbar)}},{key:"_createLineChart",value:function(e,t){var n=t.chartsModule,r=t.mediaInfo.value,i=n.am4core,a=n.am4charts,o=e.xAxes.push(new a.CategoryAxis);o.dataFields.category="tooltip",o.renderer.labels.template.disabled=!0,this._customizeChartTooltip(o.tooltip,i),o.tooltip.events.on("sizechanged",(function(){o.tooltip.dy=-o.tooltip.contentHeight}));var s=e.yAxes.push(new a.ValueAxis),c=s.renderer.labels.template;s.renderer.minLabelPosition=kt,s.renderer.maxLabelPosition=xt,s.min=this._getMinSeriesValue(r.series),this._customizeChartTooltip(s.tooltip,i),c.wrap=!0;var l=e.series.push(new a.LineSeries);l.dataFields.categoryX="tooltip",l.dataFields.valueY="value",e.cursor=new a.XYCursor,r.series.length>15&&(e.scrollbarX=new i.Scrollbar)}},{key:"_createXYChart",value:function(e){var t=e.chartDiv,n=e.chartsModule,r=e.mediaInfo.type,i=n.am4core,a=n.am4charts,o=i.create(t,a.XYChart);return o.rtl=Object(M.f)(),"column-chart"===r&&this._createColumnChart(o,e),"bar-chart"===r&&this._createBarChart(o,e),"line-chart"===r&&this._createLineChart(o,e),o}},{key:"_clearMediaRefreshTimer",value:function(){var e=this._refreshTimer;e&&(clearTimeout(e),this._refreshTimer=null)}},{key:"_updateMediaInfoTimestamp",value:function(e){var t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:this._getImageSource(e,t)},this.scheduleRender()}},{key:"_setupMediaRefreshTimer",value:function(){this._clearMediaRefreshTimer();var e=this.viewModel.activeMediaInfo;e&&"image"===e.type&&e.refreshInterval&&this._setRefreshTimeout(e)}},{key:"_setRefreshTimeout",value:function(e){var t=this,n=e.refreshInterval,r=e.value;if(n){var i=6e4*n;this._updateMediaInfoTimestamp(r.sourceURL);var a=setInterval((function(){t._updateMediaInfoTimestamp(r.sourceURL)}),i);this._refreshTimer=a}}},{key:"_getImageSource",value:function(e,t){var n=-1!==e.indexOf("?")?"&":"?",i=e.split("#"),a=Object(r.a)(i,2),o=a[0],s=a[1],c=void 0===s?"":s;return"".concat(o).concat(n,"timestamp=").concat(t).concat(c?"#":"").concat(c)}}]),n}(D.a);Object(c.a)([Object(x.a)("viewModel.attributes")],St.prototype,"attributes",void 0),Object(c.a)([Object(x.a)("viewModel.activeMediaInfoIndex")],St.prototype,"activeMediaInfoIndex",void 0),Object(c.a)([Object(x.a)("viewModel.description")],St.prototype,"description",void 0),Object(c.a)([Object(x.a)("viewModel.fieldInfoMap")],St.prototype,"fieldInfoMap",void 0),Object(c.a)([Object(x.a)("viewModel.layer")],St.prototype,"layer",void 0),Object(c.a)([Object(x.a)("viewModel.mediaInfos")],St.prototype,"mediaInfos",void 0),Object(c.a)([Object(x.a)("viewModel.popupTemplate")],St.prototype,"popupTemplate",void 0),Object(c.a)([Object(x.a)("viewModel.relatedInfos")],St.prototype,"relatedInfos",void 0),Object(c.a)([Object(x.a)("viewModel.title")],St.prototype,"title",void 0),Object(c.a)([Object(u.b)({type:Ke})],St.prototype,"viewModel",void 0),Object(c.a)([Object(u.b)(),Object(R.a)("esri/widgets/Feature/t9n/Feature")],St.prototype,"messages",void 0);var Tt=St=Object(c.a)([Object(d.a)("esri.widgets.Feature.FeatureMedia")],St),Et=n(244),Ct=n(265),Pt=["$datastore","$map","$layer","$aggregatedfeatures"],It=l.a.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");function Mt(e){return'<ul class="esri-widget__list">'.concat(e.map((function(e){return"<li>".concat("string"==typeof e?Object(Z.a)(Object(Z.n)(e)):e,"</li>")})).join(""),"</ul>")}function At(e){return'<table class="esri-widget__table">'.concat(e.keys().map((function(t){var n=e.field(t);return"<tr><th>".concat(t,"</th><td>").concat("string"==typeof n?Object(Z.a)(Object(Z.n)(n)):n,"</td></tr>")})).join(""),"</table>")}function Rt(e){var t=e.aggregatedFeatures,n=e.arcadeUtils,r=e.featureSetVars,i=e.context,a=e.viewInfo,o=e.map,s=e.graphic;r.forEach((function(e){var r=e.toLowerCase(),c={map:o,spatialReference:a.sr};if("$map"===r&&(i.vars[r]=n.convertMapToFeatureSetCollection(c)),"$layer"===r&&(i.vars[r]=n.convertFeatureLayerToFeatureSet(s.sourceLayer,a.sr)),"$datastore"===r&&(i.vars[r]=n.convertServiceUrlToWorkspace(s.sourceLayer.url,a.sr)),"$aggregatedfeatures"===r){var l=s.layer,u=l.fields,d=l.objectIdField,f=l.geometryType,p=l.spatialReference,h=l.displayField,b=new Ct.default(Object(w.a)(Object(w.a)({fields:u,objectIdField:d,geometryType:f,spatialReference:p,displayField:h},"feature"===l.type?{templates:l.templates,typeIdField:l.typeIdField,types:l.types}:null),{},{source:t}));i.vars[r]=n.convertFeatureLayerToFeatureSet(b,a.sr)}}))}function Lt(){return n.e(22).then(n.bind(null,1032))}function Ft(e){return Dt.apply(this,arguments)}function Dt(){return(Dt=Object(ee.a)(Q.a.mark((function e(t){var n,r,i,a,o,s,c,l;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.graphic,r=t.view,i=n.isAggregate,a=n.layer,i&&a&&"2d"===(null==r?void 0:r.type)){e.next=4;break}return e.abrupt("return",[]);case 4:return e.next=6,r.whenLayerView(a);case 6:if((o=e.sent).createQuery&&o.queryFeatures){e.next=9;break}return e.abrupt("return",[]);case 9:return(s=o.createQuery()).aggregateIds=[n.getObjectId()],e.next=13,o.queryFeatures(s);case 13:return c=e.sent,l=c.features,e.abrupt("return",l);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nt(e){return Vt.apply(this,arguments)}function Vt(){return(Vt=Object(ee.a)(Q.a.mark((function e(t){var n,r,i,a,o,s,c,l,u,d,f,p,h,b;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.expressionAttributes,r=t.info,i=t.arcadeUtils,a=t.spatialReference,o=t.map,s=t.graphic,c=t.view,l="expression/".concat(r.name),u=i.createSyntaxTree(r.expression),d=Pt.filter((function(e){return i.hasVariable(u,e)})),e.next=4,i.loadScriptDependencies(u,!0,d);case 4:return f=i.getViewInfo({spatialReference:a}),(p=i.createExecContext(s,f)).useAsync=!0,e.t0=Rt,e.next=9,Ft({graphic:s,view:c});case 9:return e.t1=e.sent,e.t2=i,e.t3=d,e.t4=p,e.t5=f,e.t6=o,e.t7=s,e.t8={aggregatedFeatures:e.t1,arcadeUtils:e.t2,featureSetVars:e.t3,context:e.t4,viewInfo:e.t5,map:e.t6,graphic:e.t7},(0,e.t0)(e.t8),h=i.createFunction(u,p),e.next=21,i.executeAsyncFunction(h,p).catch((function(e){return It.error("arcade-execution-error",{error:e,graphic:s,expressionInfo:r})}));case 21:b=e.sent,n[l]="string"==typeof b?Object(Z.a)(Object(Z.n)(b)):Array.isArray(b)?Mt(b):b&&"esri.arcade.Dictionary"===b.declaredClass?At(b):b;case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zt(e){return Ut.apply(this,arguments)}function Ut(){return(Ut=Object(ee.a)(Q.a.mark((function e(t){var n,r,i,a,o,s,c,l,u,d,f,p;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.popupTemplate,r=t.spatialReference,i=t.graphic,a=t.map,o=t.view,s=n.expressionInfos,c=[],l={},s&&s.length){e.next=4;break}return e.abrupt("return",l);case 4:return e.next=6,Lt();case 6:u=e.sent,d=Object(Ze.a)(s);try{for(d.s();!(f=d.n()).done;)p=f.value,c.push(Nt({expressionAttributes:l,info:p,arcadeUtils:u,spatialReference:r,map:a,graphic:i,view:o}))}catch(h){d.e(h)}finally{d.f()}return e.next=11,Object(Te.j)(c);case 11:return e.abrupt("return",l);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Bt="esri.widgets.FeatureViewModel",Gt=l.a.getLogger(Bt),qt=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e))._handles=new P.a,r._featureAbortController=null,r.graphicChangedThrottled=Object(I.a)(r.graphicChanged,1,Object(_.a)(r)),r.content=null,r.contentViewModels=[],r.defaultPopupTemplateEnabled=!1,r.formattedAttributes=null,r.lastEditInfo=null,r.relatedInfos=new Map,r.title="",r.view=null,r._handles.add(Object(p.a)(Object(_.a)(r),["graphic","_effectivePopupTemplate"],(function(){return r.graphicChangedThrottled()}))),r}return Object(a.a)(n,[{key:"destroy",value:function(){this._clear(),this._cancelFeatureQuery(),this._handles.destroy(),this._handles=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}},{key:"_effectivePopupTemplate",get:function(){return Object(k.k)(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}},{key:"_fieldInfoMap",get:function(){return Object(Z.b)(Object(Z.g)(this._effectivePopupTemplate),this._sourceLayer)}},{key:"_sourceLayer",get:function(){return Object(Z.l)(this.graphic)}},{key:"graphic",set:function(e){this._set("graphic",e?e.clone():null)}},{key:"spatialReference",get:function(){return this.get("view.spatialReference")||null},set:function(e){void 0!==e?this._override("spatialReference",e):this._clearOverride("spatialReference")}},{key:"map",get:function(){return this.get("view.map")||null},set:function(e){void 0!==e?this._override("map",e):this._clearOverride("map")}},{key:"waitingForContent",get:function(){return!!this._featureAbortController}},{key:"setActiveMedia",value:function(e,t){var n=this.contentViewModels[e];n instanceof Ke&&n.setActiveMedia(t)}},{key:"nextMedia",value:function(e){var t=this.contentViewModels[e];t instanceof Ke&&t.next()}},{key:"previousMedia",value:function(e){var t=this.contentViewModels[e];t instanceof Ke&&t.previous()}},{key:"_clear",value:function(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}},{key:"graphicChanged",value:function(){var e=Object(ee.a)(Q.a.mark((function e(){var t,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._cancelFeatureQuery(),this._clear(),t=this.graphic){e.next=4;break}return e.abrupt("return");case 4:return n=Object(Te.d)(),this._featureAbortController=n,e.prev=6,e.next=9,this._queryFeature({signal:n.signal});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),Gt.error("error","error loading popupTemplate for graphic",{error:e.t0,graphic:t});case 14:this._featureAbortController===n&&(this._featureAbortController=null);case 15:case"end":return e.stop()}}),e,this,[[6,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"_cancelFeatureQuery",value:function(){var e=this._featureAbortController;e&&e.abort(),this._featureAbortController=null}},{key:"_compileContent",value:function(e){var t=this;if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.map((function(e,n){return"attachments"===e.type?t._compileAttachments(e,n):"custom"===e.type?t._compileCustom(e,n):"fields"===e.type?t._compileFields(e,n):"media"===e.type?t._compileMedia(e,n):"text"===e.type?t._compileText(e,n):void 0})):"string"==typeof e?this._compileText(new Et.a({text:e}),0).text:e}},{key:"_destroyContentViewModels",value:function(){this.contentViewModels.forEach((function(e){return e&&!e.destroyed&&e.destroy()})),this._set("contentViewModels",[])}},{key:"_compileAttachments",value:function(e,t){var n=this.graphic,r=e.description,i=e.title;return this.contentViewModels[t]=new B(Object(w.a)({graphic:n},this._compileTitleAndDesc({title:i,description:r}))),e}},{key:"_compileCustom",value:function(e,t){var n=this.graphic,r=e.creator,i=e.destroyer;return this.contentViewModels[t]=new ie({graphic:n,creator:r,destroyer:i}),e}},{key:"_compileTitleAndDesc",value:function(e){var t=e.title,n=e.description,r=this._fieldInfoMap,i=this._sourceLayer,a=this.graphic,o=this.formattedAttributes,s=a.attributes,c=o.global;return{title:Object(Z.s)({attributes:s,fieldInfoMap:r,globalAttributes:c,layer:i,text:t}),description:Object(Z.s)({attributes:s,fieldInfoMap:r,globalAttributes:c,layer:i,text:n})}}},{key:"_compileFields",value:function(e,t){var n=this._effectivePopupTemplate,r=this.formattedAttributes,i=e.clone(),a=(null==e?void 0:e.fieldInfos)||(null==n?void 0:n.fieldInfos),o=null==n?void 0:n.expressionInfos,s=Object(w.a)(Object(w.a)({},r.global),r.content[t]),c=i.description,l=i.title,u=new pe(Object(w.a)({attributes:s,expressionInfos:o,fieldInfos:a},this._compileTitleAndDesc({title:l,description:c})));return this.contentViewModels[t]=u,i.fieldInfos=u.formattedFieldInfos.slice(0),i}},{key:"_compileMedia",value:function(e,t){var n=this.graphic,r=this._fieldInfoMap,i=this._effectivePopupTemplate,a=this.relatedInfos,o=this._sourceLayer,s=n.attributes,c=this.formattedAttributes.global,l=e.clone(),u=l.description,d=l.mediaInfos,f=l.title,p=new Ke(Object(w.a)({activeMediaInfoIndex:l.activeMediaInfoIndex||0,attributes:s,layer:o,fieldInfoMap:r,formattedAttributes:c,mediaInfos:d,popupTemplate:i,relatedInfos:a},this._compileTitleAndDesc({title:f,description:u})));return l.mediaInfos=p.formattedMediaInfos.slice(0),this.contentViewModels[t]=p,l}},{key:"_compileText",value:function(e,t){var n=e.clone(),r=this.graphic,i=this._fieldInfoMap,a=this._sourceLayer;if(n&&n.text){var o=r.attributes,s=this.formattedAttributes.global;n.text=Object(Z.s)({attributes:o,fieldInfoMap:i,globalAttributes:s,layer:a,text:n.text})}return this.contentViewModels[t]=new ie({graphic:r,creator:n.text}),n}},{key:"_compileLastEditInfo",value:function(){var e=this._effectivePopupTemplate,t=this._sourceLayer,n=this.graphic;if(e){var r=e.lastEditInfoEnabled,i=null==t?void 0:t.editFieldsInfo;return r&&i?Object(Z.e)(i,n.attributes):void 0}}},{key:"_compileTitle",value:function(e){var t=this._fieldInfoMap,n=this._sourceLayer,r=this.graphic.attributes,i=this.formattedAttributes.global;return Object(Z.s)({attributes:r,fieldInfoMap:t,globalAttributes:i,layer:n,text:e})}},{key:"_getTitle",value:function(){var e=Object(ee.a)(Q.a.mark((function e(){var t,n,r;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._effectivePopupTemplate,n=this.graphic,r=null==t?void 0:t.title,e.abrupt("return",Object(Z.m)(r,{graphic:n}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getContent",value:function(){var e=Object(ee.a)(Q.a.mark((function e(){var t,n,r;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._effectivePopupTemplate,n=this.graphic,r=null==t?void 0:t.content,e.abrupt("return",Object(Z.m)(r,{graphic:n}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_queryFeature",value:function(){var e=Object(ee.a)(Q.a.mark((function e(t){var n,r,i,a,o,s,c,l,u,d,f,p;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._featureAbortController,r=this._sourceLayer,i=this.graphic,a=this._effectivePopupTemplate,o=this.spatialReference,s=this.map,c=this.view,e.next=9,Object(Te.j)({content:this._getContent(),title:this._getTitle()});case 9:if(l=e.sent,u=l.content.value,d=l.title.value,n===this._featureAbortController&&i){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,Object(Te.j)({checkForRelatedFeatures:this._checkForRelatedFeatures(t),expressionAttributes:zt({popupTemplate:this._effectivePopupTemplate,spatialReference:o,graphic:i,map:s,view:c}),queryUpdatedFeature:Object(Z.p)({graphic:i,popupTemplate:a,layer:r,spatialReference:o},t)});case 16:f=e.sent,p=f.expressionAttributes.value,n===this._featureAbortController&&i&&(this._set("formattedAttributes",this._createFormattedAttributes(u,p)),this._set("title",this._compileTitle(d)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(u)||null));case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_createFormattedAttributes",value:function(e,t){var n=this._effectivePopupTemplate,r=this.graphic,i=this.relatedInfos,a=this._sourceLayer,o=this._fieldInfoMap,s=null==n?void 0:n.fieldInfos,c=Object(w.a)(Object(w.a)({},r.attributes),t),l={global:Object(Z.d)({fieldInfos:s,graphic:r,attributes:c,layer:a,fieldInfoMap:o,relatedInfos:i}),content:[]};return Array.isArray(e)&&e.forEach((function(e,t){"fields"===e.type&&e.fieldInfos&&(l.content[t]=Object(Z.d)({fieldInfos:e.fieldInfos,graphic:r,attributes:c,layer:a,fieldInfoMap:o,relatedInfos:i}))})),l}},{key:"_checkForRelatedFeatures",value:function(e){var t=this.graphic,n=this._effectivePopupTemplate;return this._queryRelatedInfos(t,Object(Z.g)(n),e)}},{key:"_queryRelatedInfos",value:function(){var e=Object(ee.a)(Q.a.mark((function e(t,n,r){var i,a,o,s,c,l,u=this;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.relatedInfos,a=this._sourceLayer,i.clear(),!Object(k.k)(a.associatedLayer)){e.next=8;break}return e.next=5,a.associatedLayer.load(r);case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=a;case 9:if(o=e.t0){e.next=12;break}return e.abrupt("return");case 12:if((s=n.filter((function(e){return e&&Object(Z.o)(e.fieldName)})))&&s.length){e.next=15;break}return e.abrupt("return");case 15:return n.forEach((function(e){return u._configureRelatedInfo(e,o)})),e.next=18,qe({relatedInfos:i,layer:o},r);case 18:return c=e.sent,Object.keys(c).forEach((function(e){var t,n=i.get(e.toString()),r=null==(t=c[e])?void 0:t.value;n&&r&&(n.layerInfo=r.data)})),e.next=22,He({graphic:t,relatedInfos:i,layer:o},r);case 22:l=e.sent,Object.keys(l).forEach((function(e){var t;ze(null==(t=l[e])?void 0:t.value,i.get(e.toString()))}));case 24:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_configureRelatedInfo",value:function(e,t){var n=this.relatedInfos,r=Fe(e.fieldName);if(r){var i=r.layerId,a=r.fieldName;if(i){var o=n.get(i.toString())||Ve(i,t);o&&(function(e){var t=e.relatedInfo,n=e.fieldName,r=e.fieldInfo;if(t.relatedFields.push(n),r.statisticType){var i=new Pe.a({statisticType:r.statisticType,onStatisticField:n,outStatisticFieldName:n});t.outStatistics.push(i)}}({relatedInfo:o,fieldName:a,fieldInfo:e}),this.relatedInfos.set(i,o))}}}}]),n}(b.a);Object(c.a)([Object(u.b)()],qt.prototype,"_featureAbortController",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],qt.prototype,"_effectivePopupTemplate",null),Object(c.a)([Object(u.b)({readOnly:!0})],qt.prototype,"_fieldInfoMap",null),Object(c.a)([Object(u.b)({readOnly:!0})],qt.prototype,"_sourceLayer",null),Object(c.a)([Object(u.b)({readOnly:!0})],qt.prototype,"content",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],qt.prototype,"contentViewModels",void 0),Object(c.a)([Object(u.b)({type:Boolean})],qt.prototype,"defaultPopupTemplateEnabled",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],qt.prototype,"formattedAttributes",void 0),Object(c.a)([Object(u.b)({type:te.a,value:null})],qt.prototype,"graphic",null),Object(c.a)([Object(u.b)({readOnly:!0})],qt.prototype,"lastEditInfo",void 0),Object(c.a)([Object(u.b)()],qt.prototype,"relatedInfos",void 0),Object(c.a)([Object(u.b)()],qt.prototype,"spatialReference",null),Object(c.a)([Object(u.b)({readOnly:!0})],qt.prototype,"title",void 0),Object(c.a)([Object(u.b)()],qt.prototype,"map",null),Object(c.a)([Object(u.b)({readOnly:!0})],qt.prototype,"waitingForContent",null),Object(c.a)([Object(u.b)()],qt.prototype,"view",void 0);var Ht=qt=Object(c.a)([Object(d.a)(Bt)],qt),Wt="esri-icon-loading-indicator esri-rotating",$t="esri-widget",Jt="esri-feature",Yt="esri-feature__size-container",Kt="esri-feature__title",Zt="esri-feature__main-container",Xt="esri-feature__content-element",Qt="esri-feature__text",en="esri-feature__last-edited-info",tn="esri-feature__loading-container",nn="esri-feature__loading-spinner",rn={title:!0,content:!0,lastEditedInfo:!0},an=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,r){var a;return Object(i.a)(this,n),(a=t.call(this,e,r))._contentWidgets=[],a.graphic=null,a.defaultPopupTemplateEnabled=!1,a.label=void 0,a.messages=null,a.messagesURIUtils=null,a.spatialReference=null,a.title=null,a.visibleElements=Object(w.a)({},rn),a.map=null,a.view=null,a.viewModel=new Ht,a}return Object(a.a)(n,[{key:"initialize",value:function(){var e=this;this.own(Object(p.a)(this,"viewModel.contentViewModels",(function(){return e._setupContentWidgets()})))}},{key:"destroy",value:function(){this._destroyContentWidgets()}},{key:"castVisibleElements",value:function(e){return Object(w.a)(Object(w.a)({},rn),e)}},{key:"render",value:function(){var e=this.viewModel.waitingForContent;return Object(F.a)("div",{class:this.classes(Jt,$t)},Object(F.a)("div",{class:Yt},this.renderTitle(),e?this.renderLoading():this.renderContentContainer()))}},{key:"setActiveMedia",value:function(e,t){this.viewModel.setActiveMedia(e,t)}},{key:"nextMedia",value:function(e){this.viewModel.nextMedia(e)}},{key:"previousMedia",value:function(e){this.viewModel.previousMedia(e)}},{key:"renderLoading",value:function(){return Object(F.a)("div",{key:"loading-container",class:tn},Object(F.a)("span",{class:this.classes(Wt,nn)}))}},{key:"renderContentContainer",value:function(){return this.visibleElements.content?Object(F.a)("div",{class:Zt},[this.renderContent(),this.renderLastEditInfo()]):null}},{key:"renderTitle",value:function(){var e=this.visibleElements,t=this.title;return e.title?Object(F.a)("h4",{class:Kt,innerHTML:t}):null}},{key:"renderContent",value:function(){var e=this.viewModel.content,t="content";if(!e)return null;if(Array.isArray(e))return e.length?Object(F.a)("div",{key:"".concat(t,"-content-elements")},e.map(this.renderContentElement,this)):null;if("string"==typeof e){var n=this._contentWidgets[0];return!n||n.destroyed?null:Object(F.a)("div",{key:"".concat(t,"-content")},n.render())}return this.renderNodeContent(e)}},{key:"renderContentElement",value:function(e,t){var n=this.visibleElements;if("boolean"!=typeof n.content&&!n.content[e.type])return null;switch(e.type){case"attachments":return this.renderAttachments(t);case"custom":return this.renderCustom(e,t);case"fields":return this.renderFields(t);case"media":return this.renderMedia(t);case"text":return this.renderText(e,t);default:return null}}},{key:"renderAttachments",value:function(e){var t=this._contentWidgets[e];if(!t||t.destroyed)return null;var n=t.viewModel,r=n.state,i=n.attachmentInfos;return"loading"===r||i.length>0?Object(F.a)("div",{key:this._buildKey("attachments-element",e),class:this.classes(Xt)},t.render()):null}},{key:"renderCustom",value:function(e,t){var n=e.creator,r=this._contentWidgets[t];return!r||r.destroyed?null:n?Object(F.a)("div",{key:this._buildKey("custom-element",t),class:Xt},r.render()):null}},{key:"renderFields",value:function(e){var t=this._contentWidgets[e];return!t||t.destroyed?null:Object(F.a)("div",{key:this._buildKey("fields-element",e),class:Xt},t.render())}},{key:"renderMedia",value:function(e){var t=this._contentWidgets[e];return!t||t.destroyed?null:Object(F.a)("div",{key:this._buildKey("media-element",e),class:Xt},t.render())}},{key:"renderLastEditInfo",value:function(){var e=this.visibleElements,t=this.messages,n=this.viewModel.lastEditInfo;if(!n||!e.lastEditedInfo)return null;var r=n.date,i=n.user,a="edit"===n.type?i?t.lastEditedByUser:t.lastEdited:i?t.lastCreatedByUser:t.lastCreated,o=Object(C.a)(a,{date:r,user:i});return Object(F.a)("div",{key:"edit-info-element",class:this.classes(en,Xt)},o)}},{key:"renderText",value:function(e,t){var n=e.text,r=this._contentWidgets[t];return!r||r.destroyed?null:n?Object(F.a)("div",{key:this._buildKey("text-element",t),class:this.classes(Xt,Qt)},r.render()):null}},{key:"_buildKey",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"".concat(e,"__").concat(this.get("viewModel.graphic.uid")||"0","-").concat(n.join("-"))}},{key:"_destroyContentWidgets",value:function(){this._contentWidgets.forEach((function(e){e.viewModel=null,e&&!e.destroyed&&e.destroy()})),this._contentWidgets=[]}},{key:"_setupContentWidgets",value:function(){var e=this;this._destroyContentWidgets();var t=this.get("viewModel.content"),n=this.viewModel.contentViewModels;if(Array.isArray(t))t.forEach((function(t,r){"attachments"===t.type&&(e._contentWidgets[r]=new K({displayType:t.displayType,viewModel:n[r]})),"fields"===t.type&&(e._contentWidgets[r]=new _e({viewModel:n[r]})),"media"===t.type&&(e._contentWidgets[r]=new Tt({viewModel:n[r]})),"text"===t.type&&(e._contentWidgets[r]=new le({viewModel:n[r]})),"custom"===t.type&&(e._contentWidgets[r]=new le({viewModel:n[r]}))}),this);else{var r=n[0];r&&!r.destroyed&&(this._contentWidgets[0]=new le({viewModel:r}))}this.scheduleRender()}}]),n}(V(D.a));Object(c.a)([Object(x.a)("viewModel.graphic")],an.prototype,"graphic",void 0),Object(c.a)([Object(x.a)("viewModel.defaultPopupTemplateEnabled")],an.prototype,"defaultPopupTemplateEnabled",void 0),Object(c.a)([Object(u.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],an.prototype,"label",void 0),Object(c.a)([Object(u.b)(),Object(R.a)("esri/widgets/Feature/t9n/Feature")],an.prototype,"messages",void 0),Object(c.a)([Object(u.b)(),Object(R.a)("esri/widgets/support/t9n/uriUtils")],an.prototype,"messagesURIUtils",void 0),Object(c.a)([Object(x.a)("viewModel.spatialReference")],an.prototype,"spatialReference",void 0),Object(c.a)([Object(x.a)("viewModel.title")],an.prototype,"title",void 0),Object(c.a)([Object(u.b)()],an.prototype,"visibleElements",void 0),Object(c.a)([Object(S.a)("visibleElements")],an.prototype,"castVisibleElements",null),Object(c.a)([Object(x.a)("viewModel.map")],an.prototype,"map",void 0),Object(c.a)([Object(x.a)("viewModel.view")],an.prototype,"view",void 0),Object(c.a)([Object(u.b)({type:Ht})],an.prototype,"viewModel",void 0);var on=an=Object(c.a)([Object(d.a)("esri.widgets.Feature")],an),sn=n(543),cn=n(61),ln=n(43),un=(n(71),n(224)),dn=n(252),fn=n(415),pn=n(130),hn=(n(76),n(174)),bn=n(544),vn=n(161),yn=n(48),mn=n(406),gn="esri-icon-zoom-in-magnifying-glass",On="esri-icon-trash",jn="esri-icon-table",wn=new dn.a({id:"zoom-to-feature",title:"{messages.zoom}",className:gn}),_n=new dn.a({id:"remove-selected-feature",title:"{messages.remove}",className:On}),kn=new dn.a({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:gn}),xn=new dn.a({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:jn}),Sn=l.a.getLogger("esri.widgets.Popup.PopupViewModel"),Tn=function(e){var t=e.event,n=e.view,r=t.action,i=n&&n.popup;if(!r)return Promise.reject(new Se.a("trigger-action:missing-arguments","Event has no action"));if(!i)return Promise.reject(new Se.a("trigger-action:missing-arguments","view.popup is missing"));var a=r.disabled,o=r.id;if(!o)return Promise.reject(new Se.a("trigger-action:invalid-action","action.id is missing"));if(a)return Promise.reject(new Se.a("trigger-action:invalid-action","Action is disabled"));if(o===wn.id)return function(e){return Pn.apply(this,arguments)}(i.viewModel);if(o===kn.id)return function(e){return In.apply(this,arguments)}(i.viewModel);if(i.viewModel.browseClusterEnabled=!1,o===xn.id&&(i.featureMenuOpen=!0,i.viewModel.browseClusterEnabled=!0),o===_n.id){i.close();var s=i.selectedFeature;if(!s)return Promise.reject(new Se.a("trigger-action:".concat(_n.id),"selectedFeature is required",{selectedFeature:s}));var c=s.sourceLayer;return c?c.remove(s):n.graphics.remove(s),Promise.resolve()}return Promise.resolve()};function En(e){var t=e.selectedFeature,n=e.location,r=e.view;return r?"3d"===r.type?t||n:e.get("selectedFeature.geometry")||n:null}function Cn(e,t){if("3d"!==(null==t?void 0:t.type)||!e||"esri.Graphic"!==e.declaredClass)return!0;var n=t.getViewForGraphic(e);if(n&&"whenGraphicBounds"in n){var r=!1;return n.whenGraphicBounds(e,{useViewElevation:!0}).then((function(e){r=!e||!e.boundingBox||e.boundingBox[0]===e.boundingBox[3]&&e.boundingBox[1]===e.boundingBox[4]&&e.boundingBox[2]===e.boundingBox[5]})).catch((function(){var t=new Se.a("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:e});Sn.error(t)})),r}return!0}function Pn(){return(Pn=Object(ee.a)(Q.a.mark((function e(t){var n,r,i,a,o,s,c,l,u;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.location,r=t.selectedFeature,i=t.view,a=t.zoomFactor,o=En(t)){e.next=4;break}return s=new Se.a("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:o,view:i}),e.abrupt("return",(Sn.error(s),Promise.reject(s)));case 4:return c=i.scale/a,l=t.get("selectedFeature.geometry")||n,u=l&&"point"===l.type&&Cn(r,i),wn.active=!0,wn.disabled=!0,e.next=9,t.view.goTo({target:o,scale:u?c:void 0});case 9:wn.active=!1,wn.disabled=!1,t.zoomToLocation=null,u&&(t.location=l);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function In(){return(In=Object(ee.a)(Q.a.mark((function e(t){var n,r,i,a,o,s,c,l,u;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.selectedFeature,"2d"===(null==(r=t.view)?void 0:r.type)){e.next=4;break}throw i=new Se.a("zoomToCluster:invalid-view","View must be 2d MapView.",{view:r}),Sn.error(i),i;case 4:if(n.isAggregate){e.next=7;break}throw a=new Se.a("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:n}),Sn.error(a),a;case 7:return o=n.sourceLayer,e.next=10,r.whenLayerView(o);case 10:return s=e.sent,(c=s.createQuery()).aggregateIds=[n.getObjectId()],kn.active=!0,kn.disabled=!0,e.next=15,s.queryExtent(c);case 15:return l=e.sent,u=l.extent,e.next=19,r.goTo({target:u});case 19:kn.active=!1,kn.disabled=!1;case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mn(e){return An.apply(this,arguments)}function An(){return(An=Object(ee.a)(Q.a.mark((function e(t){var n,r,i,a,o,s,c,l,u;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.selectedFeature,"2d"===(null==(r=t.view)?void 0:r.type)){e.next=4;break}throw i=new Se.a("displayClusterExtent:invalid-view","View must be 2d MapView.",{view:r}),Sn.error(i),i;case 4:if(n.isAggregate){e.next=7;break}throw a=new Se.a("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:n}),Sn.error(a),a;case 7:return o=n.sourceLayer,e.next=10,r.whenLayerView(o);case 10:return s=e.sent,(c=s.createQuery()).aggregateIds=[n.getObjectId()],e.next=15,s.queryExtent(c);case 15:l=e.sent,u=l.extent,t.selectedClusterBoundaryFeature.geometry=u,r.graphics.add(t.selectedClusterBoundaryFeature);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rn(e){return Ln.apply(this,arguments)}function Ln(){return(Ln=Object(ee.a)(Q.a.mark((function e(t){var n,r,i,a,o,s,c,l,u;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.selectedFeature,"2d"===(null==(r=t.view)?void 0:r.type)){e.next=4;break}throw i=new Se.a("browseAggregateFeatures:invalid-view","View must be 2d MapView.",{view:r}),Sn.error(i),i;case 4:if(n.isAggregate){e.next=7;break}throw a=new Se.a("browseAggregateFeatures:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:n}),Sn.error(a),a;case 7:return o=n.sourceLayer,e.next=10,r.whenLayerView(o);case 10:return s=e.sent,(c=s.createQuery()).aggregateIds=[n.getObjectId()],xn.active=!0,xn.disabled=!0,e.next=15,s.queryFeatures(c);case 15:l=e.sent,u=l.features,xn.active=!1,xn.disabled=!1,t.features=[n].concat(u);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fn=n(334),Dn=v.a.ofType({key:"type",defaultKeyValue:"button",base:un.a,typeMap:{button:dn.a,toggle:fn.a}}),Nn="esri.widgets.Popup.PopupViewModel",Vn=l.a.getLogger(Nn),zn=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e))._handles=new P.a,r._pendingPromises=new Set,r._fetchFeaturesController=null,r._selectedClusterFeature=null,r.featurePage=null,r.featuresPerPage=20,r.actions=new Dn,r.defaultPopupTemplateEnabled=!1,r.autoCloseEnabled=!1,r.autoOpenEnabled=!0,r.browseClusterEnabled=!1,r.content=null,r.featureViewModels=[],r.highlightEnabled=!0,r.includeDefaultActions=!0,r.selectedClusterBoundaryFeature=new te.a({symbol:new pn.default({outline:{width:1.5,color:"cyan"},style:"none"})}),r.title=null,r.updateLocationEnabled=!1,r.view=null,r.visible=!1,r.zoomFactor=4,r.zoomToLocation=null,r}return Object(a.a)(n,[{key:"isLoadingFeature",get:function(){return this.featureViewModels.some((function(e){return e.waitingForContent}))}},{key:"initialize",value:function(){var e=this;this._handles.add([Object(p.a)(this,["autoOpenEnabled","view"],(function(){return e._autoOpenEnabledChange()})),this.on("view-change",(function(){return e._autoClose()})),Object(p.d)(this,["highlightEnabled","selectedFeature","visible","view"],(function(){return e._highlightFeature()})),Object(p.d)(this,"view.animation.state",(function(t){return e._animationStateChange(t)})),Object(p.d)(this,"location",(function(t){return e._locationChange(t)})),Object(p.d)(this,"selectedFeature",(function(t){return e._selectedFeatureChange(t)})),Object(p.d)(this,["selectedFeatureIndex","featureCount","featuresPerPage"],(function(){return e._selectedFeatureIndexChange()})),Object(p.d)(this,["featurePage","selectedFeatureIndex","featureCount","featuresPerPage, featureViewModels"],(function(){return e._setGraphicOnFeatureViewModels()})),Object(p.d)(this,"featureViewModels",(function(){return e._featureViewModelsChange()})),this.on("trigger-action",(function(t){return Tn({event:t,view:e.view})})),Object(p.f)(this,"waitingForResult",(function(){return e._waitingForResultChange()})),Object(p.d)(this,["features","view","view.map","view.spatialReference"],(function(){return e._updateFeatureVMs()})),Object(p.d)(this,["view.scale"],this._viewScaleChange),Object(p.f)(this,"visible",(function(){return e.browseClusterEnabled=!1})),Object(p.d)(this,"browseClusterEnabled",(function(t){return t?e.enableClusterBrowsing():e.disableClusterBrowsing()}))])}},{key:"destroy",value:function(){this._cancelFetchingFeatures(),this._handles.destroy(),this._handles=null,this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}},{key:"active",get:function(){return!(!this.visible||this.waitingForResult)}},{key:"allActions",get:function(){var e=this._get("allActions")||new Dn;e.removeAll();var t=this.actions,n=this.defaultActions,r=this.defaultPopupTemplateEnabled,i=this.includeDefaultActions,a=this.selectedFeature,o=i?n.concat(t):t,s=a&&("function"==typeof a.getEffectivePopupTemplate&&a.getEffectivePopupTemplate(r)||a.popupTemplate),c=s&&s.actions,l=s&&s.overwriteActions?c:c?c.concat(o):o;return l&&l.filter(Boolean).forEach((function(t){return e.add(t)})),e}},{key:"defaultActions",get:function(){var e,t=this._get("defaultActions")||new Dn;return t.removeAll(),t.addMany(null!=(e=this.selectedFeature)&&e.isAggregate?[kn.clone(),xn.clone()]:[wn.clone()]),t}},{key:"featureCount",get:function(){return this.features.length}},{key:"features",get:function(){return this._get("features")||[]},set:function(e){var t=e||[];this._set("features",t);var n=this.pendingPromisesCount,r=this.promiseCount,i=this.selectedFeatureIndex,a=r&&t.length;a&&n&&-1===i?this.selectedFeatureIndex=0:a&&-1!==i||(this.selectedFeatureIndex=t.length?0:-1)}},{key:"location",get:function(){return this._get("location")||null},set:function(e){var t=this.get("view.spatialReference.isWebMercator");e&&e.get("spatialReference.isWGS84")&&t&&(e=Object(cn.b)(e)),this._set("location",e)}},{key:"pendingPromisesCount",get:function(){return this._pendingPromises.size}},{key:"waitingForResult",get:function(){return!(!(this._fetchFeaturesController||this.pendingPromisesCount>0)||0!==this.featureCount)}},{key:"promiseCount",get:function(){return this.promises.length}},{key:"promises",get:function(){return this._get("promises")||[]},set:function(e){var t=this;if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach((function(e){t._pendingPromises.add(e);e.then((function(n){t._pendingPromises.has(e)&&t._updateFeatures(n),t._updatePendingPromises(e)}),(function(){return t._updatePendingPromises(e)}))})),this.notifyChange("pendingPromisesCount")}},{key:"selectedFeature",get:function(){var e=this.features,t=this.selectedFeatureIndex;return-1===t?null:e[t]||null}},{key:"selectedFeatureIndex",get:function(){var e=this._get("selectedFeatureIndex");return"number"==typeof e?e:-1},set:function(e){var t=this.featureCount;e=isNaN(e)||e<-1||!t?-1:(e+t)%t,this._set("selectedFeatureIndex",e)}},{key:"selectedFeatureViewModel",get:function(){return this.featureViewModels[this.selectedFeatureIndex]||null}},{key:"state",get:function(){return this.get("view.ready")?"ready":"disabled"}},{key:"centerAtLocation",value:function(){var e=this.view,t=En(this);if(!t){var n=new Se.a("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:t,view:e});return Vn.error(n),Promise.reject(n)}return this.callGoTo({target:{target:t,scale:e.scale}})}},{key:"clear",value:function(){this.set({promises:[],features:[],content:null,title:null,location:null})}},{key:"fetchFeatures",value:function(e,t){var n=this.view;if(!n||!e){var r=new Se.a("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:n});return Vn.error(r),Promise.reject(r)}return n.fetchPopupFeatures(e,{event:t&&t.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:t&&t.signal})}},{key:"open",value:function(e){var t=Object(w.a)(Object(w.a)({updateLocationEnabled:!1,promises:[],fetchFeatures:!1},e),{},{visible:!0}),n=t.fetchFeatures;delete t.fetchFeatures,n&&this._setFetchFeaturesPromises(t.location),this.set(t)}},{key:"triggerAction",value:function(e){var t=this.allActions.getItemAt(e);t&&!t.disabled&&this.emit("trigger-action",{action:t})}},{key:"next",value:function(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}},{key:"previous",value:function(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}},{key:"disableClusterBrowsing",value:function(){var e;(e=this).features=e.features.filter((function(e){return e.isAggregate})),this._clearBrowsedClusterGraphics()}},{key:"enableClusterBrowsing",value:function(){var e=Object(ee.a)(Q.a.mark((function e(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mn(this);case 2:return e.next=4,Rn(this);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_animationStateChange",value:function(e){this.zoomToLocation||(wn.disabled="waiting-for-target"===e)}},{key:"_clearBrowsedClusterGraphics",value:function(){var e,t=null==(e=this.view)?void 0:e.graphics;t&&(t.remove(this.selectedClusterBoundaryFeature),t.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}},{key:"_viewScaleChange",value:function(){var e;(null!=(e=this.selectedFeature)&&e.isAggregate||this.browseClusterEnabled)&&(this.browseClusterEnabled=!1,this.visible=!1)}},{key:"_locationChange",value:function(e){var t=this.selectedFeature;this.updateLocationEnabled&&e&&(!t||t.geometry)&&this.centerAtLocation()}},{key:"_selectedFeatureIndexChange",value:function(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}},{key:"_featureViewModelsChange",value:function(){this.featurePage=this.featureCount>1?1:null}},{key:"_setGraphicOnFeatureViewModels",value:function(){var e=this.features,t=this.featureCount,n=this.featurePage,r=this.featuresPerPage,i=this.featureViewModels;if(null!==n){var a=((n-1)*r+t)%t,o=a+r;i.slice(a,o).forEach((function(t,n){t&&!t.graphic&&(t.graphic=e[a+n])}))}}},{key:"_selectedFeatureChange",value:function(){var e=Object(ee.a)(Q.a.mark((function e(t){var n,r,i,a=this;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(n=this.location,r=this.updateLocationEnabled,i=this.view,!this.browseClusterEnabled){e.next=11;break}if(this._selectedClusterFeature&&(i.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),!t.isAggregate){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,Object(vn.a)(t);case 8:return t.symbol=e.sent,this._selectedClusterFeature=t,e.abrupt("return",void i.graphics.add(this._selectedClusterFeature));case 11:!r&&n||!t.geometry?r&&!t.geometry&&this.centerAtLocation().then((function(){a.location=i.center.clone()})):this.location=Object(k.q)(this._getPointFromGeometry(t.geometry));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_waitingForResultChange",value:function(){!this.featureCount&&this.promises&&(this.visible=!1)}},{key:"_setFetchFeaturesPromises",value:function(e){var t=this;return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then((function(e){var n=e.clientOnlyGraphics,r=e.promisesPerLayerView,i=Promise.resolve(n),a=r.map((function(e){return e.promise}));t.promises=[i].concat(Object(ke.a)(a))}))}},{key:"_destroyFeatureVMs",value:function(){this.featureViewModels.forEach((function(e){return e&&!e.destroyed&&e.destroy()})),this._set("featureViewModels",[])}},{key:"_updateFeatureVMs",value:function(){var e=this,t=this.selectedFeature,n=this.features,r=this.featureViewModels;if(null!=t&&t.isAggregate||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),n&&n.length){var i=r.slice(0),a=[];n.forEach((function(n,r){if(n){var o=null;if(i.some((function(e,t){return e&&e.graphic===n&&(o=e,i.splice(t,1)),!!o})),o)a[r]=o;else{var s,c,l=new Ht({defaultPopupTemplateEnabled:e.defaultPopupTemplateEnabled,spatialReference:null==(s=e.view)?void 0:s.spatialReference,graphic:n===t?n:null,map:null==(c=e.view)?void 0:c.map,view:e.view});a[r]=l}}})),i.forEach((function(e){return e&&!e.destroyed&&e.destroy()})),this._set("featureViewModels",a)}}},{key:"_getScreenPoint",value:function(e){var t=this.view;return t&&e&&"function"==typeof t.toScreen?t.toScreen(e):null}},{key:"_autoOpenEnabledChange",value:function(){var e=this,t="auto-fetch-features",n=this._handles,r=this.autoOpenEnabled;if(n.remove(t),r&&this.view){var i=this.view.on("click",(function(t){"mouse"===t.pointerType&&0!==t.button||e._fetchFeaturesAndOpen(t)}),yn.b.WIDGET);n.add(i,t)}}},{key:"_cancelFetchingFeatures",value:function(){var e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}},{key:"_fetchFeaturesWithController",value:function(e,t){var n=this;this._cancelFetchingFeatures();var r=Object(Te.d)(),i=r.signal;this._fetchFeaturesController=r,this.notifyChange("waitingForResult");var a=this.fetchFeatures(e,{signal:i,event:t});return a.catch((function(){})).then((function(){n._fetchFeaturesController=null,n.notifyChange("waitingForResult")})),a}},{key:"_fetchFeaturesAndOpen",value:function(e){var t=e.screenPoint,n=e.mapPoint,r=this.view;this._fetchFeaturesWithController(t,e).then((function(e){var t=e.clientOnlyGraphics,i=e.promisesPerLayerView,a=e.location,o=[Promise.resolve(t)].concat(Object(ke.a)(i.map((function(e){return e.promise}))));return r.popup.open({location:a||n,promises:o}),e}))}},{key:"_updatePendingPromises",value:function(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}},{key:"_autoClose",value:function(){this.autoCloseEnabled&&(this.visible=!1)}},{key:"_getPointFromGeometry",value:function(e){return Object(k.j)(e)?null:"point"===e.type?e:"extent"===e.type?e.center:"polygon"===e.type?e.centroid:"multipoint"===e.type||"polyline"===e.type?e.extent.center:null}},{key:"_getLayerView",value:function(){var e=Object(ee.a)(Q.a.mark((function e(t,n){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.when();case 2:return e.abrupt("return",t.whenLayerView(n));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_highlightFeature",value:function(){var e=Object(ee.a)(Q.a.mark((function e(){var t,n,r,i,a,o,s,c,l,u,d,f,p;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="highlight",this._handles.remove(t),n=this.selectedFeature,r=this.highlightEnabled,i=this.view,a=this.visible,n&&i&&r&&a){e.next=5;break}return e.abrupt("return");case 5:if(o=n.layer,s=n.sourceLayer,o&&o instanceof hn.a){e.next=8;break}return e.abrupt("return");case 8:return"map-notes"===(null==s?void 0:s.type)&&(o=s),c=this._getLayerView(i,o),this._highlightPromise=c,e.next=13,c;case 13:if((l=e.sent)&&Object(mn.a)(l)&&this._highlightPromise===c&&this.selectedFeature&&this.highlightEnabled&&this.visible){e.next=16;break}return e.abrupt("return");case 16:u="objectIdField"in o&&o.objectIdField,d=n.attributes,f=d&&u&&d[u],p=l.highlight(f||n),this._handles.add(p,t);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_updateFeatures",value:function(e){var t=this.features;if(e&&e.length)if(t.length){var n=e.filter((function(e){return-1===t.indexOf(e)}));this.features=t.concat(n)}else this.features=e}}]),n}(Object(Fn.a)(bn.a));Object(c.a)([Object(u.b)()],zn.prototype,"featurePage",void 0),Object(c.a)([Object(u.b)()],zn.prototype,"featuresPerPage",void 0),Object(c.a)([Object(u.b)()],zn.prototype,"isLoadingFeature",null),Object(c.a)([Object(u.b)({type:Dn})],zn.prototype,"actions",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],zn.prototype,"active",null),Object(c.a)([Object(u.b)({readOnly:!0})],zn.prototype,"allActions",null),Object(c.a)([Object(u.b)({type:Boolean})],zn.prototype,"defaultPopupTemplateEnabled",void 0),Object(c.a)([Object(u.b)()],zn.prototype,"autoCloseEnabled",void 0),Object(c.a)([Object(u.b)()],zn.prototype,"autoOpenEnabled",void 0),Object(c.a)([Object(u.b)()],zn.prototype,"browseClusterEnabled",void 0),Object(c.a)([Object(u.b)()],zn.prototype,"content",void 0),Object(c.a)([Object(u.b)({type:Dn,readOnly:!0})],zn.prototype,"defaultActions",null),Object(c.a)([Object(u.b)({readOnly:!0})],zn.prototype,"featureCount",null),Object(c.a)([Object(u.b)()],zn.prototype,"features",null),Object(c.a)([Object(u.b)({readOnly:!0})],zn.prototype,"featureViewModels",void 0),Object(c.a)([Object(u.b)()],zn.prototype,"highlightEnabled",void 0),Object(c.a)([Object(u.b)()],zn.prototype,"includeDefaultActions",void 0),Object(c.a)([Object(u.b)({type:ln.a})],zn.prototype,"location",null),Object(c.a)([Object(u.b)({readOnly:!0})],zn.prototype,"pendingPromisesCount",null),Object(c.a)([Object(u.b)({readOnly:!0})],zn.prototype,"selectedClusterBoundaryFeature",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],zn.prototype,"waitingForResult",null),Object(c.a)([Object(u.b)({readOnly:!0})],zn.prototype,"promiseCount",null),Object(c.a)([Object(u.b)()],zn.prototype,"promises",null),Object(c.a)([Object(u.b)({value:null,readOnly:!0})],zn.prototype,"selectedFeature",null),Object(c.a)([Object(u.b)({value:-1})],zn.prototype,"selectedFeatureIndex",null),Object(c.a)([Object(u.b)({readOnly:!0})],zn.prototype,"selectedFeatureViewModel",null),Object(c.a)([Object(u.b)({readOnly:!0})],zn.prototype,"state",null),Object(c.a)([Object(u.b)()],zn.prototype,"title",void 0),Object(c.a)([Object(u.b)()],zn.prototype,"updateLocationEnabled",void 0),Object(c.a)([Object(u.b)()],zn.prototype,"view",void 0),Object(c.a)([Object(u.b)()],zn.prototype,"visible",void 0),Object(c.a)([Object(u.b)()],zn.prototype,"zoomFactor",void 0),Object(c.a)([Object(u.b)()],zn.prototype,"zoomToLocation",void 0),Object(c.a)([Object(u.b)()],zn.prototype,"centerAtLocation",null);var Un=zn=Object(c.a)([Object(d.a)(Nn)],zn),Bn="selected-index",Gn="popup-spinner",qn="esri-icon-left-triangle-arrow",Hn="esri-icon-right-triangle-arrow",Wn="esri-icon-maximize",$n="esri-icon-dock-bottom",Jn="esri-icon-dock-left",Yn="esri-icon-dock-right",Kn="esri-icon-close",Zn="esri-icon-minimize",Xn="esri-icon-check-mark",Qn="esri-icon-loading-indicator",er="esri-icon-default-action",tr="esri-icon-handle-horizontal",nr="esri-rotating",rr="esri-popup",ir="esri-widget",ar="esri-popup__main-container",or="esri-popup__loading-container",sr="esri-popup--is-collapsible",cr="esri-popup--is-collapsed",lr="esri-popup--shadow",ur="esri-popup--is-docked",dr="esri-popup--is-docked-top-left",fr="esri-popup--is-docked-top-center",pr="esri-popup--is-docked-top-right",hr="esri-popup--is-docked-bottom-left",br="esri-popup--is-docked-bottom-center",vr="esri-popup--is-docked-bottom-right",yr="esri-popup--aligned-top-center",mr="esri-popup--aligned-bottom-center",gr="esri-popup--aligned-top-left",Or="esri-popup--aligned-bottom-left",jr="esri-popup--aligned-top-right",wr="esri-popup--aligned-bottom-right",_r="esri-popup--feature-menu-open",kr="esri-popup--actions-menu-open",xr="esri-popup--feature-updated",Sr="esri-popup__header",Tr="esri-popup__header-buttons",Er="esri-popup__header-container",Cr="esri-popup__header-container--button",Pr="esri-popup__header-title",Ir="esri-popup__content",Mr="esri-popup__footer",Ar="esri-popup__footer--has-pagination",Rr="esri-popup__footer--has-actions",Lr="esri-popup__footer--has-actions-menu",Fr="esri-popup__button",Dr="esri-popup__button--disabled",Nr="esri-popup__button--dock",Vr="esri-popup__icon",zr="esri-popup__icon--dock-icon",Ur="esri-popup__inline-actions-container",Br="esri-popup__actions-menu-button",Gr="esri-popup__actions",qr="esri-popup__action",Hr="esri-popup__action-image",Wr="esri-popup__action-text",$r="esri-popup__action-toggle",Jr="esri-popup__action-toggle--on",Yr="esri-popup__pointer",Kr="esri-popup__pointer-direction",Zr="esri-popup__navigation",Xr="esri-popup__pagination-previous",Qr="esri-popup__pagination-next",ei="esri-popup__pagination-previous-icon",ti="esri-popup__pagination-previous-icon--rtl",ni="esri-popup__pagination-next-icon",ri="esri-popup__pagination-next-icon--rtl",ii="esri-popup__feature-menu",ai="esri-popup__feature-menu-list",oi="esri-popup__feature-menu-item",si="esri-popup__feature-menu-viewport",ci="esri-popup__feature-menu-header",li="esri-popup__feature-menu-item--selected",ui="esri-popup__feature-menu-button",di="esri-popup__feature-menu-title",fi="esri-popup__feature-menu-observer",pi="esri-popup__feature-menu-loader",hi={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},bi="esri-popup";function vi(e,t){return void 0===t?"".concat(bi,"__").concat(e):"".concat(bi,"__").concat(e,"-").concat(t)}var yi="esri.widgets.Popup",mi=l.a.getLogger(yi),gi={closeButton:!0,featureNavigation:!0},Oi=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,a){var o;return Object(i.a)(this,n),(o=t.call(this,e,a))._blurClose=!1,o._blurContainer=!1,o._containerNode=null,o._mainContainerNode=null,o._featureMenuNode=null,o._actionsMenuNode=null,o._focusClose=!1,o._focusContainer=!1,o._focusDockButton=!1,o._focusFeatureMenuButton=!1,o._focusActionsMenuButton=!1,o._focusFirstFeature=!1,o._focusFirstAction=!1,o._handles=new P.a,o._pointerOffsetInPx=16,o._spinner=null,o._feature=null,o._featureMenuIntersectionObserverCallback=function(e){var t=Object(r.a)(e,1)[0];null!=t&&t.isIntersecting&&o.viewModel.featurePage++},o._featureMenuIntersectionObserver=new IntersectionObserver(o._featureMenuIntersectionObserverCallback),o._displaySpinnerThrottled=Object(I.a)((function(){return o._displaySpinner()}),0),o.actions=null,o.alignment="auto",o.autoCloseEnabled=null,o.autoOpenEnabled=null,o.defaultPopupTemplateEnabled=null,o.content=null,o.collapsed=!1,o.collapseEnabled=!0,o.dockEnabled=!1,o.featureCount=null,o.featureMenuOpen=!1,o.features=null,o.goToOverride=null,o.highlightEnabled=null,o.location=null,o.label=void 0,o.maxInlineActions=3,o.messages=null,o.messagesCommon=null,o.promises=null,o.selectedFeature=null,o.selectedFeatureIndex=null,o.spinnerEnabled=!0,o.title=null,o.updateLocationEnabled=null,o.view=null,o.viewModel=new Un,o.visible=null,o.visibleElements=Object(w.a)({},gi),o._addSelectedFeatureIndexHandle(),o.own([Object(p.d)(Object(_.a)(o),"viewModel.screenLocation",(function(){return o._positionContainer()})),Object(p.d)(Object(_.a)(o),["viewModel.active","dockEnabled"],(function(){return o._toggleScreenLocationEnabled()})),Object(p.d)(Object(_.a)(o),"viewModel.screenLocation",(function(e,t){!!e!=!!t&&o.reposition()})),Object(p.d)(Object(_.a)(o),["viewModel.view.padding","viewModel.view.size","viewModel.active","viewModel.location","alignment"],(function(){return o.reposition()})),Object(p.d)(Object(_.a)(o),"spinnerEnabled",(function(e){return o._spinnerEnabledChange(e)})),Object(p.d)(Object(_.a)(o),"viewModel.view.size",(function(e,t){return o._updateDockEnabledForViewSize(e,t)})),Object(p.d)(Object(_.a)(o),"viewModel.view",(function(e,t){return o._viewChange(e,t)})),Object(p.d)(Object(_.a)(o),"viewModel.view.ready",(function(e,t){return o._viewReadyChange(e,t)})),Object(p.d)(Object(_.a)(o),["viewModel.waitingForResult","viewModel.location"],(function(){o._hideSpinner(),o._displaySpinnerThrottled()})),Object(p.d)(Object(_.a)(o),"selectedFeatureWidget.viewModel.title",(function(e){return o._setTitleFromFeatureWidget(e)})),Object(p.d)(Object(_.a)(o),["selectedFeatureWidget.viewModel.content","selectedFeatureWidget.viewModel.waitingForContent"],(function(){return o._setContentFromFeatureWidget()})),Object(p.f)(Object(_.a)(o),"collapsed",(function(){var e,t;"xsmall"===(null==(e=o.viewModel)||null==(t=e.view)?void 0:t.widthBreakpoint)&&o.viewModel.active&&o.collapseEnabled&&o.viewModel.centerAtLocation()})),Object(p.b)(Object(_.a)(o),"viewModel.allActions","change",(function(){return o._watchActions()})),Object(p.a)(Object(_.a)(o),"viewModel.allActions",(function(){return o._watchActions()})),Object(p.d)(Object(_.a)(o),"viewModel.featureViewModels",(function(){return o._featureMenuViewportScrollTop()}))]),o}return Object(a.a)(n,[{key:"destroy",value:function(){var e,t;this._destroySelectedFeatureWidget(),this._destroySpinner(),null==(e=this._handles)||e.destroy(),this._unobserveFeatureMenuObserver(),null==(t=this._featureMenuIntersectionObserver)||t.disconnect(),this._handles=null}},{key:"actionsMenuId",get:function(){return"".concat(this.id,"-actions-menu")}},{key:"actionsMenuButtonId",get:function(){return"".concat(this.id,"-actions-menu-button")}},{key:"featureMenuId",get:function(){return"".concat(this.id,"-feature-menu")}},{key:"titleId",get:function(){return"".concat(this.id,"-popup-title")}},{key:"contentId",get:function(){return"".concat(this.id,"-popup-content")}},{key:"hasContent",get:function(){var e,t,n,r,i;return!!(this.selectedFeatureWidget?(null==(e=this.selectedFeatureWidget)||null==(t=e.viewModel)?void 0:t.waitingForContent)||(null==(n=this.selectedFeatureWidget)||null==(r=n.viewModel)?void 0:r.content):null==(i=this.viewModel)?void 0:i.content)}},{key:"featureNavigationVisible",get:function(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}},{key:"collapsible",get:function(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}},{key:"featureMenuVisible",get:function(){return this.featureNavigationVisible&&this.featureMenuOpen}},{key:"contentCollapsed",get:function(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}},{key:"dividedActions",get:function(){return this._divideActions()}},{key:"actionsMenuOpen",get:function(){return!!this.viewModel.active&&this._get("actionsMenuOpen")},set:function(e){this._set("actionsMenuOpen",!!e)}},{key:"currentAlignment",get:function(){return this._getCurrentAlignment()}},{key:"currentDockPosition",get:function(){return this._getCurrentDockPosition()}},{key:"dockOptions",get:function(){return this._get("dockOptions")||hi},set:function(e){var t=Object(w.a)({},hi),n=this.get("viewModel.view.breakpoints"),r={};n&&(r.width=n.xsmall,r.height=n.xsmall);var i=Object(w.a)(Object(w.a)({},t),e),a=Object(w.a)(Object(w.a)({},t.breakpoint),r),o=i.breakpoint;!0===o?i.breakpoint=a:"object"==typeof o&&(i.breakpoint=Object(w.a)(Object(w.a)({},a),o)),this._set("dockOptions",i),this._setCurrentDockPosition(),this.reposition()}},{key:"featureNavigationEnabled",set:function(e){Object(T.c)(mi,"featureNavigationEnabled",{replacement:"visibleElements.featureNavigation",version:"4.15"}),this.visibleElements=Object(w.a)(Object(w.a)({},this.visibleElements),{},{featureNavigation:e})}},{key:"selectedFeatureWidget",get:function(){var e=this._feature,t=this.visibleElements,n=this.viewModel.selectedFeatureViewModel,r=Object(w.a)(Object(w.a)({},t),{},{title:!1});return n?(e?(e.viewModel=n,e.visibleElements=r):this._feature=new on({viewModel:n,visibleElements:r}),this._feature):null}},{key:"castVisibleElements",value:function(e){return Object(w.a)(Object(w.a)({},gi),e)}},{key:"blur",value:function(){this.viewModel.active||mi.warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}},{key:"clear",value:function(){this.viewModel.clear()}},{key:"close",value:function(){this.visible=!1}},{key:"fetchFeatures",value:function(e,t){return this.viewModel.fetchFeatures(e,t)}},{key:"focus",value:function(){this.viewModel.active||mi.warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}},{key:"next",value:function(){return this.viewModel.next()}},{key:"open",value:function(e){var t,n;this._handles.remove(Bn);var r=!!e&&!!e.featureMenuOpen,i=!!e&&!!e.actionsMenuOpen,a={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:i,featureMenuOpen:r};"xsmall"===(null==(t=this.viewModel)||null==(n=t.view)?void 0:n.widthBreakpoint)&&(a.collapsed=!0),this.set(a),this.viewModel.open(e),this._addSelectedFeatureIndexHandle()}},{key:"previous",value:function(){return this.viewModel.previous()}},{key:"reposition",value:function(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}},{key:"triggerAction",value:function(e){this.viewModel.triggerAction(e)}},{key:"render",value:function(){var e,t,n,r,i,a=this.actionsMenuOpen,o=this.dockEnabled,s=this.featureMenuVisible,c=this.dividedActions,l=this.currentAlignment,u=this.currentDockPosition,d=this.viewModel.active,f=c.menuActions,p=d&&f.length>1&&a,h=d&&o,b=d&&!o,v=null==(t=this.selectedFeature)||null==(n=t.layer)?void 0:n.title,y=null==(r=this.selectedFeature)||null==(i=r.layer)?void 0:i.id,m=(e={},Object(j.a)(e,yr,"top-center"===l),Object(j.a)(e,mr,"bottom-center"===l),Object(j.a)(e,gr,"top-left"===l),Object(j.a)(e,Or,"bottom-left"===l),Object(j.a)(e,jr,"top-right"===l),Object(j.a)(e,wr,"bottom-right"===l),Object(j.a)(e,ur,h),Object(j.a)(e,lr,b),Object(j.a)(e,dr,"top-left"===u),Object(j.a)(e,fr,"top-center"===u),Object(j.a)(e,pr,"top-right"===u),Object(j.a)(e,hr,"bottom-left"===u),Object(j.a)(e,br,"bottom-center"===u),Object(j.a)(e,vr,"bottom-right"===u),Object(j.a)(e,_r,s),Object(j.a)(e,kr,p),e);return Object(F.a)("div",{class:this.classes(rr,m),role:"presentation","data-layer-title":v,"data-layer-id":y,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},d?[this.renderMainContainer(),this.renderPointer()]:null)}},{key:"renderLoadingIcon",value:function(){return Object(F.a)("span",{"aria-hidden":"true",class:this.classes(Vr,Qn,nr)})}},{key:"renderNavigationLoading",value:function(){var e=this.messagesCommon;return this.viewModel.pendingPromisesCount?Object(F.a)("div",{key:vi("loading-container"),role:"presentation",class:or,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}},{key:"renderPreviousIcon",value:function(){var e,t=Object(M.f)(),n=(e={},Object(j.a)(e,Hn,t),Object(j.a)(e,ti,t),Object(j.a)(e,qn,!t),Object(j.a)(e,ei,!t),e);return Object(F.a)("span",{"aria-hidden":"true",class:this.classes(Vr,n)})}},{key:"renderPreviousButton",value:function(){var e=this.messages;return Object(F.a)("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(Fr,Xr),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())}},{key:"renderNextIcon",value:function(){var e,t=Object(M.f)(),n=(e={},Object(j.a)(e,qn,t),Object(j.a)(e,ri,t),Object(j.a)(e,Hn,!t),Object(j.a)(e,ni,!t),e);return Object(F.a)("span",{"aria-hidden":"true",class:this.classes(Vr,n)})}},{key:"renderNextButton",value:function(){var e=this.messages;return Object(F.a)("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(Fr,Qr),"aria-label":e.next,title:e.next},this.renderNextIcon())}},{key:"renderFeatureMenuButton",value:function(){var e=this.featureMenuOpen,t=this.featureMenuId,n=this.messagesCommon,r=this.viewModel,i=r.featureCount,a=r.selectedFeatureIndex;return Object(F.a)("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(Fr,ui),"aria-haspopup":"true","aria-controls":t,"aria-expanded":e.toString(),"aria-label":n.menu,title:n.menu},this._getPageText(i,a))}},{key:"renderNavigationButtons",value:function(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null}},{key:"renderDockIcon",value:function(){var e,t=this.dockEnabled,n=this._wouldDockTo(),r=(e={},Object(j.a)(e,Zn,t),Object(j.a)(e,zr,!t),Object(j.a)(e,Yn,!t&&("top-right"===n||"bottom-right"===n)),Object(j.a)(e,Jn,!t&&("top-left"===n||"bottom-left"===n)),Object(j.a)(e,Wn,!t&&"top-center"===n),Object(j.a)(e,$n,!t&&"bottom-center"===n),e);return Object(F.a)("span",{"aria-hidden":"true",class:this.classes(r,Vr)})}},{key:"renderDockButton",value:function(){var e,t,n,r=this.dockEnabled,i=this.messages,a=null==(e=this.viewModel)||null==(t=e.view)?void 0:t.widthBreakpoint,o=r?i.undock:i.dock;return"xsmall"!==a&&null!=(n=this.dockOptions)&&n.buttonEnabled?Object(F.a)("div",{role:"button","aria-label":o,title:o,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(Fr,Nr)},this.renderDockIcon()):null}},{key:"renderTitle",value:function(){var e=this.viewModel.title,t=this.titleId,n=this.collapsible,r=this.contentCollapsed,i=this.messagesCommon,a=Object(j.a)({},Cr,n),o=Object(F.a)("h2",{class:Pr,innerHTML:e}),s=n?Object(F.a)("button",{key:"".concat(e,"--collapsible"),id:t,title:r?i.expand:i.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(Er,a),"aria-expanded":r?"false":"true",onclick:this._toggleCollapsed},o):Object(F.a)("div",{key:e,id:t,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(Er,a)},o);return e?s:null}},{key:"renderCloseIcon",value:function(){return Object(F.a)("span",{"aria-hidden":"true",class:this.classes(Vr,Kn)})}},{key:"renderCloseButton",value:function(){var e=this.visibleElements,t=this.messagesCommon;return e.closeButton?Object(F.a)("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:Fr,"aria-label":t.close,title:t.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}},{key:"renderHeader",value:function(){return Object(F.a)("header",{class:Sr},this.renderTitle(),Object(F.a)("div",{class:Tr},this.renderDockButton(),this.renderCloseButton()))}},{key:"renderContentContainer",value:function(){var e=this.contentId,t=this.hasContent,n=this.contentCollapsed,r=this.viewModel.content;return t&&!n?Object(F.a)("article",{key:r,enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:Ir},this.renderContent()):null}},{key:"renderActionsMenuButton",value:function(){var e=this.actionsMenuId,t=this.actionsMenuButtonId,n=this.actionsMenuOpen,r=this.dividedActions,i=this.messagesCommon,a=n?i.close:i.open;return r.menuActions.length?Object(F.a)("div",{key:vi("actions-menu-button"),class:this.classes(Fr,Br),role:"button",id:t,"aria-haspopup":"true","aria-controls":n?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":a,title:a},Object(F.a)("span",{"aria-hidden":"true",class:tr})):null}},{key:"renderMenuActions",value:function(){var e=this,t=this.actionsMenuId,n=this.actionsMenuButtonId,r=this.actionsMenuOpen,i=this.dividedActions,a=i.menuActions,o=i.inlineActions;return a.length&&r?Object(F.a)("ul",{id:t,role:"menu","aria-labelledby":n,key:vi("actions"),class:Gr,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},a.toArray().map((function(t,n){return e.renderAction({action:t,index:n+o.length,type:"menu-item"})}))):null}},{key:"renderInlineActions",value:function(){var e=this,t=this.dividedActions.inlineActions;return!!t.length&&t.toArray().map((function(t,n){return e.renderAction({action:t,index:n,type:"inline"})}))}},{key:"renderInlineActionsContainer",value:function(){var e=this.dividedActions,t=e.inlineActions,n=e.menuActions,r=!!t.length,i=!!n.length;return r||i?Object(F.a)("div",{key:"inline-actions-container","data-inline-actions":r.toString(),"data-menu-actions":i.toString(),class:Ur},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}},{key:"renderNavigation",value:function(){return this.featureNavigationVisible?Object(F.a)("section",{key:vi("navigation"),class:this.classes(Zr)},this.renderNavigationButtons()):null}},{key:"renderFooter",value:function(){var e,t=this.featureNavigationVisible,n=this.dividedActions,r=n.inlineActions,i=n.menuActions,a=!!r.length,o=!!i.length,s=(e={},Object(j.a)(e,Ar,t),Object(j.a)(e,Rr,a),Object(j.a)(e,Lr,o),e);return t||a?Object(F.a)("div",{key:vi("feature-buttons"),class:this.classes(Mr,s)},this.renderInlineActionsContainer(),this.renderNavigation()):null}},{key:"renderFeatureMenuContainer",value:function(){var e=this.messages,t=this.viewModel,n=t.featureViewModels,r=t.isLoadingFeature,i=Object(C.a)(e.selectedFeatures,{total:n.length});return Object(F.a)("section",{key:vi("menu"),class:ii},Object(F.a)("h2",{class:ci},i),Object(F.a)("nav",{bind:this,class:si,"data-node-ref":"_featureMenuViewportNode",afterCreate:M.i},this.renderFeatureMenu(),Object(F.a)("div",{class:fi,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),r?Object(F.a)("div",{class:pi},this.renderLoadingIcon()):null))}},{key:"renderPointer",value:function(){return this.dockEnabled?null:Object(F.a)("div",{key:vi("pointer"),class:Yr,role:"presentation"},Object(F.a)("div",{class:this.classes(Kr,lr)}))}},{key:"renderMainContainer",value:function(){var e,t=this.dockEnabled,n=this.currentAlignment,r=this.currentDockPosition,i=this.titleId,a=this.contentId,o=this.collapsible,s=this.hasContent,c=this.contentCollapsed,l=this.visibleElements,u=this.viewModel.title,d="bottom-left"===n||"bottom-center"===n||"bottom-right"===n||"top-left"===r||"top-center"===r||"top-right"===r,f="top-left"===n||"top-center"===n||"top-right"===n||"bottom-left"===r||"bottom-center"===r||"bottom-right"===r,p=(e={},Object(j.a)(e,lr,t),Object(j.a)(e,sr,o),Object(j.a)(e,cr,c),e);return Object(F.a)("div",{class:this.classes(ar,ir,p),tabIndex:l.closeButton?null:-1,role:"dialog","aria-labelledby":u?i:"","aria-describedby":s&&!c?a:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},d?this.renderFooter():null,d?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),f?this.renderFooter():null,f?this.renderFeatureMenuContainer():null)}},{key:"renderContent",value:function(){var e,t=null==(e=this.viewModel)?void 0:e.content;return t?"string"==typeof t?Object(F.a)("div",{key:t,innerHTML:t}):this.renderNodeContent(t):null}},{key:"renderActionText",value:function(e){return Object(F.a)("span",{key:"text",class:Wr},e)}},{key:"renderActionIcon",value:function(e){var t,n=this._getActionClass(e),r=this._getActionImage(e),i=(t={},Object(j.a)(t,Qn,e.active),Object(j.a)(t,nr,e.active),Object(j.a)(t,Vr,!!n),Object(j.a)(t,Hr,!e.active&&!!r),t);return n&&(i[n]=!e.active),Object(F.a)("span",{key:"icon","aria-hidden":"true",class:this.classes(Vr,i),styles:this._getIconStyles(r)})}},{key:"renderAction",value:function(e){var t,n=e.action,r=e.index,i=e.type,a=this._getActionTitle(n),o=(t={},Object(j.a)(t,qr,"toggle"!==n.type),Object(j.a)(t,$r,"toggle"===n.type),Object(j.a)(t,Jr,"toggle"===n.type&&n.value),Object(j.a)(t,Dr,n.disabled),t),s=[this.renderActionIcon(n),this.renderActionText(a)],c="menu-item"===i?Object(F.a)("li",{key:n.uid,role:"menuitem",tabIndex:0,title:a,"aria-label":a,class:this.classes(Fr,o),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-index":r,onclick:this._triggerAction,onkeydown:this._triggerAction},s):Object(F.a)("div",{key:n.uid,role:"button",tabIndex:0,title:a,"aria-label":a,class:this.classes(Fr,o),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-index":r,onclick:this._triggerAction,onkeydown:this._triggerAction},s);return n.visible?c:null}},{key:"renderFeatureMenuItem",value:function(e,t){var n=this.messages,r=this.messagesCommon,i=this.viewModel,a=i.selectedFeatureIndex,o=e===i.selectedFeatureViewModel,s=Object(j.a)({},li,o),c=o?Object(F.a)("span",{key:vi("feature-menu-selected-feature-".concat(a)),title:n.selectedFeature,"aria-label":n.selectedFeature,class:Xn}):null,l=Object(F.a)("span",{innerHTML:e.title||r.untitled});return Object(F.a)("li",{role:"menuitem",tabIndex:-1,key:vi("feature-menu-feature-".concat(a)),class:this.classes(s,oi),bind:this,"data-feature-index":t,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature},Object(F.a)("span",{class:di},l,c))}},{key:"renderFeatureMenu",value:function(){var e=this,t=this.featureMenuId,n=this.viewModel.featureViewModels;return n.length>1?Object(F.a)("ol",{class:ai,id:t,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},n.filter((function(e){return!!e.graphic})).map((function(t,n){return e.renderFeatureMenuItem(t,n)}))):null}},{key:"_getActionTitle",value:function(e){var t=this.messages,n=this.selectedFeature,r=this.messagesCommon,i=e.id,a=null==n?void 0:n.attributes,o="zoom-to-feature"===i?Object(C.a)(e.title,{messages:t}):"remove-selected-feature"===i?Object(C.a)(e.title,{messages:r}):"zoom-to-clustered-features"===i||"browse-clustered-features"===i?Object(C.a)(e.title,{messages:t}):e.title;return o&&a?Object(C.a)(o,a):o}},{key:"_getActionClass",value:function(e){var t=this.selectedFeature,n=null==t?void 0:t.attributes,r=e.className,i=e.image||r?r:er;return i&&n?Object(C.a)(i,n):i}},{key:"_getActionImage",value:function(e){var t=this.selectedFeature,n=null==t?void 0:t.attributes,r=e.image;return r&&n?Object(C.a)(r,n):r}},{key:"_createFeatureUpdatedAnimation",value:function(){return Object(M.b)("enter",xr)}},{key:"_getInlineActionCount",value:function(){var e=this.maxInlineActions,t=this.featureNavigationVisible;if("number"!=typeof e)return null;var n=Math.round(e);return Math.max(t?n-1:n,0)}},{key:"_watchActions",value:function(){var e=this,t=this.viewModel.allActions;this.notifyChange("dividedActions");var n="actions";this._handles.remove(n),t&&t.forEach((function(t){e._handles.add(Object(p.d)(t,["active","className","disabled","id","title","image","visible"],(function(){return e.scheduleRender()})),n)}))}},{key:"_divideActions",value:function(){var e=this.viewModel.allActions,t=this._getInlineActionCount(),n=null===t,r=0===t;return{inlineActions:n?e.slice(0):r?new v.a:e.slice(0,t),menuActions:n?new v.a:r?e.slice(0):e.slice(t)}}},{key:"_featureMenuOpenChanged",value:function(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}},{key:"_actionsMenuOpenChanged",value:function(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}},{key:"_setTitleFromFeatureWidget",value:function(e){this.selectedFeatureWidget&&(this.viewModel.title=e||"")}},{key:"_setContentFromFeatureWidget",value:function(){var e=this.selectedFeatureWidget;e&&(this.viewModel.content=e)}},{key:"_unobserveFeatureMenuObserver",value:function(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}},{key:"_featureMenuIntersectionObserverCreated",value:function(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}},{key:"_handleFeatureMenuKeyup",value:function(e){"Escape"===Object(E.a)(e)&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}},{key:"_handleActionMenuKeyup",value:function(e){"Escape"===Object(E.a)(e)&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}},{key:"_handleFeatureMenuItemKeyup",value:function(e){var t=Object(E.a)(e),n=this._featureMenuNode,r=e.currentTarget["data-feature-index"];if(n){var i=n.querySelectorAll("li"),a=i.length;"ArrowUp"!==t?"ArrowDown"!==t?"Home"!==t?"End"!==t||(e.stopPropagation(),i[i.length-1].focus()):(e.stopPropagation(),i[0].focus()):(e.stopPropagation(),i[(r+1+a)%a].focus()):(e.stopPropagation(),i[(r-1+a)%a].focus())}}},{key:"_handleActionMenuItemKeyup",value:function(e){var t=Object(E.a)(e),n=this._actionsMenuNode,r=e.currentTarget["data-action-index"];if(n){var i=n.querySelectorAll("li"),a=i.length;"ArrowUp"!==t?"ArrowDown"!==t?"Home"!==t?"End"!==t||(e.stopPropagation(),i[i.length-1].focus()):(e.stopPropagation(),i[0].focus()):(e.stopPropagation(),i[(r+1+a)%a].focus()):(e.stopPropagation(),i[(r-1+a)%a].focus())}}},{key:"_handleMainKeyup",value:function(e){var t=Object(E.a)(e);"ArrowLeft"===t&&(e.stopPropagation(),this.previous()),"ArrowRight"===t&&(e.stopPropagation(),this.next())}},{key:"_spinnerEnabledChange",value:function(e){if(this._destroySpinner(),e){var t=this.get("viewModel.view");this._createSpinner(t)}}},{key:"_hideSpinner",value:function(){var e=this._spinner;e&&(e.location=null,e.hide())}},{key:"_displaySpinner",value:function(){var e=this._spinner;if(e){var t=this.viewModel,n=t.location;t.waitingForResult?e.show({location:n}):e.hide()}}},{key:"_getIconStyles",value:function(e){return{"background-image":e?"url(".concat(e,")"):""}}},{key:"_addSelectedFeatureIndexHandle",value:function(){var e=this,t=Object(p.d)(this,"viewModel.selectedFeatureIndex",(function(t,n){return e._selectedFeatureIndexUpdated(t,n)}));this._handles.add(t,Bn)}},{key:"_selectedFeatureIndexUpdated",value:function(e,t){this.featureCount&&e!==t&&-1!==e&&(this.actionsMenuOpen=!1,this.featureMenuOpen=!1)}},{key:"_destroySelectedFeatureWidget",value:function(){var e=this._feature;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null}},{key:"_isScreenLocationWithinView",value:function(e,t){return e.x>-1&&e.y>-1&&e.x<=t.width&&e.y<=t.height}},{key:"_isOutsideView",value:function(e){var t=e.popupHeight,n=e.popupWidth,r=e.screenLocation,i=e.side,a=e.view;if(isNaN(n)||isNaN(t)||!a||!r)return!1;var o=a.padding;return"right"===i&&r.x+n/2>a.width-o.right||"left"===i&&r.x-n/2<o.left||"top"===i&&r.y-t<o.top||"bottom"===i&&r.y+t>a.height-o.bottom}},{key:"_calculateAutoAlignment",value:function(e){if("auto"!==e)return e;var t=this._pointerOffsetInPx,n=this._containerNode,r=this._mainContainerNode,i=this.viewModel,a=i.screenLocation,o=i.view;if(Object(k.j)(a)||!o||!n)return"top-center";if(!this._isScreenLocationWithinView(a,o))return this._get("currentAlignment")||"top-center";function s(e){return parseInt(e.replace(/[^-\d\.]/g,""),10)}var c=r?window.getComputedStyle(r,null):null,l=c?s(c.getPropertyValue("max-height")):0,u=c?s(c.getPropertyValue("height")):0,d=n.getBoundingClientRect(),f=d.height,p=d.width+t,h=Math.max(f,l,u)+t,b=this._isOutsideView({popupHeight:h,popupWidth:p,screenLocation:a,side:"right",view:o}),v=this._isOutsideView({popupHeight:h,popupWidth:p,screenLocation:a,side:"left",view:o}),y=this._isOutsideView({popupHeight:h,popupWidth:p,screenLocation:a,side:"top",view:o}),m=this._isOutsideView({popupHeight:h,popupWidth:p,screenLocation:a,side:"bottom",view:o});return v?y?"bottom-right":"top-right":b?y?"bottom-left":"top-left":y?m?"top-center":"bottom-center":"top-center"}},{key:"_callCurrentAlignment",value:function(e){return"function"==typeof e?e.call(this):e}},{key:"_getCurrentAlignment",value:function(){var e=this.alignment;return this.dockEnabled||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}},{key:"_setCurrentAlignment",value:function(){this._set("currentAlignment",this._getCurrentAlignment())}},{key:"_setCurrentDockPosition",value:function(){this._set("currentDockPosition",this._getCurrentDockPosition())}},{key:"_calculatePositionResult",value:function(e){var t=["left","right"];return Object(M.f)()&&t.reverse(),e.replace(/leading/gi,t[0]).replace(/trailing/gi,t[1])}},{key:"_callDockPosition",value:function(e){return"function"==typeof e?e.call(this):e}},{key:"_getDockPosition",value:function(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(null==(e=this.dockOptions)?void 0:e.position)))}},{key:"_getCurrentDockPosition",value:function(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}},{key:"_wouldDockTo",value:function(){return this.dockEnabled?null:this._getDockPosition()}},{key:"_calculateAutoDockPosition",value:function(e){var t;if("auto"!==e)return e;var n=null==(t=this.viewModel)?void 0:t.view,r=Object(M.f)()?"top-left":"top-right";if(!n)return r;var i=n.padding||{left:0,right:0,top:0,bottom:0},a=n.width-i.left-i.right,o=n.breakpoints;return o&&a<=o.xsmall?"bottom-center":r}},{key:"_positionContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._containerNode;if(e&&(this._containerNode=e),e){var t=this.viewModel.screenLocation,n=e.getBoundingClientRect(),r=n.width,i=this._calculatePositionStyle(t,r);i&&(e.style.top=i.top,e.style.left=i.left,e.style.bottom=i.bottom,e.style.right=i.right)}}},{key:"_calculateFullWidth",value:function(e){var t=this.currentAlignment,n=this._pointerOffsetInPx;return"top-left"===t||"bottom-left"===t||"top-right"===t||"bottom-right"===t?e+n:e}},{key:"_calculateAlignmentPosition",value:function(e,t,n,r){var i=this.currentAlignment,a=this._pointerOffsetInPx,o=r/2,s=n.height-t,c=n.width-e,l=this.view.padding;return"bottom-center"===i?{top:t+a-l.top,left:e-o-l.left}:"top-left"===i?{bottom:s+a-l.bottom,right:c+a-l.right}:"bottom-left"===i?{top:t+a-l.top,right:c+a-l.right}:"top-right"===i?{bottom:s+a-l.bottom,left:e+a-l.left}:"bottom-right"===i?{top:t+a-l.top,left:e+a-l.left}:"top-center"===i?{bottom:s+a-l.bottom,left:e-o-l.left}:void 0}},{key:"_calculatePositionStyle",value:function(e,t){var n=this.dockEnabled,r=this.view;if(r){if(n)return{left:"",top:"",right:"",bottom:""};if(!Object(k.j)(e)&&t){var i=this._calculateFullWidth(t),a=this._calculateAlignmentPosition(e.x,e.y,r,i);return a?{top:void 0!==a.top?"".concat(a.top,"px"):"auto",left:void 0!==a.left?"".concat(a.left,"px"):"auto",bottom:void 0!==a.bottom?"".concat(a.bottom,"px"):"auto",right:void 0!==a.right?"".concat(a.right,"px"):"auto"}:void 0}}}},{key:"_viewChange",value:function(e,t){e&&t&&(this.close(),this.clear())}},{key:"_viewReadyChange",value:function(e,t){if(e){var n=this.get("viewModel.view");this._wireUpView(n)}else t&&(this.close(),this.clear())}},{key:"_wireUpView",value:function(e){(this._destroySpinner(),e)&&(this.spinnerEnabled&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions))}},{key:"_dockingThresholdCrossed",value:function(e,t,n){var i=Object(r.a)(e,2),a=i[0],o=i[1],s=Object(r.a)(t,2),c=s[0],l=s[1],u=n.width,d=n.height;return a<=u&&c>u||a>u&&c<=u||o<=d&&l>d||o>d&&l<=d}},{key:"_updateDockEnabledForViewSize",value:function(e,t){if(e&&t){var n=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},r=n.left+n.right,i=n.top+n.bottom,a=[],o=[];a[0]=e[0]-r,a[1]=e[1]-i,o[0]=t[0]-r,o[1]=t[1]-i;var s=this.dockOptions,c=s.breakpoint;this._dockingThresholdCrossed(a,o,c)&&this._setDockEnabledForViewSize(s),this._setCurrentDockPosition()}}},{key:"_focusDockButtonNode",value:function(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus())}},{key:"_closeButtonNodeUpdated",value:function(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0}},{key:"_mainContainerNodeUpdated",value:function(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}},{key:"_featureMenuNodeUpdated",value:function(e){if(this._featureMenuNode=e,e&&this._focusFirstFeature){this._focusFirstFeature=!1;var t=e.querySelectorAll("li");t.length&&t[0].focus()}}},{key:"_actionsMenuNodeUpdated",value:function(e){if(this._actionsMenuNode=e,e&&this._focusFirstAction){this._focusFirstAction=!1;var t=e.querySelectorAll("li");t.length&&t[0].focus()}}},{key:"_focusFeatureMenuButtonNode",value:function(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus())}},{key:"_focusActionsMenuButtonNode",value:function(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus())}},{key:"_featureMenuViewportScrollTop",value:function(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}},{key:"_toggleScreenLocationEnabled",value:function(){var e=this.dockEnabled,t=this.viewModel;if(t){var n=t.active&&!e;t.screenLocationEnabled=n}}},{key:"_shouldDockAtCurrentViewSize",value:function(e){var t,n,r=e.breakpoint,i=null==(t=this.viewModel)||null==(n=t.view)?void 0:n.ui;if(!i)return!1;var a=i.width,o=i.height;if(isNaN(a)||isNaN(o))return!1;var s=r.hasOwnProperty("width")&&a<=r.width,c=r.hasOwnProperty("height")&&o<=r.height;return s||c}},{key:"_setDockEnabledForViewSize",value:function(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}},{key:"_getPageText",value:function(e,t){return this.featureNavigationVisible?Object(C.a)(this.messages.pageText,{index:t+1,total:e}):null}},{key:"_destroySpinner",value:function(){var e=this._spinner,t=this.view;e&&(t&&t.ui&&t.ui.remove(this._spinner,Gn),e.destroy(),this._spinner=null)}},{key:"_createSpinner",value:function(e){e&&(this._spinner=new sn.a({view:e}),e.ui.add(this._spinner,{key:Gn,position:"manual"}))}},{key:"_toggleCollapsed",value:function(){this.collapsed=!this.collapsed}},{key:"_close",value:function(){this.close(),this.view&&this.view.focus()}},{key:"_toggleDockEnabled",value:function(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}},{key:"_toggleFeatureMenu",value:function(){var e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e}},{key:"_toggleActionsMenu",value:function(){var e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e}},{key:"_triggerAction",value:function(e){var t=e.currentTarget["data-action-index"],n=this.viewModel.allActions.getItemAt(t);n&&"toggle"===n.type&&(n.value=!n.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(t)}},{key:"_selectFeature",value:function(e){var t=e.currentTarget["data-feature-index"];isNaN(t)||(this.viewModel.selectedFeatureIndex=t),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}},{key:"_next",value:function(){this.next()}},{key:"_previous",value:function(){this.previous()}}]),n}(V(D.a));Object(c.a)([Object(u.b)({readOnly:!0})],Oi.prototype,"actionsMenuId",null),Object(c.a)([Object(u.b)({readOnly:!0})],Oi.prototype,"actionsMenuButtonId",null),Object(c.a)([Object(u.b)({readOnly:!0})],Oi.prototype,"featureMenuId",null),Object(c.a)([Object(u.b)({readOnly:!0})],Oi.prototype,"titleId",null),Object(c.a)([Object(u.b)({readOnly:!0})],Oi.prototype,"contentId",null),Object(c.a)([Object(u.b)({readOnly:!0})],Oi.prototype,"hasContent",null),Object(c.a)([Object(u.b)({readOnly:!0})],Oi.prototype,"featureNavigationVisible",null),Object(c.a)([Object(u.b)({readOnly:!0})],Oi.prototype,"collapsible",null),Object(c.a)([Object(u.b)({readOnly:!0})],Oi.prototype,"featureMenuVisible",null),Object(c.a)([Object(u.b)({readOnly:!0})],Oi.prototype,"contentCollapsed",null),Object(c.a)([Object(u.b)({readOnly:!0})],Oi.prototype,"dividedActions",null),Object(c.a)([Object(x.a)("viewModel.actions")],Oi.prototype,"actions",void 0),Object(c.a)([Object(u.b)()],Oi.prototype,"actionsMenuOpen",null),Object(c.a)([Object(u.b)()],Oi.prototype,"alignment",void 0),Object(c.a)([Object(x.a)("viewModel.autoCloseEnabled")],Oi.prototype,"autoCloseEnabled",void 0),Object(c.a)([Object(x.a)("viewModel.autoOpenEnabled")],Oi.prototype,"autoOpenEnabled",void 0),Object(c.a)([Object(x.a)("viewModel.defaultPopupTemplateEnabled")],Oi.prototype,"defaultPopupTemplateEnabled",void 0),Object(c.a)([Object(x.a)("viewModel.content")],Oi.prototype,"content",void 0),Object(c.a)([Object(u.b)()],Oi.prototype,"collapsed",void 0),Object(c.a)([Object(u.b)()],Oi.prototype,"collapseEnabled",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],Oi.prototype,"currentAlignment",null),Object(c.a)([Object(u.b)({readOnly:!0})],Oi.prototype,"currentDockPosition",null),Object(c.a)([Object(u.b)()],Oi.prototype,"dockOptions",null),Object(c.a)([Object(u.b)()],Oi.prototype,"dockEnabled",void 0),Object(c.a)([Object(x.a)("viewModel.featureCount")],Oi.prototype,"featureCount",void 0),Object(c.a)([Object(u.b)()],Oi.prototype,"featureMenuOpen",void 0),Object(c.a)([Object(x.a)("viewModel.features")],Oi.prototype,"features",void 0),Object(c.a)([Object(u.b)()],Oi.prototype,"featureNavigationEnabled",null),Object(c.a)([Object(x.a)("viewModel.goToOverride")],Oi.prototype,"goToOverride",void 0),Object(c.a)([Object(x.a)("viewModel.highlightEnabled")],Oi.prototype,"highlightEnabled",void 0),Object(c.a)([Object(x.a)("viewModel.location")],Oi.prototype,"location",void 0),Object(c.a)([Object(u.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Oi.prototype,"label",void 0),Object(c.a)([Object(u.b)()],Oi.prototype,"maxInlineActions",void 0),Object(c.a)([Object(u.b)(),Object(R.a)("esri/widgets/Popup/t9n/Popup")],Oi.prototype,"messages",void 0),Object(c.a)([Object(u.b)(),Object(R.a)("esri/t9n/common")],Oi.prototype,"messagesCommon",void 0),Object(c.a)([Object(x.a)("viewModel.promises")],Oi.prototype,"promises",void 0),Object(c.a)([Object(x.a)("viewModel.selectedFeature")],Oi.prototype,"selectedFeature",void 0),Object(c.a)([Object(x.a)("viewModel.selectedFeatureIndex")],Oi.prototype,"selectedFeatureIndex",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],Oi.prototype,"selectedFeatureWidget",null),Object(c.a)([Object(u.b)()],Oi.prototype,"spinnerEnabled",void 0),Object(c.a)([Object(x.a)("viewModel.title")],Oi.prototype,"title",void 0),Object(c.a)([Object(x.a)("viewModel.updateLocationEnabled")],Oi.prototype,"updateLocationEnabled",void 0),Object(c.a)([Object(x.a)("viewModel.view")],Oi.prototype,"view",void 0),Object(c.a)([Object(u.b)({type:Un}),Object(L.a)(["triggerAction","trigger-action"])],Oi.prototype,"viewModel",void 0),Object(c.a)([Object(x.a)("viewModel.visible")],Oi.prototype,"visible",void 0),Object(c.a)([Object(u.b)()],Oi.prototype,"visibleElements",void 0),Object(c.a)([Object(S.a)("visibleElements")],Oi.prototype,"castVisibleElements",null),Object(c.a)([Object(A.a)()],Oi.prototype,"_close",null),Object(c.a)([Object(A.a)()],Oi.prototype,"_toggleDockEnabled",null),Object(c.a)([Object(A.a)()],Oi.prototype,"_toggleFeatureMenu",null),Object(c.a)([Object(A.a)()],Oi.prototype,"_toggleActionsMenu",null),Object(c.a)([Object(A.a)()],Oi.prototype,"_triggerAction",null),Object(c.a)([Object(A.a)()],Oi.prototype,"_selectFeature",null),Object(c.a)([Object(A.a)()],Oi.prototype,"_next",null),Object(c.a)([Object(A.a)()],Oi.prototype,"_previous",null);var ji=Oi=Object(c.a)([Object(d.a)(yi)],Oi),wi=[0,0];function _i(e){e&&(Object(h.b)(e),e.parentNode&&e.parentNode.removeChild(e))}var ki=16,xi=750,Si=function(e){var t=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a)))._freqInfo={freq:ki,time:xi},e._overlayRenderTaskHandle=null,e.height=0,e.position=null,e.resizing=!1,e.root=null,e.surface=null,e.suspended=!0,e.ui=null,e.userContent=null,e.width=0,e.widthBreakpoint=null,e.handles.add([e.watch("cursor",(function(t){var n=e.surface;n&&n.setAttribute("data-cursor",t)})),e.watch("interacting",(function(t){var n=e.surface;n&&n.setAttribute("data-interacting",t.toString())}))]),e}return Object(a.a)(n,[{key:"initialize",value:function(){var e=this;this.handles.add(this.watch("ui",(function(t,n){return e._handleUIChange(t,n)}))),this._wireUI(this.ui),this.handles.add([this.on("focus",(function(){return e.notifyChange("focused")})),this.on("blur",(function(){return e.notifyChange("focused")}))])}},{key:"destroy",value:function(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}},{key:"container",set:function(e){var t=this,n=this._get("container");if(n!==e){var i="dom-size";if(this.handles.remove(i),this._stopMeasuring(),n&&(n.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),_i(this.root),this._set("root",null),Object(h.e)(this.userContent,n),_i(this.userContent),this._set("userContent",null)),e){e.classList.add("esri-view");var a=document.createElement("div");a.className="esri-view-user-storage",Object(h.e)(e,a),e.appendChild(a),this._set("userContent",a);var o=document.createElement("div");o.className="esri-view-root",e.insertBefore(o,e.firstChild),this._set("root",o);var s=document.createElement("div");s.className="esri-view-surface",s.setAttribute("role","application"),s.tabIndex=0,o.appendChild(s),this._set("surface",s);var c=new O;o.appendChild(c.surface),this._set("overlay",c),c.watch("needsRender",(function(e){e&&!t._overlayRenderTaskHandle?t._overlayRenderTaskHandle=Object(f.a)({render:function(){t.overlay.render()}}):t._overlayRenderTaskHandle&&(t._overlayRenderTaskHandle.remove(),t._overlayRenderTaskHandle=null)})),this.forceDOMReadyCycle(),this.handles.add(Object(p.a)(this,"size",(function(e){var t=Object(r.a)(e,2),n=t[0],i=t[1],a="esri-view-surface--inset-outline";n>=document.body.clientWidth||i>=document.body.clientHeight?s.classList.add(a):s.classList.remove(a)})),i),this._set("container",e),this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}}},{key:"focused",get:function(){var e=document.activeElement===this.surface;return document.hasFocus()&&e}},{key:"popup",get:function(){return this._get("popup")||new ji({view:this})},set:function(e){var t=this._get("popup");t&&t!==e&&t.destroy(),this._set("popup",e)}},{key:"size",get:function(){return[this.width,this.height]}},{key:"blur",value:function(){this.surface&&this.surface.blur()}},{key:"focus",value:function(){this.surface&&this.surface.focus()}},{key:"pageToContainer",value:function(e,t,n){var r=this.position;return e-=r[0],t-=r[1],n?(n[0]=e,n[1]=t):n=[e,t],n}},{key:"containerToPage",value:function(e,t,n){var r=this.position;return e+=r[0],t+=r[1],n?(n[0]=e,n[1]=t):n=[e,t],n}},{key:"_handleUIChange",value:function(e,t){t&&(this.handles.remove("ui"),t.destroy()),e&&this._wireUI(e),this._set("ui",e)}},{key:"_wireUI",value:function(e){this.handles.remove("ui"),e&&(e.view=this,this.handles.add([Object(p.a)(this,"root",(function(t){e.container=t?function(e){var t=document.createElement("div");return e.appendChild(t),t}(t):null})),Object(p.a)(this,"popup",(function(t,n){var r="popup";n&&e.remove(n,r),t&&(t.view=e.view,e.add(t,{key:r,position:"manual"}))}))],"ui"))}},{key:"_stopMeasuring",value:function(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}},{key:"_startMeasuring",value:function(){var e=this,t=this._freqInfo;t.freq=ki,t.time=xi,this.handles.add([function(){var e=function(){t.freq=ki,t.time=xi};return window.addEventListener("resize",e),{remove:function(){window.removeEventListener("resize",e)}}}(),Object(f.a)({prepare:function(t){var n=e._measure(),r=e._freqInfo;if(r.time+=t.deltaTime,n&&(r.freq=ki,e._get("resizing")||e._set("resizing",!0)),!(r.time<r.freq)){r.time=0;var i=e._position();r.freq=i||n?ki:Math.min(xi,2*r.freq),!n&&r.freq>=512&&e._get("resizing")&&e._set("resizing",!1)}}})],"measuring"),this._measure(),this._position()}},{key:"_measure",value:function(){var e=this.container,t=e?e.clientWidth:0,n=e?e.clientHeight:0;if(0===t||0===n)return this.suspended||this._set("suspended",!0),!1;var r=this.width,i=this.height;return t===r&&n===i?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",t),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:r,oldHeight:i,width:t,height:n}),!0)}},{key:"_position",value:function(){var e=this.container,t=this.position,n=function(e){var t=(e.ownerDocument||window.document).defaultView,n=e.getBoundingClientRect();return wi[0]=n.left+t.pageXOffset,wi[1]=n.top+t.pageYOffset,wi}(e);return(!t||n[0]!==t[0]||n[1]!==t[1])&&(this._set("position",[n[0],n[1]]),!0)}},{key:"forceDOMReadyCycle",value:function(){}}]),n}(e);return Object(c.a)([Object(u.b)({value:null,cast:function(e){return Object(h.a)(e)}})],t.prototype,"container",null),Object(c.a)([Object(u.b)({readOnly:!0})],t.prototype,"focused",null),Object(c.a)([Object(u.b)({readOnly:!0})],t.prototype,"height",void 0),Object(c.a)([Object(u.b)({type:ji})],t.prototype,"popup",null),Object(c.a)([Object(u.b)({type:O})],t.prototype,"overlay",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],t.prototype,"position",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],t.prototype,"resizing",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],t.prototype,"root",void 0),Object(c.a)([Object(u.b)({value:null,readOnly:!0})],t.prototype,"size",null),Object(c.a)([Object(u.b)({readOnly:!0})],t.prototype,"surface",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],t.prototype,"suspended",void 0),Object(c.a)([Object(u.b)()],t.prototype,"ui",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],t.prototype,"userContent",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],t.prototype,"width",void 0),Object(c.a)([Object(u.b)()],t.prototype,"widthBreakpoint",void 0),t=Object(c.a)([Object(d.a)("esri.views.DOMContainer")],t)};function Ti(e){return e&&"focus"in e}},function(e,t,n){"use strict";n.r(t);var r=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,i=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){return r.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));t.default=i},function(e,t,n){var r,i;!function(a){if(void 0===(i="function"===typeof(r=a)?r.call(t,n,t,e):r)||(e.exports=i),!0,e.exports=a(),!!0){var o=window.Cookies,s=window.Cookies=a();s.noConflict=function(){return window.Cookies=o,s}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function a(t,n,a){if("undefined"!==typeof document){"number"===typeof(a=e({path:"/"},i.defaults,a)).expires&&(a.expires=new Date(1*new Date+864e5*a.expires)),a.expires=a.expires?a.expires.toUTCString():"";try{var o=JSON.stringify(n);/^[\{\[]/.test(o)&&(n=o)}catch(l){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in a)a[c]&&(s+="; "+c,!0!==a[c]&&(s+="="+a[c].split(";")[0]));return document.cookie=t+"="+n+s}}function o(e,n){if("undefined"!==typeof document){for(var i={},a=document.cookie?document.cookie.split("; "):[],o=0;o<a.length;o++){var s=a[o].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var l=t(s[0]);if(c=(r.read||r)(c,l)||t(c),n)try{c=JSON.parse(c)}catch(u){}if(i[l]=c,e===l)break}catch(u){}}return e?i[e]:i}}return i.set=a,i.get=function(e){return o(e,!1)},i.getJSON=function(e){return o(e,!0)},i.remove=function(t,n){a(t,"",e(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}((function(){}))}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(14),i=n(2),a=n(3),o=function(){function e(t){Object(i.a)(this,e),this.notify=t,this._accessed=new Set,this._handles=[]}return Object(a.a)(e,[{key:"destroy",value:function(){this._accessed.clear(),this.clear()}},{key:"onObservableAccessed",value:function(e){this._accessed.add(e)}},{key:"onTrackingEnd",value:function(){var e,t=Object(r.a)(this._accessed);try{for(t.s();!(e=t.n()).done;){var n=e.value;this._handles.push(n.observe(this))}}catch(i){t.e(i)}finally{t.f()}this._accessed.clear()}},{key:"clear",value:function(){var e,t=Object(r.a)(this._handles);try{for(t.s();!(e=t.n()).done;){e.value.remove()}}catch(n){t.e(n)}finally{t.f()}this._handles.length=0}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o}));var r=n(12),i=n(128);function a(e,t){return function(e){return e&&("service"===e.origin||"portal-item"===e.origin)&&e.layer&&("feature"===e.layer.type||"stream"===e.layer.type)}(t)&&!Object(r.s)(e)&&t.layer.parsedUrl?Object(r.y)(t.layer.parsedUrl.path,"images",e):Object(i.a)(e,t)}var o={json:{read:{source:["imageData","url"],reader:function(e,t,n){return t.imageData?Object(r.A)({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):a(t.url,n)}},write:{writer:function(e,t,n,a){!function(e,t,n,a){if(Object(r.u)(e)){var o=Object(r.i)(e);t.contentType=o.mediaType,t.imageData=o.data,n&&n.imageData===t.imageData&&n.url&&Object(i.f)(n.url,t,"url",a)}else Object(i.f)(e,t,"url",a)}(e,t,this.source,a)}}}},s={readOnly:!0,json:{read:{source:["imageData","url"],reader:function(e,t,n){var r={};return t.imageData&&(r.imageData=t.imageData),t.contentType&&(r.contentType=t.contentType),t.url&&(r.url=a(t.url,n)),r}}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17)),u=n(1),d=n(49),f=n(8),p=(n(12),n(19),n(20),n(28)),h=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).type="map-layer",r}return Object(a.a)(n,[{key:"clone",value:function(){var e=this.mapLayerId,t=this.gdbVersion;return new r({mapLayerId:e,gdbVersion:t})}}]),n}(p.a);Object(c.a)([Object(d.a)({mapLayer:"map-layer"})],h.prototype,"type",void 0),Object(c.a)([Object(u.b)({type:l.a,json:{write:!0}})],h.prototype,"mapLayerId",void 0),Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],h.prototype,"gdbVersion",void 0),h=r=Object(c.a)([Object(f.a)("esri.layers.support.source.MapLayerSource")],h)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));n(2);var r=n(4),i=n(186);function a(e){return"array"in e}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ground";if(Object(i.c)(t))return e.getElevation(t.x,t.y,t.z||0,t.spatialReference,n);if(a(t)){var o=t.offset;return e.getElevation(t.array[o++],t.array[o++],t.array[o]||0,Object(r.r)(t.spatialReference,e.spatialReference),n)}return e.getElevation(t[0],t[1],t[2]||0,e.spatialReference,n)}},function(e,t,n){"use strict";function r(){var e=new Float32Array(6);return e[0]=1,e[3]=1,e}function i(e,t,n,r){var i=t[r],a=t[r+1];e[r]=n[0]*i+n[2]*a+n[4],e[r+1]=n[1]*i+n[3]*a+n[5]}function a(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2,s=a||t.length/o,c=r;c<s;c++)i(e,t,n,c*o)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));Object.freeze({__proto__:null,create:r,clone:function(e){var t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},fromValues:function(e,t,n,r,i,a){var o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=n,o[3]=r,o[4]=i,o[5]=a,o},createView:function(e,t){return new Float32Array(e,t,6)},transform:i,transformMany:a})},function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return j})),n.d(t,"e",(function(){return w})),n.d(t,"f",(function(){return _})),n.d(t,"g",(function(){return k}));var r=n(31),i=n(68);var a=function(e,t,n){return[t,n]},o=function(e,t,n){return[t,n,e[2]]},s=function(e,t,n){return[t,n,e[2],e[3]]};function c(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:e.extent?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function l(e,t){var n=e.scale,r=e.translate;return Math.round((t-r[0])/n[0])}function u(e,t){var n=e.scale,r=e.translate;return Math.round((r[1]-t)/n[1])}function d(e,t,n){for(var r,i,a,o,s=[],c=0;c<n.length;c++){var d=n[c];c>0?(a=l(e,d[0]),o=u(e,d[1]),a===r&&o===i||(s.push(t(d,a-r,o-i)),r=a,i=o)):(r=l(e,d[0]),i=u(e,d[1]),s.push(t(d,r,i)))}return s.length>0?s:null}function f(e,t){var n=e.scale,r=e.translate;return t*n[0]+r[0]}function p(e,t){var n=e.scale;return e.translate[1]-t*n[1]}function h(e,t,n){var i=new Array(n.length);if(!n.length)return i;var a=Object(r.a)(e.scale,2),o=a[0],s=a[1],c=f(e,n[0][0]),l=p(e,n[0][1]);i[0]=t(n[0],c,l);for(var u=1;u<n.length;u++){var d=n[u];c+=d[0]*o,l-=d[1]*s,i[u]=t(d,c,l)}return i}function b(e,t,n){for(var r=new Array(n.length),i=0;i<n.length;i++)r[i]=h(e,t,n[i]);return r}function v(e,t,n,r,i){return t.points=function(e,t,n,r){return d(e,n?r?s:o:r?o:a,t)}(e,n.points,r,i),t}function y(e,t,n,r,i){return t.x=l(e,n.x),t.y=u(e,n.y),t!==n&&(r&&(t.z=n.z),i&&(t.m=n.m)),t}function m(e,t,n,r,i){var c=function(e,t,n,r){for(var i=[],c=n?r?s:o:r?o:a,l=0;l<t.length;l++){var u=d(e,c,t[l]);u&&u.length>=3&&i.push(u)}return i.length?i:null}(e,n.rings,r,i);return c?(t.rings=c,t):null}function g(e,t,n,r,i){var c=function(e,t,n,r){for(var i=[],c=n?r?s:o:r?o:a,l=0;l<t.length;l++){var u=d(e,c,t[l]);u&&u.length>=2&&i.push(u)}return i.length?i:null}(e,n.paths,r,i);return c?(t.paths=c,t):null}function O(e,t){return e&&t?Object(i.f)(t)?y(e,{},t,!1,!1):Object(i.h)(t)?g(e,{},t,!1,!1):Object(i.g)(t)?m(e,{},t,!1,!1):Object(i.e)(t)?v(e,{},t,!1,!1):Object(i.d)(t)?(o=!1,s=!1,(r={}).xmin=l(n=e,(a=t).xmin),r.ymin=u(n,a.ymin),r.xmax=l(n,a.xmax),r.ymax=u(n,a.ymax),r!==a&&(o&&(r.zmin=a.zmin,r.zmax=a.zmax),s&&(r.mmin=a.mmin,r.mmax=a.mmax)),r):null:null;var n,r,a,o,s}function j(e,t,n,r,i){return t.points=function(e,t,n,r){return h(e,n?r?s:o:r?o:a,t)}(e,n.points,r,i),t}function w(e,t,n,r,i){return t.x=f(e,n.x),t.y=p(e,n.y),t!==n&&(r&&(t.z=n.z),i&&(t.m=n.m)),t}function _(e,t,n,r,i){return t.rings=function(e,t,n,r){return b(e,n?r?s:o:r?o:a,t)}(e,n.rings,r,i),t}function k(e,t,n,r,i){return t.paths=function(e,t,n,r){return b(e,n?r?s:o:r?o:a,t)}(e,n.paths,r,i),t}},function(e,t,n){"use strict";var r=n(14),i=n(2),a=n(3),o=n(145),s=function(){function e(){Object(i.a)(this,e),this.spans=[]}return Object(a.a)(e,[{key:"acquire",value:function(e){this.lodInfo=e}},{key:"release",value:function(){this.lodInfo=null,this.spans.length=0}},{key:"forEach",value:function(e,t){var n=this.spans,i=this.lodInfo,a=i.level;if(0!==n.length){var o,s=Object(r.a)(n);try{for(s.s();!(o=s.n()).done;)for(var c=o.value,l=c.row,u=c.colFrom,d=c.colTo,f=u;f<=d;f++)e.call(t,a,l,i.normalizeCol(f),i.getWorldForColumn(f))}catch(p){s.e(p)}finally{s.f()}}}}]),e}();s.pool=new o.a(s),t.a=s},function(e,t,n){"use strict";var r,i=n(35),a=n(7),o=n.n(a),s=n(10),c=n(15),l=n(2),u=n(3),d=n(5),f=n(6),p=n(0),h=(n(16),n(22)),b=n(4),v=n(13),y=n(17),m=n(1),g=n(58),O=n(47),j=n(49),w=n(41),_=n(8),k=n(42),x=(n(12),n(19),n(20),n(138)),S=n(54),T=n(76),E=n(383),C=n(166),P=n(277),I=n(447),M=n(342),A=v.a.getLogger("esri.renderers.ClassBreaksRenderer"),R="percent-of-total",L="field",F=new O.a({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:R,esriNormalizeByField:L}),D=Object(y.m)(I.a),N=r=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e))._compiledValueExpression={valueExpression:null,compiledFunction:null},r.backgroundFillSymbol=null,r.classBreakInfos=null,r.defaultLabel=null,r.defaultSymbol=null,r.field=null,r.isMaxInclusive=!0,r.legendOptions=null,r.normalizationField=null,r.normalizationTotal=null,r.type="class-breaks",r.valueExpression=null,r.valueExpressionTitle=null,r._set("classBreakInfos",[]),r}return Object(u.a)(n,[{key:"readClassBreakInfos",value:function(e,t,n){if(Array.isArray(e)){var r=t.minValue;return e.map((function(e){var t=new I.a;return t.read(e,n),null==t.minValue&&(t.minValue=r),null==t.maxValue&&(t.maxValue=t.minValue),r=t.maxValue,t}))}}},{key:"writeClassBreakInfos",value:function(e,t,n,r){var i=e.map((function(e){return e.write({},r)}));this._areClassBreaksConsecutive()&&i.forEach((function(e){return delete e.classMinValue})),t[n]=i}},{key:"castField",value:function(e){return null==e?e:"function"==typeof e?(A.error(".field: field must be a string value"),null):Object(y.l)(e)}},{key:"minValue",get:function(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}},{key:"normalizationType",get:function(){var e=this._get("normalizationType"),t=!!this.normalizationField,n=null!=this.normalizationTotal;return t||n?(e=(t?L:n&&R)||null,t&&n&&A.warn("warning: both normalizationField and normalizationTotal are set!")):e!==L&&e!==R||(e=null),e},set:function(e){this._set("normalizationType",e)}},{key:"addClassBreakInfo",value:function(e,t,n){var r;r="number"==typeof e?new I.a({minValue:e,maxValue:t,symbol:Object(T.a)(n)}):D(Object(h.a)(e)),this.classBreakInfos.push(r),1===this.classBreakInfos.length&&this.notifyChange("minValue")}},{key:"removeClassBreakInfo",value:function(e,t){for(var n=this.classBreakInfos.length,r=0;r<n;r++){var i=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(i[0]===e&&i[1]===t){this.classBreakInfos.splice(r,1);break}}}},{key:"getBreakIndex",value:function(e,t){return this.valueExpression&&(Object(b.j)(t)||Object(b.j)(t.arcade))&&A.warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}},{key:"getClassBreakInfo",value:function(){var e=Object(c.a)(o.a.mark((function e(t,n){var r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n,e.t0=this.valueExpression&&(Object(b.j)(n)||Object(b.j)(n.arcade)),!e.t0){e.next=11;break}return e.t1=s.a,e.t2=Object(s.a)({},r),e.t3={},e.next=8,Object(x.e)();case 8:e.t4=e.sent,e.t5={arcade:e.t4},r=(0,e.t1)(e.t2,e.t3,e.t5);case 11:return i=this.getBreakIndex(t,r),e.abrupt("return",-1!==i?this.classBreakInfos[i]:null);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(e,t){if(!this.valueExpression||!Object(b.j)(t)&&!Object(b.j)(t.arcade)){var n=this.getBreakIndex(e,t);return n>-1?this.classBreakInfos[n].symbol:this.defaultSymbol}A.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used")}},{key:"getSymbolAsync",value:function(){var e=Object(c.a)(o.a.mark((function e(t,n){var r,i,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n,!this.valueExpression||!Object(b.j)(n)&&!Object(b.j)(n.arcade)){e.next=11;break}return e.next=4,Object(x.e)();case 4:if(i=e.sent,a=i.arcadeUtils,e.t0=a.hasGeometryOperations(this.valueExpression),!e.t0){e.next=10;break}return e.next=10,a.enableGeometryOperations();case 10:r=Object(s.a)(Object(s.a)({},r),{},{arcade:i});case 11:return c=this.getBreakIndex(t,r),e.abrupt("return",c>-1?this.classBreakInfos[c].symbol:this.defaultSymbol);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){var e=[];return this.classBreakInfos.forEach((function(t){t.symbol&&e.push(t.symbol)})),this.defaultSymbol&&e.push(this.defaultSymbol),e}},{key:"getAttributeHash",value:function(){return this.visualVariables&&this.visualVariables.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){var e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),n="".concat(this.normalizationField,".").concat(this.normalizationType,".").concat(this.normalizationTotal);return"".concat(e,".").concat(t,".").concat(this.classBreakInfos.reduce((function(e,t){return e+t.getMeshHash()}),""),".").concat(n,".").concat(this.field,".").concat(this.valueExpression)}},{key:"arcadeRequired",get:function(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}},{key:"clone",value:function(){return new r({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:Object(h.a)(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:Object(h.a)(this.visualVariables),legendOptions:Object(h.a)(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}},{key:"collectRequiredFields",value:function(){var e=Object(c.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[this.collectVVRequiredFields(t,n),this.collectSymbolFields(t,n)],e.next=3,Promise.all(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"collectSymbolFields",value:function(){var e=Object(c.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[].concat(Object(i.a)(this.getSymbols().map((function(e){return e.collectRequiredFields(t,n)}))),[Object(S.c)(t,n,this.valueExpression)]),Object(S.f)(t,n,this.field),Object(S.f)(t,n,this.normalizationField),e.next=5,Promise.all(r);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getBreakIndexForExpression",value:function(e,t){var n=Object(b.r)(t,{}),r=n.viewingMode,i=n.scale,a=n.spatialReference,o=n.arcade,s=this._compiledValueExpression.valueExpression===this.valueExpression?this._compiledValueExpression.compiledFunction:null,c=Object(b.q)(o).arcadeUtils;if(!s){var l=c.createSyntaxTree(this.valueExpression);s=c.createFunction(l),this._compiledValueExpression.compiledFunction=s}this._compiledValueExpression.valueExpression=this.valueExpression;var u=c.executeFunction(s,c.createExecContext(e,c.getViewInfo({viewingMode:r,scale:i,spatialReference:a})));return this._getBreakIndexfromInfos(u)}},{key:"_getBreakIndexForField",value:function(e){var t=this.field,n=e.attributes,r=this.normalizationType,i=parseFloat(n[t]);if(r){var a=this.normalizationTotal,o=parseFloat(n[this.normalizationField]);if("log"===r)i=Math.log(i)*Math.LOG10E;else if(r!==R||isNaN(a)){if(r===L&&!isNaN(o)){if(isNaN(i)||isNaN(o))return-1;i/=o}}else i=i/a*100}return this._getBreakIndexfromInfos(i)}},{key:"_getBreakIndexfromInfos",value:function(e){var t=this.isMaxInclusive;if(null!=e&&"number"==typeof e&&!isNaN(e))for(var n=0;n<this.classBreakInfos.length;n++){var r=[this.classBreakInfos[n].minValue,this.classBreakInfos[n].maxValue];if(r[0]<=e&&(t?e<=r[1]:e<r[1]))return n}return-1}},{key:"_areClassBreaksConsecutive",value:function(){for(var e=this.classBreakInfos,t=e.length,n=1;n<t;n++)if(e[n-1].maxValue!==e[n].minValue)return!1;return!0}}]),n}(Object(P.a)(C.a));Object(p.a)([Object(m.b)(M.a)],N.prototype,"backgroundFillSymbol",void 0),Object(p.a)([Object(m.b)({type:[I.a]})],N.prototype,"classBreakInfos",void 0),Object(p.a)([Object(w.a)("classBreakInfos")],N.prototype,"readClassBreakInfos",null),Object(p.a)([Object(k.a)("classBreakInfos")],N.prototype,"writeClassBreakInfos",null),Object(p.a)([Object(m.b)({type:String,json:{write:!0}})],N.prototype,"defaultLabel",void 0),Object(p.a)([Object(m.b)(M.b)],N.prototype,"defaultSymbol",void 0),Object(p.a)([Object(m.b)({type:String,json:{write:!0}})],N.prototype,"field",void 0),Object(p.a)([Object(g.a)("field")],N.prototype,"castField",null),Object(p.a)([Object(m.b)({type:Boolean})],N.prototype,"isMaxInclusive",void 0),Object(p.a)([Object(m.b)({type:E.a,json:{write:!0}})],N.prototype,"legendOptions",void 0),Object(p.a)([Object(m.b)({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy:function(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],N.prototype,"minValue",null),Object(p.a)([Object(m.b)({type:String,json:{write:!0}})],N.prototype,"normalizationField",void 0),Object(p.a)([Object(m.b)({type:Number,cast:function(e){return Object(y.i)(e)},json:{write:!0}})],N.prototype,"normalizationTotal",void 0),Object(p.a)([Object(m.b)({type:F.apiValues,value:null,json:{type:F.jsonValues,read:F.read,write:F.write}})],N.prototype,"normalizationType",null),Object(p.a)([Object(j.a)({classBreaks:"class-breaks"})],N.prototype,"type",void 0),Object(p.a)([Object(m.b)({type:String,json:{write:!0}})],N.prototype,"valueExpression",void 0),Object(p.a)([Object(m.b)({type:String,json:{write:!0}})],N.prototype,"valueExpressionTitle",void 0);var V=N=r=Object(p.a)([Object(_.a)("esri.renderers.ClassBreaksRenderer")],N);t.a=V},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(4),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e.values().next().value};Object(r.a)(this,e),this._peeker=t,this._items=new Set}return Object(i.a)(e,[{key:"length",get:function(){return this._items.size}},{key:"clear",value:function(){this._items.clear()}},{key:"peek",value:function(){if(0!==this._items.size)return this._peeker(this._items)}},{key:"push",value:function(e){this.contains(e)||this._items.add(e)}},{key:"contains",value:function(e){return this._items.has(e)}},{key:"pop",value:function(){if(0!==this.length){var e=this.peek();return this._items.delete(Object(a.d)(e)),e}}},{key:"remove",value:function(e){this._items.delete(e)}},{key:"filter",value:function(e){var t=this;return this._items.forEach((function(n){e(n)||t._items.delete(n)})),this}}]),e}();t.a=o},function(e,t,n){"use strict";n.r(t);var r=n(7),i=n.n(r),a=n(15),o=n(10),s=n(2),c=n(3),l=n(5),u=n(6),d=n(0),f=(n(16),n(22)),p=n(4),h=n(13),b=n(17),v=n(1),y=n(41),m=n(8),g=n(18),O=n(12),j=(n(19),n(20),n(28)),w=n(63),_=n(84),k=n(133),x=n(109),S=n(58),T=n(36),E=h.a.getLogger("esri.portal.PortalItemResource"),C=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).portalItem=null,n}return Object(c.a)(r,[{key:"normalizeCtorArgs",value:function(e){return e&&e.portalItem&&e.path?Object(o.a)(Object(o.a)({},e),{},{path:this.normalizePath(e.path,e.portalItem)}):e}},{key:"path",set:function(e){Object(p.k)(e)&&Object(O.s)(e)?E.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}},{key:"_castPath",value:function(e){return this.normalizePath(e,this.portalItem)}},{key:"url",get:function(){return this.portalItem&&this.path?"".concat(this.portalItem.itemUrl,"/resources/").concat(this.path):null}},{key:"itemRelativeUrl",get:function(){return this.portalItem&&this.path?"./resources/".concat(this.path):null}},{key:"fetch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"json",t=arguments.length>1?arguments[1]:void 0,n=this.url;if(Object(p.j)(n))throw new g.a("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(n,{responseType:e,signal:Object(p.i)(t,"signal")})}},{key:"update",value:function(){var e=Object(a.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(11).then(n.bind(null,1302));case 2:return e.abrupt("return",e.sent.addOrUpdateResource(this,"update",t,r));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"hasPath",value:function(){return Object(p.k)(this.path)}},{key:"normalizePath",value:function(e,t){return Object(p.j)(e)?e:(e=e.replace(/^\/+/,""),Object(p.k)(t)&&Object(O.s)(e)&&(e=Object(O.B)(e,t.itemUrl)),e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}}]),r}(T.a);Object(d.a)([Object(v.b)()],C.prototype,"portalItem",void 0),Object(d.a)([Object(v.b)({type:String,value:null})],C.prototype,"path",null),Object(d.a)([Object(S.a)("path")],C.prototype,"_castPath",null),Object(d.a)([Object(v.b)({type:String,readOnly:!0})],C.prototype,"url",null),Object(d.a)([Object(v.b)({type:String,readOnly:!0})],C.prototype,"itemRelativeUrl",null);var P=C=Object(d.a)([Object(m.a)("esri.portal.PortalItemResource")],C),I=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).created=null,r.rating=null,r}return n}(T.a);Object(d.a)([Object(v.b)()],I.prototype,"created",void 0),Object(d.a)([Object(v.b)()],I.prototype,"rating",void 0);var M,A=I=Object(d.a)([Object(m.a)("esri.portal.PortalRating")],I),R=M=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).access=null,n.accessInformation=null,n.applicationProxies=null,n.avgRating=null,n.categories=null,n.created=null,n.culture=null,n.description=null,n.extent=null,n.groupCategories=null,n.id=null,n.itemControl=null,n.licenseInfo=null,n.modified=null,n.name=null,n.numComments=null,n.numRatings=null,n.numViews=null,n.owner=null,n.ownerFolder=null,n.portal=null,n.screenshots=null,n.size=null,n.snippet=null,n.sourceJSON=null,n.tags=null,n.title=null,n.type=null,n.typeKeywords=null,n.url=null,n}return Object(c.a)(r,[{key:"destroy",value:function(){this.portal=null}},{key:"displayName",get:function(){var e=this.type,t=this.typeKeywords||[],n=e;return"Feature Service"===e||"Feature Collection"===e?n=t.indexOf("Table")>-1?"Table":t.indexOf("Route Layer")>-1?"Route Layer":t.indexOf("Markup")>-1?"Markup":"Feature Layer":"Image Service"===e?n=t.indexOf("Elevation 3D Layer")>-1?"Elevation Layer":t.indexOf("Tiled Imagery")>-1?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===e?n="Scene Layer":"Scene Package"===e?n="Scene Layer Package":"Stream Service"===e?n="Feature Layer":"Geoprocessing Service"===e&&this.portal&&this.portal.isPortal?n=t.indexOf("Web Tool")>-1?"Tool":"Geoprocessing Service":"Geocoding Service"===e?n="Locator":"Geoenrichment Service"===e?n="GeoEnrichment Service":"Microsoft Powerpoint"===e?n="Microsoft PowerPoint":"GeoJson"===e?n="GeoJSON":"Globe Service"===e?n="Globe Layer":"Vector Tile Service"===e?n="Tile Layer":"netCDF"===e?n="NetCDF":"Map Service"===e?n=-1===t.indexOf("Spatiotemporal")&&(t.indexOf("Hosted Service")>-1||t.indexOf("Tiled")>-1)&&-1===t.indexOf("Relational")?"Tile Layer":"Map Image Layer":e&&e.toLowerCase().indexOf("add in")>-1?n=e.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===e?n="Big Data File Share":"Compact Tile Package"===e&&(n="Tile Package (tpkx)"),n}},{key:"readExtent",value:function(e){return e&&e.length?new w.a(e[0][0],e[0][1],e[1][0],e[1][1]):null}},{key:"iconUrl",get:function(){var e,t=this.type&&this.type.toLowerCase()||"",n=this.typeKeywords||[],r=!1,i=!1,a=!1,o=!1,s=!1,c=!1;return t.indexOf("service")>0||"feature collection"===t||"kml"===t||"wms"===t||"wmts"===t||"wfs"===t?(r=n.indexOf("Hosted Service")>-1,"feature service"===t||"feature collection"===t||"kml"===t||"wfs"===t?(i=n.indexOf("Table")>-1,a=n.indexOf("Route Layer")>-1,o=n.indexOf("Markup")>-1,s=-1!==n.indexOf("Spatiotemporal"),c=-1!==n.indexOf("UtilityNetwork"),e=s&&i?"spatiotemporaltable":i?"table":a?"routelayer":o?"markup":s?"spatiotemporal":r?"featureshosted":c?"utilitynetwork":"features"):e="map service"===t||"wms"===t||"wmts"===t?r||n.indexOf("Tiled")>-1||"wmts"===t?"maptiles":"mapimages":"scene service"===t?n.indexOf("Line")>-1?"sceneweblayerline":n.indexOf("3DObject")>-1?"sceneweblayermultipatch":n.indexOf("Point")>-1?"sceneweblayerpoint":n.indexOf("IntegratedMesh")>-1?"sceneweblayermesh":n.indexOf("PointCloud")>-1?"sceneweblayerpointcloud":n.indexOf("Polygon")>-1?"sceneweblayerpolygon":n.indexOf("Building")>-1?"sceneweblayerbuilding":"sceneweblayer":"image service"===t?n.indexOf("Elevation 3D Layer")>-1?"elevationlayer":n.indexOf("Tiled Imagery")>-1?"tiledimagerylayer":"imagery":"stream service"===t?"streamlayer":"vector tile service"===t?"vectortile":"datastore catalog service"===t?"datastorecollection":"geocoding service"===t?"geocodeservice":"geoprocessing service"===t&&n.indexOf("Web Tool")>-1&&this.portal&&this.portal.isPortal?"tool":"layers"):e="web map"===t||"cityengine web scene"===t?"maps":"web scene"===t?n.indexOf("ViewingMode-Local")>-1?"webscenelocal":"websceneglobal":"web mapping application"===t||"mobile application"===t||"application"===t||"operation view"===t||"desktop application"===t?"apps":"map document"===t||"map package"===t||"published map"===t||"scene document"===t||"globe document"===t||"basemap package"===t||"mobile basemap package"===t||"mobile map package"===t||"project package"===t||"project template"===t||"pro map"===t||"layout"===t||"layer"===t&&n.indexOf("ArcGIS Pro")>-1||"explorer map"===t&&n.indexOf("Explorer Document")?"mapsgray":"service definition"===t||"csv"===t||"shapefile"===t||"cad drawing"===t||"geojson"===t||"360 vr experience"===t||"netcdf"===t||"administrative report"===t?"datafiles":"explorer add in"===t||"desktop add in"===t||"windows viewer add in"===t||"windows viewer configuration"===t?"appsgray":"arcgis pro add in"===t||"arcgis pro configuration"===t?"addindesktop":"rule package"===t||"file geodatabase"===t||"sqlite geodatabase"===t||"csv collection"===t||"kml collection"===t||"windows mobile package"===t||"map template"===t||"desktop application template"===t||"gml"===t||"arcpad package"===t||"code sample"===t||"form"===t||"document link"===t||"earth configuration"===t||"operations dashboard add in"===t||"rules package"===t||"image"===t||"workflow manager package"===t||"explorer map"===t&&n.indexOf("Explorer Mapping Application")>-1||n.indexOf("Document")>-1?"datafilesgray":"network analysis service"===t||"geoprocessing service"===t||"geodata service"===t||"geometry service"===t||"geoprocessing package"===t||"locator package"===t||"geoprocessing sample"===t||"workflow manager service"===t?"toolsgray":"layer"===t||"layer package"===t||"explorer layer"===t?"layersgray":"scene package"===t?"scenepackage":"mobile scene package"===t?"mobilescenepackage":"tile package"===t||"compact tile package"===t?"tilepackage":"task file"===t?"taskfile":"report template"===t?"report-template":"statistical data collection"===t?"statisticaldatacollection":"insights workbook"===t?"workbook":"insights model"===t?"insightsmodel":"insights page"===t?"insightspage":"insights theme"===t?"insightstheme":"hub initiative"===t?"hubinitiative":"hubpage"===t?"hubpage":"hub event"===t?"hubevent":"hub site application"===t?"hubsite":"relational database connection"===t?"relationaldatabaseconnection":"big data file share"===t?"datastorecollection":"image collection"===t?"imagecollection":"style"===t?"style":"desktop style"===t?"desktopstyle":"dashboard"===t?"dashboard":"raster function template"===t?"rasterprocessingtemplate":"vector tile package"===t?"vectortilepackage":"ortho mapping project"===t?"orthomappingproject":"ortho mapping template"===t?"orthomappingtemplate":"solution"===t?"solutions":"geopackage"===t?"geopackage":"deep learning package"===t?"deeplearningpackage":"real time analytic"===t?"realtimeanalytics":"big data analytic"===t?"bigdataanalytics":"feed"===t?"feed":"excalibur imagery project"===t?"excaliburimageryproject":"notebook"===t?"notebook":"storymap"===t?"storymap":"survey123 add in"===t?"survey123addin":"mission"===t?"mission":"mission report"===t?"missionreport":"quickcapture project"===t?"quickcaptureproject":"pro report"===t?"proreport":"urban model"===t?"urbanmodel":"web experience"===t?"experiencebuilder":"web experience template"===t?"webexperiencetemplate":"workflow"===t?"workflow":"insights script"===t?"insightsscript":"kernel gateway connection"===t?"kernelgatewayconnection":"hub initiative template"===t?"hubinitiativetemplate":"storymap theme"===t?"storymaptheme":"knowledge graph"===t?"knowledgegraph":"maps",e?Object(_.a)("esri/images/portal/"+e+"16.png"):null}},{key:"isLayer",get:function(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].indexOf(this.type)>-1}},{key:"itemUrl",get:function(){var e=this.get("portal.restUrl");return e?e+"/content/items/"+this.id:null}},{key:"thumbnailUrl",get:function(){var e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl("".concat(e,"/info/").concat(t,"?f=json")):null}},{key:"userItemUrl",get:function(){var e=this.get("portal.restUrl");if(!e)return null;var t=this.owner||this.get("portal.user.username");return t?"".concat(e,"/content/users/").concat(this.ownerFolder?"".concat(t,"/").concat(this.ownerFolder):t,"/items/").concat(this.id):null}},{key:"load",value:function(e){var t=this;this.portal||(this.portal=x.a.getDefault());var n=this.portal.load(e).then((function(){return t.sourceJSON?t.sourceJSON:t.id&&t.itemUrl?t.portal._request(t.itemUrl,{signal:Object(p.k)(e)?e.signal:null}):{}})).then((function(e){t.sourceJSON=e,t.read(e)}));return this.addResolvingPromise(n),Promise.resolve(this)}},{key:"addRating",value:function(e){var t={method:"post",query:{}};return e instanceof A&&(e=e.rating),isNaN(e)||"number"!=typeof e||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then((function(){return new A({rating:e,created:new Date})}))}},{key:"clone",value:function(){var e={access:this.access,accessInformation:this.accessInformation,applicationProxies:Object(f.a)(this.applicationProxies),avgRating:this.avgRating,categories:Object(f.a)(this.categories),created:Object(f.a)(this.created),culture:this.culture,description:this.description,extent:Object(f.a)(this.extent),groupCategories:Object(f.a)(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:Object(f.a)(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:Object(f.a)(this.screenshots),size:this.size,snippet:this.snippet,tags:Object(f.a)(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Object(f.a)(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new M({sourceJSON:this.sourceJSON}).set(e)}},{key:"createPostQuery",value:function(){var e=this.toJSON();for(var t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}},{key:"deleteRating",value:function(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then((function(){}))}},{key:"fetchData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"json",t=arguments.length>1?arguments[1]:void 0;return this.portal._request(this.itemUrl+"/data",Object(o.a)({responseType:e},t))}},{key:"fetchRating",value:function(e){return this.portal._request(this.itemUrl+"/rating",e).then((function(e){return null!=e.rating?(e.created=new Date(e.created),new A(e)):null}))}},{key:"fetchRelatedItems",value:function(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",Object(o.a)({query:e},t),M)}},{key:"getThumbnailUrl",value:function(e){var t=this.thumbnailUrl;return t&&e&&(t+="&w=".concat(e)),t}},{key:"reload",value:function(){var e=this;return this.portal._request(this.itemUrl,{cacheBust:!0}).then((function(t){return e.sourceJSON=t,e.read(t),e}))}},{key:"update",value:function(e){var t=this;return this.id?this.load().then((function(){return t.portal._signIn()})).then((function(){var n=e&&e.data,r={method:"post"};for(var i in r.query=t.createPostQuery(),r.query)null===r.query[i]&&(r.query[i]="");return r.query.clearEmptyFields=!0,null!=n&&("string"==typeof n?r.query.text=n:"object"==typeof n&&(r.query.text=JSON.stringify(n))),t.portal._request("".concat(t.userItemUrl,"/update"),r).then((function(){return t.reload()}))})):Promise.reject(new g.a("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}},{key:"updateThumbnail",value:function(e){var t=this;return this.id?this.load().then((function(){return t.portal._signIn()})).then((function(){var n=e.thumbnail,r=e.filename,i={method:"post"};if("string"==typeof n)Object(O.u)(n)?i.query={data:n}:i.query={url:Object(O.z)(n)},Object(p.k)(r)&&(i.query.filename=r);else{var a=new FormData;Object(p.k)(r)?a.append("file",n,r):a.append("file",n),i.body=a}return t.portal._request("".concat(t.userItemUrl,"/updateThumbnail"),i).then((function(){return t.reload()}))})):Promise.reject(new g.a("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}},{key:"fetchResources",value:function(){var e=Object(a.a)(i.a.mark((function e(){var t,r,a=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},r=a.length>1?a[1]:void 0,e.next=4,n.e(11).then(n.bind(null,1302));case 4:return e.abrupt("return",e.sent.fetchResources(this,t,r));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addResource",value:function(){var e=Object(a.a)(i.a.mark((function e(t,r,a){var o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(11).then(n.bind(null,1302));case 2:return o=e.sent,e.abrupt("return",(t.portalItem=this,o.addOrUpdateResource(t,"add",r,a)));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"removeResource",value:function(){var e=Object(a.a)(i.a.mark((function e(t,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(11).then(n.bind(null,1302));case 2:if(a=e.sent,!t.portalItem||t.portalItem.itemUrl===this.itemUrl){e.next=5;break}throw new g.a("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");case 5:return e.abrupt("return",a.removeResource(this,t,r));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"removeAllResources",value:function(){var e=Object(a.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(11).then(n.bind(null,1302));case 2:return e.abrupt("return",e.sent.removeAllResources(this,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"resourceFromPath",value:function(e){return new P({portalItem:this,path:e})}},{key:"toJSON",value:function(){var e=this.extent,t={created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return Object(f.c)(t)}},{key:"_getPostQuery",value:function(){var e=this.toJSON();for(var t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}}],[{key:"from",value:function(e){return Object(b.d)(M,e)}},{key:"fromJSON",value:function(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new M({sourceJSON:e})}}]),r}(Object(j.b)(k.a));Object(d.a)([Object(v.b)({type:["private","shared","org","public"]})],R.prototype,"access",void 0),Object(d.a)([Object(v.b)()],R.prototype,"accessInformation",void 0),Object(d.a)([Object(v.b)({json:{read:{source:"appProxies"}}})],R.prototype,"applicationProxies",void 0),Object(d.a)([Object(v.b)()],R.prototype,"avgRating",void 0),Object(d.a)([Object(v.b)()],R.prototype,"categories",void 0),Object(d.a)([Object(v.b)({type:Date})],R.prototype,"created",void 0),Object(d.a)([Object(v.b)()],R.prototype,"culture",void 0),Object(d.a)([Object(v.b)()],R.prototype,"description",void 0),Object(d.a)([Object(v.b)({readOnly:!0})],R.prototype,"displayName",null),Object(d.a)([Object(v.b)({type:w.a})],R.prototype,"extent",void 0),Object(d.a)([Object(y.a)("extent")],R.prototype,"readExtent",null),Object(d.a)([Object(v.b)()],R.prototype,"groupCategories",void 0),Object(d.a)([Object(v.b)({readOnly:!0})],R.prototype,"iconUrl",null),Object(d.a)([Object(v.b)()],R.prototype,"id",void 0),Object(d.a)([Object(v.b)({readOnly:!0})],R.prototype,"isLayer",null),Object(d.a)([Object(v.b)()],R.prototype,"itemControl",void 0),Object(d.a)([Object(v.b)({readOnly:!0})],R.prototype,"itemUrl",null),Object(d.a)([Object(v.b)()],R.prototype,"licenseInfo",void 0),Object(d.a)([Object(v.b)({type:Date})],R.prototype,"modified",void 0),Object(d.a)([Object(v.b)()],R.prototype,"name",void 0),Object(d.a)([Object(v.b)()],R.prototype,"numComments",void 0),Object(d.a)([Object(v.b)()],R.prototype,"numRatings",void 0),Object(d.a)([Object(v.b)()],R.prototype,"numViews",void 0),Object(d.a)([Object(v.b)()],R.prototype,"owner",void 0),Object(d.a)([Object(v.b)()],R.prototype,"ownerFolder",void 0),Object(d.a)([Object(v.b)({type:x.a})],R.prototype,"portal",void 0),Object(d.a)([Object(v.b)()],R.prototype,"screenshots",void 0),Object(d.a)([Object(v.b)()],R.prototype,"size",void 0),Object(d.a)([Object(v.b)()],R.prototype,"snippet",void 0),Object(d.a)([Object(v.b)()],R.prototype,"sourceJSON",void 0),Object(d.a)([Object(v.b)()],R.prototype,"tags",void 0),Object(d.a)([Object(v.b)()],R.prototype,"thumbnail",void 0),Object(d.a)([Object(v.b)({readOnly:!0})],R.prototype,"thumbnailUrl",null),Object(d.a)([Object(v.b)()],R.prototype,"title",void 0),Object(d.a)([Object(v.b)()],R.prototype,"type",void 0),Object(d.a)([Object(v.b)()],R.prototype,"typeKeywords",void 0),Object(d.a)([Object(v.b)()],R.prototype,"url",void 0),Object(d.a)([Object(v.b)({readOnly:!0})],R.prototype,"userItemUrl",null);var L=R=M=Object(d.a)([Object(m.a)("esri.portal.PortalItem")],R);t.default=L},function(e,t,n){(function(t){var r=n(835),i=n(836);function a(e){console.log("[dotenv][DEBUG] ".concat(e))}var o=/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/,s=/\\n/g,c=/\n|\r|\r\n/;function l(e,t){var n=Boolean(t&&t.debug),r={};return e.toString().split(c).forEach((function(e,t){var i=e.match(o);if(null!=i){var c=i[1],l=i[2]||"",u=l.length-1,d='"'===l[0]&&'"'===l[u];"'"===l[0]&&"'"===l[u]||d?(l=l.substring(1,u),d&&(l=l.replace(s,"\n"))):l=l.trim(),r[c]=l}else n&&a("did not match key and value when parsing line ".concat(t+1,": ").concat(e))})),r}e.exports.config=function(e){var n=i.resolve(t.cwd(),".env"),o="utf8",s=!1;e&&(null!=e.path&&(n=e.path),null!=e.encoding&&(o=e.encoding),null!=e.debug&&(s=!0));try{var c=l(r.readFileSync(n,{encoding:o}),{debug:s});return Object.keys(c).forEach((function(e){Object.prototype.hasOwnProperty.call(Object({NODE_ENV:"production",PUBLIC_URL:"https://qp-gavel-mvp.azurewebsites.net",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"https://qp-gavel-svr-mvp.azurewebsites.net",REACT_APP_API_KEY:"995dba95-c33d-456b-a7ea-3fd512e60894",REACT_APP_API_PRIVATE_KEY:"'-----BEGIN RSA PRIVATE KEY-----\\n' +",REACT_APP_API_VERSION:"/api/v1",REACT_APP_DEFAULT_UNITS_OF_LENGTH:"meters",REACT_APP_MEASUREMENT_SYSTEM:"metric"}),e)?s&&a('"'.concat(e,'" is already defined in `process.env` and will not be overwritten')):Object({NODE_ENV:"production",PUBLIC_URL:"https://qp-gavel-mvp.azurewebsites.net",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"https://qp-gavel-svr-mvp.azurewebsites.net",REACT_APP_API_KEY:"995dba95-c33d-456b-a7ea-3fd512e60894",REACT_APP_API_PRIVATE_KEY:"'-----BEGIN RSA PRIVATE KEY-----\\n' +",REACT_APP_API_VERSION:"/api/v1",REACT_APP_DEFAULT_UNITS_OF_LENGTH:"meters",REACT_APP_MEASUREMENT_SYSTEM:"metric"})[e]=c[e]})),{parsed:c}}catch(u){return{error:u}}},e.exports.parse=l}).call(this,n(382))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StyledMultiRowActions=t.StyledSubNavActions=t.StyledSubNavTitle=t.StyledSubNavList=t.StyledSubNavLink=t.StyledSubNavContent=t.StyledSubNav=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(194)),i=n(164),a=n(852),o=n(350),s=n(176),c=n(568);var l=r.default.header.withConfig({displayName:"StyledSubNav",componentId:"rv6lg3-0"})(["position:relative;display:flex;width:100%;",""],(function(e){return e.legacy?(0,r.css)(["flex-wrap:wrap;background-color:",";",""],e.blue?e.theme.palette.darkerBlue:e.theme.palette.lightestGray,e.backgroundImage&&(0,s.backgroundGradient)(e.backgroundImage,e.gradientFromColor,e.gradientToColor,e.overlayGradient)):(0,r.css)(["background-color:",";"],e.theme.palette[e.backgroundColor]||e.backgroundColor)}));t.StyledSubNav=l,l.defaultProps={theme:i.CalciteTheme};var u=r.default.div.withConfig({displayName:"StyledSubNavContent",componentId:"rv6lg3-1"})(["display:flex;justify-content:space-between;",""],(function(e){return e.legacy?(0,r.css)(["flex-direction:column;flex:1 0 200px;"]):(0,r.css)(["width:",";max-width:",";height:56px;margin:0 auto;padding:0 1rem;"],e.contentWidth||e.theme.contentWidth,e.contentMaxWidth||e.theme.contentMaxWidth)}));t.StyledSubNavContent=u,u.defaultProps={theme:i.CalciteTheme};var d=(0,r.default)(o.CalciteA).withConfig({displayName:"StyledSubNavLink",componentId:"rv6lg3-2"})(["font-family:",";transition:background-color ",",color ",";box-sizing:border-box;display:inline-block;",";"," ",""],(function(e){return e.theme.avenirFamily}),(0,s.transition)(),(0,s.transition)("150ms"),(0,s.fontSize)(-1),(function(e){return e.disabled&&(0,r.css)(["opacity:0.5;pointer-events:none;"])}),(function(e){return e.legacy?(0,r.css)(["padding:0.25em 0.75em;margin:0 0 0 0.25em;color:",";background-color:",";border-radius:"," "," 0 0;html[dir='rtl'] &{margin:0 0.25em 0 0;}&:hover,&:focus{background-color:",";color:",";text-decoration:none;",";}"," .active > &,.active > &:hover,.active > &:focus{background-color:",";color:",";}"],e.theme.palette.offWhite,e.theme.palette.transparentOffBlack,e.theme.borderRadius,e.theme.borderRadius,e.theme.palette.transparentDarkerGray,e.theme.palette.white,(0,s.subNavUnderline)(e),e.active&&(0,r.css)(["&,&:hover,&:focus{background-color:",";color:",";}"],e.theme.palette.white,e.theme.palette.offBlack),e.theme.palette.white,e.theme.palette.offBlack):(0,r.css)(["display:flex;align-items:center;box-sizing:border-box;color:",";border-bottom:4px solid transparent;padding-right:",";padding-left:",";"," &:hover,&:focus,.active > &,.active > &:hover,.active > &:focus{","}"],e.theme.palette.white,e.theme.baseline,e.theme.baseline,e.active&&(0,r.css)(["&,&:hover,&:focus{","}"],(0,s.subNavLinkActive)(e)),(0,s.subNavLinkActive)(e))}));t.StyledSubNavLink=d,d.defaultProps={theme:i.CalciteTheme};var f=r.default.nav.withConfig({displayName:"StyledSubNavList",componentId:"rv6lg3-3"})(["display:flex;margin-top:0em;box-sizing:border-box;padding-left:0.25em;html[dir='rtl'] &{padding-left:0;padding-right:0.25em;}",""],(function(e){return!e.legacy&&(0,r.css)(["margin-left:auto;html[dir='rtl'] &{margin-left:0;margin-right:auto;}"])}));t.StyledSubNavList=f,f.defaultProps={theme:i.CalciteTheme};var p=(0,r.default)(o.CalciteH1).withConfig({displayName:"StyledSubNavTitle",componentId:"rv6lg3-4"})(["box-sizing:border-box;",""],(function(e){return e.legacy?(0,r.css)(["",";line-height:1.25;padding-left:0.25em;margin-top:",";margin-bottom:",";",";html[dir='rtl'] &{padding-left:0;padding-right:0.25em;}"],(0,s.fontSize)(4),(0,s.unitCalc)(e.theme.baseline,2,"/"),(0,s.unitCalc)(e.theme.baseline,2,"/"),e.blue&&(0,r.css)(["color:",";"],e.theme.palette.white)):(0,r.css)(["",";display:flex;align-items:center;color:",";margin-bottom:0;",",","{color:",";",";&::before{color:",";}}","{",";}html[dir='rtl'] &{padding-left:0;padding-right:",";}"],(0,s.fontSize)(2),e.theme.palette.white,a.StyledSpanCrumb,a.StyledCrumb,e.theme.palette.white,(0,c.linkColor)(e.theme.palette.white,e.theme.palette.lightestGray),e.theme.palette.white,a.StyledBreadcrumbs,(0,s.fontSize)(1),(0,s.unitCalc)(e.theme.baseline,3,"/"))}));t.StyledSubNavTitle=p,p.defaultProps={theme:i.CalciteTheme};var h=r.default.nav.withConfig({displayName:"StyledSubNavActions",componentId:"rv6lg3-5"})(["margin:0.5em;display:flex;justify-content:flex-end;align-items:center;"]);t.StyledSubNavActions=h,h.defaultProps={theme:i.CalciteTheme};var b=r.default.div.withConfig({displayName:"StyledMultiRowActions",componentId:"rv6lg3-6"})(["display:flex;flex-direction:column;"]);t.StyledMultiRowActions=b,b.defaultProps={theme:i.CalciteTheme}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StyledSignOutButton=t.StyledSwitchAccountButton=t.StyledArcgisAccountMenuItem=t.StyledArcgisAccountSignInMenu=t.StyledArcgisAccountContentMenu=t.StyledArcgisAccountContentGroup=t.StyledArcgisAccountContentId=t.StyledArcgisAccountContentName=t.StyledArcgisAccountContentInfo=t.StyledArcgisAccountContent=t.StyledArcgisAccountMenu=t.StyledArcgisAccountControlUsername=t.StyledArcgisAccountControlFriendlyName=t.StyledArcgisAccountControlNames=t.StyledArcgisAccountControlAvatar=t.StyledArcgisAccountControl=void 0;var r,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(194)),a=n(176),o=n(164),s=(r=n(396))&&r.__esModule?r:{default:r};var c=i.default.div.withConfig({displayName:"StyledArcgisAccountControl",componentId:"sc-1olvy1r-0"})(["display:flex;align-items:center;color:",";cursor:pointer;height:62px;max-width:260px;padding:"," "," "," ",";box-sizing:border-box;border-left:1px solid ",";transition:all 225ms cubic-bezier(0.4,0,0.2,1);html[dir='rtl'] &{padding:"," "," "," ",";border-left:initial;border-right:1px solid ",";}&:hover{color:",";box-shadow:inset 0 -3px 0 0 ",";}&:active{color:",";box-shadow:inset 0 -3px 0 0 ",";}",";"],(function(e){return e.theme.palette.darkestGray}),(function(e){return(0,a.unitCalc)(e.theme.baseline,2,"/")}),(function(e){return e.theme.baseline}),(function(e){return(0,a.unitCalc)(e.theme.baseline,2,"/")}),(function(e){return(0,a.unitCalc)(e.theme.baseline,1.5,"/")}),(function(e){return e.theme.palette.lighterGray}),(function(e){return(0,a.unitCalc)(e.theme.baseline,2,"/")}),(function(e){return(0,a.unitCalc)(e.theme.baseline,1.5,"/")}),(function(e){return(0,a.unitCalc)(e.theme.baseline,2,"/")}),(function(e){return e.theme.baseline}),(function(e){return e.theme.palette.lighterGray}),(function(e){return e.theme.palette.black}),(function(e){return e.theme.palette.lighterBlue}),(function(e){return e.theme.palette.black}),(function(e){return e.theme.palette.blue}),(function(e){return e.open&&(0,i.css)(["&,&:hover{color:",";box-shadow:inset 0 -3px 0 0 ",";}"],(function(e){return e.theme.palette.black}),(function(e){return e.theme.palette.blue}))}));t.StyledArcgisAccountControl=c,c.defaultProps={theme:o.CalciteTheme};var l=i.default.div.withConfig({displayName:"StyledArcgisAccountControlAvatar",componentId:"sc-1olvy1r-1"})(["margin-right:",";html[dir='rtl'] &{margin-right:initial;margin-left:",";}"],(function(e){return(0,a.unitCalc)(e.theme.baseline,2,"/")}),(function(e){return(0,a.unitCalc)(e.theme.baseline,2,"/")}));t.StyledArcgisAccountControlAvatar=l,l.defaultProps={theme:o.CalciteTheme};var u=i.default.div.withConfig({displayName:"StyledArcgisAccountControlNames",componentId:"sc-1olvy1r-2"})(["flex:1 0 50px;display:flex;flex-direction:column;"]);t.StyledArcgisAccountControlNames=u,u.defaultProps={theme:o.CalciteTheme};var d=i.default.span.withConfig({displayName:"StyledArcgisAccountControlFriendlyName",componentId:"sc-1olvy1r-3"})(["font-weight:600;",";line-height:20px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;max-width:170px;"],(0,a.fontSize)(-1));t.StyledArcgisAccountControlFriendlyName=d,d.defaultProps={theme:o.CalciteTheme};var f=i.default.span.withConfig({displayName:"StyledArcgisAccountControlUsername",componentId:"sc-1olvy1r-4"})(["font-weight:300;",";line-height:16px;"],(0,a.fontSize)(-2));t.StyledArcgisAccountControlUsername=f,f.defaultProps={theme:o.CalciteTheme};var p=i.default.div.withConfig({displayName:"StyledArcgisAccountMenu",componentId:"sc-1olvy1r-5"})(["background:",";box-shadow:",";border-radius:",";"],(function(e){return e.theme.palette.white}),(function(e){return e.theme.boxShadow}),(function(e){return e.theme.borderRadius}));t.StyledArcgisAccountMenu=p,p.defaultProps={theme:o.CalciteTheme};var h=i.default.div.withConfig({displayName:"StyledArcgisAccountContent",componentId:"sc-1olvy1r-6"})(["display:flex;min-height:210px;padding-top:",";"],(function(e){return(0,a.unitCalc)(e.theme.baseline,2,"*")}));t.StyledArcgisAccountContent=h,h.defaultProps={theme:o.CalciteTheme};var b=i.default.div.withConfig({displayName:"StyledArcgisAccountContentInfo",componentId:"sc-1olvy1r-7"})(["display:flex;flex-direction:column;justify-content:center;align-items:center;flex:1 0 50px;"]);t.StyledArcgisAccountContentInfo=b,b.defaultProps={theme:o.CalciteTheme};var v=i.default.span.withConfig({displayName:"StyledArcgisAccountContentName",componentId:"sc-1olvy1r-8"})(["",";font-weight:600;word-break:break-word;text-align:center;display:inline-block;margin-bottom:",";"],(0,a.fontSize)(1),(function(e){return(0,a.unitCalc)(e.theme.baseline,2,"/")}));t.StyledArcgisAccountContentName=v,v.defaultProps={theme:o.CalciteTheme};var y=i.default.span.withConfig({displayName:"StyledArcgisAccountContentId",componentId:"sc-1olvy1r-9"})(["",";font-weight:300;line-height:20px;"],(0,a.fontSize)(-2));t.StyledArcgisAccountContentId=y,y.defaultProps={theme:o.CalciteTheme};var m=i.default.span.withConfig({displayName:"StyledArcgisAccountContentGroup",componentId:"sc-1olvy1r-10"})(["",";font-weight:300;line-height:20px;margin-bottom:",";text-align:center;padding:0 ",";"],(0,a.fontSize)(-2),(function(e){return(0,a.unitCalc)(e.theme.baseline,1.5,"*")}),(function(e){return(0,a.unitCalc)(e.theme.baseline,4,"/")}));t.StyledArcgisAccountContentGroup=m,m.defaultProps={theme:o.CalciteTheme};var g=i.default.div.withConfig({displayName:"StyledArcgisAccountContentMenu",componentId:"sc-1olvy1r-11"})(["flex:1 0 30px;padding-left:",";padding-right:",";display:flex;flex-direction:column;align-items:flex-start;html[dir='rtl'] &{padding-left:",";padding-right:",";}"],(function(e){return(0,a.unitCalc)(e.theme.baseline,2,"/")}),(function(e){return e.theme.baseline}),(function(e){return e.theme.baseline}),(function(e){return(0,a.unitCalc)(e.theme.baseline,2,"/")}));t.StyledArcgisAccountContentMenu=g,g.defaultProps={theme:o.CalciteTheme};var O=i.default.div.withConfig({displayName:"StyledArcgisAccountSignInMenu",componentId:"sc-1olvy1r-12"})(["display:flex;"]);t.StyledArcgisAccountSignInMenu=O,O.defaultProps={theme:o.CalciteTheme};var j=i.default.a.withConfig({displayName:"StyledArcgisAccountMenuItem",componentId:"sc-1olvy1r-13"})(["cursor:pointer;text-decoration:none;color:",";display:block;",";line-height:20px;font-weight:300;padding:5px 0;position:relative;&::after{right:-8px;opacity:0;position:absolute;width:12px;height:12px;transition:opacity 0.25s,transform 0.25s;background-color:",";",";top:calc(50% - 20px / 2);}&:hover{color:",";&::after{opacity:1;transform:translateX(10px);html[dir='rtl'] &{transform:translateX(-10px);}}}"],(function(e){return e.theme.palette.blue}),(0,a.fontSize)(0),(function(e){return e.theme.palette.white}),(function(e){return e&&(0,i.css)(["content:",";html[dir='rtl'] &{right:auto;left:-8px;content:",";}"],"url(\"data:image/svg+xml,%3Csvg viewBox='0 0 16 16' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cpolygon points='8 13.3 13.3 8 0 8 0 7 13.3 7 8 1.7 8 0.3 15.2 7.5 8 14.7' fill='".concat(e.theme.palette.darkBlue.replace("#","%23"),"' %3E%3C/polygon%3E%3C/svg%3E\")"),"url(\"data:image/svg+xml,%3Csvg viewBox='0 0 16 16' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cpolygon points='8 13.3 8 14.7 0.8 7.5 8 0.3 8 1.7 2.7 7 16 7 16 8 2.7 8' fill='".concat(e.theme.palette.darkBlue.replace("#","%23"),"' %3E%3C/polygon%3E%3C/svg%3E\")"))}),(function(e){return e.theme.palette.darkBlue}));t.StyledArcgisAccountMenuItem=j,j.defaultProps={theme:o.CalciteTheme};var w=(0,i.default)(s.default).withConfig({displayName:"StyledSwitchAccountButton",componentId:"sc-1olvy1r-14"})(["flex:1 0 50px;white-space:normal;border-radius:0 0 0 ",";"],(function(e){return e.theme.borderRadius}));t.StyledSwitchAccountButton=w,w.defaultProps={theme:o.CalciteTheme};var _=(0,i.default)(s.default).withConfig({displayName:"StyledSignOutButton",componentId:"sc-1olvy1r-15"})(["flex:1 0 50px;white-space:normal;margin-left:0;border-radius:0 0 "," 0;"],(function(e){return e.theme.borderRadius}));t.StyledSignOutButton=_,_.defaultProps={theme:o.CalciteTheme}},function(e,t,n){"use strict";var r=n(676),i="function"===typeof Symbol&&"symbol"===typeof Symbol("foo"),a=Object.prototype.toString,o=Array.prototype.concat,s=Object.defineProperty,c=s&&function(){var e={};try{for(var t in s(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(n){return!1}}(),l=function(e,t,n,r){var i;(!(t in e)||"function"===typeof(i=r)&&"[object Function]"===a.call(i)&&r())&&(c?s(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)},u=function(e,t){var n=arguments.length>2?arguments[2]:{},a=r(t);i&&(a=o.call(a,Object.getOwnPropertySymbols(t)));for(var s=0;s<a.length;s+=1)l(e,a[s],t[a[s]],n[a[s]])};u.supportsDescriptors=!!c,e.exports=u},function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return g}));var r,i,a,o,s,c,l,u,d,f,p=n(29),h=n(45),b=n(34),v=n(256),y=n(632),m=n(489),g=Object(h.f)(6);function O(e){var t=new v.a;return t.extensions.add("GL_OES_standard_derivatives"),t.include(y.a),t.include(m.a,e),t.fragment.uniforms.add("angleCutoff","vec2"),t.fragment.uniforms.add("globalAlpha","float"),e.heightManifoldEnabled&&t.fragment.uniforms.add("heightPlane","vec4"),e.pointDistanceEnabled&&t.fragment.uniforms.add("pointDistanceSphere","vec4"),e.lineVerticalPlaneEnabled&&t.fragment.uniforms.add("lineVerticalPlane","vec4").add("lineVerticalStart","vec3").add("lineVerticalEnd","vec3"),(e.heightManifoldEnabled||e.pointDistanceEnabled||e.lineVerticalPlaneEnabled)&&t.fragment.uniforms.add("maxPixelDistance","float"),e.intersectsLineEnabled&&t.fragment.uniforms.add("intersectsLineStart","vec3").add("intersectsLineEnd","vec3").add("intersectsLineDirection","vec3").add("intersectsLineRadius","float").add("perScreenPixelRatio","float"),(e.lineVerticalPlaneEnabled||e.heightManifoldEnabled)&&t.fragment.code.add(Object(b.a)(r||(r=Object(p.a)(["\n      float planeDistancePixels(vec4 plane, vec3 pos) {\n        float dist = dot(plane.xyz, pos) + plane.w;\n        float width = fwidth(dist);\n        dist /= min(width, maxPixelDistance);\n        return abs(dist);\n      }"])))),e.pointDistanceEnabled&&t.fragment.code.add(Object(b.a)(i||(i=Object(p.a)(["\n    float sphereDistancePixels(vec4 sphere, vec3 pos) {\n      float dist = distance(sphere.xyz, pos) - sphere.w;\n      float width = fwidth(dist);\n      dist /= min(width, maxPixelDistance);\n      return abs(dist);\n    }\n    "])))),e.intersectsLineEnabled&&t.fragment.code.add(Object(b.a)(a||(a=Object(p.a)(["\n    float lineDistancePixels(vec3 start, vec3 dir, float radius, vec3 pos) {\n      float dist = length(cross(dir, pos - start)) / (length(pos) * perScreenPixelRatio);\n      return abs(dist) - radius;\n    }\n    "])))),(e.lineVerticalPlaneEnabled||e.intersectsLineEnabled)&&t.fragment.code.add(Object(b.a)(o||(o=Object(p.a)(["\n    bool pointIsWithinLine(vec3 pos, vec3 start, vec3 end) {\n      vec3 dir = end - start;\n      float t2 = dot(dir, pos - start);\n      float l2 = dot(dir, dir);\n      return t2 >= 0.0 && t2 <= l2;\n    }\n    "])))),t.fragment.code.add(Object(b.a)(s||(s=Object(p.a)(["\n  void main() {\n    vec3 pos;\n    vec3 normal;\n    float depthDiscontinuityAlpha;\n\n    if (!laserlineReconstructFromDepth(pos, normal, depthDiscontinuityAlpha)) {\n      discard;\n    }\n\n    vec4 color = vec4(0, 0, 0, 0);\n  "])))),e.heightManifoldEnabled&&t.fragment.code.add(Object(b.a)(c||(c=Object(p.a)(["\n    {\n      float heightManifoldAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, heightPlane.xyz)));\n      vec4 heightManifoldColor = laserlineProfile(planeDistancePixels(heightPlane, pos));\n      color = max(color, heightManifoldColor * heightManifoldAlpha);\n    }\n    "])))),e.pointDistanceEnabled&&t.fragment.code.add(Object(b.a)(l||(l=Object(p.a)(["\n    {\n      // distance to sphere\n      float pointDistanceSphereDistance = sphereDistancePixels(pointDistanceSphere, pos);\n      vec4 pointDistanceSphereColor = laserlineProfile(pointDistanceSphereDistance);\n      float pointDistanceSphereAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, normalize(pos - pointDistanceSphere.xyz))));\n\n      color = max(color, pointDistanceSphereColor * pointDistanceSphereAlpha);\n    }\n    "])))),e.lineVerticalPlaneEnabled&&t.fragment.code.add(Object(b.a)(u||(u=Object(p.a)(["\n    {\n      if (pointIsWithinLine(pos, lineVerticalStart, lineVerticalEnd)) {\n        float lineVerticalDistance = planeDistancePixels(lineVerticalPlane, pos);\n\n        vec4 lineVerticalColor = laserlineProfile(lineVerticalDistance);\n        float lineVerticalAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, lineVerticalPlane.xyz)));\n\n        color = max(color, lineVerticalColor * lineVerticalAlpha);\n      }\n    }\n    "])))),e.intersectsLineEnabled&&t.fragment.code.add(Object(b.a)(d||(d=Object(p.a)(["\n    {\n      if (pointIsWithinLine(pos, intersectsLineStart, intersectsLineEnd)) {\n        float intersectsLineDistance = lineDistancePixels(intersectsLineStart, intersectsLineDirection, intersectsLineRadius, pos);\n        vec4 intersectsLineColor = laserlineProfile(intersectsLineDistance);\n        float intersectsLineAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, 1.0 - abs(dot(normal, intersectsLineDirection)));\n\n        color = max(color, intersectsLineColor * intersectsLineAlpha);\n      }\n    }\n    "])))),t.fragment.code.add(Object(b.a)(f||(f=Object(p.a)(["\n    gl_FragColor = laserlineOutput(color * depthDiscontinuityAlpha);\n  }\n  "])))),t}var j=Object.freeze({__proto__:null,defaultAngleCutoff:g,build:O})},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(22)),u=(n(13),n(17),n(1)),d=n(8),f=(n(12),n(19),n(20),n(167)),p=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).creator=null,r.destroyer=null,r.outFields=null,r.type="custom",r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?Object(l.a)(this.outFields):null})}}]),n}(f.a);Object(c.a)([Object(u.b)()],p.prototype,"creator",void 0),Object(c.a)([Object(u.b)()],p.prototype,"destroyer",void 0),Object(c.a)([Object(u.b)()],p.prototype,"outFields",void 0),Object(c.a)([Object(u.b)({type:["custom"],readOnly:!0})],p.prototype,"type",void 0);var h=p=r=Object(c.a)([Object(d.a)("esri.popup.content.CustomContent")],p);t.a=h},function(e,t,n){"use strict";var r=n(2),i=n(3),a=function(){function e(t,n){Object(r.a)(this,e),this._context=t,this._desc=n,this._context.instanceCounter.increment(5,this);var i=this._context.gl;this.glName=i.createRenderbuffer(),this._context.bindRenderbuffer(this),i.renderbufferStorage(i.RENDERBUFFER,n.internalFormat,n.width,n.height)}return Object(i.a)(e,[{key:"descriptor",get:function(){return this._desc}},{key:"resize",value:function(e,t){var n=this._desc;if(n.width!==e||n.height!==t){n.width=e,n.height=t;var r=this._context.gl;this._context.bindRenderbuffer(this),r.renderbufferStorage(r.RENDERBUFFER,n.internalFormat,n.width,n.height)}}},{key:"dispose",value:function(){this._context&&(this._context.gl.deleteRenderbuffer(this.glName),this._context.instanceCounter.decrement(5,this),this._context=null)}}]),e}();t.a=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return c}));var r=n(14),i=(n(16),n(107)),a=(n(22),n(4)),o=n(68),s=(n(74),n(186));function c(e){return"declaredClass"in e}function l(e){return"declaredClass"in e}function u(e){return Object(a.j)(e)?null:c(e)?e:Object(o.a)(function(e){var t=e.spatialReference.toJSON();switch(e.type){case"point":return{x:e.x,y:e.y,z:e.z,m:e.m,spatialReference:t};case"polygon":var n=e.rings,r=e.hasZ,i=e.hasM;return{rings:d(n),hasZ:r,hasM:i,spatialReference:t};case"polyline":var a=e.paths,o=e.hasZ,s=e.hasM;return{paths:d(a),hasZ:o,hasM:s,spatialReference:t};case"extent":return{xmin:e.xmin,xmax:e.xmax,ymin:e.ymin,ymax:e.ymax,zmin:e.zmin,zmax:e.zmax,mmin:e.mmin,mmax:e.mmax,hasZ:e.hasZ,hasM:e.hasM,spatialReference:t};case"multipoint":var c=e.points,l=e.hasZ,u=e.hasM;return{points:p(c)?f(c):c,hasZ:l,hasM:u,spatialReference:t};default:return}}(e))}function d(e){return function(e){var t,n=Object(r.a)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(0!==i.length)return p(i)}}catch(a){n.e(a)}finally{n.f()}return!1}(e)?e.map((function(e){return f(e)})):e}function f(e){return e.map((function(e){return Object(i.n)(e)}))}function p(e){return e.length&&(Object(i.d)(e[0])||Object(i.e)(e[0]))}function h(e,t){if(!e)return null;var n;if(l(e)){if(null==t)return e.clone();if(l(t))return t.copy(e)}return null!=t?((n=t).x=e.x,n.y=e.y,n.spatialReference=e.spatialReference,e.hasZ?(n.z=e.z,n.hasZ=e.hasZ):(n.z=null,n.hasZ=!1),e.hasM?(n.m=e.m,n.hasM=!0):(n.m=null,n.hasM=!1)):(n=Object(s.d)(e.x,e.y,e.z,e.spatialReference),e.hasM&&(n.m=e.m,n.hasM=!0)),n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return l}));var r=n(7),i=n.n(r),a=n(35),o=n(15),s=n(4),c=n(54);function l(e){return u.apply(this,arguments)}function u(){return(u=Object(o.a)(i.a.mark((function e(t){var n,r,o,l,u,d,f,p,h,b=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=b.length>1&&void 0!==b[1]?b[1]:t.popupTemplate,Object(s.k)(n)){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,n.getRequiredFields(t.fields);case 5:if(r=e.sent,o=n.lastEditInfoEnabled,l=t.objectIdField,u=t.typeIdField,d=t.globalIdField,f=t.relationships,!r.includes("*")){e.next=13;break}return e.abrupt("return",["*"]);case 13:if(!o){e.next=19;break}return e.next=16,Object(c.o)(t);case 16:e.t0=e.sent,e.next=20;break;case 19:e.t0=[];case 20:return p=e.t0,h=Object(c.k)(t.fields,[].concat(Object(a.a)(r),Object(a.a)(p))),e.abrupt("return",(u&&h.push(u),h&&l&&Object(c.t)(t.fields,l)&&-1===h.indexOf(l)&&h.push(l),h&&d&&Object(c.t)(t.fields,d)&&-1===h.indexOf(d)&&h.push(d),f&&f.forEach((function(e){var n=e.keyField;h&&n&&Object(c.t)(t.fields,n)&&-1===h.indexOf(n)&&h.push(n)})),h));case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e,t){return e.popupTemplate?e.popupTemplate:Object(s.k)(t)&&t.defaultPopupTemplateEnabled&&Object(s.k)(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(52),i=n(67);function a(e){var t=Object(r.a)(e)+"/community/groups/"+e.id+"/updateUsers",n={authentication:e.authentication,params:{}};return"admin"===e.newMemberType?n.params.admins=e.users:n.params.users=e.users,Object(i.d)(t,n)}},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(22)),u=(n(13),n(17)),d=n(1),f=n(49),p=n(8),h=(n(12),n(19),n(20),n(39)),b=n(417),v=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).algorithm=null,r.fromColor=null,r.toColor=null,r.type="algorithmic",r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({fromColor:Object(l.a)(this.fromColor),toColor:Object(l.a)(this.toColor),algorithm:this.algorithm})}}]),n}(b.a);Object(c.a)([Object(f.a)({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],v.prototype,"algorithm",void 0),Object(c.a)([Object(d.b)({type:h.a,json:{type:[u.a],write:!0}})],v.prototype,"fromColor",void 0),Object(c.a)([Object(d.b)({type:h.a,json:{type:[u.a],write:!0}})],v.prototype,"toColor",void 0),Object(c.a)([Object(d.b)({type:["algorithmic"]})],v.prototype,"type",void 0);var y=v=r=Object(c.a)([Object(p.a)("esri.tasks.support.AlgorithmicColorRamp")],v);t.a=y},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(8),d=(n(12),n(19),n(20),n(28)),f=n(76),p=n(170),h=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).description=null,r.label=null,r.minValue=null,r.maxValue=0,r.symbol=null,r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}},{key:"getMeshHash",value:function(){var e=JSON.stringify(this.symbol);return"".concat(this.minValue,".").concat(this.maxValue,".").concat(e)}}]),n}(d.a);Object(c.a)([Object(l.b)({type:String,json:{write:!0}})],h.prototype,"description",void 0),Object(c.a)([Object(l.b)({type:String,json:{write:!0}})],h.prototype,"label",void 0),Object(c.a)([Object(l.b)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],h.prototype,"minValue",void 0),Object(c.a)([Object(l.b)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],h.prototype,"maxValue",void 0),Object(c.a)([Object(l.b)({types:f.i,json:{origins:{"web-scene":{types:f.j,write:p.b}},write:p.b}})],h.prototype,"symbol",void 0);var b=h=r=Object(c.a)([Object(u.a)("esri.renderers.support.ClassBreakInfo")],h);t.a=b},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(8),d=(n(12),n(19),n(20),n(405)),f=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).type="selection",r}return Object(a.a)(n,[{key:"clone",value:function(){return new r}}]),n}(d.a);Object(c.a)([Object(l.b)({type:["selection"]})],f.prototype,"type",void 0);var p=f=r=Object(c.a)([Object(u.a)("esri.layers.support.FeatureReductionSelection")],f);t.a=p},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(5),o=n(6),s=n(0),c=(n(16),n(22)),l=(n(13),n(17),n(1)),u=n(41),d=n(8),f=n(42),p=(n(12),n(19),n(20),n(28)),h=n(307),b=n(356),v=n(305),y=(n(154),n(459)),m=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).id=null,i.name=null,i.domains=null,i.templates=null,i}return Object(i.a)(n,[{key:"readDomains",value:function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];switch(r.type){case"range":t[n]=v.a.fromJSON(r);break;case"codedValue":t[n]=h.a.fromJSON(r);break;case"inherited":t[n]=b.a.fromJSON(r)}}return t}},{key:"writeDomains",value:function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]&&e[r].toJSON());Object(c.c)(n),t.domains=n}},{key:"readTemplates",value:function(e){return e&&e.map((function(e){return new y.a(e)}))}},{key:"writeTemplates",value:function(e,t){t.templates=e&&e.map((function(e){return e.toJSON()}))}}]),n}(p.a);Object(s.a)([Object(l.b)({json:{write:!0}})],m.prototype,"id",void 0),Object(s.a)([Object(l.b)({json:{write:!0}})],m.prototype,"name",void 0),Object(s.a)([Object(l.b)({json:{write:!0}})],m.prototype,"domains",void 0),Object(s.a)([Object(u.a)("domains")],m.prototype,"readDomains",null),Object(s.a)([Object(f.a)("domains")],m.prototype,"writeDomains",null),Object(s.a)([Object(l.b)({json:{write:!0}})],m.prototype,"templates",void 0),Object(s.a)([Object(u.a)("templates")],m.prototype,"readTemplates",null),Object(s.a)([Object(f.a)("templates")],m.prototype,"writeTemplates",null);var g=m=Object(s.a)([Object(d.a)("esri.layers.support.FeatureType")],m);t.a=g},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r,i,a,o,s,c,l,u,d=n(29),f=n(34),p=n(328);function h(e,t){var n=e;n.include(p.a),n.attributes.add("position","vec3"),n.attributes.add("normal","vec3"),n.attributes.add("auxpos1","vec4"),n.vertex.uniforms.add("proj","mat4"),n.vertex.uniforms.add("view","mat4"),n.vertex.uniforms.add("viewNormal","mat4"),n.vertex.uniforms.add("viewport","vec4"),n.vertex.uniforms.add("camPos","vec3"),n.vertex.uniforms.add("polygonOffset","float"),n.vertex.uniforms.add("cameraGroundRelative","float"),n.vertex.uniforms.add("pixelRatio","float"),n.vertex.uniforms.add("perDistancePixelRatio","float"),n.vertex.uniforms.add("uRenderTransparentlyOccludedHUD","float"),t.verticalOffsetEnabled&&n.vertex.uniforms.add("verticalOffset","vec4"),t.screenSizePerspectiveEnabled&&n.vertex.uniforms.add("screenSizePerspectiveAlignment","vec4"),n.vertex.uniforms.add("hudVisibilityTexture","sampler2D"),n.vertex.constants.add("smallOffsetAngle","float",.984807753012208),n.vertex.code.add(Object(f.a)(r||(r=Object(d.a)(["\n    struct ProjectHUDAux {\n      vec3 posModel;\n      vec3 posView;\n      vec3 vnormal;\n\n      float distanceToCamera;\n      float absCosAngle;\n    };\n  "])))),n.vertex.code.add(Object(f.a)(i||(i=Object(d.a)(["\n    float applyHUDViewDependentPolygonOffset(float pointGroundDistance, float absCosAngle, inout vec3 posView) {\n      float pointGroundSign = sign(pointGroundDistance);\n\n      if (pointGroundSign == 0.0) {\n        pointGroundSign = cameraGroundRelative;\n      }\n\n      // cameraGroundRelative is -1 if camera is below ground, 1 if above ground\n      // groundRelative is 1 if both camera and symbol are on the same side of the ground, -1 otherwise\n      float groundRelative = cameraGroundRelative * pointGroundSign;\n\n      // view angle dependent part of polygon offset emulation\n      // we take the absolute value because the sign that is dropped is\n      // instead introduced using the ground-relative position of the symbol and the camera\n      if (polygonOffset > .0) {\n        float cosAlpha = clamp(absCosAngle, 0.01, 1.0);\n\n        float tanAlpha = sqrt(1.0 - cosAlpha * cosAlpha) / cosAlpha;\n        float factor = (1.0 - tanAlpha / viewport[2]);\n\n        // same side of the terrain\n        if (groundRelative > 0.0) {\n          posView *= factor;\n        }\n        // opposite sides of the terrain\n        else {\n          posView /= factor;\n        }\n      }\n\n      return groundRelative;\n    }\n  "])))),t.isDraped||n.vertex.code.add(Object(f.a)(a||(a=Object(d.a)(["\n    void applyHUDVerticalGroundOffset(vec3 normalModel, inout vec3 posModel, inout vec3 posView) {\n      float distanceToCamera = length(posView);\n\n      // Compute offset in world units for a half pixel shift\n      float pixelOffset = distanceToCamera * perDistancePixelRatio * 0.5;\n\n      // Apply offset along normal in the direction away from the ground surface\n      vec3 modelOffset = normalModel * cameraGroundRelative * pixelOffset;\n\n      // Apply the same offset also on the view space position\n      vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;\n\n      posModel += modelOffset;\n      posView += viewOffset;\n    }\n  "])))),n.vertex.code.add(Object(f.a)(o||(o=Object(d.a)(["\n    vec4 projectPositionHUD(out ProjectHUDAux aux) {\n      // centerOffset is in view space and is used to implement world size offsetting\n      // of labels with respect to objects. It also pulls the label towards the viewer\n      // so that the label is visible in front of the object.\n      vec3 centerOffset = auxpos1.xyz;\n\n      // The pointGroundDistance is the distance of the geometry to the ground and is\n      // negative if the point is below the ground, or positive if the point is above\n      // ground.\n      float pointGroundDistance = auxpos1.w;\n\n      aux.posModel = position;\n      aux.posView = (view * vec4(aux.posModel, 1.0)).xyz;\n      aux.vnormal = normal;\n      ","\n\n      // Screen sized offset in world space, used for example for line callouts\n      // Note: keep this implementation in sync with the CPU implementation, see\n      //   - MaterialUtil.verticalOffsetAtDistance\n      //   - HUDMaterial.applyVerticalOffsetTransformation\n\n      aux.distanceToCamera = length(aux.posView);\n\n      vec3 viewDirObjSpace = normalize(camPos - aux.posModel);\n      float cosAngle = dot(aux.vnormal, viewDirObjSpace);\n\n      aux.absCosAngle = abs(cosAngle);\n\n      ","\n\n      ","\n\n      ","\n\n      float groundRelative = applyHUDViewDependentPolygonOffset(pointGroundDistance, aux.absCosAngle, aux.posView);\n\n      ","\n\n      vec4 posProj = proj * vec4(aux.posView, 1.0);\n\n      ","\n\n      ","\n\n      // constant part of polygon offset emulation\n      posProj.z -= groundRelative * polygonOffset * posProj.w;\n      return posProj;\n    }\n  "])),t.isDraped?"":"applyHUDVerticalGroundOffset(aux.vnormal, aux.posModel, aux.posView);",t.screenSizePerspectiveEnabled&&(t.verticalOffsetEnabled||1===t.screenCenterOffsetUnitsEnabled)?"vec4 perspectiveFactor = screenSizePerspectiveScaleFactor(aux.absCosAngle, aux.distanceToCamera, screenSizePerspectiveAlignment);":"",t.verticalOffsetEnabled?t.screenSizePerspectiveEnabled?"float verticalOffsetScreenHeight = applyScreenSizePerspectiveScaleFactorFloat(verticalOffset.x, perspectiveFactor);":"float verticalOffsetScreenHeight = verticalOffset.x;":"",t.verticalOffsetEnabled?Object(f.a)(s||(s=Object(d.a)(["\n            float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * aux.distanceToCamera, verticalOffset.z, verticalOffset.w);\n            vec3 modelOffset = aux.vnormal * worldOffset;\n            aux.posModel += modelOffset;\n            vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;\n            aux.posView += viewOffset;\n            // Since we elevate the object, we need to take that into account\n            // in the distance to ground\n            pointGroundDistance += worldOffset;"]))):"",1!==t.screenCenterOffsetUnitsEnabled?Object(f.a)(c||(c=Object(d.a)(["\n            // Apply x/y in view space, but z in screen space (i.e. along posView direction)\n            aux.posView += vec3(centerOffset.x, centerOffset.y, 0.0);\n\n            // Same material all have same z != 0.0 condition so should not lead to\n            // branch fragmentation and will save a normalization if it's not needed\n            if (centerOffset.z != 0.0) {\n              aux.posView -= normalize(aux.posView) * centerOffset.z;\n            }\n          "]))):"",1===t.screenCenterOffsetUnitsEnabled?t.screenSizePerspectiveEnabled?"float centerOffsetY = applyScreenSizePerspectiveScaleFactorFloat(centerOffset.y, perspectiveFactor);":"float centerOffsetY = centerOffset.y;":"",1===t.screenCenterOffsetUnitsEnabled?"posProj.xy += vec2(centerOffset.x, centerOffsetY) * pixelRatio * 2.0 / viewport.zw * posProj.w;":"")),n.vertex.code.add(Object(f.a)(l||(l=Object(d.a)(["\n    bool testVisibilityHUD(vec4 posProj) {\n      // For occlusion testing, use the nearest pixel center to avoid\n      // subpixel filtering messing up the color we use to test for\n      vec4 posProjCenter = alignToPixelCenter(posProj, viewport.zw);\n\n      vec4 occlusionPixel = texture2D(hudVisibilityTexture, .5 + .5 * posProjCenter.xy / posProjCenter.w);\n\n      // the red pixel here indicates that the occlusion pixel passed the depth test against solid geometry and was written\n      // the green pixel stores transparency of transparent geometry (1.0 -> fully transparent)\n      // note that we also check against green == 0.0, i.e. transparent geometry that has opaque parts\n\n      // thus we render visible pixels that are occluded by semi-transparent (but not fully transparent!) geometry here\n      if (uRenderTransparentlyOccludedHUD > 0.5) {\n        // multiplying by uRenderTransparentlyOccludedHUD allows us to ignore the second condition if\n        // uRenderTransparentlyOccludedHUD = 0.75\n        return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g * uRenderTransparentlyOccludedHUD < 1.0;\n      }\n\n      // and visible pixels that are not occluded by semi-transparent geometry here\n      return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g == 1.0;\n    }\n  "]))))}(u=h||(h={})).bindUniforms=function(e,t){e.setUniform1f("uRenderTransparentlyOccludedHUD",0===t.renderTransparentlyOccludedHUD?1:1===t.renderTransparentlyOccludedHUD?0:.75)},u.bindVisibilityTexture=function(e,t,n){t.setUniform1i("hudVisibilityTexture",4),e.bindTexture(n.hudVisibilityTexture,4),e.setActiveTexture(0)}},function(e,t,n){"use strict";n.r(t),n.d(t,"fetchStyle",(function(){return O})),n.d(t,"fetchSymbolFromStyle",(function(){return w})),n.d(t,"resolveWebStyleSymbol",(function(){return j})),n.d(t,"styleNameFromItem",(function(){return k}));var r=n(10),i=n(14),a=n(18),o=n(12),s=n(128),c=n(62),l=n(233),u=n(109),d=n(370),f=n(363),p=n(76),h=n(170),b=n(541),v=n(16);function y(e){return!!Object(v.a)("enable-feature:".concat(e))}var m={};function g(e,t,n){var r,o=t.portal||u.a.getDefault(),s="".concat(o.url," - ").concat(o.user&&o.user.username," - ").concat(e);return m[s]||(m[s]=function(e,t,n){return t.load(n).then((function(){var r=new l.a({disableExtraQuery:!0,query:"owner:".concat(S," AND type:").concat(T,' AND typekeywords:"').concat(e,'"')});return t.queryItems(r,n)})).then((function(t){var r=t.results,o=null,s=e.toLowerCase();if(r&&Array.isArray(r)){var c,l=Object(i.a)(r);try{for(l.s();!(c=l.n()).done;){var u=c.value;if(u.typeKeywords.some((function(e){return e.toLowerCase()===s}))&&u.type===T&&u.owner===S){o=u;break}}}catch(d){l.e(d)}finally{l.f()}}if(!o)throw new a.a("symbolstyleutils:style-not-found","The style '".concat(e,"' could not be found"),{styleName:e});return o.load(n)}))}(e,o,n).then((function(e){return r=e,e.fetchData()})).then((function(t){return{data:t,baseUrl:r.itemUrl,styleName:e}}))),m[s]}function O(e,t,n){return e.styleUrl?function(e,t){return x(e,t).then((function(t){return{data:t.data,baseUrl:Object(o.F)(e),styleUrl:e}}))}(e.styleUrl,n):e.styleName?g(e.styleName,t,n):Promise.reject(new a.a("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function j(e,t,n,r){return e.name?e.styleName&&"Esri2DPointSymbolsStyle"===e.styleName?function(e,t,n){var r=E.replace(/\{SymbolName\}/gi,e.name);return x(r,n).then((function(e){var n=_(e.data);return Object(h.a)(n,{portal:t.portal,url:Object(o.J)(Object(o.F)(r)),origin:"portal-item"})}))}(e,t,r):O(e,t,r).then((function(i){return w(i,e.name,t,n,r)})):Promise.reject(new a.a("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function w(e,t,n,r,c){var l=e.data,u={portal:n.portal,url:Object(o.J)(e.baseUrl),origin:"portal-item"},v=l.items.find((function(e){return e.name===t}));if(!v){var m="The symbol name '".concat(t,"' could not be found");return Promise.reject(new a.a("symbolstyleutils:symbol-name-not-found",m,{symbolName:t}))}var g=Object(s.a)(function(e,t){if("cimRef"===t)return e.cimRef;if(e.formatInfos&&!y("force-wosr")){var n,r=Object(i.a)(e.formatInfos);try{for(r.s();!(n=r.n()).done;){var a=n.value;if("gltf"===a.type)return a.href}}catch(o){r.e(o)}finally{r.f()}}return e.webRef}(v,r),u),O=v.thumbnail&&v.thumbnail.href,j=v.thumbnail&&v.thumbnail.imageData;Object(b.b)()&&(g=Object(b.a)(g),O=Object(b.a)(O));var w={portal:n.portal,url:Object(o.J)(Object(o.F)(g)),origin:"portal-item"};return x(g,c).then((function(i){var a="cimRef"===r?_(i.data):i.data,o=Object(h.a)(a,w);if(o&&Object(p.c)(o)){if(O){var c=Object(s.a)(O,u);o.thumbnail=new f.a({url:c})}else j&&(o.thumbnail=new f.a({url:"data:image/png;base64,".concat(j)}));e.styleUrl?o.styleOrigin=new d.a({portal:n.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(o.styleOrigin=new d.a({portal:n.portal,styleName:e.styleName,name:t}))}return o}))}function _(e){return null===e||"CIMSymbolReference"===e.type?e:{type:"CIMSymbolReference",symbol:e}}function k(e){var t,n=Object(i.a)(e.typeKeywords);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(/^Esri.*Style$/.test(r)&&"Esri Style"!==r)return r}}catch(a){n.e(a)}finally{n.f()}}function x(e,t){var n=Object(r.a)({responseType:"json",query:{f:"json"}},t);return Object(c.default)(Object(o.C)(e),n)}var S="esri_en",T="Style",E="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json"},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(361);function i(e,t){return Array.isArray(t)&&t[0]&&Array.isArray(t[0])?t.map((function(t){return i(e,t)})).join("&"):encodeURIComponent(e)+"="+encodeURIComponent(t)}function a(e){var t=Object(r.a)(e);return Object.keys(t).map((function(e){return i(e,t[e])})).join("&")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(2),i=n(3),a=n(53),o=n(50),s=n(5),c=n(6),l=n(4),u=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments))._set=new Set,e}return Object(i.a)(n,[{key:"destroy",value:function(){Object(a.a)(Object(o.a)(n.prototype),"destroy",this).call(this),this._set=Object(l.o)(this._set)}},{key:"acquire",value:function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var s=(e=Object(a.a)(Object(o.a)(n.prototype),"acquire",this)).call.apply(e,[this].concat(r));return this._set.delete(s),s}},{key:"release",value:function(e){e&&!this._set.has(e)&&(Object(a.a)(Object(o.a)(n.prototype),"release",this).call(this,e),this._set.add(e))}},{key:"_dispose",value:function(e){this._set.delete(e),Object(a.a)(Object(o.a)(n.prototype),"_dispose",this).call(this,e)}}]),n}(n(145).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(22),i=n(100),a=n(4),o=n(369),s=n(18),c=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile"]),l=new Set(["csv","feature","geo-rss","group","imagery","imagery-tile","kml","map-image","map-notes","tile","unknown","unsupported","vector-tile","web-tile"]);function u(e){return!("feature"!==e.type||e.url||!e.source||"memory"!==e.source.type)}function d(e,t){if(t.restrictedWebMapWriting){var n=function(e){return"basemap"===e.layerContainerType?c:"operational-layers"===e.layerContainerType?l:null}(t);return!Object(a.k)(n)||n.has(e.type)&&!u(e)}return!0}function f(e,t){"maxScale"in e&&(t.maxScale=Object(o.b)(e.maxScale)),"minScale"in e&&(t.minScale=Object(o.b)(e.minScale))}function p(e,t){if(function(e,t){if(u(e)){var n=Object(i.b)("featureCollection.layers",t),r=n&&n[0]&&n[0].layerDefinition;r&&f(e,r)}else"stream"===e.type?f(e,t.layerDefinition=t.layerDefinition||{}):"group"!==e.type&&f(e,t)}(e,t),"blendMode"in e&&(t.blendMode=e.blendMode,"normal"===t.blendMode&&delete t.blendMode),t.opacity=Object(o.b)(e.opacity),t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&"wmts"!==e.type)if(u(e)){var n=t.featureCollection;n&&(n.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function h(e,t,n){if(!("write"in e)||!e.write)return n&&n.messages&&n.messages.push(new s.a("layer:unsupported","Layers (".concat(e.title,", ").concat(e.id,") of type '").concat(e.declaredClass,"' cannot be persisted"),{layer:e})),null;if(d(e,n)){var i={};return e.write(i,n)?i:null}return Object(a.k)(t)&&p(e,t=Object(r.a)(t)),t}},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(4)),u=(n(13),n(17),n(1)),d=n(8),f=(n(12),n(19),n(20),n(28)),p=n(39),h=n(38),b=n(127),v=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).color=new p.a([0,0,0,1]),e.size=Object(h.h)(1),e.stipplePattern=null,e.stippleOffColor=null,e}return Object(a.a)(n,[{key:"clone",value:function(){return new r({color:Object(l.k)(this.color)?this.color.clone():null,size:this.size,stipplePattern:this.stipplePattern?this.stipplePattern.slice():null,stippleOffColor:this.stippleOffColor?this.stippleOffColor.clone():null})}}]),n}(f.a);Object(c.a)([Object(u.b)(b.a)],v.prototype,"color",void 0),Object(c.a)([Object(u.b)(b.b)],v.prototype,"size",void 0),Object(c.a)([Object(u.b)(b.c)],v.prototype,"stipplePattern",void 0),Object(c.a)([Object(u.b)({type:p.a})],v.prototype,"stippleOffColor",void 0);var y=v=r=Object(c.a)([Object(d.a)("esri.symbols.support.Symbol3DOutline")],v);t.a=y},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(14),i=n(392);function a(e,t,n){if(n&&n.features&&n.hasZ){var a=Object(i.a)(n.geometryType,t,e.outSpatialReference);if(a){var o,s=Object(r.a)(n.features);try{for(s.s();!(o=s.n()).done;){a(o.value.geometry)}}catch(c){s.e(c)}finally{s.f()}}}}},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(8),d=(n(12),n(19),n(20),n(28)),f=n(76),p=n(170),h=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).description=null,r.label=null,r.symbol=null,r.value=null,r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}},{key:"getMeshHash",value:function(){var e=JSON.stringify(this.symbol&&this.symbol.toJSON());return"".concat(this.value,".").concat(e)}}]),n}(d.a);Object(c.a)([Object(l.b)({type:String,json:{write:!0}})],h.prototype,"description",void 0),Object(c.a)([Object(l.b)({type:String,json:{write:!0}})],h.prototype,"label",void 0),Object(c.a)([Object(l.b)({types:f.i,json:{origins:{"web-scene":{types:f.j,write:p.b}},write:p.b}})],h.prototype,"symbol",void 0),Object(c.a)([Object(l.b)({type:[String,Number],json:{type:String,write:{writer:function(e,t){t.value=null==e?void 0:e.toString()}}}})],h.prototype,"value",void 0);var b=h=r=Object(c.a)([Object(u.a)("esri.renderers.support.UniqueValueInfo")],h);t.a=b},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(5),o=n(6),s=n(0),c=(n(16),n(22)),l=(n(13),n(17),n(1)),u=n(47),d=n(8),f=n(42),p=(n(12),n(19),n(20),n(28)),h=new u.a({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"}),b=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).name=null,i.description=null,i.drawingTool=null,i.prototype=null,i.thumbnail=null,i}return Object(i.a)(n,[{key:"writeDrawingTool",value:function(e,t){t.drawingTool=h.toJSON(e)}},{key:"writePrototype",value:function(e,t){t.prototype=Object(c.c)(Object(c.a)(e),!0)}},{key:"writeThumbnail",value:function(e,t){t.thumbnail=Object(c.c)(Object(c.a)(e))}}]),n}(p.a);Object(s.a)([Object(l.b)({json:{write:!0}})],b.prototype,"name",void 0),Object(s.a)([Object(l.b)({json:{write:!0}})],b.prototype,"description",void 0),Object(s.a)([Object(l.b)({json:{read:h.read,write:h.write}})],b.prototype,"drawingTool",void 0),Object(s.a)([Object(f.a)("drawingTool")],b.prototype,"writeDrawingTool",null),Object(s.a)([Object(l.b)({json:{write:!0}})],b.prototype,"prototype",void 0),Object(s.a)([Object(f.a)("prototype")],b.prototype,"writePrototype",null),Object(s.a)([Object(l.b)({json:{write:!0}})],b.prototype,"thumbnail",void 0),Object(s.a)([Object(f.a)("thumbnail")],b.prototype,"writeThumbnail",null);var v=b=Object(s.a)([Object(d.a)("esri.layers.support.FeatureTemplate")],b);t.a=v},function(e,t,n){"use strict";var r=n(2),i=n(5),a=n(6),o=n(0),s=(n(16),n(13),n(17),n(1)),c=n(8),l=(n(12),n(19),n(20),function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).visible=!1,i}return n}(n(544).a));Object(o.a)([Object(s.b)()],l.prototype,"visible",void 0);var u=l=Object(o.a)([Object(c.a)("esri.widgets.CompassViewModel")],l);t.a=u},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return a}));for(var r=n(16),i=n(111),a=Object(r.a)("mac")?"Meta":"Ctrl",o={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"},s=48;s<58;s++)o[s]=String.fromCharCode(s);for(var c=1;c<25;c++)o[111+c]="F".concat(c);for(var l=65;l<91;l++)o[l]=[String.fromCharCode(l+32),String.fromCharCode(l)];function u(e){if(void 0!==e.key)return Object(i.a)(e);var t=o[e.keyCode];return Array.isArray(t)?e.shiftKey?t[1]:t[0]:t}function d(e){switch(e){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p}));var r=n(16),i=n(18),a=n(115),o=n(62),s=n(199),c=(n(182),n(311)),l=n(213),u=Object(c.a)();function d(e,t,n){var r=Math.ceil(t[0]),i=Math.ceil(t[1]);if(!e.some((function(e){return!!e.length})))return null;var a=n&&n.node||document.createElement("div");return null!=n.opacity&&(a.style.opacity=n.opacity.toString()),u.append(a,l.g.bind(null,e,r,i,n)),a}function f(e,t,n,r,i){switch(i){case"multiply":e[t+0]*=n[0],e[t+1]*=n[1],e[t+2]*=n[2],e[t+3]*=n[3];break;default:var a=Object(s.b)({r:e[t+0],g:e[t+1],b:e[t+2]});a.h=r.h,a.s=r.s,a.v=a.v/100*r.v;var o=Object(s.e)(a);e[t+0]=o.r,e[t+1]=o.g,e[t+2]=o.b,e[t+3]*=n[3]}}function p(e,t,n,c,l){return(u=e,d=t,p=l,u?Object(o.default)(u,{responseType:"image"}).then((function(e){var t=e.data,n=t.width,r=t.height,i=n/r,a=d;if(p){var o=Math.max(n,r);a=Math.min(a,o)}return{image:t,width:i<=1?Math.ceil(a*i):a,height:i<=1?a:Math.ceil(a/i)}})):Promise.reject(new i.a("renderUtils: imageDataSize","href not provided."))).then((function(i){var o=i.width?i.width:t,l=i.height?i.height:t;if(i.image&&function(e,t){return!(!e||"ignore"===t)&&("multiply"!==t||255!==e.r||255!==e.g||255!==e.b||1!==e.a)}(n,c)){var u=i.image.width,d=i.image.height;(Object(r.a)("edge")||Object(r.a)("ie"))&&/\.svg$/i.test(e)&&(u-=1,d-=1);var p=function(e,t){e=Math.ceil(e),t=Math.ceil(t);var n=document.createElement("canvas");n.width=e,n.height=t,n.style.width=e+"px",n.style.height=t+"px";var r=n.getContext("2d");return r.clearRect(0,0,e,t),r}(o,l);p.drawImage(i.image,0,0,u,d,0,0,o,l);for(var h=p.getImageData(0,0,o,l),b=[n.r/255,n.g/255,n.b/255,n.a],v=Object(s.b)(n),y=0;y<h.data.length;y+=4)f(h.data,y,b,v,c);p.putImageData(h,0,0),e=p.canvas.toDataURL("image/png")}else{var m=a.b&&a.b.findCredential(e);if(m&&m.token){var g=-1===e.indexOf("?")?"?":"&";e="".concat(e).concat(g,"token=").concat(m.token)}}return{url:e,width:o,height:l}})).catch((function(){return{url:e,width:t,height:t}}));var u,d,p}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r}));"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e||"undefined"!=typeof self&&self;function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return a(null==t&&n.path)}},n.exports),n.exports}function a(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}}).call(this,n(433))},function(e,t,n){"use strict";var r=n(14),i=n(2),a=n(3);function o(e){return"date"===e.type||"esriFieldTypeDate"===e.type}var s=function(){function e(t){if(Object(i.a)(this,e),this.fields=t,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this.dateFields=[],t){var n,a=[],s=Object(r.a)(t);try{for(s.s();!(n=s.n()).done;){var l=n.value,u=l&&l.name;if(u){var d=c(u);this._fieldsMap.set(u,l),this._fieldsMap.set(d,l),a.push(d),o(l)&&(this.dateFields.push(l),this._dateFieldsSet.add(l))}}}catch(f){s.e(f)}finally{s.f()}a.sort(),this.uid=a.join(",")}}return Object(a.a)(e,[{key:"destroy",value:function(){this._fieldsMap.clear()}},{key:"has",value:function(e){return null!=this.get(e)}},{key:"get",value:function(e){return null!=e?this._fieldsMap.get(e)||this._fieldsMap.get(c(e)):void 0}},{key:"isDateField",value:function(e){return this._dateFieldsSet.has(this.get(e))}},{key:"normalizeFieldName",value:function(e){var t=this.get(e);if(t)return t.name}}]),e}();function c(e){return e.toLowerCase().trim()}t.a=s},function(e,t,n){"use strict";var r,i=n(485);t.a=function(){return r||(r=function(){var e={available:!1,version:0,majorPerformanceCaveat:!1,maxTextureSize:0,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1,supportsInstancedArrays:!1,supportsTextureFloat:!1,supportsColorBufferFloat:!1};if(void 0===typeof WebGLRenderingContext)return e;var t=document.createElement("canvas");if(!t)return e;var n=Object(i.a)(t,{failIfMajorPerformanceCaveat:!0},"webgl");if(n||(n=Object(i.a)(t,{},"webgl"))&&(e.majorPerformanceCaveat=!0),!n)return e;var r=n.getParameter(n.VERSION);if(!r)return e;var a=r.match(/^WebGL\s+([\d.]*)/);if(a){var o=parseFloat(a[1]);e.available=o>=.94;var s=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);s&&(e.supportsHighPrecisionFragment=s.precision>0),e.supportsVertexShaderSamplers=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0,e.supportsElementIndexUint=null!==n.getExtension("OES_element_index_uint"),e.supportsStandardDerivatives=null!==n.getExtension("OES_standard_derivatives"),e.supportsInstancedArrays=null!==n.getExtension("ANGLE_instanced_arrays"),e.supportsTextureFloat=null!==n.getExtension("OES_texture_float"),e.supportsColorBufferFloat=null!==n.getExtension("WEBGL_color_buffer_float")&&null!==n.getExtension("EXT_float_blend")}return e.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),e.version=function(){if(void 0===typeof WebGL2RenderingContext)return!1;var e=document.createElement("canvas");return!!e&&!!Object(i.a)(e,{},"webgl2")}()?2:1,e}()),r}},function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return v}));var r=n(26),i=n(14),a=n(4),o=n(90),s=n(36),c=n(40),l=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function u(e){return e instanceof s.a}function d(e){return e instanceof c.a?Object.keys(e.items):u(e)?Object(o.a)(e).keys():e?Object.keys(e):[]}function f(e,t){return e instanceof c.a?e.items[t]:e[t]}function p(e){return e?e.declaredClass:null}function h(e,t){var n=e.diff;if(n&&"function"==typeof n)return n(e,t);var o=d(e),s=d(t);if(0!==o.length||0!==s.length){if(!o.length||!s.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};var c,b=s.filter((function(e){return-1===o.indexOf(e)})),v=o.filter((function(e){return-1===s.indexOf(e)})),y=o.filter((function(n){return s.indexOf(n)>-1&&f(e,n)!==f(t,n)})).concat(b,v).sort(),m=p(e);if(m&&l.indexOf(m)>-1&&y.length)return{type:"complete",oldValue:e,newValue:t};var g,O=u(e)&&u(t),j=Object(i.a)(y);try{for(j.s();!(g=j.n()).done;){var w=g.value,_=f(e,w),k=f(t,w),x=void 0;(O||"function"!=typeof _&&"function"!=typeof k)&&_!==k&&(null==_&&null==k||(x=n&&n[w]&&"function"==typeof n[w]?n[w](_,k):"object"==typeof _&&"object"==typeof k&&p(_)===p(k)?h(_,k):{type:"complete",oldValue:_,newValue:k},Object(a.k)(x)&&(Object(a.k)(c)?c.diff[w]=x:c={type:"partial",diff:Object(r.a)({},w,x)})))}}catch(S){j.e(S)}finally{j.f()}return c}}function b(e,t){if(Object(a.j)(e))return!1;var n,r=t.split("."),o=e,s=Object(i.a)(r);try{for(s.s();!(n=s.n()).done;){var c=n.value;if("complete"===o.type)return!0;if("partial"!==o.type)return!1;var l=o.diff[c];if(!l)return!1;o=l}}catch(u){s.e(u)}finally{s.f()}return!0}function v(e,t){var n,r=Object(i.a)(t);try{for(r.s();!(n=r.n()).done;){if(b(e,n.value))return!0}}catch(a){r.e(a)}finally{r.f()}return!1}function y(e,t){if("function"!=typeof e&&"function"!=typeof t&&(e||t))return!e||!t||"object"==typeof e&&"object"==typeof t&&p(e)!==p(t)?{type:"complete",oldValue:e,newValue:t}:h(e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return O}));var r=n(31),i=n(14),a=n(153);function o(e,t){return Object(a.e)(e,t)}function s(e,t){var n,r,i,a=e.hasZ&&t.hasZ;if(e.xmin<=t.xmin){if(n=t.xmin,e.xmax<n)return!1}else if(n=e.xmin,t.xmax<n)return!1;if(e.ymin<=t.ymin){if(r=t.ymin,e.ymax<r)return!1}else if(r=e.ymin,t.ymax<r)return!1;if(a&&t.hasZ)if(e.zmin<=t.zmin){if(i=t.zmin,e.zmax<i)return!1}else if(i=e.zmin,t.zmax<i)return!1;return!0}function c(e,t){var n,r=t.points,o=t.hasZ?a.b:a.a,s=Object(i.a)(r);try{for(s.s();!(n=s.n()).done;){if(o(e,n.value))return!0}}catch(c){s.e(c)}finally{s.f()}return!1}var l=[0,0],u=[0,0],d=[0,0],f=[0,0],p=[l,u,d,f],h=[[d,l],[l,u],[u,f],[f,d]];function b(e,t){l[0]=e.xmin,l[1]=e.ymax,u[0]=e.xmax,u[1]=e.ymax,d[0]=e.xmin,d[1]=e.ymin,f[0]=e.xmax,f[1]=e.ymin;var n,r=Object(i.a)(p);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(Object(a.f)(t,o))return!0}}catch(O){r.e(O)}finally{r.f()}var s,c=Object(i.a)(t.rings);try{for(c.s();!(s=c.n()).done;){var b=s.value;if(b.length){var v=b[0];if(Object(a.a)(e,v))return!0;for(var y=1;y<b.length;y++){var m=b[y];if(Object(a.a)(e,m)||g(v,m,h))return!0;v=m}}}}catch(O){c.e(O)}finally{c.f()}return!1}function v(e,t){l[0]=e.xmin,l[1]=e.ymax,u[0]=e.xmax,u[1]=e.ymax,d[0]=e.xmin,d[1]=e.ymin,f[0]=e.xmax,f[1]=e.ymin;var n,r=t.paths,o=Object(i.a)(r);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(r.length){var c=s[0];if(Object(a.a)(e,c))return!0;for(var p=1;p<s.length;p++){var b=s[p];if(Object(a.a)(e,b)||g(c,b,h))return!0;c=b}}}}catch(v){o.e(v)}finally{o.f()}return!1}var y=[0,0];function m(e){for(var t=0;t<e.length;t++){for(var n=e[t],r=0;r<n.length-1;r++)for(var i=n[r],a=n[r+1],o=t+1;o<e.length;o++)for(var s=0;s<e[o].length-1;s++){var c=e[o][s],l=e[o][s+1];if(O(i,a,c,l,y)&&!(y[0]===i[0]&&y[1]===i[1]||y[0]===c[0]&&y[1]===c[1]||y[0]===a[0]&&y[1]===a[1]||y[0]===l[0]&&y[1]===l[1]))return!0}var u=n.length;if(!(u<=4))for(var d=0;d<u-3;d++){var f=u-1;0===d&&(f=u-2);for(var p=n[d],h=n[d+1],b=d+2;b<f;b++){var v=n[b],m=n[b+1];if(O(p,h,v,m,y)&&!(y[0]===p[0]&&y[1]===p[1]||y[0]===v[0]&&y[1]===v[1]||y[0]===h[0]&&y[1]===h[1]||y[0]===m[0]&&y[1]===m[1]))return!0}}}return!1}function g(e,t,n){for(var r=0;r<n.length;r++)if(O(e,t,n[r][0],n[r][1]))return!0;return!1}function O(e,t,n,i,a){var o=Object(r.a)(e,2),s=o[0],c=o[1],l=Object(r.a)(t,2),u=l[0],d=l[1],f=Object(r.a)(n,2),p=f[0],h=f[1],b=Object(r.a)(i,2),v=b[0]-p,y=s-p,m=u-s,g=b[1]-h,O=c-h,j=d-c,w=g*m-v*j;if(0===w)return!1;var _=(v*O-g*y)/w,k=(m*O-j*y)/w;return _>=0&&_<=1&&k>=0&&k<=1&&(a&&(a[0]=s+_*(u-s),a[1]=c+_*(d-c)),!0)}function j(e){switch(e){case"esriGeometryEnvelope":case"extent":return s;case"esriGeometryMultipoint":case"multipoint":return c;case"esriGeometryPoint":case"point":return o;case"esriGeometryPolygon":case"polygon":return b;case"esriGeometryPolyline":case"polyline":return v;case"mesh":return s}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(2),i=n(3),a=n(5),o=n(6),s=n(0),c=(n(16),n(13),n(17),n(1)),l=n(8),u=(n(12),n(19),n(20),function(e){var t=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).refreshInterval=0,e}return Object(i.a)(n,[{key:"refresh",value:function(){this.emit("refresh")}}]),n}(e);return Object(s.a)([Object(c.b)({type:Number,cast:function(e){return e>=.1?e:e<=0?0:.1},json:{write:!0,origins:{"web-document":{write:!0}}}})],t.prototype,"refreshInterval",void 0),t=Object(s.a)([Object(l.a)("esri.layers.mixins.RefreshableLayer")],t)})},function(e,t,n){"use strict";t.a=function(e){return window.WebGL2RenderingContext&&e instanceof window.WebGL2RenderingContext}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f}));var r=n(347);var i=[];function a(e,t,n,r){return{xmin:e,ymin:t,xmax:n,ymax:r}}function o(e,t,n,r,i,a){return{xmin:e,ymin:t,zmin:n,xmax:r,ymax:i,zmax:a}}function s(e,t,n,r,i,a){return{xmin:e,ymin:t,mmin:n,xmax:r,ymax:i,mmax:a}}function c(e,t,n,r,i,a,o,s){return{xmin:e,ymin:t,zmin:n,mmin:r,xmax:i,ymax:a,zmax:o,mmax:s}}function l(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t?n?c(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):o(e[0],e[1],e[2],e[3],e[4],e[5]):n?s(e[0],e[1],e[2],e[3],e[4],e[5]):a(e[0],e[1],e[2],e[3])}function u(e){return e?function(e){return void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax}(e)?e:function(e){return void 0!==e.x&&void 0!==e.y}(e)?function(e){var t=e.x,n=e.y,r=e.z,i=e.m,l=null!=i;return null!=r?l?c(t,n,r,i,t,n,r,i):o(t,n,r,t,n,r):l?s(t,n,i,t,n,i):a(t,n,t,n)}(e):function(e){return void 0!==e.rings}(e)?d(e):function(e){return void 0!==e.paths}(e)?f(e):function(e){return void 0!==e.points}(e)?function(e){var t=e.hasZ,n=e.hasM,a=e.points;return l(Object(r.c)(i,a,t,n),t,n)}(e):null:null}function d(e){var t=e.hasZ,n=e.hasM,a=e.rings,o=Object(r.d)(i,a,t,n);return o?l(o,t,n):null}function f(e){var t=e.hasZ,n=e.hasM,a=e.paths,o=Object(r.d)(i,a,t,n);return o?l(o,t,n):null}},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(506),o=function(){function e(t,n){Object(r.a)(this,e),this._storage=new a.b,this._storage.maxSize=t,n&&this._storage.registerRemoveFunc("",n)}return Object(i.a)(e,[{key:"put",value:function(e,t,n){this._storage.put(e,t,n,1)}},{key:"pop",value:function(e){return this._storage.pop(e)}},{key:"get",value:function(e){return this._storage.get(e)}},{key:"clear",value:function(){this._storage.clearAll()}},{key:"destroy",value:function(){this._storage.destroy()}},{key:"maxSize",get:function(){return this._storage.maxSize},set:function(e){this._storage.maxSize=e}}]),e}();t.a=o},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var r=n(31),i=n(156);function a(e){return e?o(e.rings,e.hasZ):null}function o(e,t){if(!e||!e.length)return null;for(var n=[],r=[],a=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0],o=0,c=e.length;o<c;o++){var l=s(e[o],t,a);l&&r.push(l)}if(r.sort((function(e,n){var r=e[2]-n[2];return 0===r&&t&&(r=e[4]-n[4]),r})),r.length){var u=6*r[0][2];n[0]=r[0][0]/u,n[1]=r[0][1]/u,t&&(u=6*r[0][4],n[2]=0!==u?r[0][3]/u:0),(n[0]<a[0]||n[0]>a[1]||n[1]<a[2]||n[1]>a[3]||t&&(n[2]<a[4]||n[2]>a[5]))&&(n.length=0)}if(!n.length){var d=e[0]&&e[0].length?function(e,t){for(var n=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0],a=0,o=0,s=0,c=0,l=0,u=e.length;l<u-1;l++){var d=e[l],f=e[l+1];if(d&&f){n[0]=d[0],n[1]=d[1],r[0]=f[0],r[1]=f[1],t&&d.length>2&&f.length>2&&(n[2]=d[2],r[2]=f[2]);var p=Object(i.c)(n,r);if(p){a+=p;var h=Object(i.d)(d,f);o+=p*h[0],s+=p*h[1],t&&h.length>2&&(c+=p*h[2])}}}return a>0?t?[o/a,s/a,c/a]:[o/a,s/a]:e.length?e[0]:null}(e[0],t):null;if(!d)return null;n[0]=d[0],n[1]=d[1],t&&d.length>2&&(n[2]=d[2])}return n}function s(e,t,n){for(var i=0,a=0,o=0,s=0,c=0,l=0;l<e.length;l++){var u=e[l],d=Object(r.a)(u,3),f=d[0],p=d[1],h=d[2],b=e[(l+1)%e.length],v=Object(r.a)(b,3),y=v[0],m=v[1],g=v[2],O=f*m-y*p;s+=O,i+=(f+y)*O,a+=(p+m)*O,t&&u.length>2&&b.length>2&&(o+=(h+g)*(O=f*g-y*h),c+=O),f<n[0]&&(n[0]=f),f>n[1]&&(n[1]=f),p<n[2]&&(n[2]=p),p>n[3]&&(n[3]=p),t&&(h<n[4]&&(n[4]=h),h>n[5]&&(n[5]=h))}if(s>0&&(s*=-1),c>0&&(c*=-1),!s)return null;var j=[i,a,.5*s];return t&&(j[3]=o,j[4]=.5*c),j}},function(e,t,n){"use strict";var r=n(10),i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(8),d=n(12),f=(n(19),n(20),function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).requestOptions=null,e.url=null,e}return Object(a.a)(n,[{key:"normalizeCtorArgs",value:function(e,t){return"string"!=typeof e?e:Object(r.a)({url:e},t)}},{key:"parsedUrl",get:function(){return this._parseUrl(this.url)}},{key:"_parseUrl",value:function(e){return e?Object(d.J)(e):null}},{key:"_encode",value:function(e,t,n){var r={};for(var i in e)if("declaredClass"!==i){var a=e[i];if(null!=a&&"function"!=typeof a)if(Array.isArray(a)){r[i]=[];for(var o=0;o<a.length;o++)r[i][o]=this._encode(a[o])}else if("object"==typeof a)if(a.toJSON){var s=a.toJSON(n&&n[i]);r[i]=t?s:JSON.stringify(s)}else r[i]=t?a:JSON.stringify(a);else r[i]=a}return r}}]),n}(n(36).a));Object(c.a)([Object(l.b)({readOnly:!0})],f.prototype,"parsedUrl",null),Object(c.a)([Object(l.b)()],f.prototype,"requestOptions",void 0),Object(c.a)([Object(l.b)({type:String})],f.prototype,"url",void 0);var p=f=Object(c.a)([Object(u.a)("esri.tasks.Task")],f);t.a=p},function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return v}));var r=n(7),i=n.n(r),a=n(15),o=n(2),s=n(3),c=n(5),l=n(6),u=n(0),d=(n(16),n(13),n(17),n(1)),f=n(32),p=n(8),h=(n(12),n(19),n(20),n(24)),b=function(e){var t=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.apply(this,arguments)).refreshTimestamp=null,e.refreshDebounced=Object(h.i)(function(){var t=Object(a.a)(i.a.mark((function t(n,r){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("number"==typeof n?a=n:(a=Date.now(),r=n),e._set("refreshTimestamp",a),t.t0=e.doRefresh,!t.t0){t.next=6;break}return t.next=6,e.doRefresh(r);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),2e3),e}return Object(s.a)(n,[{key:"refresh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this._set("refreshTimestamp",e),this.doRefresh&&this.doRefresh()}}]),n}(e);return Object(u.a)([Object(d.b)()],t.prototype,"layer",void 0),Object(u.a)([Object(f.a)("layer.refreshInterval")],t.prototype,"refreshInterval",void 0),Object(u.a)([Object(d.b)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),t=Object(u.a)([Object(p.a)("esri.layers.mixins.RefreshableLayerView")],t)};function v(e){return"refresh"in e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(54),i=(n(167),n(280)),a=(n(441),n(341)),o=n(281),s=n(247),c=(n(306),n(244),n(205)),l=["oid","global-id"],u=["oid","global-id","guid"];function d(e,t){var n=e.displayField,a=e.editFieldsInfo,o=e.fields,l=e.objectIdField,u=e.title;if(!o)return null;var d=y({editFieldsInfo:a,fields:o,objectIdField:l},t);if(!d.length)return null;var f=function(e){var t=Object(r.n)(e),n=e.titleBase;return t?"".concat(n,": {").concat(t.trim(),"}"):n}({titleBase:u,fields:o,displayField:n}),p=[new s.a,new i.a];return new c.a({title:f,content:p,fieldInfos:d})}var f=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],p=function(e,t){var n=t.editFieldsInfo,r=t.objectIdField,i=t.visibleFieldNames;return i?i.has(e.name):!b(e.name,n)&&(!r||e.name!==r)&&!(l.indexOf(e.type)>-1)&&!f.some((function(t){return t.test(e.name)}))};function h(e,t){return"oid"===e.type?-1:"oid"===t.type?1:g(e)?-1:g(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function b(e,t){if(!e||!t)return!1;var n=t.creationDateField,r=t.creatorField,i=t.editDateField,a=t.editorField;return-1!==[n&&n.toLowerCase(),r&&r.toLowerCase(),i&&i.toLowerCase(),a&&a.toLowerCase()].indexOf(e.toLowerCase())}function v(e,t){return e.editable&&-1===u.indexOf(e.type)&&!b(e.name,t)}function y(e,t){var n=e.editFieldsInfo,r=e.fields,i=e.objectIdField;return function(e,t){var n=e;return t&&(e=e.filter((function(e){return-1===t.indexOf(e.type)}))),e===n&&(e=e.slice()),e.sort(h),e}(r,(null==t?void 0:t.ignoreFieldTypes)||O).map((function(e){return new o.a({fieldName:e.name,isEditable:v(e,n),label:e.alias,format:m(e),visible:p(e,{editFieldsInfo:n,objectIdField:i,visibleFieldNames:null==t?void 0:t.visibleFieldNames})})}))}function m(e){switch(e.type){case"small-integer":case"integer":case"single":return new a.a({digitSeparator:!0,places:0});case"double":return new a.a({digitSeparator:!0,places:2});case"date":return new a.a({dateFormat:"long-month-day-year"});default:return null}}function g(e){return"name"===(e.name&&e.name.toLowerCase())||("name"===(e.alias&&e.alias.toLowerCase())||void 0)}var O=["geometry","blob","raster","guid","xml"]},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(53),s=n(50),c=n(5),l=n(6),u=n(0),d=(n(16),n(4)),f=(n(13),n(17),n(1)),p=n(47),h=n(41),b=n(8),v=n(42),y=(n(12),n(19),n(20),n(28)),m=n(7),g=n.n(m),O=n(15),j=n(54),w=r=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"collectRequiredFields",value:function(){var e=Object(O.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(j.c)(t,n,this.expression));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"clone",value:function(){return new r({expression:this.expression,title:this.title})}}]),n}(y.a);Object(u.a)([Object(f.b)({type:String,json:{write:!0}})],w.prototype,"expression",void 0),Object(u.a)([Object(f.b)({type:String,json:{write:!0}})],w.prototype,"title",void 0);var _,k=w=r=Object(u.a)([Object(b.a)("esri.layers.support.FeatureExpressionInfo")],w),x=n(366),S=Object(p.b)()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),T=new p.a({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"}),E=_=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).offset=null,e}return Object(a.a)(n,[{key:"readFeatureExpressionInfo",value:function(e,t){return null!=e?e:t.featureExpression&&0===t.featureExpression.value?{expression:"0"}:void 0}},{key:"writeFeatureExpressionInfo",value:function(e,t,n,r){t[n]=e.write(null,r),"0"===e.expression&&(t.featureExpression={value:0})}},{key:"mode",get:function(){var e=this.offset,t=this.featureExpressionInfo;return this._isOverridden("mode")?this._get("mode"):Object(d.k)(e)||t?"relative-to-ground":"on-the-ground"},set:function(e){this._override("mode",e)}},{key:"unit",set:function(e){this._set("unit",e)}},{key:"write",value:function(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?Object(o.a)(Object(s.a)(n.prototype),"write",this).call(this,e,t):null}},{key:"clone",value:function(){return new _({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}}]),n}(y.a);Object(u.a)([Object(f.b)({type:k,json:{write:!0}})],E.prototype,"featureExpressionInfo",void 0),Object(u.a)([Object(h.a)("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],E.prototype,"readFeatureExpressionInfo",null),Object(u.a)([Object(v.a)("featureExpressionInfo",{featureExpressionInfo:{type:k},"featureExpression.value":{type:[0]}})],E.prototype,"writeFeatureExpressionInfo",null),Object(u.a)([Object(f.b)({type:S.apiValues,nonNullable:!0,json:{type:S.jsonValues,read:S.read,write:{writer:S.write,isRequired:!0}}})],E.prototype,"mode",null),Object(u.a)([Object(f.b)({type:Number,json:{write:!0}})],E.prototype,"offset",void 0),Object(u.a)([Object(f.b)({type:x.b,json:{type:String,read:T.read,write:T.write}})],E.prototype,"unit",null);var C=E=_=Object(u.a)([Object(b.a)("esri.layers.support.ElevationInfo")],E);t.a=C},function(e,t,n){"use strict";n.r(t);var r,i=n(35),a=n(10),o=n(31),s=n(7),c=n.n(s),l=n(14),u=n(15),d=n(2),f=n(3),p=n(53),h=n(50),b=n(5),v=n(6),y=n(0),m=(n(16),n(22)),g=n(4),O=n(123),j=n(13),w=(n(17),n(1)),_=n(8),k=n(42),x=n(18),S=(n(12),n(19),n(20),n(24)),T=n(138),E=n(54),C=n(39),P=n(200),I=n(62),M=n(166),A=n(277),R=n(471),L=j.a.getLogger("esri.renderers.DictionaryRenderer"),F={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}},D=r=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this,e))._ongoingRequests=new Map,r._symbolCache=new R.a(100),r.config=null,r.fieldMap=null,r.scaleExpression=null,r.scaleExpressionTitle=null,r.url=null,r.type="dictionary",r}return Object(f.a)(n,[{key:"writeData",value:function(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}},{key:"writeVisualVariables",value:function(e,t,r,i){null!=i&&i.origin||Object(p.a)(Object(h.a)(n.prototype),"writeVisualVariables",this).call(this,e,t,r,i)}},{key:"clone",value:function(){return new r({config:Object(m.a)(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:Object(m.a)(this.fieldMap),url:Object(m.a)(this.url),visualVariables:Object(m.a)(this.visualVariables)})}},{key:"getSymbolAsync",value:function(){var e=Object(u.a)(c.a.mark((function e(t,n){var r,i,a,o,s,u,d,f,p,h,b,v,y,m,j,w,_,k,x,T,E,P,I,M,A,R,L=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(n)),e.prev=1,e.next=4,this._dictionaryPromise;case 4:r=e.sent,e.next=11;break;case 7:if(e.prev=7,e.t0=e.catch(1),!Object(S.m)(e.t0)){e.next=11;break}return e.abrupt("return",(this._dictionaryPromise=null,null));case 11:if(i={},this.fieldMap){a=Object(l.a)(this._symbolFields);try{for(a.s();!(o=a.n()).done;)s=o.value,(u=this.fieldMap[s])&&null!==t.attributes[u]&&void 0!==t.attributes[u]?(d=""+t.attributes[u],i[s]=d):i[s]=""}catch(c){a.e(c)}finally{a.f()}}if((f=r(i,n))&&"string"==typeof f){e.next=16;break}return e.abrupt("return",null);case 16:if(p=Object(O.b)(f).toString(),!(h=this._symbolCache.get(p))){e.next=19;break}return e.abrupt("return",(h.catch((function(){L._symbolCache.pop(p)})),h));case 19:b=f.split(";"),v=[],y=[],m=Object(l.a)(b);try{for(m.s();!(j=m.n()).done;)if((w=j.value)&&0!==w.length)if(-1===w.indexOf("po:"))if(-1!==w.indexOf("|")){_=Object(l.a)(w.split("|"));try{for(_.s();!(k=_.n()).done;)x=k.value,this._itemNames.has(x)&&v.push(x)}catch(c){_.e(c)}finally{_.f()}}else this._itemNames.has(w)&&v.push(w);else 3===(T=w.substr(3).split("|")).length&&(E=T[0],P=T[1],I=T[2],"DashTemplate"===P?I=I.split(" ").map((function(e){return Number(e)})):"Color"===P?(M=new C.a(I).toRgba(),I=[M[0],M[1],M[2],255*M[3]]):I=Number(I),y.push({primitiveName:E,propertyName:P,value:I}))}catch(c){m.e(c)}finally{m.f()}return A=!Object(g.k)(t.geometry)||!t.geometry.hasZ&&"point"===t.geometry.type,R=this._cimPartsToCIMSymbol(v,y,A,n),e.abrupt("return",(this._symbolCache.put(p,R,1),R));case 24:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"collectRequiredFields",value:function(){var e=Object(u.a)(c.a.mark((function e(t,n){var r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.collectVVRequiredFields(t,n);case 2:if(e.t0=this.scaleExpression,!e.t0){e.next=6;break}return e.next=6,Object(E.c)(t,n,this.scaleExpression);case 6:for(i in r=n.map((function(e){return e.name})),this.fieldMap)r.indexOf(this.fieldMap[i])<0||t.add(this.fieldMap[i]);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"arcadeRequired",get:function(){return!0}},{key:"fetchResources",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n,r,i,s,u,d,f,p,h,b,v,y,m,O,j,w,_,k=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._dictionaryPromise){e.next=2;break}return e.abrupt("return",this._dictionaryPromise);case 2:if(this.url){e.next=4;break}return e.abrupt("return",void L.error("no valid URL!"));case 4:return n=Object(g.k)(t)?t.abortOptions:null,r=Object(I.default)(this.url+"/resources/styles/dictionary-info.json",Object(a.a)({responseType:"json",query:{f:"json"}},n)),e.next=8,Promise.all([r,Object(T.e)()]);case 8:if(i=e.sent,s=Object(o.a)(i,1),u=s[0].data){e.next=13;break}throw this._dictionaryPromise=null,new x.a("esri.renderers.DictionaryRenderer","Bad dictionary data!");case 13:if(d=u.expression,f=u.authoringInfo,this._refSymbolUrlTemplate=this.url+"/"+u.cimRefTemplateUrl,this._itemNames=new Set(u.itemsNames),this._symbolFields=f.symbol,p={},this.config)for(b in h=this.config)p[b]=h[b];if(f.configuration){v=Object(l.a)(f.configuration);try{for(v.s();!(y=v.n()).done;)m=y.value,p.hasOwnProperty(m.name)||(p[m.name]=m.value)}catch(c){v.e(c)}finally{v.f()}}if(O=[],Object(g.k)(t)&&t.fields&&this.fieldMap){j=Object(l.a)(this._symbolFields);try{for(_=function(){var e=w.value,n=k.fieldMap[e],r=t.fields.filter((function(e){return e.name===n}));r.length>0&&O.push(Object(a.a)(Object(a.a)({},r[0]),{},{name:e}))},j.s();!(w=j.n()).done;)_()}catch(c){j.e(c)}finally{j.f()}}return e.abrupt("return",(this._dictionaryPromise=Object(T.b)(d,Object(g.k)(t)?t.spatialReference:null,O,p).then((function(e){var t={scale:0};return function(n,r){var i=e.repurposeFeature({geometry:null,attributes:n});return t.scale=Object(g.k)(r)?r.scale:void 0,e.evaluate({$feature:i,$view:t})}})).catch((function(e){return L.error("Creating dictinoary expression failed:",e),null})),this._dictionaryPromise));case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(){return null}},{key:"getSymbols",value:function(){return[]}},{key:"getAttributeHash",value:function(){return this.visualVariables&&this.visualVariables.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){return"".concat(this.url,"-").concat(JSON.stringify(this.fieldMap))}},{key:"getSymbolFields",value:function(){return this._symbolFields}},{key:"_getSymbolPart",value:function(){var e=Object(u.a)(c.a.mark((function e(t,n){var r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._ongoingRequests.has(t)){e.next=2;break}return e.abrupt("return",this._ongoingRequests.get(t).then((function(e){return e.data})));case 2:return r=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,t),i=Object(I.default)(r,Object(a.a)({responseType:"json",query:{f:"json"}},n)),this._ongoingRequests.set(t,i),e.prev=4,e.next=7,i;case 7:return e.abrupt("return",e.sent.data);case 10:return e.prev=10,e.t0=e.catch(4),e.abrupt("return",(this._ongoingRequests.delete(t),Promise.reject(e.t0)));case 13:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_combineSymbolParts",value:function(e,t,n){if(!e||0===e.length)return null;var r=Object(a.a)({},e[0]);if(e.length>1){r.symbolLayers=[];var o,s=Object(l.a)(e);try{for(s.s();!(o=s.n()).done;){var c,u=o.value;(c=r.symbolLayers).unshift.apply(c,Object(i.a)(u.symbolLayers))}}catch(d){s.e(d)}finally{s.f()}}return n&&(r.callout=F),{type:"CIMSymbolReference",symbol:r,primitiveOverrides:t}}},{key:"_cimPartsToCIMSymbol",value:function(){var e=Object(u.a)(c.a.mark((function e(t,n,r,i){var a,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=new Array(t.length),o=0;o<t.length;o++)a[o]=this._getSymbolPart(t[o],i);return e.next=4,Promise.all(a);case 4:return s=e.sent,e.abrupt("return",new P.a({data:this._combineSymbolParts(s,n,r)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()}]),n}(Object(A.a)(M.a));Object(y.a)([Object(w.b)({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],D.prototype,"config",void 0),Object(y.a)([Object(w.b)({type:Object,json:{write:!0}})],D.prototype,"fieldMap",void 0),Object(y.a)([Object(w.b)({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],D.prototype,"scaleExpression",void 0),Object(y.a)([Object(k.a)("scaleExpression")],D.prototype,"writeData",null),Object(y.a)([Object(w.b)({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy:function(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],D.prototype,"scaleExpressionTitle",void 0),Object(y.a)([Object(w.b)({type:String,json:{write:!0}})],D.prototype,"url",void 0),Object(y.a)([Object(k.a)("visualVariables")],D.prototype,"writeVisualVariables",null);var N=D=r=Object(y.a)([Object(_.a)("esri.renderers.DictionaryRenderer")],D);t.default=N},function(e,t,n){"use strict";var r,i=n(7),a=n.n(i),o=n(15),s=n(2),c=n(3),l=n(5),u=n(6),d=n(0),f=(n(16),n(22)),p=(n(13),n(17),n(1)),h=n(49),b=n(8),v=(n(12),n(19),n(20),n(54)),y=n(39),m=n(166),g=n(371),O=r=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).blurRadius=10,r.colorStops=[new g.a({ratio:0,color:new y.a("rgba(255, 140, 0, 0)")}),new g.a({ratio:.75,color:new y.a("rgba(255, 140, 0, 1)")}),new g.a({ratio:.9,color:new y.a("rgba(255, 0,   0, 1)")})],r.field=null,r.fieldOffset=0,r.maxPixelIntensity=100,r.minPixelIntensity=0,r.type="heatmap",r}return Object(c.a)(n,[{key:"collectRequiredFields",value:function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=this.field)&&"string"==typeof r&&Object(v.f)(t,n,r);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAttributeHash",value:function(){return null}},{key:"getMeshHash",value:function(){return"".concat(JSON.stringify(this.colorStops),".").concat(this.blurRadius,".").concat(this.field)}},{key:"clone",value:function(){return new r({blurRadius:this.blurRadius,colorStops:Object(f.a)(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})}}]),n}(m.a);Object(d.a)([Object(p.b)({type:Number,json:{write:!0}})],O.prototype,"blurRadius",void 0),Object(d.a)([Object(p.b)({type:[g.a],json:{write:!0}})],O.prototype,"colorStops",void 0),Object(d.a)([Object(p.b)({type:String,json:{write:!0}})],O.prototype,"field",void 0),Object(d.a)([Object(p.b)({type:Number,json:{write:{overridePolicy:function(e,t,n){return{enabled:null==n}}}}})],O.prototype,"fieldOffset",void 0),Object(d.a)([Object(p.b)({type:Number,json:{write:!0}})],O.prototype,"maxPixelIntensity",void 0),Object(d.a)([Object(p.b)({type:Number,json:{write:!0}})],O.prototype,"minPixelIntensity",void 0),Object(d.a)([Object(h.a)({heatmap:"heatmap"})],O.prototype,"type",void 0);var j=O=r=Object(d.a)([Object(b.a)("esri.renderers.HeatmapRenderer")],O);t.a=j},function(e,t,n){"use strict";var r,i=n(14),a=n(7),o=n.n(a),s=n(15),c=n(2),l=n(3),u=n(5),d=n(6),f=n(0),p=(n(16),n(22)),h=n(13),b=n(17),v=n(1),y=n(32),m=n(49),g=n(8),O=(n(12),n(19),n(20),n(54)),j=n(39),w=n(120),_=n(130),k=n(166),x=n(277),S=n(58),T=n(28),E=h.a.getLogger("esri.renderers.support.AttributeColorInfo"),C=r=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).color=null,r.field=null,r.label=null,r.valueExpression=null,r.valueExpressionTitle=null,r}return Object(l.a)(n,[{key:"castField",value:function(e){return null==e?e:"function"==typeof e?(E.error(".field: field must be a string value"),null):Object(b.l)(e)}},{key:"getAttributeHash",value:function(){return"".concat(this.field,"-").concat(this.valueExpression)}},{key:"clone",value:function(){return new r({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}}]),n}(T.a);Object(f.a)([Object(v.b)({type:j.a,json:{type:[Number],write:!0}})],C.prototype,"color",void 0),Object(f.a)([Object(v.b)({type:String,json:{write:!0}})],C.prototype,"field",void 0),Object(f.a)([Object(S.a)("field")],C.prototype,"castField",null),Object(f.a)([Object(v.b)({type:String,json:{write:!0}})],C.prototype,"label",void 0),Object(f.a)([Object(v.b)({type:String,json:{write:!0}})],C.prototype,"valueExpression",void 0),Object(f.a)([Object(v.b)({type:String,json:{write:!0}})],C.prototype,"valueExpressionTitle",void 0);var P,I=C=r=Object(f.a)([Object(g.a)("esri.renderers.support.AttributeColorInfo")],C),M=P=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.apply(this,arguments)).unit=null,e}return Object(l.a)(n,[{key:"clone",value:function(){return new P({unit:this.unit})}}]),n}(T.a);Object(f.a)([Object(v.b)({type:String,json:{write:!0}})],M.prototype,"unit",void 0);var A,R=M=P=Object(f.a)([Object(g.a)("esri.renderers.support.DotDensityLegendOptions")],M),L=A=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).attributes=null,r.backgroundColor=new j.a([0,0,0,0]),r.blendDots=!0,r.dotBlendingEnabled=!0,r.dotShape="square",r.dotSize=1,r.legendOptions=null,r.outline=new w.default,r.dotValue=null,r.referenceDotValue=null,r.referenceScale=null,r.seed=1,r.type="dot-density",r}return Object(l.a)(n,[{key:"calculateDotValue",value:function(e){if(null==this.referenceScale)return this.dotValue;var t=e/this.referenceScale*this.dotValue;return t<1?1:t}},{key:"getSymbol",value:function(){return new _.default({outline:this.outline})}},{key:"getSymbolAsync",value:function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getSymbol());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){return[this.getSymbol()]}},{key:"getAttributeHash",value:function(){return this.attributes&&this.attributes.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){return JSON.stringify(this.outline)}},{key:"clone",value:function(){return new A({attributes:Object(p.a)(this.attributes),backgroundColor:Object(p.a)(this.backgroundColor),dotBlendingEnabled:Object(p.a)(this.dotBlendingEnabled),dotShape:Object(p.a)(this.dotShape),dotSize:Object(p.a)(this.dotSize),dotValue:Object(p.a)(this.dotValue),legendOptions:Object(p.a)(this.legendOptions),outline:Object(p.a)(this.outline),referenceScale:Object(p.a)(this.referenceScale),visualVariables:Object(p.a)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}},{key:"getControllerHash",value:function(){return"".concat(this.attributes.map((function(e){return e.field||e.valueExpression||""})),"-").concat(this.outline&&JSON.stringify(this.outline.toJSON())||"")}},{key:"collectRequiredFields",value:function(){var e=Object(s.a)(o.a.mark((function e(t,n){var r,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.collectVVRequiredFields(t,n);case 2:r=Object(i.a)(this.attributes),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=14;break}if(s=a.value,e.t0=s.valueExpression,!e.t0){e.next=11;break}return e.next=11,Object(O.c)(t,n,s.valueExpression);case 11:s.field&&t.add(s.field);case 12:e.next=5;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(3),r.e(e.t1);case 19:return e.prev=19,r.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[3,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(Object(x.a)(k.a));Object(f.a)([Object(v.b)({type:[I],json:{write:!0}})],L.prototype,"attributes",void 0),Object(f.a)([Object(v.b)({type:j.a,json:{write:!0}})],L.prototype,"backgroundColor",void 0),Object(f.a)([Object(v.b)({type:Boolean}),Object(y.a)("dotBlendingEnabled")],L.prototype,"blendDots",void 0),Object(f.a)([Object(v.b)({type:Boolean,json:{write:!0}})],L.prototype,"dotBlendingEnabled",void 0),Object(f.a)([Object(v.b)({type:String,json:{write:!1}})],L.prototype,"dotShape",void 0),Object(f.a)([Object(v.b)({type:Number,json:{write:!1}})],L.prototype,"dotSize",void 0),Object(f.a)([Object(v.b)({type:R,json:{write:!0}})],L.prototype,"legendOptions",void 0),Object(f.a)([Object(v.b)({type:w.default,json:{default:null,write:!0}})],L.prototype,"outline",void 0),Object(f.a)([Object(v.b)({type:Number,json:{write:!0}})],L.prototype,"dotValue",void 0),Object(f.a)([Object(v.b)({type:Number}),Object(y.a)("dotValue")],L.prototype,"referenceDotValue",void 0),Object(f.a)([Object(v.b)({type:Number,json:{write:!0}})],L.prototype,"referenceScale",void 0),Object(f.a)([Object(v.b)({type:Number,json:{write:!0}})],L.prototype,"seed",void 0),Object(f.a)([Object(m.a)({dotDensity:"dot-density"})],L.prototype,"type",void 0);var F=L=A=Object(f.a)([Object(g.a)("esri.renderers.DotDensityRenderer")],L);t.a=F},function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n(14),i=n(2),a=n(3),o=n(5),s=n(6),c=n(4),l=n(27),u=n(11),d=n(272),f=n(88),p=n(119),h=n(326),b=n(86),v=n(285),y=n(145),m=n(240),g=function(){function e(){Object(i.a)(this,e),this._disposed=!1}return Object(a.a)(e,[{key:"disposed",get:function(){return this._disposed}},{key:"shaderTransformation",get:function(){return this._shaderTransformation}},{key:"acquire",value:function(e,t,n,r,i,a){this.id=Object(m.a)(),this.geometry=e,this.material=t,this.transformation=n,this.instanceParameters=r,this.origin=i,this._shaderTransformation=a,this._disposed=!1}},{key:"release",value:function(){this._disposed=!1}},{key:"dispose",value:function(){this._disposed=!0}},{key:"getStaticTransformation",value:function(){return this.transformation}},{key:"getShaderTransformation",value:function(){return Object(c.k)(this._shaderTransformation)?this._shaderTransformation(this.transformation):this.transformation}},{key:"computeAttachmentOrigin",value:function(e){return!!(this.material.computeAttachmentOrigin?this.material.computeAttachmentOrigin(this.geometry,e):this.geometry.computeAttachmentOrigin(e))&&(Object(u.l)(e,e,this.getStaticTransformation()),!0)}}]),e}();g.pool=new y.a(g);var O=n(587),j=n(242),w=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,n),(e=t.call(this)).type=1,e._geometryRecords=new Array,e._geometries=new Array,e._objectTransformation=Object(p.b)(),e._bvObjectSpace=new k,e._bvWorldSpace=new k,e._bvDirty=!0,e._hasVolatileTransformation=!1,e._visible=!0,e.castShadow=null==r.castShadow||r.castShadow,e.metadata=r.metadata,e.metadata&&e.metadata.isElevationSource&&(e.metadata.lastValidElevationBB=new _),e.transformation=Object(p.b)();var a=r.geometries,o=r.materials,s=r.transformations,c=r.origins;if(Array.isArray(a)){Object(b.a)(o.length===a.length,"Object3D: materials don't match geometries"),Object(b.a)(s.length===a.length,"Object3D: transformations don't match geometries"),e._geometryRecords.length=a.length,e._geometries.length=a.length;for(var l=0;l<a.length;l++)e._geometries[l]=a[l],e._geometryRecords[l]=g.pool.acquire(a[l],o[l],Object(p.c)(s[l]),{highlights:null,occludees:null,visible:!0},c&&c[l])}return e}return Object(a.a)(n,[{key:"geometryRecords",get:function(){return this._geometryRecords}},{key:"geometries",get:function(){return this._geometries}},{key:"transformation",get:function(){return this._objectTransformation},set:function(e){Object(f.c)(this._objectTransformation,e),this._invalidateBoundingVolume(),this._emit("objectTransformation",this)}},{key:"dispose",value:function(){this._geometryRecords.length=0,this._geometries.length=0}},{key:"parentLayer",get:function(){return this._parentLayer},set:function(e){Object(b.a)(null==this._parentLayer||null==e,"Object3D can only be added to a single Layer"),this._parentLayer=e}},{key:"getNumGeometryRecords",value:function(){return this._geometryRecords.length}},{key:"getGeometryRecord",value:function(e){return Object(b.a)(e>=0&&e<this._geometryRecords.length,"Object3d.getGeometryDataByIndex: index out of range"),this._geometryRecords[e]}},{key:"addGeometry",value:function(e,t,n,r,i,a){n=n||p.a,this._geometries.push(e);var o=g.pool.acquire(e,t,n,r||{highlights:null,occludees:null,visible:!0},i,a);return this._geometryRecords.push(o),this._hasVolatileTransformation=this._hasVolatileTransformation||Object(c.k)(o.shaderTransformation),this._emit("objectGeometryAdded",{object:this,record:o}),this._invalidateBoundingVolume(),o}},{key:"removeGeometry",value:function(e){var t=this._geometryRecords.splice(e,1)[0];return this._hasVolatileTransformation=Object(c.k)(t.shaderTransformation)?this._geometryRecords.some((function(e){return Object(c.k)(e.shaderTransformation)})):this._hasVolatileTransformation,t.dispose(),this._geometries.splice(e,1),this._emit("objectGeometryRemoved",{object:this,record:t}),this._invalidateBoundingVolume(),t}},{key:"removeAllGeometries",value:function(){for(;this.getNumGeometryRecords()>0;)this.removeGeometry(0)}},{key:"geometryVertexAttrsUpdated",value:function(e){this._emit("vertexAttrsUpdated",{object:this,record:this._geometryRecords[e]}),this._invalidateBoundingVolume()}},{key:"isVisible",get:function(){return this._visible}},{key:"setVisible",value:function(e){this._visible=e;var t,n=Object(r.a)(this._geometryRecords);try{for(n.s();!(t=n.n()).done;){t.value.instanceParameters.visible=this._visible}}catch(i){n.e(i)}finally{n.f()}this._emit("visibilityChanged",this)}},{key:"maskOccludee",value:function(){var e,t=new O.a(1),n=Object(r.a)(this._geometryRecords);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.instanceParameters.occludees=Object(j.b)(i.instanceParameters.occludees,t)}}catch(a){n.e(a)}finally{n.f()}return this._emit("occlusionChanged",this),t}},{key:"removeOcclude",value:function(e){var t,n=Object(r.a)(this._geometryRecords);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.instanceParameters.occludees=Object(j.f)(i.instanceParameters.occludees,e)}}catch(a){n.e(a)}finally{n.f()}this._emit("occlusionChanged",this)}},{key:"highlight",value:function(){var e,t=new O.a(0),n=Object(r.a)(this._geometryRecords);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.instanceParameters.highlights=Object(j.b)(i.instanceParameters.highlights,t)}}catch(a){n.e(a)}finally{n.f()}return this._emit("highlightChanged",this),t}},{key:"removeHighlight",value:function(e){var t,n=Object(r.a)(this._geometryRecords);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.instanceParameters.highlights=Object(j.f)(i.instanceParameters.highlights,e)}}catch(a){n.e(a)}finally{n.f()}this._emit("highlightChanged",this)}},{key:"getCombinedStaticTransformation",value:function(e,t){return Object(f.l)(Object(c.r)(t,Object(p.b)()),this.transformation,e.getStaticTransformation())}},{key:"getCombinedShaderTransformation",value:function(e,t){return t=t||Object(p.b)(),Object(f.l)(t,this.transformation,e.getShaderTransformation()),t}},{key:"hasVolativeTransformation",value:function(){return this._hasVolatileTransformation}},{key:"getBBMin",value:function(e){return this._validateBoundingVolume(),e?this._bvObjectSpace.bbMin:this._bvWorldSpace.bbMin}},{key:"getBBMax",value:function(e){return this._validateBoundingVolume(),e?this._bvObjectSpace.bbMax:this._bvWorldSpace.bbMax}},{key:"getBounds",value:function(e){return this._validateBoundingVolume(),e?this._bvObjectSpace.bounds:this._bvWorldSpace.bounds}},{key:"_validateBoundingVolume",value:function(){if(this._bvDirty||this._hasVolatileTransformation){this._bvObjectSpace.init(),this._bvWorldSpace.init();for(var e=0;e<this._geometryRecords.length;++e){var t=this._geometries[e],n=this._geometryRecords[e],r=t.boundingInfo;Object(c.k)(r)&&(this._calculateTransformedBoundingVolume(r,this._bvObjectSpace,n.getShaderTransformation()),this._calculateTransformedBoundingVolume(r,this._bvWorldSpace,this.getCombinedShaderTransformation(n)))}Object(u.h)(this._bvObjectSpace.bounds,this._bvObjectSpace.bbMin,this._bvObjectSpace.bbMax,.5),Object(u.h)(this._bvWorldSpace.bounds,this._bvWorldSpace.bbMin,this._bvWorldSpace.bbMax,.5);for(var i=Object(l.e)(),a=Object(l.e)(),o=Object(d.e)(this.transformation),s=0;s<this._geometryRecords.length;++s){var f=this._geometries[s].boundingInfo;if(!Object(c.j)(f)){var p=this._geometryRecords[s].getShaderTransformation(),h=Object(d.e)(p);Object(u.l)(i,f.getCenter(),p);var b=Object(u.n)(i,this._bvObjectSpace.bounds),v=f.getBSRadius()*h;this._bvObjectSpace.bounds[3]=Math.max(this._bvObjectSpace.bounds[3],b+v),Object(u.l)(a,i,this.transformation);var y=Object(u.n)(a,this._bvWorldSpace.bounds),m=v*o;this._bvWorldSpace.bounds[3]=Math.max(this._bvWorldSpace.bounds[3],y+m)}}this._bvDirty=!1}}},{key:"_calculateTransformedBoundingVolume",value:function(e,t,n){var r=e.getBBMin(),i=e.getBBMax(),a=Object(l.d)(r),o=Object(l.d)(i);Object(u.l)(a,a,n),Object(u.l)(o,o,n);for(var s=0;s<3;++s)t.bbMin[s]=Math.min(t.bbMin[s],a[s],o[s]),t.bbMax[s]=Math.max(t.bbMax[s],a[s],o[s]);for(var c=0;c<3;++c){Object(u.j)(a,r),Object(u.j)(o,i),a[c]=i[c],o[c]=r[c],Object(u.l)(a,a,n),Object(u.l)(o,o,n);for(var d=0;d<3;++d)t.bbMin[d]=Math.min(t.bbMin[d],a[d],o[d]),t.bbMax[d]=Math.max(t.bbMax[d],a[d],o[d])}}},{key:"_invalidateBoundingVolume",value:function(){this._bvDirty=!0,Object(c.k)(this._parentLayer)&&this._parentLayer.notifyObjectBBChanged(this,this._bvWorldSpace.bounds)}},{key:"_emit",value:function(e,t){Object(c.k)(this._parentLayer)&&this._parentLayer.events.emit(e,t)}},{key:"test",get:function(){var e=this;return{hasGeometry:function(t){return e._geometries.indexOf(t)>-1},getGeometryIndex:function(t){return e._geometries.indexOf(t)}}}}]),n}(v.a),_=function(){function e(){Object(i.a)(this,e),this.bbMin=Object(l.g)(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this.bbMax=Object(l.g)(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE)}return Object(a.a)(e,[{key:"isEmpty",value:function(){return this.bbMax[0]<this.bbMin[0]&&this.bbMax[1]<this.bbMin[1]&&this.bbMax[2]<this.bbMin[2]}}]),e}(),k=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).bounds=Object(h.b)(),e}return Object(a.a)(n,[{key:"init",value:function(){Object(u.v)(this.bbMin,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),Object(u.v)(this.bbMax,-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),Object(h.a)(this.bounds)}}]),n}(_)},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(3),i=n(2),a=n(4),o=n(24),s=n(129),c=n(434),l=function e(t,n){Object(i.a)(this,e),this.item=t,this.controller=n,this.promise=null},u=function(){function e(t){var n=this;Object(i.a)(this,e),this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new c.a(t.peeker),this.process=t.process;var r=t.scheduler;t.task&&Object(a.k)(r)&&(this._task=r.registerTask(t.task,(function(e){return n.update(e)}),(function(){return n.needsUpdate()})))}return Object(r.a)(e,[{key:"destroy",value:function(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}},{key:"length",get:function(){return this._processingItems.size+this._queue.length}},{key:"abort",value:function(e){var t=this._controllers.get(e);t&&t.abort()}},{key:"clear",value:function(){this._queue.clear();var e=[];this._controllers.forEach((function(t){return e.push(t)})),this._controllers.clear(),e.forEach((function(e){return e.abort()})),this._processingItems.clear(),this._cancelNext()}},{key:"forEach",value:function(e){this._deferreds.forEach((function(t,n){return e(n)}))}},{key:"get",value:function(e){var t=this._deferreds.get(e);return t?t.promise:void 0}},{key:"isOngoing",value:function(e){return this._processingItems.has(e)}},{key:"has",value:function(e){return this._deferreds.has(e)}},{key:"pause",value:function(){this._isPaused||(this._isPaused=!0,this._cancelNext())}},{key:"push",value:function(e,t){var n=this,r=this.get(e);if(r)return r;var i=Object(o.d)(),s=null;t&&(s=Object(o.p)(t,(function(){return i.abort()})));var c=function(){l.remove(),Object(a.k)(s)&&s.remove(),n._deferreds.delete(e),n._controllers.delete(e),n._queue.remove(e),n._processingItems.delete(e),n._scheduleNext()},l=Object(o.q)(i.signal,(function(){var t=n._processingItems.get(e);t&&t.controller.abort(),c(),u.reject(Object(o.e)())})),u=Object(o.f)();return this._deferreds.set(e,u),this._controllers.set(e,i),u.promise.then(c,c),this._queue.push(e),this._scheduleNext(),u.promise}},{key:"reset",value:function(){var e=[];this._processingItems.forEach((function(t){return e.push(t)})),this._processingItems.clear();for(var t=0,n=e;t<n.length;t++){var r=n[t];this._queue.push(r.item),r.controller.abort()}this._scheduleNext()}},{key:"resume",value:function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}},{key:"takeAll",value:function(){for(var e=[];this._queue.length;)e.push(this._queue.pop());return this.clear(),e}},{key:"needsUpdate",value:function(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}},{key:"update",value:function(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}},{key:"_scheduleNext",value:function(){var e=this;this._task||this._isPaused||this._schedule||(this._schedule=Object(s.b)((function(){e._schedule=null,e._next()})))}},{key:"_next",value:function(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}},{key:"_cancelNext",value:function(){this._schedule&&(this._schedule.remove(),this._schedule=null)}},{key:"_processResult",value:function(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(t))}},{key:"_processError",value:function(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(t))}},{key:"_canProcessFulfillment",value:function(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}},{key:"_process",value:function(e){var t=this;if(!Object(a.j)(e)){var n,r=Object(o.d)(),i=new l(e,r);this._processingItems.set(e,i);try{n=this.process(e,r.signal)}catch(s){this._processError(i,s)}Object(o.o)(n)?(i.promise=n,n.then((function(e){return t._processResult(i,e)}),(function(e){return t._processError(i,e)}))):this._processResult(i,n)}}},{key:"test",get:function(){var e=this;return{update:function(t){return e.update(t)}}}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r,i,a=n(29),o=n(34),s=n(393);function c(e,t){e.fragment.include(s.a),3===t.output?(e.extensions.add("GL_OES_standard_derivatives"),e.fragment.code.add(Object(o.a)(r||(r=Object(a.a)(["\n      float _calculateFragDepth(const in float depth) {\n        // calc polygon offset\n        const float SLOPE_SCALE = 2.0;\n        const float BIAS = 2.0 * .000015259;    // 1 / (2^16 - 1)\n        float m = max(abs(dFdx(depth)), abs(dFdy(depth)));\n        float result = depth + SLOPE_SCALE * m + BIAS;\n        return clamp(result, .0, .999999);\n      }\n\n      void outputDepth(float _linearDepth) {\n        gl_FragColor = float2rgba(_calculateFragDepth(_linearDepth));\n      }\n    "]))))):1===t.output&&e.fragment.code.add(Object(o.a)(i||(i=Object(a.a)(["\n      void outputDepth(float _linearDepth) {\n        gl_FragColor = float2rgba(_linearDepth);\n      }\n    "]))))}},function(e,t,n){"use strict";function r(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function i(e,t){return"number"==typeof e?e:e&&e.stops&&e.stops.length?function(e){for(var t=0,n=0,r=0;r<e.length;r++){var i=e[r].size;"number"==typeof i&&(t+=i,n++)}return t/n}(e.stops):t}function a(e,t){if(!t)return e;var n=t.filter((function(e){return"size"===e.type})).map((function(t){var n=t.maxSize,r=t.minSize;return(i(n,e)+i(r,e))/2})),r=0,a=n.length;if(0===a)return e;for(var o=0;o<a;o++)r+=n[o];var s=Math.floor(r/a);return Math.max(s,e)}function o(e){var t=e&&e.renderer,n="touch"===(e&&e.event&&e.event.pointerType)?9:6;if(!t)return n;var i="visualVariables"in t?a(n,t.visualVariables):n;if("simple"===t.type)return r(i,t.symbol);if("unique-value"===t.type){var o=i;return t.uniqueValueInfos.forEach((function(e){o=r(o,e.symbol)})),o}if("class-breaks"===t.type){var s=i;return t.classBreakInfos.forEach((function(e){s=r(s,e.symbol)})),s}return t.type,i}n.d(t,"a",(function(){return o}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubNavContext=t.default=void 0;var r,i=(r=n(96))&&r.__esModule?r:{default:r},a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(21)),o=n(176),s=n(437);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=(0,a.createContext)({legacy:void 0,blue:void 0,backgroundColor:"blue"});t.SubNavContext=u,u.displayName="SubNavContext";var d=function(e){var t=e.children,n=e.blue,r=e.backgroundColor,i=e.legacy,d=l(e,["children","blue","backgroundColor","legacy"]),f=(0,o.useContextState)({legacy:i,blue:n,backgroundColor:r});return a.default.createElement(u.Provider,{value:f},a.default.createElement(s.StyledSubNav,c({backgroundColor:f.backgroundColor,legacy:f.legacy,blue:f.blue},d),a.default.createElement(s.StyledSubNavContent,{legacy:f.legacy},a.Children.toArray(t).filter((function(e){return"SubNavTitle"===(0,o.getChildType)(e)||"SubNavList"===(0,o.getChildType)(e)}))),i&&a.Children.toArray(t).filter((function(e){return"SubNavActions"===(0,o.getChildType)(e)}))))};t.default=d,d.propTypes={children:i.default.node,backgroundColor:i.default.string,backgroundImage:i.default.node,overlayGradient:i.default.bool,gradientFromColor:i.default.string,gradientToColor:i.default.string,legacy:i.default.bool,blue:i.default.bool,contentWidth:i.default.string,contentMaxWidth:i.default.string},d.defaultProps={backgroundColor:"blue",overlayGradient:!0},d.displayName="SubNav"},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n(14);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(!window.WebGLRenderingContext)return o(e,s),null;var r=a(e,t,n);return r||(o(e,c),null)}function a(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;switch(i){case"webgl":t=["webgl","experimental-webgl","webkit-3d","moz-webgl"];break;case"webgl2":t=["webgl2"];break;default:t=["webgl","experimental-webgl","webkit-3d","moz-webgl"]}var a,o=null,s=Object(r.a)(t);try{for(s.s();!(a=s.n()).done;){var c=a.value;try{o=e.getContext(c,n)}catch(l){}if(o)break}}catch(u){s.e(u)}finally{s.f()}return o}function o(e,t){var n=e.parentNode;n&&(n.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>")}var s='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',c='It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>'},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return f}));var r=n(10),i=n(31),a=n(123),o=n(95),s={ar:[".",","],bs:[",","."],ca:[",","."],cs:[",","\xa0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xa0"],fi:[",","\xa0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xa0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xa0"],lv:[",","\xa0"],mk:[",","."],nb:[",","\xa0"],nl:[",","."],pl:[",","\xa0"],pt:[",","."],"pt-pt":[",","\xa0"],ro:[",","."],ru:[",","\xa0"],sk:[",","\xa0"],sl:[",","."],sr:[",","."],sv:[",","\xa0"],th:[".",","],tr:[",","."],uk:[",","\xa0"],vi:[",","."],zh:[".",","]};function c(e){e||(e=Object(o.b)());var t=e in s;if(!t){var n=e.split("-");n.length>1&&n[0]in s&&(e=n[0],t=!0),t||(e="en")}var r=Object(i.a)(s[e],3),a=r[0],c=r[1],l=r[2];return{decimal:a,group:c,pattern:void 0===l?"#,##0.###":l}}function l(e,t){var n=c((t=Object(r.a)({},t)).locale);t.customs=n;var i=t.pattern||n.pattern;return isNaN(e)||Math.abs(e)===1/0?null:function(e,t,n){var r=(n=n||{}).customs.group,i=n.customs.decimal,a=t.split(";"),o=a[0];if(-1!==(t=a[e<0?1:0]||"-"+o).indexOf("%"))e*=100;else if(-1!==t.indexOf("\u2030"))e*=1e3;else{if(-1!==t.indexOf("\xa4"))throw new Error("currency notation not supported");if(-1!==t.indexOf("E"))throw new Error("exponential notation not supported")}var s=u,c=o.match(s);if(!c)throw new Error("unable to find a number expression in pattern: "+t);return!1===n.fractional&&(n.places=0),t.replace(s,function(e,t,n){!0===(n=n||{}).places&&(n.places=0),n.places===1/0&&(n.places=6);var r=t.split("."),i="string"==typeof n.places&&n.places.indexOf(","),a=n.places;i?a=n.places.substring(i+1):a>=0||(a=(r[1]||[]).length),n.round<0||(e=Number(e.toFixed(Number(a))));var o=String(Math.abs(e)).split("."),s=o[1]||"";if(r[1]||n.places){i&&(n.places=n.places.substring(0,i));var c=void 0!==n.places?n.places:r[1]&&r[1].lastIndexOf("0")+1;c>s.length&&(o[1]=s.padEnd(Number(c),"0")),a<s.length&&(o[1]=s.substr(0,Number(a)))}else o[1]&&o.pop();var l=r[0].replace(",",""),u=l.indexOf("0");-1!==u&&((u=l.length-u)>o[0].length&&(o[0]=o[0].padStart(u,"0")),-1===l.indexOf("#")&&(o[0]=o[0].substr(o[0].length-u)));var d,f,p=r[0].lastIndexOf(",");if(-1!==p){d=r[0].length-p-1;var h=r[0].substr(0,p);-1!==(p=h.lastIndexOf(","))&&(f=h.length-p-1)}for(var b=[],v=o[0];v;){var y=v.length-d;b.push(y>0?v.substr(y):v),v=y>0?v.slice(0,y):"",f&&(d=f,f=void 0)}return o[0]=b.reverse().join(n.group||","),o.join(n.decimal||".")}(e,c[0],{decimal:i,group:r,places:n.places,round:n.round}))}(e,i,t)}var u=/[#0,]*[#0](?:\.0*#*)?/;function d(e){var t=c((e=e||{}).locale),n=e.pattern||t.pattern,r=t.group,i=t.decimal,o=1;if(-1!==n.indexOf("%"))o/=100;else if(-1!==n.indexOf("\u2030"))o/=1e3;else if(-1!==n.indexOf("\xa4"))throw new Error("currency notation not supported");var s=n.split(";");return 1===s.length&&s.push("-"+s[0]),{regexp:h(s,(function(t){return(t="(?:"+Object(a.a)(t,".")+")").replace(u,(function(t){var n={signed:!1,separator:e.strict?r:[r,""],fractional:e.fractional,decimal:i,exponent:!1},a=t.split("."),s=e.places;1===a.length&&1!==o&&(a[1]="###"),1===a.length||0===s?n.fractional=!1:(void 0===s&&(s=e.pattern?a[1].lastIndexOf("0")+1:1/0),s&&null==e.fractional&&(n.fractional=!0),!e.places&&s<a[1].length&&(s+=","+a[1].length),n.places=s);var c=a[0].split(",");return c.length>1&&(n.groupSize=c.pop().length,c.length>1&&(n.groupSize2=c.pop().length)),"("+function(e){"places"in(e=e||{})||(e.places=1/0),"string"!=typeof e.decimal&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);var t=p(e),n=h(e.fractional,(function(t){var n="";return t&&0!==e.places&&(n="\\"+e.decimal,e.places===1/0?n="(?:"+n+"\\d+)?":n+="\\d{"+e.places+"}"),n}),!0),r=t+n;return n&&(r="(?:(?:"+r+")|(?:"+n+"))"),r+h(e.exponent,(function(t){return t?"([eE]"+p({signed:e.eSigned})+")":""}))}(n)+")"}))}),!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:r,decimal:i,factor:o}}function f(e,t){var n=d(t),r=new RegExp("^"+n.regexp+"$").exec(e);if(!r)return NaN;var i=r[1];if(!r[1]){if(!r[2])return NaN;i=r[2],n.factor*=-1}return i=i.replace(new RegExp("["+n.group+"\\s\\xa0]","g"),"").replace(n.decimal,"."),Number(i)*n.factor}function p(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",h(e.signed,(function(e){return e?"[-+]":""}),!0)+h(e.separator,(function(t){if(!t)return"(?:\\d+)";" "===(t=Object(a.a)(t))?t="\\s":"\xa0"===t&&(t="\\s\\xa0");var n=e.groupSize,r=e.groupSize2;if(r){var i="(?:0|[1-9]\\d{0,"+(r-1)+"}(?:["+t+"]\\d{"+r+"})*["+t+"]\\d{"+n+"})";return n-r>0?"(?:"+i+"|(?:0|[1-9]\\d{0,"+(n-1)+"}))":i}return"(?:0|[1-9]\\d{0,"+(n-1)+"}(?:["+t+"]\\d{"+n+"})*)"}),!0)}var h=function(e,t,n){if(!(e instanceof Array))return t(e);for(var r=[],i=0;i<e.length;i++)r.push(t(e[i]));return b(r.join("|"),n)},b=function(e,t){return"("+(t?"?:":"")+e+")"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StyledCardTitle=t.StyledCardImageCaption=t.StyledCardImage=t.StyledCardImageWrap=t.StyledCardContent=t.StyledCard=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(194)),i=n(176),a=n(164),o=n(350);var s=r.default.div.withConfig({displayName:"StyledCard",componentId:"sc-1mtjaok-0"})(["display:flex;flex-direction:column;position:relative;background:",";box-shadow:0 0 0 1px ",",",";border-radius:",";",";",";",";"],(function(e){return e.theme.palette.white}),(function(e){return e.theme.palette.transparentOffWhite}),(function(e){return e.theme.boxShadow}),(function(e){return e.theme.borderRadius}),(function(e){return e.wide&&(0,r.css)(["flex-direction:row;"])}),(function(e){return e.bar&&(0,r.css)(["border-top:3px solid ",";"],e.theme.palette[e.bar]||e.theme.palette.blue)}),(function(e){return e.shaped&&(0,r.css)(["box-shadow:none;background:transparent;"])}));t.StyledCard=s,s.defaultProps={theme:a.CalciteTheme};var c=r.default.div.withConfig({displayName:"StyledCardContent",componentId:"sc-1mtjaok-1"})(["padding:1rem;display:flex;flex-direction:column;flex:1 1 auto;word-wrap:break-word;",";",";"],(function(e){return e.wide&&(0,r.css)(["display:block;flex:1 1 75%;"])}),(function(e){return e.shaped&&(0,r.css)(["border:1px solid ",";box-shadow:",";padding-top:4rem;border-radius:",";"],(function(e){return e.theme.palette.transparentOffWhite}),(function(e){return e.theme.boxShadow}),(function(e){return e.theme.borderRadius}))}));t.StyledCardContent=c,c.defaultProps={theme:a.CalciteTheme};var l=(0,r.default)(o.CalciteFigure).withConfig({displayName:"StyledCardImageWrap",componentId:"sc-1mtjaok-2"})(["width:100%;position:relative;margin-bottom:0;flex:0 0 auto;",";",";"],(function(e){return e.shaped&&(0,r.css)(["margin-bottom:-3rem;padding:0 1.25rem;box-sizing:border-box;"])}),(function(e){return e.wide&&(0,r.css)(["position:relative;top:0;left:0;bottom:0;width:25%;overflow:hidden;margin-bottom:0;"])}));t.StyledCardImageWrap=l,l.defaultProps={theme:a.CalciteTheme};var u=r.default.img.withConfig({displayName:"StyledCardImage",componentId:"sc-1mtjaok-3"})(["width:100%;display:block;",";"],(function(e){return e.wide&&(0,r.css)(["width:auto;min-width:100%;max-width:none;height:100%;margin:0;display:block;position:absolute;"])}));t.StyledCardImage=u,u.defaultProps={theme:a.CalciteTheme};var d=r.default.figcaption.withConfig({displayName:"StyledCardImageCaption",componentId:"sc-1mtjaok-4"})(["background:",";color:",";font-style:normal;margin:0;width:100%;box-sizing:border-box;position:absolute;bottom:0;",";padding:0.35rem 1.25rem 0.35rem 1.25rem;"],(function(e){return e.theme.palette.opaqueWhite}),(function(e){return e.theme.palette.offBlack}),(0,i.fontSize)(-2));t.StyledCardImageCaption=d,d.defaultProps={theme:a.CalciteTheme};var f=(0,r.default)(o.CalciteH4).withConfig({displayName:"StyledCardTitle",componentId:"sc-1mtjaok-5"})(["margin-bottom:0.775rem;"]);t.StyledCardTitle=f,f.defaultProps={theme:a.CalciteTheme}},function(e,t,n){"use strict";n.d(t,"a",(function(){return $}));var r=n(14),i=n(2),a=n(3),o=n(5),s=n(6),c=n(4),l=n(139),u=n(78),d=n(27),f=n(51),p=n(285),h=["layerObjectAdded","layerObjectRemoved","layerObjectsAdded","layerObjectsRemoved","shaderTransformationChanged","objectTransformation","visibilityChanged","occlusionChanged","highlightChanged","objectGeometryAdded","objectGeometryRemoved","vertexAttrsUpdated"],b=n(145),v=n(11),y=n(57),m=n(86),g=function(){function e(t,n){Object(i.a)(this,e),this._objectToBoundingSphere=t,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new O,this._objectCount=0,n&&(void 0!==n.maximumObjectsPerNode&&(this._maximumObjectsPerNode=n.maximumObjectsPerNode),void 0!==n.maximumDepth&&(this._maximumDepth=n.maximumDepth))}return Object(a.a)(e,[{key:"bounds",get:function(){return this._root.bounds}},{key:"halfSize",get:function(){return this._root.halfSize}},{key:"root",get:function(){return this._root.node}},{key:"maximumObjectsPerNode",get:function(){return this._maximumObjectsPerNode}},{key:"maximumDepth",get:function(){return this._maximumDepth}},{key:"objectCount",get:function(){return this._objectCount}},{key:"destroy",value:function(){this._degenerateObjects.clear(),O.clearPool(),A[0]=null,N.prune(),q.prune()}},{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;this._objectCount+=t,this._grow(e,t);for(var n=O.acquire(),r=0;r<t;r++){var i=e[r];this._isDegenerate(i)?this._degenerateObjects.add(i):(n.init(this._root),this._add(i,n))}O.release(n)}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._objectCount-=e.length;var n,i=O.acquire(),a=Object(r.a)(e);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=Object(c.k)(t)?t:y.g.copy(this._objectToBoundingSphere(o),V);C(s[3])?(i.init(this._root),this._remove(o,s,i)):this._degenerateObjects.delete(o)}}catch(l){a.e(l)}finally{a.f()}O.release(i),this._shrink()}},{key:"update",value:function(e,t){if(C(t[3])||!this._isDegenerate(e)){var n=function(e){return A[0]=e,A}(e);this.remove(n,t),this.add(n)}}},{key:"forEachAlongRay",value:function(e,t,n){var r=this,i=y.f.wrap(e,t);this._forEachNode(this._root,(function(e){if(!r._intersectsNode(i,e))return!1;var t=e.node;return t.terminals.forAll((function(e){r._intersectsObject(i,e)&&n(e)})),null!==t.residents&&t.residents.forAll((function(e){r._intersectsObject(i,e)&&n(e)})),!0}))}},{key:"forEachAlongRayWithVerticalOffset",value:function(e,t,n,r){var i=this,a=y.f.wrap(e,t);this._forEachNode(this._root,(function(e){if(!i._intersectsNodeWithOffset(a,e,r))return!1;var t=e.node;return t.terminals.forAll((function(e){i._intersectsObjectWithOffset(a,e,r)&&n(e)})),null!==t.residents&&t.residents.forAll((function(e){i._intersectsObjectWithOffset(a,e,r)&&n(e)})),!0}))}},{key:"forEach",value:function(e){this._forEachNode(this._root,(function(t){var n=t.node;return n.terminals.forAll(e),null!==n.residents&&n.residents.forAll(e),!0})),this._degenerateObjects.forEach(e)}},{key:"forEachDegenerateObject",value:function(e){this._degenerateObjects.forEach(e)}},{key:"findClosest",value:function(e,t,n,r,i){return this._findClosest(e,"front-to-back"===t?1:-1,n,r,i)}},{key:"forEachInDepthRange",value:function(e,t,n,r,i,a,o,s){this._forEachInDepthRange(e,t,"front-to-back"===n?1:-1,r,i,a,o,s)}},{key:"forEachNode",value:function(e){this._forEachNode(this._root,(function(t){return e(t.node,t.bounds,t.halfSize)}))}},{key:"_intersectsNode",value:function(e,t){return _(t.bounds,2*-t.halfSize,F),_(t.bounds,2*t.halfSize,D),Object(m.i)(e.origin,e.direction,F,D)}},{key:"_intersectsNodeWithOffset",value:function(e,t,n){return _(t.bounds,2*-t.halfSize,F),_(t.bounds,2*t.halfSize,D),n.applyToMinMax(F,D),Object(m.i)(e.origin,e.direction,F,D)}},{key:"_intersectsObject",value:function(e,t){var n=this._objectToBoundingSphere(t);return!(n[3]>0)||y.g.intersectsRay(n,e)}},{key:"_intersectsObjectWithOffset",value:function(e,t,n){var r=this._objectToBoundingSphere(t);return!(r[3]>0)||y.g.intersectsRay(n.applyToBoundingSphere(r),e)}},{key:"_forEachNode",value:function(e,t){for(var n=O.acquire().init(e),r=[n];0!==r.length;){if(t(n=r.pop())&&!n.isLeaf())for(var i=0;i<n.node.children.length;i++)n.node.children[i]&&r.push(O.acquire().init(n).advance(i));O.release(n)}}},{key:"_forEachNodeDepthOrdered",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=O.acquire().init(e),a=[i];for(S(n,r,H);0!==a.length;){if(t(i=a.pop())&&!i.isLeaf())for(var o=7;o>=0;--o){var s=H[o];s>=i.node.children.length||i.node.children[s]&&a.push(O.acquire().init(i).advance(s))}O.release(i)}}},{key:"_findClosest",value:function(e,t,n,r,i){var a=this,o=1/0,s=1/0,c=null,l=T(e,t),u=0,d=function(i){if(++u,!r||r(i)){var l=a._objectToBoundingSphere(i);if(!n||!k(l,n)){var d=E(e,t,y.g.getCenter(l)),f=d-l[3],p=d+l[3];f<o&&(o=f,s=p,c=i)}}};return this._forEachNodeDepthOrdered(this._root,(function(r){if(null!=i&&u>=i)return!1;if(n&&k(r.bounds,n))return!1;if(Object(v.d)(L,l,r.halfSize),Object(v.e)(L,L,r.bounds),E(e,t,L)>s)return!1;var a=r.node;return a.terminals.forAll((function(e){d(e)})),null!==a.residents&&a.residents.forAll((function(e){d(e)})),!0}),e,t),c}},{key:"_forEachInDepthRange",value:function(e,t,n,r,i,a,o,s){var c=this,l=-1/0,u=1/0,d={setRange:function(e){1===n?(l=Math.max(l,e.near),u=Math.min(u,e.far)):(l=Math.max(l,-e.far),u=Math.min(u,-e.near))}};d.setRange(r);var f=E(t,n,e),p=T(t,n),h=T(t,-1*n),b=0,m=function(e){if(++b,!o||o(e)){var r=c._objectToBoundingSphere(e),s=y.g.getCenter(r),p=E(t,n,s)-f,h=p-r[3],v=p+r[3];h>u||v<l||a&&k(r,a)||i(e,d)}};this._forEachNodeDepthOrdered(this._root,(function(e){if(null!=s&&b>=s)return!1;if(a&&k(e.bounds,a))return!1;if(Object(v.d)(L,p,e.halfSize),Object(v.e)(L,L,e.bounds),E(t,n,L)-f>u)return!1;if(Object(v.d)(L,h,e.halfSize),Object(v.e)(L,L,e.bounds),E(t,n,L)-f<l)return!1;var r=e.node;return r.terminals.forAll((function(e){m(e)})),null!==r.residents&&r.residents.forAll((function(e){m(e)})),!0}),t,n)}},{key:"_remove",value:function(e,t,n){N.clear();var r=n.advanceTo(t,(function(e,t){N.push(e.node),N.push(t)}))?n.node.terminals:n.node.residents;if(r.removeUnordered(e),0===r.length)for(var i=N.length-2;i>=0;i-=2){var a=N.data[i],o=N.data[i+1];if(!this._purge(a,o))break}}},{key:"_nodeIsEmpty",value:function(e){if(0!==e.terminals.length)return!1;if(null!==e.residents)return 0===e.residents.length;for(var t=0;t<e.children.length;t++)if(e.children[t])return!1;return!0}},{key:"_purge",value:function(e,t){return t>=0&&(e.children[t]=null),!!this._nodeIsEmpty(e)&&(null===e.residents&&(e.residents=new l.a({shrink:!0})),!0)}},{key:"_add",value:function(e,t){t.advanceTo(this._objectToBoundingSphere(e))?t.node.terminals.push(e):(t.node.residents.push(e),t.node.residents.length>this._maximumObjectsPerNode&&t.depth<this._maximumDepth&&this._split(t))}},{key:"_split",value:function(e){var t=e.node.residents;e.node.residents=null;for(var n=0;n<t.length;n++){var r=O.acquire().init(e);this._add(t.getItemAt(n),r),O.release(r)}}},{key:"_grow",value:function(e,t){var n=this;if(0!==t&&(x(e,t,(function(e){return n._objectToBoundingSphere(e)}),z),C(z[3])&&!this._fitsInsideTree(z)))if(this._nodeIsEmpty(this._root.node))y.g.copy(z,this._root.bounds),this._root.halfSize=1.25*z[3];else{var r=this._rootBoundsForRootAsSubNode(z);this._placingRootViolatesMaxDepth(r)?this._rebuildTree(z,r):this._growRootAsSubNode(r),O.release(r)}}},{key:"_rebuildTree",value:function(e,t){var n=this;Object(v.j)(U,t.bounds),U[3]=t.halfSize,x([e,U],2,(function(e){return e}),B);var r=O.acquire().init(this._root);this._root.initFrom(null,B,1.25*B[3]),this._forEachNode(r,(function(e){return n.add(e.node.terminals.data,e.node.terminals.length),null!==e.node.residents&&n.add(e.node.residents.data,e.node.residents.length),!0})),O.release(r)}},{key:"_placingRootViolatesMaxDepth",value:function(e){var t=this,n=Math.log(e.halfSize/this._root.halfSize)*Math.LOG2E,r=0;return this._forEachNode(this._root,(function(e){return(r=Math.max(r,e.depth))+n<=t._maximumDepth})),r+n>this._maximumDepth}},{key:"_rootBoundsForRootAsSubNode",value:function(e){for(var t=e[3],n=e,r=-1/0,i=this._root.bounds,a=this._root.halfSize,o=0;o<3;o++){var s=i[o]-a-(n[o]-t),c=n[o]+t-(i[o]+a),l=Math.max(0,Math.ceil(s/(2*a))),u=Math.max(0,Math.ceil(c/(2*a)))+1,d=Math.pow(2,Math.ceil(Math.log(l+u)*Math.LOG2E));r=Math.max(r,d),G[o].min=l,G[o].max=u}for(var f=0;f<3;f++){var p=G[f].min,h=G[f].max,b=(r-(p+h))/2;p+=Math.ceil(b),h+=Math.floor(b);var v=i[f]-a-p*a*2;R[f]=v+(h+p)*a}return R[3]=r*a*M,O.acquire().initFrom(null,R,r*a,0)}},{key:"_growRootAsSubNode",value:function(e){var t=this._root.node;Object(v.j)(z,this._root.bounds),z[3]=this._root.halfSize,this._root.init(e),e.advanceTo(z,null,!0),e.node.children=t.children,e.node.residents=t.residents,e.node.terminals=t.terminals}},{key:"_shrink",value:function(){for(;;){var e=this._findShrinkIndex();if(-1===e)break;this._root.advance(e),this._root.depth=0}}},{key:"_findShrinkIndex",value:function(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;for(var e=null,t=this._root.node.children,n=0,r=0;r<t.length&&null==e;)e=t[n=r++];for(;r<t.length;)if(t[r++])return-1;return n}},{key:"_isDegenerate",value:function(e){return!C(this._objectToBoundingSphere(e)[3])}},{key:"_fitsInsideTree",value:function(e){var t=this._root.bounds,n=this._root.halfSize;return e[3]<=n&&e[0]>=t[0]-n&&e[0]<=t[0]+n&&e[1]>=t[1]-n&&e[1]<=t[1]+n&&e[2]>=t[2]-n&&e[2]<=t[2]+n}}]),e}(),O=function(){function e(){Object(i.a)(this,e),this.bounds=y.g.create(),this.halfSize=0,this.initFrom(null,null,0,0)}return Object(a.a)(e,[{key:"init",value:function(e){return this.initFrom(e.node,e.bounds,e.halfSize,e.depth)}},{key:"initFrom",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.depth;return this.node=Object(c.k)(t)?t:e.createEmptyNode(),Object(c.k)(n)&&y.g.copy(n,this.bounds),this.halfSize=r,this.depth=i,this}},{key:"advance",value:function(t){var n=this.node.children[t];n||(n=e.createEmptyNode(),this.node.children[t]=n),this.node=n,this.halfSize/=2,this.depth++;var r=P[t];return this.bounds[0]+=r[0]*this.halfSize,this.bounds[1]+=r[1]*this.halfSize,this.bounds[2]+=r[2]*this.halfSize,this.bounds[3]=this.halfSize*M,this}},{key:"advanceTo",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];;){if(this.isTerminalFor(e))return t&&t(this,-1),!0;if(this.isLeaf()){if(!n)return t&&t(this,-1),!1;this.node.residents=null}var r=this._childIndex(e);t&&t(this,r),this.advance(r)}}},{key:"isLeaf",value:function(){return null!=this.node.residents}},{key:"isTerminalFor",value:function(e){return e[3]>this.halfSize/2}},{key:"_childIndex",value:function(e){var t=this.bounds;return(t[0]<e[0]?1:0)+(t[1]<e[1]?2:0)+(t[2]<e[2]?4:0)}}],[{key:"createEmptyNode",value:function(){return{children:[null,null,null,null,null,null,null,null],terminals:new l.a({shrink:!0}),residents:new l.a({shrink:!0})}}},{key:"acquire",value:function(){return e._pool.acquire()}},{key:"release",value:function(t){e._pool.release(t)}},{key:"clearPool",value:function(){e._pool.prune()}}]),e}();function j(e,t){e[0]=Math.min(e[0],t[0]-t[3]),e[1]=Math.min(e[1],t[1]-t[3]),e[2]=Math.min(e[2],t[2]-t[3])}function w(e,t){e[0]=Math.max(e[0],t[0]+t[3]),e[1]=Math.max(e[1],t[1]+t[3]),e[2]=Math.max(e[2],t[2]+t[3])}function _(e,t,n){n[0]=e[0]+t,n[1]=e[1]+t,n[2]=e[2]+t}function k(e,t){return!y.c.intersectsSphere(t,e)}function x(e,t,n,r){if(1===t){var i=n(e[0]);y.g.copy(i,r)}else{F[0]=1/0,F[1]=1/0,F[2]=1/0,D[0]=-1/0,D[1]=-1/0,D[2]=-1/0;for(var a=0;a<t;a++){var o=n(e[a]);C(o[3])&&(j(F,o),w(D,o))}Object(v.h)(r,F,D,.5),r[3]=Math.max(D[0]-F[0],D[1]-F[1],D[2]-F[2])/2}}function S(e,t,n){if(!q.length)for(var r=0;r<8;++r)q.push({index:0,distance:0});for(var i=0;i<8;++i){var a=P[i];q.data[i].index=i,q.data[i].distance=E(e,t,a)}q.sort((function(e,t){return e.distance-t.distance}));for(var o=0;o<8;++o)n[o]=q.data[o].index}function T(e,t){for(var n=1/0,r=null,i=0;i<8;++i){var a=E(e,t,I[i]);a<n&&(n=a,r=I[i])}return r}function E(e,t,n){return t*(e[0]*n[0]+e[1]*n[1]+e[2]*n[2])}function C(e){return!isNaN(e)&&e!==-1/0&&e!==1/0&&e>0}O._pool=new b.a(O);var P=[Object(d.g)(-1,-1,-1),Object(d.g)(1,-1,-1),Object(d.g)(-1,1,-1),Object(d.g)(1,1,-1),Object(d.g)(-1,-1,1),Object(d.g)(1,-1,1),Object(d.g)(-1,1,1),Object(d.g)(1,1,1)],I=[Object(d.g)(-1,-1,-1),Object(d.g)(-1,-1,1),Object(d.g)(-1,1,-1),Object(d.g)(-1,1,1),Object(d.g)(1,-1,-1),Object(d.g)(1,-1,1),Object(d.g)(1,1,-1),Object(d.g)(1,1,1)],M=Math.sqrt(3),A=[null];var R=y.g.create(),L=Object(d.e)(),F=Object(d.e)(),D=Object(d.e)(),N=new l.a,V=y.g.create(),z=y.g.create(),U=y.g.create(),B=y.g.create(),G=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],q=new l.a,H=[0,0,0,0,0,0,0,0],W=g,$=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(i.a)(this,n),(r=t.call(this)).apiLayerUid=a,r.type=0,r.events=new u.a,r.isSliceable=!1,r._objects=new l.a,r._stageHandles=new f.a,r.apiLayerUid=a,e=e||{},r.group=e.group||"",r.isVisible=null==e.isVisible||e.isVisible,r.isPickable=null==e.isPickable||e.isPickable,r.translation=e.translation?Object(d.d)(e.translation):Object(d.e)(),r}return Object(a.a)(n,[{key:"destroy",value:function(){this.detachStage(),this._stage=null}},{key:"attachStage",value:function(e){var t=this;this.detachStage(),this._stage=e;var n,i=Object(r.a)(h);try{var a=function(){var r=n.value;t._stageHandles.add(t.events.on(r,(function(t){return e.handleEvent(r,t)})))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}}},{key:"detachStage",value:function(){this._stageHandles.removeAll(),this.invalidateSpatialQueryAccelerator()}},{key:"getObjectIds",value:function(){return this._objects.map((function(e){return e.id}))}},{key:"getObjects",value:function(){return this._objects}},{key:"add",value:function(e){this._objects.push(e),e.parentLayer=this,this.events.emit("layerObjectAdded",{layer:this,object:e}),Object(c.k)(this._octree)&&this._octree.add([e])}},{key:"remove",value:function(e){this._objects.removeUnordered(e)&&(e.parentLayer=null,this.events.emit("layerObjectRemoved",{layer:this,object:e}),Object(c.k)(this._octree)&&this._octree.remove([e]))}},{key:"addMany",value:function(e){this._objects.pushArray(e);var t,n=Object(r.a)(e);try{for(n.s();!(t=n.n()).done;){t.value.parentLayer=this}}catch(i){n.e(i)}finally{n.f()}this.events.emit("layerObjectsAdded",{layer:this,objects:e}),Object(c.k)(this._octree)&&this._octree.add(e)}},{key:"removeMany",value:function(e){var t=new Array;if(this._objects.removeUnorderedMany(e,e.length,t),0!==t.length){var n,i=Object(r.a)(t);try{for(i.s();!(n=i.n()).done;){n.value.parentLayer=null}}catch(a){i.e(a)}finally{i.f()}this.events.emit("layerObjectsRemoved",{layer:this,objects:t}),Object(c.k)(this._octree)&&this._octree.remove(t)}}},{key:"commit",value:function(){Object(c.k)(this._stage)&&this._stage.processDirtyLayer(this.id)}},{key:"notifyObjectBBChanged",value:function(e,t){Object(c.k)(this._octree)&&this._octree.update(e,t)}},{key:"getSpatialQueryAccelerator",value:function(){return Object(c.j)(this._octree)&&this._objects.length>50&&this._createOctree(),this._octree}},{key:"shaderTransformationChanged",value:function(){this.invalidateSpatialQueryAccelerator(),this.events.emit("shaderTransformationChanged",this)}},{key:"invalidateSpatialQueryAccelerator",value:function(){this._octree=Object(c.e)(this._octree)}},{key:"_createOctree",value:function(){this._octree=new W((function(e){return e.getBounds()})),this._octree.add(this._objects.data,this._objects.length)}}]),n}(p.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r,i,a,o,s,c,l,u=n(29),d=n(34),f=n(317);function p(e){e.fragment.uniforms.add("projInfo","vec4"),e.fragment.uniforms.add("zScale","vec2"),e.fragment.code.add(Object(d.a)(r||(r=Object(u.a)(["\n    vec3 reconstructPosition(vec2 fragCoord, float depth) {\n      return vec3((fragCoord * projInfo.xy + projInfo.zw) * (zScale.x * depth + zScale.y), depth);\n    }\n  "]))))}function h(e,t){e.extensions.add("GL_OES_standard_derivatives"),e.fragment.include(f.a),e.include(p),e.fragment.uniforms.add("glowColor","vec3"),e.fragment.uniforms.add("glowWidth","float"),e.fragment.uniforms.add("glowFalloff","float"),e.fragment.uniforms.add("innerColor","vec3"),e.fragment.uniforms.add("innerWidth","float"),e.fragment.uniforms.add("depthMap","sampler2D"),e.fragment.uniforms.add("nearFar","vec2"),e.fragment.uniforms.add("frameColor","sampler2D"),t.contrastControlEnabled&&e.fragment.uniforms.add("globalAlphaContrastBoost","float"),e.fragment.code.add(Object(d.a)(i||(i=Object(u.a)(["\n  vec4 blendPremultiplied(vec4 source, vec4 dest) {\n    float oneMinusSourceAlpha = 1.0 - source.a;\n\n    return vec4(\n      source.rgb + dest.rgb * oneMinusSourceAlpha,\n      source.a + dest.a * oneMinusSourceAlpha\n    );\n  }\n  "])))),e.fragment.code.add(Object(d.a)(a||(a=Object(u.a)(["\n  vec4 premultipliedColor(vec3 rgb, float alpha) {\n    return vec4(rgb * alpha, alpha);\n  }\n  "])))),e.fragment.code.add(Object(d.a)(o||(o=Object(u.a)(["\n  vec4 laserlineProfile(float dist) {\n    if (dist > glowWidth) {\n      return vec4(0.0);\n    }\n\n    float innerAlpha = (1.0 - smoothstep(0.0, innerWidth, dist));\n    float glowAlpha = pow(max(0.0, 1.0 - dist / glowWidth), glowFalloff);\n\n    return blendPremultiplied(\n      premultipliedColor(innerColor, innerAlpha),\n      premultipliedColor(glowColor, glowAlpha)\n    );\n  }\n  "])))),e.fragment.code.add(Object(d.a)(s||(s=Object(u.a)(["\n  bool laserlineReconstructFromDepth(out vec3 pos, out vec3 normal, out float depthDiscontinuityAlpha) {\n    float depth = linearDepthFromTexture(depthMap, uv, nearFar);\n\n    if (-depth == nearFar[0]) {\n      return false;\n    }\n\n    pos = reconstructPosition(gl_FragCoord.xy, depth);\n    normal = normalize(cross(dFdx(pos), dFdy(pos)));\n\n    float ddepth = fwidth(depth);\n    depthDiscontinuityAlpha = 1.0 - smoothstep(0.0, 0.01, -ddepth / depth);\n\n    return true;\n  }\n  "])))),t.contrastControlEnabled?e.fragment.code.add(Object(d.a)(c||(c=Object(u.a)(["\n    float rgbToLuminance(vec3 color) {\n      return dot(vec3(0.2126, 0.7152, 0.0722), color);\n    }\n\n    vec4 laserlineOutput(vec4 color) {\n      float backgroundLuminance = rgbToLuminance(texture2D(frameColor, uv).rgb);\n      float alpha = clamp(globalAlpha * max(backgroundLuminance * globalAlphaContrastBoost, 1.0), 0.0, 1.0);\n\n      return color * alpha;\n    }\n    "])))):e.fragment.code.add(Object(d.a)(l||(l=Object(u.a)(["\n    vec4 laserlineOutput(vec4 color) {\n      return color * globalAlpha;\n    }\n    "]))))}},function(e,t,n){"use strict";var r=n(103);t.a=function(e,t){var n;void 0===t&&(t=!0);var i=new Promise((function(r){n=setTimeout(r,e,t)}));return i[r.a]=function(){clearTimeout(n)},i}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(303),i=n(353);function a(e,t){var n=Object(r.b)(e)||t,a=Object(r.a)(e);if(n){var o=new FormData;return Object.keys(a).forEach((function(e){if("undefined"!==typeof Blob&&a[e]instanceof Blob){var t=a.fileName||a[e].name||e;o.append(e,a[e],t)}else o.append(e,a[e])})),o}return Object(i.b)(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(67);function i(e,t,n){void 0===n&&(n="https://www.arcgis.com/sharing/rest");var i=n+"/oauth2/validateAppAccess",a={method:"POST",params:{f:"json",client_id:t,token:e}};return Object(r.d)(i,a)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return u}));var r=n(23),i=n(67),a=n(52),o=n(101);function s(e){return Object(o.a)(e).then((function(t){var n=e.folderId?Object(a.a)(e)+"/content/users/"+t+"/"+e.folderId+"/items/"+e.item.id+"/update":Object(a.a)(e)+"/content/users/"+t+"/items/"+e.item.id+"/update";return e.params=Object(r.a)(Object(r.a)({},e.params),Object(o.b)(e.item)),Object(i.d)(n,e)}))}function c(e){return Object(o.a)(e).then((function(t){var n=Object(a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/updateinfo";return e.params=Object(r.a)({folderName:e.folderName,file:e.file},e.params),Object(i.d)(n,e)}))}function l(e){return Object(o.a)(e).then((function(t){var n=Object(a.a)(e)+"/content/users/"+t+"/items/"+e.id+"/updateResources";return e.params=Object(r.a)({file:e.resource,fileName:e.name,text:e.content},e.params),"undefined"!==typeof e.private&&(e.params.access=e.private?"private":"inherit"),Object(i.d)(n,e)}))}function u(e){return Object(o.a)(e).then((function(t){var n=Object(a.a)(e)+"/content/users/"+t+"/items/"+e.itemId+"/move",o=e.folderId;return o||(o="/"),e.params=Object(r.a)({folder:o},e.params),Object(i.d)(n,e)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=/[\x00-\x1F\x7F-\x9F\xA0]/g;function i(e){return e.replace(r,"")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return d}));var r=n(23),i=n(67),a=n(292),o=n(52);function s(e,t){var n=Object(o.a)(t)+"/community/groups/"+e,a=Object(r.a)({httpMethod:"GET"},t);return Object(i.d)(n,a)}function c(e,t){var n=Object(o.a)(t)+"/community/groups/"+e+"/categorySchema",a=Object(r.a)({httpMethod:"GET"},t);return Object(i.d)(n,a)}function l(e,t){var n=Object(o.a)(t)+"/content/groups/"+e,a=Object(r.a)(Object(r.a)({httpMethod:"GET"},{params:{start:1,num:100}}),t);return t&&t.paging&&(a.params=Object(r.a)({},t.paging)),Object(i.d)(n,a)}function u(e,t){var n=Object(o.a)(t)+"/community/groups/"+e+"/users",a=Object(r.a)({httpMethod:"GET"},t);return Object(i.d)(n,a)}function d(e,t){var n=Object(o.a)(t)+"/community/groups/"+e+"/userlist",r=Object(a.a)(t||{},["name","num","start","sortField","sortOrder","joined","memberType"],{httpMethod:"GET"});return Object(i.d)(n,r)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(362);function i(e){return Object(r.a)(e,"item")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(23),i=n(67),a=n(52),o=n(331);function s(e){var t=e.id,n=Object(a.a)(e)+"/community/groups/"+t+"/addUsers",o=Object.assign({},e,{admins:void 0,users:void 0}),s=Object(r.d)(c("users",e.users,o),c("admins",e.admins,o)).map((function(e){return function(e,t){return Object(i.d)(e,t).catch((function(e){return{errors:[e]}}))}(n,e)}));return Promise.all(s).then(l)}function c(e,t,n){return!t||t.length<1?[]:Object(o.a)(t,25).map((function(t){return function(e,t,n){var i,a;return Object.assign({},n,((i={})[e]=t,i.params=Object(r.a)(Object(r.a)({},n.params),((a={})[e]=t,a)),i))}(e,t,n)}))}function l(e){var t=e.filter((function(e){return e.notAdded})).reduce((function(e,t){return e.concat(t.notAdded)}),[]),n=e.filter((function(e){return e.errors})).reduce((function(e,t){return e.concat(t.errors)}),[]),r={notAdded:t};return n.length>0&&(r.errors=n),r}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(23),i=n(67),a=n(52),o=n(331);function s(e){var t=e.id,n=e.users,s=Object(a.a)(e)+"/community/groups/"+t+"/removeUsers",c=Object(o.a)(n,25).map((function(t){return function(t){var n=Object(r.a)(Object(r.a)({},e),{users:t,params:{users:t}});return Object(i.d)(s,n).catch((function(e){return{errors:[e]}}))}(t)}));return Promise.all(c).then((function(e){var t=function(t){return e.filter((function(e){return e[t]})).reduce((function(e,n){return e.concat(n[t])}),[])},n=t("errors"),i={notRemoved:t("notRemoved")};return n.length?Object(r.a)(Object(r.a)({},i),{errors:n}):i}))}},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(8),d=(n(12),n(19),n(20),n(28)),f=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).name=null,r.title=null,r.expression=null,r.returnType=null,r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}}]),n}(d.a);Object(c.a)([Object(l.b)({type:String,json:{write:!0}})],f.prototype,"name",void 0),Object(c.a)([Object(l.b)({type:String,json:{write:!0}})],f.prototype,"title",void 0),Object(c.a)([Object(l.b)({type:String,json:{write:!0}})],f.prototype,"expression",void 0),Object(c.a)([Object(l.b)({type:["string","number"],json:{write:!0}})],f.prototype,"returnType",void 0);var p=f=r=Object(c.a)([Object(u.a)("esri.popup.ExpressionInfo")],f);t.a=p},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(22)),u=(n(13),n(17),n(1)),d=n(8),f=(n(12),n(19),n(20),n(28)),p=n(39),h=n(127),b=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).color=new p.a("white"),e}return Object(a.a)(n,[{key:"clone",value:function(){return new r({color:Object(l.a)(this.color)})}}]),n}(f.a);Object(c.a)([Object(u.b)(h.a)],b.prototype,"color",void 0);var v=b=r=Object(c.a)([Object(d.a)("esri.symbols.callouts.LineCallout3DBorder")],b);Object.freeze({__proto__:null,get LineCallout3DBorder(){return b},default:v})},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(22)),u=n(4),d=(n(13),n(17),n(1)),f=n(49),p=n(8),h=(n(12),n(19),n(20),n(39)),b=n(38),v=n(127),y=n(538),m=n(500),g=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).type="line",r.color=new h.a([0,0,0,1]),r.size=Object(b.h)(1),r.border=null,r}return Object(a.a)(n,[{key:"visible",get:function(){return this.size>0&&Object(u.k)(this.color)&&this.color.a>0}},{key:"clone",value:function(){return new r({color:Object(l.a)(this.color),size:this.size,border:Object(l.a)(this.border)})}}]),n}(y.a);Object(c.a)([Object(f.a)({line:"line"},{readOnly:!0})],g.prototype,"type",void 0),Object(c.a)([Object(d.b)(v.a)],g.prototype,"color",void 0),Object(c.a)([Object(d.b)(v.b)],g.prototype,"size",void 0),Object(c.a)([Object(d.b)({type:m.a,json:{write:!0}})],g.prototype,"border",void 0),Object(c.a)([Object(d.b)({readOnly:!0})],g.prototype,"visible",null);var O=g=r=Object(c.a)([Object(p.a)("esri.symbols.callouts.LineCallout3D")],g);t.a=O},function(e,t,n){"use strict";function r(e,t,n,r){var i=null,a=1e3;"number"==typeof t?(a=t,r=n):(i=null!=t?t:null,a=n);var o,s=0,c=function(){s=0,e.apply(r,o)},l=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i&&i.apply(r,t),o=t,a?s||(s=setTimeout(c,a)):c()};return l.remove=function(){s&&(clearTimeout(s),s=0)},l.forceUpdate=function(){s&&(clearTimeout(s),c())},l.hasPendingUpdates=function(){return!!s},l}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(22)),u=(n(13),n(17),n(1)),d=n(47),f=n(8),p=n(42),h=(n(12),n(19),n(20),n(28)),b=new d.a({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"}),v=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).maxPointCount=void 0,r.maxRecordCount=void 0,r.maxVertexCount=void 0,r.onStatisticField=null,r.outStatisticFieldName=null,r.statisticType=null,r.statisticParameters=null,r}return Object(a.a)(n,[{key:"writeStatisticParameters",value:function(e,t){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(t.statisticParameters=Object(l.a)(e))}},{key:"clone",value:function(){return new r({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:Object(l.a)(this.statisticParameters)})}}]),n}(h.a);Object(c.a)([Object(u.b)({type:Number,json:{write:!0}})],v.prototype,"maxPointCount",void 0),Object(c.a)([Object(u.b)({type:Number,json:{write:!0}})],v.prototype,"maxRecordCount",void 0),Object(c.a)([Object(u.b)({type:Number,json:{write:!0}})],v.prototype,"maxVertexCount",void 0),Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],v.prototype,"onStatisticField",void 0),Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],v.prototype,"outStatisticFieldName",void 0),Object(c.a)([Object(u.b)({type:String,json:{read:{source:"statisticType",reader:b.read},write:{target:"statisticType",writer:b.write}}})],v.prototype,"statisticType",void 0),Object(c.a)([Object(u.b)({type:Object})],v.prototype,"statisticParameters",void 0),Object(c.a)([Object(p.a)("statisticParameters")],v.prototype,"writeStatisticParameters",null);var y=v=r=Object(c.a)([Object(f.a)("esri.tasks.support.StatisticDefinition")],v);t.a=y},function(e,t,n){"use strict";var r=n(2),i=n(3),a=function(){function e(){Object(r.a)(this,e),this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}return Object(i.a)(e,[{key:"weakClone",value:function(){var t=new e;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}]),e}();t.a=a},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(8),d=n(42),f=n(18),p=(n(12),n(19),n(20),n(283)),h=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).axis=null,r.type="rotation",r.rotationType="geographic",r.valueExpressionTitle=null,r}return Object(a.a)(n,[{key:"cache",get:function(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}},{key:"writeValueExpressionTitleWebScene",value:function(e,t,n,r){if(r&&r.messages){var i="visualVariables[".concat(this.index,"]");r.messages.push(new f.a("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:i+".valueExpressionTitle",context:r}))}}},{key:"clone",value:function(){return new r({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}}]),n}(p.a);Object(c.a)([Object(l.b)({readOnly:!0})],h.prototype,"cache",null),Object(c.a)([Object(l.b)({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],h.prototype,"axis",void 0),Object(c.a)([Object(l.b)({type:["rotation"],json:{type:["rotationInfo"]}})],h.prototype,"type",void 0),Object(c.a)([Object(l.b)({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],h.prototype,"rotationType",void 0),Object(c.a)([Object(l.b)({type:String,json:{write:!0}})],h.prototype,"valueExpressionTitle",void 0),Object(c.a)([Object(d.a)("web-scene","valueExpressionTitle")],h.prototype,"writeValueExpressionTitleWebScene",null);var b=h=r=Object(c.a)([Object(u.a)("esri.renderers.visualVariables.RotationVariable")],h);t.a=b},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n(31),i=n(14),a=n(2),o=n(3),s=n(139),c=function(){function e(t,n,r){Object(a.a)(this,e),this._namespace=t,this._storage=n,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}return Object(o.a)(e,[{key:"destroy",value:function(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}},{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}},{key:"resetHitRate",value:function(){this._hit=this._miss=0}},{key:"put",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this._storage.put(this._namespace+e,t,n,r)}},{key:"get",value:function(e){var t=this._storage.get(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}},{key:"pop",value:function(e){var t=this._storage.pop(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}},{key:"updateSize",value:function(e,t,n){this._storage.updateSize(this._namespace+e,t,n)}},{key:"clear",value:function(){this._storage.clear(this._namespace)}},{key:"clearAll",value:function(){this._storage.clearAll()}},{key:"getStats",value:function(){return this._storage.getStats()}},{key:"resetStats",value:function(){this._storage.resetStats()}}]),e}(),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10485760;Object(a.a)(this,e),this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new s.a,this._users=new s.a}return Object(o.a)(e,[{key:"destroy",value:function(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}},{key:"register",value:function(e){this._users.push(e)}},{key:"deregister",value:function(e){this._users.removeUnordered(e)}},{key:"registerRemoveFunc",value:function(e,t){this._removeFuncs.push([e,t])}},{key:"deregisterRemoveFunc",value:function(e){this._removeFuncs.filterInPlace((function(t){return t[0]!==e}))}},{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()}},{key:"put",value:function(e,t,n,r){var i=this._db.get(e);if(i&&(this._size-=i.size,this._db.delete(e),i.entry!==t&&this._notifyRemoved(e,i.entry)),n>this._maxSize)this._notifyRemoved(e,t);else if(void 0!==t)if(!n||n<0)console.warn("Refusing to cache entry with invalid size "+n);else{var a=1+Math.max(r,-3)- -3;this._db.set(e,{entry:t,size:n,lifetime:a,lives:a}),this._size+=n,this._checkSizeLimit()}else console.warn("Refusing to cache undefined entry ")}},{key:"updateSize",value:function(e,t,n){var r=this._db.get(e);if(r&&r.entry===t){if(this._size-=r.size,n>this._maxSize)return this._db.delete(e),void this._notifyRemoved(e,t);r.size=n,this._size+=n,this._checkSizeLimit()}}},{key:"pop",value:function(e){var t=this._db.get(e);if(t)return this._size-=t.size,this._db.delete(e),++this._hit,t.entry;++this._miss}},{key:"get",value:function(e){var t=this._db.get(e);if(void 0!==t)return this._db.delete(e),t.lives=t.lifetime,this._db.set(e,t),++this._hit,t.entry;++this._miss}},{key:"getStats",value:function(){var e=this,t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},n={},r=new Array;this._db.forEach((function(t,i){var a=t.lifetime;r[a]=(r[a]||0)+t.size,e._users.forAll((function(e){var r=e.namespace;if(i.startsWith(r)){var a=n[r]||0;n[r]=a+t.size}}))}));var i={};this._users.forAll((function(e){var t=e.namespace;if(!isNaN(e.hitRate)&&e.hitRate>0){var r=n[t]||0;n[t]=r,i[t]=Math.round(100*e.hitRate)+"%"}else i[t]="0%"}));var a=Object.keys(n);a.forEach((function(t){return n[t]=n[t]/e._size*100})),a.sort((function(e,t){return n[t]-n[e]})),a.forEach((function(e){return t[e]=Math.round(n[e])+"% / "+i[e]}));for(var o=r.length-1;o>=0;--o){var s=r[o];s&&(t["Priority "+(o+-3-1)]=Math.round(s/this.size*100)+"%")}return t}},{key:"resetStats",value:function(){this._hit=this._miss=0,this._users.forAll((function(e){return e.resetHitRate()}))}},{key:"clear",value:function(e){var t=this;this._db.forEach((function(n,r){r.startsWith(e)&&(t._size-=n.size,t._db.delete(r),t._notifyRemoved(r,n.entry))}))}},{key:"clearAll",value:function(){var e=this;this._db.forEach((function(t,n){return e._notifyRemoved(n,t.entry)})),this._size=0,this._db.clear()}},{key:"_getHitRate",value:function(){return this._hit/(this._hit+this._miss)}},{key:"_notifyRemoved",value:function(e,t){this._removeFuncs.forAll((function(n){e.startsWith(n[0])&&n[1](t)}))}},{key:"_checkSizeLimit",value:function(){if(!(this._size<=this._maxSize)){var e,t=Object(i.a)(this._db);try{for(t.s();!(e=t.n()).done;){var n=Object(r.a)(e.value,2),a=n[0],o=n[1];if(this._db.delete(a),o.lives<=1?(this._size-=o.size,this._notifyRemoved(a,o.entry)):(--o.lives,this._db.set(a,o)),this._size<=.9*this.maxSize)return}}catch(s){t.e(s)}finally{t.f()}}}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(2),i=n(5),a=n(6),o=n(0),s=(n(16),n(13),n(17),n(1)),c=n(8),l=(n(12),n(19),n(20),function(e){var t=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).customParameters=null,e}return n}(e);return Object(o.a)([Object(s.b)({json:{write:!0,origins:{"web-scene":{write:!1}}}})],t.prototype,"customParameters",void 0),t=Object(o.a)([Object(c.a)("esri.layers.mixins.CustomParametersMixin")],t)})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var r=n(10),i=n(142),a={type:i.a,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:o}}}}};function o(e,t,n,a){if(!e)return null;var o=t.minScale,s=t.maxScale,c=t.minLOD,l=t.maxLOD;if(null!=c&&null!=l)return a&&a.ignoreMinMaxLOD?i.a.fromJSON(e):i.a.fromJSON(Object(r.a)(Object(r.a)({},e),{},{lods:e.lods.filter((function(e){var t=e.level;return null!=t&&t>=c&&t<=l}))}));if(0!==o&&0!==s){var u=function(e){return Math.round(1e4*e)/1e4},d=o?u(o):1/0,f=s?u(s):-1/0;return i.a.fromJSON(Object(r.a)(Object(r.a)({},e),{},{lods:e.lods.filter((function(e){var t=u(e.scale);return t<=d&&t>=f}))}))}return i.a.fromJSON(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return i}));var r=n(14);function i(e,t,n){return t.flatten((function(e){return e.sublayers})).length!==e.length||(!!e.some((function(e){return e.originIdOf("minScale")>n||e.originIdOf("maxScale")>n||e.originIdOf("renderer")>n||e.originIdOf("labelingInfo")>n||e.originIdOf("opacity")>n||e.originIdOf("labelsVisible")>n||e.originIdOf("source")>n}))||!o(e,t))}function a(e,t,n){return!!e.some((function(e){var t=e.source;return!(!t||"map-layer"===t.type&&t.mapLayerId===e.id&&(!t.gdbVersion||t.gdbVersion===n.gdbVersion))||e.originIdOf("renderer")>2||e.originIdOf("labelingInfo")>2||e.originIdOf("opacity")>2||e.originIdOf("labelsVisible")>2}))||!o(e,t)}function o(e,t){if(!e||!e.length)return!0;var n=t.slice().reverse().flatten((function(e){var t=e.sublayers;return t&&t.toArray().reverse()})).map((function(e){return e.id})).toArray();if(e.length>n.length)return!1;var i,a=0,o=n.length,s=Object(r.a)(e);try{for(s.s();!(i=s.n()).done;){for(var c=i.value.id;a<o&&n[a]!==c;)a++;if(a>=o)return!1}}catch(l){s.e(l)}finally{s.f()}return!0}function s(e){return!!e&&e.some((function(e){return null!=e.minScale||e.layerDefinition&&null!=e.layerDefinition.minScale}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u}));var r,i,a,o,s=n(29),c=n(34),l=n(550);function u(e,t){t.multipassGeometryEnabled&&e.vertex.include(l.b),e.vertex.code.add(Object(c.a)(r||(r=Object(s.a)(["\n  void main(void) {\n    vec4 posProjCenter;\n    if (dot(position, position) > 0.0) {\n      // Render single point to center of the pixel to avoid subpixel\n      // filtering to affect the marker color\n      ProjectHUDAux projectAux;\n      vec4 posProj = projectPositionHUD(projectAux);\n      posProjCenter = alignToPixelCenter(posProj, viewport.zw);\n\n      ","\n\n      vec3 vpos = projectAux.posModel;\n      if (rejectBySlice(vpos)) {\n        // Project out of clip space\n        posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);\n      }\n\n    }\n    else {\n      // Project out of clip space\n      posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);\n    }\n\n    gl_Position = posProjCenter;\n    gl_PointSize = 1.0;\n  }\n  "])),t.multipassGeometryEnabled?Object(c.a)(i||(i=Object(s.a)(["\n        // Don't draw vertices behind geometry\n        if(geometryDepthTest(.5 + .5 * posProjCenter.xy / posProjCenter.w, projectAux.posView.z)){\n          posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);\n        }"]))):"")),e.fragment.uniforms.add("color","vec4"),e.fragment.code.add(Object(c.a)(a||(a=Object(s.a)(["\n  void main() {\n    gl_FragColor = color;\n  }\n  "]))))}(o||(o={})).bindUniforms=function(e){e.setUniform4f("color",1,1,1,1)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(7),i=n.n(r),a=n(15),o=n(95),s=new Map([["ar",function(){return Promise.all([n.e(0),n.e(252)]).then(n.t.bind(null,916,7))}],["ar-dz",function(){return Promise.all([n.e(0),n.e(246)]).then(n.t.bind(null,917,7))}],["ar-kw",function(){return Promise.all([n.e(0),n.e(247)]).then(n.t.bind(null,918,7))}],["ar-ly",function(){return Promise.all([n.e(0),n.e(248)]).then(n.t.bind(null,919,7))}],["ar-ma",function(){return Promise.all([n.e(0),n.e(249)]).then(n.t.bind(null,920,7))}],["ar-sa",function(){return Promise.all([n.e(0),n.e(250)]).then(n.t.bind(null,921,7))}],["ar-tn",function(){return Promise.all([n.e(0),n.e(251)]).then(n.t.bind(null,922,7))}],["bs",function(){return Promise.all([n.e(0),n.e(253)]).then(n.t.bind(null,923,7))}],["ca",function(){return Promise.all([n.e(0),n.e(254)]).then(n.t.bind(null,924,7))}],["cs",function(){return Promise.all([n.e(0),n.e(255)]).then(n.t.bind(null,925,7))}],["da",function(){return Promise.all([n.e(0),n.e(256)]).then(n.t.bind(null,926,7))}],["de",function(){return Promise.all([n.e(0),n.e(259)]).then(n.t.bind(null,927,7))}],["de-at",function(){return Promise.all([n.e(0),n.e(257)]).then(n.t.bind(null,928,7))}],["de-ch",function(){return Promise.all([n.e(0),n.e(258)]).then(n.t.bind(null,929,7))}],["el",function(){return Promise.all([n.e(0),n.e(260)]).then(n.t.bind(null,930,7))}],["en-au",function(){return Promise.all([n.e(0),n.e(261)]).then(n.t.bind(null,931,7))}],["en-ca",function(){return Promise.all([n.e(0),n.e(262)]).then(n.t.bind(null,932,7))}],["en-gb",function(){return Promise.all([n.e(0),n.e(263)]).then(n.t.bind(null,933,7))}],["en-ie",function(){return Promise.all([n.e(0),n.e(264)]).then(n.t.bind(null,934,7))}],["en-il",function(){return Promise.all([n.e(0),n.e(265)]).then(n.t.bind(null,935,7))}],["en-in",function(){return Promise.all([n.e(0),n.e(266)]).then(n.t.bind(null,936,7))}],["en-nz",function(){return Promise.all([n.e(0),n.e(267)]).then(n.t.bind(null,937,7))}],["en-sg",function(){return Promise.all([n.e(0),n.e(268)]).then(n.t.bind(null,938,7))}],["es",function(){return Promise.all([n.e(0),n.e(272)]).then(n.t.bind(null,939,7))}],["es-do",function(){return Promise.all([n.e(0),n.e(269)]).then(n.t.bind(null,940,7))}],["es-mx",function(){return Promise.all([n.e(0),n.e(270)]).then(n.t.bind(null,941,7))}],["es-us",function(){return Promise.all([n.e(0),n.e(271)]).then(n.t.bind(null,942,7))}],["et",function(){return Promise.all([n.e(0),n.e(273)]).then(n.t.bind(null,943,7))}],["fi",function(){return Promise.all([n.e(0),n.e(274)]).then(n.t.bind(null,944,7))}],["fr",function(){return Promise.all([n.e(0),n.e(277)]).then(n.t.bind(null,945,7))}],["fr-ca",function(){return Promise.all([n.e(0),n.e(275)]).then(n.t.bind(null,946,7))}],["fr-ch",function(){return Promise.all([n.e(0),n.e(276)]).then(n.t.bind(null,947,7))}],["he",function(){return Promise.all([n.e(0),n.e(278)]).then(n.t.bind(null,948,7))}],["hr",function(){return Promise.all([n.e(0),n.e(279)]).then(n.t.bind(null,949,7))}],["hu",function(){return Promise.all([n.e(0),n.e(280)]).then(n.t.bind(null,950,7))}],["id",function(){return Promise.all([n.e(0),n.e(281)]).then(n.t.bind(null,951,7))}],["it",function(){return Promise.all([n.e(0),n.e(283)]).then(n.t.bind(null,952,7))}],["it-ch",function(){return Promise.all([n.e(0),n.e(282)]).then(n.t.bind(null,953,7))}],["ja",function(){return Promise.all([n.e(0),n.e(284)]).then(n.t.bind(null,954,7))}],["ko",function(){return Promise.all([n.e(0),n.e(285)]).then(n.t.bind(null,955,7))}],["lt",function(){return Promise.all([n.e(0),n.e(286)]).then(n.t.bind(null,956,7))}],["lv",function(){return Promise.all([n.e(0),n.e(287)]).then(n.t.bind(null,957,7))}],["nb",function(){return Promise.all([n.e(0),n.e(288)]).then(n.t.bind(null,958,7))}],["nl",function(){return Promise.all([n.e(0),n.e(290)]).then(n.t.bind(null,959,7))}],["nl-be",function(){return Promise.all([n.e(0),n.e(289)]).then(n.t.bind(null,960,7))}],["pl",function(){return Promise.all([n.e(0),n.e(291)]).then(n.t.bind(null,961,7))}],["pt",function(){return Promise.all([n.e(0),n.e(293)]).then(n.t.bind(null,962,7))}],["pt-br",function(){return Promise.all([n.e(0),n.e(292)]).then(n.t.bind(null,963,7))}],["ro",function(){return Promise.all([n.e(0),n.e(294)]).then(n.t.bind(null,964,7))}],["ru",function(){return Promise.all([n.e(0),n.e(295)]).then(n.t.bind(null,965,7))}],["sk",function(){return Promise.all([n.e(0),n.e(296)]).then(n.t.bind(null,966,7))}],["sl",function(){return Promise.all([n.e(0),n.e(297)]).then(n.t.bind(null,967,7))}],["sr",function(){return Promise.all([n.e(0),n.e(299)]).then(n.t.bind(null,968,7))}],["sr-cyrl",function(){return Promise.all([n.e(0),n.e(298)]).then(n.t.bind(null,969,7))}],["sv",function(){return Promise.all([n.e(0),n.e(300)]).then(n.t.bind(null,970,7))}],["th",function(){return Promise.all([n.e(0),n.e(301)]).then(n.t.bind(null,971,7))}],["tr",function(){return Promise.all([n.e(0),n.e(302)]).then(n.t.bind(null,972,7))}],["uk",function(){return Promise.all([n.e(0),n.e(303)]).then(n.t.bind(null,973,7))}],["vi",function(){return Promise.all([n.e(0),n.e(304)]).then(n.t.bind(null,974,7))}],["zh-cn",function(){return Promise.all([n.e(0),n.e(305)]).then(n.t.bind(null,975,7))}],["zh-hk",function(){return Promise.all([n.e(0),n.e(306)]).then(n.t.bind(null,976,7))}],["zh-mo",function(){return Promise.all([n.e(0),n.e(307)]).then(n.t.bind(null,977,7))}],["zh-tw",function(){return Promise.all([n.e(0),n.e(308)]).then(n.t.bind(null,978,7))}]]);function c(){return l.apply(this,arguments)}function l(){return(l=Object(a.a)(i.a.mark((function e(){var t,r,a,c,l=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:Object(o.b)(),e.next=3,n.e(0).then(n.t.bind(null,908,7));case 3:if(r=e.sent.default,(a=s.has(t))||(c=t.split("-")).length>1&&s.has(c[0])&&(t=c[0],a=!0),!a){e.next=11;break}return e.next=9,s.get(t)();case 9:e.next=12;break;case 11:t="en";case 12:return t!==r.locale()&&r.locale(t),e.abrupt("return",r);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,n){"use strict";var r,i=n(10),a=n(2),o=n(3),s=n(5),c=n(6),l=n(0),u=(n(16),n(22)),d=(n(13),n(17),n(1)),f=n(47),p=n(8),h=n(42),b=(n(12),n(19),n(20),n(28)),v=n(68),y=n(71),m=n(207),g=n(121),O=new f.a({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),j=new f.a({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),w=r=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).where=null,r.geometry=null,r.spatialRelationship="intersects",r.hiddenIds=new Set,r.distance=void 0,r.objectIds=null,r.units=null,r.timeExtent=null,r.enabled=!1,r}return Object(o.a)(n,[{key:"writeWhere",value:function(e,t){t.where=e||"1=1"}},{key:"enable",value:function(){this._set("enabled",!0)}},{key:"createQuery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.where,n=this.geometry,r=this.spatialRelationship,a=this.timeExtent,o=this.objectIds,s=this.units,c=this.distance;return new g.a(Object(i.a)({geometry:Object(u.a)(n),objectIds:Object(u.a)(o),spatialRelationship:r,timeExtent:Object(u.a)(a),where:t,units:s,distance:c},e))}},{key:"clone",value:function(){var e=this.where,t=this.geometry,n=this.spatialRelationship,i=this.hiddenIds,a=this.timeExtent,o=this.objectIds,s=this.units,c=this.distance,l=new Set;return i.forEach((function(e){return l.add(e)})),new r({geometry:Object(u.a)(t),hiddenIds:l,objectIds:Object(u.a)(o),spatialRelationship:n,timeExtent:Object(u.a)(a),where:e,units:s,distance:c})}}]),n}(b.a);Object(l.a)([Object(d.b)({type:String})],w.prototype,"where",void 0),Object(l.a)([Object(h.a)("where")],w.prototype,"writeWhere",null),Object(l.a)([Object(d.b)({types:y.c,json:{read:v.a,write:!0}})],w.prototype,"geometry",void 0),Object(l.a)([Object(d.b)({type:String,json:{read:{source:"spatialRel",reader:O.read},write:{target:"spatialRel",writer:O.write}}})],w.prototype,"spatialRelationship",void 0),Object(l.a)([Object(d.b)({json:{write:function(e,t,n){return t[n]=Array.from(e)},read:function(e){return new Set(e)}}})],w.prototype,"hiddenIds",void 0),Object(l.a)([Object(d.b)({type:Number,json:{write:{overridePolicy:function(e){return{enabled:e>0}}}}})],w.prototype,"distance",void 0),Object(l.a)([Object(d.b)({type:[Number],json:{write:!0}})],w.prototype,"objectIds",void 0),Object(l.a)([Object(d.b)({type:String,json:{read:j.read,write:{writer:j.write,overridePolicy:function(e){return{enabled:e&&this.distance>0}}}}})],w.prototype,"units",void 0),Object(l.a)([Object(d.b)({type:m.a,json:{write:!0}})],w.prototype,"timeExtent",void 0),Object(l.a)([Object(d.b)({readOnly:!0})],w.prototype,"enabled",void 0);var _=w=r=Object(l.a)([Object(p.a)("esri.views.layers.support.FeatureFilter")],w);t.a=_},function(e,t,n){"use strict";n.r(t);var r=n(10),i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13)),u=n(1),d=n(32),f=n(58),p=n(8),h=n(12),b=(n(19),n(20),n(51)),v=n(25),y=n(56),m=n(75),g=n(9),O=n(72),j=(n(17),n(36)),w=n(40),_=n(95),k=(n(143),n(14)),x=n(7),S=n.n(x),T=n(35),E=n(15),C=n(4),P=n(47),I=n(24),M=n(54),A=n(39),R=n(38),L=n(115),F=n(62),D=n(130),N=n(116),V=n(76),z=n(540),U=n(397),B=n(172),G=n(349),q=n(644),H=n(161);n(18),n(289);function W(e){return Object(C.j)(e)||"simple"===e.type||"unique-value"===e.type||"class-breaks"===e.type||"dictionary"===e.type}var $=n(385);function J(e,t){if(!e||!("visualVariables"in e)||!e.visualVariables)return null;var n=e.visualVariables.find((function(e){return"size"===e.type})),r=function(e,t){var n=e.featuresTilingScheme.getClosestInfoForScale(e.scale).level;return null!=t&&t.levels?t.levels[n]:null}(t,n);return r?new $.a({field:n.field,minSize:r[2].size,minDataValue:r[2].value,maxSize:r[3].size,maxDataValue:r[3].value}):null}var Y=n(102),K=n(147),Z=/^-?(\d+)(\.(\d+))?$/i;function X(e,t){return e-t}function Q(e,t){var n,r;return(n=Number(e.toFixed(t)))<e?r=n+1/Math.pow(10,t):(r=n,n-=1/Math.pow(10,t)),[n=Number(n.toFixed(t)),r=Number(r.toFixed(t))]}function ee(e,t,n,r,i){var a=ne(e,t,n,r),o=null==a.previous||a.previous<=i,s=null==a.next||a.next<=i;return o&&s||a.previous+a.next<=2*i}function te(e){var t=String(e),n=t.match(Z);if(n&&n[1])return{integer:n[1].split("").length,fractional:n[3]?n[3].split("").length:0};if(t.toLowerCase().indexOf("e")>-1){var r=t.split("e"),i=r[0],a=r[1];if(i&&a){var o=Number(i),s=Number(a),c=s>0;c||(s=Math.abs(s));var l=te(o);return c?(l.integer+=s,s>l.fractional?l.fractional=0:l.fractional-=s):(l.fractional+=s,s>l.integer?l.integer=1:l.integer-=s),l}}return{integer:0,fractional:0}}function ne(e,t,n,r){var i={previous:null,next:null};if(null!=n){var a=e-n,o=t-n-a;i.previous=Math.floor(Math.abs(100*o/a))}if(null!=r){var s=r-e,c=r-t-s;i.next=Math.floor(Math.abs(100*c/s))}return i}function re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.slice(0),r=t.tolerance,i=void 0===r?2:r,a=t.strictBounds,o=void 0!==a&&a,s=t.indexes,c=void 0===s?n.map((function(e,t){return t})):s;c.sort(X);for(var l=0;l<c.length;l++){var u=c[l],d=n[u],f=0===u?null:n[u-1],p=u===n.length-1?null:n[u+1],h=te(d).fractional;if(h){for(var b=void 0,v=0,y=!1;v<=h&&!y;){var m=Q(d,v);y=ee(d,b=o&&0===l?m[1]:m[0],f,p,i),v++}y&&(n[u]=b)}}return n}var ie={maximumFractionDigits:20};var ae=Object(Y.a)("short-date");function oe(e,t,n,r){var i="";0===t?i="".concat("<"," "):t===n&&(i="".concat(">"," "));var a;return i+(r?Object(Y.b)(e,ae):(a=e,Object(K.b)(a,ie)))}var se=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="],ce=new A.a([64,64,64]);function le(e,t){var n=[],r=e.length-1;return 5===e.length?n.push(0,2,4):n.push(0,r),e.map((function(e,i){return n.indexOf(i)>-1?oe(e,i,r,t):null}))}function ue(e,t,n){return de.apply(this,arguments)}function de(){return(de=Object(E.a)(S.a.mark((function e(t,r,i){var a,o,s,c,l,u,d;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!1,o=[],s=[],t.stops&&(c=t.stops,o=c.map((function(e){return e.value})),(a=c.some((function(e){return!!e.label})))&&(s=c.map((function(e){return e.label})))),l=o[0],u=o[o.length-1],null!=l||null!=u){e.next=5;break}return e.abrupt("return",null);case 5:return d=a?null:le(o,i),e.next=8,Promise.all(o.map(function(){var e=Object(E.a)(S.a.mark((function e(i,o){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i,"opacity"!==t.type){e.next=7;break}return e.next=4,fe(i,t,r);case 4:e.t1=e.sent,e.next=10;break;case 7:return e.next=9,Promise.resolve().then(n.bind(null,386));case 9:e.t1=e.sent.getColor(t,i);case 10:return e.t2=e.t1,e.t3=a?s[o]:d[o],e.abrupt("return",{value:e.t0,color:e.t2,label:e.t3});case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 8:return e.abrupt("return",e.sent.reverse());case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e,t){return pe.apply(this,arguments)}function pe(){return(pe=Object(E.a)(S.a.mark((function e(t,r){var i,a,o,s=arguments;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>2&&void 0!==s[2]?s[2]:ce,a=new A.a(i),e.next=4,Promise.resolve().then(n.bind(null,386));case 4:return o=e.sent.getOpacity(r,t),e.abrupt("return",(null!=o&&(a.a=o),a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e){var t,n=[],r=[];n=e.map((function(e){return e.value})),(t=e.some((function(e){return!!e.label})))&&(r=e.map((function(e){return e.label})));var i=n[0],a=n[n.length-1];if(null==i&&null==a)return null;var o=t?null:le(n,!1);return n.map((function(n,i){return{value:n,color:be(n,e),label:t?r[i]:o[i]}})).reverse()}function be(e,t){var n=function(e,t){var n=0,r=t.length-1;return t.some((function(t,i){return e<t.value?(r=i,!0):(n=i,!1)})),{startIndex:n,endIndex:r,weight:(e-t[n].value)/(t[r].value-t[n].value)}}(e,t),r=n.startIndex,i=n.endIndex,a=n.weight;if(r===i)return t[r].color;var o=A.a.blendColors(t[r].color,t[i].color,a);return new A.a(o)}var ve=n(371);function ye(e){var t=e.colorStops,n=t.length-1;if(t&&t[0]){var r=t[n];r&&1!==r.ratio&&((t=t.slice(0)).push(new ve.a({ratio:1,color:r.color})),n++)}return t.map((function(e,t){var r="";return 0===t?r="low":t===n&&(r="high"),{color:e.color,label:r,ratio:e.ratio}})).reverse()}n(22);var me=n(310),ge=n(586),Oe={HH:315,HL:45,LL:135,LH:225},je={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function we(e){if(e){var t=e.type;if(t.indexOf("3d")>-1)return Object(ge.getSymbolLayerFill)(e.symbolLayers.getItemAt(0));if("simple-line"===t){var n=Object(me.d)(e);return n&&n.color}if("simple-marker"===e.type&&("x"===e.style||"cross"===e.style)){var r=Object(me.d)(e);return r&&r.color}return Object(me.b)(e)}}function _e(e,t){var n=t.HH.label,r=t.LL.label,i=t.HL.label,a=t.LH.label;switch(e){case"HH":return{top:n,bottom:r,left:i,right:a};case"HL":return{top:i,bottom:a,left:r,right:n};case"LL":return{top:r,bottom:n,left:a,right:i};case"LH":return{top:a,bottom:i,left:n,right:r};default:return{top:n,bottom:r,left:i,right:a}}}function ke(e){var t=e.focus,n=e.infos,r=e.numClasses,i=je[r],a={};n.forEach((function(e){a[e.value]={label:e.label,fill:we(e.symbol)}}));for(var o=[],s=0;s<r;s++){for(var c=[],l=0;l<r;l++){var u=a[i[s][l]];c.push(u.fill)}o.push(c)}return{type:"relationship-ramp",numClasses:r,focus:t,colors:o,labels:_e(t,a),rotation:xe(t)}}function xe(e){var t=Oe[e];return e&&null==t&&(t=Oe.HH),t||0}var Se=n(31),Te=[255,255,255],Ee=[200,200,200],Ce=[128,128,128];function Pe(e,t){var n=e.length-1;return e.map((function(e,r){return oe(e,r,n,t)}))}function Ie(e,t,n,r,i,a){return Me.apply(this,arguments)}function Me(){return(Me=Object(E.a)(S.a.mark((function e(t,n,r,i,a,o){var s,c,l,u,d,f,p,h,b,v,y,m,g,O,j,w,_,k,x,T;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=n.legendOptions,u=l&&l.customValues,d=Le(t,r),f=!!d,p=!!u,h=null!=n.minSize&&null!=n.maxSize,b=n.stops&&n.stops.length>1,v=!!n.target,f&&(p||h||b&&!v)){e.next=3;break}return e.abrupt("return");case 3:if(y=Object(B.h)(d),m=null,g=null,O=null,!y||b){e.next=9;break}e.t0=re([n.minDataValue,n.maxDataValue]),e.next=15;break;case 9:if(e.t1=u,e.t1){e.next=14;break}return e.next=13,Ne(n,d,i,a);case 13:e.t1=e.sent;case 14:e.t0=e.t1;case 15:if(g=e.t0,j=null==t?void 0:t.authoringInfo,w="univariate-color-size"===(null==j?void 0:j.type),_=w&&"above-and-below"===(null==j?void 0:j.univariateTheme),!g&&b&&(g=n.stops.map((function(e){return e.value})),(m=n.stops.some((function(e){return!!e.label})))&&(O=n.stops.map((function(e){return e.label})))),y&&(null==(s=g)?void 0:s.length)>2&&!_&&(g=[g[0],g[g.length-1]]),g){e.next=19;break}return e.abrupt("return",null);case 19:return w&&5!==(null==(c=g)?void 0:c.length)&&(g=ze({minSize:g[0],maxSize:g[g.length-1]})),k=y?Ae(t,g):null,x=Object(B.g)(d),T=m?null:Pe(g,o),e.next=23,Promise.all(g.map(function(){var e=Object(E.a)(S.a.mark((function e(r,o){var s;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=4;break}e.t0=k[o],e.next=7;break;case 4:return e.next=6,qe(n,d,r,i,a);case 6:e.t0=e.sent;case 7:return s=e.t0,e.abrupt("return",{value:r,symbol:We(_&&"class-breaks"===t.type?Re(t,o):d,s),label:m?O[o]:T[o],size:s,outlineSize:x});case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 23:return e.abrupt("return",e.sent.reverse());case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e,t){var n=null==e?void 0:e.authoringInfo,r="univariate-color-size"===(null==n?void 0:n.type),i=[12,30];if(r){var a=t[0],o=t[t.length-1];i=t.map((function(e){return 12+(e-a)/(o-a)*18}))}return r&&"below"===(null==n?void 0:n.univariateTheme)&&i.reverse(),i}function Re(e,t){var n=e.classBreakInfos,r=n.length,i=r<2||!(t>=2)?n[0].symbol.clone():n[r-1].symbol.clone();return e.visualVariables.some((function(e){return"color"===e.type}))&&(i.type.indexOf("3d")>-1?Fe(i):De(i)),i}function Le(e,t){var n=null,r=null;if("simple"===e.type)n=e.symbol;else if("class-breaks"===e.type){var i=e.classBreakInfos;n=i&&i[0]&&i[0].symbol,r=i.length>1}else if("unique-value"===e.type){var a=e.uniqueValueInfos;n=a&&a[0]&&a[0].symbol,r=a.length>1}return!n||function(e){if(e)return Object(V.c)(e)?!!e.symbolLayers&&e.symbolLayers.some((function(e){return e&&"fill"===e.type})):-1!==e.type.indexOf("fill");return!1}(n)?null:(n=n.clone(),(t||r)&&(n.type.indexOf("3d")>-1?Fe(n):De(n)),n)}function Fe(e){"line-3d"===e.type?e.symbolLayers.forEach((function(e){e.material={color:Ce}})):e.symbolLayers.forEach((function(e){"icon"!==e.type||e.resource&&e.resource.href?e.material={color:Ee}:(e.material={color:Te},e.outline={color:Ce,size:1.5})}))}function De(e){"cim"===e.type?Object(U.a)(e,new A.a(Ee)):-1!==e.type.indexOf("line")?e.color=Ce:(e.color=Te,"simple-marker"===e.type&&(e.outline={color:Ce,width:1.5}))}function Ne(e,t,n,r){return Ve.apply(this,arguments)}function Ve(){return(Ve=Object(E.a)(S.a.mark((function e(t,r,i,a){var o,s,c,l,u;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.bind(null,386));case 2:if(o=e.sent.getSizeRangeAtScale(t,i,a),s=o&&ze(o),o||s){e.next=6;break}return e.abrupt("return");case 6:c=re(c=s.map((function(e){return Ue(e,t,o)}))),l=1;case 9:if(!(l<c.length-1)){e.next=17;break}return e.next=12,Be(t,r,c[l],c[l-1],i,a);case 12:(u=e.sent)&&(c[l]=u[0],s[l]=u[1]);case 14:l++,e.next=9;break;case 17:return e.abrupt("return",c);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ze(e){for(var t=e.minSize,n=(e.maxSize-t)/4,r=[],i=0;i<5;i++)r.push(t+n*i);return r}function Ue(e,t,n){var r=n.minSize,i=n.maxSize,a=t.minDataValue,o=t.maxDataValue;return e<=r?a:e>=i?o:(e-r)/(i-r)*(o-a)+a}function Be(e,t,n,r,i,a){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(E.a)(S.a.mark((function e(t,n,r,i,a,o){var s,c,l,u,d,f,p,h,b,v,y,m,g,O,j,w,_,k,x,T,E,C,P;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe(t,n,r,a,o);case 2:return s=e.sent,e.next=5,qe(t,n,i,a,o);case 5:c=e.sent,l=te(r),u=l.fractional,d=20,f=l.integer,p=null,h=null,r>0&&r<1&&(p=Math.pow(10,u),f=te(r*=p).integer),b=f-1;case 12:if(!(b>=0)){e.next=38;break}return v=Math.pow(10,b),y=Math.floor(r/v)*v,m=Math.ceil(r/v)*v,null!=p&&(y/=p,m/=p),O=re([y,g=(y+m)/2,m],{indexes:[1]}),j=Object(Se.a)(O,2),g=j[1],e.next=22,qe(t,n,y,a,o);case 22:return w=e.sent,e.next=25,qe(t,n,m,a,o);case 25:return _=e.sent,e.next=28,qe(t,n,g,a,o);case 28:if(k=e.sent,x=ne(s,w,c,null),T=ne(s,_,c,null),E=ne(s,k,c,null),C=x.previous<=d,P=T.previous<=d,C&&P&&(x.previous<=T.previous?(C=!0,P=!1):(P=!0,C=!1)),C?h=[y,w]:P?h=[m,_]:E.previous<=d&&(h=[g,k]),!h){e.next=35;break}return e.abrupt("break",38);case 35:b--,e.next=12;break;case 38:return e.abrupt("return",h);case 39:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qe(e,t,n,r,i){return He.apply(this,arguments)}function He(){return(He=Object(E.a)(S.a.mark((function e(t,r,i,a,o){var s,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.bind(null,386));case 2:return s=e.sent,c=s.getSize,e.abrupt("return",c(t,i,{scale:a,view:o,shape:"simple-marker"===r.type?r.style:null}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(e,t){var n=e.clone();if(Object(V.c)(n))Object(B.h)(n)||n.symbolLayers.forEach((function(e){"fill"!==e.type&&(e.size=t)}));else if(function(e){return"esri.symbols.SimpleMarkerSymbol"===e.declaredClass}(n))n.size=t;else if(function(e){return"esri.symbols.PictureMarkerSymbol"===e.declaredClass}(n)){var r=n.width,i=n.height;n.height=t,n.width=t*(r/i)}else!function(e){return"esri.symbols.SimpleLineSymbol"===e.declaredClass}(n)?function(e){return"esri.symbols.TextSymbol"===e.declaredClass}(n)&&n.font&&(n.font.size=t):n.width=t;return n}var $e=l.a.getLogger("esri.widgets.Legend.support.ActiveLayerInfo"),Je=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,Ye=new P.a({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Ke={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34e38,34e38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},Ze=new N.default({size:6,outline:{color:[128,128,128,.5],width:.5}}),Xe=new D.default({style:"solid"});function Qe(e){return"vector-field"===e.type}function et(e){return"raster-colormap"===e.type}function tt(e){return"raster-stretch"===e.type}function nt(e){return"raster-shaded-relief"===e.type}function rt(e){return"esri.renderers.SimpleRenderer"===e.declaredClass}function it(e){return"esri.renderers.ClassBreaksRenderer"===e.declaredClass}function at(e){return"esri.renderers.UniqueValueRenderer"===e.declaredClass}function ot(e){return"esri.renderers.HeatmapRenderer"===e.declaredClass}function st(e){return ct(e)||lt(e)||ut(e)||function(e){return"esri.renderers.PointCloudRGBRenderer"===e.declaredClass}(e)}function ct(e){return"esri.renderers.PointCloudClassBreaksRenderer"===e.declaredClass}function lt(e){return"esri.renderers.PointCloudStretchRenderer"===e.declaredClass}function ut(e){return"esri.renderers.PointCloudUniqueValueRenderer"===e.declaredClass}function dt(e){return"esri.renderers.DotDensityRenderer"===e.declaredClass}function ft(e,t){return rt(e)||it(e)||at(e)||ot(e)||dt(e)?"2d"===t.type||W(e):tt(e)||et(e)||nt(e)||ct(e)||lt(e)||ut(e)||Qe(e)}function pt(e){return"esri.layers.BuildingSceneLayer"===e.declaredClass}function ht(e){return"esri.layers.WMSLayer"===e.declaredClass}function bt(e){return"esri.layers.WMTSLayer"===e.declaredClass}function vt(e){return"esri.layers.MapImageLayer"===e.declaredClass}function yt(e){return"esri.layers.TileLayer"===e.declaredClass}function mt(e){return"esri.layers.FeatureLayer"===e.declaredClass}function gt(e){return"esri.layers.ImageryLayer"===e.declaredClass}function Ot(e){return"esri.layers.ImageryTileLayer"===e.declaredClass}function jt(e){return"esri.layers.WCSLayer"===e.declaredClass}function wt(e){return"stretch-ramp"===e.type}function _t(e){var t="authoringInfo"in e&&(null==e?void 0:e.authoringInfo);return"univariate-color-size"===(null==t?void 0:t.type)}function kt(e){var t="authoringInfo"in e&&(null==e?void 0:e.authoringInfo);return"univariate-color-size"===(null==t?void 0:t.type)&&"above-and-below"===(null==t?void 0:t.univariateTheme)}var xt=new N.default({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}}),St={},Tt=function(e){Object(o.a)(c,e);var t=Object(s.a)(c);function c(e){var n;return Object(i.a)(this,c),(n=t.call(this,e))._handles=new b.a,n._hasColorRamp=!1,n._hasOpacityRamp=!1,n._hasSizeRamp=!1,n._webStyleSymbolCache=new Map,n._dotDensityUrlCache=new Map,n._scaleDrivenSizeVariable=null,n._hasClusterSizeVariable=!1,n.children=new w.a,n.layerView=null,n.layer=null,n.legendElements=[],n.parent=null,n.keepCacheOnDestroy=!1,n.respectLayerVisibility=!0,n.sublayerIds=[],n.title=null,n.view=null,n}return Object(a.a)(c,[{key:"initialize",value:function(){var e=this,t=function(){return e.notifyChange("ready")};this._handles.add([Object(v.b)(this,"children","change",(function(n){var r=n.added,i=n.removed,a=e._handles;r.map((function(e){var n="activeLayerInfo-ready-watcher-".concat(e.layer.uid);a.add(Object(v.a)(e,"ready",t),n)})),i.forEach((function(e){return a.remove(e.layer.uid)})),t()}))]),this.keepCacheOnDestroy||(St={})}},{key:"destroy",value:function(){this._handles.destroy(),this._handles=null,this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(St=null)}},{key:"opacity",get:function(){var e,t=this.layer.opacity,n=null==(e=this.parent)?void 0:e.opacity,r=this.layer.parent,i=r&&"uid"in r?this._getParentLayerOpacity(r):null;return null!=n?n*t:null!=i?i*t:t}},{key:"ready",get:function(){return null===this.layer||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}},{key:"scale",get:function(){return this.view&&this.view.scale}},{key:"isScaleDriven",get:function(){var e=this,t=this.layer;if(null===t)return!1;if("featureReduction"in t&&t.featureReduction&&"cluster"===t.featureReduction.type)return!0;if("renderer"in t&&t.renderer){if("dot-density"===t.renderer.type)return!0;var n=t.get("renderer.valueExpression");if(Je.test(n))return!0;var r=t.get("renderer.visualVariables");if(r)return r.some((function(t){return e._isScaleDrivenSizeVariable(t)}))}return this._isLayerScaleDriven(this.layer)}},{key:"version",get:function(){return this._get("version")+1}},{key:"buildLegendElementsForFeatureCollections",value:function(){var e=Object(E.a)(S.a.mark((function e(t){var n,r,i=this;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){if(mt(e))return i._getRendererLegendElements(e.renderer,{title:e.title});if(e.featureSet&&e.featureSet.features.length){var t=e.layerDefinition,n=t&&t.drawingInfo,r=n&&Object(G.a)(n.renderer),a=Ye.read(t.geometryType);return r?i._getRendererLegendElements(r,{title:e.name,geometryType:a}):($e.warn("drawingInfo not available!"),null)}return null})),e.prev=1,r=[],e.next=5,Object(I.j)(n).then((function(e){e.forEach((function(e){var t=e.value;return t&&r.push.apply(r,Object(T.a)(t))}))}));case 5:this.legendElements=r,this.notifyChange("ready"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),$e.warn("error while building legend for layer!",e.t0);case 12:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"buildLegendElementsForRenderer",value:function(){var e=Object(E.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._getRendererLegendElements(t);case 3:n=e.sent,this.legendElements=n,this.notifyChange("ready"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),$e.warn("error while building legend for layer!",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"buildLegendElementsForTools",value:function(){var e=Object(E.a)(S.a.mark((function e(){var t,n=this;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!bt(t=this.layer)){e.next=5;break}this._constructLegendElementsForWMTSlayer(),e.next=23;break;case 5:if(!ht(t)){e.next=10;break}return e.next=8,this._constructLegendElementsForWMSSublayers();case 8:e.next=23;break;case 10:if(!pt(t)){e.next=15;break}return e.next=13,this._constructLegendElementsForBuildingSceneLayer();case 13:e.next=23;break;case 15:if(!(vt(t)||yt(t)||pt(t))){e.next=20;break}return e.next=18,this._constructLegendElementsForSublayers();case 18:e.next=23;break;case 20:return this._handles.remove("imageryLayers-watcher"),e.next=23,this._getLegendLayers("".concat(t.uid,"-default")).then(function(){var e=Object(E.a)(S.a.mark((function e(r){var i;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.legendElements=[],n.notifyChange("ready"),i=r.map(function(){var e=Object(E.a)(S.a.mark((function e(r){var i,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(gt(t)||Ot(t))&&(i=t.watch(["renderingRule","bandIds"],(function(){return Object(I.i)(Object(E.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(St.default=null,!t.renderer){e.next=6;break}return e.next=4,n.buildLegendElementsForRenderer(t.renderer);case 4:e.next=8;break;case 6:return e.next=8,n.buildLegendElementsForTools();case 8:case"end":return e.stop()}}),e)}))))()})),n._handles.add(i,"imageryLayers-watcher")),(a=n._generateSymbolTableElementForLegendLayer(r))&&a.infos.length&&(gt(t)&&(a.title=t.title),n.legendElements.push(a)),n.notifyChange("ready");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,Object(I.j)(i);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){$e.warn("Request to server for legend has failed!",e)}));case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getParentLayerOpacity",value:function(e){var t=1,n=e.parent;return n&&"uid"in n&&(t=this._getParentLayerOpacity(n)),e.opacity*t}},{key:"_isGroupActive",value:function(){var e=this.children;return!!e.length&&e.some((function(e){return e.ready}))}},{key:"_isScaleDrivenSizeVariable",value:function(e){if(e&&"size"!==e.type)return!1;var t=e,n=t.minSize,r=t.maxSize;return"object"==typeof n&&n?this._isScaleDrivenSizeVariable(n):"object"==typeof r&&r?this._isScaleDrivenSizeVariable(r):!!t.expression||Je.test(t.valueExpression)}},{key:"_isLayerScaleDriven",value:function(e){var t=this;if("minScale"in e&&e.minScale>0||"maxScale"in e&&e.maxScale>0)return!0;if("sublayers"in e&&e.sublayers)return e.sublayers.some((function(e){return t._isLayerScaleDriven(e)}));var n=e.parent;if(!1===e.loaded&&n&&vt(n)&&"source"in e&&e.source&&"map-layer"===e.source.type){var r,i=Object(k.a)(n.sourceJSON.layers);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.id===e.source.mapLayerId&&(a.minScale>0||a.maxScale>0))return!0}}catch(o){i.e(o)}finally{i.f()}}return!1}},{key:"_constructLegendElementsForWMTSlayer",value:function(){var e=this;this.legendElements=[],this._handles.remove("wmts-activeLayer-watcher");var t=this.layer.activeLayer;if(this._handles.add(Object(v.d)(this.layer,"activeLayer",(function(){return e._constructLegendElementsForWMTSlayer()})),"wmts-activeLayer-watcher"),t.styleId&&t.styles){var n=null;t.styles.some((function(e){return t.styleId===e.id&&(n=e.legendUrl,!0)})),n&&(this.legendElements=[{type:"symbol-table",title:t.title,infos:[{src:n,opacity:this.opacity}]}])}this.notifyChange("ready")}},{key:"_constructLegendElementsForWMSSublayers",value:function(){var e=Object(E.a)(S.a.mark((function e(){var t,n,i=this;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.legendElements=[],this._handles.remove("wms-sublayers-watcher"),t=this.layer,n=null,(t.customParameters||t.customLayerParameters)&&(n=Object(r.a)(Object(r.a)({},t.customParameters),t.customLayerParameters)),this._handles.add(Object(v.d)(this.layer,"sublayers",(function(){return i._constructLegendElementsForWMSSublayers()})),"wms-sublayers-watcher"),e.next=7,this._generateLegendElementsForWMSSublayers(t.sublayers,n);case 7:this.legendElements=e.sent,this.notifyChange("ready");case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_generateLegendElementsForWMSSublayers",value:function(){var e=Object(E.a)(S.a.mark((function e(t,n){var r,i,a,o,s,c,l,u=this;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],this._handles.add(t.on("change",(function(){return u._constructLegendElementsForWMSSublayers()})),"wms-sublayers-watcher"),i=t.toArray(),a=Object(k.a)(i),e.prev=4,a.s();case 6:if((o=a.n()).done){e.next=16;break}if(s=o.value,c=s.watch(["title","visible","legendEnabled"],(function(){return u._constructLegendElementsForWMSSublayers()})),this._handles.add(c,"wms-sublayers-watcher"),!s.visible||!s.legendEnabled){e.next=14;break}return e.next=12,this._generateSymbolTableElementForWMSSublayer(s,n);case 12:(l=e.sent)&&l.infos.length&&r.unshift(l);case 14:e.next=6;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(4),a.e(e.t0);case 21:return e.prev=21,a.f(),e.finish(21);case 24:return e.abrupt("return",r);case 25:case"end":return e.stop()}}),e,this,[[4,18,21,24]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_generateSymbolTableElementForWMSSublayer",value:function(){var e=Object(E.a)(S.a.mark((function e(t,n){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.legendUrl||!t.sublayers){e.next=5;break}return e.next=3,this._generateLegendElementsForWMSSublayers(t.sublayers,n);case 3:return r=e.sent.filter((function(e){return e})),e.abrupt("return",{type:"symbol-table",title:t.title,infos:r});case 5:return e.abrupt("return",this._generateSymbolTableElementForLegendUrl(t,n));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_generateSymbolTableElementForLegendUrl",value:function(){var e=Object(E.a)(S.a.mark((function e(t,n){var r,i,a,o,s;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.legendUrl){e.next=3;break}return e.abrupt("return");case 3:return a={type:"symbol-table",title:t.title||t.name||t.id&&t.id+"",infos:[]},n&&(i+="?"+Object(h.D)(n)),o=null,s=null==(r=t.layer)?void 0:r.opacity,e.prev=7,e.next=10,Object(F.default)(i,{responseType:"image"});case 10:(o=e.sent.data)&&(o.style.opacity=s),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(7);case 16:return e.abrupt("return",(a.infos.push({src:i,preview:o,opacity:s}),a));case 17:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getLegendLayers",value:function(e,t){var n=St&&St[e];return n?Promise.resolve(n):this._legendRequest(t).then((function(t){var n=t.layers;return St[e]=n,n}))}},{key:"_legendRequest",value:function(e){var t=this.layer,n={f:"json",dynamicLayers:e};if(gt(t)){var i=t.exportImageServiceParameters.renderingRule;if(i&&(n.renderingRule=JSON.stringify(i.toJSON())),t.bandIds&&(n.bandIds=t.bandIds.join()),t.raster||t.viewId){var a=t.raster,o=t.viewId;n=Object(r.a)({raster:a,viewId:o},n)}}var s=t.url.replace(/(\/)+$/,"");if("version"in t&&t.version>=10.01){var c=s.indexOf("?");c>-1?s=s.substring(0,c)+"/legend"+s.substring(c):s+="/legend"}else{var l=s.toLowerCase().indexOf("/rest/"),u=s.substring(0,l)+s.substring(l+5,s.length);s="https://utility.arcgis.com/sharing/tools/legend?soapUrl="+encodeURI(u)+"&returnbytes=true"}return Object(F.default)(s,{query:n}).then((function(e){return e.data}))}},{key:"_constructLegendElementsForBuildingSceneLayer",value:function(){var e=Object(E.a)(S.a.mark((function e(){var t,n=this;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.legendElements=[],this._handles.remove("sublayers-watcher"),t=this.layer,this._handles.add(Object(v.d)(t,"sublayers",(function(){return n._constructLegendElementsForBuildingSceneLayer()})),"sublayers-watcher"),e.prev=3,e.next=6,this._generateLegendElementsForBuildingSublayers(t.sublayers,this.opacity);case 6:this.legendElements=e.sent,this.notifyChange("ready"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),$e.warn("Request to server for legend has failed!",e.t0);case 13:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"_generateLegendElementsForBuildingSublayers",value:function(){var e=Object(E.a)(S.a.mark((function e(t,n){var r,i,a,o,s,c,l,u,d,f,p,h=this;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],this._handles.add(t.on("change",(function(){return h._constructLegendElementsForBuildingSceneLayer()})),"sublayers-watcher"),i=t.toArray(),a=Object(k.a)(i),e.prev=4,a.s();case 6:if((o=a.n()).done){e.next=30;break}if(s=o.value,c=s.watch(["renderer","opacity","title","visible"],(function(){return h._constructLegendElementsForBuildingSceneLayer()})),this._handles.add(c,"sublayers-watcher"),!s.visible){e.next=28;break}if(l=s&&null!=s.opacity?s.opacity:null,u=null!=l?l*n:n,"building-group"!==s.type){e.next=19;break}return f={type:"symbol-table",title:s.title,infos:[]},e.next=15,this._generateLegendElementsForBuildingSublayers(s.sublayers,u);case 15:p=e.sent,(d=f.infos).push.apply(d,Object(T.a)(p)),r=[f].concat(Object(T.a)(r)),e.next=28;break;case 19:if(!s.renderer){e.next=28;break}return e.t0=[],e.t1=T.a,e.next=24,this._getRendererLegendElements(s.renderer,{title:s.title,opacity:u,sublayer:s});case 24:e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.t4=Object(T.a)(r),r=e.t0.concat.call(e.t0,e.t3,e.t4);case 28:e.next=6;break;case 30:e.next=35;break;case 32:e.prev=32,e.t5=e.catch(4),a.e(e.t5);case 35:return e.prev=35,a.f(),e.finish(35);case 38:return e.abrupt("return",r.filter((function(e){return!!e&&(!("infos"in e)||e.infos.length>0)})));case 39:case"end":return e.stop()}}),e,this,[[4,32,35,38]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_constructLegendElementsForSublayers",value:function(){var e=Object(E.a)(S.a.mark((function e(){var t,n=this;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.legendElements=[],this._handles.remove("sublayers-watcher"),t=this.layer,this._handles.add(Object(v.d)(t,"sublayers",(function(){return n._constructLegendElementsForSublayers})),"sublayers-watcher"),e.prev=3,e.next=6,this._generateLegendElementsForSublayers(t.sublayers,this.opacity);case 6:this.legendElements=e.sent,this.notifyChange("ready"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),$e.warn("Request to server for legend has failed!",e.t0);case 13:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"_generateLegendElementsForSublayers",value:function(){var e=Object(E.a)(S.a.mark((function e(t,n,r){var i,a,o,s,c,l,u,d,f,p,h=this;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=this.layer,a=[],this._handles.add(t.on("change",(function(){return h._constructLegendElementsForSublayers()})),"sublayers-watcher"),o=t.toArray(),!r&&this.sublayerIds&&this.sublayerIds.length&&(o=this.sublayerIds.map((function(e){return i.findSublayerById(e)})).filter(Boolean)),s=Object(k.a)(o),e.prev=6,s.s();case 8:if((c=s.n()).done){e.next=32;break}if(l=c.value,u=l.watch("renderer, opacity, title, visible, legendEnabled",(function(){return h._constructLegendElementsForSublayers()})),this._handles.add(u,"sublayers-watcher"),!l.visible||!l.legendEnabled||this.respectLayerVisibility&&!this._isSublayerInScale(l)){e.next=30;break}if(d=l&&null!=l.opacity?l.opacity:null,f=null!=d?d*n:n,!(l.renderer&&!l.sublayers&&l.originIdOf("renderer")>2)){e.next=26;break}return e.next=16,l.load();case 16:return e.t0=[],e.t1=T.a,e.next=20,this._getRendererLegendElements(l.renderer,{title:l.title,opacity:f,sublayer:l});case 20:e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.t4=Object(T.a)(a),a=e.t0.concat.call(e.t0,e.t3,e.t4),e.next=30;break;case 26:return e.next=28,this._generateSymbolTableElementForSublayer(l,f,r);case 28:(p=e.sent)&&a.unshift(p);case 30:e.next=8;break;case 32:e.next=37;break;case 34:e.prev=34,e.t5=e.catch(6),s.e(e.t5);case 37:return e.prev=37,s.f(),e.finish(37);case 40:return e.abrupt("return",a.filter((function(e){return!!e&&(!("infos"in e)||e.infos.length>0)})));case 41:case"end":return e.stop()}}),e,this,[[6,34,37,40]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_generateSymbolTableElementForSublayer",value:function(){var e=Object(E.a)(S.a.mark((function e(t,n,r){var i,a,o,s,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=8;break}return r=new Map,i=new q.a({layer:this.layer}),a=i.hasDynamicLayers?i.dynamicLayers:null,i.destroy(),o=a||"".concat(this.layer.uid,"-").concat(t.id,"-default"),e.next=7,this._getLegendLayers(o,a);case 7:e.sent.forEach((function(e){return r.set(e.layerId,e)}));case 8:if((s=r.get(t.id))||!t.sublayers){e.next=14;break}return e.next=12,this._generateLegendElementsForSublayers(t.sublayers,n,r);case 12:return c=e.sent,e.abrupt("return",{type:"symbol-table",title:t.title,infos:c});case 14:return e.abrupt("return",this._generateSymbolTableElementForLegendLayer(s,t,n));case 15:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_generateSymbolTableElementForLegendLayer",value:function(e,t,n){var r,i=this;if(!e||!e.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(e,t))return null;var a=null==t?void 0:t.renderer,o=(null==t?void 0:t.title)||e.layerName;if(a&&(!t||(null==t?void 0:t.originIdOf("renderer"))>2)){var s=(null==t?void 0:t.title)||this._getRendererTitle(a,t);s&&(o&&"string"!=typeof s&&"title"in s&&(s.title=o),o=s)}var c={type:"symbol-table",title:o,legendType:e.legendType?e.legendType:null,infos:[]},l=t?this._sanitizeLegendForSublayer(e.legend.slice(),t):e.legend;return(null==(r=e.legendGroups)?void 0:r.length)>0?e.legendGroups.forEach((function(t){var r,a={type:"symbol-table",title:t.heading,legendType:e.legendType?e.legendType:null,infos:i._generateSymbolTableElementInfosForLegendLayer(l.filter((function(e){return e.groupId===t.id})),e.layerId,n)};(null==(r=a.infos)?void 0:r.length)>0&&c.infos.push(a)})):c.infos=this._generateSymbolTableElementInfosForLegendLayer(l,e.layerId,n),c.infos.length>0?c:null}},{key:"_generateSymbolTableElementInfosForLegendLayer",value:function(e,t,n){var r=this;return e.map((function(e){var i=e.url;if(e.imageData&&e.imageData.length>0)i="data:image/png;base64,".concat(e.imageData);else{if(0===i.indexOf("http"))return null;i=Object(L.a)("".concat(r.layer.url,"/").concat(t,"/images/").concat(i))}return{label:e.label,src:i,opacity:null==n?r.opacity:n,width:e.width,height:e.height}})).filter((function(e){return!!e}))}},{key:"_isSublayerInScale",value:function(e){var t=e.minScale||0,n=e.maxScale||0;return!(t>0&&t<this.scale||n>this.scale)}},{key:"_isLegendLayerInScale",value:function(e,t){var n=t||this.layer,r=null,i=null,a=!0;return!n.minScale&&0!==n.minScale||!n.maxScale&&0!==n.maxScale?(0===e.minScale&&n.tileInfo&&(r=n.tileInfo.lods[0].scale),0===e.maxScale&&n.tileInfo&&(i=n.tileInfo.lods[n.tileInfo.lods.length-1].scale)):(r=Math.min(n.minScale,e.minScale)||n.minScale||e.minScale,i=Math.max(n.maxScale,e.maxScale)),(r>0&&r<this.scale||i>this.scale)&&(a=!1),a}},{key:"_sanitizeLegendForSublayer",value:function(e,t){if("version"in this.layer&&this.layer.version<10.1||0===e.length)return e;var n=t.renderer,r=e.some((function(e){return e.values})),i=null,a=null;return r&&e.some((function(e,t){return e.values||(i=t,(a=e).label||(a.label="others")),null!=a})),n?"unique-value"===n.type?a&&(e.splice(i,1),e.push(a)):"class-breaks"===n.type&&(a&&e.splice(i,1),e.reverse(),a&&e.push(a)):a&&(e.splice(i,1),e.push(a)),e}},{key:"_getRendererLegendElements",value:function(){var e=Object(E.a)(S.a.mark((function e(t){var n,r=arguments;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",ft(t,this.view)?st(t)?this._constructPointCloudRendererLegendElements(t,n):dt(t)?this._constructDotDensityRendererLegendElements(t):this._constructRendererLegendElements(t,n):($e.warn("Renderer of type '".concat(t.type,"' not supported!")),[]));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getPointCloudRendererTitle",value:function(e){return e.legendOptions&&e.legendOptions.title||e.field}},{key:"_constructPointCloudRendererLegendElements",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.title,i=[],a=null,o=null;if(ct(e))a={type:"symbol-table",title:r||this._getPointCloudRendererTitle(e),infos:[]},e.colorClassBreakInfos.forEach((function(e){a.infos.unshift({label:e.label||e.minValue+" - "+e.maxValue,value:[e.minValue,e.maxValue],symbol:t._getAppliedCloneSymbol(Ze,e.color)})}));else if(lt(e)){var s=e.stops,c=null;if(s.length&&(1===s.length&&(c=s[0].color),!c)){var l=s[0].value,u=s[s.length-1].value;null!=l&&null!=u&&(c=be(l+(u-l)/2,s))}a={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(Ze,c||Ze.color)}]};var d=he(e.stops);o={type:"color-ramp",title:r||this._getPointCloudRendererTitle(e),infos:d,preview:Object(H.b)(d.map((function(e){return e.color})))}}else ut(e)&&(a={type:"symbol-table",title:r||this._getPointCloudRendererTitle(e),infos:[]},e.colorUniqueValueInfos.forEach((function(e){a.infos.push({label:e.label||e.values.join(", "),value:e.values.join(", "),symbol:t._getAppliedCloneSymbol(Ze,e.color)})})));a&&a.infos.length&&i.push(a),o&&o.infos.length&&i.push(o);var f=i.reduce((function(e,t){return e.concat(t.infos)}),[]).filter((function(e){return!!e.symbol})).map((function(n){return t._getSymbolPreview(n,t.opacity,{symbolConfig:{applyColorModulation:!!e.colorModulation}})}));return Object(I.j)(f).then((function(){return i}))}},{key:"_getElementInfoForDotDensity",value:function(e,t){var n=e.backgroundColor,r=e.outline,i=e.dotSize+"-"+t+"-"+n+"-"+(r&&JSON.stringify(r.toJSON())),a=this._dotDensityUrlCache,o=a.has(i)?a.get(i):Object(H.c)(e,t);return a.set(i,o),{opacity:1,src:o.src,preview:o,width:o.width,height:o.height}}},{key:"_constructDotDensityRendererLegendElements",value:function(e){var t=this,n=e.calculateDotValue(this.view.scale),r=e.legendOptions&&e.legendOptions.unit,i={type:"symbol-table",title:{value:n&&Math.round(n),unit:r||""},infos:[]};return e.attributes.forEach((function(n){var r=t._getElementInfoForDotDensity(e,n.color);r.label=n.label||n.valueExpressionTitle||n.field,i.infos.push(r)})),Promise.resolve([i])}},{key:"_constructRendererLegendElements",value:function(){var e=Object(E.a)(S.a.mark((function e(t){var n,r,i,a,o,s,c,l,u,d,f,p,h,b,v,y,m,g,O,j,w,_,k,x,T,E,P,M,A,R,L,F,D,N,V,z,U,B,G,q,W,$,J,Y,K,Z,X,Q,ee,te,ne,re,ie,ae=this,oe=arguments;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=oe.length>1&&void 0!==oe[1]?oe[1]:{},r=n.title,i=n.sublayer,a=i||this.layer,e.next=4,this._loadRenderer(t);case 4:return o=e.sent,this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null,e.next=8,this._getVisualVariableLegendElements(o,a);case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0=[];case 11:if(s=e.t0,c={type:"symbol-table",title:r||this._getRendererTitle(o,a),infos:[]},l=null,u=!1,d=new Set,!_t(o)){e.next=21;break}f=r,p=kt(o)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",h=s.findIndex((function(e){return"color-ramp"===e.type})),b=s.splice(h,1)[0],v=s.findIndex((function(e){return"size-ramp"===e.type})),y=s.splice(v,1)[0],m=[],b&&(f=b.title,m.push(b)),y&&(f=y.title,m.push(y)),m.length>0&&s.push({type:p,title:f,infos:m}),e.next=82;break;case 21:if(!ot(o)){e.next=26;break}g=ye(o),s.push({type:"heatmap-ramp",title:r,infos:g,preview:Object(H.b)(g.map((function(e){return e.color})))}),e.next=82;break;case 26:if(!at(o)){e.next=32;break}if((O=o&&o.authoringInfo)&&"relationship"===O.type){if(j=O.focus,w=O.numClasses,_=O.field1,k=O.field2,w&&_&&k){for(x=[_,k],T=xe(j)||0,E=0,P=x;E<P.length;E++)M=P[E],A=M.field,R=M.normalizationField,L=M.label,F=L||{field:this._getFieldAlias(A,a),normField:R&&this._getFieldAlias(R,a)},(D=xt.clone()).angle=T,c.infos.push({label:F,symbol:D}),d.add(D),T+=90;N=ke({focus:j,numClasses:w,infos:o.uniqueValueInfos}),s.unshift(N)}}else V=o.field,o.uniqueValueInfos.forEach((function(e){e.symbol&&c.infos.push({label:e.label||ae._getDomainName(V,e.value,a)||e.value,value:e.value,symbol:e.symbol})}));o.defaultSymbol&&(c.infos.push({label:o.defaultLabel||"others",symbol:o.defaultSymbol}),u=!0),e.next=82;break;case 32:if(!it(o)){e.next=37;break}(!(l=this._isUnclassedRenderer(o))||!this._hasSizeRamp)&&(o.classBreakInfos.forEach((function(e){e.symbol&&c.infos.unshift({label:e.label||(l?null:e.minValue+" - "+e.maxValue),value:[e.minValue,e.maxValue],symbol:e.symbol})})),l&&(c.title=null),this._updateInfosforClassedSizeRenderer(o,c.infos)),o.defaultSymbol&&!l&&(c.infos.push({label:o.defaultLabel||"others",symbol:o.defaultSymbol}),u=!0),e.next=82;break;case 37:if(!tt(o)){e.next=64;break}if(!Ot(this.layer)||"Map"!==(null==(z=this.layer)||null==(U=z.raster)?void 0:U.tileType)){e.next=42;break}this._getServerSideLegend(),e.next=62;break;case 42:if(!Ot(this.layer)&&!jt(this.layer)){e.next=47;break}wt(B=this._constructTileImageryStretchRendererElements(o))?s.push(B):c.infos=B,e.next=62;break;case 47:if(G=this.layer,o.statistics&&o.statistics.length?(q=null!=o.statistics[0].min?o.statistics[0].min:o.statistics[0][0],W=null!=o.statistics[0].max?o.statistics[0].max:o.statistics[0][1]):(q=null==($=o)?void 0:$.outputMin,W=null==(J=o)?void 0:J.outputMax),Y=[],e.t1=C.q,!G.renderingRule){e.next=57;break}return e.next=54,G.generateRasterInfo(G.renderingRule);case 54:e.t2=e.sent,e.next=58;break;case 57:e.t2=G.serviceRasterInfo;case 58:e.t3=e.t2,K=(0,e.t1)(e.t3),Z=K.keyProperties.BandProperties,1===K.bandCount?(q=null!=q?q:K.statistics&&K.statistics[0].min,W=null!=W?W:K.statistics&&K.statistics[0].max,q||W?s.push(this._getStretchLegendElements(o,{min:q,max:W})):this._getServerSideLegend()):G.bandIds&&1===G.bandIds.length?(q=null!=q?q:K.statistics&&K.statistics[G.bandIds[0]].min,W=null!=W?W:K.statistics&&K.statistics[G.bandIds[0]].max,q||W?s.push(this._getStretchLegendElements(o,{min:q,max:W})):this._getServerSideLegend()):K.bandCount>=3?Z&&Z.length>=K.bandCount?G.bandIds&&3===G.bandIds.length?(Y=G.bandIds.map((function(e){return Z[e].BandName})),c.infos=this._createSymbolTableElementMultiBand(Y)):"lerc"===G.format?(Y=[0,1,2].map((function(e){return Z[e].BandName})),c.infos=this._createSymbolTableElementMultiBand(Y)):this._getServerSideLegend():"lerc"===G.format?(Y=["band1","band2","band3"],c.infos=this._createSymbolTableElementMultiBand(Y)):this._getServerSideLegend():this._getServerSideLegend();case 62:e.next=82;break;case 64:if(!et(o)){e.next=68;break}o.colormapInfos.forEach((function(e){c.infos.push({label:e.label,value:e.value,symbol:ae._getAppliedCloneSymbol(Xe,e.color)})})),e.next=82;break;case 68:if(!rt(o)){e.next=81;break}X=o.symbol,e.t4=n.geometryType,e.next="point"===e.t4?73:"polyline"===e.t4?75:"polygon"===e.t4?77:78;break;case 73:return X="pointSymbol"in a&&a.pointSymbol,e.abrupt("break",78);case 75:return X="lineSymbol"in a&&a.lineSymbol,e.abrupt("break",78);case 77:X="polygonSymbol"in a&&a.polygonSymbol;case 78:o.symbol&&!this._hasSizeRamp&&c.infos.push({label:o.label,symbol:X}),e.next=82;break;case 81:Qe(o)?(o.outputUnit&&(this.title="("+o.toJSON().outputUnit+")"),c.title=o.attributeField,null!=(Q=o.getClassBreakInfos())&&Q.length?Q.forEach((function(e){c.infos.push({label:e.minValue+" - "+e.maxValue,symbol:e.symbol})})):c.infos.push({label:o.attributeField,symbol:o.getDefaultSymbol()})):nt(o)&&s.push(this._getStretchLegendElements(o,{min:0,max:255}));case 82:return!(ee=o.defaultSymbol)||u||rt(o)||l&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||s.push({type:"symbol-table",infos:[{label:o.defaultLabel||"others",symbol:ee}]}),c.infos.length&&s.unshift(c),te=null==n.opacity?this.opacity:n.opacity,ne=this._isTallSymbol("visualVariables"in o&&o.visualVariables),re=gt(this.layer)||Ot(this.layer),ie=s.reduce((function(e,t){return e.concat(ae._getAllInfos(t))}),[]).filter((function(e){return!(!e||!e.symbol)})).map((function(e){return ae._getSymbolPreview(e,te,{applyScaleDrivenSize:!d.has(e.symbol),symbolConfig:{isTall:ne,isSquareFill:re}})})),o=null,e.next=88,Object(I.j)(ie);case 88:return e.abrupt("return",s);case 89:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getServerSideLegend",value:function(){var e=this;setTimeout((function(){return e.buildLegendElementsForTools()}),0)}},{key:"_getAllInfos",value:function(e){var t=this,n=null==e?void 0:e.infos;return n?n.reduce((function(e,n){return e.concat(t._getAllInfos(n))}),[]):[e]}},{key:"_constructTileImageryStretchRendererElements",value:function(e){var t,n,r,i,a,o=this.layer,s=o.rasterInfo,c=s.bandCount||e.statistics.length,l=s.keyProperties&&s.keyProperties.BandProperties,u=null!=e&&null!=(t=e.statistics)&&t.length?e.statistics:null==s?void 0:s.statistics;if(u)r=void 0!==u[0].min?u[0].min:u[0][0],i=u[0].max||u[0][1];else{var d=Ke[o.rasterInfo.pixelType.toLowerCase()];r=d[0],i=d[1]}if(1===s.bandCount||1===(null==(n=o.bandIds)?void 0:n.length))return this._getStretchLegendElements(e,{min:r,max:i});function f(e){var t,n=(null!=o&&null!=(t=o.bandIds)&&t.length?o.bandIds:Array.from(Array(Math.min(s.bandCount,3)).keys())).map((function(t){return e&&e[t]&&e[t].BandName||"band"+(t+1)}));return n.length<3?n.push(n[1]):n.length>3&&n.splice(3),n}return a=l&&l.length>=c?f(l):f(),this._createSymbolTableElementMultiBand(a)}},{key:"_getStretchLegendElements",value:function(e,t){var n=function(e,t){var n,r,i=[];return e&&"multipart"===e.type?e.colorRamps.reverse().forEach((function(n,r){0===r?i.push({value:t.max,color:new A.a(n.toColor),label:"high"}):i.push({value:null,color:new A.a(n.toColor),label:""}),r===e.colorRamps.length-1?i.push({value:t.min,color:new A.a(n.fromColor),label:"low"}):i.push({value:null,color:new A.a(n.fromColor),label:""})})):(e&&"algorithmic"===e.type?(n=e.fromColor,r=e.toColor):(n=[0,0,0,1],r=[255,255,255,1]),i=[{value:t.max,color:new A.a(r),label:"high"},{value:t.min,color:new A.a(n),label:"low"}]),i}(e.colorRamp,t);return{type:"stretch-ramp",title:"",infos:n,preview:Object(H.b)(n.map((function(e){return e.color})))}}},{key:"_createSymbolTableElementMultiBand",value:function(e){var t=[],n=["red","green","blue"];return e.forEach((function(e,r){t.push({label:{colorName:n[r],bandName:e},src:se[r],opacity:1})})),t}},{key:"_updateInfosforClassedSizeRenderer",value:function(e,t){var n=e.authoringInfo&&"class-breaks-size"===e.authoringInfo.type,r=e.classBreakInfos.some((function(e){return Object(B.h)(e.symbol)}));if(n&&r){var i=e.classBreakInfos.length,a=18/(i>1?i-1:i);t.forEach((function(e,t){e.size=30-a*t}))}}},{key:"_isTallSymbol",value:function(e){var t=!1,n=!1;if(e)for(var r=0;r<e.length&&(!t||!n);r++){var i=e[r];"size"===i.type&&("height"===i.axis&&(t=!0),"width-and-depth"===i.axis&&(n=!0))}return t&&n}},{key:"_getSymbolPreview",value:function(){var e=Object(E.a)(S.a.mark((function e(t,r,i){var a,o,s;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null==t.size&&this._hasSizeRamp?Object(R.h)(22):t.size,!this._scaleDrivenSizeVariable||null==i||!i.applyScaleDrivenSize){e.next=7;break}return e.next=4,Promise.resolve().then(n.bind(null,386));case 4:o=e.sent,s=o.getSize,a=s(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:"simple-marker"===t.symbol.type?t.symbol.style:null});case 7:return e.abrupt("return",Object(H.d)(t.symbol,{size:a,opacity:r,scale:!1,symbolConfig:null==i?void 0:i.symbolConfig}).then((function(e){return t.preview=e,t})).catch((function(){return t.preview=null,t})));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_loadRenderer",value:function(){var e=Object(E.a)(S.a.mark((function e(t){var n,r,i,a,o,s,c,l,u,d,f,p,h,b=this;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],a=this.layer,t=t.clone(),this._hasClusterSizeVariable=!1,o="visualVariables"in t&&(null==(n=t.visualVariables)?void 0:n.some((function(e){return"size"===e.type&&"outline"!==e.target&&!Je.test(e.valueExpression)}))),t&&"visualVariables"in t&&!o&&"featureReduction"in a&&"cluster"===(null==(r=a.featureReduction)?void 0:r.type)&&(s=this.layerView._effectiveRenderer,(c=Object(C.q)(J(s,this.view)))&&("clusterMinSize"in(l=a.featureReduction)&&"clusterMaxSize"in l&&(u=l.clusterMinSize,d=l.clusterMaxSize,c.legendOptions=new z.a({showLegend:u!==d})),f=t.visualVariables||[],t.visualVariables=f.concat([c]),this._hasClusterSizeVariable=!0)),e.next=6,this._getMedianColor(t);case 6:return p=e.sent,(it(t)||at(t))&&(h=(t.classBreakInfos||t.uniqueValueInfos).map((function(e){return b._fetchSymbol(e.symbol,p).then((function(t){e.symbol=t})).catch((function(){e.symbol=null}))})),Array.prototype.push.apply(i,h)),e.abrupt("return",(i.push(this._fetchSymbol(t.symbol||t.defaultSymbol,t.defaultSymbol?null:p).then((function(e){b._applySymbolToRenderer(t,e,rt(t))})).catch((function(){b._applySymbolToRenderer(t,null,rt(t))}))),Object(I.j)(i).then((function(){return t}))));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_applySymbolToRenderer",value:function(e,t,n){n?e.symbol=t:e.defaultSymbol=t}},{key:"_getMedianColor",value:function(){var e=Object(E.a)(S.a.mark((function e(t){var r,i,a,o,s,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("visualVariables"in t&&t.visualVariables){e.next=2;break}return e.abrupt("return",null);case 2:if(r=t.visualVariables.find((function(e){return"color"===e.type}))){e.next=5;break}return e.abrupt("return",null);case 5:if(i=null,a=null,!r.stops){e.next=10;break}if(1!==r.stops.length){e.next=9;break}return e.abrupt("return",r.stops[0].color);case 9:i=r.stops[0].value,a=r.stops[r.stops.length-1].value;case 10:return o=i+(a-i)/2,e.next=13,Promise.resolve().then(n.bind(null,386));case 13:return s=e.sent,c=s.getColor,e.abrupt("return",c(r,o));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_fetchSymbol",value:function(e,t){var n=this;if(!e)return Promise.reject();if("web-style"===e.type){var r=e.portal,i=r&&r.url,a=r&&r.user&&r.user.username,o=e.name+"-"+e.styleName+"-"+e.styleUrl+"-"+i+"-"+a,s=this._webStyleSymbolCache;return s.has(o)||("2d"===this.view.type?s.set(o,e.fetchCIMSymbol()):s.set(o,e.fetchSymbol())),s.get(o).then((function(e){return n._getAppliedCloneSymbol(e,t)})).catch((function(){return $e.warn("Fetching web-style failed!"),Promise.reject()}))}return Promise.resolve(this._getAppliedCloneSymbol(e,t))}},{key:"_getAppliedCloneSymbol",value:function(e,t){if(!e||!t)return e;var n=e.clone(),r=t&&t.toRgba();return n.type.indexOf("3d")>-1?this._applyColorTo3dSymbol(n,r):"cim"===n.type?Object(U.a)(n,t):n.color&&(n.color=new A.a(r||n.color)),n}},{key:"_applyColorTo3dSymbol",value:function(e,t){t&&e.symbolLayers.forEach((function(e){e&&(e.material||(e.material={}),e.material.color=new A.a(t))}))}},{key:"_getVisualVariableLegendElements",value:function(){var e=Object(E.a)(S.a.mark((function e(t,n){var r,i,a,o,s,c,l,u,d,f,p,h,b=this;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("visualVariables"in t&&t.visualVariables&&"vector-field"!==t.type){e.next=2;break}return e.abrupt("return",null);case 2:r=t.visualVariables,i=[],a=[],o=[],s=Object(k.a)(r);try{for(s.s();!(c=s.n()).done;)"color"===(l=c.value).type?i.push(l):"size"===l.type?a.push(l):"opacity"===l.type&&o.push(l)}catch(v){s.e(v)}finally{s.f()}return u=[].concat(i,a,o),0===i.length&&it(t)&&t.classBreakInfos&&1===t.classBreakInfos.length&&(p=t.classBreakInfos[0],d=p&&p.symbol),0===i.length&&rt(t)&&(d=t.symbol),d&&(d.type.indexOf("3d")>-1?"water"===(h=d.symbolLayers.getItemAt(0)).type?Object(C.k)(h.color)&&(f=h.color):Object(C.k)(h.material)&&Object(C.k)(h.material.color)&&(f=h.material.color):d.url||(f=d.color)),e.next=10,Promise.all(u.map(function(){var e=Object(E.a)(S.a.mark((function e(r){var i,a,o,s,c,l;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.legendOptions&&!1===r.legendOptions.showLegend){e.next=39;break}if(i=b._getRampTitle(r,n),a=null,o="getField"in n&&n.getField&&n.getField(r.field),s=o&&Object(M.u)(o),"color"!==r.type){e.next=11;break}return e.next=7,ue(r,null,s);case 7:c=e.sent,a={type:"color-ramp",title:i,infos:c,preview:Object(H.b)(c.map((function(e){return e.color})))},b._hasColorRamp||(b._hasColorRamp=!(null==a.infos||!a.infos.length)),e.next=38;break;case 11:if("size"!==r.type||"outline"===r.target){e.next=33;break}if(!Je.test(r.valueExpression)){e.next=16;break}b._hasClusterSizeVariable||(b._scaleDrivenSizeVariable=r),e.next=31;break;case 16:return e.t0=b._hasClusterSizeVariable?b._getClusterTitle(r):i,e.t1=Ie,e.t2=t,e.t3=r,e.next=22,b._getMedianColor(t);case 22:return e.t4=e.sent,e.t5=b.scale,e.t6=b.view.type,e.t7=s,e.next=28,(0,e.t1)(e.t2,e.t3,e.t4,e.t5,e.t6,e.t7);case 28:e.t8=e.sent,a={type:"size-ramp",title:e.t0,infos:e.t8},b._hasSizeRamp||(b._hasSizeRamp=!(null==a.infos||!a.infos.length));case 31:e.next=38;break;case 33:if("opacity"!==r.type){e.next=38;break}return e.next=36,ue(r,f,s);case 36:l=e.sent,a={type:"opacity-ramp",title:i,infos:l,preview:Object(H.b)(l.map((function(e){return e.color})))},b._hasOpacityRamp||(b._hasOpacityRamp=!(null==a.infos||!a.infos.length));case 38:return e.abrupt("return",a&&a.infos?a:null);case 39:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 10:return e.abrupt("return",e.sent.filter((function(e){return!!e})));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getDomainName",value:function(e,t,n){if(e&&"function"!=typeof e){var r="getField"in n&&n.getField&&n.getField(e),i=r&&"getFieldDomain"in n&&n.getFieldDomain?n.getFieldDomain(r.name):null;return i&&"coded-value"===i.type?i.getName(t):null}return null}},{key:"_getClusterTitle",value:function(e){var t=this.layer,n=e.field;if("featureReduction"in t&&t.featureReduction&&"cluster"===t.featureReduction.type){var r=t.featureReduction,i="popupTemplate"in r&&r.popupTemplate,a=i&&i.fieldInfos;if(a){var o,s=Object(k.a)(a);try{for(s.s();!(o=s.n()).done;){var c=o.value;if(c.fieldName===n)return"cluster_count"===n?c.label||{showCount:!0}:c.label}}catch(l){s.e(l)}finally{s.f()}}}return{showCount:!0}}},{key:"_getRampTitle",value:function(e,t){var n=e.field,r=e.normalizationField,i=!1,a=!1,o=!1,s=null;n="function"==typeof n?null:n,r="function"==typeof r?null:r;var c=e.legendOptions&&e.legendOptions.title;if(null!=c)s=c;else if(e.valueExpressionTitle)s=e.valueExpressionTitle;else{if("renderer"in t&&t.renderer&&"authoringInfo"in t.renderer&&t.renderer.authoringInfo&&t.renderer.authoringInfo.visualVariables)for(var l=t.renderer.authoringInfo.visualVariables,u=0;u<l.length;u++){var d=l[u];if("color"===d.type){if("ratio"===d.style){i=!0;break}if("percent"===d.style){a=!0;break}if("percent-of-total"===d.style){o=!0;break}}}s={field:n&&this._getFieldAlias(n,t),normField:r&&this._getFieldAlias(r,t),ratio:i,ratioPercent:a,ratioPercentTotal:o}}return s}},{key:"_getRendererTitle",value:function(e,t){var n=e;if(n.legendOptions&&n.legendOptions.title)return n.legendOptions.title;if(n.valueExpressionTitle)return n.valueExpressionTitle;var r=n.field,i=null,a=null;it(n)&&(i=n.normalizationField,a="percent-of-total"===n.normalizationType),i="function"==typeof i?null:i;var o=null;return((r="function"==typeof r?null:r)||i)&&(o={field:r&&this._getFieldAlias(r,t),normField:i&&this._getFieldAlias(i,t),normByPct:a}),o}},{key:"_getFieldAlias",value:function(e,t){var n="popupTemplate"in t&&t.popupTemplate,r=n&&n.fieldInfos,i=null;r&&r.some((function(t){return e===t.fieldName&&(i=t,!0)}));var a=null;"getField"in t&&t.getField?a=t.getField(e):"fieldsIndex"in t&&t.fieldsIndex&&(a=t.fieldsIndex.get(e));var o=i||a,s=null;return o&&(s=i&&i.label||a&&a.alias||"name"in o&&o.name||"fieldName"in o&&o.fieldName),s}},{key:"_isUnclassedRenderer",value:function(e){var t=e.visualVariables,n=!1;return it(e)&&e.classBreakInfos&&1===e.classBreakInfos.length&&t&&(n=e.field?t.some((function(t){return!(!t||e.field!==t.field||(e.normalizationField||t.normalizationField)&&e.normalizationField!==t.normalizationField)})):!!t.length),n}}]),c}(j.a);Object(c.a)([Object(u.b)()],Tt.prototype,"children",void 0),Object(c.a)([Object(u.b)()],Tt.prototype,"layerView",void 0),Object(c.a)([Object(u.b)()],Tt.prototype,"layer",void 0),Object(c.a)([Object(u.b)()],Tt.prototype,"legendElements",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],Tt.prototype,"opacity",null),Object(c.a)([Object(u.b)()],Tt.prototype,"parent",void 0),Object(c.a)([Object(u.b)({readOnly:!0,dependsOn:[]})],Tt.prototype,"ready",null),Object(c.a)([Object(u.b)()],Tt.prototype,"keepCacheOnDestroy",void 0),Object(c.a)([Object(u.b)()],Tt.prototype,"respectLayerVisibility",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],Tt.prototype,"scale",null),Object(c.a)([Object(u.b)()],Tt.prototype,"sublayerIds",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],Tt.prototype,"isScaleDriven",null),Object(c.a)([Object(u.b)()],Tt.prototype,"title",void 0),Object(c.a)([Object(u.b)({readOnly:!0,dependsOn:["ready"],value:0})],Tt.prototype,"version",null),Object(c.a)([Object(u.b)()],Tt.prototype,"view",void 0);var Et=Tt=Object(c.a)([Object(p.a)("esri.widgets.Legend.support.ActiveLayerInfo")],Tt),Ct="state",Pt="view",It="all-layer-views",Mt="legend-properties",At=w.a.ofType(Et),Rt=["esri.layers.BuildingSceneLayer","esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.TileLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.WCSLayer"],Lt="view.basemapView.baseLayerViews",Ft="view.groundView.layerViews",Dt="view.basemapView.referenceLayerViews",Nt=[Lt,Ft,"view.layerViews",Dt],Vt=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e))._handles=new b.a,r._layerViewByLayerId={},r._layerInfosByLayerViewId={},r._activeLayerInfosByLayerViewId={},r._activeLayerInfosWithNoParent=new w.a,r.activeLayerInfos=new At,r.basemapLegendVisible=!1,r.groundLegendVisible=!1,r.keepCacheOnDestroy=!1,r.respectLayerVisibility=!0,r.layerInfos=[],r.view=null,r}return Object(a.a)(n,[{key:"initialize",value:function(){var e=this;this._handles.add(Object(v.a)(this,"view",this._viewHandles),Pt),this._handles.add(Object(_.c)((function(){return e._refresh()})))}},{key:"destroy",value:function(){this._destroyViewActiveLayerInfos(),this._handles.destroy(),this._handles=null,this.view=null}},{key:"state",get:function(){return this.get("view.ready")?"ready":"disabled"}},{key:"_viewHandles",value:function(){this._handles.remove(Ct),this.view&&this._handles.add(Object(v.a)(this,"state",this._stateHandles),Ct)}},{key:"_stateHandles",value:function(){this._resetAll(),"ready"===this.state&&this._watchPropertiesAndAllLayerViews()}},{key:"_resetAll",value:function(){this._handles.remove([It,Mt]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}},{key:"_destroyViewActiveLayerInfos",value:function(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}},{key:"_destroyViewActiveLayerInfo",value:function(e){this._handles.remove(e);var t=this._activeLayerInfosByLayerViewId[e];delete this._activeLayerInfosByLayerViewId[e],t&&t.parent&&t.parent.children.remove(t)}},{key:"_watchPropertiesAndAllLayerViews",value:function(){var e=this.view.allLayerViews;e.length&&this._refresh(),this._handles.add(e.on("change",this._allLayerViewsChangeHandle.bind(this)),It),this._handles.add(Object(v.d)(this,"layerInfos, basemapLegendVisible, groundLegendVisible",this._propertiesChangeHandle.bind(this)),Mt)}},{key:"_allLayerViewsChangeHandle",value:function(e){var t=this;e.removed.forEach((function(e){return t._destroyViewActiveLayerInfo(e.uid)})),this._refresh()}},{key:"_propertiesChangeHandle",value:function(){this._destroyViewActiveLayerInfos(),this._refresh()}},{key:"_refresh",value:function(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos)}},{key:"_sortActiveLayerInfos",value:function(e){var t=this;if(!(e.length<2)){var n=[];e.forEach((function(r){if(!r.parent){var i=r.layer.parent,a=i&&"uid"in i&&t._layerViewByLayerId[i.uid],o=a&&t._activeLayerInfosByLayerViewId[a.uid];o&&-1!==e.indexOf(o)&&(n.push(r),r.parent=o,o.children.add(r),t._sortActiveLayerInfos(o.children))}})),e.removeMany(n);var r={};this.view.allLayerViews.forEach((function(e,t){return r[e.layer.uid]=t})),e.sort((function(e,t){var n=r[e.layer.uid]||0;return(r[t.layer.uid]||0)-n}))}}},{key:"_generateLayerViews",value:function(){var e=[];return Nt.filter(this._filterLayerViews,this).map(this.get,this).filter((function(e){return null!=e})).forEach(this._collectLayerViews("layerViews",e)),e}},{key:"_filterLayerViews",value:function(e){var t=!this.basemapLegendVisible&&(e===Lt||e===Dt),n=!this.groundLegendVisible&&e===Ft;return!t&&!n}},{key:"_collectLayerViews",value:function(e,t){return function n(r){return r&&r.forEach((function(r){t.push(r),n(r[e])})),t}}},{key:"_filterLayerViewsByLayerInfos",value:function(e){var t=this,n=this.layerInfos;return!n||!n.length||n.some((function(n){return t._hasLayerInfo(n,e)}))}},{key:"_hasLayerInfo",value:function(e,t){var n=this._isLayerUIDMatching(e.layer,t.layer.uid);return n&&(this._layerInfosByLayerViewId[t.uid]=e),n}},{key:"_isLayerUIDMatching",value:function(e,t){return e&&(e.uid===t||this._hasLayerUID(e.layers,t))}},{key:"_hasLayerUID",value:function(e,t){var n=this;return e&&e.some((function(e){return n._isLayerUIDMatching(e,t)}))}},{key:"_isLayerViewSupported",value:function(e){return Rt.indexOf(e.layer.declaredClass)>-1&&(this._layerViewByLayerId[e.layer.uid]=e,!0)}},{key:"_generateActiveLayerInfo",value:function(e){var t=this;this._isLayerActive(e)?this._buildActiveLayerInfo(e):(this._handles.remove(e.uid),this._handles.add(Object(v.d)(e,"legendEnabled, layer.legendEnabled",(function(){return t._layerActiveHandle(e)})),e.uid))}},{key:"_layerActiveHandle",value:function(e){this._isLayerActive(e)&&(this._handles.remove(e.uid),this._buildActiveLayerInfo(e))}},{key:"_isLayerActive",value:function(e){return!this.respectLayerVisibility||e.legendEnabled&&e.get("layer.legendEnabled")}},{key:"_buildActiveLayerInfo",value:function(e){var t,n=this,r=e.layer,i=e.uid,a=this._layerInfosByLayerViewId[i],o=this._activeLayerInfosByLayerViewId[i];if(!o){var s=a&&void 0!==a.title&&a.layer.uid===r.uid;o=new Et({layer:r,layerView:e,title:s?a.title:r.title,view:this.view,respectLayerVisibility:this.respectLayerVisibility,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:a&&a.sublayerIds||[]}),this._activeLayerInfosByLayerViewId[i]=o}var c=r.parent&&"uid"in r.parent&&this._layerViewByLayerId[null==(t=r.parent)?void 0:t.uid];if(o.parent=this._activeLayerInfosByLayerViewId[null==c?void 0:c.uid],!this._handles.has(i)){var l=[Object(v.d)(r,"title",(function(e){return n._titleHandle(e,o)})),Object(v.d)(r,"renderer?, opacity, pointSymbol?, lineSymbol?, polygonSymbol?",(function(){return n._constructLegendElements(o)})),Object(v.k)(this.view,"stationary",(function(){return n._scaleHandle(o)})),Object(v.d)(e,"_effectiveRenderer",(function(){return n._constructLegendElements(o)}))];if(this.respectLayerVisibility){var u=Object(v.d)(e,"legendEnabled",(function(e){return n._legendEnabledHandle(e,o)})),d=Object(v.d)(r,"legendEnabled",(function(e){return n._legendEnabledHandle(e,o)}));l.push(u,d)}this._handles.add(l,i)}o.isScaleDriven||this._constructLegendElements(o),this._addActiveLayerInfo(o)}},{key:"_titleHandle",value:function(e,t){t.title=e,this._constructLegendElements(t)}},{key:"_legendEnabledHandle",value:function(e,t){e?this._addActiveLayerInfo(t):this._removeActiveLayerInfo(t)}},{key:"_scaleHandle",value:function(e){e.isScaleDriven&&this._constructLegendElements(e)}},{key:"_addActiveLayerInfo",value:function(e){var t=this,n=e.layerView,r=e.layer;if(this._isLayerActive(n)&&-1===this.activeLayerInfos.indexOf(e)){var i=e.parent;if(i)-1===i.children.indexOf(e)&&i.children.push(e),this._sortActiveLayerInfos(i.children);else{var a,o=null==(a=this.layerInfos)?void 0:a.some((function(e){return e.layer.uid===r.uid}));r.parent&&"uid"in r.parent&&!o?this._activeLayerInfosWithNoParent.add(e):(this.activeLayerInfos.add(e),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){var s=[];this._activeLayerInfosWithNoParent.forEach((function(e){var n=e.layer.parent,r=n&&"uid"in n&&t._layerViewByLayerId[null==n?void 0:n.uid],i=t._activeLayerInfosByLayerViewId[null==r?void 0:r.uid];i&&(s.push(e),e.parent=i)})),s.length&&(this._activeLayerInfosWithNoParent.removeMany(s),s.forEach((function(e){return t._addActiveLayerInfo(e)})))}}}},{key:"_removeActiveLayerInfo",value:function(e){var t=e.parent;t?t.children.remove(e):this.activeLayerInfos.remove(e)}},{key:"_constructLegendElements",value:function(e){var t=this,n=e.layer;"featureCollections"in n&&n.featureCollections?e.buildLegendElementsForFeatureCollections(n.featureCollections):"renderer"in n&&n.renderer?e.buildLegendElementsForRenderer(n.renderer):"url"in n&&n.url?e.buildLegendElementsForTools():e.children.forEach((function(e){return t._constructLegendElements(e)}))}}]),n}(j.a);Object(c.a)([Object(u.b)({type:At})],Vt.prototype,"activeLayerInfos",void 0),Object(c.a)([Object(u.b)()],Vt.prototype,"basemapLegendVisible",void 0),Object(c.a)([Object(u.b)()],Vt.prototype,"groundLegendVisible",void 0),Object(c.a)([Object(u.b)()],Vt.prototype,"keepCacheOnDestroy",void 0),Object(c.a)([Object(u.b)()],Vt.prototype,"respectLayerVisibility",void 0),Object(c.a)([Object(u.b)()],Vt.prototype,"layerInfos",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],Vt.prototype,"state",null),Object(c.a)([Object(u.b)()],Vt.prototype,"view",void 0);var zt=Vt=Object(c.a)([Object(p.a)("esri.widgets.Legend.LegendViewModel")],Vt),Ut=n(26),Bt=n(112),Gt=n(77),qt=n(213),Ht="http://www.w3.org/2000/svg",Wt="esri-relationship-ramp--diamond__container",$t="esri-relationship-ramp--diamond__left-column",Jt="esri-relationship-ramp--diamond__right-column",Yt="esri-relationship-ramp--diamond__middle-column",Kt="esri-relationship-ramp--diamond__middle-column--label",Zt="esri-relationship-ramp--diamond__middle-column--ramp",Xt="esri-relationship-ramp--square__table",Qt="esri-relationship-ramp--square__table-row",en="esri-relationship-ramp--square__table-cell",tn="esri-relationship-ramp--square__table-label",nn="esri-relationship-ramp--square__table-label--left-bottom",rn="esri-relationship-ramp--square__table-label--right-bottom",an="esri-relationship-ramp--square__table-label--left-top",on="esri-relationship-ramp--square__table-label--right-top";function sn(e,t,n){var r=e.focus,i=e.labels,a=!!r,o=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:60,i=e.focus,a=e.numClasses,o=e.colors,s=e.rotation,c=!!i,l=Math.sqrt(Math.pow(r,2)+Math.pow(r,2))+(c?0:5),u=null;null!=n&&(u="opacity: ".concat(n));for(var d=[],f=[],p=[],h=(r||75)/a,b=0;b<a;b++)for(var v=b*h,y=0;y<a;y++){var m=y*h,O=Object(qt.b)(o[b][y]),j=Object(qt.c)(null),w={type:"rect",x:m,y:v,width:h,height:h};d.push(Object(qt.f)(O)),f.push(Object(qt.h)(w,O.fill,j,null)),p.push(Object(qt.d)(w))}var _=10,k=15,x=15,S=10,T=null;c||(T="margin: -15px -15px -18px -15px");var E=cn("left",i,t),C=cn("right",i,t),P=Object(qt.a)(p),I=Object(qt.e)(P,l,l,0,!1,s,!1),M=Object(qt.e)(P,l,l,0,!1,c?-45:null,!1);return Object(g.a)("div",{style:u,class:c?Zt:en},Object(g.a)("svg",{xmlns:Ht,width:l,height:l,style:T},Object(g.a)("defs",null,Object(g.a)("marker",{id:"".concat(t,"_arrowStart"),markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"strokeWidth",orient:"auto"},Object(g.a)("polyline",{points:"0,0 5,5 0,10",fill:"none",stroke:"#555555","stroke-width":"1"})),Object(g.a)("marker",{id:"".concat(t,"_arrowEnd"),markerWidth:"10",markerHeight:"10",refX:"0",refY:"5",markerUnits:"strokeWidth",orient:"auto"},Object(g.a)("polyline",{points:"5,0 0,5 5,10",fill:"none",stroke:"#555555","stroke-width":"1"})),d),Object(g.a)("g",{transform:I},f),Object(g.a)("g",{transform:M},Object(g.a)("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":E.markerStart,"marker-end":E.markerEnd,x1:-_,y1:r-k,x2:-_,y2:k}),Object(g.a)("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":C.markerStart,"marker-end":C.markerEnd,x1:x,y1:r+S,x2:r-x,y2:r+S}))))}(e,t,n);return a?Object(g.a)("div",{class:Wt},Object(g.a)("div",{class:$t},i.left),Object(g.a)("div",{class:Yt},Object(g.a)("div",{class:Kt},i.top),o,Object(g.a)("div",{class:Kt},i.bottom)),Object(g.a)("div",{class:Jt},i.right)):Object(g.a)("div",{class:Xt},Object(g.a)("div",{class:Qt},Object(g.a)("div",{class:Object(y.a)(en,tn,rn)},i.left),Object(g.a)("div",{class:en}),Object(g.a)("div",{class:Object(y.a)(en,tn,nn)},i.top)),Object(g.a)("div",{class:Qt},Object(g.a)("div",{class:en}),o,Object(g.a)("div",{class:en})),Object(g.a)("div",{class:Qt},Object(g.a)("div",{class:Object(y.a)(en,tn,on)},i.bottom),Object(g.a)("div",{class:en}),Object(g.a)("div",{class:Object(y.a)(en,tn,an)},i.right)))}function cn(e,t,n){var r="".concat(n,"_arrowStart"),i="".concat(n,"_arrowEnd"),a="left"===e,o={markerStart:null,markerEnd:null};switch(t){case"HL":a?o.markerStart="url(#".concat(i,")"):o.markerEnd="url(#".concat(r,")");break;case"LL":o.markerStart="url(#".concat(i,")");break;case"LH":a?o.markerEnd="url(#".concat(r,")"):o.markerStart="url(#".concat(i,")");break;default:o.markerEnd="url(#".concat(r,")")}return o}n(182);var ln=n(311),un=Object(ln.a)(),dn=20,fn=10,pn=20,hn="esri-univariate-above-and-below-ramp__symbol",bn="esri-legend__color-ramp";function vn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"vertical",t="stroke:rgb(200, 200, 200);stroke-width:1";return"vertical"===e?Object(g.a)("svg",{height:"4",width:"10"},Object(g.a)("line",{x1:"0",y1:"2",x2:"10",y2:"2",style:t})):Object(g.a)("svg",{height:"10",width:"10"},Object(g.a)("line",{x1:"5",y1:"0",x2:"5",y2:"10",style:t}))}function yn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"vertical",n=document.createElement("div");return n.style.height="".concat(dn,"px"),n.className=hn,null!=e&&(n.style.opacity=e.toString()),un.append(n,vn.bind(null,t)),n}function mn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"vertical",r=arguments.length>3?arguments[3]:void 0;e.infos.forEach((function(e,i){if(r&&2===i)e.preview=yn(t,n);else{var a=Object(R.g)(e.size)+("horizontal"===n?pn:fn),o="div"===e.preview.tagName.toLowerCase(),s=o?e.preview:document.createElement("div");s.className=hn,"horizontal"===n?s.style.width="".concat(a,"px"):s.style.height="".concat(a,"px"),o||s.appendChild(e.preview),e.preview=s}}))}function gn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"classic",n=e.infos;return"classic"===t?(Object(R.g)(n[0].size)+fn)/2:(Object(R.g)(n[0].size)-Object(R.g)(n[n.length-1].size))/2}function On(e,t){if(!e)return null;var n=e.infos.map((function(e){return e.color})),r=Object(H.b)("full"===t.type?n:"above"===t.type?n.slice(0,3):n.slice(2,5),{width:t.width,height:t.height,align:t.rampAlignment});return r.className=bn,null!=t.opacity&&(r.style.opacity=t.opacity.toString()),r}function jn(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"vertical",i=0,a=e.infos,o=Math.floor(a.length/2),s="full"===t||"above"===t?0:o,c="full"===t||"below"===t?a.length-1:o,l=s;l<=c;l++)i+=n&&l===o?"horizontal"===r?10:dn:Object(R.g)(a[l].size)+("horizontal"===r?pn:fn);return Math.round(i)}function wn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"vertical",i=jn(e,t,n,r),a=e.infos,o=Math.floor(a.length/2),s="full"===t||"above"===t?0:o,c="full"===t||"below"===t?a.length-1:o,l="full"===t?a[s].size+a[c].size:"above"===t?a[s].size:a[c].size,u=n?"vertical"===r?dn:10:0,d="vertical"===r?fn*("full"===t?2:1):pn*("full"===t?2:1);return Math.round(i-(Object(R.g)(l)/2+u/2+d/2))}function _n(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"vertical",a=e.infos,o=a.filter((function(e){return"size-ramp"===e.type}))[0],s=a.filter((function(e){return"color-ramp"===e.type}))[0];return o&&((o=Object(r.a)({},o)).infos=Object(T.a)(o.infos)),s&&((s=Object(r.a)({},s)).infos=Object(T.a)(s.infos)),mn(o,t,i,!0),"horizontal"===i&&(o.infos.reverse(),null==(n=s)||n.infos.reverse()),{sizeRampElement:o,colorRampElement:s}}function kn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"vertical",i=e.infos,a=i.filter((function(e){return"size-ramp"===e.type}))[0],o=i.filter((function(e){return"color-ramp"===e.type}))[0];return a&&((a=Object(r.a)({},a)).infos=Object(T.a)(a.infos)),o&&((o=Object(r.a)({},o)).infos=Object(T.a)(o.infos)),mn(a,null,n,!1),"horizontal"===n&&(a.infos.reverse(),null==(t=o)||t.infos.reverse()),{sizeRampElement:a,colorRampElement:o}}function xn(e){e.appendChild(this)}function Sn(e,t,n){if(t){if("string"==typeof t||"number"==typeof t)return t;if("value"in t||"unit"in t)return Object(Bt.a)(e.dotValue,t);if("colorName"in t||"bandName"in t)return e[t.colorName]+": "+(e[t.bandName]||t.bandName);if("showCount"in t)return t.showCount?e.clusterCountTitle:null;var r=null;return n?r=t.ratioPercentTotal?"showRatioPercentTotal":t.ratioPercent?"showRatioPercent":t.ratio?"showRatio":t.normField?"showNormField":t.field?"showField":null:Tn(t,n)&&(r=t.normField?"showNormField":t.normByPct?"showNormPct":t.field?"showField":null),r?Object(Bt.a)("showField"===r?"{field}":e[r],{field:t.field,normField:t.normField}):null}}function Tn(e,t){return!t}function En(e,t){return!!(t&&"Stretched"===t&&e.version>=10.3&&"esri.layers.ImageryLayer"===e.declaredClass)}var Cn="esri-legend--card__carousel-indicator--activated",Pn="esri-legend--card",In="esri-legend--stacked",Mn="esri-legend--card__carousel-title",An="esri-legend--card__carousel-indicator",Rn="esri-legend--card__interval-separator",Ln="esri-legend--card__imagery-layer-image--stretched",Fn="esri-legend--card__image-label",Dn="esri-legend--card__layer-caption",Nn="esri-legend--card__label-element",Vn="esri-legend--card__layer-row",zn="esri-legend--card__label-cell",Un="esri-legend--card__message",Bn="esri-legend--card__ramp-label",Gn="esri-legend--card__section",qn="esri-legend--card__service-caption-text",Hn="esri-legend--card__service-content",Wn="esri-legend--card__service",$n="esri-legend--card__group-layer",Jn="esri-legend--card__group-layer-child",Yn="esri-legend--card__symbol",Kn="esri-legend--card__size-ramp-row",Zn="esri-legend--card__symbol-row",Xn="esri-legend--card__symbol-cell",Qn="esri-legend--card__carousel-indicator-container",er="esri-legend--card__interval-separators-container",tr="esri-legend--card__relationship-label-container",nr="esri-legend--card__label-container",rr="esri-legend--card__service-caption-container",ir="esri-legend--card__symbol-container",ar="esri-legend--card__size-ramp-container",or="esri-legend--card__size-ramp-preview",sr="esri-legend__size-ramp--horizontal",cr="esri-legend__ramp-labels",lr="esri-legend__layer-cell esri-legend__layer-cell--info",ur="esri-univariate-above-and-below-ramp__color--card",dr="esri-widget__heading",fr=window.devicePixelRatio;var pr=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,r){var a;return Object(i.a)(this,n),(a=t.call(this,e,r))._handles=new b.a,a._hasIndicators=!1,a._selectedSectionName=null,a._sectionNames=[],a._sectionMap=new Map,a.activeLayerInfos=null,a.layout="stack",a.messages=null,a.messagesCommon=null,a.type="card",a.view=null,a}return Object(a.a)(n,[{key:"initialize",value:function(){var e=this;this.own([this.watch("activeLayerInfos",(function(t){e._handles.removeAll(),e._watchForSectionChanges(t)}))])}},{key:"destroy",value:function(){this._handles.destroy(),this._handles=null}},{key:"render",value:function(){var e=this;this._hasIndicators="auto"===this.layout&&this.view.container.clientWidth<=768||"stack"===this.layout;var t=this.activeLayerInfos,n=t&&t.toArray().map((function(t){return e._renderLegendForLayer(t)})).filter((function(e){return!!e}));this._hasIndicators?this._selectedSectionName&&-1!==this._sectionNames.indexOf(this._selectedSectionName)||(this._selectedSectionName=this._sectionNames&&this._sectionNames[0]):this._selectedSectionName=null;var r=this._sectionNames.length,i=this._sectionNames.map((function(t,n){var i=Object(Bt.a)(e.messagesCommon.pagination.pageText,{index:n+1,total:r});return Object(g.a)("div",{key:t,role:"tab",id:t,"aria-label":i,"aria-controls":"".concat(t,"-panel"),"aria-selected":(e._selectedSectionName===t).toString(),tabIndex:e._selectedSectionName===t?0:-1,title:i,onclick:e._selectSection,onkeydown:e._focusSection,bind:e,class:e.classes(An,Object(Ut.a)({},Cn,e._selectedSectionName===t)),"data-section-name":t})})),a=this._hasIndicators&&r>1?Object(g.a)("div",{class:Qn,key:"carousel-navigation",role:"tablist"},i):null,o=this._hasIndicators?this._sectionMap.get(this._selectedSectionName):n&&n.length?n:null,s=Object(Ut.a)({},In,this._hasIndicators);return Object(g.a)("div",{class:this.classes(Pn,s)},o||Object(g.a)("div",{class:Un},this.messages.noLegend),a)}},{key:"_selectSection",value:function(e){var t=e.target.getAttribute("data-section-name");t&&(this._selectedSectionName=t)}},{key:"_focusSection",value:function(e){switch(e.key){case"ArrowLeft":case"ArrowRight":this._switchSectionOnArrowPress(e);break;case"Enter":case" ":this._selectSection(e)}}},{key:"_switchSectionOnArrowPress",value:function(e){var t=e.key,n="ArrowLeft"===t?-1:1,r=e.target.getAttribute("data-section-name"),i=this._sectionNames.indexOf(r),a=this._sectionNames,o=null;-1!==i&&(a[i+n]?o=document.getElementById(a[i+n]):"ArrowLeft"===t?o=document.getElementById(a[a.length-1]):"ArrowRight"===t&&(o=document.getElementById(a[0])),o&&o.focus())}},{key:"_watchForSectionChanges",value:function(e){var t=this;if(this._generateSectionNames(),e){e.forEach((function(e){var n="activeLayerInfo-".concat(e.layer.uid,"-version-change");t._handles.remove(n),t._watchForSectionChanges(e.children),t._handles.add(e.watch("version",(function(){return t._generateSectionNames()})),n)}));var n="activeLayerInfos-collection-change";this._handles.remove(n),this._handles.add(e.on("change",(function(){return t._watchForSectionChanges(e)})),n)}}},{key:"_generateSectionNames",value:function(){this._sectionNames.length=0,this._selectedSectionName=null,this.activeLayerInfos&&this.activeLayerInfos.forEach(this._generateSectionNamesForActiveLayerInfo,this)}},{key:"_getSectionName",value:function(e,t,n){return"".concat(this.id).concat(e.uid,"-type-").concat(t.type,"-").concat(n)}},{key:"_generateSectionNamesForActiveLayerInfo",value:function(e){var t=this;e.children.forEach(this._generateSectionNamesForActiveLayerInfo,this),e.legendElements&&e.legendElements.forEach((function(n,r){t._sectionNames.push(t._getSectionName(e.layer,n,r))}))}},{key:"_renderLegendForLayer",value:function(e){var t=this;if(!e.ready)return null;if(e.children.length){var n=e.children.map((function(e){return t._renderLegendForLayer(e)})).toArray();return Object(g.a)("div",{key:e.layer.uid,class:this.classes(Wn,$n)},Object(g.a)("div",{class:rr},e.title),n)}var r=e.legendElements;if(r&&!r.length)return null;var i=r.some((function(e){return"relationship-ramp"===e.type})),a=r.map((function(n,r){return t._renderLegendForElement(n,e,r,i)})).filter((function(e){return!!e}));if(!a.length)return null;var o=Object(Ut.a)({},Jn,!!e.parent);return Object(g.a)("div",{key:e.layer.uid,class:this.classes(Wn,o)},Object(g.a)("div",{class:rr},Object(g.a)("div",{class:qn},e.title)),Object(g.a)("div",{class:Hn},a))}},{key:"_renderLegendForElement",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a="color-ramp"===e.type,o="opacity-ramp"===e.type,s="size-ramp"===e.type,c=t.layer,l=e.title,u=null;if("string"==typeof l)u=l;else if(l){var d=Sn(this.messages,l,a||o);u=l.title?"".concat(l.title," (").concat(d,")"):d}var f=this._getSectionName(c,e,n),p=this._hasIndicators?Object(g.a)("div",null,Object(g.a)("h3",{class:this.classes(dr,Mn)},t.title),Object(g.a)("h4",{class:this.classes(dr,Dn)},u)):u?Object(g.a)("h4",{class:this.classes(dr,Dn)},u):null,h=null;if("symbol-table"===e.type){var b=e.infos.map((function(n,i){return r._renderLegendForElementInfo(n,t,e.legendType,i)})).filter((function(e){return!!e}));if(b.length){var v,y=b[0].properties.classes&&b[0].properties.classes[Zn],m=(v={},Object(Ut.a)(v,nr,!y&&!i),Object(Ut.a)(v,tr,i),v);h=Object(g.a)("div",{class:this.classes(m)},b)}}else"color-ramp"===e.type||"opacity-ramp"===e.type||"heatmap-ramp"===e.type?h=this._renderLegendForRamp(e,c.opacity):s?h=this._renderSizeRamp(e,c.opacity):"relationship-ramp"===e.type?h=sn(e,this.id,c.opacity):"univariate-above-and-below-ramp"===e.type?h=this._renderUnivariateAboveAndBelowRamp(e,c.opacity):"univariate-color-size-ramp"===e.type&&(h=this._renderUnivariateColorSizeRamp(e,c.opacity));if(!h)return null;var O=Object(g.a)("div",{key:f,class:Gn,id:"".concat(f,"-panel"),role:"tabpanel","aria-labelledby":f,tabIndex:0},[p,h]);return this._sectionMap.set(f,O),O}},{key:"_renderUnivariateAboveAndBelowRamp",value:function(e,t){var n=_n(e,t,"horizontal"),r=n.sizeRampElement,i=n.colorRampElement,a=jn(r,"full",!0,"horizontal"),o=wn(r,"above",!0,"horizontal"),s=wn(r,"below",!0,"horizontal"),c=On(i,{width:o,height:12,rampAlignment:"horizontal",opacity:t,type:"above"}),l=On(i,{width:s,height:12,rampAlignment:"horizontal",opacity:t,type:"below"}),u=gn(r,"card"),d=r.infos.map((function(e){return e.label})),f=d.length-1,p=d.map((function(e,t){return 0===t||t===f?Object(g.a)("div",{key:t},e):null})),h={marginTop:"3px",marginLeft:"".concat(u,"px"),display:"flex"},b={width:"".concat(a,"px"),display:"flex",flexDirection:"row",justifyContent:"space-between"};return Object(g.a)("div",{class:Vn,key:"size-ramp-preview",styles:{display:"flex",flexDirection:"column"}},Object(g.a)("div",{class:this.classes(ir,sr),styles:{display:"flex",flexDirection:"row"}},r.infos.map((function(e,t){return Object(g.a)("div",{key:t,class:Yn,bind:e.preview,afterCreate:xn})}))),c?Object(g.a)("div",{class:ur,styles:h,key:"color-ramp-preview"},Object(g.a)("div",{bind:c,afterCreate:xn}),Object(g.a)("div",{bind:l,afterCreate:xn})):null,Object(g.a)("div",{class:lr},Object(g.a)("div",{class:cr,styles:b},p)))}},{key:"_renderUnivariateColorSizeRamp",value:function(e,t){var n=kn(e,"horizontal"),r=n.sizeRampElement,i=n.colorRampElement,a=jn(r,"full",!1,"horizontal"),o=On(i,{width:wn(r,"full",!1,"horizontal"),height:12,rampAlignment:"horizontal",opacity:t,type:"full"}),s=gn(r,"card"),c=r.infos.length-1,l=r.infos.map((function(e,t){return 0===t||t===c?Object(g.a)("div",{key:t},e.label):null})),u={marginTop:"3px",marginLeft:"".concat(s,"px"),display:"flex"},d={width:"".concat(a,"px"),display:"flex",flexDirection:"row",justifyContent:"space-between"};return Object(g.a)("div",{class:Vn,key:"size-ramp-preview",styles:{display:"flex",flexDirection:"column"}},Object(g.a)("div",{class:this.classes(ir,sr),styles:{display:"flex",flexDirection:"row"}},r.infos.map((function(e,t){return Object(g.a)("div",{key:t,class:Yn,bind:e.preview,afterCreate:xn})}))),Object(g.a)("div",{class:ur,styles:u,key:"color-ramp-preview"},Object(g.a)("div",{bind:o,afterCreate:xn})),Object(g.a)("div",{class:lr},Object(g.a)("div",{class:cr,styles:d},l)))}},{key:"_renderLegendForElementInfo",value:function(e,t,n,r){var i=t.layer;if(e.type)return this._renderLegendForElement(e,t,r);var a=En(i,n);if(e.preview){var o,s;if(!e.symbol||-1===e.symbol.type.indexOf("simple-fill")){if(!e.label)return Object(g.a)("div",{key:r,bind:e.preview,afterCreate:xn});var c=Object(Ut.a)({},Xn,this._hasIndicators);return Object(g.a)("div",{key:r,class:this.classes(Vn,Object(Ut.a)({},Zn,this._hasIndicators))},Object(g.a)("div",{class:this.classes(c),bind:e.preview,afterCreate:xn}),Object(g.a)("div",{class:this.classes(Fn,Object(Ut.a)({},zn,this._hasIndicators))},Sn(this.messages,e.label,!1)||""))}var l=255,u=255,d=255,f=0,p=255,h=255,b=255,v=0,y=e.symbol.color&&e.symbol.color.a,m=e.symbol.outline&&e.symbol.outline.color&&e.symbol.outline.color.a;y&&(l=e.symbol.color.r,u=e.symbol.color.g,d=e.symbol.color.b,f=e.symbol.color.a*i.opacity),m&&(p=e.symbol.outline.color.r,h=e.symbol.outline.color.g,b=e.symbol.outline.color.b,v=e.symbol.outline.color.a*i.opacity);var O=null==(o=null==(s=e.symbol.color)?void 0:s.isBright)||o,j=O?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)",w={background:y?"rgba(".concat(l,", ").concat(u,", ").concat(d,", ").concat(f,")"):"none",color:O?"black":"white",textShadow:"-1px -1px 0 ".concat(j,",\n                                              1px -1px 0 ").concat(j,",\n                                              -1px 1px 0 ").concat(j,",\n                                              1px 1px 0 ").concat(j),border:m?"1px solid rgba(".concat(p,", ").concat(h,", ").concat(b,", ").concat(v,")"):"none"};return Object(g.a)("div",{key:r,class:Vn},Object(g.a)("div",{class:Nn,styles:w}," ",e.label," "))}if(e.src){var _=this._renderImage(e,i,a);return Object(g.a)("div",{key:r,class:Vn},_,Object(g.a)("div",{class:Fn},e.label||""))}}},{key:"_renderImage",value:function(e,t,n){var r,i=e.label,a=e.src,o=e.opacity,s=(r={},Object(Ut.a)(r,Ln,n),Object(Ut.a)(r,Yn,!n),r),c={opacity:"".concat(null!=o?o:t.opacity)};return Object(g.a)("img",{alt:Sn(this.messages,i,!1),src:a,border:0,width:e.width,height:e.height,class:this.classes(s),styles:c})}},{key:"_renderSizeRampLines",value:function(e){var t=e.infos,n=t[0],r=t[t.length-1],i=n.symbol,a=this._hasIndicators,o=Object(R.g)(n.size+n.outlineSize)*fr,s=Object(R.g)(r.size+r.outlineSize)*fr,c=a?o:o+50*fr,l=a?o/2+50*fr:o,u=function(e){if(e){if(e.type.indexOf("3d")>-1){var t=e.symbolLayers&&e.symbolLayers.length;if(!t)return;var n=e.symbolLayers.getItemAt(t-1).get("resource.primitive");return"triangle"===n||"cone"===n||"tetrahedron"===n}return"triangle"===e.style}}(i),d=function(e){if(e){if(e.type.indexOf("3d")>-1){var t=e.symbolLayers&&e.symbolLayers.length;if(!t)return;var n=e.symbolLayers.getItemAt(t-1),r=n.resource&&n.resource.primitive;return"circle"===r||"cross"===r||"kite"===r||"sphere"===r||"cube"===r||"diamond"===r}var i=e.style;return"circle"===i||"diamond"===i||"cross"===i}}(i),f=document.createElement("canvas");f.width=c,f.height=l,f.style.width=f.width/fr+"px",f.style.height=f.height/fr+"px";var p=f.getContext("2d");if(a){p.beginPath();var h=c/2-s/2,b=l;p.moveTo(0,0),p.lineTo(h,b);var v=c,y=c/2+s/2,m=l;p.moveTo(v,0),p.lineTo(y,m)}else{p.beginPath();var O=l/2-s/2,j=c;p.moveTo(0,O),p.lineTo(j,0);var w=l/2+s/2,_=c,k=l;p.moveTo(0,w),p.lineTo(_,k)}return p.strokeStyle="#ddd",p.stroke(),Object(g.a)("div",{bind:f,afterCreate:xn,styles:a?{display:"flex",marginTop:"-".concat(u?0:d?o/2:0,"px"),marginBottom:"-".concat(u?s:d?s/2:0,"px")}:{display:"flex",marginRight:"-".concat(u?0:d?o/2:0,"px"),marginLeft:"-".concat(u?0:d?s/2:0,"px")}})}},{key:"_renderSizeRamp",value:function(e,t){var n=e.infos,r=n[0].label,i=n[n.length-1].label,a=n[0].preview,o=n[n.length-1].preview,s=this._hasIndicators,c={"flex-direction":s?"column":"row-reverse"};a&&((a=a.cloneNode(!0)).style.display="flex"),o&&((o=o.cloneNode(!0)).style.display="flex");var l={opacity:null!=t?"".concat(t):""};return Object(g.a)("div",{class:this.classes(Vn,Object(Ut.a)({},Kn,s))},Object(g.a)("div",{class:Bn},s?r:i),Object(g.a)("div",{class:ar,styles:c},Object(g.a)("div",{bind:a,afterCreate:xn,class:or,styles:l}),this._renderSizeRampLines(e),Object(g.a)("div",{bind:o,afterCreate:xn,class:ar,styles:l})),Object(g.a)("div",{class:Bn},s?i:r))}},{key:"_renderLegendForRamp",value:function(e,t){var n=e.infos,r="heatmap-ramp"===e.type,i=n.length-1,a=25,o=i>2&&!r?25*i:100,s=o+20,c=10,l=n.slice(0).reverse();l.forEach((function(e,t){e.offset=r?e.ratio:t/i}));var u=l.length-1,d=l.length%2!=0&&l[l.length/2|0],f=d&&Object(g.a)("div",{class:er},Object(g.a)("div",{class:Rn},"|"),Object(g.a)("div",{class:Bn},d.label)),p=n[n.length-1].label,h=n[0].label,b=null;null!=t&&(b="opacity: ".concat(t));var v=[[{shape:{type:"path",path:"M0 ".concat(a/2," L").concat(c," 0 L").concat(c," ").concat(a," Z")},fill:l[0].color,stroke:{width:0}},{shape:{type:"rect",x:c,y:0,width:o,height:a},fill:{type:"linear",x1:c,y1:0,x2:o+c,y2:0,colors:l},stroke:{width:0}},{shape:{type:"path",path:"M".concat(o+c," 0 L").concat(s," ").concat(a/2," L").concat(o+c," ").concat(a," Z")},fill:l[u].color,stroke:{width:0}}]],y=Object(qt.g)(v,s,a),m=this.messages;return Object(g.a)("div",{class:Vn},Object(g.a)("div",{class:Bn},r?m[p]:p),Object(g.a)("div",{class:ir},Object(g.a)("div",{style:b},y),f),Object(g.a)("div",{class:Bn},r?m[h]:h))}}]),n}(O.a);Object(c.a)([Object(u.b)()],pr.prototype,"activeLayerInfos",void 0),Object(c.a)([Object(u.b)()],pr.prototype,"layout",void 0),Object(c.a)([Object(u.b)(),Object(m.a)("esri/widgets/Legend/t9n/Legend")],pr.prototype,"messages",void 0),Object(c.a)([Object(u.b)(),Object(m.a)("esri/t9n/common")],pr.prototype,"messagesCommon",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],pr.prototype,"type",void 0),Object(c.a)([Object(u.b)()],pr.prototype,"view",void 0),Object(c.a)([Object(Gt.a)()],pr.prototype,"_selectSection",null);var hr=pr=Object(c.a)([Object(p.a)("esri.widgets.Legend.styles.Card")],pr),br="esri-legend__service",vr="esri-legend__service-label",yr="esri-legend__layer",mr="esri-legend__group-layer",gr="esri-legend__group-layer-child",Or="esri-legend__layer-table",jr="esri-legend__layer-table--size-ramp",wr="esri-legend__layer-child-table",_r="esri-legend__layer-caption",kr="esri-legend__layer-body",xr="esri-legend__layer-row",Sr="esri-legend__layer-cell esri-legend__layer-cell--info",Tr="esri-legend__imagery-layer-image--stretched",Er="esri-legend__imagery-layer-info--stretched",Cr="esri-legend__layer-cell esri-legend__layer-cell--symbols",Pr="esri-legend__symbol",Ir="esri-legend__ramps",Mr="esri-legend__size-ramp",Ar="esri-legend__color-ramp",Rr="esri-legend__opacity-ramp",Lr="esri-legend__ramp-labels",Fr="esri-legend__ramp-label",Dr="esri-univariate-above-and-below-ramp__label",Nr="esri-legend__message",Vr="esri-widget__heading",zr={display:"flex",alignItems:"flex-start"},Ur={marginLeft:"3px"},Br={display:"table-cell",verticalAlign:"middle"},Gr=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,r){var a;return Object(i.a)(this,n),(a=t.call(this,e,r)).activeLayerInfos=null,a.messages=null,a.type="classic",a}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.activeLayerInfos,n=t&&t.toArray().map((function(t){return e._renderLegendForLayer(t)})).filter((function(e){return!!e}));return Object(g.a)("div",null,n&&n.length?n:Object(g.a)("div",{class:Nr},this.messages.noLegend))}},{key:"_renderLegendForLayer",value:function(e){var t=this;if(!e.ready)return null;var n=!!e.children.length,r="".concat("esri-legend__").concat(e.layer.uid,"-version-").concat(e.version),i=e.title?Object(g.a)("h3",{class:this.classes(Vr,vr)},e.title):null;if(n){var a=e.children.map((function(e){return t._renderLegendForLayer(e)})).toArray();return Object(g.a)("div",{key:r,class:this.classes(br,mr)},i,a)}var o=e.legendElements;if(o&&!o.length)return null;var s=o.map((function(n){return t._renderLegendForElement(n,e.layer)})).filter((function(e){return!!e}));if(!s.length)return null;var c=Object(Ut.a)({},gr,!!e.parent);return Object(g.a)("div",{key:r,class:this.classes(br,c),tabIndex:0},i,Object(g.a)("div",{class:yr},s))}},{key:"_renderLegendForElement",value:function(e,t,n){var r=this,i="color-ramp"===e.type,a="opacity-ramp"===e.type,o="size-ramp"===e.type,s=null;if("symbol-table"===e.type||o){var c=e.infos.map((function(n){return r._renderLegendForElementInfo(n,t,o,e.legendType)})).filter((function(e){return!!e}));c.length&&(s=Object(g.a)("div",{class:kr},c))}else"color-ramp"===e.type||"opacity-ramp"===e.type||"heatmap-ramp"===e.type||"stretch-ramp"===e.type?s=this._renderLegendForRamp(e,t.opacity):"relationship-ramp"===e.type?s=sn(e,this.id,t.opacity):"univariate-above-and-below-ramp"===e.type?s=this._renderUnivariateAboveAndBelowRamp(e,t.opacity):"univariate-color-size-ramp"===e.type&&(s=this._renderUnivariateColorSizeRamp(e,t.opacity));if(!s)return null;var l=e.title,u=null;if("string"==typeof l)u=l;else if(l){var d=Sn(this.messages,l,i||a);u=Tn(0,i||a)&&l.title?"".concat(l.title," (").concat(d,")"):d}var f=n?wr:Or,p=u?Object(g.a)("div",{class:_r},u):null,h=Object(Ut.a)({},jr,o||!n);return Object(g.a)("div",{class:this.classes(f,h)},p,s)}},{key:"_renderUnivariateAboveAndBelowRamp",value:function(e,t){var n=this,r=_n(e,t),i=r.sizeRampElement,a=r.colorRampElement,o=wn(i,"above",!0),s=wn(i,"below",!0),c=On(a,{width:12,height:o,rampAlignment:"vertical",opacity:t,type:"above"}),l=On(a,{width:12,height:s,rampAlignment:"vertical",opacity:t,type:"below"}),u=gn(i),d=i.infos.map((function(e){return e.label})),f=d.map((function(e,t){var n=2===t;return 0===t?Object(g.a)("div",{key:t,class:e?c?Dr:Fr:null},e):n?Object(g.a)("div",null):null})),p=d.length-1,h=Math.floor(d.length/2),b=d.map((function(e,t){return t===h||t===p?Object(g.a)("div",{key:t,class:e?c?Dr:Fr:null},e):null})),v={display:"table-cell",verticalAlign:"middle"},y={marginTop:"".concat(u,"px")},m={height:"".concat(o,"px")},O={height:"".concat(s,"px")};return Object(g.a)("div",{key:"univariate-above-and-below-ramp-preview",styles:zr},Object(g.a)("div",{class:kr},i.infos.map((function(e,t){return Object(g.a)("div",{class:n.classes(xr,Mr)},Object(g.a)("div",{class:Pr,styles:v,bind:e.preview,afterCreate:xn}),c||t%2!=0?null:Object(g.a)("div",{class:Sr},d[t]))}))),c?Object(g.a)("div",{styles:y,key:"color-ramp-preview"},Object(g.a)("div",{styles:Ur},Object(g.a)("div",{styles:Br},Object(g.a)("div",{class:Ir,bind:c,afterCreate:xn})),Object(g.a)("div",{styles:Br},Object(g.a)("div",{class:Lr,styles:m},f))),Object(g.a)("div",{styles:Ur},Object(g.a)("div",{styles:Br},Object(g.a)("div",{class:Ir,bind:l,afterCreate:xn})),Object(g.a)("div",{styles:Br},Object(g.a)("div",{class:Lr,styles:O},b)))):null)}},{key:"_renderUnivariateColorSizeRamp",value:function(e,t){var n=this,r=kn(e),i=r.sizeRampElement,a=r.colorRampElement,o=gn(i),s=wn(i,"full",!1),c=On(a,{width:12,height:s,rampAlignment:"vertical",opacity:t,type:"full"}),l=i.infos.length-1,u=i.infos.map((function(e,t){return 0===t||t===l?Object(g.a)("div",{key:t,class:e.label?a?Dr:Fr:null},e.label):null})),d={display:"table-cell",verticalAlign:"middle"},f={marginTop:"".concat(o,"px")},p={height:"".concat(s,"px")};return Object(g.a)("div",{key:"univariate-above-and-below-ramp-preview",styles:zr},Object(g.a)("div",{class:kr},i.infos.map((function(e){return Object(g.a)("div",{class:n.classes(xr,Mr)},Object(g.a)("div",{class:Pr,styles:d,bind:e.preview,afterCreate:xn}))}))),Object(g.a)("div",{styles:f,key:"color-ramp-preview"},Object(g.a)("div",{styles:Ur},Object(g.a)("div",{styles:Br},Object(g.a)("div",{class:Ir,bind:c,afterCreate:xn})),Object(g.a)("div",{styles:Br},Object(g.a)("div",{class:Lr,styles:p},u)))))}},{key:"_renderLegendForRamp",value:function(e,t){var n=this,r=e.infos,i="opacity-ramp"===e.type,a="heatmap-ramp"===e.type,o="stretch-ramp"===e.type,s=e.preview,c=i?Rr:"";s.className="".concat(Ar," ").concat(c),null!=t&&(s.style.opacity=t.toString());var l=r.map((function(e){return Object(g.a)("div",{class:e.label?Fr:null},a?n.messages[e.label]:o?n._getStretchStopLabel(e):e.label)})),u={width:"".concat(24,"px")},d={height:s.style.height};return Object(g.a)("div",{class:xr},Object(g.a)("div",{class:Cr,styles:u},Object(g.a)("div",{class:Ir,bind:s,afterCreate:xn})),Object(g.a)("div",{class:Sr},Object(g.a)("div",{class:Lr,styles:d},l)))}},{key:"_getStretchStopLabel",value:function(e){return e.label?this.messages[e.label]+": "+Object(K.b)(e.value,{style:"decimal",notation:e.value.toString().indexOf("e")>-1?"scientific":"standard"}):""}},{key:"_renderLegendForElementInfo",value:function(e,t,n,r){var i;if(e.type)return this._renderLegendForElement(e,t,!0);var a=null,o=En(t,r);if(e.preview?a=Object(g.a)("div",{class:Pr,bind:e.preview,afterCreate:xn}):e.src&&(a=this._renderImage(e,t,o)),!a)return null;var s=Object(Ut.a)({},Er,o),c=(i={},Object(Ut.a)(i,Er,o),Object(Ut.a)(i,Mr,!o&&n),i);return Object(g.a)("div",{class:xr},Object(g.a)("div",{class:this.classes(Cr,c)},a),Object(g.a)("div",{class:this.classes(Sr,s)},Sn(this.messages,e.label,!1)||""))}},{key:"_renderImage",value:function(e,t,n){var r,i=e.label,a=e.src,o=e.opacity,s=(r={},Object(Ut.a)(r,Tr,n),Object(Ut.a)(r,Pr,!n),r),c={opacity:"".concat(null!=o?o:t.opacity)};return Object(g.a)("img",{alt:Sn(this.messages,i,!1),src:a,border:0,width:e.width,height:e.height,class:this.classes(s),styles:c})}}]),n}(O.a);Object(c.a)([Object(u.b)()],Gr.prototype,"activeLayerInfos",void 0),Object(c.a)([Object(u.b)(),Object(m.a)("esri/widgets/Legend/t9n/Legend")],Gr.prototype,"messages",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],Gr.prototype,"type",void 0);var qr=Gr=Object(c.a)([Object(p.a)("esri.widgets.Legend.styles.Classic")],Gr),Hr="esri-legend",Wr="esri-widget",$r="esri-widget--panel",Jr="esri-icon-layer-list",Yr=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,r){var a;return Object(i.a)(this,n),(a=t.call(this,e,r))._handles=new b.a,a.activeLayerInfos=null,a.basemapLegendVisible=!1,a.groundLegendVisible=!1,a.keepCacheOnDestroy=!1,a.respectLayerVisibility=!0,a.iconClass=Jr,a.label=void 0,a.layerInfos=null,a.messages=null,a.style=new qr,a.view=null,a.viewModel=new zt,a}return Object(a.a)(n,[{key:"initialize",value:function(){var e=this;this.own(Object(v.b)(this,"activeLayerInfos","change",(function(){return e._refreshActiveLayerInfos(e.activeLayerInfos)})),Object(v.a)(this,"style",(function(t,n){n&&t!==n&&n.destroy(),t&&(t.activeLayerInfos=e.activeLayerInfos,"card"===t.type&&(t.view=e.view))})))}},{key:"destroy",value:function(){this._handles.destroy(),this._handles=null}},{key:"castStyle",value:function(e){if(e instanceof hr||e instanceof qr)return e;if("string"==typeof e)return"card"===e?new hr:new qr;if(e&&"string"==typeof e.type){var t=Object(r.a)({},e);return delete t.type,new("card"===e.type?hr:qr)(t)}return new qr}},{key:"render",value:function(){return Object(g.a)("div",{class:this.classes(Hr,Wr,this.style instanceof qr?$r:null)},this.style.render())}},{key:"_refreshActiveLayerInfos",value:function(e){var t=this;this._handles.removeAll(),e.forEach((function(e){return t._renderOnActiveLayerInfoChange(e)})),this.scheduleRender()}},{key:"_renderOnActiveLayerInfoChange",value:function(e){var t=this,n=Object(v.a)(e,"version",(function(){return t.scheduleRender()}));this._handles.add(n,"version_".concat(e.layer.uid));var r=Object(v.b)(e,"children","change",(function(){e.children.forEach((function(e){return t._renderOnActiveLayerInfoChange(e)}))}));this._handles.add(r,"children_".concat(e.layer.uid)),e.children.forEach((function(e){return t._renderOnActiveLayerInfoChange(e)}))}}]),n}(O.a);Object(c.a)([Object(d.a)("viewModel.activeLayerInfos")],Yr.prototype,"activeLayerInfos",void 0),Object(c.a)([Object(d.a)("viewModel.basemapLegendVisible")],Yr.prototype,"basemapLegendVisible",void 0),Object(c.a)([Object(d.a)("viewModel.groundLegendVisible")],Yr.prototype,"groundLegendVisible",void 0),Object(c.a)([Object(d.a)("viewModel.keepCacheOnDestroy")],Yr.prototype,"keepCacheOnDestroy",void 0),Object(c.a)([Object(d.a)("viewModel.respectLayerVisibility")],Yr.prototype,"respectLayerVisibility",void 0),Object(c.a)([Object(u.b)()],Yr.prototype,"iconClass",void 0),Object(c.a)([Object(u.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Yr.prototype,"label",void 0),Object(c.a)([Object(d.a)("viewModel.layerInfos")],Yr.prototype,"layerInfos",void 0),Object(c.a)([Object(u.b)(),Object(m.a)("esri/widgets/Legend/t9n/Legend")],Yr.prototype,"messages",void 0),Object(c.a)([Object(u.b)()],Yr.prototype,"style",void 0),Object(c.a)([Object(f.a)("style")],Yr.prototype,"castStyle",null),Object(c.a)([Object(d.a)("viewModel.view")],Yr.prototype,"view",void 0),Object(c.a)([Object(u.b)()],Yr.prototype,"viewModel",void 0);var Kr=Yr=Object(c.a)([Object(p.a)("esri.widgets.Legend")],Yr);t.default=Kr},function(e,t,n){"use strict";var r=n(26),i=n(10),a=n(2),o=n(3),s=n(5),c=n(6),l=n(0),u=n(16),d=n(13),f=n(1),p=n(32),h=n(58),b=n(198),v=n(8),y=(n(12),n(19),n(20),n(111)),m=n(40),g=n(51),O=n(25),j=(n(56),n(77)),w=n(75),_=n(178),k=n(9),x=n(72),S="hide",T="hide-children";function E(e){if(e)return null!=e.listMode?e.listMode:void 0}function C(e){if(e)return e.listMode===T||"wmts"===e.type?void 0:"group"===e.type?"layers":"sublayers"}function P(e,t){e&&e.sort((function(e,n){var r=t.indexOf(e.uid),i=t.indexOf(n.uid);return r>i?-1:r<i?1:0}))}function I(e){var t=null==e?void 0:e.layer;return t&&"group"===t.type?t.layers:null}function M(e,t){var n,r=null==(n=e.layer)?void 0:n.uid;return r&&t.find((function(e){var t;return(null==(t=e.layer)?void 0:t.uid)===r}))}var A,R=n(7),L=n.n(R),F=n(15),D=n(36),N=n(192),V=n(224),z=n(252),U=n(415),B=n(91),G=n(335),q=(n(17),A=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).displayValueEnabled=!1,r.max=1,r.min=0,r.step=.1,r.type="slider",r.value=null,r}return Object(o.a)(n,[{key:"clone",value:function(){return new A({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}}]),n}(V.a));Object(l.a)([Object(f.b)()],q.prototype,"displayValueEnabled",void 0),Object(l.a)([Object(f.b)()],q.prototype,"max",void 0),Object(l.a)([Object(f.b)()],q.prototype,"min",void 0),Object(l.a)([Object(f.b)()],q.prototype,"step",void 0),Object(l.a)([Object(f.b)()],q.prototype,"value",void 0);var H=q=A=Object(l.a)([Object(v.a)("esri.support.Action.ActionSlider")],q),W=n(229),$="esri-layer-list-panel",J="esri-layer-list-panel__content",Y="esri-layer-list-panel__content--legend",K="esri-layer-list-panel__content--string",Z="esri-layer-list-panel__content--html-element",X="esri-layer-list-panel__content--widget",Q=function(e){Object(s.a)(r,e);var t=Object(c.a)(r);function r(e,n){var i;return Object(a.a)(this,r),(i=t.call(this,e,n))._legend=null,i._handles=new g.a,i.content=null,i.image=null,i.listItem=null,i.open=!1,i.visible=!0,i}return Object(o.a)(r,[{key:"initialize",value:function(){var e=this;this.own([Object(O.a)(this,"content",(function(t){return e._createLegend(t)}))])}},{key:"destroy",value:function(){var e=this._legend;e&&e.destroy(),this._legend=null}},{key:"className",get:function(){var e=this.image,t=this._getFirstWidget();return this._get("className")||!e&&t?t.iconClass:""},set:function(e){void 0!==e?this._override("className",e):this._clearOverride("className")}},{key:"title",get:function(){var e=this._getFirstWidget();return this._get("title")||e?e.label:""},set:function(e){void 0!==e?this._override("title",e):this._clearOverride("title")}},{key:"render",value:function(){return Object(k.a)("div",{class:$},this._renderContents())}},{key:"_renderContent",value:function(e){var t=this._legend,n=this.listItem;return e?"legend"===e?n&&n.view&&n.layer&&t?Object(k.a)("div",{class:this.classes(J,Y),key:t},t.render()):null:"string"==typeof e?Object(k.a)("div",{class:this.classes(J,K),key:e,innerHTML:e}):Object(W.b)(e)?Object(k.a)("div",{class:this.classes(J,X),key:e},e.render()):e instanceof HTMLElement?Object(k.a)("div",{class:this.classes(J,Z),key:e,bind:e,afterCreate:this._attachToNode}):null:null}},{key:"_renderContents",value:function(){var e=this,t=this.content;return Array.isArray(t)?t.map((function(t){return e._renderContent(t)})):this._renderContent(t)}},{key:"_getLegendOptions",value:function(e){if(e){var t=e.layer,n=e.view;return t&&n?{view:n,layerInfos:[{layer:t,title:""}]}:void 0}}},{key:"_createLegend",value:function(e){var t=this;this._hasLegend(e)&&!this._legend&&Promise.resolve().then(n.bind(null,513)).then((function(e){var n=e.default,r=t._handles,i=t.listItem,a=new n(t._getLegendOptions(i));t._legend=a,t.notifyChange("className"),t.notifyChange("title");var o=Object(O.a)(t,["listItem.view","listItem.layer"],(function(){return t._updateLegend(a)}));r.add(o,"legends"),t.scheduleRender()}))}},{key:"_hasLegend",value:function(e){var t="legend";return e===t||!!Array.isArray(e)&&e.some((function(e){return e===t}))}},{key:"_attachToNode",value:function(e){e.appendChild(this)}},{key:"_updateLegend",value:function(e){var t=this.listItem;if(t){var n=t.layer,r=t.view;e.view=r,e.layerInfos=[{layer:n,title:null}],this.scheduleRender()}}},{key:"_getWidget",value:function(e){return"legend"===e?this._legend:Object(W.b)(e)?e:null}},{key:"_getFirstWidget",value:function(){var e=this,t=this.content;if(Array.isArray(t)){var n=null;return t.some((function(t){var r=e._getWidget(t);return r&&(n=r),!!r})),n}return this._getWidget(t)}}]),r}(Object(N.a)(x.a));Object(l.a)([Object(f.b)()],Q.prototype,"className",null),Object(l.a)([Object(f.b)()],Q.prototype,"content",void 0),Object(l.a)([Object(f.b)()],Q.prototype,"image",void 0),Object(l.a)([Object(f.b)()],Q.prototype,"listItem",void 0),Object(l.a)([Object(f.b)()],Q.prototype,"title",null),Object(l.a)([Object(f.b)()],Q.prototype,"open",void 0),Object(l.a)([Object(f.b)()],Q.prototype,"visible",void 0);var ee,te=Q=Object(l.a)([Object(v.a)("esri.widgets.LayerList.ListItemPanel")],Q),ne=m.a.ofType({key:"type",defaultKeyValue:"button",base:V.a,typeMap:{button:z.a,toggle:U.a,slider:H}}),re=m.a.ofType(ne),ie="layer",ae="child-list-mode",oe=ee=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).actionsSections=new re,r.actionsOpen=!1,r.children=new(m.a.ofType(ee)),r.childrenSortable=!0,r.error=null,r.layer=null,r.layerView=null,r.open=!1,r.panel=null,r.parent=null,r.sortable=!0,r.view=null,r.visible=null,r}return Object(o.a)(n,[{key:"initialize",value:function(){var e=this;this.handles.add([Object(O.a)(this,"layer",(function(t){return e._watchLayerProperties(t)})),Object(O.a)(this,"view",(function(t){return e._updateChildren(t)})),Object(O.a)(this,"panel",(function(t){return e._setListItemOnPanel(t)})),Object(O.a)(this,["layer","view"],(function(){return e._getLayerView()}))])}},{key:"destroy",value:function(){this.view=null}},{key:"castPanel",value:function(e){return this.get("panel.open")&&!e.hasOwnProperty("open")&&(e.open=!0),e?new te(e):null}},{key:"title",get:function(){var e=this.get("layer.layer");return(!e||e&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""},set:function(e){void 0!==e?this._override("title",e):this._clearOverride("title")}},{key:"updating",get:function(){var e=this.layerView;return e?e.updating:this._isLayerUpdating(this.layer)}},{key:"visibleAtCurrentScale",get:function(){return!function(e,t){if(!e||isNaN(t))return!1;var n=function(e){if(e)return null!=e.minScale?e.minScale:void 0}(e),r=function(e){if(e)return null!=e.maxScale?e.maxScale:void 0}(e),i=!isNaN(n)&&n>0&&t>n,a=!isNaN(r)&&r>0&&t<r;return i||a}(this.layer,this.get("view.scale"))}},{key:"visibilityMode",get:function(){return function(e){if(!e)return"inherited";var t=e.get("layer.capabilities.exportMap.supportsSublayerVisibility");if("boolean"==typeof t)return t?"independent":"inherited";var n=e.get("capabilities.exportMap.supportsSublayerVisibility");return"boolean"==typeof n?n?"independent":"inherited":null!=e.visibilityMode?e.visibilityMode:"independent"}(this.layer)}},{key:"clone",value:function(){return new ee({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,children:this.children.clone(),layer:this.layer,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})}},{key:"_setListItemOnPanel",value:function(e){e&&(e.listItem=this)}},{key:"_updateChildren",value:function(e){var t=this.children;t&&t.forEach((function(t){return t.view=e}))}},{key:"_addChildren",value:function(e){var t=this;if(this.handles.remove(ae),this.children.removeAll(),e){e.forEach((function(n){t.handles.add(Object(O.d)(n,"listMode",(function(){return t._addChildren(e)})),ae)}));var n=[];e.filter((function(e){return"hide"!==E(e)})).forEach((function(e){if(E(e)!==S){var r=new ee({layer:e,parent:t,view:t.view});n.unshift(r)}})),this.children.addMany(n)}}},{key:"_watchSublayerChanges",value:function(e){var t=this;e&&this.handles.add(e.on("change",(function(){t._addChildren(e)})),ie)}},{key:"_initializeChildLayers",value:function(e){this._addChildren(e),this._watchSublayerChanges(e)}},{key:"_watchLayerProperties",value:function(e){var t=this;if(this.handles&&(this.handles.remove(ie),this.handles.remove(ae),e))if(this.handles.add(Object(O.d)(e,"listMode",(function(){return t._watchLayerProperties(e)})),ie),"hide-children"!==E(e)){var n=C(e);n&&this.handles.add(Object(O.a)(e,n,(function(){e.hasOwnProperty(n)&&t._initializeChildLayers(e[n])})),ie)}else this.children.removeAll()}},{key:"_getLayerView",value:function(){var e=Object(F.a)(L.a.mark((function e(){var t,n,r;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.layer,n=this.view,!t||!n){e.next=13;break}return e.prev=2,e.next=5,n.whenLayerView(t);case 5:if((r=e.sent).layer===this.layer){e.next=8;break}return e.abrupt("return");case 8:this._set("layerView",r),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(2);case 13:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"_isLayerUpdating",value:function(e){return!(e instanceof G.a)&&e&&"loading"===e.loadStatus}}]),n}(Object(N.a)(Object(B.b)(D.a)));Object(l.a)([Object(f.b)({type:re})],oe.prototype,"actionsSections",void 0),Object(l.a)([Object(f.b)()],oe.prototype,"actionsOpen",void 0),Object(l.a)([Object(f.b)({type:m.a})],oe.prototype,"children",void 0),Object(l.a)([Object(f.b)()],oe.prototype,"childrenSortable",void 0),Object(l.a)([Object(p.a)("layer.loadError?")],oe.prototype,"error",void 0),Object(l.a)([Object(f.b)()],oe.prototype,"layer",void 0),Object(l.a)([Object(f.b)({readOnly:!0})],oe.prototype,"layerView",void 0),Object(l.a)([Object(f.b)()],oe.prototype,"open",void 0),Object(l.a)([Object(f.b)({type:te})],oe.prototype,"panel",void 0),Object(l.a)([Object(h.a)("panel")],oe.prototype,"castPanel",null),Object(l.a)([Object(f.b)()],oe.prototype,"parent",void 0),Object(l.a)([Object(f.b)()],oe.prototype,"sortable",void 0),Object(l.a)([Object(f.b)()],oe.prototype,"title",null),Object(l.a)([Object(f.b)({readOnly:!0})],oe.prototype,"updating",null),Object(l.a)([Object(f.b)({value:null})],oe.prototype,"view",void 0),Object(l.a)([Object(p.a)("layer.visible")],oe.prototype,"visible",void 0),Object(l.a)([Object(f.b)({readOnly:!0})],oe.prototype,"visibleAtCurrentScale",null),Object(l.a)([Object(f.b)({readOnly:!0})],oe.prototype,"visibilityMode",null);var se=oe=ee=Object(l.a)([Object(v.a)("esri.widgets.LayerList.ListItem")],oe);function ce(e){return(ce="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ue(){return(ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){le(e,t,n[t])}))}return e}function fe(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function pe(e){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var he=pe(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),be=pe(/Edge/i),ve=pe(/firefox/i),ye=pe(/safari/i)&&!pe(/chrome/i)&&!pe(/android/i),me=pe(/iP(ad|od|hone)/i),ge=pe(/chrome/i)&&pe(/android/i),Oe={capture:!1,passive:!1};function je(e,t,n){e.addEventListener(t,n,!he&&Oe)}function we(e,t,n){e.removeEventListener(t,n,!he&&Oe)}function _e(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(n){return!1}return!1}}function ke(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function xe(e,t,n,r){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&_e(e,t):_e(e,t))||r&&e===n)return e;if(e===n)break}while(e=ke(e))}return null}var Se,Te=/\s+/g;function Ee(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(Te," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(Te," ")}}function Ce(e,t,n){var r=e&&e.style;if(r){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in r||-1!==t.indexOf("webkit")||(t="-webkit-"+t),r[t]=n+("string"===typeof n?"":"px")}}function Pe(e,t){var n="";if("string"===typeof e)n=e;else do{var r=Ce(e,"transform");r&&"none"!==r&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function Ie(e,t,n){if(e){var r=e.getElementsByTagName(t),i=0,a=r.length;if(n)for(;i<a;i++)n(r[i],i);return r}return[]}function Me(){var e=document.scrollingElement;return e||document.documentElement}function Ae(e,t,n,r,i){if(e.getBoundingClientRect||e===window){var a,o,s,c,l,u,d;if(e!==window&&e.parentNode&&e!==Me()?(o=(a=e.getBoundingClientRect()).top,s=a.left,c=a.bottom,l=a.right,u=a.height,d=a.width):(o=0,s=0,c=window.innerHeight,l=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!he))do{if(i&&i.getBoundingClientRect&&("none"!==Ce(i,"transform")||n&&"static"!==Ce(i,"position"))){var f=i.getBoundingClientRect();o-=f.top+parseInt(Ce(i,"border-top-width")),s-=f.left+parseInt(Ce(i,"border-left-width")),c=o+a.height,l=s+a.width;break}}while(i=i.parentNode);if(r&&e!==window){var p=Pe(i||e),h=p&&p.a,b=p&&p.d;p&&(c=(o/=b)+(u/=b),l=(s/=h)+(d/=h))}return{top:o,left:s,bottom:c,right:l,width:d,height:u}}}function Re(e,t,n){for(var r=Ve(e,!0),i=Ae(e)[t];r;){var a=Ae(r)[n];if(!("top"===n||"left"===n?i>=a:i<=a))return r;if(r===Me())break;r=Ve(r,!1)}return!1}function Le(e,t,n){for(var r=0,i=0,a=e.children;i<a.length;){if("none"!==a[i].style.display&&a[i]!==Bt.ghost&&a[i]!==Bt.dragged&&xe(a[i],n.draggable,e,!1)){if(r===t)return a[i];r++}i++}return null}function Fe(e,t){for(var n=e.lastElementChild;n&&(n===Bt.ghost||"none"===Ce(n,"display")||t&&!_e(n,t));)n=n.previousElementSibling;return n||null}function De(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Bt.clone||t&&!_e(e,t)||n++;return n}function Ne(e){var t=0,n=0,r=Me();if(e)do{var i=Pe(e),a=i.a,o=i.d;t+=e.scrollLeft*a,n+=e.scrollTop*o}while(e!==r&&(e=e.parentNode));return[t,n]}function Ve(e,t){if(!e||!e.getBoundingClientRect)return Me();var n=e,r=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=Ce(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return Me();if(r||t)return n;r=!0}}}while(n=n.parentNode);return Me()}function ze(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function Ue(e,t){return function(){if(!Se){var n=arguments,r=this;1===n.length?e.call(r,n[0]):e.apply(r,n),Se=setTimeout((function(){Se=void 0}),t)}}}function Be(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Ge(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var qe="Sortable"+(new Date).getTime();function He(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==Ce(e,"display")&&e!==Bt.ghost){t.push({target:e,rect:Ae(e)});var n=de({},t[t.length-1].rect);if(e.thisAnimationDuration){var r=Pe(e,!0);r&&(n.top-=r.f,n.left-=r.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var r=this;if(!this.options.animation)return clearTimeout(e),void("function"===typeof n&&n());var i=!1,a=0;t.forEach((function(e){var t=0,n=e.target,o=n.fromRect,s=Ae(n),c=n.prevFromRect,l=n.prevToRect,u=e.rect,d=Pe(n,!0);d&&(s.top-=d.f,s.left-=d.e),n.toRect=s,n.thisAnimationDuration&&ze(c,s)&&!ze(o,s)&&(u.top-s.top)/(u.left-s.left)===(o.top-s.top)/(o.left-s.left)&&(t=function(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}(u,c,l,r.options)),ze(s,o)||(n.prevFromRect=o,n.prevToRect=s,t||(t=r.options.animation),r.animate(n,u,s,t)),t&&(i=!0,a=Math.max(a,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),i?e=setTimeout((function(){"function"===typeof n&&n()}),a):"function"===typeof n&&n(),t=[]},animate:function(e,t,n,r){if(r){Ce(e,"transition",""),Ce(e,"transform","");var i=Pe(this.el),a=i&&i.a,o=i&&i.d,s=(t.left-n.left)/(a||1),c=(t.top-n.top)/(o||1);e.animatingX=!!s,e.animatingY=!!c,Ce(e,"transform","translate3d("+s+"px,"+c+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),Ce(e,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),Ce(e,"transform","translate3d(0,0,0)"),"number"===typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){Ce(e,"transition",""),Ce(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),r)}}}}var We=[],$e={initializeByDefault:!0},Je={mount:function(e){for(var t in $e)$e.hasOwnProperty(t)&&!(t in e)&&(e[t]=$e[t]);We.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),We.push(e)},pluginEvent:function(e,t,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var i=e+"Global";We.forEach((function(r){t[r.pluginName]&&(t[r.pluginName][i]&&t[r.pluginName][i](de({sortable:t},n)),t.options[r.pluginName]&&t[r.pluginName][e]&&t[r.pluginName][e](de({sortable:t},n)))}))},initializePlugins:function(e,t,n,r){for(var i in We.forEach((function(r){var i=r.pluginName;if(e.options[i]||r.initializeByDefault){var a=new r(e,t,e.options);a.sortable=e,a.options=e.options,e[i]=a,ue(n,a.defaults)}})),e.options)if(e.options.hasOwnProperty(i)){var a=this.modifyOption(e,i,e.options[i]);"undefined"!==typeof a&&(e.options[i]=a)}},getEventProperties:function(e,t){var n={};return We.forEach((function(r){"function"===typeof r.eventProperties&&ue(n,r.eventProperties.call(t[r.pluginName],e))})),n},modifyOption:function(e,t,n){var r;return We.forEach((function(i){e[i.pluginName]&&i.optionListeners&&"function"===typeof i.optionListeners[t]&&(r=i.optionListeners[t].call(e[i.pluginName],n))})),r}};function Ye(e){var t=e.sortable,n=e.rootEl,r=e.name,i=e.targetEl,a=e.cloneEl,o=e.toEl,s=e.fromEl,c=e.oldIndex,l=e.newIndex,u=e.oldDraggableIndex,d=e.newDraggableIndex,f=e.originalEvent,p=e.putSortable,h=e.extraEventProperties;if(t=t||n&&n[qe]){var b,v=t.options,y="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||he||be?(b=document.createEvent("Event")).initEvent(r,!0,!0):b=new CustomEvent(r,{bubbles:!0,cancelable:!0}),b.to=o||n,b.from=s||n,b.item=i||n,b.clone=a,b.oldIndex=c,b.newIndex=l,b.oldDraggableIndex=u,b.newDraggableIndex=d,b.originalEvent=f,b.pullMode=p?p.lastPutMode:void 0;var m=de({},h,Je.getEventProperties(r,t));for(var g in m)b[g]=m[g];n&&n.dispatchEvent(b),v[y]&&v[y].call(t,b)}}var Ke=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.evt,i=fe(n,["evt"]);Je.pluginEvent.bind(Bt)(e,t,de({dragEl:Xe,parentEl:Qe,ghostEl:et,rootEl:tt,nextEl:nt,lastDownEl:rt,cloneEl:it,cloneHidden:at,dragStarted:mt,putSortable:dt,activeSortable:Bt.active,originalEvent:r,oldIndex:ot,oldDraggableIndex:ct,newIndex:st,newDraggableIndex:lt,hideGhostForTarget:Nt,unhideGhostForTarget:Vt,cloneNowHidden:function(){at=!0},cloneNowShown:function(){at=!1},dispatchSortableEvent:function(e){Ze({sortable:t,name:e,originalEvent:r})}},i))};function Ze(e){Ye(de({putSortable:dt,cloneEl:it,targetEl:Xe,rootEl:tt,oldIndex:ot,oldDraggableIndex:ct,newIndex:st,newDraggableIndex:lt},e))}var Xe,Qe,et,tt,nt,rt,it,at,ot,st,ct,lt,ut,dt,ft,pt,ht,bt,vt,yt,mt,gt,Ot,jt,wt,_t=!1,kt=!1,xt=[],St=!1,Tt=!1,Et=[],Ct=!1,Pt=[],It="undefined"!==typeof document,Mt=me,At=be||he?"cssFloat":"float",Rt=It&&!ge&&!me&&"draggable"in document.createElement("div"),Lt=function(){if(It){if(he)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Ft=function(e,t){var n=Ce(e),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=Le(e,0,t),a=Le(e,1,t),o=i&&Ce(i),s=a&&Ce(a),c=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+Ae(i).width,l=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+Ae(a).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&o.float&&"none"!==o.float){var u="left"===o.float?"left":"right";return!a||"both"!==s.clear&&s.clear!==u?"horizontal":"vertical"}return i&&("block"===o.display||"flex"===o.display||"table"===o.display||"grid"===o.display||c>=r&&"none"===n[At]||a&&"none"===n[At]&&c+l>r)?"vertical":"horizontal"},Dt=function(e){function t(e,n){return function(r,i,a,o){var s=r.options.group.name&&i.options.group.name&&r.options.group.name===i.options.group.name;if(null==e&&(n||s))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"===typeof e)return t(e(r,i,a,o),n)(r,i,a,o);var c=(n?r:i).options.group.name;return!0===e||"string"===typeof e&&e===c||e.join&&e.indexOf(c)>-1}}var n={},r=e.group;r&&"object"==ce(r)||(r={name:r}),n.name=r.name,n.checkPull=t(r.pull,!0),n.checkPut=t(r.put),n.revertClone=r.revertClone,e.group=n},Nt=function(){!Lt&&et&&Ce(et,"display","none")},Vt=function(){!Lt&&et&&Ce(et,"display","")};It&&document.addEventListener("click",(function(e){if(kt)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),kt=!1,!1}),!0);var zt=function(e){if(Xe){var t=function(e,t){var n;return xt.some((function(r){if(!Fe(r)){var i=Ae(r),a=r[qe].options.emptyInsertThreshold,o=e>=i.left-a&&e<=i.right+a,s=t>=i.top-a&&t<=i.bottom+a;return a&&o&&s?n=r:void 0}})),n}((e=e.touches?e.touches[0]:e).clientX,e.clientY);if(t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[qe]._onDragOver(n)}}},Ut=function(e){Xe&&Xe.parentNode[qe]._isOutsideThisEl(e.target)};function Bt(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=ue({},t),e[qe]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ft(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Bt.supportPointer&&"PointerEvent"in window&&!ye,emptyInsertThreshold:5};for(var r in Je.initializePlugins(this,e,n),n)!(r in t)&&(t[r]=n[r]);for(var i in Dt(t),this)"_"===i.charAt(0)&&"function"===typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!t.forceFallback&&Rt,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?je(e,"pointerdown",this._onTapStart):(je(e,"mousedown",this._onTapStart),je(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(je(e,"dragover",this),je(e,"dragenter",this)),xt.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),ue(this,He())}function Gt(e,t,n,r,i,a,o,s){var c,l,u=e[qe],d=u.options.onMove;return!window.CustomEvent||he||be?(c=document.createEvent("Event")).initEvent("move",!0,!0):c=new CustomEvent("move",{bubbles:!0,cancelable:!0}),c.to=t,c.from=e,c.dragged=n,c.draggedRect=r,c.related=i||t,c.relatedRect=a||Ae(t),c.willInsertAfter=s,c.originalEvent=o,e.dispatchEvent(c),d&&(l=d.call(u,c,o)),l}function qt(e){e.draggable=!1}function Ht(){Ct=!1}function Wt(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function $t(e){return setTimeout(e,0)}function Jt(e){return clearTimeout(e)}Bt.prototype={constructor:Bt,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(gt=null)},_getDirection:function(e,t){return"function"===typeof this.options.direction?this.options.direction.call(this,e,t,Xe):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,r=this.options,i=r.preventOnFilter,a=e.type,o=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(o||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,l=r.filter;if(function(e){Pt.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var r=t[n];r.checked&&Pt.push(r)}}(n),!Xe&&!(/mousedown|pointerdown/.test(a)&&0!==e.button||r.disabled)&&!c.isContentEditable&&(this.nativeDraggable||!ye||!s||"SELECT"!==s.tagName.toUpperCase())&&(!(s=xe(s,r.draggable,n,!1))||!s.animated)&&rt!==s){if(ot=De(s),ct=De(s,r.draggable),"function"===typeof l){if(l.call(this,e,s,this))return Ze({sortable:t,rootEl:c,name:"filter",targetEl:s,toEl:n,fromEl:n}),Ke("filter",t,{evt:e}),void(i&&e.cancelable&&e.preventDefault())}else if(l&&(l=l.split(",").some((function(r){if(r=xe(c,r.trim(),n,!1))return Ze({sortable:t,rootEl:r,name:"filter",targetEl:s,fromEl:n,toEl:n}),Ke("filter",t,{evt:e}),!0}))))return void(i&&e.cancelable&&e.preventDefault());r.handle&&!xe(c,r.handle,n,!1)||this._prepareDragStart(e,o,s)}}},_prepareDragStart:function(e,t,n){var r,i=this,a=i.el,o=i.options,s=a.ownerDocument;if(n&&!Xe&&n.parentNode===a){var c=Ae(n);if(tt=a,Qe=(Xe=n).parentNode,nt=Xe.nextSibling,rt=n,ut=o.group,Bt.dragged=Xe,ft={target:Xe,clientX:(t||e).clientX,clientY:(t||e).clientY},vt=ft.clientX-c.left,yt=ft.clientY-c.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,Xe.style["will-change"]="all",r=function(){Ke("delayEnded",i,{evt:e}),Bt.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!ve&&i.nativeDraggable&&(Xe.draggable=!0),i._triggerDragStart(e,t),Ze({sortable:i,name:"choose",originalEvent:e}),Ee(Xe,o.chosenClass,!0))},o.ignore.split(",").forEach((function(e){Ie(Xe,e.trim(),qt)})),je(s,"dragover",zt),je(s,"mousemove",zt),je(s,"touchmove",zt),je(s,"mouseup",i._onDrop),je(s,"touchend",i._onDrop),je(s,"touchcancel",i._onDrop),ve&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Xe.draggable=!0),Ke("delayStart",this,{evt:e}),!o.delay||o.delayOnTouchOnly&&!t||this.nativeDraggable&&(be||he))r();else{if(Bt.eventCanceled)return void this._onDrop();je(s,"mouseup",i._disableDelayedDrag),je(s,"touchend",i._disableDelayedDrag),je(s,"touchcancel",i._disableDelayedDrag),je(s,"mousemove",i._delayedDragTouchMoveHandler),je(s,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&je(s,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(r,o.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Xe&&qt(Xe),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;we(e,"mouseup",this._disableDelayedDrag),we(e,"touchend",this._disableDelayedDrag),we(e,"touchcancel",this._disableDelayedDrag),we(e,"mousemove",this._delayedDragTouchMoveHandler),we(e,"touchmove",this._delayedDragTouchMoveHandler),we(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?je(document,"pointermove",this._onTouchMove):je(document,t?"touchmove":"mousemove",this._onTouchMove):(je(Xe,"dragend",this),je(tt,"dragstart",this._onDragStart));try{document.selection?$t((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(e,t){if(_t=!1,tt&&Xe){Ke("dragStarted",this,{evt:t}),this.nativeDraggable&&je(document,"dragover",Ut);var n=this.options;!e&&Ee(Xe,n.dragClass,!1),Ee(Xe,n.ghostClass,!0),Bt.active=this,e&&this._appendGhost(),Ze({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(pt){this._lastX=pt.clientX,this._lastY=pt.clientY,Nt();for(var e=document.elementFromPoint(pt.clientX,pt.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(pt.clientX,pt.clientY))!==t;)t=e;if(Xe.parentNode[qe]._isOutsideThisEl(e),t)do{if(t[qe]){if(t[qe]._onDragOver({clientX:pt.clientX,clientY:pt.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Vt()}},_onTouchMove:function(e){if(ft){var t=this.options,n=t.fallbackTolerance,r=t.fallbackOffset,i=e.touches?e.touches[0]:e,a=et&&Pe(et,!0),o=et&&a&&a.a,s=et&&a&&a.d,c=Mt&&wt&&Ne(wt),l=(i.clientX-ft.clientX+r.x)/(o||1)+(c?c[0]-Et[0]:0)/(o||1),u=(i.clientY-ft.clientY+r.y)/(s||1)+(c?c[1]-Et[1]:0)/(s||1);if(!Bt.active&&!_t){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(et){a?(a.e+=l-(ht||0),a.f+=u-(bt||0)):a={a:1,b:0,c:0,d:1,e:l,f:u};var d="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");Ce(et,"webkitTransform",d),Ce(et,"mozTransform",d),Ce(et,"msTransform",d),Ce(et,"transform",d),ht=l,bt=u,pt=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!et){var e=this.options.fallbackOnBody?document.body:tt,t=Ae(Xe,!0,Mt,!0,e),n=this.options;if(Mt){for(wt=e;"static"===Ce(wt,"position")&&"none"===Ce(wt,"transform")&&wt!==document;)wt=wt.parentNode;wt!==document.body&&wt!==document.documentElement?(wt===document&&(wt=Me()),t.top+=wt.scrollTop,t.left+=wt.scrollLeft):wt=Me(),Et=Ne(wt)}Ee(et=Xe.cloneNode(!0),n.ghostClass,!1),Ee(et,n.fallbackClass,!0),Ee(et,n.dragClass,!0),Ce(et,"transition",""),Ce(et,"transform",""),Ce(et,"box-sizing","border-box"),Ce(et,"margin",0),Ce(et,"top",t.top),Ce(et,"left",t.left),Ce(et,"width",t.width),Ce(et,"height",t.height),Ce(et,"opacity","0.8"),Ce(et,"position",Mt?"absolute":"fixed"),Ce(et,"zIndex","100000"),Ce(et,"pointerEvents","none"),Bt.ghost=et,e.appendChild(et),Ce(et,"transform-origin",vt/parseInt(et.style.width)*100+"% "+yt/parseInt(et.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,r=e.dataTransfer,i=n.options;Ke("dragStart",this,{evt:e}),Bt.eventCanceled?this._onDrop():(Ke("setupClone",this),Bt.eventCanceled||((it=Ge(Xe)).draggable=!1,it.style["will-change"]="",this._hideClone(),Ee(it,this.options.chosenClass,!1),Bt.clone=it),n.cloneId=$t((function(){Ke("clone",n),Bt.eventCanceled||(n.options.removeCloneOnHide||tt.insertBefore(it,Xe),n._hideClone(),Ze({sortable:n,name:"clone"}))})),!t&&Ee(Xe,i.dragClass,!0),t?(kt=!0,n._loopId=setInterval(n._emulateDragOver,50)):(we(document,"mouseup",n._onDrop),we(document,"touchend",n._onDrop),we(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",i.setData&&i.setData.call(n,r,Xe)),je(document,"drop",n),Ce(Xe,"transform","translateZ(0)")),_t=!0,n._dragStartId=$t(n._dragStarted.bind(n,t,e)),je(document,"selectstart",n),mt=!0,ye&&Ce(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,r,i,a=this.el,o=e.target,s=this.options,c=s.group,l=Bt.active,u=ut===c,d=s.sort,f=dt||l,p=this,h=!1;if(!Ct){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),o=xe(o,s.draggable,a,!0),E("dragOver"),Bt.eventCanceled)return h;if(Xe.contains(e.target)||o.animated&&o.animatingX&&o.animatingY||p._ignoreWhileAnimating===o)return P(!1);if(kt=!1,l&&!s.disabled&&(u?d||(r=!tt.contains(Xe)):dt===this||(this.lastPutMode=ut.checkPull(this,l,Xe,e))&&c.checkPut(this,l,Xe,e))){if(i="vertical"===this._getDirection(e,o),t=Ae(Xe),E("dragOverValid"),Bt.eventCanceled)return h;if(r)return Qe=tt,C(),this._hideClone(),E("revert"),Bt.eventCanceled||(nt?tt.insertBefore(Xe,nt):tt.appendChild(Xe)),P(!0);var b=Fe(a,s.draggable);if(!b||function(e,t,n){var r=Ae(Fe(n.el,n.options.draggable)),i=10;return t?e.clientX>r.right+i||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+i}(e,i,this)&&!b.animated){if(b===Xe)return P(!1);if(b&&a===e.target&&(o=b),o&&(n=Ae(o)),!1!==Gt(tt,a,Xe,t,o,n,e,!!o))return C(),a.appendChild(Xe),Qe=a,I(),P(!0)}else if(o.parentNode===a){n=Ae(o);var v,y,m,g=Xe.parentNode!==a,O=!function(e,t,n){var r=n?e.left:e.top,i=n?e.right:e.bottom,a=n?e.width:e.height,o=n?t.left:t.top,s=n?t.right:t.bottom,c=n?t.width:t.height;return r===o||i===s||r+a/2===o+c/2}(Xe.animated&&Xe.toRect||t,o.animated&&o.toRect||n,i),j=i?"top":"left",w=Re(o,"top","top")||Re(Xe,"top","top"),_=w?w.scrollTop:void 0;if(gt!==o&&(y=n[j],St=!1,Tt=!O&&s.invertSwap||g),0!==(v=function(e,t,n,r,i,a,o,s){var c=r?e.clientY:e.clientX,l=r?n.height:n.width,u=r?n.top:n.left,d=r?n.bottom:n.right,f=!1;if(!o)if(s&&jt<l*i){if(!St&&(1===Ot?c>u+l*a/2:c<d-l*a/2)&&(St=!0),St)f=!0;else if(1===Ot?c<u+jt:c>d-jt)return-Ot}else if(c>u+l*(1-i)/2&&c<d-l*(1-i)/2)return function(e){return De(Xe)<De(e)?1:-1}(t);if((f=f||o)&&(c<u+l*a/2||c>d-l*a/2))return c>u+l/2?1:-1;return 0}(e,o,n,i,O?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,Tt,gt===o))){var k=De(Xe);do{k-=v,m=Qe.children[k]}while(m&&("none"===Ce(m,"display")||m===et))}if(0===v||m===o)return P(!1);gt=o,Ot=v;var x=o.nextElementSibling,S=!1,T=Gt(tt,a,Xe,t,o,n,e,S=1===v);if(!1!==T)return 1!==T&&-1!==T||(S=1===T),Ct=!0,setTimeout(Ht,30),C(),S&&!x?a.appendChild(Xe):o.parentNode.insertBefore(Xe,S?x:o),w&&Be(w,0,_-w.scrollTop),Qe=Xe.parentNode,void 0===y||Tt||(jt=Math.abs(y-Ae(o)[j])),I(),P(!0)}if(a.contains(Xe))return P(!1)}return!1}function E(s,c){Ke(s,p,de({evt:e,isOwner:u,axis:i?"vertical":"horizontal",revert:r,dragRect:t,targetRect:n,canSort:d,fromSortable:f,target:o,completed:P,onMove:function(n,r){return Gt(tt,a,Xe,t,n,Ae(n),e,r)},changed:I},c))}function C(){E("dragOverAnimationCapture"),p.captureAnimationState(),p!==f&&f.captureAnimationState()}function P(t){return E("dragOverCompleted",{insertion:t}),t&&(u?l._hideClone():l._showClone(p),p!==f&&(Ee(Xe,dt?dt.options.ghostClass:l.options.ghostClass,!1),Ee(Xe,s.ghostClass,!0)),dt!==p&&p!==Bt.active?dt=p:p===Bt.active&&dt&&(dt=null),f===p&&(p._ignoreWhileAnimating=o),p.animateAll((function(){E("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(o===Xe&&!Xe.animated||o===a&&!o.animated)&&(gt=null),s.dragoverBubble||e.rootEl||o===document||(Xe.parentNode[qe]._isOutsideThisEl(e.target),!t&&zt(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),h=!0}function I(){st=De(Xe),lt=De(Xe,s.draggable),Ze({sortable:p,name:"change",toEl:a,newIndex:st,newDraggableIndex:lt,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){we(document,"mousemove",this._onTouchMove),we(document,"touchmove",this._onTouchMove),we(document,"pointermove",this._onTouchMove),we(document,"dragover",zt),we(document,"mousemove",zt),we(document,"touchmove",zt)},_offUpEvents:function(){var e=this.el.ownerDocument;we(e,"mouseup",this._onDrop),we(e,"touchend",this._onDrop),we(e,"pointerup",this._onDrop),we(e,"touchcancel",this._onDrop),we(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;st=De(Xe),lt=De(Xe,n.draggable),Ke("drop",this,{evt:e}),Qe=Xe&&Xe.parentNode,st=De(Xe),lt=De(Xe,n.draggable),Bt.eventCanceled||(_t=!1,Tt=!1,St=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Jt(this.cloneId),Jt(this._dragStartId),this.nativeDraggable&&(we(document,"drop",this),we(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ye&&Ce(document.body,"user-select",""),Ce(Xe,"transform",""),e&&(mt&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),et&&et.parentNode&&et.parentNode.removeChild(et),(tt===Qe||dt&&"clone"!==dt.lastPutMode)&&it&&it.parentNode&&it.parentNode.removeChild(it),Xe&&(this.nativeDraggable&&we(Xe,"dragend",this),qt(Xe),Xe.style["will-change"]="",mt&&!_t&&Ee(Xe,dt?dt.options.ghostClass:this.options.ghostClass,!1),Ee(Xe,this.options.chosenClass,!1),Ze({sortable:this,name:"unchoose",toEl:Qe,newIndex:null,newDraggableIndex:null,originalEvent:e}),tt!==Qe?(st>=0&&(Ze({rootEl:Qe,name:"add",toEl:Qe,fromEl:tt,originalEvent:e}),Ze({sortable:this,name:"remove",toEl:Qe,originalEvent:e}),Ze({rootEl:Qe,name:"sort",toEl:Qe,fromEl:tt,originalEvent:e}),Ze({sortable:this,name:"sort",toEl:Qe,originalEvent:e})),dt&&dt.save()):st!==ot&&st>=0&&(Ze({sortable:this,name:"update",toEl:Qe,originalEvent:e}),Ze({sortable:this,name:"sort",toEl:Qe,originalEvent:e})),Bt.active&&(null!=st&&-1!==st||(st=ot,lt=ct),Ze({sortable:this,name:"end",toEl:Qe,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){Ke("nulling",this),tt=Xe=Qe=et=nt=it=rt=at=ft=pt=mt=st=lt=ot=ct=gt=Ot=dt=ut=Bt.dragged=Bt.ghost=Bt.clone=Bt.active=null,Pt.forEach((function(e){e.checked=!0})),Pt.length=ht=bt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Xe&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,r=0,i=n.length,a=this.options;r<i;r++)xe(e=n[r],a.draggable,this.el,!1)&&t.push(e.getAttribute(a.dataIdAttr)||Wt(e));return t},sort:function(e,t){var n={},r=this.el;this.toArray().forEach((function(e,t){var i=r.children[t];xe(i,this.options.draggable,r,!1)&&(n[e]=i)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(r.removeChild(n[e]),r.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return xe(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var r=Je.modifyOption(this,e,t);n[e]="undefined"!==typeof r?r:t,"group"===e&&Dt(n)},destroy:function(){Ke("destroy",this);var e=this.el;e[qe]=null,we(e,"mousedown",this._onTapStart),we(e,"touchstart",this._onTapStart),we(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(we(e,"dragover",this),we(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),xt.splice(xt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!at){if(Ke("hideClone",this),Bt.eventCanceled)return;Ce(it,"display","none"),this.options.removeCloneOnHide&&it.parentNode&&it.parentNode.removeChild(it),at=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(at){if(Ke("showClone",this),Bt.eventCanceled)return;Xe.parentNode!=tt||this.options.group.revertClone?nt?tt.insertBefore(it,nt):tt.appendChild(it):tt.insertBefore(it,Xe),this.options.group.revertClone&&this.animate(Xe,it),Ce(it,"display",""),at=!1}}else this._hideClone()}},It&&je(document,"touchmove",(function(e){(Bt.active||_t)&&e.cancelable&&e.preventDefault()})),Bt.utils={on:je,off:we,css:Ce,find:Ie,is:function(e,t){return!!xe(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:Ue,closest:xe,toggleClass:Ee,clone:Ge,index:De,nextTick:$t,cancelNextTick:Jt,detectDirection:Ft,getChild:Le},Bt.get=function(e){return e[qe]},Bt.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Bt.utils=de({},Bt.utils,e.utils)),Je.mount(e)}))},Bt.create=function(e,t){return new Bt(e,t)},Bt.version="1.13.0";var Yt,Kt,Zt,Xt,Qt,en,tn=[],nn=!1;function rn(){tn.forEach((function(e){clearInterval(e.pid)})),tn=[]}function an(){clearInterval(en)}var on=Ue((function(e,t,n,r){if(t.scroll){var i,a=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,c=t.scrollSpeed,l=Me(),u=!1;Kt!==n&&(Kt=n,rn(),Yt=t.scroll,i=t.scrollFn,!0===Yt&&(Yt=Ve(n,!0)));var d=0,f=Yt;do{var p=f,h=Ae(p),b=h.top,v=h.bottom,y=h.left,m=h.right,g=h.width,O=h.height,j=void 0,w=void 0,_=p.scrollWidth,k=p.scrollHeight,x=Ce(p),S=p.scrollLeft,T=p.scrollTop;p===l?(j=g<_&&("auto"===x.overflowX||"scroll"===x.overflowX||"visible"===x.overflowX),w=O<k&&("auto"===x.overflowY||"scroll"===x.overflowY||"visible"===x.overflowY)):(j=g<_&&("auto"===x.overflowX||"scroll"===x.overflowX),w=O<k&&("auto"===x.overflowY||"scroll"===x.overflowY));var E=j&&(Math.abs(m-a)<=s&&S+g<_)-(Math.abs(y-a)<=s&&!!S),C=w&&(Math.abs(v-o)<=s&&T+O<k)-(Math.abs(b-o)<=s&&!!T);if(!tn[d])for(var P=0;P<=d;P++)tn[P]||(tn[P]={});tn[d].vx==E&&tn[d].vy==C&&tn[d].el===p||(tn[d].el=p,tn[d].vx=E,tn[d].vy=C,clearInterval(tn[d].pid),0==E&&0==C||(u=!0,tn[d].pid=setInterval(function(){r&&0===this.layer&&Bt.active._onTouchMove(Qt);var t=tn[this.layer].vy?tn[this.layer].vy*c:0,n=tn[this.layer].vx?tn[this.layer].vx*c:0;"function"===typeof i&&"continue"!==i.call(Bt.dragged.parentNode[qe],n,t,e,Qt,tn[this.layer].el)||Be(tn[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&f!==l&&(f=Ve(f,!1)));nn=u}}),30),sn=function(e){var t=e.originalEvent,n=e.putSortable,r=e.dragEl,i=e.activeSortable,a=e.dispatchSortableEvent,o=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var c=n||i;o();var l=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(l.clientX,l.clientY);s(),c&&!c.el.contains(u)&&(a("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function cn(){}function ln(){}cn.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=Le(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:sn},ue(cn,{pluginName:"revertOnSpill"}),ln.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:sn},ue(ln,{pluginName:"removeOnSpill"});Bt.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?je(document,"dragover",this._handleAutoScroll):this.options.supportPointer?je(document,"pointermove",this._handleFallbackAutoScroll):t.touches?je(document,"touchmove",this._handleFallbackAutoScroll):je(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?we(document,"dragover",this._handleAutoScroll):(we(document,"pointermove",this._handleFallbackAutoScroll),we(document,"touchmove",this._handleFallbackAutoScroll),we(document,"mousemove",this._handleFallbackAutoScroll)),an(),rn(),clearTimeout(Se),Se=void 0},nulling:function(){Qt=Kt=Yt=nn=en=Zt=Xt=null,tn.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,r=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(r,i);if(Qt=e,t||be||he||ye){on(e,this.options,a,t);var o=Ve(a,!0);!nn||en&&r===Zt&&i===Xt||(en&&an(),en=setInterval((function(){var a=Ve(document.elementFromPoint(r,i),!0);a!==o&&(o=a,rn()),on(e,n.options,a,t)}),10),Zt=r,Xt=i)}else{if(!this.options.bubbleScroll||Ve(a,!0)===Me())return void rn();on(e,this.options,Ve(a,!1),!1)}}},ue(e,{pluginName:"scroll",initializeByDefault:!0})}),Bt.mount(ln,cn);var un=Bt,dn=n(78),fn="view",pn="view-layers",hn="map-layers",bn="layer-views",vn="layer-list-mode",yn=m.a.ofType(se),mn=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e))._handles=new g.a,r.listItemCreatedFunction=null,r.operationalItems=new yn,r.view=null,r}return Object(o.a)(n,[{key:"initialize",value:function(){var e=this;this._handles.add(Object(O.a)(this,["view","view.ready"],(function(){return e._viewHandles()})),fn)}},{key:"destroy",value:function(){this._handles.destroy(),this._handles=null,this.view=null,this.operationalItems.removeAll()}},{key:"state",get:function(){var e=this.get("view");return this.get("view.ready")?"ready":e?"loading":"disabled"}},{key:"triggerAction",value:function(e,t){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:t})}},{key:"moveListItem",value:function(e,t,n,r){var i,a,o=null==e?void 0:e.layer;if(o){var s=null==(i=this.view)||null==(a=i.map)?void 0:a.layers,c=t?I(t):s,l=n?I(n):s;if(c&&l){var u=this.operationalItems,d=(null==t?void 0:t.children)||u,f=(null==n?void 0:n.children)||u,p=l.length-r;e.parent=n||null,d.includes(e)&&d.remove(e),c.includes(o)&&c.remove(o),f.includes(e)||f.add(e,p),l.includes(o)||l.add(o,p)}}}},{key:"_createLayerViewHandles",value:function(e){var t=this,n=this._handles;n.remove(bn),this._compileList(),e&&n.add(e.on("change",(function(){return t._compileList()})),bn)}},{key:"_createMapLayerHandles",value:function(e){var t=this,n=this._handles;n.remove(hn),this._compileList(),e&&n.add(e.on("change",(function(){return t._compileList()})),hn)}},{key:"_watchItemProperties",value:function(e){var t=this;this._handles.add([e.children.on("change",(function(){t._modifyListItemChildren(e.children)}))],"children-change-".concat(e.uid))}},{key:"_modifyListItemChildren",value:function(e){var t=this;e.forEach((function(e){return t._modifyListItem(e)}))}},{key:"_modifyListItem",value:function(e){if("function"==typeof this.listItemCreatedFunction){var t={item:e};this.listItemCreatedFunction.call(null,t)}this._modifyListItemChildren(e.children)}},{key:"_createListItem",value:function(e){var t=this.view,n=new se({layer:e,view:t});return this._watchItemProperties(n),n}},{key:"_removeAllItems",value:function(){var e=this._handles,t=this.operationalItems;t.forEach((function(t){e.remove("children-change-".concat(t.uid))})),t.removeAll()}},{key:"_getViewableLayers",value:function(e){if(e)return e.filter((function(e){return"hide"!==E(e)}))}},{key:"_watchLayersListMode",value:function(e){var t=this,n=this._handles;n.remove(vn),e&&e.forEach((function(e){n.add(Object(O.d)(e,"listMode",(function(){return t._compileList()})),vn)}))}},{key:"_compileList",value:function(){var e=this.get("view.map.layers");this._watchLayersListMode(e);var t=this._getViewableLayers(e);t&&t.length?(this._createNewItems(t),this._modifyOrRemoveItems(t),this._sortItems(t)):this._removeAllItems()}},{key:"_createNewItems",value:function(e){var t=this,n=this.operationalItems;e.forEach((function(e){n.find((function(t){return t.layer===e}))||n.add(t._createListItem(e))}))}},{key:"_modifyOrRemoveItems",value:function(e){var t=this,n=this._handles,r=this.operationalItems,i=[];r.forEach((function(r){r&&e&&e.find((function(e){return r.layer===e}))?t._modifyListItem(r):(n.remove("children-change-".concat(r.uid)),i.push(r))})),r.removeMany(i)}},{key:"_sortItems",value:function(e){this.operationalItems.sort((function(t,n){var r=e.indexOf(t.layer),i=e.indexOf(n.layer);return r>i?-1:r<i?1:0}))}},{key:"_viewHandles",value:function(){var e=this,t=this._handles,n=this.view;t.remove([hn,bn,pn]),this._compileList(),n&&n.ready&&t.add([Object(O.a)(this,"view.map.allLayers",(function(t){return e._createMapLayerHandles(t)})),Object(O.a)(this,"view.allLayerViews",(function(t){return e._createLayerViewHandles(t)})),Object(O.a)(this,"listItemCreatedFunction",(function(){return e._compileList()}))],pn)}}]),n}(dn.a.EventedAccessor);Object(l.a)([Object(f.b)()],mn.prototype,"listItemCreatedFunction",void 0),Object(l.a)([Object(f.b)({type:yn})],mn.prototype,"operationalItems",void 0),Object(l.a)([Object(f.b)({readOnly:!0})],mn.prototype,"state",null),Object(l.a)([Object(f.b)()],mn.prototype,"view",void 0);var gn=mn=Object(l.a)([Object(v.a)("esri.widgets.LayerList.LayerListViewModel")],mn);function On(e,t,n){e.splice(n,0,e.splice(t,1)[0])}var jn=m.a.ofType(se),wn="data-sort-filter",_n="data-layer-uid",kn="esri-layer-list esri-widget esri-widget--panel",xn="esri-layer-list--new-ui",Sn="esri-layer-list__no-items",Tn="esri-layer-list__list",En="esri-layer-list__list--root",Cn="esri-layer-list__list--exclusive",Pn="esri-layer-list__list--inherited",In="esri-layer-list__list--independent",Mn="esri-layer-list__item",An="esri-layer-list__item--error",Rn="esri-layer-list__item--invisible",Ln="esri-layer-list__item--invisible-at-scale",Fn="esri-layer-list__item--updating",Dn="esri-layer-list__item--has-children",Nn="esri-layer-list__item--selectable",Vn="esri-layer-list__item-container",zn="esri-layer-list__item-actions-menu",Un="esri-layer-list__item-actions-menu-item",Bn="esri-layer-list__item-actions-menu-item--active",Gn="esri-layer-list__item-actions",qn="esri-layer-list__item-actions-list",Hn="esri-layer-list__item-action",Wn="esri-layer-list__item-action-icon",$n="esri-layer-list__item-action-image",Jn="esri-layer-list__item-action-title",Yn="esri-layer-list__action-toggle",Kn="esri-layer-list__action-toggle--on",Zn="esri-layer-list__item-label",Xn="esri-layer-list__item-error-message",Qn="esri-layer-list__item-title",er="esri-layer-list__item-toggle",tr="esri-layer-list__item-toggle-icon",nr="esri-layer-list__item-toggle-icon",rr="esri-layer-list__item-radio-icon",ir="esri-layer-list__child-toggle",ar="esri-layer-list__child-toggle--open",or="esri-layer-list__child-toggle-icon--opened",sr="esri-layer-list__child-toggle-icon--closed",cr="esri-layer-list__child-toggle-icon--closed-rtl",lr="esri-layer-list--chosen",ur="esri-disabled",dr="esri-disabled-element",fr="esri-hidden",pr="esri-rotating",hr="esri-icon-handle-horizontal",br="esri-icon-visible",vr="esri-icon-non-visible",yr="esri-icon-radio-checked",mr="esri-icon-radio-unchecked",gr="esri-icon-notice-triangle",Or="esri-icon-down-arrow",jr="esri-icon-right-triangle-arrow",wr="esri-icon-left-triangle-arrow",_r="esri-icon-loading-indicator",kr="esri-icon-default-action",xr="esri-icon-layers",Sr="actions",Tr="action-section",Er="items",Cr="exclusive",Pr="inherited";function Ir(e){var t=e.actionsOpen,n=e.children;t&&(e.actionsOpen=!1),n.forEach((function(e){return Ir(e)}))}var Mr="root",Ar=d.a.getLogger("esri.widgets.LayerList"),Rr={statusIndicators:!0},Lr=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r){var o;return Object(a.a)(this,n),(o=t.call(this,e,r))._handles=new g.a,o._sortableNodes=new Map,o._sortableMap=new Map,o._focusSortUid=null,o._newUI=Object(u.a)("esri-layerlist-new-ui"),o.visibleItems=null,o.iconClass=xr,o.label=void 0,o.listItemCreatedFunction=null,o.messages=null,o.messagesCommon=null,o.multipleSelectionEnabled=!1,o.operationalItems=null,o.selectionEnabled=!1,o.selectedItems=new jn,o.view=null,o.viewModel=new gn,o.visibleElements=Object(i.a)({},Rr),o._onSortableSort=function(e){var t=e.to,n=e.from,r=e.item,i=e.newIndex;n&&t&&(n===t?o._sortLayers(o._sortableMap.get(n.dataset.group)):o._moveLayerFromChildList({to:t,from:n,item:r,newIndex:i}))},o._sortableCanPut=function(e,t,n){var r,i,a=e.el.dataset.group,o=t.el.dataset.group,s=e.el["data-item"],c=n["data-item"],l=null==c||null==(r=c.layer)?void 0:r.type,u=null==s||null==(i=s.layer)?void 0:i.type;return a&&o&&l&&!("group"===u&&"group"===l)},o._sortableCanPull=function(e,t,n){var r,i=e.el.dataset.group,a=t.el.dataset.group,o=n["data-item"],s=null==o||null==(r=o.layer)?void 0:r.type;return i&&a&&!!s},o._onSortableEnd=function(e){var t=e.oldIndex,n=e.from,r=e.to,i=e.item;n!==r&&n.insertBefore(i,n.children[t])},o}return Object(o.a)(n,[{key:"initialize",value:function(){var e=this,t=this.operationalItems;this._setVisibleItems(t),this.own(Object(O.b)(this,"operationalItems","change",(function(){return e._itemsChanged(t)})),Object(O.a)(this,"selectionEnabled",(function(){return e._toggleAllSorting()})))}},{key:"destroy",value:function(){this._destroySortables(),this._handles.destroy(),this._handles=null}},{key:"statusIndicatorsVisible",set:function(e){Object(b.c)(Ar,"statusIndicatorsVisible",{replacement:"visibleElements.statusIndicators",version:"4.15"}),this.visibleElements=Object(i.a)(Object(i.a)({},this.visibleElements),{},{statusIndicators:e})}},{key:"castVisibleElements",value:function(e){return Object(i.a)(Object(i.a)({},Rr),e)}},{key:"triggerAction",value:function(e,t){this.viewModel.triggerAction(e,t)}},{key:"render",value:function(){var e,t,n=this.visibleItems,i=this._newUI,a=null==(t=this.viewModel)?void 0:t.state,o=(e={},Object(r.a)(e,xn,i),Object(r.a)(e,fr,"loading"===a),Object(r.a)(e,ur,"disabled"===a),e);return Object(k.a)("div",{class:this.classes(kn,o)},null!=n&&n.length?this.renderItems():this.renderNoItems())}},{key:"renderNoItems",value:function(){return Object(k.a)("div",{class:Sn},this.messages.noItemsToDisplay)}},{key:"renderItems",value:function(){var e=this,t=this.visibleItems,n=this.selectionEnabled,r=this.messages;return Object(k.a)("ul",{"aria-label":r.widgetLabel,role:n?"listbox":void 0,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,"data-group":Mr,bind:this,class:this.classes(Tn,En,In)},null==t?void 0:t.map((function(t){return e.renderItem(t,null)})).toArray())}},{key:"renderActionsMenuIcon",value:function(e,t){var n=this.messages,i=Object(r.a)({},Bn,e.actionsOpen),a=e.actionsOpen?n.closeActions:n.openActions;return Object(k.a)("div",{key:"actions-menu-toggle","data-item":e,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,class:this.classes(Un,i),tabindex:"0",role:"button","aria-controls":t,"aria-label":a,title:a},Object(k.a)("span",{"aria-hidden":"true",class:hr}))}},{key:"renderActionsMenu",value:function(e,t,n,r){var i=e.panel,a=i&&i.visible?this.renderPanelButton(i):null,o=1===n&&this._getSingleActionButton(t),s=o?this.renderAction({item:e,action:o,singleAction:!0}):null,c=!o&&n?this.renderActionsMenuIcon(e,r):null;return c||a||o?Object(k.a)("div",{key:"actions-menu",class:zn},a,s,c):null}},{key:"renderChildList",value:function(e,t){var n,i,a=this,o=this.selectionEnabled,s=e.visibilityMode,c=e.children,l=!!e.error,u=!!c.length&&!l,d=!u&&o&&"group"===(null==(i=e.layer)?void 0:i.type),f=Cr,p=Pr,h=(n={},Object(r.a)(n,Cn,s===f),Object(r.a)(n,Pn,s===p),Object(r.a)(n,In,s!==p&&s!==f),n);return u||d?Object(k.a)("ul",{bind:this,key:"list-items",id:t,"data-group":e.uid,"data-item":e,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,class:this.classes(Tn,h),"aria-expanded":e.open?"true":"false",role:o?"listbox":s===f?"radiogroup":"group",hidden:!e.open&&!d||null},null==c?void 0:c.map((function(t){return a.renderItem(t,e)})).toArray()):null}},{key:"renderChildrenToggle",value:function(e,t){var n=this.messagesCommon,i=e.children,a=!!e.error,o=!!i.length&&!a,s=Object(r.a)({},ar,e.open),c=e.open?n.collapse:n.expand;return o?Object(k.a)("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":e,key:"toggle-children",class:this.classes(ir,s),tabindex:"0",role:"button","aria-controls":t,"aria-label":c,title:c},Object(k.a)("span",{"aria-hidden":"true",class:this.classes(sr,jr)}),Object(k.a)("span",{"aria-hidden":"true",class:this.classes(or,Or)}),Object(k.a)("span",{"aria-hidden":"true",class:this.classes(cr,wr)})):null}},{key:"renderError",value:function(e){return e.error?Object(k.a)("div",{key:"esri-layer-list__error",class:Xn,role:"alert"},Object(k.a)("span",null,this.messages.layerError)):null}},{key:"renderItemContent",value:function(e,t,n){var r=this.id,i="".concat(r,"_").concat(e.uid),a="".concat(i,"_actions"),o="".concat(i,"__list"),s=e.panel,c=this._filterActions(e.actionsSections),l=this._countActions(c);return[Object(k.a)("div",{key:"list-item-container",class:Vn},this.renderChildrenToggle(e,o),this.renderLabel(e,t,n),this.renderActionsMenu(e,c,l,a)),this.renderError(e),l?this.renderActionsSections(e,c,a):null,s&&s.open?s.render():null,this.renderChildList(e,o)]}},{key:"renderItem",value:function(e,t){var n,i=this._newUI,a=this.id,o=this.selectionEnabled,s=this.selectedItems,c=this.visibleElements,l=e.children,u="".concat("".concat(a,"_").concat(e.uid),"__title"),d=!!e.error,f=!!l.length&&!d,p=(n={},Object(r.a)(n,Dn,f),Object(r.a)(n,An,!!d),Object(r.a)(n,Fn,e.updating&&!t&&c.statusIndicators),Object(r.a)(n,Rn,i&&!e.visible),Object(r.a)(n,Ln,!e.visibleAtCurrentScale),Object(r.a)(n,Nn,o),n);if(o){var h,b,v=(h={},Object(r.a)(h,_n,null==(b=e.layer)?void 0:b.uid),Object(r.a)(h,wn,(!e.sortable).toString()),h);return Object(k.a)("li",Object.assign({key:"item-with-selection-".concat(e.uid),bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(Mn,p),"aria-labelledby":u,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,"data-item":e,"data-group":t?t.uid:Mr,tabIndex:0,"aria-selected":M(e,s)?"true":"false",role:"option"},v),this.renderItemContent(e,t,u))}return Object(k.a)("li",{key:"item-no-selection-".concat(e.uid),bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(Mn,p),"aria-labelledby":u},this.renderItemContent(e,t,u))}},{key:"renderItemTitle",value:function(e,t){var n=this.messages,r=e.title||n.untitledLayer,i=e.visibleAtCurrentScale?r:"".concat(r," (").concat(n.layerInvisibleAtScale,")");return Object(k.a)("span",{key:"layer-title-container",id:t,title:i,"aria-label":i,class:Qn},r)}},{key:"renderItemToggleIcon",value:function(e,t){var n,i=this._newUI,a=Cr,o=t&&t.visibilityMode,s=(n={},Object(r.a)(n,tr,i),Object(r.a)(n,nr,i&&o!==a),Object(r.a)(n,rr,i&&o===a),Object(r.a)(n,yr,o===a&&e.visible),Object(r.a)(n,mr,o===a&&!e.visible),Object(r.a)(n,br,o!==a&&e.visible),Object(r.a)(n,vr,o!==a&&!e.visible),n);return Object(k.a)("span",{key:"item-toggle-icon",class:this.classes(s),"aria-hidden":"true"})}},{key:"renderItemToggle",value:function(e,t,n){var r=this.selectionEnabled,i=Cr,a=t&&t.visibilityMode,o=a===i?"radio":"switch";return Object(k.a)("span",r?{key:"item-toggle-selection-enabled",class:er,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":a,tabIndex:0,"aria-checked":e.visible?"true":"false",role:o,"aria-labelledby":n}:{key:"item-toggle",class:er},this.renderItemToggleIcon(e,t))}},{key:"renderItemError",value:function(e){return e.error?Object(k.a)("span",{key:"notice-triangle","aria-hidden":"true",class:gr}):null}},{key:"renderLabel",value:function(e,t,n){var r=this.selectionEnabled,i=this._newUI,a=Pr,o=Cr,s=null==t?void 0:t.visibilityMode,c=s===o?"radio":"switch",l=[this.renderItemToggle(e,t,n),this.renderItemTitle(e,n)];i&&l.reverse();var u=Object(k.a)("div",r?{key:"item-label-no-selection-".concat(e.uid),class:Zn}:{key:"item-label-with-selection-".concat(e.uid),class:Zn,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":s,tabIndex:0,"aria-checked":e.visible?"true":"false",role:c,"aria-labelledby":n},l);return s===a||e.error?Object(k.a)("div",{key:"item-label-container-".concat(e.uid),class:Zn},this.renderItemError(e),this.renderItemTitle(e,n)):u}},{key:"renderPanelButton",value:function(e){var t=e.className,n=e.open,i=e.title,a=e.image||t?t:kr,o=this._getIconImageStyles(e),s=Object(r.a)({},Bn,n),c=Object(r.a)({},$n,!!o["background-image"]);return a&&(c[a]=!!a),Object(k.a)("div",{key:"panel-".concat(e.uid),bind:this,"data-panel":e,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes(Un,s),role:"button",tabindex:"0",title:i,"aria-label":i},Object(k.a)("span",{class:this.classes(c),styles:o}))}},{key:"renderActionsSections",value:function(e,t,n){var r=this,i=t.toArray().map((function(t,n){return Object(k.a)("ul",{key:"".concat(e,"-action-section-").concat(n),class:qn},r.renderActionSection(e,t))}));return Object(k.a)("div",{role:"group","aria-expanded":e.actionsOpen?"true":"false",key:"actions-section",id:n,class:Gn,hidden:!e.actionsOpen||null},i)}},{key:"renderActionSection",value:function(e,t){var n=this;return(t&&t.toArray()).map((function(t){return n.renderAction({item:e,action:t})}))}},{key:"renderActionIcon",value:function(e){var t,n=e.active,i=e.className,a=this._getIconImageStyles(e),o="button"!==e.type||e.image||i?i:kr,s=(t={},Object(r.a)(t,$n,!n&&!!a["background-image"]),Object(r.a)(t,_r,n),Object(r.a)(t,pr,n),t);return o&&!n&&(s[o]=!0),Object(k.a)("span",{key:"action-icon","aria-hidden":"true",class:this.classes(Wn,s),styles:a})}},{key:"renderActionTitle",value:function(e,t){return t?null:Object(k.a)("span",{key:"action-title",class:Jn},e)}},{key:"renderAction",value:function(e){var t,n=e.item,i=e.action,a=e.singleAction,o=i.active,s=i.disabled,c=i.title,l=(t={},Object(r.a)(t,Un,a&&"button"===i.type),Object(r.a)(t,Hn,o||!a&&"toggle"!==i.type),Object(r.a)(t,Yn,!o&&"toggle"===i.type),Object(r.a)(t,Kn,!o&&"toggle"===i.type&&i.value),Object(r.a)(t,dr,s),t),u=[this.renderActionIcon(i),this.renderActionTitle(c,a)];return a?Object(k.a)("div",{bind:this,"data-item":n,"data-action":i,role:"button",key:"single-action-".concat(i.uid),onclick:this._triggerAction,onkeydown:this._triggerAction,classes:l,tabindex:"0",title:c,"aria-label":c},u):Object(k.a)("li",{bind:this,"data-item":n,"data-action":i,key:"action-".concat(i.uid),onclick:this._triggerAction,onkeydown:this._triggerAction,classes:l,tabindex:"0",role:"button",title:c,"aria-label":c},u)}},{key:"_sortNodeRemoved",value:function(e){var t=this._sortableMap,n=e.dataset.group,r=t.get(n);r&&r.destroy(),t.delete(n)}},{key:"_destroySortables",value:function(){var e=this._sortableMap,t=this._sortableNodes;e.forEach((function(e){return e&&e.destroy()})),e.clear(),t.clear()}},{key:"_moveLayerFromChildList",value:function(e){var t=e.to,n=e.from,r=e.item,i=e.newIndex,a=r["data-item"],o=t["data-item"],s=n["data-item"];this.viewModel.moveListItem(a,s,o,i)}},{key:"_sortLayers",value:function(e){if(e){var t,n,r=e.el["data-item"],i=e.toArray();r?function(e,t){var n=null==e?void 0:e.layer;if(n){var r=C(n);r&&P(n.get(r),t)}}(r,i):P(null==(t=this.view)||null==(n=t.map)?void 0:n.layers,i)}}},{key:"_toggleSorting",value:function(e,t){var n=this._sortableMap,r=this.selectionEnabled,i=n.get(t),a=e["data-item"],o=(t===Mr||a.childrenSortable&&function(e){var t=e&&(e.get("layer.layer")||e.layer);if(!t)return!1;var n=t.get("capabilities.exportMap.supportsSublayersChanges");return"boolean"!=typeof n||n}(a))&&r;if(i)i.option("disabled",!o);else if(o){var s=un.create(e,{dataIdAttr:_n,group:{name:t,pull:this._sortableCanPull,put:this._sortableCanPut},filter:"[".concat(wn,'="true"]'),fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!o,chosenClass:lr});n.set(t,s)}}},{key:"_toggleAllSorting",value:function(){var e=this;this._sortableNodes.forEach((function(t,n){return e._toggleSorting(t,n)}))}},{key:"_sortNodeCreated",value:function(e){var t=e.dataset.group;t&&(this._sortableNodes.set(t,e),this._toggleSorting(e,t))}},{key:"_setVisibleItems",value:function(e){var t=this;this.visibleItems=null==e?void 0:e.filter((function(e){return t.errorsVisible||!e.error}))}},{key:"_getSingleActionButton",value:function(e){return e.reduce((function(e){return e})).filter((function(e){return e&&"button"===e.type})).getItemAt(0)}},{key:"_focusListItem",value:function(e){var t,n=this._focusSortUid;e&&n&&(null==(t=e["data-item"].layer)?void 0:t.uid)===n&&(e.focus(),this._focusSortUid=null)}},{key:"_watchActionSectionChanges",value:function(e,t){var n=this,r=Tr+t;this._handles.add(e.on("change",this.scheduleRender.bind(this)),r),e.forEach((function(e){return n._renderOnActionChanges(e,t)}))}},{key:"_renderOnActionChanges",value:function(e,t){var n=this,r=Sr+t;"toggle"!==e.type?"slider"!==e.type?this._handles.add([Object(O.a)(e,["className","image","id","title","visible"],(function(){return n.scheduleRender()}))],r):this._handles.add([Object(O.a)(e,["className","id","title","visible","value","displayValueEnabled","max","min","step"],(function(){return n.scheduleRender()}))],r):this._handles.add([Object(O.a)(e,["className","image","id","title","visible","value"],(function(){return n.scheduleRender()}))],r)}},{key:"_renderOnItemChanges",value:function(e){var t=this,n=e.uid,r=Er+n;this._handles.add([Object(O.a)(e,["actionsOpen","visible","open","updating","title","visibleAtCurrentScale","error","visibilityMode","panel","panel.title","panel.content","panel.className","sortable","childrenSortable"],(function(){return t.scheduleRender()})),e.actionsSections.on("change",(function(){return t.scheduleRender()})),e.children.on("change",(function(){return t.scheduleRender()}))],r),e.children.forEach((function(e){return t._renderOnItemChanges(e)})),e.actionsSections.forEach((function(e){return t._watchActionSectionChanges(e,n)}))}},{key:"_itemsChanged",value:function(e){var t=this;this._handles.removeAll(),e.forEach((function(e){return t._renderOnItemChanges(e)})),this._setVisibleItems(e),this.scheduleRender()}},{key:"_filterActions",value:function(e){return e.map((function(e){return e.filter((function(e){return e.visible}))}))}},{key:"_countActions",value:function(e){return e.reduce((function(e,t){return e+t.length}),0)}},{key:"_getIconImageStyles",value:function(e){var t="esri.widgets.LayerList.ListItemPanel"===e.declaredClass||"esri.support.Action.ActionButton"===e.declaredClass||"esri.support.Action.ActionToggle"===e.declaredClass?e.image:null;return{"background-image":t?'url("'.concat(t,'")'):null}}},{key:"_selectionKeydown",value:function(e){var t=Object(y.a)(e);if(-1!==["ArrowDown","ArrowUp"].indexOf(t)){e.stopPropagation();var n=e.currentTarget,r=n["data-item"],i=this._sortableMap,a=this.selectedItems,o=n.dataset.group,s=i.get(o);if(s){var c=M(r,a),l=s.toArray(),u=e.target,d=l.indexOf(u.dataset.layerUid);if(-1!==d){if("ArrowDown"===t){var f,p,h=d+1;if(h>=l.length)return;c?(On(l,d,h),s.sort(l),this._sortLayers(s),this._focusSortUid=null==(f=r.layer)?void 0:f.uid):(this._focusSortUid=null==(p=r.layer)?void 0:p.uid,this.scheduleRender())}if("ArrowUp"===t){var b,v,m=d-1;if(m<=-1)return;c?(On(l,d,m),s.sort(l),this._sortLayers(s),this._focusSortUid=null==(b=r.layer)?void 0:b.uid):(this._focusSortUid=null==(v=r.layer)?void 0:v.uid,this.scheduleRender())}}}}else this._toggleSelection(e)}},{key:"_toggleActionsOpen",value:function(e){var t=e.currentTarget["data-item"],n=!t.actionsOpen;n&&this.operationalItems.forEach((function(e){return Ir(e)})),t.actionsOpen=n,e.stopPropagation()}},{key:"_triggerPanel",value:function(e){var t=e.currentTarget["data-panel"];t&&(t.open=!t.open),e.stopPropagation()}},{key:"_triggerAction",value:function(e){var t=e.currentTarget,n=t["data-action"],r=t["data-item"];"toggle"===n.type&&(n.value=!n.value),this.triggerAction(n,r),e.stopPropagation()}},{key:"_toggleVisibility",value:function(e){var t=e.currentTarget,n=t.getAttribute("data-parent-visibility"),r=t["data-item"];n===Cr&&r.visible||(r.visible=!r.visible),e.stopPropagation()}},{key:"_toggleChildrenClick",value:function(e){var t=e.currentTarget["data-item"];t.open=!t.open,e.stopPropagation()}},{key:"_toggleSelection",value:function(e){e.stopPropagation();var t=this.multipleSelectionEnabled,n=this.selectedItems,r=t&&(e.metaKey||e.ctrlKey),i=e.currentTarget["data-item"],a=M(i,n),o=n.length;if(!r)return!o||a&&1===o?void(a?null==n.remove||n.remove(a):n.add(i)):(n.removeAll(),void n.add(i));a?null==n.remove||n.remove(a):n.add(i)}}]),n}(x.a);Object(l.a)([Object(f.b)()],Lr.prototype,"visibleItems",void 0),Object(l.a)([Object(f.b)()],Lr.prototype,"iconClass",void 0),Object(l.a)([Object(f.b)()],Lr.prototype,"errorsVisible",void 0),Object(l.a)([Object(f.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Lr.prototype,"label",void 0),Object(l.a)([Object(p.a)("viewModel.listItemCreatedFunction")],Lr.prototype,"listItemCreatedFunction",void 0),Object(l.a)([Object(f.b)(),Object(w.a)("esri/widgets/LayerList/t9n/LayerList")],Lr.prototype,"messages",void 0),Object(l.a)([Object(f.b)(),Object(w.a)("esri/t9n/common")],Lr.prototype,"messagesCommon",void 0),Object(l.a)([Object(f.b)()],Lr.prototype,"multipleSelectionEnabled",void 0),Object(l.a)([Object(p.a)("viewModel.operationalItems")],Lr.prototype,"operationalItems",void 0),Object(l.a)([Object(f.b)()],Lr.prototype,"selectionEnabled",void 0),Object(l.a)([Object(f.b)()],Lr.prototype,"selectedItems",void 0),Object(l.a)([Object(f.b)()],Lr.prototype,"statusIndicatorsVisible",null),Object(l.a)([Object(p.a)("viewModel.view")],Lr.prototype,"view",void 0),Object(l.a)([Object(_.a)("trigger-action"),Object(f.b)({type:gn})],Lr.prototype,"viewModel",void 0),Object(l.a)([Object(f.b)()],Lr.prototype,"visibleElements",void 0),Object(l.a)([Object(h.a)("visibleElements")],Lr.prototype,"castVisibleElements",null),Object(l.a)([Object(p.a)("viewModel.triggerAction")],Lr.prototype,"triggerAction",null),Object(l.a)([Object(j.a)()],Lr.prototype,"_toggleActionsOpen",null),Object(l.a)([Object(j.a)()],Lr.prototype,"_triggerPanel",null),Object(l.a)([Object(j.a)()],Lr.prototype,"_triggerAction",null),Object(l.a)([Object(j.a)()],Lr.prototype,"_toggleVisibility",null),Object(l.a)([Object(j.a)()],Lr.prototype,"_toggleChildrenClick",null),Object(l.a)([Object(j.a)()],Lr.prototype,"_toggleSelection",null);var Fr=Lr=Object(l.a)([Object(v.a)("esri.widgets.LayerList")],Lr);t.a=Fr},function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n(10),i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(22)),u=(n(13),n(17),n(1)),d=n(8),f=(n(12),n(19),n(20),n(28)),p=n(39),h=n(38),b=n(127),v=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).color=new p.a([0,0,0,1]),r.extensionLength=0,r.size=Object(h.h)(1),r}return Object(a.a)(n,[{key:"clone",value:function(){}},{key:"cloneProperties",value:function(){return{color:Object(l.a)(this.color),size:this.size,extensionLength:this.extensionLength}}}]),n}(f.a);Object(c.a)([Object(u.b)({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],v.prototype,"type",void 0),Object(c.a)([Object(u.b)(b.a)],v.prototype,"color",void 0),Object(c.a)([Object(u.b)(Object(r.a)(Object(r.a)({},b.b),{},{json:{write:{overridePolicy:function(e){return{enabled:!!e}}}}}))],v.prototype,"extensionLength",void 0),Object(c.a)([Object(u.b)(b.b)],v.prototype,"size",void 0);var y,m=v=Object(c.a)([Object(d.a)("esri.symbols.edges.Edges3D")],v),g=n(49),O=y=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).type="sketch",r}return Object(a.a)(n,[{key:"clone",value:function(){return new y(this.cloneProperties())}}]),n}(m);Object(c.a)([Object(g.a)({sketch:"sketch"},{readOnly:!0})],O.prototype,"type",void 0);var j,w=O=y=Object(c.a)([Object(d.a)("esri.symbols.edges.SketchEdges3D")],O),_=j=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).type="solid",r}return Object(a.a)(n,[{key:"clone",value:function(){return new j(this.cloneProperties())}}]),n}(m);Object(c.a)([Object(g.a)({solid:"solid"},{readOnly:!0})],_.prototype,"type",void 0);var k={types:{key:"type",base:m,typeMap:{solid:_=j=Object(c.a)([Object(d.a)("esri.symbols.support.SolidEdges3D")],_),sketch:w}},json:{write:!0}}},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(22)),u=(n(13),n(17),n(1)),d=n(41),f=n(8),p=n(42),h=(n(12),n(19),n(20),n(28)),b=n(148),v=n(207),y=n(372),m=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).respectsDaylightSaving=!1,r.timezone=null,r}return Object(a.a)(n,[{key:"readRespectsDaylightSaving",value:function(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving}},{key:"clone",value:function(){var e=this.respectsDaylightSaving,t=this.timezone;return new r({respectsDaylightSaving:e,timezone:t})}}]),n}(h.a);Object(c.a)([Object(u.b)({type:Boolean,json:{write:!0}})],m.prototype,"respectsDaylightSaving",void 0),Object(c.a)([Object(d.a)("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],m.prototype,"readRespectsDaylightSaving",null),Object(c.a)([Object(u.b)({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],m.prototype,"timezone",void 0);var g,O=m=r=Object(c.a)([Object(f.a)("esri.layers.support.TimeReference")],m),j=g=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).cumulative=!1,r.endField=null,r.fullTimeExtent=null,r.hasLiveData=!1,r.interval=null,r.startField=null,r.timeReference=null,r.trackIdField=null,r.useTime=!0,r}return Object(a.a)(n,[{key:"readFullTimeExtent",value:function(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;var n=new Date(t.timeExtent[0]),r=new Date(t.timeExtent[1]);return new v.a({start:n,end:r})}},{key:"writeFullTimeExtent",value:function(e,t){e&&e.start&&e.end?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}},{key:"readInterval",value:function(e,t){return t.timeInterval&&t.timeIntervalUnits?new y.a({value:t.timeInterval,unit:b.d.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new y.a({value:t.defaultTimeInterval,unit:b.d.fromJSON(t.defaultTimeIntervalUnits)}):null}},{key:"writeInterval",value:function(e,t){if(e){var n=e.toJSON();t.timeInterval=n.value,t.timeIntervalUnits=n.unit}else t.timeInterval=null,t.timeIntervalUnits=null}},{key:"clone",value:function(){var e=this.cumulative,t=this.endField,n=this.hasLiveData,r=this.interval,i=this.startField,a=this.timeReference,o=this.fullTimeExtent,s=this.trackIdField,c=this.useTime;return new g({cumulative:e,endField:t,hasLiveData:n,interval:r,startField:i,timeReference:Object(l.a)(a),fullTimeExtent:Object(l.a)(o),trackIdField:s,useTime:c})}}]),n}(h.a);Object(c.a)([Object(u.b)({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],j.prototype,"cumulative",void 0),Object(c.a)([Object(u.b)({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],j.prototype,"endField",void 0),Object(c.a)([Object(u.b)({type:v.a,json:{write:{enabled:!0,allowNull:!0}}})],j.prototype,"fullTimeExtent",void 0),Object(c.a)([Object(d.a)("fullTimeExtent",["timeExtent"])],j.prototype,"readFullTimeExtent",null),Object(c.a)([Object(p.a)("fullTimeExtent")],j.prototype,"writeFullTimeExtent",null),Object(c.a)([Object(u.b)({type:Boolean,json:{write:!0}})],j.prototype,"hasLiveData",void 0),Object(c.a)([Object(u.b)({type:y.a,json:{write:{enabled:!0,allowNull:!0}}})],j.prototype,"interval",void 0),Object(c.a)([Object(d.a)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],j.prototype,"readInterval",null),Object(c.a)([Object(p.a)("interval")],j.prototype,"writeInterval",null),Object(c.a)([Object(u.b)({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],j.prototype,"startField",void 0),Object(c.a)([Object(u.b)({type:O,json:{write:{enabled:!0,allowNull:!0}}})],j.prototype,"timeReference",void 0),Object(c.a)([Object(u.b)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],j.prototype,"trackIdField",void 0),Object(c.a)([Object(u.b)({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],j.prototype,"useTime",void 0);var w=j=g=Object(c.a)([Object(f.a)("esri.layers.support.TimeInfo")],j);t.a=w},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l}));var r=n(269),i=n(151),a=n(105),o=n(235),s=[{name:"position",count:2,type:5126,offset:0,stride:8,normalized:!1}],c=[{name:"position",count:2,type:5126,offset:0,stride:16,normalized:!1},{name:"uv0",count:2,type:5126,offset:8,stride:16,normalized:!1}];function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.a,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=null;switch(t){case c:u=new Float32Array([a,a,0,0,l,a,1,0,a,l,0,1,l,l,1,1]);break;case s:default:u=new Float32Array([a,a,l,a,a,l,l,l])}return new o.a(e,n,{geometry:t},{geometry:i.a.createVertex(e,35044,u)})}function u(e){return new a.a(e,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1},new Uint8Array([255,255,255,255]))}},function(e,t,n){"use strict";t.a={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(96)),i=o(n(21)),a=n(390);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=function(e){var t=e.children,n=s(e,["children"]);return i.default.createElement(a.StyledTopNavActions,n,t)};c.propTypes={children:r.default.node},c.defaultProps={},c.displayName="TopNavActionsList";var l=c;t.default=l},function(e,t,n){!function(e){"use strict";var t={Promise:"undefined"!==typeof window?window.Promise:void 0},n="4.19",r="next";function i(e){if(e.toLowerCase()===r)return r;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function a(e){return void 0===e&&(e=n),"https://js.arcgis.com/"+e+"/"}function o(e){void 0===e&&(e=n);var t=a(e),o=i(e);return o!==r&&3===o.major?t+(o.minor<=10?"js/":"")+"esri/css/esri.css":t+"esri/themes/light/main.css"}function s(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}function c(e,t){if(t){var n=document.querySelector(t);n.parentNode.insertBefore(e,n)}else document.head.appendChild(e)}function l(e){return document.querySelector('link[href*="'+e+'"]')}function u(e){return!e||i(e)?o(e):e}function d(e,t){var n=u(e),r=l(n);return r||c(r=s(n),t),r}var f={};function p(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}function h(e,t,n){var r;n&&(r=b(e,n));var i=function n(){t(e),e.removeEventListener("load",n,!1),r&&e.removeEventListener("error",r,!1)};e.addEventListener("load",i,!1)}function b(e,t){var n=function n(r){t(r.error||new Error("There was an error attempting to load "+e.src)),e.removeEventListener("error",n,!1)};return e.addEventListener("error",n,!1),n}function v(e){void 0===e&&(e={}),f=e}function y(){return document.querySelector("script[data-esri-loader]")}function m(){var e=window.require;return e&&e.on}function g(e){void 0===e&&(e={});var n={};[f,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}));var r=n.version,i=n.url||a(r);return new t.Promise((function(e,t){var a=y();if(a){var o=a.getAttribute("src");o!==i?t(new Error("The ArcGIS API for JavaScript is already loaded ("+o+").")):m()?e(a):h(a,e,t)}else if(m())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var s=n.css;s&&d(!0===s?r:s,n.insertCssBefore),h(a=p(i),(function(){a.setAttribute("data-esri-loader","loaded"),e(a)}),t),document.body.appendChild(a)}}))}function O(e){return new t.Promise((function(t,n){var r=window.require.on("error",n);window.require(e,(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r.remove(),t(e)}))}))}function j(e,t){if(void 0===t&&(t={}),m())return O(e);var n=y(),r=n&&n.getAttribute("src");return!t.url&&r&&(t.url=r),g(t).then((function(){return O(e)}))}e.utils=t,e.loadModules=j,e.getScript=y,e.isLoaded=m,e.loadScript=g,e.setDefaultOptions=v,e.loadCss=d,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(14),i=(n(16),n(13)),a=n(180);function o(e,t,n){if(e&&t)if("object"==typeof t){var i,s=Object(r.a)(Object.getOwnPropertyNames(t));try{for(s.s();!(i=s.n()).done;){var c=i.value;o(e,c,t[c])}}catch(d){s.e(d)}finally{s.f()}}else{if(-1!==t.indexOf(".")){var l=t.split("."),u=l.splice(l.length-1,1)[0];return void o(Object(a.b)(e,l),u,n)}e[t]=n}}i.a.getLogger("esri.core.accessorSupport.set")},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(100);var o=function(){function e(t,n,i){Object(r.a)(this,e),this.name=t,this.details=i,this.message=void 0,this instanceof e&&(this.message=n&&function(e,t){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(function(e,n){if(""===n)return"$";var r=Object(a.b)(n,t),i=null==r?"":r;if(void 0===i)throw new Error('could not find key "'.concat(n,'" in template'));return i.toString()}))}(n,i)||"")}return Object(i.a)(e,[{key:"toString",value:function(){return"["+this.name+"]: "+this.message}}]),e}();t.a=o},function(e,t,n){"use strict";function r(e){return!!e&&e.prototype&&e.prototype.declaredClass&&0===e.prototype.declaredClass.indexOf("esri.core.Collection")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(2),i=n(3),a=function(){function e(t,n){Object(r.a)(this,e),this._observers=t,this._observer=n}return Object(i.a)(e,[{key:"remove",value:function(){this._observers.delete(this._observer)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(16),i=n(4),a=n(24);function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;return new Promise((function(c,l){if(Object(a.n)(o))l(s());else{var u=function(){p(),l(new Error("Unable to load ".concat(t)))},d=function(){var t=e;p(),c(t)},f=function(){if(e){var t=e;p(),t.src="",l(s())}},p=function(){Object(r.a)("esri-image-decode")||(e.removeEventListener("error",u),e.removeEventListener("load",d)),u=null,d=null,e=null,Object(i.k)(o)&&o.removeEventListener("abort",f),f=null,n&&URL.revokeObjectURL(t)};Object(i.k)(o)&&o.addEventListener("abort",f),Object(r.a)("esri-image-decode")?e.decode().then(d,u):(e.addEventListener("error",u),e.addEventListener("load",d))}}))}function s(){try{return new DOMException("Aborted","AbortError")}catch(t){var e=new Error;return e.name="AbortError",e}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(14),i=n(2),a=n(3),o=n(37),s=n(5),c=n(6),l=n(0),u=(n(16),n(13)),d=(n(17),n(1)),f=n(8),p=(n(12),n(19),n(20),n(24)),h=n(40),b=n(184),v=n(174);function y(e){return e&&"group"===e.type}function m(e,t,n){var r,i;if(e)for(var a=0,o=e.length;a<o;a++){if((r=e.getItemAt(a))[t]===n)return r;if(y(r)&&(i=m(r.layers,t,n)))return i}}var g=u.a.getLogger("esri.support.LayersMixin"),O=function(e){var t=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];(e=t.call.apply(t,[this].concat(a))).layers=new h.a;var c=function(e){e.parent&&"remove"in e.parent&&e.parent.remove(e)},l=function(t){t.parent=Object(o.a)(e),e.layerAdded(t),"elevation"!==t.type&&"base-elevation"!==t.type||g.error("Layer 'title:".concat(t.title,", id:").concat(t.id,"' of type '").concat(t.type,"' is not supported as an operational layer and will therefore be ignored."))},u=function(t){t.parent=null,e.layerRemoved(t)};return e.layers.on("before-add",(function(e){return c(e.item)})),e.layers.on("after-add",(function(e){return l(e.item)})),e.layers.on("after-remove",(function(e){return u(e.item)})),e}return Object(a.a)(n,[{key:"destroy",value:function(){var e,t=this.layers.removeAll(),n=Object(r.a)(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.layerRemoved(i),i.destroy()}}catch(a){n.e(a)}finally{n.f()}this.layers.destroy()}},{key:"layers",set:function(e){this._set("layers",Object(b.b)(e,this._get("layers")))}},{key:"add",value:function(e,t){var n=this,r=this.layers;t=r.getNextIndex(t),e instanceof v.a?e.parent===this?this.reorder(e,t):r.add(e,t):Object(p.o)(e)?e.then((function(e){n.destroyed||n.add(e,t)})):g.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}},{key:"addMany",value:function(e,t){var n=this,r=this.layers;t=r.getNextIndex(t),e.slice().forEach((function(e){e.parent!==n?(r.add(e,t),t+=1):n.reorder(e,t)}))}},{key:"findLayerById",value:function(e){return m(this.layers,"id",e)}},{key:"findLayerByUid",value:function(e){return m(this.layers,"uid",e)}},{key:"remove",value:function(e){return this.layers.remove(e)}},{key:"removeMany",value:function(e){return this.layers.removeMany(e)}},{key:"removeAll",value:function(){return this.layers.removeAll()}},{key:"reorder",value:function(e,t){return this.layers.reorder(e,t)}},{key:"layerAdded",value:function(e){}},{key:"layerRemoved",value:function(e){}}]),n}(e);return Object(l.a)([Object(d.b)()],t.prototype,"layers",null),t=Object(l.a)([Object(f.a)("esri.support.LayersMixin")],t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(14),i=n(2),a=n(3),o=n(37),s=n(5),c=n(6),l=n(0),u=(n(16),n(13)),d=(n(17),n(1)),f=n(8),p=(n(12),n(19),n(20),n(40)),h=n(184),b="esri.support.TablesMixin",v=u.a.getLogger(b);function y(e){return e&&"group"===e.type}function m(e,t,n){if(e)for(var r=0,i=e.length;r<i;r++){var a=e.getItemAt(r);if(a[t]===n)return a;if(y(a)){var o=m(a.tables,t,n);if(o)return o}}}var g=function(e){var t=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).tables=new p.a,e.tables.on("after-add",(function(t){var n=t.item;n.parent&&n.parent!==Object(o.a)(e)&&"tables"in n.parent&&n.parent.tables.remove(n),n.parent=Object(o.a)(e),"feature"!==n.type&&v.error("Layer 'title:".concat(n.title,", id:").concat(n.id,"' of type '").concat(n.type,"' is not supported as a table and will therefore be ignored."))})),e.tables.on("after-remove",(function(e){e.item.parent=null})),e}return Object(a.a)(n,[{key:"destroy",value:function(){var e,t=this.tables.removeAll(),n=Object(r.a)(t);try{for(n.s();!(e=n.n()).done;){e.value.destroy()}}catch(i){n.e(i)}finally{n.f()}this.tables.destroy()}},{key:"tables",set:function(e){this._set("tables",Object(h.b)(e,this._get("tables")))}},{key:"findTableById",value:function(e){return m(this.tables,"id",e)}},{key:"findTableByUid",value:function(e){return m(this.tables,"uid",e)}}]),n}(e);return Object(l.a)([Object(d.b)()],t.prototype,"tables",null),t=Object(l.a)([Object(f.a)(b)],t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n(47),i=Object(r.b)()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),a=(i.toJSON.bind(i),i.fromJSON.bind(i))},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(414),i=n(530),a=n(532),o=n(556),s=n(533),c=n(534),l={base:r.a,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":i.a,"column-chart":a.a,"line-chart":s.a,"pie-chart":c.a,image:o.a}}},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(8),d=(n(12),n(19),n(20),n(337)),f=n(332),p=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).type="bar-chart",r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}}]),n}(d.a);Object(c.a)([Object(l.b)({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:f.a.write}})],p.prototype,"type",void 0);var h=p=r=Object(c.a)([Object(u.a)("esri.popup.content.BarChartMediaInfo")],p);t.a=h},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(32),d=n(8),f=(n(12),n(19),n(20),n(36)),p=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).tooltip=null,r.value=null,r.x=null,r.y=null,r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({tooltip:this.tooltip,value:this.value})}}]),n}(f.a);Object(c.a)([Object(l.b)()],p.prototype,"tooltip",void 0),Object(c.a)([Object(l.b)()],p.prototype,"value",void 0),Object(c.a)([Object(u.a)("value")],p.prototype,"x",void 0),Object(c.a)([Object(u.a)("tooltip")],p.prototype,"y",void 0);var h=p=r=Object(c.a)([Object(d.a)("esri.popup.content.support.ChartMediaInfoValueSeries")],p);t.a=h},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(8),d=(n(12),n(19),n(20),n(337)),f=n(332),p=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).type="column-chart",r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}}]),n}(d.a);Object(c.a)([Object(l.b)({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:f.a.write}})],p.prototype,"type",void 0);var h=p=r=Object(c.a)([Object(u.a)("esri.popup.content.ColumnChartMediaInfo")],p);t.a=h},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(8),d=(n(12),n(19),n(20),n(337)),f=n(332),p=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).type="line-chart",r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}}]),n}(d.a);Object(c.a)([Object(l.b)({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:f.a.write}})],p.prototype,"type",void 0);var h=p=r=Object(c.a)([Object(u.a)("esri.popup.content.LineChartMediaInfo")],p);t.a=h},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(8),d=(n(12),n(19),n(20),n(337)),f=n(332),p=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).type="pie-chart",r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}}]),n}(d.a);Object(c.a)([Object(l.b)({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:f.a.write}})],p.prototype,"type",void 0);var h=p=r=Object(c.a)([Object(u.a)("esri.popup.content.PieChartMediaInfo")],p);t.a=h},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(8),d=(n(12),n(19),n(20),n(28)),f=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).field=null,r.order=null,r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({field:this.field,order:this.order})}}]),n}(d.a);Object(c.a)([Object(l.b)({type:String,json:{write:!0}})],f.prototype,"field",void 0),Object(c.a)([Object(l.b)({type:["asc","desc"],json:{write:!0}})],f.prototype,"order",void 0);var p=f=r=Object(c.a)([Object(u.a)("esri.popup.support.RelatedRecordsInfoFieldOrder")],f);t.a=p},function(e,t,n){"use strict";n.d(t,"b",(function(){return O}));var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(47),d=n(49),f=n(41),p=n(8),h=n(42),b=n(12),v=(n(19),n(20),n(128)),y=n(28),m=Object(u.b)()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"}),g=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){return Object(i.a)(this,n),t.call(this,e)}return Object(a.a)(n,[{key:"readHref",value:function(e,t,n){return e?Object(v.a)(e,n):t.dataURI}},{key:"writeHref",value:function(e,t,n,r){e&&(Object(b.u)(e)?t.dataURI=e:(t.href=Object(v.e)(e,r),Object(b.s)(t.href)&&(t.href=Object(b.C)(t.href))))}},{key:"clone",value:function(){return new r({href:this.href,primitive:this.primitive})}}]),n}(y.a);Object(c.a)([Object(l.b)({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],g.prototype,"href",void 0),Object(c.a)([Object(f.a)("href")],g.prototype,"readHref",null),Object(c.a)([Object(h.a)("href",{href:{type:String},dataURI:{type:String}})],g.prototype,"writeHref",null),Object(c.a)([Object(d.a)(m)],g.prototype,"primitive",void 0),g=r=Object(c.a)([Object(p.a)("esri.symbols.support.IconSymbol3DLayerResource")],g);var O="circle",j=g;t.a=j},function(e,t,n){"use strict";n.d(t,"b",(function(){return y}));var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(47),d=n(49),f=n(8),p=(n(12),n(19),n(20),n(128)),h=n(28),b=Object(u.b)()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"}),v=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"clone",value:function(){return new r({href:this.href,primitive:this.primitive})}}]),n}(h.a);Object(c.a)([Object(l.b)({type:String,json:{read:p.d,write:p.f}})],v.prototype,"href",void 0),Object(c.a)([Object(d.a)(b)],v.prototype,"primitive",void 0),v=r=Object(c.a)([Object(f.a)("esri.symbols.support.ObjectSymbol3DLayerResource")],v);var y="sphere",m=v;t.a=m},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(5),o=n(6),s=n(0),c=(n(16),n(13),n(17),n(1)),l=n(8),u=(n(12),n(19),n(20),function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).visible=!0,i}return Object(i.a)(n,[{key:"clone",value:function(){}}]),n}(n(28).a));Object(s.a)([Object(c.b)({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],u.prototype,"type",void 0),Object(s.a)([Object(c.b)({readOnly:!0})],u.prototype,"visible",void 0);var d=u=Object(s.a)([Object(l.a)("esri.symbols.callouts.Callout3D")],u);t.a=d},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(8),d=(n(12),n(19),n(20),n(383)),f=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).showLegend=null,e}return Object(a.a)(n,[{key:"clone",value:function(){return new r({title:this.title,showLegend:this.showLegend})}}]),n}(d.a);Object(c.a)([Object(l.b)({type:Boolean,json:{write:!0}})],f.prototype,"showLegend",void 0);var p=f=r=Object(c.a)([Object(u.a)("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],f);t.a=p},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(8),d=(n(12),n(19),n(20),n(539)),f=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).customValues=null,e}return Object(a.a)(n,[{key:"clone",value:function(){return new r({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}}]),n}(d.a);Object(c.a)([Object(l.b)({type:[Number],json:{write:!0}})],f.prototype,"customValues",void 0);var p=f=r=Object(c.a)([Object(u.a)("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],f);t.a=p},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n(65);function i(e){return e=e||r.a.location.hostname,u.some((function(t){var n;return null!=(null==(n=e)?void 0:n.match(t))}))}function a(e,t){return e&&(t=t||r.a.location.hostname)?null!=t.match(o)||null!=t.match(c)?e.replace("static.arcgis.com","staticdev.arcgis.com"):null!=t.match(s)||null!=t.match(l)?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e}var o=/^devext.arcgis.com$/,s=/^qaext.arcgis.com$/,c=/^[\w-]*\.mapsdevext.arcgis.com$/,l=/^[\w-]*\.mapsqa.arcgis.com$/,u=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,o,s,/^jsapps.esri.com$/,c,l]},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u}));var r=n(100),i=n(18),a=n(405),o=n(554),s=n(448),c={key:"type",base:a.a,typeMap:{selection:s.a}};function l(e,t){var n=(t=t.layerDefinition||t).featureReduction;if(n)switch(n.type){case"selection":return s.a.fromJSON(n);case"cluster":return o.a.fromJSON(n)}return null}function u(e,t,n,a){var o=function(e,t,n){return e?"selection"!==e.type?(n.messages&&n.messages.push(new i.a("featureReduction:unsupported","FeatureReduction of type '".concat(e.declaredClass,"' are not supported in scenes."),{featureReduction:e,context:n})),null):e.write(t,n):null}(e,{},a);o&&Object(r.c)(n,o,t)}},function(e,t,n){"use strict";var r=n(26),i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(4)),u=(n(13),n(17),n(1)),d=n(32),f=n(8),p=(n(12),n(19),n(20),n(24)),h=n(25),b=(n(56),n(9)),v=n(72),y=n(460),m="esri-spinner",g="esri-spinner--start",O="esri-spinner--finish",j=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,r){var a;return Object(i.a)(this,n),(a=t.call(this,e,r))._animationDelay=500,a._animationPromise=null,a.location=null,a.view=null,a.viewModel=new y.a,a.visible=!1,a}return Object(a.a)(n,[{key:"initialize",value:function(){var e=this;this.own([Object(h.d)(this,"visible",(function(t){return e._visibleChange(t)}))])}},{key:"destroy",value:function(){this._animationPromise=null}},{key:"show",value:function(e){var t=this,n=e.location,r=e.promise;n&&(this.viewModel.location=n),this.visible=!0;r&&r.catch((function(){})).then((function(){return t.hide()}))}},{key:"hide",value:function(){this.visible=!1}},{key:"render",value:function(){var e,t=this.visible,n=!!this.viewModel.screenLocation,i=t&&n,a=!t&&n,o=(e={},Object(r.a)(e,g,i),Object(r.a)(e,O,a),e),s=this._getPositionStyles();return Object(b.a)("div",{class:this.classes(m,o),styles:s})}},{key:"_visibleChange",value:function(e){var t=this;if(e)this.viewModel.screenLocationEnabled=!0;else{var n=Object(p.a)(this._animationDelay);this._animationPromise=n,n.catch((function(){})).then((function(){t._animationPromise===n&&(t.viewModel.screenLocationEnabled=!1,t._animationPromise=null)}))}}},{key:"_getPositionStyles",value:function(){var e=this.viewModel,t=e.screenLocation,n=e.view;if(!n||Object(l.j)(t))return{};var r=n.padding;return{left:t.x-r.left+"px",top:t.y-r.top+"px"}}}]),n}(v.a);Object(c.a)([Object(d.a)("viewModel.location")],j.prototype,"location",void 0),Object(c.a)([Object(d.a)("viewModel.view")],j.prototype,"view",void 0),Object(c.a)([Object(u.b)({type:y.a})],j.prototype,"viewModel",void 0),Object(c.a)([Object(d.a)("viewModel.visible")],j.prototype,"visible",void 0);var w=j=Object(c.a)([Object(f.a)("esri.widgets.Spinner")],j);t.a=w},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(37),o=n(5),s=n(6),c=n(0),l=(n(16),n(4)),u=(n(13),n(17),n(1)),d=n(8),f=(n(12),n(19),n(20),n(78)),p=n(51),h=n(25),b=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e))._anchorHandles=new p.a,i.location=null,i.screenLocation=null,i.screenLocationEnabled=!1,i.view=null,i._anchorHandles.add([Object(h.d)(Object(a.a)(i),["screenLocationEnabled","location","view.size","view.stationary"],(function(){return i._updateScreenPointAndHandle()})),Object(h.d)(Object(a.a)(i),["view","view.ready"],(function(){return i._wireUpView()}))]),i}return Object(i.a)(n,[{key:"destroy",value:function(){this.view=null,this._anchorHandles&&this._anchorHandles.destroy(),this._anchorHandles=null,this._viewpointHandle=null}},{key:"_wireUpView",value:function(){var e=this,t="view";if(this._anchorHandles.remove(t),this._viewpointHandle=null,this.get("view.ready")){this._setScreenLocation();var n=this.view,r="3d"===n.type?"camera":"viewpoint",i=Object(h.c)(n,r,(function(){return e._viewpointChange()}));this._anchorHandles.add(i,t),this._viewpointHandle=i,this._toggleWatchingViewpoint()}}},{key:"_viewpointChange",value:function(){this._setScreenLocation(),this.emit("view-change")}},{key:"_updateScreenPointAndHandle",value:function(){this._setScreenLocation(),this._toggleWatchingViewpoint()}},{key:"_toggleWatchingViewpoint",value:function(){var e=this._viewpointHandle,t=this.location,n=this.screenLocationEnabled;e&&(t&&n?e.resume():e.pause())}},{key:"_setScreenLocation",value:function(){var e=this.location,t=this.view,n=this.screenLocationEnabled,r=this.get("view.ready"),i=n&&r&&Object(l.k)(e)?t.toScreen(e):null;this._set("screenLocation",i)}}]),n}(f.a.EventedAccessor);Object(c.a)([Object(u.b)()],b.prototype,"location",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],b.prototype,"screenLocation",void 0),Object(c.a)([Object(u.b)()],b.prototype,"screenLocationEnabled",void 0),Object(c.a)([Object(u.b)()],b.prototype,"view",void 0);var v=b=Object(c.a)([Object(d.a)("esri.widgets.support.AnchorElementViewModel")],b);t.a=v},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(14),i=n(2),a=n(3),o=n(136),s=n(546),c=n(197),l=n(547),u=n(629),d=n(420),f=function(){function e(){Object(i.a)(this,e)}return Object(a.a)(e,[{key:"draw",value:function(e,t){var n,i=this.getUniqueHints(e),a=[],f=Object(r.a)(i);try{for(f.s();!(n=f.n()).done;){var p=n.value;p instanceof s.a&&a.push(this.visualizeIntersectionPoint(p,t)),p instanceof c.a&&a.push(this.visualizeLine(p,t)),p instanceof l.a&&a.push(this.visualizeParallelSign(p,t)),p instanceof d.a&&a.push(this.visualizeRightAngleQuad(p,t)),p instanceof u.a&&a.push(this.visualizePoint(p,t))}}catch(h){f.e(h)}finally{f.f()}return Object(o.b)(a)}},{key:"getUniqueHints",value:function(e){var t,n=[],i=Object(r.a)(e);try{for(i.s();!(t=i.n()).done;){var a,o=t.value,s=!0,c=Object(r.a)(n);try{for(c.s();!(a=c.n()).done;){var l=a.value;if(o.equals(l)){s=!1;break}}}catch(u){c.e(u)}finally{c.f()}s&&n.push(o)}}catch(u){i.e(u)}finally{i.f()}return n}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(2),i=n(3),a=n(5),o=n(6),s=n(70),c=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this)).intersectionPoint=e,i}return Object(i.a)(n,[{key:"equals",value:function(e){return e instanceof n&&Object(s.d)(this.intersectionPoint,e.intersectionPoint)}}]),n}(n(284).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(2),i=n(3),a=n(5),o=n(6),s=(n(16),n(13)),c=n(70),l=n(284);s.a.getLogger("esri.views.interactive.snapping.hints.ParallelSnappingHint");var u=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e,i){var a;return Object(r.a)(this,n),(a=t.call(this)).lineStart=e,a.lineEnd=i,a}return Object(i.a)(n,[{key:"equals",value:function(e){return e instanceof n&&Object(c.d)(this.lineStart,e.lineStart)&&Object(c.d)(this.lineEnd,e.lineEnd)}}]),n}(l.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return y}));var r=n(27),i=n(11),a=n(188),o=n(33),s=n(55),c=n(190);function l(e){return e?{p0:Object(r.d)(e.p0),p1:Object(r.d)(e.p1),p2:Object(r.d)(e.p2)}:{p0:Object(r.e)(),p1:Object(r.e)(),p2:Object(r.e)()}}function u(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l();return Object(i.j)(r.p0,e),Object(i.j)(r.p1,t),Object(i.j)(r.p2,n),r}function d(e,t,n){var r=Object(o.i)(e,t),i=Object(o.i)(t,n),a=Object(o.i)(n,e),s=(r+i+a)/2,c=s*(s-r)*(s-i)*(s-a);return c<=0?0:Math.sqrt(c)}function f(e,t,n){return Object(i.i)(b,t,e),Object(i.i)(v,n,e),Object(i.o)(Object(i.f)(b,b,v))/2}var p=new a.a(c.a),h=new a.a((function(){return{p0:null,p1:null,p2:null}})),b=Object(r.e)(),v=Object(r.e)(),y=Object.freeze({__proto__:null,create:l,wrap:function(e,t,n){var r=h.get();return r.p0=e,r.p1=t,r.p2=n,r},copy:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l();return u(e.p0,e.p1,e.p2,t)},fromValues:u,distance2:function(e,t){var n=e.p0,r=e.p1,a=e.p2,o=Object(i.i)(s.d.get(),r,n),l=Object(i.i)(s.d.get(),a,r),u=Object(i.i)(s.d.get(),n,a),d=Object(i.i)(s.d.get(),t,n),f=Object(i.i)(s.d.get(),t,r),h=Object(i.i)(s.d.get(),t,a),b=Object(i.f)(o,o,u),v=Object(i.g)(Object(i.f)(s.d.get(),o,b),d),y=Object(i.g)(Object(i.f)(s.d.get(),l,b),f),m=Object(i.g)(Object(i.f)(s.d.get(),u,b),h);if(v>0&&y>0&&m>0){var g=Object(i.g)(b,d);return g*g/Object(i.g)(b,b)}var O=Object(c.b)(Object(c.c)(n,o,p.get()),t),j=Object(c.b)(Object(c.c)(r,l,p.get()),t),w=Object(c.b)(Object(c.c)(a,u,p.get()),t);return Math.min(O,j,w)},intersectRay:function(e,t,n){var r=1e-5,a=t.direction,o=t.origin,s=e.p0,c=e.p1,l=e.p2,u=c[0]-s[0],d=c[1]-s[1],f=c[2]-s[2],p=l[0]-s[0],h=l[1]-s[1],b=l[2]-s[2],v=a[1]*b-h*a[2],y=a[2]*p-b*a[0],m=a[0]*h-p*a[1],g=u*v+d*y+f*m;if(g>-r&&g<r)return!1;var O=1/g,j=o[0]-s[0],w=o[1]-s[1],_=o[2]-s[2],k=O*(j*v+w*y+_*m);if(k<0||k>1)return!1;var x=w*f-d*_,S=_*u-f*j,T=j*d-u*w,E=O*(a[0]*x+a[1]*S+a[2]*T);return!(E<0||k+E>1)&&(n&&(Object(i.d)(n,a,O*(p*x+h*S+b*T)),Object(i.e)(n,o,n)),!0)},areaPoints2d:d,area2d:function(e){return d(e.p0,e.p1,e.p2)},areaPoints3d:f})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(2),i=n(3),a=function(){function e(t){var n=this;Object(r.a)(this,e),this._attached=!1,this._resourcesCreated=!1,this._visible=!0,this.view=t,this.view.watch("ready",(function(e){n._resourcesCreated&&(e?n._createResources():n._destroyResources())}))}return Object(i.a)(e,[{key:"applyProps",value:function(e){var t=!1;for(var n in e)n in this?"attached"===n?t=e[n]:this[n]=e[n]:console.error("Cannot set unknown property",n);this.attached=t}},{key:"destroy",value:function(){this.attached=!1}},{key:"attached",get:function(){return this._attached},set:function(e){e!==this._attached&&this.view._stage&&(this._attached=e,this._attached&&!this._resourcesCreated?this._createResources():!this._attached&&this._resourcesCreated&&this._destroyResources())}},{key:"visible",get:function(){return this._visible},set:function(e){e!==this._visible&&(this._visible=e,this.attached&&this.updateVisibility(e))}},{key:"_createResources",value:function(){this.createResources(),this._resourcesCreated=!0,this.visible||this.updateVisibility(!1)}},{key:"_destroyResources",value:function(){this.destroyResources(),this._resourcesCreated=!1}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s}));var r,i=n(29),a=n(34),o=n(317);function s(e){e.include(o.a),e.uniforms.add("geometryDepthTexture","sampler2D"),e.uniforms.add("cameraNearFar","vec2"),e.code.add(Object(a.a)(r||(r=Object(i.a)(["\n    //Compare the linearized depths of the vertex/fragment and the geometry in the scene. If vertex/fragment is behind geometry, don't draw it.\n    bool geometryDepthTest(vec2 pos, float elementDepth){\n\n      float geometryDepth = linearDepthFromTexture(geometryDepthTexture, pos, cameraNearFar);\n      if(elementDepth < (geometryDepth - 1.0)){\n        return true;\n      }\n      return false;\n    }\n  "]))))}function c(e,t,n){n.multipassGeometryEnabled&&n.geometryLinearDepthTexture&&(e.setUniform1i("geometryDepthTexture",11),t.bindTexture(n.geometryLinearDepthTexture,11))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(16);var r=n(4),i=n(657),a=n(163);function o(e){var t;if("graphics"!==(null==(t=e.layer)?void 0:t.type))return 1;var n=e.geometry;if(Object(r.j)(n))return 2;switch(n.type){case"polygon":if(n instanceof i.a)return 3;break;case"polyline":break;case"point":case"multipoint":case"extent":case"mesh":default:return 3}return"on-the-ground"!==Object(a.e)(e)&&Object(a.g)(e)?4:0}},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(22)),u=(n(13),n(1)),d=n(58),f=n(41),p=n(8),h=n(42),b=(n(12),n(19),n(20),n(28)),v=n(17),y=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).expression=null,r.name=null,r.returnType="boolean",r.title=null,r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}}]),n}(b.a);Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],y.prototype,"expression",void 0),Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],y.prototype,"name",void 0),Object(c.a)([Object(u.b)({type:["boolean"],json:{write:!0}})],y.prototype,"returnType",void 0),Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],y.prototype,"title",void 0);var m=y=r=Object(c.a)([Object(p.a)("esri.form.ExpressionInfo")],y),g=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).description=null,r.label=null,r.type=null,r.visibilityExpression=null,r}return n}(b.a);Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],g.prototype,"description",void 0),Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],g.prototype,"label",void 0),Object(c.a)([Object(u.b)()],g.prototype,"type",void 0),Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],g.prototype,"visibilityExpression",void 0);var O,j=g=Object(c.a)([Object(p.a)("esri.form.elements.Element")],g),w=O=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).type=null,r}return Object(a.a)(n,[{key:"clone",value:function(){return new O({type:this.type})}}]),n}(b.a);Object(c.a)([Object(u.b)({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],w.prototype,"type",void 0);var _,k=w=O=Object(c.a)([Object(p.a)("esri.form.elements.inputs.AttachmentInput")],w),x=_=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).attachmentKeyword=null,r.editable=!0,r.input=null,r.type="attachment",r}return Object(a.a)(n,[{key:"clone",value:function(){return new _({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}}]),n}(j);Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],x.prototype,"attachmentKeyword",void 0),Object(c.a)([Object(u.b)({type:Boolean,json:{write:!0}})],x.prototype,"editable",void 0),Object(c.a)([Object(u.b)({type:k,json:{read:{source:"inputType"},write:{target:"inputType"}}})],x.prototype,"input",void 0),Object(c.a)([Object(u.b)({type:["attachment"],json:{read:!1,write:!0}})],x.prototype,"type",void 0);var S=x=_=Object(c.a)([Object(p.a)("esri.form.elements.AttachmentElement")],x),T=n(154),E=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).type=null,r}return n}(b.a);Object(c.a)([Object(u.b)()],E.prototype,"type",void 0);var C=E=Object(c.a)([Object(p.a)("esri.form.elements.inputs.Input")],E),P=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).maxLength=null,r.minLength=0,r}return n}(C);Object(c.a)([Object(u.b)({type:Number,json:{write:!0}})],P.prototype,"maxLength",void 0),Object(c.a)([Object(u.b)({type:Number,json:{write:!0}})],P.prototype,"minLength",void 0);var I,M=P=Object(c.a)([Object(p.a)("esri.form.elements.inputs.TextInput")],P),A=I=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).type="barcode-scanner",r}return Object(a.a)(n,[{key:"clone",value:function(){return new I({maxLength:this.maxLength,minLength:this.minLength})}}]),n}(M);Object(c.a)([Object(u.b)({type:["barcode-scanner"],json:{read:!1,write:!0}})],A.prototype,"type",void 0);var R,L=A=I=Object(c.a)([Object(p.a)("esri.form.elements.inputs.BarcodeScannerInput")],A),F=R=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).noValueOptionLabel=null,r.showNoValueOption=!1,r.type="combo-box",r}return Object(a.a)(n,[{key:"clone",value:function(){return new R({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}}]),n}(C);Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],F.prototype,"noValueOptionLabel",void 0),Object(c.a)([Object(u.b)({type:Boolean,json:{write:!0}})],F.prototype,"showNoValueOption",void 0),Object(c.a)([Object(u.b)({type:["combo-box"],json:{read:!1,write:!0}})],F.prototype,"type",void 0);var D,N=F=R=Object(c.a)([Object(p.a)("esri.form.elements.inputs.ComboBoxInput")],F);function V(e){return null!=e?new Date(e):null}function z(e){return e?e.getTime():null}var U=D=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).includeTime=!1,r.max=null,r.min=null,r.type="datetime-picker",r}return Object(a.a)(n,[{key:"readMax",value:function(e,t){return V(t.max)}},{key:"writeMax",value:function(e,t){t.max=z(e)}},{key:"readMin",value:function(e,t){return V(t.min)}},{key:"writeMin",value:function(e,t){t.min=z(e)}},{key:"clone",value:function(){return new D({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}}]),n}(C);Object(c.a)([Object(u.b)({type:Boolean,json:{write:!0}})],U.prototype,"includeTime",void 0),Object(c.a)([Object(u.b)({type:Date,json:{type:Number,write:!0}})],U.prototype,"max",void 0),Object(c.a)([Object(f.a)("max")],U.prototype,"readMax",null),Object(c.a)([Object(h.a)("max")],U.prototype,"writeMax",null),Object(c.a)([Object(u.b)({type:Date,json:{type:Number,write:!0}})],U.prototype,"min",void 0),Object(c.a)([Object(f.a)("min")],U.prototype,"readMin",null),Object(c.a)([Object(h.a)("min")],U.prototype,"writeMin",null),Object(c.a)([Object(u.b)({type:["datetime-picker"],json:{read:!1,write:!0}})],U.prototype,"type",void 0);var B,G=U=D=Object(c.a)([Object(p.a)("esri.form.elements.inputs.DateTimePickerInput")],U),q=B=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).noValueOptionLabel=null,r.showNoValueOption=!1,r.type="radio-buttons",r}return Object(a.a)(n,[{key:"clone",value:function(){return new B({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}}]),n}(C);Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],q.prototype,"noValueOptionLabel",void 0),Object(c.a)([Object(u.b)({type:Boolean,json:{write:!0}})],q.prototype,"showNoValueOption",void 0),Object(c.a)([Object(u.b)({type:["radio-buttons"],json:{read:!1,write:!0}})],q.prototype,"type",void 0);var H,W=q=B=Object(c.a)([Object(p.a)("esri.form.elements.inputs.RadioButtonsInput")],q),$=H=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).type="text-area",r}return Object(a.a)(n,[{key:"clone",value:function(){return new H({maxLength:this.maxLength,minLength:this.minLength})}}]),n}(M);Object(c.a)([Object(u.b)({type:["text-area"],json:{read:!1,write:!0}})],$.prototype,"type",void 0);var J,Y=$=H=Object(c.a)([Object(p.a)("esri.form.elements.inputs.TextAreaInput")],$),K=J=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).type="text-box",r}return Object(a.a)(n,[{key:"clone",value:function(){return new J({maxLength:this.maxLength,minLength:this.minLength})}}]),n}(M);Object(c.a)([Object(u.b)({type:["text-box"],json:{read:!1,write:!0}})],K.prototype,"type",void 0);var Z,X={base:C,key:"type",typeMap:{"barcode-scanner":L,"combo-box":N,"datetime-picker":G,"radio-buttons":W,"text-area":Y,"text-box":K=J=Object(c.a)([Object(p.a)("esri.form.elements.inputs.TextBoxInput")],K)}},Q=Z=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).domain=null,r.editable=!0,r.fieldName=null,r.hint=null,r.input=null,r.requiredExpression=null,r.type="field",r}return Object(a.a)(n,[{key:"clone",value:function(){return new Z({description:this.description,domain:this.domain,editable:this.editable,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,visibilityExpression:this.visibilityExpression})}}]),n}(j);Object(c.a)([Object(u.b)({types:T.d,json:{read:{reader:T.b},write:!0}})],Q.prototype,"domain",void 0),Object(c.a)([Object(u.b)({type:Boolean,json:{write:!0}})],Q.prototype,"editable",void 0),Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],Q.prototype,"fieldName",void 0),Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],Q.prototype,"hint",void 0),Object(c.a)([Object(u.b)({types:X,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Q.prototype,"input",void 0),Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],Q.prototype,"requiredExpression",void 0),Object(c.a)([Object(u.b)({type:String,json:{read:!1,write:!0}})],Q.prototype,"type",void 0);var ee,te=Q=Z=Object(c.a)([Object(p.a)("esri.form.elements.FieldElement")],Q),ne=n(535),re=ee=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).displayCount=null,r.displayType="list",r.editable=!0,r.orderByFields=null,r.relationshipId=null,r.type="relationship",r}return Object(a.a)(n,[{key:"clone",value:function(){return new ee({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:Object(l.a)(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}}]),n}(j);Object(c.a)([Object(u.b)({type:Number,json:{write:!0}})],re.prototype,"displayCount",void 0),Object(c.a)([Object(u.b)({type:["list"],json:{write:!0}})],re.prototype,"displayType",void 0),Object(c.a)([Object(u.b)({type:Boolean,json:{write:!0}})],re.prototype,"editable",void 0),Object(c.a)([Object(u.b)({type:[ne.a],json:{write:!0}})],re.prototype,"orderByFields",void 0),Object(c.a)([Object(u.b)({type:Number,json:{write:!0}})],re.prototype,"relationshipId",void 0),Object(c.a)([Object(u.b)({type:["relationship"],json:{read:!1,write:!0}})],re.prototype,"type",void 0);var ie,ae=re=ee=Object(c.a)([Object(p.a)("esri.form.elements.RelationshipElement")],re);function oe(e){return{typesWithGroup:{base:j,key:"type",typeMap:{attachment:S,field:te,group:e,relationship:ae}},typesWithoutGroup:{base:j,key:"type",typeMap:{attachment:S,field:te,relationship:ae}}}}function se(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)return null;var r=n?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((function(e){return r[e.type]})).map((function(e){return r[e.type].fromJSON(e)}))}function ce(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)return null;var r=n?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((function(e){return r[e.type]})).map((function(e){return e.toJSON()}))}function le(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e?e.map((function(e){return Object(v.k)(n?t.typesWithGroup:t.typesWithoutGroup,e)})):null}var ue=ie=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).elements=null,r.initialState="expanded",r.type="group",r}return Object(a.a)(n,[{key:"castElements",value:function(e){return le(e,fe,!1)}},{key:"readElements",value:function(e,t){return se(t.formElements,fe,!1)}},{key:"writeElements",value:function(e,t){t.formElements=ce(e,fe,!1)}},{key:"clone",value:function(){return new ie({description:this.description,elements:Object(l.a)(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}}]),n}(j);Object(c.a)([Object(u.b)({json:{write:!0}})],ue.prototype,"elements",void 0),Object(c.a)([Object(d.a)("elements")],ue.prototype,"castElements",null),Object(c.a)([Object(f.a)("elements",["formElements"])],ue.prototype,"readElements",null),Object(c.a)([Object(h.a)("elements")],ue.prototype,"writeElements",null),Object(c.a)([Object(u.b)({type:["collapsed","expanded"],json:{write:!0}})],ue.prototype,"initialState",void 0),Object(c.a)([Object(u.b)({type:String,json:{read:!1,write:!0}})],ue.prototype,"type",void 0);var de,fe=oe(ue=ie=Object(c.a)([Object(p.a)("esri.form.elements.GroupElement")],ue)),pe=oe(ue),he=de=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).description=null,r.elements=null,r.expressionInfos=null,r.title=null,r}return Object(a.a)(n,[{key:"castElements",value:function(e){return le(e,pe)}},{key:"readElements",value:function(e,t){return se(t.formElements,pe)}},{key:"writeElements",value:function(e,t){t.formElements=ce(e,pe)}},{key:"clone",value:function(){return new de({description:this.description,expressionInfos:Object(l.a)(this.expressionInfos),elements:Object(l.a)(this.elements),title:this.title})}}]),n}(b.a);Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],he.prototype,"description",void 0),Object(c.a)([Object(u.b)({json:{write:!0}})],he.prototype,"elements",void 0),Object(c.a)([Object(d.a)("elements")],he.prototype,"castElements",null),Object(c.a)([Object(f.a)("elements",["formElements"])],he.prototype,"readElements",null),Object(c.a)([Object(h.a)("elements")],he.prototype,"writeElements",null),Object(c.a)([Object(u.b)({type:[m],json:{write:!0}})],he.prototype,"expressionInfos",void 0),Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],he.prototype,"title",void 0);var be=he=de=Object(c.a)([Object(p.a)("esri.form.FormTemplate")],he);t.a=be},function(e,t,n){"use strict";var r,i,a=n(2),o=n(3),s=n(37),c=n(5),l=n(6),u=n(0),d=(n(16),n(13)),f=n(1),p=n(58),h=n(8),b=(n(12),n(19),n(20),n(36)),v=n(78),y=n(226),m=n(7),g=n.n(m),O=n(15),j=n(10),w=n(14),_=n(53),k=n(50),x=n(195),S=n(22),T=n(17),E=n(42),C=n(18),P=n(24),I=n(28),M=n(40),A=n(39),R=n(231),L=n(184),F=n(133),D=n(391),N=n(49),V=r=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).type="none",r}return Object(o.a)(n,[{key:"clone",value:function(){return new r({type:this.type})}}]),n}(I.a);Object(u.a)([Object(N.a)({none:"none",stayAbove:"stay-above"})],V.prototype,"type",void 0),V=r=Object(u.a)([Object(h.a)("esri.ground.NavigationConstraint")],V);var z=d.a.getLogger("esri.Ground"),U=i=function(e){Object(c.a)(r,e);var t=Object(l.a)(r);function r(e){var n;Object(a.a)(this,r),(n=t.call(this,e)).opacity=1,n.surfaceColor=null,n.navigationConstraint=null,n.layers=new M.a;return n.layers.on("after-add",(function(e){return function(e){e.parent&&e.parent!==Object(s.a)(n)&&"remove"in e.parent&&e.parent.remove(e),e.parent=Object(s.a)(n),"elevation"!==e.type&&"base-elevation"!==e.type&&z.error("Layer '".concat(e.title,", id:").concat(e.id,"' of type '").concat(e.type,"' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported."))}(e.item)})),n.layers.on("after-remove",(function(e){return function(e){e.parent=null}(e.item)})),n}return Object(o.a)(r,[{key:"initialize",value:function(){this.when().catch((function(e){z.error("#load()","Failed to load ground",e)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}},{key:"destroy",value:function(){var e,t=this.layers.removeAll(),n=Object(w.a)(t);try{for(n.s();!(e=n.n()).done;){e.value.destroy()}}catch(r){n.e(r)}finally{n.f()}this.layers.destroy()}},{key:"normalizeCtorArgs",value:function(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e=Object(j.a)({},e)).resourceInfo),e}},{key:"layers",set:function(e){this._set("layers",Object(L.b)(e,this._get("layers")))}},{key:"writeLayers",value:function(e,t,n,r){var i=[];e?(r=Object(j.a)(Object(j.a)({},r),{},{layerContainerType:"ground"}),e.forEach((function(e){if("write"in e){var t={};Object(x.b)(e)().write(t,r)&&i.push(t)}else r&&r.messages&&r.messages.push(new C.a("layer:unsupported","Layers (".concat(e.title,", ").concat(e.id,") of type '").concat(e.declaredClass,"' cannot be persisted in the ground"),{layer:e}))})),t.layers=i):t.layers=i}},{key:"load",value:function(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}},{key:"loadAll",value:function(){var e=this;return Object(D.a)(this,(function(t){t(e.layers)}))}},{key:"queryElevation",value:function(){var e=Object(O.a)(g.a.mark((function e(t,r){var i,a,o,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load({signal:null==r?void 0:r.signal});case 2:return e.next=4,n.e(13).then(n.bind(null,1453));case 4:return i=e.sent,a=i.ElevationQuery,Object(P.u)(r),o=new a,s=this.layers.filter(B).toArray(),e.abrupt("return",o.queryAll(s,t,r));case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createElevationSampler",value:function(){var e=Object(O.a)(g.a.mark((function e(t,r){var i,a,o,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load({signal:null==r?void 0:r.signal});case 2:return e.next=4,n.e(13).then(n.bind(null,1453));case 4:return i=e.sent,a=i.ElevationQuery,Object(P.u)(r),o=new a,s=this.layers.filter(B).toArray(),e.abrupt("return",o.createSamplerAll(s,t,r));case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"clone",value:function(){var e={opacity:this.opacity,surfaceColor:Object(S.a)(this.surfaceColor),navigationConstraint:Object(S.a)(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new i({resourceInfo:this.resourceInfo}).set(e)}},{key:"read",value:function(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),Object(_.a)(Object(k.a)(r.prototype),"read",this).call(this,e,t)}},{key:"_loadFromSource",value:function(e){var t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve(null)}},{key:"_loadLayersFromJSON",value:function(e,t,r){var i=this,a=t&&t.origin||"web-scene",o=t&&t.portal||null,s=t&&t.url||null;return n.e(32).then(n.bind(null,1034)).then((function(t){var n=t.populateOperationalLayers;Object(P.u)(r);var c=[];if(e.layers&&Array.isArray(e.layers)){var l={context:{origin:a,url:s,portal:o,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};c.push(n(i.layers,e.layers,l))}return Object(P.j)(c)})).then((function(){}))}}]),r}(Object(I.b)(F.a));function B(e){return"elevation"===e.type||function(e){return e&&"createElevationSampler"in e}(e)}Object(u.a)([Object(f.b)({json:{read:!1}})],U.prototype,"layers",null),Object(u.a)([Object(E.a)("layers")],U.prototype,"writeLayers",null),Object(u.a)([Object(f.b)({readOnly:!0})],U.prototype,"resourceInfo",void 0),Object(u.a)([Object(f.b)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:T.a,read:{reader:R.b,source:"transparency"},write:{writer:function(e,t){t.transparency=Object(R.a)(e)},target:"transparency"}}})],U.prototype,"opacity",void 0),Object(u.a)([Object(f.b)({type:A.a,json:{type:[T.a],write:function(e,t){t.surfaceColor=e.toJSON().slice(0,3)}}})],U.prototype,"surfaceColor",void 0),Object(u.a)([Object(f.b)({type:V,json:{write:!0}})],U.prototype,"navigationConstraint",void 0);var G=U=i=Object(u.a)([Object(h.a)("esri.Ground")],U),q=n(239),H=n(340),W=d.a.getLogger("esri.support.groundUtils"),$={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};var J=n(526),Y=n(527),K=d.a.getLogger("esri.Map"),Z=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).allLayers=new q.a({root:Object(s.a)(r),rootCollectionNames:["basemap.baseLayers","ground.layers","layers","basemap.referenceLayers"],getChildrenFunction:function(e){return e.layers}}),r.allTables=r._createTablesFlattener(Object(s.a)(r)),r.basemap=null,r.ground=new G,r._basemapCache=Object(H.b)(),r}return Object(o.a)(n,[{key:"destroy",value:function(){var e,t;this.allLayers.destroy(),this.allTables.destroy(),null==(e=this.ground)||e.destroy(),null==(t=this.basemap)||t.destroy(),Object(H.c)(this._basemapCache),this._basemapCache=null}},{key:"castBasemap",value:function(e){return Object(H.d)(e,this._basemapCache)}},{key:"castGround",value:function(e){return function(e){var t;return"string"==typeof e?e in $?t=new G({resourceInfo:{data:{layers:[$[e]]}}}):W.warn("Unable to find ground definition for: ".concat(e,'. Try "world-elevation"')):t=Object(T.m)(G,e),t}(e)||(K.error("Map.ground may not be set to null or undefined"),this._get("ground"))}},{key:"findLayerById",value:function(e){return this.allLayers.find((function(t){return t.id===e}))}},{key:"findTableById",value:function(e){return this.allTables.find((function(t){return t.id===e}))}},{key:"_createTablesFlattener",value:function(e){var t=this;return new q.a({root:e,rootCollectionNames:["tables","layers"],getChildrenFunction:function(e){return e&&"group"===e.type?t._createTablesFlattener(e):null},itemFilterFunction:function(e){return t._isMapOrGroupLayer(e.parent)&&e.parent.tables.includes(e)}})}},{key:"_isMapOrGroupLayer",value:function(e){return e&&(e===this||this._isGroupLayer(e))}},{key:"_isGroupLayer",value:function(e){return e&&"group"===e.type}}]),n}(Object(Y.a)(Object(J.a)(v.a.EventedMixin(b.a))));Object(u.a)([Object(f.b)({readOnly:!0,dependsOn:[]})],Z.prototype,"allLayers",void 0),Object(u.a)([Object(f.b)({readOnly:!0})],Z.prototype,"allTables",void 0),Object(u.a)([Object(f.b)({type:y.default})],Z.prototype,"basemap",void 0),Object(u.a)([Object(p.a)("basemap")],Z.prototype,"castBasemap",null),Object(u.a)([Object(f.b)({type:G,nonNullable:!0})],Z.prototype,"ground",void 0),Object(u.a)([Object(p.a)("ground")],Z.prototype,"castGround",null);var X=Z=Object(u.a)([Object(h.a)("esri.Map")],Z);t.a=X},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(22)),u=(n(13),n(17),n(1)),d=n(8),f=(n(12),n(19),n(20),n(28)),p=n(205),h=n(38),b=n(76),v=n(124),y=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).statisticType=null,e.onStatisticField=null,e.onStatisticValueExpression=null,e}return Object(a.a)(n,[{key:"clone",value:function(){return new r({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}}]),n}(f.a);Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],y.prototype,"statisticType",void 0),Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],y.prototype,"onStatisticField",void 0),Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],y.prototype,"onStatisticValueExpression",void 0);var m,g=y=r=Object(c.a)([Object(d.a)("esri.layers.support.OutStatistic")],y),O=m=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).name=null,e}return Object(a.a)(n,[{key:"clone",value:function(){return new m({name:this.name,outStatistic:this.outStatistic.clone()})}}]),n}(f.a);Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],O.prototype,"name",void 0),Object(c.a)([Object(u.b)({type:g,json:{write:!0}})],O.prototype,"outStatistic",void 0);var j,w=O=m=Object(c.a)([Object(d.a)("esri.layers.support.AggregateField")],O),_=n(322),k=j=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).type="cluster",r.clusterRadius=Object(h.j)("80px"),r.clusterMinSize=Object(h.j)("12px"),r.clusterMaxSize=Object(h.j)("50px"),r.popupEnabled=!0,r.popupTemplate=null,r.symbol=null,r.labelingInfo=null,r.labelsVisible=!0,r.fields=null,r}return Object(a.a)(n,[{key:"clone",value:function(){return new j({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:Object(l.a)(this.labelingInfo),labelsVisible:this.labelsVisible,fields:Object(l.a)(this.fields),popupEnabled:this.popupEnabled,popupTemplate:Object(l.a)(this.popupTemplate)})}}]),n}(f.a);Object(c.a)([Object(u.b)({type:["cluster"],readOnly:!0,json:{write:!0}})],k.prototype,"type",void 0),Object(c.a)([Object(u.b)({type:Number,cast:function(e){return"auto"===e?e:Object(h.j)(e)},json:{write:!0}})],k.prototype,"clusterRadius",void 0),Object(c.a)([Object(u.b)({type:Number,cast:h.j,json:{write:!0}})],k.prototype,"clusterMinSize",void 0),Object(c.a)([Object(u.b)({type:Number,cast:h.j,json:{write:!0}})],k.prototype,"clusterMaxSize",void 0),Object(c.a)([Object(u.b)(v.j)],k.prototype,"popupEnabled",void 0),Object(c.a)([Object(u.b)({type:p.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],k.prototype,"popupTemplate",void 0),Object(c.a)([Object(u.b)({types:b.f})],k.prototype,"symbol",void 0),Object(c.a)([Object(u.b)({type:[_.a],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],k.prototype,"labelingInfo",void 0),Object(c.a)([Object(u.b)(v.d)],k.prototype,"labelsVisible",void 0),Object(c.a)([Object(u.b)({type:[w],json:{write:!0}})],k.prototype,"fields",void 0);var x=k=j=Object(c.a)([Object(d.a)("esri.layers.support.FeatureReductionCluster")],k);t.a=x},function(e,t,n){"use strict";var r=n(26),i=n(10),a=n(2),o=n(3),s=n(5),c=n(6),l=n(0),u=(n(16),n(13),n(1)),d=n(32),f=n(58),p=n(8),h=n(18),b=(n(12),n(19),n(20),n(25)),v=n(123),y=n(147),m=n(45);n(66);var g=["B","kB","MB","GB","TB"];var O=n(56),j=n(75),w=n(9),_=n(72),k=n(364),x=n(84);var S={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},T="esri-attachments",E="esri-attachments__loader-container",C="esri-attachments__loader",P="esri-attachments__container",I="esri-attachments__container--list",M="esri-attachments__container--preview",A="esri-attachments__actions",R="esri-attachments__delete-button",L="esri-attachments__add-attachment-button",F="esri-attachments__error-message",D="esri-attachments__items",N="esri-attachments__item",V="esri-attachments__item-button",z="esri-attachments__item-mask",U="esri-attachments__item-mask--icon",B="esri-attachments__image",G="esri-attachments__image--resizable",q="esri-attachments__label",H="esri-attachments__filename",W="esri-attachments__item-chevron-icon",$="esri-attachments__item-link",J="esri-attachments__item-link-overlay",Y="esri-attachments__item-link-overlay-icon",K="esri-attachments__item-add-icon",Z="esri-attachments__form-node",X="esri-attachments__file-fieldset",Q="esri-attachments__file-label",ee="esri-attachments__file-name",te="esri-attachments__file-input",ne="esri-attachments__metadata",re="esri-attachments__metadata-fieldset",ie="esri-attachments__progress-bar",ae="esri-widget",oe="esri-button",se="esri-button--disabled",ce="esri-button--secondary",le="esri-button--tertiary",ue="esri-button--third",de="esri-button--small",fe="esri-button--half",pe="esri-widget__content--empty",he="esri-icon-right",be="esri-icon-left",ve="esri-icon-plus",ye=window.CSS,me=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r){var o;return Object(a.a)(this,n),(o=t.call(this,e,r)).abilities=null,o.displayType="list",o.graphic=null,o.label=void 0,o.messages=null,o.messagesUnits=null,o.selectedFile=null,o.submitting=!1,o.viewModel=new k.a,o.visibleElements=Object(i.a)({},S),o._supportsImageOrientation=ye&&ye.supports&&ye.supports("image-orientation","from-image"),o._addAttachmentForm=null,o._updateAttachmentForm=null,o}return Object(o.a)(n,[{key:"initialize",value:function(){var e=this;this.own(Object(b.b)(this,"viewModel.attachmentInfos","change",(function(){return e.scheduleRender()})),Object(b.a)(this,"viewModel.mode",(function(){return e._modeChanged()})))}},{key:"castVisibleElements",value:function(e){return Object(i.a)(Object(i.a)({},S),e)}},{key:"addAttachment",value:function(){var e=this,t=this._addAttachmentForm,n=this.viewModel;return this._set("submitting",!0),this._set("error",null),n.addAttachment(t).then((function(t){return e._set("submitting",!1),e._set("error",null),n.mode="view",t})).catch((function(t){throw e._set("submitting",!1),e._set("error",new h.a("attachments:add-attachment",e.messages.addErrorMessage,t)),t}))}},{key:"deleteAttachment",value:function(e){var t=this,n=this.viewModel;return this._set("submitting",!0),this._set("error",null),n.deleteAttachment(e).then((function(e){return t._set("submitting",!1),t._set("error",null),n.mode="view",e})).catch((function(e){throw t._set("submitting",!1),t._set("error",new h.a("attachments:delete-attachment",t.messages.deleteErrorMessage,e)),e}))}},{key:"updateAttachment",value:function(){var e=this,t=this.viewModel,n=this._updateAttachmentForm;return this._set("submitting",!0),this._set("error",null),t.updateAttachment(n).then((function(n){return e._set("submitting",!1),e._set("error",null),t.mode="view",n})).catch((function(t){throw e._set("submitting",!1),e._set("error",new h.a("attachments:update-attachment",e.messages.updateErrorMessage,t)),t}))}},{key:"render",value:function(){var e=this.submitting,t=this.viewModel.state;return Object(w.a)("div",{class:this.classes(T,ae)},e?this.renderProgressBar():null,"loading"===t?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}},{key:"renderErrorMessage",value:function(){var e=this.error,t=this.visibleElements;return e&&t.errorMessage?Object(w.a)("div",{key:"error-message",class:F},e.message):null}},{key:"renderAttachments",value:function(){var e=this.viewModel,t=e.mode,n=e.activeAttachmentInfo;return"add"===t?this.renderAddForm():"edit"===t?this.renderDetailsForm(n):this.renderAttachmentContainer()}},{key:"renderLoading",value:function(){return Object(w.a)("div",{class:E,key:"loader"},Object(w.a)("div",{class:C}))}},{key:"renderProgressBar",value:function(){return this.visibleElements.progressBar?Object(w.a)("div",{class:ie,key:"progress-bar"}):null}},{key:"renderAddForm",value:function(){var e=this.submitting,t=this.selectedFile,n=e||!t,i=this.visibleElements.cancelAddButton?Object(w.a)("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes(oe,le,de,fe,e&&se)},this.messages.cancel):null,a=this.visibleElements.addSubmitButton?Object(w.a)("button",{type:"submit",disabled:n,class:this.classes(oe,ce,de,fe,Object(r.a)({},se,n))},this.messages.add):null,o=t?Object(w.a)("span",{key:"file-name",class:ee},t.name):null,s=Object(w.a)("form",{bind:this,afterCreate:O.i,afterRemoved:O.c,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},Object(w.a)("fieldset",{class:X},o,Object(w.a)("label",{class:this.classes(Q,oe,ce)},t?this.messages.changeFile:this.messages.selectFile,Object(w.a)("input",{class:te,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),a,i);return Object(w.a)("div",{key:"add-form-container",class:Z},s)}},{key:"renderDetailsForm",value:function(e){var t=this,n=this.visibleElements,i=this.viewModel,a=this.selectedFile,o=this.submitting,s=e.contentType,c=e.size,l=e.url,u=i.abilities,d=o||!a,f=u.editing&&u.operations.delete&&n.deleteButton?Object(w.a)("button",{key:"delete-button",type:"button",disabled:o,bind:this,onclick:function(n){return t._submitDeleteAttachment(n,e)},class:this.classes(oe,de,le,R,Object(r.a)({},se,o))},this.messages.delete):null,p=u.editing&&u.operations.update&&n.updateButton?Object(w.a)("button",{disabled:d,key:"update-button",type:"submit",class:this.classes(oe,de,ue,Object(r.a)({},se,d))},this.messages.update):null,h=this.visibleElements.cancelUpdateButton?Object(w.a)("button",{disabled:o,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(oe,de,le,ue,Object(r.a)({},se,o))},this.messages.cancel):null,b=a?Object(w.a)("span",{key:"file-name",class:ee},a.name):null,j=u.editing&&u.operations.update?Object(w.a)("fieldset",{key:"file",class:X},b,Object(w.a)("label",{class:this.classes(Q,oe,ce)},this.messages.changeFile,Object(w.a)("input",{class:te,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):null,_=Object(w.a)("fieldset",{key:"size",class:re},Object(w.a)("label",null,function(e,t){var n=0===t?0:Math.floor(Math.log(t)/Math.log(1024));n=Object(m.d)(n,0,g.length-1);var r=Object(y.b)(t/Math.pow(1024,n),{maximumFractionDigits:2});return Object(v.c)(e.units.bytes[g[n]],{fileSize:r})}(this.messagesUnits,c))),k=Object(w.a)("fieldset",{key:"content-type",class:re},Object(w.a)("label",null,s)),x=Object(w.a)("form",{bind:this,afterCreate:O.i,afterRemoved:O.c,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},Object(w.a)("div",{class:ne},_,k),j,Object(w.a)("div",{class:A},f,h,p));return Object(w.a)("div",{key:"edit-form-container",class:Z},Object(w.a)("a",{class:$,href:l,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:e,size:400}),Object(w.a)("div",{class:J},Object(w.a)("span",{class:Y},Object(w.a)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},Object(w.a)("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),Object(w.a)("path",{fill:"none",d:"M0 0h32v32H0z"}))))),x)}},{key:"renderImageMask",value:function(e){var t=e.attachmentInfo,n=e.size,i=this.viewModel.supportsResizeAttachments,a=t.contentType,o=t.name,s=t.url,c=i&&function(e){var t=e.toLowerCase();return"image/bmp"===t||"image/emf"===t||"image/exif"===t||"image/gif"===t||"image/x-icon"===t||"image/jpeg"===t||"image/png"===t||"image/tiff"===t||"image/x-wmf"===t}(a),l=this._getCSSTransform(t,c),u=l?{transform:l,"image-orientation":"none"}:{},d=-1===s.indexOf("?")?"?":"&",f=c?"".concat(s).concat(d,"w=").concat(n):function(e){var t=Object(x.a)("esri/themes/base/images/files/");return e?"text/plain"===e?"".concat(t,"text-32.svg"):"application/pdf"===e?"".concat(t,"pdf-32.svg"):"text/csv"===e?"".concat(t,"csv-32.svg"):"application/gpx+xml"===e?"".concat(t,"gpx-32.svg"):"application/x-dwf"===e?"".concat(t,"cad-32.svg"):"application/postscript"===e||"application/json"===e||"text/xml"===e||"model/vrml"===e?"".concat(t,"code-32.svg"):"application/x-zip-compressed"===e||"application/x-7z-compressed"===e||"application/x-gzip"===e||"application/x-tar"===e||"application/x-gtar"===e||"application/x-bzip2"===e||"application/gzip"===e||"application/x-compress"===e||"application/x-apple-diskimage"===e||"application/x-rar-compressed"===e||"application/zip"===e?"".concat(t,"zip-32.svg"):-1!==e.indexOf("image/")?"".concat(t,"image-32.svg"):-1!==e.indexOf("audio/")?"".concat(t,"sound-32.svg"):-1!==e.indexOf("video/")?"".concat(t,"video-32.svg"):-1!==e.indexOf("msexcel")||-1!==e.indexOf("ms-excel")||-1!==e.indexOf("spreadsheetml")?"".concat(t,"excel-32.svg"):-1!==e.indexOf("msword")||-1!==e.indexOf("ms-word")||-1!==e.indexOf("wordprocessingml")?"".concat(t,"word-32.svg"):-1!==e.indexOf("powerpoint")||-1!==e.indexOf("presentationml")?"".concat(t,"report-32.svg"):"".concat(t,"generic-32.svg"):"".concat(t,"generic-32.svg")}(a),p=Object(r.a)({},U,!c),h=Object(r.a)({},G,i);return Object(w.a)("div",{class:this.classes(p,z)},Object(w.a)("img",{styles:u,alt:o,src:f,class:this.classes(h,B)}))}},{key:"renderAttachmentInfo",value:function(e){var t=this,n=e.attachmentInfo,r=e.displayType,i=this.viewModel.abilities,a=n.name,o=n.url,s=this.renderImageMask({attachmentInfo:n,size:"list"===r?48:400}),c=i.editing?Object(w.a)("span",{"aria-hidden":"true",class:this.classes(W,Object(O.f)()?be:he)}):null,l=[s,Object(w.a)("label",{class:q},Object(w.a)("span",{class:H},a||this.messages.noTitle),c)],u=i.editing?Object(w.a)("button",{key:"details-button",bind:this,class:V,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":n.id,onclick:function(){return t._startEditAttachment(n)},type:"button"},l):Object(w.a)("a",{key:"details-link",class:V,href:o,target:"_blank"},l);return Object(w.a)("li",{class:N,key:n},u)}},{key:"renderAttachmentContainer",value:function(){var e,t=this,n=this.displayType,i=this.viewModel,a=this.visibleElements,o=i.attachmentInfos,s=i.abilities,c=o&&o.length,l=(e={},Object(r.a)(e,I,"preview"!==n),Object(r.a)(e,M,"preview"===n),e),u=s.editing&&s.operations.add&&a.addButton?Object(w.a)("button",{bind:this,onclick:function(){return t._startAddAttachment()},class:this.classes(oe,le,L),type:"button"},Object(w.a)("span",{"aria-hidden":"true",class:this.classes(K,ve)}),this.messages.add):null,d=c?Object(w.a)("ul",{class:D},o.toArray().map((function(e){return t.renderAttachmentInfo({attachmentInfo:e,displayType:n})}))):Object(w.a)("div",{class:pe},this.messages.noAttachments);return Object(w.a)("div",{key:"attachments-container",class:this.classes(P,l)},d,u)}},{key:"_modeChanged",value:function(){this._set("error",null),this._set("selectedFile",null)}},{key:"_handleFileInputChange",value:function(e){var t=e.target,n=t&&t.files&&t.files.item(0);this._set("selectedFile",n)}},{key:"_submitDeleteAttachment",value:function(e,t){e.preventDefault(),this.deleteAttachment(t)}},{key:"_submitAddAttachment",value:function(e){e.preventDefault(),this.addAttachment()}},{key:"_submitUpdateAttachment",value:function(e){e.preventDefault(),this.updateAttachment()}},{key:"_startEditAttachment",value:function(e){var t=this.viewModel;t.activeAttachmentInfo=e,t.mode="edit"}},{key:"_startAddAttachment",value:function(){this.viewModel.mode="add"}},{key:"_cancelForm",value:function(e){e.preventDefault(),this.viewModel.mode="view"}},{key:"_getCSSTransform",value:function(e,t){var n=e.orientationInfo;return!this._supportsImageOrientation&&t&&n?[n.rotation?"rotate(".concat(n.rotation,"deg)"):"",n.mirrored?"scaleX(-1)":""].join(" "):""}}]),n}(_.a);Object(l.a)([Object(d.a)("viewModel.abilities")],me.prototype,"abilities",void 0),Object(l.a)([Object(u.b)()],me.prototype,"displayType",void 0),Object(l.a)([Object(d.a)("viewModel.graphic")],me.prototype,"graphic",void 0),Object(l.a)([Object(u.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],me.prototype,"label",void 0),Object(l.a)([Object(u.b)(),Object(j.a)("esri/widgets/Attachments/t9n/Attachments")],me.prototype,"messages",void 0),Object(l.a)([Object(u.b)(),Object(j.a)("esri/core/t9n/Units")],me.prototype,"messagesUnits",void 0),Object(l.a)([Object(u.b)({readOnly:!0})],me.prototype,"selectedFile",void 0),Object(l.a)([Object(u.b)({readOnly:!0})],me.prototype,"submitting",void 0),Object(l.a)([Object(u.b)({readOnly:!0})],me.prototype,"error",void 0),Object(l.a)([Object(u.b)({type:k.a})],me.prototype,"viewModel",void 0),Object(l.a)([Object(u.b)()],me.prototype,"visibleElements",void 0),Object(l.a)([Object(f.a)("visibleElements")],me.prototype,"castVisibleElements",null);var ge=me=Object(l.a)([Object(p.a)("esri.widgets.Attachments")],me);t.a=ge},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(8),d=(n(12),n(19),n(20),n(414)),f=n(28),p=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).linkURL=null,r.sourceURL=null,r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({linkURL:this.linkURL,sourceURL:this.sourceURL})}}]),n}(f.a);Object(c.a)([Object(l.b)({type:String,json:{write:!0}})],p.prototype,"linkURL",void 0),Object(c.a)([Object(l.b)({type:String,json:{write:!0}})],p.prototype,"sourceURL",void 0);var h,b=p=r=Object(c.a)([Object(u.a)("esri.popup.content.support.ImageMediaInfoValue")],p),v=h=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).refreshInterval=null,r.type="image",r.value=null,r}return Object(a.a)(n,[{key:"clone",value:function(){return new h({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}}]),n}(d.a);Object(c.a)([Object(l.b)({type:Number,json:{write:!0}})],v.prototype,"refreshInterval",void 0),Object(c.a)([Object(l.b)({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],v.prototype,"type",void 0),Object(c.a)([Object(l.b)({type:b,json:{write:!0}})],v.prototype,"value",void 0);var y=v=h=Object(c.a)([Object(u.a)("esri.popup.content.ImageMediaInfo")],v);t.a=y},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17)),u=n(1),d=n(8),f=(n(12),n(19),n(20),n(28));var p={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}},h=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).contentType=null,r.exifInfo=null,r.id=null,r.globalId=null,r.keywords=null,r.name=null,r.parentGlobalId=null,r.parentObjectId=null,r.size=null,r.url=null,r}return Object(a.a)(n,[{key:"orientationInfo",get:function(){var e=function(e){var t=e.exifInfo,n=e.exifName,r=e.tagName;if(!t||!n||!r)return null;var i=t.find((function(e){return e.name===n}));return i?function(e){var t=e.tagName,n=e.tags;if(!n||!t)return null;var r=n.find((function(e){return e.name===t}));return r&&r.value||null}({tagName:r,tags:i.tags}):null}({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:this.exifInfo});return p[e]||null}},{key:"clone",value:function(){return new r({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}}]),n}(f.a);Object(c.a)([Object(u.b)({type:String})],h.prototype,"contentType",void 0),Object(c.a)([Object(u.b)()],h.prototype,"exifInfo",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],h.prototype,"orientationInfo",null),Object(c.a)([Object(u.b)({type:l.a})],h.prototype,"id",void 0),Object(c.a)([Object(u.b)({type:String})],h.prototype,"globalId",void 0),Object(c.a)([Object(u.b)({type:String})],h.prototype,"keywords",void 0),Object(c.a)([Object(u.b)({type:String})],h.prototype,"name",void 0),Object(c.a)([Object(u.b)({json:{read:!1}})],h.prototype,"parentGlobalId",void 0),Object(c.a)([Object(u.b)({json:{read:!1}})],h.prototype,"parentObjectId",void 0),Object(c.a)([Object(u.b)({type:l.a})],h.prototype,"size",void 0),Object(c.a)([Object(u.b)({json:{read:!1}})],h.prototype,"url",void 0);var b=h=r=Object(c.a)([Object(d.a)("esri.layers.support.AttachmentInfo")],h);t.a=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"CardImage",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"CardTitle",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"CardContent",{enumerable:!0,get:function(){return o.default}});var r=s(n(575)),i=s(n(893)),a=s(n(894)),o=s(n(895));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return $})),n.d(t,"b",(function(){return te})),n.d(t,"c",(function(){return J})),n.d(t,"d",(function(){return Z})),n.d(t,"e",(function(){return Y})),n.d(t,"f",(function(){return q})),n.d(t,"g",(function(){return G})),n.d(t,"h",(function(){return z})),n.d(t,"i",(function(){return K})),n.d(t,"j",(function(){return ee})),n.d(t,"k",(function(){return X})),n.d(t,"l",(function(){return L})),n.d(t,"m",(function(){return k})),n.d(t,"n",(function(){return U})),n.d(t,"o",(function(){return N})),n.d(t,"p",(function(){return pe})),n.d(t,"q",(function(){return ae})),n.d(t,"r",(function(){return ce})),n.d(t,"s",(function(){return fe})),n.d(t,"t",(function(){return re})),n.d(t,"u",(function(){return ie})),n.d(t,"v",(function(){return O})),n.d(t,"w",(function(){return j})),n.d(t,"x",(function(){return ue})),n.d(t,"y",(function(){return ne})),n.d(t,"z",(function(){return le}));var r=n(35),i=n(31),a=n(14),o=n(13),s=n(18),c=n(68),l=n(297),u=n(504),d=n(191);function f(e,t){return e?t?4:3:t?3:2}var p=o.a.getLogger("esri.tasks.support.optimizedFeatureSet"),h={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},b=function(e,t,n,r,i,a){e[n]=i,e[n+1]=a},v=function(e,t,n,r,i,a){e[n]=i,e[n+1]=a,e[n+2]=t[r+2]},y=function(e,t,n,r,i,a){e[n]=i,e[n+1]=a,e[n+2]=t[r+3]},m=function(e,t,n,r,i,a){e[n]=i,e[n+1]=a,e[n+2]=t[r+2],e[n+3]=t[r+3]};function g(e,t,n,r){if(e){if(n)return t&&r?m:v;if(t&&r)return y}else if(t&&r)return v;return b}function O(e,t){var n=e.scale,r=e.translate;return Math.round((t-r[0])/n[0])}function j(e,t){var n=e.scale,r=e.translate;return Math.round((r[1]-t)/n[1])}function w(e,t){var n=e.scale,r=e.translate;return t*n[0]+r[0]}function _(e,t){var n=e.scale;return e.translate[1]-t*n[1]}function k(e,t,n){return e?t?n?I(e):T(e):n?C(e):x(e):null}function x(e){var t=e.coords;return{x:t[0],y:t[1]}}function S(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function T(e){var t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function E(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function C(e){var t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function P(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function I(e){var t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function M(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function A(e,t){return e&&t?M:e?E:t?P:S}function R(e,t,n,r,i){var o,s=A(n,r),c=Object(a.a)(t);try{for(c.s();!(o=c.n()).done;){var u=o.value,f=u.geometry,p=u.attributes,h=void 0;f&&(h=s(new d.a,f)),e.push(new l.a(h,p,null,p[i]))}}catch(b){c.e(b)}finally{c.f()}return e}function L(e,t,n){if(!e)return null;for(var r=f(t,n),i=[],a=0;a<e.coords.length;a+=r){for(var o=[],s=0;s<r;s++)o.push(e.coords[a+s]);i.push(o)}return t?n?{points:i,hasZ:t,hasM:n}:{points:i,hasZ:t}:n?{points:i,hasM:n}:{points:i}}function F(e,t,n,r,i){var o,s=f(n,r),c=Object(a.a)(t);try{for(c.s();!(o=c.n()).done;){var u=o.value,p=u.geometry,h=u.attributes,b=void 0;p&&(b=D(new d.a,p,s)),e.push(new l.a(b,h,null,h[i]))}}catch(v){c.e(v)}finally{c.f()}return e}function D(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f(t.hasZ,t.hasM);e.lengths[0]=t.points.length;var r,i=e.coords,o=0,s=Object(a.a)(t.points);try{for(s.s();!(r=s.n()).done;)for(var c=r.value,l=0;l<n;l++)i[o++]=c[l]}catch(u){s.e(u)}finally{s.f()}return e}function N(e,t,n){if(!e)return null;var r,i=f(t,n),o=e.coords,s=e.lengths,c=[],l=0,u=Object(a.a)(s);try{for(u.s();!(r=u.n()).done;){for(var d=r.value,p=[],h=0;h<d;h++){for(var b=[],v=0;v<i;v++)b.push(o[l++]);p.push(b)}c.push(p)}}catch(y){u.e(y)}finally{u.f()}return t?n?{paths:c,hasZ:t,hasM:n}:{paths:c,hasZ:t}:n?{paths:c,hasM:n}:{paths:c}}function V(e,t,n,r,i){var o,s=f(n,r),c=Object(a.a)(t);try{for(c.s();!(o=c.n()).done;){var u=o.value,p=u.geometry,h=u.attributes,b=void 0;p&&(b=z(new d.a,p,s)),e.push(new l.a(b,h,null,h[i]))}}catch(v){c.e(v)}finally{c.f()}return e}function z(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f(t.hasZ,t.hasM),i=e.lengths,o=e.coords,s=0,c=Object(a.a)(t.paths);try{for(c.s();!(n=c.n()).done;){var l,u=n.value,d=Object(a.a)(u);try{for(d.s();!(l=d.n()).done;)for(var p=l.value,h=0;h<r;h++)o[s++]=p[h]}catch(b){d.e(b)}finally{d.f()}i.push(u.length)}}catch(b){c.e(b)}finally{c.f()}return e}function U(e,t,n){if(!e)return null;var r,i=f(t,n),o=e.coords,s=e.lengths,c=[],l=0,u=Object(a.a)(s);try{for(u.s();!(r=u.n()).done;){for(var d=r.value,p=[],h=0;h<d;h++){for(var b=[],v=0;v<i;v++)b.push(o[l++]);p.push(b)}c.push(p)}}catch(y){u.e(y)}finally{u.f()}return t?n?{rings:c,hasZ:t,hasM:n}:{rings:c,hasZ:t}:n?{rings:c,hasM:n}:{rings:c}}function B(e,t,n,r,i){var o,s=Object(a.a)(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,u=c.geometry,f=c.centroid,p=c.attributes,h=void 0;u&&(h=G(new d.a,u,n,r)),f?e.push(new l.a(h,p,S(new d.a,f),p[i])):e.push(new l.a(h,p,null,p[i]))}}catch(b){s.e(b)}finally{s.f()}return e}function G(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.hasZ,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.hasM;return q(e,t.rings,n,r),e}function q(e,t,n,r){var i=f(n,r),o=e.lengths,s=e.coords,c=0;o.length=s.length=0;var l,u=Object(a.a)(t);try{for(u.s();!(l=u.n()).done;){var d,p=l.value,h=Object(a.a)(p);try{for(h.s();!(d=h.n()).done;)for(var b=d.value,v=0;v<i;v++)s[c++]=b[v]}catch(y){h.e(y)}finally{h.f()}o.push(p.length)}}catch(y){u.e(y)}finally{u.f()}return e}var H=[],W=[];function $(e,t,n,r,a){H[0]=e;var o=J(W,H,t,n,r,a),s=Object(i.a)(o,1)[0];return H.length=W.length=0,s}function J(e,t,n,r,i,o){if(e.length=0,!n){var c,u=Object(a.a)(t);try{for(u.s();!(c=u.n()).done;){var d=c.value,f=d.attributes[o];e.push(new l.a(null,d.attributes,null,f))}}catch(h){u.e(h)}finally{u.f()}return e}switch(n){case"esriGeometryPoint":return R(e,t,r,i,o);case"esriGeometryMultipoint":return F(e,t,r,i,o);case"esriGeometryPolyline":return V(e,t,r,i,o);case"esriGeometryPolygon":return B(e,t,r,i,o);default:p.error("convertToFeatureSet:unknown-geometry",new s.a("Unable to parse unknown geometry type '".concat(n,"'"))),e.length=0}return e}function Y(e,t,n,r,i,a){var o=e.length;switch(n){case"esriGeometryPoint":R(e,t,r,i,a);break;case"esriGeometryMultipoint":F(e,t,r,i,a);break;case"esriGeometryPolyline":V(e,t,r,i,a);break;case"esriGeometryPolygon":B(e,t,r,i,a);break;default:p.error("convertToFeatureSet:unknown-geometry",new s.a("Unable to parse unknown geometry type '".concat(n,"'")))}for(var c=0;c<t.length;c++)e[c+o].geometryType=n,e[c+o].insertAfter=t[c].insertAfter,e[c+o].groupId=t[c].groupId;return e}function K(e,t,n,r){W[0]=e,Q(H,W,t,n,r);var i=H[0];return H.length=W.length=0,i}function Z(e,t,n){if(!e)return null;var r=new d.a;return"hasZ"in e&&null==t&&(t=e.hasZ),"hasM"in e&&null==n&&(n=e.hasM),Object(c.f)(e)?A(null!=t?t:null!=e.z,null!=n?n:null!=e.m)(r,e):Object(c.g)(e)?G(r,e,t,n):Object(c.h)(e)?z(r,e,f(t,n)):Object(c.e)(e)?D(r,e,f(t,n)):void p.error("convertFromGeometry:unknown-geometry",new s.a("Unable to parse unknown geometry type '".concat(e,"'")))}function X(e,t,n,r){var i=e&&("coords"in e?e:e.geometry);if(!i)return null;switch(t){case"esriGeometryPoint":var a=x;return n&&r?a=I:n?a=T:r&&(a=C),a(i);case"esriGeometryMultipoint":return L(i,n,r);case"esriGeometryPolyline":return N(i,n,r);case"esriGeometryPolygon":return U(i,n,r);default:return void p.error("convertToGeometry:unknown-geometry",new s.a("Unable to parse unknown geometry type '".concat(t,"'")))}}function Q(e,t,n,r,i){switch(e.length=0,n){case"esriGeometryPoint":return function(e,t,n,r){var i=x;n&&r?i=I:n?i=T:r&&(i=C);var o,s=Object(a.a)(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=c.geometry,u=c.attributes,d=l?i(l):null;e.push({attributes:u,geometry:d})}}catch(f){s.e(f)}finally{s.f()}return e}(e,t,r,i);case"esriGeometryMultipoint":return function(e,t,n,r){var i,o=Object(a.a)(t);try{for(o.s();!(i=o.n()).done;){var s=i.value,c=s.geometry,l=s.attributes,u=void 0;c&&(u=L(c,n,r)),e.push({attributes:l,geometry:u})}}catch(d){o.e(d)}finally{o.f()}return e}(e,t,r,i);case"esriGeometryPolyline":return function(e,t,n,r){var i,o=Object(a.a)(t);try{for(o.s();!(i=o.n()).done;){var s=i.value,c=s.geometry,l=s.attributes,u=void 0;c&&(u=N(c,n,r)),e.push({attributes:l,geometry:u})}}catch(d){o.e(d)}finally{o.f()}return e}(e,t,r,i);case"esriGeometryPolygon":return function(e,t,n,r){var i,o=Object(a.a)(t);try{for(o.s();!(i=o.n()).done;){var s=i.value,c=s.geometry,l=s.attributes,u=s.centroid,d=void 0;if(c&&(d=U(c,n,r)),u){var f=x(u);e.push({attributes:l,centroid:f,geometry:d})}else e.push({attributes:l,geometry:d})}}catch(p){o.e(p)}finally{o.f()}return e}(e,t,r,i);default:p.error("convertToFeatureSet:unknown-geometry",new s.a("Unable to parse unknown geometry type '".concat(n,"'")))}return e}function ee(e){var t=e.objectIdFieldName,n=e.spatialReference,r=e.transform,i=e.fields,a=e.hasM,o=e.hasZ,s=e.features,c=e.geometryType,l=e.exceededTransferLimit,u=e.uniqueIdField,d=e.queryGeometry,f=e.queryGeometryType,p={features:Q([],s,c,o,a),fields:i,geometryType:c,objectIdFieldName:t,spatialReference:n,uniqueIdField:u,queryGeometry:X(d,f,!1,!1)};return r&&(p.transform=r),l&&(p.exceededTransferLimit=l),a&&(p.hasM=a),o&&(p.hasZ=o),p}function te(e,t){var n=new u.a,r=e.hasM,i=e.hasZ,a=e.features,o=e.objectIdFieldName,c=e.spatialReference,l=e.geometryType,d=e.exceededTransferLimit,f=e.transform,h=e.fields;return h&&(n.fields=h),n.geometryType=l,n.objectIdFieldName=o||t,n.spatialReference=c,n.objectIdFieldName?(a&&J(n.features,a,l,i,r,n.objectIdFieldName),d&&(n.exceededTransferLimit=d),r&&(n.hasM=r),i&&(n.hasZ=i),f&&(n.transform=f),n):(p.error(new s.a("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),n)}function ne(e){var t=e.transform,n=e.features,r=e.hasM,i=e.hasZ;if(!t)return e;var o,s=Object(a.a)(n);try{for(s.s();!(o=s.n()).done;){var c=o.value;c.geometry&&le(c.geometry,c.geometry,r,i,t),c.centroid&&le(c.centroid,c.centroid,r,i,t)}}catch(l){s.e(l)}finally{s.f()}return e.transform=null,e}function re(e,t){var n=t.geometryType,r=t.features,i=t.hasM,a=t.hasZ;if(!e)return t;for(var o=0;o<r.length;o++){var s=r[o],c=s.weakClone();c.geometry=new d.a,ie(c.geometry,s.geometry,i,a,n,e),s.centroid&&(c.centroid=new d.a,ie(c.centroid,s.centroid,i,a,"esriGeometryPoint",e)),r[o]=c}return t.transform=e,t}function ie(e,t,n,r,i,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:n,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:r;if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;var l=h[i],u=t.coords,d=t.lengths,p=f(n,r),b=f(n&&s,r&&c),v=g(n,r,s,c);if(!d.length)return v(e.coords,u,0,0,O(o,u[0]),j(o,u[1])),e.lengths.length&&(e.lengths.length=0),e.coords.length=p,e;var y,m,w,_,k,x=0,S=0,T=S,E=Object(a.a)(d);try{for(E.s();!(k=E.n()).done;){var C=k.value;if(!(C<l)){var P=0;S=T,w=y=O(o,u[x]),_=m=j(o,u[x+1]),v(e.coords,u,S,x,w,_),P++,x+=p,S+=b;for(var I=1;I<C;I++,x+=p)w=O(o,u[x]),_=j(o,u[x+1]),w===y&&_===m||(v(e.coords,u,S,x,w-y,_-m),S+=b,P++,y=w,m=_);P>=l&&(e.lengths.push(P),T=S)}}}catch(M){E.e(M)}finally{E.f()}return e.coords.length=T,e.coords.length?e:null}function ae(e,t,n,r,i,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:n,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:r;if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;var l=h[i],u=t.coords,d=t.lengths,p=f(n,r),b=f(n&&s,r&&c),v=g(n,r,s,c);if(!d.length)return v(e.coords,u,0,0,u[0],u[1]),e.lengths.length&&(e.lengths.length=0),e.coords.length=p,e;var y,m=0,O=o*o,j=Object(a.a)(d);try{for(j.s();!(y=j.n()).done;){var w=y.value;if(w<l)m+=w*p;else{var _=e.coords.length/b,k=m,x=m+(w-1)*p;v(e.coords,u,e.coords.length,k,u[k],u[k+1]),se(e.coords,u,p,O,v,k,x),v(e.coords,u,e.coords.length,x,u[x],u[x+1]);var S=e.coords.length/b-_;S>=l?e.lengths.push(S):e.coords.length=_*b,m+=w*p}}}catch(T){j.e(T)}finally{j.f()}return e.coords.length?e:null}function oe(e,t,n,r){var i=e[t],a=e[t+1],o=e[n],s=e[n+1],c=e[r],l=e[r+1],u=o,d=s,f=c-u,p=l-d;if(0!==f||0!==p){var h=((i-u)*f+(a-d)*p)/(f*f+p*p);h>1?(u=c,d=l):h>0&&(u+=f*h,d+=p*h)}return(f=i-u)*f+(p=a-d)*p}function se(e,t,n,r,i,a,o){for(var s,c=r,l=0,u=a+n;u<o;u+=n)(s=oe(t,u,a,o))>c&&(l=u,c=s);c>r&&(l-a>n&&se(e,t,n,r,i,a,l),i(e,t,e.length,l,t[l],t[l+1]),o-l>n&&se(e,t,n,r,i,l,o))}function ce(e,t,n,r){if(!t||!t.coords||!t.coords.length)return null;var i=f(n,r),a=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY;if(t&&t.coords)for(var l=t.coords,u=0;u<l.length;u+=i){var d=l[u],p=l[u+1];a=Math.min(a,d),s=Math.max(s,d),o=Math.min(o,p),c=Math.max(c,p)}return e[0]=a,e[1]=o,e[2]=s,e[3]=c,e}function le(e,t,n,r,a){var o=t.coords,s=t.lengths,c=n?r?m:v:r?v:b,l=f(n,r);if(!o.length)return e!==t&&(e.lengths.length=0,e.coords.length=0),e;if(!s.length)return c(e.coords,o,0,0,w(a,o[0]),_(a,o[1])),e!==t&&(e.lengths.length=0,e.coords.length=l),e;for(var u=Object(i.a)(a.scale,2),d=u[0],p=u[1],h=0,y=0;y<s.length;y++){var g=s[y];e.lengths[y]=g;var O=w(a,o[h]),j=_(a,o[h+1]);c(e.coords,o,h,h,O,j),h+=l;for(var k=1;k<g;k++,h+=l)O+=o[h]*d,j-=o[h+1]*p,c(e.coords,o,h,h,O,j)}return e!==t&&(e.lengths.length=s.length,e.coords.length=o.length),e}function ue(e,t,n,i,a,o){var s,c=f(n,i),l=g(n,i,a,o),u=t.coords;e.coords.length=0,e.lengths.length=0,(s=e.lengths).push.apply(s,Object(r.a)(t.lengths));for(var d=0;d<u.length;d+=c)l(e.coords,u,e.coords.length,d,u[d],u[d+1]);return e}function de(e,t,n,r){for(var i=0,a=e[r*t],o=e[r*(t+1)],s=1;s<n;s++){var c=a+e[r*(t+s)],l=o+e[r*(t+s)+1],u=(c-a)*(l+o);a=c,o=l,i+=u}return.5*i}function fe(e,t){for(var n=e.coords,r=e.lengths,i=0,a=0,o=0;o<r.length;o++)a+=de(n,i,r[o],t),i+=o;return Math.abs(a)}function pe(e,t){for(var n=e.clone(),r=e.coords,i=e.lengths,a=0,o=0;o<i.length;o++){for(var s=i[o],c=r[t*a],l=r[t*a+1],u=1;u<s;u++){var d=c+r[t*(a+u)],f=l+r[t*(a+u)+1];n.coords[t*(a+u)]=d,n.coords[t*(a+u)+1]=f,c=d,l=f}a+=s}return n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(16);var r=n(13);n(18);function i(e){}r.a.getLogger("esri/views/webgl")},function(e,t,n){"use strict";function r(){return new Float32Array(2)}function i(e,t){var n=new Float32Array(2);return n[0]=e,n[1]=t,n}function a(){return r()}function o(){return i(1,1)}function s(){return i(1,0)}function c(){return i(0,1)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var l=a(),u=o(),d=s(),f=c();Object.freeze({__proto__:null,create:r,clone:function(e){var t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t},fromValues:i,createView:function(e,t){return new Float32Array(e,t,2)},zeros:a,ones:o,unitX:s,unitY:c,ZEROS:l,ONES:u,UNIT_X:d,UNIT_Y:f})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return o}));var r=!0,i=32,a=1.5,o=200},function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return P}));var r=n(27),i=n(64),a=n(11),o=n(298),s=n(321),c=n(89);function l(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function u(e,t){var n=2*Math.acos(t[3]),r=Math.sin(n/2);return r>i.a?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n}function d(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=n[0],c=n[1],l=n[2],u=n[3];return e[0]=r*u+o*s+i*l-a*c,e[1]=i*u+o*c+a*s-r*l,e[2]=a*u+o*l+r*c-i*s,e[3]=o*u-r*s-i*c-a*l,e}function f(e,t,n,r){var a,o,s,c,l,u=t[0],d=t[1],f=t[2],p=t[3],h=n[0],b=n[1],v=n[2],y=n[3];return(o=u*h+d*b+f*v+p*y)<0&&(o=-o,h=-h,b=-b,v=-v,y=-y),1-o>i.a?(a=Math.acos(o),s=Math.sin(a),c=Math.sin((1-r)*a)/s,l=Math.sin(r*a)/s):(c=1-r,l=r),e[0]=c*u+l*h,e[1]=c*d+l*b,e[2]=c*f+l*v,e[3]=c*p+l*y,e}function p(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a,s=o?1/o:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-i*s,e[3]=a*s,e}function h(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function b(e,t){var n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;n=Math.sqrt(t[3*i+i]-t[3*a+a]-t[3*o+o]+1),e[i]=.5*n,n=.5/n,e[3]=(t[3*a+o]-t[3*o+a])*n,e[a]=(t[3*a+i]+t[3*i+a])*n,e[o]=(t[3*o+i]+t[3*i+o])*n}return e}var v=c.c,y=c.l,m=c.a,g=d,O=c.b,j=c.d,w=c.j,_=c.e,k=_,x=c.f,S=x,T=c.k,E=c.g,C=c.h;function P(e,t,n){var r=Object(a.g)(t,n);return r<-.999999?(Object(a.f)(I,M,t),Object(a.m)(I)<1e-6&&Object(a.f)(I,A,t),Object(a.q)(I,I),l(e,I,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(Object(a.f)(I,t,n),e[0]=I[0],e[1]=I[1],e[2]=I[2],e[3]=1+r,T(e,e))}var I=Object(r.e)(),M=Object(r.g)(1,0,0),A=Object(r.g)(0,1,0);var R=Object(s.a)(),L=Object(s.a)();var F=Object(o.a)();Object.freeze({__proto__:null,identity:function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},setAxisAngle:l,getAxisAngle:u,multiply:d,rotateX:function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),c=Math.cos(n);return e[0]=r*c+o*s,e[1]=i*c+a*s,e[2]=a*c-i*s,e[3]=o*c-r*s,e},rotateY:function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),c=Math.cos(n);return e[0]=r*c-a*s,e[1]=i*c+o*s,e[2]=a*c+r*s,e[3]=o*c-i*s,e},rotateZ:function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),c=Math.cos(n);return e[0]=r*c+i*s,e[1]=i*c-r*s,e[2]=a*c+o*s,e[3]=o*c-a*s,e},calculateW:function(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e},slerp:f,random:function(e){var t=Object(i.b)(),n=Object(i.b)(),r=Object(i.b)(),a=Math.sqrt(1-t),o=Math.sqrt(t);return e[0]=a*Math.sin(2*Math.PI*n),e[1]=a*Math.cos(2*Math.PI*n),e[2]=o*Math.sin(2*Math.PI*r),e[3]=o*Math.cos(2*Math.PI*r),e},invert:p,conjugate:h,fromMat3:b,fromEuler:function(e,t,n,r){var i=.5*Math.PI/180;t*=i,n*=i,r*=i;var a=Math.sin(t),o=Math.cos(t),s=Math.sin(n),c=Math.cos(n),l=Math.sin(r),u=Math.cos(r);return e[0]=a*c*u-o*s*l,e[1]=o*s*u+a*c*l,e[2]=o*c*l-a*s*u,e[3]=o*c*u+a*s*l,e},str:function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},copy:v,set:y,add:m,mul:g,scale:O,dot:j,lerp:w,length:_,len:k,squaredLength:x,sqrLen:S,normalize:T,exactEquals:E,equals:C,rotationTo:P,sqlerp:function(e,t,n,r,i,a){return f(R,t,i,a),f(L,n,r,a),f(e,R,L,2*a*(1-a)),e},setAxes:function(e,t,n,r){var i=F;return i[0]=n[0],i[3]=n[1],i[6]=n[2],i[1]=r[0],i[4]=r[1],i[7]=r[2],i[2]=-t[0],i[5]=-t[1],i[8]=-t[2],T(e,b(e,i))}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o}));var r=n(417),i=n(446),a=n(584),o={key:"type",base:r.a,typeMap:{algorithmic:i.a,multipart:a.a}};function s(e){return e&&e.type?"algorithmic"===e.type?i.a.fromJSON(e):"multipart"===e.type?a.a.fromJSON(e):null:null}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return c}));var r=n(2),i=n(3),a=n(274),o=n(327),s=Object(a.a)().vec3f("position"),c=Object(a.a)().vec3f("position").vec2f("uv0"),l=Object(a.a)().vec3f("position").vec4u8("color"),u=function(){function e(t){Object(r.a)(this,e),this.vertexBufferLayout=t}return Object(i.a)(e,[{key:"allocate",value:function(e){return this.vertexBufferLayout.createBuffer(e)}},{key:"elementCount",value:function(e){return e.indices.get("position").length}},{key:"write",value:function(e,t,n,r){Object(o.c)(t,this.vertexBufferLayout,e.transformation,e.invTranspTransformation,n,r)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return z}));var r=n(2),i=n(3),a=n(5),o=n(6),s=(n(16),n(136)),c=n(39),l=n(27),u=n(11),d=n(104),f=n(70),p=n(545),h=n(646),b=n(4),v=n(38),y=n(51),m=n(119),g=n(33),O=n(89),j=n(237),w=n(296),_=n(389),k=n(394),x=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e))._handles=new y.a,i._location=Object(l.e)(),i._direction=Object(l.g)(1,0,0),i._width=1,i._offset=1,i._length=18,i._color=Object(j.c)(1,0,1,1),i._renderOccluded=4,i.applyProps(e),i}return Object(i.a)(n,[{key:"location",get:function(){return this._location},set:function(e){Object(u.p)(this._location,e)||(Object(u.j)(this._location,e),this.updateGeometry())}},{key:"direction",get:function(){return this._direction},set:function(e){Object(u.p)(this._direction,e)||(Object(u.j)(this._direction,e),this.updateGeometry())}},{key:"setDirectionFromPoints",value:function(e,t){Object(u.q)(this._direction,Object(u.i)(this._direction,t,e)),this.updateGeometry()}},{key:"width",get:function(){return this._width},set:function(e){e!==this._width&&(this._width=e,this.updateMaterial())}},{key:"offset",get:function(){return this._offset},set:function(e){e!==this._offset&&(this._offset=e,this.updateGeometry())}},{key:"length",get:function(){return this._length},set:function(e){e!==this._length&&(this._length=e,this.updateGeometry())}},{key:"color",get:function(){return this._color},set:function(e){Object(O.g)(e,this._color)||(Object(O.c)(this._color,e),this.updateMaterial())}},{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(e){e!==this._renderOccluded&&(this._renderOccluded=e,this.updateMaterial())}},{key:"createExternalResources",value:function(){var e=this,t=new _.a(this.materialParameters);this._handles.add(this.view.state.watch("camera",(function(){e.updateGeometry()}))),this._externalResources={material:t}}},{key:"destroyExternalResources",value:function(){this._handles.removeAll(),this._externalResources=null}},{key:"createGeometries",value:function(e){var t=w.a.createPolylineGeometry([Object(l.e)(),Object(l.e)()]),n=w.a.createPolylineGeometry([Object(l.e)(),Object(l.e)()]),r=Object(b.q)(this._externalResources).material;e.addGeometry(t,r,m.a),e.addGeometry(n,r,m.a),this.updateVertices(e)}},{key:"forEachExternalMaterial",value:function(e){Object(b.k)(this._externalResources)&&e(this._externalResources.material)}},{key:"updateMaterial",value:function(){Object(b.j)(this._externalResources)||this._externalResources.material.setParameterValues(this.materialParameters)}},{key:"materialParameters",get:function(){return{width:this._width,color:this._color,renderOccluded:this._renderOccluded}}},{key:"updateGeometry",value:function(){var e=this.object;Object(b.j)(e)||this.updateVertices(e)}},{key:"updateVertices",value:function(e){var t=this.view.state.camera;t.projectToScreen(this.location,T),Object(u.e)(S,this.location,this.direction),t.projectToScreen(S,E),Object(g.e)(E,Object(g.d)(E,E,T)),this.updateVertexAttributes(t,e,0,T,E,1),this.updateVertexAttributes(t,e,1,T,E,-1)}},{key:"updateVertexAttributes",value:function(e,t,n,r,i,a){var o=t.geometryRecords[n].geometry.getMutableAttribute("position").data,s=Object(g.a)(C,Object(g.r)(C,i[1]*a,i[0]*-a),this.offset+this.width/2),c=Object(g.h)(P,Object(g.h)(P,Object(g.h)(P,r,Object(g.a)(P,i,this.length/2)),s),s),l=Object(g.h)(I,c,Object(g.a)(I,i,-this.length));e.unprojectFromScreen(c,S),o[0]=S[0],o[1]=S[1],o[2]=S[2],e.unprojectFromScreen(l,S),o[3]=S[0],o[4]=S[1],o[5]=S[2],t.geometryVertexAttrsUpdated(n)}}]),n}(k.a),S=Object(l.e)(),T=Object(v.f)(),E=Object(v.f)(),C=Object(v.f)(),P=Object(v.f)(),I=Object(v.f)(),M=n(590),A=n(35),R=n(88),L=n(55),F=n(169),D=n(614),N=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e))._handles=new y.a,i._quadMaterial=null,i._outlineMaterial=null,i._maxSize=0,i._position=Object(l.e)(),i._up=Object(l.e)(),i._right=Object(l.e)(),i._renderOccluded=4,i._color=Object(j.c)(1,0,0,1),i._outlineColor=Object(j.c)(0,0,0,1),i._outlineSize=0,i._size=32,i._outlineRenderOccluded=16,i.applyProps(e),i}return Object(i.a)(n,[{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateQuadMaterial())}},{key:"color",get:function(){return this._color},set:function(e){Object(O.c)(this._color,e),this._updateQuadMaterial()}},{key:"outlineColor",get:function(){return this._outlineColor},set:function(e){Object(O.c)(this._outlineColor,e),this._updateOutlineMaterial()}},{key:"outlineSize",get:function(){return this._outlineSize},set:function(e){var t=0===this._outlineSize!=(0===e);this._outlineSize=e,t?this.recreateGeometry():this._updateOutlineMaterial()}},{key:"size",get:function(){return this._size},set:function(e){e!==this._size&&(this._size=e,this._updateTransform())}},{key:"outlineRenderOccluded",get:function(){return this._outlineRenderOccluded},set:function(e){this._outlineRenderOccluded=e,this._updateOutlineMaterial()}},{key:"geometry",set:function(e){var t=e.previous,n=e.center,r=e.next;this._maxSize=Math.min(Object(u.n)(n,t),Object(u.n)(n,r))/3,Object(u.q)(this._up,Object(u.i)(this._up,t,n)),Object(u.q)(this._right,Object(u.i)(this._right,r,n)),Object(u.j)(this._position,n),this.recreateGeometry()}},{key:"createExternalResources",value:function(){var e=this;this._quadMaterial=new D.a(this.quadMaterialParameters),this._outlineMaterial=new _.a(this.outlineMaterialParameters),this._handles.add(this.view.state.watch("camera",(function(){return e._updateTransform()})))}},{key:"destroyExternalResources",value:function(){this._quadMaterial=null,this._outlineMaterial=null,this._handles.removeAll()}},{key:"forEachExternalMaterial",value:function(e){e(this._quadMaterial),e(this._outlineMaterial)}},{key:"createGeometries",value:function(e){this._createQuadGeometry(e),this._createOutlineGeometry(e),this._updateTransform(e)}},{key:"_createQuadGeometry",value:function(e){var t=this._quadGeometryData(this._up,this._right);e.addGeometry(t,this._quadMaterial)}},{key:"_createOutlineGeometry",value:function(e){if(0!==this._outlineSize){var t=Object(u.e)(L.d.get(),this._up,this._right),n=w.a.createPolylineGeometry([this._up,t,this._right]);e.addGeometry(n,this._outlineMaterial)}}},{key:"_updateTransform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.object,t=this.view.state.camera,n=this._size*t.computeScreenPixelSizeAt(this._position),r=Math.min(this._maxSize,n);Object(R.i)(V),Object(R.r)(V,V,this._position),Object(R.q)(V,V,[r,r,r]),Object(b.k)(e)&&(e.transformation=V)}},{key:"_quadGeometryData",value:function(e,t){var n=Object(u.e)(L.d.get(),e,t);return new F.a([["position",{size:3,data:[0,0,0].concat(Object(A.a)(t),Object(A.a)(e),Object(A.a)(n)),exclusive:!0}]],[["position",new Uint16Array([0,1,2,1,2,3])]])}},{key:"quadMaterialParameters",get:function(){return{color:this._color,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:this._renderOccluded}}},{key:"_updateQuadMaterial",value:function(){this._quadMaterial&&this._quadMaterial.setParameterValues(this.quadMaterialParameters)}},{key:"outlineMaterialParameters",get:function(){return{color:this._outlineColor,width:this._outlineSize,renderOccluded:this._outlineRenderOccluded}}},{key:"_updateOutlineMaterial",value:function(){this._outlineMaterial&&this._outlineMaterial.setParameterValues(this.outlineMaterialParameters)}}]),n}(k.a),V=Object(m.b)(),z=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"visualizeIntersectionPoint",value:function(e,t){var n=t.coordinateHelper,r=t.elevationInfo,i=t.view;return Object(s.a)(new M.a({view:i,primitive:"circle",geometry:n.createPoint(e.intersectionPoint),elevationInfo:r,size:20,outlineSize:2,color:[0,0,0,0],outlineColor:c.a.toUnitRGBA(d.a.orange),pixelSnappingEnabled:!1}))}},{key:"visualizePoint",value:function(e,t){var n=t.coordinateHelper,r=t.elevationInfo,i=t.view;return Object(s.a)(new M.a({view:i,primitive:"circle",geometry:n.createPoint(e.point),elevationInfo:r,size:20,outlineSize:2,color:[0,0,0,0],outlineColor:c.a.toUnitRGBA(d.a.orange),pixelSnappingEnabled:!1}))}},{key:"visualizeLine",value:function(e,t){var n=t.coordinateHelper,r=t.elevationInfo,i=t.view;return Object(s.a)(this.createLineSegmentHintFromMap(e.type,e.lineStart,e.lineEnd,n,r,i,e.fadeLeft,e.fadeRight))}},{key:"visualizeParallelSign",value:function(e,t){var n=t.coordinateHelper,r=t.elevationInfo,i=t.view,a=Object(f.a)(e.lineStart,n,r,t.view),o=Object(f.a)(e.lineEnd,n,r,t.view),l=Object(u.h)(o,a,o,.5),p=new x({view:i,attached:!1,offset:d.a.parallelLineHintOffset,length:d.a.parallelLineHintLength,width:d.a.parallelLineHintWidth,color:c.a.toUnitRGBA(d.a.orange),location:l,renderOccluded:16});return p.setDirectionFromPoints(a,l),p.attached=!0,Object(s.a)(p)}},{key:"visualizeRightAngleQuad",value:function(e,t){var n=t.coordinateHelper,r=t.elevationInfo,i=t.view;return Object(s.a)(new N({view:i,attached:!0,color:c.a.toUnitRGBA(d.a.orange),renderOccluded:2,outlineRenderOccluded:16,outlineColor:c.a.toUnitRGBA(d.a.orange),outlineSize:d.a.rightAngleHintOutlineSize,size:d.a.rightAngleHintSize,geometry:{previous:Object(f.a)(e.previousVertex,n,r,i),center:Object(f.a)(e.centerVertex,n,r,i),next:Object(f.a)(e.nextVertex,n,r,i)}}))}},{key:"createLineSegmentHintFromMap",value:function(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],c=Object(l.e)(),u=Object(l.e)();return Object(f.c)(t,n,r,i,a,c,u),this.createLineSegmentHint(e,a,c,u,o,s)}},{key:"createLineSegmentHint",value:function(e,t,n,r){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=new h.a({view:t,extensionType:3,start:n,end:r,color:c.a.toUnitRGBA(d.a.orange),renderOccluded:16});switch(e){case 0:o.width=d.a.lineHintWidthTarget,o.fadedExtensions={start:0,end:d.a.lineHintFadedExtensions};break;case 2:o.width=d.a.lineHintWidthReference,o.fadedExtensions={start:0,end:0};break;case 1:o.width=d.a.lineHintWidthReference,o.fadedExtensions={start:i?d.a.lineHintFadedExtensions:0,end:a?d.a.lineHintFadedExtensions:0}}return o.attached=!0,o}}]),n}(p.a)},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linkColor=void 0;t.linkColor=function(e,t){return"\n    color: ".concat(e,";\n    &:hover {\n      color: ").concat(t,";\n    }\n  ")}},function(e,t,n){"use strict";var r=n(869);e.exports=Function.prototype.bind||r},function(e,t,n){"use strict";var r=n(569),i=n(679),a=i("%Function.prototype.apply%"),o=i("%Function.prototype.call%"),s=i("%Reflect.apply%",!0)||r.call(o,a),c=i("%Object.getOwnPropertyDescriptor%",!0),l=i("%Object.defineProperty%",!0),u=i("%Math.max%");if(l)try{l({},"a",{value:1})}catch(f){l=null}e.exports=function(e){var t=s(r,o,arguments);if(c&&l){var n=c(t,"length");n.configurable&&l(t,"length",{value:1+u(0,e.length-(arguments.length-1))})}return t};var d=function(){return s(r,a,arguments)};l?l(e.exports,"apply",{value:d}):e.exports.apply=d},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return c}));var r=n(35),i={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,5,10]};function a(e){var t;return null!=(t=i[e.toLowerCase()])?t:null}function o(e){var t=a(e);return t?Object(r.a)(t):t}function s(e,t,n){n<0&&++n,n>1&&--n;var r=6*n;return r<1?e+(t-e)*r:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function c(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=(e%360+360)%360/360,a=n<=.5?n*(t+1):n+t-n*t,o=2*n-a;return[Math.round(256*s(o,a,i+1/3)),Math.round(256*s(o,a,i)),Math.round(256*s(o,a,i-1/3)),r]}function l(e){var t=e.length>5,n=t?8:4,r=(1<<n)-1,i=t?1:17,a=t?9===e.length:5===e.length,o=Number("0x"+e.substr(1));if(isNaN(o))return null;var s,c=[0,0,0,1];return a&&(s=o&r,o>>=n,c[3]=i*s/255),s=o&r,o>>=n,c[2]=i*s,s=o&r,o>>=n,c[1]=i*s,s=o&r,o>>=n,c[0]=i*s,c}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(322),i=/\[([^\[\]]+)\]/gi;function a(e,t,n){var a=this;return e?e.map((function(e){var o=new r.a;if(o.read(e,n),o.labelExpression){var s=t.fields||t.layerDefinition&&t.layerDefinition.fields||a.fields;o.labelExpression=o.labelExpression.replace(i,(function(e,t){return"[".concat(function(e,t){if(!t)return e;for(var n=e.toLowerCase(),r=0;r<t.length;r++){var i=t[r].name;if(i.toLowerCase()===n)return i}return e}(t,s),"]")}))}return o})):null}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return f}));var r=n(2),i=n(39),a={main:new i.a([255,127,0]),selected:new i.a([255,255,255]),outline:new i.a([0,0,0,.5]),selectedOutline:new i.a([255,255,255]),hoverOutline:new i.a([255,255,255]),secondary:new i.a([255,255,255]),secondaryOutline:new i.a([100,100,100]),transparent:new i.a([0,0,0,0])};function o(e,t){if(t)for(var n in t)e[n]=t[n]}var s=function e(t){Object(r.a)(this,e),this.size=8,this.hoverSize=10,this.color=a.main,this.hoverColor=a.main,this.outlineColor=a.outline,this.hoverOutlineColor=a.hoverOutline,o(this,t)},c=function e(t){Object(r.a)(this,e),this.color=a.secondary,this.hoverColor=a.main,o(this,t)},l=function e(t){Object(r.a)(this,e),this.color=a.transparent,this.hoverColor=a.transparent,this.outlineColor=a.main,this.hoverOutlineColor=a.main,this.stagedColor=a.transparent,this.stagedOutlineColor=a.secondary,o(this,t)},u=function e(t){Object(r.a)(this,e),this.vertex=new s,this.midpoint=new s({color:a.secondary,outlineColor:a.secondaryOutline,size:6}),this.selected=new s({color:a.selected,hoverColor:a.selected,hoverOutlineColor:a.hoverOutline}),o(this,t)},d=function e(t){Object(r.a)(this,e),this.center=new s({color:a.secondaryOutline}),this.fill=new l,this.line=new c,this.vertex=new s({color:a.selected,outlineColor:a.main,hoverColor:a.selected,hoverOutlineColor:a.secondaryOutline}),o(this,t)},f=new function e(t){Object(r.a)(this,e),this.reshapeGraphics=new u,this.transformGraphics=new d,o(this,t)}},function(e,t,n){"use strict";function r(e,t){if(t&&e&&e.map){var n=e.map;n.layers.find((function(e){return e===t}))||n.add(t)}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CardContext=t.default=void 0;var r,i=(r=n(96))&&r.__esModule?r:{default:r},a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(21)),o=n(176),s=n(487);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=(0,a.createContext)({cardContext:{shaped:void 0,wide:void 0}});t.CardContext=u,u.displayName="CardContext";var d=(0,a.forwardRef)((function(e,t){var n=e.children,r=e.shaped,i=e.wide,d=l(e,["children","shaped","wide"]),f=(0,o.useContextState)({shaped:r,wide:i});return a.default.createElement(u.Provider,{value:f},a.default.createElement(s.StyledCard,c({shaped:r,wide:i,ref:t},d),n))}));t.default=d,d.propTypes={children:i.default.node,bar:i.default.string,shaped:i.default.bool,wide:i.default.bool},d.defaultProps={},d.displayName="Card"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var r,i=(r=n(846))&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(96)),i=o(n(21)),a=n(390);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=function(e){e.children;var t=e.src,n=e.alt,r=e.imageStyle,o=s(e,["children","src","alt","imageStyle"]);return i.default.createElement(a.StyledTopNavBrandLink,o,i.default.createElement(a.StyledTopNavBrandImg,{src:t,alt:n,style:r}))};c.propTypes={src:r.default.node,alt:r.default.node,imageStyle:r.default.object},c.defaultProps={alt:"Logo"},c.displayName="TopNavBrand";var l=c;t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(96)),i=o(n(21)),a=n(390);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=function(e){var t=e.children,n=s(e,["children"]);return i.default.createElement(a.StyledTopNavTitle,n,t)};c.propTypes={children:r.default.node,href:r.default.string},c.defaultProps={},c.displayName="TopNavTitle";var l=c;t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(96)),i=o(n(21)),a=n(390);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=function(e){var t=e.children,n=s(e,["children"]);return i.default.createElement(a.StyledTopNavList,n,t)};c.propTypes={children:r.default.node},c.defaultProps={},c.displayName="TopNavList";var l=c;t.default=l},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t,n){"use strict";function r(e){return"string"!==typeof e||"/"===(e=e.trim())[e.length-1]&&(e=e.slice(0,-1)),e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(8),d=(n(12),n(19),n(20),n(36)),f=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).x=0,e.y=0,e}return Object(a.a)(n,[{key:"clone",value:function(){return new r({x:this.x,y:this.y})}}]),n}(d.a);Object(c.a)([Object(l.b)({type:Number})],f.prototype,"x",void 0),Object(c.a)([Object(l.b)({type:Number})],f.prototype,"y",void 0);var p=f=r=Object(c.a)([Object(u.a)("esri.symbols.support.Symbol3DAnchorPosition2D")],f);t.b=p},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return d}));var r=n(10),i=n(14),a=n(12),o=n(115),s=n(62),c=n(557),l=n(416);function u(e){var t=e.toJSON();return t.attachmentTypes&&(t.attachmentTypes=t.attachmentTypes.join(",")),t.keywords&&(t.keywords=t.keywords.join(",")),t.globalIds&&(t.globalIds=t.globalIds.join(",")),t.objectIds&&(t.objectIds=t.objectIds.join(",")),t.size&&(t.size=t.size.join(",")),t}function d(e,t){var n,r={},s=Object(i.a)(e);try{for(s.s();!(n=s.n()).done;){var l,u=n.value,d=u.parentObjectId,f=u.parentGlobalId,p=u.attachmentInfos,h=Object(i.a)(p);try{for(h.s();!(l=h.n()).done;){var b=l.value,v=b.id,y=Object(a.b)(Object(o.a)("".concat(t,"/").concat(d,"/attachments/").concat(v))),m=c.a.fromJSON(b);m.set({url:y,parentObjectId:d,parentGlobalId:f}),r[d]?r[d].push(m):r[d]=[m]}}catch(g){h.e(g)}finally{h.f()}}}catch(g){s.e(g)}finally{s.f()}return r}function f(e,t,n){var i={query:Object(l.a)(Object(r.a)(Object(r.a)({},e.query),{},{f:"json"},u(t)))};return n&&(i=Object(r.a)(Object(r.a)(Object(r.a)({},n),i),{},{query:Object(r.a)(Object(r.a)({},n.query),i.query)})),Object(s.default)(e.path+"/queryAttachments",i)}},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(22)),u=(n(13),n(17),n(1)),d=n(8),f=(n(12),n(19),n(20),n(417)),p=n(446),h=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).colorRamps=null,r.type="multipart",r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({colorRamps:Object(l.a)(this.colorRamps)})}}]),n}(f.a);Object(c.a)([Object(u.b)({type:[p.a],json:{write:!0}})],h.prototype,"colorRamps",void 0),Object(c.a)([Object(u.b)({type:["multipart"]})],h.prototype,"type",void 0);var b=h=r=Object(c.a)([Object(d.a)("esri.tasks.support.MultipartColorRamp")],h);t.a=b},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(2),i=n(3),a=function(){function e(){Object(r.a)(this,e),this._names=new Map}return Object(i.a)(e,[{key:"begin",value:function(e){this._names.has(e)||(this._names.set(e,!1),-1!==e.indexOf("Brush")&&this.record("Esri.FirstDraw"),performance.mark("Esri.".concat(e,".Start")))}},{key:"end",value:function(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark("Esri.".concat(e,".End")))}},{key:"record",value:function(e){this._names.has(e)||(this._names.set(e,!0),performance.mark("Esri.".concat(e)))}}]),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"getPatternDescriptor",(function(){return E})),n.d(t,"getSymbolLayerFill",(function(){return T})),n.d(t,"previewSymbol3D",(function(){return F}));var r=n(7),i=n.n(r),a=n(10),o=n(15),s=(n(16),n(4)),c=n(13),l=n(18),u=n(24),d=n(38),f=n(536),p=n(84),h=n(537),b=n(199),v=n(451),y=n(310),m=n(172),g=n(162),O=n(462),j=22,w=120,_=c.a.getLogger("esri.symbols.support.previewSymbol3D");function k(e){var t=e.outline,n=Object(s.k)(e.material)?e.material.color:null,r=Object(s.k)(n)?n.toHex():null;if(Object(s.j)(t))return"fill"===e.type&&"#ffffff"===r?{color:"#bdc3c7",width:.75}:null;var i=Object(d.g)(t.size)||0;return{color:"rgba("+(Object(s.k)(t.color)?t.color.toRgba():"255,255,255,1")+")",width:Math.min(i,80)}}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.a,r=Object(b.b)(e),i=r.h,a=r.s/t,o=100-(100-r.v)/t,s=Object(b.e)({h:i,s:a,v:o}),c=s.r,l=s.g,u=s.b;return[c,l,u,n]}function S(e){return"water"===e.type?Object(s.j)(e.color)?null:e.color:Object(s.j)(e.material)||Object(s.j)(e.material.color)?null:e.material.color}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=S(e);if(!n){if("fill"===e.type)return null;var r=y.a.r,i=Object(g.b)(r,t);return[i,i,i,100]}for(var a=n.toRgba(),o=0;o<3;o++)a[o]=Object(g.b)(a[o],t);return a}function E(e,t){return C.apply(this,arguments)}function C(){return(C=Object(o.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("none"!==(r=t.style)){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,Object(y.c)(Object(p.a)("esri/symbols/patterns/".concat(r,".png")),n.toCss(!0));case 5:return e.t0=e.sent,e.abrupt("return",{type:"pattern",x:0,y:0,src:e.t0,width:5,height:5});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return e.outline?k(e):{color:"rgba(0, 0, 0, 1)",width:1.5}}function I(e,t){var n=S(e);if(!n)return null;var r="rgba(";return r+=Object(g.b)(n.r,t)+",",r+=Object(g.b)(n.g,t)+",",(r+=Object(g.b)(n.b,t)+",")+n.a+");"}function M(e,t){var n=I(e,t);return n?{color:n,width:Math.min(e.size?Object(d.g)(e.size):.75,80)}:{}}function A(e,t,n){var r=.75*n;return{type:"linear",x1:r?.25*r:0,y1:r?.5*r:0,x2:r||4,y2:r?.5*r:4,colors:[{color:e,offset:0},{color:t,offset:1}]}}function R(e,t){var n,r=t&&t.size?Object(d.g)(t.size):null,i=t&&t.maxSize?Object(d.g)(t.maxSize):null,a=t&&t.disableUpsampling,o=e.symbolLayers,s=[],c=0,l=0,b=o.getItemAt(o.length-1);return b&&"icon"===b.type&&(n=b.size&&Object(d.g)(b.size)),o.forEach((function(o){if("icon"===o.type||"object"===o.type){var u="icon"===o.type?o.size&&Object(d.g)(o.size):0,b=r||u?Math.ceil(Math.min(r||u,i||w)):j;if(o&&o.resource&&o.resource.href){var y=function(e,t){var n=t&&t.resource,r=n&&n.href;if(e.thumbnail&&e.thumbnail.url)return Promise.resolve(e.thumbnail.url);if(r&&"object"!==t.type)return Promise.resolve(Object(m.f)(e,t));var i=Object(p.a)("esri/images/Legend/legend3dsymboldefault.png");return e.styleOrigin&&(e.styleOrigin.styleName||e.styleOrigin.styleUrl)?Object(v.resolveWebStyleSymbol)(e.styleOrigin,{portal:e.styleOrigin.portal},"webRef").catch((function(e){return e})).then((function(e){var t;return(null==e||null==(t=e.thumbnail)?void 0:t.url)||i})):Promise.resolve(i)}(e,o).then((function(e){var t=o.get("material.color"),n=function(e){return"icon"===e.type?"multiply":"tint"}(o);return Object(O.b)(e,b,t,n,a)})).then((function(e){var t=e.width,n=e.height;return c=Math.max(c,t),l=Math.max(l,n),[{shape:{type:"image",x:0,y:0,width:t,height:n,src:e.url},fill:null,stroke:null}]}));s.push(y)}else{var _,x=b;"icon"===o.type&&n&&r&&(x=b*(u/n));var S="tall"===(null==t?void 0:t.symbolConfig)||(null==t||null==(_=t.symbolConfig)?void 0:_.isTall)||"object"===o.type&&function(e){var t=e.depth,n=e.height,r=e.width;return r&&t&&n&&r===t&&r<n}(o);c=Math.max(c,S?20:x),l=Math.max(l,x),s.push(Promise.resolve(function(e,t,n){var r=[];if(!e)return r;switch(e.type){case"icon":var i=t,a=t;switch(e.resource&&e.resource.primitive||f.b){case"circle":r.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:T(e,0),stroke:k(e)});break;case"square":r.push({shape:{type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[0,0]},{command:"L",values:[i,0]},{command:"L",values:[i,a]},{command:"Z",values:[]}]},fill:T(e,0),stroke:k(e)});break;case"triangle":r.push({shape:{type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[.5*i,0]},{command:"L",values:[i,a]},{command:"Z",values:[]}]},fill:T(e,0),stroke:k(e)});break;case"cross":r.push({shape:{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[.5*i,a]},{command:"M",values:[0,.5*a]},{command:"L",values:[i,.5*a]}]},stroke:P(e)});break;case"x":r.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[i,a]},{command:"M",values:[i,0]},{command:"L",values:[0,a]}]},stroke:P(e)});break;case"kite":r.push({shape:{type:"path",path:[{command:"M",values:[0,.5*a]},{command:"L",values:[.5*i,0]},{command:"L",values:[i,.5*a]},{command:"L",values:[.5*i,a]},{command:"Z",values:[]}]},fill:T(e,0),stroke:k(e)})}break;case"object":switch(e.resource&&e.resource.primitive||h.b){case"cone":var o=A(T(e,0),T(e,-.6),n?20:t),s=Object(g.c)(t,n);r.push({shape:s[0],fill:o}),r.push({shape:s[1],fill:o});break;case"inverted-cone":var c=T(e,0),l=A(c,T(e,-.6),t),u=Object(g.h)(t);r.push({shape:u[0],fill:l}),r.push({shape:u[1],fill:c});break;case"cube":var d=Object(g.d)(t,n);r.push({shape:d[0],fill:T(e,0)}),r.push({shape:d[1],fill:T(e,-.3)}),r.push({shape:d[2],fill:T(e,-.5)});break;case"cylinder":var p=A(T(e,0),T(e,-.6),n?20:t),b=Object(g.e)(t,n);r.push({shape:b[0],fill:p}),r.push({shape:b[1],fill:p}),r.push({shape:b[2],fill:T(e,0)});break;case"diamond":var v=Object(g.f)(t);r.push({shape:v[0],fill:T(e,-.3)}),r.push({shape:v[1],fill:T(e,0)}),r.push({shape:v[2],fill:T(e,-.3)}),r.push({shape:v[3],fill:T(e,-.7)});break;case"sphere":var y=A(T(e,0),T(e,-.6));y.x1=0,y.y1=0,y.x2=.25*t,y.y2=.25*t,r.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:y});break;case"tetrahedron":var m=Object(g.j)(t);r.push({shape:m[0],fill:T(e,-.3)}),r.push({shape:m[1],fill:T(e,0)}),r.push({shape:m[2],fill:T(e,-.6)})}}return r}(o,x,S)))}}})),Object(u.j)(s).then((function(e){var n=[];return e.forEach((function(e){e.value?n.push(e.value):e.error&&_.warn("error while building swatchInfo!",e.error)})),Object(O.a)(n,[c,l],{node:t&&t.node,scale:!1,opacity:t&&t.opacity})}))}function L(){return(L=Object(o.a)(i.a.mark((function e(t,n){var r,o,c,l,u,f,p,h,b,v,y,m,_,C,P,I,A,R,L,F,D,N,V,z,U,B,G,q,H,W,$;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r="mesh-3d"===t.type,o=t.symbolLayers,c=n&&n.size?Object(d.g)(n.size):null,l=n&&n.maxSize?Object(d.g)(n.maxSize):null,u=c||j,f=[],p=0,h=0,b=!1,v=0;case 3:if(!(v<o.length)){e.next=39;break}if(y=o.getItemAt(v),m=[],!r||"fill"===y.type){e.next=7;break}return e.abrupt("continue",36);case 7:_=g.l.fill[0],e.t0=y.type,e.next="fill"===e.t0?11:"line"===e.t0?22:"extrude"===e.t0?25:"water"===e.t0?30:35;break;case 11:if(C=k(y),P=Math.min(u,l||w),p=Math.max(p,P),h=Math.max(h,P),b=!0,I=T(y,0),A="pattern"in y&&y.pattern,R=S(y),e.t1=!r&&Object(s.k)(A)&&"style"===A.type&&"solid"!==A.style&&R,!e.t1){e.next=20;break}return e.next=19,E(A,R);case 19:I=e.sent;case 20:return m.push({shape:_,fill:I,stroke:C}),e.abrupt("break",35);case 22:return L={stroke:M(y,0),shape:_},p=Math.max(p,j),h=Math.max(h,j),m.push(L),e.abrupt("break",35);case 25:return F=Object(a.a)({join:"round"},M(y,-.4)),D=T(y,0),N=T(y,-.2),V=Math.min(u,l||w),z=Object(g.g)(V),F.width=1,m.push({shape:z[0],fill:N,stroke:F}),m.push({shape:z[1],fill:N,stroke:F}),m.push({shape:z[2],fill:D,stroke:F}),j,U=.7*j+.5*V,p=Math.max(p,22),h=Math.max(h,U),e.abrupt("break",35);case 30:return B=S(y),G=x(B),q=x(B,2),H=x(B,3),W=Object(g.k)(),b=!0,m.push({shape:W[0],fill:G}),m.push({shape:W[1],fill:q}),m.push({shape:W[2],fill:H}),$=Math.min(u,l||w),p=Math.max(p,$),h=Math.max(h,$),e.abrupt("break",35);case 35:f.push(m);case 36:v++,e.next=3;break;case 39:return e.abrupt("return",Promise.resolve(Object(O.a)(f,[p,h],{node:n&&n.node,scale:b,opacity:n&&n.opacity})));case 40:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t){if(0===e.symbolLayers.length)return Promise.reject(new l.a("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));var n=null;switch(e.type){case"point-3d":n=R(e,t);break;case"line-3d":n=function(e,t){var n,r=e.symbolLayers,i=[],o=Object(m.h)(e),s=t&&t.size?Object(d.g)(t.size):null,c=(t&&t.maxSize?Object(d.g)(t.maxSize):null)||80,l=0,u=0;return r.forEach((function(e,t){if(e&&("line"===e.type||"path"===e.type)){var r=[];switch(e.type){case"line":var o=M(e,0),d=o&&o.width||0;0===t&&(n=d);var f=Math.min(s||d,c),p=0===t?f:s?f*(d/n):f,h=p>20?2*p:40;u=Math.max(u,p),l=Math.max(l,h),o.width=p,r.push({shape:{type:"path",path:[{command:"M",values:[0,.5*u]},{command:"L",values:[l,.5*u]}]},stroke:o});break;case"path":var b=Math.min(s||j,c),v=T(e,0),y=T(e,-.2),m=I(e,-.4),O=m?{color:m,width:1}:{};if("quad"===e.profile){var w,_,k=null!=(w=e.width)?w:e.size,x=null!=(_=e.height)?_:e.size,S=Object(g.i)(k&&x?k/x:1,0===x,0===k),E=Object(a.a)(Object(a.a)({},O),{},{join:"bevel"});r.push({shape:S[0],fill:y,stroke:E}),r.push({shape:S[1],fill:y,stroke:E}),r.push({shape:S[2],fill:v,stroke:E})}else r.push({shape:g.l.pathSymbol3DLayer[0],fill:y,stroke:O}),r.push({shape:g.l.pathSymbol3DLayer[1],fill:v,stroke:O});u=Math.max(u,b),l=u}i.push(r)}})),Promise.resolve(Object(O.a)(i,[l,u],{node:t&&t.node,scale:o,opacity:t&&t.opacity}))}(e,t);break;case"polygon-3d":case"mesh-3d":n=function(e,t){return L.apply(this,arguments)}(e,t)}return n||Promise.reject(new l.a("symbolPreview: swatchInfo3D","symbol not supported."))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(2),i=n(240),a=function e(t){Object(r.a)(this,e),this.channel=t,this.id=Object(i.a)()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));var r=n(2),i=n(3),a=n(4),o=n(38),s=n(163),c=n(186),l=function(){function e(t,n,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(r.a)(this,e),this.elevationInfo=t,this.defaultZ=n,this.view=i,this.excludeGraphics=a}return Object(i.a)(e,[{key:"screenToMap",value:function(e){if(Object(a.k)(this.defaultZ))return this.view.sceneIntersectionHelper.intersectElevationFromScreen(Object(o.f)(e.x,e.y),this.elevationInfo,this.defaultZ,this.excludeGraphics);var t=this.view.sceneIntersectionHelper.intersectElevationFromScreen(Object(o.f)(e.x,e.y),this.elevationInfo,0,this.excludeGraphics);return Object(a.k)(t)&&(t.z=void 0),t}},{key:"mapToScreen",value:function(e){var t=Object(c.d)(e.x,e.y,Object(s.a)(this.view,e,this.elevationInfo),e.spatialReference);return this.view.toScreen(t)}}]),e}(),u=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object(r.a)(this,e),this.view=t,this.elevationInfo=n,this.exclude=i}return Object(i.a)(e,[{key:"screenToMap",value:function(e){var t=this.view.toMap(e,{exclude:this.exclude});return Object(a.k)(t)&&(t.z=Object(s.f)(t,this.view,this.elevationInfo)),t}},{key:"mapToScreen",value:function(e){var t=e;return Object(a.k)(this.elevationInfo)&&(t=Object(c.d)(e.x,e.y,Object(s.a)(this.view,e,this.elevationInfo),e.spatialReference)),this.view.toScreen(t)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(144),i=n(189),a=n(21),o=n.n(a),s=n(234),c=(n(96),n(73)),l=n(160),u=n(214),d=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=Object(s.a)(t.props),t}return Object(i.a)(t,e),t.prototype.render=function(){return o.a.createElement(r.c,{history:this.history,children:this.props.children})},t}(o.a.Component);o.a.Component;var f=function(e,t){return"function"===typeof e?e(t):e},p=function(e,t){return"string"===typeof e?Object(s.c)(e,null,null,t):e},h=function(e){return e},b=o.a.forwardRef;"undefined"===typeof b&&(b=h);var v=b((function(e,t){var n=e.innerRef,r=e.navigate,i=e.onClick,a=Object(l.a)(e,["innerRef","navigate","onClick"]),s=a.target,u=Object(c.a)({},a,{onClick:function(e){try{i&&i(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||s&&"_self"!==s||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return u.ref=h!==b&&t||n,o.a.createElement("a",u)}));var y=b((function(e,t){var n=e.component,i=void 0===n?v:n,a=e.replace,s=e.to,d=e.innerRef,y=Object(l.a)(e,["component","replace","to","innerRef"]);return o.a.createElement(r.d.Consumer,null,(function(e){e||Object(u.a)(!1);var n=e.history,r=p(f(s,e.location),e.location),l=r?n.createHref(r):"",v=Object(c.a)({},y,{href:l,navigate:function(){var t=f(s,e.location);(a?n.replace:n.push)(t)}});return h!==b?v.ref=t||d:v.innerRef=d,o.a.createElement(i,v)}))})),m=function(e){return e},g=o.a.forwardRef;"undefined"===typeof g&&(g=m);g((function(e,t){var n=e["aria-current"],i=void 0===n?"page":n,a=e.activeClassName,s=void 0===a?"active":a,d=e.activeStyle,h=e.className,b=e.exact,v=e.isActive,O=e.location,j=e.sensitive,w=e.strict,_=e.style,k=e.to,x=e.innerRef,S=Object(l.a)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return o.a.createElement(r.d.Consumer,null,(function(e){e||Object(u.a)(!1);var n=O||e.location,a=p(f(k,n),n),l=a.pathname,T=l&&l.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),E=T?Object(r.e)(n.pathname,{path:T,exact:b,sensitive:j,strict:w}):null,C=!!(v?v(E,n):E),P=C?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(h,s):h,I=C?Object(c.a)({},_,{},d):_,M=Object(c.a)({"aria-current":C&&i||null,className:P,style:I,to:a},S);return m!==g?M.ref=t||x:M.innerRef=x,o.a.createElement(y,M)}))}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return Ne}));var r=n(2),i=n(3),a=n(4),o=n(45),s=n(27),c=n(11),l=n(141),u=n(97),d=n(89),f=n(175),p=n(55),h=n(296),b=n(10),v=n(5),y=n(6),m=n(38),g=n(88),O=n(114),j=n(298),w=n(119),_=n(60),k=n(158),x=n(33),S=n(274),T=n(86),E=n(241),C=n(242),P=n(374);function I(e){return(t=e)instanceof Float32Array&&t.length>=16||function(e){return Array.isArray(e)&&e.length>=16}(e);var t}var M=n(653),A=n(208),R=n(301),L=n(327),F=n(395),D=n(0),N=n(268),V=n(270),z=n(69),U=n(269),B=n(261),G=n(117),q=n(238),H=n(217),W=n(328),$=n(450),J=n(550),Y=n(510),K=n(267),Z=n(380),X=n(612),Q=n(168),ee=function(e){Object(v.a)(n,e);var t=Object(y.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"initializeProgram",value:function(e){var t=n.shader.get(),r=this.configuration,i=t.build({output:r.output,FrontFacePass:2===r.transparencyPassType,viewingMode:e.viewingMode,occlusionTestEnabled:r.occlusionTestEnabled,signedDistanceFieldEnabled:r.sdf,slicePlaneEnabled:r.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!0,debugDrawBorder:r.debugDrawBorder,binaryHighlightOcclusionEnabled:r.binaryHighlightOcclusion,screenCenterOffsetUnitsEnabled:r.screenCenterOffsetUnitsEnabled,screenSizePerspectiveEnabled:r.screenSizePerspective,verticalOffsetEnabled:r.verticalOffset,pixelSnappingEnabled:r.pixelSnappingEnabled,vvSize:r.vvSize,vvColor:r.vvColor,vvInstancingEnabled:!1,isDraped:r.isDraped,multipassGeometryEnabled:r.multipassGeometryEnabled});return new B.a(e.rctx,i.generateSource("vertex"),i.generateSource("fragment"),U.a)}},{key:"bindPass",value:function(e,t,n){q.a.bindProjectionMatrix(this.program,n.camera.projectionMatrix),this.program.setUniform1f("cameraGroundRelative",n.camera.aboveGround?1:-1),this.program.setUniform1f("perDistancePixelRatio",Math.tan(n.camera.fovY/2)/(n.camera.fullViewport[2]/2)),this.program.setUniformMatrix4fv("viewNormal",n.camera.viewInverseTransposeMatrix),this.program.setUniform1f("polygonOffset",t.shaderPolygonOffset),X.a.bindUniforms(this.program,t,n),W.a.bindUniforms(this.program,t),this.program.setUniform1f("pixelRatio",n.camera.pixelRatio||1),q.a.bindViewport(this.program,n),6===this.configuration.output?(Y.a.bindUniforms(this.program),this.program.setUniform2fv("cameraNearFar",n.camera.nearFar),this.program.setUniform2fv("inverseViewport",n.inverseViewport),Object(J.a)(this.program,e,n)):($.a.bindUniforms(this.program,n),F.a.bindUniforms(this.program,t,n.camera.pixelRatio||1),Z.a.bindUniforms(this.program,t),this.configuration.occlusionTestEnabled&&$.a.bindVisibilityTexture(e,this.program,n)),4===this.configuration.output&&K.a.bindOutputHighlight(e,this.program,n)}},{key:"bindDraw",value:function(e){q.a.bindView(this.program,e),q.a.bindCamPosition(this.program,e.origin,e.camera.viewInverseTransposeMatrix),H.a.bindUniformsWithOrigin(this.program,this.configuration,e)}},{key:"setPipelineState",value:function(e){var t=this.configuration,n=3===e,r=2===e,i=this.configuration.polygonOffsetEnabled&&te,a=(n||r)&&4!==t.output?(t.depthEnabled||6===t.output)&&G.c:null;return Object(G.d)({blending:0===t.output||7===t.output||4===t.output?n?ne:Object(Q.a)(e):null,depthTest:{func:515},depthWrite:a,colorWrite:G.b,polygonOffset:i})}},{key:"initializePipeline",value:function(){return this.setPipelineState(this.configuration.transparencyPassType)}},{key:"primitiveType",get:function(){return 6===this.configuration.output?0:4}}]),n}(V.a);ee.shader=new N.a(F.b,(function(){return n.e(225).then(n.bind(null,1403))}));var te={factor:0,units:-4},ne=Object(G.f)(1,771),re=function(e){Object(v.a)(n,e);var t=Object(y.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).output=0,e.occlusionTestEnabled=!0,e.sdf=!1,e.vvSize=!1,e.vvColor=!1,e.verticalOffset=!1,e.screenSizePerspective=!1,e.screenCenterOffsetUnitsEnabled=0,e.debugDrawBorder=!0,e.binaryHighlightOcclusion=!0,e.slicePlaneEnabled=!1,e.polygonOffsetEnabled=!1,e.depthEnabled=!0,e.transparencyPassType=3,e.pixelSnappingEnabled=!0,e.isDraped=!1,e.multipassGeometryEnabled=!1,e}return n}(z.a);Object(D.a)([Object(z.b)({count:8})],re.prototype,"output",void 0),Object(D.a)([Object(z.b)()],re.prototype,"occlusionTestEnabled",void 0),Object(D.a)([Object(z.b)()],re.prototype,"sdf",void 0),Object(D.a)([Object(z.b)()],re.prototype,"vvSize",void 0),Object(D.a)([Object(z.b)()],re.prototype,"vvColor",void 0),Object(D.a)([Object(z.b)()],re.prototype,"verticalOffset",void 0),Object(D.a)([Object(z.b)()],re.prototype,"screenSizePerspective",void 0),Object(D.a)([Object(z.b)({count:2})],re.prototype,"screenCenterOffsetUnitsEnabled",void 0),Object(D.a)([Object(z.b)()],re.prototype,"debugDrawBorder",void 0),Object(D.a)([Object(z.b)()],re.prototype,"binaryHighlightOcclusion",void 0),Object(D.a)([Object(z.b)()],re.prototype,"slicePlaneEnabled",void 0),Object(D.a)([Object(z.b)()],re.prototype,"polygonOffsetEnabled",void 0),Object(D.a)([Object(z.b)()],re.prototype,"depthEnabled",void 0),Object(D.a)([Object(z.b)({count:4})],re.prototype,"transparencyPassType",void 0),Object(D.a)([Object(z.b)()],re.prototype,"pixelSnappingEnabled",void 0),Object(D.a)([Object(z.b)()],re.prototype,"isDraped",void 0),Object(D.a)([Object(z.b)()],re.prototype,"multipassGeometryEnabled",void 0);var ie=function(e){Object(v.a)(n,e);var t=Object(y.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e,Te)).techniqueConfig=new re,i}return Object(i.a)(n,[{key:"getTechniqueConfig",value:function(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled,this.techniqueConfig.verticalOffset=!!this.params.verticalOffset,this.techniqueConfig.screenSizePerspective=!!this.params.screenSizePerspective,this.techniqueConfig.screenCenterOffsetUnitsEnabled="screen"===this.params.centerOffsetUnits?1:0,this.techniqueConfig.polygonOffsetEnabled=this.params.polygonOffset,this.techniqueConfig.isDraped=this.params.isDraped,this.techniqueConfig.occlusionTestEnabled=this.params.occlusionTest,this.techniqueConfig.pixelSnappingEnabled=this.params.pixelSnappingEnabled,this.techniqueConfig.sdf=this.params.textureIsSignedDistanceField,this.techniqueConfig.vvSize=!!this.params.vvSizeEnabled,this.techniqueConfig.vvColor=!!this.params.vvColorEnabled,0===e&&(this.techniqueConfig.debugDrawBorder=!!this.params.debugDrawBorder),4===e&&(this.techniqueConfig.binaryHighlightOcclusion=this.params.binaryHighlightOcclusion),this.techniqueConfig.depthEnabled=this.params.depthEnabled,this.techniqueConfig.transparencyPassType=t?t.transparencyPassType:3,this.techniqueConfig.multipassGeometryEnabled=!!t&&t.multipassGeometryEnabled,this.techniqueConfig}},{key:"intersect",value:function(e,t,n,r,i,a,o,s,c){c?this.intersectDrapedHudGeometry(e,a,o,s):this.intersectHudGeometry(e,t,n,r,o,s)}},{key:"intersectDrapedHudGeometry",value:function(e,t,n,r){var i=e.vertexAttributes.get("position"),o=e.vertexAttributes.get("size"),s=this.params,c=Object(F.d)(s),l=1,u=1;if(Object(a.k)(r)){var d=r(we);l=d[0],u=d[5]}l*=e.screenToWorldRatio,u*=e.screenToWorldRatio;for(var f=ke*e.screenToWorldRatio,p=0;p<i.data.length/i.size;p++){var h=p*i.size,b=i.data[h],v=i.data[h+1],y=p*o.size,m=void 0;xe[0]=o.data[y]*l,xe[1]=o.data[y+1]*u,s.textureIsSignedDistanceField&&(m=s.outlineSize*e.screenToWorldRatio/2),le(t,b,v,xe,f,m,s,c)&&n()}}},{key:"intersectHudGeometry",value:function(e,t,n,r,i,o){if(r.options.selectionMode&&r.options.hud&&!Object(C.d)(t)){var l=this.params,u=1,d=1;if(Object(k.d)(ye,n),Object(a.k)(o)){var f=o(we);u=f[0],d=f[5],function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],c=e[7],l=e[8],u=1/Math.sqrt(t*t+n*n+r*r),d=1/Math.sqrt(i*i+a*a+o*o),f=1/Math.sqrt(s*s+c*c+l*l);e[0]=t*u,e[1]=n*u,e[2]=r*u,e[3]=i*d,e[4]=a*d,e[5]=o*d,e[6]=s*f,e[7]=c*f,e[8]=l*f}(ye)}var p=e.vertexAttributes.get("position"),h=e.vertexAttributes.get("size"),b=e.vertexAttributes.get("normal"),v=e.vertexAttributes.get("auxpos1");Object(T.a)(p.size>=3);var y=r.point,m=r.camera,O=Object(F.d)(l);u*=m.pixelRatio,d*=m.pixelRatio;for(var j="screen"===this.params.centerOffsetUnits,w=0;w<p.data.length/p.size;w++){var _=w*p.size;Object(c.v)(fe,p.data[_],p.data[_+1],p.data[_+2]),Object(c.l)(fe,fe,n);var x=w*h.size;xe[0]=h.data[x]*u,xe[1]=h.data[x+1]*d,Object(c.l)(fe,fe,m.viewMatrix);var S=w*v.size;if(Object(c.v)(Oe,v.data[S+0],v.data[S+1],v.data[S+2]),!j&&(fe[0]+=Oe[0],fe[1]+=Oe[1],0!==Oe[2])){var E=Oe[2];Object(c.q)(Oe,fe),Object(c.i)(fe,fe,Object(c.d)(Oe,Oe,E))}var I=w*b.size;if(Object(c.v)(pe,b.data[I],b.data[I+1],b.data[I+2]),this.normalAndViewAngle(pe,ye,m,je),this.applyVerticalOffsetTransformationView(fe,je,m,ue),m.applyProjection(fe,he),he[0]>-1){var M=Math.floor(he[0])+this.params.screenOffset[0],A=Math.floor(he[1])+this.params.screenOffset[1];j&&(M+=Oe[0],0!==Oe[1]&&(A+=Object(P.b)(Oe[1],ue.factorAlignment))),Object(P.a)(xe,ue.factor,xe);var R=_e*m.pixelRatio,L=void 0;if(l.textureIsSignedDistanceField&&(L=l.outlineSize*m.pixelRatio/2),le(y,M,A,xe,R,L,l,O)){var D=r.ray;if(Object(c.l)(ve,fe,Object(g.a)(ge,m.viewMatrix)),he[0]=y[0],he[1]=y[1],m.unprojectFromRenderScreen(he,fe)){var N=Object(s.e)();Object(c.j)(N,D.direction);var V=1/Object(c.o)(N);Object(c.d)(N,N,V),i(Object(c.n)(D.origin,fe)*V,N,-1,1,!0,ve)}}}}}}},{key:"computeAttachmentOrigin",value:function(e,t){var n=e.vertexAttributes;if(!n)return!1;var r=n.get("position"),i=e.indices.get("position");return Object(E.b)(r,i,t)}},{key:"createBufferWriter",value:function(){return new Ce(this)}},{key:"normalAndViewAngle",value:function(e,t,n,r){return I(t)&&(t=Object(k.d)(me,t)),Object(c.w)(r.normal,e,t),Object(c.l)(r.normal,r.normal,n.viewInverseTransposeMatrix),r.cosAngle=Object(c.g)(be,Se),r}},{key:"updateScaleInfo",value:function(e,t,n){var r=this.params;r.screenSizePerspective?Object(P.c)(n,t,r.screenSizePerspective,e.factor):(e.factor.scale=1,e.factor.factor=0,e.factor.minPixelSize=0,e.factor.paddingPixels=0),r.screenSizePerspectiveAlignment?Object(P.c)(n,t,r.screenSizePerspectiveAlignment,e.factorAlignment):(e.factorAlignment.factor=e.factor.factor,e.factorAlignment.scale=e.factor.scale,e.factorAlignment.minPixelSize=e.factor.minPixelSize,e.factorAlignment.paddingPixels=e.factor.paddingPixels)}},{key:"applyShaderOffsetsView",value:function(e,t,n,r,i,a,o){var s=this.normalAndViewAngle(t,n,i,je);return this.applyVerticalGroundOffsetView(e,s,i,o),this.applyVerticalOffsetTransformationView(o,s,i,a),this.applyPolygonOffsetView(o,s,r[3],i,o),this.applyCenterOffsetView(o,r,o),o}},{key:"applyShaderOffsetsNDC",value:function(e,t,n,r,i){return this.applyCenterOffsetNDC(e,t,n,r),Object(a.k)(i)&&Object(c.j)(i,r),this.applyPolygonOffsetNDC(r,t,n,r),r}},{key:"applyPolygonOffsetView",value:function(e,t,n,r,i){var a=r.aboveGround?1:-1,s=Object(o.q)(n);0===s&&(s=a);var l=a*s;if(this.params.shaderPolygonOffset<=0)return Object(c.j)(i,e);var u=Object(o.d)(Math.abs(t.cosAngle),.01,1),d=1-Math.sqrt(1-u*u)/u/r.viewport[2];return Object(c.d)(i,e,l>0?d:1/d),i}},{key:"applyVerticalGroundOffsetView",value:function(e,t,n,r){var i=Object(c.o)(e),a=n.aboveGround?1:-1,o=.5*n.computeRenderPixelSizeAtDist(i),s=Object(c.d)(fe,t.normal,a*o);return Object(c.e)(r,e,s),r}},{key:"applyVerticalOffsetTransformationView",value:function(e,t,n,r){var i=this.params;if(!i.verticalOffset||!i.verticalOffset.screenLength){if(i.screenSizePerspective||i.screenSizePerspectiveAlignment){var a=Object(c.o)(e);this.updateScaleInfo(r,a,t.cosAngle)}else r.factor.scale=1,r.factorAlignment.scale=1;return e}var o=Object(c.o)(e),s=i.screenSizePerspectiveAlignment||i.screenSizePerspective,l=Object(A.g)(n,o,i.verticalOffset,t.cosAngle,s);return this.updateScaleInfo(r,o,t.cosAngle),Object(c.d)(t.normal,t.normal,l),Object(c.e)(e,e,t.normal)}},{key:"applyCenterOffsetView",value:function(e,t,n){var r="screen"!==this.params.centerOffsetUnits;return n!==e&&Object(c.j)(n,e),r&&(n[0]+=t[0],n[1]+=t[1],t[2]&&(Object(c.q)(pe,n),Object(c.e)(n,n,Object(c.d)(pe,pe,t[2])))),n}},{key:"applyCenterOffsetNDC",value:function(e,t,n,r){var i="screen"!==this.params.centerOffsetUnits;return r!==e&&Object(c.j)(r,e),i||(r[0]+=t[0]/n.fullWidth*2,r[1]+=t[1]/n.fullHeight*2),r}},{key:"applyPolygonOffsetNDC",value:function(e,t,n,r){var i=this.params.shaderPolygonOffset;if(e!==r&&Object(c.j)(r,e),i){var a=n.aboveGround?1:-1,s=a*Object(o.q)(t[3]);r[2]-=(s||a)*i}return r}},{key:"getGLMaterial",value:function(e){return 0===e.output||7===e.output?new oe(e):4===e.output?new se(e):void 0}},{key:"calculateRelativeScreenBounds",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object(O.i)();return ce(this.params,e,t,n),n[2]=n[0]+e[0],n[3]=n[1]+e[1],n}}]),n}(R.a),ae=function(e){Object(v.a)(n,e);var t=Object(y.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,Object(b.a)(Object(b.a)({},e),e.material.params))).updateParameters(),i}return Object(i.a)(n,[{key:"beginSlot",value:function(e){return e===(this.material.params.drawInSecondSlot?19:18)}},{key:"updateParameters",value:function(e){this.updateTexture(this.material.params.textureId),this.selectProgram(e)}},{key:"selectProgram",value:function(e){this.technique=this.techniqueRep.acquireAndReleaseExisting(ee,this.material.getTechniqueConfig(this.output,e),this.technique)}},{key:"ensureParameters",value:function(e){this.updateParameters(e)}},{key:"bind",value:function(e,t){e.bindProgram(this.technique.program),this.bindTexture(e,this.technique.program),this.bindTextureScale(e,this.technique.program),this.technique.bindPass(e,this.material.params,t)}}]),n}(M.a),oe=function(e){Object(v.a)(n,e);var t=Object(y.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).isOcclusionSlot=!1,i}return Object(i.a)(n,[{key:"beginSlot",value:function(e){var t=this.material.params.drawInSecondSlot?19:18;return this.material.params.occlusionTest?(this.isOcclusionSlot=12===e,12===e||e===t):(this.isOcclusionSlot=!1,e===t)}},{key:"getTechnique",value:function(){return this.isOcclusionSlot?this.occlusionTechnique:this.technique}},{key:"selectProgram",value:function(e){this.technique=this.techniqueRep.acquireAndReleaseExisting(ee,this.material.getTechniqueConfig(this.output,e),this.technique),this.occlusionTechnique=this.techniqueRep.acquireAndReleaseExisting(ee,this.material.getTechniqueConfig(6,e),this.occlusionTechnique)}},{key:"bind",value:function(e,t){var n=this.getTechnique();e.bindProgram(n.program),this.isOcclusionSlot||(this.bindTexture(e,n.program),this.bindTextureScale(e,n.program)),n.bindPass(e,this.material.params,t)}}]),n}(ae),se=function(e){Object(v.a)(n,e);var t=Object(y.a)(n);function n(e){return Object(r.a)(this,n),t.call(this,Object(b.a)(Object(b.a)({},e),{},{output:4}))}return n}(ae);function ce(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:de;return Object(x.c)(r,e.anchorPos),r[0]*=-t[0],r[1]*=-t[1],r[0]+=e.screenOffset[0]*n,r[1]+=e.screenOffset[1]*n,r}function le(e,t,n,r,i,a,o,s){var c=t-i-(s[0]>0?r[0]*s[0]:0),l=c+r[0]+2*i,u=n-i-(s[1]>0?r[1]*s[1]:0),d=u+r[1]+2*i;if(o.textureIsSignedDistanceField){var f=o.distanceFieldBoundingBox;c+=r[0]*f[0],u+=r[1]*f[1],l-=r[0]*(1-f[2]),d-=r[1]*(1-f[3]),c-=a,l+=a,u-=a,d+=a}return e[0]>c&&e[0]<l&&e[1]>u&&e[1]<d}var ue={factor:{scale:0,factor:0,minPixelSize:0,paddingPixels:0},factorAlignment:{scale:0,factor:0,minPixelSize:0,paddingPixels:0}},de=Object(_.a)(),fe=Object(s.e)(),pe=Object(s.e)(),he=Object(m.d)(),be=Object(s.e)(),ve=Object(s.e)(),ye=Object(j.a)(),me=Object(j.a)(),ge=Object(w.b)(),Oe=Object(s.e)(),je={normal:be,cosAngle:0},we=Object(w.b)(),_e=1,ke=2,xe=[0,0],Se=Object(s.g)(0,0,1),Te=Object(b.a)({texCoordScale:[1,1],occlusionTest:!0,binaryHighlightOcclusion:!0,drawInSecondSlot:!1,color:[1,1,1,1],outlineColor:[1,1,1,1],outlineSize:0,textureIsSignedDistanceField:!1,distanceFieldBoundingBox:null,vvSizeEnabled:!1,vvSizeMinSize:[1,1,1],vvSizeMaxSize:[100,100,100],vvSizeOffset:[0,0,0],vvSizeFactor:[1,1,1],vvColorEnabled:!1,vvColorValues:[0,0,0,0,0,0,0,0],vvColorColors:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],screenOffset:[0,0],verticalOffset:null,screenSizePerspective:null,screenSizePerspectiveAlignment:null,slicePlaneEnabled:!1,anchorPos:Object(_.e)(.5,.5),shaderPolygonOffset:1e-5,polygonOffset:!1,textureId:null,centerOffsetUnits:"world",depthEnabled:!0,pixelSnappingEnabled:!0,debugDrawBorder:!1,isDraped:!1},R.b),Ee=Object(S.a)().vec3f("position").vec3f("normal").vec2f("uv0").vec4u8("color").vec2f("size").vec4f("auxpos1").vec4f("auxpos2"),Ce=function(){function e(t){Object(r.a)(this,e),this.material=t,this.vertexBufferLayout=Ee}return Object(i.a)(e,[{key:"allocate",value:function(e){return this.vertexBufferLayout.createBuffer(e)}},{key:"elementCount",value:function(e){return 6*e.indices.get("position").length}},{key:"write",value:function(e,t,n,r){Object(L.e)(t.indices.get("position"),t.vertexAttributes.get("position").data,e.transformation,n.position,r,6),Object(L.d)(t.indices.get("normal"),t.vertexAttributes.get("normal").data,e.invTranspTransformation,n.normal,r,6);var i,a,o,s,c=t.vertexAttributes.get("uv0").data;if(null==c||c.length<4){var l=this.material.params;i=0,a=0,o=l.texCoordScale[0],s=l.texCoordScale[1]}else i=c[0],a=c[1],o=c[2],s=c[3];o=Math.min(1.99999,o+1),s=Math.min(1.99999,s+1);for(var u=t.indices.get("position").length,d=n.uv0,f=r,p=0;p<u;++p)d.set(f,0,i),d.set(f,1,a),f+=1,d.set(f,0,o),d.set(f,1,a),f+=1,d.set(f,0,o),d.set(f,1,s),f+=1,d.set(f,0,o),d.set(f,1,s),f+=1,d.set(f,0,i),d.set(f,1,s),f+=1,d.set(f,0,i),d.set(f,1,a),f+=1;Object(L.b)(t.indices.get("color"),t.vertexAttributes.get("color").data,4,n.color,r,6);for(var h=t.indices.get("size"),b=t.vertexAttributes.get("size").data,v=h.length,y=n.size,m=r,g=0;g<v;++g)for(var O=b[2*h[g]],j=b[2*h[g]+1],w=0;w<6;++w)y.set(m,0,O),y.set(m,1,j),m+=1;t.indices.get("auxpos1")&&t.vertexAttributes.get("auxpos1")&&Object(L.a)(t.indices.get("auxpos1"),t.vertexAttributes.get("auxpos1").data,n.auxpos1,r,6),t.indices.get("auxpos2")&&t.vertexAttributes.get("auxpos2")&&Object(L.a)(t.indices.get("auxpos2"),t.vertexAttributes.get("auxpos2").data,n.auxpos2,r,6)}}]),e}(),Pe=n(620),Ie=n(623);n(16);function Me(e,t,n){switch(e){case"circle":return Ae(t,n);case"square":return function(e,t){return Re(e,t,!1)}(t,n);case"cross":return function(e,t){return Le(e,t,!1)}(t,n);case"x":return function(e,t){return Le(e,t,!0)}(t,n);case"kite":return function(e,t){return Re(e,t,!0)}(t,n);case"triangle":return function(e,t){for(var n=new Uint8Array(4*e*e),r=1,i=-.5,a=Math.sqrt(r*r+i*i),o=(e-t)/2,s=0;s<e;s++)for(var c=0;c<e;c++){var l=s*e+c,u=(c-o)/t,d=(s-o+.75)/t,f=-(r*u+i*d)/a,p=(r*(u-1)+i*-d)/a,h=-d,b=Math.max(f,p,h);Object(T.h)(b*t/e+.5,n,4*l)}return n}(t,n);default:return Ae(t,n)}}function Ae(e,t){for(var n=e,r=new Uint8Array(4*n*n),i=n/2-.5,a=t/2,o=0;o<n;o++)for(var s=0;s<n;s++){var c=s+n*o,l=s-i,u=o-i,d=Math.sqrt(l*l+u*u)-a;d=d/e+.5,Object(T.h)(d,r,4*c)}return r}function Re(e,t,n){n&&(t/=Math.SQRT2);for(var r=new Uint8Array(4*e*e),i=0;i<e;i++)for(var a=0;a<e;a++){var o=a-.5*e+.25,s=.5*e-i-.75,c=i*e+a;if(n){var l=(o+s)/Math.SQRT2;s=(s-o)/Math.SQRT2,o=l}var u=Math.max(Math.abs(o),Math.abs(s))-.5*t;u=u/e+.5,Object(T.h)(u,r,4*c)}return r}function Le(e,t,n){n&&(t*=Math.SQRT2);for(var r=.5*t,i=new Uint8Array(4*e*e),a=0;a<e;a++)for(var o=0;o<e;o++){var s=o-.5*e,c=.5*e-a-1,l=a*e+o;if(n){var u=(s+c)/Math.SQRT2;c=(c-s)/Math.SQRT2,s=u}var d=void 0;d=(d=(s=Math.abs(s))>(c=Math.abs(c))?s>r?Math.sqrt((s-r)*(s-r)+c*c):c:c>r?Math.sqrt(s*s+(c-r)*(c-r)):s)/e+.5,Object(T.h)(d,i,4*l)}return i}var Fe=n(637),De=n(760),Ne=function(){function e(t){var n=this;Object(r.a)(this,e),this.view=null,this._geometry=null,this._size=3,this._color=Object(u.d)(1,0,1,1),this._pixelSnappingEnabled=!0,this._primitive="square",this._outlineSize=1,this._outlineColor=Object(u.d)(1,1,1,1),this._elevationInfo=null,this.resources=new De.a({view:t.view,createResources:function(e){return n.createResources(e)},recreateGeometry:function(e,t){return e.geometry=n.recreateGeometry(t,e.material),Object(a.k)(e.geometry)?[e.geometry]:[]}});var i=!0;for(var o in t)o in this?"attached"===o?i=t[o]:this[o]=t[o]:console.error("Cannot set unknown property",o);this.attached=i}return Object(i.a)(e,[{key:"destroy",value:function(){this.resources.destroy()}},{key:"visible",get:function(){return this.resources.visible},set:function(e){this.resources.visible=e}},{key:"attached",get:function(){return this.resources.attached},set:function(e){this.resources.attached=e}},{key:"geometry",get:function(){return this._geometry},set:function(e){this._geometry=e,this.resources.recreateGeometry()}},{key:"size",get:function(){return this._size},set:function(e){if(e!==this._size){var t=this.preferredTextureSize;this._size=e,t<this.preferredTextureSize?Object(a.k)(this.resources)&&this.resources.recreate():this.updateSizeAttribute()}}},{key:"color",get:function(){return this._color},set:function(e){Object(d.g)(e,this._color)||(Object(d.c)(this._color,e),this.updateMaterial())}},{key:"pixelSnappingEnabled",get:function(){return this._pixelSnappingEnabled},set:function(e){this._pixelSnappingEnabled!==e&&(this._pixelSnappingEnabled=e,this.updateMaterial())}},{key:"primitive",get:function(){return this._primitive},set:function(e){this._primitive!==e&&(this._primitive=e,Object(a.k)(this.resources)&&this.resources.recreate())}},{key:"outlineSize",get:function(){return this._outlineSize},set:function(e){e!==this._outlineSize&&(this._outlineSize=e,this.updateMaterial())}},{key:"outlineColor",get:function(){return this._outlineColor},set:function(e){Object(d.g)(e,this._outlineColor)||(Object(d.c)(this._outlineColor,e),this.updateMaterial())}},{key:"elevationInfo",get:function(){return this._elevationInfo},set:function(e){this._elevationInfo=e,this.resources&&this.resources.recreateGeometry()}},{key:"updateMaterial",value:function(){var e=this.resources.resources;Object(a.j)(e)||e.material.setParameterValues(this.materialParameters(e.texture.id))}},{key:"updateSizeAttribute",value:function(){var e=this.resources.resources,t=this.resources.object;if(!Object(a.j)(e)&&!Object(a.j)(t)){var n=e.geometry;if(!Object(a.j)(n)){var r=n.getMutableAttribute("size").data,i=this.geometrySize;r[0]=i,r[1]=i,t.geometryVertexAttrsUpdated(0)}}}},{key:"materialParameters",value:function(e){return{color:this._color,textureIsSignedDistanceField:!0,distanceFieldBoundingBox:ze,occlusionTest:!1,outlineColor:this._outlineColor,outlineSize:this._outlineSize,textureId:e,polygonOffset:!1,shaderPolygonOffset:0,drawInSecondSlot:!0,depthEnabled:!1,pixelSnappingEnabled:this.pixelSnappingEnabled}}},{key:"geometrySize",get:function(){return this._size/Ve}},{key:"recreateGeometry",value:function(e,t){var n=this.createRenderGeometry();return Object(a.k)(n)&&e.addGeometry(n,t),n}},{key:"createResources",value:function(e){var t=this.createTexture(),n=new ie(this.materialParameters(t.id)),r=this.recreateGeometry(e,n);return{material:n,texture:t,geometry:r,forEach:function(e){e(t),e(n),Object(a.k)(this.geometry)&&e(this.geometry)}}}},{key:"preferredTextureSize",get:function(){return Object(o.d)(Object(o.n)(2*this.geometrySize),16,128)}},{key:"createTexture",value:function(){var e=this.preferredTextureSize;return new Fe.a(Me(this._primitive,e,e*Ve),{mipmap:!1,wrap:{s:33071,t:33071},width:e,height:e,components:4,noUnpackFlip:!0})}},{key:"calculateMapBounds",value:function(e){if(Object(a.j)(this.resources.resources)||Object(a.j)(this.resources.resources.geometry))return!1;var t=this.resources.resources.geometry.vertexAttributes.get("position");return Object(l.p)(t.data,this.view.renderCoordsHelper.spatialReference,Ue,this.view.spatialReference),Object(f.h)(e,Ue),!0}},{key:"createRenderGeometry",value:function(){var e=this.geometry;if(Object(a.j)(e))return null;var t=this.view,n=t.renderCoordsHelper,r=t.elevationProvider,i=Object(Pe.c)(e,r,Ie.a.fromElevationInfo(this.elevationInfo),n),o=Object(c.v)(p.d.get(),e.x,e.y,i),s=p.d.get();Object(l.p)(o,e.spatialReference,s,n.spatialReference);var u=this.geometrySize;return h.a.createPointGeometry(null,s,null,[u,u],[0,0,0,1])}}]),e}(),Ve=.5,ze=[Ve/2,Ve/2,1-Ve/2,1-Ve/2],Ue=Object(s.e)()},function(e,t,n){e.exports=function e(t){"use strict";var n=/^\0+/g,r=/[\0\r\f]/g,i=/: */g,a=/zoo|gra/,o=/([,: ])(transform)/g,s=/,+\s*(?![^(]*[)])/g,c=/ +\s*(?![^(]*[)])/g,l=/ *[\0] */g,u=/,\r+?/g,d=/([\t\r\n ])*\f?&/g,f=/:global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,p=/\W+/g,h=/@(k\w+)\s*(\S*)\s*/,b=/::(place)/g,v=/:(read-only)/g,y=/\s+(?=[{\];=:>])/g,m=/([[}=:>])\s+/g,g=/(\{[^{]+?);(?=\})/g,O=/\s{2,}/g,j=/([^\(])(:+) */g,w=/[svh]\w+-[tblr]{2}/,_=/\(\s*(.*)\s*\)/g,k=/([\s\S]*?);/g,x=/-self|flex-/g,S=/[^]*?(:[rp][el]a[\w-]+)[^]*/,T=/stretch|:\s*\w+\-(?:conte|avail)/,E=/([^-])(image-set\()/,C="-webkit-",P="-moz-",I="-ms-",M=59,A=125,R=123,L=40,F=41,D=91,N=93,V=10,z=13,U=9,B=64,G=32,q=38,H=45,W=95,$=42,J=44,Y=58,K=39,Z=34,X=47,Q=62,ee=43,te=126,ne=0,re=12,ie=11,ae=107,oe=109,se=115,ce=112,le=111,ue=105,de=99,fe=100,pe=112,he=1,be=1,ve=0,ye=1,me=1,ge=1,Oe=0,je=0,we=0,_e=[],ke=[],xe=0,Se=null,Te=-2,Ee=-1,Ce=0,Pe=1,Ie=2,Me=3,Ae=0,Re=1,Le="",Fe="",De="";function Ne(e,t,i,a,o){for(var s,c,u=0,d=0,f=0,p=0,y=0,m=0,g=0,O=0,w=0,k=0,x=0,S=0,T=0,E=0,W=0,Oe=0,ke=0,Se=0,Te=0,Ee=i.length,ze=Ee-1,We="",$e="",Je="",Ye="",Ke="",Ze="";W<Ee;){if(g=i.charCodeAt(W),W===ze&&d+p+f+u!==0&&(0!==d&&(g=d===X?V:X),p=f=u=0,Ee++,ze++),d+p+f+u===0){if(W===ze&&(Oe>0&&($e=$e.replace(r,"")),$e.trim().length>0)){switch(g){case G:case U:case M:case z:case V:break;default:$e+=i.charAt(W)}g=M}if(1===ke)switch(g){case R:case A:case M:case Z:case K:case L:case F:case J:ke=0;case U:case z:case V:case G:break;default:for(ke=0,Te=W,y=g,W--,g=M;Te<Ee;)switch(i.charCodeAt(Te++)){case V:case z:case M:++W,g=y,Te=Ee;break;case Y:Oe>0&&(++W,g=y);case R:Te=Ee}}switch(g){case R:for(y=($e=$e.trim()).charCodeAt(0),x=1,Te=++W;W<Ee;){switch(g=i.charCodeAt(W)){case R:x++;break;case A:x--;break;case X:switch(m=i.charCodeAt(W+1)){case $:case X:W=He(m,W,ze,i)}break;case D:g++;case L:g++;case Z:case K:for(;W++<ze&&i.charCodeAt(W)!==g;);}if(0===x)break;W++}switch(Je=i.substring(Te,W),y===ne&&(y=($e=$e.replace(n,"").trim()).charCodeAt(0)),y){case B:switch(Oe>0&&($e=$e.replace(r,"")),m=$e.charCodeAt(1)){case fe:case oe:case se:case H:s=t;break;default:s=_e}if(Te=(Je=Ne(t,s,Je,m,o+1)).length,we>0&&0===Te&&(Te=$e.length),xe>0&&(s=Ve(_e,$e,Se),c=qe(Me,Je,s,t,be,he,Te,m,o,a),$e=s.join(""),void 0!==c&&0===(Te=(Je=c.trim()).length)&&(m=0,Je="")),Te>0)switch(m){case se:$e=$e.replace(_,Ge);case fe:case oe:case H:Je=$e+"{"+Je+"}";break;case ae:Je=($e=$e.replace(h,"$1 $2"+(Re>0?Le:"")))+"{"+Je+"}",Je=1===me||2===me&&Be("@"+Je,3)?"@"+C+Je+"@"+Je:"@"+Je;break;default:Je=$e+Je,a===pe&&(Ye+=Je,Je="")}else Je="";break;default:Je=Ne(t,Ve(t,$e,Se),Je,a,o+1)}Ke+=Je,S=0,ke=0,E=0,Oe=0,Se=0,T=0,$e="",Je="",g=i.charCodeAt(++W);break;case A:case M:if((Te=($e=(Oe>0?$e.replace(r,""):$e).trim()).length)>1)switch(0===E&&((y=$e.charCodeAt(0))===H||y>96&&y<123)&&(Te=($e=$e.replace(" ",":")).length),xe>0&&void 0!==(c=qe(Pe,$e,t,e,be,he,Ye.length,a,o,a))&&0===(Te=($e=c.trim()).length)&&($e="\0\0"),y=$e.charCodeAt(0),m=$e.charCodeAt(1),y){case ne:break;case B:if(m===ue||m===de){Ze+=$e+i.charAt(W);break}default:if($e.charCodeAt(Te-1)===Y)break;Ye+=Ue($e,y,m,$e.charCodeAt(2))}S=0,ke=0,E=0,Oe=0,Se=0,$e="",g=i.charCodeAt(++W)}}switch(g){case z:case V:if(d+p+f+u+je===0)switch(k){case F:case K:case Z:case B:case te:case Q:case $:case ee:case X:case H:case Y:case J:case M:case R:case A:break;default:E>0&&(ke=1)}d===X?d=0:ye+S===0&&a!==ae&&$e.length>0&&(Oe=1,$e+="\0"),xe*Ae>0&&qe(Ce,$e,t,e,be,he,Ye.length,a,o,a),he=1,be++;break;case M:case A:if(d+p+f+u===0){he++;break}default:switch(he++,We=i.charAt(W),g){case U:case G:if(p+u+d===0)switch(O){case J:case Y:case U:case G:We="";break;default:g!==G&&(We=" ")}break;case ne:We="\\0";break;case re:We="\\f";break;case ie:We="\\v";break;case q:p+d+u===0&&ye>0&&(Se=1,Oe=1,We="\f"+We);break;case 108:if(p+d+u+ve===0&&E>0)switch(W-E){case 2:O===ce&&i.charCodeAt(W-3)===Y&&(ve=O);case 8:w===le&&(ve=w)}break;case Y:p+d+u===0&&(E=W);break;case J:d+f+p+u===0&&(Oe=1,We+="\r");break;case Z:case K:0===d&&(p=p===g?0:0===p?g:p);break;case D:p+d+f===0&&u++;break;case N:p+d+f===0&&u--;break;case F:p+d+u===0&&f--;break;case L:if(p+d+u===0){if(0===S)switch(2*O+3*w){case 533:break;default:x=0,S=1}f++}break;case B:d+f+p+u+E+T===0&&(T=1);break;case $:case X:if(p+u+f>0)break;switch(d){case 0:switch(2*g+3*i.charCodeAt(W+1)){case 235:d=X;break;case 220:Te=W,d=$}break;case $:g===X&&O===$&&Te+2!==W&&(33===i.charCodeAt(Te+2)&&(Ye+=i.substring(Te,W+1)),We="",d=0)}}if(0===d){if(ye+p+u+T===0&&a!==ae&&g!==M)switch(g){case J:case te:case Q:case ee:case F:case L:if(0===S){switch(O){case U:case G:case V:case z:We+="\0";break;default:We="\0"+We+(g===J?"":"\0")}Oe=1}else switch(g){case L:E+7===W&&108===O&&(E=0),S=++x;break;case F:0==(S=--x)&&(Oe=1,We+="\0")}break;case U:case G:switch(O){case ne:case R:case A:case M:case J:case re:case U:case G:case V:case z:break;default:0===S&&(Oe=1,We+="\0")}}$e+=We,g!==G&&g!==U&&(k=g)}}w=O,O=g,W++}if(Te=Ye.length,we>0&&0===Te&&0===Ke.length&&0===t[0].length==0&&(a!==oe||1===t.length&&(ye>0?Fe:De)===t[0])&&(Te=t.join(",").length+2),Te>0){if(s=0===ye&&a!==ae?function(e){for(var t,n,i=0,a=e.length,o=Array(a);i<a;++i){for(var s=e[i].split(l),c="",u=0,d=0,f=0,p=0,h=s.length;u<h;++u)if(!(0===(d=(n=s[u]).length)&&h>1)){if(f=c.charCodeAt(c.length-1),p=n.charCodeAt(0),t="",0!==u)switch(f){case $:case te:case Q:case ee:case G:case L:break;default:t=" "}switch(p){case q:n=t+Fe;case te:case Q:case ee:case G:case F:case L:break;case D:n=t+n+Fe;break;case Y:switch(2*n.charCodeAt(1)+3*n.charCodeAt(2)){case 530:if(ge>0){n=t+n.substring(8,d-1);break}default:(u<1||s[u-1].length<1)&&(n=t+Fe+n)}break;case J:t="";default:n=d>1&&n.indexOf(":")>0?t+n.replace(j,"$1"+Fe+"$2"):t+n+Fe}c+=n}o[i]=c.replace(r,"").trim()}return o}(t):t,xe>0&&void 0!==(c=qe(Ie,Ye,s,e,be,he,Te,a,o,a))&&0===(Ye=c).length)return Ze+Ye+Ke;if(Ye=s.join(",")+"{"+Ye+"}",me*ve!=0){switch(2!==me||Be(Ye,2)||(ve=0),ve){case le:Ye=Ye.replace(v,":"+P+"$1")+Ye;break;case ce:Ye=Ye.replace(b,"::"+C+"input-$1")+Ye.replace(b,"::"+P+"$1")+Ye.replace(b,":"+I+"input-$1")+Ye}ve=0}}return Ze+Ye+Ke}function Ve(e,t,n){var r=t.trim().split(u),i=r,a=r.length,o=e.length;switch(o){case 0:case 1:for(var s=0,c=0===o?"":e[0]+" ";s<a;++s)i[s]=ze(c,i[s],n,o).trim();break;default:s=0;var l=0;for(i=[];s<a;++s)for(var d=0;d<o;++d)i[l++]=ze(e[d]+" ",r[s],n,o).trim()}return i}function ze(e,t,n,r){var i=t,a=i.charCodeAt(0);switch(a<33&&(a=(i=i.trim()).charCodeAt(0)),a){case q:switch(ye+r){case 0:case 1:if(0===e.trim().length)break;default:return i.replace(d,"$1"+e.trim())}break;case Y:switch(i.charCodeAt(1)){case 103:if(ge>0&&ye>0)return i.replace(f,"$1").replace(d,"$1"+De);break;default:return e.trim()+i.replace(d,"$1"+e.trim())}default:if(n*ye>0&&i.indexOf("\f")>0)return i.replace(d,(e.charCodeAt(0)===Y?"":"$1")+e.trim())}return e+i}function Ue(e,t,n,r){var l,u=0,d=e+";",f=2*t+3*n+4*r;if(944===f)return function(e){var t=e.length,n=e.indexOf(":",9)+1,r=e.substring(0,n).trim(),i=e.substring(n,t-1).trim();switch(e.charCodeAt(9)*Re){case 0:break;case H:if(110!==e.charCodeAt(10))break;default:var a=i.split((i="",s)),o=0;for(n=0,t=a.length;o<t;n=0,++o){for(var l=a[o],u=l.split(c);l=u[n];){var d=l.charCodeAt(0);if(1===Re&&(d>B&&d<90||d>96&&d<123||d===W||d===H&&l.charCodeAt(1)!==H))switch(isNaN(parseFloat(l))+(-1!==l.indexOf("("))){case 1:switch(l){case"infinite":case"alternate":case"backwards":case"running":case"normal":case"forwards":case"both":case"none":case"linear":case"ease":case"ease-in":case"ease-out":case"ease-in-out":case"paused":case"reverse":case"alternate-reverse":case"inherit":case"initial":case"unset":case"step-start":case"step-end":break;default:l+=Le}}u[n++]=l}i+=(0===o?"":",")+u.join(" ")}}return i=r+i+";",1===me||2===me&&Be(i,1)?C+i+i:i}(d);if(0===me||2===me&&!Be(d,1))return d;switch(f){case 1015:return 97===d.charCodeAt(10)?C+d+d:d;case 951:return 116===d.charCodeAt(3)?C+d+d:d;case 963:return 110===d.charCodeAt(5)?C+d+d:d;case 1009:if(100!==d.charCodeAt(4))break;case 969:case 942:return C+d+d;case 978:return C+d+P+d+d;case 1019:case 983:return C+d+P+d+I+d+d;case 883:return d.charCodeAt(8)===H?C+d+d:d.indexOf("image-set(",11)>0?d.replace(E,"$1"+C+"$2")+d:d;case 932:if(d.charCodeAt(4)===H)switch(d.charCodeAt(5)){case 103:return C+"box-"+d.replace("-grow","")+C+d+I+d.replace("grow","positive")+d;case 115:return C+d+I+d.replace("shrink","negative")+d;case 98:return C+d+I+d.replace("basis","preferred-size")+d}return C+d+I+d+d;case 964:return C+d+I+"flex-"+d+d;case 1023:if(99!==d.charCodeAt(8))break;return l=d.substring(d.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),C+"box-pack"+l+C+d+I+"flex-pack"+l+d;case 1005:return a.test(d)?d.replace(i,":"+C)+d.replace(i,":"+P)+d:d;case 1e3:switch(u=(l=d.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(u)){case 226:l=d.replace(w,"tb");break;case 232:l=d.replace(w,"tb-rl");break;case 220:l=d.replace(w,"lr");break;default:return d}return C+d+I+l+d;case 1017:if(-1===d.indexOf("sticky",9))return d;case 975:switch(u=(d=e).length-10,f=(l=(33===d.charCodeAt(u)?d.substring(0,u):d).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(l.charCodeAt(8)<111)break;case 115:d=d.replace(l,C+l)+";"+d;break;case 207:case 102:d=d.replace(l,C+(f>102?"inline-":"")+"box")+";"+d.replace(l,C+l)+";"+d.replace(l,I+l+"box")+";"+d}return d+";";case 938:if(d.charCodeAt(5)===H)switch(d.charCodeAt(6)){case 105:return l=d.replace("-items",""),C+d+C+"box-"+l+I+"flex-"+l+d;case 115:return C+d+I+"flex-item-"+d.replace(x,"")+d;default:return C+d+I+"flex-line-pack"+d.replace("align-content","").replace(x,"")+d}break;case 973:case 989:if(d.charCodeAt(3)!==H||122===d.charCodeAt(4))break;case 931:case 953:if(!0===T.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?Ue(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):d.replace(l,C+l)+d.replace(l,P+l.replace("fill-",""))+d;break;case 962:if(d=C+d+(102===d.charCodeAt(5)?I+d:"")+d,n+r===211&&105===d.charCodeAt(13)&&d.indexOf("transform",10)>0)return d.substring(0,d.indexOf(";",27)+1).replace(o,"$1"+C+"$2")+d}return d}function Be(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10),i=e.substring(n+1,e.length-1);return Se(2!==t?r:r.replace(S,"$1"),i,t)}function Ge(e,t){var n=Ue(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(k," or ($1)").substring(4):"("+t+")"}function qe(e,t,n,r,i,a,o,s,c,l){for(var u,d=0,f=t;d<xe;++d)switch(u=ke[d].call($e,e,f,n,r,i,a,o,s,c,l)){case void 0:case!1:case!0:case null:break;default:f=u}if(f!==t)return f}function He(e,t,n,r){for(var i=t+1;i<n;++i)switch(r.charCodeAt(i)){case X:if(e===$&&r.charCodeAt(i-1)===$&&t+2!==i)return i+1;break;case V:if(e===X)return i+1}return i}function We(e){for(var t in e){var n=e[t];switch(t){case"keyframe":Re=0|n;break;case"global":ge=0|n;break;case"cascade":ye=0|n;break;case"compress":Oe=0|n;break;case"semicolon":je=0|n;break;case"preserve":we=0|n;break;case"prefix":Se=null,n?"function"!=typeof n?me=1:(me=2,Se=n):me=0}}return We}function $e(t,n){if(void 0!==this&&this.constructor===$e)return e(t);var i=t,a=i.charCodeAt(0);a<33&&(a=(i=i.trim()).charCodeAt(0)),Re>0&&(Le=i.replace(p,a===D?"":"-")),a=1,1===ye?De=i:Fe=i;var o,s=[De];xe>0&&void 0!==(o=qe(Ee,n,s,s,be,he,0,0,0,0))&&"string"==typeof o&&(n=o);var c=Ne(_e,s,n,0,0);return xe>0&&void 0!==(o=qe(Te,c,s,s,be,he,c.length,0,0,0))&&"string"!=typeof(c=o)&&(a=0),Le="",De="",Fe="",ve=0,be=1,he=1,Oe*a==0?c:c.replace(r,"").replace(y,"").replace(m,"$1").replace(g,"$1").replace(O," ")}return $e.use=function e(t){switch(t){case void 0:case null:xe=ke.length=0;break;default:if("function"==typeof t)ke[xe++]=t;else if("object"==typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else Ae=0|!!t}return e},$e.set=We,void 0!==t&&We(t),$e}(null)},function(e,t,n){"use strict";var r=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function i(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(i=e[n],a=t[n],!(i===a||r(i)&&r(a)))return!1;var i,a;return!0}t.a=function(e,t){var n;void 0===t&&(t=i);var r,a=[],o=!1;return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return o&&n===this&&t(i,a)||(r=e.apply(this,i),o=!0,n=this,a=i),r}}},function(e,t,n){"use strict";(function(e){var n="undefined"!==typeof window&&"undefined"!==typeof document&&"undefined"!==typeof navigator,r=function(){for(var e=["Edge","Trident","Firefox"],t=0;t<e.length;t+=1)if(n&&navigator.userAgent.indexOf(e[t])>=0)return 1;return 0}();var i=n&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then((function(){t=!1,e()})))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout((function(){t=!1,e()}),r))}};function a(e){return e&&"[object Function]"==={}.toString.call(e)}function o(e,t){if(1!==e.nodeType)return[];var n=e.ownerDocument.defaultView.getComputedStyle(e,null);return t?n[t]:n}function s(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function c(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=o(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/(auto|scroll|overlay)/.test(n+i+r)?e:c(s(e))}function l(e){return e&&e.referenceNode?e.referenceNode:e}var u=n&&!(!window.MSInputMethodContext||!document.documentMode),d=n&&/MSIE 10/.test(navigator.userAgent);function f(e){return 11===e?u:10===e?d:u||d}function p(e){if(!e)return document.documentElement;for(var t=f(10)?document.body:null,n=e.offsetParent||null;n===t&&e.nextElementSibling;)n=(e=e.nextElementSibling).offsetParent;var r=n&&n.nodeName;return r&&"BODY"!==r&&"HTML"!==r?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===o(n,"position")?p(n):n:e?e.ownerDocument.documentElement:document.documentElement}function h(e){return null!==e.parentNode?h(e.parentNode):e}function b(e,t){if(!e||!e.nodeType||!t||!t.nodeType)return document.documentElement;var n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?e:t,i=n?t:e,a=document.createRange();a.setStart(r,0),a.setEnd(i,0);var o=a.commonAncestorContainer;if(e!==o&&t!==o||r.contains(i))return function(e){var t=e.nodeName;return"BODY"!==t&&("HTML"===t||p(e.firstElementChild)===e)}(o)?o:p(o);var s=h(e);return s.host?b(s.host,t):b(e,h(t).host)}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",n="top"===t?"scrollTop":"scrollLeft",r=e.nodeName;if("BODY"===r||"HTML"===r){var i=e.ownerDocument.documentElement,a=e.ownerDocument.scrollingElement||i;return a[n]}return e[n]}function y(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=v(t,"top"),i=v(t,"left"),a=n?-1:1;return e.top+=r*a,e.bottom+=r*a,e.left+=i*a,e.right+=i*a,e}function m(e,t){var n="x"===t?"Left":"Top",r="Left"===n?"Right":"Bottom";return parseFloat(e["border"+n+"Width"])+parseFloat(e["border"+r+"Width"])}function g(e,t,n,r){return Math.max(t["offset"+e],t["scroll"+e],n["client"+e],n["offset"+e],n["scroll"+e],f(10)?parseInt(n["offset"+e])+parseInt(r["margin"+("Height"===e?"Top":"Left")])+parseInt(r["margin"+("Height"===e?"Bottom":"Right")]):0)}function O(e){var t=e.body,n=e.documentElement,r=f(10)&&getComputedStyle(n);return{height:g("Height",t,n,r),width:g("Width",t,n,r)}}var j=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},w=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function x(e){return k({},e,{right:e.left+e.width,bottom:e.top+e.height})}function S(e){var t={};try{if(f(10)){t=e.getBoundingClientRect();var n=v(e,"top"),r=v(e,"left");t.top+=n,t.left+=r,t.bottom+=n,t.right+=r}else t=e.getBoundingClientRect()}catch(p){}var i={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},a="HTML"===e.nodeName?O(e.ownerDocument):{},s=a.width||e.clientWidth||i.width,c=a.height||e.clientHeight||i.height,l=e.offsetWidth-s,u=e.offsetHeight-c;if(l||u){var d=o(e);l-=m(d,"x"),u-=m(d,"y"),i.width-=l,i.height-=u}return x(i)}function T(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=f(10),i="HTML"===t.nodeName,a=S(e),s=S(t),l=c(e),u=o(t),d=parseFloat(u.borderTopWidth),p=parseFloat(u.borderLeftWidth);n&&i&&(s.top=Math.max(s.top,0),s.left=Math.max(s.left,0));var h=x({top:a.top-s.top-d,left:a.left-s.left-p,width:a.width,height:a.height});if(h.marginTop=0,h.marginLeft=0,!r&&i){var b=parseFloat(u.marginTop),v=parseFloat(u.marginLeft);h.top-=d-b,h.bottom-=d-b,h.left-=p-v,h.right-=p-v,h.marginTop=b,h.marginLeft=v}return(r&&!n?t.contains(l):t===l&&"BODY"!==l.nodeName)&&(h=y(h,t)),h}function E(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.ownerDocument.documentElement,r=T(e,n),i=Math.max(n.clientWidth,window.innerWidth||0),a=Math.max(n.clientHeight,window.innerHeight||0),o=t?0:v(n),s=t?0:v(n,"left"),c={top:o-r.top+r.marginTop,left:s-r.left+r.marginLeft,width:i,height:a};return x(c)}function C(e){var t=e.nodeName;if("BODY"===t||"HTML"===t)return!1;if("fixed"===o(e,"position"))return!0;var n=s(e);return!!n&&C(n)}function P(e){if(!e||!e.parentElement||f())return document.documentElement;for(var t=e.parentElement;t&&"none"===o(t,"transform");)t=t.parentElement;return t||document.documentElement}function I(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a={top:0,left:0},o=i?P(e):b(e,l(t));if("viewport"===r)a=E(o,i);else{var u=void 0;"scrollParent"===r?"BODY"===(u=c(s(t))).nodeName&&(u=e.ownerDocument.documentElement):u="window"===r?e.ownerDocument.documentElement:r;var d=T(u,o,i);if("HTML"!==u.nodeName||C(o))a=d;else{var f=O(e.ownerDocument),p=f.height,h=f.width;a.top+=d.top-d.marginTop,a.bottom=p+d.top,a.left+=d.left-d.marginLeft,a.right=h+d.left}}var v="number"===typeof(n=n||0);return a.left+=v?n:n.left||0,a.top+=v?n:n.top||0,a.right-=v?n:n.right||0,a.bottom-=v?n:n.bottom||0,a}function M(e){return e.width*e.height}function A(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var o=I(n,r,a,i),s={top:{width:o.width,height:t.top-o.top},right:{width:o.right-t.right,height:o.height},bottom:{width:o.width,height:o.bottom-t.bottom},left:{width:t.left-o.left,height:o.height}},c=Object.keys(s).map((function(e){return k({key:e},s[e],{area:M(s[e])})})).sort((function(e,t){return t.area-e.area})),l=c.filter((function(e){var t=e.width,r=e.height;return t>=n.clientWidth&&r>=n.clientHeight})),u=l.length>0?l[0].key:c[0].key,d=e.split("-")[1];return u+(d?"-"+d:"")}function R(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=r?P(t):b(t,l(n));return T(n,i,r)}function L(e){var t=e.ownerDocument.defaultView.getComputedStyle(e),n=parseFloat(t.marginTop||0)+parseFloat(t.marginBottom||0),r=parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0);return{width:e.offsetWidth+r,height:e.offsetHeight+n}}function F(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,(function(e){return t[e]}))}function D(e,t,n){n=n.split("-")[0];var r=L(e),i={width:r.width,height:r.height},a=-1!==["right","left"].indexOf(n),o=a?"top":"left",s=a?"left":"top",c=a?"height":"width",l=a?"width":"height";return i[o]=t[o]+t[c]/2-r[c]/2,i[s]=n===s?t[s]-r[l]:t[F(s)],i}function N(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function V(e,t,n){return(void 0===n?e:e.slice(0,function(e,t,n){if(Array.prototype.findIndex)return e.findIndex((function(e){return e[t]===n}));var r=N(e,(function(e){return e[t]===n}));return e.indexOf(r)}(e,"name",n))).forEach((function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=e.function||e.fn;e.enabled&&a(n)&&(t.offsets.popper=x(t.offsets.popper),t.offsets.reference=x(t.offsets.reference),t=n(t,e))})),t}function z(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=R(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=A(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=D(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=V(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function U(e,t){return e.some((function(e){var n=e.name;return e.enabled&&n===t}))}function B(e){for(var t=[!1,"ms","Webkit","Moz","O"],n=e.charAt(0).toUpperCase()+e.slice(1),r=0;r<t.length;r++){var i=t[r],a=i?""+i+n:e;if("undefined"!==typeof document.body.style[a])return a}return null}function G(){return this.state.isDestroyed=!0,U(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[B("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function q(e){var t=e.ownerDocument;return t?t.defaultView:window}function H(e,t,n,r){var i="BODY"===e.nodeName,a=i?e.ownerDocument.defaultView:e;a.addEventListener(t,n,{passive:!0}),i||H(c(a.parentNode),t,n,r),r.push(a)}function W(e,t,n,r){n.updateBound=r,q(e).addEventListener("resize",n.updateBound,{passive:!0});var i=c(e);return H(i,"scroll",n.updateBound,n.scrollParents),n.scrollElement=i,n.eventsEnabled=!0,n}function $(){this.state.eventsEnabled||(this.state=W(this.reference,this.options,this.state,this.scheduleUpdate))}function J(){var e,t;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(e=this.reference,t=this.state,q(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach((function(e){e.removeEventListener("scroll",t.updateBound)})),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t))}function Y(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function K(e,t){Object.keys(t).forEach((function(n){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&Y(t[n])&&(r="px"),e.style[n]=t[n]+r}))}var Z=n&&/Firefox/i.test(navigator.userAgent);function X(e,t,n){var r=N(e,(function(e){return e.name===t})),i=!!r&&e.some((function(e){return e.name===n&&e.enabled&&e.order<r.order}));if(!i){var a="`"+t+"`",o="`"+n+"`";console.warn(o+" modifier is required by "+a+" modifier in order to work, be sure to include it before "+a+"!")}return i}var Q=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],ee=Q.slice(3);function te(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=ee.indexOf(e),r=ee.slice(n+1).concat(ee.slice(0,n));return t?r.reverse():r}var ne="flip",re="clockwise",ie="counterclockwise";function ae(e,t,n,r){var i=[0,0],a=-1!==["right","left"].indexOf(r),o=e.split(/(\+|\-)/).map((function(e){return e.trim()})),s=o.indexOf(N(o,(function(e){return-1!==e.search(/,|\s/)})));o[s]&&-1===o[s].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var c=/\s*,\s*|\s+/,l=-1!==s?[o.slice(0,s).concat([o[s].split(c)[0]]),[o[s].split(c)[1]].concat(o.slice(s+1))]:[o];return(l=l.map((function(e,r){var i=(1===r?!a:a)?"height":"width",o=!1;return e.reduce((function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,o=!0,e):o?(e[e.length-1]+=t,o=!1,e):e.concat(t)}),[]).map((function(e){return function(e,t,n,r){var i=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),a=+i[1],o=i[2];if(!a)return e;if(0===o.indexOf("%")){var s=void 0;switch(o){case"%p":s=n;break;case"%":case"%r":default:s=r}return x(s)[t]/100*a}if("vh"===o||"vw"===o)return("vh"===o?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*a;return a}(e,i,t,n)}))}))).forEach((function(e,t){e.forEach((function(n,r){Y(n)&&(i[t]+=n*("-"===e[r-1]?-1:1))}))})),i}var oe={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,n=t.split("-")[0],r=t.split("-")[1];if(r){var i=e.offsets,a=i.reference,o=i.popper,s=-1!==["bottom","top"].indexOf(n),c=s?"left":"top",l=s?"width":"height",u={start:_({},c,a[c]),end:_({},c,a[c]+a[l]-o[l])};e.offsets.popper=k({},o,u[r])}return e}},offset:{order:200,enabled:!0,fn:function(e,t){var n=t.offset,r=e.placement,i=e.offsets,a=i.popper,o=i.reference,s=r.split("-")[0],c=void 0;return c=Y(+n)?[+n,0]:ae(n,a,o,s),"left"===s?(a.top+=c[0],a.left-=c[1]):"right"===s?(a.top+=c[0],a.left+=c[1]):"top"===s?(a.left+=c[0],a.top-=c[1]):"bottom"===s&&(a.left+=c[0],a.top+=c[1]),e.popper=a,e},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var n=t.boundariesElement||p(e.instance.popper);e.instance.reference===n&&(n=p(n));var r=B("transform"),i=e.instance.popper.style,a=i.top,o=i.left,s=i[r];i.top="",i.left="",i[r]="";var c=I(e.instance.popper,e.instance.reference,t.padding,n,e.positionFixed);i.top=a,i.left=o,i[r]=s,t.boundaries=c;var l=t.priority,u=e.offsets.popper,d={primary:function(e){var n=u[e];return u[e]<c[e]&&!t.escapeWithReference&&(n=Math.max(u[e],c[e])),_({},e,n)},secondary:function(e){var n="right"===e?"left":"top",r=u[n];return u[e]>c[e]&&!t.escapeWithReference&&(r=Math.min(u[n],c[e]-("right"===e?u.width:u.height))),_({},n,r)}};return l.forEach((function(e){var t=-1!==["left","top"].indexOf(e)?"primary":"secondary";u=k({},u,d[t](e))})),e.offsets.popper=u,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,n=t.popper,r=t.reference,i=e.placement.split("-")[0],a=Math.floor,o=-1!==["top","bottom"].indexOf(i),s=o?"right":"bottom",c=o?"left":"top",l=o?"width":"height";return n[s]<a(r[c])&&(e.offsets.popper[c]=a(r[c])-n[l]),n[c]>a(r[s])&&(e.offsets.popper[c]=a(r[s])),e}},arrow:{order:500,enabled:!0,fn:function(e,t){var n;if(!X(e.instance.modifiers,"arrow","keepTogether"))return e;var r=t.element;if("string"===typeof r){if(!(r=e.instance.popper.querySelector(r)))return e}else if(!e.instance.popper.contains(r))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var i=e.placement.split("-")[0],a=e.offsets,s=a.popper,c=a.reference,l=-1!==["left","right"].indexOf(i),u=l?"height":"width",d=l?"Top":"Left",f=d.toLowerCase(),p=l?"left":"top",h=l?"bottom":"right",b=L(r)[u];c[h]-b<s[f]&&(e.offsets.popper[f]-=s[f]-(c[h]-b)),c[f]+b>s[h]&&(e.offsets.popper[f]+=c[f]+b-s[h]),e.offsets.popper=x(e.offsets.popper);var v=c[f]+c[u]/2-b/2,y=o(e.instance.popper),m=parseFloat(y["margin"+d]),g=parseFloat(y["border"+d+"Width"]),O=v-e.offsets.popper[f]-m-g;return O=Math.max(Math.min(s[u]-b,O),0),e.arrowElement=r,e.offsets.arrow=(_(n={},f,Math.round(O)),_(n,p,""),n),e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(e,t){if(U(e.instance.modifiers,"inner"))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var n=I(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),r=e.placement.split("-")[0],i=F(r),a=e.placement.split("-")[1]||"",o=[];switch(t.behavior){case ne:o=[r,i];break;case re:o=te(r);break;case ie:o=te(r,!0);break;default:o=t.behavior}return o.forEach((function(s,c){if(r!==s||o.length===c+1)return e;r=e.placement.split("-")[0],i=F(r);var l=e.offsets.popper,u=e.offsets.reference,d=Math.floor,f="left"===r&&d(l.right)>d(u.left)||"right"===r&&d(l.left)<d(u.right)||"top"===r&&d(l.bottom)>d(u.top)||"bottom"===r&&d(l.top)<d(u.bottom),p=d(l.left)<d(n.left),h=d(l.right)>d(n.right),b=d(l.top)<d(n.top),v=d(l.bottom)>d(n.bottom),y="left"===r&&p||"right"===r&&h||"top"===r&&b||"bottom"===r&&v,m=-1!==["top","bottom"].indexOf(r),g=!!t.flipVariations&&(m&&"start"===a&&p||m&&"end"===a&&h||!m&&"start"===a&&b||!m&&"end"===a&&v),O=!!t.flipVariationsByContent&&(m&&"start"===a&&h||m&&"end"===a&&p||!m&&"start"===a&&v||!m&&"end"===a&&b),j=g||O;(f||y||j)&&(e.flipped=!0,(f||y)&&(r=o[c+1]),j&&(a=function(e){return"end"===e?"start":"start"===e?"end":e}(a)),e.placement=r+(a?"-"+a:""),e.offsets.popper=k({},e.offsets.popper,D(e.instance.popper,e.offsets.reference,e.placement)),e=V(e.instance.modifiers,e,"flip"))})),e},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,n=t.split("-")[0],r=e.offsets,i=r.popper,a=r.reference,o=-1!==["left","right"].indexOf(n),s=-1===["top","left"].indexOf(n);return i[o?"left":"top"]=a[n]-(s?i[o?"width":"height"]:0),e.placement=F(t),e.offsets.popper=x(i),e}},hide:{order:800,enabled:!0,fn:function(e){if(!X(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,n=N(e.instance.modifiers,(function(e){return"preventOverflow"===e.name})).boundaries;if(t.bottom<n.top||t.left>n.right||t.top>n.bottom||t.right<n.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var n=t.x,r=t.y,i=e.offsets.popper,a=N(e.instance.modifiers,(function(e){return"applyStyle"===e.name})).gpuAcceleration;void 0!==a&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var o=void 0!==a?a:t.gpuAcceleration,s=p(e.instance.popper),c=S(s),l={position:i.position},u=function(e,t){var n=e.offsets,r=n.popper,i=n.reference,a=Math.round,o=Math.floor,s=function(e){return e},c=a(i.width),l=a(r.width),u=-1!==["left","right"].indexOf(e.placement),d=-1!==e.placement.indexOf("-"),f=t?u||d||c%2===l%2?a:o:s,p=t?a:s;return{left:f(c%2===1&&l%2===1&&!d&&t?r.left-1:r.left),top:p(r.top),bottom:p(r.bottom),right:f(r.right)}}(e,window.devicePixelRatio<2||!Z),d="bottom"===n?"top":"bottom",f="right"===r?"left":"right",h=B("transform"),b=void 0,v=void 0;if(v="bottom"===d?"HTML"===s.nodeName?-s.clientHeight+u.bottom:-c.height+u.bottom:u.top,b="right"===f?"HTML"===s.nodeName?-s.clientWidth+u.right:-c.width+u.right:u.left,o&&h)l[h]="translate3d("+b+"px, "+v+"px, 0)",l[d]=0,l[f]=0,l.willChange="transform";else{var y="bottom"===d?-1:1,m="right"===f?-1:1;l[d]=v*y,l[f]=b*m,l.willChange=d+", "+f}var g={"x-placement":e.placement};return e.attributes=k({},g,e.attributes),e.styles=k({},l,e.styles),e.arrowStyles=k({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){var t,n;return K(e.instance.popper,e.styles),t=e.instance.popper,n=e.attributes,Object.keys(n).forEach((function(e){!1!==n[e]?t.setAttribute(e,n[e]):t.removeAttribute(e)})),e.arrowElement&&Object.keys(e.arrowStyles).length&&K(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,n,r,i){var a=R(i,t,e,n.positionFixed),o=A(n.placement,a,t,e,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return t.setAttribute("x-placement",o),K(t,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},se=function(){function e(t,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};j(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=i(this.update.bind(this)),this.options=k({},e.Defaults,o),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(k({},e.Defaults.modifiers,o.modifiers)).forEach((function(t){r.options.modifiers[t]=k({},e.Defaults.modifiers[t]||{},o.modifiers?o.modifiers[t]:{})})),this.modifiers=Object.keys(this.options.modifiers).map((function(e){return k({name:e},r.options.modifiers[e])})).sort((function(e,t){return e.order-t.order})),this.modifiers.forEach((function(e){e.enabled&&a(e.onLoad)&&e.onLoad(r.reference,r.popper,r.options,e,r.state)})),this.update();var s=this.options.eventsEnabled;s&&this.enableEventListeners(),this.state.eventsEnabled=s}return w(e,[{key:"update",value:function(){return z.call(this)}},{key:"destroy",value:function(){return G.call(this)}},{key:"enableEventListeners",value:function(){return $.call(this)}},{key:"disableEventListeners",value:function(){return J.call(this)}}]),e}();se.Utils=("undefined"!==typeof window?window:e).PopperUtils,se.placements=Q,se.Defaults=oe,t.a=se}).call(this,n(433))},function(e,t,n){"use strict";t.__esModule=!0;var r=a(n(21)),i=a(n(877));function a(e){return e&&e.__esModule?e:{default:e}}t.default=r.default.createContext||i.default,e.exports=t.default},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n(3),a=n(5),o=n(6),s=n(0),c=(n(16),n(13),n(17)),l=n(1),u=n(8),d=n(18),f=(n(12),n(19),n(20),n(28)),p=n(233),h=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).access=null,i.created=null,i.description=null,i.id=null,i.isInvitationOnly=!1,i.modified=null,i.owner=null,i.portal=null,i.snippet=null,i.sortField=null,i.sortOrder=null,i.tags=null,i.title=null,i}return Object(i.a)(n,[{key:"thumbnailUrl",get:function(){var e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl("".concat(e,"/info/").concat(t,"?f=json")):null}},{key:"url",get:function(){var e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}},{key:"fetchCategorySchema",value:function(e){var t=this;return this.portal._request(this.url+"/categorySchema",e).then((function(n){var r=n.categorySchema||[];return r.some((function(e){return"contentCategorySetsGroupQuery.LivingAtlas"===e.source}))?t._fetchCategorySchemaSet("LivingAtlas",e):r}))}},{key:"fetchMembers",value:function(e){return this.portal._request(this.url+"/users",e)}},{key:"getThumbnailUrl",value:function(e){var t=this.thumbnailUrl;return t&&e&&(t+="&w=".concat(e)),t}},{key:"toJSON",value:function(){throw new d.a("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}},{key:"queryItems",value:function(e,t){var n=Object(c.m)(p.a,e);return parseFloat(this.portal.currentVersion)>5?(n=n||new p.a,this.portal._queryPortal("/content/groups/".concat(this.id,"/search"),n,"PortalItem",t)):((n=n?n.clone():new p.a).query="group:"+this.id+(n.query?" "+n.query:""),this.portal.queryItems(n,t))}},{key:"_fetchCategorySchemaSet",value:function(e,t){var n=this;return this.portal._fetchSelf(this.portal.authMode,!0,t).then((function(e){var r=e.contentCategorySetsGroupQuery;if(r){var i=new p.a;return i.disableExtraQuery=!0,i.num=1,i.query=r,n.portal.queryGroups(i,t)}throw new d.a("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")})).then((function(n){if(n.total){var r=n.results[0],i=new p.a;return i.num=1,i.query='typekeywords:"'.concat(e,'"'),r.queryItems(i,t)}throw new d.a("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")})).then((function(e){return e.total?e.results[0].fetchData("json",t).then((function(e){var t=e&&e.categorySchema;return t&&t.length?t:[]})):[]}))}}]),n}(f.a);Object(s.a)([Object(l.b)()],h.prototype,"access",void 0),Object(s.a)([Object(l.b)({type:Date})],h.prototype,"created",void 0),Object(s.a)([Object(l.b)()],h.prototype,"description",void 0),Object(s.a)([Object(l.b)()],h.prototype,"id",void 0),Object(s.a)([Object(l.b)()],h.prototype,"isInvitationOnly",void 0),Object(s.a)([Object(l.b)({type:Date})],h.prototype,"modified",void 0),Object(s.a)([Object(l.b)()],h.prototype,"owner",void 0),Object(s.a)([Object(l.b)()],h.prototype,"portal",void 0),Object(s.a)([Object(l.b)()],h.prototype,"snippet",void 0),Object(s.a)([Object(l.b)()],h.prototype,"sortField",void 0),Object(s.a)([Object(l.b)()],h.prototype,"sortOrder",void 0),Object(s.a)([Object(l.b)()],h.prototype,"tags",void 0),Object(s.a)([Object(l.b)()],h.prototype,"thumbnail",void 0),Object(s.a)([Object(l.b)({readOnly:!0})],h.prototype,"thumbnailUrl",null),Object(s.a)([Object(l.b)()],h.prototype,"title",void 0),Object(s.a)([Object(l.b)({readOnly:!0})],h.prototype,"url",null);var b=h=Object(s.a)([Object(u.a)("esri.portal.PortalGroup")],h);t.default=b},function(e,t,n){"use strict";(function(e){var r=n(21),i=n.n(r),a=n(189),o=n(96),s=n.n(o),c=1073741823,l="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:{};function u(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var d=i.a.createContext||function(e,t){var n,i,o="__create-react-context-"+function(){var e="__global_unique_id__";return l[e]=(l[e]||0)+1}()+"__",d=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).emitter=u(t.props.value),t}Object(a.a)(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;((a=r)===(o=i)?0!==a||1/a===1/o:a!==a&&o!==o)?n=0:(n="function"===typeof t?t(r,i):c,0!==(n|=0)&&this.emitter.set(e.value,n))}var a,o},r.render=function(){return this.props.children},n}(r.Component);d.childContextTypes=((n={})[o]=s.a.object.isRequired,n);var f=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}Object(a.a)(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?c:t},r.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?c:e},r.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},r.getValue=function(){return this.context[o]?this.context[o].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(r.Component);return f.contextTypes=((i={})[o]=s.a.object,i),{Provider:d,Consumer:f}};t.a=d}).call(this,n(433))},function(e,t,n){var r=n(899);e.exports=p,e.exports.parse=a,e.exports.compile=function(e,t){return s(a(e,t),t)},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=f;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,o=0,s="",u=t&&t.delimiter||"/";null!=(n=i.exec(e));){var d=n[0],f=n[1],p=n.index;if(s+=e.slice(o,p),o=p+d.length,f)s+=f[1];else{var h=e[o],b=n[2],v=n[3],y=n[4],m=n[5],g=n[6],O=n[7];s&&(r.push(s),s="");var j=null!=b&&null!=h&&h!==b,w="+"===g||"*"===g,_="?"===g||"*"===g,k=n[2]||u,x=y||m;r.push({name:v||a++,prefix:b||"",delimiter:k,optional:_,repeat:w,partial:j,asterisk:!!O,pattern:x?l(x):O?".*":"[^"+c(k)+"]+?"})}}return o<e.length&&(s+=e.substr(o)),s&&r.push(s),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function s(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",d(t)));return function(t,i){for(var a="",s=t||{},c=(i||{}).pretty?o:encodeURIComponent,l=0;l<e.length;l++){var u=e[l];if("string"!==typeof u){var d,f=s[u.name];if(null==f){if(u.optional){u.partial&&(a+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(r(f)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(f)+"`");if(0===f.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var p=0;p<f.length;p++){if(d=c(f[p]),!n[l].test(d))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(d)+"`");a+=(0===p?u.prefix:u.delimiter)+d}}else{if(d=u.asterisk?encodeURI(f).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):c(f),!n[l].test(d))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+d+'"');a+=u.prefix+d}}else a+=u}return a}}function c(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function l(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function u(e,t){return e.keys=t,e}function d(e){return e&&e.sensitive?"":"i"}function f(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,o="",s=0;s<e.length;s++){var l=e[s];if("string"===typeof l)o+=c(l);else{var f=c(l.prefix),p="(?:"+l.pattern+")";t.push(l),l.repeat&&(p+="(?:"+f+p+")*"),o+=p=l.optional?l.partial?f+"("+p+")?":"(?:"+f+"("+p+"))?":f+"("+p+")"}}var h=c(n.delimiter||"/"),b=o.slice(-h.length)===h;return i||(o=(b?o.slice(0,-h.length):o)+"(?:"+h+"(?=$))?"),o+=a?"$":i&&b?"":"(?="+h+"|$)",u(new RegExp("^"+o,d(n)),t)}function p(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return u(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(p(e[i],t,n).source);return u(new RegExp("(?:"+r.join("|")+")",d(n)),t)}(e,t,n):function(e,t,n){return f(a(e,n),t,n)}(e,t,n)}},function(e,t,n){"use strict";function r(){var e=[];if("undefined"!==typeof window){var t=window;t.customElements&&(!t.Element||t.Element.prototype.closest&&t.Element.prototype.matches&&t.Element.prototype.remove&&t.Element.prototype.getRootNode)||e.push(n.e(39).then(n.t.bind(null,1408,7)));"function"===typeof Object.assign&&Object.entries&&Array.prototype.find&&Array.prototype.includes&&String.prototype.startsWith&&String.prototype.endsWith&&(!t.NodeList||t.NodeList.prototype.forEach)&&t.fetch&&function(){try{var e=new URL("b","http://a");return e.pathname="c%20d","http://a/c%20d"===e.href&&e.searchParams}catch(t){return!1}}()&&"undefined"!=typeof WeakMap||e.push(n.e(245).then(n.t.bind(null,1409,7)))}return Promise.all(e)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var i=n(294),a=function(e,t){return"undefined"===typeof window?Promise.resolve():(i.a&&i.a.supports&&i.a.supports("color","var(--c)")?Object(i.d)():n.e(243).then(n.t.bind(null,1410,7)).then((function(){return(i.k.$cssShim$=i.m.__cssshim)?i.k.$cssShim$.i():0}))).then((function(){return Object(i.e)(JSON.parse('[["calcite-card",[[1,"calcite-card",{"loading":[516],"selected":[1540],"selectable":[516],"intlLoading":[1,"intl-loading"],"intlSelect":[1,"intl-select"],"intlDeselect":[1,"intl-deselect"]}]]],["calcite-icon",[[1,"calcite-icon",{"icon":[513],"flipRtl":[516,"flip-rtl"],"scale":[513],"textLabel":[1,"text-label"],"pathData":[32],"visible":[32]}]]],["calcite-value-list_2",[[1,"calcite-value-list",{"disabled":[516],"dragEnabled":[516,"drag-enabled"],"filterEnabled":[516,"filter-enabled"],"filterPlaceholder":[513,"filter-placeholder"],"group":[1],"loading":[516],"multiple":[516],"selectionFollowsFocus":[4,"selection-follows-focus"],"selectedValues":[32],"dataForFilter":[32],"getSelectedItems":[64],"setFocus":[64]},[[0,"calciteListItemRemove","calciteListItemRemoveHandler"],[0,"calciteListItemChange","calciteListItemChangeHandler"],[0,"calciteListItemPropsChange","calciteListItemPropsChangeHandler"],[0,"calciteListItemValueChange","calciteListItemValueChangeHandler"]]],[1,"calcite-value-list-item",{"description":[513],"disabled":[516],"disableDeselect":[4,"disable-deselect"],"handleActivated":[1028,"handle-activated"],"icon":[513],"label":[513],"metadata":[16],"removable":[516],"selected":[1540],"value":[8],"toggleSelected":[64],"setFocus":[64]},[[0,"calciteListItemChange","calciteListItemChangeHandler"]]]]],["calcite-input-date-picker",[[1,"calcite-input-date-picker",{"value":[1],"headingLevel":[2,"heading-level"],"valueAsDate":[1040],"startAsDate":[1040],"endAsDate":[1040],"minAsDate":[1040],"maxAsDate":[1040],"min":[1],"max":[1],"active":[1540],"intlPrevMonth":[1,"intl-prev-month"],"intlNextMonth":[1,"intl-next-month"],"locale":[1],"scale":[513],"range":[516],"start":[1],"end":[1],"overlayPositioning":[1,"overlay-positioning"],"proximitySelectionDisabled":[4,"proximity-selection-disabled"],"layout":[513],"focusedInput":[32],"localeData":[32],"reposition":[64]},[[8,"focusin","focusInHandler"],[0,"calciteDaySelect","calciteDaySelectHandler"]]]]],["calcite-panel",[[1,"calcite-panel",{"dismissed":[1540],"beforeBack":[16],"disabled":[516],"dismissible":[516],"headingLevel":[2,"heading-level"],"showBackButton":[516,"show-back-button"],"intlBack":[1,"intl-back"],"heightScale":[513,"height-scale"],"widthScale":[513,"width-scale"],"loading":[516],"intlClose":[1,"intl-close"],"intlOptions":[1,"intl-options"],"heading":[1],"summary":[1],"menuOpen":[516,"menu-open"],"setFocus":[64]}]]],["calcite-tip_3",[[1,"calcite-tip",{"dismissed":[1540],"nonDismissible":[516,"non-dismissible"],"heading":[1],"headingLevel":[2,"heading-level"],"selected":[516],"intlClose":[1,"intl-close"]}],[1,"calcite-tip-manager",{"closed":[1540],"headingLevel":[2,"heading-level"],"intlClose":[1,"intl-close"],"intlDefaultTitle":[1,"intl-default-title"],"intlNext":[1,"intl-next"],"intlPaginationLabel":[1,"intl-pagination-label"],"intlPrevious":[1,"intl-previous"],"selectedIndex":[32],"tips":[32],"total":[32],"direction":[32],"groupTitle":[32],"nextTip":[64],"previousTip":[64]}],[1,"calcite-tip-group",{"groupTitle":[1,"group-title"]}]]],["calcite-block_2",[[1,"calcite-block",{"collapsible":[4],"disabled":[516],"dragHandle":[516,"drag-handle"],"heading":[1],"headingLevel":[2,"heading-level"],"intlCollapse":[1,"intl-collapse"],"intlExpand":[1,"intl-expand"],"intlLoading":[1,"intl-loading"],"loading":[516],"open":[1540],"status":[513],"summary":[1]}],[1,"calcite-block-section",{"intlCollapse":[1,"intl-collapse"],"intlExpand":[1,"intl-expand"],"open":[1540],"status":[513],"text":[1],"toggleDisplay":[513,"toggle-display"]}]]],["calcite-split-button",[[1,"calcite-split-button",{"appearance":[513],"color":[513],"disabled":[516],"dropdownIconType":[513,"dropdown-icon-type"],"dropdownLabel":[513,"dropdown-label"],"loading":[516],"primaryIconEnd":[513,"primary-icon-end"],"primaryIconFlipRtl":[513,"primary-icon-flip-rtl"],"primaryIconStart":[513,"primary-icon-start"],"primaryLabel":[513,"primary-label"],"primaryText":[513,"primary-text"],"scale":[513],"width":[513]}]]],["calcite-combobox_3",[[1,"calcite-combobox",{"active":[1540],"disabled":[516],"label":[1],"placeholder":[1],"maxItems":[2,"max-items"],"allowCustomValues":[4,"allow-custom-values"],"overlayPositioning":[1,"overlay-positioning"],"selectionMode":[513,"selection-mode"],"scale":[513],"items":[32],"groupItems":[32],"selectedItems":[32],"selectedItem":[32],"visibleItems":[32],"needsIcon":[32],"hideList":[32],"activeItemIndex":[32],"activeChipIndex":[32],"activeDescendant":[32],"text":[32],"open":[32],"maxScrollerHeight":[32],"reposition":[64],"setFocus":[64]},[[4,"click","documentClickHandler"],[0,"calciteComboboxItemChange","calciteComboboxItemChangeHandler"],[0,"keydown","keydownHandler"]]],[1,"calcite-combobox-item",{"disabled":[516],"selected":[1540],"active":[4],"ancestors":[1040],"guid":[1],"icon":[1],"textLabel":[513,"text-label"],"value":[8],"constant":[516],"toggleSelected":[64]}],[1,"calcite-combobox-item-group",{"ancestors":[1040],"label":[1]}]]],["calcite-tile-select_2",[[1,"calcite-tile-select",{"checked":[1540],"description":[513],"disabled":[516],"heading":[513],"hidden":[516],"icon":[513],"name":[513],"inputEnabled":[516,"input-enabled"],"inputAlignment":[513,"input-alignment"],"type":[513],"value":[8],"width":[513],"focused":[32],"setFocus":[64]},[[0,"calciteCheckboxChange","calciteCheckboxChangeEvent"],[0,"calciteCheckboxFocusedChange","calciteCheckboxFocusedChangeEvent"],[0,"calciteRadioButtonCheckedChange","calciteRadioButtonCheckedChangeEvent"],[0,"calciteRadioButtonFocusedChange","calciteRadioButtonFocusedChangeEvent"],[0,"click","click"],[1,"mouseenter","mouseenter"],[1,"mouseleave","mouseleave"]]],[1,"calcite-tile-select-group",{"layout":[513]}]]],["calcite-fab",[[1,"calcite-fab",{"appearance":[513],"color":[513],"disabled":[516],"icon":[1],"label":[1],"loading":[516],"scale":[513],"text":[1],"textEnabled":[516,"text-enabled"],"setFocus":[64]}]]],["calcite-inline-editable",[[6,"calcite-inline-editable",{"disabled":[516],"editingEnabled":[1540,"editing-enabled"],"loading":[1540],"controls":[516],"intlEnableEditing":[513,"intl-enable-editing"],"intlCancelEditing":[513,"intl-cancel-editing"],"intlConfirmChanges":[513,"intl-confirm-changes"],"scale":[1537],"afterConfirm":[16]},[[0,"calciteInputBlur","blurHandler"],[8,"click","handleLabelFocus"]]]]],["calcite-modal",[[1,"calcite-modal",{"active":[1540],"beforeClose":[16],"disableCloseButton":[4,"disable-close-button"],"intlClose":[1,"intl-close"],"docked":[516],"firstFocus":[16],"disableEscape":[4,"disable-escape"],"scale":[513],"width":[520],"fullscreen":[516],"color":[513],"backgroundColor":[513,"background-color"],"noPadding":[4,"no-padding"],"hasFooter":[32],"focusElement":[64],"setFocus":[64],"scrollContent":[64]},[[8,"keyup","handleEscape"]]]]],["calcite-tree_2",[[1,"calcite-tree-item",{"selected":[1540],"expanded":[1540],"parentExpanded":[4,"parent-expanded"],"depth":[1538],"hasChildren":[1540,"has-children"],"lines":[1540],"inputEnabled":[1540,"input-enabled"],"scale":[1537],"indeterminate":[516],"selectionMode":[32]},[[0,"click","onClick"],[0,"keydown","keyDownHandler"]]],[1,"calcite-tree",{"lines":[1540],"inputEnabled":[1028,"input-enabled"],"child":[1540],"scale":[1537],"selectionMode":[1537,"selection-mode"]},[[0,"focus","onFocus"],[0,"calciteTreeItemSelect","onClick"]]]]],["calcite-rating",[[1,"calcite-rating",{"scale":[513],"value":[1538],"readOnly":[516,"read-only"],"disabled":[516],"showChip":[516,"show-chip"],"count":[514],"average":[514],"intlRating":[1,"intl-rating"],"intlStars":[1,"intl-stars"],"hoverValue":[32],"focusValue":[32],"hasFocus":[32],"setFocus":[64]},[[8,"calciteLabelFocus","handleLabelFocus"],[0,"blur","blurHandler"]]]]],["calcite-option_3",[[1,"calcite-select",{"disabled":[516],"label":[1],"scale":[513],"selectedOption":[1040],"width":[513],"setFocus":[64]},[[0,"calciteOptionChange","handleOptionOrGroupChange"],[0,"calciteOptionGroupChange","handleOptionOrGroupChange"],[8,"calciteLabelFocus","handleLabelFocus"]]],[1,"calcite-option",{"disabled":[516],"label":[1025],"selected":[516],"value":[1032]}],[1,"calcite-option-group",{"disabled":[516],"label":[1]}]]],["calcite-accordion_2",[[1,"calcite-accordion-item",{"active":[1540],"itemTitle":[1,"item-title"],"itemSubtitle":[1,"item-subtitle"],"icon":[513]},[[0,"keydown","keyDownHandler"],[16,"calciteAccordionChange","updateActiveItemOnChange"]]],[1,"calcite-accordion",{"appearance":[513],"iconPosition":[513,"icon-position"],"iconType":[513,"icon-type"],"scale":[513],"selectionMode":[513,"selection-mode"]},[[0,"calciteAccordionItemKeyEvent","calciteAccordionItemKeyEvent"],[0,"calciteAccordionItemRegister","registerCalciteAccordionItem"],[0,"calciteAccordionItemSelect","updateActiveItemOnChange"]]]]],["calcite-radio-group_2",[[1,"calcite-radio-group-item",{"checked":[1540],"icon":[513],"iconFlipRtl":[516,"icon-flip-rtl"],"iconPosition":[513,"icon-position"],"value":[1032],"useFallback":[32]}],[1,"calcite-radio-group",{"appearance":[513],"disabled":[516],"layout":[513],"name":[1],"scale":[513],"selectedItem":[1040],"width":[513],"setFocus":[64]},[[8,"calciteLabelFocus","handleLabelFocus"],[0,"click","handleClick"],[0,"calciteRadioGroupItemChange","handleSelected"],[0,"keydown","handleKeyDown"]]]]],["calcite-stepper_2",[[1,"calcite-stepper-item",{"active":[1540],"complete":[516],"error":[4],"disabled":[4],"itemTitle":[1,"item-title"],"itemSubtitle":[1,"item-subtitle"],"layout":[1537],"icon":[1028],"numbered":[1028],"scale":[1537]},[[0,"keydown","keyDownHandler"],[16,"calciteStepperItemChange","updateActiveItemOnChange"]]],[1,"calcite-stepper",{"icon":[516],"layout":[513],"numbered":[516],"scale":[513],"requestedContent":[1040],"nextStep":[64],"prevStep":[64],"goToStep":[64],"startStep":[64],"endStep":[64]},[[0,"calciteStepperItemKeyEvent","calciteStepperItemKeyEvent"],[0,"calciteStepperItemRegister","registerItem"],[0,"calciteStepperItemSelect","updateItem"]]]]],["calcite-alert",[[1,"calcite-alert",{"active":[1540],"autoDismiss":[4,"auto-dismiss"],"autoDismissDuration":[513,"auto-dismiss-duration"],"color":[513],"icon":[520],"intlClose":[1,"intl-close"],"label":[1],"scale":[513],"queue":[32],"queueLength":[32],"queued":[32],"requestedIcon":[32],"setFocus":[64]},[[8,"calciteAlertSync","alertSync"],[8,"calciteAlertRegister","alertRegister"]]]]],["calcite-avatar",[[1,"calcite-avatar",{"scale":[513],"thumbnail":[1],"fullName":[1,"full-name"],"username":[1],"userId":[1,"user-id"],"error":[32]}]]],["calcite-input-message",[[1,"calcite-input-message",{"active":[516],"icon":[520],"scale":[1537],"status":[1537],"type":[513]}]]],["calcite-notice",[[1,"calcite-notice",{"active":[1540],"color":[513],"dismissible":[516],"icon":[520],"intlClose":[1,"intl-close"],"scale":[513],"width":[513],"setFocus":[64]}]]],["calcite-pagination",[[1,"calcite-pagination",{"num":[2],"start":[1026],"total":[2],"textLabelNext":[1,"text-label-next"],"textLabelPrevious":[1,"text-label-previous"],"scale":[513],"nextPage":[64],"previousPage":[64]}]]],["calcite-shell_3",[[1,"calcite-shell",{"contentBehind":[516,"content-behind"]}],[1,"calcite-shell-center-row",{"detached":[516],"heightScale":[513,"height-scale"],"position":[513]}],[1,"calcite-shell-panel",{"collapsed":[516],"detached":[516],"detachedHeightScale":[513,"detached-height-scale"],"widthScale":[513,"width-scale"],"position":[513]}]]],["calcite-flow",[[1,"calcite-flow",{"panelCount":[32],"flowDirection":[32],"panels":[32],"back":[64]},[[0,"calcitePanelBackClick","handleCalcitePanelBackClick"]]]]],["calcite-label",[[6,"calcite-label",{"alignment":[513],"status":[513],"for":[513],"scale":[513],"layout":[513],"disableSpacing":[4,"disable-spacing"],"disabled":[516]},[[0,"click","onClick"]]]]],["calcite-radio-button-group",[[1,"calcite-radio-button-group",{"disabled":[516],"hidden":[516],"layout":[513],"name":[513],"required":[516],"scale":[513]},[[0,"calciteRadioButtonChange","radioButtonChangeHandler"]]]]],["calcite-sortable-list",[[1,"calcite-sortable-list",{"handleSelector":[1,"handle-selector"],"disabled":[516],"loading":[516],"handleActivated":[32]},[[0,"calciteHandleNudge","calciteHandleNudgeHandler"]]]]],["calcite-input-time-picker_2",[[1,"calcite-input-time-picker",{"active":[1540],"disabled":[516],"hourDisplayFormat":[1,"hour-display-format"],"intlHour":[1,"intl-hour"],"intlHourDown":[1,"intl-hour-down"],"intlHourUp":[1,"intl-hour-up"],"intlMeridiem":[1,"intl-meridiem"],"intlMeridiemDown":[1,"intl-meridiem-down"],"intlMeridiemUp":[1,"intl-meridiem-up"],"intlMinute":[1,"intl-minute"],"intlMinuteDown":[1,"intl-minute-down"],"intlMinuteUp":[1,"intl-minute-up"],"intlSecond":[1,"intl-second"],"intlSecondDown":[1,"intl-second-down"],"intlSecondUp":[1,"intl-second-up"],"name":[1],"scale":[513],"step":[2],"value":[1025],"setFocus":[64]},[[0,"click","clickHandler"],[0,"keyup","keyUpHandler"],[0,"calciteTimePickerBlur","timePickerBlurHandler"],[0,"calciteTimePickerChange","timePickerChangeHandler"],[0,"calciteTimePickerFocus","timePickerFocusHandler"]]],[1,"calcite-time-picker",{"hour":[1025],"hourDisplayFormat":[513,"hour-display-format"],"intlHour":[1,"intl-hour"],"intlHourDown":[1,"intl-hour-down"],"intlHourUp":[1,"intl-hour-up"],"intlMeridiem":[1,"intl-meridiem"],"intlMeridiemDown":[1,"intl-meridiem-down"],"intlMeridiemUp":[1,"intl-meridiem-up"],"intlMinute":[1,"intl-minute"],"intlMinuteDown":[1,"intl-minute-down"],"intlMinuteUp":[1,"intl-minute-up"],"intlSecond":[1,"intl-second"],"intlSecondDown":[1,"intl-second-down"],"intlSecondUp":[1,"intl-second-up"],"minute":[1025],"second":[1025],"scale":[513],"step":[514],"meridiem":[32],"displayHour":[32],"editingHourWhileFocused":[32],"setFocus":[64]},[[0,"blur","hostBlurHandler"],[0,"focus","hostFocusHandler"],[0,"keydown","keyDownHandler"]]]]],["calcite-pick-list_3",[[1,"calcite-pick-list",{"disabled":[516],"filterEnabled":[516,"filter-enabled"],"filterPlaceholder":[513,"filter-placeholder"],"headingLevel":[2,"heading-level"],"loading":[516],"multiple":[516],"selectionFollowsFocus":[4,"selection-follows-focus"],"selectedValues":[32],"dataForFilter":[32],"getSelectedItems":[64],"setFocus":[64]},[[0,"calciteListItemRemove","calciteListItemRemoveHandler"],[0,"calciteListItemChange","calciteListItemChangeHandler"],[0,"calciteListItemPropsChange","calciteListItemPropsChangeHandler"],[0,"calciteListItemValueChange","calciteListItemValueChangeHandler"],[0,"focusout","calciteListFocusOutHandler"]]],[1,"calcite-pick-list-group",{"groupTitle":[513,"group-title"],"headingLevel":[2,"heading-level"]}],[1,"calcite-pick-list-item",{"description":[513],"disabled":[516],"disableDeselect":[4,"disable-deselect"],"icon":[513],"label":[513],"metadata":[16],"removable":[516],"selected":[1540],"intlRemove":[513,"intl-remove"],"value":[8],"toggleSelected":[64],"setFocus":[64]}]]],["calcite-dropdown_3",[[1,"calcite-dropdown-item",{"active":[1540],"iconFlipRtl":[513,"icon-flip-rtl"],"iconStart":[513,"icon-start"],"iconEnd":[513,"icon-end"],"href":[513],"setFocus":[64]},[[0,"click","onClick"],[0,"keydown","keyDownHandler"],[16,"calciteDropdownItemChange","updateActiveItemOnChange"]]],[1,"calcite-dropdown-group",{"groupTitle":[513,"group-title"],"selectionMode":[513,"selection-mode"],"scale":[513]},[[0,"calciteDropdownItemSelect","updateActiveItemOnChange"]]],[1,"calcite-dropdown",{"active":[1540],"disableCloseOnSelect":[516,"disable-close-on-select"],"disabled":[516],"maxItems":[2,"max-items"],"overlayPositioning":[1,"overlay-positioning"],"placement":[513],"scale":[513],"selectedItems":[1040],"type":[513],"width":[513],"reposition":[64]},[[8,"click","closeCalciteDropdownOnClick"],[0,"calciteDropdownCloseRequest","closeCalciteDropdownOnEvent"],[8,"calciteDropdownOpen","closeCalciteDropdownOnOpenEvent"],[1,"mouseenter","mouseEnterHandler"],[1,"mouseleave","mouseLeaveHandler"],[0,"calciteDropdownItemKeyEvent","calciteDropdownItemKeyEvent"],[0,"calciteDropdownItemSelect","handleItemSelect"]]]]],["calcite-graph_2",[[1,"calcite-slider",{"disabled":[516],"min":[514],"max":[514],"value":[1538],"minValue":[1026,"min-value"],"maxValue":[1026,"max-value"],"minLabel":[1,"min-label"],"maxLabel":[1,"max-label"],"snap":[4],"step":[2],"pageStep":[2,"page-step"],"ticks":[2],"labelTicks":[516,"label-ticks"],"labelHandles":[516,"label-handles"],"precise":[4],"histogram":[16],"hasHistogram":[1540,"has-histogram"],"tickValues":[32],"activeProp":[32],"minMaxValueRange":[32],"minValueDragRange":[32],"maxValueDragRange":[32],"setFocus":[64]},[[8,"calciteLabelFocus","handleLabelFocus"],[0,"keydown","keyDownHandler"],[1,"mousedown","mouseHandler"],[0,"click","mouseHandler"]]],[0,"calcite-graph",{"data":[16],"width":[2],"height":[2],"highlightMin":[2,"highlight-min"],"highlightMax":[2,"highlight-max"]}]]],["calcite-handle",[[1,"calcite-handle",{"activated":[1540],"textTitle":[513,"text-title"],"setFocus":[64]}]]],["calcite-switch",[[1,"calcite-switch",{"disabled":[516],"name":[513],"scale":[513],"switched":[1540],"value":[520],"guid":[32],"tabindex":[32],"setFocus":[64]},[[8,"calciteLabelFocus","handleLabelFocus"],[0,"click","onClick"],[0,"keydown","keyDownHandler"]]]]],["calcite-chip",[[1,"calcite-chip",{"appearance":[513],"color":[513],"dismissible":[516],"dismissLabel":[1,"dismiss-label"],"icon":[513],"iconFlipRtl":[516,"icon-flip-rtl"],"scale":[513],"value":[8],"setFocus":[64]}]]],["calcite-link",[[1,"calcite-link",{"disabled":[516],"href":[513],"iconEnd":[513,"icon-end"],"iconFlipRtl":[513,"icon-flip-rtl"],"iconStart":[513,"icon-start"],"setFocus":[64]}]]],["calcite-tile",[[1,"calcite-tile",{"active":[516],"description":[513],"disabled":[516],"embed":[516],"focused":[516],"heading":[513],"hidden":[516],"href":[513],"icon":[513]}]]],["calcite-radio_2",[[2,"calcite-radio-button",{"checked":[1540],"disabled":[516],"focused":[1540],"guid":[1537],"hidden":[516],"hovered":[1540],"label":[1],"name":[513],"required":[516],"scale":[513],"value":[8],"setFocus":[64],"emitCheckedChange":[64]},[[0,"click","check"],[1,"mouseenter","mouseenter"],[1,"mouseleave","mouseleave"]]],[1,"calcite-radio",{"checked":[516],"disabled":[516],"focused":[516],"hidden":[516],"hovered":[516],"scale":[513]}]]],["calcite-checkbox",[[1,"calcite-checkbox",{"checked":[1540],"disabled":[516],"guid":[1537],"hovered":[1540],"indeterminate":[1540],"label":[1],"name":[513],"scale":[513],"value":[8],"focused":[32],"setFocus":[64]},[[0,"click","onClick"],[1,"mouseenter","mouseenter"],[1,"mouseleave","mouseleave"]]]]],["calcite-button",[[1,"calcite-button",{"appearance":[513],"color":[513],"disabled":[516],"href":[513],"iconEnd":[513,"icon-end"],"iconFlipRtl":[513,"icon-flip-rtl"],"iconStart":[513,"icon-start"],"intlLoading":[1,"intl-loading"],"alignment":[513],"loading":[516],"round":[516],"scale":[513],"splitChild":[520,"split-child"],"width":[513],"hasContent":[32],"setFocus":[64]}]]],["calcite-progress",[[1,"calcite-progress",{"type":[1],"value":[2],"text":[1],"reversed":[4]}]]],["calcite-input",[[6,"calcite-input",{"alignment":[513],"autofocus":[4],"clearable":[516],"disabled":[516],"groupSeparator":[4,"group-separator"],"icon":[520],"iconFlipRtl":[516,"icon-flip-rtl"],"loading":[516],"locale":[1],"localeFormat":[4,"locale-format"],"max":[514],"min":[514],"maxlength":[514],"maxLength":[514,"max-length"],"minLength":[514,"min-length"],"name":[513],"numberButtonType":[513,"number-button-type"],"placeholder":[1],"prefixText":[1,"prefix-text"],"required":[4],"scale":[1537],"status":[1537],"step":[1544],"suffixText":[1,"suffix-text"],"type":[513],"value":[1025],"localizedValue":[32],"setFocus":[64]},[[0,"keydown","keyDownHandler"]]]]],["calcite-tab_4",[[1,"calcite-tab-title",{"active":[1540],"disabled":[516],"iconEnd":[513,"icon-end"],"iconFlipRtl":[513,"icon-flip-rtl"],"iconStart":[513,"icon-start"],"layout":[1537],"position":[1537],"scale":[1537],"bordered":[1540],"tab":[513],"controls":[32],"hasText":[32],"getTabIndex":[64],"getTabIdentifier":[64],"updateAriaInfo":[64]},[[16,"calciteTabChange","tabChangeHandler"],[0,"click","onClick"],[0,"keydown","keyDownHandler"]]],[1,"calcite-tab",{"tab":[513],"active":[1540],"scale":[1537],"labeledBy":[32],"getTabIndex":[64],"updateAriaInfo":[64]},[[16,"calciteTabChange","tabChangeHandler"]]],[1,"calcite-tab-nav",{"storageId":[1,"storage-id"],"syncId":[1,"sync-id"],"scale":[1537],"layout":[1537],"position":[1537],"bordered":[1540],"indicatorOffset":[1026,"indicator-offset"],"indicatorWidth":[1026,"indicator-width"],"selectedTab":[32],"selectedTabEl":[32]},[[9,"resize","resizeHandler"],[0,"calciteTabsFocusPrevious","focusPreviousTabHandler"],[0,"calciteTabsFocusNext","focusNextTabHandler"],[0,"calciteTabsActivate","activateTabHandler"],[0,"calciteTabTitleRegister","updateTabTitles"],[16,"calciteTabChange","globalTabChangeHandler"]]],[1,"calcite-tabs",{"layout":[513],"position":[513],"scale":[513],"bordered":[1540],"titles":[32],"tabs":[32]},[[0,"calciteTabTitleRegister","calciteTabTitleRegister"],[16,"calciteTabTitleUnregister","calciteTabTitleUnregister"],[0,"calciteTabRegister","calciteTabRegister"],[16,"calciteTabUnregister","calciteTabUnregister"]]]]],["calcite-tooltip_2",[[1,"calcite-tooltip",{"label":[1],"offsetDistance":[514,"offset-distance"],"offsetSkidding":[514,"offset-skidding"],"open":[516],"overlayPositioning":[1,"overlay-positioning"],"placement":[513],"referenceElement":[1,"reference-element"],"_referenceElement":[32],"reposition":[64]}],[4,"calcite-tooltip-manager",{"selector":[1]},[[4,"keyup","keyUpHandler"],[3,"mouseover","mouseEnterShow"],[3,"mouseout","mouseLeaveHide"],[2,"click","clickHandler"],[2,"focus","focusShow"],[2,"blur","blurHide"]]]]],["calcite-loader",[[1,"calcite-loader",{"active":[516],"inline":[516],"label":[1],"scale":[513],"type":[513],"value":[2],"text":[1],"noPadding":[4,"no-padding"]}]]],["calcite-color-picker_3",[[1,"calcite-color-picker",{"allowEmpty":[4,"allow-empty"],"appearance":[513],"color":[1040],"format":[1],"hideHex":[4,"hide-hex"],"hideChannels":[4,"hide-channels"],"hideSaved":[4,"hide-saved"],"intlB":[1,"intl-b"],"intlBlue":[1,"intl-blue"],"intlDeleteColor":[1,"intl-delete-color"],"intlG":[1,"intl-g"],"intlGreen":[1,"intl-green"],"intlH":[1,"intl-h"],"intlHsv":[1,"intl-hsv"],"intlHex":[1,"intl-hex"],"intlHue":[1,"intl-hue"],"intlNoColor":[1,"intl-no-color"],"intlR":[1,"intl-r"],"intlRed":[1,"intl-red"],"intlRgb":[1,"intl-rgb"],"intlS":[1,"intl-s"],"intlSaturation":[1,"intl-saturation"],"intlSaveColor":[1,"intl-save-color"],"intlSaved":[1,"intl-saved"],"intlV":[1,"intl-v"],"intlValue":[1,"intl-value"],"scale":[513],"storageId":[1,"storage-id"],"value":[1025],"colorFieldAndSliderInteractive":[32],"channelMode":[32],"channels":[32],"dimensions":[32],"savedColors":[32],"colorFieldScopeTop":[32],"colorFieldScopeLeft":[32],"scopeOrientation":[32],"hueScopeLeft":[32],"hueScopeTop":[32],"setFocus":[64]},[[2,"keydown","handleChannelKeyUpOrDown"],[2,"keyup","handleChannelKeyUpOrDown"]]],[1,"calcite-color-picker-hex-input",{"allowEmpty":[4,"allow-empty"],"intlHex":[1,"intl-hex"],"intlNoColor":[1,"intl-no-color"],"scale":[513],"value":[1537],"internalColor":[32],"setFocus":[64]},[[2,"keydown","onInputKeyDown"]]],[1,"calcite-color-picker-swatch",{"active":[516],"color":[1],"scale":[513]}]]],["calcite-popover_2",[[4,"calcite-popover-manager",{"selector":[1],"autoClose":[516,"auto-close"]},[[10,"click","closeOpenPopovers"]]],[1,"calcite-popover",{"closeButton":[516,"close-button"],"dismissible":[516],"disableFlip":[516,"disable-flip"],"disablePointer":[516,"disable-pointer"],"flipPlacements":[16],"heading":[1],"headingLevel":[2,"heading-level"],"label":[1],"offsetDistance":[514,"offset-distance"],"offsetSkidding":[514,"offset-skidding"],"open":[1540],"overlayPositioning":[1,"overlay-positioning"],"placement":[513],"referenceElement":[1,"reference-element"],"intlClose":[1,"intl-close"],"_referenceElement":[32],"reposition":[64],"setFocus":[64],"toggle":[64]}]]],["calcite-scrim",[[1,"calcite-scrim",{"intlLoading":[1,"intl-loading"],"loading":[516]}]]],["calcite-filter",[[1,"calcite-filter",{"data":[16],"disabled":[516],"intlClear":[1,"intl-clear"],"intlLabel":[1,"intl-label"],"placeholder":[1],"empty":[32],"setFocus":[64]}]]],["calcite-date-picker_4",[[1,"calcite-date-picker",{"activeRange":[1,"active-range"],"value":[1],"headingLevel":[2,"heading-level"],"valueAsDate":[1040],"startAsDate":[1040],"endAsDate":[1040],"minAsDate":[1040],"maxAsDate":[1040],"min":[1],"max":[1],"intlPrevMonth":[1,"intl-prev-month"],"intlNextMonth":[1,"intl-next-month"],"locale":[1],"scale":[513],"range":[516],"start":[1],"end":[1025],"proximitySelectionDisabled":[4,"proximity-selection-disabled"],"activeDate":[32],"activeStartDate":[32],"activeEndDate":[32],"localeData":[32],"hoverRange":[32]},[[8,"focusin","focusInHandler"]]],[1,"calcite-date-picker-month",{"selectedDate":[16],"activeDate":[16],"startDate":[16],"endDate":[16],"min":[16],"max":[16],"scale":[513],"localeData":[16],"hoverRange":[8,"hover-range"]},[[1,"mouseout","mouseoutHandler"]]],[1,"calcite-date-picker-month-header",{"selectedDate":[16],"activeDate":[16],"headingLevel":[2,"heading-level"],"min":[16],"max":[16],"locale":[1],"intlPrevMonth":[1,"intl-prev-month"],"intlNextMonth":[1,"intl-next-month"],"scale":[513],"localeData":[16],"nextMonthDate":[32],"prevMonthDate":[32]}],[1,"calcite-date-picker-day",{"day":[2],"disabled":[516],"currentMonth":[516,"current-month"],"selected":[516],"highlighted":[516],"range":[516],"startOfRange":[516,"start-of-range"],"endOfRange":[516,"end-of-range"],"rangeHover":[516,"range-hover"],"active":[516],"localeData":[16],"scale":[513],"value":[16]},[[1,"mouseover","mouseoverHandler"]]]]],["calcite-action_5",[[1,"calcite-action-bar",{"expandDisabled":[516,"expand-disabled"],"expanded":[1540],"intlExpand":[1,"intl-expand"],"intlCollapse":[1,"intl-collapse"],"overflowActionsDisabled":[4,"overflow-actions-disabled"],"position":[513],"setFocus":[64]}],[1,"calcite-action-pad",{"expandDisabled":[516,"expand-disabled"],"expanded":[1540],"layout":[513],"intlExpand":[1,"intl-expand"],"intlCollapse":[1,"intl-collapse"],"position":[513],"setFocus":[64]}],[1,"calcite-action-group",{"expanded":[516],"layout":[513],"columns":[514],"intlMore":[1,"intl-more"],"menuOpen":[1540,"menu-open"]}],[1,"calcite-action-menu",{"expanded":[516],"flipPlacements":[16],"label":[1],"open":[1540],"overlayPositioning":[1,"overlay-positioning"],"placement":[513],"scale":[513],"activeMenuItemIndex":[32],"setFocus":[64]},[[8,"click","closeCalciteActionMenuOnClick"]]],[1,"calcite-action",{"appearance":[513],"active":[516],"alignment":[513],"compact":[516],"disabled":[516],"icon":[1],"indicator":[516],"intlLoading":[1,"intl-loading"],"label":[1],"loading":[516],"scale":[513],"text":[1],"textEnabled":[516,"text-enabled"],"setFocus":[64]}]]]]'),t)}))};!function(){if("undefined"!==typeof window&&void 0!==window.Reflect&&void 0!==window.customElements){var e=HTMLElement;window.HTMLElement=function(){return Reflect.construct(e,[],this.constructor)},HTMLElement.prototype=e.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,e)}}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return _})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return F})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return R})),n.d(t,"g",(function(){return o})),n.d(t,"h",(function(){return T})),n.d(t,"i",(function(){return S})),n.d(t,"j",(function(){return x})),n.d(t,"k",(function(){return C})),n.d(t,"l",(function(){return s})),n.d(t,"m",(function(){return k})),n.d(t,"n",(function(){return r})),n.d(t,"o",(function(){return L})),n.d(t,"p",(function(){return i})),n.d(t,"q",(function(){return A})),n.d(t,"r",(function(){return h})),n.d(t,"s",(function(){return b})),n.d(t,"t",(function(){return v})),n.d(t,"u",(function(){return y})),n.d(t,"v",(function(){return p})),n.d(t,"w",(function(){return f})),n.d(t,"x",(function(){return m})),n.d(t,"y",(function(){return g})),n.d(t,"z",(function(){return O})),n.d(t,"A",(function(){return j})),n.d(t,"B",(function(){return d})),n.d(t,"C",(function(){return l})),n.d(t,"D",(function(){return E})),n.d(t,"E",(function(){return a})),n.d(t,"F",(function(){return M})),n.d(t,"G",(function(){return I})),n.d(t,"H",(function(){return P}));var r=1e-30,i=4294967295,a=512,o=8,s=29,c=16,l=8,u={metrics:{width:15,height:17,left:0,top:-7,advance:14}},d=0,f=0,p=0,h=1,b=2,v=3,y=4,m=5,g=6,O=5,j=6,w=1,_=2,k=2,x=1,S=2,T=4,E=2.5,C=6,P=5,I=6,M=1.15,A=2,R=7,L=500,F=128},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return p}));n(16);var r=n(4),i=n(120),a=n(130),o=n(116),s=n(209),c=n(324),l=o.default.fromJSON(c.a),u=i.default.fromJSON(c.c),d=a.default.fromJSON(c.b),f=s.a.fromJSON(c.d);function p(e){if(Object(r.j)(e))return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return l;case"polyline":return u;case"polygon":case"extent":return d}return null}var h=o.default.fromJSON(c.e),b=i.default.fromJSON(c.g),v=a.default.fromJSON(c.f)},function(e,t,n){"use strict";var r=n(14),i=n(31),a=n(2),o=n(3),s=n(59),c=n(215);function l(e,t){return[e,t]}function u(e,t,n){return e[0]=t,e[1]=n,e}function d(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}var f=new c.a("0/0/0/0"),p=function(){function e(t,n,r,i,o,s,c,l,u,d,f,p){Object(a.a)(this,e),this.level=t,this.resolution=n,this.scale=r,this.origin=i,this.first=o,this.last=s,this.size=c,this.norm=l,this.worldStart=u,this.worldEnd=d,this.worldSize=f,this.wrap=p}return Object(o.a)(e,[{key:"normalizeCol",value:function(e){if(!this.wrap)return e;var t=this.worldSize[0];return e<0?t-1-Math.abs((e+1)%t):e%t}},{key:"denormalizeCol",value:function(e,t){return this.wrap?this.worldSize[0]*t+e:e}},{key:"getWorldForColumn",value:function(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}},{key:"getFirstColumnForWorld",value:function(e){return e*this.worldSize[0]+this.first[0]}},{key:"getLastColumnForWorld",value:function(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}},{key:"getColumnForX",value:function(e){return(e-this.origin[0])/this.norm[0]}},{key:"getXForColumn",value:function(e){return this.origin[0]+e*this.norm[0]}},{key:"getRowForY",value:function(e){return(this.origin[1]-e)/this.norm[1]}},{key:"getYForRow",value:function(e){return this.origin[1]-e*this.norm[1]}},{key:"getTileBounds",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];f.set(t);var r=n?f.col:this.denormalizeCol(f.col,f.world),i=f.row;return d(e,this.getXForColumn(r),this.getYForRow(i+1),this.getXForColumn(r+1),this.getYForRow(i)),e}},{key:"getTileCoords",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];f.set(t);var r=n?f.col:this.denormalizeCol(f.col,f.world);return Array.isArray(e)?u(e,this.getXForColumn(r),this.getYForRow(f.row)):(e.x=this.getXForColumn(r),e.y=this.getYForRow(f.row)),e}}],[{key:"create",value:function(t,n,r){var i,a,o,c,d=Object(s.d)(t.spatialReference),f=l(t.origin.x,t.origin.y),p=l(t.size[0]*n.resolution,t.size[1]*n.resolution),h=l(-1/0,-1/0),b=l(1/0,1/0),v=l(1/0,1/0);return r&&(u(h,Math.max(0,Math.floor((r.xmin-f[0])/p[0])),Math.max(0,Math.floor((f[1]-r.ymax)/p[1]))),u(b,Math.max(0,Math.floor((r.xmax-f[0])/p[0])),Math.max(0,Math.floor((f[1]-r.ymin)/p[1]))),u(v,b[0]-h[0]+1,b[1]-h[1]+1)),t.isWrappable?(i=l(Math.ceil(Math.round((d.valid[1]-d.valid[0])/n.resolution)/t.size[0]),v[1]),a=l(Math.floor((d.origin[0]-f[0])/p[0]),h[1]),o=l(i[0]+a[0]-1,b[1]),c=!0):(a=h,o=b,i=v,c=!1),new e(n.level,n.resolution,n.scale,f,h,b,v,p,a,o,i,c)}}]),e}(),h=n(431),b=function e(t,n,r){Object(a.a)(this,e),this.row=t,this.colFrom=n,this.colTo=r},v=new c.a("0/0/0/0"),y=function(){function e(t,n,r,i,o,s,c,l){Object(a.a)(this,e),this.x=t,this.ymin=n,this.ymax=r,this.invM=i,this.leftAdjust=o,this.rightAdjust=s,this.leftBound=c,this.rightBound=l}return Object(o.a)(e,[{key:"incrRow",value:function(){this.x+=this.invM}},{key:"getLeftCol",value:function(){return Math.max(this.x+this.leftAdjust,this.leftBound)}},{key:"getRightCol",value:function(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}],[{key:"create",value:function(t,n){var r;t[1]>n[1]&&(t=(r=[n,t])[0],n=r[1]);var a=t,o=Object(i.a)(a,2),s=o[0],c=o[1],l=n,u=Object(i.a)(l,2),d=u[0],f=u[1],p=d-s,h=f-c,b=0!==h?p/h:0,v=(Math.ceil(c)-c)*b,y=(Math.floor(c)-c)*b;return new e(s,Math.floor(c),Math.ceil(f),b,p<0?v:y,p<0?y:v,p<0?d:s,p<0?s:d)}}]),e}(),m=[[0,0],[0,0],[0,0],[0,0]],g=function(){function e(t,n){var r=this;Object(a.a)(this,e),this.tileInfo=t,this.fullExtent=n,this.scales=[],this._lodInfos=null,this._infoByScale={},this._infoByLevel={};var i=t.lods.slice();i.sort((function(e,t){return t.scale-e.scale}));var o=this._lodInfos=i.map((function(e){return p.create(t,e,n)}));i.forEach((function(e,t){r._infoByLevel[e.level]=o[t],r._infoByScale[e.scale]=o[t],r.scales[t]=e.scale}),this),this._wrap=t.isWrappable}return Object(o.a)(e,[{key:"spatialReference",get:function(){return this.tileInfo.spatialReference}},{key:"getLODInfoAt",value:function(e){return this._infoByLevel["number"==typeof e?e:e.level]}},{key:"getTileBounds",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];v.set(t);var r=this._infoByLevel[v.level];return r?r.getTileBounds(e,v,n):e}},{key:"getTileCoords",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];v.set(t);var r=this._infoByLevel[v.level];return r?r.getTileCoords(e,v,n):e}},{key:"getTileCoverage",value:function(e){var t,n,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:192,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"closest",s="closest"===o?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),c=h.a.pool.acquire(s),l=this._wrap,u=1/0,d=-1/0,f=c.spans;m[0][0]=m[0][1]=m[1][1]=m[3][0]=-a,m[1][0]=m[2][0]=e.size[0]+a,m[2][1]=m[3][1]=e.size[1]+a;var p,v=Object(r.a)(m);try{for(v.s();!(p=v.n()).done;){var g=p.value;e.toMap(g,g),g[0]=s.getColumnForX(g[0]),g[1]=s.getRowForY(g[1])}}catch(I){v.e(I)}finally{v.f()}for(var O=[],j=3,w=0;w<4;w++)if(m[w][1]!==m[j][1]){var _=y.create(m[w],m[j]);u=Math.min(_.ymin,u),d=Math.max(_.ymax,d),void 0===O[_.ymin]&&(O[_.ymin]=[]),O[_.ymin].push(_),j=w}else j=w;if(null==u||null==d||d-u>100)return null;var k=[];for(t=u;t<d;){null!=O[t]&&(k=k.concat(O[t])),n=1/0,i=-1/0;for(var x=k.length-1;x>=0;x--){var S=k[x];n=Math.min(n,S.getLeftCol()),i=Math.max(i,S.getRightCol())}if(n=Math.floor(n),i=Math.floor(i),t>=s.first[1]&&t<=s.last[1])if(l)if(s.size[0]<s.worldSize[0])for(var T=Math.floor(i/s.worldSize[0]),E=Math.floor(n/s.worldSize[0]);E<=T;E++)f.push(new b(t,Math.max(s.getFirstColumnForWorld(E),n),Math.min(s.getLastColumnForWorld(E),i)));else f.push(new b(t,n,i));else n>s.last[0]||i<s.first[0]||(n=Math.max(n,s.first[0]),i=Math.min(i,s.last[0]),f.push(new b(t,n,i)));t+=1;for(var C=k.length-1;C>=0;C--){var P=k[C];P.ymax>=t?P.incrRow():k.splice(C,1)}}return c}},{key:"getTileParentId",value:function(e){v.set(e);var t=this._infoByLevel[v.level],n=this._lodInfos.indexOf(t)-1;return n<0?null:(this._getTileIdAtLOD(v,this._lodInfos[n],v),v.id)}},{key:"getTileResolution",value:function(e){var t=this._infoByLevel["object"==typeof e?e.level:e];return t?t.resolution:-1}},{key:"getTileScale",value:function(e){var t=this._infoByLevel[e.level];return t?t.scale:-1}},{key:"intersects",value:function(e,t){v.set(t);var n=this._infoByLevel[v.level],a=e.lodInfo;if(a.resolution>n.resolution){this._getTileIdAtLOD(v,a,v);var o,s=a.denormalizeCol(v.col,v.world),c=Object(r.a)(e.spans);try{for(c.s();!(o=c.n()).done;){var l=o.value;if(l.row===v.row&&l.colFrom<=s&&l.colTo>=s)return!0}}catch(_){c.e(_)}finally{c.f()}}if(a.resolution<n.resolution){var u=e.spans.reduce((function(e,t){return e[0]=Math.min(e[0],t.row),e[1]=Math.max(e[1],t.row),e[2]=Math.min(e[2],t.colFrom),e[3]=Math.max(e[3],t.colTo),e}),[1/0,-1/0,1/0,-1/0]),d=Object(i.a)(u,4),f=d[0],p=d[1],h=d[2],b=d[3],y=n.denormalizeCol(v.col,v.world),m=a.getColumnForX(n.getXForColumn(y)),g=a.getRowForY(n.getYForRow(v.row)),O=a.getColumnForX(n.getXForColumn(y+1))-1,j=a.getRowForY(n.getYForRow(v.row+1))-1;return!(m>b||O<h||g>p||j<f)}var w=a.denormalizeCol(v.col,v.world);return e.spans.some((function(e){return e.row===v.row&&e.colFrom<=w&&e.colTo>=w}))}},{key:"normalizeBounds",value:function(e,t,n){if(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],this._wrap){var r=Object(s.d)(this.tileInfo.spatialReference),i=-n*(r.valid[1]-r.valid[0]);e[0]+=i,e[2]+=i}return e}},{key:"getSmallestInfoForScale",value:function(e){var t=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>t[0])return this._infoByScale[t[0]];for(var n=1;n<t.length-1;n++)if(e>t[n]+1e-6)return this._infoByScale[t[n-1]];return this._infoByScale[t[t.length-1]]}},{key:"getClosestInfoForScale",value:function(e){var t=this.scales;return this._infoByScale[e]||(e=t.reduce((function(t,n){return Math.abs(n-e)<Math.abs(t-e)?n:t}),t[0])),this._infoByScale[e]}},{key:"scaleToLevel",value:function(e){var t=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(var n=t.length-1;n>=0;n--)if(e<t[n])return n===t.length-1?this._infoByScale[t[t.length-1]].level:this._infoByScale[t[n]].level+(t[n]-e)/(t[n]-t[n+1]);return this._infoByScale[t[0]].level}},{key:"scaleToZoom",value:function(e){return this.tileInfo.scaleToZoom(e)}},{key:"_getTileIdAtLOD",value:function(e,t,n){var r=this._infoByLevel[n.level];return e.set(n),t.resolution<r.resolution?null:(t.resolution===r.resolution||(e.level=t.level,e.col=Math.floor(n.col*r.resolution/t.resolution+.01),e.row=Math.floor(n.row*r.resolution/t.resolution+.01)),e)}}]),e}();t.a=g},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r,i,a=n(29),o=n(34);function s(e,t){t.linearDepth?e.vertex.code.add(Object(o.a)(r||(r=Object(a.a)(["\n    vec4 transformPositionWithDepth(mat4 proj, mat4 view, vec3 pos, vec2 nearFar, out float depth) {\n      vec4 eye = view * vec4(pos, 1.0);\n      depth = (-eye.z - nearFar[0]) / (nearFar[1] - nearFar[0]) ;\n      return proj * eye;\n    }\n    "])))):e.vertex.code.add(Object(o.a)(i||(i=Object(a.a)(["\n    vec4 transformPosition(mat4 proj, mat4 view, vec3 pos) {\n      // Make sure the order of operations is the same as in transformPositionWithDepth.\n      return proj * (view * vec4(pos, 1.0));\n    }\n    "]))))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(31),i=n(2),a=n(3),o=n(5),s=n(6),c=(n(16),n(158)),l=n(215),u=n(295),d=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,r,a){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a;return Object(i.a)(this,n),(o=t.call(this)).triangleCountReportedInDebug=0,o.transforms={dvs:Object(u.b)(),tileMat3:Object(u.b)()},o.triangleCount=0,o.key=new l.a(e),o.bounds=r,o.size=a,o.coordRange=s,o}return Object(a.a)(n,[{key:"destroy",value:function(){this.texture&&(this.texture.dispose(),this.texture=null)}},{key:"coords",get:function(){return this._coords}},{key:"bounds",get:function(){return this._bounds},set:function(e){this._coords=[e[0],e[3]],this._bounds=e}},{key:"setTransform",value:function(e,t){var n=t/(e.resolution*e.pixelRatio),i=this.transforms.tileMat3,a=e.toScreenNoRotation([0,0],this.coords),o=Object(r.a)(a,2),s=o[0],l=o[1],u=this.size[0]/this.coordRange[0]*n,d=this.size[1]/this.coordRange[1]*n;Object(c.j)(i,u,0,0,0,d,0,s,l,1),Object(c.g)(this.transforms.dvs,e.displayViewMat3,i)}}]),n}(n(604).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(2),i=n(3),a=n(5),o=n(6),s=n(16),c=n(24),l=n(78),u=1/Object(s.a)("mapview-transitions-duration"),d=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments))._fadeOutResolver=null,e._fadeInResolver=null,e._clips=null,e.computedVisible=!0,e.computedOpacity=1,e.fadeTransitionEnabled=!1,e.inFadeTransition=!1,e._isReady=!1,e._opacity=1,e._stage=null,e._visible=!0,e}return Object(i.a)(n,[{key:"clips",get:function(){return this._clips},set:function(e){this._clips=e,this.requestRender()}},{key:"isReady",get:function(){return this._isReady}},{key:"opacity",get:function(){return this._opacity},set:function(e){this._opacity!==e&&(this._opacity=Math.min(1,Math.max(e,0)),this.requestRender())}},{key:"stage",get:function(){return this._stage},set:function(e){if(this._stage!==e){var t=this._stage;this._stage=e,e?this._stage.untrashDisplayObject(this)||(this.onAttach(),this.emit("attach")):t.trashDisplayObject(this)}}},{key:"visible",get:function(){return this._visible},set:function(e){this._visible!==e&&(this._visible=e,this.requestRender())}},{key:"fadeIn",value:function(){return this._fadeInResolver||(this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null),this.computedOpacity=0,this.fadeTransitionEnabled=!0,this._fadeInResolver=Object(c.g)(),this.requestRender()),this._fadeInResolver.promise}},{key:"fadeOut",value:function(){return this._fadeOutResolver||(this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null),this.fadeTransitionEnabled=!0,this._fadeOutResolver=Object(c.g)(),this.requestRender()),this._fadeOutResolver.promise}},{key:"beforeRender",value:function(e){this.updateTransitionProperties(e.deltaTime,e.state.scale)}},{key:"afterRender",value:function(e){this._fadeInResolver&&this.computedOpacity===this.opacity?(this._fadeInResolver(),this._fadeInResolver=null):this._fadeOutResolver&&0===this.computedOpacity&&(this._fadeOutResolver(),this._fadeOutResolver=null)}},{key:"remove",value:function(){var e;null==(e=this.parent)||e.removeChild(this)}},{key:"setTransform",value:function(e){}},{key:"processRender",value:function(e){this.stage&&this.computedVisible&&this.doRender(e)}},{key:"requestRender",value:function(){this.stage&&this.stage.requestRender()}},{key:"processDetach",value:function(){this.onDetach(),this.emit("detach")}},{key:"updateTransitionProperties",value:function(e,t){if(this.fadeTransitionEnabled){var n=this._fadeOutResolver||!this.visible?0:this.opacity,r=this.computedOpacity;if(r===n)this.computedVisible=this.visible;else{var i=e*u;this.computedOpacity=r>n?Math.max(n,r-i):Math.min(n,r+i),this.computedVisible=this.computedOpacity>0;var a=n===this.computedOpacity;this.inFadeTransition=!a,a||this.requestRender()}}else this.computedOpacity=this.opacity,this.computedVisible=this.visible}},{key:"onAttach",value:function(){}},{key:"onDetach",value:function(){}},{key:"doRender",value:function(e){}},{key:"ready",value:function(){this._isReady||(this._isReady=!0,this.emit("isReady"),this.requestRender())}}]),n}(l.a)},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(22)),u=(n(13),n(17),n(1)),d=n(47),f=n(8),p=(n(12),n(19),n(20),n(28)),h=n(63),b=(n(71),new d.a({upperLeft:"upper-left",lowerLeft:"lower-left"})),v=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).extent=null,r.mode="view",r.originPosition="upper-left",r.tolerance=1,r}return Object(a.a)(n,[{key:"clone",value:function(){return new r(Object(l.a)({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}}]),n}(p.a);Object(c.a)([Object(u.b)({type:h.a,json:{write:{overridePolicy:function(){return{enabled:"view"===this.mode}}}}})],v.prototype,"extent",void 0),Object(c.a)([Object(u.b)({type:["view","edit"],json:{write:!0}})],v.prototype,"mode",void 0),Object(c.a)([Object(u.b)({type:String,json:{read:b.read,write:b.write}})],v.prototype,"originPosition",void 0),Object(c.a)([Object(u.b)({type:Number,json:{write:{overridePolicy:function(){return{enabled:"view"===this.mode}}}}})],v.prototype,"tolerance",void 0);var y=v=r=Object(c.a)([Object(f.a)("esri.tasks.support.QuantizationParameters")],v);t.a=y},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var r=n(4),i=n(63),a=(n(71),n(66)),o=n(483);function s(e,t,n){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new i.a;if("2d"===n.type)o=t*n.resolution;else if("3d"===n.type){var c=n.overlayPixelSizeInMapUnits(e),l=n.basemapSpatialReference;o=Object(r.k)(l)&&!l.equals(n.spatialReference)?Object(a.d)(l)/Object(a.d)(n.spatialReference):t*c}var u=e.x-o,d=e.y-o,f=e.x+o,p=e.y+o,h=n.spatialReference;return s.xmin=Math.min(u,f),s.ymin=Math.min(d,p),s.xmax=Math.max(u,f),s.ymax=Math.max(d,p),s.spatialReference=h,s}function c(e,t,n){var i=n.toMap(e);return!Object(r.j)(i)&&s(i,Object(o.a)(),n,l).intersects(t)}var l=new i.a},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r,i,a,o=n(29),s=n(34);function c(e,t){t.attributeColor?(e.attributes.add("color","vec4"),e.varyings.add("vColor","vec4"),e.vertex.code.add(Object(s.a)(r||(r=Object(o.a)(["\n      void forwardVertexColor() { vColor = color; }\n    "])))),e.vertex.code.add(Object(s.a)(i||(i=Object(o.a)(["\n      void forwardNormalizedVertexColor() { vColor = color * 0.003921568627451; }\n    "]))))):e.vertex.code.add(Object(s.a)(a||(a=Object(o.a)(["\n      void forwardVertexColor() {}\n      void forwardNormalizedVertexColor() {}\n    "]))))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n(68);function i(e){return{geometryType:Object(r.c)(e[0]),geometries:e.map((function(e){return e.toJSON()}))}}function a(e,t,n){var i=Object(r.b)(t);return e.map((function(e){var t=i.fromJSON(e);return t.spatialReference=n,t}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(2),i=n(5),a=n(6),o=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(e){var i,a=e.coordinateHelper,o=e.targetPoint,s=e.objectId,c=e.constraint;return Object(r.a)(this,n),(i=t.call(this,a,o,c)).objectId=s,i}return n}(n(225).a)},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n(3),a=n(37),o=n(5),s=n(6),c=n(0),l=(n(16),n(4)),u=(n(13),n(17),n(90)),d=n(1),f=n(8),p=n(42),h=(n(12),n(19),n(20),n(391)),b=n(455),v=n(174),y=n(526),m=n(527),g=n(216),O=n(258),j=n(264),w=n(257),_=n(260),k=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e))._visibilityHandles={},i.fullExtent=void 0,i.operationalLayerType="GroupLayer",i.spatialReference=void 0,i.type="group",i._visibilityWatcher=i._visibilityWatcher.bind(Object(a.a)(i)),i}return Object(i.a)(n,[{key:"initialize",value:function(){this._enforceVisibility(this.visibilityMode,this.visible),this.watch("visible",this._visibleWatcher.bind(this),!0)}},{key:"_writeLayers",value:function(e,t,n,r){var i=[];if(!e)return i;e.forEach((function(e){var t=Object(b.a)(e,r.webmap?r.webmap.getLayerJSONFromResourceInfo(e):null,r);Object(l.k)(t)&&t.layerType&&i.push(t)})),t.layers=i}},{key:"portalItem",set:function(e){this._set("portalItem",e)}},{key:"visibilityMode",set:function(e){var t=this._get("visibilityMode")!==e;this._set("visibilityMode",e),t&&this._enforceVisibility(e,this.visible)}},{key:"load",value:function(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e)),Promise.resolve(this)}},{key:"loadAll",value:function(){var e=this;return Object(h.a)(this,(function(t){t(e.layers)}))}},{key:"layerAdded",value:function(e){e.visible&&"exclusive"===this.visibilityMode?this._turnOffOtherLayers(e):"inherited"===this.visibilityMode&&(e.visible=this.visible),this._visibilityHandles[e.uid]=e.watch("visible",this._visibilityWatcher,!0)}},{key:"layerRemoved",value:function(e){var t=this._visibilityHandles[e.uid];t&&(t.remove(),delete this._visibilityHandles[e.uid]),this._enforceVisibility(this.visibilityMode,this.visible)}},{key:"_turnOffOtherLayers",value:function(e){this.layers.forEach((function(t){t!==e&&(t.visible=!1)}))}},{key:"_enforceVisibility",value:function(e,t){if(Object(u.a)(this).initialized){var n=this.layers,r=n.find((function(e){return e.visible}));switch(e){case"exclusive":n.length&&!r&&((r=n.getItemAt(0)).visible=!0),this._turnOffOtherLayers(r);break;case"inherited":n.forEach((function(e){e.visible=t}))}}}},{key:"_visibleWatcher",value:function(e){"inherited"===this.visibilityMode&&this.layers.forEach((function(t){t.visible=e}))}},{key:"_visibilityWatcher",value:function(e,t,n,r){var i=r;switch(this.visibilityMode){case"exclusive":e?this._turnOffOtherLayers(i):this._isAnyLayerVisible()||(i.visible=!0);break;case"inherited":i.visible=this.visible}}},{key:"_isAnyLayerVisible",value:function(){return this.layers.some((function(e){return e.visible}))}}]),n}(Object(j.a)(Object(_.a)(Object(O.a)(Object(w.a)(Object(m.a)(Object(y.a)(Object(g.a)(v.a))))))));Object(c.a)([Object(d.b)()],k.prototype,"fullExtent",void 0),Object(c.a)([Object(d.b)({json:{read:!1,write:{ignoreOrigin:!0}}})],k.prototype,"layers",void 0),Object(c.a)([Object(p.a)("layers")],k.prototype,"_writeLayers",null),Object(c.a)([Object(d.b)({type:["GroupLayer"]})],k.prototype,"operationalLayerType",void 0),Object(c.a)([Object(d.b)({json:{origins:{"web-document":{read:!1,write:!1}}}})],k.prototype,"portalItem",null),Object(c.a)([Object(d.b)()],k.prototype,"spatialReference",void 0),Object(c.a)([Object(d.b)({json:{read:!1},readOnly:!0,value:"group"})],k.prototype,"type",void 0),Object(c.a)([Object(d.b)({type:["independent","inherited","exclusive"],value:"independent",json:{write:!0,origins:{"web-map":{read:!1,write:!1}}}})],k.prototype,"visibilityMode",null);var x=k=Object(c.a)([Object(f.a)("esri.layers.GroupLayer")],k);t.default=x},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return l}));var r=n(31),i=n(156),a=n(347),o=n(114);function s(e,t,n,r){if(null==r||e.hasZ||(r=void 0),"point"===e.type)return e.x+=t,e.y+=n,e.hasZ&&null!=r&&(e.z+=r),e;if("multipoint"===e.type){for(var a=e.points,o=0;o<a.length;o++)a[o]=f(a[o],t,n,r);return e}if("extent"===e.type)return e.xmin+=t,e.xmax+=t,e.ymin+=n,e.ymax+=n,null!=r&&(e.zmin+=r,e.zmax+=r),e;for(var s=Object(i.b)(e),c="polyline"===e.type?e.paths:e.rings,l=0;l<s.length;l++)for(var u=s[l],d=0;d<u.length;d++)u[d]=f(u[d],t,n,r);return"paths"in e?e.paths=c:e.rings=c,e}function c(e,t,n,r,a){var o=e.clone(),c=r.resolution;if("point"===o.type){if(a)s(o,t*c,-n*c);else{var l=r.state.transform,u=r.state.inverseTransform,d=l[0]*o.x+l[2]*o.y+l[4],f=l[1]*o.x+l[3]*o.y+l[5];o.x=u[0]*(d+t)+u[2]*(f+n)+u[4],o.y=u[1]*(d+t)+u[3]*(f+n)+u[5]}return o}if("multipoint"===o.type){if(a)s(o,t*c,-n*c);else for(var h=o.points,b=r.state.transform,v=r.state.inverseTransform,y=0;y<h.length;y++){var m=h[y],g=b[0]*m[0]+b[2]*m[1]+b[4],O=b[1]*m[0]+b[3]*m[1]+b[5],j=v[0]*(g+t)+v[2]*(O+n)+v[4],w=v[1]*(g+t)+v[3]*(O+n)+v[5];h[y]=p(m,j,w,void 0)}return o}if("extent"===o.type){if(a)s(o,t*c,-n*c);else{var _=r.state.transform,k=r.state.inverseTransform,x=_[0]*o.xmin+_[2]*o.ymin+_[4],S=_[1]*o.xmin+_[3]*o.ymin+_[5],T=_[0]*o.xmax+_[2]*o.ymax+_[4],E=_[1]*o.xmax+_[3]*o.ymax+_[5];o.xmin=k[0]*(x+t)+k[2]*(S+n)+k[4],o.ymin=k[1]*(x+t)+k[3]*(S+n)+k[5],o.xmax=k[0]*(T+t)+k[2]*(E+n)+k[4],o.ymax=k[1]*(T+t)+k[3]*(E+n)+k[5]}return o}if(a)s(o,t*c,-n*c);else{for(var C=Object(i.b)(o),P="polyline"===o.type?o.paths:o.rings,I=r.state.transform,M=r.state.inverseTransform,A=0;A<C.length;A++)for(var R=C[A],L=0;L<R.length;L++){var F=R[L],D=I[0]*F[0]+I[2]*F[1]+I[4],N=I[1]*F[0]+I[3]*F[1]+I[5],V=M[0]*(D+t)+M[2]*(N+n)+M[4],z=M[1]*(D+t)+M[3]*(N+n)+M[5];R[L]=p(F,V,z,void 0)}"paths"in o?o.paths=P:o.rings=P}return o}function l(e,t,n,s){if("point"===e.type){var c=e.x,l=e.y,u=s?s[0]:c,d=s?s[1]:l,f=e.clone(),h=(c-u)*t+u,b=(l-d)*n+d;return f.x=h,f.y=b,f}if("multipoint"===e.type){for(var v=Object(i.b)(e),y=Object(o.i)(),m=Object(a.d)(y,[v]),g=Object(r.a)(m,4),O=g[0],j=g[1],w=g[2],_=g[3],k=s?s[0]:(O+w)/2,x=s?s[1]:(_+j)/2,S=e.clone(),T=S.points,E=0;E<T.length;E++){var C=T[E],P=Object(r.a)(C,2),I=(P[0]-k)*t+k,M=(P[1]-x)*n+x;T[E]=p(C,I,M,void 0)}return S}if("extent"===e.type){var A=e.xmin,R=e.xmax,L=e.ymin,F=e.ymax,D=s?s[0]:(A+R)/2,N=s?s[1]:(F+L)/2,V=e.clone();if(V.xmin=(A-D)*t+D,V.ymax=(F-N)*n+N,V.xmax=(R-D)*t+D,V.ymin=(L-N)*n+N,V.xmin>V.xmax){var z=V.xmin,U=V.xmax;V.xmin=U,V.xmax=z}if(V.ymin>V.ymax){var B=V.ymin,G=V.ymax;V.ymin=G,V.ymax=B}return V}for(var q=Object(i.b)(e),H=Object(o.i)(),W=Object(a.d)(H,q),$=Object(r.a)(W,4),J=$[0],Y=$[1],K=$[2],Z=$[3],X=s?s[0]:(J+K)/2,Q=s?s[1]:(Z+Y)/2,ee=e.clone(),te="polyline"===ee.type?ee.paths:ee.rings,ne=0;ne<q.length;ne++)for(var re=q[ne],ie=0;ie<re.length;ie++){var ae=re[ie],oe=Object(r.a)(ae,2),se=(oe[0]-X)*t+X,ce=(oe[1]-Q)*n+Q;te[ne][ie]=p(ae,se,ce,void 0)}return"paths"in ee?ee.paths=te:ee.rings=te,ee}function u(e,t,n,r,i,a){var o=Math.sqrt((n-e)*(n-e)+(r-t)*(r-t));return Math.sqrt((i-e)*(i-e)+(a-t)*(a-t))/o}function d(e,t,n,r,i,a){var o=180*Math.atan2(t-r,e-n)/Math.PI;return 180*Math.atan2(t-a,e-i)/Math.PI-o}function f(e,t,n,r){return p(e,e[0]+t,e[1]+n,null!=e[2]&&null!=r?e[2]+r:void 0)}function p(e,t,n,r){var i=[t,n];return e.length>2&&i.push(null!=r?r:e[2]),e.length>3&&i.push(e[3]),i}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r,i,a,o,s,c,l=n(29),u=n(34),d=n(328);function f(e,t){var n=e.vertex.code;t.verticalOffsetEnabled?(e.vertex.uniforms.add("verticalOffset","vec4"),t.screenSizePerspectiveEnabled&&(e.include(d.a),e.vertex.uniforms.add("screenSizePerspectiveAlignment","vec4")),n.add(Object(u.a)(r||(r=Object(l.a)(["\n    vec3 calculateVerticalOffset(vec3 worldPos, vec3 localOrigin) {\n      float viewDistance = length((view * vec4(worldPos, 1.0)).xyz);\n      ","\n      ","\n      // Screen sized offset in world space, used for example for line callouts\n      float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * viewDistance, verticalOffset.z, verticalOffset.w);\n      return worldNormal * worldOffset;\n    }\n\n    vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) {\n      return worldPos + calculateVerticalOffset(worldPos, localOrigin);\n    }\n    "])),1===t.viewingMode?Object(u.a)(i||(i=Object(l.a)(["vec3 worldNormal = normalize(worldPos + localOrigin);"]))):Object(u.a)(a||(a=Object(l.a)(["vec3 worldNormal = vec3(0.0, 0.0, 1.0);"]))),t.screenSizePerspectiveEnabled?Object(u.a)(o||(o=Object(l.a)(["\n          float cosAngle = dot(worldNormal, normalize(worldPos - camPos));\n          float verticalOffsetScreenHeight = screenSizePerspectiveScaleFloat(verticalOffset.x, abs(cosAngle), viewDistance, screenSizePerspectiveAlignment);"]))):Object(u.a)(s||(s=Object(l.a)(["\n          float verticalOffsetScreenHeight = verticalOffset.x;"])))))):n.add(Object(u.a)(c||(c=Object(l.a)(["\n    vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) { return worldPos; }\n    "]))))}function p(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h;return r.screenLength=e.screenLength,r.perDistance=Math.tan(.5*t)/(.5*n),r.minWorldLength=e.minWorldLength,r.maxWorldLength=e.maxWorldLength,r}(f||(f={})).bindUniforms=function(e,t,n){if(t.verticalOffset){var r=p(t.verticalOffset,n.camera.fovY,n.camera.fullViewport[3]),i=n.camera.pixelRatio||1;e.setUniform4f("verticalOffset",r.screenLength*i,r.perDistance,r.minWorldLength,r.maxWorldLength)}};var h={screenLength:0,perDistance:0,minWorldLength:0,maxWorldLength:0}},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(2),i=n(3),a=n(5),o=n(6),s=n(0),c=(n(16),n(13),n(17),n(1)),l=n(8),u=(n(12),n(19),n(20),n(24)),d=n(36),f=n(212),p=n(14),h=n(4),b=n(40),v=function(){function e(){Object(r.a)(this,e),this._isToolEditable=!0,this._manipulators=new b.a,this._nextManipulatorId=0,this._resourceContexts={manipulator3D:{}},this._attached=!1}return Object(i.a)(e,[{key:"isToolEditable",set:function(e){this._isToolEditable=e}},{key:"length",get:function(){return this._manipulators.length}},{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.addMany([e],t)[0]}},{key:"addMany",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map((function(e){var r=t._nextManipulatorId++,i={id:r,manipulator:e,visibilityPredicate:n,attached:!1};return t._manipulators.add(i),t._attached&&t._updateManipulatorAttachment(i),r}))}},{key:"remove",value:function(e){if("number"==typeof e){for(var t=e,n=0;n<this._manipulators.length;n++)if(this._manipulators.getItemAt(n).id===t){var r=this._manipulators.splice(n,1)[0];return this._detachManipulator(r),r.id}return null}for(var i=e,a=0;a<this._manipulators.length;a++)if(this._manipulators.getItemAt(a).manipulator===i){var o=this._manipulators.splice(a,1)[0];return this._detachManipulator(o),o.id}return null}},{key:"removeAll",value:function(){var e=this;this._manipulators.forEach((function(t){e._detachManipulator(t)})),this._manipulators.removeAll()}},{key:"attach",value:function(){var e=this;this._manipulators.forEach((function(t){e._updateManipulatorAttachment(t)})),this._attached=!0}},{key:"detach",value:function(){var e=this;this._manipulators.forEach((function(t){e._detachManipulator(t)})),this._attached=!1}},{key:"destroy",value:function(){this._manipulators.forEach((function(e){var t=e.manipulator;t.destroy&&t.destroy()})),this._manipulators.destroy(),this._resourceContexts=null}},{key:"on",value:function(e,t){return this._manipulators.on(e,(function(e){t(e)}))}},{key:"forEach",value:function(e){var t,n=Object(p.a)(this._manipulators.items);try{for(n.s();!(t=n.n()).done;){e(t.value)}}catch(r){n.e(r)}finally{n.f()}}},{key:"some",value:function(e){return this._manipulators.items.some(e)}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){return e.push(t.manipulator)})),e}},{key:"intersect",value:function(e,t){var n=null,r=Number.MAX_VALUE;return this._manipulators.forEach((function(i){var a=i.id,o=i.manipulator;if(i.attached&&o.interactive){var s=o.intersectionDistance(e,t);Object(h.k)(s)&&s<r&&(r=s,n={id:a,manipulator:o})}})),n}},{key:"findById",value:function(e){if(Object(h.j)(e))return null;var t,n=Object(p.a)(this._manipulators.items);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e===r.id)return r.manipulator}}catch(i){n.e(i)}finally{n.f()}return null}},{key:"_updateManipulatorAttachment",value:function(e){this._isManipulatorItemVisible(e)?this._attachManipulator(e):this._detachManipulator(e)}},{key:"_attachManipulator",value:function(e){e.attached||(e.manipulator.attach&&e.manipulator.attach(this._resourceContexts),e.attached=!0)}},{key:"_detachManipulator",value:function(e){if(e.attached){var t=e.manipulator;t.grabbing=!1,t.dragging=!1,t.hovering=!1,t.selected=!1,t.detach&&t.detach(this._resourceContexts),e.attached=!1}}},{key:"_isManipulatorItemVisible",value:function(e){return 2===e.visibilityPredicate||(this._isToolEditable?0===e.visibilityPredicate:1===e.visibilityPredicate)}}]),e}(),y=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).attached=!1,i.created=!1,i.completed=!1,i.manipulators=new v,i.deferCreation=!1,i._editableFlags=new Array,i._creationResolver=Object(u.g)(),i}return Object(i.a)(n,[{key:"active",get:function(){return null!=this.view&&this.view.activeTool===this}},{key:"isSupported",get:function(){return!0}},{key:"visible",set:function(e){this._set("visible",e),e||Object(f.d)(this,!1),this.attached&&(e?this._show():this._hide())}},{key:"editable",get:function(){return this.hasEditableFlag(0)},set:function(e){this.setEditableFlag(0,e)}},{key:"attach",value:function(){!this.attached&&this.isSupported&&(this.manipulators.attach(),this.onAttach(),this.visible&&this.onShow(),this._set("attached",!0))}},{key:"detach",value:function(){this.attached&&(this.onHide(),this.onDetach(),this.manipulators.detach(),this._set("attached",!1))}},{key:"handleInputEvent",value:function(e){this.attached&&this.onInputEvent(e)}},{key:"handleInputEventAfter",value:function(e){this.attached&&this.onInputEventAfter(e)}},{key:"destroy",value:function(){this.manipulators.destroy(),this._set("view",null),this._set("created",!1),this._set("completed",!1)}},{key:"setEditableFlag",value:function(e,t){this._editableFlags[e]=t,this.manipulators.isToolEditable=this._editableFlags.every((function(e){return null==e||e})),this._updateManipulatorAttachment(),0===e&&this.notifyChange("editable"),this.onEditableChange()}},{key:"hasEditableFlag",value:function(e){var t=this._editableFlags[e];return null==t||t}},{key:"when",value:function(){return this._creationResolver.promise}},{key:"rejectCreation",value:function(e){this._creationResolver.reject(e)}},{key:"initialize",value:function(){this.deferCreation||this.complete()}},{key:"onAttach",value:function(){}},{key:"onDetach",value:function(){}},{key:"onShow",value:function(){}},{key:"onHide",value:function(){}},{key:"onEditableChange",value:function(){}},{key:"onInputEvent",value:function(e){}},{key:"onInputEventAfter",value:function(e){}},{key:"internallyEditable",get:function(){return this.hasEditableFlag(0)&&this.hasEditableFlag(1)}},{key:"create",value:function(){this.created||(this._set("created",!0),this._creationResolver.resolve(this))}},{key:"complete",value:function(){this.create(),this._set("completed",!0)}},{key:"_show",value:function(){this._updateManipulatorAttachment(),this.onShow()}},{key:"_hide",value:function(){this._updateManipulatorAttachment(),this.onHide()}},{key:"_updateManipulatorAttachment",value:function(){this.attached&&this.visible?this.manipulators.attach():this.manipulators.detach()}}]),n}(d.a);Object(s.a)([Object(c.b)({constructOnly:!0})],y.prototype,"view",void 0),Object(s.a)([Object(c.b)({readOnly:!0})],y.prototype,"active",null),Object(s.a)([Object(c.b)({value:!0})],y.prototype,"visible",null),Object(s.a)([Object(c.b)({value:!0})],y.prototype,"editable",null),Object(s.a)([Object(c.b)({readOnly:!0})],y.prototype,"attached",void 0),Object(s.a)([Object(c.b)({readOnly:!0})],y.prototype,"created",void 0),Object(s.a)([Object(c.b)({readOnly:!0})],y.prototype,"completed",void 0),Object(s.a)([Object(c.b)({readOnly:!0})],y.prototype,"manipulators",void 0),Object(s.a)([Object(c.b)({constructOnly:!0})],y.prototype,"deferCreation",void 0),y=Object(s.a)([Object(l.a)("esri.views.interactive.InteractiveToolBase")],y)},function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var r=n(10),i=n(2),a=n(3),o=n(5),s=n(6),c=n(387),l=n(208),u=n(301),d=n(168),f=n(565),p=n(0),h=n(268),b=n(270),v=n(69),y=n(269),m=n(261),g=n(117),O=n(238),j=n(217),w=n(267),_=n(316),k=n(183),x=n(656),S=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"initializeProgram",value:function(e){var t=n.shader.get(),r=this.configuration,i=t.build({output:r.output,OITEnabled:0===r.transparencyPassType,attributeColor:r.vertexColors,slicePlaneEnabled:r.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,multipassTerrainEnabled:r.multipassTerrainEnabled,cullAboveGround:r.cullAboveGround});return new m.a(e.rctx,i.generateSource("vertex"),i.generateSource("fragment"),y.a)}},{key:"bindPass",value:function(e,t,n){O.a.bindProjectionMatrix(this.program,n.camera.projectionMatrix),this.program.setUniform4fv("eColor",t.color),4===this.configuration.output&&w.a.bindOutputHighlight(e,this.program,n),(1===this.configuration.output||n.multipassTerrainEnabled)&&this.program.setUniform2fv("cameraNearFar",n.camera.nearFar),n.multipassTerrainEnabled&&(this.program.setUniform2fv("inverseViewport",n.inverseViewport),Object(_.a)(this.program,e,n))}},{key:"bindDraw",value:function(e){O.a.bindView(this.program,e),j.a.bindUniformsWithOrigin(this.program,this.configuration,e)}},{key:"setPipelineState",value:function(e,t){var n=this.configuration,r=3===e,i=2===e;return Object(g.d)({blending:0!==n.output&&7!==n.output||!n.transparent?null:r?d.f:Object(d.a)(e),culling:function(e){return 0!==e&&{face:1===e?1028:1029,mode:2305}}(n.cullFace),depthTest:{func:Object(d.b)(e)},depthWrite:r||i?n.writeDepth&&g.c:null,colorWrite:g.b,stencilWrite:n.sceneHasOcludees?k.h:null,stencilTest:n.sceneHasOcludees?t?k.d:k.c:null,polygonOffset:r||i?n.polygonOffset&&T:Object(d.g)(n.enableOffset)})}},{key:"initializePipeline",value:function(){return this._occludeePipelineState=this.setPipelineState(this.configuration.transparencyPassType,!0),this.setPipelineState(this.configuration.transparencyPassType,!1)}},{key:"getPipelineState",value:function(e){return e?this._occludeePipelineState:this.pipeline}}]),n}(b.a);S.shader=new h.a(x.a,(function(){return n.e(223).then(n.bind(null,1405))}));var T={factor:1,units:1},E=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).output=0,e.cullFace=0,e.slicePlaneEnabled=!1,e.vertexColors=!1,e.transparent=!1,e.polygonOffset=!1,e.enableOffset=!0,e.writeDepth=!0,e.sceneHasOcludees=!1,e.transparencyPassType=3,e.multipassTerrainEnabled=!1,e.cullAboveGround=!0,e}return n}(v.a);Object(p.a)([Object(v.b)({count:8})],E.prototype,"output",void 0),Object(p.a)([Object(v.b)({count:3})],E.prototype,"cullFace",void 0),Object(p.a)([Object(v.b)()],E.prototype,"slicePlaneEnabled",void 0),Object(p.a)([Object(v.b)()],E.prototype,"vertexColors",void 0),Object(p.a)([Object(v.b)()],E.prototype,"transparent",void 0),Object(p.a)([Object(v.b)()],E.prototype,"polygonOffset",void 0),Object(p.a)([Object(v.b)()],E.prototype,"enableOffset",void 0),Object(p.a)([Object(v.b)()],E.prototype,"writeDepth",void 0),Object(p.a)([Object(v.b)()],E.prototype,"sceneHasOcludees",void 0),Object(p.a)([Object(v.b)({count:4})],E.prototype,"transparencyPassType",void 0),Object(p.a)([Object(v.b)()],E.prototype,"multipassTerrainEnabled",void 0),Object(p.a)([Object(v.b)()],E.prototype,"cullAboveGround",void 0);var C=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e,I)).supportsEdges=!0,r.techniqueConfig=new E,r}return Object(a.a)(n,[{key:"getTechniqueConfig",value:function(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.cullFace=this.params.cullFace,this.techniqueConfig.vertexColors=this.params.vertexColors,this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled,this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.polygonOffset=this.params.polygonOffset,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.sceneHasOcludees=this.params.sceneHasOcludees,this.techniqueConfig.transparencyPassType=t?t.transparencyPassType:3,this.techniqueConfig.enableOffset=!t||t.camera.relativeElevation<d.e,this.techniqueConfig.multipassTerrainEnabled=!!t&&t.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!t||t.cullAboveGround,this.techniqueConfig}},{key:"getPassParameters",value:function(){return this.params}},{key:"intersect",value:function(e,t,n,r,i,a,o){Object(l.e)(e,t,r,i,a,void 0,o)}},{key:"getGLMaterial",value:function(e){return 0===e.output||7===e.output||4===e.output||1===e.output&&this.params.writeLinearDepth?new P(e):void 0}},{key:"createBufferWriter",value:function(){return new f.a(f.b)}}]),n}(u.a),P=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).updateParameters(),r}return Object(a.a)(n,[{key:"updateParameters",value:function(e){this.technique=this.techniqueRep.acquireAndReleaseExisting(S,this.material.getTechniqueConfig(this.output,e),this.technique)}},{key:"beginSlot",value:function(e){return 4===this.output?3===e:e===(this.technique.configuration.transparent?this.technique.configuration.writeDepth?5:8:3)}},{key:"_updateOccludeeState",value:function(e){e.hasOccludees!==this.material.params.sceneHasOcludees&&this.material.setParameterValues({sceneHasOcludees:e.hasOccludees})}},{key:"ensureParameters",value:function(e){0!==this.output&&7!==this.output||this._updateOccludeeState(e),this.updateParameters(e)}},{key:"bind",value:function(e,t){e.bindProgram(this.technique.program),this.technique.bindPass(e,this.material.getPassParameters(),t)}},{key:"getPipelineState",value:function(e,t){return this.technique.getPipelineState(t)}}]),n}(c.a),I=Object(r.a)({color:[1,1,1,1],transparent:!1,writeDepth:!0,writeLinearDepth:!1,vertexColors:!1,polygonOffset:!1,slicePlaneEnabled:!1,cullFace:0,sceneHasOcludees:!1},u.b)},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(16),o=n(145),s=4294967296,c=Object(a.a)("esri-text-decoder")?new TextDecoder("utf-8"):null,l=Object(a.a)("safari")||Object(a.a)("ios")?6:Object(a.a)("ff")?12:32,u=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t?t.byteLength:0;Object(r.a)(this,e),this._tag=0,this._dataType=99,this.init(t,n,i,a)}return Object(i.a)(e,[{key:"init",value:function(e,t,n,r){this._data=e,this._dataView=t,this._pos=n,this._end=r}},{key:"clone",value:function(){return new e(this._data,this._dataView,this._pos,this._end)}},{key:"pos",value:function(){return this._pos}},{key:"move",value:function(e){this._pos=e}},{key:"nextTag",value:function(e){for(;;){if(this._pos===this._end)return!1;var t=this._decodeVarint();if(this._tag=t>>3,this._dataType=7&t,!e||e===this._tag)break;this.skip()}return!0}},{key:"next",value:function(){if(this._pos===this._end)return!1;var e=this._decodeVarint();return this._tag=e>>3,this._dataType=7&e,!0}},{key:"empty",value:function(){return this._pos>=this._end}},{key:"tag",value:function(){return this._tag}},{key:"getInt32",value:function(){return this._decodeVarint()}},{key:"getInt64",value:function(){return this._decodeVarint()}},{key:"getUInt32",value:function(){var e=4294967295;return e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?e:void 0))))}},{key:"getUInt64",value:function(){return this._decodeVarint()}},{key:"getSInt32",value:function(){var e=this.getUInt32();return e>>>1^-(1&e)|0}},{key:"getSInt64",value:function(){return this._decodeSVarint()}},{key:"getBool",value:function(){var e=0!==this._data[this._pos];return this._skip(1),e}},{key:"getEnum",value:function(){return this._decodeVarint()}},{key:"getFixed64",value:function(){var e=this._dataView,t=this._pos,n=e.getUint32(t,!0)+e.getUint32(t+4,!0)*s;return this._skip(8),n}},{key:"getSFixed64",value:function(){var e=this._dataView,t=this._pos,n=e.getUint32(t,!0)+e.getInt32(t+4,!0)*s;return this._skip(8),n}},{key:"getDouble",value:function(){var e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e}},{key:"getFixed32",value:function(){var e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e}},{key:"getSFixed32",value:function(){var e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e}},{key:"getFloat",value:function(){var e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e}},{key:"getString",value:function(){var e=this._getLength(),t=this._pos,n=this._toString(this._data,t,t+e);return this._skip(e),n}},{key:"getBytes",value:function(){var e=this._getLength(),t=this._pos,n=this._toBytes(this._data,t,t+e);return this._skip(e),n}},{key:"getLength",value:function(){return this._getLengthUnsafe()}},{key:"processMessageWithArgs",value:function(e,t,n,r){var i=this.getMessage(),a=e(i,t,n,r);return i.release(),a}},{key:"processMessage",value:function(e){var t=this.getMessage(),n=e(t);return t.release(),n}},{key:"getMessage",value:function(){var t=this._getLength(),n=e.pool.acquire();return n.init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),n}},{key:"release",value:function(){e.pool.release(this)}},{key:"dataType",value:function(){return this._dataType}},{key:"skip",value:function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}}},{key:"skipLen",value:function(e){this._skip(e)}},{key:"_skip",value:function(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e}},{key:"_decodeVarint",value:function(){var e,t=this._data,n=this._pos,r=0;if(this._end-n>=10)do{if(r|=127&(e=t[n++]),0==(128&e))break;if(r|=(127&(e=t[n++]))<<7,0==(128&e))break;if(r|=(127&(e=t[n++]))<<14,0==(128&e))break;if(r|=(127&(e=t[n++]))<<21,0==(128&e))break;if(r+=268435456*(127&(e=t[n++])),0==(128&e))break;if(r+=34359738368*(127&(e=t[n++])),0==(128&e))break;if(r+=4398046511104*(127&(e=t[n++])),0==(128&e))break;if(r+=562949953421312*(127&(e=t[n++])),0==(128&e))break;if(r+=72057594037927940*(127&(e=t[n++])),0==(128&e))break;if(r+=0x8000000000000000*(127&(e=t[n++])),0==(128&e))break;throw new Error("Varint too long!")}while(0);else{for(var i=1;n!==this._end&&0!=(128&(e=t[n]));)++n,r+=(127&e)*i,i*=128;if(n===this._end)throw new Error("Varint overrun!");++n,r+=e*i}return this._pos=n,r}},{key:"_decodeSVarint",value:function(){var e=this._decodeVarint();return e%2?-(e+1)/2:e/2}},{key:"_getLength",value:function(){if(2!==this._dataType)throw new Error("Not a delimited data type!");return this._decodeVarint()}},{key:"_getLengthUnsafe",value:function(){return this.getUInt32()}},{key:"_toString",value:function(e,t,n){if((n=Math.min(this._end,n))-t>l&&c){var r=e.subarray(t,n);return c.decode(r)}for(var i="",a="",o=t;o<n;++o){var s=e[o];128&s?a+="%"+s.toString(16):(i+=decodeURIComponent(a)+String.fromCharCode(s),a="")}return a.length&&(i+=decodeURIComponent(a)),i}},{key:"_toBytes",value:function(e,t,n){return n=Math.min(this._end,n),new Uint8Array(e.buffer,t,n-t)}}]),e}();u.pool=new o.a(u,null,(function(e){e._data=null,e._dataView=null})),t.a=u},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(2),i=n(3),a=n(5),o=n(6),s=n(0),c=(n(16),n(13),n(17),n(1)),l=n(41),u=n(8),d=(n(12),n(19),n(20),n(54)),f=n(148),p=n(207),h=n(372),b=n(516);var v=function(e){var t=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).timeExtent=null,e.timeOffset=null,e.useViewTime=!0,e}return Object(i.a)(n,[{key:"readOffset",value:function(e,t){var n=t.timeInfo.exportOptions;if(!n)return null;var r=n.timeOffset,i=f.d.fromJSON(n.timeOffsetUnits);return r&&i?new h.a({value:r,unit:i}):null}},{key:"timeInfo",set:function(e){Object(d.m)(e,this.fields),this._set("timeInfo",e)}}]),n}(e);return Object(s.a)([Object(c.b)({type:p.a,json:{write:!1}})],t.prototype,"timeExtent",void 0),Object(s.a)([Object(c.b)({type:h.a})],t.prototype,"timeOffset",void 0),Object(s.a)([Object(l.a)("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),Object(s.a)([Object(c.b)({value:null,type:b.a,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),Object(s.a)([Object(c.b)({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=Object(s.a)([Object(u.a)("esri.layers.mixins.TemporalLayer")],t),t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(7),i=n.n(r),a=n(15),o=n(177),s=n(24),c=n(300);function l(e,t,n){return u.apply(this,arguments)}function u(){return(u=Object(a.a)(i.a.mark((function e(t,n,r){var a,l,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t&&t.getAtOrigin&&t.getAtOrigin("renderer",n.origin))||"unique-value"!==a.type||!a.styleOrigin){e.next=6;break}return e.next=4,Object(c.c)(a.populateFromStyle());case 4:l=e.sent,Object(s.u)(r),!1===l.ok&&(u=l.error,n&&n.messages&&n.messages.push(new o.a("renderer:style-reference","Failed to create unique value renderer from style reference: ".concat(u.message),{error:u,context:n})),t.clear("renderer",n.origin));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,n){"use strict";n.r(t);var r=n(10),i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(4)),u=(n(13),n(1)),d=n(58),f=n(41),p=n(8),h=n(42),b=n(18),v=n(12),y=(n(19),n(20),n(44)),m=(n(71),n(62)),g=n(174),O=n(216),j=n(185),w=n(124),_=n(258),k=n(319),x=n(264),S=n(507),T=n(257),E=n(468),C=n(260),P=n(91),I=n(418),M=n(746),A=n(335),R=n(747),L=["Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Elevation/World_Hillshade","Elevation/World_Hillshade_Dark","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Ocean_Basemap","Reference/World_Boundaries_and_Places","Reference/World_Boundaries_and_Places_Alternate","Reference/World_Transportation","World_Imagery","World_Street_Map","World_Topo_Map"],F=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).listMode="show",e.isReference=null,e.operationalLayerType="ArcGISTiledMapServiceLayer",e.resampling=!0,e.sourceJSON=null,e.spatialReference=null,e.path=null,e.sublayers=null,e.type="tile",e.url=null,e}return Object(a.a)(n,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?Object(r.a)({url:e},t):e}},{key:"load",value:function(e){var t=this,n=Object(l.k)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).then((function(){return t._fetchService(n)}),(function(){return t._fetchService(n)}))),Promise.resolve(this)}},{key:"attributionDataUrl",get:function(){var e,t=null==(e=this.parsedUrl)?void 0:e.path.toLowerCase();return t&&this._getDefaultAttribution(this._getMapName(t))}},{key:"readSpatialReference",value:function(e,t){return(e=e||t.tileInfo&&t.tileInfo.spatialReference)&&y.a.fromJSON(e)}},{key:"writeSublayers",value:function(e,t,n,i){if(this.loaded&&e){var a=e.slice().reverse().flatten((function(e){var t=e.sublayers;return t&&t.toArray().reverse()})).toArray(),o=[],s=Object(r.a)({writeSublayerStructure:!1},i);a.forEach((function(e){var t=e.write({},s);o.push(t)})),o.some((function(e){return Object.keys(e).length>1}))&&(t.layers=o)}}},{key:"tileServers",get:function(){return this._getDefaultTileServers(this.parsedUrl.path)}},{key:"castTileServers",value:function(e){return Array.isArray(e)?e.map((function(e){return Object(v.J)(e).path})):null}},{key:"fetchTile",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.signal,a=r.timestamp,o=this.getTileUrl(e,t,n),s={responseType:"image",signal:i};return null!=a&&(s.query={_ts:r.timestamp}),Object(m.default)(o,s).then((function(e){return e.data}))}},{key:"getTileUrl",value:function(e,t,n){var i=!this.tilemapCache&&this.supportsBlankTile,a=Object(v.D)(Object(r.a)(Object(r.a)({},this.parsedUrl.query),{},{blankTile:!i&&null},this.customParameters)),o=this.tileServers;return"".concat(o&&o.length?o[t%o.length]:this.parsedUrl.path,"/tile/").concat(e,"/").concat(t,"/").concat(n).concat(a?"?"+a:"")}},{key:"_fetchService",value:function(e){var t=this;return new Promise((function(n,i){if(t.sourceJSON){if(null!=t.sourceJSON.bandCount&&null!=t.sourceJSON.pixelSizeX)throw new b.a("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");n({data:t.sourceJSON})}else{if(!t.parsedUrl)throw new b.a("tile-layer:undefined-url","layer's url is not defined");var a=Object(j.e)(t.parsedUrl.path);if(Object(l.k)(a)&&"ImageServer"===a.serverType)throw new b.a("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");Object(m.default)(t.parsedUrl.path,{query:Object(r.a)(Object(r.a)({f:"json"},t.parsedUrl.query),t.customParameters),responseType:"json",signal:e}).then(n,i)}})).then((function(n){if(n.ssl&&(t.url=t.url.replace(/^http:/i,"https:")),t.sourceJSON=n.data,t.read(n.data,{origin:"service",url:t.parsedUrl}),10.1===t.version&&!Object(j.c)(t.url))return t._fetchServerVersion(t.url,e).then((function(e){t.read({currentVersion:e})})).catch((function(){}))}))}},{key:"_fetchServerVersion",value:function(e,t){if(!Object(j.b)(e))return Promise.reject();var n=e.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return Object(m.default)(n,{query:Object(r.a)({f:"json"},this.customParameters),responseType:"json",signal:t}).then((function(e){if(e.data&&e.data.currentVersion)return e.data.currentVersion;throw new b.a("tile-layer:version-not-available")}))}},{key:"_getMapName",value:function(e){var t=e.match(/^(?:https?:)?\/\/(server\.arcgisonline\.com|services\.arcgisonline\.com|ibasemaps-api\.arcgis\.com)\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i);return t&&t[2]}},{key:"_getDefaultAttribution",value:function(e){if(e){var t;e=e.toLowerCase();for(var n=0,r=L.length;n<r;n++)if((t=L[n]).toLowerCase().indexOf(e)>-1)return Object(v.z)("//static.arcgis.com/attribution/"+t)}}},{key:"_getDefaultTileServers",value:function(e){var t=-1!==e.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i),n=-1!==e.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i);return t||n?[e,e.replace(t?/server\.arcgisonline/i:/services\.arcgisonline/i,t?"services.arcgisonline":"server.arcgisonline")]:[]}}]),n}(Object(x.a)(Object(R.a)(Object(C.a)(Object(E.a)(Object(_.a)(Object(T.a)(Object(I.a)(Object(M.a)(Object(k.a)(Object(O.a)(Object(P.b)(Object(S.a)(g.a)))))))))))));Object(c.a)([Object(u.b)({readOnly:!0})],F.prototype,"attributionDataUrl",null),Object(c.a)([Object(u.b)({type:["show","hide","hide-children"]})],F.prototype,"listMode",void 0),Object(c.a)([Object(u.b)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],F.prototype,"isReference",void 0),Object(c.a)([Object(u.b)({readOnly:!0,type:["ArcGISTiledMapServiceLayer"]})],F.prototype,"operationalLayerType",void 0),Object(c.a)([Object(u.b)({type:Boolean})],F.prototype,"resampling",void 0),Object(c.a)([Object(u.b)()],F.prototype,"sourceJSON",void 0),Object(c.a)([Object(u.b)({type:y.a})],F.prototype,"spatialReference",void 0),Object(c.a)([Object(f.a)("spatialReference",["spatialReference","tileInfo"])],F.prototype,"readSpatialReference",null),Object(c.a)([Object(u.b)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],F.prototype,"path",void 0),Object(c.a)([Object(u.b)({readOnly:!0})],F.prototype,"sublayers",void 0),Object(c.a)([Object(h.a)("sublayers",{layers:{type:[A.a]}})],F.prototype,"writeSublayers",null),Object(c.a)([Object(u.b)({json:{read:!1,write:!1}})],F.prototype,"popupEnabled",void 0),Object(c.a)([Object(u.b)()],F.prototype,"tileServers",null),Object(c.a)([Object(d.a)("tileServers")],F.prototype,"castTileServers",null),Object(c.a)([Object(u.b)({readOnly:!0,json:{read:!1}})],F.prototype,"type",void 0),Object(c.a)([Object(u.b)(w.n)],F.prototype,"url",void 0);var D=F=Object(c.a)([Object(p.a)("esri.layers.TileLayer")],F);t.default=D},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r,i,a=n(29),o=n(34);function s(e){e.vertex.code.add(Object(o.a)(r||(r=Object(a.a)(["\n    const float PI = 3.141592653589793;\n  "])))),e.fragment.code.add(Object(o.a)(i||(i=Object(a.a)(["\n    const float PI = 3.141592653589793;\n    const float LIGHT_NORMALIZATION = 1.0 / PI;\n    const float INV_PI = 0.3183098861837907;\n    const float HALF_PI = 1.570796326794897;\n    "]))))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return b}));var r,i,a=n(195),o=n(4),s=n(27),c=n(88),l=n(141),u=n(119),d=n(186),f=n(428),p=n(654);function h(e,t,n,r,i,a,o,s,c,u,d){var f,p,h=y[d.mode],b=0;if(Object(l.k)(e,t,n,r,c.spatialReference,i,s))return h.requiresAlignment(d)?(b=h.applyElevationAlignmentBuffer(r,i,a,o,s,c,u,d),f=a,p=o):(f=r,p=i),Object(l.k)(f,c.spatialReference,p,a,u.spatialReference,o,s)?b:void 0}function b(e,t,n,r,i){var s=(Object(d.c)(e)?e.z:Object(f.b)(e)?e.array[e.offset+2]:e[2])||0;switch(n.mode){case"on-the-ground":var c=Object(o.r)(Object(f.a)(t,e,"ground"),0);return i&&(i.verticalDistanceToGround=0,i.sampledElevation=c),c;case"relative-to-ground":var l=Object(o.r)(Object(f.a)(t,e,"ground"),0),u=n.geometryZWithOffset(s,r);return i&&(i.verticalDistanceToGround=u,i.sampledElevation=l),u+l;case"relative-to-scene":var p=Object(o.r)(Object(f.a)(t,e,"scene"),0),h=n.geometryZWithOffset(s,r);return i&&(i.verticalDistanceToGround=h,i.sampledElevation=p),h+p;case"absolute-height":var b=n.geometryZWithOffset(s,r);if(i){var v=Object(o.r)(Object(f.a)(t,e,"ground"),0);i.verticalDistanceToGround=b-v,i.sampledElevation=v}return b;default:return Object(a.a)(n.mode),0}}function v(e,t,n,r,i){var a=b(t,n,i,r,g);Object(p.b)(e,g.verticalDistanceToGround);var o=g.sampledElevation,s=Object(c.c)(m,e.transformation);return O[0]=t.x,O[1]=t.y,O[2]=a,Object(l.d)(t.spatialReference,O,s,r.spatialReference)?e.transformation=s:console.warn("Could not locate symbol object properly, it might be misplaced"),o}(i=r||(r={}))[i.NONE=0]="NONE",i[i.UPDATE=1]="UPDATE",i[i.RECREATE=2]="RECREATE";var y={"absolute-height":{applyElevationAlignmentBuffer:function(e,t,n,r,i,a,o,s){var c=s.calculateOffsetRenderUnits(o),l=s.featureExpressionInfoContext;t*=3,r*=3;for(var u=0;u<i;++u){var d=e[t+0],f=e[t+1],p=e[t+2];n[r+0]=d,n[r+1]=f,n[r+2]=null==l?p+c:c,t+=3,r+=3}return 0},requiresAlignment:function(e){var t=e.meterUnitOffset,n=e.featureExpressionInfoContext;return 0!==t||null!=n}},"on-the-ground":{applyElevationAlignmentBuffer:function(e,t,n,r,i,a){var s=0,c=a.spatialReference;t*=3,r*=3;for(var l=0;l<i;++l){var u=e[t+0],d=e[t+1],f=e[t+2],p=Object(o.r)(a.getElevation(u,d,f,c,"ground"),0);s+=p,n[r+0]=u,n[r+1]=d,n[r+2]=p,t+=3,r+=3}return s/i},requiresAlignment:function(){return!0}},"relative-to-ground":{applyElevationAlignmentBuffer:function(e,t,n,r,i,a,s,c){var l=0,u=c.calculateOffsetRenderUnits(s),d=c.featureExpressionInfoContext,f=a.spatialReference;t*=3,r*=3;for(var p=0;p<i;++p){var h=e[t+0],b=e[t+1],v=e[t+2],y=Object(o.r)(a.getElevation(h,b,v,f,"ground"),0);l+=y,n[r+0]=h,n[r+1]=b,n[r+2]=null==d?v+y+u:y+u,t+=3,r+=3}return l/i},requiresAlignment:function(){return!0}},"relative-to-scene":{applyElevationAlignmentBuffer:function(e,t,n,r,i,a,s,c){var l=0,u=c.calculateOffsetRenderUnits(s),d=c.featureExpressionInfoContext,f=a.spatialReference;t*=3,r*=3;for(var p=0;p<i;++p){var h=e[t+0],b=e[t+1],v=e[t+2],y=Object(o.r)(a.getElevation(h,b,v,f,"scene"),0);l+=y,n[r+0]=h,n[r+1]=b,n[r+2]=null==d?v+y+u:y+u,t+=3,r+=3}return l/i},requiresAlignment:function(){return!0}}},m=Object(u.b)(),g={verticalDistanceToGround:0,sampledElevation:0},O=Object(s.e)()},function(e,t,n){"use strict";n.r(t);var r=n(7),i=n.n(r),a=n(15),o=n(10),s=n(2),c=n(3),l=n(53),u=n(50),d=n(5),f=n(6),p=n(0),h=n(65),b=(n(16),n(22)),v=n(13),y=(n(17),n(1)),m=n(41),g=n(8),O=n(42),j=n(18),w=n(12),_=(n(19),n(20),n(24)),k=n(44),x=n(63),S=n(62),T=n(174),E=n(216),C=n(258),P=n(319),I=n(264),M=n(257),A=n(260),R=n(142),L=n(329),F=n(418);function D(e){var t={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"};return new Promise((function(n){var r=new Image;r.onload=function(){r.onload=r.onerror=null,n(r.width>0&&r.height>0)},r.onerror=function(){r.onload=r.onerror=null,n(!1)},r.src="data:image/webp;base64,"+t[e]}))}var N=n(31),V=v.a.getLogger("esri.layers.support.SpriteSource"),z=function(){function e(t,n,r,i){Object(s.a)(this,e),this.baseURL=t,this.devicePixelRatio=n,this.maxTextureSize=r,this._spriteImageFormat=i,this._isRetina=!1,this._spritesData={},this.image=null,this.width=null,this.height=null,this.loadStatus="not-loaded"}return Object(c.a)(e,[{key:"spriteNames",get:function(){var e=[];for(var t in this._spritesData)e.push(t);return e.sort(),e}},{key:"getSpriteInfo",value:function(e){return this._spritesData[e]}},{key:"load",value:function(){var e=Object(a.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.baseURL){e.next=13;break}return this.loadStatus="loading",e.prev=2,e.next=5,this._loadSprites(t);case 5:this.loadStatus="loaded",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),this.loadStatus="failed";case 11:e.next=14;break;case 13:this.loadStatus="failed";case 14:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_loadSprites",value:function(e){var t=this;this._isRetina=this.devicePixelRatio>1.15;var n=Object(w.J)(this.baseURL),r=n.query?"?"+Object(w.D)(n.query):"",i=this._isRetina?"@2x":"",a="".concat(n.path).concat(i,".").concat(this._spriteImageFormat).concat(r),s="".concat(n.path).concat(i,".json").concat(r);return Promise.all([Object(S.default)(s,e),Object(S.default)(a,Object(o.a)({responseType:"image"},e))]).then((function(e){var r=Object(N.a)(e,2),i=r[0],a=r[1],o=Object.keys(i.data);if(!o||0===o.length||1===o.length&&"_ssl"===o[0]||!a||!a.data)return t._spritesData=t.image=null,t.width=t.height=0,Promise.resolve(null);t._spritesData=i.data;var s=a.data,c=Math.max(t.maxTextureSize,4096);if(s.width>c||s.height>c){var l="Sprite resource for style ".concat(n.path," is bigger than the maximum allowed of ").concat(c," pixels}");throw V.error(l),new j.a("SpriteSource",l)}t.width=s.width,t.height=s.height;var u=document.createElement("canvas"),d=u.getContext("2d");u.width=s.width,u.height=s.height,d.drawImage(s,0,0,s.width,s.height);for(var f,p=d.getImageData(0,0,s.width,s.height),h=new Uint8Array(p.data),b=0;b<h.length;b+=4)f=h[b+3]/255,h[b]=h[b]*f,h[b+1]=h[b+1]*f,h[b+2]=h[b+2]*f;t.image=h}))}}]),e}(),U=n(14),B=n(98),G=n(508),q=n(748),H=function(){function e(t,n,r){Object(s.a)(this,e),this.tileMapURL="",this.tilemapCache=null,this.parsedUrl=null,this.tileInfo=null,this.capabilities=null,this.tileIndex=null,this.fullExtent=null,this.name=t,this.sourceUrl=n,n&&(this.parsedUrl=Object(w.J)(this.sourceUrl));var i=this.parsedUrl.path,a=this.parsedUrl.query?"?"+Object(w.D)(this.parsedUrl.query):"",o=Object(b.a)(r),c=o.tiles;n&&c.forEach((function(e,t){Object(w.s)(e)||(c[t]=Object(w.y)(i,e)+a)})),this.tileServers=c,r.tileMap&&(this.tileMapURL=Object(w.y)(n,r.tileMap));var l=r.capabilities&&r.capabilities.split(",").map((function(e){return e.toLowerCase().trim()})),u=!!r.exportTilesAllowed,d=!!l&&-1!==l.indexOf("tilemap"),f=u&&r.hasOwnProperty("maxExportTilesCount")?r.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:u,supportsTileMap:d},exportTiles:u?{maxExportTilesCount:+f}:null},this.tileInfo=Object(G.a)(o.tileInfo,o,null,{ignoreMinMaxLOD:!0}),d&&(this.type="vector-tile",this.tilemapCache=new L.a({layer:this}),this.tilemapCache&&(this.tileIndex=new q.a(this.tilemapCache))),this.fullExtent=x.a.fromJSON(r.fullExtent)}return Object(c.a)(e,[{key:"getRefKey",value:function(e,t){return this.tileIndex?this.tileIndex.dataKey(e,t):Promise.resolve(e)}},{key:"getSourceTileUrl",value:function(e,t,n){var r=this.tileServers[t%this.tileServers.length];return r=r.replace(/\{z\}/gi,e.toString()).replace(/\{y\}/gi,t.toString()).replace(/\{x\}/gi,n.toString())}},{key:"isCompatibleWith",value:function(e){var t=this.tileInfo,n=e.tileInfo;if(!t.spatialReference.equals(n.spatialReference))return!1;if(!t.origin.equals(n.origin))return!1;if(Math.round(t.dpi)!==Math.round(n.dpi))return!1;for(var r=t.lods,i=n.lods,a=Math.min(r.length,i.length),o=0;o<a;o++){var s=r[o],c=i[o];if(s.level!==c.level||Math.round(s.scale)!==Math.round(c.scale))return!1}return!0}}]),e}(),W=B.a.defaults&&B.a.defaults.io.corsEnabledServers;function $(e,t){return J.apply(this,arguments)}function J(){return(J=Object(a.a)(i.a.mark((function e(t,n){var r,a,o,s,c,l,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:"",spriteFormat:"png"},a="string"==typeof t?[t,null]:[null,t.jsonUrl],o=Object(N.a)(a,2),s=o[0],c=o[1],l=s?Object(w.J)(s):null,e.next=3,Z(r,"esri",t,c,n);case 3:return u={layerDefinition:r.validatedSource,url:s,parsedUrl:l,serviceUrl:r.sourceUrl,style:r.style,styleUrl:r.styleUrl,spriteUrl:r.style.sprite&&K(r.styleBase,r.style.sprite),spriteFormat:r.spriteFormat,glyphsUrl:r.style.glyphs&&K(r.styleBase,r.style.glyphs),sourceNameToSource:r.sourceNameToSource,primarySourceName:r.primarySourceName},e.abrupt("return",(Y(u.spriteUrl),Y(u.glyphsUrl),u));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){if(e){var t=Object(w.m)(e);W&&-1===W.indexOf(t)&&W.push(t)}}function K(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(Object(w.v)(n[i])){if(e){var a=e.split("://")[0];e=a+":"+n[i].trim()}}else e=Object(w.s)(n[i])?n[i]:Object(w.y)(e,n[i]);return Object(w.H)(e)}function Z(e,t,n,r,i){return X.apply(this,arguments)}function X(){return(X=Object(a.a)(i.a.mark((function e(t,n,r,a,s){var c,l,u,d,f,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(_.u)(s),"string"!=typeof r){e.next=11;break}return Y(d=Object(w.C)(r)),f=Object(w.J)(d),e.next=6,Object(S.default)(f.path,Object(o.a)({query:{f:"json"},responseType:"json"},s));case 6:u=e.sent,c=d,l=d,e.next=12;break;case 11:u={data:r},c=r.jsonUrl||null,l=a;case 12:return p=u.data,e.abrupt("return",(u.ssl&&(c&&(c=c.replace(/^http:/i,"https:")),l&&(l=l.replace(/^http:/i,"https:"))),Q(p)?(t.styleUrl=c||null,te(t,p,l,s)):ee(p)?t.sourceUrl?re(t,p,l,!1,n,s):(t.sourceUrl=c||null,re(t,p,l,!0,n,s)):Promise.reject("You must specify the URL or the JSON for a service or for a style.")));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){return!!e.sources}function ee(e){return!Q(e)}function te(e,t,n,r){return ne.apply(this,arguments)}function ne(){return(ne=Object(a.a)(i.a.mark((function e(t,n,r,a){var o,s,c,l,u,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r?Object(w.F)(r):w.f,t.styleBase=o,t.style=n,t.styleUrl&&Y(t.styleUrl),n["sprite-format"]&&"webp"===n["sprite-format"].toLowerCase()&&(t.spriteFormat="webp"),s=[],!n.sources||!n.sources.esri){e.next=11;break}if(!(c=n.sources.esri).url){e.next=10;break}return e.next=8,Z(t,"esri",K(o,c.url),void 0,a);case 8:e.next=11;break;case 10:s.push(Z(t,"esri",c,o,a));case 11:for(l=0,u=Object.keys(n.sources);l<u.length;l++)"esri"!==(d=u[l])&&"vector"===n.sources[d].type&&(n.sources[d].url?s.push(Z(t,d,K(o,n.sources[d].url),void 0,a)):n.sources[d].tiles&&s.push(Z(t,d,n.sources[d],o,a)));return e.next=14,Promise.all(s);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e,t,n,r,i,a){return ie.apply(this,arguments)}function ie(){return(ie=Object(a.a)(i.a.mark((function e(t,n,r,a,o,s){var c,l,u,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=r?Object(w.H)(r)+"/":w.f,l=ae(n,c),u=new H(o,c,l),a||!(t.primarySourceName in t.sourceNameToSource)){e.next=6;break}if((d=t.sourceNameToSource[t.primarySourceName]).isCompatibleWith(u)){e.next=5;break}return e.abrupt("return",Promise.resolve());case 5:null!=u.fullExtent&&(null!=d.fullExtent?d.fullExtent.union(u.fullExtent):d.fullExtent=u.fullExtent.clone()),d.tileInfo.lods.length<u.tileInfo.lods.length&&(d.tileInfo=u.tileInfo);case 6:if(a?(t.sourceBase=c,t.source=n,t.validatedSource=l,t.primarySourceName=o,t.sourceUrl&&Y(t.sourceUrl)):Y(c),t.sourceNameToSource[o]=u,t.style){e.next=8;break}return e.abrupt("return",null==n.defaultStyles?Promise.reject():"string"==typeof n.defaultStyles?Z(t,"",K(c,n.defaultStyles,"root.json"),void 0,s):Z(t,"",n.defaultStyles,K(c,"root.json"),s));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e,t){if(e.hasOwnProperty("tileInfo"))return e;for(var n={xmin:-20037507.067161843,ymin:-20037507.067161843,xmax:20037507.067161843,ymax:20037507.067161843,spatialReference:{wkid:102100}},r=78271.51696400007,i=295828763.7957775,a=[],o=e.hasOwnProperty("minzoom")?parseFloat(e.minzoom):0,s=e.hasOwnProperty("maxzoom")?parseFloat(e.maxzoom):22,c=0;c<=s;c++)c>=o&&a.push({level:c,scale:i,resolution:r}),r/=2,i/=2;var l,u=Object(U.a)(e.tiles);try{for(u.s();!(l=u.n()).done;){Y(K(t,l.value))}}catch(d){u.e(d)}finally{u.f()}return{capabilities:"TilesOnly",initialExtent:n,fullExtent:n,minScale:0,maxScale:0,tiles:e.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-20037508.342787,y:20037508.342787},lods:a,spatialReference:{wkid:102100}}}}var oe=n(749),se=n(302),ce=function(){function e(t,n){Object(s.a)(this,e),this.lockedSchemaPixelSize=t,this.isGCS=n}return Object(c.a)(e,[{key:"getLevelRowColumn",value:function(e){return this.isGCS?[e[0],e[1]>>1,e[2]>>1]:256===this.lockedSchemaPixelSize&&e[0]>0?[e[0]-1,e[1]>>1,e[2]>>1]:e}},{key:"adjustLevel",value:function(e){return this.isGCS?e:256===this.lockedSchemaPixelSize?e>0?e-1:0:e}},{key:"getShift",value:function(e,t){var n=0,r=0;return(256===this.lockedSchemaPixelSize||this.isGCS)&&(e[2]%2&&(n=t),e[1]%2&&(r=t)),[n,r]}},{key:"getScale",value:function(e){if(this.isGCS){if(512===this.lockedSchemaPixelSize)return 4}else if(256===this.lockedSchemaPixelSize&&0===e)return 1;return 2}}],[{key:"create256x256CompatibleTileInfo",value:function(e){if(!e)return null;if(256===e.size[0]&&256===e.size[1])return e;for(var t=e.spatialReference.isGeographic,n=[],r=e.lods.length,i=0;i<r;i++){var a=e.lods[i],o=t?a.resolution:2*a.resolution;n.push(new se.a({level:a.level,scale:a.scale,resolution:o}))}return new R.a({size:[256,256],dpi:e.dpi,format:e.format,compressionQuality:e.compressionQuality,origin:e.origin,spatialReference:e.spatialReference,lods:n})}},{key:"create512x512CompatibleTileInfo",value:function(e){if(!e)return null;if(256===e.size[0]||256===e.size[1])return null;for(var t=[],n=e.lods.length,r=0;r<n;r++){var i=e.lods[r],a=.5*i.resolution;t.push(new se.a({level:i.level,scale:i.scale,resolution:a}))}return new R.a({size:[512,512],dpi:e.dpi,format:e.format,compressionQuality:e.compressionQuality,origin:e.origin,spatialReference:e.spatialReference,lods:t})}}]),e}(),le=1e-6;function ue(e,t){if(e===t)return!0;if(!e&&null!=t)return!1;if(null!=e&&!t)return!1;if(!e.spatialReference.equals(t.spatialReference)||e.dpi!==t.dpi)return!1;var n,r,i=e.origin,a=t.origin;if(Math.abs(i.x-a.x)>=le||Math.abs(i.y-a.y)>=le)return!1;e.lods[0].scale>t.lods[0].scale?(n=e,r=t):(r=e,n=t);for(var o=n.lods[0].scale;o>=r.lods[r.lods.length-1].scale-le;o/=2)if(Math.abs(o-r.lods[0].scale)<le)return!0;return!1}function de(e,t){if(e===t)return e;if(!e&&null!=t)return t;if(null!=e&&!t)return e;for(var n=e.size[0],r=e.format,i=e.dpi,a={x:e.origin.x,y:e.origin.y},o=e.spatialReference.toJSON(),s=e.lods[0].scale>t.lods[0].scale?e.lods[0]:t.lods[0],c=e.lods[e.lods.length-1].scale<=t.lods[t.lods.length-1].scale?e.lods[e.lods.length-1]:t.lods[t.lods.length-1],l=s.scale,u=s.resolution,d=c.scale,f=[],p=l,h=u,b=0;p>d;)f.push({level:b,resolution:h,scale:p}),b++,p/=2,h/=2;return new R.a({size:[n,n],dpi:i,format:r||"pbf",origin:a,lods:f,spatialReference:o})}var fe=n(642),pe=n(465),he=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._spriteSourceMap=new Map,e.currentStyleInfo=null,e.style=null,e.isReference=null,e.operationalLayerType="VectorTileLayer",e.type="vector-tile",e.url=null,e}return Object(c.a)(n,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?Object(o.a)({url:e},t):e}},{key:"destroy",value:function(){this._spriteSourceMap.clear()}},{key:"prefetchResources",value:function(){var e=Object(a.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadSpriteSource(h.a.devicePixelRatio||1,t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(e){var t=this,n=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},e).then(Object(a.a)(i.a.mark((function n(){var r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.portalItem&&t.portalItem.id){n.next=2;break}return n.abrupt("return");case 2:return r="".concat(t.portalItem.itemUrl,"/resources/styles/root.json"),n.next=5,Object(S.default)(r,Object(o.a)(Object(o.a)({},e),{},{query:{f:"json"}}));case 5:if(n.t0=n.sent.data,!n.t0){n.next=8;break}t.read({url:r},Object(oe.a)(t.portalItem));case 8:case"end":return n.stop()}}),n)})))).then((function(){return t._loadStyle(e)}),(function(){return t._loadStyle(e)}));return this.addResolvingPromise(n),Promise.resolve(this)}},{key:"attributionDataUrl",get:function(){var e=this.currentStyleInfo,t=e&&e.serviceUrl&&Object(w.J)(e.serviceUrl);return t?this._getDefaultAttribution(t.path):null}},{key:"capabilities",get:function(){var e=this._getPrimarySource();return e?e.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}}},{key:"fullExtent",get:function(){var e=this._getPrimarySource();return e?e.fullExtent:null}},{key:"parsedUrl",get:function(){return this.serviceUrl?Object(w.J)(this.serviceUrl):null}},{key:"serviceUrl",get:function(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null}},{key:"spatialReference",get:function(){return this.tileInfo&&this.tileInfo.spatialReference||null}},{key:"styleUrl",get:function(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null}},{key:"writeStyleUrl",value:function(e,t){e&&Object(w.v)(e)&&(e="https:".concat(e)),t.styleUrl=e}},{key:"tileIndexType",get:function(){var e=this._getPrimarySource();return e?e.type:""}},{key:"tileIndexUrl",get:function(){var e=this._getPrimarySource();return e?e.tileMapURL:""}},{key:"tileInfo",get:function(){var e,t=[];for(var n in this.sourceNameToSource)t.push(this.sourceNameToSource[n]);var r=(null==(e=this._getPrimarySource())?void 0:e.tileInfo)||new R.a;if(t.length>1)for(var i=0;i<t.length;i++)ue(r,t[i].tileInfo)&&(r=de(r,t[i].tileInfo));return r}},{key:"tilemapCache",get:function(){var e=this._getPrimarySource();return e&&e.capabilities.operations.supportsTileMap?e.tilemapCache:null}},{key:"tileServers",get:function(){var e=this._getPrimarySource();return e?e.tileServers:[]}},{key:"readVersion",value:function(e,t){return t.version?parseFloat(t.version):parseFloat(t.currentVersion)}},{key:"compatibleTileInfo256",get:function(){return ce.create256x256CompatibleTileInfo(this.tileInfo)}},{key:"compatibleTileInfo512",get:function(){return ce.create512x512CompatibleTileInfo(this.tileInfo)}},{key:"loadSpriteSource",value:function(){var e=Object(a.a)(i.a.mark((function e(){var t,n,r,a,o=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:1,n=o.length>1?o[1]:void 0,this._spriteSourceMap.has(t)){e.next=7;break}return r=Object(pe.a)(),a=new z(this.styleRepository.sprite,t,r.maxTextureSize,this.currentStyleInfo.spriteFormat),e.next=6,a.load(n);case 6:this._spriteSourceMap.set(t,a);case 7:return e.abrupt("return",Promise.resolve(this._spriteSourceMap.get(t)));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadStyle",value:function(){var e=Object(a.a)(i.a.mark((function e(t,n){var r,a,o,s=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t||this.style||this.url,!this._loadingPromise||"string"!=typeof r||this.url!==r||Object(_.n)(this._abortController)){e.next=3;break}return e.abrupt("return",this._loadingPromise);case 3:return(a=this._abortController)&&a.abort(),o=Object(_.d)(),e.abrupt("return",(this._loadingPromise=new Promise((function(e,t){var i={signal:o.signal};s._spriteSourceMap.clear(),s._getSourceAndStyle(r,i).then(e,t),Object(_.p)(n,(function(){o.abort()}))})),this._abortController=o,this._loadingPromise));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getStyleLayerId",value:function(e){return this.styleRepository.getStyleLayerId(e)}},{key:"getStyleLayerIndex",value:function(e){return this.styleRepository.getStyleLayerIndex(e)}},{key:"getPaintProperties",value:function(e){return Object(b.a)(this.styleRepository.getPaintProperties(e))}},{key:"setPaintProperties",value:function(e,t){var n=this.styleRepository.isPainterDataDriven(e);this.styleRepository.setPaintProperties(e,t);var r=this.styleRepository.isPainterDataDriven(e);this.emit("paint-change",{layerName:e,paint:t,isDataDriven:n||r})}},{key:"getStyleLayer",value:function(e){return Object(b.a)(this.styleRepository.getStyleLayer(e))}},{key:"setStyleLayer",value:function(e,t){this.styleRepository.setStyleLayer(e,t),this.emit("style-layer-change",{layer:e,index:t})}},{key:"deleteStyleLayer",value:function(e){this.styleRepository.deleteStyleLayer(e),this.emit("delete-style-layer",{layerName:e})}},{key:"getLayoutProperties",value:function(e){return Object(b.a)(this.styleRepository.getLayoutProperties(e))}},{key:"setLayoutProperties",value:function(e,t){this.styleRepository.setLayoutProperties(e,t),this.emit("layout-change",{layer:e,layout:t})}},{key:"setStyleLayerVisibility",value:function(e,t){this.styleRepository.setStyleLayerVisibility(e,t),this.emit("style-layer-visibility-change",{layer:e,visibility:t})}},{key:"getStyleLayerVisibility",value:function(e){return this.styleRepository.getStyleLayerVisibility(e)}},{key:"getTileUrl",value:function(e,t,n){var r=this.tileServers[t%this.tileServers.length];return r=r.replace(/\{z\}/gi,e.toString()).replace(/\{y\}/gi,t.toString()).replace(/\{x\}/gi,n.toString())}},{key:"write",value:function(e,t){return t&&t.origin&&!this.styleUrl?(t.messages&&t.messages.push(new j.a("vectortilelayer:unsupported","VectorTileLayer (".concat(this.title,", ").concat(this.id,") with style defined by JSON only are not supported"),{layer:this})),null):Object(l.a)(Object(u.a)(n.prototype),"write",this).call(this,e,t)}},{key:"_getSourceAndStyle",value:function(){var e=Object(a.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("invalid style!");case 2:return e.next=4,$(t,n);case 4:if("webp"!==(r=e.sent).spriteFormat){e.next=11;break}return e.next=8,D("lossy");case 8:if(e.t0=e.sent,e.t0){e.next=11;break}r.spriteFormat="png";case 11:this._set("currentStyleInfo",Object(o.a)({},r)),"string"==typeof t?(this.url=t,this.style=null):(this.url=null,this.style=t),this._set("sourceNameToSource",r.sourceNameToSource),this._set("primarySourceName",r.primarySourceName),this._set("styleRepository",new fe.a(r.style,r)),this.read(r.layerDefinition,{origin:"service"}),this.emit("load-style",{});case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getDefaultAttribution",value:function(e){var t=e.match(/^https?:\/\/(?:basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);if(t){var n=t[2]&&t[2].toLowerCase();if(n)for(var r=t[1]||"",i=0,a=["OpenStreetMap_v2","OpenStreetMap_Daylight_v2","OpenStreetMap_Export_v2","OpenStreetMap_FTS_v2","OpenStreetMap_GCS_v2","World_Basemap","World_Basemap_v2","World_Basemap_Export_v2","World_Basemap_GCS_v2","World_Basemap_WGS84","World_Contours_v2"];i<a.length;i++){var o=a[i];if(o.toLowerCase().indexOf(n)>-1)return Object(w.C)("//static.arcgis.com/attribution/Vector".concat(r,"/").concat(o))}}}},{key:"_getPrimarySource",value:function(){return this.sourceNameToSource&&this.primarySourceName in this.sourceNameToSource?this.sourceNameToSource[this.primarySourceName]:null}},{key:"_loadStyle",value:function(){var e=Object(a.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._loadingPromise?this._loadingPromise:this.loadStyle(null,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Object(I.a)(Object(A.a)(Object(F.a)(Object(P.a)(Object(C.a)(Object(M.a)(Object(E.a)(T.a))))))));Object(p.a)([Object(y.b)({readOnly:!0})],he.prototype,"attributionDataUrl",null),Object(p.a)([Object(y.b)({type:["show","hide"]})],he.prototype,"listMode",void 0),Object(p.a)([Object(y.b)({readOnly:!0,dependsOn:["sourceNameToSource","primarySourceName"],json:{read:!1}})],he.prototype,"capabilities",null),Object(p.a)([Object(y.b)({readOnly:!0})],he.prototype,"currentStyleInfo",void 0),Object(p.a)([Object(y.b)({json:{read:!1},readOnly:!0,type:x.a})],he.prototype,"fullExtent",null),Object(p.a)([Object(y.b)()],he.prototype,"style",void 0),Object(p.a)([Object(y.b)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],he.prototype,"isReference",void 0),Object(p.a)([Object(y.b)({type:["VectorTileLayer"]})],he.prototype,"operationalLayerType",void 0),Object(p.a)([Object(y.b)({readOnly:!0})],he.prototype,"parsedUrl",null),Object(p.a)([Object(y.b)({readOnly:!0})],he.prototype,"serviceUrl",null),Object(p.a)([Object(y.b)({type:k.a,readOnly:!0})],he.prototype,"spatialReference",null),Object(p.a)([Object(y.b)({readOnly:!0})],he.prototype,"styleRepository",void 0),Object(p.a)([Object(y.b)({readOnly:!0})],he.prototype,"sourceNameToSource",void 0),Object(p.a)([Object(y.b)({readOnly:!0})],he.prototype,"primarySourceName",void 0),Object(p.a)([Object(y.b)({type:String,readOnly:!0,json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],he.prototype,"styleUrl",null),Object(p.a)([Object(O.a)(["portal-item","web-document"],"styleUrl")],he.prototype,"writeStyleUrl",null),Object(p.a)([Object(y.b)({json:{read:!1},readOnly:!0})],he.prototype,"tileIndexType",null),Object(p.a)([Object(y.b)({json:{read:!1},readOnly:!0})],he.prototype,"tileIndexUrl",null),Object(p.a)([Object(y.b)({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:R.a})],he.prototype,"tileInfo",null),Object(p.a)([Object(y.b)({json:{read:!1},readOnly:!0,type:L.a})],he.prototype,"tilemapCache",null),Object(p.a)([Object(y.b)({json:{read:!1},readOnly:!0})],he.prototype,"tileServers",null),Object(p.a)([Object(y.b)({json:{read:!1},readOnly:!0,value:"vector-tile"})],he.prototype,"type",void 0),Object(p.a)([Object(y.b)({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],he.prototype,"url",void 0),Object(p.a)([Object(y.b)({readOnly:!0})],he.prototype,"version",void 0),Object(p.a)([Object(m.a)("version",["version","currentVersion"])],he.prototype,"readVersion",null),Object(p.a)([Object(y.b)({readOnly:!0})],he.prototype,"compatibleTileInfo256",null),Object(p.a)([Object(y.b)({readOnly:!0})],he.prototype,"compatibleTileInfo512",null);var be=he=Object(p.a)([Object(g.a)("esri.layers.VectorTileLayer")],he);t.default=be},function(e,t,n){"use strict";n.r(t);var r=n(7),i=n.n(r),a=n(15),o=n(10),s=n(2),c=n(3),l=n(5),u=n(6),d=n(0),f=(n(16),n(4)),p=n(13),h=(n(17),n(1)),b=n(41),v=n(8),y=n(18),m=n(12),g=(n(19),n(20),n(24)),O=n(62),j=n(174),w=n(216),_=n(251),k=n(124),x=n(258),S=n(319),T=n(257),E=n(418),C=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,"LercWorker","_decode",e,{strategy:"dedicated"})).scheduler=e,r}return Object(c.a)(n,[{key:"decode",value:function(e,t,n){return e&&0!==e.byteLength?this.invoke({buffer:e,options:t},n):Promise.resolve(null)}},{key:"getTransferList",value:function(e){return[e.buffer]}}]),n}(n(745).a),P=new Map;function I(e){var t=P.get(e);return t||(t={instance:new C(e),ref:0},P.set(e,t)),++t.ref,t.instance}var M=p.a.getLogger("esri.layers.ElevationLayer"),A=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(s.a)(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).copyright=null,e.heightModelInfo=null,e.path=null,e.opacity=1,e.operationalLayerType="ArcGISTiledElevationServiceLayer",e.sourceJSON=null,e.type="elevation",e.url=null,e.version=null,e._lercDecoder=I(),e}return Object(c.a)(r,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?Object(o.a)({url:e},t):e}},{key:"destroy",value:function(){(function(e){if(null!=e){var t=e.scheduler,n=P.get(t);n&&--n.ref<=0&&(n.instance.destroy(),P.delete(t))}})(this._lercDecoder),this._lercDecoder=null}},{key:"minScale",get:function(){},set:function(e){this.constructed&&M.warn("".concat(this.declaredClass,".minScale support has been removed (since 4.5)"))}},{key:"maxScale",get:function(){},set:function(e){this.constructed&&M.warn("".concat(this.declaredClass,".maxScale support has been removed (since 4.5)"))}},{key:"readVersion",value:function(e,t){var n=t.currentVersion;return n||(n=9.3),n}},{key:"load",value:function(e){var t=this,n=Object(f.k)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"],supportsData:!1,validateItem:function(e){for(var t=0;t<e.typeKeywords.length;t++)if("elevation 3d layer"===e.typeKeywords[t].toLowerCase())return!0;throw new y.a("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}' ",{type:"Image Service",expectedType:"Image Service Elevation 3D Layer"})}},e).then((function(){return t._fetchImageService(n)}),(function(){return t._fetchImageService(n)}))),Promise.resolve(this)}},{key:"fetchTile",value:function(e,t,n,r){var i=this,a=Object(f.k)((r=r||{signal:null}).signal)?r.signal:r.signal=Object(g.d)().signal,o={responseType:"array-buffer",signal:a},s={noDataValue:r.noDataValue,returnFileInfo:!0};return this.load().then((function(){return i._fetchTileAvailability(e,t,n,r)})).then((function(){return Object(O.default)(i.getTileUrl(e,t,n),o)})).then((function(e){return i._lercDecoder.decode(e.data,s,a)})).then((function(e){return{values:e.pixelData,width:e.width,height:e.height,maxZError:e.fileInfo.maxZError,noDataValue:e.noDataValue,minValue:e.minValue,maxValue:e.maxValue}}))}},{key:"getTileUrl",value:function(e,t,n){var r=!this.tilemapCache&&this.supportsBlankTile,i=Object(m.D)(Object(o.a)(Object(o.a)({},this.parsedUrl.query),{},{blankTile:!r&&null}));return"".concat(this.parsedUrl.path,"/tile/").concat(e,"/").concat(t,"/").concat(n).concat(i?"?"+i:"")}},{key:"queryElevation",value:function(){var e=Object(a.a)(i.a.mark((function e(t,r){var a,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(13).then(n.bind(null,1453));case 2:return a=e.sent,o=a.ElevationQuery,Object(g.u)(r),e.abrupt("return",(new o).query(this,t,r));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createElevationSampler",value:function(){var e=Object(a.a)(i.a.mark((function e(t,r){var a,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(13).then(n.bind(null,1453));case 2:return a=e.sent,o=a.ElevationQuery,Object(g.u)(r),e.abrupt("return",(new o).createSampler(this,t,r));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_fetchTileAvailability",value:function(e,t,n,r){return this.tilemapCache?this.tilemapCache.fetchAvailability(e,t,n,r):Promise.resolve("unknown")}},{key:"_fetchImageService",value:function(){var e=Object(a.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.sourceJSON){e.next=2;break}return e.abrupt("return",this.sourceJSON);case 2:return n={query:Object(o.a)({f:"json"},this.parsedUrl.query),responseType:"json",signal:t},e.next=5,Object(O.default)(this.parsedUrl.path,n);case 5:(r=e.sent).ssl&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=r.data,this.read(r.data,{origin:"service",url:this.parsedUrl});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(Object(E.a)(Object(S.a)(Object(x.a)(Object(T.a)(Object(w.a)(j.a))))));Object(d.a)([Object(h.b)({json:{read:{source:"copyrightText"}}})],A.prototype,"copyright",void 0),Object(d.a)([Object(h.b)({readOnly:!0,type:_.a})],A.prototype,"heightModelInfo",void 0),Object(d.a)([Object(h.b)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],A.prototype,"path",void 0),Object(d.a)([Object(h.b)({type:["show","hide"]})],A.prototype,"listMode",void 0),Object(d.a)([Object(h.b)({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],A.prototype,"minScale",null),Object(d.a)([Object(h.b)({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],A.prototype,"maxScale",null),Object(d.a)([Object(h.b)({json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],A.prototype,"opacity",void 0),Object(d.a)([Object(h.b)({type:["ArcGISTiledElevationServiceLayer"]})],A.prototype,"operationalLayerType",void 0),Object(d.a)([Object(h.b)()],A.prototype,"sourceJSON",void 0),Object(d.a)([Object(h.b)({json:{read:!1},value:"elevation",readOnly:!0})],A.prototype,"type",void 0),Object(d.a)([Object(h.b)(k.n)],A.prototype,"url",void 0),Object(d.a)([Object(h.b)()],A.prototype,"version",void 0),Object(d.a)([Object(b.a)("version",["currentVersion"])],A.prototype,"readVersion",null);var R=A=Object(d.a)([Object(v.a)("esri.layers.ElevationLayer")],A);t.default=R},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(2),i=n(3),a=n(4),o=n(366),s=(n(7),n(15),n(13)),c=(n(138),n(443)),l=s.a.getLogger("esri.views.3d.layers.graphics.featureExpressionInfoUtils");function u(e){return null!=e.cachedResult}var d=function(){function e(){Object(r.a)(this,e),this._meterUnitOffset=0,this._renderUnitOffset=0,this._unit="meters",this._metersPerElevationInfoUnit=1,this._featureExpressionInfoContext=null,this.centerPointInElevationSR=null,this.mode=null}return Object(i.a)(e,[{key:"featureExpressionInfoContext",get:function(){return this._featureExpressionInfoContext}},{key:"meterUnitOffset",get:function(){return this._meterUnitOffset}},{key:"unit",get:function(){return this._unit},set:function(e){this._unit=e,this._metersPerElevationInfoUnit=Object(o.a)(e)}},{key:"reset",value:function(){this.mode=null,this._meterUnitOffset=0,this._renderUnitOffset=0,this._featureExpressionInfoContext=null,this.unit="meters"}},{key:"offsetMeters",set:function(e){this._meterUnitOffset=e,this._renderUnitOffset=0}},{key:"offsetElevationInfoUnits",set:function(e){this._meterUnitOffset=e*this._metersPerElevationInfoUnit,this._renderUnitOffset=0}},{key:"addOffsetRenderUnits",value:function(e){this._renderUnitOffset+=e}},{key:"geometryZWithOffset",value:function(e,t){var n=this.calculateOffsetRenderUnits(t);return null!=this.featureExpressionInfoContext?n:e+n}},{key:"calculateOffsetRenderUnits",value:function(e){var t=this._meterUnitOffset,n=this.featureExpressionInfoContext;return null!=n&&(t+=function(e){if(null!=e){if(u(e))return e.cachedResult;var t=e.arcade,n=e.arcade.modules.arcadeUtils.executeFunction(t.func,t.context);return"number"!=typeof n&&(e.cachedResult=0,n=0),n}return 0}(n)*this._metersPerElevationInfoUnit),t/e.unitInMeters+this._renderUnitOffset}},{key:"setFromElevationInfo",value:function(e){this.mode=e.mode,this.unit=Object(o.c)(e.unit)?e.unit:"meters",this.offsetElevationInfoUnits=Object(a.r)(e.offset,0)}},{key:"updateFeatureExpressionInfoContext",value:function(e,t,n){if(Object(a.j)(e))this._featureExpressionInfoContext=null;else{var r,i=e&&e.arcade;i&&Object(a.k)(t)&&Object(a.k)(n)?(this._featureExpressionInfoContext={cachedResult:(r=e).cachedResult,arcade:r.arcade?{func:r.arcade.func,context:r.arcade.modules.arcadeUtils.createExecContext(null,{sr:r.arcade.context.spatialReference}),modules:r.arcade.modules}:null},function(e,t){if(null!=e&&!u(e)){if(!t||!e.arcade)return void l.errorOncePerTick("Arcade support required but not provided");var n=t;n._geometry&&(n._geometry=Object(c.b)(n._geometry)),e.arcade.modules.arcadeUtils.updateExecContext(e.arcade.context,t)}}(this._featureExpressionInfoContext,function(e,t,n){return e.arcadeUtils.createFeature(t.attributes,t.geometry,n)}(i.modules,t,n))):this._featureExpressionInfoContext=e}}}],[{key:"fromElevationInfo",value:function(t){var n=new e;return Object(a.k)(t)&&n.setFromElevationInfo(t),n}}]),e}()},function(e,t,n){"use strict";var r=n(2),i=n(3),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Object(r.a)(this,e),this._seed=t}return Object(i.a)(e,[{key:"seed",set:function(t){this._seed=null==t?Math.random()*e._m:t}},{key:"getInt",value:function(){return this._seed=(e._a*this._seed+e._c)%e._m,this._seed}},{key:"getFloat",value:function(){return this.getInt()/(e._m-1)}},{key:"getIntRange",value:function(e,t){return Math.round(this.getFloatRange(e,t))}},{key:"getFloatRange",value:function(t,n){var r=n-t;return t+this.getInt()/e._m*r}}]),e}();a._m=2147483647,a._a=48271,a._c=0,t.a=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=new(n(47).a)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(14),i=n(13),a=n(54),o=n(266),s=i.a.getLogger("esri.layers.support.fieldProperties");function c(){return{fields:{type:[o.a],value:null},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;var t,n=Object(r.a)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;Object(a.t)(this.fields,i)||s.error("field-attributes-layer:invalid-field","Invalid field ".concat(i," found in outFields"),{layer:this,outFields:e})}}catch(o){n.e(o)}finally{n.f()}return Object(a.k)(this.fields,e)}}}}},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(506),o=function(){function e(t,n){Object(r.a)(this,e),this._storage=new a.b,this._storage.maxSize=t,n&&this._storage.registerRemoveFunc("",n)}return Object(i.a)(e,[{key:"put",value:function(e,t){this._storage.put(e,t,1,1)}},{key:"pop",value:function(e){return this._storage.pop(e)}},{key:"get",value:function(e){return this._storage.get(e)}},{key:"clear",value:function(){this._storage.clearAll()}},{key:"destroy",value:function(){this._storage.destroy()}}]),e}();t.a=o},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return d}));var r=n(31),i=n(14),a=n(3),o=n(2),s=(n(4),n(750));function c(e,t,n,r,i,a){var o=n-i;if(o>=0)return(t>>o)+(r-(a<<o))*(e>>o);var s=-o;return t-(a-(r<<s))*(e>>s)<<s}var l=function(){function e(t,n,r){Object(o.a)(this,e),this._rows=Math.ceil(n/r),this._columns=Math.ceil(t/r),this._cellSize=r,this.cells=new Array(this._rows);for(var i=0;i<this._rows;i++){this.cells[i]=new Array(this._columns);for(var a=0;a<this._columns;a++)this.cells[i][a]=[]}}return Object(a.a)(e,[{key:"getCell",value:function(e,t){var n=Math.min(Math.max(Math.floor(t/this._cellSize),0),this._rows-1),r=Math.min(Math.max(Math.floor(e/this._cellSize),0),this._columns-1);return this.cells[n]&&this.cells[n][r]||null}},{key:"getCellSpan",value:function(e,t,n,r){return[Math.min(Math.max(Math.floor(e/this._cellSize),0),this.columns-1),Math.min(Math.max(Math.floor(t/this._cellSize),0),this.rows-1),Math.min(Math.max(Math.floor(n/this._cellSize),0),this.columns-1),Math.min(Math.max(Math.floor(r/this._cellSize),0),this.rows-1)]}},{key:"cellSize",get:function(){return this._cellSize}},{key:"columns",get:function(){return this._columns}},{key:"rows",get:function(){return this._rows}}]),e}();function u(e,t,n,r,i,a){for(var o=t[r++],c=0;c<o;c++){var l=new s.a(a);l.xTile=t[r++],l.yTile=t[r++],l.hash=t[r++],l.priority=t[r++];for(var u=t[r++],d=0;d<u;d++){var f=t[r++],p=t[r++],h=t[r++],b=t[r++],v=!!t[r++],y=t[r++],m=n[r++],g=n[r++],O=t[r++],j=t[r++];l.colliders.push({xTile:f,yTile:p,dxPixels:h,dyPixels:b,hard:v,partIndex:y,width:O,height:j,minLod:m,maxLod:g})}for(var w=e[r++],_=0;_<w;_++)l.textVertexRanges.push([e[r++],e[r++]]);for(var k=e[r++],x=0;x<k;x++)l.iconVertexRanges.push([e[r++],e[r++]]);i.push(l)}return r}function d(e,t,n){var a,o=Object(i.a)(e.symbols);try{for(o.s();!(a=o.n()).done;){var s=Object(r.a)(a.value,2),c=s[0];f(e,t,n,s[1],c)}}catch(l){o.e(l)}finally{o.f()}}function f(e,t,n,a,o){var s=e.layerData.get(o);if(3===s.type){var c,l=Object(i.a)(a);try{for(l.s();!(c=l.n()).done;){var u=c.value,d=u.unique,f=void 0;if(u.selectedForRendering){var p=d.parts[0],h=p.startOpacity,b=p.targetOpacity;e.allSymbolsFadingOut=e.allSymbolsFadingOut&&0===b;var v=n?Math.floor(127*h)|b<<7:b?255:0;f=v<<24|v<<16|v<<8|v}else f=0;var y,m=Object(i.a)(u.iconVertexRanges);try{for(m.s();!(y=m.n()).done;)for(var g=Object(r.a)(y.value,2),O=g[0],j=g[1],w=O;w<O+j;w+=4)s.iconOpacity[w/4]=f}catch(A){m.e(A)}finally{m.f()}if(u.selectedForRendering){var _=d.parts[1],k=_.startOpacity,x=_.targetOpacity;e.allSymbolsFadingOut=e.allSymbolsFadingOut&&0===x;var S=n?Math.floor(127*k)|x<<7:x?255:0;f=S<<24|S<<16|S<<8|S}else f=0;var T,E=Object(i.a)(u.textVertexRanges);try{for(E.s();!(T=E.n()).done;)for(var C=Object(r.a)(T.value,2),P=C[0],I=C[1],M=P;M<P+I;M+=4)s.textOpacity[M/4]=f}catch(A){E.e(A)}finally{E.f()}}}catch(A){l.e(A)}finally{l.f()}s.lastOpacityUpdate=t,s.opacityChanged=!0}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(2),i=n(3),a=n(5),o=n(6),s=n(70),c=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this)).point=e,i}return Object(i.a)(n,[{key:"equals",value:function(e){return e instanceof n&&Object(s.d)(this.point,e.point)}}]),n}(n(284).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(7),i=n.n(r),a=n(15),o=n(10),s=n(2),c=n(3),l=n(4),u=n(24),d=n(282),f=n(407),p=n(351),h=n(348),b=function(){function e(){Object(s.a)(this,e),this.next=new h.a}return Object(c.a)(e,[{key:"createSnapDragEventPipelineStep",value:function(e){var t=this,n=e.predicate,r=void 0===n?function(){return!0}:n,s=e.cancel,c=e.snappingManager,b=e.snappingContext;if(Object(l.j)(c))return function(e){return e};var v=null,y=null,m=function(){v=Object(l.a)(v),c.doneSnapping(),Object(l.k)(y)&&y.frameTask.remove(),y=null};return s.next((function(e){return m(),e})),this.next=new h.a,function(e){if(!r(e))return e;if(v=Object(l.a)(v),"start"===e.action){var n="3d"===c.view.type?c.view.resourceController.scheduler.registerTask(d.b.SNAPPING,(function(e){return Object(l.q)(n).processQueue(e)}),(function(){return!1})):d.a;y={context:new p.a({geometry:b.geometry,elevationInfo:b.elevationInfo,pointer:b.pointer,vertexHandle:Object(l.k)(e.info)?e.info.handle:null,excludeFeature:b.excludeFeature,visualizer:b.visualizer}),originalPos:Object(l.k)(e.snapOrigin)?b.coordinateHelper.createDehydratedPoint(e.snapOrigin):e.mapStart,frameTask:n}}if(Object(l.k)(y)){var s=y.context.coordinateHelper.createDehydratedPoint(y.context.coordinateHelper.fromArray([y.originalPos.x,y.originalPos.y,y.originalPos.z]));s.x+=e.mapEnd.x-e.mapStart.x,s.y+=e.mapEnd.y-e.mapStart.y;var h=e.mapStart.x-y.originalPos.x,g=e.mapStart.y-y.originalPos.y,O=Object(o.a)(Object(o.a)({},e),{},{action:"udpate"}),j=y.context,w=c.update(s,y.context);if(e.mapEnd.x=w.x+h,e.mapEnd.y=w.y+g,"end"!==e.action){var _=y.frameTask;v=Object(u.h)(function(){var e=Object(a.a)(i.a.mark((function e(n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.schedule((function(){return c.snap(s,j,n)}),n);case 2:if(!(r=e.sent).valid){e.next=8;break}return e.next=6,_.schedule((function(){return r.apply()}),n);case 6:a=e.sent,Object(f.a)(a,w)||(O.mapEnd.x=a.x+h,O.mapEnd.y=a.y+g,t.next.execute(O));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}return"end"===e.action&&m(),e}}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r,i,a,o,s=n(29),c=n(34);function l(e,t){e.constants.add("stippleAlphaColorDiscard","float",.001),e.constants.add("stippleAlphaHighlightDiscard","float",.5),t.stippleEnabled?function(e,t){e.vertex.uniforms.add("stipplePatternPixelSizeInv","float"),t.stippleUVMaxEnabled&&e.varyings.add("stipplePatternUvMax","float"),e.varyings.add("stipplePatternUv","float"),e.fragment.uniforms.add("stipplePatternTexture","sampler2D"),t.stippleOffColorEnabled&&e.fragment.uniforms.add("stippleOffColor","vec4"),e.fragment.code.add(Object(c.a)(r||(r=Object(s.a)(["\n  float getStippleAlpha() {\n    float stipplePatternUvClamped = stipplePatternUv * gl_FragCoord.w;\n    ","\n\n    return texture2D(stipplePatternTexture, vec2(mod(stipplePatternUvClamped, 1.0), 0.5)).a;\n  }"])),t.stippleUVMaxEnabled?"stipplePatternUvClamped = clamp(stipplePatternUvClamped, 0.0, stipplePatternUvMax);":"")),t.stippleOffColorEnabled?e.fragment.code.add(Object(c.a)(i||(i=Object(s.a)(["\n    #define discardByStippleAlpha(stippleAlpha, threshold) {}\n    #define blendStipple(color, stippleAlpha) mix(color, stippleOffColor, stippleAlpha)\n    "])))):e.fragment.code.add(Object(c.a)(a||(a=Object(s.a)(["\n    #define discardByStippleAlpha(stippleAlpha, threshold) if (stippleAlpha < threshold) { discard; }\n    #define blendStipple(color, stippleAlpha) vec4(color.rgb, color.a * stippleAlpha)\n    "]))))}(e,t):function(e){e.fragment.code.add(Object(c.a)(o||(o=Object(s.a)(["\n  float getStippleAlpha() { return 1.0; }\n\n  #define discardByStippleAlpha(_stippleAlpha_, _threshold_) {}\n  #define blendStipple(color, _stippleAlpha_) color\n  "]))))}(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r,i=n(29),a=n(34);function o(e){e.attributes.add("position","vec2"),e.varyings.add("uv","vec2"),e.vertex.code.add(Object(a.a)(r||(r=Object(i.a)(["\n    void main(void) {\n      gl_Position = vec4(position, 0.0, 1.0);\n      uv = position * 0.5 + vec2(0.5);\n    }\n  "]))))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(10),i={divisor:0};function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object(r.a)(Object(r.a)({},i),t);var n=e.stride;return e.fieldNames.filter((function(t){var n=e.fields.get(t).optional;return!(n&&n.glPadding)})).map((function(r){var i=e.fields.get(r),a=i.constructor.ElementCount,s=o(i.constructor.ElementType),c=i.offset,l=!(!i.optional||!i.optional.glNormalized);return{name:r,stride:n,count:a,type:s,offset:c,normalized:l,divisor:t.divisor}}))}function o(e){var t=s[e];if(t)return t;throw new Error("BufferType not supported in WebGL")}var s={u8:5121,u16:5123,u32:5125,i8:5120,i16:5122,i32:5124,f32:5126}},function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return v}));var r=n(5),i=n(6),a=n(2),o=n(3),s=n(4),c=n(43),l=(n(71),n(27)),u=n(11),d=n(321),f=n(563),p=n(110),h=n(211);function b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(s.k)(n)?[e,t,n]:[e,t]}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(s.k)(n)?{x:e,y:t,z:n}:{x:e,y:t}}var y=function(){function e(t){Object(a.a)(this,e),this.spatialReference=t}return Object(o.a)(e,[{key:"mapToLocalMultiple",value:function(e){var t=this;return Object(s.g)(e.map((function(e){return t.mapToLocal(e)})))}},{key:"doUnnormalization",get:function(){return!1}}]),e}(),m=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(a.a)(this,n),(i=t.call(this,r)).defaultZ=o,i.transform=Object(h.b)(),i.transformInv=Object(h.b)(),i.transform=Object(h.a)(e),Object(p.a)(i.transformInv,i.transform),i}return Object(o.a)(n,[{key:"makeMapPoint",value:function(e,t){return b(e,t,this.defaultZ)}},{key:"mapToLocal",value:function(e){return v(this.transform[0]*e[0]+this.transform[2]*e[1]+this.transform[4],this.transform[1]*e[0]+this.transform[3]*e[1]+this.transform[5])}},{key:"localToMap",value:function(e){return b(this.transformInv[0]*e.x+this.transformInv[2]*e.y+this.transformInv[4],this.transformInv[1]*e.x+this.transformInv[3]*e.y+this.transformInv[5],this.defaultZ)}}]),n}(y),g=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e,r){var i;Object(a.a)(this,n),(i=t.call(this,e.spatialReference)).view=e,i.defaultZ=null,i.pWS=Object(l.e)(),i.tangentFrameUpWS=Object(l.e)(),i.tangentFrameRightWS=Object(l.e)(),i.tangentFrameForwardWS=Object(l.e)(),i.localFrameRightWS=Object(l.e)(),i.localFrameUpWS=Object(l.e)(),i.worldToLocalTransform=Object(d.a)(),i.localToWorldTransform=Object(d.a)(),i.scale=1,i.scale=e.resolution,i.referenceMapPoint=r,i.defaultZ=r.hasZ?r.z:null;var o=e.state.camera.viewRight;i.view.renderCoordsHelper.toRenderCoords(i.referenceMapPoint,i.pWS),i.view.renderCoordsHelper.worldBasisAtPosition(i.pWS,0,i.tangentFrameRightWS),i.view.renderCoordsHelper.worldBasisAtPosition(i.pWS,1,i.tangentFrameUpWS),i.view.renderCoordsHelper.worldBasisAtPosition(i.pWS,2,i.tangentFrameForwardWS);var s=Object(l.e)();return Object(u.d)(s,i.tangentFrameForwardWS,Object(u.g)(o,i.tangentFrameForwardWS)),Object(u.i)(i.localFrameRightWS,o,s),Object(u.q)(i.localFrameRightWS,i.localFrameRightWS),Object(u.f)(i.localFrameUpWS,i.tangentFrameForwardWS,i.localFrameRightWS),Object(f.d)(i.worldToLocalTransform,i.localFrameRightWS,i.tangentFrameRightWS),Object(f.c)(i.localToWorldTransform,i.worldToLocalTransform),i}return Object(o.a)(n,[{key:"doUnnormalization",get:function(){return"global"===this.view.viewingMode}},{key:"makeMapPoint",value:function(e,t){return b(e,t,this.defaultZ)}},{key:"mapToLocal",value:function(e){var t=Object(l.e)();this.view.renderCoordsHelper.toRenderCoords(new c.a({x:e[0],y:e[1],spatialReference:this.spatialReference}),t),Object(u.t)(t,t,this.worldToLocalTransform);var n=this.view.renderCoordsHelper.fromRenderCoords(t,this.view.spatialReference);return Object(s.k)(n)?v(n.x/this.scale,n.y/this.scale):null}},{key:"localToMap",value:function(e){var t=Object(l.e)();this.view.renderCoordsHelper.toRenderCoords(new c.a({x:e.x*this.scale,y:e.y*this.scale,spatialReference:this.spatialReference}),t),Object(u.t)(t,t,this.localToWorldTransform);var n=this.view.renderCoordsHelper.fromRenderCoords(t,this.view.spatialReference);return Object(s.k)(n)?b(n.x,n.y,this.defaultZ):null}}]),n}(y);function O(e,t){if("2d"===e.type)return new m(e.state.transform,e.spatialReference,t.length>2?t[2]:null);if("3d"===e.type){var n=t.length>2?new c.a({x:t[0],y:t[1],z:t[2],spatialReference:e.spatialReference}):new c.a({x:t[0],y:t[1],spatialReference:e.spatialReference});return new g(e,n)}return null}},function(e,t,n){"use strict";var r=n(14),i=n(7),a=n.n(i),o=n(10),s=n(15),c=n(2),l=n(3),u=n(5),d=n(6),f=n(0),p=n(16),h=n(4),b=(n(13),n(17),n(1)),v=n(8),y=(n(12),n(19),n(20),n(204)),m=n(228),g=n(121),O=n(250),j=n(365),w=n(106),_=n(583);function k(){return(k=Object(s.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(w.c)(t),e.abrupt("return",Object(_.a)(i,j.a.from(n),Object(o.a)({},r)).then((function(e){return Object(_.b)(e.data.attachmentGroups,i.path)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=n(236);function S(){return(S=Object(s.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(w.c)(t),e.abrupt("return",Object(x.executeQueryForCount)(i,g.a.from(n),Object(o.a)({},r)).then((function(e){return e.data.count})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=n(63);n(71);function E(){return(E=Object(s.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(w.c)(t),e.abrupt("return",Object(x.executeQueryForExtent)(i,g.a.from(n),Object(o.a)({},r)).then((function(e){return{count:e.data.count,extent:T.a.fromJSON(e.data.extent)}})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(s.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(w.c)(t),e.abrupt("return",Object(x.executeQueryForIds)(i,g.a.from(n),Object(o.a)({},r)).then((function(e){return e.data.objectIds})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t,n){return I.apply(this,arguments)}function I(){return(I=Object(s.a)(a.a.mark((function e(t,n,r){var i,s,c,l,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(w.c)(t),s=Object(o.a)({},r),c=g.a.from(n),e.next=5,Object(x.executeQuery)(i,c,c.sourceSpatialReference,s);case 5:return l=e.sent,u=l.data,e.abrupt("return",u);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var M=n(195),A=n(559),R=n(392);function L(e,t){return t}function F(e,t,n,r){switch(n){case 0:return z(e,t+r,0);case 1:return"lowerLeft"===e.originPosition?z(e,t+r,1):function(e,t,n){var r=e.translate,i=e.scale;return r[n]-t*i[n]}(e,t+r,1)}}function D(e,t,n,r){switch(n){case 2:return z(e,t,2);default:return F(e,t,n,r)}}function N(e,t,n,r){switch(n){case 2:return z(e,t,3);default:return F(e,t,n,r)}}function V(e,t,n,r){switch(n){case 3:return z(e,t,3);default:return D(e,t,n,r)}}function z(e,t,n){var r=e.translate,i=e.scale;return r[n]+t*i[n]}var U=function(){function e(t){Object(c.a)(this,e),this.options=t,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this.previousCoordinate=[0,0],this.transform=null,this.applyTransform=L,this.lengths=[],this.currentLengthIndex=0,this.toAddInCurrentPath=0,this.vertexDimension=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,this.AttributesConstructor=function(){}}return Object(l.a)(e,[{key:"createFeatureResult",value:function(){return{fields:[],features:[]}}},{key:"finishFeatureResult",value:function(e){if(this.options.applyTransform&&(e.transform=null),this.AttributesConstructor=function(){},this.coordinateBuffer=null,this.lengths.length=0,e.hasZ){var t=Object(R.a)(e.geometryType,this.options.sourceSpatialReference,e.spatialReference);if(t){var n,i=Object(r.a)(e.features);try{for(i.s();!(n=i.n()).done;){t(n.value.geometry)}}catch(a){i.e(a)}finally{i.f()}}}}},{key:"createSpatialReference",value:function(){return{}}},{key:"addField",value:function(e,t){e.fields.push(t);var n=e.fields.map((function(e){return e.name}));this.AttributesConstructor=function(){var e,t=Object(r.a)(n);try{for(t.s();!(e=t.n()).done;){this[e.value]=null}}catch(i){t.e(i)}finally{t.f()}}}},{key:"addFeature",value:function(e,t){e.features.push(t)}},{key:"prepareFeatures",value:function(e){var t=this;switch(this.transform=e.transform,this.options.applyTransform&&e.transform&&(this.applyTransform=this.deriveApplyTransform(e)),this.vertexDimension=2,e.hasZ&&this.vertexDimension++,e.hasM&&this.vertexDimension++,e.geometryType){case"esriGeometryPoint":this.addCoordinate=function(e,n,r){return t.addCoordinatePoint(e,n,r)},this.createGeometry=function(e){return t.createPointGeometry(e)};break;case"esriGeometryPolygon":this.addCoordinate=function(e,n,r){return t.addCoordinatePolygon(e,n,r)},this.createGeometry=function(e){return t.createPolygonGeometry(e)};break;case"esriGeometryPolyline":this.addCoordinate=function(e,n,r){return t.addCoordinatePolyline(e,n,r)},this.createGeometry=function(e){return t.createPolylineGeometry(e)};break;case"esriGeometryMultipoint":this.addCoordinate=function(e,n,r){return t.addCoordinateMultipoint(e,n,r)},this.createGeometry=function(e){return t.createMultipointGeometry(e)};break;default:Object(M.a)(e.geometryType)}}},{key:"createFeature",value:function(){return this.lengths.length=0,this.currentLengthIndex=0,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,{attributes:new this.AttributesConstructor}}},{key:"allocateCoordinates",value:function(){}},{key:"addLength",value:function(e,t,n){0===this.lengths.length&&(this.toAddInCurrentPath=t),this.lengths.push(t)}},{key:"addQueryGeometry",value:function(e,t){var n=t.queryGeometry,r=t.queryGeometryType,i=Object(A.z)(n.clone(),n,!1,!1,this.transform),a=Object(A.k)(i,r,!1,!1);e.queryGeometryType=r,e.queryGeometry=Object(o.a)({},a)}},{key:"createPointGeometry",value:function(e){var t={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(t.z=0),e.hasM&&(t.m=0),t}},{key:"addCoordinatePoint",value:function(e,t,n){switch(t=this.applyTransform(this.transform,t,n,0),n){case 0:e.x=t;break;case 1:e.y=t;break;case 2:"z"in e?e.z=t:e.m=t;break;case 3:e.m=t}}},{key:"transformPathLikeValue",value:function(e,t){var n=0;return t<=1&&(n=this.previousCoordinate[t],this.previousCoordinate[t]+=e),this.applyTransform(this.transform,e,t,n)}},{key:"addCoordinatePolyline",value:function(e,t,n){this.dehydratedAddPointsCoordinate(e.paths,t,n)}},{key:"addCoordinatePolygon",value:function(e,t,n){this.dehydratedAddPointsCoordinate(e.rings,t,n)}},{key:"addCoordinateMultipoint",value:function(e,t,n){0===n&&e.points.push([]);var r=this.transformPathLikeValue(t,n);e.points[e.points.length-1].push(r)}},{key:"createPolygonGeometry",value:function(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}},{key:"createPolylineGeometry",value:function(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}},{key:"createMultipointGeometry",value:function(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}},{key:"dehydratedAddPointsCoordinate",value:function(e,t,n){0===n&&0==this.toAddInCurrentPath--&&(e.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);var r=this.transformPathLikeValue(t,n),i=e[e.length-1];0===n&&(this.coordinateBufferPtr=0,this.coordinateBuffer=new Array(this.vertexDimension),i.push(this.coordinateBuffer)),this.coordinateBuffer[this.coordinateBufferPtr++]=r}},{key:"deriveApplyTransform",value:function(e){var t=e.hasZ,n=e.hasM;return t&&n?V:t?D:n?N:F}}]),e}();function B(e,t,n){return G.apply(this,arguments)}function G(){return(G=Object(s.a)(a.a.mark((function e(t,n,r){var i,s,c,l,u,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(w.c)(t),s=Object(o.a)({},r),c=g.a.from(n),l=!c.quantizationParameters,e.next=6,Object(x.executeQueryPBF)(i,c,new U({sourceSpatialReference:c.sourceSpatialReference,applyTransform:l}),s);case 6:return u=e.sent,d=u.data,e.abrupt("return",d);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=n(62),H=n(416);function W(e,t){var n=e.toJSON();return n.objectIds&&(n.objectIds=n.objectIds.join(",")),n.orderByFields&&(n.orderByFields=n.orderByFields.join(",")),!n.outFields||null!=t&&t.returnCountOnly?delete n.outFields:-1!==n.outFields.indexOf("*")?n.outFields="*":n.outFields=n.outFields.join(","),n.outSpatialReference&&(n.outSR=n.outSR.wkid||JSON.stringify(n.outSR.toJSON()),delete n.outSpatialReference),n.dynamicDataSource&&(n.layer=JSON.stringify({source:n.dynamicDataSource}),delete n.dynamicDataSource),n}function $(e,t,n){return J.apply(this,arguments)}function J(){return(J=Object(s.a)(a.a.mark((function e(t,n,i){var s,c,l,u,d,f,p,h,b,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(t,n,i);case 2:s=e.sent,c=s.data,l=c.geometryType,u=c.spatialReference,d={},f=Object(r.a)(c.relatedRecordGroups);try{for(f.s();!(p=f.n()).done;)if(h=p.value,b={fields:void 0,objectIdFieldName:void 0,geometryType:l,spatialReference:u,hasZ:!!c.hasZ,hasM:!!c.hasM,features:h.relatedRecords},null!=h.objectId)d[h.objectId]=b;else for(v in h)h.hasOwnProperty(v)&&"relatedRecords"!==v&&(d[h[v]]=b)}catch(a){f.e(a)}finally{f.f()}return e.abrupt("return",Object(o.a)(Object(o.a)({},s),{},{data:d}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e,t,n){return K.apply(this,arguments)}function K(){return(K=Object(s.a)(a.a.mark((function e(t,n,i){var s,c,l,u,d,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(t,n,i,{returnCountOnly:!0});case 2:s=e.sent,c=s.data,l={},u=Object(r.a)(c.relatedRecordGroups);try{for(u.s();!(d=u.n()).done;)null!=(f=d.value).objectId&&(l[f.objectId]=f.count)}catch(a){u.e(a)}finally{u.f()}return e.abrupt("return",Object(o.a)(Object(o.a)({},s),{},{data:l}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,t){return X.apply(this,arguments)}function X(){return(X=Object(s.a)(a.a.mark((function e(t,n){var r,i,s,c=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:{},i=c.length>3?c[3]:void 0,s=Object(H.a)(Object(o.a)(Object(o.a)(Object(o.a)({},t.query),{},{f:"json"},i),W(n,i))),e.abrupt("return",Object(q.default)(t.path+"/queryRelatedRecords",Object(o.a)(Object(o.a)({},r),{},{query:Object(o.a)(Object(o.a)({},r.query),s)})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=Object(s.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=O.a.from(n),i=Object(w.c)(t),e.abrupt("return",$(i,n,r).then((function(e){var t=e.data,n={};return Object.keys(t).forEach((function(e){return n[e]=y.default.fromJSON(t[e])})),n})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return(ee=Object(s.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=O.a.from(n),i=Object(w.c)(t),e.abrupt("return",Y(i,n,Object(o.a)({},r)).then((function(e){return e.data})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var te=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).dynamicDataSource=null,r.format="json",r.gdbVersion=null,r.sourceSpatialReference=null,r}return Object(l.a)(n,[{key:"execute",value:function(e,t){return this.executeJSON(e,t).then((function(e){return y.default.fromJSON(e)}))}},{key:"executeJSON",value:function(){var e=Object(s.a)(a.a.mark((function e(t,n){var r,i,s,c,l,u,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Object(o.a)(Object(o.a)({},this.requestOptions),n),s=this._normalizeQuery(t),c=null!=(null==(r=t.outStatistics)?void 0:r[0]),l=Object(p.a)("featurelayer-pbf-statistics"),u=!c||l,"pbf"!==this.format||!u){e.next=13;break}return e.prev=2,e.next=5,B(this.url,s,i);case 5:d=e.sent,e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(2),"query:parsing-pbf"===e.t0.name){e.next=12;break}throw e.t0;case 12:this.format="json";case 13:if(e.t1="json"!==this.format&&u,e.t1){e.next=18;break}return e.next=17,P(this.url,s,i);case 17:d=e.sent;case 18:return this._normalizeFields(d.fields),e.abrupt("return",d);case 20:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"executeForCount",value:function(e,t){var n=Object(o.a)(Object(o.a)({},this.requestOptions),t),r=this._normalizeQuery(e);return function(e,t,n){return S.apply(this,arguments)}(this.url,r,n)}},{key:"executeForExtent",value:function(e,t){var n=Object(o.a)(Object(o.a)({},this.requestOptions),t),r=this._normalizeQuery(e);return function(e,t,n){return E.apply(this,arguments)}(this.url,r,n)}},{key:"executeForIds",value:function(e,t){var n=Object(o.a)(Object(o.a)({},this.requestOptions),t),r=this._normalizeQuery(e);return function(e,t,n){return C.apply(this,arguments)}(this.url,r,n)}},{key:"executeRelationshipQuery",value:function(e,t){e=O.a.from(e);var n=Object(o.a)(Object(o.a)({},this.requestOptions),t);return(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),function(e,t,n){return Q.apply(this,arguments)}(this.url,e,n)}},{key:"executeRelationshipQueryForCount",value:function(e,t){e=O.a.from(e);var n=Object(o.a)(Object(o.a)({},this.requestOptions),t);return(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),function(e,t,n){return ee.apply(this,arguments)}(this.url,e,n)}},{key:"executeAttachmentQuery",value:function(e,t){var n=Object(o.a)(Object(o.a)({},this.requestOptions),t);return function(e,t,n){return k.apply(this,arguments)}(this.url,e,n)}},{key:"_normalizeQuery",value:function(e){var t=g.a.from(e);if(t.sourceSpatialReference=t.sourceSpatialReference||this.sourceSpatialReference,!this.gdbVersion&&!this.dynamicDataSource)return t;var n=t===e?t.clone():t;return n.gdbVersion=e.gdbVersion||this.gdbVersion,n.dynamicDataSource=e.dynamicDataSource?m.a.from(e.dynamicDataSource):this.dynamicDataSource,n}},{key:"_normalizeFields",value:function(e){if(Object(h.k)(this.fieldsIndex)&&Object(h.k)(e)){var t,n=Object(r.a)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,a=this.fieldsIndex.get(i.name);a&&Object.assign(i,a.toJSON())}}catch(o){n.e(o)}finally{n.f()}}}}]),n}(n(473).a);Object(f.a)([Object(b.b)({type:m.a})],te.prototype,"dynamicDataSource",void 0),Object(f.a)([Object(b.b)()],te.prototype,"fieldsIndex",void 0),Object(f.a)([Object(b.b)()],te.prototype,"format",void 0),Object(f.a)([Object(b.b)()],te.prototype,"gdbVersion",void 0),Object(f.a)([Object(b.b)()],te.prototype,"sourceSpatialReference",void 0);var ne=te=Object(f.a)([Object(v.a)("esri.tasks.QueryTask")],te);t.a=ne},function(e,t,n){"use strict";n.d(t,"a",(function(){return X}));var r=n(2),i=n(3),a=n(5),o=n(6),s=n(4),c=n(27),l=n(11),u=n(57),d=n(549),f=n(440),p=n(45),h=n(60),b=n(97),v=n(89),y=n(86),m=n(517),g=n(208),O=n(0),j=n(88),w=n(119),_=n(268),k=n(270),x=n(69),S=n(261),T=n(117),E=n(652),C=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"initializeProgram",value:function(e){var t=n.shader.get(),r=this.configuration,i=t.build(r);return new S.a(e.rctx,i.generateSource("vertex"),i.generateSource("fragment"),n.attributeLocations)}},{key:"bind",value:function(e,t,n){this.program.setUniform3fv("innerColor",e.innerColor),this.program.setUniform1f("innerWidth",e.innerWidth*n.pixelRatio),this.program.setUniform3fv("glowColor",e.glowColor),this.program.setUniform1f("glowWidth",e.glowWidth*n.pixelRatio),this.program.setUniform1f("glowFalloff",e.glowFalloff),this.program.setUniform1f("globalAlpha",e.globalAlpha),this.program.setUniform1f("perScreenPixelRatio",n.perScreenPixelRatio),this.program.setUniform2f("pixelToNDC",2/n.fullWidth,2/n.fullHeight),this.program.setUniformMatrix4fv("uProjectionMatrix",n.projectionMatrix),Object(j.r)(I,n.viewMatrix,t),this.program.setUniformMatrix4fv("uModelViewMatrix",I),this.configuration.contrastControlEnabled&&this.program.setUniform1f("globalAlphaContrastBoost",null!=e.globalAlphaContrastBoost?e.globalAlphaContrastBoost:1)}},{key:"initializePipeline",value:function(){return Object(T.d)({blending:Object(T.f)(1,771),colorWrite:T.b})}},{key:"bindPipelineState",value:function(e){e.setPipelineState(this.pipeline)}}]),n}(k.a);C.shader=new _.a(E.a,(function(){return n.e(227).then(n.bind(null,1401))})),C.attributeLocations={start:0,end:1,up:2,extrude:3};var P=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).contrastControlEnabled=!1,e}return n}(x.a);Object(O.a)([Object(x.b)()],P.prototype,"contrastControlEnabled",void 0);var I=Object(w.b)(),M=n(14),A=(n(16),n(315),n(633)),R=n(274),L=n(151),F=n(235),D=(n(376),function(){function e(t){Object(r.a)(this,e),this._renderCoordsHelper=t,this._buffers=null,this._origin=Object(c.e)(),this._dirty=!1,this._count=0,this._vao=null}return Object(i.a)(e,[{key:"vertices",set:function(e){var t,n=new Float64Array(3*e.length),r=0,i=Object(M.a)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n[r++]=a[0],n[r++]=a[1],n[r++]=a[2]}}catch(o){i.e(o)}finally{i.f()}this.buffers=[n]}},{key:"buffers",set:function(e){if(this._buffers=e,this._buffers.length>0){var t=this._buffers[0],n=3*Math.floor(t.length/3/2);Object(l.v)(this._origin,t[n+0],t[n+1],t[n+2])}else Object(l.v)(this._origin,0,0,0);this._dirty=!0}},{key:"origin",get:function(){return this._origin}},{key:"draw",value:function(e){var t=this.ensureVAO(e);Object(s.k)(t)&&(e.bindVAO(t),e.drawArrays(4,0,this._count))}},{key:"dispose",value:function(){Object(s.k)(this._vao)&&this._vao.dispose()}},{key:"ensureVAO",value:function(e){return Object(s.j)(this._buffers)?null:(Object(s.j)(this._vao)&&(this._vao=this.createVAO(e,this._buffers)),this.ensureVertexData(this._vao,this._buffers),this._vao)}},{key:"createVAO",value:function(e,t){var n=this.createDataBuffer(t);return this._dirty=!1,new F.a(e,C.attributeLocations,{data:Object(A.a)(z)},{data:L.a.createVertex(e,35044,n)})}},{key:"ensureVertexData",value:function(e,t){if(this._dirty){var n=this.createDataBuffer(t);e.vertexBuffers.data.setData(n),this._dirty=!1}}},{key:"numberOfRenderVertices",value:function(e){return 2*(e.length/3-1)*3}},{key:"createDataBuffer",value:function(e){var t=this,n=e.reduce((function(e,n){return e+t.numberOfRenderVertices(n)}),0);this._count=n;var r,i=z.createBuffer(n),a=this._origin,o=0,s=0,c=Object(M.a)(e);try{for(c.s();!(r=c.n()).done;){for(var u=r.value,d=0;d<u.length;d+=3){var f=Object(l.v)(V,u[d+0],u[d+1],u[d+2]);0===d?s=this._renderCoordsHelper.getAltitude(f):this._renderCoordsHelper.setAltitude(s,f);var p=this._renderCoordsHelper.worldUpAtPosition(f,N),h=o+2*d,b=Object(l.i)(V,f,a);if(d<u.length-3){i.up.setVec(h,p),i.up.setVec(h+3,p),i.up.setVec(h+5,p);for(var v=0;v<6;v++)i.start.setVec(h+v,b);i.extrude.setValues(h+0,0,-1),i.extrude.setValues(h+1,1,-1),i.extrude.setValues(h+2,1,1),i.extrude.setValues(h+3,0,-1),i.extrude.setValues(h+4,1,1),i.extrude.setValues(h+5,0,1)}if(d>0){i.up.setVec(h-2,p),i.up.setVec(h-4,p),i.up.setVec(h-5,p);for(var y=-6;y<0;y++)i.end.setVec(h+y,b)}}o+=this.numberOfRenderVertices(u)}}catch(m){c.e(m)}finally{c.f()}return i.buffer}}]),e}()),N=Object(c.e)(),V=Object(c.e)(),z=Object(R.a)().vec3f("start").vec3f("end").vec3f("up").vec2f("extrude"),U=n(269),B=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"initializeProgram",value:function(e){var t=n.shader.get(),r=this.configuration,i=t.build(r);return new S.a(e.rctx,i.generateSource("vertex"),i.generateSource("fragment"),U.a)}},{key:"bind",value:function(e,t){this.program.setUniform3fv("innerColor",e.innerColor),this.program.setUniform1f("innerWidth",e.innerWidth*t.pixelRatio),this.program.setUniform3fv("glowColor",e.glowColor),this.program.setUniform1f("glowWidth",e.glowWidth*t.pixelRatio),this.program.setUniform1f("glowFalloff",e.glowFalloff),this.program.setUniform1f("globalAlpha",e.globalAlpha),this.configuration.contrastControlEnabled&&this.program.setUniform1f("globalAlphaContrastBoost",null!=e.globalAlphaContrastBoost?e.globalAlphaContrastBoost:1);var n=null!=e.angleCutoff?e.angleCutoff:f.c;this.program.setUniform2f("angleCutoff",Math.cos(n),Math.cos(Math.max(0,n-Object(p.f)(2)))),this.configuration.intersectsLineEnabled&&this.program.setUniform1f("perScreenPixelRatio",t.perScreenPixelRatio)}},{key:"initializePipeline",value:function(){return Object(T.d)({blending:Object(T.f)(1,771),colorWrite:T.b})}}]),n}(k.a);B.shader=new _.a(f.a,(function(){return n.e(228).then(n.bind(null,1402))}));var G=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).heightManifoldEnabled=!1,e.pointDistanceEnabled=!1,e.lineVerticalPlaneEnabled=!1,e.intersectsLineEnabled=!1,e.contrastControlEnabled=!1,e}return n}(x.a);Object(O.a)([Object(x.b)()],G.prototype,"heightManifoldEnabled",void 0),Object(O.a)([Object(x.b)()],G.prototype,"pointDistanceEnabled",void 0),Object(O.a)([Object(x.b)()],G.prototype,"lineVerticalPlaneEnabled",void 0),Object(O.a)([Object(x.b)()],G.prototype,"intersectsLineEnabled",void 0),Object(O.a)([Object(x.b)()],G.prototype,"contrastControlEnabled",void 0);var q=Object(c.e)(),H=Object(b.c)(),W={glowColor:[1,.5,0],glowWidth:8,glowFalloff:8,innerColor:[1,1,1],innerWidth:1,globalAlpha:.75,angleCutoff:Object(p.f)(6),globalAlphaContrastBoost:2};function $(e,t,n,r){var i=q,a=H;Object(l.l)(i,t,r),Object(l.j)(a,n),a[3]=0,Object(v.m)(a,a,r),u.e.fromPositionAndNormal(i,a,e)}var J=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{contrastControlEnabled:!1};Object(r.a)(this,e),this._renderCoordsHelper=t,this._config=i,this._technique=null,this._projInfo=Object(b.c)(),this._zScale=Object(h.a)(),this._heightManifoldEnabled=!1,this._heightManifoldTarget=Object(c.e)(),this._pointDistanceEnabled=!1,this._pointDistanceOrigin=Object(c.e)(),this._pointDistanceTarget=Object(c.e)(),this._lineVerticalPlaneEnabled=!1,this._lineVerticalPlaneSegment=u.d.create(),this._intersectsLineEnabled=!1,this._intersectsLineSegment=u.d.create(),this._intersectsLineRadius=3,this._intersectsLineInfinite=!1,this._pathVerticalPlaneEnabled=!1,this._pathVerticalPlaneData=null,this._pathTechnique=null,this.canRender=!0,this._tempNormal=Object(c.e)(),this._tempDir=Object(c.e)(),this._tempUp=Object(c.e)(),this._tempVec3A=Object(c.e)(),this._tempVec3B=Object(c.e)(),this._tempVec4=Object(b.c)(),this._tempPlane=u.e.create(),this._tempSphere=u.g.create(),this._params=Object(g.c)(n,W)}return Object(i.a)(e,[{key:"renderSlots",get:function(){return[this._config.contrastControlEnabled?17:16]}},{key:"needsLinearDepth",get:function(){return!0}},{key:"heightManifoldEnabled",get:function(){return this._heightManifoldEnabled},set:function(e){this._heightManifoldEnabled!==e&&(this._heightManifoldEnabled=e,this._requestRender())}},{key:"heightManifoldTarget",get:function(){return this._heightManifoldTarget},set:function(e){Object(l.j)(this._heightManifoldTarget,e),this._requestRender()}},{key:"pointDistanceEnabled",get:function(){return this._pointDistanceEnabled},set:function(e){e!==this._pointDistanceEnabled&&(this._pointDistanceEnabled=e,this._requestRender())}},{key:"pointDistanceTarget",get:function(){return this._pointDistanceTarget},set:function(e){Object(l.j)(this._pointDistanceTarget,e),this._requestRender()}},{key:"pointDistanceOrigin",get:function(){return this._pointDistanceOrigin},set:function(e){Object(l.j)(this._pointDistanceOrigin,e),this._requestRender()}},{key:"lineVerticalPlaneEnabled",get:function(){return this._lineVerticalPlaneEnabled},set:function(e){e!==this._lineVerticalPlaneEnabled&&(this._lineVerticalPlaneEnabled=e,this._requestRender())}},{key:"lineVerticalPlaneSegment",get:function(){return this._lineVerticalPlaneSegment},set:function(e){u.d.copy(e,this._lineVerticalPlaneSegment),this._requestRender()}},{key:"intersectsLineEnabled",get:function(){return this._intersectsLineEnabled},set:function(e){e!==this._intersectsLineEnabled&&(this._intersectsLineEnabled=e,this._requestRender())}},{key:"intersectsLineSegment",get:function(){return this._intersectsLineSegment},set:function(e){u.d.copy(e,this._intersectsLineSegment),this._requestRender()}},{key:"intersectsLineRadius",get:function(){return this._intersectsLineRadius},set:function(e){e!==this._intersectsLineRadius&&(this._intersectsLineRadius=e,this._requestRender())}},{key:"intersectsLineInfinite",get:function(){return this._intersectsLineInfinite},set:function(e){e!==this._intersectsLineInfinite&&(this._intersectsLineInfinite=e,this._requestRender())}},{key:"pathVerticalPlaneEnabled",get:function(){return this._pathVerticalPlaneEnabled},set:function(e){e!==this._pathVerticalPlaneEnabled&&(this._pathVerticalPlaneEnabled=e,Object(s.k)(this._pathVerticalPlaneData)&&this._requestRender())}},{key:"pathVerticalPlaneVertices",set:function(e){Object(s.j)(this._pathVerticalPlaneData)&&(this._pathVerticalPlaneData=new D(this._renderCoordsHelper)),this._pathVerticalPlaneData.vertices=e,this.pathVerticalPlaneEnabled&&this._requestRender()}},{key:"pathVerticalPlaneBuffers",set:function(e){Object(s.j)(this._pathVerticalPlaneData)&&(this._pathVerticalPlaneData=new D(this._renderCoordsHelper)),this._pathVerticalPlaneData.buffers=e,this.pathVerticalPlaneEnabled&&this._requestRender()}},{key:"setParameterValues",value:function(e){Object(g.f)(this._params,e)&&this._requestRender()}},{key:"initializeRenderContext",value:function(e){this._context=e;var t=e.renderContext.rctx;this._quadVAO=Object(m.b)(t),this._techniqueRepository=e.shaderTechniqueRep,this._techniqueConfig=new G,this._pathTechniqueConfig=new P}},{key:"uninitializeRenderContext",value:function(){this._quadVAO=Object(s.f)(this._quadVAO),this._techniqueRepository.release(this._technique),this._technique=null,this._pathVerticalPlaneData=Object(s.f)(this._pathVerticalPlaneData),this._techniqueRepository.release(this._pathTechnique),this._pathTechnique=null}},{key:"render",value:function(e){var t=this.heightManifoldEnabled||this.pointDistanceEnabled||this.lineVerticalPlaneSegment||this.intersectsLineEnabled,n=this.pathVerticalPlaneEnabled;if(!t&&!n)return!0;var r=e.camera;return Object(y.f)(r.projectionMatrix,r.fullWidth,r.fullHeight,this._projInfo,this._zScale),t&&this.renderUnified(e),n&&this.renderPath(e),!0}},{key:"renderUnified",value:function(e){var t=e.rctx,n=this._selectTechnique(),r=n.program;t.bindProgram(r),n.bindPipelineState(t),this.bindGlobalUniforms(e,r),this.bindHeightManifoldUniforms(e,r),this.bindPointDistanceUniforms(e,r),this.bindLineVerticalPlaneUniforms(e,r),this.bindIntersectsLineUniforms(e,r),n.bind(this._params,e.camera),t.bindVAO(this._quadVAO),t.drawArrays(5,0,4)}},{key:"renderPath",value:function(e){if(!Object(s.j)(this._pathVerticalPlaneData)){this._pathTechniqueConfig.contrastControlEnabled=this._config.contrastControlEnabled,this._pathTechnique=this._techniqueRepository.acquireAndReleaseExisting(C,this._pathTechniqueConfig,this._pathTechnique);var t=e.rctx,n=this._pathTechnique,r=n.program;t.bindProgram(r),n.bindPipelineState(t),this.bindGlobalUniforms(e,r),n.bind(this._params,this._pathVerticalPlaneData.origin,e.camera),this._pathVerticalPlaneData.draw(e.rctx)}}},{key:"bindHeightManifoldUniforms",value:function(e,t){if(this.heightManifoldEnabled){var n=this._tempVec3A,r=this._tempPlane;this._renderCoordsHelper.worldUpAtPosition(this._heightManifoldTarget,n),$(r,this._heightManifoldTarget,n,e.camera.viewMatrix),t.setUniform4fv("heightPlane",r)}}},{key:"bindPointDistanceUniforms",value:function(e,t){if(this._pointDistanceEnabled){var n=e.camera,r=this._tempSphere;Object(l.j)(r,this._pointDistanceOrigin),Object(l.l)(r,r,n.viewMatrix),r[3]=Object(l.n)(this._pointDistanceOrigin,this._pointDistanceTarget),t.setUniform4f("pointDistanceSphere",r[0],r[1],r[2],r[3])}}},{key:"bindLineVerticalPlaneUniforms",value:function(e,t){if(this._lineVerticalPlaneEnabled){var n=this._renderCoordsHelper,r=e.camera,i=this._tempPlane,a=this._tempVec3A,o=this._tempUp,s=this._tempDir,c=this._tempNormal;u.d.pointAt(this._lineVerticalPlaneSegment,.5,a),n.worldUpAtPosition(a,o),Object(l.q)(s,this._lineVerticalPlaneSegment.vector),Object(l.f)(c,o,s),Object(l.q)(c,c),$(i,this._lineVerticalPlaneSegment.origin,c,r.viewMatrix),t.setUniform4fv("lineVerticalPlane",i);var d=this._tempVec3A;Object(l.j)(d,this._lineVerticalPlaneSegment.origin),n.setAltitude(0,d),Object(l.l)(d,d,r.viewMatrix),t.setUniform3fv("lineVerticalStart",d);var f=this._tempVec3B;Object(l.e)(f,this._lineVerticalPlaneSegment.origin,this._lineVerticalPlaneSegment.vector),n.setAltitude(0,f),Object(l.l)(f,f,r.viewMatrix),t.setUniform3fv("lineVerticalEnd",f)}}},{key:"bindIntersectsLineUniforms",value:function(e,t){if(this._intersectsLineEnabled){var n=K,r=Z;if(this._intersectsLineInfinite){var i=e.camera;if(u.b.fromRay(u.f.wrap(this._intersectsLineSegment.origin,this._intersectsLineSegment.vector),Y),Y.c0=-Number.MAX_VALUE,!u.c.intersectClipRay(i.frustum,Y))return;u.b.getStart(Y,n),u.b.getEnd(Y,r)}else Object(l.j)(n,this._intersectsLineSegment.origin),Object(l.e)(r,this._intersectsLineSegment.origin,this._intersectsLineSegment.vector);var a=this._tempVec3A;Object(l.l)(a,n,e.camera.viewMatrix),t.setUniform3fv("intersectsLineStart",a);var o=this._tempVec4;Object(l.j)(o,this._intersectsLineSegment.vector),this._tempVec4[3]=0,Object(v.m)(this._tempVec4,this._tempVec4,e.camera.viewMatrix),Object(l.l)(r,r,e.camera.viewMatrix),t.setUniform3fv("intersectsLineEnd",r),Object(l.q)(o,o),t.setUniform3f("intersectsLineDirection",o[0],o[1],o[2]),t.setUniform1f("intersectsLineRadius",this._intersectsLineRadius)}}},{key:"bindGlobalUniforms",value:function(e,t){var n=e.camera;t.setUniform4fv("projInfo",this._projInfo),t.setUniform2fv("zScale",this._zScale),t.setUniform2f("nearFar",n.near,n.far),this._heightManifoldEnabled?t.setUniform1f("maxPixelDistance",2*n.computeScreenPixelSizeAt(this._heightManifoldTarget)):this._pointDistanceEnabled?t.setUniform1f("maxPixelDistance",2*n.computeScreenPixelSizeAt(this._pointDistanceTarget)):this._lineVerticalPlaneEnabled&&t.setUniform1f("maxPixelDistance",2*n.computeScreenPixelSizeAt(this._lineVerticalPlaneSegment.origin)),t.setUniform1i("depthMap",0),e.rctx.bindTexture(e.offscreenRenderingHelper.linearDepthTexture,0),t.setUniform1i("frameColor",1),e.rctx.bindTexture(e.offscreenRenderingHelper.mainColorTexture,1)}},{key:"_requestRender",value:function(){this._context&&this._context.requestRender()}},{key:"_selectTechnique",value:function(){return this._techniqueConfig.heightManifoldEnabled=this.heightManifoldEnabled,this._techniqueConfig.lineVerticalPlaneEnabled=this.lineVerticalPlaneEnabled,this._techniqueConfig.pointDistanceEnabled=this.pointDistanceEnabled,this._techniqueConfig.intersectsLineEnabled=this.intersectsLineEnabled,this._techniqueConfig.contrastControlEnabled=this._config.contrastControlEnabled,this._technique=this._techniqueRepository.acquireAndReleaseExisting(B,this._techniqueConfig,this._technique),this._technique}}]),e}(),Y=u.b.create(),K=Object(c.e)(),Z=Object(c.e)(),X=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e.view))._angleCutoff=f.c,i._style={},i._heightManifoldTarget=Object(c.e)(),i._heightManifoldEnabled=!1,i._intersectsLine=u.d.create(),i._intersectsLineEnabled=!1,i._intersectsLineInfinite=!1,i._lineVerticalPlaneSegment=null,i._pathVerticalPlaneBuffers=null,i._pointDistanceLine=null,i.applyProps(e),i}return Object(i.a)(n,[{key:"testData",get:function(){return this.renderer}},{key:"createResources",value:function(){this.ensureRenderer()}},{key:"destroyResources",value:function(){this.disposeRenderer()}},{key:"updateVisibility",value:function(){this.syncHeightManifold(),this.syncIntersectsLine(),this.syncPathVerticalPlane(),this.syncLineVerticalPlane(),this.syncPointDistance()}},{key:"angleCutoff",get:function(){return this._angleCutoff},set:function(e){this._angleCutoff!==e&&(this._angleCutoff=e,this.syncAngleCutoff())}},{key:"style",get:function(){return this._style},set:function(e){this._style=e,this.syncStyle()}},{key:"heightManifoldTarget",get:function(){return this._heightManifoldEnabled?this._heightManifoldTarget:null},set:function(e){Object(s.k)(e)?(Object(l.j)(this._heightManifoldTarget,e),this._heightManifoldEnabled=!0):this._heightManifoldEnabled=!1,this.syncRenderer(),this.syncHeightManifold()}},{key:"intersectsWorldUpAtLocation",set:function(e){if(Object(s.j)(e))this.intersectsLine=null;else{var t=this.view.renderCoordsHelper.worldUpAtPosition(e,Q);this.intersectsLine=u.d.fromValues(e,t),this.intersectsLineInfinite=!0}}},{key:"intersectsLine",get:function(){return this._intersectsLineEnabled?this._intersectsLine:null},set:function(e){Object(s.k)(e)?(u.d.copy(e,this._intersectsLine),this._intersectsLineEnabled=!0):this._intersectsLineEnabled=!1,this.syncIntersectsLine(),this.syncRenderer()}},{key:"intersectsLineInfinite",get:function(){return this._intersectsLineInfinite},set:function(e){this._intersectsLineInfinite=e,this.syncIntersectsLineInfinite()}},{key:"lineVerticalPlaneSegment",get:function(){return this._lineVerticalPlaneSegment},set:function(e){this._lineVerticalPlaneSegment=Object(s.k)(e)?u.d.copy(e):null,this.syncLineVerticalPlane(),this.syncRenderer()}},{key:"pathVerticalPlane",get:function(){return this._pathVerticalPlaneBuffers},set:function(e){this._pathVerticalPlaneBuffers=e,this.syncPathVerticalPlane(),this.syncLineVerticalPlane(),this.syncPointDistance(),this.syncRenderer()}},{key:"pointDistanceLine",get:function(){return this._pointDistanceLine},set:function(e){this._pointDistanceLine=Object(s.k)(e)?{origin:Object(c.d)(e.origin),target:Object(c.d)(e.target)}:null,this.syncPointDistance(),this.syncRenderer()}},{key:"syncRenderer",value:function(){this.attached&&(this._intersectsLineEnabled||this._heightManifoldEnabled||Object(s.k)(this._pointDistanceLine)||Object(s.k)(this._pathVerticalPlaneBuffers))?this.ensureRenderer():this.disposeRenderer()}},{key:"ensureRenderer",value:function(){Object(s.k)(this.renderer)||(this.renderer=new J(this.view.renderCoordsHelper,void 0,{contrastControlEnabled:!0}),this.syncStyle(),this.syncHeightManifold(),this.syncIntersectsLine(),this.syncIntersectsLineInfinite(),this.syncPathVerticalPlane(),this.syncLineVerticalPlane(),this.syncPointDistance(),this.syncAngleCutoff(),this.view._stage&&this.view._stage.addRenderPlugin(this.renderer.renderSlots,this.renderer))}},{key:"syncStyle",value:function(){Object(s.j)(this.renderer)||(this.renderer.setParameterValues(this._style),null!=this._style.intersectsLineRadius&&(this.renderer.intersectsLineRadius=this._style.intersectsLineRadius))}},{key:"syncAngleCutoff",value:function(){Object(s.j)(this.renderer)||this.renderer.setParameterValues({angleCutoff:this._angleCutoff})}},{key:"syncHeightManifold",value:function(){Object(s.j)(this.renderer)||(this.renderer.heightManifoldEnabled=this._heightManifoldEnabled&&this.visible,this._heightManifoldEnabled&&(this.renderer.heightManifoldTarget=this._heightManifoldTarget))}},{key:"syncIntersectsLine",value:function(){Object(s.j)(this.renderer)||(this.renderer.intersectsLineEnabled=this._intersectsLineEnabled&&this.visible,this._intersectsLineEnabled&&(this.renderer.intersectsLineSegment=this._intersectsLine))}},{key:"syncIntersectsLineInfinite",value:function(){Object(s.j)(this.renderer)||(this.renderer.intersectsLineInfinite=this._intersectsLineInfinite)}},{key:"syncPathVerticalPlane",value:function(){Object(s.j)(this.renderer)||(this.renderer.pathVerticalPlaneEnabled=Object(s.k)(this._pathVerticalPlaneBuffers)&&this.visible,Object(s.k)(this._pathVerticalPlaneBuffers)&&(this.renderer.pathVerticalPlaneBuffers=this._pathVerticalPlaneBuffers))}},{key:"syncLineVerticalPlane",value:function(){Object(s.j)(this.renderer)||(this.renderer.lineVerticalPlaneEnabled=Object(s.k)(this._lineVerticalPlaneSegment)&&this.visible,Object(s.k)(this._lineVerticalPlaneSegment)&&(this.renderer.lineVerticalPlaneSegment=this._lineVerticalPlaneSegment))}},{key:"syncPointDistance",value:function(){Object(s.j)(this.renderer)||(this.renderer.pointDistanceEnabled=Object(s.k)(this._pointDistanceLine)&&this.visible,Object(s.k)(this._pointDistanceLine)&&(this.renderer.pointDistanceOrigin=this._pointDistanceLine.origin,this.renderer.pointDistanceTarget=this._pointDistanceLine.target))}},{key:"disposeRenderer",value:function(){Object(s.k)(this.renderer)&&this.view._stage&&(this.view._stage.removeRenderPlugin(this.renderer),this.renderer=null)}}]),n}(d.a),Q=Object(c.e)()},function(e,t,n){"use strict";n.d(t,"a",(function(){return H}));var r,i=n(7),a=n.n(i),o=n(15),s=n(2),c=n(3),l=n(5),u=n(6),d=n(195),f=n(107),p=n(4),h=n(18),b=n(12),v=n(24),y=n(78),m=n(45),g=n(525),O=n(655),j=n(86),w=n(285),_=n(469),k=n(105),x=n(352),S=n(517),T=n(376),E=n(10),C=n(31),P=n(84);function I(){if(Object(p.j)(r)){var e=function(e){return Object(P.a)("esri/libs/basisu/".concat(e))};r=Promise.all([n.e(149),n.e(142)]).then(n.bind(null,1404)).then((function(e){return e.b})).then((function(t){return(0,t.default)({locateFile:e}).then((function(e){return e.initializeBasis(),delete e.then,e}))}))}return r}var M=null,A=null;function R(){return L.apply(this,arguments)}function L(){return(L=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Object(p.j)(A),!e.t0){e.next=6;break}return A=I(),e.next=5,A;case 5:M=e.sent;case 6:return e.abrupt("return",A);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(o.a)(a.a.mark((function e(t,n,r){var i,o,s,c,l,u,d,f,h,b,v,y,m,g,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Object(p.j)(M),!e.t0){e.next=5;break}return e.next=4,R();case 4:M=e.sent;case 5:if(!((i=new M.BasisFile(new Uint8Array(r))).getNumImages()<1)){e.next=8;break}return e.abrupt("return",null);case 8:for(o=i.getNumLevels(0),s=i.getHasAlpha(),c=i.getImageWidth(0,0),l=i.getImageHeight(0,0),u=t.capabilities,d=u.compressedTextureETC,f=u.compressedTextureS3TC,h=d?s?[1,37496]:[0,37492]:f?s?[3,33779]:[2,33776]:[13,6408],b=Object(C.a)(h,2),v=b[0],y=b[1],i.startTranscoding(),m=[],g=0;g<o;g++)m.push(new Uint8Array(i.getImageTranscodedSizeInBytes(0,g,v))),i.transcodeImage(m[g],0,g,v,0,0);return i.close(),i.delete(),O=Object(E.a)(Object(E.a)({},n),{},{samplingMode:o>1?9987:9729,hasMipmap:o>1,internalFormat:y,width:c,height:l}),e.abrupt("return",new k.a(t,O,{type:"compressed",levels:m}));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=n(13).a.getLogger("esri.views.3d.webgl-engine.lib.DDSUtil"),N=542327876,V=131072;function z(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}var U=z("DXT1"),B=z("DXT3"),G=z("DXT5");function q(e,t,n,r){var i=function(e,t){var n=new Int32Array(e,0,31);if(n[0]!==N)return D.error("Invalid magic number in DDS header"),null;if(!(4&n[20]))return D.error("Unsupported format, must contain a FourCC code"),null;var r,i,a=n[21];switch(a){case U:r=8,i=33776;break;case B:r=16,i=33778;break;case G:r=16,i=33779;break;default:return D.error("Unsupported FourCC code:",function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)}(a)),null}var o=1,s=n[4],c=n[3];0==(3&s)&&0==(3&c)||(D.warn("Rounding up compressed texture size to nearest multiple of 4."),s=s+3&-4,c=c+3&-4);var l,u,d=s,f=c;n[2]&V&&!1!==t&&(o=Math.max(1,n[7])),1===o||Object(m.k)(s)&&Object(m.k)(c)||(D.warn("Ignoring mipmaps of non power of two sized compressed texture."),o=1);for(var p=n[1]+4,h=[],b=0;b<o;++b)u=(s+3>>2)*(c+3>>2)*r,l=new Uint8Array(e,p,u),h.push(l),p+=u,s=Math.max(1,s>>1),c=Math.max(1,c>>1);return{textureData:{type:"compressed",levels:h},internalFormat:i,width:d,height:f}}(n,r),a=i.textureData,o=i.internalFormat,s=i.width,c=i.height;t.samplingMode=a.levels.length>1?9987:9729,t.hasMipmap=a.levels.length>1,t.internalFormat=o,t.width=s,t.height=c;var l=new k.a(e,t,a);return e.bindTexture(l,0),l}var H=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e,r){var i;return Object(s.a)(this,n),(i=t.call(this)).data=e,i.type=4,i.glTexture=null,i.powerOfTwoStretchInfo=null,i.loadingPromise=null,i.loadingController=null,i.events=new y.a,i.params=r||{},i.params.mipmap=!1!==i.params.mipmap,i.params.noUnpackFlip=i.params.noUnpackFlip||!1,i.params.preMultiplyAlpha=i.params.preMultiplyAlpha||!1,i.params.wrap=i.params.wrap||{s:10497,t:10497},i.params.powerOfTwoResizeMode=i.params.powerOfTwoResizeMode||1,i.estimatedTexMemRequired=n.estimateTexMemRequired(i.data,i.params),i.startPreload(),i}return Object(c.a)(n,[{key:"startPreload",value:function(){var e=this.data;Object(p.j)(e)||(e instanceof HTMLVideoElement?this.startPreloadVideoElement(e):e instanceof HTMLImageElement&&this.startPreloadImageElement(e))}},{key:"startPreloadVideoElement",value:function(e){Object(b.t)(e.src)||"auto"===e.preload&&e.crossOrigin||(e.preload="auto",e.crossOrigin="anonymous",e.src=e.src)}},{key:"startPreloadImageElement",value:function(e){Object(b.u)(e.src)||Object(b.t)(e.src)||e.crossOrigin||(e.crossOrigin="anonymous",e.src=e.src)}},{key:"dispose",value:function(){this.data=void 0}},{key:"width",get:function(){return this.params.width}},{key:"height",get:function(){return this.params.height}},{key:"createDescriptor",value:function(e){var t=this.params.mipmap&&!this.params.disableAnisotropy;return{target:3553,pixelFormat:6408,dataType:5121,wrapMode:this.params.wrap,flipped:!this.params.noUnpackFlip,samplingMode:this.params.mipmap?9987:9729,hasMipmap:this.params.mipmap,preMultiplyAlpha:this.params.preMultiplyAlpha,maxAnisotropy:t?e.parameters.maxMaxAnisotropy:void 0}}},{key:"load",value:function(e,t){if(Object(p.k)(this.glTexture))return this.glTexture;if(Object(p.k)(this.loadingPromise))return this.loadingPromise;var r=this.data;return Object(p.j)(r)?(this.glTexture=new k.a(e,this.createDescriptor(e),null),e.bindTexture(this.glTexture,0),this.glTexture):"string"==typeof r?this.loadFromURL(e,t,r):r instanceof Image?this.loadFromImageElement(e,t,r):r instanceof HTMLVideoElement?this.loadFromVideoElement(e,t,r):r instanceof ImageData||r instanceof HTMLCanvasElement?this.loadFromImage(e,r,t):(Object(f.c)(r)||Object(f.k)(r))&&this.params.encoding===n.DDS_ENCODING?this.loadFromDDSData(e,r):(Object(f.c)(r)||Object(f.k)(r))&&this.params.encoding===n.BASIS_ENCODING?this.loadFromBasis(e,r):Object(f.k)(r)?this.loadFromPixelData(e,r):Object(f.c)(r)?this.loadFromPixelData(e,new Uint8Array(r)):null}},{key:"requiresFrameUpdates",get:function(){return this.data instanceof HTMLVideoElement}},{key:"frameUpdate",value:function(e,t,n){if(!(this.data instanceof HTMLVideoElement)||Object(p.j)(this.glTexture))return n;if(this.data.readyState<2||n===this.data.currentTime)return n;if(Object(p.k)(this.powerOfTwoStretchInfo)){var r=this.powerOfTwoStretchInfo,i=r.framebuffer,a=r.vao,o=r.sourceTexture;o.setData(this.data),this.drawStretchedTexture(e,t,i,a,o,this.glTexture)}else{var s=this.data,c=s.width,l=s.height,u=this.glTexture.descriptor,d=u.width,f=u.height;c!==d||l!==f?this.glTexture.updateData(0,0,0,Math.min(c,d),Math.min(l,f),this.data):this.glTexture.setData(this.data)}return this.glTexture.descriptor.hasMipmap&&this.glTexture.generateMipmap(),this.data.currentTime}},{key:"loadFromDDSData",value:function(e,t){return this.glTexture=q(e,this.createDescriptor(e),t,this.params.mipmap),e.bindTexture(this.glTexture,0),this.glTexture}},{key:"loadFromBasis",value:function(e,t){var n=this;return this.loadAsync((function(){return function(e,t,n){return F.apply(this,arguments)}(e,n.createDescriptor(e),t).then((function(e){return n.glTexture=e,e}))}))}},{key:"loadFromPixelData",value:function(e,t){Object(j.a)(this.params.width>0&&this.params.height>0);var n=this.createDescriptor(e);return n.pixelFormat=1===this.params.components?6409:3===this.params.components?6407:6408,n.width=this.params.width,n.height=this.params.height,this.glTexture=new k.a(e,n,t),e.bindTexture(this.glTexture,0),this.glTexture}},{key:"loadAsync",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,i,o=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(v.d)(),this.loadingController=n,r=t(n.signal),this.loadingPromise=r,i=function(){o.loadingController===n&&(o.loadingController=null),o.loadingPromise===r&&(o.loadingPromise=null)},e.abrupt("return",(r.then(i,i),r));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadFromURL",value:function(e,t,n){var r=this;return this.loadAsync(function(){var i=Object(o.a)(a.a.mark((function i(o){var s;return a.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(O.a)(n,{signal:o});case 2:return s=i.sent,i.abrupt("return",r.loadFromImage(e,s,t));case 4:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}())}},{key:"loadFromImageElement",value:function(e,t,n){var r=this;return n.complete?this.loadFromImage(e,n,t):this.loadAsync(function(){var i=Object(o.a)(a.a.mark((function i(o){var s;return a.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(g.a)(n,n.src,!1,o);case 2:return s=i.sent,i.abrupt("return",r.loadFromImage(e,s,t));case 4:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}())}},{key:"loadFromVideoElement",value:function(e,t,n){return n.readyState>=2?this.loadFromImage(e,n,t):this.loadFromVideoElementAsync(e,t,n)}},{key:"loadFromVideoElementAsync",value:function(e,t,n){var r=this;return this.loadAsync((function(i){return new Promise((function(a,o){var s=function(){n.removeEventListener("loadeddata",c),n.removeEventListener("error",l),Object(p.k)(u)&&u.remove()},c=function(){n.readyState>=2&&(s(),a(r.loadFromImage(e,n,t)))},l=function(e){s(),o(e||new h.a("Failed to load video"))};n.addEventListener("loadeddata",c),n.addEventListener("error",l);var u=Object(v.p)(i,(function(){return l(Object(v.e)())}))}))}))}},{key:"loadFromImage",value:function(e,t,r){var i=n.getDataDimensions(t);this.params.width=i.width,this.params.height=i.height;var a=this.createDescriptor(e);return a.pixelFormat=3===this.params.components?6407:6408,!this.requiresPowerOfTwo(e,a)||Object(m.k)(i.width)&&Object(m.k)(i.height)?(a.width=i.width,a.height=i.height,this.glTexture=new k.a(e,a,t),e.bindTexture(this.glTexture,0),this.glTexture):(this.glTexture=this.makePowerOfTwoTexture(e,t,i,a,r),e.bindTexture(this.glTexture,0),this.glTexture)}},{key:"requiresPowerOfTwo",value:function(e,t){var n=33071,r="number"==typeof t.wrapMode?t.wrapMode===n:t.wrapMode.s===n&&t.wrapMode.t===n;return!Object(_.a)(e.gl)&&(t.hasMipmap||!r)}},{key:"makePowerOfTwoTexture",value:function(e,t,n,r,i){var a,o=n.width,s=n.height,c=Object(m.n)(o),l=Object(m.n)(s);switch(r.width=c,r.height=l,this.params.powerOfTwoResizeMode){case 2:r.textureCoordinateScaleFactor=[o/c,s/l],(a=new k.a(e,r)).updateData(0,0,0,o,s,t);break;case 1:case null:case void 0:a=this.stretchToPowerOfTwo(e,t,r,i);break;default:Object(d.a)(this.params.powerOfTwoResizeMode)}return r.hasMipmap&&a.generateMipmap(),a}},{key:"stretchToPowerOfTwo",value:function(e,t,n,r){var i=new k.a(e,n),a=new T.a(e,{colorTarget:0,depthStencilTarget:0},i),o=new k.a(e,{target:3553,pixelFormat:n.pixelFormat,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!!n.flipped,maxAnisotropy:8,preMultiplyAlpha:n.preMultiplyAlpha},t),s=Object(S.b)(e);return this.drawStretchedTexture(e,r,a,s,o,i),this.requiresFrameUpdates?this.powerOfTwoStretchInfo={vao:s,sourceTexture:o,framebuffer:a}:(s.dispose(!0),o.dispose(),a.detachColorTexture(),e.bindFramebuffer(null),a.dispose()),i}},{key:"drawStretchedTexture",value:function(e,t,n,r,i,a){e.bindFramebuffer(n);var o=e.getViewport();e.setViewport(0,0,a.descriptor.width,a.descriptor.height);var s=t.program;e.bindProgram(s),s.setUniform4f("color",1,1,1,1),s.setUniform1i("tex",0),e.bindTexture(i,0),e.bindVAO(r),e.setPipelineState(t.pipeline),e.drawArrays(5,0,Object(x.f)(r,"geometry")),e.bindFramebuffer(null),e.setViewport(o.x,o.y,o.width,o.height)}},{key:"unload",value:function(){if(Object(p.k)(this.powerOfTwoStretchInfo)){var e=this.powerOfTwoStretchInfo,t=e.framebuffer,n=e.vao,r=e.sourceTexture;n.dispose(!0),r.dispose(),t.dispose(),this.glTexture=null,this.powerOfTwoStretchInfo=null}if(Object(p.k)(this.glTexture)&&(this.glTexture.dispose(),this.glTexture=null),Object(p.k)(this.loadingController)){var i=this.loadingController;this.loadingController=null,this.loadingPromise=null,i.abort()}this.events.emit("unloaded")}}],[{key:"getDataDimensions",value:function(e){return e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e}},{key:"estimateTexMemRequired",value:function(e,t){if(Object(p.j)(e))return 0;if(Object(f.c)(e)||Object(f.k)(e))return t.encoding===n.BASIS_ENCODING?function(e){if(Object(p.j)(M))return e.byteLength;var t=new M.BasisFile(new Uint8Array(e));if(t.getNumImages()<1)return 0;var n=t.getNumLevels(0),r=t.getHasAlpha(),i=t.getImageWidth(0,0),a=t.getImageHeight(0,0);t.close(),t.delete();var o=Object(x.b)(r?37496:37492),s=(Math.pow(4,n)-1)/(3*Math.pow(4,n-1));return Math.ceil(i*a*o*s)}(e):e.byteLength;var r=e instanceof Image||e instanceof ImageData||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement?n.getDataDimensions(e):t,i=r.width,a=r.height;return(t.mipmap?4/3:1)*i*a*(t.components||4)||0}}]),n}(w.a);H.DDS_ENCODING="image/vnd-ms.dds",H.BASIS_ENCODING="image/x.basis"},function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var r=n(7),i=n.n(r),a=n(15),o=n(10),s=n(2),c=n(3),l=n(5),u=n(6),d=n(0),f=(n(16),n(22)),p=n(4),h=(n(13),n(17),n(1),n(8)),b=(n(12),n(19),n(20),n(24)),v=n(43),y=(n(71),n(78)),m=n(38),g=n(51),O=n(282),j=n(407),w=n(421),_=n(134),k=n(388),x=n(351),S=n(348),T=n(630),E=n(566),C=function(){function e(t){var n=t.grabbableForEvent;Object(s.a)(this,e),this.events=new y.a,this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.grabbableForEvent=n}return Object(c.a)(e,[{key:"intersectionDistance",value:function(e,t){return 0}},{key:"attach",value:function(){}},{key:"detach",value:function(){}}]),e}(),P=n(343),I=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r,i,a;Object(s.a)(this,n),(r=t.call(this))._manipulator=null,r._stagedVertex=null,r.geometryType=null,r.elevationInfo=null,r.snapToSceneEnabled=null,r._handles=new g.a,r._defaultZ=0,r._elevationDrawSurface=null,r._snappingDrawSurface=null,r._snappingManager=null,r._snappingPipeline=new T.a,r._createOperationCompleted=!1,r._pointerDownStates=new Set,r._snappingTask=null,r.view=e.view,r.drawingMode=Object(p.r)(e.drawingMode,P.a),r.geometryType=e.geometryType,r.elevationInfo=e.elevationInfo,r.coordinateHelper=Object(w.a)(e.hasZ,e.hasM,r.view.spatialReference,r.view.viewingMode),r._defaultZ=e.defaultZ,r.snapToSceneEnabled=e.snapToSceneEnabled,r._snappingDrawSurface=Object(p.q)(e.snappingDrawSurface),r._snappingManager=e.snappingManager;var c=null==(i=e.view)||null==(a=i.resourceController)?void 0:a.scheduler;r._frameTask=c?c.registerTask(O.b.SNAPPING,(function(e){return r._frameTask.processQueue(e)}),(function(){return!1})):O.a,r._elevationDrawSurface=e.elevationDrawSurface,r._editGeometry=new k.a(new _.c(r.coordinateHelper),"segment"===r.geometryType?"polyline":r.geometryType),r._activeComponent=new _.a(r._editGeometry.editGeometry),r._editGeometry.editGeometry.components.push(r._activeComponent),r._editGeometry.on(["vertex-add","vertex-update","vertex-remove"],(function(e){var t=e.vertices.map((function(e){return{componentIndex:0,vertexIndex:e.index,coordinates:r.coordinateHelper.toArray(e.pos)}})),n=t.map((function(e){return e.coordinates}));switch(e.type){case"vertex-add":r.emit(e.type,Object(o.a)(Object(o.a)({},e),{},{added:n,vertices:t}));break;case"vertex-update":r.emit(e.type,Object(o.a)(Object(o.a)({},e),{},{updated:n,vertices:t}));break;case"vertex-remove":r.emit(e.type,Object(o.a)(Object(o.a)({},e),{},{removed:n,vertices:t}))}})),r._manipulator=new C({grabbableForEvent:function(e){return"click"!==r.drawingMode||"touch"===e.pointerType&&r._snappingEnabled&&1===r._pointerDownStates.size}}),e.manipulators.add(r._manipulator),r._manipulator.grabbable="point"!==r.geometryType;var l=r.createManipulatorDragPipeline(r._manipulator),u=r._manipulator.events.on("immediate-double-click",(function(e){r._manipulator.dragging||"point"===r.geometryType||(r.complete(),e.stopPropagation())})),d=r._manipulator.events.on("immediate-click",(function(e){if(!r._manipulator.dragging){var t=r._activeComponent,n=r._closeOnClickVertexIndex(e.screenPoint);if(Object(p.k)(n))r.discardStagedVertex(),r.complete();else{var i=r._screenToMap(e.screenPoint);if(Object(p.k)(i))switch(r.drawingMode){case"freehand":break;case"click":case"hybrid":r._snappingTask=Object(p.a)(r._snappingTask),r.hasStagedVertex?r.commitStagedVertex():r._editGeometry.appendVertex(r.coordinateHelper.fromPoint(i)),("point"===r.geometryType||"segment"===r.geometryType&&2===t.vertices.length||"segment"===r.geometryType&&"hybrid"===r.drawingMode&&1===t.vertices.length)&&r.complete()}}e.stopPropagation()}}));return r._handles.add([l,d,u]),r}return Object(c.a)(n,[{key:"isCompleted",get:function(){return this._createOperationCompleted}},{key:"_snappingEnabled",get:function(){return Object(p.k)(this._snappingManager)&&this._snappingManager.options.effectiveEnabled}},{key:"createManipulatorDragPipeline",value:function(e){switch(this.drawingMode){case"click":return this.createManipulatorDragPipelineClick(e);case"freehand":return this.createManipulatorDragPipelineFreehand(e);case"hybrid":return this.createManipulatorDragPipelineHybrid(e)}}},{key:"createManipulatorDragPipelineClick",value:function(e){var t=this;return Object(S.e)(e,(function(e,n,r,i){var a="touch"===i&&t._snappingEnabled;!t.isCompleted&&a&&(n.next(t._screenToMapDragEventStep()).next((function(e){return"start"===e.action&&(t.stagedVertex=e.mapStart,("segment"===t.geometryType||a&&0===t.vertices.length)&&t.commitStagedVertex()),e})).next(t._snappingPipeline.createSnapDragEventPipelineStep({predicate:function(){return a},cancel:r,snappingManager:t._snappingManager,snappingContext:new x.a({geometry:t._editGeometry,elevationInfo:t.elevationInfo,pointer:i,visualizer:new E.a})}),t._snappingPipeline.next).next((function(e){return a&&(t.stagedVertex=e.mapEnd,"end"===e.action&&t.commitStagedVertex()),e})).next((function(e){return"end"===e.action&&("segment"!==t.geometryType&&"point"!==t.geometryType||t.complete()),e})),r.next((function(){a&&Object(p.k)(t._snappingManager)&&t._snappingManager.doneSnapping()})))}))}},{key:"createManipulatorDragPipelineFreehand",value:function(e){var t=this;return Object(S.e)(e,(function(e,n){t.isCompleted||n.next(t._screenToMapDragEventStep()).next((function(e){return"start"===e.action&&(t.stagedVertex=e.mapStart,"segment"===t.geometryType&&t.commitStagedVertex()),e})).next((function(e){switch(e.action){case"start":case"update":t.stagedVertex=e.mapEnd,"polygon"!==t.geometryType&&"polyline"!==t.geometryType||t.commitStagedVertex();break;case"end":t.complete()}return e}))}))}},{key:"createManipulatorDragPipelineHybrid",value:function(e){var t=this;return Object(S.e)(e,(function(e,n){t.isCompleted||n.next(t._screenToMapDragEventStep()).next((function(e){return"start"===e.action&&(t.stagedVertex=e.mapStart,t.commitStagedVertex()),e})).next((function(e){switch(e.action){case"start":case"update":t.stagedVertex=e.mapEnd,"polygon"!==t.geometryType&&"polyline"!==t.geometryType||t.commitStagedVertex();break;case"end":"segment"!==t.geometryType&&"point"!==t.geometryType||t.complete()}return e}))}))}},{key:"destroy",value:function(){this._handles.destroy(),this._handles=null,this._editGeometry.destroy(),this._frameTask.remove()}},{key:"onInputEvent",value:function(e){switch(e.type){case"pointer-down":this._pointerDownStates.add(e.pointerId);break;case"pointer-up":this._pointerDownStates.delete(e.pointerId)}switch(e.type){case"pointer-move":return this._onPointerMove(e);case"hold":return this._onHold(e)}}},{key:"canRedo",get:function(){return this._editGeometry.canRedo}},{key:"redo",value:function(){this._editGeometry.redo()}},{key:"canUndo",get:function(){return this._editGeometry.canUndo}},{key:"undo",value:function(){Object(p.k)(this._snappingManager)&&this._snappingManager.doneSnapping(),this._editGeometry.undo()}},{key:"complete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(p.a)(this._snappingTask),this.commitStagedVertex(),this._createOperationCompleted=!0,Object(p.k)(this._snappingManager)&&this._snappingManager.doneSnapping(),this.emit("complete",{vertices:this.vertices.map((function(e,t){return{componentIndex:0,vertexIndex:t,coordinates:e}})),aborted:e,type:"complete"})}},{key:"cancel",value:function(){this.complete(!0)}},{key:"interactive",get:function(){return this._manipulator.interactive},set:function(e){this._manipulator.interactive=e}},{key:"numVertices",get:function(){return Object(p.k)(this._stagedVertex)?this._activeComponent.vertices.length+1:this._activeComponent.vertices.length}},{key:"numCommittedVertices",get:function(){return this._activeComponent.vertices.length}},{key:"vertices",get:function(){var e=this,t=this._activeComponent.vertices.map((function(t){return e.coordinateHelper.toArray(t.pos)}));return Object(p.k)(this._stagedVertex)&&t.push(this.coordinateHelper.pointToArray(this._stagedVertex)),t}},{key:"spatialReference",get:function(){return this.view.spatialReference}},{key:"hasStagedVertex",get:function(){return Object(p.k)(this._stagedVertex)}},{key:"stagedVertex",get:function(){return this._stagedVertex},set:function(e){if(Object(p.j)(e))this.discardStagedVertex();else if(!Object(p.k)(this._stagedVertex)||!Object(j.a)(this._stagedVertex,e)){Object(p.j)(this._stagedVertex)?this._stagedVertex=Object(f.a)(e):(this._stagedVertex.x=e.x,this._stagedVertex.y=e.y,this._stagedVertex.z=e.z,this._stagedVertex.m=e.m,this._stagedVertex.hasZ=e.hasZ,this._stagedVertex.hasM=e.hasM,this._stagedVertex.spatialReference=e.spatialReference);var t={componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(e)};this.emit("cursor-update",{updated:null,vertices:[t],operation:"apply",type:"vertex-update"})}}},{key:"commitStagedVertex",value:function(){if(this._snappingTask=Object(p.a)(this._snappingTask),Object(p.k)(this._stagedVertex)){var e=this._stagedVertex;this._stagedVertex=null,this._editGeometry.appendVertex(this.coordinateHelper.fromPoint(e))}}},{key:"discardStagedVertex",value:function(){this._stagedVertex=null}},{key:"_onPointerMove",value:function(e){var t=this;if(Object(p.a)(this._snappingTask),!(this._manipulator.dragging||this._pointerDownStates.has(e.pointerId)||this._manipulator.grabbing)&&this._manipulator.interactive){var n=Object(m.e)(e.x,e.y),r=this._closeOnClickVertexIndex(n);if(Object(p.k)(r)){this.discardStagedVertex();var o={componentIndex:0,vertexIndex:r,coordinates:this.coordinateHelper.toArray(this._activeComponent.vertices[r].pos)};this.emit("cursor-update",{updated:null,vertices:[o],operation:"apply",type:"vertex-update"})}else{var s=this._screenToMap(n);if(this._manipulator.cursor=Object(p.k)(s)?"crosshair":null,Object(p.k)(s))if(Object(p.k)(this._snappingManager)){var c=this._snappingManager,l=new x.a({geometry:this._editGeometry,elevationInfo:this.elevationInfo,pointer:e.pointerType,visualizer:new E.a});this.stagedVertex=c.update(s,l),this._snappingTask=Object(b.h)(function(){var e=Object(a.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._frameTask.schedule((function(){return c.snap(s,l,n)}),n);case 2:if(r=e.sent,e.t0=r.valid,!e.t0){e.next=7;break}return e.next=7,t._frameTask.schedule((function(){t.stagedVertex=r.apply()}),n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}else this.stagedVertex=s}e.stopPropagation()}}},{key:"_onHold",value:function(e){Object(p.a)(this._snappingTask),"click"===this.drawingMode&&"touch"===e.pointerType&&this._snappingEnabled&&(this.stagedVertex=e.mapPoint),e.stopPropagation()}},{key:"_screenToMapDragEventStep",value:function(){var e=this,t=null;return function(n){if("start"===n.action&&(t=e._screenToMap(n.screenStart)),Object(p.j)(t))return null;var r=e._screenToMap(n.screenEnd);return Object(p.k)(r)?Object(o.a)(Object(o.a)({},n),{},{mapStart:t,mapEnd:r}):null}}},{key:"_screenToMap",value:function(e){return this._getDrawSurface().screenToMap(e)}},{key:"_mapToScreen",value:function(e){return this._getDrawSurface().mapToScreen(e)}},{key:"_getDrawSurface",value:function(){var e=null;if(this.coordinateHelper.hasZ){var t=this._defaultZ,n=!1;Object(p.k)(this.elevationInfo)&&"absolute-height"===this.elevationInfo.mode&&(n=!0),Object(p.k)(this.snapToSceneEnabled)&&(n=this.snapToSceneEnabled),Object(p.k)(this.elevationInfo)&&"on-the-ground"===this.elevationInfo.mode&&(n=!1);var r=this._activeComponent.vertices.length;("segment"===this.geometryType||"polygon"===this.geometryType)&&r>0&&(t=this.coordinateHelper.getZ(this._activeComponent.vertices[0].pos),n=!1),n?e=this._snappingDrawSurface:(this._elevationDrawSurface.defaultZ=t,e=this._elevationDrawSurface)}else this._elevationDrawSurface.defaultZ=null,e=this._elevationDrawSurface;return e}},{key:"_vertexWithinPointerDistance",value:function(e,t){var n=this._mapToScreen(e);return!!Object(p.k)(n)&&function(e,t,n){var r=e.x-t.x,i=e.y-t.y;return r*r+i*i<=n}(n,t,25)}},{key:"_closeOnClickVertexIndex",value:function(e){var t=this._activeComponent;if("polygon"===this.geometryType&&t.vertices.length>2){if(this._vertexWithinPointerDistance(this.coordinateHelper.toPoint(t.vertices[0].pos,M),e))return 0;if(this._vertexWithinPointerDistance(this.coordinateHelper.toPoint(t.vertices[t.vertices.length-1].pos,M),e))return t.vertices.length-1}return null}}]),n}(y.a);I=Object(d.a)([Object(h.a)("esri.views.3d.interactive.editingTools.draw3D.DrawOperation")],I);var M=new v.a({x:0,y:0,z:0})},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f}));var r=n(14),i=n(2),a=n(3),o=n(59),s=n(66),c=n(297),l=n(504),u=n(191),d=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],f=function(){function e(t){Object(i.a)(this,e),this.options=t,this.geometryTypes=d,this._coordinatePtr=0,this._vertexDimension=0}return Object(a.a)(e,[{key:"createFeatureResult",value:function(){return new l.a}},{key:"prepareFeatures",value:function(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}},{key:"finishFeatureResult",value:function(e){if(e&&e.features&&e.hasZ&&this.options.sourceSpatialReference&&e.spatialReference&&!Object(o.c)(e.spatialReference,this.options.sourceSpatialReference)&&!e.spatialReference.vcsWkid){var t=Object(s.e)(this.options.sourceSpatialReference)/Object(s.e)(e.spatialReference);if(1!==t){var n,i=Object(r.a)(e.features);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.geometry&&a.geometry.coords)for(var c=a.geometry.coords,l=2;l<c.length;l+=3)c[l]*=t}}catch(u){i.e(u)}finally{i.f()}}}}},{key:"addFeature",value:function(e,t){e.features.push(t)}},{key:"createFeature",value:function(){return new c.a}},{key:"createSpatialReference",value:function(){return{wkid:0}}},{key:"createGeometry",value:function(){return new u.a}},{key:"addField",value:function(e,t){e.fields.push(t)}},{key:"allocateCoordinates",value:function(e){e.coords.length=e.lengths.reduce((function(e,t){return e+t}),0)*this._vertexDimension,this._coordinatePtr=0}},{key:"addCoordinate",value:function(e,t){e.coords[this._coordinatePtr++]=t}},{key:"addCoordinatePoint",value:function(e,t){e.coords.push(t)}},{key:"addLength",value:function(e,t){e.lengths.push(t)}},{key:"addQueryGeometry",value:function(e,t){e.queryGeometry=t.queryGeometry,e.queryGeometryType=t.queryGeometryType}},{key:"createPointGeometry",value:function(){return new u.a}}]),e}()},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17)),u=n(1),d=n(8),f=n(42),p=(n(12),n(19),n(20),n(28)),h=n(39),b=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).color=null,r.label=null,r.value=null,r}return Object(a.a)(n,[{key:"writeValue",value:function(e,t,n){t[n]=null==e?0:e}},{key:"clone",value:function(){return new r({color:this.color&&this.color.clone(),label:this.label,value:this.value})}}]),n}(p.a);Object(c.a)([Object(u.b)({type:h.a,json:{type:[l.a],write:!0}})],b.prototype,"color",void 0),Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],b.prototype,"label",void 0),Object(c.a)([Object(u.b)({type:Number,json:{write:{allowNull:!0}}})],b.prototype,"value",void 0),Object(c.a)([Object(f.a)("value")],b.prototype,"writeValue",null);var v=b=r=Object(c.a)([Object(d.a)("esri.renderers.visualVariables.support.ColorStop")],b);t.a=v},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(31),i=n(2),a=n(3),o=n(18),s=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Object(i.a)(this,e),this.major=t,this.minor=n,this._context=r}return Object(a.a)(e,[{key:"lessThan",value:function(e,t){return this.major<e||e===this.major&&this.minor<t}},{key:"since",value:function(e,t){return!this.lessThan(e,t)}},{key:"validate",value:function(e){if(this.major!==e.major){var t=this._context&&this._context+":",n=this._context&&this._context+" ";throw new o.a(t+"unsupported-version","Required major ".concat(n,"version is '").concat(this.major,"', but got '${version.major}.${version.minor}'"),{version:e})}}},{key:"clone",value:function(){return new e(this.major,this.minor,this._context)}}],[{key:"parse",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=t.split("."),a=Object(r.a)(i,2),s=a[0],c=a[1],l=/^\s*\d+\s*$/;if(!s||!s.match||!s.match(l))throw new o.a((n&&n+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!c||!c.match||!c.match(l))throw new o.a((n&&n+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});var u=parseInt(s,10),d=parseInt(c,10);return new e(u,d,n)}}]),e}()},function(e,t,n){"use strict";var r=n(14),i=n(2),a=n(3),o=n(255),s=function(){function e(t,n){var r=this;if(Object(i.a)(this,e),this.backgroundBucketIds=[],this._uidToLayer=new Map,this._layerByName={},this._runningId=0,t.layers||(t.layers=[]),this.version=parseFloat(t.version),this.sprite=n?n.spriteUrl:t.sprite,this.glyphs=n?n.glyphsUrl:t.glyphs,this.layers=t.layers.map((function(e,t,n){return r._create(e,t,n)})),this.layers)for(var a,o=0;o<this.layers.length;o++)a=this.layers[o],this._layerByName[a.id.toLowerCase()]=a,this._uidToLayer.set(a.uid,a),0===a.type&&this.backgroundBucketIds.push(a.id);this._identifyRefLayers()}return Object(a.a)(e,[{key:"isPainterDataDriven",value:function(e){var t=this._layerByName[e.toLowerCase()];return!!t&&t.isPainterDataDriven()}},{key:"getStyleLayerId",value:function(e){return e>=this.layers.length?null:this.layers[e].id}},{key:"getStyleLayerByUID",value:function(e){var t=this._uidToLayer.get(e);return null!=t?t:null}},{key:"getStyleLayerIndex",value:function(e){var t=this._layerByName[e.toLowerCase()];return t?this.layers.indexOf(t):-1}},{key:"setStyleLayer",value:function(t,n){if(t&&t.id){n&&n>=this.layers.length&&(n=this.layers.length-1);var r,i=!0,a=this._layerByName[t.id.toLowerCase()];if(a){var o=this.layers.indexOf(a);n||(n=o),n===o?(i=!1,r=e._recreateLayer(t,a),this.layers[n]=r):(this.layers.splice(o,1),r=this._create(t,n,this.layers),this.layers.splice(n,0,r))}else r=this._create(t,n,this.layers),!n||n>=this.layers.length?this.layers.push(r):this.layers.splice(n,0,r);this._layerByName[t.id.toLowerCase()]=r,this._uidToLayer.set(r.uid,r),i&&this._recomputeZValues(),this._identifyRefLayers()}}},{key:"getStyleLayer",value:function(e){var t=this._layerByName[e.toLowerCase()];return t?{type:t.typeName,id:t.id,source:t.source,"source-layer":t.sourceLayer,minzoom:t.minzoom,maxzoom:t.maxzoom,filter:t.filter,layout:t.layout,paint:t.paint}:null}},{key:"deleteStyleLayer",value:function(e){var t=this._layerByName[e.toLowerCase()];if(t){delete this._layerByName[e.toLowerCase()],this._uidToLayer.delete(t.uid);var n=this.layers.indexOf(t);this.layers.splice(n,1),this._recomputeZValues(),this._identifyRefLayers()}}},{key:"getLayerById",value:function(e){return this._layerByName[e.toLowerCase()]}},{key:"getLayoutProperties",value:function(e){var t=this._layerByName[e.toLowerCase()];return t?t.layout:null}},{key:"getPaintProperties",value:function(e){var t=this._layerByName[e.toLowerCase()];return t?t.paint:null}},{key:"setPaintProperties",value:function(t,n){var r=this._layerByName[t.toLowerCase()];if(!r)return"";var i={type:r.typeName,id:r.id,source:r.source,"source-layer":r.sourceLayer,minzoom:r.minzoom,maxzoom:r.maxzoom,filter:r.filter,layout:r.layout,paint:n},a=e._recreateLayer(i,r),o=this.layers.indexOf(r);return this.layers[o]=a,this._layerByName[r.id.toLowerCase()]=a,this._uidToLayer.set(r.uid,a),r.id}},{key:"setLayoutProperties",value:function(t,n){var r=this._layerByName[t.toLowerCase()];if(!r)return"";var i={type:r.typeName,id:r.id,source:r.source,"source-layer":r.sourceLayer,minzoom:r.minzoom,maxzoom:r.maxzoom,filter:r.filter,layout:n,paint:r.paint},a=e._recreateLayer(i,r),o=this.layers.indexOf(r);return this.layers[o]=a,this._layerByName[r.id.toLowerCase()]=a,this._uidToLayer.set(r.uid,a),r.id}},{key:"setStyleLayerVisibility",value:function(t,n){var r=this._layerByName[t.toLowerCase()];if(r){var i=r.layout||{};i.visibility=n;var a={type:r.typeName,id:r.id,source:r.source,"source-layer":r.sourceLayer,minzoom:r.minzoom,maxzoom:r.maxzoom,filter:r.filter,layout:i,paint:r.paint},o=e._recreateLayer(a,r),s=this.layers.indexOf(r);this.layers[s]=o,this._layerByName[r.id.toLowerCase()]=o,this._uidToLayer.set(r.uid,o)}}},{key:"getStyleLayerVisibility",value:function(e){var t,n=this._layerByName[e.toLowerCase()];if(!n)return"none";var r=n.layout;return null!=(t=null==r?void 0:r.visibility)?t:"visible"}},{key:"_recomputeZValues",value:function(){for(var e=this.layers,t=1/(e.length+1),n=0;n<e.length;n++)e[n].z=1-(1+n)*t}},{key:"_identifyRefLayers",value:function(){var e,t=[],n=[],i=0,a=Object(r.a)(this.layers);try{for(a.s();!(e=a.n()).done;){var o=e.value;if(1===o.type){var s=o,c=o.source+"|"+o.sourceLayer;c+="|"+JSON.stringify(o.layout&&o.layout.visibility),c+="|"+JSON.stringify(o.minzoom),c+="|"+JSON.stringify(o.maxzoom),c+="|"+JSON.stringify(o.filter),(s.hasDataDrivenFill||s.hasDataDrivenOutline)&&(c+="|"+JSON.stringify(i)),t.push({key:c,layer:o})}if(2===o.type){var l=o,u=o.source+"|"+o.sourceLayer;u+="|"+JSON.stringify(o.layout&&o.layout.visibility),u+="|"+JSON.stringify(o.minzoom),u+="|"+JSON.stringify(o.maxzoom),u+="|"+JSON.stringify(o.filter),u+="|"+JSON.stringify(o.layout&&o.layout["line-cap"]),u+="|"+JSON.stringify(o.layout&&o.layout["line-join"]),l.hasDataDrivenLine&&(u+="|"+JSON.stringify(i)),n.push({key:u,layer:o})}++i}}catch(d){a.e(d)}finally{a.f()}this._assignRefLayers(t),this._assignRefLayers(n)}},{key:"_assignRefLayers",value:function(e){var t,n;e.sort((function(e,t){return e.key<t.key?-1:e.key>t.key?1:0}));for(var r=e.length,i=0;i<r;i++){var a=e[i];if(a.key===t)a.layer.refLayerId=n;else if(t=a.key,n=a.layer.id,1===a.layer.type&&!a.layer.getPaintProperty("fill-outline-color"))for(var o=i+1;o<r;o++){var s=e[o];if(s.key!==t)break;if(s.layer.getPaintProperty("fill-outline-color")){e[i]=s,e[o]=a,n=s.layer.id;break}}}}},{key:"_create",value:function(e,t,n){var r=1-(1+t)*(1/(n.length+1)),i=this._runningId++;switch(e.type){case"background":return new o.a(0,e,r,i);case"fill":return new o.c(1,e,r,i);case"line":return new o.e(2,e,r,i);case"symbol":return new o.f(3,e,r,i);case"raster":throw new Error("Unsupported vector tile raster layer");case"circle":return new o.b(4,e,r,i)}throw new Error("Unknown vector tile layer")}}],[{key:"_recreateLayer",value:function(e,t){switch(e.type){case"background":return new o.a(0,e,t.z,t.uid);case"fill":return new o.c(1,e,t.z,t.uid);case"line":return new o.e(2,e,t.z,t.uid);case"symbol":return new o.f(3,e,t.z,t.uid);case"raster":throw new Error("Unsupported vector tile raster layer");case"circle":return new o.b(4,e,t.z,t.uid)}}}]),e}();t.a=s},function(e,t,n){"use strict";var r=n(2),i=n(3),a=function(){function e(t){Object(r.a)(this,e),this._array=[],t<=0&&console.error("strideInBytes must be positive!"),this._stride=t}return Object(i.a)(e,[{key:"array",get:function(){return this._array}},{key:"index",get:function(){return 4*this._array.length/this._stride}},{key:"itemSize",get:function(){return this._stride}},{key:"sizeInBytes",get:function(){return 4*this._array.length}},{key:"reset",value:function(){this.array.length=0}},{key:"toBuffer",value:function(){return new Uint32Array(this._array).buffer}}],[{key:"i1616to32",value:function(e,t){return 65535&e|t<<16}},{key:"i8888to32",value:function(e,t,n,r){return 255&e|(255&t)<<8|(255&n)<<16|r<<24}},{key:"i8816to32",value:function(e,t,n){return 255&e|(255&t)<<8|n<<16}}]),e}();t.a=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(10),i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(8),d=(n(12),n(19),n(20),n(36)),f=n(124),p=n(91),h=n(509),b={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"},v=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).scale=0,r}return Object(a.a)(n,[{key:"destroy",value:function(){this.layer=null}},{key:"dynamicLayers",get:function(){if(!this.hasDynamicLayers)return null;var e=this.visibleSublayers.map((function(e){return e.toExportImageJSON()}));return e.length?JSON.stringify(e):null}},{key:"hasDynamicLayers",get:function(){return this.layer&&Object(h.a)(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}},{key:"layer",set:function(e){var t=this;this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.allSublayers.on("change",(function(){return t.notifyChange("visibleSublayers")})),e.on("sublayer-update",(function(e){return t.notifyChange(b[e.propertyName])}))],"layer"))}},{key:"layers",get:function(){var e=this.visibleSublayers;return e?e.length?"show:"+e.map((function(e){return e.id})).join(","):"show:-1":null}},{key:"layerDefs",get:function(){var e=this.visibleSublayers.filter((function(e){return null!=e.definitionExpression}));return e.length?JSON.stringify(e.reduce((function(e,t){return e[t.id]=t.definitionExpression,e}),{})):null}},{key:"version",get:function(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");var e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}},{key:"visibleSublayers",get:function(){var e=this,t=[];if(!this.layer)return t;var n=this.layer.sublayers;n&&n.forEach((function n(r){var i=e.scale,a=0===i,o=0===r.minScale||i<=r.minScale,s=0===r.maxScale||i>=r.maxScale;r.visible&&(a||o&&s)&&(r.sublayers?r.sublayers.forEach(n):t.unshift(r))}));var r=this._get("visibleSublayers");return!r||r.length!==t.length||r.some((function(e,n){return t[n]!==e}))?t:r}},{key:"toJSON",value:function(){var e=this.layer,t={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?t.dynamicLayers=this.dynamicLayers:t=Object(r.a)(Object(r.a)({},t),{},{layers:this.layers,layerDefs:this.layerDefs}),t}}]),n}(Object(p.b)(d.a));Object(c.a)([Object(l.b)({readOnly:!0})],v.prototype,"dynamicLayers",null),Object(c.a)([Object(l.b)({readOnly:!0})],v.prototype,"hasDynamicLayers",null),Object(c.a)([Object(l.b)()],v.prototype,"layer",null),Object(c.a)([Object(l.b)({readOnly:!0})],v.prototype,"layers",null),Object(c.a)([Object(l.b)({readOnly:!0})],v.prototype,"layerDefs",null),Object(c.a)([Object(l.b)({type:Number})],v.prototype,"scale",void 0),Object(c.a)([Object(l.b)(f.a)],v.prototype,"timeExtent",void 0),Object(c.a)([Object(l.b)({readOnly:!0})],v.prototype,"version",null),Object(c.a)([Object(l.b)({readOnly:!0})],v.prototype,"visibleSublayers",null),v=Object(c.a)([Object(u.a)("esri.layers.mixins.ExportImageParameters")],v)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n(66);function i(e,t){var n=t||e.extent,i=e.width,a=Object(r.d)(n&&n.spatialReference);return n&&i?n.width/i*a*r.h*96:0}function a(e,t){return e/(Object(r.d)(t)*r.h*96)}function o(e,t){var n=e.extent,r=e.width,i=a(t,n.spatialReference);return n.clone().expand(i*r/n.width)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(2),i=n(3),a=n(53),o=n(50),s=n(5),c=n(6),l=(n(16),n(4)),u=n(27),d=n(11),f=n(51),p=n(89),h=n(237),b=n(253),v=n(57),y=n(296),m=n(389),g=n(636),O=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e))._ray=v.f.create(),i._externalResources=null,i._handles=new f.a,i._isWorldDown=!1,i._start=Object(u.e)(),i._end=Object(u.g)(1,0,0),i._width=1,i._color=Object(h.c)(1,0,1,1),i._polygonOffset=!1,i._writeDepthEnabled=!0,i._innerWidth=0,i._innerColor=Object(h.c)(1,1,1,1),i._stippleIntegerRepeats=!0,i._stipplePattern=null,i._stippleOffColor=null,i._falloff=0,i._extensionType=0,i._laserlineStyle=null,i._laserlineEnabled=!1,i._renderOccluded=4,i._fadedExtensions=S,i.applyProps(e),i}return Object(i.a)(n,[{key:"createExternalResources",value:function(){var e=this,t=new m.a(this.materialParameters);this._handles.add(this.view.state.watch("camera",(function(){e.updateGeometry()})));var n=new g.a({view:this.view,attached:this._laserlineEnabled});this._externalResources={material:t,laserline:n}}},{key:"destroyExternalResources",value:function(){Object(l.k)(this._externalResources)&&this._externalResources.laserline.destroy(),this._externalResources=null,this._handles.removeAll()}},{key:"forEachExternalMaterial",value:function(e){Object(l.k)(this._externalResources)&&e(this._externalResources.material)}},{key:"createGeometries",value:function(e){var t=[Object(u.e)(),Object(u.e)()],n=3===this.extensionType;n&&t.push(Object(u.e)(),Object(u.e)());var r=n?new Float32Array([1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0]):null,i=y.a.createPolylineGeometry(t,null,r);e.addGeometry(i,Object(l.q)(this._externalResources).material),this.updateVertices(i)}},{key:"updateVisibility",value:function(e){Object(a.a)(Object(o.a)(n.prototype),"updateVisibility",this).call(this,e),Object(l.k)(this._externalResources)&&(this._externalResources.laserline.visible=e)}},{key:"setStartEndFromWorldDownAtLocation",value:function(e){this._isWorldDown=!0,Object(d.j)(this._start,e),this.view.renderCoordsHelper.worldUpAtPosition(e,this._end),Object(d.i)(this._end,e,this._end),v.f.fromPoints(this._start,this._end,this._ray),this.updateGeometry()}},{key:"start",get:function(){return this._start},set:function(e){this._isWorldDown=!1,Object(d.p)(this._start,e)||(Object(d.j)(this._start,e),v.f.fromPoints(this._start,this._end,this._ray),this.updateGeometry())}},{key:"end",get:function(){return this._end},set:function(e){this._isWorldDown=!1,Object(d.p)(this._end,e)||(Object(d.j)(this._end,e),v.f.fromPoints(this._start,this._end,this._ray),this.updateGeometry())}},{key:"width",get:function(){return this._width},set:function(e){e!==this._width&&(this._width=e,this.updateMaterial())}},{key:"color",get:function(){return this._color},set:function(e){Object(p.g)(e,this._color)||(Object(p.c)(this._color,e),this.updateMaterial())}},{key:"polygonOffset",get:function(){return this._polygonOffset},set:function(e){e!==this._polygonOffset&&(this._polygonOffset=e,this.updateMaterial())}},{key:"writeDepthEnabled",get:function(){return this._writeDepthEnabled},set:function(e){this._writeDepthEnabled!==e&&(this._writeDepthEnabled=e,this.updateMaterial())}},{key:"innerWidth",get:function(){return this._innerWidth},set:function(e){e!==this._innerWidth&&(this._innerWidth=e,this.updateMaterial())}},{key:"innerColor",get:function(){return this._innerColor},set:function(e){Object(p.g)(e,this._innerColor)||(Object(p.c)(this._innerColor,e),this.updateMaterial())}},{key:"stippleIntegerRepeats",get:function(){return this._stippleIntegerRepeats},set:function(e){e!==this._stippleIntegerRepeats&&(this._stippleIntegerRepeats=e,this.updateMaterial())}},{key:"stipplePattern",get:function(){return this._stipplePattern},set:function(e){var t=Object(l.k)(e)!==Object(l.k)(this._stipplePattern);this._stipplePattern=e,t?this.recreate():this.updateMaterial()}},{key:"stippleOffColor",get:function(){return this._stippleOffColor},set:function(e){(Object(l.j)(e)||Object(l.j)(this._stippleOffColor)||!Object(p.g)(e,this._stippleOffColor))&&(this._stippleOffColor=Object(l.k)(e)?Object(h.a)(e):null,this.updateMaterial())}},{key:"falloff",get:function(){return this._falloff},set:function(e){e!==this._falloff&&(this._falloff=e,this.updateMaterial())}},{key:"extensionType",get:function(){return this._extensionType},set:function(e){e!==this._extensionType&&(this._extensionType=e,this.updateGeometry())}},{key:"_laserlineAttached",get:function(){return this._laserlineEnabled&&Object(l.k)(this._laserlineStyle)}},{key:"laserlineStyle",get:function(){return this._laserlineStyle},set:function(e){this._laserlineStyle=e,Object(l.k)(this._externalResources)&&(this._externalResources.laserline.attached=this._laserlineAttached,Object(l.k)(e)&&(this._externalResources.laserline.style=e))}},{key:"laserlineEnabled",get:function(){return this._laserlineEnabled},set:function(e){this._laserlineEnabled!==e&&(this._laserlineEnabled=e,Object(l.k)(this._externalResources)&&(this._externalResources.laserline.attached=this._laserlineAttached))}},{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(e){e!==this._renderOccluded&&(this._renderOccluded=e,this.updateMaterial())}},{key:"fadedExtensions",get:function(){return this._fadedExtensions},set:function(e){this._fadedExtensions=Object(l.r)(e,S),this.recreateGeometry()}},{key:"updateMaterial",value:function(){Object(l.j)(this._externalResources)||this._externalResources.material.setParameterValues(this.materialParameters)}},{key:"materialParameters",get:function(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,stippleIntegerRepeats:this._stippleIntegerRepeats,innerWidth:this._innerWidth,innerColor:this._innerColor,falloff:this._falloff,polygonOffset:this._polygonOffset,renderOccluded:this._renderOccluded,writeDepth:this._writeDepthEnabled}}},{key:"updateGeometry",value:function(){Object(l.k)(this.object)&&this.updateVertices(this.object.geometries[0])}},{key:"updateVertices",value:function(e){var t=3===this._extensionType?this.updateLineSegmentFinite(k):this.updateLineSegmentInfinite(this._extensionType,k);this.updateVertexAttributes(e,t),Object(l.k)(this._externalResources)&&(this._externalResources.laserline.intersectsLine=t)}},{key:"updateLineSegmentFinite",value:function(e){return v.d.fromPoints(this._start,this._end,e)}},{key:"updateLineSegmentInfinite",value:function(e,t){var n=this.view.state.camera;switch(Object(b.e)(this._ray,j),e){case 0:j.c0=-Number.MAX_VALUE;break;case 1:case 2:var r=this._ray.origin,i=Object(l.r)(this.view.elevationProvider.getElevation(r[0],r[1],r[2],this.view.renderCoordsHelper.spatialReference,"ground"),0),a=this.view.renderCoordsHelper.getAltitude(r);this._isWorldDown&&a<i&&Object(d.s)(j.ray.direction,j.ray.direction),2===this._extensionType&&null!=i&&(j.c1=Math.abs(a-i))}if(!v.c.intersectClipRay(n.frustum,j))return v.d.fromPoints(this._start,this._end,t);var o=Object(b.f)(j,w),s=Object(b.d)(j,_);return v.d.fromPoints(o,s,t)}},{key:"updateVertexAttributes",value:function(e,t){var n=e.getMutableAttribute("position").data;if(3===this.extensionType){var r=v.d.pointAt(t,-this.fadedExtensions.start,w);n[0]=r[0],n[1]=r[1],n[2]=r[2];var i=v.d.pointAt(t,0,w);n[3]=i[0],n[4]=i[1],n[5]=i[2];var a=v.d.pointAt(t,1,w);n[6]=a[0],n[7]=a[1],n[8]=a[2];var o=v.d.pointAt(t,1+this.fadedExtensions.end,w);n[9]=o[0],n[10]=o[1],n[11]=o[2]}else{var s=v.d.pointAt(t,0,w);n[0]=s[0],n[1]=s[1],n[2]=s[2];var c=v.d.pointAt(t,1,w);n[3]=c[0],n[4]=c[1],n[5]=c[2]}Object(l.k)(this.object)&&this.object.geometryVertexAttrsUpdated(0)}}]),n}(n(394).a),j=Object(b.b)(),w=Object(u.e)(),_=Object(u.e)(),k=v.d.create(),x=1/3,S={start:x,end:x}},function(e,t,n){"use strict";n.d(t,"a",(function(){return $})),n.d(t,"b",(function(){return I}));var r=n(14),i=n(2),a=(n(16),n(13)),o=n(45),s=n(27),c=n(11),l=n(272),u=n(88),d=n(188),f=n(119),p=n(55),h=n(246),b=n(190),v=n(203),y=n(87),m=a.a.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V;return{plane:Object(y.c)(e.plane),origin:Object(s.d)(e.origin),basis1:Object(s.d)(e.basis1),basis2:Object(s.d)(e.basis2)}}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g();return j(e.origin,e.basis1,e.basis2,t)}function j(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g();return Object(c.j)(r.origin,e),Object(c.j)(r.basis1,t),Object(c.j)(r.basis2,n),w(r),D(r,"fromValues()"),r}function w(e){Object(y.f)(e.basis2,e.basis1,e.origin,e.plane)}function _(e,t,n){e!==n&&O(e,n);var r=Object(c.d)(p.d.get(),A(e),t);return Object(c.e)(n.origin,n.origin,r),n.plane[3]-=t,n}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g(),n=(e[2]-e[0])/2,r=(e[3]-e[1])/2;return Object(c.v)(t.origin,e[0]+n,e[1]+r,0),Object(c.v)(t.basis1,n,0,0),Object(c.v)(t.basis2,0,r,0),Object(y.b)(0,0,1,0,t.plane),t}function x(e,t,n){return!!Object(y.i)(e.plane,t,n)&&R(e,n)}function S(e,t,n){var i=z.get();N(e,t,i,z.get());var a,s=Number.POSITIVE_INFINITY,u=Object(r.a)(q);try{for(u.s();!(a=u.n()).done;){var d=F(e,a.value,U.get()),f=p.d.get();if(Object(y.d)(i,d,f)){var h=Object(l.d)(p.d.get(),t.origin,f),b=Math.abs(Object(o.b)(Object(c.g)(t.direction,h)));b<s&&(s=b,Object(c.j)(n,f))}}}catch(v){u.e(v)}finally{u.f()}return s===Number.POSITIVE_INFINITY?T(e,t,n):n}function T(e,t,n){if(x(e,t,n))return n;var i=z.get(),a=z.get();N(e,t,i,a);var o,s=Number.POSITIVE_INFINITY,l=Object(r.a)(q);try{for(l.s();!(o=l.n()).done;){var u=F(e,o.value,U.get()),d=p.d.get();if(Object(y.e)(i,u,d)){var f=Object(v.c)(t,d);if(!Object(y.g)(a,d))continue;f<s&&(s=f,Object(c.j)(n,d))}}}catch(h){l.e(h)}finally{l.f()}return P(e,t.origin)<s&&E(e,t.origin,n),n}function E(e,t,n){var r=Object(y.p)(e.plane,t,p.d.get()),i=Object(b.e)(L(e,e.basis1),r,-1,1,p.d.get()),a=Object(b.e)(L(e,e.basis2),r,-1,1,p.d.get());return Object(c.i)(n,Object(c.e)(p.d.get(),i,a),e.origin),n}function C(e,t,n){var r=e.origin,i=e.basis1,a=e.basis2,o=Object(c.i)(p.d.get(),t,r),s=Object(h.c)(i,o),l=Object(h.c)(a,o),u=Object(h.c)(A(e),o);return Object(c.v)(n,s,l,u)}function P(e,t){var n=C(e,t,p.d.get()),r=e.basis1,i=e.basis2,a=Object(c.o)(r),o=Object(c.o)(i),s=Math.max(Math.abs(n[0])-a,0),l=Math.max(Math.abs(n[1])-o,0),u=n[2];return s*s+l*l+u*u}function I(e,t){return Object(y.g)(e.plane,t)&&R(e,t)}function M(e,t){var n=-e.plane[3];return Object(h.c)(A(e),t)-n}function A(e){return Object(y.n)(e.plane)}function R(e,t){var n=Object(c.i)(p.d.get(),t,e.origin),r=Object(c.r)(e.basis1),i=Object(c.r)(e.basis2),a=Object(c.g)(e.basis1,n),o=Object(c.g)(e.basis2,n);return-a-r<0&&a-r<0&&-o-i<0&&o-i<0}function L(e,t){var n=U.get();return Object(c.j)(n.origin,e.origin),Object(c.j)(n.vector,t),n}function F(e,t,n){var r=e.basis1,i=e.basis2,a=e.origin,o=Object(c.d)(p.d.get(),r,t.origin[0]),s=Object(c.d)(p.d.get(),i,t.origin[1]);Object(c.e)(n.origin,o,s),Object(c.e)(n.origin,n.origin,a);var l=Object(c.d)(p.d.get(),r,t.direction[0]),u=Object(c.d)(p.d.get(),i,t.direction[1]);return Object(c.d)(n.vector,Object(c.e)(l,l,u),2),n}function D(e,t){Math.abs(Object(c.g)(e.basis1,e.basis2)/(Object(c.o)(e.basis1)*Object(c.o)(e.basis2)))>1e-6&&m.warn(t,"Provided basis vectors are not perpendicular"),Math.abs(Object(c.g)(e.basis1,A(e)))>1e-6&&m.warn(t,"Basis vectors and plane normal are not perpendicular"),Math.abs(-Object(c.g)(A(e),e.origin)-e.plane[3])>1e-6&&m.warn(t,"Plane offset is not consistent with plane origin")}function N(e,t,n,r){var i=A(e);Object(y.f)(i,t.direction,t.origin,n),Object(y.f)(Object(y.n)(n),i,t.origin,r)}var V={plane:Object(y.c)(),origin:Object(s.g)(0,0,0),basis1:Object(s.g)(1,0,0),basis2:Object(s.g)(0,1,0)},z=new d.a(y.c),U=new d.a(b.a),B=Object(s.e)(),G=new d.a((function(){return{origin:null,basis1:null,basis2:null,plane:null}})),q=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],H=Object(f.b)(),W=Object(f.b)(),$=Object.freeze({__proto__:null,BoundedPlaneClass:function e(){Object(i.a)(this,e),this.plane=Object(y.c)(),this.origin=Object(s.e)(),this.basis1=Object(s.e)(),this.basis2=Object(s.e)()},create:g,wrap:function(e,t,n){var r=G.get();return r.origin=e,r.basis1=t,r.basis2=n,r.plane=Object(y.s)(0,0,0,0),w(r),r},copy:O,copyWithoutVerify:function(e,t){Object(c.j)(t.origin,e.origin),Object(c.j)(t.basis1,e.basis1),Object(c.j)(t.basis2,e.basis2),Object(y.a)(e.plane,t.plane)},fromValues:j,updateUnboundedPlane:w,elevate:_,setExtent:function(e,t,n){return k(t,n),_(n,M(e,e.origin),n),n},fromAABoundingRect:k,intersectRay:x,intersectRayClosestSilhouette:function(e,t,n){if(x(e,t,n))return n;var r=S(e,t,p.d.get());return Object(c.e)(n,t.origin,Object(c.d)(p.d.get(),t.direction,Object(c.n)(t.origin,r)/Object(c.o)(t.direction))),n},closestPointOnSilhouette:S,closestPoint:T,projectPoint:E,projectPointLocal:C,distance2:P,distance:function(e,t){return Math.sqrt(P(e,t))},distanceToSilhouette:function(e,t){var n,i=Number.NEGATIVE_INFINITY,a=Object(r.a)(q);try{for(a.s();!(n=a.n()).done;){var o=F(e,n.value,U.get()),s=Object(b.b)(o,t);s>i&&(i=s)}}catch(c){a.e(c)}finally{a.f()}return Math.sqrt(i)},extrusionContainsPoint:I,axisAt:function(e,t,n,r){return function(e,t,n){switch(t){case 0:Object(c.j)(n,e.basis1),Object(c.q)(n,n);break;case 1:Object(c.j)(n,e.basis2),Object(c.q)(n,n);break;case 2:Object(c.j)(n,A(e))}return n}(e,n,r)},altitudeAt:M,setAltitudeAt:function(e,t,n,r){var i=M(e,t),a=Object(c.d)(B,A(e),n-i);return Object(c.e)(r,t,a),r},equals:function(e,t){return Object(c.p)(e.basis1,t.basis1)&&Object(c.p)(e.basis2,t.basis2)&&Object(c.p)(e.origin,t.origin)},transform:function(e,t,n){return e!==n&&O(e,n),Object(u.a)(H,t),Object(u.b)(H,H),Object(c.l)(n.basis1,e.basis1,H),Object(c.l)(n.basis2,e.basis2,H),Object(c.l)(Object(y.n)(n.plane),Object(y.n)(e.plane),H),Object(c.l)(n.origin,e.origin,t),Object(y.r)(n.plane,n.origin,n.plane),n},rotate:function(e,t,n,r){return e!==r&&O(e,r),Object(u.p)(W,Object(u.i)(W),t,n),Object(c.l)(r.basis1,e.basis1,W),Object(c.l)(r.basis2,e.basis2,W),w(r),r},normal:A,UP:V})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o}));n(16);function r(e){switch(e){case"u8":return 1;case"u16":return 2;case"u32":return 4;case"i8":return 1;case"i16":return 2;case"i32":case"f32":return 4;case"f64":return 8;default:return}}function i(e){switch(e){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0;default:return}}function a(e){switch(e){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1;default:return}}function o(e){switch(e){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303;default:return}}},function(e,t,n){"use strict";function r(e,t,n){for(var r=0;r<n;++r)t[2*r]=e[r],t[2*r+1]=e[r]-t[2*r]}function i(e,t,n,i){for(var s=0;s<i;++s)a[0]=e[s],r(a,o,1),t[s]=o[0],n[s]=o[1]}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var a=new Float64Array(1),o=new Float32Array(2)},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u}));var r=n(14),i=n(2),a=n(3),o=n(5),s=n(6),c=function(e){return function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments))._isDisposed=!1,e}return Object(a.a)(n,[{key:"dispose",value:function(){var e,t=Object(r.a)(null!=(n=this._managedDisposables)?n:[]);try{for(t.s();!(e=t.n()).done;){var n,i=e.value,a=this[i];this[i]=null,a&&"function"==typeof a.dispose&&a.dispose()}}catch(o){t.e(o)}finally{t.f()}this._isDisposed=!0}},{key:"isDisposed",get:function(){return this._isDisposed}}]),n}(e)},l=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return n}(c(function(){return function e(){Object(i.a)(this,e)}}()));function u(){return function(e,t){var n,r;e.hasOwnProperty("_managedDisposables")||(e._managedDisposables=null!=(n=null==(r=e._managedDisposables)?void 0:r.slice())?n:[]),e._managedDisposables.unshift(t)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return q})),n.d(t,"b",(function(){return G}));var r,i,a,o,s,c,l,u,d,f,p,h,b,v,y,m,g,O,j,w,_,k,x,S,T,E,C,P,I=n(29),M=n(34),A=n(256),R=n(378),L=n(217),F=n(317),D=n(263),N=n(316),V=n(758),z=n(482),U=n(631),B=n(619);function G(e){var t=new A.a;t.extensions.add("GL_OES_standard_derivatives"),t.include(B.a),t.include(V.a,e),t.include(U.a,e),1===e.output&&t.include(z.a,e),t.vertex.uniforms.add("proj","mat4").add("view","mat4").add("cameraNearFar","vec2").add("pixelRatio","float").add("miterLimit","float").add("screenSize","vec2"),t.attributes.add("position","vec3"),t.attributes.add("subdivisionFactor","float"),t.attributes.add("uv0","vec2"),t.attributes.add("auxpos1","vec3"),t.attributes.add("auxpos2","vec3"),t.varyings.add("vColor","vec4"),t.varyings.add("vpos","vec3"),t.varyings.add("linearDepth","float"),e.multipassTerrainEnabled&&t.varyings.add("depth","float");var n=e.falloffEnabled,G=e.innerColorEnabled;return G&&t.varyings.add("vLineDistance","float"),n&&t.varyings.add("vLineDistanceNorm","float"),e.falloffEnabled&&t.fragment.uniforms.add("falloff","float"),e.innerColorEnabled&&(t.fragment.uniforms.add("innerColor","vec4"),t.fragment.uniforms.add("innerWidth","float")),t.vertex.code.add(Object(M.a)(r||(r=Object(I.a)(["\n\t\t#define PERPENDICULAR(v) vec2(v.y, -v.x);\n\t\t#define ISOUTSIDE (left.x * right.y - left.y * right.x)*uv0.y > 0.0\n\n\t\tfloat interp(float ncp, vec4 a, vec4 b) {\n\t\t\treturn (-ncp - a.z) / (b.z - a.z);\n\t\t}\n\n\t\tvec2 rotate(vec2 v, float a) {\n\t\t\tfloat s = sin(a);\n\t\t\tfloat c = cos(a);\n\t\t\tmat2 m = mat2(c, -s, s, c);\n\t\t\treturn m * v;\n\t\t}\n"])))),t.vertex.code.add(Object(M.a)(i||(i=Object(I.a)(["\n    vec4 projectAndScale(vec4 pos) {\n      vec4 posNdc = proj * pos;\n\n      // Note that posNdc is in -1:1, scaling by screenSize converts this to a coordinate system\n      // that is twice scaled (going from -size:size).\n      posNdc.xy *= screenSize / posNdc.w;\n      return posNdc;\n    }\n"])))),t.vertex.code.add(Object(M.a)(a||(a=Object(I.a)(["\n    void clipAndTransform(inout vec4 pos, inout vec4 prev, inout vec4 next, in bool isStartVertex) {\n      float vnp = cameraNearFar[0] * 0.99;\n\n      //current pos behind ncp --\x3e we need to clip\n      if(pos.z > -cameraNearFar[0]) {\n        if (!isStartVertex) {\n          //previous in front of ncp\n          if(prev.z < -cameraNearFar[0]) {\n            pos = mix(prev, pos, interp(vnp, prev, pos));\n            next = pos;\n          } else {\n            pos = vec4(0.0, 0.0, 0.0, 1.0);\n          }\n        }\n        //next in front of ncp\n        if(isStartVertex) {\n          if(next.z < -cameraNearFar[0]) {\n            pos = mix(pos, next, interp(vnp, pos, next));\n            prev = pos;\n          } else {\n            pos = vec4(0.0, 0.0, 0.0, 1.0);\n          }\n        }\n      } else {\n        //current position visible\n        //previous behind ncp\n        if (prev.z > -cameraNearFar[0]) {\n          prev = mix(pos, prev, interp(vnp, pos, prev));\n        }\n        //next behind ncp\n        if (next.z > -cameraNearFar[0]) {\n          next = mix(next, pos, interp(vnp, next, pos));\n        }\n      }\n\n      ","\n      linearDepth = (-pos.z - cameraNearFar[0]) / (cameraNearFar[1] - cameraNearFar[0]);\n\n      pos = projectAndScale(pos);\n      next = projectAndScale(next);\n      prev = projectAndScale(prev);\n    }\n"])),e.multipassTerrainEnabled?"depth = pos.z;":"")),t.vertex.code.add(Object(M.a)(o||(o=Object(I.a)(["\n  void main(void) {\n    float coverage = 1.0;\n    vpos = position;\n\n    // Check for special value of uv0.y which is used by the Renderer when graphics\n    // are removed before the VBO is recompacted. If this is the case, then we just\n    // project outside of clip space.\n    if (uv0.y == 0.0) {\n      // Project out of clip space\n      gl_Position = vec4(1e038, 1e038, 1e038, 1.0);\n    }\n    else {\n      bool isStartVertex = abs(abs(uv0.y)-3.0) == 1.0;\n      bool isJoin = abs(uv0.y)-3.0 < 0.0;\n\n      float lineWidth = getSize() * pixelRatio;\n\n      // convert sub-pixel coverage to alpha\n      if (lineWidth < 1.0) {\n        coverage = lineWidth;\n        lineWidth = 1.0;\n      }else{\n        // Ribbon lines cannot properly render non-integer sizes. Round width to integer size if\n        // larger than one for better quality. Note that we do render < 1 pixels more or less correctly\n        // so we only really care to round anything larger than 1.\n        lineWidth = floor(lineWidth + 0.5);\n      }\n\n      vec4 pos  = view * vec4(position.xyz, 1.0);\n      vec4 prev = view * vec4(auxpos1.xyz, 1.0);\n      vec4 next = view * vec4(auxpos2.xyz, 1.0);\n\n      clipAndTransform(pos, prev, next, isStartVertex);\n\n      vec2 left = (pos.xy - prev.xy);\n      vec2 right = (next.xy - pos.xy);\n\n      float leftLen = length(left);\n      float rightLen = length(right);\n  "])))),e.stippleEnabled&&t.vertex.code.add(Object(M.a)(s||(s=Object(I.a)(["\n      // uv0.x is either 0 or 1, depending on whether this is considered the start of a line segment\n      // or the end. If start, then use pos->next, otherwise use prev->pos to define the line segment\n      // vector\n      vec4 stippleSegmentInfo = mix(vec4(pos.xy, right), vec4(prev.xy, left), uv0.x);\n      vec2 stippleSegmentOrigin = stippleSegmentInfo.xy;\n\n      // Scale s.t. it's in units of stipple pattern size.\n      vec2 stippleSegmentDirection = stippleSegmentInfo.zw;\n    "])))),t.vertex.code.add(Object(M.a)(c||(c=Object(I.a)(['\n    left = (leftLen > 0.001) ? left/leftLen : vec2(0.0, 0.0);\n    right = (rightLen > 0.001) ? right/rightLen : vec2(0.0, 0.0);\n\n    vec2 capDisplacementDir = vec2(0, 0);\n    vec2 joinDisplacementDir = vec2(0, 0);\n    float displacementLen = lineWidth;\n\n    if (isJoin) {\n\n      // JOIN handling ---------------------------------------------------\n      // determine if vertex is on the "outside or "inside" of the join\n      bool isOutside = ISOUTSIDE;\n\n      // compute miter join position first\n      joinDisplacementDir = normalize(left + right);\n      joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);\n\n      // compute miter stretch\n      if (leftLen > 0.001 && rightLen > 0.001) {\n        float nDotSeg = dot(joinDisplacementDir, left);\n        displacementLen /= length(nDotSeg * left - joinDisplacementDir);\n\n        // limit displacement of inner vertices\n        if (!isOutside) {\n          displacementLen = min(displacementLen, min(leftLen, rightLen)/abs(nDotSeg));\n        }\n      }\n\n      if (isOutside && (displacementLen > miterLimit * lineWidth)) {\n    '])))),e.roundJoins?t.vertex.code.add(Object(M.a)(l||(l=Object(I.a)(["\n        vec2 startDir;\n        vec2 endDir;\n\n        if (leftLen < 0.001) {\n          startDir = right;\n        }\n        else{\n          startDir = left;\n        }\n        startDir = normalize(startDir);\n        startDir = PERPENDICULAR(startDir);\n\n        if (rightLen < 0.001) {\n          endDir = left;\n        }\n        else{\n          endDir = right;\n        }\n        endDir = normalize(endDir);\n        endDir = PERPENDICULAR(endDir);\n\n        float rotationAngle = acos(clamp(dot(startDir, endDir), -1.0, 1.0));\n        joinDisplacementDir = rotate(startDir, -sign(uv0.y) * subdivisionFactor * rotationAngle);\n      "])))):t.vertex.code.add(Object(M.a)(u||(u=Object(I.a)(["\n        // convert to bevel join if miterLimit is exceeded\n        if (leftLen < 0.001) {\n          joinDisplacementDir = right;\n        }\n        else if (rightLen < 0.001) {\n          joinDisplacementDir = left;\n        }\n        else {\n          joinDisplacementDir = isStartVertex ? right : left;\n        }\n        joinDisplacementDir = normalize(joinDisplacementDir);\n        joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);\n  "])))),t.vertex.code.add(Object(M.a)(d||(d=Object(I.a)(["\n        displacementLen = lineWidth;\n      }\n    } else {\n    // CAP handling ---------------------------------------------------\n    if (leftLen < 0.001) {\n      joinDisplacementDir = right;\n    }\n    else if (rightLen < 0.001) {\n      joinDisplacementDir = left;\n    }\n    else {\n      joinDisplacementDir = isStartVertex ? right : left;\n    }\n    joinDisplacementDir = normalize(joinDisplacementDir);\n    joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);\n    displacementLen = lineWidth;\n\n    capDisplacementDir = isStartVertex ? -right : left;\n  "])))),e.roundCaps?t.vertex.code.add(Object(M.a)(f||(f=Object(I.a)(["\n    float angle = subdivisionFactor*PI*0.5;\n    joinDisplacementDir *= cos(angle);\n    capDisplacementDir *= sin(angle);\n    "])))):t.vertex.code.add(Object(M.a)(p||(p=Object(I.a)(["\n    capDisplacementDir *= subdivisionFactor;\n    "])))),t.vertex.code.add(Object(M.a)(h||(h=Object(I.a)(["\n  }\n\n  // Displacement (in pixels) caused by join/or cap\n  vec2 dpos = joinDisplacementDir * sign(uv0.y) * displacementLen + capDisplacementDir * displacementLen;\n\n  ","\n\n  ","\n  ","\n\n  pos.xy += dpos;\n  "])),n||G?Object(M.a)(b||(b=Object(I.a)(["float lineDist = lineWidth * sign(uv0.y) * pos.w;"]))):"",G?Object(M.a)(v||(v=Object(I.a)(["vLineDistance = lineDist;"]))):"",n?Object(M.a)(y||(y=Object(I.a)(["vLineDistanceNorm = lineDist / lineWidth;"]))):"")),e.stippleEnabled&&(t.vertex.code.add(Object(M.a)(m||(m=Object(I.a)(["\n    {\n      // Compute the stipple pattern UV coordinate from the actual position, based on the origin\n      // and direction of the line segment on which the stipple pattern is based.\n\n      // Project the vector from the origin of the segment to the vertex onto the line segment.\n      // Note the 0.5 factor due to projected positions being at twice the screen size scale (see projectAndScale)\n      vec2 posVec = pos.xy - stippleSegmentOrigin;\n\n      float stippleSegmentDirectionLength = length(stippleSegmentDirection);\n    "])))),e.stippleIntegerRepeatsEnabled&&t.vertex.code.add(Object(M.a)(g||(g=Object(I.a)(["\n      float numberOfPatternRepeats = stippleSegmentDirectionLength * 0.5 * stipplePatternPixelSizeInv;\n      float roundedNumberOfPatternRepeats = floor(numberOfPatternRepeats);\n      stipplePatternUvMax = roundedNumberOfPatternRepeats;\n      "])))),t.vertex.code.add(Object(M.a)(O||(O=Object(I.a)(["\n      if (stippleSegmentDirectionLength >= 0.001) {\n        // Project the vertex position onto the line segment.\n        float projectedLength = dot(stippleSegmentDirection, posVec) / stippleSegmentDirectionLength * 0.5;\n     ","\n        stipplePatternUv = projectedLength * wholeNumberOfRepeatsScale * stipplePatternPixelSizeInv * pos.w;\n        } else {\n          stipplePatternUv = 1.0;\n        }\n      }\n    "])),e.stippleIntegerRepeatsEnabled?"float wholeNumberOfRepeatsScale = roundedNumberOfPatternRepeats / numberOfPatternRepeats;":"float wholeNumberOfRepeatsScale = 1.0;"))),t.vertex.code.add(Object(M.a)(j||(j=Object(I.a)(["\n      // Convert back into NDC\n      pos.xy = pos.xy / screenSize * pos.w;\n\n      vColor = getColor();\n      vColor.a *= coverage;\n\n      gl_Position = pos;\n    }\n  }\n  "])))),e.multipassTerrainEnabled&&(t.fragment.include(F.a),t.include(N.b,e)),t.include(L.a,e),t.fragment.uniforms.add("intrinsicColor","vec4"),t.fragment.include(R.a),t.fragment.code.add(Object(M.a)(w||(w=Object(I.a)(["\n  void main() {\n    discardBySlice(vpos);\n    ","\n    float stippleAlpha = getStippleAlpha();\n    discardByStippleAlpha(stippleAlpha, stippleAlphaColorDiscard);\n\n    vec4 color = intrinsicColor * vColor;\n  "])),e.multipassTerrainEnabled?"terrainDepthTest(gl_FragCoord, depth);":"")),e.innerColorEnabled&&(t.fragment.uniforms.add("pixelRatio","float"),t.fragment.code.add(Object(M.a)(_||(_=Object(I.a)(["\n    float distToInner = abs(vLineDistance * gl_FragCoord.w) - innerWidth;\n    float innerAA = clamp(0.5 - distToInner, 0.0, 1.0);\n    float innerAlpha = innerColor.a + color.a * (1.0 - innerColor.a);\n    color = mix(color, vec4(innerColor.rgb, innerAlpha), innerAA);\n    "]))))),t.fragment.code.add(Object(M.a)(k||(k=Object(I.a)(["\n    vec4 finalColor = blendStipple(color, stippleAlpha);\n  "])))),e.falloffEnabled&&t.fragment.code.add(Object(M.a)(x||(x=Object(I.a)(["\n    finalColor.a *= pow(max(0.0, 1.0 - abs(vLineDistanceNorm * gl_FragCoord.w)), falloff);\n    "])))),t.fragment.code.add(Object(M.a)(S||(S=Object(I.a)(["\n    if (finalColor.a < ",") {\n      discard;\n    }\n\n    ","\n    ","\n    ","\n    ","\n    ","\n  }\n  "])),M.a.float(D.c),7===e.output?Object(M.a)(T||(T=Object(I.a)(["gl_FragColor = vec4(finalColor.a);"]))):"",0===e.output?Object(M.a)(E||(E=Object(I.a)(["gl_FragColor = highlightSlice(finalColor, vpos);"]))):"",0===e.output&&e.OITEnabled?"gl_FragColor = premultiplyAlpha(gl_FragColor);":"",4===e.output?Object(M.a)(C||(C=Object(I.a)(["gl_FragColor = vec4(1.0);"]))):"",1===e.output?Object(M.a)(P||(P=Object(I.a)(["outputDepth(linearDepth);"]))):"")),t}var q=Object.freeze({__proto__:null,build:G})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l}));var r,i,a=n(29),o=n(34),s=n(256),c=n(489);function l(e){var t=new s.a;return t.include(c.a,e),t.vertex.uniforms.add("uModelViewMatrix","mat4"),t.vertex.uniforms.add("uProjectionMatrix","mat4"),t.attributes.add("start","vec3"),t.attributes.add("end","vec3"),t.attributes.add("up","vec3"),t.attributes.add("extrude","vec2"),t.varyings.add("uv","vec2"),t.varyings.add("vViewStart","vec3"),t.varyings.add("vViewEnd","vec3"),t.varyings.add("vViewPlane","vec4"),t.vertex.uniforms.add("glowWidth","float"),t.vertex.uniforms.add("pixelToNDC","vec2"),t.vertex.code.add(Object(o.a)(r||(r=Object(a.a)(["\n  void main() {\n    vec3 pos = mix(start, end, extrude.x);\n\n    vec4 viewPos = uModelViewMatrix * vec4(pos, 1);\n    vec4 projPos = uProjectionMatrix * viewPos;\n    vec2 ndcPos = projPos.xy / projPos.w;\n\n    vec3 viewUp = (uModelViewMatrix * vec4(extrude.y * up, 0)).xyz;\n    vec4 projPosUp = uProjectionMatrix * vec4(viewPos.xyz + viewUp, 1);\n    vec2 projExtrudeDir = normalize(projPosUp.xy / projPosUp.w - ndcPos);\n\n    vec2 lxy = abs(sign(projExtrudeDir) - ndcPos);\n    ndcPos += length(lxy) * projExtrudeDir;\n\n    vec3 worldPlaneNormal = normalize(cross(up, normalize(end - start)));\n    vec3 viewPlaneNormal = (uModelViewMatrix * vec4(worldPlaneNormal, 0)).xyz;\n\n    vViewStart = (uModelViewMatrix * vec4(start, 1)).xyz;\n    vViewEnd = (uModelViewMatrix * vec4(end, 1)).xyz;\n    vViewPlane = vec4(viewPlaneNormal, -dot(viewPlaneNormal, vViewStart));\n\n    // Add enough padding in the X screen space direction for glow\n    float xPaddingPixels = sign(dot(viewPlaneNormal, viewPos.xyz)) * (extrude.x * 2.0 - 1.0) * glowWidth;\n    ndcPos.x += xPaddingPixels * pixelToNDC.x;\n\n    uv = ndcPos * 0.5 + 0.5;\n    gl_Position = vec4(ndcPos, 0, 1);\n  }\n  "])))),t.fragment.uniforms.add("globalAlpha","float"),t.fragment.uniforms.add("perScreenPixelRatio","float"),t.fragment.code.add(Object(o.a)(i||(i=Object(a.a)(["\n  float planeDistancePixels(vec4 plane, vec3 pos, vec3 start, vec3 end) {\n    vec3 origin = mix(start, end, 0.5);\n    vec3 basis = end - origin;\n    vec3 posAtOrigin = pos - origin;\n\n    float x = dot(normalize(basis), posAtOrigin);\n    float y = dot(plane.xyz, posAtOrigin);\n\n    float dx = max(abs(x) - length(basis), 0.0);\n    float dy = y;\n\n    float dist = length(vec2(dx, dy));\n\n    float width = fwidth(y);\n    float maxPixelDistance = length(pos) * perScreenPixelRatio * 2.0;\n    float pixelDist = dist / min(width, maxPixelDistance);\n    return abs(pixelDist);\n  }\n\n  void main() {\n    vec3 pos;\n    vec3 normal;\n    float depthDiscontinuityAlpha;\n\n    if (!laserlineReconstructFromDepth(pos, normal, depthDiscontinuityAlpha)) {\n      discard;\n    }\n\n    float distance = planeDistancePixels(vViewPlane, pos, vViewStart, vViewEnd);\n\n    vec4 color = laserlineProfile(distance);\n    float alpha = 1.0 - smoothstep(0.995, 0.999, abs(dot(normal, vViewPlane.xyz)));\n\n    gl_FragColor = laserlineOutput(color * alpha * depthDiscontinuityAlpha);\n  }\n  "])))),t}var u=Object.freeze({__proto__:null,build:l})},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(5),o=n(6),s=n(4),c=n(254),l=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e))._textureIDs=new Set,i._textureRepository=e.textureRep,i._textureId=e.textureId,i._initTransparent=!!e.initTextureTransparent,i._texture=i._acquireIfNotUndefined(i._textureId),i._textureNormal=i._acquireIfNotUndefined(e.normalTextureId),i._textureEmissive=i._acquireIfNotUndefined(e.emissiveTextureId),i._textureOcclusion=i._acquireIfNotUndefined(e.occlusionTextureId),i._textureMetallicRoughness=i._acquireIfNotUndefined(e.metallicRoughnessTextureId),i}return Object(i.a)(n,[{key:"dispose",value:function(){var e=this;this._textureIDs.forEach((function(t){return e._textureRepository.release(t)})),this._textureIDs.clear()}},{key:"updateTexture",value:function(e){e!==this._textureId&&(this._releaseIfNotUndefined(this._textureId),this._textureId=e,this._texture=this._acquireIfNotUndefined(this._textureId))}},{key:"bindTexture",value:function(e,t){Object(s.k)(this._texture)&&(t.setUniform1i("tex",c.a.DIFFUSE),e.bindTexture(this._texture.glTexture,c.a.DIFFUSE)),Object(s.k)(this._textureNormal)&&(t.setUniform1i("normalTexture",c.a.NORMAL),e.bindTexture(this._textureNormal.glTexture,c.a.NORMAL)),Object(s.k)(this._textureEmissive)&&(t.setUniform1i("texEmission",c.a.EMISSION),e.bindTexture(this._textureEmissive.glTexture,c.a.EMISSION)),Object(s.k)(this._textureOcclusion)&&(t.setUniform1i("texOcclusion",c.a.OCCLUSION),e.bindTexture(this._textureOcclusion.glTexture,c.a.OCCLUSION)),Object(s.k)(this._textureMetallicRoughness)&&(t.setUniform1i("texMetallicRoughness",c.a.METALLIC_ROUGHNESS),e.bindTexture(this._textureMetallicRoughness.glTexture,c.a.METALLIC_ROUGHNESS))}},{key:"bindTextureScale",value:function(e,t){var n=Object(s.k)(this._texture)&&this._texture.glTexture;n&&n.descriptor.textureCoordinateScaleFactor?t.setUniform2fv("textureCoordinateScaleFactor",n.descriptor.textureCoordinateScaleFactor):t.setUniform2f("textureCoordinateScaleFactor",1,1)}},{key:"_acquireIfNotUndefined",value:function(e){if(!Object(s.j)(e))return this._textureIDs.add(e),this._textureRepository.acquire(e,this._initTransparent)}},{key:"_releaseIfNotUndefined",value:function(e){Object(s.j)(e)||(this._textureIDs.delete(e),this._textureRepository.release(e))}}]),n}(n(387).a);t.a=l},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return p}));n(14),n(4);var r=n(156),i=n(472),a=n(45),o=(n(27),n(88),n(114),n(141)),s=(n(119),n(60)),c=(n(97),n(89),n(175),n(186)),l=n(443);function u(e,t){if("point"===e.type)return f(e,t,!1);if(Object(l.c)(e))switch(e.type){case"extent":return f(e.center,t,!1);case"polygon":return f(e.centroid,t,!1);case"polyline":return f(d(e),t,!0);case"mesh":return f(e.extent.center,t,!1)}else switch(e.type){case"extent":return f(function(e){var t=Object(a.j)(e.zmin);return Object(c.d)(.5*(e.xmax+e.xmin),.5*(e.ymax+e.ymin),t?.5*(e.zmax+e.zmin):void 0,e.spatialReference)}(e),t,!0);case"polygon":return f(function(e){var t=e.rings[0];if(!t||0===t.length)return null;var n=Object(i.b)(e.rings,e.hasZ);return Object(c.d)(n[0],n[1],n[2],e.spatialReference)}(e),t,!0);case"polyline":return f(d(e),t,!0)}}function d(e){var t=e.paths[0];if(!t||0===t.length)return null;var n=Object(r.f)(t,Object(r.e)(t)/2);return Object(c.d)(n[0],n[1],n[2],e.spatialReference)}function f(e,t,n){var r=n?e:Object(l.a)(e);return t&&e?Object(o.m)(e,r,t)?r:null:r}function p(e,t){for(var n=0;n<e.geometries.length;++n){var r=e.geometries[n].getMutableAttribute("auxpos1");r&&r.data[3]!==t&&(r.data[3]=t,e.geometryVertexAttrsUpdated(n))}}Object(s.e)(0,0),Object(s.e)(.5,0),Object(s.e)(1,0),Object(s.e)(0,.5),Object(s.e)(.5,.5),Object(s.e)(1,.5),Object(s.e)(0,1),Object(s.e)(.5,1),Object(s.e)(1,1)},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(7),i=n.n(r),a=n(10),o=n(15),s=n(62);function c(e,t){return l.apply(this,arguments)}function l(){return(l=Object(o.a)(i.a.mark((function e(t,n){var r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.default)(t,Object(a.a)({responseType:"image"},n));case 2:return r=e.sent,o=r.data,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return _}));var r,i,a,o,s,c,l,u,d=n(29),f=n(34),p=n(602),h=n(256),b=n(378),v=n(217),y=n(317),m=n(267),g=n(263),O=n(316),j=n(482),w=n(607);function _(e){var t=new h.a,n=1===e.output;return t.include(p.a,{linearDepth:n}),t.include(w.a,e),t.vertex.uniforms.add("proj","mat4").add("view","mat4"),t.attributes.add("position","vec3"),t.varyings.add("vpos","vec3"),e.multipassTerrainEnabled&&t.varyings.add("depth","float"),n&&(t.include(j.a,e),t.vertex.uniforms.add("cameraNearFar","vec2"),t.varyings.add("linearDepth","float")),t.vertex.code.add(Object(f.a)(r||(r=Object(d.a)(["\n    void main(void) {\n      vpos = position;\n      forwardNormalizedVertexColor();\n      ","\n      gl_Position = ","\n    }\n  "])),e.multipassTerrainEnabled?"depth = (view * vec4(vpos, 1.0)).z;":"",n?Object(f.a)(i||(i=Object(d.a)(["transformPositionWithDepth(proj, view, vpos, cameraNearFar, linearDepth);"]))):Object(f.a)(a||(a=Object(d.a)(["transformPosition(proj, view, vpos);"]))))),t.include(v.a,e),t.fragment.include(b.a),e.multipassTerrainEnabled&&(t.fragment.include(y.a),t.include(O.b,e)),t.fragment.uniforms.add("eColor","vec4"),4===e.output&&t.include(m.a),t.fragment.code.add(Object(f.a)(o||(o=Object(d.a)(["\n  void main() {\n    discardBySlice(vpos);\n    ","\n    vec4 color = ","\n\n    if (color.a < ",") {\n      discard;\n    }\n\n    ","\n\n    ","\n    ",";\n    ",";\n  }\n  "])),e.multipassTerrainEnabled?"terrainDepthTest(gl_FragCoord, depth);":"",e.attributeColor?"vColor * eColor;":"eColor;",f.a.float(g.c),7===e.output?Object(f.a)(s||(s=Object(d.a)(["gl_FragColor = vec4(color.a);"]))):"",0===e.output?Object(f.a)(c||(c=Object(d.a)(["gl_FragColor = highlightSlice(color, vpos); ",""])),e.OITEnabled?"gl_FragColor = premultiplyAlpha(gl_FragColor);":""):"",4===e.output?Object(f.a)(l||(l=Object(d.a)(["outputHighlight();"]))):"",1===e.output?Object(f.a)(u||(u=Object(d.a)(["outputDepth(linearDepth);"]))):"")),t}var k=Object.freeze({__proto__:null,build:_})},function(e,t,n){"use strict";var r,i=n(10),a=n(2),o=n(3),s=n(53),c=n(50),l=n(5),u=n(6),d=n(0),f=(n(16),n(13),n(17),n(1)),p=n(8),h=(n(12),n(19),n(20),n(201)),b=n(61),v=n(43),y=n(118),m=n(245),g=n(66),O=n(419),j=r=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).center=null,e.geodesic=!1,e.numberOfPoints=60,e.radius=1e3,e.radiusUnit="meters",e}return Object(o.a)(n,[{key:"normalizeCtorArgs",value:function(e,t){var r;if(e&&e.center)r=e;else{if(e&&e.rings)return Object(s.a)(Object(c.a)(n.prototype),"normalizeCtorArgs",this).call(this,e,t);r={center:e}}return Object(i.a)(Object(i.a)(Object(i.a)({},Object(s.a)(Object(c.a)(n.prototype),"normalizeCtorArgs",this).call(this)),r),t)}},{key:"initialize",value:function(){var e=this.center,t=this.numberOfPoints;if(this.hasZ=e&&e.hasZ,0===this.rings.length&&e){var n,r=Object(g.b)(this.radius,this.radiusUnit,"meters"),i=e.spatialReference,a="geographic";if(i.isWebMercator?a="webMercator":(null!=h.a[i.wkid]||i.wkt&&0===i.wkt.indexOf("PROJCS"))&&(a="projected"),this.geodesic){var o;switch(a){case"webMercator":o=Object(b.e)(e);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":o=e}n=this._createGeodesicCircle(o,r,t),"webMercator"===a&&(n=Object(b.b)(n))}else{var s;"webMercator"===a||"projected"===a?s=r/this._convert2Meters(1,e.spatialReference):"geographic"===a&&(s=Object(g.i)(r,"meters",Object(m.e)(e.spatialReference).radius)),n=this._createPlanarCircle(e,s,t)}this.spatialReference=n.spatialReference,this.addRing(n.rings[0])}}},{key:"clone",value:function(){var e=this.center,t=this.numberOfPoints,n=this.radius,i=this.radiusUnit,a=this.geodesic;return new r({center:e.clone(),numberOfPoints:t,radius:n,radiusUnit:i,geodesic:a})}},{key:"_createGeodesicCircle",value:function(e,t,n){for(var r=0,i=[];r<360;){var a=[0,0],o=[e.x,e.y];Object(O.a)(a,o,r,t),this.hasZ&&a.push(e.z),i.push(a),r+=360/n}return i.push(i[0]),new y.a(i)}},{key:"_createPlanarCircle",value:function(e,t,n){for(var r=0,i=[];r<2*Math.PI;){var a=[e.x+Math.cos(-r)*t,e.y+Math.sin(-r)*t];this.hasZ&&a.push(e.z),i.push(a),r+=Math.PI/(n/2)}return i.push(i[0]),new y.a({spatialReference:e.spatialReference,rings:[i]})}},{key:"_convert2Meters",value:function(e,t){var n;if(null!=h.a[t.wkid])n=h.a.values[h.a[t.wkid]];else{var r=t.wkt,i=r.lastIndexOf(",")+1,a=r.lastIndexOf("]]");n=parseFloat(r.substring(i,a))}return e*n}}]),n}(y.a);Object(d.a)([Object(f.b)({type:v.a})],j.prototype,"center",void 0),Object(d.a)([Object(f.b)()],j.prototype,"geodesic",void 0),Object(d.a)([Object(f.b)()],j.prototype,"numberOfPoints",void 0),Object(d.a)([Object(f.b)()],j.prototype,"radius",void 0),Object(d.a)([Object(f.b)()],j.prototype,"radiusUnit",void 0);var w=j=r=Object(d.a)([Object(p.a)("esri.geometry.Circle")],j);t.a=w},,,function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function o(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,s,c=o(e),l=1;l<arguments.length;l++){for(var u in n=Object(arguments[l]))i.call(n,u)&&(c[u]=n[u]);if(r){s=r(n);for(var d=0;d<s.length;d++)a.call(n,s[d])&&(c[s[d]]=n[s[d]])}}return c}},function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(206);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var a;if(n)a=n(t);else if(r.isURLSearchParams(t))a=t.toString();else{var o=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),o.push(i(t)+"="+i(e))})))})),a=o.join("&")}if(a){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";(function(t){var r=n(206),i=n(823),a={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s={adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof t&&"[object process]"===Object.prototype.toString.call(t))&&(e=n(666)),e}(),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(o(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){s.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){s.headers[e]=r.merge(a)})),e.exports=s}).call(this,n(382))},function(e,t,n){"use strict";var r=n(206),i=n(824),a=n(826),o=n(663),s=n(827),c=n(830),l=n(831),u=n(667);e.exports=function(e){return new Promise((function(t,n){var d=e.data,f=e.headers;r.isFormData(d)&&delete f["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var h=e.auth.username||"",b=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";f.Authorization="Basic "+btoa(h+":"+b)}var v=s(e.baseURL,e.url);if(p.open(e.method.toUpperCase(),o(v,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in p?c(p.getAllResponseHeaders()):null,a={data:e.responseType&&"text"!==e.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:e,request:p};i(t,n,a),p=null}},p.onabort=function(){p&&(n(u("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){n(u("Network Error",e,null,p)),p=null},p.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(u(t,e,"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var y=(e.withCredentials||l(v))&&e.xsrfCookieName?a.read(e.xsrfCookieName):void 0;y&&(f[e.xsrfHeaderName]=y)}if("setRequestHeader"in p&&r.forEach(f,(function(e,t){"undefined"===typeof d&&"content-type"===t.toLowerCase()?delete f[t]:p.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),e.responseType)try{p.responseType=e.responseType}catch(m){if("json"!==e.responseType)throw m}"function"===typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){p&&(p.abort(),n(e),p=null)})),d||(d=null),p.send(d)}))}},function(e,t,n){"use strict";var r=n(825);e.exports=function(e,t,n,i,a){var o=new Error(e);return r(o,t,n,i,a)}},function(e,t,n){"use strict";var r=n(206);e.exports=function(e,t){t=t||{};var n={},i=["url","method","data"],a=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function c(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function l(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=c(void 0,e[i])):n[i]=c(e[i],t[i])}r.forEach(i,(function(e){r.isUndefined(t[e])||(n[e]=c(void 0,t[e]))})),r.forEach(a,l),r.forEach(o,(function(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=c(void 0,e[i])):n[i]=c(void 0,t[i])})),r.forEach(s,(function(r){r in t?n[r]=c(e[r],t[r]):r in e&&(n[r]=c(void 0,e[r]))}));var u=i.concat(a).concat(o).concat(s),d=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===u.indexOf(e)}));return r.forEach(d,l),n}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"AlertTitle",{enumerable:!0,get:function(){return a.StyledAlertTitle}}),Object.defineProperty(t,"AlertMessage",{enumerable:!0,get:function(){return a.StyledAlertMessage}});var r,i=(r=n(837))&&r.__esModule?r:{default:r},a=n(671)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StyledAlertClose=t.StyledAlertIcon=t.StyledAlertMessage=t.StyledAlertTitle=t.StyledAlertContent=t.StyledAlert=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(194)),i=n(176),a=n(568),o=n(164),s=n(350);var c=r.default.div.withConfig({displayName:"StyledAlertIcon",componentId:"sc-8vnym9-0"})(["display:flex;align-items:center;justify-content:center;padding-left:",";html[dir='rtl'] &{padding-left:0;padding-right:",";}"],(function(e){return e.theme.baseline}),(function(e){return e.theme.baseline}));t.StyledAlertIcon=c,c.defaultProps={theme:o.CalciteTheme};var l=r.default.div.withConfig({displayName:"StyledAlert",componentId:"sc-8vnym9-1"})(["display:flex;align-items:stretch;color:",";background-color:",";position:relative;z-index:100;max-width:40em;border-left:3px solid ",";box-shadow:",";border-radius:",";html[dir='rtl'] &{border-left:none;border-right:3px solid ",";}"," svg{fill:",";}",";",";",";",";",";"],(function(e){return e.theme.palette.black}),(function(e){return e.theme.palette.white}),(function(e){return e.theme.palette.blue}),(function(e){return e.theme.boxShadow}),(function(e){return e.theme.borderRadius}),(function(e){return e.theme.palette.blue}),c,(function(e){return e.theme.palette.blue}),(function(e){return(0,a.linkColor)(e.theme.palette.offBlack,e.theme.palette.black)}),(function(e){return e.red&&(0,r.css)(["border-left-color:",";html[dir='rtl'] &{border-left:none;border-right:3px solid ",";}"," svg{fill:",";}"],(function(e){return e.theme.palette.red}),(function(e){return e.theme.palette.red}),c,(function(e){return e.theme.palette.red}))}),(function(e){return e.yellow&&(0,r.css)(["border-left-color:",";html[dir='rtl'] &{border-left:none;border-right:3px solid ",";}"," svg{fill:",";}"],(function(e){return e.theme.palette.yellow}),(function(e){return e.theme.palette.yellow}),c,(function(e){return e.theme.palette.yellow}))}),(function(e){return e.green&&(0,r.css)(["border-left-color:",";html[dir='rtl'] &{border-left:none;border-right:3px solid ",";}"," svg{fill:",";}"],(function(e){return e.theme.palette.green}),(function(e){return e.theme.palette.green}),c,(function(e){return e.theme.palette.green}))}),(function(e){return e.full&&(0,r.css)(["max-width:none;"])}));t.StyledAlert=l,l.defaultProps={theme:o.CalciteTheme};var u=r.default.div.withConfig({displayName:"StyledAlertContent",componentId:"sc-8vnym9-2"})(["display:flex;flex-direction:column;flex:1 0 0px;padding:"," ",";html[dir='rtl'] &{padding-right:",";padding-left:0;}"],(function(e){return(0,i.unitCalc)(e.theme.baseline,1.5,"/")}),(function(e){return e.theme.baseline}),(function(e){return e.theme.baseline}));t.StyledAlertContent=u,u.defaultProps={theme:o.CalciteTheme};var d=(0,r.default)(s.CalciteH6).withConfig({displayName:"StyledAlertTitle",componentId:"sc-8vnym9-3"})(["",";font-weight:600;margin:0;"],(0,i.fontSize)(-1));t.StyledAlertTitle=d,d.defaultProps={theme:o.CalciteTheme};var f=(0,r.default)(s.CalciteP).withConfig({displayName:"StyledAlertMessage",componentId:"sc-8vnym9-4"})(["",";margin:0;"],(0,i.fontSize)(-1));t.StyledAlertMessage=f,f.defaultProps={theme:o.CalciteTheme};var p=(0,r.default)(s.CalciteA).withConfig({displayName:"StyledAlertClose",componentId:"sc-8vnym9-5"})(["display:flex;flex:0 0 auto;align-items:center;justify-content:center;margin-left:-",";padding:",";",";line-height:0;&:hover{color:",";background:",";svg{fill:",";}}svg{fill:",";}"],(function(e){return e.theme.baseline}),(function(e){return e.theme.baseline}),(0,i.fontSize)(-1),(function(e){return e.theme.palette.black}),(function(e){return e.theme.palette.offWhite}),(function(e){return e.theme.palette.black}),(function(e){return e.theme.palette.offBlack}));t.StyledAlertClose=p,p.defaultProps={theme:o.CalciteTheme}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(839),i=r.themes[0].variables,a={palette:{white:r.colors["blk-000"],offWhite:r.colors["blk-005"],lightestGray:r.colors["blk-020"],lighterGray:r.colors["blk-050"],lightGray:r.colors["blk-080"],gray:r.colors["blk-100"],darkGray:r.colors["blk-120"],darkerGray:r.colors["blk-140"],darkestGray:r.colors["blk-160"],offBlack:r.colors["blk-180"],black:r.colors["blk-200"],transparentWhite:"rgba(255, 255, 255, 0.7)",opaqueWhite:"rgba(255, 255, 255, 0.8)",transparentOffWhite:"rgba(0, 0, 0, 0.1)",transparentDarkerGray:"rgba(0, 0, 0, 0.3)",transparentOffBlack:"rgba(0, 0, 0, 0.45)",transparentBlack:"rgba(0, 0, 0, 0.75)",opaqueBlack:"rgba(0, 0, 0, 0.85)",Brand_Blue_100:r.colors["h-bb-020"],Brand_Blue_120:r.colors["v-bb-120"],Brand_Blue_140:r.colors["v-bb-140"],Brand_Blue_150:r.colors["h-bb-040"],Brand_Blue_160:r.colors["v-bb-160"],Brand_Blue_200:r.colors["h-bb-060"],Brand_Blue_250:r.colors["h-bb-080"],brand:i.brand,brandHover:i["brand-hover"],brandPress:i["brand-press"],background:i.background,foreground1:i["foreground-1"],foreground2:i["foreground-2"],foreground3:i["foreground-3"],lightestBlue:r.colors["h-bb-010"],lighterBlue:r.colors["h-bb-030"],lightBlue:r.colors["h-bb-050"],blue:r.colors["h-bb-060"],darkBlue:r.colors["h-bb-080"],darkerBlue:r.colors["h-bb-100"],lightestGreen:r.colors["h-gg-010"],lighterGreen:r.colors["h-gg-020"],lightGreen:r.colors["h-gg-040"],green:r.colors["h-gg-060"],darkGreen:r.colors["h-gg-080"],darkerGreen:r.colors["h-gg-100"],lightestRed:r.colors["h-rr-010"],lighterRed:r.colors["h-rr-020"],lightRed:r.colors["h-rr-040"],red:r.colors["h-rr-060"],darkRed:r.colors["h-rr-080"],darkerRed:r.colors["h-rr-100"],lightestOrange:r.colors["h-oo-010"],lighterOrange:r.colors["h-oo-020"],lightOrange:r.colors["h-oo-040"],orange:r.colors["h-oo-060"],darkOrange:r.colors["h-oo-080"],darkerOrange:r.colors["h-oo-100"],lightestYellow:r.colors["h-yy-010"],lighterYellow:r.colors["h-yy-020"],lightYellow:r.colors["h-yy-040"],yellow:r.colors["h-yy-060"],darkYellow:r.colors["h-yy-080"],darkerYellow:r.colors["h-yy-100"],lightestPurple:r.colors["h-vv-010"],lighterPurple:r.colors["h-vv-020"],lightPurple:r.colors["h-vv-040"],purple:r.colors["h-vv-060"],darkPurple:r.colors["h-vv-080"],darkerPurple:r.colors["h-vv-100"],lightestBrown:r.colors["h-br-010"],lighterBrown:r.colors["h-br-020"],lightBrown:r.colors["h-br-040"],brown:r.colors["h-br-060"],darkBrown:r.colors["h-br-080"],darkerBrown:r.colors["h-br-100"]},type:{avenirTracking:0,avenirFamily:'"Avenir Next W01", "Avenir Next W00", "Avenir Next", "Avenir", "Helvetica Neue", sans-serif',codeTracking:0,codeFamily:'"Consolas", "Andale Mono", "Lucida Console", "Monaco", monospace',iconTracking:0,iconFamily:"\n      font-family: 'calcite-ui';\n      speak: none;\n      font-style: normal;\n      font-weight: normal;\n      font-variant: normal;\n      text-transform: none;\n      display: inline-block;\n      text-decoration: none;\n    }",ratio:1.414,mediumRatio:1.33,smallRatio:1.25,bodySize:"1rem",smallSize:"0.85rem",indent:"1em"},transition:"150ms linear",transitionDuration:"150ms",easingFunc:"linear",boxShadow:"rgba(0, 0, 0, 0.15) 0px 0px 16px 0px",drawerWidth:"280px",borderRadius:0,typeColor:i["text-1"],linkColor:i["text-link"],linkHover:i["brand-press"],small:"480px",medium:"860px",large:"1450px",contentWidth:"1450px",contentMaxWidth:"96vw",prefix:"",tooltipBackgroundColor:r.colors["blk-200"],tooltipBorderRadius:0,tooltipEnterDelay:0,toasterWidth:"450px",vwRatio:"0.95",containerWidth:"1450px",maxWidth:"0.95 * 100vw",columnGutter:"1rem",ie8Support:!1,columnGutterFallback:"20px",containerWidthFallback:"960px",largeClass:"large",largeColumnCount:"24",defaultColumnCount:"24",mediumClass:"tablet",mediumColumnCount:"12",smallClass:"phone",smallColumnCount:"6",horizontalRange:"4",verticalRange:"6",baseline:"1.55rem"};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StyledIconClass=t.StyledButtonGroup=t.StyledButton=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(194)),i=n(176),a=n(766),o=n(164);var s=r.default.svg.withConfig({displayName:"StyledIconClass",componentId:"gqzbmz-0"})([""]);t.StyledIconClass=s;var c=r.default.button.withConfig({displayName:"StyledButton",componentId:"gqzbmz-1"})(["position:relative;display:inline-flex;align-items:center;justify-content:center;padding:"," 0.9rem;width:auto;margin:0;color:",";border:1px solid ",";border-radius:",";background-color:",";box-sizing:border-box;transition:all 0.15s ease-in-out;cursor:pointer;white-space:nowrap;",";letter-spacing:0em;font-family:inherit;text-decoration:none;&:hover{background-color:",";border-color:",";color:",";}.","{fill:currentColor;vertical-align:bottom;",";",";",";}",";",";",";",";",";",";",";",";",";",";",";",";",";",";",";",";",";",";",";",";",";"],(function(e){return(0,i.unitCalc)(e.theme.baseline,5,"/")}),(function(e){return e.theme.palette.white}),(function(e){return e.theme.palette.blue}),(function(e){return e.theme.borderRadius}),(function(e){return e.theme.palette.blue}),(0,i.fontSize)(-1),(function(e){return e.theme.palette.lightBlue}),(function(e){return e.theme.palette.lightBlue}),(function(e){return e.theme.palette.white}),s.styledComponentId,(function(e){return"after"===e.iconPosition&&(0,r.css)(["margin-left:",";margin-right:-0.25rem;html[dir='rtl'] &{margin-left:-0.25rem;margin-right:",";}"],e.transparent?"0.5em":"0.75em",e.transparent?"0.5em":"0.75em")}),(function(e){return"before"===e.iconPosition&&(0,r.css)(["margin-left:-0.25rem;margin-right:",";html[dir='rtl'] &{margin-left:",";margin-right:-0.25rem;}"],e.transparent?"0.5em":"0.75em",e.transparent?"0.5em":"0.75em")}),(function(e){return e.iconButton&&(0,r.css)(["&,html[dir='rtl'] &{margin-left:0;margin-right:0;}"])}),(function(e){return e.isAdornment&&(0,r.css)(["margin:"," 0 0 0;",";",";",";"],(0,i.unitCalc)(e.theme.baseline,6,"/"),(function(e){return e.minimal&&(0,r.css)(["background:none;color:",";border:none;border-bottom:1px solid ",";&:hover{color:",";background:none;text-decoration:underline;}"],e.theme.linkColor,e.theme.palette.lighterGray,e.theme.linkHover)}),(function(e){return"left"===e.adornmentDirection&&(0,r.css)(["border-top-right-radius:0;border-bottom-right-radius:0;"])}),(function(e){return"right"===e.adornmentDirection&&(0,r.css)(["border-top-left-radius:0;border-bottom-left-radius:0;"])}))}),(function(e){return e.disabled&&(0,r.css)(["cursor:not-allowed;pointer-events:none;opacity:0.3;"])}),(function(e){return e.transparent&&(0,r.css)(["background:none;color:",";border:none;&:hover{color:",";background:none;text-decoration:underline;}"],e.theme.linkColor,e.theme.linkHover)}),(function(e){return e.inline&&(0,r.css)(["display:inline;padding:0;outline:none;border:none;font-weight:500;white-space:initial;user-select:text;color:",";background-color:transparent;position:relative;background-image:linear-gradient(currentColor,currentColor),linear-gradient( ",","," );background-position:0% 100%,100% 100%;background-repeat:no-repeat,no-repeat;background-size:0% 1px,100% 1px;transition:all 0.15s ease-in-out,background-size 0.3s ease-in-out;&:hover,&:focus{color:",";background-color:transparent;background-size:100% 1px,100% 1px;.","{fill:",";}}&:active{color:",";background-size:100% 1px,100% 1px;}.","{fill:currentColor;vertical-align:middle;",";",";}"],e.theme.linkColor,(0,a.transparentize)(.8,e.theme.linkColor),(0,a.transparentize)(.8,e.theme.linkColor),e.theme.linkHover,s.styledComponentId,e.theme.linkHover,e.theme.linkColor,s.styledComponentId,(function(e){return"after"===e.iconPosition&&(0,r.css)(["margin-left:0.33em;margin-right:0;html[dir='rtl'] &{margin-left:0;margin-right:0.33em;}"])}),(function(e){return"before"===e.iconPosition&&(0,r.css)(["margin-left:0;margin-right:0.33em;html[dir='rtl'] &{margin-left:0.33em;margin-right:0;}"])}))}),(function(e){return e.clear&&(0,r.css)(["color:",";background:",";border-color:",";&:hover{color:",";background:",";border-color:",";}"],e.theme.palette.blue,e.theme.palette.white,e.theme.palette.blue,e.theme.palette.white,e.theme.palette.darkBlue,e.theme.palette.darkBlue)}),(function(e){return e.clearGray&&(0,r.css)(["background:none;color:",";border-color:",";&:hover{color:",";background:",";border-color:",";}"],e.theme.palette.gray,e.theme.palette.gray,e.theme.palette.white,e.theme.palette.darkGray,e.theme.palette.darkGray)}),(function(e){return e.clearWhite&&(0,r.css)(["background:none;color:",";border:1px solid ",";&:hover{color:",";background:",";border-color:",";}"],e.theme.palette.white,e.theme.palette.white,e.theme.palette.gray,e.theme.palette.white,e.theme.palette.white)}),(function(e){return e.white&&(0,r.css)(["background:",";color:",";border:1px solid ",";&:hover{color:",";background:",";border-color:",";}"],e.theme.palette.white,e.theme.palette.offBlack,e.theme.palette.white,e.theme.palette.offBlack,e.theme.palette.lightestGray,e.theme.palette.lightestGray)}),(function(e){return e.halo&&(0,r.css)(["color:",";background:transparent;border-color:",";box-shadow:inset 0 0 0 0 ",";&:hover{color:",";background:transparent;border-color:",";box-shadow:inset 0 0 0 2px ",";}"],e.theme.palette.blue,e.theme.palette.blue,e.theme.palette.blue,e.theme.palette.blue,e.theme.palette.blue,e.theme.palette.blue)}),(function(e){return e.extraSmall&&(0,r.css)(["",";padding:0.12rem 0.375rem;"],(0,i.fontSize)(-3))}),(function(e){return e.small&&(0,r.css)(["",";padding:0.2325rem 0.675rem;"],(0,i.fontSize)(-2))}),(function(e){return e.large&&(0,r.css)(["",";padding:0.5rem 1rem 0.5rem;"],(0,i.fontSize)(0))}),(function(e){return e.extraLarge&&(0,r.css)(["font-size:17px;line-height:20px;padding:0.85rem 1.2rem 0.85rem;font-weight:300;"])}),(function(e){return e.fullWidth&&(0,r.css)(["width:100%;text-align:center;"])}),(function(e){return e.half&&(0,r.css)(["width:50%;text-align:center;"])}),(function(e){return e.red&&(0,r.css)(["color:",";background:transparent;border-color:",";&:hover{color:",";background:",";border-color:",";}"],e.theme.palette.red,e.theme.palette.red,e.theme.palette.white,e.theme.palette.darkRed,e.theme.palette.darkRed)}),(function(e){return e.green&&(0,r.css)(["color:",";background:",";border-color:",";&:hover{color:",";background:",";border-color:",";}"],e.theme.palette.white,e.theme.palette.green,e.theme.palette.green,e.theme.palette.white,e.theme.palette.darkGreen,e.theme.palette.darkGreen)}),(function(e){return e.iconButton&&(0,r.css)(["background:transparent;color:",";border:none;padding:",";",";&:hover{color:",";background:transparent;",";}"],e.theme.palette.darkGray,(0,i.unitCalc)(e.theme.baseline,5,"/"),(function(e){return e.white&&(0,r.css)(["color:",";"],e.theme.palette.white)}),e.theme.palette.offBlack,(function(e){return e.white&&(0,r.css)(["color:",";"],e.theme.palette.lightestGray)}))}),(function(e){return e.grouped&&(0,r.css)(["margin-left:-1px;border-radius:0;html[dir='rtl'] &{margin-right:-1px;margin-left:initial;}&:first-child{margin-left:0;border-top-left-radius:",";border-bottom-left-radius:",";html[dir='rtl'] &{margin-right:0;margin-left:initial;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:",";border-bottom-right-radius:",";}}&:last-child{border-top-right-radius:",";border-bottom-right-radius:",";html[dir='rtl'] &{border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:",";border-bottom-left-radius:",";}}",";",";"],e.theme.borderRadius,e.theme.borderRadius,e.theme.borderRadius,e.theme.borderRadius,e.theme.borderRadius,e.theme.borderRadius,e.theme.borderRadius,e.theme.borderRadius,(function(e){return e.isToggle&&!e.clear&&(0,r.css)(["cursor:default;&:hover{background-color:",";}"],e.theme.palette.blue)}),(function(e){return!e.isToggle&&!e.clear&&(0,r.css)(["margin-left:1px;html[dir='rtl'] &{margin-right:1px;margin-left:initial;}&:first-of-type{margin-left:0;html[dir='rtl'] &{margin-right:0;}}"])}))}),(function(e){return e.grouped&&e.half&&(0,r.css)(["margin-left:0;html[dir='rtl'] &{margin-left:inherit;margin-right:0;}"])}),(function(e){return e.noBorderRadius&&(0,r.css)(["border-radius:0;"])}));t.StyledButton=c,c.defaultProps={theme:o.CalciteTheme};var l=r.default.nav.withConfig({displayName:"StyledButtonGroup",componentId:"gqzbmz-2"})(["display:inline-flex;justify-content:space-between;"]);t.StyledButtonGroup=l,l.defaultProps={theme:o.CalciteTheme}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonGroupContext=t.default=void 0;var r,i=(r=n(96))&&r.__esModule?r:{default:r},a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(21)),o=n(176),s=n(673);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=(0,a.createContext)({buttonGroupContext:{grouped:void 0,isToggle:void 0}});t.ButtonGroupContext=u,u.displayName="ButtonGroupContext";var d=function(e){var t=e.children,n=e.isToggle,r=l(e,["children","isToggle"]),i=(0,o.useContextState)({grouped:!0,isToggle:n});return a.default.createElement(u.Provider,{value:i},a.default.createElement(s.StyledButtonGroup,c({isToggle:n},r),t))};t.default=d,d.propTypes={children:i.default.node,isToggle:i.default.bool},d.defaultProps={},d.displayName="ButtonGroup"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(96)),i=o(n(21)),a=n(390);function o(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=function(e){var t=e.children,n=e.href,r=c(e,["children","href"]);return i.default.createElement(a.StyledTopNavLink,s({href:n,as:n?"a":"span"},r),t)};l.propTypes={children:r.default.node,href:r.default.string},l.defaultProps={},l.displayName="TopNavLink";var u=l;t.default=u},function(e,t,n){"use strict";var r=Array.prototype.slice,i=n(677),a=Object.keys,o=a?function(e){return a(e)}:n(866),s=Object.keys;o.shim=function(){Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return i(e)?s(r.call(e)):s(e)}):Object.keys=o;return Object.keys||o},e.exports=o},function(e,t,n){"use strict";var r=Object.prototype.toString;e.exports=function(e){var t=r.call(e),n="[object Arguments]"===t;return n||(n="[object Array]"!==t&&null!==e&&"object"===typeof e&&"number"===typeof e.length&&e.length>=0&&"[object Function]"===r.call(e.callee)),n}},function(e,t,n){"use strict";var r=n(679),i=n(570),a=i(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"===typeof n&&a(e,".prototype.")>-1?i(n):n}},function(e,t,n){"use strict";var r,i=SyntaxError,a=Function,o=TypeError,s=function(e){try{return a('"use strict"; return ('+e+").constructor;")()}catch(t){}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch(E){c=null}var l=function(){throw new o},u=c?function(){try{return l}catch(e){try{return c(arguments,"callee").get}catch(t){return l}}}():l,d=n(868)(),f=Object.getPrototypeOf||function(e){return e.__proto__},p={},h="undefined"===typeof Uint8Array?r:f(Uint8Array),b={"%AggregateError%":"undefined"===typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":d?f([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":"undefined"===typeof Atomics?r:Atomics,"%BigInt%":"undefined"===typeof BigInt?r:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":a,"%GeneratorFunction%":p,"%Int8Array%":"undefined"===typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":d?f(f([][Symbol.iterator]())):r,"%JSON%":"object"===typeof JSON?JSON:r,"%Map%":"undefined"===typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&d?f((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?r:Promise,"%Proxy%":"undefined"===typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&d?f((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":d?f(""[Symbol.iterator]()):r,"%Symbol%":d?Symbol:r,"%SyntaxError%":i,"%ThrowTypeError%":u,"%TypedArray%":h,"%TypeError%":o,"%Uint8Array%":"undefined"===typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?r:WeakSet},v=function e(t){var n;if("%AsyncFunction%"===t)n=s("async function () {}");else if("%GeneratorFunction%"===t)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=s("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&(n=f(i.prototype))}return b[t]=n,n},y={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},m=n(569),g=n(870),O=m.call(Function.call,Array.prototype.concat),j=m.call(Function.apply,Array.prototype.splice),w=m.call(Function.call,String.prototype.replace),_=m.call(Function.call,String.prototype.slice),k=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,x=/\\(\\)?/g,S=function(e){var t=_(e,0,1),n=_(e,-1);if("%"===t&&"%"!==n)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new i("invalid intrinsic syntax, expected opening `%`");var r=[];return w(e,k,(function(e,t,n,i){r[r.length]=n?w(i,x,"$1"):t||e})),r},T=function(e,t){var n,r=e;if(g(y,r)&&(r="%"+(n=y[r])[0]+"%"),g(b,r)){var a=b[r];if(a===p&&(a=v(r)),"undefined"===typeof a&&!t)throw new o("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:a}}throw new i("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!==typeof e||0===e.length)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof t)throw new o('"allowMissing" argument must be a boolean');var n=S(e),r=n.length>0?n[0]:"",a=T("%"+r+"%",t),s=a.name,l=a.value,u=!1,d=a.alias;d&&(r=d[0],j(n,O([0,1],d)));for(var f=1,p=!0;f<n.length;f+=1){var h=n[f],v=_(h,0,1),y=_(h,-1);if(('"'===v||"'"===v||"`"===v||'"'===y||"'"===y||"`"===y)&&v!==y)throw new i("property names with quotes must have matching quotes");if("constructor"!==h&&p||(u=!0),g(b,s="%"+(r+="."+h)+"%"))l=b[s];else if(null!=l){if(!(h in l)){if(!t)throw new o("base intrinsic for "+e+" exists, but the property is not available.");return}if(c&&f+1>=n.length){var m=c(l,h);l=(p=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:l[h]}else p=g(l,h),l=l[h];p&&!u&&(b[s]=l)}}return l}},function(e,t,n){"use strict";e.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"===typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"===typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},function(e,t,n){"use strict";var r=function(e){return e!==e};e.exports=function(e,t){return 0===e&&0===t?1/e===1/t:e===t||!(!r(e)||!r(t))}},function(e,t,n){"use strict";var r=n(681);e.exports=function(){return"function"===typeof Object.is?Object.is:r}},function(e,t,n){"use strict";var r=Object,i=TypeError;e.exports=function(){if(null!=this&&this!==r(this))throw new i("RegExp.prototype.flags getter called on non-object");var e="";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.sticky&&(e+="y"),e}},function(e,t,n){"use strict";var r=n(683),i=n(439).supportsDescriptors,a=Object.getOwnPropertyDescriptor,o=TypeError;e.exports=function(){if(!i)throw new o("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var e=a(RegExp.prototype,"flags");if(e&&"function"===typeof e.get&&"boolean"===typeof/a/.dotAll)return e.get}return r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StyledPopover=t.StyledTargetWrapper=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(194)),i=n(164),a=n(880);var o=r.default.div.withConfig({displayName:"StyledTargetWrapper",componentId:"sc-1pr6w5t-0"})(["display:inline-block;"]);t.StyledTargetWrapper=o,o.defaultProps={theme:i.CalciteTheme};var s=r.default.div.withConfig({displayName:"StyledPopover",componentId:"sc-1pr6w5t-1"})(["box-shadow:0 0 16px 0 rgba(0,0,0,0.05);opacity:0;transition:opacity ","ms cubic-bezier(0.4,0,0.2,1);z-index:2000;pointer-events:none;&[data-x-out-of-boundaries]{display:none;}",";",";","{box-shadow:none;}iframe{border:none;}"],(function(e){return e.transitionDuration}),(function(e){return"entering"===e.transitionState&&(0,r.css)(["opacity:0;pointer-events:auto;"])}),(function(e){return"entered"===e.transitionState&&(0,r.css)(["opacity:1;pointer-events:auto;"])}),a.StyledMenu);t.StyledPopover=s,s.defaultProps={theme:i.CalciteTheme}},function(e,t,n){"use strict";n.r(t);var r=n(687);n.d(t,"ApplicationSession",(function(){return r.a}));var i=n(767);n.d(t,"UserSession",(function(){return i.a}));var a=n(330);n.d(t,"fetchToken",(function(){return a.a}));var o=n(410);n.d(t,"generateToken",(function(){return o.a}));var s=n(689);for(var c in s)["default","ApplicationSession","UserSession","fetchToken","generateToken"].indexOf(c)<0&&function(e){n.d(t,e,(function(){return s[e]}))}(c);var l=n(690);n.d(t,"exchangeToken",(function(){return l.a})),n.d(t,"platformSelf",(function(){return l.b}));var u=n(492);n.d(t,"validateAppAccess",(function(){return u.a}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(23),i=n(330),a=function(){function e(e){this.clientId=e.clientId,this.clientSecret=e.clientSecret,this.token=e.token,this.expires=e.expires,this.portal=e.portal||"https://www.arcgis.com/sharing/rest",this.duration=e.duration||7200}return e.prototype.getToken=function(e,t){return this.token&&this.expires&&this.expires.getTime()>Date.now()?Promise.resolve(this.token):(this._pendingTokenRequest||(this._pendingTokenRequest=this.refreshToken(t)),this._pendingTokenRequest)},e.prototype.refreshToken=function(e){var t=this,n=Object(r.a)({params:{client_id:this.clientId,client_secret:this.clientSecret,grant_type:"client_credentials",expiration:this.duration}},e);return Object(i.a)(this.portal+"/oauth2/token/",n).then((function(e){return t._pendingTokenRequest=null,t.token=e.token,t.expires=e.expires,e.token}))},e.prototype.refreshSession=function(){var e=this;return this.refreshToken().then((function(){return e}))},e}()},function(e,t,n){"use strict";function r(e){var t=e.split("="),n=t[0],r=t[1];return{key:decodeURIComponent(n),value:decodeURIComponent(r)}}function i(e){return e.replace(/^#/,"").split("&").reduce((function(e,t){var n=r(t),i=n.key,a=n.value;return e[i]=a,e}),{})}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}))},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n(67);function i(e,t,n){void 0===n&&(n="https://www.arcgis.com/sharing/rest");var i=n+"/oauth2/exchangeToken",a={method:"POST",params:{f:"json",client_id:t,token:e}};return Object(r.d)(i,a).then((function(e){return e.token}))}function a(e,t,n){void 0===n&&(n="https://www.arcgis.com/sharing/rest");var i=n+"/oauth2/platformSelf?f=json",a={method:"POST",headers:{"X-Esri-Auth-Client-Id":e,"X-Esri-Auth-Redirect-Uri":t},params:{f:"json"}};return Object(r.d)(i,a)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return d}));var r=n(23),i=n(292),a=n(67),o=n(52),s=n(101),c=n(493);function l(e){var t=Object(r.a)({item:{id:e.id,data:e.data}},e);return delete t.id,delete t.data,Object(c.b)(t)}function u(e){return Object(s.a)(e).then((function(t){var n=Object(o.a)(e)+"/content/users/"+t+"/addRelationship",s=Object(i.a)(e,["originItemId","destinationItemId","relationshipType"],{params:Object(r.a)({},e.params)});return Object(a.d)(n,s)}))}function d(e){return Object(s.a)(e).then((function(t){var n=Object(o.a)(e)+"/content/users/"+t+"/items/"+e.id+"/addResources";return e.params=Object(r.a)({file:e.resource,fileName:e.name,resourcesPrefix:e.prefix,text:e.content,access:e.private?"private":"inherit"},e.params),Object(a.d)(n,e)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(67),i=n(52),a=n(101),o=function(e){var t=e.folderId,n=e.start,o=void 0===n?1:n,s=e.num,c=void 0===s?10:s,l=e.authentication,u=t?"/"+t:"";return Object(a.a)(e).then((function(t){return Object(i.a)(e)+"/content/users/"+t+u})).then((function(e){return Object(r.d)(e,{httpMethod:"GET",authentication:l,params:{start:o,num:c}})}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return u}));var r=n(23),i=n(67),a=n(292),o=n(52),s=n(101);function c(e){return Object(s.a)(e).then((function(t){var n=Object(o.a)(e)+"/content/users/"+t+"/createFolder";return e.params=Object(r.a)({title:e.title},e.params),Object(i.d)(n,e)}))}function l(e){return e.multipart&&!e.filename?Promise.reject(new Error("The filename is required for a multipart request.")):Object(s.a)(e).then((function(t){var n=Object(o.a)(e)+"/content/users/"+t,c=n+"/addItem";e.folderId&&(c=n+"/"+e.folderId+"/addItem"),e.params=Object(r.a)(Object(r.a)({},e.params),Object(s.b)(e.item));var l=Object(a.a)(e,["owner","folderId","file","dataUrl","text","async","multipart","filename","overwrite"],{params:Object(r.a)({},e.params)});return Object(i.d)(c,l)}))}function u(e){return l(Object(r.a)({folderId:null},e))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(67),i=n(101),a=n(52),o=function(e){var t=e.authentication,n=e.id,o=e.title,s=e.exportFormat,c=e.exportParameters;return Object(i.a)(e).then((function(t){return Object(a.a)(e)+"/content/users/"+t+"/export"})).then((function(e){return Object(r.d)(e,{httpMethod:"POST",authentication:t,params:{itemId:n,title:o,exportFormat:s,exportParameters:c}})}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"k",(function(){return f})),n.d(t,"i",(function(){return p})),n.d(t,"h",(function(){return h})),n.d(t,"d",(function(){return b})),n.d(t,"j",(function(){return v})),n.d(t,"g",(function(){return y})),n.d(t,"e",(function(){return m})),n.d(t,"f",(function(){return g}));var r=n(23),i=n(67),a=n(292),o=n(52),s=n(494),c=n(101);function l(e,t){var n=u(e,t),a=Object(r.a)({httpMethod:"GET"},t);return Object(i.d)(n,a)}var u=function(e,t){return("string"===typeof t?t:Object(o.a)(t))+"/content/items/"+e};function d(e,t){var n=u(e,t)+"/data",a=Object(r.a)({httpMethod:"GET",params:{}},t);return a.file&&(a.params.f=null),Object(i.d)(n,a).catch((function(e){if(!RegExp(/The string did not match the expected pattern|(Unexpected end of (JSON input|data at line 1 column 1))/i).test(e.message))throw e}))}function f(e){var t=u(e.id,e)+"/relatedItems",n=Object(r.a)({httpMethod:"GET",params:{direction:e.direction}},e);return"string"===typeof e.relationshipType?n.params.relationshipType=e.relationshipType:n.params.relationshipTypes=e.relationshipType,delete n.direction,delete n.relationshipType,Object(i.d)(t,n)}function p(e,t){var n=u(e,t)+"/resources",a=Object(r.a)({},t);return a.params=Object(r.a)({num:1e3},a.params),Object(i.d)(n,a)}function h(e,t){var n=t.readAs||"blob";return O(e,"/resources/"+t.fileName,n,t)}function b(e,t){var n=u(e,t)+"/groups";return Object(i.d)(n,t)}function v(e){return Object(c.a)(e).then((function(t){var n=Object(o.a)(e)+"/content/users/"+t+"/items/"+e.id+"/status",s=Object(a.a)(e,["jobId","jobType"],{params:Object(r.a)({},e.params)});return Object(i.d)(n,s)}))}function y(e){return Object(c.a)(e).then((function(t){var n=Object(o.a)(e)+"/content/users/"+t+"/items/"+e.id+"/parts";return Object(i.d)(n,e)}))}function m(e,t){var n=t||{},i=n.fileName,a=void 0===i?"iteminfo.xml":i,o=n.readAs;return O(e,"/info/"+a,void 0===o?"text":o,Object(r.a)({httpMethod:"GET"},t))}function g(e,t){return m(e,Object(r.a)(Object(r.a)({},t),{fileName:"metadata/metadata.xml"}))}function O(e,t,n,a){var o=""+u(e,a)+t,c=Object(r.a)({params:{}},a),l=c.rawResponse;return c.rawResponse=!0,c.params.f=null,Object(i.d)(o,c).then((function(e){return l?e:"json"!==n?e[n]():e.text().then((function(e){return JSON.parse(Object(s.a)(e))}))}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var r=n(67),i=n(52),a=n(101);function o(e){return Object(a.a)(e).then((function(t){var n=Object(i.a)(e)+"/content/users/"+t+"/items/"+e.id+"/protect";return Object(r.d)(n,e)}))}function s(e){return Object(a.a)(e).then((function(t){var n=Object(i.a)(e)+"/content/users/"+t+"/items/"+e.id+"/unprotect";return Object(r.d)(n,e)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(67),i=n(52),a=n(223);function o(e){return Object(a.d)(e).then((function(t){if(!t)throw Error("Item "+e.id+" can not be reassigned because current user is not an organization administrator.");var n=Object(i.a)(e)+"/content/users/"+e.currentOwner+"/items/"+e.id+"/reassign",a={params:{targetUsername:e.targetUsername,targetFolderName:e.targetFolderName},authentication:e.authentication};return Object(r.d)(n,a)}))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return d}));var r=n(23),i=n(67),a=n(292),o=n(52),s=n(101);function c(e){return Object(s.a)(e).then((function(t){var n=Object(o.a)(e)+"/content/users/"+t+"/items/"+e.id+"/delete";return Object(i.d)(n,e)}))}function l(e){return Object(s.a)(e).then((function(t){var n=Object(o.a)(e)+"/content/users/"+t+"/deleteRelationship",s=Object(a.a)(e,["originItemId","destinationItemId","relationshipType"],{params:Object(r.a)({},e.params)});return Object(i.d)(n,s)}))}function u(e){return Object(s.a)(e).then((function(t){var n=Object(o.a)(e)+"/content/users/"+t+"/items/"+e.id+"/removeResources";return e.params=Object(r.a)(Object(r.a)({},e.params),{resource:e.resource}),Object(i.d)(n,e)}))}function d(e){return Object(s.a)(e).then((function(t){var n=Object(o.a)(e)+"/content/users/"+encodeURIComponent(t)+"/"+e.folderId+"/delete";return Object(i.d)(n,e)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return u}));var r=n(23),i=n(292),a=n(67),o=n(52),s=n(101);function c(e){var t=e.partNum;return!Number.isInteger(t)||t<1||t>1e4?Promise.reject(new Error("The part number must be an integer between 1 to 10000, inclusive.")):Object(s.a)(e).then((function(n){var s=Object(o.a)(e)+"/content/users/"+n+"/items/"+e.id+"/addPart?partNum="+t,c=Object(i.a)(e,["file"],{params:Object(r.a)({},e.params)});return Object(a.d)(s,c)}))}function l(e){return Object(s.a)(e).then((function(t){var n=Object(o.a)(e)+"/content/users/"+t+"/items/"+e.id+"/commit",c=Object(i.a)(e,[],{params:Object(r.a)(Object(r.a)({},e.params),Object(s.b)(e.item))});return Object(a.d)(n,c)}))}function u(e){return Object(s.a)(e).then((function(t){var n=Object(o.a)(e)+"/content/users/"+t+"/items/"+e.id+"/cancel";return Object(a.d)(n,e)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(23),i=n(67),a=n(52),o=n(331);function s(e){var t=e.id,n=Object(a.a)(e)+"/community/groups/"+t+"/invite",s=function(e){return Object(o.a)(e.users,25).map((function(t){return function(e,t){var n=Object.assign({},t);return n.params=Object(r.a)(Object(r.a)({},n.params),{users:e,role:n.role,expiration:n.expiration}),n}(t,e)}))}(e).map((function(e){return function(e,t){return Object(i.d)(e,t).catch((function(e){return{errors:[e]}}))}(n,e)}));return Promise.all(s).then(c)}function c(e){var t=e.every((function(e){return e.success})),n=e.reduce((function(e,t){return e.concat(t.errors||[])}),[]),r={success:t};return n.length>0&&(r.errors=n),r}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(23),i=n(67),a=n(52);function o(e){var t=Object(a.a)(e)+"/community/createGroup";return e.params=Object(r.a)(Object(r.a)({},e.params),e.group),Object(i.d)(t,e)}},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(23),i=n(67),a=n(52);function o(e){var t=Object(a.a)(e)+"/community/groups/"+e.id+"/createNotification",n=Object(r.a)({params:Object(r.a)({subject:e.subject,message:e.message,users:e.users,notificationChannelType:e.notificationChannelType||"email",clientId:e.clientId,silentNotification:e.silentNotification,notifyAll:!e.users||0===e.users.length},e.params)},e);return Object(i.d)(t,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var r=n(67),i=n(52);function a(e){var t=Object(i.a)(e)+"/community/groups/"+e.id+"/protect";return Object(r.d)(t,e)}function o(e){var t=Object(i.a)(e)+"/community/groups/"+e.id+"/unprotect";return Object(r.d)(t,e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(23),i=n(67),a=n(52);function o(e){var t=Object(a.a)(e)+"/community/groups/"+e.id+"/delete",n=Object(r.a)({},e);return Object(i.d)(t,n)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var r=n(362);function i(e){return Object(r.a)(e,"group")}function a(e){return Object(r.a)(e,"groupContent")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(23),i=n(67),a=n(52);function o(e){var t=Object(a.a)(e)+"/community/groups/"+e.group.id+"/update";return e.params=Object(r.a)(Object(r.a)({},e.params),e.group),Object(i.d)(t,e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var r=n(67),i=n(52);function a(e){var t=Object(i.a)(e)+"/community/groups/"+e.id+"/join";return Object(r.d)(t,e)}function o(e){var t=Object(i.a)(e)+"/community/groups/"+e.id+"/leave";return Object(r.d)(t,e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(23),i=n(67),a=n(52),o=n(331);function s(e){var t=Object(a.a)(e)+"/portals/self/createNotification",n=function(e){return Object(o.a)(e.users,e.batchSize||25).map((function(t){return function(e,t){var n=Object.assign({},t);return n.params=Object(r.a)(Object(r.a)({},n.params),{users:e,subject:t.subject,message:t.message,notificationChannelType:n.notificationChannelType}),n}(t,e)}))}(e).map((function(e){return function(e,t){return Object(i.d)(e,t).catch((function(e){return{errors:[e]}}))}(t,e)}));return Promise.all(n).then(c)}function c(e){var t=e.every((function(e){return e.success})),n=e.reduce((function(e,t){return e.concat(t.errors||[])}),[]),r={success:t};return n.length>0&&(r.errors=n),r}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(67),i=n(52);function a(e){var t=e.username||e.authentication.username,n=Object(i.a)(e)+"/community/users/"+encodeURIComponent(t)+"/tags";return Object(r.d)(n,e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(52);function i(e){return Object(r.a)(e)+"/community/users/"+encodeURIComponent(e.username)}},function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n(23),i=n(67),a=n(52);function o(e){var t={httpMethod:"GET"},n=encodeURIComponent(e.authentication.username),o=Object(a.a)(e)+"/community/users/"+n+"/invitations";return t=Object(r.a)(Object(r.a)({},e),t),Object(i.d)(o,t)}function s(e){var t=encodeURIComponent(e.authentication.username),n=Object(a.a)(e)+"/community/users/"+t+"/invitations/"+e.invitationId,o={httpMethod:"GET"};return o=Object(r.a)(Object(r.a)({},e),o),Object(i.d)(n,o)}function c(e){var t=encodeURIComponent(e.authentication.username),n=Object(a.a)(e)+"/community/users/"+t+"/invitations/"+e.invitationId+"/accept",o=Object(r.a)({},e);return Object(i.d)(n,o)}function l(e){var t=encodeURIComponent(e.authentication.username),n=Object(a.a)(e)+"/community/users/"+t+"/invitations/"+e.invitationId+"/decline",o=Object(r.a)({},e);return Object(i.d)(n,o)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var r=n(23),i=n(67),a=n(52);function o(e){var t={httpMethod:"GET"},n=encodeURIComponent(e.authentication.username),o=Object(a.a)(e)+"/community/users/"+n+"/notifications";return t=Object(r.a)(Object(r.a)({},e),t),Object(i.d)(o,t)}function s(e){var t=encodeURIComponent(e.authentication.username),n=Object(a.a)(e)+"/community/users/"+t+"/notifications/"+e.id+"/delete";return Object(i.d)(n,e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(362);function i(e){return Object(r.a)(e,"user")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(23),i=n(67),a=n(52);function o(e){var t=e.user.username||e.authentication.username,n=Object(a.a)(e)+"/community/users/"+encodeURIComponent(t)+"/update";return e.params=Object(r.a)(Object(r.a)({},e.user),e.params),delete e.user,Object(i.d)(n,e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(23),i=n(67),a=n(223);function o(e){var t=Object(a.a)(e);return Object(a.c)(e)?s(t,e):Object(a.d)(e).then((function(n){if(n)return s(t,e);throw Error("This item can not be shared by "+e.authentication.username+". They are neither the item owner nor an organization admin.")}))}function s(e,t){return t.params=Object(r.a)({org:!1,everyone:!1},t.params),"private"===t.access&&(t.params.groups=" "),"org"===t.access&&(t.params.org=!0),"public"===t.access&&(t.params.account=!0,t.params.everyone=!0),Object(i.d)(e,t)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p}));var r=n(67),i=n(52),a=n(223),o=n(354),s=n(497),c=n(498),l=n(445),u=n(400);function d(e){return Object(u.a)(e).then((function(t){if(t)return{itemId:e.id,shortcut:!0,notSharedWith:[]};var n=e.authentication.username,r=e.owner,i=e.confirmItemControl,s=r||n;return s!==n?Promise.all([Object(o.a)({username:n,authentication:e.authentication}),Object(o.a)({username:s,authentication:e.authentication}),Object(a.b)(e)]).then((function(t){var n=t[0],r=t[1],a=t[2];return function(e,t,n,r,i,a){var o=[];if(a.groupId!==e.favGroupId)if(t){if(!r)throw Error("This item can not be shared to shared editing group "+a.groupId+" by "+e.username+" as they not the item owner or org admin.");o.push(p(e,e,!1,"Error adding "+e.username+" as member to edit group "+a.groupId+". Consequently item "+a.id+" was not shared to the group.",a),p(e,i,!0,"none"===n?"Error adding user "+i.username+" to edit group "+a.groupId+". Consequently item "+a.id+" was not shared to the group.":"Error promoting user "+i.username+" to admin in edit group "+a.groupId+". Consequently item "+a.id+" was not shared to the group.",a))}else if(r)o.push(p(e,e,!1,"Error adding "+e.username+" as member to view group "+a.groupId+". Consequently item "+a.id+" was not shared to the group.",a));else if("none"===n)throw new Error("This item can not be shared by "+e.username+" as they are not a member of the specified group "+a.groupId+".");return o}(n,!!i,a,"org_admin"===n.role&&!n.roleId,r,e)})).then((function(t){var n=t[0],r=(void 0===n?{promise:Promise.resolve({notAdded:[]}),revert:function(e){return Promise.resolve(e)}}:n).revert;return Promise.all(t.map((function(e){return e.promise}))).then((function(){return f(e)})).then((function(e){return r(e)}))})):f(e)})).then((function(t){if(t.notSharedWith.length)throw Error("Item "+e.id+" could not be shared to group "+e.groupId+".");return t}))}function f(e){var t=e.authentication.username,n=e.owner||t,a=Object(i.a)(e)+"/content/items/"+e.id+"/share";return n===t&&(a=Object(i.a)(e)+"/content/users/"+n+"/items/"+e.id+"/share"),e.params={groups:e.groupId,confirmItemControl:e.confirmItemControl},Object(r.d)(a,e)}function p(e,t,n,r,i){var a,o,u,d=t.groups||[],f=d.find((function(e){return e.id===i.groupId}));if(e.orgId!==t.orgId)throw Error("User "+t.username+" is not a member of the same org as "+e.username+". Consequently they can not be added added to group "+i.groupId+" nor can item "+i.id+" be shared to the group.");if(!f&&d.length>511)throw Error("User "+t.username+" already has 512 groups, and can not be added to group "+i.groupId+". Consequently item "+i.id+" can not be shared to the group.");if(f)n&&"member"===f.userMembership.memberType?(o=Object(l.a)({id:i.groupId,users:[t.username],newMemberType:"admin",authentication:i.authentication}).then((function(e){var t=e.results.reduce((function(e,t){return t.success||e.push(t.username),e}),[]);return Promise.resolve({notAdded:t})})).catch((function(){return{notAdded:[t.username]}})),u=function(e){return Object(l.a)({id:i.groupId,users:[t.username],newMemberType:"member",authentication:i.authentication}).then((function(){return e})).catch((function(){return e}))}):(o=Promise.resolve({notAdded:[]}),u=function(e){return Promise.resolve(e)});else{var p=n?"admins":"users";o=Object(s.a)((a={id:i.groupId},a[p]=[t.username],a.authentication=i.authentication,a)).then((function(e){if(e.errors&&e.errors.length)throw e.errors[0];return e})).catch((function(){return{notAdded:[t.username]}})),u=function(e){return Object(c.a)({id:i.groupId,users:[t.username],authentication:i.authentication}).then((function(){return e}))}}return{promise:o.then((function(e){if(e.notAdded.length)throw new Error(r);return e})),revert:u}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(67),i=n(52),a=n(223),o=n(400),s=n(354);function c(e){return Object(o.a)(e).then((function(t){if(!t)return Promise.resolve({itemId:e.id,shortcut:!0,notUnsharedFrom:[]});var n=e.authentication.username,o=e.owner;return Promise.all([Object(a.b)(e),Object(s.a)({username:n,authentication:e.authentication})]).then((function(t){var a=t[0],s=t[1],c=(o||n)===n,l="org_admin"===s.role&&!s.roleId;if(!c&&!l&&["admin","owner"].indexOf(a)<0)throw Error("This item can not be unshared from group "+e.groupId+" by "+n+" as they not the item owner, an org admin, group admin or group owner.");return function(e){var t=e.authentication.username,n=e.owner||t,a=Object(i.a)(e)+"/content/items/"+e.id+"/unshare";n===t&&(a=Object(i.a)(e)+"/content/users/"+n+"/items/"+e.id+"/unshare");return e.params={groups:e.groupId},Object(r.d)(a,e)}(e)})).then((function(t){if(t.notUnsharedFrom.length)throw Error("Item "+e.id+" could not be unshared to group "+e.groupId);return t}))}))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var r=n(23),i=n(67),a=n(52);function o(e){return s(null,e)}function s(e,t){var n=e||"self",o=Object(a.a)(t)+"/portals/"+n,s=Object(r.a)({httpMethod:"GET"},t);return Object(i.d)(o,s)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(23),i=n(67),a=n(52);function o(e,t){var n=e||"self",o=Object(a.a)(t)+"/portals/"+n+"/settings",s=Object(r.a)({httpMethod:"GET"},t);return Object(i.d)(o,s)}},function(e,t){},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.ArcGISRequestError="ArcGISRequestError",e.ArcGISAuthError="ArcGISAuthError"}(r||(r={}))},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshAccountStorage=t.logoutAccountStorage=t.beginStatusStorage=t.completeStatusStorage=t.switchActiveStorage=t.removeAccountStorage=t.addAccountStorage=t.getAccountManagerStorage=void 0;var r=n(686);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.getAccountManagerStorage=function(e){var t=l(e)||{},n=t.accounts,r=t.active,i=t.status,a=t.order;return{accounts:u(n),active:r,status:i,order:a}};t.addAccountStorage=function(e,t){var n=l(e),r=n||{},i=r.accounts,u=r.active,d=r.status||!u?t.key:u,f=n.order?n.order.find((function(e){return e===t.key}))?s(n.order):[t.key].concat(s(n.order)):[t.key];c({state:a({},n,{accounts:a({},i,o({},t.key,t)),active:d,order:f}),manager:e})};t.removeAccountStorage=function(e,t){var n=t.key,r=l(e),i=r.order.filter((function(e){return e!==n}));delete r.accounts[n];var o=r.active===n?i.length>0?i[0]:void 0:r.active;c({state:a({},r,{active:o,order:i}),manager:e})};t.switchActiveStorage=function(e,t){var n=t.key,r=l(e),i=r.order?r.order:[],o=[n].concat(s(i.filter((function(e){return e!==n}))));c({state:a({},r,{active:n,order:o}),manager:e})};t.completeStatusStorage=function(e){var t=l(e),n=(t||{}).status;c({state:a({},t,{status:a({},n,{loading:!1})}),manager:e})};t.beginStatusStorage=function(e,t,n,r){var i=t.clientId,o=t.redirectUri,s=t.portalUrl,u=t.popup,d=l(e);c({state:a({},d,{status:{loading:!0,authProps:{clientId:i,redirectUri:o,portalUrl:s,popup:u},originRoute:n,setActive:r}}),manager:e})};t.logoutAccountStorage=function(e,t){var n=t.key,r=l(e),i=(r||{}).accounts,s=a({},i[n],{token:null,session:null});c({state:a({},r,{accounts:a({},i,o({},n,s))}),manager:e})};t.refreshAccountStorage=function(e,t){var n=t.key,r=t.session,i=l(e),s=(i||{}).accounts;c({state:a({},i,{accounts:a({},s,o({},n,a({},s[n],{session:r})))}),manager:e})};var c=function(e){var t=e.state,n=e.manager;window.localStorage.setItem(n,JSON.stringify(t))},l=function(e){var t=JSON.parse(window.localStorage.getItem(e))||{};return{accounts:t.accounts,active:t.active,status:t.status,order:t.order}},u=function(e){var t={};if(e)for(var n=Object.entries(e),o=0;o<n.length;o++){var s=i(n[o],1)[0],c=e[s].session?r.UserSession.deserialize(e[s].session):void 0,l=e[s].portal?JSON.parse(e[s].portal):void 0;t[s]=a({},e[s],{portal:l,session:c})}return t}},function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(14),i=n(2),a=n(3),o=n(24),s=function(){function e(){Object(i.a)(this,e),this._tasks=new Array}return Object(a.a)(e,[{key:"length",get:function(){return this._tasks.length}},{key:"push",value:function(e,t){var n=this;return new Promise((function(r,i){return n._tasks.push(new c(r,i,e,t))}))}},{key:"unshift",value:function(e,t){var n=this;return new Promise((function(r,i){return n._tasks.unshift(new c(r,i,e,t))}))}},{key:"process",value:function(){if(0===this._tasks.length)return!1;var e=this._tasks.shift();try{Object(o.u)(e.signal);var t=e.callback();t&&"object"==typeof t&&"then"in t&&"function"==typeof t.then?t.then(e.resolve,e.reject):e.resolve(t)}catch(n){e.reject(n)}return!0}},{key:"cancelAll",value:function(){var e,t=Object(o.e)(),n=Object(r.a)(this._tasks);try{for(n.s();!(e=n.n()).done;){e.value.reject(t)}}catch(i){n.e(i)}finally{n.f()}this._tasks.length=0}}]),e}(),c=function e(t,n,r,a){Object(i.a)(this,e),this.resolve=t,this.reject=n,this.callback=r,this.signal=a};t.a=s},function(e,t,n){"use strict";var r=n(2),i=n(5),a=n(6),o=n(0),s=(n(16),n(13),n(17),n(1)),c=n(8),l=(n(12),n(19),n(20),function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).SCHEDULER_LOG_SLOW_TASKS=!1,e.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1,e}return n}(n(36).a));Object(o.a)([Object(s.b)()],l.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),Object(o.a)([Object(s.b)()],l.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);var u=new(l=Object(o.a)([Object(c.a)("esri.views.support.DebugFlags")],l));t.a=u},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return o}));var r=n(10),i=(n(16),n(45));function a(e,t){var n=e||{},r=n.format,a=n.quality,o=n.rotation,s=n.disableDecorations,c=h(e,t.padding),l=function(e,t){var n={x:0,y:0,width:t.width,height:t.height};if(e&&e.area){null!=e.area.x&&(n.x=Math.floor(e.area.x)),null!=e.area.y&&(n.y=Math.floor(e.area.y));var r=null!=e.area.width?Math.floor(e.area.width):null,i=null!=e.area.height?Math.floor(e.area.height):null;if(n.width=t.width-n.x,n.height=t.height-n.y,null!=r&&null!=i)n.width=Math.min(n.width,r),n.height=Math.min(n.height,i);else if(null==r&&null!=i){var a=Math.min(n.width,r);n.height=a/n.width*n.height,n.width=a}else if(null!=r&&null==i){var o=Math.min(n.height,i);n.width=o/n.height*n.width,n.height=o}}return function(e,t){var n=Math.floor(Math.max(e.x,0)),r=Math.floor(Math.max(e.y,0)),i={x:n,y:r,width:Math.floor(Math.min(e.width,t.width-n)),height:Math.floor(Math.min(e.height,t.height-r))},a=i.width/i.height,o=e.width/e.height;if(o===a)return i;if(o>a){var s=Math.floor(i.width/o),c=i.height-s;return{x:i.x,y:Math.floor(i.y+c/2),width:i.width,height:s}}var l=Math.floor(i.height*o),u=i.width-l;return{x:Math.floor(i.x+u/2),y:i.y,width:l,height:i.height}}(function(e,t){if(!t||null==t.width||null==t.height)return e;var n=t.width/t.height,r=e.width/e.height;if(r===n)return e;if(r<n){var i=Math.floor(e.height*n);return e.x-=(i-e.width)/2,e.width=i,e}var a=Math.floor(e.width/n);return e.y-=(a-e.height)/2,e.height=a,e}(n,e),t)}(e,{width:t.width-c.left-c.right,height:t.height-c.top-c.bottom}),u=function(e,t){if(!e)return t;var n=e.width,r=e.height;if(null!=n&&null!=r)return{width:Math.floor(n),height:Math.floor(r)};if(null==n&&null==r)return t;var i=t.width/t.height;return null==r?{width:Math.floor(n),height:Math.floor(n/i)}:{width:Math.floor(r*i),height:Math.floor(r)}}(e,l),d=u.width,f=u.height,p=function(e){switch(e){case"png":case"jpg":case"jpeg":return e;case null:case void 0:default:return v}}(r),b=y[p];return{format:p,quality:Object(i.d)(null!=a?a:b,0,100),area:l,width:d,height:f,rotation:o,disableDecorations:!!s,ignoreBackground:!(!e||!e.ignoreBackground),ignorePadding:!(!e||!e.ignorePadding)}}function o(e,t){var n=a(e,t),r=n.area,i=n.width/r.width,o=h(n,t.padding),s=o.left+o.right,c=o.top+o.bottom,l=t.width-s,u=t.height-c,d=Math.floor(l*i+s),f=Math.floor(u*i+c),p=e&&e.layers?e.layers:[],b=n.ignoreBackground,v=n.ignorePadding;return{framebufferWidth:d,framebufferHeight:f,region:{x:Math.floor(r.x*i)+o.left,y:Math.floor(r.y*i)+o.top,width:n.width,height:n.height},format:n.format,quality:n.quality,rotation:n.rotation,pixelRatio:i,layers:p,disableDecorations:n.disableDecorations,ignoreBackground:b,ignorePadding:v}}function s(e,t,n,r){r.premultipliedAlpha&&function(e){for(var t=e.data,n=t.length,r=0;r<n;r+=4){var i=t[r+3];if(i>0){var a=i/255;t[r+0]=t[r+0]/a,t[r+1]=t[r+1]/a,t[r+2]=t[r+2]/a}}}(e),n.width=e.width,n.height=e.height;var i=n.getContext("2d");i.putImageData(e,0,0),r.flipY&&function(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}(i);var a=i.getImageData(0,0,e.width,e.height),o=function(e,t){var n=b[t.format],r=t.quality/100;return e.toDataURL(n,r)}(n,t);return n.width=0,n.height=0,{dataUrl:o,data:a}}function c(e,t,n){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(p)try{return new ImageData(e,t)}catch(r){p=!1}return d(e,t,n)}function l(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e.width-r,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e.height-i,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=e.data,l=t.width,u=t.height,d=t.data,f=a/l,p=o/u,h=Math.ceil(f/2),b=Math.ceil(p/2),v=e.width,y=0;y<u;y++)for(var m=0;m<l;m++){for(var g=4*(m+(s?u-y-1:y)*l),O=0,j=0,w=0,_=0,k=0,x=0,S=(y+.5)*p,T=Math.floor(y*p);T<(y+1)*p;T++)for(var E=Math.abs(S-(T+.5))/b,C=(m+.5)*f,P=E*E,I=Math.floor(m*f);I<(m+1)*f;I++){var M=Math.abs(C-(I+.5))/h,A=Math.sqrt(P+M*M);if(!(A>=1)){var R=2*A*A*A-3*A*A+1,L=4*(r+I+(i+T)*v);x+=R*c[L+3],j+=R,!n&&c[L+3]<255&&(R=R*c[L+3]/255),w+=R*c[L],_+=R*c[L+1],k+=R*c[L+2],O+=R}}d[g]=w/O,d[g+1]=_/O,d[g+2]=k/O,d[g+3]=x/j}return t}function u(e,t,n){if(!t)return e;var i=e.framebufferWidth,a=e.framebufferHeight,o=e.pixelRatio,s=e.region,c=h(e,n),l=c.left+c.right,u=c.top+c.bottom,d=i-l,f=a-u,p=Math.min(8,Math.min((2048-l)/d,(2048-u)/f));return p<1.5?e:Object(r.a)(Object(r.a)({},e),{},{framebufferWidth:Math.round(d*p)+l,framebufferHeight:Math.round(f*p)+u,pixelRatio:o*p,resample:{region:{x:Math.round((s.x-c.left)*p)+c.left,y:Math.round((s.y-c.top)*p)+c.top,width:Math.round(s.width*p),height:Math.round(s.height*p)},width:i,height:a}})}function d(e,t,n){return n||(f||((f=document.createElement("canvas")).width=1,f.height=1),n=f),n.getContext("2d").createImageData(e,t)}var f=null,p=!0;function h(e,t){return!t||e&&e.ignorePadding?m:t}var b={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},v="png",y={png:100,jpg:98,jpeg:98},m={top:0,right:0,bottom:0,left:0}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(14),i=n(742);function a(e,t){var n=Object(i.a)(e,t),a=n.queryResult.featureResult,o=n.queryResult.queryGeometry,s=n.queryResult.queryGeometryType;if(a&&a.features&&a.features.length&&a.objectIdFieldName){var c,l=a.objectIdFieldName,u=Object(r.a)(a.features);try{for(u.s();!(c=u.n()).done;){var d=c.value;d.attributes&&(d.objectId=d.attributes[l])}}catch(f){u.e(f)}finally{u.f()}}return a&&(a.queryGeometry=o,a.queryGeometryType=s),a}},function(e,t,n){"use strict";n.d(t,"a",(function(){return I})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return S}));var r=n(4),i=n(13),a=n(18),o=n(191),s=n(639),c=n(615),l=i.a.getLogger("esri.tasks.operations.pbfFeatureServiceParser"),u=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],d=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],f=["upperLeft","lowerLeft"];function p(e){return e>=u.length?null:u[e]}function h(e){return e>=d.length?null:d[e]}function b(e){return e>=f.length?null:f[e]}function v(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function y(e,t,n){for(var r=t.createPointGeometry(n);e.next();)switch(e.tag()){case 3:for(var i=e.getUInt32(),a=e.pos()+i,o=0;e.pos()<a;)t.addCoordinatePoint(r,e.getSInt64(),o++);break;case 1:case 2:default:e.skip()}return r}function m(e,t,n){for(var r=t.createGeometry(n),i=2+(n.hasZ?1:0)+(n.hasM?1:0);e.next();)switch(e.tag()){case 2:for(var a=e.getUInt32(),o=e.pos()+a,s=0;e.pos()<o;)t.addLength(r,e.getUInt32(),s++);break;case 3:var c=e.getUInt32(),l=e.pos()+c,u=0;for(t.allocateCoordinates(r);e.pos()<l;)t.addCoordinate(r,e.getSInt64(),u),++u===i&&(u=0);break;case 1:default:e.skip()}return r}function g(e){for(var t=new o.a,n="esriGeometryPoint";e.next();)switch(e.tag()){case 2:for(var r=e.getUInt32(),i=e.pos()+r;e.pos()<i;)t.lengths.push(e.getUInt32());break;case 3:for(var a=e.getUInt32(),c=e.pos()+a;e.pos()<c;)t.coords.push(e.getSInt64());break;case 1:n=s.a[e.getEnum()];break;default:e.skip()}return{queryGeometry:t,queryGeometryType:n}}function O(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function j(e){for(var t={type:p(0)};e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.type=p(e.getEnum());break;case 3:t.alias=e.getString();break;case 4:t.sqlType=h(e.getEnum());break;case 5:try{t.domain=JSON.parse(e.getString())}catch(b){l.error(new a.a("query:parsing-pbf","Failed to parse domain",{error:b})),t.domain=null}break;case 6:t.defaultValue=e.getString();break;default:e.skip()}return t}function w(e){for(var t={};e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.isSystemMaintained=e.getBool();break;default:e.skip()}return t}function _(e,t,n,r){for(var i=t.createFeature(n),a=0;e.next();)switch(e.tag()){case 1:var o=r[a++].name;i.attributes[o]=e.processMessage(O);break;case 2:i.geometry=e.processMessageWithArgs(m,t,n);break;case 4:i.centroid=e.processMessageWithArgs(y,t,n);break;default:e.skip()}return i}function k(e){for(var t=[1,1,1,1];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function x(e){for(var t=[0,0,0,0];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function S(e){for(var t={originPosition:b(0)};e.next();)switch(e.tag()){case 1:t.originPosition=b(e.getEnum());break;case 2:t.scale=e.processMessage(k);break;case 3:t.translate=e.processMessage(x);break;default:e.skip()}return t}function T(e){for(var t={};e.next();)switch(e.tag()){case 1:t.shapeAreaFieldName=e.getString();break;case 2:t.shapeLengthFieldName=e.getString();break;case 3:t.units=e.getString();break;default:e.skip()}return t}function E(e,t){for(var n=t.createSpatialReference();e.next();)switch(e.tag()){case 1:n.wkid=e.getUInt32();break;case 5:n.wkt=e.getString();break;case 2:n.latestWkid=e.getUInt32();break;case 3:n.vcsWkid=e.getUInt32();break;case 4:n.latestVcsWkid=e.getUInt32();break;default:e.skip()}return n}function C(e,t){var n=t.createFeatureResult();n.geometryType=v(t,0);for(var r=!1;e.next();)switch(e.tag()){case 1:n.objectIdFieldName=e.getString();break;case 3:n.globalIdFieldName=e.getString();break;case 4:n.geohashFieldName=e.getString();break;case 5:n.geometryProperties=e.processMessage(T);break;case 7:n.geometryType=v(t,e.getEnum());break;case 8:n.spatialReference=e.processMessageWithArgs(E,t);break;case 10:n.hasZ=e.getBool();break;case 11:n.hasM=e.getBool();break;case 12:n.transform=e.processMessage(S);break;case 9:var i=e.getBool();n.exceededTransferLimit=i;break;case 13:t.addField(n,e.processMessage(j));break;case 15:r||(t.prepareFeatures(n),r=!0),t.addFeature(n,e.processMessageWithArgs(_,t,n,n.fields));break;case 2:n.uniqueIdField=e.processMessage(w);break;case 6:default:e.skip()}return t.finishFeatureResult(n),n}function P(e,t){for(var n={},i=null;e.next();)switch(e.tag()){case 4:i=e.processMessageWithArgs(g);break;case 1:n.featureResult=e.processMessageWithArgs(C,t);break;case 2:case 3:default:e.skip()}return Object(r.k)(i)&&n.featureResult&&t.addQueryGeometry(n,i),n}function I(e,t){try{for(var n=new c.a(new Uint8Array(e),new DataView(e)),r={};n.next();)switch(n.tag()){case 2:r.queryResult=n.processMessageWithArgs(P,t);break;default:n.skip()}return r}catch(i){throw new a.a("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(8),d=(n(12),n(19),n(20),n(28)),f=n(38),p=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).label=null,r.size=null,r.value=null,r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({label:this.label,size:this.size,value:this.value})}}]),n}(d.a);Object(c.a)([Object(l.b)({type:String,json:{write:!0}})],p.prototype,"label",void 0),Object(c.a)([Object(l.b)({type:Number,cast:f.j,json:{write:!0}})],p.prototype,"size",void 0),Object(c.a)([Object(l.b)({type:Number,json:{write:!0}})],p.prototype,"value",void 0);var h=p=r=Object(c.a)([Object(u.a)("esri.renderers.visualVariables.support.SizeStop")],p);t.a=h},function(e,t,n){"use strict";var r=n(2),i=n(5),a=n(6),o=n(0),s=(n(16),n(13),n(17),n(1)),c=n(8),l=(n(12),n(19),n(20),n(28)),u=n(40),d=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).floorField=null,i.viewAllMode=!1,i.viewAllLevelIds=new u.a,i}return n}(l.a);Object(o.a)([Object(s.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],d.prototype,"floorField",void 0),Object(o.a)([Object(s.b)({json:{read:!1,write:!1}})],d.prototype,"viewAllMode",void 0),Object(o.a)([Object(s.b)({json:{read:!1,write:!1}})],d.prototype,"viewAllLevelIds",void 0);var f=d=Object(o.a)([Object(c.a)("esri.layers.support.LayerFloorInfo")],d);t.a=f},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(14),i=n(10),a=n(2),o=n(3),s=n(4),c=n(13),l=n(136),u=n(132),d=n(24),f=n(381),p=c.a.getLogger("esri.core.workers.WorkerHandle"),h=function(){function e(t,n,o){var s=this,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Object(a.a)(this,e),this._mainMethod=n,this._listeners=[],this._promise=Object(f.b)(t,Object(i.a)(Object(i.a)({},c),{},{scheduler:o})).then((function(e){if(void 0===s._thread){s._thread=e,s._promise=null,c.hasInitialize&&s.broadcast({},"initialize");var t,n=Object(r.a)(s._listeners);try{for(n.s();!(t=n.n()).done;){var i=t.value;s._connectListener(i)}}catch(a){n.e(a)}finally{n.f()}}else e.close()})),this._promise.catch((function(e){return p.error("Failed to initialize ".concat(t," worker: ").concat(e))}))}return Object(o.a)(e,[{key:"on",value:function(e,t){var n=this,r={removed:!1,eventName:e,callback:t,threadHandle:null};return this._listeners.push(r),this._connectListener(r),Object(l.c)((function(){r.removed=!0,Object(u.i)(n._listeners,r),n._thread&&Object(s.k)(r.threadHandle)&&r.threadHandle.remove()}))}},{key:"destroy",value:function(){this._thread&&(this._thread.close(),this._thread=null),this._promise=null}},{key:"invoke",value:function(e,t){return this.invokeMethod(this._mainMethod,e,t)}},{key:"invokeMethod",value:function(e,t,n){var r=this;if(this._thread){var i=this.getTransferList(t,e);return this._thread.invoke(e,t,{transferList:i,signal:n})}return this._promise?this._promise.then((function(){return Object(d.u)(n),r.invokeMethod(e,t,n)})):Promise.reject(null)}},{key:"broadcast",value:function(e,t){var n=this;return this._thread?Promise.all(this._thread.broadcast(t,e)).then((function(){})):this._promise?this._promise.then((function(){return n.broadcast(e,t)})):Promise.reject()}},{key:"promise",get:function(){return this._promise}},{key:"_connectListener",value:function(e){this._thread&&this._thread.on(e.eventName,e.callback).then((function(t){e.removed||(e.threadHandle=t)}))}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r=n(14),i=n(10),a=n(7),o=n.n(a),s=n(15),c=n(2),l=n(3),u=n(5),d=n(6),f=n(0),p=(n(16),n(13),n(17),n(1)),h=n(41),b=n(8),v=n(12),y=(n(19),n(20),n(24)),m=n(44),g=n(63),O=n(62),j=n(641),w=n(124),_=function(e){var t=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.apply(this,arguments)).capabilities=void 0,e.copyright=null,e.fullExtent=null,e.legendEnabled=!0,e.spatialReference=null,e.version=null,e}return Object(l.a)(n,[{key:"readCapabilities",value:function(e,t){var n=t.capabilities&&t.capabilities.split(",").map((function(e){return e.toLowerCase().trim()}));if(!n)return{operations:{supportsQuery:!1,supportsExportMap:!1,supportsExportTiles:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};var r=this.type,i=-1!==n.indexOf("query"),a=-1!==n.indexOf("map"),o=!!t.exportTilesAllowed,s=-1!==n.indexOf("tilemap"),c="tile"!==r&&!!t.supportsDynamicLayers,l="tile"!==r&&(!t.tileInfo||c),u="tile"!==r&&(!t.tileInfo||c),d="tile"!==r,f=!!t.cimVersion&&j.a.parse(t.cimVersion).since(1,4);return{operations:{supportsQuery:i,supportsExportMap:a,supportsExportTiles:o,supportsTileMap:s},exportMap:a?{supportsArcadeExpressionForLabeling:f,supportsSublayersChanges:d,supportsDynamicLayers:c,supportsSublayerVisibility:l,supportsSublayerDefinitionExpression:u}:null,exportTiles:o?{maxExportTilesCount:+t.maxExportTilesCount}:null}}},{key:"readVersion",value:function(e,t){var n=t.currentVersion;return n||(n=t.hasOwnProperty("capabilities")||t.hasOwnProperty("tables")?10:t.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),n}},{key:"fetchSublayerInfo",value:function(){var e=Object(s.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchAllLayersAndTables(n);case 2:return e.abrupt("return",this._allLayersAndTablesMap.get(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchAllLayersAndTables",value:function(){var e=Object(s.a)(o.a.mark((function e(t){var n,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load(t);case 2:return this._allLayersAndTablesPromise||(this._allLayersAndTablesPromise=Object(O.default)(Object(v.J)(this.url).path+"/layers",{responseType:"json",query:Object(i.a)({f:"json"},this.customParameters)}).then((function(e){a._allLayersAndTablesMap=new Map;var t,n=Object(r.a)(e.data.layers);try{for(n.s();!(t=n.n()).done;){var i=t.value;a._allLayersAndTablesMap.set(i.id,i)}}catch(o){n.e(o)}finally{n.f()}return{result:e.data}}),(function(e){return{error:e}}))),e.next=5,this._allLayersAndTablesPromise;case 5:if(n=e.sent,Object(y.u)(t),!("result"in n)){e.next=8;break}return e.abrupt("return",n.result);case 8:throw n.error;case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(e);return Object(f.a)([Object(p.b)({readOnly:!0})],t.prototype,"capabilities",void 0),Object(f.a)([Object(h.a)("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],t.prototype,"readCapabilities",null),Object(f.a)([Object(p.b)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),Object(f.a)([Object(p.b)({type:g.a})],t.prototype,"fullExtent",void 0),Object(f.a)([Object(p.b)(w.c)],t.prototype,"id",void 0),Object(f.a)([Object(p.b)({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],t.prototype,"legendEnabled",void 0),Object(f.a)([Object(p.b)(w.j)],t.prototype,"popupEnabled",void 0),Object(f.a)([Object(p.b)({type:m.a})],t.prototype,"spatialReference",void 0),Object(f.a)([Object(p.b)()],t.prototype,"version",void 0),Object(f.a)([Object(h.a)("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],t.prototype,"readVersion",null),t=Object(f.a)([Object(b.a)("esri.layers.mixins.ArcGISMapService")],t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(14),i=n(2),a=n(3),o=n(37),s=n(53),c=n(50),l=n(5),u=n(6),d=n(0),f=(n(16),n(13)),p=(n(17),n(90)),h=n(1),b=n(8),v=n(18),y=(n(12),n(19),n(126)),m=(n(20),n(40)),g=n(239),O=n(335),j=n(509),w=f.a.getLogger("esri.layers.TileLayer");var _=m.a.ofType(O.a);function k(e,t){e&&e.forEach((function(e){t(e),e.sublayers&&e.sublayers.length&&k(e.sublayers,t)}))}var x=function(e){var t=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).allSublayers=new g.a({root:Object(o.a)(e),rootCollectionNames:["sublayers"],getChildrenFunction:function(e){return e.sublayers}}),e.sublayersSourceJSON={2:{},3:{},4:{},5:{}},e.watch("sublayers",(function(t,n){return e._handleSublayersChange(t,n)}),!0),e}return Object(a.a)(n,[{key:"readSublayers",value:function(e,t){if(t&&e){var n=this.sublayersSourceJSON,r=Object(y.d)(t.origin);if(!(r<2)&&(n[r]={context:t,visibleLayers:e.visibleLayers||n[r].visibleLayers,layers:e.layers||n[r].layers},!(r>2))){this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);var i=this.createSublayersForOrigin("web-document"),a=i.sublayers,o=i.origin,s=Object(p.a)(this);s.setDefaultOrigin(o),this._set("sublayers",new _(a)),s.setDefaultOrigin("user")}}}},{key:"findSublayerById",value:function(e){return this.allSublayers.find((function(t){return t.id===e}))}},{key:"createServiceSublayers",value:function(){return this.createSublayersForOrigin("service").sublayers}},{key:"createSublayersForOrigin",value:function(e){var t,n=Object(y.d)("web-document"===e?"web-map":e),i=2,a=this.sublayersSourceJSON[2].layers,o=this.sublayersSourceJSON[2].context,s=null,c=[3,4,5].filter((function(e){return e<=n})),l=Object(r.a)(c);try{for(l.s();!(t=l.n()).done;){var u=t.value,d=this.sublayersSourceJSON[u];Object(j.b)(d.layers)&&(i=u,a=d.layers,o=d.context,d.visibleLayers&&(s={visibleLayers:d.visibleLayers,context:d.context}))}}catch(L){l.e(L)}finally{l.f()}var f,p=[3,4,5].filter((function(e){return e>i&&e<=n})),h=null,b=Object(r.a)(p);try{for(b.s();!(f=b.n()).done;){var v=f.value,m=this.sublayersSourceJSON[v],g=m.layers,w=m.visibleLayers,x=m.context;g&&(h={layers:g,context:x}),w&&(s={visibleLayers:w,context:x})}}catch(L){b.e(L)}finally{b.f()}var S=function(e,t){var n=[],r={};return e?(e.forEach((function(e){var i=new O.a;if(i.read(e,t),r[i.id]=i,null!=e.parentLayerId&&-1!==e.parentLayerId){var a=r[e.parentLayerId];a.sublayers||(a.sublayers=[]),a.sublayers.unshift(i)}else n.unshift(i)})),n):n}(a,o),T=new Map,E=new Set;if(h){var C,P=Object(r.a)(h.layers);try{for(P.s();!(C=P.n()).done;){var I=C.value;T.set(I.id,I)}}catch(L){P.e(L)}finally{P.f()}}if(s){var M,A=Object(r.a)(s.visibleLayers);try{for(A.s();!(M=A.n()).done;){var R=M.value;E.add(R)}}catch(L){A.e(L)}finally{A.f()}}return k(S,(function(e){h&&e.read(T.get(e.id),h.context),s&&e.read({defaultVisibility:E.has(e.id)},s.context)})),{origin:Object(y.b)(i),sublayers:new _({items:S})}}},{key:"read",value:function(e,t){Object(s.a)(Object(c.a)(n.prototype),"read",this).call(this,e,t),this.readSublayers(e,t)}},{key:"_handleSublayersChange",value:function(e,t){var n=this;t&&(t.forEach((function(e){e.parent=null,e.layer=null})),this.handles.remove("sublayers-owner")),e&&(e.forEach((function(e){e.parent=n,e.layer=n})),this.handles.add([e.on("after-add",(function(e){var t=e.item;t.parent=n,t.layer=n})),e.on("after-remove",(function(e){var t=e.item;t.parent=null,t.layer=null}))],"sublayers-owner"),"tile"===this.type&&this.handles.add(e.on("before-changes",(function(e){w.error(new v.a("tilelayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{layer:n})),e.preventDefault()})),"sublayers-owner"))}}]),n}(e);return Object(d.a)([Object(h.b)({readOnly:!0})],t.prototype,"allSublayers",void 0),Object(d.a)([Object(h.b)({readOnly:!0,type:m.a.ofType(O.a)})],t.prototype,"serviceSublayers",void 0),Object(d.a)([Object(h.b)({value:null,type:_,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],t.prototype,"sublayers",void 0),Object(d.a)([Object(h.b)({readOnly:!0})],t.prototype,"sublayersSourceJSON",void 0),t=Object(d.a)([Object(b.a)("esri.layers.mixins.SublayersOwner")],t),t}},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(24),o=n(329),s=n(215),c=function(){function e(t){if(Object(r.a)(this,e),t instanceof o.a)this._tilemapCache=t;else{if(!t||!("index"in t))throw new Error("Invalid tilemap!");this._tilemap=t.index}}return Object(i.a)(e,[{key:"dataKey",value:function(e,t){if(this._tilemapCache){var n=e.level,r=e.row,i=e.col,o=new s.a(e);return this._tilemapCache.fetchAvailabilityUpsample(n,r,i,o,t).then((function(){return o.world=e.world,o})).catch((function(e){if(Object(a.m)(e))throw e;return null}))}return this._getIndexedDataKey(e)}},{key:"forEach",value:function(e,t,n,r,i){this._callback=i,this._maxLevel=t+e,this._forEach(this._tilemap,t,n,r)}},{key:"_forEach",value:function(e,t,n,r){0!==e&&(this._callback(t,n,r),t!==this._maxLevel&&"object"==typeof e&&(this._forEach(e[0],t+1,2*n,2*r),this._forEach(e[1],t+1,2*n,2*r+1),this._forEach(e[2],t+1,2*n+1,2*r),this._forEach(e[3],t+1,2*n+1,2*r+1)))}},{key:"_getIndexedDataKey",value:function(e){var t=[e];if(e.level<0||e.row<0||e.col<0||e.row>>e.level>0||e.col>>e.level>0)return Promise.resolve(null);for(var n=e;0!==n.level;)n=new s.a(n.level-1,n.row>>1,n.col>>1,n.world),t.push(n);var r,i,a=this._tilemap,o=t.pop();if(1===a)return Promise.resolve(o);for(;t.length;)if(i=(1&(r=t.pop()).col)+((1&r.row)<<1),a){if(0===a[i]){o=null;break}if(1===a[i]){o=r;break}o=r,a=a[i]}return Promise.resolve(o)}}]),e}();t.a=c},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(12),i=n(109);function a(e){return{origin:"portal-item",url:Object(r.J)(e.itemUrl),portal:e.portal||i.a.getDefault(),portalItem:e,readResourcePaths:[]}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n(2),i=function e(t){Object(r.a)(this,e),this.xTile=0,this.yTile=0,this.hash=0,this.priority=1,this.colliders=[],this.textVertexRanges=[],this.iconVertexRanges=[],this.tile=t},a=function e(){Object(r.a)(this,e),this.tileSymbols=[],this.parts=[{startTime:0,startOpacity:0,targetOpacity:0,show:!1},{startTime:0,startOpacity:0,targetOpacity:0,show:!1}],this.show=!1}},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(7),i=n.n(r),a=n(10),o=n(15),s=n(17),c=n(68),l=n(62),u=n(336),d=n(106),f=n(608),p=Object(s.m)(u.a);function h(e,t,n){return b.apply(this,arguments)}function b(){return(b=Object(o.a)(i.a.mark((function e(t,n,r){var o,s,u,h,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p(n),o=Object(d.c)(t),s=Object(a.a)(Object(a.a)({},o.query),{},{f:"json"},n.toJSON()),u=n.outSpatialReference,h=Object(c.c)(n.geometries[0]),b=Object(d.a)(s,r),e.abrupt("return",Object(l.default)(o.path+"/project",b).then((function(e){var t=e.data.geometries;return Object(f.a)(t,h,u)})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,n){"use strict";function r(e){return 32+e.length}function i(e){if(!e)return 0;var t=32;for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];switch(typeof i){case"string":t+=r(i);break;case"number":t+=16;break;case"boolean":t+=4}}return t}function a(e,t){return 32+e.length*t}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(35),i=n(2),a=n(3),o=n(5),s=n(6),c=n(136),l=n(43),u=n(108),d=(n(71),n(200)),f=n(38),p=n(120),h=n(116),b=(n(76),n(74)),v=n(27),y=n(60),m=n(33),g=n(573),O=n(104),j=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"visualizeIntersectionPoint",value:function(e,t){return this._visualizeSnappingIndicator({geometry:new l.a({x:e.intersectionPoint[0],y:e.intersectionPoint[1],spatialReference:t.coordinateHelper.spatialReference}),symbol:k,context:t})}},{key:"visualizePoint",value:function(e,t){return this._visualizeSnappingIndicator({geometry:new l.a({x:e.point[0],y:e.point[1],spatialReference:t.coordinateHelper.spatialReference}),symbol:x,context:t})}},{key:"visualizeLine",value:function(e,t){return this._visualizeSnappingIndicator({geometry:new u.a({paths:[[e.lineStart,e.lineEnd]],spatialReference:t.coordinateHelper.spatialReference}),symbol:S,context:t})}},{key:"visualizeParallelSign",value:function(e,t){return this._visualizeSnappingIndicator({geometry:new u.a({paths:[[e.lineStart,e.lineEnd]],spatialReference:t.coordinateHelper.spatialReference}),symbol:T,context:t})}},{key:"visualizeRightAngleQuad",value:function(e,t){return this._visualizeSnappingIndicator({geometry:new u.a({paths:[[e.previousVertex,e.centerVertex,e.nextVertex]],spatialReference:t.coordinateHelper.spatialReference}),symbol:I(e),context:t})}},{key:"_visualizeSnappingIndicator",value:function(e){var t=e.geometry,n=e.symbol,r=e.context,i=new b.a({geometry:t,symbol:n});return r.view.graphics.add(i),Object(c.c)((function(){r.view.graphics.remove(i)}))}}]),n}(n(545).a),w=g.a.main.toArray(),_=[].concat(Object(r.a)(g.a.main.toRgb()),[100]),k=new h.default({outline:new p.default({width:1.5,color:w}),size:15,color:[0,0,0,0]}),x=new h.default({outline:{width:.5,color:[0,0,0,1]},size:10,color:w}),S=new d.a({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:Object(f.h)(O.a.lineHintWidthTarget),color:w}]}}}),T=new d.a({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:-1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,1.5],[7,1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:w}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,-1.5],[7,-1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:w}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),E=function(e){return new d.a({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:.5,y:.5,z:0},anchorPointUnits:"Relative",size:Object(f.h)(O.a.rightAngleHintSize),rotation:e,markerPlacement:{type:"CIMMarkerPlacementOnVertices",placePerPart:!0,angleToLine:!0,placeOnEndPoints:!1},frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[5,-5],[-5,-5],[-5,5],[5,5],[5,-5]]]},symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:Object(f.h)(O.a.rightAngleHintOutlineSize),color:w},{type:"CIMSolidFill",enable:!0,color:_}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}})},C=E(45),P=E(225),I=function(){var e=Object(y.a)(),t=Object(y.a)(),n=Object(v.e)();return function(r){return Object(m.d)(e,r.centerVertex,r.previousVertex),Object(m.d)(t,r.nextVertex,r.previousVertex),Object(m.f)(n,e,t),n[2]<0?C:P}}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(2),i=n(3),a=n(5),o=n(6),s=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e,i,a,o){var s;return Object(r.a)(this,n),(s=t.call(this,e)).dx=i,s.dy=a,s.dz=o,s}return Object(i.a)(n,[{key:"move",value:function(e,t,n,r){this.helper.addDelta(e.pos,t,n,r)}},{key:"apply",value:function(e){this.move(e,this.dx,this.dy,this.dz)}},{key:"undo",value:function(e){this.move(e,-this.dx,-this.dy,-this.dz)}},{key:"canAccumulate",value:function(e){return e instanceof n}},{key:"accumulate",value:function(e,t){this.move(e,t.dx,t.dy,t.dz)}},{key:"accumulateParams",value:function(e){this.dx+=e.dx,this.dy+=e.dy,this.dz+=e.dz}}]),n}(n(325).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(2),i=n(3),a=n(5),o=n(6),s=n(132),c=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e,i,a){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return Object(r.a)(this,n),(o=t.call(this,e)).origin=i,o.angle=a,o.accumulationType=s,o}return Object(i.a)(n,[{key:"rotate",value:function(e,t){this.helper.rotate(e.pos,this.origin,t)}},{key:"apply",value:function(e){this.rotate(e,this.angle)}},{key:"undo",value:function(e){this.rotate(e,-this.angle)}},{key:"canAccumulate",value:function(e){return e instanceof n&&Object(s.c)(this.origin,e.origin)}},{key:"accumulate",value:function(e,t){var n=1===t.accumulationType;this.rotate(e,n?t.angle-this.angle:t.angle)}},{key:"accumulateParams",value:function(e){var t=1===e.accumulationType;this.angle=t?e.angle:this.angle+e.angle}}]),n}(n(325).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(2),i=n(3),a=n(5),o=n(6),s=n(132),c=n(60),l=n(33),u=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e,i,a,o,s){var u,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return Object(r.a)(this,n),(u=t.call(this,e)).origin=i,u.axis1=a,u.factor1=o,u.factor2=s,u.accumulationType=d,u.axis2=Object(l.r)(Object(c.a)(),a[1],-a[0]),u}return Object(i.a)(n,[{key:"scale",value:function(e,t,n){this.helper.scale(e.pos,this.origin,this.axis1,t),this.helper.scale(e.pos,this.origin,this.axis2,n)}},{key:"apply",value:function(e){this.scale(e,this.factor1,this.factor2)}},{key:"undo",value:function(e){this.scale(e,1/this.factor1,1/this.factor2)}},{key:"canAccumulate",value:function(e){return e instanceof n&&Object(s.c)(this.origin,e.origin)&&Object(s.c)(this.axis1,e.axis1)}},{key:"accumulate",value:function(e,t){1===t.accumulationType?this.scale(e,t.factor1/this.factor1,t.factor2/this.factor2):this.scale(e,t.factor1,t.factor2)}},{key:"accumulateParams",value:function(e){var t=1===e.accumulationType;this.factor1=t?e.factor1:this.factor1*e.factor1,this.factor2=t?e.factor2:this.factor2*e.factor2}}]),n}(n(325).a)},function(e,t,n){"use strict";function r(){var e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}n.d(t,"a",(function(){return r}));var i=r();Object.freeze({__proto__:null,create:r,clone:function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},fromValues:function(e,t,n,r,i,a,o,s,c,l,u,d,f,p,h,b){var v=new Float32Array(16);return v[0]=e,v[1]=t,v[2]=n,v[3]=r,v[4]=i,v[5]=a,v[6]=o,v[7]=s,v[8]=c,v[9]=l,v[10]=u,v[11]=d,v[12]=f,v[13]=p,v[14]=h,v[15]=b,v},createView:function(e,t){return new Float32Array(e,t,16)},IDENTITY:i})},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r,i,a,o,s,c,l=n(29),u=n(34);function d(e,t){e.vertex.uniforms.add("intrinsicWidth","float"),t.vvSize?(e.attributes.add("sizeFeatureAttribute","float"),e.vertex.uniforms.add("vvSizeMinSize","vec3"),e.vertex.uniforms.add("vvSizeMaxSize","vec3"),e.vertex.uniforms.add("vvSizeOffset","vec3"),e.vertex.uniforms.add("vvSizeFactor","vec3"),e.vertex.code.add(Object(u.a)(r||(r=Object(l.a)(["\n    float getSize() {\n      return intrinsicWidth * clamp(vvSizeOffset + sizeFeatureAttribute * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).x;\n    }\n    "]))))):(e.attributes.add("size","float"),e.vertex.code.add(Object(u.a)(i||(i=Object(l.a)(["\n    float getSize(){\n      return intrinsicWidth * size;\n    }\n    "]))))),t.vvOpacity?(e.attributes.add("opacityFeatureAttribute","float"),e.vertex.constants.add("vvOpacityNumber","int",8),e.vertex.code.add(Object(u.a)(a||(a=Object(l.a)(["\n    uniform float vvOpacityValues[vvOpacityNumber];\n    uniform float vvOpacityOpacities[vvOpacityNumber];\n\n    float interpolateOpacity( float value ){\n      if (value <= vvOpacityValues[0]) {\n        return vvOpacityOpacities[0];\n      }\n\n      for (int i = 1; i < vvOpacityNumber; ++i) {\n        if (vvOpacityValues[i] >= value) {\n          float f = (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);\n          return mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f);\n        }\n      }\n\n      return vvOpacityOpacities[vvOpacityNumber - 1];\n    }\n\n    vec4 applyOpacity( vec4 color ){\n      return vec4(color.xyz, interpolateOpacity(opacityFeatureAttribute));\n    }\n    "]))))):e.vertex.code.add(Object(u.a)(o||(o=Object(l.a)(["\n    vec4 applyOpacity( vec4 color ){\n      return color;\n    }\n    "])))),t.vvColor?(e.attributes.add("colorFeatureAttribute","float"),e.vertex.constants.add("vvColorNumber","int",8),e.vertex.code.add(Object(u.a)(s||(s=Object(l.a)(["\n    uniform float vvColorValues[vvColorNumber];\n    uniform vec4 vvColorColors[vvColorNumber];\n\n    vec4 interpolateColor( float value ) {\n      if (value <= vvColorValues[0]) {\n        return vvColorColors[0];\n      }\n\n      for (int i = 1; i < vvColorNumber; ++i) {\n        if (vvColorValues[i] >= value) {\n          float f = (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);\n          return mix(vvColorColors[i-1], vvColorColors[i], f);\n        }\n      }\n\n      return vvColorColors[vvColorNumber - 1];\n    }\n\n    vec4 getColor(){\n      return applyOpacity(interpolateColor(colorFeatureAttribute));\n    }\n    "]))))):(e.attributes.add("color","vec4"),e.vertex.code.add(Object(u.a)(c||(c=Object(l.a)(["\n    vec4 getColor(){\n      return applyOpacity(color);\n    }\n    "])))))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r,i,a=n(29),o=n(34);function s(e){var t=Object(o.a)(r||(r=Object(a.a)(["\n    vec4 alignToPixelCenter(vec4 clipCoord, vec2 widthHeight) {\n      vec2 xy = vec2(0.500123) + 0.5 * clipCoord.xy / clipCoord.w;\n      vec2 pixelSz = vec2(1.0) / widthHeight;\n      vec2 ij = (floor(xy * widthHeight) + vec2(0.5)) * pixelSz;\n      vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;\n      return vec4(result, clipCoord.zw);\n    }\n  "]))),n=Object(o.a)(i||(i=Object(a.a)(["\n\n    vec4 alignToPixelOrigin(vec4 clipCoord, vec2 widthHeight) {\n      vec2 xy = vec2(0.5) + 0.5 * clipCoord.xy / clipCoord.w;\n      vec2 pixelSz = vec2(1.0) / widthHeight;\n      vec2 ij = floor((xy + 0.5 * pixelSz) * widthHeight) * pixelSz;\n      vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;\n      return vec4(result, clipCoord.zw);\n    }\n  "])));e.vertex.code.add(t),e.vertex.code.add(n),e.fragment.code.add(t),e.fragment.code.add(n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(2),i=n(3),a=n(4),o=n(25),s=n(480),c=n(488),l=function(){function e(t){Object(r.a)(this,e),this.resourceFactory=t,this._resources=null,this._visible=!0,this._attached=!1}return Object(i.a)(e,[{key:"destroy",value:function(){this._destroyResources()}},{key:"object",get:function(){return Object(a.k)(this._resources)?this._resources.object:null}},{key:"resources",get:function(){return Object(a.k)(this._resources)?this._resources.external:null}},{key:"visible",get:function(){return this._visible},set:function(e){e!==this._visible&&(this._visible=e,this._syncVisible())}},{key:"attached",get:function(){return this._attached},set:function(e){e!==this._attached&&(this._attached=e,this._createOrDestroyResources())}},{key:"recreate",value:function(){this.attached&&this._createResources()}},{key:"recreateGeometry",value:function(){if(this.resourceFactory.recreateGeometry){var e=this.resourceFactory.view._stage;if(!Object(a.j)(this._resources)&&e){var t=this._resources.object;this._resources.external.forEach((function(t){2===t.type&&e.remove(t)})),t.removeAllGeometries();var n=this.resourceFactory.recreateGeometry(this._resources.external,t,this._resources.layer);e.addMany(n),this._resources.layer.commit()}}else this.recreate()}},{key:"_createOrDestroyResources",value:function(){this._attached?this._resources||this._createResources():this._destroyResources()}},{key:"_createResources",value:function(){var e=this;this._destroyResources();var t=this.resourceFactory.view._stage;if(t){var n=new c.a({isPickable:!1});t.add(n);var r=new s.a({castShadow:!1}),i=this.resourceFactory.createResources(r,n);i.forEach((function(e){return t.add(e)})),t.add(r),n.add(r),n.commit(),this._syncVisible();var a=this.resourceFactory.cameraChanged?Object(o.a)(this.resourceFactory.view.state,"camera",(function(t){return e.resourceFactory.cameraChanged(t)})):null;this._resources={layer:n,object:r,external:i,cameraHandle:a}}}},{key:"_destroyResources",value:function(){if(!Object(a.j)(this._resources)){var e=this.resourceFactory.view._stage;null==e||e.remove(this._resources.object),null==e||e.remove(this._resources.layer),this._resources.external.forEach((function(t){null==e||e.remove(t),"dispose"in t&&t.dispose()})),this._resources.object.dispose(),this._resources.cameraHandle&&this._resources.cameraHandle.remove(),this._resources=null}}},{key:"_syncVisible",value:function(){Object(a.j)(this._resources)||(this._resources.object.setVisible(this._visible),this._resources.layer.commit())}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(16);var r=n(4),i=n(163);function a(e){var t;if("graphics"!==(null==(t=e.layer)?void 0:t.type))return 1;if(Object(r.j)(e.geometry))return 2;switch(e.geometry.type){case"polygon":case"point":case"polyline":break;case"multipoint":case"extent":case"mesh":default:return 3}return"on-the-ground"!==Object(i.e)(e)&&Object(i.g)(e)?4:0}},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(17),n(1)),u=n(8),d=(n(12),n(19),n(20),n(28)),f=n(512),p=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).filter=null,e.includedEffect=null,e.excludedEffect=null,e.excludedLabelsVisible=!1,e}return Object(a.a)(n,[{key:"clone",value:function(){return new r({filter:this.filter&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}}]),n}(d.a);Object(c.a)([Object(l.b)({type:f.a,json:{write:!0}})],p.prototype,"filter",void 0),Object(c.a)([Object(l.b)({json:{write:!0}})],p.prototype,"includedEffect",void 0),Object(c.a)([Object(l.b)({json:{write:!0}})],p.prototype,"excludedEffect",void 0),Object(c.a)([Object(l.b)({type:Boolean,json:{write:!0}})],p.prototype,"excludedLabelsVisible",void 0);var h=p=r=Object(c.a)([Object(u.a)("esri.views.layers.support.FeatureEffect")],p);t.a=h},function(e,t){},function(e,t,n){"use strict";var r=n(31),i=n(2),a=n(3),o=n(37),s=n(5),c=n(6),l=n(0),u=(n(16),n(13)),d=(n(17),n(1)),f=n(32),p=n(8),h=(n(12),n(19),n(20),n(111)),b=n(54),v=n(112),y=(n(143),n(25)),m=n(91),g=n(56),O=n(77),j=n(75),w=n(178),_=n(9),k=n(72),x=n(555),S=n(543),T=n(230),E=n(26),C=n(10),P=n(7),I=n.n(P),M=n(15),A=n(154),R=n(95),L=n(511),F=n(35),D=n(58),N=n(454),V=n(78),z=n(138),U=n(159),B=n(74),G=n(552),q=n(36),H=n(28),W=n(528),$=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).digitSeparator=!1,r.dateFormat=null,r.places=null,r}return n}(H.a);Object(l.a)([Object(d.b)()],$.prototype,"digitSeparator",void 0),Object(l.a)([Object(d.b)({json:{read:{source:"dateFormat",reader:W.b}}})],$.prototype,"dateFormat",void 0),Object(l.a)([Object(d.b)()],$.prototype,"places",void 0);var J=$=Object(l.a)([Object(p.a)("esri.widgets.FeatureForm.Format")],$),Y=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).description=null,r.domain=null,r.editable=!0,r.editorType=null,r.format=null,r.hint=null,r.includeTime=!0,r.label=null,r.maxLength=-1,r.minLength=-1,r.name=null,r.noValueOptionLabel=null,r.required=!1,r.requiredExpression=null,r.showNoValueOption=!1,r.visibilityExpression=null,r}return n}(q.a);Object(l.a)([Object(d.b)()],Y.prototype,"description",void 0),Object(l.a)([Object(d.b)()],Y.prototype,"domain",void 0),Object(l.a)([Object(d.b)()],Y.prototype,"editable",void 0),Object(l.a)([Object(d.b)()],Y.prototype,"editorType",void 0),Object(l.a)([Object(d.b)({type:J})],Y.prototype,"format",void 0),Object(l.a)([Object(d.b)()],Y.prototype,"hint",void 0),Object(l.a)([Object(d.b)()],Y.prototype,"includeTime",void 0),Object(l.a)([Object(d.b)()],Y.prototype,"label",void 0),Object(l.a)([Object(d.b)()],Y.prototype,"maxLength",void 0),Object(l.a)([Object(d.b)()],Y.prototype,"minLength",void 0),Object(l.a)([Object(d.b)()],Y.prototype,"name",void 0),Object(l.a)([Object(d.b)()],Y.prototype,"noValueOptionLabel",void 0),Object(l.a)([Object(d.b)()],Y.prototype,"required",void 0),Object(l.a)([Object(d.b)()],Y.prototype,"requiredExpression",void 0),Object(l.a)([Object(d.b)()],Y.prototype,"showNoValueOption",void 0),Object(l.a)([Object(d.b)()],Y.prototype,"visibilityExpression",void 0);var K=Y=Object(l.a)([Object(p.a)("esri.widgets.FeatureForm.FieldConfig")],Y),Z=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).description=null,r.fieldConfig=null,r.label=null,r.state="expanded",r.visibilityExpression=null,r}return Object(a.a)(n,[{key:"castFieldConfig",value:function(e){return e?e.map((function(e){return e.declaredClass?e:new K(e)})):null}}]),n}(q.a);Object(l.a)([Object(d.b)()],Z.prototype,"description",void 0),Object(l.a)([Object(d.b)()],Z.prototype,"fieldConfig",void 0),Object(l.a)([Object(D.a)("fieldConfig")],Z.prototype,"castFieldConfig",null),Object(l.a)([Object(d.b)()],Z.prototype,"label",void 0),Object(l.a)([Object(d.b)()],Z.prototype,"state",void 0),Object(l.a)([Object(d.b)()],Z.prototype,"visibilityExpression",void 0);var X=Z=Object(l.a)([Object(p.a)("esri.widgets.FeatureForm.FieldGroupConfig")],Z),Q=n(307),ee={type:"number"},te={type:"number",intlOptions:{notation:"scientific"}},ne={type:"date",intlOptions:{day:"2-digit",month:"2-digit",year:"2-digit",hour:"numeric",minute:"numeric",second:"numeric"}},re=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).arcade=null,r.config=null,r.feature=null,r.field=null,r.initialFeature=null,r.layer=null,r.description=null,r.editorType=null,r.error=null,r.format=null,r.group=null,r.hint=null,r.messages=null,r.name=null,r}return Object(a.a)(n,[{key:"compiledFunc",get:function(){var e,t=this.arcade;return t&&t.arcadeUtils.createFunction(null==(e=this.config)?void 0:e.visibilityExpression)}},{key:"compiledRequiredFunc",get:function(){var e,t=this.arcade;return t&&t.arcadeUtils.createFunction(null==(e=this.config)?void 0:e.requiredExpression)}},{key:"evaluatedRequirement",get:function(){var e=this.compiledRequiredFunc;if(!e)return null;var t=this.arcade;return t.arcadeUtils.executeFunction(e,t.arcadeUtils.createExecContext(this.feature))}},{key:"evaluatedVisibility",get:function(){var e=this.compiledFunc;if(!e)return null;var t=this.arcade;return t.arcadeUtils.executeFunction(e,t.arcadeUtils.createExecContext(this.feature))}},{key:"domain",get:function(){var e,t,n=this.layer.typeIdField,r=n===this.name,i=null==(e=this.field)?void 0:e.domain;if(r&&!i)return new Q.a({name:"__internal-type-based-coded-value-domain__",codedValues:this.layer.types.map((function(e){return{code:e.id,name:e.name}}))});var a=this.feature,o=n&&this.layer.getFieldDomain(this.name,{feature:a})||i,s=null==(t=this.config)?void 0:t.domain;return this._isDomainCompatible(s)?s:o}},{key:"editable",get:function(){var e;return this.layer.capabilities.operations.supportsEditing&&this.field.editable&&!1!==(null==(e=this.config)?void 0:e.editable)}},{key:"errorMessage",get:function(){return this._toErrorMessage()}},{key:"includeTime",get:function(){var e,t=null==(e=this.config)?void 0:e.includeTime;return void 0===t||t}},{key:"label",get:function(){var e;return(null==(e=this.config)?void 0:e.label)||this.field.alias||this.field.name}},{key:"maxLength",get:function(){var e,t;if("date"===this.type)return-1;var n=null==(e=this.field)?void 0:e.length,r=null==(t=this.config)?void 0:t.maxLength;return!isNaN(r)&&r>=-1&&(-1===n||r<=n)?r:n}},{key:"minLength",get:function(){var e,t;if("date"===this.type)return-1;var n=null==(e=this.field)?void 0:e.length,r=null==(t=this.config)?void 0:t.minLength;return!isNaN(r)&&r>=-1&&(-1===n||r<=n)?r:-1}},{key:"required",get:function(){var e,t;return!!this.editable&&(!(null==(e=this.field)?void 0:e.nullable)||("boolean"==typeof this.evaluatedRequirement?this.evaluatedRequirement:!0===(null==(t=this.config)?void 0:t.required)))}},{key:"type",get:function(){var e=this.field;return Object(b.v)(e)?"number":Object(b.w)(e)?"text":Object(b.u)(e)?"date":"unsupported"}},{key:"valid",get:function(){var e=this.editable?this._validate():null;return this._set("error",e),null===e}},{key:"value",get:function(){return this._get("value")},set:function(e){this.notifyChange("evaluatedVisibility"),this._set("value",e)}},{key:"visible",get:function(){return!this._isEditorField()&&("boolean"==typeof this.evaluatedVisibility?this.evaluatedVisibility:!!this.config||this._shownByDefault())}},{key:"_isDomainCompatible",value:function(e){var t=this.field;if("coded-value"===(null==e?void 0:e.type)){var n=typeof e.codedValues[0].code;if("string"===n&&Object(b.w)(t)||"number"===n&&Object(b.v)(t))return!0}return!!("range"===(null==e?void 0:e.type)&&Object(b.v)(t)||Object(b.u)(t))}},{key:"_validate",value:function(){var e=this.domain,t=this.field,n=this.initialFeature,r=this.minLength,i=this.required,a=this.type,o=this.value,s=i&&null===o;return s||n.getAttribute(t.name)!==o?"text"===a&&r>-1&&"string"==typeof o&&o.length<r?"length-validation-error::too-short":e?null!==o||i?Object(A.e)(e,o):null:s?b.b.INVALID_TYPE:Object(b.z)(t,o):null}},{key:"_shownByDefault",value:function(){var e,t=null==(e=this.field)?void 0:e.type;return"oid"!==t&&"global-id"!==t&&!this._isGeometryField()}},{key:"_isEditorField",value:function(){return Object(b.o)(this.layer).indexOf(this.name)>-1}},{key:"_isGeometryField",value:function(){return Object(b.p)(this.layer).indexOf(this.name)>-1}},{key:"_toErrorMessage",value:function(){var e=this.domain,t=this.field,n=this.messages,r=this.minLength,i=this.value,a=this.required,o=this.type,s=this.error;if(a&&null===i)return n.validationErrors.cannotBeNull;if(s===A.a.VALUE_OUT_OF_RANGE||s===b.a.OUT_OF_RANGE){var c=Object(A.c)(e)||Object(b.s)(t);return Object(v.a)(n.validationErrors.outsideRange,c,{format:{max:"date"===o?ne:c.isInteger?ee:te,min:"date"===o?ne:c.isInteger?ee:te}})}return s===A.a.INVALID_CODED_VALUE?n.validationErrors.invalidCodedValue:s===b.b.INVALID_TYPE?n.validationErrors.invalidType:"length-validation-error::too-short"===s?Object(v.a)(n.validationErrors.tooShort,{min:r}):null}}]),n}(q.a);Object(l.a)([Object(d.b)()],re.prototype,"arcade",void 0),Object(l.a)([Object(d.b)()],re.prototype,"compiledFunc",null),Object(l.a)([Object(d.b)()],re.prototype,"compiledRequiredFunc",null),Object(l.a)([Object(d.b)()],re.prototype,"config",void 0),Object(l.a)([Object(d.b)()],re.prototype,"evaluatedRequirement",null),Object(l.a)([Object(d.b)()],re.prototype,"evaluatedVisibility",null),Object(l.a)([Object(d.b)()],re.prototype,"feature",void 0),Object(l.a)([Object(d.b)()],re.prototype,"field",void 0),Object(l.a)([Object(d.b)()],re.prototype,"initialFeature",void 0),Object(l.a)([Object(d.b)()],re.prototype,"layer",void 0),Object(l.a)([Object(d.b)({aliasOf:"config.description"})],re.prototype,"description",void 0),Object(l.a)([Object(d.b)()],re.prototype,"domain",null),Object(l.a)([Object(d.b)()],re.prototype,"editable",null),Object(l.a)([Object(d.b)({aliasOf:"config.editorType"})],re.prototype,"editorType",void 0),Object(l.a)([Object(d.b)({readOnly:!0})],re.prototype,"error",void 0),Object(l.a)([Object(d.b)({dependsOn:["error","messages","value"]})],re.prototype,"errorMessage",null),Object(l.a)([Object(d.b)({aliasOf:"config.format"})],re.prototype,"format",void 0),Object(l.a)([Object(d.b)()],re.prototype,"group",void 0),Object(l.a)([Object(d.b)({aliasOf:"config.hint"})],re.prototype,"hint",void 0),Object(l.a)([Object(d.b)()],re.prototype,"includeTime",null),Object(l.a)([Object(d.b)()],re.prototype,"label",null),Object(l.a)([Object(d.b)()],re.prototype,"maxLength",null),Object(l.a)([Object(d.b)()],re.prototype,"minLength",null),Object(l.a)([Object(d.b)()],re.prototype,"messages",void 0),Object(l.a)([Object(d.b)({aliasOf:"field.name"})],re.prototype,"name",void 0),Object(l.a)([Object(d.b)()],re.prototype,"required",null),Object(l.a)([Object(d.b)()],re.prototype,"type",null),Object(l.a)([Object(d.b)()],re.prototype,"valid",null),Object(l.a)([Object(d.b)({value:null})],re.prototype,"value",null),Object(l.a)([Object(d.b)()],re.prototype,"visible",null);var ie=re=Object(l.a)([Object(p.a)("esri.widgets.FeatureForm.InputField")],re),ae=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).arcade=null,r.config=null,r.description=null,r.feature=null,r.label=null,r.state=null,r.visibilityExpression=null,r}return Object(a.a)(n,[{key:"compiledFunc",get:function(){var e=this.arcade;return e&&e.arcadeUtils.createFunction(this.visibilityExpression)}},{key:"evaluatedVisibility",get:function(){var e=this.compiledFunc;if(e){var t=this.arcade;return t.arcadeUtils.executeFunction(e,t.arcadeUtils.createExecContext(this.feature))}}},{key:"inputFields",get:function(){return this._get("inputFields")},set:function(e){var t=this;this.handles.removeAll(),e&&this.handles.add(e.map((function(e){return e.watch("visible",t._dirtyEvaluatedVisibility)}))),this._set("inputFields",e)}},{key:"visible",get:function(){return!1!==this.evaluatedVisibility&&this.inputFields&&this.inputFields.some((function(e){return e.visible}))}},{key:"_dirtyEvaluatedVisibility",value:function(){this.visibilityExpression&&this.notifyChange("evaluatedVisibility")}}]),n}(Object(m.b)(q.a));Object(l.a)([Object(d.b)()],ae.prototype,"arcade",void 0),Object(l.a)([Object(d.b)()],ae.prototype,"compiledFunc",null),Object(l.a)([Object(d.b)()],ae.prototype,"config",void 0),Object(l.a)([Object(d.b)()],ae.prototype,"evaluatedVisibility",null),Object(l.a)([Object(f.a)("config.description")],ae.prototype,"description",void 0),Object(l.a)([Object(d.b)()],ae.prototype,"feature",void 0),Object(l.a)([Object(d.b)()],ae.prototype,"inputFields",null),Object(l.a)([Object(f.a)("config.label")],ae.prototype,"label",void 0),Object(l.a)([Object(f.a)("config.state")],ae.prototype,"state",void 0),Object(l.a)([Object(f.a)("config.visibilityExpression")],ae.prototype,"visibilityExpression",void 0),Object(l.a)([Object(d.b)()],ae.prototype,"visible",null);var oe=ae=Object(l.a)([Object(p.a)("esri.widgets.FeatureForm.InputFieldGroup")],ae),se=n(305);function ce(e,t,n){var r=e.description,i=e.domain,a=e.editable,o=e.fieldName,s=e.hint,c=e.input,l=e.label,u=e.requiredExpression,d=e.visibilityExpression,f=t[u]||null,p=t[d]||null,h=new K({description:r,domain:i,editable:a,hint:s,label:l,name:o,requiredExpression:f,visibilityExpression:p});if(c)if("barcode-scanner"===c.type||"text-area"===c.type||"text-box"===c.type)h.editorType=c.type,h.minLength=c.minLength,h.maxLength=c.maxLength;else if("combo-box"===c.type||"radio-buttons"===c.type)h.editorType=c.type,h.noValueOptionLabel=c.noValueOptionLabel,h.showNoValueOption=c.showNoValueOption;else if("datetime-picker"===c.type){h.editorType=c.type,h.includeTime=c.includeTime;var b=c.max,v=c.min;if(b||v){var y="range"===(null==i?void 0:i.type)?Math.min(null==b?void 0:b.getTime(),i.maxValue):null==b?void 0:b.getTime(),m="range"===(null==i?void 0:i.type)?Math.max(null==v?void 0:v.getTime(),i.minValue):null==v?void 0:v.getTime();h.domain=new se.a({maxValue:y,minValue:m,name:"__internal-range-domain-based-on-datetime-picker-input__"})}}else n.push({type:"unsupported-input-type",details:c});return h}function le(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return e.map((function(e){if("field"===e.type)return ce(e,t,n);if("group"===e.type){if(!r)return n.push({type:"nested-group",details:e}),null;var i=t[e.visibilityExpression]||null;return new X({description:e.description,state:e.initialState,fieldConfig:le(e.elements,t,n,!1),label:e.label,visibilityExpression:i})}return n.push({type:"unsupported-element-type",details:e}),null})).filter((function(e){return!!e}))}function ue(e){return!!e.inputFields}function de(e){return!!e.fieldConfig}var fe=new B.a({attributes:{}}),pe="esri.widgets.FeatureForm.FeatureFormViewModel",he=u.a.getLogger(pe),be=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e))._arcade=null,r._fieldPool=new N.a(ie),r._fieldGroupPool=new N.a(oe),r._featureClone=fe.clone(),r._initialFeature=fe.clone(),r._needsArcade=!1,r.messages=null,r.strict=!1,r}return Object(a.a)(n,[{key:"initialize",value:function(){var e=this,t=function(){var t=Object(M.a)(I.a.mark((function t(){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(U.a)("esri/widgets/FeatureForm/t9n/FeatureForm");case 2:return t.abrupt("return",e.messages=t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t(),this.handles.add(Object(R.c)(t));var n=Object(y.a)(this,"fieldConfig",function(){var t=Object(M.a)(I.a.mark((function t(r){var i,a,o,s,c;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=[],r&&r.forEach((function(e){i.push(e.visibilityExpression),de(e)?e.fieldConfig.forEach((function(e){var t=e.requiredExpression,n=e.visibilityExpression;i.push(t,n)})):i.push(e.requiredExpression)})),a=i.filter((function(e){return!!e})),!(o=a.length>0)){t.next=15;break}return t.next=6,Object(z.e)();case 6:if(s=t.sent,c=s.arcadeUtils,t.t0=a.some((function(e){return c.hasGeometryOperations(e)})),!t.t0){t.next=13;break}return t.next=12,c.enableGeometryOperations();case 12:n.remove();case 13:e._arcade=s,e.notifyChange("inputFields");case 15:e._needsArcade=o;case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());this.handles.add(n)}},{key:"destroy",value:function(){this.fieldConfig=null,this.feature=null,this.layer=null,this._fieldPool.destroy(),this._fieldGroupPool.destroy()}},{key:"_allInputFields",get:function(){return this.inputFields.reduce((function(e,t){return ue(t)?[].concat(Object(F.a)(e),Object(F.a)(t.inputFields)):[].concat(Object(F.a)(e),[t])}),[])}},{key:"_inputFieldCache",get:function(){var e=this,t=this._get("_inputFieldCache")||new Map;return t.forEach((function(t){return e._disposeInputOrGroup(t)})),t.clear(),(this.get("layer.fields")||[]).forEach((function(n){return t.set(n,e._fieldPool.acquire())})),t}},{key:"_inputFieldGroupCache",get:function(){var e=this,t=this._get("_inputFieldGroupCache")||new Map;return t.forEach((function(t){return e._disposeInputOrGroup(t)})),t.clear(),(this.fieldConfig||[]).filter(de).forEach((function(n){return t.set(n,e._fieldGroupPool.acquire())})),t}},{key:"description",get:function(){var e;return null==(e=this.formTemplate)?void 0:e.description},set:function(e){void 0===e?this._clearOverride("description"):this._override("description",e)}},{key:"feature",get:function(){return this._get("feature")},set:function(e){this._featureClone=e?e.clone():fe.clone(),this._initialFeature=this._featureClone.clone(),this._set("feature",e)}},{key:"fieldConfig",get:function(){var e=this.formTemplate;if(!e)return null;var t=function(e){var t,n={},r=[];return null==(t=e.expressionInfos)||t.map((function(e){return n[e.name]=e.expression})),{config:le(e.elements,n,r),encounteredUnsupportedTypes:r}}(e),n=t.config,r=t.encounteredUnsupportedTypes;return r.length>0&&he.warn("form-info::unsupported-type","encountered unsupported elements/types when parsing form info",r),n},set:function(e){e?this._override("fieldConfig",e):this._clearOverride("fieldConfig")}},{key:"castFieldConfig",value:function(e){return e?e.map((function(e){return e instanceof K||e instanceof X?e:de(e)?new X(e):new K(e)})):null}},{key:"formTemplate",get:function(){var e;return null==(e=this.layer)?void 0:e.formTemplate},set:function(e){void 0===e?this._clearOverride("formTemplate"):this._override("formTemplate",e)}},{key:"inputFields",get:function(){var e=this,t=this._arcade,n=this._inputFieldCache,r=this._inputFieldGroupCache,i=this._featureClone,a=this.messages,o=this._needsArcade,s=this.layer,c=this.state,l=i.clone();if("ready"!==c||o&&!t)return[];var u=this.get("layer.fields")||[],d=this.fieldConfig||[];return(0!==d.length?d.map((function(i){if(de(i)){var o=r.get(i),c=i.fieldConfig.map((function(r){var i=u.find((function(e){return e.name===r.name})),c=n.get(i);return c.set({arcade:t,field:i,config:r,feature:l,group:o,initialFeature:e._initialFeature,layer:s,messages:a,value:e.getValue(i.name)}),c})).filter((function(e){return e.visible}));return o.set({arcade:t,config:i,feature:l,inputFields:c}),o}var d=u.find((function(e){return e.name===i.name})),f=n.get(d);return f.set({arcade:t,field:d,config:i,feature:l,group:null,initialFeature:e._initialFeature,layer:s,messages:a,value:e.getValue(d.name)}),f})):u.map((function(r){var i=n.get(r);return i.set({arcade:t,config:null,field:r,feature:l,group:null,initialFeature:e._initialFeature,layer:s,messages:a,value:e.getValue(r.name)}),i}))).filter((function(e){return e.visible}))}},{key:"layer",get:function(){return this.get("feature.layer")},set:function(e){e?this._override("layer",e):this._clearOverride("layer")}},{key:"state",get:function(){return this.messages&&this.get("layer.loaded")?"ready":"disabled"}},{key:"title",get:function(){var e;return null==(e=this.formTemplate)?void 0:e.title},set:function(e){void 0===e?this._clearOverride("title"):this._override("title",e)}},{key:"valid",get:function(){var e=this._allInputFields;return e.length>0&&e.every((function(e){return e.valid}))}},{key:"findField",value:function(e){return this._allInputFields.find((function(t){return t.name===e}))}},{key:"getValue",value:function(e){var t,n=this._featureClone,r=this.layer,i=!(null==r||!r.getField(e));return null!=(t=n.getAttribute(e))?t:i?null:void 0}},{key:"setValue",value:function(e,t){var n=this,r=this._featureClone,i=this.strict,a=this.findField(e);if(t=""===t?null:t,a&&r.getAttribute(e)!==t){if(a.value=t,this.get("layer.typeIdField")===a.name){var o=new Set;this.layer.types.forEach((function(e){return Object.keys(e.domains).forEach((function(e){return o.add(e)}))})),o.forEach((function(e){var t=n.findField(e);t&&t.notifyChange("domain")}))}i&&!a.valid||(r.setAttribute(e,t),this.notifyChange("inputFields"),this._emitChangeEvent(a))}}},{key:"getValues",value:function(){return Object(C.a)({},this._featureClone.attributes)}},{key:"submit",value:function(){var e=this._allInputFields,t=e.filter((function(e){return e.valid})).map((function(e){return e.name})),n=e.filter((function(e){return!e.valid})).map((function(e){return e.name})),r=this.getValues();this.emit("submit",{valid:t,invalid:n,values:r})}},{key:"_disposeInputOrGroup",value:function(e){ue(e)?this._disposeGroup(e):this._disposeInput(e)}},{key:"_disposeGroup",value:function(e){var t=this;e.inputFields.forEach((function(e){return t._disposeInput(e)})),this._fieldGroupPool.release(e)}},{key:"_disposeInput",value:function(e){this._fieldPool.release(e)}},{key:"_emitChangeEvent",value:function(e){var t=e.name,n=e.valid,r=e.value;this.emit("value-change",{layer:this.layer,feature:this.feature,fieldName:t,value:r,valid:n})}}]),n}(Object(m.b)(V.a.EventedAccessor));Object(l.a)([Object(d.b)({readOnly:!0})],be.prototype,"_allInputFields",null),Object(l.a)([Object(d.b)({readOnly:!0})],be.prototype,"_inputFieldCache",null),Object(l.a)([Object(d.b)({readOnly:!0})],be.prototype,"_inputFieldGroupCache",null),Object(l.a)([Object(d.b)()],be.prototype,"description",null),Object(l.a)([Object(d.b)()],be.prototype,"feature",null),Object(l.a)([Object(d.b)()],be.prototype,"fieldConfig",null),Object(l.a)([Object(D.a)("fieldConfig")],be.prototype,"castFieldConfig",null),Object(l.a)([Object(d.b)({type:G.a})],be.prototype,"formTemplate",null),Object(l.a)([Object(d.b)({readOnly:!0,dependsOn:["messages","feature","fieldConfig","layer.fields","layer.loaded","state"]})],be.prototype,"inputFields",null),Object(l.a)([Object(d.b)()],be.prototype,"layer",null),Object(l.a)([Object(d.b)()],be.prototype,"messages",void 0),Object(l.a)([Object(d.b)()],be.prototype,"state",null),Object(l.a)([Object(d.b)()],be.prototype,"strict",void 0),Object(l.a)([Object(d.b)()],be.prototype,"title",null),Object(l.a)([Object(d.b)()],be.prototype,"valid",null),Object(l.a)([Object(d.b)()],be.prototype,"getValues",null),Object(l.a)([Object(d.b)()],be.prototype,"submit",null);var ve=be=Object(l.a)([Object(p.a)(pe)],be),ye="esri-feature-form",me="esri-feature-form__form",ge="esri-feature-form__form-header",Oe="esri-feature-form__label",je="esri-feature-form__input",we="esri-feature-form__input--date",_e="esri-feature-form__input--time",ke="esri-feature-form__input--radio-group",xe="esri-feature-form__input--radio",Se="esri-feature-form__input--radio-label",Te="esri-feature-form__input--disabled",Ee="esri-feature-form__input--invalid",Ce="esri-feature-form__input-icon--invalid",Pe="esri-feature-form__field-error-message",Ie="esri-feature-form__description-text",Me="esri-feature-form__date-input-part",Ae="esri-feature-form__date-input-part--lone",Re="esri-feature-form__date-input-container",Le="esri-feature-form__date-format-hint",Fe="esri-feature-form__group",De="esri-feature-form__group-label",Ne="esri-feature-form__group-header",Ve="esri-feature-form__group-title",ze="esri-feature-form__group-description",Ue="esri-feature-form__group-toggle-icon",Be="esri-feature-form__group--collapsed",Ge="esri-feature-form__group--sequential",qe="esri-feature-form__group--active",He="esri-icon-up",We="esri-icon-notice-triangle",$e="esri-icon-down",Je="esri-widget",Ye="esri-widget--panel",Ke="esri-input",Ze="esri-select",Xe="esri-widget__heading",Qe="L",et="LTS";function tt(e){return e&&e.inputFields}var nt=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r){var a;return Object(i.a)(this,n),(a=t.call(this,e,r))._activeDateEdit=null,a._activeInputName=null,a._fieldFocusNeeded=!1,a._fieldToInitialIncompatibleDomainValue=new Map,a._moment=null,a._userUpdatedInputFieldNames=new Set,a.description=null,a.feature=null,a.fieldConfig=null,a.formTemplate=null,a.groupDisplay="all",a.label=void 0,a.layer=null,a.messages=null,a.strict=null,a.title=null,a.viewModel=new ve,a._handleRadioInputChange=function(e){a._updateFieldValue(e.target)},a._handleFormKeyDown=a._handleFormKeyDown.bind(Object(o.a)(a)),a._handleInputBlur=a._handleInputBlur.bind(Object(o.a)(a)),a._handleInputFocus=a._handleInputFocus.bind(Object(o.a)(a)),a._handleNumberInputMouseDown=a._handleNumberInputMouseDown.bind(Object(o.a)(a)),a._handleInputKeyDown=a._handleInputKeyDown.bind(Object(o.a)(a)),a._handleOptionChange=a._handleOptionChange.bind(Object(o.a)(a)),a._handleGroupClick=a._handleGroupClick.bind(Object(o.a)(a)),a._handleSubmit=a._handleSubmit.bind(Object(o.a)(a)),a._afterInputCreateOrUpdate=a._afterInputCreateOrUpdate.bind(Object(o.a)(a)),a}return Object(a.a)(n,[{key:"loadLocale",value:function(){var e=Object(M.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.a)();case 2:this._moment=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initialize",value:function(){var e=this;this.own(this.watch("feature",(function(){var t=e._getFocusableInput("forward");e._activeInputName=t&&t.name,e._userUpdatedInputFieldNames.clear(),e._fieldToInitialIncompatibleDomainValue.clear(),e._fieldFocusNeeded=!0})),this.on("submit",(function(t){if(t.invalid.length>0){var n=Object(r.a)(t.invalid,1)[0];t.invalid.forEach((function(t){return e._userUpdatedInputFieldNames.add(t)})),e._activeInputName=n,e._fieldFocusNeeded=!0,e.scheduleRender()}})))}},{key:"destroy",value:function(){this._userUpdatedInputFieldNames.clear(),this._userUpdatedInputFieldNames=null}},{key:"getValues",value:function(){return null}},{key:"submit",value:function(){return null}},{key:"render",value:function(){var e=this.viewModel.state;return Object(_.a)("div",{class:this.classes(ye,Je,Ye)},"ready"===e?this.renderForm():null)}},{key:"renderForm",value:function(){var e=this.title?Object(_.a)("h2",{class:Xe,key:"title"},this.title):null,t=this.description?Object(_.a)("p",{class:Ie,key:"description"},this.description):null,n=e||t?Object(_.a)("div",{class:ge},e,t):null;return Object(_.a)("form",{class:me,novalidate:!0,onsubmit:this._handleSubmit,onkeydown:this._handleFormKeyDown},n,this.renderFields())}},{key:"renderFields",value:function(){var e=this;return this.viewModel.inputFields.map((function(t,n){return tt(t)?e.renderGroup(t,n):e.renderLabeledField(t)}))}},{key:"renderGroup",value:function(e,t){var n=this,r=e.description,i=e.label,a=e.inputFields,o=e.state,s=this.viewModel.findField(this._activeInputName),c=!(!s||s.group!==e),l="".concat(this.id,"_group_").concat(t),u="".concat(this.id,"_group-label_").concat(t),d="".concat(this.id,"_group-description_").concat(t),f=r?Object(_.a)("p",{class:this.classes(ze,Ie),id:d},r):null,p="sequential"===this.groupDisplay,h=p?c:"expanded"===o,b=h?He:$e;return Object(_.a)("fieldset",{"aria-expanded":h.toString(),"aria-labelledby":u,"aria-describedby":r?d:"",class:this.classes(Fe,p?Ge:null,h?null:Be,c?qe:null),"data-group":e,id:l,key:t,onclick:this._handleGroupClick},Object(_.a)("button",{role:p?"presentation":void 0,class:Ne,type:"button",tabIndex:p?-1:0},Object(_.a)("div",{class:Ve},Object(_.a)("h4",{class:this.classes(De,Xe),id:u},i),f),p?null:Object(_.a)("span",{class:this.classes(b,Ue)})),a.map((function(e){return n.renderLabeledField(e)})))}},{key:"_getFocusableInput",value:function(e,t){var n,r=this.viewModel._allInputFields,i="forward"===e?r:r.slice().reverse();if(t)if(tt(t))n=i.indexOf(t.inputFields[0]);else{var a;if(this._isFieldInClosedCollapsibleGroup(t)){var o=t.group.inputFields;a="forward"===e?o[o.length-1]:o[0]}else a=t;n=i.indexOf(a)+1}else n=0;for(var s=n;s<i.length;s++){var c=i[s];if(c.visible&&c.editable)return c}return null}},{key:"renderLabeledField",value:function(e){var t=e.label,n=e.layer,r=e.type;return Object(_.a)("label",{key:"".concat(n.id,"-").concat(e.name),class:Oe},[t,"unsupported"!==r?this.renderInputField(e):this.renderUnsupportedField(e),this.renderAuxiliaryText(e)])}},{key:"renderInputField",value:function(e){var t=this.viewModel,n=e.domain,r=e.editable,i=e.name,a=e.type,o=t.getValue(i),s=!r,c=this.getCommonInputProps(e);return"coded-value"!==(null==n?void 0:n.type)||s?"text"===a&&"text-area"===e.editorType||"rich-text"===e.editorType?Object(_.a)("textarea",Object.assign({},c)):"datetime-picker"===e.editorType||"date"===a?this.renderDateInputField(o,c):Object(_.a)("input",Object.assign({type:"text"===a?"text":"number"},c)):"radio-buttons"===e.editorType?this.renderRadioButtonsInputField(o,n.codedValues.map((function(e){return{value:e.code,name:e.name}})),c):this.renderSelectInputField(o,n.codedValues.map((function(e){return{value:e.code,name:e.name}})),c)}},{key:"renderDateInputField",value:function(e,t){var n=this._formatDate(0),r=n.date,i=n.time,a="".concat(this.id,"-").concat(t.key),o="".concat(a,"-date"),s="".concat(a,"-time"),c=t["data-field"],l=c.includeTime,u=this._formatDate(e),d=u.date,f=u.time;return Object(_.a)("div",{key:"".concat(t.key,"-date"),class:Re},Object(_.a)("div",{class:this.classes(Me,l?null:Ae)},Object(_.a)("input",Object.assign({"aria-label":c.label,"aria-describedby":o,type:"text"},t,{"data-date-part":"date",class:this.classes(t.class,we),value:d})),Object(_.a)("div",{class:Le,id:o},r)),l?Object(_.a)("div",{class:Me,key:"time-input"},Object(_.a)("input",Object.assign({"aria-describedby":s,"aria-label":c.label,type:"text"},t,{"data-date-part":"time",class:this.classes(t.class,_e),value:f})),Object(_.a)("div",{class:Le,id:s},i)):null)}},{key:"renderUnsupportedField",value:function(e){var t=this.viewModel.getValue(e.name);return Object(_.a)("input",{class:this.classes(Ke,je,Te),disabled:!0,type:"text",value:"".concat(t)})}},{key:"renderSelectInputField",value:function(e,t,n){var r=t.map((function(e){return Object(_.a)("option",{value:"".concat(e.value),key:e.name},e.name)})),i=n["data-field"];if(this.registerIncompatibleValue(e,t,i,(function(e){r.unshift(Object(_.a)("option",{value:"".concat(e),key:"incompatible-option",disabled:!0},e))})),!i.required&&("combo-box"!==i.editorType||i.config.showNoValueOption)){var a,o=(null==(a=i.config)?void 0:a.noValueOptionLabel)||this.messages.empty;r.unshift(Object(_.a)("option",{value:"",key:"empty-option"},o))}return Object(_.a)("select",Object.assign({},n,{class:this.classes(n.class,Ze),onchange:this._handleOptionChange}),r)}},{key:"registerIncompatibleValue",value:function(e,t,n,r){var i=this._fieldToInitialIncompatibleDomainValue,a=i.has(n.name);(a||null!=e&&""!==e&&!t.find((function(t){return t.value===e}))||a)&&(a||i.set(n.name,e),null==r||r(i.get(n.name)))}},{key:"renderRadioButtonsInputField",value:function(e,t,n){var r=this,i=n["data-field"],a=t.map((function(t){return r.renderRadioButton({key:t.name,label:t.name,name:i.name,value:t.value,selected:t.value===e,props:n})}));if(this.registerIncompatibleValue(e,t,i),!i.required&&(!i.config||i.config.showNoValueOption)){var o,s=(null==(o=i.config)?void 0:o.noValueOptionLabel)||this.messages.empty,c=""===e||null===e;a.unshift(this.renderRadioButton({key:"empty-option",label:s,name:i.name,value:"",selected:c,props:n}))}return Object(_.a)("div",{key:"".concat(n.key,"-radio"),class:ke},a)}},{key:"renderRadioButton",value:function(e){var t=e.key,n=e.name,r=e.value,i=e.selected,a=e.label,o=e.props;return Object(_.a)("label",{key:t,class:Se},Object(_.a)("input",Object.assign({},o,{class:xe,name:n,type:"radio",value:r,checked:i,onchange:this._handleRadioInputChange})),a)}},{key:"renderAuxiliaryText",value:function(e){return this._userUpdatedInputFieldNames.has(e.name)&&!e.valid?Object(_.a)("div",{key:"error-message"},Object(_.a)("span",{class:this.classes(Ce,We)}),Object(_.a)("div",{class:Pe},e.errorMessage)):e.description?Object(_.a)("div",{key:"description",class:Ie},e.description):void 0}},{key:"getCommonInputProps",value:function(e){var t=this.groupDisplay,n=this.viewModel,r=e.editable,i=e.group,a=e.hint,o=e.maxLength,s=e.minLength,c=e.name,l=e.required,u=e.type,d=e.valid,f=n.getValue(c),p=this._userUpdatedInputFieldNames.has(c),h=!r,b="all"===t&&"collapsed"===(null==i?void 0:i.state);return Object(C.a)(Object(C.a)({afterCreate:this._afterInputCreateOrUpdate,afterUpdate:this._afterInputCreateOrUpdate,"aria-invalid":d?"false":"true",class:this.classes(Ke,je,h?Te:null,p&&!d?Ee:null),key:c,minlength:s>-1?"".concat(s):"",maxlength:o>-1?"".concat(o):""},this._getNumberFieldConstraints(e)),{},{disabled:h,value:null==f?"":"".concat(f),"data-field":e,onfocus:this._handleInputFocus,onblur:this._handleInputBlur,onkeydown:this._handleInputKeyDown,onmousedown:"number"===u?this._handleNumberInputMouseDown:null,placeholder:"number"===u||"text"===u?a:"",required:l,tabIndex:b?-1:0})}},{key:"_isFieldInClosedCollapsibleGroup",value:function(e){var t;return"all"===this.groupDisplay&&!tt(e)&&"collapsed"===(null==e||null==(t=e.group)?void 0:t.state)}},{key:"_handleNumberInputMouseDown",value:function(e){var t=e.target;t.disabled||t.focus(),this.scheduleRender()}},{key:"_getNumberFieldConstraints",value:function(e){var t=Object(A.c)(e.domain)||Object(b.s)(e.field);return t&&t.max!==Number.MAX_VALUE&&t.min!==Number.MIN_VALUE?t:{min:null,max:null}}},{key:"_afterInputCreateOrUpdate",value:function(e){var t=e["data-field"],n=this.viewModel.findField(this._activeInputName),r=this._fieldToInitialIncompatibleDomainValue.get(t.name)===t.value;t.editable&&this._fieldFocusNeeded&&n===t&&("radio-buttons"!==t.editorType||r||e.checked)&&(this._fieldFocusNeeded=!1,e.focus())}},{key:"_handleInputFocus",value:function(e){var t=e.target;this._activeInputName=t["data-field"].name}},{key:"_handleInputBlur",value:function(e){var t=e.target,n=t["data-field"],r=e.relatedTarget,i=r&&r["data-field"];if(this._syncDateEditsBeforeValueCommit(t),i&&"date"===n.type&&"date"===i.type&&n.field===i.field){if(""!==t.value&&""===r.value){var a=r.getAttribute("data-date-part");r.value=this._formatDate(Date.now())[a]}}else("radio-buttons"!==n.editorType||t.checked)&&(this._commitValue(t),this.scheduleRender())}},{key:"_commitValue",value:function(e){var t=e["data-field"];if(this._activeDateEdit){var n=this._activeDateEdit,r=n.date,i=n.time,a=this._getDateEditValue(t,"date"),o=this._getDateEditValue(t,"time"),s=""===a||""===o;if(r)r.input.value=s?"":a;if(i)i.input.value=s?"":o;if(this._activeDateEdit=null,r&&i)return void this._updateDateFieldValue(r.input,i.input)}this._updateFieldValue(e)}},{key:"_getDateEditValue",value:function(e,t){var n=this._activeDateEdit[t];if(n){if(""===n.value)return"";var r=this._parseDate(n.value,t);return r?this._formatDate(r.getTime())[t]:this._formatDate(e.value)[t]}}},{key:"_handleInputKeyDown",value:function(e){var t=e.key,n=e.altKey,r=e.ctrlKey,i=e.metaKey,a=e.shiftKey,o=e.target,s=o["data-field"];if("Tab"===t){var c=a?"backward":"forward",l=o.getAttribute("data-date-part");if(this._syncDateEditsBeforeValueCommit(o),"backward"===c&&"time"===l||"forward"===c&&"date"===l&&s.includeTime)return;this._commitValue(o);var u=this.viewModel.findField(s.name),d=this._getFocusableInput(c,u),f=u.group===(null==d?void 0:d.group);return this._activeInputName=null==d?void 0:d.name,void(d&&("sequential"===this.groupDisplay||f)?(e.preventDefault(),this._fieldFocusNeeded=!0):this.renderNow())}if("Enter"===t)this._isFieldInClosedCollapsibleGroup(s)?s.group.state="expanded":(this._updateFieldValue(e.target),this.scheduleRender());else{var p=s.field.type,h="single"===p||"double"===p;if(("integer"===p||"small-integer"===p||h)&&(!n&&!r&&!i)&&1===t.length){var b=Number(t),v=["-","+"],y=h?[].concat(v,["e","."]):v;isNaN(b)&&-1===y.indexOf(t)&&e.preventDefault()}}}},{key:"_syncDateEditsBeforeValueCommit",value:function(e){if("date"===e["data-field"].type){var t=e.getAttribute("data-date-part");this._activeDateEdit=Object(C.a)(Object(C.a)({},this._activeDateEdit),{},Object(E.a)({},t,{value:e.value,input:e}))}}},{key:"_updateFieldValue",value:function(e){var t=e["data-field"];this.viewModel.setValue(t.name,this._parseValue(e)),this._userUpdatedInputFieldNames.add(t.name)}},{key:"_updateDateFieldValue",value:function(e,t){var n=e["data-field"];this.viewModel.setValue(n.name,this._parseDateTimeValue(e,t)),this._userUpdatedInputFieldNames.add(n.name)}},{key:"_parseValue",value:function(e){var t=e["data-field"],n=e.value;if("radio-buttons"===t.editorType&&"radio"===e.type&&!e.checked)return t.value;var r=t.type;if("number"===r)return n?parseFloat(n):null;if("date"===r){if(!n)return null;var i=Number(n);if(!isNaN(i))return i;var a=e.getAttribute("data-date-part"),o=this._parseDate(n,a);if(!o)return null;var s=this._moment,c=s(o),l=t.domain,u=s(),d=u;if(l&&"range"===l.type){var f=s(l.maxValue);u.isAfter(f)||(d=f)}var p=this.viewModel.getValue(t.name),h=s(null!=p?p:d);return"date"===a?(c.hour(h.hour()),c.minutes(h.minutes()),c.seconds(h.seconds())):(c.date(h.date()),c.month(h.month()),c.year(h.year())),c.valueOf()}return n}},{key:"_parseDateTimeValue",value:function(e,t){var n=e.value,r=t.value;if(!n||!r)return null;var i=this._parseDate(n,"date"),a=this._parseDate(r,"time");if(!i||!a)return null;var o=this._moment(i),s=this._moment(a);return o.hour(s.hour()),o.minutes(s.minutes()),o.seconds(s.seconds()),o.valueOf()}},{key:"_handleOptionChange",value:function(e){this._updateFieldValue(e.target),this.scheduleRender()}},{key:"_handleGroupClick",value:function(e){var t,n=e.currentTarget["data-group"],r="expanded"===n.state,i="sequential"===this.groupDisplay,a=".".concat(Ne);if(!r||e.target.closest(a)){if(this._activeInputName=null==(t=this._getFocusableInput("forward",n))?void 0:t.name,i){var o=e.target.closest(a);if(r&&!o)return;this.viewModel.inputFields.forEach((function(e){tt(e)&&e!==n&&(e.state="collapsed")}))}n.state=r?"collapsed":"expanded",this._fieldFocusNeeded=i,this.scheduleRender()}}},{key:"_handleSubmit",value:function(e){e.preventDefault()}},{key:"_handleFormKeyDown",value:function(e){"Enter"===e.key&&this.viewModel.submit()}},{key:"_formatDate",value:function(e){if(null==e)return{date:"",time:""};var t=this._moment(e);return{date:t.format(Qe),time:t.format(et)}}},{key:"_parseDate",value:function(e,t){if(null==e||""===e)return null;var n=this._moment(e,"date"===t?Qe:et,Object(R.b)(),!1);return n.isValid()?n.toDate():null}}]),n}(k.a);Object(l.a)([Object(f.a)("viewModel.description")],nt.prototype,"description",void 0),Object(l.a)([Object(f.a)("viewModel.feature")],nt.prototype,"feature",void 0),Object(l.a)([Object(f.a)("viewModel.fieldConfig")],nt.prototype,"fieldConfig",void 0),Object(l.a)([Object(f.a)("viewModel.formTemplate")],nt.prototype,"formTemplate",void 0),Object(l.a)([Object(d.b)()],nt.prototype,"groupDisplay",void 0),Object(l.a)([Object(d.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],nt.prototype,"label",void 0),Object(l.a)([Object(f.a)("viewModel.layer")],nt.prototype,"layer",void 0),Object(l.a)([Object(d.b)(),Object(j.a)("esri/widgets/FeatureForm/t9n/FeatureForm")],nt.prototype,"messages",void 0),Object(l.a)([Object(f.a)("viewModel.strict")],nt.prototype,"strict",void 0),Object(l.a)([Object(f.a)("viewModel.title")],nt.prototype,"title",void 0),Object(l.a)([Object(d.b)(),Object(w.a)(["value-change","submit"])],nt.prototype,"viewModel",void 0),Object(l.a)([Object(f.a)("viewModel.getValues")],nt.prototype,"getValues",null),Object(l.a)([Object(f.a)("viewModel.submit")],nt.prototype,"submit",null);var rt=nt=Object(l.a)([Object(p.a)("esri.widgets.FeatureForm")],nt),it="esri-item-list",at="esri-item-list__list",ot="esri-item-list__group",st="esri-item-list__scroller",ct="esri-item-list__group-header",lt="esri-item-list__list-item",ut="esri-item-list__list-item-container",dt="esri-item-list__list-item-label",ft="esri-item-list__no-matches-message",pt="esri-item-list__filter-container",ht="esri-item-list__filter-placeholder",bt="esri-item-list__filter-input",vt="esri-item-list__filter-placeholder-text",yt="esri-icon-search",mt="esri-widget",gt="esri-input";function Ot(e){var t=e.id,n=e.identify,r=e.filterEnabled,i=void 0===r||r,a=e.items,o=e.messages,s=e.filterText,c=void 0===s?"":s,l=e.onFilterChange,u=e.renderIcon,d=e.onItemMouseLeave,f=e.onItemMouseEnter,p=e.onItemSelect;return Object(_.a)("div",{class:Object(g.a)(it,mt)},i?function(e){var t="".concat(e.id,"-placeholder");return Object(_.a)("div",{class:pt,key:"filter"},Object(_.a)("input",{"aria-labelledby":t,class:Object(g.a)(gt,bt),oninput:function(t){var n=t.currentTarget;e.onFilterChange&&e.onFilterChange(n.value)},value:e.filterText,type:"search"}),e.filterText?null:Object(_.a)("div",{class:ht,id:t,key:"placeholder"},Object(_.a)("span",{class:yt,"aria-hidden":"true"}),Object(_.a)("div",{class:vt},e.messages.filterPlaceholder)))}({filterText:c,messages:o,onFilterChange:l,id:t}):null,function(e){var t=e.identify,n=e.items,r=e.renderIcon,i=e.filterText,a=e.onItemMouseLeave,o=e.onItemMouseEnter,s=e.onItemSelect;return 0===n.length?Object(_.a)("div",{class:ft,key:"no-matches"},e.messages.noMatches):(c=n[0],c.items?Object(_.a)("div",{class:st,key:"item-container"},n.map((function(e){return function(e){var t=e.group,n=e.identify,r=e.onItemMouseLeave,i=e.onItemMouseEnter,a=e.onItemSelect,o=e.filterText,s=e.renderIcon,c="".concat(n&&n(t)||t.id,"-heading");return Object(_.a)("section",{"aria-labelledby":c,class:ot,key:t.label},Object(_.a)("h4",{"aria-level":"1",id:c,class:Object(g.a)(ct)},wt({text:t.label,match:o})),Object(_.a)("ul",{class:at},t.items.map((function(e){return jt({item:e,identify:n,grouped:!0,onItemMouseLeave:r,onItemMouseEnter:i,onItemSelect:a,renderIcon:s,filterText:o})}))))}({group:e,filterText:i,identify:t,renderIcon:r,onItemMouseLeave:a,onItemMouseEnter:o,onItemSelect:s})}))):Object(_.a)("ul",{class:Object(g.a)(at,st),key:"item-container"},n.map((function(e){return jt({item:e,identify:t,grouped:!0,onItemMouseLeave:a,onItemMouseEnter:o,onItemSelect:s,renderIcon:r,filterText:i})}))));var c}({identify:n,items:a,messages:o,filterText:c,renderIcon:u,onItemMouseLeave:d,onItemMouseEnter:f,onItemSelect:p}))}function jt(e){var t=e.identify,n=e.item,r=e.grouped,i=e.filterText,a=e.onItemSelect,o=e.onItemMouseEnter,s=e.onItemMouseLeave,c=e.renderIcon,l="".concat(t&&t(n)||n.id,"__").concat(n.label);return Object(_.a)("li",{"aria-level":r?"2":"",class:lt,"data-item":n,key:l,onclick:function(e){var t=e.currentTarget["data-item"];a&&a(t)},onmouseenter:function(e){var t=e.currentTarget["data-item"];o&&o(t)},onkeydown:function(e){if("Enter"===e.key||"Space"===e.key){var t=e.currentTarget["data-item"];a&&a(t)}},onmouseleave:function(e){var t=e.currentTarget["data-item"];s&&s(t)},tabIndex:0},Object(_.a)("div",{class:ut},c&&c({item:n}),wt({text:n.label,match:i})))}function wt(e){var t=e.match,n=e.text,r=null;if(t){var i=n.toLowerCase(),a=t.toLowerCase(),o=i.indexOf(a);if(-1===o)r=n;else{var s=n.substring(0,o),c=n.substr(o,t.length),l=n.substring(o+t.length);r=Object(_.a)("span",null,s,Object(_.a)("strong",null,c),l)}}else r=n;return Object(_.a)("span",{class:dt},r)}var _t,kt=n(198),xt=n(145),St=n(161),Tt=function(e){return"".concat(e.label,"-").concat(e.layer.id)},Et=_t=function(e){Object(s.a)(r,e);var t=Object(c.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e))._activeFetchInfo={id:null,request:null},n.description=null,n.label=null,n.layer=null,n.template=null,n.thumbnail=null,n}return Object(a.a)(r,[{key:"initialize",value:function(){var e=this;this.handles.add(Object(y.a)(this,["layer.renderer","template"],(function(){e._activeFetchInfo.id=null,e._activeFetchInfo.request=null,e._set("thumbnail",null)})))}},{key:"clone",value:function(){var e=this.thumbnail?this.thumbnail.cloneNode(!0):null,t=new _t({layer:this.layer,template:this.template});return t._set("thumbnail",e),t}},{key:"fetchThumbnail",value:function(){var e=Object(M.a)(I.a.mark((function e(){var t,n=this;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._activeFetchInfo,e.abrupt("return",(Tt(this)===t.id||(t.id=Tt(this),t.request=this._getPreviewSymbol().then(function(){var e=Object(M.a)(I.a.mark((function e(r){var i,a,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Tt(n)===t.id){e.next=2;break}return e.abrupt("return");case 2:return a={maxSize:36},"dictionary"===(null==(i=n.layer.renderer)?void 0:i.type)&&(a.fieldMap=n.layer.renderer.fieldMap,a.feature={attributes:n.template.prototype.attributes}),e.next=6,Object(St.d)(r,a);case 6:o=e.sent,Tt(n)===t.id&&n._set("thumbnail",o);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),t.request));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getPreviewSymbol",value:function(){var e=Object(M.a)(I.a.mark((function e(){var t,n,r,i,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.layer,n=this.template,!(r=this.layer.renderer)){e.next=8;break}return i=new B.a({attributes:n.prototype.attributes}),e.next=5,r.getSymbolAsync(i);case 5:if(!(a=e.sent)){e.next=8;break}return e.abrupt("return",a);case 8:return e.abrupt("return",this._getFallbackSymbolFromGeometry(t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getFallbackSymbolFromGeometry",value:function(e){var t=e.geometryType;return"point"===t||"multipoint"===t?Promise.resolve().then(n.bind(null,116)).then((function(e){return new e.default})):"polyline"===t?Promise.resolve().then(n.bind(null,120)).then((function(e){return new e.default})):"polygon"===t||"mesh"===t||"multipatch"===t?Promise.resolve().then(n.bind(null,130)).then((function(e){return new e.default})):void 0}}]),r}(Object(m.b)(q.a));Object(l.a)([Object(d.b)({aliasOf:"template.description"})],Et.prototype,"description",void 0),Object(l.a)([Object(d.b)({aliasOf:"template.name"})],Et.prototype,"label",void 0),Object(l.a)([Object(d.b)()],Et.prototype,"layer",void 0),Object(l.a)([Object(d.b)()],Et.prototype,"template",void 0),Object(l.a)([Object(d.b)({readOnly:!0})],Et.prototype,"thumbnail",void 0);var Ct=Et=_t=Object(l.a)([Object(p.a)("esri.widgets.FeatureTemplates.TemplateItem")],Et),Pt=n(192),It=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).items=null,r.label=null,r}return n}(Object(Pt.a)(q.a));Object(l.a)([Object(d.b)()],It.prototype,"items",void 0),Object(l.a)([Object(d.b)()],It.prototype,"label",void 0);var Mt=It=Object(l.a)([Object(p.a)("esri.widgets.FeatureTemplates.TemplateItemGroup")],It),At=function(e){var t=e.layer;return{key:t,label:t.title}},Rt=function(e){return e.layer.geometryType},Lt=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e))._templateToLayer=new Map,r._itemPool=new xt.a(Ct),r._groupPool=new xt.a(Mt),r.filterFunction=null,r.groupBy="layer",r}return Object(a.a)(n,[{key:"destroy",value:function(){this._templateToLayer.clear(),this._templateToLayer=null}},{key:"layers",get:function(){return this._get("layers")},set:function(e){var t=this;if(this.handles.removeAll(),e){var n=function(){return t.notifyChange("state")};this.handles.add(e.map((function(e){return Object(y.e)(e,"loadStatus",n)})))}this._set("layers",e)}},{key:"state",get:function(){var e=this.layers;return e&&0!==e.length?e.some((function(e){return"loading"===e.loadStatus||"not-loaded"===e.loadStatus}))?"loading":"ready":"disabled"}},{key:"items",get:function(){var e=this,t=this.layers;if(this._destroyItems(this._get("items")),!t||0===t.length)return[];this._templateToLayer.clear();var n=t.filter((function(e){var t=e.capabilities;return e.loaded&&t.operations.supportsEditing&&t.operations.supportsAdd})).map((function(t){var n=e._getTemplatesForLayer(t);if(n.length>0)return n.forEach((function(n){return e._templateToLayer.set(n,t)})),n})).filter((function(e){return null!=e})),r=this.groupBy;if("none"===r)return n.map((function(t){return t.filter((function(t){var n=t.name;return!e.filterFunction||e.filterFunction({label:n})}))})).map((function(t){return t.map((function(t){return e._createItem(t)}))})).reduce((function(e,t){return[].concat(Object(F.a)(e),Object(F.a)(t))}),[]);var i=n.reduce((function(t,n){return n.forEach((function(n){var i=("layer"===r?At:"geometry"===r?Rt:r)({template:n,layer:e._templateToLayer.get(n)});if(i){var a="string"==typeof i?i:i.key,o="string"==typeof i?i:i.label;t.has(a)||t.set(a,{label:o,templates:[]}),t.get(a).templates.push(n)}})),t}),new Map);if(0===i.size)return[];var a=[],o=this.filterFunction;return i.forEach((function(t){var n=t.label,r=t.templates;if(!o||e.filterFunction(t))a.push(e._createGroup(n,r.map((function(t){return e._createItem(t)}))));else{var i=r.filter((function(t){var n=t.name;return e.filterFunction({label:n})})).map((function(t){return e._createItem(t)}));i.length>0&&a.push(e._createGroup(n,i))}})),a}},{key:"refresh",value:function(){this.notifyChange("items")}},{key:"select",value:function(e){var t=e.clone();this.emit("select",{item:t,template:t.template})}},{key:"_getTemplatesForLayer",value:function(e){return[].concat(Object(F.a)(e.templates||[]),Object(F.a)((e.types||[]).map((function(e){return e.templates})).reduce((function(e,t){return[].concat(Object(F.a)(e),Object(F.a)(t))}),[])))}},{key:"_createItem",value:function(e){var t=this._itemPool.acquire();return t.set({template:e,layer:this._templateToLayer.get(e)}),t}},{key:"_createGroup",value:function(e,t){var n=this._groupPool.acquire();return n.set("label",e),n.items=t,n}},{key:"_destroyItems",value:function(e){var t=this;e&&(e[0]instanceof Ct?e.forEach((function(e){return t._destroyItem(e)})):e.forEach((function(e){return t._destroyGroup(e)})))}},{key:"_destroyGroup",value:function(e){var t=this;e.items.forEach((function(e){return t._destroyItem(e)})),e.items.length=0,this._groupPool.release(e)}},{key:"_destroyItem",value:function(e){e.layer=null,e.template=null,this._itemPool.release(e)}}]),n}(Object(m.b)(V.a.EventedAccessor));Object(l.a)([Object(d.b)()],Lt.prototype,"filterFunction",void 0),Object(l.a)([Object(d.b)()],Lt.prototype,"groupBy",void 0),Object(l.a)([Object(d.b)()],Lt.prototype,"layers",null),Object(l.a)([Object(d.b)()],Lt.prototype,"state",null),Object(l.a)([Object(d.b)({readOnly:!0})],Lt.prototype,"items",null);var Ft=Lt=Object(l.a)([Object(p.a)("esri.widgets.FeatureTemplates.FeatureTemplatesViewModel")],Lt),Dt="esri-feature-templates",Nt="esri-feature-templates__loader",Vt="esri-feature-templates__list-item-icon",zt="esri-widget";function Ut(e){return e.label}var Bt=u.a.getLogger("esri.widgets.FeatureTemplates"),Gt={filter:!0},qt=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r){var a;return Object(i.a)(this,n),(a=t.call(this,e,r))._iconIntersectionObserver=new IntersectionObserver((function(e,t){e.forEach(function(){var e=Object(M.a)(I.a.mark((function e(n){var r,i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isIntersecting){e.next=9;break}if((r=n.target)["data-has-icon"]){e.next=9;break}return i=r["data-item"],r["data-has-icon"]=!0,t.unobserve(r),e.next=8,i.fetchThumbnail();case 8:r["data-item"]===i&&i.thumbnail?r.appendChild(i.thumbnail):(r["data-has-icon"]=!1,t.observe(r));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),a.filterFunction=null,a.filterText="",a.groupBy=null,a.label=void 0,a.layers=null,a.messages=null,a.viewModel=new Ft,a.visibleElements=Object(C.a)({},Gt),a.renderItemIcon=a.renderItemIcon.bind(Object(o.a)(a)),a._afterItemCreateOrUpdate=a._afterItemCreateOrUpdate.bind(Object(o.a)(a)),a._afterItemRemoved=a._afterItemRemoved.bind(Object(o.a)(a)),a}return Object(a.a)(n,[{key:"initialize",value:function(){var e=this,t=function(t){var n=t.label;return!e.filterText||n.toLowerCase().indexOf(e.filterText.toLowerCase())>-1};this.own(Object(y.a)(this,"viewModel",(function(n,r){n&&!n.filterFunction&&(e.filterFunction=t),r&&r!==n&&r.filterFunction===t&&(r.filterFunction=null)})))}},{key:"destroy",value:function(){this._iconIntersectionObserver&&(this._iconIntersectionObserver.disconnect(),this._iconIntersectionObserver=null)}},{key:"filterEnabled",set:function(e){Object(kt.c)(Bt,"filterEnabled",{replacement:"visibleElements.filter",version:"4.15"}),this.visibleElements=Object(C.a)(Object(C.a)({},this.visibleElements),{},{filter:e})}},{key:"castVisibleElements",value:function(e){return Object(C.a)(Object(C.a)({},Gt),e)}},{key:"render",value:function(){var e=this,t=this.filterText,n=this.messages,r=this.viewModel,i=r.items,a=r.state,o=this.visibleElements.filter;return Object(_.a)("div",{class:this.classes(Dt,zt),"aria-label":n.widgetLabel},"loading"===a?this.renderLoader():"ready"===a?Ot({id:this.id,identify:Ut,filterText:t,items:i,messages:{filterPlaceholder:n.filterPlaceholder,noItems:n.noItems,noMatches:n.noMatches},filterEnabled:o,onItemSelect:function(t){e.viewModel.select(t)},onFilterChange:function(t){e.filterText=t,e.viewModel.refresh()},renderIcon:this.renderItemIcon}):null)}},{key:"renderItemIcon",value:function(e){var t=e.item;return Object(_.a)("span",{key:"icon",class:Vt,afterCreate:this._afterItemCreateOrUpdate,afterUpdate:this._afterItemCreateOrUpdate,afterRemoved:this._afterItemRemoved,"data-item":t,"data-has-icon":!1})}},{key:"renderLoader",value:function(){return Object(_.a)("div",{class:Nt,key:"loader"})}},{key:"_afterItemCreateOrUpdate",value:function(e){this._iconIntersectionObserver.observe(e)}},{key:"_afterItemRemoved",value:function(e){this._iconIntersectionObserver.unobserve(e)}}]),n}(Object(m.b)(k.a));Object(l.a)([Object(d.b)()],qt.prototype,"filterEnabled",null),Object(l.a)([Object(f.a)("viewModel.filterFunction")],qt.prototype,"filterFunction",void 0),Object(l.a)([Object(d.b)()],qt.prototype,"filterText",void 0),Object(l.a)([Object(f.a)("viewModel.groupBy")],qt.prototype,"groupBy",void 0),Object(l.a)([Object(d.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],qt.prototype,"label",void 0),Object(l.a)([Object(f.a)("viewModel.layers")],qt.prototype,"layers",void 0),Object(l.a)([Object(d.b)(),Object(j.a)("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],qt.prototype,"messages",void 0),Object(l.a)([Object(d.b)(),Object(w.a)("select")],qt.prototype,"viewModel",void 0),Object(l.a)([Object(d.b)()],qt.prototype,"visibleElements",void 0),Object(l.a)([Object(D.a)("visibleElements")],qt.prototype,"castVisibleElements",null);var Ht=qt=Object(l.a)([Object(p.a)("esri.widgets.FeatureTemplates")],qt),Wt=n(18),$t=n(40),Jt=n(221),Yt=n(364),Kt=n(460),Zt=n(779),Xt=n(4),Qt=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).creationInfo=null,r.edits=null,r.viewModel=null,r}return n}(q.a);Object(l.a)([Object(d.b)()],Qt.prototype,"creationInfo",void 0),Object(l.a)([Object(d.b)()],Qt.prototype,"edits",void 0),Object(l.a)([Object(d.b)()],Qt.prototype,"viewModel",void 0);var en=Qt=Object(l.a)([Object(p.a)("esri.widgets.Editor.CreateWorkflowData")],Qt);function tn(e){return Object(Xt.j)(e)?null:JSON.stringify(e)}var nn=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e))._baselineAttributesJSON=null,r._baselineGeometryJSON=null,r.feature=null,r}return Object(a.a)(n,[{key:"attributesModified",get:function(){var e=this._baselineAttributesJSON,t=this.feature;return!(!t||e===tn(t.attributes))}},{key:"geometryModified",get:function(){var e=this._baselineGeometryJSON,t=this.feature;return!(!t||e===tn(t.geometry))}},{key:"modified",get:function(){return this.attributesModified||this.geometryModified}},{key:"trackChanges",value:function(){this.feature&&(this._baselineAttributesJSON=tn(this.feature.attributes),this._baselineGeometryJSON=tn(this.feature.geometry),this.notifyChange("attributesModified"),this.notifyChange("geometryModified"))}},{key:"updateAttributes",value:function(e){this.feature.attributes=e,this.notifyChange("attributesModified")}},{key:"updateGeometry",value:function(e){this.feature.geometry=e,this.notifyChange("geometryModified")}}]),n}(Object(m.b)(q.a));Object(l.a)([Object(d.b)()],nn.prototype,"attributesModified",null),Object(l.a)([Object(d.b)()],nn.prototype,"feature",void 0),Object(l.a)([Object(d.b)()],nn.prototype,"geometryModified",null),Object(l.a)([Object(d.b)()],nn.prototype,"modified",null);var rn=nn=Object(l.a)([Object(p.a)("esri.widgets.Editor.Edits")],nn),an=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e))._indexHistory=[],r._lastStepIndex=-1,r._stepIndex=-1,r._handleKeys={afterCommit:"after-commit",beforeCommit:"before-commit"},r.data=null,r.started=!1,r.steps=null,r.type=null,r}return Object(a.a)(n,[{key:"hasNextStep",get:function(){var e=this.steps;return!!(e&&this._stepIndex<e.filter((function(e){return!e.parent})).length-1)}},{key:"hasPreviousStep",get:function(){return this._stepIndex>0}},{key:"stepId",get:function(){var e=this.steps,t=e&&e[this._stepIndex];return t&&t.id}},{key:"cancel",value:function(){var e=Object(M.a)(I.a.mark((function e(){var t,n=this,r=arguments;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{force:!0},e.abrupt("return",!1!==t.force?this._cancel():new Promise((function(e,t){n.emit("cancel-request",{controller:{allow:function(){n._cancel().then(e)},deny:function(){return t(new Wt.a("workflow:cancel-denied","Request to cancel workflow was denied."))}}})})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"commit",value:function(){var e=Object(M.a)(I.a.mark((function e(){var t,n,r,i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.data,this.handles.remove(this._handleKeys.beforeCommit),n=t.edits.feature,r=n.clone(),t.edits.attributesModified||(i=n.layer.objectIdField,r.attributes=Object(E.a)({},i,n.getAttribute(i))),t.edits.geometryModified||(r.geometry=null),e.next=7,this.afterCommit(r);case 7:if(this.handles.remove(this._handleKeys.afterCommit),this.emit("commit"),e.t0=this.started,!e.t0){e.next=13;break}return e.next=13,this.reset();case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"go",value:function(){var e=Object(M.a)(I.a.mark((function e(t){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.steps,r=n.findIndex((function(e){return e.id===t})),this._indexHistory.push(this._stepIndex),e.next=4,this._go(r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"next",value:function(){var e=Object(M.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._indexHistory.push(this._stepIndex),e.next=3,this._go(this._stepIndex+1);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"previous",value:function(){var e=Object(M.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._go(this._indexHistory.pop());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reset",value:function(){var e=Object(M.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._cancel(!1);case 2:return e.next=4,this.start();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=Object(M.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._set("started",!0),t=-1===this._stepIndex?0:this._stepIndex,e.next=4,this._go(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_cancel",value:function(){var e=Object(M.a)(I.a.mark((function e(){var t,n=arguments;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(n.length>0&&void 0!==n[0])||n[0],e.t0=this.started,!e.t0){e.next=6;break}return this._set("started",!1),e.next=6,this.steps[this._stepIndex].tearDown();case 6:this.handles.remove([this._handleKeys.afterCommit,this._handleKeys.beforeCommit]),this._resetIndexing(t),t&&this.emit("cancel");case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_go",value:function(){var e=Object(M.a)(I.a.mark((function e(){var t,n=arguments;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=n.length>0&&void 0!==n[0]?n[0]:-1)<=-1||t>=this.steps.length){e.next=13;break}if(this.started){e.next=4;break}return e.abrupt("return",(this._stepIndex=t,void this._notifyStepProps()));case 4:if(e.t0=this._lastStepIndex>-1,!e.t0){e.next=8;break}return e.next=8,this.steps[this._lastStepIndex].tearDown();case 8:return e.next=10,this.steps[t].setUp();case 10:this._lastStepIndex=t,this._stepIndex=t,this._notifyStepProps();case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_resetIndexing",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._stepIndex=-1,this._lastStepIndex=-1,this._indexHistory.length=0,e&&this._notifyStepProps()}},{key:"_notifyStepProps",value:function(){this.notifyChange("stepId"),this.notifyChange("hasPreviousStep"),this.notifyChange("hasNextStep")}}]),n}(Object(m.b)(V.a.EventedAccessor));Object(l.a)([Object(d.b)()],an.prototype,"afterCommit",void 0),Object(l.a)([Object(d.b)()],an.prototype,"data",void 0),Object(l.a)([Object(d.b)()],an.prototype,"hasNextStep",null),Object(l.a)([Object(d.b)()],an.prototype,"hasPreviousStep",null),Object(l.a)([Object(d.b)()],an.prototype,"started",void 0),Object(l.a)([Object(d.b)({readOnly:!0})],an.prototype,"stepId",null),Object(l.a)([Object(d.b)()],an.prototype,"steps",void 0),Object(l.a)([Object(d.b)()],an.prototype,"type",void 0),Object(l.a)([Object(d.b)()],an.prototype,"commit",null);var on=an=Object(l.a)([Object(p.a)("esri.widgets.Editor.Workflow")],an),sn=n(24),cn=n(38),ln=n(318),un=n(171),dn=n(386),fn=n(289),pn=n(466);function hn(e,t){return bn.apply(this,arguments)}function bn(){return(bn=Object(M.a)(I.a.mark((function e(t,n){var r,i,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("2d"!==t.type){e.next=2;break}return e.abrupt("return",t.hitTest(n));case 2:return e.next=4,t.hitTest(n);case 4:return r=e.sent,i=r.results[0],a=r.results.findIndex((function(e){return e.distance!==i.distance})),e.abrupt("return",(-1!==a&&(r.results=r.results.slice(0,a)),r));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vn=n(483),yn=n(606);function mn(e){var t=e.layer,n=function(e){switch(e.type){case"class-breaks":case"simple":case"unique-value":case"dot-density":case"dictionary":return!0;default:return!1}}(t.renderer)&&Object(dn.getVisualVariableValues)(t.renderer,e),r=n?n.map((function(e){return e.variable})):[],i=r.filter((function(e){return"rotation"===e.type&&(!e.axis||"heading"===e.axis)})),a=i[0],o=1===i.length&&a.field&&!a.valueExpression,s=r.filter((function(e){return"size"===e.type})),c=s[0],l=1===s.length&&"real-world-size"===Object(un.b)(c)&&c.field&&!c.useSymbolValue&&!c.valueExpression;return{rotation:o?gn(a,t):null,size:l?_n(c,t):null}}function gn(e,t){var n="heading"===(e.axis||"heading")&&"arithmetic"===e.rotationType?-1:1,r=e.field,i=t.fields&&t.fields.filter((function(e){return e.name===r})),a=i&&1===i.length?i[0].type:"double",o={initial:0,current:0};return{field:r,getDefault:function(){return Promise.resolve(0)},getValue:function(e){return o.current=o.initial-n*e,kn((o.current+360)%360,a)},initValue:function(e){o.initial=null!=e?e:o.current,o.current=0},isUpdatingInteractively:!1}}function On(e,t){switch(t){case"width":return e[0];case"depth":return e[1];case"height":return e[2];default:return e[2]||e[1]||e[0]}}function jn(e,t,n){return wn.apply(this,arguments)}function wn(){return(wn=Object(M.a)(I.a.mark((function e(t,r,i){var a,o,s,c,l,u,d;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(Xt.j)(r)){e.next=2;break}return e.abrupt("return",0);case 2:if(a=Object(fn.a)(r),o=a.symbol,!Object(Xt.j)(o)&&"web-style"!==o.type){e.next=5;break}return e.abrupt("return",0);case 5:if(s=o.symbolLayers.getItemAt(0)){e.next=8;break}return e.abrupt("return",0);case 8:e.t0=s.type,e.next="icon"===e.t0?11:"text"===e.t0?27:"line"===e.t0?28:"object"===e.t0?29:"path"===e.t0||"extrude"===e.t0?39:("fill"===e.t0||e.t0,40);break;case 11:return e.next=13,n.e(19).then(n.bind(null,1035));case 13:if(c=e.sent,l=c.computeIconLayerResourceSize,e.t2=s.size,e.t2){e.next=23;break}return e.t3=Math,e.t4=Gn.icon,e.next=21,l(s,Gn.icon);case 21:e.t5=e.sent[0],e.t2=e.t3.min.call(e.t3,e.t4,e.t5);case 23:if(e.t1=e.t2,e.t1){e.next=26;break}e.t1=Gn.icon;case 26:return e.abrupt("return",e.t1);case 27:return e.abrupt("return",s.size||Gn.text);case 28:return e.abrupt("return",s.size||Gn.line);case 29:return e.next=31,n.e(19).then(n.bind(null,1035));case 31:return u=e.sent,d=u.computeObjectLayerResourceSize,e.t6=On,e.next=36,d(s,t.scale/Gn.viewScaleSizeFactor);case 36:return e.t7=e.sent,e.t8=i,e.abrupt("return",(0,e.t6)(e.t7,e.t8));case 39:return e.abrupt("return",s.size||t.scale/Gn.viewScaleSizeFactor);case 40:return e.abrupt("return",0);case 41:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _n(e,t){var n,r=e.field,i=e.axis,a=t.fields&&t.fields.filter((function(e){return e.name===r})),o=a&&1===a.length?a[0].type:"double",s={updating:!1,initial:0,current:0},c=ln.a[e.valueUnit];return n="area"===e.valueRepresentation?function(e){return Math.pow(e*c/2,2)*Math.PI}:"radius"===e.valueRepresentation||"distance"===e.valueRepresentation?function(e){return e*c/2}:function(e){return e*c},{field:r,getDefault:function(){var e=Object(M.a)(I.a.mark((function e(t,r){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=kn,e.t1=n,e.next=4,jn(r,t,i);case 4:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.t4=o,e.abrupt("return",(0,e.t0)(e.t3,e.t4));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getValue:function(e,t){return s.initial||(s.initial=t.pixelSizeAt(t.center)),s.current=s.initial*e,kn(s.current,o)},initValue:function(e){s.initial=null!=e?e:s.current,s.current=0},isUpdatingInteractively:!1}}function kn(e,t){switch(t){case"small-integer":case"integer":case"long":return Math.round(e);case"double":case"single":return e;default:return 0}}function xn(e){return Sn.apply(this,arguments)}function Sn(){return(Sn=Object(M.a)(I.a.mark((function e(t){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(St.a)(t,{ignoreGraphicSymbol:!0});case 2:n=e.sent,r=Object(pn.a)(t.symbol,n),Object(Xt.k)(r)&&(t.symbol=n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tn(e,t,n,r){return En.apply(this,arguments)}function En(){return(En=Object(M.a)(I.a.mark((function e(t,n,r,i){var a,o,s;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.layer,e.next=3,Cn(t,n,r);case 3:return t.layer.elevationInfo=a.elevationInfo,o=function(){return t.create(a.geometryType,{hasZ:a.capabilities.data.supportsZ})},e.next=7,o();case 7:return s=t.on("create",function(){var e=Object(M.a)(I.a.mark((function e(r){var s,c,l;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r.state,c=r.graphic,"cancel"===s){e.next=12;break}if("complete"!==s){e.next=10;break}return(l=c.clone()).attributes=Object(C.a)({},n.template.prototype.attributes),l.layer=a,t.layer.remove(c),e.next=9,xn(l);case 9:i(l);case 10:e.next=13;break;case 12:o();case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",(r.map.add(t.layer),{remove:function(){s.remove(),r.map.remove(t.layer),t.cancel()}}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cn(e,t,n){return Pn.apply(this,arguments)}function Pn(){return(Pn=Object(M.a)(I.a.mark((function e(t,n,r){var i,a,o,s,c,l,u,d,f,p,h,b;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("3d"===r.type){e.next=2;break}return e.abrupt("return");case 2:return a=n.layer,o=Object(C.a)({},n.template.prototype.attributes),s=new B.a({layer:a,sourceLayer:a,attributes:o}),c=mn(s),l=c.rotation,u=c.size,e.next=5,Object(St.a)(s);case 5:d=e.sent,f=!1,p=0,h=[u,l];case 8:if(!(p<h.length)){e.next=21;break}if(b=h[p],!Object(Xt.j)(b)){e.next=12;break}return e.abrupt("continue",18);case 12:if(e.t0=null==o[b.field],!e.t0){e.next=18;break}return e.next=16,b.getDefault(d,r);case 16:o[b.field]=e.sent,f=!0;case 18:p++,e.next=8;break;case 21:if(e.t2=f,!e.t2){e.next=26;break}return e.next=25,Object(St.a)(s);case 25:d=e.sent;case 26:e.t1=null==(i=d)?void 0:i.type,e.next="simple-fill"===e.t1||"polygon-3d"===e.t1?29:"simple-line"===e.t1||"line-3d"===e.t1?31:"simple-marker"===e.t1||"point-3d"===e.t1?33:34;break;case 29:return t.polygonSymbol=d,e.abrupt("break",34);case 31:return t.polylineSymbol=d,e.abrupt("break",34);case 33:t.pointSymbol=d;case 34:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function In(e,t){return e&&e.find((function(e){return e.layer===t}))}function Mn(e,t,n,r){return An.apply(this,arguments)}function An(){return(An=Object(M.a)(I.a.mark((function e(t,n,r,i){var a,o,s;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,r.async(Object(M.a)(I.a.mark((function e(){var a,o,s,c,l;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(sn.x)(hn(n,r),i);case 2:return a=e.sent,o=a.results,s=new Map,c=function(e){var t=e.layer,n=s.get(t);if(!n){var r=new Array;return s.set(t,r),r}return n},o.forEach((function(e){var t=e.graphic;return c(t).push(t)})),l=t.filter((function(e){var t=e.supports,n=e.layer;return t.indexOf("update")>-1&&s.has(n)})),e.abrupt("return",(0!==l.length&&r.stopPropagation(),{updatable:l,graphicsByLayer:s}));case 9:case"end":return e.stop()}}),e)}))));case 4:return a=e.sent,o=a.updatable,s=a.graphicsByLayer,e.abrupt("return",Object(sn.x)(Object(sn.j)(o.map(function(){var e=Object(M.a)(I.a.mark((function e(t){var n,r,a,o,c,l;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.layer,r=n.objectIdField,a=n.displayField,o=[r],Object(b.t)(n.fields,a)&&o.push(a),!(c=s.get(n)).some((function(e){return o.some((function(t){return!(t in e.attributes)}))}))){e.next=7;break}return l=n.createQuery(),e.abrupt("return",(l.outFields=o,l.returnGeometry=!1,l.objectIds=c.map((function(e){return e.getObjectId()})),n.queryFeatures(l,{signal:i}).then((function(e){return e.features}))));case 7:return e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),i));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rn(e,t,n,r){return Ln.apply(this,arguments)}function Ln(){return(Ln=Object(M.a)(I.a.mark((function e(t,n,r,i){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,r.async(Object(M.a)(I.a.mark((function e(){var a,o,s,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(sn.x)(n.hitTest(r),i);case 2:if(a=e.sent,0!==(o=a.results).length){e.next=6;break}return e.abrupt("return",[]);case 6:return s=new Set,o.forEach((function(e){var t=e.graphic;return s.add(t.layer)})),c=t.items.filter((function(e){var t=e.layer;return e.supports.indexOf("update")>-1&&s.has(t)})),e.abrupt("return",(c.length>0&&r.stopPropagation(),c));case 10:case"end":return e.stop()}}),e)}))));case 4:return a=e.sent,e.abrupt("return",Object(sn.x)(Object(sn.j)(a.map((function(e){var t=e.layer,a=t.objectIdField,o=t.displayField,s=[a];Object(b.t)(t.fields,o)&&s.push(o);var c=t.createQuery();c.outFields=s,c.returnGeometry=!1;var l=Object(vn.a)({renderer:t.renderer,event:r});return c.geometry=Object(yn.a)(r.mapPoint,l,n),c.outSpatialReference=n.spatialReference,t.queryFeatures(c,{signal:i}).then((function(e){return e.features}))}))),i));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fn(e,t,n,r){return Dn.apply(this,arguments)}function Dn(){return(Dn=Object(M.a)(I.a.mark((function e(t,n,r,i){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n.type,e.next="3d"===e.t0?3:"2d"===e.t0?4:5;break;case 3:return e.abrupt("return",Mn(t,n,r,i));case 4:return e.abrupt("return",Rn(t,n,r,i));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nn(e,t,n){return Vn.apply(this,arguments)}function Vn(){return(Vn=Object(M.a)(I.a.mark((function e(t,n,r){var i,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.layer,(a=i.createQuery()).objectIds=[t.getAttribute(i.objectIdField)],a.outFields=["*"],a.outSpatialReference=n.spatialReference,a.returnM=i.capabilities.data.supportsM,a.returnZ=i.capabilities.data.supportsZ,e.next=8,i.queryFeatures(a,{signal:r});case 8:return e.abrupt("return",e.sent.features[0]);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zn(e,t,n,r,i){return Un.apply(this,arguments)}function Un(){return(Un=Object(M.a)(I.a.mark((function e(t,n,i,a,o){var s,c,l,u,d,f,p,h,b,v;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.clone(),e.next=3,xn(s);case 3:return i.layer.add(s),s.sourceLayer=t.layer,c=function(){var e=t.layer;if("graphics"===e.type)return{remove:function(){}};var n=e.objectIdField,r=t.attributes[n],i=a.whenLayerView(e);return i.then((function(e){return e.setVisibility(r,!1)}),(function(){})),{remove:function(){i.then((function(e){return e.setVisibility(r,!0)}),(function(){}))}}}(),l=t.layer,u=n.size,d=n.rotation,f={multipleSelectionEnabled:!1},"point"===l.geometryType&&(f.enableRotation=!!d,f.enableScaling=!!u),i.layer.elevationInfo=l.elevationInfo,i.update(s,f),p=(Object(Xt.k)(u)||Object(Xt.k)(d))&&t.watch("attributes",function(){var e=Object(M.a)(I.a.mark((function e(t){var n,r,i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in n=!1,t)(i=t[r])!==s.attributes[r]&&(s.setAttribute(r,i),n=!0,Object(Xt.k)(u)&&!u.isUpdatingInteractively&&u.field===r&&u.initValue(i),Object(Xt.k)(d)&&!d.isUpdatingInteractively&&d.field===r&&d.initValue(i));if(e.t0=n&&"3d"===a.type,!e.t0){e.next=6;break}return e.next=6,xn(s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),[d,u].forEach(function(){var e=Object(M.a)(I.a.mark((function e(n){var r,i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(Xt.j)(n)){e.next=2;break}return e.abrupt("return");case 2:if(null==(r=t.attributes[n.field])){e.next=7;break}n.initValue(r),e.next=16;break;case 7:return e.next=9,n.getDefault(s.symbol,a);case 9:if(i=e.sent,n.initValue(i),s.setAttribute(n.field,i),e.t0="3d"===a.type,!e.t0){e.next=16;break}return e.next=16,xn(s);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h=i.on("update",function(){var e=Object(M.a)(I.a.mark((function e(t){var n,c,l,p,h,b,v,y,m,g,O,j;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(r.a)(t.graphics,1),c=n[0],l=t.state,p=t.toolEventInfo,"complete"!==l){e.next=3;break}return e.abrupt("return",void i.update(c,f));case 3:if(h=p,Object(Xt.k)(d)&&h&&(b=d.field,v=d.getValue,y=d.initValue,"rotate-stop"===h.type?(d.isUpdatingInteractively=!1,y()):null!=h.angle&&(d.isUpdatingInteractively=!0,s.attributes[b]=v(h.angle,a))),m=p,Object(Xt.k)(u)&&m&&(g=u.field,O=u.getValue,j=u.initValue,"scale-stop"===m.type?(u.isUpdatingInteractively=!1,j()):null!=m.xScale&&(u.isUpdatingInteractively=!0,s.attributes[g]=O(m.xScale,a))),e.t0="3d"===a.type,!e.t0){e.next=11;break}return e.next=11,xn(s);case 11:o(c.clone());case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),b=i.on(["undo","redo"],function(){var e=Object(M.a)(I.a.mark((function e(t){var n,i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(r.a)(t.graphics,1),i=n[0],o(i.clone());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.map.add(i.layer),v=function(){},e.abrupt("return",{interactive:{remove:function(){b.remove(),h.remove(),i.cancel(),p&&p.remove(),this.remove=v}},visual:{remove:function(){c.remove(),a.map.remove(i.layer),i.layer.removeAll(),this.remove=v}}});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Bn,Gn={icon:Object(cn.h)(24),text:Object(cn.h)(12),line:Object(cn.h)(1),viewScaleSizeFactor:100};function qn(e){if(1!==e.length)return null;var t=Object(r.a)(e,1)[0];if(!("items"in t))return t;var n=t;return 1===n.items.length?n.items[0]:null}var Hn=Bn=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).type="create",r}return Object(a.a)(n,null,[{key:"create",value:function(e,t,n){var r=new en({edits:new rn,viewModel:e}),i=new Bn({data:r,afterCommit:n});return i._set("steps",this._createWorkflowSteps(i,t)),i}},{key:"_createWorkflowSteps",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"awaiting-feature-creation-info",n=e.data,i=e.handles,a={"awaiting-feature-creation-info":function(){return{id:"awaiting-feature-creation-info",setUp:function(){var e=this;return Object(M.a)(I.a.mark((function t(){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.creationInfo=null,n.edits.feature=null,i.add(n.viewModel.featureTemplatesViewModel.on("select",(function(e){var t=e.item;n.creationInfo={layer:t.layer,template:t.template},n.viewModel.activeWorkflow.next()})),e.id);case 1:case"end":return t.stop()}}),t)})))()},tearDown:function(){var e=this;return Object(M.a)(I.a.mark((function t(){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i.remove(e.id);case 1:case"end":return t.stop()}}),t)})))()}}},"awaiting-feature-to-create":function(){return{id:"awaiting-feature-to-create",setUp:function(){var e=this;return Object(M.a)(I.a.mark((function t(){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=i,t.next=3,Tn(n.viewModel.sketchViewModel,n.creationInfo,n.viewModel.view,(function(e){n.edits.feature=e,n.viewModel.activeWorkflow.next()}));case 3:t.t1=t.sent,t.t2=e.id,t.t0.add.call(t.t0,t.t1,t.t2);case 6:case"end":return t.stop()}}),t)})))()},tearDown:function(){var e=this;return Object(M.a)(I.a.mark((function t(){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i.remove(e.id);case 1:case"end":return t.stop()}}),t)})))()}}},"editing-new-feature":function(){return{id:"editing-new-feature",setUp:function(){var e=this;return Object(M.a)(I.a.mark((function t(){var r,a,o,s,c,l,u,d;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.edits.feature,a=n.viewModel,o=In(a.layerInfos,r.layer),s=o&&o.fieldConfig,a.featureFormViewModel.set({feature:r,fieldConfig:s}),c=mn(r),t.next=5,zn(r,c,a.sketchViewModel,a.view,(function(e){var t=e.geometry,r=e.attributes;if(Object(Xt.k)(c.rotation)){var i=c.rotation.field;a.featureFormViewModel.setValue(i,r[i])}if(Object(Xt.k)(c.size)){var o=c.size.field;a.featureFormViewModel.setValue(o,r[o])}n.edits.updateAttributes(r),n.edits.updateGeometry(t)}));case 5:l=t.sent,u=l.interactive,d=l.visual,i.add([n.viewModel.featureFormViewModel.on("value-change",(function(){n.edits.updateAttributes(n.viewModel.featureFormViewModel.getValues()),r.attributes=n.edits.feature.attributes})),u,d],e.id);case 9:case"end":return t.stop()}}),t)})))()},tearDown:function(){var e=this;return Object(M.a)(I.a.mark((function t(){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i.remove(e.id);case 1:case"end":return t.stop()}}),t)})))()}}}},o=!1,s=["awaiting-feature-creation-info","awaiting-feature-to-create","editing-new-feature"].filter((function(e){return!!o||(o=e===t)})).map((function(e){return a[e]()}));n.viewModel.refreshCreationTemplates();var c=qn(n.viewModel.featureTemplatesViewModel.items),l=Object(r.a)(s,1),u=l[0];if("awaiting-feature-creation-info"===u.id&&c){var d=c.layer,f=c.template;n.creationInfo={layer:d,template:f},s.shift()}return s}}]),n}(on),Wn=Hn=Bn=Object(l.a)([Object(p.a)("esri.widgets.Editor.CreateWorkflow")],Hn),$n=n(136),Jn=n(406),Yn=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).candidates=null,r.editableItem=null,r.edits=null,r.viewModel=null,r}return n}(q.a);Object(l.a)([Object(d.b)()],Yn.prototype,"candidates",void 0),Object(l.a)([Object(d.b)()],Yn.prototype,"editableItem",void 0),Object(l.a)([Object(d.b)()],Yn.prototype,"edits",void 0),Object(l.a)([Object(d.b)()],Yn.prototype,"viewModel",void 0);var Kn,Zn=Yn=Object(l.a)([Object(p.a)("esri.widgets.Editor.UpdateWorkflowData")],Yn),Xn="candidate-highlight",Qn=Kn=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).type="update",r}return Object(a.a)(n,[{key:"highlight",value:function(e){var t=this.data.viewModel.view,n=e&&t.allLayerViews.items.find((function(t){return t.layer===e.layer}));Object(Jn.a)(n)&&this.handles.add(n.highlight(e),Xn)}},{key:"unhighlight",value:function(){this.handles.remove(Xn)}}],[{key:"create",value:function(e,t,n){var r=new Zn({edits:new rn,viewModel:e}),i=new Kn({data:r,afterCommit:n});return i._set("steps",this._createWorkflowSteps(i,t)),i}},{key:"_createWorkflowSteps",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"awaiting-feature-to-update",n=e.data,r=e.handles,i={"awaiting-feature-to-update":function(){return{id:"awaiting-feature-to-update",setUp:function(){var e=this;return Object(M.a)(I.a.mark((function t(){var i,a,o,s,c;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=n.viewModel,a=i.spinnerViewModel,o=i.view,s=null,r.add({remove:function(){s&&(s.abort(),s=null)}},e.id),n.edits.feature=null,c=o.on("immediate-click",(function(e){a.location=e.mapPoint,a.visible=!0,s&&s.abort();var t=n.viewModel.editableItems;s=Object(sn.d)(),new Promise((function(n,r){Object(sn.p)(s.signal,(function(){return r(Object(sn.e)())})),n(Fn(t,o,e,s.signal))})).then((function(e){if(n.viewModel.spinnerViewModel.visible=!1,Object(sn.u)(s),n.candidates=e.reduce((function(e,t){return t.error?e:[].concat(Object(F.a)(e),Object(F.a)(t.value))}),[]),0!==n.candidates.length)if(1===n.candidates.length){var t=n.candidates[0];n.edits.feature=t,n.viewModel.activeWorkflow.go("editing-existing-feature")}else n.viewModel.activeWorkflow.next()}))})),r.add(c,e.id);case 5:case"end":return t.stop()}}),t)})))()},tearDown:function(){var e=this;return Object(M.a)(I.a.mark((function t(){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.remove(e.id);case 1:case"end":return t.stop()}}),t)})))()}}},"awaiting-update-feature-candidate":function(){return{id:"awaiting-update-feature-candidate",setUp:function(){var t=this;return Object(M.a)(I.a.mark((function i(){var a;return I.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:(a=n.edits).feature=null,r.add(Object(y.d)(a,"feature",(function(t){e.unhighlight(),e.highlight(t)})),t.id);case 2:case"end":return i.stop()}}),i)})))()},tearDown:function(){var t=this;return Object(M.a)(I.a.mark((function n(){return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.unhighlight(),r.remove(t.id);case 1:case"end":return n.stop()}}),n)})))()}}},"editing-existing-feature":function(){return{id:"editing-existing-feature",setUp:function(){var t=this;return Object(M.a)(I.a.mark((function i(){var a,o,s,c,l,u,d,f,p,h,b,v,y,m,g,O;return I.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=n.edits.feature,o=n.viewModel,n.editableItem=o.editableItems.find((function(e){return e.layer===a.layer})),s=Object(sn.d)(),r.add({remove:function(){return s.abort()}},t.id),c=o.view.whenLayerView(a.layer),l=Nn(a,o.view,s.signal),i.next=8,c;case 8:return u=i.sent,i.next=11,l;case 11:if(d=i.sent,!Object(sn.n)(s)){i.next=14;break}return i.abrupt("return");case 14:if(n.edits.updateGeometry(d.geometry),n.edits.updateAttributes(d.attributes),n.edits.trackChanges(),f=d.layer,p=In(o.layerInfos,f),h=p&&p.fieldConfig,o.attachmentsViewModel.set({graphic:d,mode:"view"}),o.featureFormViewModel.set({feature:d,fieldConfig:h}),b="createInteractiveEditSession"in u?u.createInteractiveEditSession(a):null,v=[o.featureFormViewModel.on("value-change",(function(e){n.edits.updateAttributes(o.featureFormViewModel.getValues()),d.attributes=n.edits.feature.attributes,b&&b.setAttribute(e.fieldName,e.value)})),o.attachmentsViewModel.watch("mode",(function(e){"add"===e&&n.viewModel.activeWorkflow.go("adding-attachment"),"edit"===e&&n.viewModel.activeWorkflow.go("editing-attachment")}))],b&&(v.push(Object($n.c)((function(){return b.rollback()}))),r.add(Object($n.c)((function(){return b.commit()})),e._handleKeys.afterCommit)),!f.capabilities.editing.supportsGeometryUpdate){i.next=30;break}return y=mn(d),i.next=24,zn(d,y,o.sketchViewModel,o.view,(function(e){var t=e.geometry,r=e.attributes;if(Object(Xt.k)(y.rotation)){var i=y.rotation.field;o.featureFormViewModel.setValue(i,r[i])}if(Object(Xt.k)(y.size)){var a=y.size.field;o.featureFormViewModel.setValue(a,r[a])}n.edits.updateAttributes(r),n.edits.updateGeometry(t)}));case 24:m=i.sent,g=m.interactive,O=m.visual,v.push(g,O),r.add(g,e._handleKeys.beforeCommit),r.add(O,e._handleKeys.afterCommit),i.next=31;break;case 30:e.highlight(d);case 31:r.add(v,t.id);case 32:case"end":return i.stop()}}),i)})))()},tearDown:function(){var t=this;return Object(M.a)(I.a.mark((function n(){return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.unhighlight(),r.remove(t.id);case 1:case"end":return n.stop()}}),n)})))()}}},"adding-attachment":function(){return{id:"adding-attachment",parent:"editing-existing-feature",setUp:function(){return Object(M.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},tearDown:function(){return Object(M.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}}},"editing-attachment":function(){return{id:"editing-attachment",parent:"editing-existing-feature",setUp:function(){return Object(M.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},tearDown:function(){return Object(M.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}}}},a=!1;return["awaiting-feature-to-update","awaiting-update-feature-candidate","editing-existing-feature","adding-attachment","editing-attachment"].filter((function(e){return!!a||(a=e===t)})).map((function(e){return i[e]()}))}}]),n}(on),er=Qn=Kn=Object(l.a)([Object(p.a)("esri.widgets.Editor.UpdateWorkflow")],Qn),tr=n(360),nr="esri.widgets.Editor.EditorViewModel",rr=u.a.getLogger(nr),ir=["create","update"];function ar(e,t,n){rr.error(new Wt.a(e,t,n))}function or(e){return e&&Object(Zt.isEditableLayer)(e.layer)}var sr="all-layer-views-prop-watcher",cr=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e))._sketchGraphicsLayer=new Jt.a({listMode:"hide",internal:!0}),r.activeWorkflow=null,r.activityQueue=[],r.failures=[],r.attachmentsViewModel=new Yt.a({abilities:{editing:!0}}),r.featureFormViewModel=new ve,r.featureTemplatesViewModel=new Ft,r.layerInfos=null,r.sketchViewModel=new tr.a({layer:r._sketchGraphicsLayer}),r.snappingOptions=new T.a,r.spinnerViewModel=new Kt.a,r}return Object(a.a)(n,[{key:"initialize",value:function(){var e=this;this.handles.add([Object(y.b)(this,"activeWorkflow","cancel",(function(){return e.emit("workflow-cancel")})),Object(y.b)(this,"activeWorkflow","commit",(function(){return e.emit("workflow-commit")})),Object(y.b)(this,"view.allLayerViews","change",(function(){e.handles.remove(sr),e.notifyChange("editableItems")})),Object(y.d)(this,"editableItems",(function(){var t=e.activeWorkflow;if(t){var n=t.stepId;if("create"===t.type)return e.refreshCreationTemplates(),void("awaiting-feature-creation-info"!==n||e.canCreate||e._cancelWorkflow());"update"===t.type&&("awaiting-feature-to-update"===n&&!e.canUpdate||"awaiting-update-feature-candidate"===n&&!t.data.candidates.some((function(t){var n=e.editableItems.find((function(e){return e.layer===t.layer}));return n&&n.supports.indexOf("update")>-1})))&&e._cancelWorkflow()}}))])}},{key:"destroy",value:function(){var e=this;this._cancelWorkflow().then((function(){return e.view=null}))}},{key:"allowedWorkflows",get:function(){return this._get("allowedWorkflows")},set:function(e){e&&0!==e.length||(e=[].concat(ir)),this._set("allowedWorkflows",e)}},{key:"canCreate",get:function(){return this.editableItems.some((function(e){return e.supports.indexOf("create")>-1}))}},{key:"canUpdate",get:function(){return this.editableItems.some((function(e){return e.supports.indexOf("update")>-1}))}},{key:"editableItems",get:function(){var e=this,t=this.get("view.allLayerViews");if(!t)return new $t.a;var n=function(){return e.notifyChange("editableItems")};return t.filter(or).map((function(t){e.handles.add(Object(y.d)(t,["suspended","layer.editingEnabled"],n),sr);var r=t.layer,i=t.suspended,a=r.capabilities,o=a.data,s=a.operations,c=function(e,t){return e&&e.find((function(e){return e.layer===t}))}(e.layerInfos,r),l="supportsAttachment"in o&&o.supportsAttachment&&(!c||!1!==c.allowAttachments);if(i)return{hasAttachments:l,layer:r,supports:[]};var u=e.allowedWorkflows.filter((function(e){return!c||!1!==c.enabled&&("create"===e&&!1!==c.addEnabled||"update"===e&&!1!==c.updateEnabled)})),d=function(e){return u.find((function(t){return t===e}))},f=[];return d("create")&&s.supportsAdd&&f.push("create"),d("update")&&s.supportsUpdate&&f.push("update"),!1!==(c&&c.deleteEnabled)&&s.supportsDelete&&f.push("delete"),{hasAttachments:l,layer:r,supports:f}})).reverse()}},{key:"state",get:function(){if(!this.get("view.ready")||0===this.editableItems.length)return"disabled";var e=this.attachmentsViewModel.mode;if("add"===e)return"adding-attachment";if("edit"===e)return"editing-attachment";var t=this.activeWorkflow;return t?t.stepId:"ready"}},{key:"syncing",get:function(){return this.activityQueue.length>0}},{key:"view",set:function(e){this.sketchViewModel.view=e,this.spinnerViewModel.view=e,this._set("view",e)}},{key:"startCreateWorkflowAtFeatureTypeSelection",value:function(){var e=Object(M.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canCreate){e.next=2;break}return e.abrupt("return",void ar("editing:unsupported-workflow","Create workflow is unsupported or disabled."));case 2:return e.next=4,this._cancelWorkflow();case 4:return t=this._createCreateWorkflow(),e.next=7,t.start();case 7:this._set("activeWorkflow",t);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"startCreateWorkflowAtFeatureCreation",value:function(){var e=Object(M.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canCreate){e.next=2;break}return e.abrupt("return",void ar("editing:unsupported-workflow","Update workflow is unsupported or disabled."));case 2:return e.next=4,this._cancelWorkflow();case 4:return(n=this._createCreateWorkflow("awaiting-feature-to-create")).data.creationInfo=t,e.next=8,n.start();case 8:this._set("activeWorkflow",n);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"startCreateWorkflowAtFeatureEdit",value:function(){var e=Object(M.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canCreate){e.next=2;break}return e.abrupt("return",void ar("editing:unsupported-workflow","Update workflow is unsupported or disabled."));case 2:return e.next=4,this._cancelWorkflow();case 4:return(n=this._createCreateWorkflow("editing-new-feature")).data.edits.feature=t,e.next=8,n.start();case 8:this._set("activeWorkflow",n);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"startUpdateWorkflowAtFeatureSelection",value:function(){var e=Object(M.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canUpdate){e.next=2;break}return e.abrupt("return",void ar("editing:unsupported-workflow","Update workflow is unsupported or disabled."));case 2:return e.next=4,this._cancelWorkflow();case 4:return t=this._createUpdateWorkflow(),e.next=7,t.start();case 7:this._set("activeWorkflow",t);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"startUpdateWorkflowAtMultipleFeatureSelection",value:function(){var e=Object(M.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canUpdate){e.next=2;break}return e.abrupt("return",void ar("editing:unsupported-workflow","Update workflow is unsupported or disabled."));case 2:return e.next=4,this._cancelWorkflow();case 4:return(n=this._createUpdateWorkflow("awaiting-update-feature-candidate")).data.candidates=t,e.next=8,n.start();case 8:this._set("activeWorkflow",n);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"startUpdateWorkflowAtFeatureEdit",value:function(){var e=Object(M.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canUpdate){e.next=2;break}return e.abrupt("return",void ar("editing:unsupported-workflow","Update workflow is unsupported or disabled."));case 2:return e.next=4,this._cancelWorkflow();case 4:return(n=this._createUpdateWorkflow("editing-existing-feature")).data.edits.feature=t,e.next=8,n.start();case 8:this._set("activeWorkflow",n);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteFeatureFromWorkflow",value:function(){var e=Object(M.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.activeWorkflow)||"create"===t.type){e.next=8;break}return e.next=4,this._delete(t.data.edits.feature);case 4:return e.next=6,t.reset();case 6:e.next=9;break;case 8:ar("editing:unsupported-workflow","Deleting requires an active update workflow.");case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelWorkflow",value:function(){var e=Object(M.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._cancelWorkflow(Object(C.a)({warn:!0},t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"refreshCreationTemplates",value:function(){this.featureTemplatesViewModel.layers=this.editableItems.filter((function(e){return e.supports.indexOf("create")>-1})).map((function(e){return e.layer})).toArray()}},{key:"_cancelWorkflow",value:function(){var e=Object(M.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.activeWorkflow){e.next=3;break}return e.abrupt("return",void(t&&t.warn&&ar("editing:no-active-workflow","There is no active workflow to cancel.")));case 3:if(t&&!1===t.force){e.next=9;break}return this.emit("workflow-cancel"),this._set("activeWorkflow",null),e.next=8,n.cancel(t);case 8:return e.abrupt("return",void e.sent);case 9:return e.next=11,n.cancel(t);case 11:this._set("activeWorkflow",null);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_createCreateWorkflow",value:function(e){var t=this;return Wn.create(this,e,(function(e){return t._create(e)}))}},{key:"_createUpdateWorkflow",value:function(e){var t=this;return er.create(this,e,(function(e){return t._update(e)}))}},{key:"_create",value:function(){var e=Object(M.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._applyEdits(t.layer,{addFeatures:[t]});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){var e=Object(M.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._applyEdits(t.layer,{deleteFeatures:[t]});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_update",value:function(){var e=Object(M.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._applyEdits(t.layer,{updateFeatures:[t]});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_applyEdits",value:function(){var e=Object(M.a)(I.a.mark((function e(t,n){var r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._queueOperation((function(){return t.applyEdits(n)}));case 2:return e.next=4,this.view.whenLayerView(t);case 4:return r=e.sent,e.next=7,Object(y.g)(r,"updating");case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_queueOperation",value:function(e){var t=this;this.activityQueue.push(e),this.notifyChange("syncing");var n=function(e,t){var n=t.indexOf(e);n>-1&&t.splice(n,1)};return e().then((function(e){var t=e.addFeatureResults,n=e.deleteFeatureResults,r=e.updateFeatureResults,i=t.find((function(e){return!!e.error}))||r.find((function(e){return!!e.error}))||n.find((function(e){return!!e.error}));if(i)throw i.error})).catch((function(r){ar("editing:operation-error","An error occurred.",{error:r});var i={error:r,retry:function(){return n(i,t.failures),t._queueOperation(e)},cancel:function(){n(i,t.failures)}};t._set("failures",[].concat(Object(F.a)(t.failures),[i]))})).then((function(){n(e,t.activityQueue),t.notifyChange("syncing")}))}}]),n}(Object(m.b)(V.a.EventedAccessor));Object(l.a)([Object(d.b)({readOnly:!0})],cr.prototype,"activeWorkflow",void 0),Object(l.a)([Object(d.b)({readOnly:!0})],cr.prototype,"activityQueue",void 0),Object(l.a)([Object(d.b)({value:[].concat(ir)})],cr.prototype,"allowedWorkflows",null),Object(l.a)([Object(d.b)({readOnly:!0})],cr.prototype,"canCreate",null),Object(l.a)([Object(d.b)({readOnly:!0})],cr.prototype,"canUpdate",null),Object(l.a)([Object(d.b)({readOnly:!0})],cr.prototype,"editableItems",null),Object(l.a)([Object(d.b)({readOnly:!0})],cr.prototype,"failures",void 0),Object(l.a)([Object(d.b)()],cr.prototype,"attachmentsViewModel",void 0),Object(l.a)([Object(d.b)()],cr.prototype,"featureFormViewModel",void 0),Object(l.a)([Object(d.b)()],cr.prototype,"featureTemplatesViewModel",void 0),Object(l.a)([Object(d.b)()],cr.prototype,"layerInfos",void 0),Object(l.a)([Object(d.b)()],cr.prototype,"sketchViewModel",void 0),Object(l.a)([Object(f.a)("sketchViewModel.snappingOptions")],cr.prototype,"snappingOptions",void 0),Object(l.a)([Object(d.b)()],cr.prototype,"spinnerViewModel",void 0),Object(l.a)([Object(d.b)()],cr.prototype,"state",null),Object(l.a)([Object(d.b)({readOnly:!0})],cr.prototype,"syncing",null),Object(l.a)([Object(d.b)()],cr.prototype,"view",null);var lr=cr=Object(l.a)([Object(p.a)(nr)],cr),ur="esri-editor esri-widget esri-widget--panel",dr="esri-editor__header",fr="esri-editor__scroller",pr="esri-editor__content",hr="esri-editor__content-group",br="esri-editor__temp-wrapper",vr="esri-editor__message",yr="esri-editor__controls",mr="esri-editor__title",gr="esri-editor__back-button",Or="esri-editor__mode-selection",jr="esri-editor__progress-bar",wr="esri-editor__warning-card",_r="esri-editor__warning-header",kr="esri-editor__warning-heading",xr="esri-editor__warning-message",Sr="esri-editor__warning-divider",Tr="esri-editor__warning-option",Er="esri-editor__warning-option--primary",Cr="esri-editor__warning-option--negative",Pr="esri-editor__warning-option--positive",Ir="esri-editor__feature-list-item",Mr="esri-editor__feature-list-item--disabled",Ar="esri-editor__feature-list-name",Rr="esri-editor__feature-list-icon",Lr="esri-editor__control-button",Fr="esri-editor__overlay",Dr="esri-icon-right",Nr="esri-icon-left",Vr="esri-icon-notice-triangle",zr="esri-icon-edit",Ur="esri-button",Br="esri-button--disabled",Gr="esri-button--secondary",qr="esri-button--tertiary",Hr="esri-heading",Wr="esri-interactive";function $r(e){e.focus()}var Jr=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r){var a;return Object(i.a)(this,n),(a=t.call(this,e,r))._candidateCommitted=!1,a._featureForm=new rt,a._attachments=new x.a({visibleElements:{addSubmitButton:!1,cancelAddButton:!1,cancelUpdateButton:!1,deleteButton:!1,errorMessage:!1,progressBar:!1,updateButton:!1}}),a._featureTemplates=new Ht,a._filterText="",a._prompt=null,a._spinner=new S.a,a.activeWorkflow=null,a.allowedWorkflows=null,a.iconClass=zr,a.label=void 0,a.layerInfos=null,a.messages=null,a.messagesCommon=null,a.messagesTemplates=null,a.snappingOptions=new T.a,a.supportingWidgetDefaults=null,a.view=null,a.viewModel=new lr,a._handleHeaderClickOrKeyDown=function(e){e.currentTarget["data-prevent-back"]||a._handleBack.call(Object(o.a)(a),e)},a._setCandidateFeature=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!a._candidateCommitted){var n=a.viewModel.activeWorkflow;n.data.edits.feature=e,t&&(n.next(),a._candidateCommitted=!0)}},a._handleSave=a._handleSave.bind(Object(o.a)(a)),a._handleBack=a._handleBack.bind(Object(o.a)(a)),a._handleDone=a._handleDone.bind(Object(o.a)(a)),a._handleDelete=a._handleDelete.bind(Object(o.a)(a)),a._handleAdd=a._handleAdd.bind(Object(o.a)(a)),a._handleEdit=a._handleEdit.bind(Object(o.a)(a)),a._handleAttachmentAdd=a._handleAttachmentAdd.bind(Object(o.a)(a)),a._handleAttachmentUpdate=a._handleAttachmentUpdate.bind(Object(o.a)(a)),a._handleAttachmentDelete=a._handleAttachmentDelete.bind(Object(o.a)(a)),a}return Object(a.a)(n,[{key:"initialize",value:function(){var e=this;this.own([Object(y.a)(this,"viewModel",(function(t){e._featureForm.viewModel=t?t.featureFormViewModel:null,e._attachments.viewModel=t?t.attachmentsViewModel:null,e._featureTemplates.viewModel=t?t.featureTemplatesViewModel:null,e._spinner.viewModel=t?t.spinnerViewModel:null})),Object(y.a)(this,"view",(function(t,n){var r="editor-".concat(e.id,"-spinner");n&&n.ui.remove(e._spinner,r),t&&t.ui.add(e._spinner,{key:r,position:"manual"})})),Object(y.b)(this,"viewModel.sketchViewModel","create",(function(){e.scheduleRender()})),Object(y.b)(this,"viewModel.activeWorkflow","cancel-request",(function(t){var n=t.controller,r=e.messages,i=e.messagesCommon;e._prompt={title:r.cancelRequestTitle,message:r.cancelRequestWarningMessage,options:[{label:i.form.no,type:"neutral",action:function(){return n.deny(),e._prompt=null}},{label:i.form.yes,type:"negative",action:function(){n.allow(),e._prompt=null}}]},e.scheduleRender()})),Object(y.a)(this,"supportingWidgetDefaults",(function(t){t&&(e._featureForm.set(t.featureForm),e._attachments.set(t.attachments),e._featureTemplates.set(t.featureTemplates),e.viewModel.sketchViewModel.set(t.sketch))})),Object(y.d)(this,"_attachments.error",(function(t){if(t){var n=e.messages,r=e.messagesCommon;e._prompt={title:n.errorWarningTitle,message:t.message,options:[{label:r.form.ok,type:"neutral",action:function(){e._prompt=null}}]}}})),Object(y.d)(this,"viewModel.failures",(function(t){if(t){var n=e.messages,i=Object(r.a)(t,1)[0],a=i.error,o=i.retry,s=i.cancel;e._prompt={title:n.errorWarningTitle,message:Object(v.a)(n.errorWarningMessageTemplate,{errorMessage:a.message}),options:[{label:n.retry,type:"positive",action:function(){o(),e._prompt=null}},{label:n.ignore,type:"neutral",action:function(){return s(),e._prompt=null}}]}}})),Object(y.d)(this,"viewModel.state",(function(t){"awaiting-update-feature-candidate"===t&&(e._candidateCommitted=!1)})),Object(y.d)(this,["_attachments.selectedFile","_attachments.submitting"],(function(){return e.scheduleRender()})),Object(y.h)(this,"viewModel.activeWorkflow",(function(){return e._featureTemplates.filterText=""}))])}},{key:"destroy",value:function(){this._attachments.destroy(),this._featureForm.destroy(),this._featureTemplates.destroy()}},{key:"startCreateWorkflowAtFeatureTypeSelection",value:function(){return this.viewModel.startCreateWorkflowAtFeatureTypeSelection()}},{key:"startCreateWorkflowAtFeatureCreation",value:function(e){return this.viewModel.startCreateWorkflowAtFeatureCreation(e)}},{key:"startCreateWorkflowAtFeatureEdit",value:function(e){return this.viewModel.startCreateWorkflowAtFeatureEdit(e)}},{key:"startUpdateWorkflowAtFeatureSelection",value:function(){return this.viewModel.startUpdateWorkflowAtFeatureSelection()}},{key:"startUpdateWorkflowAtMultipleFeatureSelection",value:function(e){return this.viewModel.startUpdateWorkflowAtMultipleFeatureSelection(e)}},{key:"startUpdateWorkflowAtFeatureEdit",value:function(e){return this.viewModel.startUpdateWorkflowAtFeatureEdit(e)}},{key:"deleteFeatureFromWorkflow",value:function(){return this.viewModel.deleteFeatureFromWorkflow()}},{key:"cancelWorkflow",value:function(e){return this.viewModel.cancelWorkflow(e)}},{key:"render",value:function(){var e=this._attachments,t=this.viewModel;if(!t)return Object(_.a)("div",{class:ur});var n=t.state,r=this._prompt?Object(_.a)("div",{class:Fr,key:"overlay"},this.renderPrompt({message:this._prompt.message,title:this._prompt.title,options:this._prompt.options})):null;return Object(_.a)("div",{class:ur},t.syncing||e.submitting?this.renderProgressBar():null,"disabled"===n?null:"ready"===n?this.renderLanding():"awaiting-feature-creation-info"===n?this.renderTemplates():"editing-new-feature"===n||"editing-existing-feature"===n?this.renderAttributeEditing():"awaiting-feature-to-update"===n?this.renderFeatureUpdating():"awaiting-update-feature-candidate"===n?this.renderFeatureList():"awaiting-feature-to-create"===n?this.renderFeatureCreation():"adding-attachment"===n?this.renderAttachmentAdding():"editing-attachment"===n?this.renderAttachmentEditing():null,r)}},{key:"renderTemplates",value:function(){return Object(_.a)("div",{class:br,key:"wrapper"},this.renderHeader(this.messages.selectTemplate,!0),Object(_.a)("div",{key:"content",class:pr},this._featureTemplates.render()))}},{key:"renderAttributeEditing",value:function(){var e=this.viewModel,t=e.activeWorkflow,n=e.featureFormViewModel,r=t.data.edits.feature,i="update"===t.type&&!t.data.edits.modified||n.inputFields.length>0&&!n.valid,a=this.messages,o=this.messagesCommon,s="create"===t.type?o.add:o.update,c=[{label:s,type:"primary",disabled:i,clickHandler:this._handleSave}],l=!1;"update"===t.type&&(t.data.editableItem.hasAttachments&&(l=!0),t.data.editableItem.supports.indexOf("delete")>-1&&c.push({label:o.delete,type:"tertiary",clickHandler:this._handleDelete}));var u=this._getLabel(r);return Object(_.a)("div",{class:br,key:"wrapper"},this.renderHeader(u,!0),Object(_.a)("div",{key:"content",class:this.classes(pr,fr)},Object(_.a)("div",{class:hr},n.inputFields.length>0?this._featureForm.render():this.renderMessage(Object(v.a)(a.clickToFinishTemplate,{button:s})),l?Object(_.a)("div",{key:"attachments"},Object(_.a)("div",null,a.attachments),this._attachments.render()):null)),this.renderControls(c))}},{key:"renderAttachmentAdding",value:function(){var e=this._attachments,t=this.messages,n=this.messagesCommon,r=[{label:e.submitting?n.cancel:n.add,disabled:e.submitting||!e.selectedFile,type:"primary",clickHandler:this._handleAttachmentAdd}];return Object(_.a)("div",{class:br,key:"wrapper"},this.renderHeader(t.addAttachment,!0,e.submitting),Object(_.a)("div",{key:"content",class:this.classes(pr,fr)},e.render()),this.renderControls(r))}},{key:"renderAttachmentEditing",value:function(){var e=this._attachments,t=this.messages,n=this.messagesCommon,r=[{label:n.update,disabled:e.submitting||!e.selectedFile,type:"primary",clickHandler:this._handleAttachmentUpdate},{label:n.delete,disabled:e.submitting,type:"tertiary",clickHandler:this._handleAttachmentDelete}];return Object(_.a)("div",{class:br,key:"wrapper"},this.renderHeader(t.editAttachment,!0,e.submitting),Object(_.a)("div",{key:"content",class:this.classes(pr,fr)},e.render()),this.renderControls(r))}},{key:"renderFeatureUpdating",value:function(){var e=this.messages;return Object(_.a)("div",{class:br,key:"wrapper"},this.renderHeader(e.selectFeature,!0),Object(_.a)("div",{key:"content",class:this.classes(pr,fr)},this.renderMessage(e.selectFeatureToEdit)))}},{key:"renderMessage",value:function(e){return Object(_.a)("div",{class:vr},e)}},{key:"renderFeatureCreation",value:function(){var e=this.messages,t=this.viewModel,n=t.sketchViewModel,r=t.activeWorkflow.data.creationInfo.layer,i=n.canUndo()&&n.createGraphic?n.createGraphic:null,a=this._getSketchingTip(r.geometryType,i);return Object(_.a)("div",{class:br,key:"wrapper"},this.renderHeader(e.placeFeature,!0),Object(_.a)("div",{key:"content",class:this.classes(pr,fr)},this.renderMessage(a)))}},{key:"renderControls",value:function(e){var t=this;return Object(_.a)("div",{class:yr,key:"controls"},e.map((function(e,n){var r=e.disabled,i=void 0!==r&&r,a=e.label,o=e.type,s=e.clickHandler;return t.renderButton({label:a,class:t.classes(Lr,Ur,"secondary"===o?Gr:"tertiary"===o?qr:null,i?Br:null),disabled:i,clickHandler:s,key:n})})))}},{key:"renderPrompt",value:function(e){var t=this,n=e.title,r=e.message,i=e.options,a=void 0===i?[]:i;return Object(_.a)("div",{class:wr,role:"alert"},Object(_.a)("div",{class:_r},Object(_.a)("span",{class:Vr,"aria-hidden":"true"}),Object(_.a)("h4",{class:this.classes(Hr,kr)},n)),Object(_.a)("div",{class:xr},r),Object(_.a)("div",{class:Sr}),a.map((function(e,n){var r=e.label,i=e.action,a=e.type,o=0===n;return Object(_.a)("div",{afterCreate:o?$r:null,class:t.classes(Tr,o?Er:null,"positive"===a?Pr:"negative"===a?Cr:null),key:n,onclick:i,onkeydown:function(e){var t=Object(h.a)(e);"Enter"!==t&&" "!==t||(e.preventDefault(),i.call(null))},tabIndex:0,role:"button"},r)})))}},{key:"renderProgressBar",value:function(){return Object(_.a)("div",{class:this.classes(jr),key:"progress-bar"})}},{key:"renderButton",value:function(e){return Object(_.a)("button",{class:e.class,disabled:e.disabled,key:e.key,onclick:e.clickHandler,type:"button"},e.label)}},{key:"renderHeader",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.messagesCommon;return Object(_.a)("header",{class:dr,key:"header"},t?Object(_.a)("div",{"aria-label":r.back,class:this.classes(gr,Wr,n?Br:null),key:"back-button","data-prevent-back":n,onclick:this._handleHeaderClickOrKeyDown,onkeydown:this._handleHeaderClickOrKeyDown,role:"button",tabIndex:0,title:r.back},Object(_.a)("span",{"aria-hidden":"true",class:Object(g.f)()?Dr:Nr})):null,Object(_.a)("h4",{class:this.classes(mr,Hr)},e))}},{key:"renderLanding",value:function(){var e=this.messages,t=this.viewModel,n=t.allowedWorkflows,r=t.canCreate,i=t.canUpdate,a=Object(g.f)()?Nr:Dr;return Object(_.a)("div",{class:br,key:"wrapper"},this.renderHeader(e.widgetLabel),Object(_.a)("div",{key:"content",class:pr,role:"group"},Object(_.a)("div",{class:Or,key:"mode-selection"},n.indexOf("update")>-1?Object(_.a)("div",{"aria-disabled":i?"false":"true",class:this.classes(Ir,i?null:Mr),key:"update",onclick:this._handleEdit,onkeydown:this._handleEdit,role:"button",tabIndex:i?0:-1},Object(_.a)("span",{class:Ar},e.editFeature),Object(_.a)("span",{"aria-hidden":"true",class:this.classes(Rr,a)})):null,n.indexOf("create")>-1?Object(_.a)("div",{class:this.classes(Ir,r?null:Mr),key:"create",onclick:this._handleAdd,onkeydown:this._handleAdd,role:"button",tabIndex:r?0:-1},Object(_.a)("span",{class:Ar},e.addFeature),Object(_.a)("span",{"aria-hidden":"true",class:this.classes(Rr,a)})):null)))}},{key:"renderFeatureList",value:function(){var e=this,t=this.messages,n=this.messagesTemplates,r=this.viewModel,i=r.editableItems,a=r.activeWorkflow.data.candidates,o=Object(v.a)(t.multipleFeaturesTemplate,{total:a.length}),s=new Map;a.map((function(t){return{label:e._getLabel(t),id:t.attributes[t.layer.objectIdField],data:t}})).filter((function(t){var n=t.label,r=t.data,i=e._filterText.toLowerCase(),a=r.layer.title;return e.viewModel.editableItems.find((function(e){return e.layer===r.layer})).supports.indexOf("update")>-1&&(!i||n.toLowerCase().indexOf(i)>-1||a.toLowerCase().indexOf(i)>-1)})).forEach((function(e){var t=e.data.layer;s.has(t)?s.get(t).items.push(e):s.set(t,{id:"".concat(t.id),label:t.title,items:[e]})}));var c=i.filter((function(e){var t=e.layer;return s.has(t)})).map((function(e){var t=e.layer;return s.get(t)})).toArray();return Object(_.a)("div",{class:br,key:"wrapper"},this.renderHeader(o,!0),Object(_.a)("div",{key:"content",class:this.classes(pr,fr)},Ot({id:this.id,filterText:this._filterText,items:c,messages:{filterPlaceholder:n.filterPlaceholder,noItems:n.noItems,noMatches:n.noMatches},onItemMouseEnter:function(t){var n=t.data;return e._setCandidateFeature(n)},onItemMouseLeave:function(){return e._setCandidateFeature(null)},onItemSelect:function(t){var n=t.data;return e._setCandidateFeature(n,!0)},onFilterChange:function(t){return e._filterText=t}})))}},{key:"_getSketchingTip",value:function(e,t){var n=this.messages;if("point"===e)return n.tips.clickToAddPoint;if("polygon"===e||"polyline"===e){if(!t)return n.tips.clickToStart;var i=t.geometry,a="polygon"===e?"rings":"paths",o=Object(r.a)(i[a],1)[0];return"polygon"===e&&o<4?n.tips.clickToContinue:n.tips.clickToContinueThenDoubleClickToEnd}return n.tips.clickToAddFeature}},{key:"_getLabel",value:function(e){var t=e.layer,n=t.objectIdField,r=e.attributes,i=Object(b.n)(t);return i&&r[i]&&"".concat(r[i])||Object(v.a)(this.messages.untitledFeatureTemplate,{id:r[n]})}},{key:"_handleDelete",value:function(){var e=this,t=this.messages,n=this.messagesCommon;this._prompt={title:t.deleteWarningTitle,message:t.deleteWarningMessage,options:[{label:t.keepFeature,type:"neutral",action:function(){return e._prompt=null}},{label:n.delete,type:"positive",action:function(){e.viewModel.deleteFeatureFromWorkflow(),e._prompt=null}}]}}},{key:"_handleSave",value:function(){this.viewModel.activeWorkflow.commit()}},{key:"_handleAttachmentAdd",value:function(){var e=this._attachments,t=this.viewModel.activeWorkflow;e.addAttachment().then((function(){return t.previous()}))}},{key:"_handleAttachmentUpdate",value:function(){var e=this._attachments,t=this.viewModel.activeWorkflow;e.updateAttachment().then((function(){return t.previous()}))}},{key:"_handleAttachmentDelete",value:function(){var e=this,t=this.messages,n=this.messagesCommon;this._prompt={title:t.deleteAttachmentWarningTitle,message:t.deleteAttachmentWarningMessage,options:[{label:t.keepAttachment,type:"neutral",action:function(){return e._prompt=null}},{label:n.delete,type:"positive",action:function(){var t=e._attachments,n=e.viewModel.activeWorkflow;t.deleteAttachment(t.viewModel.activeAttachmentInfo).then((function(){n.previous(),e._prompt=null}))}}]}}},{key:"_handleAdd",value:function(){this.viewModel.canCreate&&this.viewModel.startCreateWorkflowAtFeatureTypeSelection()}},{key:"_handleEdit",value:function(){this.viewModel.canUpdate&&this.viewModel.startUpdateWorkflowAtFeatureSelection()}},{key:"_handleDone",value:function(){this.viewModel.cancelWorkflow({force:!0})}},{key:"_handleBack",value:function(){var e=this,t=this.messages,n=this.viewModel.activeWorkflow,r=n.stepId,i=n.data,a=n.type,o=function(){n.hasPreviousStep?n.previous():e.viewModel.cancelWorkflow({force:!0})};if("editing-new-feature"===r||"editing-existing-feature"===r&&i.edits.modified){var s="create"===a?t.cancelAddWarningMessage:t.cancelEditWarningMessage,c="create"===a?t.cancelAddTitle:t.cancelEditTitle,l="create"===a?t.continueAdding:t.continueEditing,u="create"===a?t.discardFeature:t.discardEdits;this._prompt={title:c,message:s,options:[{label:l,type:"neutral",action:function(){return e._prompt=null}},{label:u,type:"negative",action:function(){o(),e._prompt=null}}]}}else o()}}]),n}(Object(m.b)(k.a));Object(l.a)([Object(d.b)()],Jr.prototype,"_attachments",void 0),Object(l.a)([Object(f.a)("viewModel.activeWorkflow")],Jr.prototype,"activeWorkflow",void 0),Object(l.a)([Object(f.a)("viewModel.allowedWorkflows")],Jr.prototype,"allowedWorkflows",void 0),Object(l.a)([Object(d.b)()],Jr.prototype,"iconClass",void 0),Object(l.a)([Object(d.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Jr.prototype,"label",void 0),Object(l.a)([Object(f.a)("viewModel.layerInfos")],Jr.prototype,"layerInfos",void 0),Object(l.a)([Object(d.b)(),Object(j.a)("esri/widgets/Editor/t9n/Editor")],Jr.prototype,"messages",void 0),Object(l.a)([Object(d.b)(),Object(j.a)("esri/t9n/common")],Jr.prototype,"messagesCommon",void 0),Object(l.a)([Object(d.b)(),Object(j.a)("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],Jr.prototype,"messagesTemplates",void 0),Object(l.a)([Object(f.a)("viewModel.snappingOptions")],Jr.prototype,"snappingOptions",void 0),Object(l.a)([Object(d.b)()],Jr.prototype,"supportingWidgetDefaults",void 0),Object(l.a)([Object(f.a)("viewModel.view")],Jr.prototype,"view",void 0),Object(l.a)([Object(d.b)(),Object(w.a)(["workflow-cancel","workflow-commit"])],Jr.prototype,"viewModel",void 0),Object(l.a)([Object(O.a)()],Jr.prototype,"_handleDelete",null),Object(l.a)([Object(O.a)()],Jr.prototype,"_handleAttachmentAdd",null),Object(l.a)([Object(O.a)()],Jr.prototype,"_handleAttachmentUpdate",null),Object(l.a)([Object(O.a)()],Jr.prototype,"_handleAttachmentDelete",null),Object(l.a)([Object(O.a)()],Jr.prototype,"_handleAdd",null),Object(l.a)([Object(O.a)()],Jr.prototype,"_handleEdit",null),Object(l.a)([Object(O.a)()],Jr.prototype,"_handleDone",null),Object(l.a)([Object(O.a)()],Jr.prototype,"_handleBack",null);Jr=Object(l.a)([Object(p.a)("esri.widgets.Editor")],Jr)},function(e,t,n){"use strict";var r,i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(22)),u=(n(13),n(17)),d=n(1),f=n(47),p=n(41),h=n(8),b=(n(12),n(19),n(20),n(28)),v=r=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).minValue=0,r.maxValue=0,r}return Object(a.a)(n,[{key:"clone",value:function(){return new r({minValue:this.minValue,maxValue:this.maxValue})}}]),n}(b.a);Object(c.a)([Object(d.b)({type:Number,json:{write:!0}})],v.prototype,"minValue",void 0),Object(c.a)([Object(d.b)({type:Number,json:{write:!0}})],v.prototype,"maxValue",void 0);var y,m=v=r=Object(c.a)([Object(h.a)("esri.renderer.support.AuthoringInfoClassBreakInfo")],v),g=y=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).field="",r.normalizationField="",r.label="",r.classBreakInfos=[],r}return Object(a.a)(n,[{key:"clone",value:function(){return new y({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:Object(l.a)(this.classBreakInfos)})}}]),n}(b.a);Object(c.a)([Object(d.b)({type:String,json:{write:!0}})],g.prototype,"field",void 0),Object(c.a)([Object(d.b)({type:String,json:{write:!0}})],g.prototype,"normalizationField",void 0),Object(c.a)([Object(d.b)({type:String,json:{write:!0}})],g.prototype,"label",void 0),Object(c.a)([Object(d.b)({type:[m],json:{write:!0}})],g.prototype,"classBreakInfos",void 0);var O,j=g=y=Object(c.a)([Object(h.a)("esri.renderers.support.AuthoringInfoFieldInfo")],g),w=n(35),_=n(58),k=new f.a({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),x=new f.a({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),S={key:function(e){return"number"==typeof e?"number":"string"},typeMap:{number:Number,string:String},base:null},T=["high-to-low","above-and-below","centered-on","extremes"],E=Object(w.a)(new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below"].concat(["high-to-low","above-and-below","90-10","above","below"]))),C=["seconds","minutes","hours","days","months","years"],P=O=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).endTime=null,r.field=null,r.maxSliderValue=null,r.minSliderValue=null,r.startTime=null,r.type=null,r.units=null,r}return Object(a.a)(n,[{key:"castEndTime",value:function(e){return"string"==typeof e||"number"==typeof e?e:null}},{key:"castStartTime",value:function(e){return"string"==typeof e||"number"==typeof e?e:null}},{key:"style",get:function(){return"color"===this.type?this._get("style"):null},set:function(e){this._set("style",e)}},{key:"theme",get:function(){return"color"===this.type||"size"===this.type?this._get("theme")||"high-to-low":null},set:function(e){this._set("theme",e)}},{key:"clone",value:function(){return new O({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}}]),n}(b.a);Object(c.a)([Object(d.b)({types:S,json:{write:!0}})],P.prototype,"endTime",void 0),Object(c.a)([Object(_.a)("endTime")],P.prototype,"castEndTime",null),Object(c.a)([Object(d.b)({type:String,json:{write:!0}})],P.prototype,"field",void 0),Object(c.a)([Object(d.b)({type:Number,json:{write:!0}})],P.prototype,"maxSliderValue",void 0),Object(c.a)([Object(d.b)({type:Number,json:{write:!0}})],P.prototype,"minSliderValue",void 0),Object(c.a)([Object(d.b)({types:S,json:{write:!0}})],P.prototype,"startTime",void 0),Object(c.a)([Object(_.a)("startTime")],P.prototype,"castStartTime",null),Object(c.a)([Object(d.b)({type:k.apiValues,value:null,json:{type:k.jsonValues,read:k.read,write:k.write}})],P.prototype,"style",null),Object(c.a)([Object(d.b)({type:E,value:null,json:{type:E,origins:{"web-scene":{type:T,write:{writer:function(e,t){T.indexOf(e)>-1&&(t.theme=e)}}}},write:!0}})],P.prototype,"theme",null),Object(c.a)([Object(d.b)({type:x.apiValues,json:{type:x.jsonValues,read:x.read,write:x.write}})],P.prototype,"type",void 0),Object(c.a)([Object(d.b)({type:C,json:{type:C,write:!0}})],P.prototype,"units",void 0);var I,M=P=O=Object(c.a)([Object(h.a)("esri.renderers.support.AuthoringInfoVisualVariable")],P),A=n(564),R=new f.a({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),L=new f.a({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),F=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],D=I=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).colorRamp=null,r.lengthUnit=null,r.maxSliderValue=null,r.minSliderValue=null,r.visualVariables=null,r}return Object(a.a)(n,[{key:"classificationMethod",get:function(){var e=this._get("classificationMethod"),t=this.type;return t&&"relationship"!==t?"class-breaks-size"===t||"class-breaks-color"===t?e||"manual":null:e},set:function(e){this._set("classificationMethod",e)}},{key:"readColorRamp",value:function(e){if(e)return Object(A.a)(e)}},{key:"fields",get:function(){return this.type&&"predominance"!==this.type?null:this._get("fields")},set:function(e){this._set("fields",e)}},{key:"field1",get:function(){return this.type&&"relationship"!==this.type?null:this._get("field1")},set:function(e){this._set("field1",e)}},{key:"field2",get:function(){return this.type&&"relationship"!==this.type?null:this._get("field2")},set:function(e){this._set("field2",e)}},{key:"focus",get:function(){return this.type&&"relationship"!==this.type?null:this._get("focus")},set:function(e){this._set("focus",e)}},{key:"numClasses",get:function(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")},set:function(e){this._set("numClasses",e)}},{key:"statistics",get:function(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("statistics"):null},set:function(e){this._set("statistics",e)}},{key:"standardDeviationInterval",get:function(){var e=this.type;return e&&"relationship"!==e&&"class-breaks-size"!==e&&"class-breaks-color"!==e||this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")},set:function(e){this._set("standardDeviationInterval",e)}},{key:"type",get:function(){return this._get("type")},set:function(e){var t=e;"classed-size"===e?t="class-breaks-size":"classed-color"===e&&(t="class-breaks-color"),this._set("type",t)}},{key:"univariateSymbolStyle",get:function(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("univariateSymbolStyle"):null},set:function(e){this._set("univariateSymbolStyle",e)}},{key:"univariateTheme",get:function(){return"univariate-color-size"===this.type?this._get("univariateTheme"):null},set:function(e){this._set("univariateTheme",e)}},{key:"clone",value:function(){return new I({classificationMethod:this.classificationMethod,colorRamp:Object(l.a)(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:Object(l.a)(this.field1),field2:Object(l.a)(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map((function(e){return e.clone()})),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme})}}]),n}(b.a);Object(c.a)([Object(d.b)({type:R.apiValues,value:null,json:{type:R.jsonValues,read:R.read,write:R.write,origins:{"web-document":{default:"manual",type:R.jsonValues,read:R.read,write:R.write}}}})],D.prototype,"classificationMethod",null),Object(c.a)([Object(d.b)({types:A.b,json:{write:!0}})],D.prototype,"colorRamp",void 0),Object(c.a)([Object(p.a)("colorRamp")],D.prototype,"readColorRamp",null),Object(c.a)([Object(d.b)({type:[String],value:null,json:{write:!0}})],D.prototype,"fields",null),Object(c.a)([Object(d.b)({type:j,value:null,json:{write:!0}})],D.prototype,"field1",null),Object(c.a)([Object(d.b)({type:j,value:null,json:{write:!0}})],D.prototype,"field2",null),Object(c.a)([Object(d.b)({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],D.prototype,"focus",null),Object(c.a)([Object(d.b)({type:Number,value:null,json:{type:u.a,write:!0}})],D.prototype,"numClasses",null),Object(c.a)([Object(d.b)({type:F,json:{type:F,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],D.prototype,"lengthUnit",void 0),Object(c.a)([Object(d.b)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],D.prototype,"maxSliderValue",void 0),Object(c.a)([Object(d.b)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],D.prototype,"minSliderValue",void 0),Object(c.a)([Object(d.b)({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],D.prototype,"statistics",null),Object(c.a)([Object(d.b)({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],D.prototype,"standardDeviationInterval",null),Object(c.a)([Object(d.b)({type:L.apiValues,value:null,json:{type:L.jsonValues,read:L.read,write:L.write}})],D.prototype,"type",null),Object(c.a)([Object(d.b)({type:[M],json:{write:!0}})],D.prototype,"visualVariables",void 0),Object(c.a)([Object(d.b)({type:["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],D.prototype,"univariateSymbolStyle",null),Object(c.a)([Object(d.b)({type:["high-to-low","above-and-below","above","below","90-10"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],D.prototype,"univariateTheme",null);var N=D=I=Object(c.a)([Object(h.a)("esri.renderers.support.AuthoringInfo")],D);t.a=N},function(e,t,n){"use strict";n.r(t),n.d(t,"adjustHue",(function(){return me})),n.d(t,"animation",(function(){return Ye})),n.d(t,"backgroundImages",(function(){return Ke})),n.d(t,"backgrounds",(function(){return Ze})),n.d(t,"between",(function(){return m})),n.d(t,"border",(function(){return Qe})),n.d(t,"borderColor",(function(){return N})),n.d(t,"borderRadius",(function(){return et})),n.d(t,"borderStyle",(function(){return tt})),n.d(t,"borderWidth",(function(){return nt})),n.d(t,"buttons",(function(){return st})),n.d(t,"clearFix",(function(){return g})),n.d(t,"complement",(function(){return ge})),n.d(t,"cover",(function(){return O})),n.d(t,"darken",(function(){return we})),n.d(t,"desaturate",(function(){return ke})),n.d(t,"directionalProperty",(function(){return c})),n.d(t,"ellipsis",(function(){return j})),n.d(t,"em",(function(){return f})),n.d(t,"fluidRange",(function(){return w})),n.d(t,"fontFace",(function(){return k})),n.d(t,"getLuminance",(function(){return xe})),n.d(t,"getValueAndUnit",(function(){return h})),n.d(t,"grayscale",(function(){return Se})),n.d(t,"invert",(function(){return Te})),n.d(t,"hideText",(function(){return x})),n.d(t,"hideVisually",(function(){return S})),n.d(t,"hiDPI",(function(){return T})),n.d(t,"hsl",(function(){return le})),n.d(t,"hsla",(function(){return ue})),n.d(t,"lighten",(function(){return Ce})),n.d(t,"margin",(function(){return ct})),n.d(t,"mix",(function(){return Ie})),n.d(t,"modularScale",(function(){return v})),n.d(t,"normalize",(function(){return E})),n.d(t,"opacify",(function(){return Ae})),n.d(t,"padding",(function(){return lt})),n.d(t,"parseToHsl",(function(){return re})),n.d(t,"parseToRgb",(function(){return ne})),n.d(t,"placeholder",(function(){return C})),n.d(t,"position",(function(){return dt})),n.d(t,"radialGradient",(function(){return A})),n.d(t,"readableColor",(function(){return Re})),n.d(t,"rem",(function(){return y})),n.d(t,"retinaImage",(function(){return R})),n.d(t,"rgb",(function(){return de})),n.d(t,"rgba",(function(){return fe})),n.d(t,"saturate",(function(){return Fe})),n.d(t,"selection",(function(){return L})),n.d(t,"setHue",(function(){return Ne})),n.d(t,"setLightness",(function(){return ze})),n.d(t,"setSaturation",(function(){return Be})),n.d(t,"shade",(function(){return qe})),n.d(t,"size",(function(){return ft})),n.d(t,"stripUnit",(function(){return u})),n.d(t,"textInputs",(function(){return bt})),n.d(t,"timingFunctions",(function(){return D})),n.d(t,"tint",(function(){return We})),n.d(t,"toColorString",(function(){return he})),n.d(t,"transitions",(function(){return vt})),n.d(t,"transparentize",(function(){return Je})),n.d(t,"triangle",(function(){return B})),n.d(t,"wordWrap",(function(){return G}));var r=n(73);function i(e){return e.charAt(0).toUpperCase()+e.slice(1)}var a=["Top","Right","Bottom","Left"];function o(e,t){if(!e)return t.toLowerCase();var n=e.split("-");if(n.length>1)return n.splice(1,0,t),n.reduce((function(e,t){return""+e+i(t)}));var r=e.replace(/([a-z])([A-Z])/g,"$1"+t+"$2");return e===r?""+e+t:r}function s(e,t){for(var n={},r=0;r<t.length;r+=1)(t[r]||0===t[r])&&(n[o(e,a[r])]=t[r]);return n}function c(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n[0],a=n[1],o=void 0===a?i:a,c=n[2],l=void 0===c?i:c,u=n[3],d=void 0===u?o:u,f=[i,o,l,d];return s(e,f)}function l(e,t){return e.substr(-t.length)===t}function u(e){var t=parseFloat(e);return isNaN(t)?e:t}var d=function(e){return function(t,n){void 0===n&&(n="16px");var r=t,i=n;if("string"===typeof t){if(!l(t,"px"))throw new Error('Expected a string ending in "px" or a number passed as the first argument to '+e+'(), got "'+t+'" instead.');r=u(t)}if("string"===typeof n){if(!l(n,"px"))throw new Error('Expected a string ending in "px" or a number passed as the second argument to '+e+'(), got "'+n+'" instead.');i=u(n)}if("string"===typeof r)throw new Error('Passed invalid pixel value ("'+t+'") to '+e+'(), please pass a value like "12px" or 12.');if("string"===typeof i)throw new Error('Passed invalid base value ("'+n+'") to '+e+'(), please pass a value like "12px" or 12.');return""+r/i+e}},f=d("em"),p=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;function h(e){if("string"!==typeof e)return[e,""];var t=e.match(p);return t?[parseFloat(e),t[2]]:[e,void 0]}var b={minorSecond:1.067,majorSecond:1.125,minorThird:1.2,majorThird:1.25,perfectFourth:1.333,augFourth:1.414,perfectFifth:1.5,minorSixth:1.6,goldenSection:1.618,majorSixth:1.667,minorSeventh:1.778,majorSeventh:1.875,octave:2,majorTenth:2.5,majorEleventh:2.667,majorTwelfth:3,doubleOctave:4};function v(e,t,n){if(void 0===t&&(t="1em"),void 0===n&&(n="perfectFourth"),"number"!==typeof e)throw new Error("Please provide a number of steps to the modularScale helper.");if("string"===typeof n&&!b[n])throw new Error("Please pass a number or one of the predefined scales to the modularScale helper as the ratio.");var r="string"===typeof t?u(t):t,i="string"===typeof n?b[n]:n;if("string"===typeof r)throw new Error('Invalid value passed as base to modularScale, expected number or em string but got "'+t+'"');return r*Math.pow(i,e)+"em"}var y=d("rem");function m(e,t,n,r){void 0===n&&(n="320px"),void 0===r&&(r="1200px");var i=h(e),a=i[0],o=i[1],s=h(t),c=s[0],l=s[1],u=h(n),d=u[0],f=u[1],p=h(r),b=p[0],v=p[1];if("number"!==typeof d||"number"!==typeof b||!f||!v||f!==v)throw new Error("minScreen and maxScreen must be provided as stringified numbers with the same units.");if("number"!==typeof a||"number"!==typeof c||!o||!l||o!==l)throw new Error("fromSize and toSize must be provided as stringified numbers with the same units.");var y=(a-c)/(d-b);return"calc("+(c-y*b).toFixed(2)+o+" + "+(100*y).toFixed(2)+"vw)"}function g(e){var t;return void 0===e&&(e="&"),(t={})[e+"::after"]={clear:"both",content:'""',display:"table"},t}function O(e){return void 0===e&&(e=0),{position:"absolute",top:e,right:e,bottom:e,left:e}}function j(e){return void 0===e&&(e="100%"),{display:"inline-block",maxWidth:e,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordWrap:"normal"}}function w(e,t,n){if(void 0===t&&(t="320px"),void 0===n&&(n="1200px"),!Array.isArray(e)&&"object"!==typeof e||null===e)throw new Error("expects either an array of objects or a single object with the properties prop, fromSize, and toSize.");if(Array.isArray(e)){var i={},a={},o=e,s=Array.isArray(o),c=0;for(o=s?o:o[Symbol.iterator]();;){var l,u,d;if(s){if(c>=o.length)break;d=o[c++]}else{if((c=o.next()).done)break;d=c.value}var f=d;if(!f.prop||!f.fromSize||!f.toSize)throw new Error("expects the objects in the first argument array to have the properties `prop`, `fromSize`, and `toSize`.");a[f.prop]=f.fromSize,i["@media (min-width: "+t+")"]=Object(r.a)({},i["@media (min-width: "+t+")"],((l={})[f.prop]=m(f.fromSize,f.toSize,t,n),l)),i["@media (min-width: "+n+")"]=Object(r.a)({},i["@media (min-width: "+n+")"],((u={})[f.prop]=f.toSize,u))}return Object(r.a)({},a,i)}var p,h,b;if(!e.prop||!e.fromSize||!e.toSize)throw new Error("expects the first argument object to have the properties `prop`, `fromSize`, and `toSize`.");return(b={})[e.prop]=e.fromSize,b["@media (min-width: "+t+")"]=((p={})[e.prop]=m(e.fromSize,e.toSize,t,n),p),b["@media (min-width: "+n+")"]=((h={})[e.prop]=e.toSize,h),b}function _(e,t,n){var r=[];return t&&r.push(function(e){return e.map((function(e){return'local("'+e+'")'})).join(", ")}(t)),e&&r.push(function(e,t){return t.map((function(t){return'url("'+e+"."+t+'")'})).join(", ")}(e,n)),r.join(", ")}function k(e){var t=e.fontFamily,n=e.fontFilePath,r=e.fontStretch,i=e.fontStyle,a=e.fontVariant,o=e.fontWeight,s=e.fileFormats,c=void 0===s?["eot","woff2","woff","ttf","svg"]:s,l=e.localFonts,u=e.unicodeRange,d=e.fontDisplay,f=e.fontVariationSettings,p=e.fontFeatureSettings;if(!t)throw new Error("fontFace expects a name of a font-family.");if(!n&&!l)throw new Error("fontFace expects either the path to the font file(s) or a name of a local copy.");if(l&&!Array.isArray(l))throw new Error("fontFace expects localFonts to be an array.");if(!Array.isArray(c))throw new Error("fontFace expects fileFormats to be an array.");var h={"@font-face":{fontFamily:t,src:_(n,l,c),unicodeRange:u,fontStretch:r,fontStyle:i,fontVariant:a,fontWeight:o,fontDisplay:d,fontVariationSettings:f,fontFeatureSettings:p}};return JSON.parse(JSON.stringify(h))}function x(){return{textIndent:"101%",overflow:"hidden",whiteSpace:"nowrap"}}function S(){return{border:"0",clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",whiteSpace:"nowrap",width:"1px"}}function T(e){return void 0===e&&(e=1.3),"\n    @media only screen and (-webkit-min-device-pixel-ratio: "+e+"),\n    only screen and (min--moz-device-pixel-ratio: "+e+"),\n    only screen and (-o-min-device-pixel-ratio: "+e+"/1),\n    only screen and (min-resolution: "+Math.round(96*e)+"dpi),\n    only screen and (min-resolution: "+e+"dppx)\n  "}function E(){var e;return[(e={html:{lineHeight:"1.15",textSizeAdjust:"100%"},body:{margin:"0"},h1:{fontSize:"2em",margin:"0.67em 0"},hr:{boxSizing:"content-box",height:"0",overflow:"visible"},pre:{fontFamily:"monospace, monospace",fontSize:"1em"},a:{backgroundColor:"transparent"},"abbr[title]":{borderBottom:"none",textDecoration:"underline"}},e["b,\n    strong"]={fontWeight:"bolder"},e["code,\n    kbd,\n    samp"]={fontFamily:"monospace, monospace",fontSize:"1em"},e.small={fontSize:"80%"},e["sub,\n    sup"]={fontSize:"75%",lineHeight:"0",position:"relative",verticalAlign:"baseline"},e.sub={bottom:"-0.25em"},e.sup={top:"-0.5em"},e.img={borderStyle:"none"},e["button,\n    input,\n    optgroup,\n    select,\n    textarea"]={fontFamily:"inherit",fontSize:"100%",lineHeight:"1.15",margin:"0"},e["button,\n    input"]={overflow:"visible"},e["button,\n    select"]={textTransform:"none"},e['button,\n    html [type="button"],\n    [type="reset"],\n    [type="submit"]']={WebkitAppearance:"button"},e['button::-moz-focus-inner,\n    [type="button"]::-moz-focus-inner,\n    [type="reset"]::-moz-focus-inner,\n    [type="submit"]::-moz-focus-inner']={borderStyle:"none",padding:"0"},e['button:-moz-focusring,\n    [type="button"]:-moz-focusring,\n    [type="reset"]:-moz-focusring,\n    [type="submit"]:-moz-focusring']={outline:"1px dotted ButtonText"},e.fieldset={padding:"0.35em 0.625em 0.75em"},e.legend={boxSizing:"border-box",color:"inherit",display:"table",maxWidth:"100%",padding:"0",whiteSpace:"normal"},e.progress={verticalAlign:"baseline"},e.textarea={overflow:"auto"},e['[type="checkbox"],\n    [type="radio"]']={boxSizing:"border-box",padding:"0"},e['[type="number"]::-webkit-inner-spin-button,\n    [type="number"]::-webkit-outer-spin-button']={height:"auto"},e['[type="search"]']={WebkitAppearance:"textfield",outlineOffset:"-2px"},e['[type="search"]::-webkit-search-decoration']={WebkitAppearance:"none"},e["::-webkit-file-upload-button"]={WebkitAppearance:"button",font:"inherit"},e.details={display:"block"},e.summary={display:"list-item"},e.template={display:"none"},e["[hidden]"]={display:"none"},e),{"abbr[title]":{textDecoration:"underline dotted"}}]}function C(e,t){var n;return void 0===t&&(t="&"),(n={})[t+"::-webkit-input-placeholder"]=Object(r.a)({},e),n[t+":-moz-placeholder"]=Object(r.a)({},e),n[t+"::-moz-placeholder"]=Object(r.a)({},e),n[t+":-ms-input-placeholder"]=Object(r.a)({},e),n}function P(){var e,t,n=(e=["radial-gradient(","","","",")"],t||(t=e.slice(0)),e.raw=t,e);return P=function(){return n},n}function I(e){return e[0].split(" ")[0]}function M(e){for(var t="",n=0;n<e.length;n+=1)t+=e[n],3===n&&(n+1<1||arguments.length<=n+1?void 0:arguments[n+1])&&((arguments.length<=1?void 0:arguments[1])||(arguments.length<=2?void 0:arguments[2])||(arguments.length<=3?void 0:arguments[3]))?(t=t.slice(0,-1),t+=", "+(n+1<1||arguments.length<=n+1?void 0:arguments[n+1])):3!==n||!(n+1<1||arguments.length<=n+1?void 0:arguments[n+1])||(arguments.length<=1?void 0:arguments[1])||(arguments.length<=2?void 0:arguments[2])||(arguments.length<=3?void 0:arguments[3])?(n+1<1||arguments.length<=n+1?void 0:arguments[n+1])&&(t+=(n+1<1||arguments.length<=n+1?void 0:arguments[n+1])+" "):t+=""+(n+1<1||arguments.length<=n+1?void 0:arguments[n+1]);return t.trim()}function A(e){var t=e.colorStops,n=e.extent,r=e.fallback,i=e.position,a=e.shape;if(!t||t.length<2)throw new Error("radialGradient requries at least 2 color-stops to properly render.");return{backgroundColor:r||I(t),backgroundImage:M(P(),i,a,n,t.join(", "))}}function R(e,t,n,i,a){var o;if(void 0===n&&(n="png"),void 0===a&&(a="_2x"),!e)throw new Error("Please supply a filename to retinaImage() as the first argument.");var s=n.replace(/^\./,""),c=i?i+"."+s:""+e+a+"."+s;return(o={backgroundImage:"url("+e+"."+s+")"})[T()]=Object(r.a)({backgroundImage:"url("+c+")"},t?{backgroundSize:t}:{}),o}function L(e,t){var n;return void 0===t&&(t=""),(n={})[t+"::-moz-selection"]=Object(r.a)({},e),n[t+"::selection"]=Object(r.a)({},e),n}var F={easeInBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",easeInCirc:"cubic-bezier(0.600,  0.040, 0.980, 0.335)",easeInCubic:"cubic-bezier(0.550,  0.055, 0.675, 0.190)",easeInExpo:"cubic-bezier(0.950,  0.050, 0.795, 0.035)",easeInQuad:"cubic-bezier(0.550,  0.085, 0.680, 0.530)",easeInQuart:"cubic-bezier(0.895,  0.030, 0.685, 0.220)",easeInQuint:"cubic-bezier(0.755,  0.050, 0.855, 0.060)",easeInSine:"cubic-bezier(0.470,  0.000, 0.745, 0.715)",easeOutBack:"cubic-bezier(0.175,  0.885, 0.320, 1.275)",easeOutCubic:"cubic-bezier(0.215,  0.610, 0.355, 1.000)",easeOutCirc:"cubic-bezier(0.075,  0.820, 0.165, 1.000)",easeOutExpo:"cubic-bezier(0.190,  1.000, 0.220, 1.000)",easeOutQuad:"cubic-bezier(0.250,  0.460, 0.450, 0.940)",easeOutQuart:"cubic-bezier(0.165,  0.840, 0.440, 1.000)",easeOutQuint:"cubic-bezier(0.230,  1.000, 0.320, 1.000)",easeOutSine:"cubic-bezier(0.390,  0.575, 0.565, 1.000)",easeInOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",easeInOutCirc:"cubic-bezier(0.785,  0.135, 0.150, 0.860)",easeInOutCubic:"cubic-bezier(0.645,  0.045, 0.355, 1.000)",easeInOutExpo:"cubic-bezier(1.000,  0.000, 0.000, 1.000)",easeInOutQuad:"cubic-bezier(0.455,  0.030, 0.515, 0.955)",easeInOutQuart:"cubic-bezier(0.770,  0.000, 0.175, 1.000)",easeInOutQuint:"cubic-bezier(0.860,  0.000, 0.070, 1.000)",easeInOutSine:"cubic-bezier(0.445,  0.050, 0.550, 0.950)"};function D(e){return F[e]}function N(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.apply(void 0,["borderColor"].concat(t))}var V=function(e,t,n){switch(e){case"top":return"0 "+n[0]/2+n[1]+" "+t[0]+t[1]+" "+n[0]/2+n[1];case"left":return""+t[0]/2+t[1]+" "+n[0]+n[1]+" "+t[0]/2+t[1]+" 0";case"bottom":return""+t[0]+t[1]+" "+n[0]/2+n[1]+" 0 "+n[0]/2+n[1];case"right":return""+t[0]/2+t[1]+" 0 "+t[0]/2+t[1]+" "+n[0]+n[1];default:throw new Error("Passed invalid argument to triangle, please pass correct pointingDirection e.g. 'right'.")}},z=["bottom","left","top","right"],U=/(\d*\.?\d*)/;function B(e){var t=e.pointingDirection,n=e.height,i=e.width,a=e.foregroundColor,o=e.backgroundColor,s=void 0===o?"transparent":o,c=[parseFloat(i),String(i).replace(U,"")||"px"],l=[parseFloat(n),String(n).replace(U,"")||"px"];if(isNaN(l[0])||isNaN(c[0]))throw new Error("Passed an invalid value to `height` or `width`. Please provide a pixel based unit");var u=z.indexOf(t);return Object(r.a)({width:"0",height:"0",borderWidth:V(t,l,c),borderStyle:"solid"},N.apply(void 0,Array.from({length:4}).map((function(e,t){return t===u?a:s}))))}function G(e){return void 0===e&&(e="break-word"),{overflowWrap:e,wordWrap:e,wordBreak:"break-word"===e?"break-all":e}}function q(e){return Math.round(255*e)}function H(e,t,n){return q(e)+","+q(t)+","+q(n)}function W(e,t,n,r){if(void 0===r&&(r=H),0===t)return r(n,n,n);var i=e%360/60,a=(1-Math.abs(2*n-1))*t,o=a*(1-Math.abs(i%2-1)),s=0,c=0,l=0;i>=0&&i<1?(s=a,c=o):i>=1&&i<2?(s=o,c=a):i>=2&&i<3?(c=a,l=o):i>=3&&i<4?(c=o,l=a):i>=4&&i<5?(s=o,l=a):i>=5&&i<6&&(s=a,l=o);var u=n-a/2;return r(s+u,c+u,l+u)}var $={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var J=/^#[a-fA-F0-9]{6}$/,Y=/^#[a-fA-F0-9]{8}$/,K=/^#[a-fA-F0-9]{3}$/,Z=/^#[a-fA-F0-9]{4}$/,X=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/,Q=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/,ee=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/,te=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/;function ne(e){if("string"!==typeof e)throw new Error("Passed an incorrect argument to a color function, please pass a string representation of a color.");var t=function(e){if("string"!==typeof e)return e;var t=e.toLowerCase();return $[t]?"#"+$[t]:e}(e);if(t.match(J))return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16)};if(t.match(Y)){var n=parseFloat((parseInt(""+t[7]+t[8],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16),alpha:n}}if(t.match(K))return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16)};if(t.match(Z)){var r=parseFloat((parseInt(""+t[4]+t[4],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16),alpha:r}}var i=X.exec(t);if(i)return{red:parseInt(""+i[1],10),green:parseInt(""+i[2],10),blue:parseInt(""+i[3],10)};var a=Q.exec(t);if(a)return{red:parseInt(""+a[1],10),green:parseInt(""+a[2],10),blue:parseInt(""+a[3],10),alpha:parseFloat(""+a[4])};var o=ee.exec(t);if(o){var s="rgb("+W(parseInt(""+o[1],10),parseInt(""+o[2],10)/100,parseInt(""+o[3],10)/100)+")",c=X.exec(s);if(!c)throw new Error("Couldn't generate valid rgb string from "+t+", it returned "+s+".");return{red:parseInt(""+c[1],10),green:parseInt(""+c[2],10),blue:parseInt(""+c[3],10)}}var l=te.exec(t);if(l){var u="rgb("+W(parseInt(""+l[1],10),parseInt(""+l[2],10)/100,parseInt(""+l[3],10)/100)+")",d=X.exec(u);if(!d)throw new Error("Couldn't generate valid rgb string from "+t+", it returned "+u+".");return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10),alpha:parseFloat(""+l[4])}}throw new Error("Couldn't parse the color string. Please provide the color as a string in hex, rgb, rgba, hsl or hsla notation.")}function re(e){return function(e){var t,n=e.red/255,r=e.green/255,i=e.blue/255,a=Math.max(n,r,i),o=Math.min(n,r,i),s=(a+o)/2;if(a===o)return void 0!==e.alpha?{hue:0,saturation:0,lightness:s,alpha:e.alpha}:{hue:0,saturation:0,lightness:s};var c=a-o,l=s>.5?c/(2-a-o):c/(a+o);switch(a){case n:t=(r-i)/c+(r<i?6:0);break;case r:t=(i-n)/c+2;break;default:t=(n-r)/c+4}return t*=60,void 0!==e.alpha?{hue:t,saturation:l,lightness:s,alpha:e.alpha}:{hue:t,saturation:l,lightness:s}}(ne(e))}var ie=function(e){return 7===e.length&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e};function ae(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function oe(e){return ae(Math.round(255*e))}function se(e,t,n){return ie("#"+oe(e)+oe(t)+oe(n))}function ce(e,t,n){return W(e,t,n,se)}function le(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return ce(e,t,n);if("object"===typeof e&&void 0===t&&void 0===n)return ce(e.hue,e.saturation,e.lightness);throw new Error("Passed invalid arguments to hsl, please pass multiple numbers e.g. hsl(360, 0.75, 0.4) or an object e.g. rgb({ hue: 255, saturation: 0.4, lightness: 0.75 }).")}function ue(e,t,n,r){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n&&"number"===typeof r)return r>=1?ce(e,t,n):"rgba("+W(e,t,n)+","+r+")";if("object"===typeof e&&void 0===t&&void 0===n&&void 0===r)return e.alpha>=1?ce(e.hue,e.saturation,e.lightness):"rgba("+W(e.hue,e.saturation,e.lightness)+","+e.alpha+")";throw new Error("Passed invalid arguments to hsla, please pass multiple numbers e.g. hsl(360, 0.75, 0.4, 0.7) or an object e.g. rgb({ hue: 255, saturation: 0.4, lightness: 0.75, alpha: 0.7 }).")}function de(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return ie("#"+ae(e)+ae(t)+ae(n));if("object"===typeof e&&void 0===t&&void 0===n)return ie("#"+ae(e.red)+ae(e.green)+ae(e.blue));throw new Error("Passed invalid arguments to rgb, please pass multiple numbers e.g. rgb(255, 205, 100) or an object e.g. rgb({ red: 255, green: 205, blue: 100 }).")}function fe(e,t,n,r){if("string"===typeof e&&"number"===typeof t){var i=ne(e);return"rgba("+i.red+","+i.green+","+i.blue+","+t+")"}if("number"===typeof e&&"number"===typeof t&&"number"===typeof n&&"number"===typeof r)return r>=1?de(e,t,n):"rgba("+e+","+t+","+n+","+r+")";if("object"===typeof e&&void 0===t&&void 0===n&&void 0===r)return e.alpha>=1?de(e.red,e.green,e.blue):"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")";throw new Error("Passed invalid arguments to rgba, please pass multiple numbers e.g. rgb(255, 205, 100, 0.75) or an object e.g. rgb({ red: 255, green: 205, blue: 100, alpha: 0.75 }).")}var pe="Passed invalid argument to toColorString, please pass a RgbColor, RgbaColor, HslColor or HslaColor object.";function he(e){if("object"!==typeof e)throw new Error(pe);if(function(e){return"number"===typeof e.red&&"number"===typeof e.green&&"number"===typeof e.blue&&"number"===typeof e.alpha}(e))return fe(e);if(function(e){return"number"===typeof e.red&&"number"===typeof e.green&&"number"===typeof e.blue&&("number"!==typeof e.alpha||"undefined"===typeof e.alpha)}(e))return de(e);if(function(e){return"number"===typeof e.hue&&"number"===typeof e.saturation&&"number"===typeof e.lightness&&"number"===typeof e.alpha}(e))return ue(e);if(function(e){return"number"===typeof e.hue&&"number"===typeof e.saturation&&"number"===typeof e.lightness&&("number"!==typeof e.alpha||"undefined"===typeof e.alpha)}(e))return le(e);throw new Error(pe)}function be(e,t,n){return function(){var r=n.concat(Array.prototype.slice.call(arguments));return r.length>=t?e.apply(this,r):be(e,t,r)}}function ve(e){return be(e,e.length,[])}function ye(e,t){var n=re(t);return he(Object(r.a)({},n,{hue:(n.hue+parseFloat(e))%360}))}var me=ve(ye);function ge(e){var t=re(e);return he(Object(r.a)({},t,{hue:(t.hue+180)%360}))}function Oe(e,t,n){return Math.max(e,Math.min(t,n))}function je(e,t){var n=re(t);return he(Object(r.a)({},n,{lightness:Oe(0,1,n.lightness-parseFloat(e))}))}var we=ve(je);function _e(e,t){var n=re(t);return he(Object(r.a)({},n,{saturation:Oe(0,1,n.saturation-parseFloat(e))}))}var ke=ve(_e);function xe(e){var t=ne(e),n=Object.keys(t).map((function(e){var n=t[e]/255;return n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)})),r=n[0],i=n[1],a=n[2];return parseFloat((.2126*r+.7152*i+.0722*a).toFixed(3))}function Se(e){return he(Object(r.a)({},re(e),{saturation:0}))}function Te(e){var t=ne(e);return he(Object(r.a)({},t,{red:255-t.red,green:255-t.green,blue:255-t.blue}))}function Ee(e,t){var n=re(t);return he(Object(r.a)({},n,{lightness:Oe(0,1,n.lightness+parseFloat(e))}))}var Ce=ve(Ee);function Pe(e,t,n){var i=ne(t),a=Object(r.a)({},i,{alpha:"number"===typeof i.alpha?i.alpha:1}),o=ne(n),s=Object(r.a)({},o,{alpha:"number"===typeof o.alpha?o.alpha:1}),c=a.alpha-s.alpha,l=2*parseFloat(e)-1,u=((l*c===-1?l:l+c)/(1+l*c)+1)/2,d=1-u;return fe({red:Math.floor(a.red*u+s.red*d),green:Math.floor(a.green*u+s.green*d),blue:Math.floor(a.blue*u+s.blue*d),alpha:a.alpha+(s.alpha-a.alpha)*(parseFloat(e)/1)})}var Ie=ve(Pe);function Me(e,t){var n=ne(t),i="number"===typeof n.alpha?n.alpha:1;return fe(Object(r.a)({},n,{alpha:Oe(0,1,(100*i+100*parseFloat(e))/100)}))}var Ae=ve(Me);function Re(e){return xe(e)>.179?"#000":"#fff"}function Le(e,t){var n=re(t);return he(Object(r.a)({},n,{saturation:Oe(0,1,n.saturation+parseFloat(e))}))}var Fe=ve(Le);function De(e,t){return he(Object(r.a)({},re(t),{hue:parseFloat(e)}))}var Ne=ve(De);function Ve(e,t){return he(Object(r.a)({},re(t),{lightness:parseFloat(e)}))}var ze=ve(Ve);function Ue(e,t){return he(Object(r.a)({},re(t),{saturation:parseFloat(e)}))}var Be=ve(Ue);function Ge(e,t){return Ie(parseFloat(e),"rgb(0, 0, 0)",t)}var qe=ve(Ge);function He(e,t){return Ie(parseFloat(e),"rgb(255, 255, 255)",t)}var We=ve(He);function $e(e,t){var n=ne(t),i="number"===typeof n.alpha?n.alpha:1;return fe(Object(r.a)({},n,{alpha:Oe(0,1,(100*i-100*parseFloat(e))/100)}))}var Je=ve($e);function Ye(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Array.isArray(t[0]);if(!r&&t.length>8)throw new Error("The animation shorthand only takes 8 arguments. See the specification for more information: http://mdn.io/animation");var i=t.map((function(e){if(r&&!Array.isArray(e)||!r&&Array.isArray(e))throw new Error("To pass multiple animations please supply them in arrays, e.g. animation(['rotate', '2s'], ['move', '1s'])\nTo pass a single animation please supply them in simple values, e.g. animation('rotate', '2s')");if(Array.isArray(e)&&e.length>8)throw new Error("The animation shorthand arrays can only have 8 elements. See the specification for more information: http://mdn.io/animation");return Array.isArray(e)?e.join(" "):e})).join(", ");return{animation:i}}function Ke(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{backgroundImage:t.join(", ")}}function Ze(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{background:t.join(", ")}}var Xe=["top","right","bottom","left"];function Qe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a;return"string"===typeof e&&Xe.indexOf(e)>=0?((a={})["border"+i(e)+"Width"]=n[0],a["border"+i(e)+"Style"]=n[1],a["border"+i(e)+"Color"]=n[2],a):(n.unshift(e),{borderWidth:n[0],borderStyle:n[1],borderColor:n[2]})}function et(e,t){var n,r,a=i(e);if(!t&&0!==t)throw new Error("borderRadius expects a radius value as a string or number as the second argument.");if("Top"===a||"Bottom"===a)return(n={})["border"+a+"RightRadius"]=t,n["border"+a+"LeftRadius"]=t,n;if("Left"===a||"Right"===a)return(r={})["borderTop"+a+"Radius"]=t,r["borderBottom"+a+"Radius"]=t,r;throw new Error('borderRadius expects one of "top", "bottom", "left" or "right" as the first argument.')}function tt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.apply(void 0,["borderStyle"].concat(t))}function nt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.apply(void 0,["borderWidth"].concat(t))}function rt(e,t){return e(t?":"+t:"")}function it(e,t,n){if(!t)throw new Error("You must provide a template to this method.");if(0===e.length)return rt(t,null);for(var r=[],i=0;i<e.length;i+=1){if(n&&n.indexOf(e[i])<0)throw new Error("You passed an unsupported selector state to this method.");r.push(rt(t,e[i]))}return r=r.join(",")}var at=[void 0,null,"active","focus","hover"];function ot(e){return"button"+e+',\n  input[type="button"]'+e+',\n  input[type="reset"]'+e+',\n  input[type="submit"]'+e}function st(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return it(t,ot,at)}function ct(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.apply(void 0,["margin"].concat(t))}function lt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.apply(void 0,["padding"].concat(t))}var ut=["absolute","fixed","relative","static","sticky"];function dt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(ut.indexOf(e)>=0)return Object(r.a)({position:e},c.apply(void 0,[""].concat(n)));var a=e;return c.apply(void 0,["",a].concat(n))}function ft(e,t){return void 0===t&&(t=e),{height:e,width:t}}var pt=[void 0,null,"active","focus","hover"];function ht(e){return'input[type="color"]'+e+',\n    input[type="date"]'+e+',\n    input[type="datetime"]'+e+',\n    input[type="datetime-local"]'+e+',\n    input[type="email"]'+e+',\n    input[type="month"]'+e+',\n    input[type="number"]'+e+',\n    input[type="password"]'+e+',\n    input[type="search"]'+e+',\n    input[type="tel"]'+e+',\n    input[type="text"]'+e+',\n    input[type="time"]'+e+',\n    input[type="url"]'+e+',\n    input[type="week"]'+e+",\n    input:not([type])"+e+",\n    textarea"+e}function bt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return it(t,ht,pt)}function vt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Array.isArray(t[0])&&2===t.length){var r=t[1];if("string"!==typeof r)throw new Error("Property must be a string value.");var i=t[0].map((function(e){return e+" "+r})).join(", ");return{transition:i}}return{transition:t.join(", ")}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(23),i=n(581),a=n(353),o=n(67),s=n(688),c=n(410),l=n(330),u=/^https?:\/\/(\S+)\.arcgis\.com.+/;function d(e){return u.test(e)}function f(e){if(!u.test(e))return null;var t=e.match(u)[1].split(".").pop();return t.includes("dev")?"dev":t.includes("qa")?"qa":"production"}function p(e,t){var n=Object(i.a)(function(e){if(!u.test(e))return e;switch(f(e)){case"dev":return"https://devext.arcgis.com/sharing/rest";case"qa":return"https://qaext.arcgis.com/sharing/rest";default:return"https://www.arcgis.com/sharing/rest"}}(t)).replace(/https?:\/\//,""),r=Object(i.a)(e).replace(/https?:\/\//,"");return new RegExp(r,"i").test(n)}var h=n(492);var b=function(){function e(e){if(this.clientId=e.clientId,this._refreshToken=e.refreshToken,this._refreshTokenExpires=e.refreshTokenExpires,this.username=e.username,this.password=e.password,this._token=e.token,this._tokenExpires=e.tokenExpires,this.portal=e.portal?Object(i.a)(e.portal):"https://www.arcgis.com/sharing/rest",this.ssl=e.ssl,this.provider=e.provider||"arcgis",this.tokenDuration=e.tokenDuration||20160,this.redirectUri=e.redirectUri,this.refreshTokenTTL=e.refreshTokenTTL||1440,this.trustedServers={},e.server){var t=this.getServerRootUrl(e.server);this.trustedServers[t]={token:e.token,expires:e.tokenExpires}}this._pendingTokenRequests={}}return Object.defineProperty(e.prototype,"token",{get:function(){return this._token},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tokenExpires",{get:function(){return this._tokenExpires},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refreshToken",{get:function(){return this._refreshToken},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refreshTokenExpires",{get:function(){return this._refreshTokenExpires},enumerable:!1,configurable:!0}),e.beginOAuth2=function(t,n){void 0===n&&(n=window);var i,s=Object(r.a)({portal:"https://www.arcgis.com/sharing/rest",provider:"arcgis",duration:20160,popup:!0,popupWindowFeatures:"height=400,width=600,menubar=no,location=yes,resizable=yes,scrollbars=yes,status=yes",state:t.clientId,locale:""},t),c=s.portal,l=s.provider,u=s.clientId,d=s.duration,f=s.redirectUri,p=s.popup,h=s.popupWindowFeatures,b=s.state,v=s.locale,y=s.params;if(i="arcgis"===l?c+"/oauth2/authorize?client_id="+u+"&response_type=token&expiration="+d+"&redirect_uri="+encodeURIComponent(f)+"&state="+b+"&locale="+v:c+"/oauth2/social/authorize?client_id="+u+"&socialLoginProviderName="+l+"&autoAccountCreateForSocial=true&response_type=token&expiration="+d+"&redirect_uri="+encodeURIComponent(f)+"&state="+b+"&locale="+v,y&&(i=i+"&"+Object(a.b)(y)),p){var m=function(){var e={promise:null,resolve:null,reject:null};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}();return n["__ESRI_REST_AUTH_HANDLER_"+u]=function(t,n){if(t){var r=JSON.parse(t);m.reject(new o.a(r.errorMessage,r.error))}else if(n){var i=JSON.parse(n);m.resolve(new e({clientId:u,portal:c,ssl:i.ssl,token:i.token,tokenExpires:new Date(i.expires),username:i.username}))}},n.open(i,"oauth-window",h),m.promise}n.location.href=i},e.completeOAuth2=function(t,n){void 0===n&&(n=window);var i=Object(r.a)({portal:"https://www.arcgis.com/sharing/rest",popup:!0},t),a=i.portal,c=i.clientId,l=i.popup;function u(t,r){try{var i=void 0,s="__ESRI_REST_AUTH_HANDLER_"+c;if(l&&(n.opener?n.opener.parent&&n.opener.parent[s]?i=n.opener.parent[s]:n.opener&&n.opener[s]&&(i=n.opener[s]):n!==n.parent&&n.parent&&n.parent[s]&&(i=n.parent[s]),i))return i(t?JSON.stringify(t):void 0,JSON.stringify(r)),void n.close()}catch(u){throw new o.a('Unable to complete authentication. It\'s possible you specified popup based oAuth2 but no handler from "beginOAuth2()" present. This generally happens because the "popup" option differs between "beginOAuth2()" and "completeOAuth2()".')}if(t)throw new o.a(t.errorMessage,t.error);return new e({clientId:c,portal:a,ssl:r.ssl,token:r.token,tokenExpires:r.expires,username:r.username})}var d=Object(s.b)(n.location.hash);if(!d.access_token){var f=void 0,p="Unknown error";return d.error&&(f=d.error,p=d.error_description),u({error:f,errorMessage:p})}var h=d.access_token,b=new Date(Date.now()+1e3*parseInt(d.expires_in,10)-6e4),v=d.username;return u(void 0,{token:h,expires:b,ssl:"true"===d.ssl,username:v})},e.fromParent=function(t,n){var r;return!n&&window&&(n=window),new Promise((function(i,a){r=function(n){if(n.origin===t)try{return i(e.parentMessageHandler(n))}catch(r){return a(r)}},n.addEventListener("message",r,!1),n.parent.postMessage({type:"arcgis:auth:requestCredential"},t)})).then((function(e){return n.removeEventListener("message",r,!1),e}))},e.authorize=function(e,t){var n=Object(r.a)({portal:"https://arcgis.com/sharing/rest",duration:20160},e),i=n.portal,a=n.clientId,o=n.duration,s=n.redirectUri;t.writeHead(301,{Location:i+"/oauth2/authorize?client_id="+a+"&duration="+o+"&response_type=code&redirect_uri="+encodeURIComponent(s)}),t.end()},e.exchangeAuthorizationCode=function(t,n){var i=Object(r.a)({portal:"https://www.arcgis.com/sharing/rest",refreshTokenTTL:1440},t),a=i.portal,o=i.clientId,s=i.redirectUri,c=i.refreshTokenTTL;return Object(l.a)(a+"/oauth2/token",{params:{grant_type:"authorization_code",client_id:o,redirect_uri:s,code:n}}).then((function(t){return new e({clientId:o,portal:a,ssl:t.ssl,redirectUri:s,refreshToken:t.refreshToken,refreshTokenTTL:c,refreshTokenExpires:new Date(Date.now()+1e3*(c-1)),token:t.token,tokenExpires:t.expires,username:t.username})}))},e.deserialize=function(t){var n=JSON.parse(t);return new e({clientId:n.clientId,refreshToken:n.refreshToken,refreshTokenExpires:new Date(n.refreshTokenExpires),username:n.username,password:n.password,token:n.token,tokenExpires:new Date(n.tokenExpires),portal:n.portal,ssl:n.ssl,tokenDuration:n.tokenDuration,redirectUri:n.redirectUri,refreshTokenTTL:n.refreshTokenTTL})},e.fromCredential=function(t){return new e({portal:t.server.includes("sharing/rest")?t.server:t.server+"/sharing/rest",ssl:t.ssl,token:t.token,username:t.userId,tokenExpires:new Date(t.expires)})},e.parentMessageHandler=function(t){if("arcgis:auth:credential"===t.data.type)return e.fromCredential(t.data.credential);throw"arcgis:auth:rejected"===t.data.type?new Error(t.data.message):new Error("Unknown message type.")},e.prototype.toCredential=function(){return{expires:this.tokenExpires.getTime(),server:this.portal,ssl:this.ssl,token:this.token,userId:this.username}},e.prototype.getUser=function(e){var t=this;if(this._pendingUserRequest)return this._pendingUserRequest;if(this._user)return Promise.resolve(this._user);var n=this.portal+"/community/self",i=Object(r.a)(Object(r.a)({httpMethod:"GET",authentication:this},e),{rawResponse:!1});return this._pendingUserRequest=Object(o.d)(n,i).then((function(e){return t._user=e,t._pendingUserRequest=null,e})),this._pendingUserRequest},e.prototype.getUsername=function(){return this.username?Promise.resolve(this.username):this._user?Promise.resolve(this._user.username):this.getUser().then((function(e){return e.username}))},e.prototype.getToken=function(e,t){return function(e,t){var n=d(e),r=d(t),i=f(e),a=f(t);return!(!n||!r||i!==a)}(this.portal,e)||new RegExp(this.portal,"i").test(e)?this.getFreshToken(t):this.getTokenForServer(e,t)},e.prototype.validateAppAccess=function(e){return this.getToken(this.portal).then((function(t){return Object(h.a)(t,e)}))},e.prototype.toJSON=function(){return{clientId:this.clientId,refreshToken:this.refreshToken,refreshTokenExpires:this.refreshTokenExpires,username:this.username,password:this.password,token:this.token,tokenExpires:this.tokenExpires,portal:this.portal,ssl:this.ssl,tokenDuration:this.tokenDuration,redirectUri:this.redirectUri,refreshTokenTTL:this.refreshTokenTTL}},e.prototype.serialize=function(){return JSON.stringify(this)},e.prototype.enablePostMessageAuth=function(e,t){!t&&window&&(t=window),this._hostHandler=this.createPostMessageHandler(e),t.addEventListener("message",this._hostHandler,!1)},e.prototype.disablePostMessageAuth=function(e){!e&&window&&(e=window),e.removeEventListener("message",this._hostHandler,!1)},e.prototype.refreshSession=function(e){return this._user=null,this.username&&this.password?this.refreshWithUsernameAndPassword(e):this.clientId&&this.refreshToken?this.refreshWithRefreshToken():Promise.reject(new o.a("Unable to refresh token."))},e.prototype.getServerRootUrl=function(e){var t=Object(i.a)(e).split(/\/rest(\/admin)?\/services(?:\/|#|\?|$)/)[0].match(/(https?:\/\/)(.+)/),n=(t[0],t[1]),r=t[2].split("/"),a=r[0],o=r.slice(1);return""+n+a.toLowerCase()+"/"+o.join("/")},e.prototype.createPostMessageHandler=function(e){var t=this;return function(n){if(e.indexOf(n.origin)>-1){var r=t.toCredential();n.source.postMessage({type:"arcgis:auth:credential",credential:r},n.origin)}else n.source.postMessage({type:"arcgis:auth:rejected",message:"Rejected authentication request."},n.origin)}},e.prototype.getTokenForServer=function(e,t){var n=this,r=this.getServerRootUrl(e),i=this.trustedServers[r];return i&&i.expires&&i.expires.getTime()>Date.now()?Promise.resolve(i.token):(this._pendingTokenRequests[r]||(this._pendingTokenRequests[r]=Object(o.d)(r+"/rest/info").then((function(i){if(i.owningSystemUrl){if(p(i.owningSystemUrl,n.portal))return Object(o.d)(i.owningSystemUrl+"/sharing/rest/info",t);throw new o.a(e+" is not federated with "+n.portal+".","NOT_FEDERATED")}if(i.authInfo&&void 0!==n.trustedServers[r])return Promise.resolve({authInfo:i.authInfo});throw new o.a(e+" is not federated with any portal and is not explicitly trusted.","NOT_FEDERATED")})).then((function(e){return e.authInfo.tokenServicesUrl})).then((function(t){return n.token&&n.tokenExpires.getTime()>Date.now()?Object(c.a)(t,{params:{token:n.token,serverUrl:e,expiration:n.tokenDuration,client:"referer"}}):Object(c.a)(t,{params:{username:n.username,password:n.password,expiration:n.tokenDuration,client:"referer"}}).then((function(e){return n._token=e.token,n._tokenExpires=new Date(e.expires),e}))})).then((function(e){return n.trustedServers[r]={expires:new Date(e.expires),token:e.token},delete n._pendingTokenRequests[r],e.token}))),this._pendingTokenRequests[r])},e.prototype.getFreshToken=function(e){var t=this;return this.token&&!this.tokenExpires||this.token&&this.tokenExpires&&this.tokenExpires.getTime()>Date.now()?Promise.resolve(this.token):(this._pendingTokenRequests[this.portal]||(this._pendingTokenRequests[this.portal]=this.refreshSession(e).then((function(e){return t._pendingTokenRequests[t.portal]=null,e.token}))),this._pendingTokenRequests[this.portal])},e.prototype.refreshWithUsernameAndPassword=function(e){var t=this,n=Object(r.a)({params:{username:this.username,password:this.password,expiration:this.tokenDuration}},e);return Object(c.a)(this.portal+"/generateToken",n).then((function(e){return t._token=e.token,t._tokenExpires=new Date(e.expires),t}))},e.prototype.refreshWithRefreshToken=function(e){var t=this;if(this.refreshToken&&this.refreshTokenExpires&&this.refreshTokenExpires.getTime()<Date.now())return this.refreshRefreshToken(e);var n=Object(r.a)({params:{client_id:this.clientId,refresh_token:this.refreshToken,grant_type:"refresh_token"}},e);return Object(l.a)(this.portal+"/oauth2/token",n).then((function(e){return t._token=e.token,t._tokenExpires=e.expires,t}))},e.prototype.refreshRefreshToken=function(e){var t=this,n=Object(r.a)({params:{client_id:this.clientId,refresh_token:this.refreshToken,redirect_uri:this.redirectUri,grant_type:"exchange_refresh_token"}},e);return Object(l.a)(this.portal+"/oauth2/token",n).then((function(e){return t._token=e.token,t._tokenExpires=e.expires,t._refreshToken=e.refreshToken,t._refreshTokenExpires=new Date(Date.now()+60*(t.refreshTokenTTL-1)*1e3),t}))},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r=n(31),i=n(14),a=n(2),o=n(3),s=n(53),c=n(50),l=n(5),u=n(6),d=n(4),f=n(158),p=n(295),h=n(562),b=(n(16),n(45),n(315),n(151)),v=n(235),y=(n(376),n(628)),m=function(){function e(t,n){Object(a.a)(this,e),this.layerUIDs=[],this.isDestroyed=!1,this.data=t,this.memoryUsed=t.byteLength;var r=1,i=new Uint32Array(t);this.layerUIDs=[];for(var o=i[r++],s=0;s<o;s++)this.layerUIDs[s]=i[r++];this.bufferDataOffset=r,n&&(this.layer=n.getStyleLayerByUID(this.layerUIDs[0]))}return Object(o.a)(e,[{key:"isPreparedForRendering",get:function(){return Object(d.j)(this.data)}},{key:"offset",get:function(){return this.bufferDataOffset}},{key:"destroy",value:function(){this.isDestroyed||(this.doDestroy(),this.isDestroyed=!0)}},{key:"prepareForRendering",value:function(e){Object(d.j)(this.data)||(this.doPrepareForRendering(e,this.data,this.bufferDataOffset),this.data=null)}}]),e}(),g=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e,r){var i;Object(a.a)(this,n),(i=t.call(this,e,r)).type=2,i.lineIndexStart=0,i.lineIndexCount=0;var o=new Uint32Array(e),s=i.bufferDataOffset;return i.lineIndexStart=o[s++],i.lineIndexCount=o[s++],i.bufferDataOffset=s,i}return Object(o.a)(n,[{key:"hasData",value:function(){return this.lineIndexCount>0}},{key:"triangleCount",value:function(){return this.lineIndexCount/3}},{key:"doDestroy",value:function(){Object(d.k)(this.lineVertexArrayObject)&&this.lineVertexArrayObject.dispose(),Object(d.k)(this.lineVertexBuffer)&&this.lineVertexBuffer.dispose(),Object(d.k)(this.lineIndexBuffer)&&this.lineIndexBuffer.dispose(),this.lineVertexArrayObject=null,this.lineVertexBuffer=null,this.lineIndexBuffer=null,this.memoryUsed=0}},{key:"doPrepareForRendering",value:function(e,t,n){var r=new Uint32Array(t),i=new Int32Array(r.buffer),a=r[n++];this.lineVertexBuffer=b.a.createVertex(e,35044,new Int32Array(i.buffer,4*n,a)),n+=a;var o=r[n++];this.lineIndexBuffer=b.a.createIndex(e,35044,new Uint32Array(r.buffer,4*n,o)),n+=o;var s=this.layer.lineMaterial;this.lineVertexArrayObject=new v.a(e,s.getAttributeLocations(),s.getLayoutInfo(),{geometry:this.lineVertexBuffer},this.lineIndexBuffer)}}]),n}(m),O=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e,r){var i;Object(a.a)(this,n),(i=t.call(this,e,r)).type=1,i.fillIndexStart=0,i.fillIndexCount=0,i.outlineIndexStart=0,i.outlineIndexCount=0;var o=new Uint32Array(e),s=i.bufferDataOffset;return i.fillIndexStart=o[s++],i.fillIndexCount=o[s++],i.outlineIndexStart=o[s++],i.outlineIndexCount=o[s++],i.bufferDataOffset=s,i}return Object(o.a)(n,[{key:"hasData",value:function(){return this.fillIndexCount>0||this.outlineIndexCount>0}},{key:"triangleCount",value:function(){return(this.fillIndexCount+this.outlineIndexCount)/3}},{key:"doDestroy",value:function(){Object(d.k)(this.fillVertexArrayObject)&&this.fillVertexArrayObject.dispose(),Object(d.k)(this.fillVertexBuffer)&&this.fillVertexBuffer.dispose(),Object(d.k)(this.fillIndexBuffer)&&this.fillIndexBuffer.dispose(),this.fillVertexArrayObject=null,this.fillVertexBuffer=null,this.fillIndexBuffer=null,Object(d.k)(this.outlineVertexArrayObject)&&this.outlineVertexArrayObject.dispose(),Object(d.k)(this.outlineVertexBuffer)&&this.outlineVertexBuffer.dispose(),Object(d.k)(this.outlineIndexBuffer)&&this.outlineIndexBuffer.dispose(),this.outlineVertexArrayObject=null,this.outlineVertexBuffer=null,this.outlineIndexBuffer=null,this.memoryUsed=0}},{key:"doPrepareForRendering",value:function(e,t,n){var r=new Uint32Array(t),i=new Int32Array(r.buffer),a=r[n++];this.fillVertexBuffer=b.a.createVertex(e,35044,new Int32Array(i.buffer,4*n,a)),n+=a;var o=r[n++];this.fillIndexBuffer=b.a.createIndex(e,35044,new Uint32Array(r.buffer,4*n,o)),n+=o;var s=r[n++];this.outlineVertexBuffer=b.a.createVertex(e,35044,new Int32Array(i.buffer,4*n,s)),n+=s;var c=r[n++];this.outlineIndexBuffer=b.a.createIndex(e,35044,new Uint32Array(r.buffer,4*n,c)),n+=c;var l=this.layer,u=l.fillMaterial,d=l.outlineMaterial;this.fillVertexArrayObject=new v.a(e,u.getAttributeLocations(),u.getLayoutInfo(),{geometry:this.fillVertexBuffer},this.fillIndexBuffer),this.outlineVertexArrayObject=new v.a(e,d.getAttributeLocations(),d.getLayoutInfo(),{geometry:this.outlineVertexBuffer},this.outlineIndexBuffer)}}]),n}(m),j=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e,r,i){var o;Object(a.a)(this,n),(o=t.call(this,e,r)).type=3,o.iconPerPageElementsMap=new Map,o.glyphPerPageElementsMap=new Map,o.symbolInstances=[],o.isIconSDF=!1,o.opacityChanged=!1,o.lastOpacityUpdate=0,o.symbols=[];var s=new Uint32Array(e),c=new Int32Array(e),l=new Float32Array(e),u=o.bufferDataOffset;o.isIconSDF=!!s[u++];for(var d=s[u++],f=0;f<d;f++){var p=s[u++],h=s[u++],b=s[u++];o.iconPerPageElementsMap.set(p,[h,b])}for(var v=s[u++],m=0;m<v;m++){var g=s[u++],O=s[u++],j=s[u++];o.glyphPerPageElementsMap.set(g,[O,j])}var w=s[u++],_=s[u++];return o.iconOpacity=new Int32Array(w),o.textOpacity=new Int32Array(_),u=Object(y.b)(s,c,l,u,o.symbols,i),o.bufferDataOffset=u,o}return Object(o.a)(n,[{key:"hasData",value:function(){return this.iconPerPageElementsMap.size>0||this.glyphPerPageElementsMap.size>0}},{key:"triangleCount",value:function(){var e,t=0,n=Object(i.a)(this.iconPerPageElementsMap);try{for(n.s();!(e=n.n()).done;){var a=Object(r.a)(e.value,2);a[0];t+=a[1][1]}}catch(l){n.e(l)}finally{n.f()}var o,s=Object(i.a)(this.glyphPerPageElementsMap);try{for(s.s();!(o=s.n()).done;){var c=Object(r.a)(o.value,2);c[0];t+=c[1][1]}}catch(l){s.e(l)}finally{s.f()}return t/3}},{key:"doDestroy",value:function(){Object(d.k)(this.iconVertexArrayObject)&&this.iconVertexArrayObject.dispose(),Object(d.k)(this.iconVertexBuffer)&&this.iconVertexBuffer.dispose(),Object(d.k)(this.iconOpacityBuffer)&&this.iconOpacityBuffer.dispose(),Object(d.k)(this.iconIndexBuffer)&&this.iconIndexBuffer.dispose(),this.iconVertexArrayObject=null,this.iconVertexBuffer=null,this.iconOpacityBuffer=null,this.iconIndexBuffer=null,Object(d.k)(this.textVertexArrayObject)&&this.textVertexArrayObject.dispose(),Object(d.k)(this.textVertexBuffer)&&this.textVertexBuffer.dispose(),Object(d.k)(this.textOpacityBuffer)&&this.textOpacityBuffer.dispose(),Object(d.k)(this.textIndexBuffer)&&this.textIndexBuffer.dispose(),this.textVertexArrayObject=null,this.textVertexBuffer=null,this.textOpacityBuffer=null,this.textIndexBuffer=null,this.memoryUsed=0}},{key:"updateOpacityInfo",value:function(){if(this.opacityChanged){this.opacityChanged=!1;var e=Object(d.q)(this.iconOpacity),t=Object(d.q)(this.iconOpacityBuffer);e.length>0&&e.byteLength===t.size&&t.setSubData(e);var n=Object(d.q)(this.textOpacity),r=Object(d.q)(this.textOpacityBuffer);n.length>0&&n.byteLength===r.size&&r.setSubData(n)}}},{key:"doPrepareForRendering",value:function(e,t,n){var r=new Uint32Array(t),i=new Int32Array(r.buffer),a=r[n++];this.iconVertexBuffer=b.a.createVertex(e,35044,new Int32Array(i.buffer,4*n,a)),n+=a;var o=r[n++];this.iconIndexBuffer=b.a.createIndex(e,35044,new Uint32Array(r.buffer,4*n,o)),n+=o;var s=r[n++];this.textVertexBuffer=b.a.createVertex(e,35044,new Int32Array(i.buffer,4*n,s)),n+=s;var c=r[n++];this.textIndexBuffer=b.a.createIndex(e,35044,new Uint32Array(r.buffer,4*n,c)),n+=c,this.iconOpacityBuffer=b.a.createVertex(e,35044,Object(d.q)(this.iconOpacity).buffer),this.textOpacityBuffer=b.a.createVertex(e,35044,Object(d.q)(this.textOpacity).buffer);var l=this.layer,u=l.iconMaterial,f=l.textMaterial;this.iconVertexArrayObject=new v.a(e,u.getAttributeLocations(),u.getLayoutInfo(),{geometry:this.iconVertexBuffer,opacity:this.iconOpacityBuffer},this.iconIndexBuffer),this.textVertexArrayObject=new v.a(e,f.getAttributeLocations(),f.getLayoutInfo(),{geometry:this.textVertexBuffer,opacity:this.textOpacityBuffer},this.textIndexBuffer)}}]),n}(m),w=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e,r){var i;Object(a.a)(this,n),(i=t.call(this,e,r)).type=4,i.circleIndexStart=0,i.circleIndexCount=0;var o=new Uint32Array(e),s=i.bufferDataOffset;return i.circleIndexStart=o[s++],i.circleIndexCount=o[s++],i.bufferDataOffset=s,i}return Object(o.a)(n,[{key:"hasData",value:function(){return this.circleIndexCount>0}},{key:"triangleCount",value:function(){return this.circleIndexCount/3}},{key:"doDestroy",value:function(){Object(d.k)(this.circleVertexArrayObject)&&this.circleVertexArrayObject.dispose(),Object(d.k)(this.circleVertexBuffer)&&this.circleVertexBuffer.dispose(),Object(d.k)(this.circleIndexBuffer)&&this.circleIndexBuffer.dispose(),this.circleVertexArrayObject=null,this.circleVertexBuffer=null,this.circleIndexBuffer=null,this.memoryUsed=0}},{key:"doPrepareForRendering",value:function(e,t,n){var r=new Uint32Array(t),i=new Int32Array(r.buffer),a=r[n++];this.circleVertexBuffer=b.a.createVertex(e,35044,new Int32Array(i.buffer,4*n,a)),n+=a;var o=r[n++];this.circleIndexBuffer=b.a.createIndex(e,35044,new Uint32Array(r.buffer,4*n,o)),n+=o;var s=this.layer.circleMaterial;this.circleVertexArrayObject=new v.a(e,s.getAttributeLocations(),s.getLayoutInfo(),{geometry:this.circleVertexBuffer},this.circleIndexBuffer)}}]),n}(m),_=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e,r,i,o){var s,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return Object(a.a)(this,n),(s=t.call(this,e,i,o,[4096,4096]))._memCache=c,s._referenced=0,s._hasSymbolBuckets=!1,s._memoryUsedByLayerData=0,s.layerData=new Map,s.layerCount=0,s.status="loading",s.allSymbolsFadingOut=!1,s.lastOpacityUpdate=0,s.symbols=new Map,s.isCoverage=!1,s.neededForCoverage=!1,s.decluttered=!1,s.invalidating=!1,s.parentTile=null,s.childrenTiles=new Set,s._processed=!1,s._referenced=1,s.styleRepository=r,s.id=e.id,s.transforms.tileUnitsToPixels=Object(p.b)(),s}return Object(o.a)(n,[{key:"hasSymbolBuckets",get:function(){return this._hasSymbolBuckets}},{key:"isFading",get:function(){return this._hasSymbolBuckets&&performance.now()-this.lastOpacityUpdate<h.d}},{key:"isHoldingForFade",get:function(){return this._hasSymbolBuckets&&(!this.allSymbolsFadingOut||performance.now()-this.lastOpacityUpdate<h.d)}},{key:"wasRequested",get:function(){return"errored"===this.status||"loaded"===this.status||"reloading"===this.status}},{key:"setData",value:function(e){this.changeDataImpl(e),this.requestRender(),this.ready(),this.invalidating=!1,this._processed=!0}},{key:"deleteLayerData",value:function(e){var t,n=!1,r=Object(i.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(this.layerData.has(a)){var o=this.layerData.get(a);this._memoryUsedByLayerData-=o.memoryUsed,3===o.type&&this.symbols.has(a)&&(this.symbols.delete(a),n=!0),o.destroy(),this.layerData.delete(a),this.layerCount--}}}catch(s){r.e(s)}finally{r.f()}Object(d.k)(this._memCache)&&this._memCache.updateSize(this.key.id,this,this._memoryUsedByLayerData),n&&this.emit("symbols-changed"),this.requestRender()}},{key:"processed",value:function(){return this._processed}},{key:"hasData",value:function(){return this.layerCount>0}},{key:"dispose",value:function(){"unloaded"!==this.status&&(k.delete(this),n._destroyRenderBuckets(this.layerData),this.layerData=null,this.layerCount=0,this._memoryUsedByLayerData=0,this.destroy(),this.status="unloaded")}},{key:"release",value:function(){return 0==--this._referenced&&(this.dispose(),this.stage=null,!0)}},{key:"retain",value:function(){++this._referenced}},{key:"referenced",get:function(){return this._referenced}},{key:"getMemoryUsage",value:function(){return(this._memoryUsedByLayerData+256)/(this._referenced||1)}},{key:"changeDataImpl",value:function(e){var t=!1;if(e){var n,a=this._createRenderBuckets(e),o=Object(i.a)(a);try{for(o.s();!(n=o.n()).done;){var s=Object(r.a)(n.value,2),c=s[0],l=s[1];if(this.layerData.has(c)){var u=this.layerData.get(c);this._memoryUsedByLayerData-=l.memoryUsed,u.destroy(),this.layerData.delete(c),this.layerCount--}3===l.type&&(this.symbols.set(c,l.symbols),t=!0),this._memoryUsedByLayerData+=l.memoryUsed,this.layerData.set(c,l),this.layerCount++}}catch(b){o.e(b)}finally{o.f()}Object(d.k)(this._memCache)&&this._memCache.updateSize(this.key.id,this,this._memoryUsedByLayerData)}this._hasSymbolBuckets=!1;var f,p=Object(i.a)(this.layerData);try{for(p.s();!(f=p.n()).done;){var h=Object(r.a)(f.value,2);h[0];3===h[1].type&&(this._hasSymbolBuckets=!0)}}catch(b){p.e(b)}finally{p.f()}t&&this.emit("symbols-changed")}},{key:"attachWithContext",value:function(e){this.stage={context:e,trashDisplayObject:function(e){e.processDetach()},untrashDisplayObject:function(){return!1}}}},{key:"setTransform",value:function(e,t){Object(s.a)(Object(c.a)(n.prototype),"setTransform",this).call(this,e,t);var r=t/(e.resolution*e.pixelRatio),i=this.size[0]/this.coordRange[0]*r,a=this.size[1]/this.coordRange[1]*r,o=[0,0];e.toScreen(o,this.coords);var l=this.transforms.tileUnitsToPixels;Object(f.e)(l),Object(f.a)(l,l,o),Object(f.i)(l,l,Math.PI*e.rotation/180),Object(f.c)(l,l,[i,a,1])}},{key:"_createRenderBuckets",value:function(e){var t,n=new Map,r=new Map,a=Object(i.a)(e);try{for(a.s();!(t=a.n()).done;){var o,s=t.value,c=this._deserializeBucket(s,r),l=Object(i.a)(c.layerUIDs);try{for(l.s();!(o=l.n()).done;){var u=o.value;n.set(u,c)}}catch(d){l.e(d)}finally{l.f()}}}catch(d){a.e(d)}finally{a.f()}return n}},{key:"_deserializeBucket",value:function(e,t){var n=t.get(e);if(n)return n;switch(new Uint32Array(e)[0]){case 1:n=new O(e,this.styleRepository);break;case 2:n=new g(e,this.styleRepository);break;case 3:n=new j(e,this.styleRepository,this);break;case 4:n=new w(e,this.styleRepository)}return t.set(e,n),n}}],[{key:"_destroyRenderBuckets",value:function(e){if(e){var t=new Set;e.forEach((function(e){t.has(e)||(e.destroy(),t.add(e))})),e.clear()}}}]),n}(n(603).a),k=new Map},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(789);function i(e){return void 0===e&&(e={}),e.portal?Object(r.a)(e.portal):e.authentication?e.authentication.portal:"https://www.arcgis.com/sharing/rest"}},function(e,t){e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),c=0;c<a.length;c++){var l=a[c];if(!s(l))return!1;var u=e[l],d=t[l];if(!1===(i=n?n.call(r,u,d,l):void 0)||void 0===i&&u!==d)return!1}return!0}},function(e,t,n){"use strict";t.a=function(e){function t(e,r,c,l,f){for(var p,h,b,v,O,w=0,_=0,k=0,x=0,S=0,M=0,R=b=p=0,F=0,D=0,N=0,V=0,z=c.length,U=z-1,B="",G="",q="",H="";F<z;){if(h=c.charCodeAt(F),F===U&&0!==_+x+k+w&&(0!==_&&(h=47===_?10:47),x=k=w=0,z++,U++),0===_+x+k+w){if(F===U&&(0<D&&(B=B.replace(d,"")),0<B.trim().length)){switch(h){case 32:case 9:case 59:case 13:case 10:break;default:B+=c.charAt(F)}h=59}switch(h){case 123:for(p=(B=B.trim()).charCodeAt(0),b=1,V=++F;F<z;){switch(h=c.charCodeAt(F)){case 123:b++;break;case 125:b--;break;case 47:switch(h=c.charCodeAt(F+1)){case 42:case 47:e:{for(R=F+1;R<U;++R)switch(c.charCodeAt(R)){case 47:if(42===h&&42===c.charCodeAt(R-1)&&F+2!==R){F=R+1;break e}break;case 10:if(47===h){F=R+1;break e}}F=R}}break;case 91:h++;case 40:h++;case 34:case 39:for(;F++<U&&c.charCodeAt(F)!==h;);}if(0===b)break;F++}switch(b=c.substring(V,F),0===p&&(p=(B=B.replace(u,"").trim()).charCodeAt(0)),p){case 64:switch(0<D&&(B=B.replace(d,"")),h=B.charCodeAt(1)){case 100:case 109:case 115:case 45:D=r;break;default:D=I}if(V=(b=t(r,D,b,h,f+1)).length,0<A&&(O=s(3,b,D=n(I,B,N),r,E,T,V,h,f,l),B=D.join(""),void 0!==O&&0===(V=(b=O.trim()).length)&&(h=0,b="")),0<V)switch(h){case 115:B=B.replace(j,o);case 100:case 109:case 45:b=B+"{"+b+"}";break;case 107:b=(B=B.replace(y,"$1 $2"))+"{"+b+"}",b=1===P||2===P&&a("@"+b,3)?"@-webkit-"+b+"@"+b:"@"+b;break;default:b=B+b,112===l&&(G+=b,b="")}else b="";break;default:b=t(r,n(r,B,N),b,l,f+1)}q+=b,b=N=D=R=p=0,B="",h=c.charCodeAt(++F);break;case 125:case 59:if(1<(V=(B=(0<D?B.replace(d,""):B).trim()).length))switch(0===R&&(p=B.charCodeAt(0),45===p||96<p&&123>p)&&(V=(B=B.replace(" ",":")).length),0<A&&void 0!==(O=s(1,B,r,e,E,T,G.length,l,f,l))&&0===(V=(B=O.trim()).length)&&(B="\0\0"),p=B.charCodeAt(0),h=B.charCodeAt(1),p){case 0:break;case 64:if(105===h||99===h){H+=B+c.charAt(F);break}default:58!==B.charCodeAt(V-1)&&(G+=i(B,p,h,B.charCodeAt(2)))}N=D=R=p=0,B="",h=c.charCodeAt(++F)}}switch(h){case 13:case 10:47===_?_=0:0===1+p&&107!==l&&0<B.length&&(D=1,B+="\0"),0<A*L&&s(0,B,r,e,E,T,G.length,l,f,l),T=1,E++;break;case 59:case 125:if(0===_+x+k+w){T++;break}default:switch(T++,v=c.charAt(F),h){case 9:case 32:if(0===x+w+_)switch(S){case 44:case 58:case 9:case 32:v="";break;default:32!==h&&(v=" ")}break;case 0:v="\\0";break;case 12:v="\\f";break;case 11:v="\\v";break;case 38:0===x+_+w&&(D=N=1,v="\f"+v);break;case 108:if(0===x+_+w+C&&0<R)switch(F-R){case 2:112===S&&58===c.charCodeAt(F-3)&&(C=S);case 8:111===M&&(C=M)}break;case 58:0===x+_+w&&(R=F);break;case 44:0===_+k+x+w&&(D=1,v+="\r");break;case 34:case 39:0===_&&(x=x===h?0:0===x?h:x);break;case 91:0===x+_+k&&w++;break;case 93:0===x+_+k&&w--;break;case 41:0===x+_+w&&k--;break;case 40:if(0===x+_+w){if(0===p)switch(2*S+3*M){case 533:break;default:p=1}k++}break;case 64:0===_+k+x+w+R+b&&(b=1);break;case 42:case 47:if(!(0<x+w+k))switch(_){case 0:switch(2*h+3*c.charCodeAt(F+1)){case 235:_=47;break;case 220:V=F,_=42}break;case 42:47===h&&42===S&&V+2!==F&&(33===c.charCodeAt(V+2)&&(G+=c.substring(V,F+1)),v="",_=0)}}0===_&&(B+=v)}M=S,S=h,F++}if(0<(V=G.length)){if(D=r,0<A&&(void 0!==(O=s(2,G,D,e,E,T,V,l,f,l))&&0===(G=O).length))return H+G+q;if(G=D.join(",")+"{"+G+"}",0!==P*C){switch(2!==P||a(G,2)||(C=0),C){case 111:G=G.replace(g,":-moz-$1")+G;break;case 112:G=G.replace(m,"::-webkit-input-$1")+G.replace(m,"::-moz-$1")+G.replace(m,":-ms-input-$1")+G}C=0}}return H+G+q}function n(e,t,n){var i=t.trim().split(b);t=i;var a=i.length,o=e.length;switch(o){case 0:case 1:var s=0;for(e=0===o?"":e[0]+" ";s<a;++s)t[s]=r(e,t[s],n).trim();break;default:var c=s=0;for(t=[];s<a;++s)for(var l=0;l<o;++l)t[c++]=r(e[l]+" ",i[s],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(v,"$1"+e.trim());case 58:return e.trim()+t.replace(v,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(v,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function i(e,t,n,r){var o=e+";",s=2*t+3*n+4*r;if(944===s){e=o.indexOf(":",9)+1;var c=o.substring(e,o.length-1).trim();return c=o.substring(0,e).trim()+c+";",1===P||2===P&&a(c,1)?"-webkit-"+c+c:c}if(0===P||2===P&&!a(o,1))return o;switch(s){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(S,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(c=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+c+o;case 1005:return p.test(o)?o.replace(f,":-webkit-")+o.replace(f,":-moz-")+o:o;case 1e3:switch(t=(c=o.substring(13).trim()).indexOf("-")+1,c.charCodeAt(0)+c.charCodeAt(t)){case 226:c=o.replace(O,"tb");break;case 232:c=o.replace(O,"tb-rl");break;case 220:c=o.replace(O,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+c+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(t=(o=e).length-10,s=(c=(33===o.charCodeAt(t)?o.substring(0,t):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|c.charCodeAt(7))){case 203:if(111>c.charCodeAt(8))break;case 115:o=o.replace(c,"-webkit-"+c)+";"+o;break;case 207:case 102:o=o.replace(c,"-webkit-"+(102<s?"inline-":"")+"box")+";"+o.replace(c,"-webkit-"+c)+";"+o.replace(c,"-ms-"+c+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return c=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+c+"-ms-flex-"+c+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(_,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(_,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===x.test(e))return 115===(c=e.substring(e.indexOf(":")+1)).charCodeAt(0)?i(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):o.replace(c,"-webkit-"+c)+o.replace(c,"-moz-"+c.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===n+r&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(h,"$1-webkit-$2")+o}return o}function a(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),R(2!==t?r:r.replace(k,"$1"),n,t)}function o(e,t){var n=i(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(w," or ($1)").substring(4):"("+t+")"}function s(e,t,n,r,i,a,o,s,c,u){for(var d,f=0,p=t;f<A;++f)switch(d=M[f].call(l,e,p,n,r,i,a,o,s,c,u)){case void 0:case!1:case!0:case null:break;default:p=d}if(p!==t)return p}function c(e){return void 0!==(e=e.prefix)&&(R=null,e?"function"!==typeof e?P=1:(P=2,R=e):P=0),c}function l(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<A){var i=s(-1,n,r,r,E,T,0,0,0,0);void 0!==i&&"string"===typeof i&&(n=i)}var a=t(I,r,n,0,0);return 0<A&&(void 0!==(i=s(-2,a,r,r,E,T,a.length,0,0,0))&&(a=i)),"",C=0,T=E=1,a}var u=/^\0+/g,d=/[\0\r\f]/g,f=/: */g,p=/zoo|gra/,h=/([,: ])(transform)/g,b=/,\r+?/g,v=/([\t\r\n ])*\f?&/g,y=/@(k\w+)\s*(\S*)\s*/,m=/::(place)/g,g=/:(read-only)/g,O=/[svh]\w+-[tblr]{2}/,j=/\(\s*(.*)\s*\)/g,w=/([\s\S]*?);/g,_=/-self|flex-/g,k=/[^]*?(:[rp][el]a[\w-]+)[^]*/,x=/stretch|:\s*\w+\-(?:conte|avail)/,S=/([^-])(image-set\()/,T=1,E=1,C=0,P=1,I=[],M=[],A=0,R=null,L=0;return l.use=function e(t){switch(t){case void 0:case null:A=M.length=0;break;default:if("function"===typeof t)M[A++]=t;else if("object"===typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else L=0|!!t}return e},l.set=c,void 0!==e&&c(e),l}},,function(e,t,n){e.exports=function(){"use strict";return function(e){var t="/*|*/",n=t+"}";function r(t){if(t)try{e(t+"}")}catch(n){}}return function(i,a,o,s,c,l,u,d,f,p){switch(i){case 1:if(0===f&&64===a.charCodeAt(0))return e(a+";"),"";break;case 2:if(0===d)return a+t;break;case 3:switch(d){case 102:case 112:return e(o[0]+a),"";default:return a+(0===p?t:"")}case-2:a.split(n).forEach(r)}}}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"TopNavBrand",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"TopNavTitle",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"TopNavList",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"TopNavLink",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"TopNavActionsList",{enumerable:!0,get:function(){return c.default}});var r=l(n(850)),i=l(n(577)),a=l(n(578)),o=l(n(579)),s=l(n(675)),c=l(n(519));function l(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"ArcgisAccountMenuItem",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"useAccountManager",{enumerable:!0,get:function(){return a.default}});var r=o(n(857)),i=o(n(368)),a=o(n(889));function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(676),i=n(867),a=n(871),o=n(873),s=n(874),c=n(876),l=Date.prototype.getTime;function u(e,t,n){var p=n||{};return!!(p.strict?a(e,t):e===t)||(!e||!t||"object"!==typeof e&&"object"!==typeof t?p.strict?a(e,t):e==t:function(e,t,n){var a,p;if(typeof e!==typeof t)return!1;if(d(e)||d(t))return!1;if(e.prototype!==t.prototype)return!1;if(i(e)!==i(t))return!1;var h=o(e),b=o(t);if(h!==b)return!1;if(h||b)return e.source===t.source&&s(e)===s(t);if(c(e)&&c(t))return l.call(e)===l.call(t);var v=f(e),y=f(t);if(v!==y)return!1;if(v||y){if(e.length!==t.length)return!1;for(a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}if(typeof e!==typeof t)return!1;try{var m=r(e),g=r(t)}catch(O){return!1}if(m.length!==g.length)return!1;for(m.sort(),g.sort(),a=m.length-1;a>=0;a--)if(m[a]!=g[a])return!1;for(a=m.length-1;a>=0;a--)if(!u(e[p=m[a]],t[p],n))return!1;return!0}(e,t,p))}function d(e){return null===e||void 0===e}function f(e){return!(!e||"object"!==typeof e||"number"!==typeof e.length)&&("function"===typeof e.copy&&"function"===typeof e.slice&&!(e.length>0&&"number"!==typeof e[0]))}e.exports=u},function(e,t,n){"use strict";n.r(t),n.d(t,"create",(function(){return u})),n.d(t,"projectGeometry",(function(){return f}));var r=n(7),i=n.n(r),a=n(15),o=n(98),s=n(18),c=n(109),l=n(336);function u(){return d.apply(this,arguments)}function d(){return(d=Object(a.a)(i.a.mark((function e(){var t,r,a,l=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:null,r=l.length>1?l[1]:void 0,!o.a.geometryServiceUrl){e.next=9;break}return e.next=6,n.e(20).then(n.bind(null,806));case 6:return e.t0=e.sent.default,e.t1={url:o.a.geometryServiceUrl},e.abrupt("return",new e.t0(e.t1));case 9:if(t){e.next=11;break}throw new s.a("internal:geometry-service-url-not-configured");case 11:return a="portal"in t?t.portal||c.a.getDefault():t,e.next=14,a.load({signal:r});case 14:if(!(a.helperServices&&a.helperServices.geometry&&a.helperServices.geometry.url)){e.next=21;break}return e.next=18,n.e(20).then(n.bind(null,806));case 18:return e.t2=e.sent.default,e.t3={url:a.helperServices.geometry.url},e.abrupt("return",new e.t2(e.t3));case 21:throw new s.a("internal:geometry-service-url-not-configured");case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e,t){return p.apply(this,arguments)}function p(){return(p=Object(a.a)(i.a.mark((function e(t,n){var r,a,o,c,d,f=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>2&&void 0!==f[2]?f[2]:null,a=f.length>3?f[3]:void 0,e.next=4,u(r,a);case 4:return o=e.sent,(c=new l.a).geometries=[t],c.outSpatialReference=n,e.next=9,o.project(c,{signal:a});case 9:if(!(d=e.sent)||!Array.isArray(d)||1!==d.length){e.next=12;break}return e.abrupt("return",d[0]);case 12:throw new s.a("internal:geometry-service-projection-failed");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,n){"use strict";n.r(t),n.d(t,"applyEdits",(function(){return v})),n.d(t,"isEditableLayer",(function(){return h}));var r=n(7),i=n.n(r),a=n(10),o=n(15),s=n(22),c=n(4),l=n(18),u=n(12),d=n(40),f=n(74),p=n(377);function h(e){var t,n;return!0===(null==e||null==(t=e.capabilities)||null==(n=t.operations)?void 0:n.supportsEditing)&&e&&(!("editingEnabled"in e)||e.editingEnabled)}function b(e){return e&&null!=e.applyEdits}function v(e,t,n,r){return y.apply(this,arguments)}function y(){return(y=Object(o.a)(i.a.mark((function e(t,n,r,a){var o,c,l,u,d,f,p,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l={edits:r,result:new Promise((function(e,t){o=e,c=t}))},t.emit("apply-edits",l),e.prev=2,e.next=5,m(t,n,r,a);case 5:return u=e.sent,d=u.results,f=u.edits,h={edits:f,addedFeatures:(p=function(e){return e.filter((function(e){return!e.error})).map(s.a)})(d.addFeatureResults),updatedFeatures:p(d.updateFeatureResults),deletedFeatures:p(d.deleteFeatureResults),addedAttachments:p(d.addAttachmentResults),updatedAttachments:p(d.updateAttachmentResults),deletedAttachments:p(d.deleteAttachmentResults)},e.abrupt("return",((h.addedFeatures.length||h.updatedFeatures.length||h.deletedFeatures.length||h.addedAttachments.length||h.updatedAttachments.length||h.deletedAttachments.length)&&t.emit("edits",h),o(h),d));case 13:throw e.prev=13,e.t0=e.catch(2),c(e.t0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}function m(e,t,n,r){return g.apply(this,arguments)}function g(){return(g=Object(o.a)(i.a.mark((function e(t,n,r,a){var o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load();case 2:if(b(n)){e.next=4;break}return e.abrupt("return",Promise.reject(new l.a("".concat(t.type,"-layer:no-editing-support"),"Layer source does not support applyEdits capability",{layer:t})));case 4:if(t.editingEnabled){e.next=6;break}throw new l.a("".concat(t.type,"-layer:editing-disabled"),"Editing is disabled for layer",{layer:t});case 6:return e.next=8,O(t,r,a);case 8:if(!((o=e.sent).addFeatures.length||o.updateFeatures.length||o.deleteFeatures.length||o.addAttachments.length||o.updateAttachments.length||o.deleteAttachments.length)){e.next=17;break}return e.t1=o,e.next=13,n.applyEdits(o,a);case 13:e.t2=e.sent,e.t0={edits:e.t1,results:e.t2},e.next=18;break;case 17:e.t0={edits:o,results:{addFeatureResults:[],updateFeatureResults:[],deleteFeatureResults:[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}};case 18:return e.abrupt("return",e.t0);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t,n){var r=t&&(t.addFeatures||t.updateFeatures||t.deleteFeatures),i=t&&(t.addAttachments||t.updateAttachments||t.deleteAttachments);if(!t||!r&&!i)throw new l.a("".concat(e.type,"-layer:missing-parameters"),"'addFeatures', 'updateFeatures', 'deleteFeatures', 'addAttachments', 'updateAttachments' or 'deleteAttachments' parameter is required");if(!e.capabilities.data.isVersioned&&n&&n.gdbVersion)throw new l.a("".concat(e.type,"-layer:invalid-parameter"),"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'");if(!e.capabilities.editing.supportsRollbackOnFailure&&n&&n.rollbackOnFailureEnabled)throw new l.a("".concat(e.type,"-layer:invalid-parameter"),"This layer does not support 'rollbackOnFailureEnabled' parameter. See: 'capabilities.editing.supportsRollbackOnFailure'");if(!e.capabilities.editing.supportsGlobalId&&n&&n.globalIdUsed)throw new l.a("".concat(e.type,"-layer:invalid-parameter"),"This layer does not support 'globalIdUsed' parameter. See: 'capabilities.editing.supportsGlobalId'");if(!e.capabilities.editing.supportsGlobalId&&i)throw new l.a("".concat(e.type,"-layer:invalid-parameter"),"'addAttachments', 'updateAttachments' and 'deleteAttachments' are applicable only if the layer supports global ids. See: 'capabilities.editing.supportsGlobalId'");if((!n||!n.globalIdUsed)&&i)throw new l.a("".concat(e.type,"-layer:invalid-parameter"),"When 'addAttachments', 'updateAttachments' or 'deleteAttachments' is specified, globalIdUsed should be set to true");var o=Object(a.a)({},t);if(o.addFeatures=t&&d.a.isCollection(t.addFeatures)?t.addFeatures.toArray():o.addFeatures||[],o.updateFeatures=t&&d.a.isCollection(t.updateFeatures)?t.updateFeatures.toArray():o.updateFeatures||[],o.deleteFeatures=t&&d.a.isCollection(t.deleteFeatures)?t.deleteFeatures.toArray():o.deleteFeatures||[],o.addFeatures.length&&!e.capabilities.operations.supportsAdd)throw new l.a("".concat(e.type,"-layer:unsupported-operation"),"Layer does not support adding features.");if(o.updateFeatures.length&&!e.capabilities.operations.supportsUpdate)throw new l.a("".concat(e.type,"-layer:unsupported-operation"),"Layer does not support updating features.");if(o.deleteFeatures.length&&!e.capabilities.operations.supportsDelete)throw new l.a("".concat(e.type,"-layer:unsupported-operation"),"Layer does not support deleting features.");o.addAttachments=o.addAttachments||[],o.updateAttachments=o.updateAttachments||[],o.deleteAttachments=o.deleteAttachments||[],o.addFeatures=o.addFeatures.map(k),o.updateFeatures=o.updateFeatures.map(k);var s=n&&n.globalIdUsed;return o.addFeatures.forEach((function(t){return function(e,t,n){j(e,t,n)}(t,e,s)})),o.updateFeatures.forEach((function(t){return function(e,t,n){if(j(e,t,n),"geometry"in e&&Object(c.k)(e.geometry)&&!t.capabilities.editing.supportsGeometryUpdate)throw new l.a("".concat(t.type,"-layer:unsupported-operation"),"Layer does not support geometry updates.")}(t,e,s)})),o.deleteFeatures.forEach((function(t){return function(e,t,n){j(e,t,n)}(t,e,s)})),o.addAttachments.forEach((function(t){return w(t,e)})),o.updateAttachments.forEach((function(t){return w(t,e)})),function(e){return _.apply(this,arguments)}(o)}function j(e,t,n){if(n){if("attributes"in e&&!e.attributes[t.globalIdField])throw new l.a("".concat(t.type,"-layer:invalid-parameter"),"Feature should have 'globalId' when 'globalIdUsed' is true");if(!("attributes"in e)&&!e.globalId)throw new l.a("".concat(t.type,"-layer:invalid-parameter"),"'globalId' of the feature should be passed when 'globalIdUsed' is true")}if("geometry"in e&&Object(c.k)(e.geometry)){if(e.geometry.hasZ&&!1===t.capabilities.data.supportsZ)throw new l.a("".concat(t.type,"-layer:z-unsupported"),"Layer does not support z values while feature has z values.");if(e.geometry.hasM&&!1===t.capabilities.data.supportsM)throw new l.a("".concat(t.type,"-layer:m-unsupported"),"Layer does not support m values while feature has m values.")}}function w(e,t){var n=e.feature,r=e.attachment;if(!n||"attributes"in n&&!n.attributes[t.globalIdField])throw new l.a("".concat(t.type,"-layer:invalid-parameter"),"Attachment should have reference to a feature with 'globalId'");if(!("attributes"in n)&&!n.globalId)throw new l.a("".concat(t.type,"-layer:invalid-parameter"),"Attachment should have reference to 'globalId' of the parent feature");if(!r.globalId)throw new l.a("".concat(t.type,"-layer:invalid-parameter"),"Attachment should have 'globalId'");if(!r.data&&!r.uploadId)throw new l.a("".concat(t.type,"-layer:invalid-parameter"),"Attachment should have 'data' or 'uploadId'");if(!(r.data instanceof File&&r.data.name)&&!r.name)throw new l.a("".concat(t.type,"-layer:invalid-parameter"),"'name' is required when attachment is specified as Base64 encoded string using 'data'");if(!t.capabilities.editing.supportsUploadWithItemId&&r.uploadId)throw new l.a("".concat(t.type,"-layer:invalid-parameter"),"This layer does not support 'uploadId' parameter. See: 'capabilities.editing.supportsUploadWithItemId'");if("string"==typeof r.data){var i=Object(u.i)(r.data);if(i&&!i.isBase64)throw new l.a("".concat(t.type,"-layer:invalid-parameter"),"Attachment 'data' should be a Blob, File or Base64 encoded string")}}function _(){return(_=Object(o.a)(i.a.mark((function e(t){var n,r,a,o,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.addFeatures,r=t.updateFeatures,a=n.concat(r).map((function(e){return e.geometry})),e.next=5,Object(p.a)(a);case 5:return o=e.sent,s=n.length,c=r.length,e.abrupt("return",(o.slice(0,s).forEach((function(e,n){t.addFeatures[n].geometry=e})),o.slice(s,s+c).forEach((function(e,n){t.updateFeatures[n].geometry=e})),t));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){var t=new f.a;return e.attributes||(e.attributes={}),t.geometry=e.geometry,t.attributes=e.attributes,t}},function(e,t,n){"use strict";var r,i=n(7),a=n.n(i),o=n(31),s=n(2),c=n(3),l=n(37),u=n(53),d=n(50),f=n(5),p=n(6),h=n(15),b=n(0),v=n(16),y=n(4),m=n(13),g=(n(17),n(1)),O=n(8),j=n(18),w=(n(12),n(19),n(20),n(40)),_=n(74),k=n(239),x=n(25),S=n(22),T=n(28),E=n(39),C=r=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).color=new E.a([0,0,0,1]),r}return Object(c.a)(n,[{key:"clone",value:function(){return new r(Object(S.a)({color:this.color}))}}]),n}(T.a);Object(b.a)([Object(g.b)({type:E.a,json:{write:!0}})],C.prototype,"color",void 0);var P=C=r=Object(b.a)([Object(O.a)("esri.webmap.background.ColorBackground")],C),I=n(381),M=n(740),A=n(10),R=n(165),L=n(51),F={widthBreakpoint:{getValue:function(e){var t=e.viewSize[0],n=e.breakpoints,r=this.values;return t<=n.xsmall?r.xsmall:t<=n.small?r.small:t<=n.medium?r.medium:t<=n.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue:function(e){var t=e.viewSize[1],n=e.breakpoints,r=this.values;return t<=n.xsmall?r.xsmall:t<=n.small?r.small:t<=n.medium?r.medium:t<=n.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue:function(e){var t=e.viewSize,n=t[0],r=t[1],i=this.values;return r>=n?i.portrait:i.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},D={xsmall:544,small:768,medium:992,large:1200};function N(e,t){return t?F[e].valueToClassName[t].split(" "):[]}var V=n(422),z=n(93),U=n(24),B=n(44),G=n(61),q=n(43),H=n(63),W=(n(71),n(38)),$=n(210),J=n(142),Y=(n(215),n(14)),K=n(35),Z=n(132),X=n(32),Q=n(129),ee=n(36),te=n(59),ne=n(78),re=n(218),ie=n(133),ae=n(553),oe=n(207),se=n(251),ce=n(91),le=n(398),ue=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).view=null,r.baseLayerViews=new w.a,r.referenceLayerViews=new w.a,r._loadingHandle=Object(x.a)(Object(l.a)(r),"view.map.basemap",(function(e){e&&e.load().catch((function(){}))})),r}return Object(c.a)(n,[{key:"destroy",value:function(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}},{key:"suspended",get:function(){return!this.view||this.view.suspended}},{key:"updating",get:function(){return(!this.view||!this.view.suspended)&&!(!(this.view&&this.view.map&&this.view.map.basemap)||this.view.map.basemap.loaded)}}]),n}(ee.a);Object(b.a)([Object(g.b)({constructOnly:!0})],ue.prototype,"view",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],ue.prototype,"baseLayerViews",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],ue.prototype,"referenceLayerViews",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],ue.prototype,"suspended",null),Object(b.a)([Object(g.b)({type:Boolean,readOnly:!0})],ue.prototype,"updating",null),ue=Object(b.a)([Object(O.a)("esri.views.BasemapView")],ue);var de=n(404),fe=n(273),pe=m.a.getLogger("esri.views.LayerViewManager"),he=function(){function e(t,n,r){var i=this;Object(s.a)(this,e),this.layer=t,this.view=n,this.layerViewImporter=r,this._controller=Object(U.d)(),this._deferred=Object(U.f)(),this._started=!1,this.done=!1,Object(U.p)(this._controller.signal,(function(){var e=new j.a("cancelled:layerview-create","layerview creation cancelled",{layer:t});i._deferred.reject(e)}))}return Object(c.a)(e,[{key:"promise",get:function(){return this._deferred.promise}},{key:"destroy",value:function(){this._controller.abort();var e=this.layerView;if(e){var t=this.layer,n=this.view;t.emit("layerview-destroy",{view:n,layerView:e}),n.emit("layerview-destroy",{layer:t,layerView:e}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}}},{key:"start",value:function(){var e=Object(h.a)(a.a.mark((function e(){var t,n,r,i,o,s,c,l,u,d=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._started){e.next=2;break}return e.abrupt("return");case 2:return this._started=!0,t=this._controller.signal,n=this.layer,r=this.view,this._map=r.map,e.prev=5,e.next=8,n.load({signal:t});case 8:if(e.t0="prefetchResources"in n,!e.t0){e.next=12;break}return e.next=12,n.prefetchResources({signal:t});case 12:if(!n.createLayerView){e.next=18;break}return e.next=15,n.createLayerView(r,{signal:t});case 15:s=e.sent,e.next=24;break;case 18:if(this.layerViewImporter.hasLayerViewModule(n)){e.next=20;break}throw new j.a("layer:view-not-supported","No layerview implementation was found");case 20:return e.next=22,this.layerViewImporter.importLayerView(n);case 22:l=e.sent,Object(U.u)(t),s="default"in l?new l.default({layer:n,view:r}):new l({layer:n,view:r});case 24:return u=function(){c=Object(y.p)(c),s.destroy(),s.layer=null,s.parent=null,s.view=null,d.done=!0},c=Object(U.p)(t,u),Object(U.u)(t),e.prev=26,e.next=29,s.when();case 29:e.next=34;break;case 31:throw e.prev=31,e.t1=e.catch(26),u(),e.t1;case 34:if(null==(i=this._map)||null==(o=i.allLayers)?void 0:o.includes(n)){e.next=36;break}return e.abrupt("return",(u(),void this._deferred.reject(new j.a("view:no-layerview-for-layer","The layer has been removed from the map",{layer:n}))));case 36:this.layerView=s,n.emit("layerview-create",{view:r,layerView:s}),r.emit("layerview-create",{layer:n,layerView:s}),this.done=!0,this._deferred.resolve(s),e.next=42;break;case 39:e.prev=39,e.t2=e.catch(5),n.emit("layerview-create-error",{view:r,error:e.t2}),r.emit("layerview-create-error",{layer:n,error:e.t2}),this.done=!0,this._deferred.reject(new j.a("layerview:create-error","layerview creation failed",{layer:n,error:e.t2}));case 42:case"end":return e.stop()}}),e,this,[[5,39],[26,31]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),be=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e))._layerLayerViewInfoMap=new Map,r._watchUpdatingTracking=new de.a,r.supportsGround=!0,r._preloadLayerViewModules=function(){var e,t=null==(e=r.view.map)?void 0:e.allLayers;if(t){var n,i=Object(Y.a)(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;r.layerViewImporter.hasLayerViewModule(a)&&r.layerViewImporter.importLayerView(a)}}catch(o){i.e(o)}finally{i.f()}}},r._reschedule=function(){return Object(y.j)(r._workPromise)&&(r._workPromise=Object(U.f)()),r.handles.remove("reschedule"),r.handles.add(Object(Q.b)(r._doWork),"reschedule"),r._workPromise.promise},r._doWork=function(){var e,t,n,i=r.view.map;if(r._map!==i&&(r.clear(),r._map=i),Object(y.j)(r._workPromise))r.notifyChange("updating");else{r.handles.remove("reschedule"),r.handles.remove("collection-change");var a=new k.a({root:Object(l.a)(r),rootCollectionNames:r._rootCollectionNames,getChildrenFunction:function(e){return e.layers}});if(!a)return r._workPromise.resolve(),void(r._workPromise=null);var s,c=Object(Y.a)(a);try{for(c.s();!(s=c.n()).done;){var u=s.value;r._createLayerView(u)}}catch(g){c.e(g)}finally{c.f()}r._refreshCollections();var d,f=Object(Y.a)(r._layerLayerViewInfoMap);try{for(f.s();!(d=f.n()).done;){var p=Object(o.a)(d.value,2),h=p[0],b=p[1];a.includes(h)||(r._layerLayerViewInfoMap.delete(b.layer),b.destroy())}}catch(g){f.e(g)}finally{f.f()}var v=a.filter((function(e){return"group"===e.type})).map((function(e){return e.layers})),m=[null==i||null==(e=i.ground)?void 0:e.layers,null==i||null==(t=i.basemap)?void 0:t.baseLayers,null==i||null==(n=i.basemap)?void 0:n.referenceLayers,null==i?void 0:i.layers].concat(Object(K.a)(v)).filter((function(e){return!!e}));r.handles.add(m.map((function(e){return r._watchUpdatingTracking.addOnCollectionChange(e,r._reschedule)})),"collection-change"),r._workPromise.resolve(),r._workPromise=null}},r}return Object(c.a)(n,[{key:"initialize",value:function(){this.handles.add([Object(x.b)(this,"view.map.allLayers","change",this._preloadLayerViewModules,this._preloadLayerViewModules),Object(x.a)(this.view,["map.basemap","map.ground","map.layers","ready"],this._reschedule,!0)]),this._preloadLayerViewModules(),this._reschedule()}},{key:"destroy",value:function(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null}},{key:"_layersToLayerViews",get:function(){var e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}},{key:"_rootCollectionNames",get:function(){return Array.from(this._layersToLayerViews.keys())}},{key:"updating",get:function(){return!(!Object(y.k)(this._workPromise)&&!this._watchUpdatingTracking.updating)||Object(fe.a)(this._layerLayerViewInfoMap,(function(e){return!e.done}))}},{key:"clear",value:function(){if(!this.destroyed){var e,t=Object(Y.a)(this._layerLayerViewInfoMap.values());try{for(t.s();!(e=t.n()).done;){e.value.destroy()}}catch(n){t.e(n)}finally{t.f()}this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}},{key:"whenLayerView",value:function(){var e=Object(h.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._reschedule();case 2:if(this._layerLayerViewInfoMap.has(t)){e.next=4;break}throw new j.a("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:t});case 4:return e.abrupt("return",this._layerLayerViewInfoMap.get(t).promise);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_refreshCollections",value:function(){var e,t=Object(Y.a)(this._layersToLayerViews);try{for(t.s();!(e=t.n()).done;){var n=Object(o.a)(e.value,2),r=n[0],i=n[1];this._populateLayerViewsOwners(this.get(r),this.get(i),this.view)}}catch(a){t.e(a)}finally{t.f()}this.notifyChange("updating")}},{key:"_populateLayerViewsOwners",value:function(e,t,n){if(e&&t){var r,i=0,a=Object(Y.a)(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=this._layerLayerViewInfoMap.get(o);if(s&&s.layerView){var c=s.layerView;c.layer=o,c.parent=n,t.getItemAt(i)!==c&&t.splice(i,0,c),o.layers&&this._populateLayerViewsOwners(o.layers,c.layerViews,c),i+=1}}}catch(l){a.e(l)}finally{a.f()}i<t.length&&t.splice(i,t.length)}else t&&t.removeAll()}},{key:"_createLayerView",value:function(e){var t=this;if(this._layerLayerViewInfoMap.has(e))return this.view.ready&&this._layerLayerViewInfoMap.get(e).start(),void this.notifyChange("updating");e.load().catch((function(){})),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);var n=new he(e,this.view,this.layerViewImporter);n.promise.then((function(){return t._refreshCollections()}),(function(n){var r,i;n&&(Object(U.m)(n)||"cancelled:layerview-create"===n.name)||pe.error("Failed to create layerview for layer title:'".concat(null!=(r=e.title)?r:"no title","', id:'").concat(null!=(i=e.id)?i:"no id","' of type '").concat(e.type,"'."),{layer:e,error:n}),t._refreshCollections()})),this._layerLayerViewInfoMap.set(e,n),this.view.ready&&n.start(),this.notifyChange("updating")}}]),n}(ce.a);Object(b.a)([Object(g.b)()],be.prototype,"_workPromise",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],be.prototype,"_watchUpdatingTracking",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],be.prototype,"_layersToLayerViews",null),Object(b.a)([Object(g.b)({readOnly:!0})],be.prototype,"_rootCollectionNames",null),Object(b.a)([Object(g.b)()],be.prototype,"layerViewImporter",void 0),Object(b.a)([Object(g.b)()],be.prototype,"supportsGround",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],be.prototype,"updating",null),Object(b.a)([Object(g.b)({constructOnly:!0})],be.prototype,"view",void 0);var ve=be=Object(b.a)([Object(O.a)("esri.views.LayerViewManager")],be),ye=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).factor=1.5,r.offset=Object(W.e)(0,0),r.position=null,r.size=120,r.maskUrl=null,r.maskEnabled=!0,r.overlayUrl=null,r.overlayEnabled=!0,r.visible=!0,r}return Object(c.a)(n,[{key:"version",get:function(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}}]),n}(ee.a);Object(b.a)([Object(g.b)({type:Number})],ye.prototype,"factor",void 0),Object(b.a)([Object(g.b)({nonNullable:!0})],ye.prototype,"offset",void 0),Object(b.a)([Object(g.b)()],ye.prototype,"position",void 0),Object(b.a)([Object(g.b)({type:Number,range:{min:0}})],ye.prototype,"size",void 0),Object(b.a)([Object(g.b)()],ye.prototype,"maskUrl",void 0),Object(b.a)([Object(g.b)()],ye.prototype,"maskEnabled",void 0),Object(b.a)([Object(g.b)()],ye.prototype,"overlayUrl",void 0),Object(b.a)([Object(g.b)()],ye.prototype,"overlayEnabled",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],ye.prototype,"version",null),Object(b.a)([Object(g.b)({type:Boolean})],ye.prototype,"visible",void 0);var me=ye=Object(b.a)([Object(O.a)("esri.views.Magnifier")],ye),ge=n(474),Oe=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.apply(this,arguments))._handles=new L.a,e._currentTick=0,e}return Object(c.a)(n,[{key:"initialize",value:function(){var e=this;this._handles.add([this.view.allLayerViews.on("after-changes",(function(){e.notifyChange("tickInterval"),e._handles.remove("layerViewsUpdating"),e._handles.add(e._getLayerViewHandles(),"layerViewsUpdating")})),this.watch("tickInterval",(function(){return e._restartTicking()})),this.watch("view.ready",(function(){return e._restartTicking()}))]),this._restartTicking()}},{key:"destroy",value:function(){this._handles&&(this._handles.destroy(),this._handles=null,this._intervalID&&clearInterval(this._intervalID),this._currentTick=0)}},{key:"tickInterval",get:function(){var e=this.view.allLayerViews.filter((function(e){return Object(ge.b)(e)}));return this._getCommonInterval(e)}},{key:"_restartTicking",value:function(){var e=this;this._currentTick=0,this._intervalID&&clearInterval(this._intervalID),this.get("view.ready")&&this.tickInterval&&(this._intervalID=setInterval((function(){var t=Date.now();e._currentTick+=e.tickInterval,e.view.allLayerViews.forEach((function(n){if(Object(ge.b)(n)){var r=Math.round(6e4*n.refreshInterval),i=e._currentTick%r==0,a=t-n.refreshTimestamp<5400;r&&i&&!a&&(n.refresh(t),e.emit("refresh",{layerView:n,timestamp:t,trigger:"interval"}))}}))}),this.tickInterval))}},{key:"_getLayerViewHandles",value:function(){var e=this,t=[],n=function(){return e.notifyChange("tickInterval")};return this.view.allLayerViews.forEach((function(r){Object(ge.b)(r)&&r.layer&&t.push(r.watch("refreshInterval",n),r.layer.on("refresh",(function(){var t=Date.now();r.refresh(t),e.emit("refresh",{layerView:r,timestamp:t,trigger:"layer-refresh"})})))})),t}},{key:"_getCommonInterval",value:function(e){var t=function e(t,n){return isNaN(t)||isNaN(n)?0:n<=0?t:e(n,t%n)};return e.toArray().reduce((function(e,n){return t(Math.round(6e4*n.refreshInterval),e)}),0)}}]),n}(ne.a.EventedAccessor);Object(b.a)([Object(g.b)()],Oe.prototype,"view",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],Oe.prototype,"tickInterval",null);var je=Oe=Object(b.a)([Object(O.a)("esri.views.RefreshManager")],Oe),we=n(45),_e=n(99),ke=n(48),xe=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],Se={};function Te(e){return!!Se[e]}xe.forEach((function(e){Se[e]=!0}));var Ee=function(){function e(t){Object(s.a)(this,e),this.handlers=new Map,this.counter=0,this.handlerCounts=new Map,this.view=t,this.inputManager=null}return Object(c.a)(e,[{key:"connect",value:function(e){var t=this;e&&this.disconnect(),this.inputManager=e,this.handlers.forEach((function(e,n){var r=e.handler,i=e.priority;return t.inputManager.installHandlers(n,[r],i)}))}},{key:"disconnect",value:function(){var e=this;this.inputManager&&this.handlers.forEach((function(t,n){return e.inputManager.uninstallHandlers(n)})),this.inputManager=null}},{key:"destroy",value:function(){this.disconnect(),this.handlers.clear(),this.view=null}},{key:"on",value:function(e,t,n,r){var i,a,o=this,s=Array.isArray(e)?e:e.split(",");if(!function(e){var t,n=Object(Y.a)(e);try{for(n.s();!(t=n.n()).done;)if(!Te(t.value))return!1}catch(r){n.e(r)}finally{n.f()}return!0}(s))return s.some(Te)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;Array.isArray(t)?a=t:(i=t,a=[]),"function"==typeof n?i=n:r=n,r=null!=r?r:ke.b.DEFAULT;var c=this.createUniqueGroupName(),l=new Ce(this.view,s,a,i);this.handlers.set(c,{handler:l,priority:r});var u,d=Object(Y.a)(s);try{for(d.s();!(u=d.n()).done;){var f=u.value,p=this.handlerCounts.get(f)||0;this.handlerCounts.set(f,p+1)}}catch(h){d.e(h)}finally{d.f()}return this.inputManager&&this.inputManager.installHandlers(c,[l],r),{remove:function(){return o.removeHandler(c,s)}}}},{key:"hasHandler",value:function(e){return!!this.handlerCounts.get(e)}},{key:"removeHandler",value:function(e,t){if(this.handlers.has(e)){this.handlers.delete(e);var n,r=Object(Y.a)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=this.handlerCounts.get(i);void 0===a?console.error("Trying to remove handler for event that has no handlers registered: ",i):1===a?this.handlerCounts.delete(i):this.handlerCounts.set(i,a-1)}}catch(o){r.e(o)}finally{r.f()}}this.inputManager&&this.inputManager.uninstallHandlers(e)}},{key:"createUniqueGroupName",value:function(){return this.counter+=1,"viewEvents_".concat(this.counter)}}]),e}(),Ce=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e,r,i,a){var o;Object(s.a)(this,n),(o=t.call(this,!0)).view=e;var c,l=Object(Y.a)(r);try{for(l.s();!(c=l.n()).done;){switch(c.value){case"click":o.registerIncoming("click",i,(function(e){return a(o.wrapClick(e))}));break;case"double-click":o.registerIncoming("double-click",i,(function(e){return a(o.wrapDoubleClick(e))}));break;case"immediate-click":o.registerIncoming("immediate-click",i,(function(e){return a(o.wrapImmediateClick(e))}));break;case"immediate-double-click":o.registerIncoming("immediate-double-click",i,(function(e){return a(o.wrapImmediateDoubleClick(e))}));break;case"hold":o.registerIncoming("hold",i,(function(e){return a(o.wrapHold(e))}));break;case"drag":o.registerIncoming("drag",i,(function(e){var t=o.wrapDrag(e);t&&a(t)}));break;case"key-down":o.registerIncoming("key-down",i,(function(e){return a(o.wrapKeyDown(e))}));break;case"key-up":o.registerIncoming("key-up",i,(function(e){return a(o.wrapKeyUp(e))}));break;case"pointer-down":o.registerIncoming("pointer-down",i,(function(e){return a(o.wrapPointer(e,"pointer-down"))}));break;case"pointer-move":o.registerIncoming("pointer-move",i,(function(e){return a(o.wrapPointer(e,"pointer-move"))}));break;case"pointer-up":o.registerIncoming("pointer-up",i,(function(e){return a(o.wrapPointer(e,"pointer-up"))}));break;case"pointer-drag":o.registerIncoming("pointer-drag",i,(function(e){return a(o.wrapPointerDrag(e))}));break;case"mouse-wheel":o.registerIncoming("mouse-wheel",i,(function(e){return a(o.wrapMouseWheel(e))}));break;case"pointer-enter":o.registerIncoming("pointer-enter",i,(function(e){return a(o.wrapPointer(e,"pointer-enter"))}));break;case"pointer-leave":o.registerIncoming("pointer-leave",i,(function(e){return a(o.wrapPointer(e,"pointer-leave"))}));break;case"gamepad":o.registerIncoming("gamepad",i,(function(e){a(o.wrapGamepad(e))}));break;case"focus":o.registerIncoming("focus",i,(function(e){a(o.wrapFocus(e))}));break;case"blur":o.registerIncoming("blur",i,(function(e){a(o.wrapBlur(e))}))}}}catch(u){l.e(u)}finally{l.f()}return o}return Object(c.a)(n,[{key:"wrapFocus",value:function(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}},{key:"wrapBlur",value:function(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}},{key:"wrapClick",value:function(e){var t=e.data,n=t.pointerType,r=t.button,i=t.buttons,a=t.x,o=t.y,s=t.native,c=t.eventId,l=e.cancelable;return{type:"click",pointerType:n,button:r,buttons:i,x:a,y:o,native:s,timestamp:e.timestamp,screenPoint:Object(W.e)(a,o),mapPoint:this.getMapPoint(a,o),eventId:c,cancelable:l,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}},{key:"wrapDoubleClick",value:function(e){var t=e.data,n=t.pointerType,r=t.button,i=t.buttons,a=t.x,o=t.y,s=t.native,c=t.eventId,l=e.cancelable;return{type:"double-click",pointerType:n,button:r,buttons:i,x:a,y:o,native:s,timestamp:e.timestamp,mapPoint:this.getMapPoint(a,o),eventId:c,cancelable:l,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}},{key:"wrapImmediateClick",value:function(e){var t=e.data,n=t.pointerType,r=t.button,i=t.buttons,a=t.x,o=t.y,s=t.native,c=t.eventId,l=s.pointerId,u=e.cancelable;return{type:"immediate-click",pointerId:l,pointerType:n,button:r,buttons:i,x:a,y:o,native:s,timestamp:e.timestamp,mapPoint:this.getMapPoint(a,o),eventId:c,cancelable:u,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}},{key:"wrapImmediateDoubleClick",value:function(e){var t=e.data,n=t.pointerType,r=t.button,i=t.buttons,a=t.x,o=t.y,s=t.native,c=t.eventId,l=s.pointerId,u=e.cancelable;return{type:"immediate-double-click",pointerId:l,pointerType:n,button:r,buttons:i,x:a,y:o,native:s,timestamp:e.timestamp,mapPoint:this.getMapPoint(a,o),eventId:c,cancelable:u,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}},{key:"wrapHold",value:function(e){var t=e.data,n=t.pointerType,r=t.button,i=t.buttons,a=t.x,o=t.y,s=t.native,c=e.cancelable;return{type:"hold",pointerType:n,button:r,buttons:i,x:a,y:o,native:s,timestamp:e.timestamp,mapPoint:this.getMapPoint(a,o),cancelable:c,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}},{key:"getMapPoint",value:function(e,t){return this.view.toMap(Object(W.e)(e,t),{exclude:[]})}},{key:"wrapDrag",value:function(e){var t=e.data,n=t.center,r=n.x,i=n.y,a=t.action,o=t.pointerType,s=t.button;if("start"===a&&(this.latestDragStart=t),this.latestDragStart){var c=t.pointer.native,l=t.buttons,u=e.cancelable,d=e.timestamp,f={x:this.latestDragStart.center.x,y:this.latestDragStart.center.y};return"end"===a&&(this.latestDragStart=void 0),{type:"drag",action:a,x:r,y:i,origin:f,pointerType:o,button:s,buttons:l,radius:t.radius,angle:Object(we.p)(t.angle),native:c,timestamp:d,cancelable:u,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}}},{key:"wrapKeyDown",value:function(e){var t=e.data,n=t.key,r=t.repeat,i=t.native,a=e.cancelable;return{type:"key-down",key:n,repeat:r,native:i,timestamp:e.timestamp,cancelable:a,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}},{key:"wrapKeyUp",value:function(e){var t=e.data,n=t.key,r=t.native,i=e.cancelable;return{type:"key-up",key:n,native:r,timestamp:e.timestamp,cancelable:i,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}},{key:"wrapPointer",value:function(e,t){var n=e.data,r=n.x,i=n.y,a=n.button,o=n.buttons,s=n.native,c=n.eventId,l=s.pointerId,u=s.pointerType,d=e.cancelable;return{type:t,x:r,y:i,pointerId:l,pointerType:u,button:a,buttons:o,native:s,timestamp:e.timestamp,eventId:c,cancelable:d,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}},{key:"wrapPointerDrag",value:function(e){var t=e.data.currentEvent,n=t.x,r=t.y,i=t.buttons,a=t.native,o=t.eventId,s=e.data.startEvent.button,c=e.data.startEvent.native.pointerId,l=e.data.startEvent.native.pointerType,u=e.data.action,d={x:e.data.startEvent.x,y:e.data.startEvent.y},f=e.cancelable;return{type:"pointer-drag",x:n,y:r,pointerId:c,pointerType:l,button:s,buttons:i,action:u,origin:d,native:a,timestamp:e.timestamp,eventId:o,cancelable:f,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}},{key:"wrapMouseWheel",value:function(e){var t=e.cancelable,n=e.data,r=e.timestamp;return{type:"mouse-wheel",x:n.x,y:n.y,deltaY:n.deltaY,native:n.native,timestamp:r,cancelable:t,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}},{key:"wrapGamepad",value:function(e){var t=e.data,n=t.action,r=t.state,i=t.device,a=e.cancelable;return{type:"gamepad",device:i,timestamp:e.timestamp,action:n,buttons:r.buttons,axes:r.axes,cancelable:a,stopPropagation:function(){return e.stopPropagation()},async:function(t){return e.async(t)},preventDefault:function(){return e.preventDefault()}}}}]),n}(_e.a),Pe=n(212),Ie=function(){function e(){Object(s.a)(this,e),this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToActiveTool=null,this._cursor=null}return Object(c.a)(e,[{key:"cursor",get:function(){return this._cursor}},{key:"handleInputEvent",value:function(e,t){var n=function(){return e.stopPropagation()};switch(e.type){case"pointer-move":Me(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(n(),"end"===e.action&&(this._stopDrag=!1));break;case"pointer-down":if(!Ae(e)||Re(e))break;var r=Object(z.a)(e),i=this._intersect(r,e.pointerType,t.forEachTool);if(Object(y.j)(i))break;var a=this._findToolAndManipulatorByKey(i,t.forEachTool,Le),o=Object(y.c)(a,(function(e){return e.manipulator})),s=Object(y.c)(a,(function(e){return e.tool}));!(Object(y.k)(o)&&Object(y.k)(s)&&o.interactive)||o.grabbable&&o.grabbableForEvent(e)||!o.grabbing||o.dragging||this._ungrabManipulatorBeforeDragging(o,s,e),Object(y.k)(o)&&o.interactive&&o.grabbable&&o.grabbableForEvent(e)&&!o.grabbing&&(this._grabbedManipulators.set(e.pointerId,{key:i,start:r}),1===this._grabbedManipulators.size&&(this._revertToActiveTool=t.activeTool,t.setActiveTool(i.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",screenPoint:r}),n());break;case"pointer-up":this._handlePointerEnd(e,t);break;case"pointer-drag":if(!Ae(e))break;var c=this._grabbedManipulators.get(e.pointerId),l=this._draggedManipulators.get(e.pointerId),u=Object(y.c)(c||l,(function(e){return e.key})),d=this._findManipulatorByKey(u,t.forEachTool);if(Object(y.j)(d))break;var f=Object(z.a)(e);f.x=Object(we.d)(f.x,0,t.view.width),f.y=Object(we.d)(f.y,0,t.view.height);var p=Object(y.q)(c||l).start;switch(e.action){case"start":case"update":"update"!==e.action&&1!==this._grabbedManipulators.size||(d.dragging=!0,l?d.events.emit("drag",{action:"update",start:p,screenPoint:f}):d.events.emit("drag",{action:"start",start:p,screenPoint:f,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{key:Object(y.q)(u),start:p}));break;case"end":d.dragging=!1,l&&d.events.emit("drag",{action:"end",start:p,screenPoint:f}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,t)}n();break;case"immediate-click":var h=Object(z.a)(e),b=this._intersect(h,e.pointerType,t.forEachTool),v=this._findToolAndManipulatorByKey(b,t.forEachTool,Le);if(Re(e)||t.forEachTool((function(e){if((!Object(y.k)(v)||v.tool!==e||!e.selectionManagementDisabled)&&e.manipulators){var t=!1;e.manipulators.forEach((function(e){var n=e.manipulator;n.selected&&(n.selected=!1,t=!0)})),t&&e.manipulatorSelectionChanged&&e.manipulatorSelectionChanged()}})),Object(y.j)(v))break;var m=v.manipulator,g=v.tool;if(!m.interactive)break;m.selectable&&!g.selectionManagementDisabled&&(m.selected=!m.selected,g.manipulatorSelectionChanged&&g.manipulatorSelectionChanged());var O=e.native.shiftKey;m.events.emit("immediate-click",{screenPoint:h,button:e.button,pointerType:e.pointerType,shiftKey:O,stopPropagation:n});break;case"click":var j=Object(z.a)(e),w=this._intersect(j,e.pointerType,t.forEachTool),_=this._findManipulatorByKey(w,t.forEachTool);if(Object(y.j)(_)||!_.interactive)break;var k=e.native.shiftKey;_.events.emit(e.type,{screenPoint:j,button:e.button,pointerType:e.pointerType,shiftKey:k}),n();break;case"double-click":var x=Object(z.a)(e),S=this._intersect(x,e.pointerType,t.forEachTool),T=this._findManipulatorByKey(S,t.forEachTool);if(Object(y.j)(T)||!T.interactive)break;var E=e.native.shiftKey;T.events.emit("double-click",{screenPoint:x,button:e.button,pointerType:e.pointerType,shiftKey:E,stopPropagation:n});break;case"immediate-double-click":var C=Object(z.a)(e),P=this._intersect(C,e.pointerType,t.forEachTool),I=this._findManipulatorByKey(P,t.forEachTool);if(Object(y.j)(I)||!I.interactive)break;var M=e.native.shiftKey;I.events.emit("immediate-double-click",{screenPoint:C,button:e.button,pointerType:e.pointerType,shiftKey:M,stopPropagation:n})}this._updateCursor(t.forEachTool)}},{key:"_ungrabManipulatorBeforeDragging",value:function(e,t,n){var r=this;e.grabbing=!1,e.events.emit("grab-changed",{action:"end",screenPoint:Object(z.a)(n)}),this._grabbedManipulators.forEach((function(n,i){var a=n.key;a.tool===t&&t.manipulators.findById(a.manipulatorId)===e&&r._grabbedManipulators.delete(i)}))}},{key:"_handlePointerEnd",value:function(e,t){var n=Object(y.c)(this._grabbedManipulators.get(e.pointerId),(function(e){return e.key})),r=this._findManipulatorByKey(n,t.forEachTool);if(Object(y.k)(r)&&!r.dragging){var i=Object(y.k)(t.creatingTool)&&t.creatingTool===Object(y.q)(n).tool;1!==this._grabbedManipulators.size||0!==this._draggedManipulators.size||i||(t.setActiveTool(this._revertToActiveTool),this._revertToActiveTool=null),r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",screenPoint:Object(z.a)(e)})),this._grabbedManipulators.delete(e.pointerId)}}},{key:"_cursorFromMap",value:function(e,t){var n=this,r=null;return Object(fe.a)(e,(function(e){var i=e.key,a=n._findManipulatorByKey(i,t);return!!(Object(y.k)(a)&&a.interactive&&"cursor"in a&&a.cursor)&&(r=a.cursor,!0)})),r}},{key:"_updateCursor",value:function(e){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators,e)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators,e)||"pointer":this._cursor=null}},{key:"clearPointers",value:function(e,t){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0,a=function(t){return t.tool===e&&(Object(y.j)(i)||t.manipulatorId===i)};this._grabbedManipulators.forEach((function(e,r){var i=e.key;if(a(i)){n._grabbedManipulators.delete(r);var o=n._findManipulatorByKey(i,t);Object(y.k)(o)&&(o.grabbing=!1,o.events.emit("grab-changed",{action:"end",screenPoint:null}))}})),this._draggedManipulators.forEach((function(e,r){var i=e.key;if(a(i)){n._draggedManipulators.delete(r);var o=n._findManipulatorByKey(i,t);Object(y.k)(o)&&(o.dragging=!1,o.events.emit("drag",{action:"cancel"}))}})),r&&this._hoveredManipulators.forEach((function(e,r){var i=e.key;if(a(i)){n._hoveredManipulators.delete(r);var o=n._findManipulatorByKey(i,t);Object(y.k)(o)&&(o.hovering=!1)}})),this._updateCursor(t)}},{key:"_intersect",value:function(e,t,n){var r=null;return n((function(n){if(null==n.manipulators||!Object(Pe.a)(n))return!1;var i=n.manipulators.intersect(e,t);return!Object(y.j)(i)&&(r={manipulatorId:i.id,tool:n},!0)})),r}},{key:"updateHoveredStateFromKnownPointers",value:function(e){var t=this;this._pointerLocations.forEach((function(n,r){t._updateHoveredStateForPointerAtScreenPosition(Object(W.e)(n.x,n.y),r,n.pointerType,e)}))}},{key:"handleHoverEvent",value:function(e,t){"pointer-up"!==e.type&&"immediate-click"!==e.type&&"pointer-move"!==e.type||!Me(e.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(Object(z.a)(e),e.pointerId,e.pointerType,t)}},{key:"_updateHoveredStateForPointerAtScreenPosition",value:function(e,t,n,r){var i=this._intersect(e,n,r),a=this._findManipulatorByKey(i,r),o=Object(y.c)(this._hoveredManipulators.get(t),(function(e){return e.key})),s=this._findManipulatorByKey(o,r);Object(y.k)(a)&&!a.interactive&&(a=null),s!==a&&(Object(y.k)(s)&&(s.hovering=!1),Object(y.k)(a)?(a.hovering=!0,this._hoveredManipulators.set(t,{key:Object(y.q)(i)})):this._hoveredManipulators.delete(t),this._updateCursor(r))}},{key:"_findManipulatorByKey",value:function(e,t){return this._findToolAndManipulatorByKey(e,t,Le)?Le.manipulator:null}},{key:"_findToolAndManipulatorByKey",value:function(e,t,n){return Object(y.j)(e)?null:(n.tool=null,n.manipulator=null,t((function(t){if(t!==e.tool||null==t.manipulators||!Object(Pe.a)(t))return!1;var r=t.manipulators.findById(e.manipulatorId);return!!Object(y.k)(r)&&(n.manipulator=r,n.tool=t,!0)})),n.manipulator?n:null)}}]),e}();function Me(e){return"mouse"===e}function Ae(e){return"mouse"!==e.pointerType||0===e.button}function Re(e){return!!e.native.shiftKey}var Le={manipulator:null,tool:null},Fe=Ie,De=m.a.getLogger("esri.views.ToolViewManager"),Ne="manipulators",Ve="tools",ze=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e))._handles=new L.a,r._creatingTool=null,r._manipulatorState=new Fe,r.tools=Object(Pe.c)(),r.cursor=null,r._forEachTool=function(e){if(!Object(y.k)(r._creatingTool)||!e(r._creatingTool)){var t,n=Object(Y.a)(r.tools.items);try{for(n.s();!(t=n.n()).done;){if(e(t.value))return}}catch(i){n.e(i)}finally{n.f()}}},r}return Object(c.a)(n,[{key:"initialize",value:function(){var e=this;this._handles.add([this.view.on(xe,(function(t){e._handleInputEvent(t)}),ke.b.TOOL),this.tools.on("before-add",(function(t){var n=t.item;null==n||e.tools.includes(n)?t.preventDefault():null==n.created||n.created||(De.error("tools","Tool can not be added to view before it has been created"),t.preventDefault())})),this.tools.on("before-remove",(function(t){var n=t.item;e._manipulatorState.clearPointers(n,e._forEachTool)})),this.tools.on("change",(function(){e._refreshToolWatchers()}))])}},{key:"destroy",value:function(){this._forEachTool((function(e){return e.destroy()})),this._handles.destroy(),this._handles=null}},{key:"activeTool",set:function(e){var t=this;!Object(y.k)(e)||this.view.ready?(Object(Pe.e)(this,e,(function(n){t._set("activeTool",n),t._removeIncompleteTools(e),t._forEachTool((function(e){var n=Object(y.j)(t.activeTool)||e===t.activeTool;e.setEditableFlag&&e.setEditableFlag(1,n);var r=Object(Pe.a)(e);!Object(y.j)(t.activeTool)&&r||t._manipulatorState.clearPointers(e,t._forEachTool,!r)})),t._updateCursor()})),this._creatingTool!==e&&this._rejectCreatingTool()):De.error("#activeTool=","cannot set active tool while view is not ready")}},{key:"createTool",value:function(){var e=Object(h.a)(a.a.mark((function e(t,n,r){var i,o,s,c=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.view.whenReady();case 2:if(i="Tool creation was interrupted by another tool being created",!Object(U.n)(r)){e.next=5;break}throw Object(U.e)(i);case 5:return o=new t(Object(A.a)(Object(A.a)({},Object(Pe.b)(n)),{},{view:this.view})),s=Object(U.p)(r,(function(){return c.activeTool=null})),this._rejectCreatingTool(i),this._creatingTool=o,o.attach(),this._refreshToolWatchers(),Object(Pe.d)(o,!0),e.next=13,o.when();case 13:return Object(y.k)(s)&&s.remove(),this._creatingTool=null,this.tools.add(o),o instanceof ee.a&&null!=o.completed&&Object(x.j)(o,"completed").then((function(){Object(Pe.d)(o,!1)})),e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"attach",value:function(){var e=this;this._forEachTool((function(e){return e.attach()})),"3d"===this.view.type?this._handles.add([this.view.state.watch("camera",(function(){e.forEachManipulator((function(e){null!=e.onViewChange&&e.onViewChange()}))})),this.view.elevationProvider.on("elevation-change",(function(t){e.forEachManipulator((function(e){null!=e.onElevationChange&&e.onElevationChange(t)}))}))],Ne):this._handles.add(this.view.watch("extent",(function(){e.forEachManipulator((function(e){null!=e.onViewChange&&e.onViewChange()}))})))}},{key:"detach",value:function(){this.activeTool=null,this._forEachTool((function(e){e.detach(),e.destroy()})),this.tools.removeAll(),this._handles.remove(Ne)}},{key:"forEachManipulator",value:function(e){this._forEachTool((function(t){t.manipulators&&t.manipulators.forEach((function(n){var r=n.manipulator;return e(r,t)}))}))}},{key:"_handleInputEvent",value:function(e){var t=this,n=!1,r=Object(A.a)(Object(A.a)({},e),{},{stopPropagation:function(){n=!0,e.stopPropagation()}});Object(y.k)(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r):this._forEachTool((function(e){!n&&!1!==e.visible&&e.handleInputEvent&&e.handleInputEvent(r)})),!n&&"key-down"===e.type&&"Escape"===e.key&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:function(e){t.activeTool=e},creatingTool:this._creatingTool,view:this.view}),!n&&Object(y.k)(this.activeTool)&&this.activeTool.handleInputEventAfter&&this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this._forEachTool),this._updateCursor()}},{key:"_refreshToolWatchers",value:function(){var e=this;this._handles.remove(Ve),this._forEachTool((function(t){if(t instanceof ee.a){var n=Object(x.d)(t,["cursor","visible","editable"],(function(){Object(Pe.a)(t)||e._manipulatorState.clearPointers(t,e._forEachTool),e._updateCursor()}));e._handles.add(n,Ve)}t.manipulators&&e._handles.add(t.manipulators.on("change",(function(n){n.removed.forEach((function(n){var r=n.id;e._manipulatorState.clearPointers(t,e._forEachTool,!0,r)})),e._manipulatorState.updateHoveredStateFromKnownPointers(e._forEachTool),e._updateCursor()})),Ve)})),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}},{key:"_updateCursor",value:function(){var e=null;this._forEachTool((function(t){return null!=t.cursor&&!1!==t.visible&&(e=t.cursor,!0)})),e||(e=this._manipulatorState.cursor),this._get("cursor")!==e&&this._set("cursor",e)}},{key:"_rejectCreatingTool",value:function(e){var t=this._creatingTool;Object(y.j)(t)||(this._manipulatorState.clearPointers(t,this._forEachTool),t.rejectCreation&&t.rejectCreation(Object(U.e)(e)),t.destroy(),this._creatingTool=null,this._refreshToolWatchers())}},{key:"_removeIncompleteTools",value:function(e){var t=this;this.tools.filter((function(t){return(Object(y.j)(e)||t!==e)&&null!=t.completed&&!t.completed})).forEach((function(e){t.tools.remove(e)}))}}]),n}(ee.a);Object(b.a)([Object(g.b)({constructOnly:!0,nonNullable:!0})],ze.prototype,"view",void 0),Object(b.a)([Object(g.b)({value:null})],ze.prototype,"activeTool",null),Object(b.a)([Object(g.b)({readOnly:!0,type:w.a})],ze.prototype,"tools",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],ze.prototype,"cursor",void 0);var Ue=ze=Object(b.a)([Object(O.a)("esri.views.ToolViewManager")],ze),Be=function(){function e(t,n,r){Object(s.a)(this,e),this.analysis=t,this.viewFactory=n,this.controllerFactory=r,this._promise=Object(U.f)(),this.analysisView=null,this.analysisController=null,this._load()}return Object(c.a)(e,[{key:"destroy",value:function(){Object(y.k)(this.analysisView)&&this.analysisView.destroy(),Object(y.k)(this.analysisController)&&this.analysisController.destroy()}},{key:"promise",get:function(){return this._promise.promise}},{key:"_load",value:function(){var e=Object(h.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,!Object(y.k)(this.viewFactory)){e.next=7;break}return e.next=4,this.viewFactory(this.analysis);case 4:this.analysisView=e.sent,e.next=8;break;case 7:t=!0;case 8:if(!Object(y.k)(this.controllerFactory)){e.next=14;break}return e.next=11,this.controllerFactory(this.analysis);case 11:this.analysisController=e.sent,e.next=15;break;case 14:t=!0;case 15:t?this._promise.reject("no view/controller factories available for analysis"):this._promise.resolve(Object(y.q)(this.analysisView));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ge=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e))._items=new Map,r.analyses=new w.a,r}return Object(c.a)(n,[{key:"initialize",value:function(){var e=this;this.analyses.on("after-add",(function(t){var n=t.item;e._items.set(n,e._createItem(n))})),this.analyses.on("after-remove",(function(t){var n=t.item,r=e._getItem(n);Object(y.k)(r)&&(r.destroy(),e._items.delete(n))}))}},{key:"whenAnalysisView",value:function(){var e=Object(h.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._items.has(t)?this._items.get(t).promise:Object(U.r)(new j.a("view:no-analysisview-for-analysis","No analysis view has been found for the analysis")));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAnalysisView",value:function(e){var t=this._items.get(e);return t?t.analysisView:null}},{key:"_createItem",value:function(e){return new Be(e,this.viewFactory,this.controllerFactory)}},{key:"_getItem",value:function(e){return this._items.get(e)}}]),n}(ee.a);Object(b.a)([Object(g.b)({type:w.a})],Ge.prototype,"analyses",void 0),Object(b.a)([Object(g.b)()],Ge.prototype,"viewFactory",void 0),Object(b.a)([Object(g.b)()],Ge.prototype,"controllerFactory",void 0),Ge=Object(b.a)([Object(O.a)("esri.views.3d.interactive.graphics.AnalysisManager")],Ge);var qe=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this)).nativeIndex=null,r._detectedDeviceType="unknown","standard"===e.mapping?r._detectedDeviceType="standard":He.test(e.id)?r._detectedDeviceType="spacemouse":r._detectedDeviceType="unknown",r.nativeIndex=e.index,r}return Object(c.a)(n,[{key:"native",get:function(){return(navigator.getGamepads?navigator.getGamepads():[])[this.nativeIndex]}},{key:"deviceType",get:function(){return this._detectedDeviceType}},{key:"axisThreshold",get:function(){return We[this.deviceType]}}]),n}(ee.a);Object(b.a)([Object(g.b)({nonNullable:!0,readOnly:!0})],qe.prototype,"nativeIndex",void 0),Object(b.a)([Object(g.b)({type:String,readOnly:!0})],qe.prototype,"deviceType",null),Object(b.a)([Object(g.b)({type:Number,readOnly:!0})],qe.prototype,"axisThreshold",null),qe=Object(b.a)([Object(O.a)("esri.views.input.gamepad.GamepadInputDevice")],qe);var He=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),We={standard:.15,spacemouse:.025,unknown:0},$e=qe,Je=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).devices=new w.a,e.enabledFocusMode="document",e}return n}(ee.a);Object(b.a)([Object(g.b)({type:w.a.ofType($e),readOnly:!0})],Je.prototype,"devices",void 0),Object(b.a)([Object(g.b)({type:["document","view","none"]})],Je.prototype,"enabledFocusMode",void 0);var Ye=Je=Object(b.a)([Object(O.a)("esri.views.input.gamepad.GamepadSettings")],Je),Ke=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.apply(this,arguments)).gamepad=new Ye,e}return n}(ee.a);Object(b.a)([Object(g.b)({readOnly:!0})],Ke.prototype,"gamepad",void 0);var Ze=Ke=Object(b.a)([Object(O.a)("esri.views.input.Input")],Ke),Xe=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).enabled=!0,r.device=null,r.mode="pan",r.tiltDirection="forward-down",r.velocityFactor=1,r}return n}(ee.a);Object(b.a)([Object(g.b)({type:Boolean,nonNullable:!0})],Xe.prototype,"enabled",void 0),Object(b.a)([Object(g.b)({type:$e})],Xe.prototype,"device",void 0),Object(b.a)([Object(g.b)({type:["pan","zoom"],nonNullable:!0})],Xe.prototype,"mode",void 0),Object(b.a)([Object(g.b)({type:["forward-down","forward-up"],nonNullable:!0})],Xe.prototype,"tiltDirection",void 0),Object(b.a)([Object(g.b)({type:Number,nonNullable:!0})],Xe.prototype,"velocityFactor",void 0);var Qe=Xe=Object(b.a)([Object(O.a)("esri.views.navigation.gamepad.GamepadSettings")],Xe),et=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).browserTouchPanEnabled=!0,r.gamepad=new Qe,r.momentumEnabled=!0,r.mouseWheelZoomEnabled=!0,r}return n}(ee.a);Object(b.a)([Object(g.b)({type:Boolean})],et.prototype,"browserTouchPanEnabled",void 0),Object(b.a)([Object(g.b)({type:Qe,nonNullable:!0})],et.prototype,"gamepad",void 0),Object(b.a)([Object(g.b)({type:Boolean})],et.prototype,"momentumEnabled",void 0),Object(b.a)([Object(g.b)({type:Boolean})],et.prototype,"mouseWheelZoomEnabled",void 0);var tt=et=Object(b.a)([Object(O.a)("esri.views.navigation.Navigation")],et),nt=n(185);function rt(e){var t=e.url&&Object(nt.e)(e.url);return null==(e.spatialReference&&e.spatialReference.vcsWkid)&&Object(y.k)(t)&&"ImageServer"===t.serverType||!it(e)||!e.heightModelInfo?ot(e)?se.a.deriveUnitFromSR(lt,e.spatialReference):null:e.heightModelInfo}function it(e){return"heightModelInfo"in e}function at(e){if("unknown"===e.type||!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"ogc-feature":return!0;case"imagery":case"map-image":case"map-notes":case"tile":case"vector-tile":case"scene":case null:default:return!1}}function ot(e){return at(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):st(e)}function st(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"geojson":case"feature":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"map-image":case"map-notes":case"ogc-feature":case"open-street-map":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wms":case"wmts":case null:return!1}return!1}var ct,lt=new se.a({heightModel:"gravity-related-height"}),ut=m.a.getLogger("esri.views.support.DefaultsFromMap"),dt=ct=function(e){Object(f.a)(r,e);var t=Object(p.a)(r);function r(){var e;return Object(s.a)(this,r),(e=t.apply(this,arguments))._handles=new L.a,e._waitTask=null,e._extentProjectController=null,e._spatialReferenceCandidates=null,e._extentCandidates=null,e.logDebugInformation=!1,e.isSpatialReferenceDone=!1,e.isTileInfoDone=!1,e.isHeightModelInfoSearching=!1,e.spatialReference=null,e.extent=null,e.heightModelInfo=null,e.vcsWkid=null,e.latestVcsWkid=null,e.mapCollectionPaths=ct.DefaultMapCollectionPaths.slice(),e.tileInfo=null,e}return Object(c.a)(r,[{key:"initialize",value:function(){var e=this;this.watch("mapCollectionPaths",(function(){e._running&&(e.reset(),e.start())}))}},{key:"destroy",value:function(){this._set("view",null),this._handles&&(this._handles.destroy(),this._handles=null),this._cancelLoading()}},{key:"_running",get:function(){return!!(this._handles&&this._handles.size>0)}},{key:"reset",value:function(){this._handles.removeAll(),this._set("isSpatialReferenceDone",!1),this._set("isTileInfoDone",!1),this._set("isHeightModelInfoSearching",!1),this._set("spatialReference",null),this._set("extent",null),this._set("heightModelInfo",null),this._set("vcsWkid",null),this._set("latestVcsWkid",null),this._set("tileInfo",null),this._spatialReferenceCandidates=null,this._extentCandidates=null}},{key:"start",value:function(){var e=this;this._handles.removeAll();var t,n=this._updateLayerChange.bind(this),r=Object(Y.a)(this.mapCollectionPaths);try{for(r.s();!(t=r.n()).done;){var i=t.value;this._handles.add(Object(x.b)(this.view,"map.".concat(i),"change",n,n,n,!0))}}catch(a){r.e(a)}finally{r.f()}this._handles.add(Object(x.e)(this,"isSpatialReferenceDone",(function(){return e._updateTileInfo()}),!0))}},{key:"_ownerNameFromCollectionName",value:function(e){var t=e.lastIndexOf(".");return-1===t?"view":"view."+e.slice(0,t)}},{key:"_ensureLoadedOwnersFromCollectionName",value:function(e){for(var t,n=this._ownerNameFromCollectionName(e).split("."),r=0;r<n.length&&(t=this.get(n.slice(0,r+1).join(".")));r++)if(t.load&&!t.isFulfilled())return{collectionName:e,owner:null,loading:t.load().catch((function(){}))};return{collectionName:e,owner:t}}},{key:"_cancelLoading",value:function(){this._waitTask=null,this._extentProjectController&&(this._extentProjectController.abort(),this._extentProjectController=null)}},{key:"_updateWhen",value:function(e){var t=this,n=!0,r=!1,i=e.catch((function(){})).then((function(){n?r=!0:i===t._waitTask&&t._update()}));return n=!1,r||(this._waitTask=i),r}},{key:"_updateLayerChange",value:function(){this.isSpatialReferenceDone&&!this.spatialReference&&this._set("isSpatialReferenceDone",!1),this._update()}},{key:"_update",value:function(){var e=this;if(this._cancelLoading(),this.view){if(!this.isSpatialReferenceDone){this._debugLog("Starting search for spatial reference...");var t=this._processMapCollections((function(t){return e._processSpatialReferenceSource(t)}));if(this._debugLog("Search ended with status '".concat(pt(t),"'")),0!==t){var n=null,r=this._spatialReferenceCandidates;if(!r||r.length<1?(n=this.defaultSpatialReference,this._debugLog("No spatial reference found, locking to default (".concat(ft(n),")"))):(this.defaultSpatialReference&&r.length>1&&r.findIndex((function(t){return t.equals(e.defaultSpatialReference)}))>-1&&(r=[this.defaultSpatialReference]),n=r[0],this._debugLog("Locking to ".concat(ft(n)))),this._set("spatialReference",n),n)if(this.extent)this._set("isSpatialReferenceDone",!0);else{var i=this.logDebugInformation;this.logDebugInformation=!1,this._processMapCollections((function(t){return e._findExtent(t,n)})),this.logDebugInformation=i,this._projectExtentCandidate().catch((function(){})).then((function(){return e._set("isSpatialReferenceDone",!0)}))}else this._set("isSpatialReferenceDone",!0)}}if(null==this.heightModelInfo&&this.view.isHeightModelInfoRequired){this._debugLog("Starting search for height model info...");var a=this._processMapCollections((function(t){return e._processHeightModelInfoSource(t)}),(function(e){return function(e){return null!=e.layers||st(e)||at(e)||it(e)}(e)}));this._debugLog("Search ended with status ".concat(pt(a))),this._set("isHeightModelInfoSearching",0===a)}this._updateTileInfo()}}},{key:"_processMapCollections",value:function(e,t){var n=this;this._preloadMapCollections(t);var r=2;return this._forAllMapCollectionSources((function(e){if(2!==r)return!1;var t=e.collectionName;return n._debugLog("Processing collection ".concat(t,"...")),!(e.loading&&!n._updateWhen(e.loading))||(n._debugLog("Collection ".concat(e.collectionName," owner is loading -> wait")),r=0,!1)}),(function(i){return 2===r&&(null==t||t(i)?!i.load||i.isFulfilled()||n._updateWhen(i.load())?!((!i.load||i.isResolved())&&e(i))||(r=1,!1):(n._debugLog("Source ".concat(i.id," is loading -> wait")),r=0,!1):(n._debugLog("Source ".concat(i.id," is skipped due to predicate")),!1))})),r}},{key:"_preloadMapCollections",value:function(e){var t=this,n=10,r=this.logDebugInformation;this.logDebugInformation=!1,this._forAllMapCollectionSources((function(){return!0}),(function(i){return 0!==n&&(!(null!=e&&!e(i))&&(i.load&&!i.isFulfilled()&&(t.logDebugInformation=r,t._debugLog("Pre-loading source ".concat(i.id)),t.logDebugInformation=!1,i.load().catch((function(){})),n--),!0))})),this.logDebugInformation=r}},{key:"_forAllMapCollectionSources",value:function(e,t){var n,r=Object(Y.a)(this.mapCollectionPaths);try{for(r.s();!(n=r.n()).done;){var i=n.value,a="map.".concat(i),o=this._ensureLoadedOwnersFromCollectionName(a);if(!1!==e(o)){var s=o.owner;if(!s||s.isRejected&&s.isRejected())this._debugLog("Collection ".concat(a," owner is invalid or rejected -> skip"));else{var c=this.view.get(a);c?this._forEachSource(c,t):this._debugLog("Collection ".concat(a," does not exist -> skip"))}}}}catch(l){r.e(l)}finally{r.f()}}},{key:"_forEachSource",value:function(e,t){var n,r=Object(Y.a)(e.items);try{for(r.s();!(n=r.n()).done;){var i=n.value;!1!==t(i)&&"layers"in i&&i.layers&&this._forEachSource(i.layers,t)}}catch(a){r.e(a)}finally{r.f()}}},{key:"_processSpatialReferenceSource",value:function(e){var t=this._getSupportedSpatialReferences(e);return 0!==t.length&&(this._spatialReferenceCandidates?(t=Object(Z.f)(t,this._spatialReferenceCandidates,(function(e,t){return e.equals(t)}))).length>0?this._spatialReferenceCandidates=t:this._debugLog("Layer ".concat(e.id," is ignored because its supported spatial\n          references are not compatible with the previous candidates")):this._spatialReferenceCandidates=t,1===this._spatialReferenceCandidates.length)}},{key:"_findExtent",value:function(e,t){var n="fullExtents"in e&&e.fullExtents||(e.fullExtent?[e.fullExtent]:[]),r=n.find((function(e){return e.spatialReference.equals(t)}));if(r)return this._set("extent",r),!0;if(this._getSupportedSpatialReferences(e).length>0){var i=n.map((function(t){return{extent:t,layer:e}})),a=this._extentCandidates||[];this._extentCandidates=a.concat(i)}return!1}},{key:"_projectExtentCandidate",value:function(){var e=Object(h.a)(a.a.mark((function e(){var t,r,i,o,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._extentCandidates&&this._extentCandidates.length){e.next=2;break}return e.abrupt("return");case 2:if(t=this.spatialReference,!(r=this._extentCandidates.find((function(e){return Object(G.a)(e.extent.spatialReference,t)})))){e.next=7;break}this._set("extent",Object(G.d)(r.extent,t)),e.next=22;break;case 7:return i=this._extentCandidates[0],this._extentProjectController=Object(U.d)(),e.next=11,Promise.resolve().then(n.bind(null,778));case 11:return o=e.sent,e.prev=12,e.next=15,o.projectGeometry(i.extent,t,i.layer.portalItem,this._extentProjectController.signal);case 15:s=e.sent,this._set("extent",s),e.next=21;break;case 19:e.prev=19,e.t0=e.catch(12);case 21:this._extentProjectController=null;case 22:case"end":return e.stop()}}),e,this,[[12,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"_getSupportedSpatialReferences",value:function(e){var t=this,n="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(0===n.length)return this._debugLog("Layer ".concat(e.id," is ignored because it does not have any spatial references")),[];var r=n.filter((function(n){return t.view.isSpatialReferenceSupported(n,e,(function(e){return t._debugLog(e)}))}));return 0===r.length?this._debugLog("Layer ".concat(e.id," has spatial references but none of them are supported (or layer doesn't require locking)")):this._debugLog("Layer ".concat(e.id," has spatial references. Resulting candidate set: ").concat(r.map(ft).join(", "))),r}},{key:"_processHeightModelInfoSource",value:function(e){var t=rt(e);return!!t&&(this._set("heightModelInfo",t),this._set("isHeightModelInfoSearching",!1),e.spatialReference&&(this._set("vcsWkid",e.spatialReference.vcsWkid),this._set("latestVcsWkid",e.spatialReference.latestVcsWkid)),!0)}},{key:"_updateTileInfo",value:function(){if(null==this.tileInfo)if(this.view.isTileInfoRequired()){if(this.isSpatialReferenceDone){var e=this.get("view.map");if(e){var t=e.basemap,n=e.get("layers.0"),r=null;if(t&&"failed"!==t.loadStatus){if(!t.loaded)return this._updateWhen(t.load()),void this._debugLog("updateTileInfo: basemap still loading");var i=t&&t.get("baseLayers.0");if(i&&"failed"!==i.loadStatus){if(!i.loaded)return this._updateWhen(i.load()),void this._debugLog("updateTileInfo: first basemap layer still loading");r="tileInfo"in i&&i.tileInfo}else{if(!n||"failed"===n.loadStatus)return this._debugLog("updateTileInfo: no tileInfo"),void this._set("isTileInfoDone",!0);if(!n.loaded)return this._updateWhen(n.load()),void this._debugLog("updateTileInfo: first operational layer still loading");r="tileInfo"in n&&n.tileInfo}}else if(n&&"failed"!==n.loadStatus){if(!n.loaded)return this._updateWhen(n.load()),void this._debugLog("updateTileInfo: first operational layer still loading");r="tileInfo"in n&&n.tileInfo}r&&!r.spatialReference.equals(this.spatialReference)&&(r=null),this._debugLog("updateTileInfo: setting ".concat(r)),this._set("tileInfo",r),this._set("isTileInfoDone",!0)}else this._debugLog("updateTileInfo: no map")}}else this._set("isTileInfoDone",!0)}},{key:"_debugLog",value:function(e){this.logDebugInformation&&ut.info(e)}}]),r}(ee.a);function ft(e){return e?JSON.stringify(e.toJSON()):"undefined"}function pt(e){switch(e){case 0:return"Waiting";case 1:return"Found";case 2:return"Exhausted"}}dt.DefaultMapCollectionPaths=["basemap.baseLayers","layers","ground.layers","basemap.referenceLayers"],Object(b.a)([Object(g.b)()],dt.prototype,"logDebugInformation",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],dt.prototype,"isSpatialReferenceDone",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],dt.prototype,"isTileInfoDone",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],dt.prototype,"isHeightModelInfoSearching",void 0),Object(b.a)([Object(g.b)({constructOnly:!0})],dt.prototype,"view",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],dt.prototype,"spatialReference",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],dt.prototype,"extent",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],dt.prototype,"heightModelInfo",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],dt.prototype,"vcsWkid",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],dt.prototype,"latestVcsWkid",void 0),Object(b.a)([Object(g.b)()],dt.prototype,"mapCollectionPaths",void 0),Object(b.a)([Object(g.b)()],dt.prototype,"defaultSpatialReference",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],dt.prototype,"tileInfo",void 0);var ht,bt=dt=ct=Object(b.a)([Object(O.a)("esri.views.support.DefaultsFromMap")],dt),vt=m.a.getLogger("esri.views.View"),yt=ht=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e))._userSpatialReference=null,r._cursor=null,r.allLayerViews=new k.a({root:Object(l.a)(r),rootCollectionNames:["basemapView.baseLayerViews","groundView?.layerViews","layerViews","basemapView.referenceLayerViews"],getChildrenFunction:function(e){return e.layerViews}}),r.animation=null,r.basemapView=null,r.defaultsFromMap=new bt({view:Object(l.a)(r)}),r.fatalError=null,r.extent=null,r.graphics=new le.b,r.navigating=!1,r.layerViews=new w.a,r.magnifier=new me,r.padding={left:0,top:0,right:0,bottom:0},r.ready=!1,r.spatialReferenceWarningDelay=1e3,r.supportsGround=!0,r.timeExtent=null,r.type=null,r.scale=null,r.updating=!1,r.initialExtentRequired=!0,r.renderContext=null,r.input=new Ze,r.navigation=new tt,r.layerViewManager=null,r.refreshManager=null,r.isHeightModelInfoRequired=!1,r.width=null,r.height=null,r.resizing=!1,r.suspended=!1,r.viewEvents=new Ee(Object(l.a)(r)),r.persistableViewModels=new w.a,r._isValid=!1,r._readyCycleForced=!1,r.handles.add(r.watch("preconditionsReady",(function(e){e?(r._currentSpatialReference=r.spatialReference,ht.views.add(Object(l.a)(r))):(r._currentSpatialReference=null,ht.views.remove(Object(l.a)(r))),r.notifyChange("spatialReference"),!e&&r.ready?(r.layerViewManager.clear(),r.toolViewManager.detach(),r._teardown()):e&&!r.ready&&(r._startup(),r.toolViewManager.attach())}),!0)),r}return Object(c.a)(n,[{key:"initialize",value:function(){var e,t=this;this.addResolvingPromise(this.validate().then((function(){return t._isValid=!0,Object(x.j)(t,"ready")}))),this.basemapView=new ue({view:this}),this.layerViewManager=new ve({view:this,layerViewImporter:{importLayerView:function(e){return t.importLayerView(e)},hasLayerViewModule:function(e){return t.hasLayerViewModule(e)}},supportsGround:this.supportsGround}),this.refreshManager=new je({view:this}),this.toolViewManager=new Ue({view:this}),this.analysisManager=new Ge({viewFactory:function(e){return t.createAnalysisView(e)},controllerFactory:function(e){return t.createAnalysisController(e)}}),this._resetInitialViewPropertiesFromContent(),Object(x.a)(this.defaultsFromMap,"isSpatialReferenceDone",(function(n){var r=!!(t.map&&t.map.allLayers.length>0);if(n&&!t.spatialReference&&r||!e){if(n&&!t.spatialReference&&r&&!e){var i=e=Object(U.a)(t.spatialReferenceWarningDelay);e.then((function(){i===e&&vt.warn("#spatialReference","no spatial reference could be derived from the currently added map layers")})).catch((function(){}))}}else e=null}),!0)}},{key:"destroy",value:function(){if(!this.destroyed){this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics.destroy(),this.graphics=null,this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),this.toolViewManager.destroy(),this.toolViewManager=null,this.refreshManager.destroy(),this.refreshManager=null,this.layerViewManager.destroy(),this.layerViewManager=null,this.basemapView.destroy(),this.basemapView=null,this.invalidate(),this._emitter.clear(),this.handles.removeAll();var e=this.map;this.map=null,null==e||e.destroy()}}},{key:"_startup",value:function(){this._set("ready",!0)}},{key:"_teardown",value:function(){this._set("ready",!1)}},{key:"whenReady",value:function(){return Promise.resolve(this)}},{key:"toMap",value:function(){return vt.error("#toMap()","Not implemented on this instance of View"),null}},{key:"heightModelInfo",get:function(){return this.getDefaultHeightModelInfo()}},{key:"interacting",get:function(){return this.navigating}},{key:"preconditionsReady",get:function(){return!!(!this.fatalError&&this._isValid&&!this._readyCycleForced&&this.map&&(!ie.a.isLoadable(this.map)||this.map.loaded)&&0!==this.width&&0!==this.height&&this.spatialReference&&this.isSpatialReferenceSupported(this.spatialReference)&&(this._currentSpatialReference||!this.initialExtentRequired||this.initialExtent||this.defaultsFromMap&&this.defaultsFromMap.isSpatialReferenceDone)&&this.defaultsFromMap&&this.defaultsFromMap.isTileInfoDone)}},{key:"map",set:function(e){var t;e!==this._get("map")&&(null!=(t=e)&&t.destroyed&&(vt.warn("#map","The provided map is already destroyed",{map:e}),e=null),ie.a.isLoadable(e)&&e.load().catch((function(){})),this.initialized&&(this.forceReadyCycle(),this._resetInitialViewPropertiesFromContent()),this._set("map",e))}},{key:"spatialReference",get:function(){var e=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return e&&this.isHeightModelInfoRequired&&this.defaultsFromMap&&((e=e.clone()).vcsWkid=this.defaultsFromMap.vcsWkid,e.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),e},set:function(e){this._userSpatialReference=e,this._set("spatialReference",e)}},{key:"stationary",get:function(){return!this.animation&&!this.navigating&&!this.resizing}},{key:"initialExtent",get:function(){return this.defaultsFromMap&&this.defaultsFromMap.extent}},{key:"cursor",get:function(){var e=this.toolViewManager?this.toolViewManager.cursor:null;return Object(y.k)(e)?e:this._cursor||"default"},set:function(e){this._cursor=e,this.notifyChange("cursor")}},{key:"size",get:function(){return[this.width,this.height]}},{key:"whenLayerView",value:function(e){return this.layerViewManager.whenLayerView(e)}},{key:"getAnalysisView",value:function(e){return this.analysisManager.getAnalysisView(e)}},{key:"whenAnalysisView",value:function(e){return this.analysisManager.whenAnalysisView(e)}},{key:"getDefaultSpatialReference",value:function(){return this.get("defaultsFromMap.spatialReference")}},{key:"getDefaultHeightModelInfo",value:function(){return this.get("map.supportsHeightModelInfo")&&this.get("map.heightModelInfo")||this.get("defaultsFromMap.heightModelInfo")||null}},{key:"importLayerView",value:function(e){throw new j.a("importLayerView() not implemented")}},{key:"hasLayerViewModule",value:function(e){return!1}},{key:"createAnalysisView",value:function(){var e=Object(h.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new j.a("createAnalysisView() not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"createAnalysisController",value:function(){var e=Object(h.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new j.a("createAnalysisController() not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"validate",value:function(){var e=Object(h.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"invalidate",value:function(){this._isValid=!1}},{key:"isSpatialReferenceSupported",value:function(e,t,n){return!0}},{key:"isTileInfoRequired",value:function(){return!1}},{key:"when",value:function(e,t){return this.isResolved()&&!this.ready&&vt.warn("#when()",'Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use watchUtils.whenOnce(view, "ready").then(...) instead.'),Object(u.a)(Object(d.a)(n.prototype),"when",this).call(this,e,t)}},{key:"forceReadyCycle",value:function(){var e=this;this.ready&&(this._readyCycleForced=!0,Object(x.g)(this,"preconditionsReady",(function(){return e._readyCycleForced=!1})))}},{key:"createTool",value:function(e,t,n){return this.toolViewManager.createTool(e,t,n)}},{key:"tryFatalErrorRecovery",value:function(){this.fatalError=null}},{key:"_resetInitialViewPropertiesFromContent",value:function(){var e=this;if(this.defaultsFromMap){var t=function(){return e.defaultsFromMap&&e.defaultsFromMap.start()};this.defaultsFromMap.reset(),this._currentSpatialReference=null,this.notifyChange("spatialReference"),this.handles.remove("defaultsFromMap"),this.handles.add([Object(x.d)(this,"spatialReference",(function(e,n){Object(te.c)(e,n)||t()})),Object(x.d)(this,"initialExtentRequired",t),Object(Q.b)(t)],"defaultsFromMap")}}}]),n}(Object(ce.b)(ne.a.EventedMixin(Object(re.b)(ee.a))));yt.views=new w.a,Object(b.a)([Object(X.a)("toolViewManager.activeTool")],yt.prototype,"activeTool",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],yt.prototype,"allLayerViews",void 0),Object(b.a)([Object(g.b)()],yt.prototype,"animation",void 0),Object(b.a)([Object(g.b)()],yt.prototype,"basemapView",void 0),Object(b.a)([Object(g.b)()],yt.prototype,"defaultsFromMap",void 0),Object(b.a)([Object(g.b)()],yt.prototype,"fatalError",void 0),Object(b.a)([Object(g.b)({type:H.a})],yt.prototype,"extent",void 0),Object(b.a)([Object(g.b)(Object(le.c)())],yt.prototype,"graphics",void 0),Object(b.a)([Object(g.b)({readOnly:!0,type:se.a,dependsOn:["map.heightModelInfo?","defaultsFromMap.heightModelInfo"]})],yt.prototype,"heightModelInfo",null),Object(b.a)([Object(g.b)({readOnly:!0})],yt.prototype,"interacting",null),Object(b.a)([Object(g.b)({readOnly:!0})],yt.prototype,"navigating",void 0),Object(b.a)([Object(g.b)({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","initialExtentRequired","initialExtent","defaultsFromMap.isSpatialReferenceDone","defaultsFromMap.isTileInfoDone"]})],yt.prototype,"preconditionsReady",null),Object(b.a)([Object(g.b)({type:w.a,readOnly:!0})],yt.prototype,"layerViews",void 0),Object(b.a)([Object(g.b)({type:me})],yt.prototype,"magnifier",void 0),Object(b.a)([Object(g.b)({value:null,type:ae.a})],yt.prototype,"map",null),Object(b.a)([Object(g.b)()],yt.prototype,"padding",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],yt.prototype,"ready",void 0),Object(b.a)([Object(g.b)({type:B.a})],yt.prototype,"spatialReference",null),Object(b.a)([Object(g.b)()],yt.prototype,"spatialReferenceWarningDelay",void 0),Object(b.a)([Object(g.b)()],yt.prototype,"stationary",null),Object(b.a)([Object(g.b)({readOnly:!0})],yt.prototype,"supportsGround",void 0),Object(b.a)([Object(g.b)({type:oe.a})],yt.prototype,"timeExtent",void 0),Object(b.a)([Object(X.a)("toolViewManager.tools")],yt.prototype,"tools",void 0),Object(b.a)([Object(g.b)()],yt.prototype,"toolViewManager",void 0),Object(b.a)([Object(X.a)("analysisManager.analyses")],yt.prototype,"analyses",void 0),Object(b.a)([Object(g.b)()],yt.prototype,"analysisManager",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],yt.prototype,"type",void 0),Object(b.a)([Object(g.b)({type:Number})],yt.prototype,"scale",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],yt.prototype,"updating",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],yt.prototype,"initialExtentRequired",void 0),Object(b.a)([Object(g.b)({readOnly:!0,type:H.a})],yt.prototype,"initialExtent",null),Object(b.a)([Object(g.b)()],yt.prototype,"cursor",null),Object(b.a)([Object(g.b)()],yt.prototype,"renderContext",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],yt.prototype,"input",void 0),Object(b.a)([Object(g.b)({type:tt,nonNullable:!0})],yt.prototype,"navigation",void 0),Object(b.a)([Object(g.b)()],yt.prototype,"layerViewManager",void 0),Object(b.a)([Object(g.b)()],yt.prototype,"width",void 0),Object(b.a)([Object(g.b)()],yt.prototype,"height",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],yt.prototype,"resizing",void 0),Object(b.a)([Object(g.b)({value:null,readOnly:!0})],yt.prototype,"size",null),Object(b.a)([Object(g.b)({readOnly:!0})],yt.prototype,"suspended",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],yt.prototype,"viewEvents",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],yt.prototype,"persistableViewModels",void 0),Object(b.a)([Object(g.b)()],yt.prototype,"_isValid",void 0),Object(b.a)([Object(g.b)()],yt.prototype,"_readyCycleForced",void 0),Object(b.a)([Object(g.b)()],yt.prototype,"_currentSpatialReference",void 0);var mt=yt=ht=Object(b.a)([Object(O.a)("esri.views.View")],yt),gt=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state="running",r.target=null,r}return Object(c.a)(n,[{key:"initialize",value:function(){var e=this;this.addResolvingPromise(new Promise((function(t,n){return e._dfd={resolve:t,reject:n}})))}},{key:"done",get:function(){return"finished"===this.state||"stopped"===this.state}},{key:"stop",value:function(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","stopped"),this._dfd.reject(new j.a("ViewAnimation stopped")))}},{key:"finish",value:function(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","finished"),this._dfd.resolve())}},{key:"update",value:function(e,t){t||(t=Object(U.o)(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}}]),n}(re.a);Object(b.a)([Object(g.b)({readOnly:!0})],gt.prototype,"done",null),Object(b.a)([Object(g.b)({readOnly:!0,type:String})],gt.prototype,"state",void 0),Object(b.a)([Object(g.b)()],gt.prototype,"target",void 0),gt=Object(b.a)([Object(O.a)("esri.views.ViewAnimation")],gt),(gt||(gt={})).State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"};var Ot=gt,jt=n(131),wt=n(373),_t=function(){function e(t,n,r,i){Object(s.a)(this,e);var a=t.targetGeometry,o=n.targetGeometry;i?"string"==typeof i&&(i=Object(wt.b)(i)||wt.a.ease):i=wt.a.ease,this.easing=i,this.duration=r,this.sCenterX=a.x,this.sCenterY=a.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=o.x,this.tCenterY=o.y,this.tScale=n.scale,this.tRotation=n.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}return Object(c.a)(e,[{key:"applyRatio",value:function(e,t){var n,r,i,a,o=this.easing(t);t>=1?(n=this.tCenterX,r=this.tCenterY,i=this.tRotation,a=this.tScale):(n=this.sCenterX+o*this.dCenterX,r=this.sCenterY+o*this.dCenterY,i=this.sRotation+o*this.dRotation,a=this.sScale+o*this.dScale),e.targetGeometry.x=n,e.targetGeometry.y=r,e.scale=a,e.rotation=i}}]),e}(),kt=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).duration=200,r.transition=null,r.easing=wt.a.ease,r.view=null,r.viewpoint=null,r.viewpoint=new $.a({targetGeometry:new q.a,scale:0,rotation:0}),r._updateTask=Object(Q.a)({postRender:r._postRender.bind(Object(l.a)(r))}),r._updateTask.pause(),r}return Object(c.a)(n,[{key:"destroy",value:function(){this._updateTask.remove(),this._updateTask=null}},{key:"animate",value:function(e,t,n){var r=this;this.stop();var i=this.viewpoint;Object(jt.d)(i,t),this.transition=new _t(this.viewpoint,e.target,n&&n.duration||this.duration,n&&n.easing||this.easing);var a=function(){r.animation===e&&r._updateTask&&("finished"===e.state&&(r.transition.applyRatio(r.viewpoint,1),r.view.state&&(r.view.state.viewpoint=r.viewpoint.clone())),r.animation=null,r.updateFunction=null)};return e.when(a,a),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}},{key:"animateContinous",value:function(e,t){var n=this;this.stop(),this.updateFunction=t,this.viewpoint=e;var r=new Ot({target:e.clone()}),i=function(){n.animation===r&&n._updateTask&&(n.animation=null,n.updateFunction=null)};return r.when(i,i),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}},{key:"stop",value:function(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}},{key:"_postRender",value:function(e){var t=this.animation;if(t&&t.state!==Ot.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{var n=(performance.now()-this._startTime)/this.transition.duration,r=n>=1;this.transition.applyRatio(this.viewpoint,n),r&&this.animation.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}}]),n}(ee.a);Object(b.a)([Object(g.b)()],kt.prototype,"animation",void 0),Object(b.a)([Object(g.b)()],kt.prototype,"duration",void 0),Object(b.a)([Object(g.b)()],kt.prototype,"transition",void 0),Object(b.a)([Object(g.b)()],kt.prototype,"easing",void 0),Object(b.a)([Object(g.b)()],kt.prototype,"view",void 0),Object(b.a)([Object(g.b)()],kt.prototype,"viewpoint",void 0);var xt=kt=Object(b.a)([Object(O.a)("esri.views.2d.AnimationManager")],kt),St=function(){function e(t){var n=this;Object(s.a)(this,e),this.view=t,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.updateEnabled=!0,this.animationInProgress=!1,this.prepare=function(){n._updateParameters.state=n.view.state,n._updateParameters.stationary=n.view.stationary,n._updateParameters.pixelRatio=window.devicePixelRatio,n._updateParameters.renderingOptions=n.view.renderingOptions},this.update=function(){if(n._updateRequested=!1,n.updateEnabled){var e=n.view,t=e.basemapView,r=e.graphicsView,i=e.labelManager,a=e.layerViews,o=e.state.id;t.baseLayerViews.forEach(n._updateLayerView,n),a.forEach(n._updateLayerView,n),t.referenceLayerViews.forEach(n._updateLayerView,n),Object(y.k)(i)&&(i.lastUpdateId!==o&&(i.viewChange(),i.lastUpdateId=o),i.updateRequested&&i.processUpdate(n._updateParameters)),Object(y.k)(r)&&(r.lastUpdateId!==o&&(r.viewChange(),r.lastUpdateId=o),r.updateRequested&&r.processUpdate(n._updateParameters)),n.animationInProgress||n._updateRequested||n._frameTaskHandle.pause()}}}return Object(c.a)(e,[{key:"destroy",value:function(){this.stop()}},{key:"start",value:function(){var e=this;this.stationary=this.view.stationary,this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions},this._stationaryHandle=this.view.watch("stationary",(function(t){e.stationary=t,e.requestFrame()})),this._frameTaskHandle=Object(Q.a)(this)}},{key:"stop",value:function(){this._frameTaskHandle&&(this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}},{key:"requestUpdate",value:function(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}},{key:"requestFrame",value:function(){this._frameTaskHandle&&this._frameTaskHandle.resume()}},{key:"_updateLayerView",value:function(e){var t=this.view.state,n=e.lastUpdateId;null!=n&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),n!==t.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=t.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews.forEach(this._updateLayerView,this)}}]),e}();function Tt(){return Promise.all([n.e(28).then(n.bind(null,1342)),Promise.all([n.e(1),n.e(2),n.e(3),n.e(4),n.e(21)]).then(n.bind(null,1436))])}var Et=function(){return Tt().then((function(){return Promise.all([n.e(1),n.e(2),n.e(25),n.e(217)]).then(n.bind(null,1458))}))},Ct=function(){return Tt().then((function(){return Promise.all([n.e(1),n.e(3),n.e(4),n.e(17)]).then(n.bind(null,1328))}))},Pt={"base-dynamic":function(){return Tt().then((function(){return Promise.all([n.e(1),n.e(2),n.e(27),n.e(214)]).then(n.bind(null,1391))}))},"base-tile":Et,"bing-maps":Et,csv:Ct,"geo-rss":function(){return Tt().then((function(){return Promise.all([n.e(1),n.e(2),n.e(3),n.e(4),n.e(45)]).then(n.bind(null,1392))}))},feature:Ct,geojson:Ct,graphics:function(){return Tt().then((function(){return Promise.all([n.e(1),n.e(2),n.e(3),n.e(4),n.e(46)]).then(n.bind(null,1393))}))},group:function(){return Tt().then((function(){return Promise.all([n.e(1),n.e(2),n.e(101)]).then(n.bind(null,1454))}))},imagery:function(){return Tt().then((function(){return Promise.all([n.e(1),n.e(2),n.e(3),n.e(4),n.e(42)]).then(n.bind(null,1450))}))},"imagery-tile":function(){return Tt().then((function(){return Promise.all([n.e(1),n.e(2),n.e(10),n.e(26)]).then(n.bind(null,1447))}))},kml:function(){return Tt().then((function(){return Promise.all([n.e(1),n.e(2),n.e(3),n.e(4),n.e(43)]).then(n.bind(null,1394))}))},"map-image":function(){return Tt().then((function(){return Promise.all([n.e(1),n.e(2),n.e(3),n.e(4),n.e(44)]).then(n.bind(null,1455))}))},"map-notes":function(){return Tt().then((function(){return Promise.all([n.e(1),n.e(2),n.e(3),n.e(4),n.e(47)]).then(n.bind(null,1395))}))},"ogc-feature":function(){return Tt().then((function(){return Promise.all([n.e(1),n.e(3),n.e(4),n.e(17),n.e(215)]).then(n.bind(null,1459))}))},"open-street-map":Et,route:function(){return Tt().then((function(){return Promise.all([n.e(1),n.e(2),n.e(3),n.e(4),n.e(48)]).then(n.bind(null,1396))}))},stream:function(){return Tt().then((function(){return Promise.all([n.e(1),n.e(3),n.e(4),n.e(17),n.e(216)]).then(n.bind(null,1397))}))},tile:Et,"vector-tile":function(){return Tt().then((function(){return Promise.all([n.e(1),n.e(2),n.e(65)]).then(n.bind(null,1441))}))},wcs:function(){return Tt().then((function(){return Promise.all([n.e(1),n.e(2),n.e(10),n.e(26)]).then(n.bind(null,1447))}))},"web-tile":Et,wms:function(){return Tt().then((function(){return Promise.all([n.e(1),n.e(2),n.e(27),n.e(129)]).then(n.bind(null,1460))}))},wmts:function(){return Tt().then((function(){return Promise.all([n.e(1),n.e(2),n.e(25),n.e(218)]).then(n.bind(null,1398))}))},"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,scene:null,unknown:null,unsupported:null};var It,Mt=function(e){return Object(y.k)(Pt[e.type])},At=function(e){var t=Pt[e.type];if(!Object(y.k)(t))throw function(e){var t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",n=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new j.a("".concat(n,":view-not-supported"),"".concat(t," is not supported in 2D"))}(e);return t(e)},Rt=n(118),Lt=n(302),Ft=n(153),Dt=n(141),Nt=n(156),Vt=n(33);var zt,Ut=m.a.getLogger("esri.views.MapView"),Bt=It=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).geometry=null,r.spatialReference=null,r}return Object(c.a)(n,[{key:"normalizedGeometry",get:function(){return this.geometry&&this.spatialReference?this.spatialReference.equals(this.geometry.spatialReference)?this.geometry:Object(G.a)(this.geometry,this.spatialReference)?Object(G.d)(this.geometry,this.spatialReference):Object(Dt.g)()?Object(Dt.j)(this.geometry,this.spatialReference):(Ut.error("#constraints.geometry","unsupported coordinate system. The source geometry cannot be projected to the view's coordinate system. The projection engine cannot be loaded.",{geometry:this.geometry}),null):null}},{key:"constrain",value:function(e,t){if(!this.normalizedGeometry)return e;var n=e.targetGeometry;if("extent"===this.normalizedGeometry.type?Object(Ft.e)(this.normalizedGeometry,n):Object(Ft.g)(this.normalizedGeometry,n))return e;var r=function(e,t){var n,r=t.spatialReference,i=[t.x,t.y],a=Number.POSITIVE_INFINITY,o=0,s=0,c=[0,0],l="extent"===e.type?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings,u=Object(Y.a)(l);try{for(u.s();!(n=u.n()).done;)for(var d=n.value,f=0;f<d.length-1;f++){Object(Nt.h)(c,i,d,f);var p=Object(Vt.i)(i,c);p<a&&(a=p,o=c[0],s=c[1])}}catch(h){u.e(h)}finally{u.f()}return{coordinate:new q.a({x:o,y:s,spatialReference:r}),distance:a}}(this.normalizedGeometry,n).coordinate;return r?(e.targetGeometry=r,e):e}},{key:"clone",value:function(){var e,t;return new It({geometry:null==(e=this.geometry)?void 0:e.clone(),spatialReference:null==(t=this.spatialReference)?void 0:t.clone()})}}]),n}(ee.a);Object(b.a)([Object(g.b)({constructOnly:!0})],Bt.prototype,"geometry",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],Bt.prototype,"normalizedGeometry",null),Object(b.a)([Object(g.b)({constructOnly:!0})],Bt.prototype,"spatialReference",void 0),Bt=It=Object(b.a)([Object(O.a)("esri.views.2d.constraints.GeometryConstraint")],Bt);var Gt=zt=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.apply(this,arguments)).enabled=!0,e.rotationEnabled=!0,e}return Object(c.a)(n,[{key:"constrain",value:function(e,t){return this.enabled&&t?(this.rotationEnabled||(e.rotation=t.rotation),e):e}},{key:"clone",value:function(){return new zt({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}}]),n}(ee.a);Object(b.a)([Object(g.b)()],Gt.prototype,"enabled",void 0),Object(b.a)([Object(g.b)()],Gt.prototype,"rotationEnabled",void 0);var qt,Ht=Gt=zt=Object(b.a)([Object(O.a)("esri.views.2d.constraints.RotationConstraint")],Gt),Wt=qt=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e))._lodByScale={},r._scales=[],r.effectiveLODs=null,r.effectiveMinZoom=-1,r.effectiveMaxZoom=-1,r.effectiveMinScale=0,r.effectiveMaxScale=0,r.lods=null,r.minZoom=-1,r.maxZoom=-1,r.minScale=0,r.maxScale=0,r.snapToZoom=!0,r}return Object(c.a)(n,[{key:"initialize",value:function(){var e,t,n,r=this,i=this.lods,a=this.minScale,o=this.maxScale,s=this.minZoom,c=this.maxZoom,l=-1,u=-1,d=!1,f=!1;if(0!==a&&0!==o&&a<o&&(a=(e=[o,a])[0],o=e[1]),!i||!i.length)return this._set("effectiveMinScale",a),void this._set("effectiveMaxScale",o);(i=i.map((function(e){return e.clone()}))).sort((function(e,t){return t.scale-e.scale})),i.forEach((function(e,t){return e.level=t}));var p,h=Object(Y.a)(i);try{for(h.s();!(p=h.n()).done;){var b=p.value;!d&&a>0&&a>=b.scale&&(l=b.level,d=!0),!f&&o>0&&o>=b.scale&&(u=n?n.level:-1,f=!0),n=b}}catch(v){h.e(v)}finally{h.f()}-1===s&&(s=0===a?0:l),-1===c&&(c=0===o?i.length-1:u),s=Math.max(s,0),s=Math.min(s,i.length-1),c=Math.max(c,0),s>(c=Math.min(c,i.length-1))&&(s=(t=[c,s])[0],c=t[1]),a=i[s].scale,o=i[c].scale,i.splice(0,s),i.splice(c-s+1,i.length),i.forEach((function(e,t){r._lodByScale[e.scale]=e,r._scales[t]=e.scale})),this._set("effectiveLODs",i),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",c),this._set("effectiveMinScale",a),this._set("effectiveMaxScale",o)}},{key:"constrain",value:function(e,t){if(t&&e.scale===t.scale)return e;var n=this.effectiveMinScale,r=this.effectiveMaxScale,i=e.targetGeometry,a=t&&t.targetGeometry,o=0!==r&&e.scale<r,s=0!==n&&e.scale>n;if(o||s){var c=s?n:r;if(a){var l=(c-t.scale)/(e.scale-t.scale);i.x=a.x+(i.x-a.x)*l,i.y=a.y+(i.y-a.y)*l}e.scale=c}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}},{key:"fit",value:function(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);var t=this.scaleToZoom(e.scale),n=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(n>.99?Math.round(t):Math.floor(t)),e}},{key:"zoomToScale",value:function(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);var t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];var n=Math.round(e-.5),r=Math.round(e);return t[r]+(r-e)*(t[n]-t[r])}},{key:"scaleToZoom",value:function(e){if(!this.effectiveLODs)return-1;var t,n,r=this._scales;if(e>=r[0])return this.effectiveMinZoom;if(e<=r[r.length-1])return this.effectiveMaxZoom;for(var i=0;i<r.length-1;i++){if(t=r[i],(n=r[i+1])===e)return i+this.effectiveMinZoom+1;if(t>e&&n<e)return i+this.effectiveMinZoom+1-(e-n)/(t-n)}}},{key:"snapToClosestScale",value:function(e){if(!this.effectiveLODs)return e;var t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}},{key:"snapToNextScale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;if(!this.effectiveLODs)return e*t;var n=Math.round(this.scaleToZoom(e));return this.zoomToScale(n+1)}},{key:"snapToPreviousScale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!this.effectiveLODs)return e*t;var n=Math.round(this.scaleToZoom(e));return this.zoomToScale(n-1)}},{key:"clone",value:function(){return new qt({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}},{key:"_getClosestScale",value:function(e){return this._lodByScale[e]||(e=this._scales.reduce((function(t,n){return Math.abs(n-e)<=Math.abs(t-e)?n:t}),this._scales[0])),this._lodByScale[e].scale}}]),n}(ee.a);Object(b.a)([Object(g.b)({readOnly:!0})],Wt.prototype,"effectiveLODs",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],Wt.prototype,"effectiveMinZoom",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],Wt.prototype,"effectiveMaxZoom",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],Wt.prototype,"effectiveMinScale",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],Wt.prototype,"effectiveMaxScale",void 0),Object(b.a)([Object(g.b)({type:[Lt.a]})],Wt.prototype,"lods",void 0),Object(b.a)([Object(g.b)()],Wt.prototype,"minZoom",void 0),Object(b.a)([Object(g.b)()],Wt.prototype,"maxZoom",void 0),Object(b.a)([Object(g.b)()],Wt.prototype,"minScale",void 0),Object(b.a)([Object(g.b)()],Wt.prototype,"maxScale",void 0),Object(b.a)([Object(g.b)()],Wt.prototype,"snapToZoom",void 0);var $t=Wt=qt=Object(b.a)([Object(O.a)("esri.views.2d.constraints.ZoomConstraint")],Wt),Jt={base:null,key:"type",typeMap:{extent:H.a,polygon:Rt.a}},Yt=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.apply(this,arguments)).lods=null,e.minScale=0,e.maxScale=0,e.minZoom=-1,e.maxZoom=-1,e.rotationEnabled=!0,e.snapToZoom=!0,e}return Object(c.a)(n,[{key:"initialize",value:function(){this.watch(["_zoom","_rotation"],this.emit.bind(this,"update"),!0)}},{key:"destroy",value:function(){this.view=null,this._set("_zoom",null),this._set("_rotation",null)}},{key:"geometry",set:function(e){e?this._set("geometry",e):this._set("geometry",null)}},{key:"_defaultLODs",get:function(){var e=this.get("view.defaultsFromMap.tileInfo"),t=this.get("view.spatialReference");return e&&t&&e.spatialReference.equals(t)?e.lods:null}},{key:"_geometry",get:function(){return new Bt({geometry:this.geometry,spatialReference:this.view.spatialReference})}},{key:"_rotation",get:function(){return new Ht({rotationEnabled:this.rotationEnabled})}},{key:"_zoom",get:function(){return new $t({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})}},{key:"canZoomInTo",value:function(e){var t=this.effectiveMaxScale;return 0===t||e>=t}},{key:"canZoomOutTo",value:function(e){var t=this.effectiveMinScale;return 0===t||e<=t}},{key:"constrain",value:function(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),e}},{key:"constrainByGeometry",value:function(e){return this._geometry.constrain(e)}},{key:"fit",value:function(e){return this._zoom.fit(e)}},{key:"zoomToScale",value:function(e){return this._zoom.zoomToScale(e)}},{key:"scaleToZoom",value:function(e){return this._zoom.scaleToZoom(e)}},{key:"snapScale",value:function(e){return this._zoom.snapToClosestScale(e)}},{key:"snapToNextScale",value:function(e){return this._zoom.snapToNextScale(e)}},{key:"snapToPreviousScale",value:function(e){return this._zoom.snapToPreviousScale(e)}}]),n}(ne.a.EventedAccessor);Object(b.a)([Object(g.b)({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],Yt.prototype,"effectiveLODs",void 0),Object(b.a)([Object(g.b)({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],Yt.prototype,"effectiveMinScale",void 0),Object(b.a)([Object(g.b)({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],Yt.prototype,"effectiveMaxScale",void 0),Object(b.a)([Object(g.b)({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],Yt.prototype,"effectiveMinZoom",void 0),Object(b.a)([Object(g.b)({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],Yt.prototype,"effectiveMaxZoom",void 0),Object(b.a)([Object(g.b)({types:Jt,value:null})],Yt.prototype,"geometry",null),Object(b.a)([Object(g.b)({type:[Lt.a]})],Yt.prototype,"lods",void 0),Object(b.a)([Object(g.b)()],Yt.prototype,"minScale",void 0),Object(b.a)([Object(g.b)()],Yt.prototype,"maxScale",void 0),Object(b.a)([Object(g.b)()],Yt.prototype,"minZoom",void 0),Object(b.a)([Object(g.b)()],Yt.prototype,"maxZoom",void 0),Object(b.a)([Object(g.b)()],Yt.prototype,"rotationEnabled",void 0),Object(b.a)([Object(g.b)()],Yt.prototype,"snapToZoom",void 0),Object(b.a)([Object(g.b)()],Yt.prototype,"view",void 0),Object(b.a)([Object(g.b)()],Yt.prototype,"_defaultLODs",null),Object(b.a)([Object(g.b)({type:Bt})],Yt.prototype,"_geometry",null),Object(b.a)([Object(g.b)({type:Ht})],Yt.prototype,"_rotation",null),Object(b.a)([Object(g.b)({readOnly:!0,type:$t})],Yt.prototype,"_zoom",null);var Kt,Zt=Yt=Object(b.a)([Object(O.a)("esri.views.2d.MapViewConstraints")],Yt),Xt=n(60),Qt=n(64),en=n(158),tn=n(110),nn=n(211),rn=n(429),an=n(295),on=n(561);function sn(e){return(t=e)instanceof Float32Array&&t.length>=2||function(e){return Array.isArray(e)&&e.length>=2}(e);var t}var cn=[0,0],ln=Kt=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._viewpoint2D={center:Object(Xt.a)(),rotation:0,scale:0,spatialReference:null},e.center=[0,0],e.extent=new H.a,e.id=0,e.inverseTransform=Object(nn.b)(),e.resolution=0,e.rotation=0,e.scale=0,e.transform=Object(nn.b)(),e.transformNoRotation=Object(nn.b)(),e.displayMat3=Object(an.b)(),e.displayViewMat3=Object(an.b)(),e.viewMat3=Object(an.b)(),e.viewMat2d=Object(rn.a)(),e.worldScreenWidth=0,e.size=[0,0],e}return Object(c.a)(n,[{key:"pixelRatio",set:function(e){this._set("pixelRatio",e),this._update()}},{key:"size",set:function(e){this._set("size",e),this._update()}},{key:"viewpoint",set:function(e){if(e){var t=this._viewpoint2D,n=e.targetGeometry;t.center[0]=n.x,t.center[1]=n.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=n.spatialReference}this._update()}},{key:"copy",value:function(e){var t=this.size,n=this.viewpoint;return n&&t?(this.viewpoint=Object(jt.d)(n,e.viewpoint),this._set("size",Object(Vt.c)(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}},{key:"clone",value:function(){return new Kt({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}},{key:"toMap",value:function(e,t,n){return sn(t)?Object(Vt.s)(e,t,this.inverseTransform):(cn[0]=t,cn[1]=n,Object(Vt.s)(e,cn,this.inverseTransform))}},{key:"toScreen",value:function(e,t,n){return sn(t)?Object(Vt.s)(e,t,this.transform):(cn[0]=t,cn[1]=n,Object(Vt.s)(e,cn,this.transform))}},{key:"toScreenNoRotation",value:function(e,t,n){return sn(t)?Object(Vt.s)(e,t,this.transformNoRotation):(cn[0]=t,cn[1]=n,Object(Vt.s)(e,cn,this.transformNoRotation))}},{key:"getScreenTransform",value:function(e,t){var n=this._viewpoint2D.center,r=this._get("pixelRatio")||1,i=this._get("size");return Object(jt.i)(e,n,i,t,0,r),e}},{key:"_update",value:function(){var e=this._viewpoint2D,t=e.center,n=e.spatialReference,r=e.scale,i=e.rotation,a=this._get("pixelRatio")||1,o=this._get("size"),s=new $.a({targetGeometry:new q.a(t[0],t[1],n),scale:r,rotation:i});if(this._set("viewpoint",s),o&&n&&r){this.resolution=Object(jt.k)(s),this.rotation=i,this.scale=r,this.spatialReference=n,Object(Vt.c)(this.center,t);var c=0!==o[0]?2/o[0]:0,l=0!==o[1]?-2/o[1]:0;Object(en.j)(this.displayMat3,c,0,0,0,l,0,-1,1,1);var u=Object(en.e)(this.viewMat3),d=Object(on.b)(o[0]/2,o[1]/2),f=Object(on.b)(-o[0]/2,-o[1]/2),p=Object(Qt.d)(i);Object(en.a)(u,u,d),Object(en.i)(u,u,p),Object(en.a)(u,u,f),Object(en.g)(this.displayViewMat3,this.displayMat3,u);var h=Object(tn.d)(this.viewMat2d);return Object(tn.h)(h,h,d),Object(tn.f)(h,h,p),Object(tn.h)(h,h,f),Object(jt.h)(this.extent,s,o),Object(jt.l)(this.transform,s,o,a),Object(tn.a)(this.inverseTransform,this.transform),Object(jt.m)(this.transformNoRotation,s,o,a),this.worldScreenWidth=Object(jt.n)(this.spatialReference,this.resolution),this._set("id",this.id+1),this}}}]),n}(T.a);Object(b.a)([Object(g.b)({readOnly:!0})],ln.prototype,"id",void 0),Object(b.a)([Object(g.b)({value:1,json:{write:!0}})],ln.prototype,"pixelRatio",null),Object(b.a)([Object(g.b)({json:{write:!0}})],ln.prototype,"size",null),Object(b.a)([Object(g.b)({type:$.a,json:{write:!0}})],ln.prototype,"viewpoint",null);var un=ln=Kt=Object(b.a)([Object(O.a)("esri.views.2d.ViewState")],ln),dn=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.apply(this,arguments)).left=0,e.top=0,e.right=0,e.bottom=0,e}return n}(ee.a);Object(b.a)([Object(g.b)()],dn.prototype,"left",void 0),Object(b.a)([Object(g.b)()],dn.prototype,"top",void 0),Object(b.a)([Object(g.b)()],dn.prototype,"right",void 0),Object(b.a)([Object(g.b)()],dn.prototype,"bottom",void 0),dn=Object(b.a)([Object(O.a)("esri.views.2d.PaddedViewState.Padding")],dn);var fn=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).paddedViewState=new un,e._updateContent=function(){var t=Object(Xt.a)();return function(){var n=e._get("size"),r=e._get("padding");if(n&&r){var i=e.paddedViewState;Object(Vt.r)(t,r.left+r.right,r.top+r.bottom),Object(Vt.d)(t,n,t),Object(Vt.c)(i.size,t);var a=i.viewpoint;a&&(e.viewpoint=a)}}}(),e.watch(["size","padding"],e._updateContent,!0),e.padding=new dn,e.size=[0,0],e}return Object(c.a)(n,[{key:"padding",set:function(e){this._set("padding",e||new dn)}},{key:"viewpoint",set:function(e){if(e){var t=e.clone();this.paddedViewState.viewpoint=e,Object(jt.a)(t,e,this._get("size"),this._get("padding"));var n=this._viewpoint2D,r=t.targetGeometry;n.center[0]=r.x,n.center[1]=r.y,n.rotation=t.rotation,n.scale=t.scale,n.spatialReference=r.spatialReference,this._update()}}}]),n}(un);Object(b.a)([Object(g.b)()],fn.prototype,"paddedViewState",void 0),Object(b.a)([Object(g.b)({type:dn})],fn.prototype,"padding",null),Object(b.a)([Object(g.b)()],fn.prototype,"viewpoint",null);var pn=fn=Object(b.a)([Object(O.a)("esri.views.2d.PaddedViewState")],fn),hn=(n(793),n(601)),bn=(n(791),n(792),n(585)),vn=m.a.getLogger("esri.views.MapView");function yn(e){return e&&"esri.Viewpoint"===e.declaredClass}var mn=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;Object(s.a)(this,n),(r=t.call(this,e))._stationaryTimer=null,r.frameTask=new St(Object(l.a)(r)),r.featuresTilingScheme=null,r.fullOpacity=1,r.graphicsView=null,r.initialExtent=null,r.labelManager=null,r.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},r.resizeAlign="center",r.supportsGround=!1,r.timeline=new bn.a,r.type="2d",r.constraints=new Zt,r.padding={top:0,right:0,bottom:0,left:0};var i=r.handles,a=function(){return r.notifyChange("updating")};return i.add([r.watch("viewpoint",(function(){r._lastStationaryEventTimestamp=performance.now(),r._flipStationary(160)}),!0),r.on("resize",(function(e){return r._resizeHandler(e)})),r.watch("animationManager.animation",(function(e){r.animation=e})),r.allLayerViews.on("change",(function(){a(),i.remove("map-view-base-layerViewsUpdating"),i.add(r.allLayerViews.map((function(e){return e.watch("updating",a)})),"map-view-base-layerViewsUpdating")}))],"map-view-base"),r}return Object(c.a)(n,[{key:"destroy",value:function(){this.destroyed||(this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null)}},{key:"animation",set:function(e){var t=this,n=this._get("animation");if(e!==n)if(n&&n.stop(),e&&!e.isFulfilled()){this._set("animation",e),this.frameTask.animationInProgress=!0;var r=function(){e===t._get("animation")&&(t._set("animation",null),t.frameTask.requestFrame()),t.frameTask.animationInProgress=!1};e.when(r,r)}else this._set("animation",null)}},{key:"center",get:function(){if(!this.ready)return this._get("center");var e=this.state.paddedViewState,t=e.center,n=e.spatialReference;return new q.a({x:t[0],y:t[1],spatialReference:n})},set:function(e){if(null!=e)if(this._normalizeInput(e)){if(!this.ready)return this._set("center",e),void this.notifyChange("initialExtentRequired");var t=this.viewpoint;Object(jt.c)(t,t,e),this.viewpoint=t}else vn.error("#center","incompatible spatialReference ".concat(JSON.stringify(e.spatialReference)," with view's spatialReference ").concat(JSON.stringify(this.spatialReference)))}},{key:"constraints",set:function(e){var t=this,n=this._get("constraints");n&&(this.handles.remove("map-view-base-constraints"),n.destroy()),this._set("constraints",e),e&&(e.view=this,this.ready&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint)),this.handles.add(e.on("update",(function(){t.ready&&t.state&&(t.state.viewpoint=e.fit(t.state.paddedViewState.viewpoint))})),"map-view-base-constraints"))}},{key:"extent",get:function(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")},set:function(e){if(null!=e){var t=this._normalizeInput(e);if(t)if(t.width&&t.height){if(!this.ready)return this._set("extent",t),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");var n=this.viewpoint;Object(jt.v)(n,n,t,this.size,{constraints:this.constraints}),this.viewpoint=n}else vn.error("#extent","invalid extent size");else vn.error("#center","incompatible spatialReference ".concat(JSON.stringify(e.spatialReference)," with view's spatialReference ").concat(JSON.stringify(this.spatialReference)))}}},{key:"initialExtentRequired",get:function(){var e=this.extent,t=this.center,n=this.scale,r=this.viewpoint,i=this.zoom;return!this.get("map.initialViewProperties.viewpoint")&&!e&&(!t||0===n&&-1===i)&&!r}},{key:"padding",get:function(){return this.ready?this.state.padding:this._get("padding")},set:function(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}},{key:"resolution",get:function(){return this.state?this.state.resolution:0}},{key:"rotation",get:function(){return this.ready?this.state.rotation:this._get("rotation")},set:function(e){if(!isNaN(e))if(this.ready){var t=this.viewpoint;Object(jt.s)(t,t,e),this.viewpoint=t}else this._set("rotation",e)}},{key:"scale",get:function(){return this.ready?this.state.scale:this._get("scale")},set:function(e){if(e&&!isNaN(e)){if(!this.ready){this._set("scale",e),this._set("zoom",-1);var t=this._get("extent");return t&&(this._set("extent",null),this._set("center",t.center)),void this.notifyChange("initialExtentRequired")}var n=this.viewpoint;Object(jt.u)(n,n,e),this.viewpoint=n}}},{key:"stationary",get:function(){return!(this.animation||this.navigating||this._get("resizing")||this._stationaryTimer)}},{key:"updating",get:function(){return!this.destroyed&&(!0===this.get("layerViewManager.updating")||!0===this.get("labelManager.updating")||!0===this.get("graphicsView.updating")||this.allLayerViews.some((function(e){return!e.destroyed&&!("layerViews"in e)&&!0===e.updating})))}},{key:"viewpoint",get:function(){if(!this.ready)return this._get("viewpoint");var e=this.state.paddedViewState;return e&&e.viewpoint.clone()},set:function(e){if(null!=e){var t=this._normalizeInput(e);if(t){if(!this.ready)return this._set("viewpoint",t),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");var n=new $.a({targetGeometry:new q.a,scale:0,rotation:0});Object(jt.d)(n,t),this.constraints.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this.frameTask.requestFrame(),this._set("viewpoint",n)}else!e.scale||isNaN(e.scale)?vn.error("#viewpoint","invalid scale value of ".concat(e.scale)):Object(y.j)(e.targetGeometry)?vn.error("#viewpoint","geometry not defined"):vn.error("#viewpoint","incompatible spatialReference ".concat(JSON.stringify(e.targetGeometry.spatialReference)," with view's spatialReference ").concat(JSON.stringify(this.spatialReference)))}}},{key:"zoom",get:function(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(e){if(null!=e){if(!this.ready){this.notifyChange("initialExtentRequired"),this._set("zoom",e),this._set("scale",0);var t=this._get("extent");t&&(this._set("extent",null),this._set("center",t.center))}if(this.constraints.effectiveLODs){var n=this.viewpoint;Object(jt.u)(n,n,this.constraints.zoomToScale(e)),this.viewpoint=n,this._set("zoom",this.constraints.scaleToZoom(this.scale))}}}},{key:"goTo",value:function(e,t){var n=this;if(e)return this.animation&&(this.animation=null),this._createAnimation(),Object(x.l)(this,"ready",t&&t.signal).then((function(){var r=Object(A.a)({animate:!0},t),i=Object(jt.e)(e,n);return n.animation.update(i),n._gotoTask={},r.animate?n._gotoAnimated(i,r):n._gotoImmediate(i,r)}));vn.error("#goTo()","target cannot be null or undefined")}},{key:"hitTest",value:function(e){return Promise.reject("Should be implemented by subclasses")}},{key:"popupHitTest",value:function(e){var t=this;return this.hitTest(e).then((function(n){return Object(A.a)(Object(A.a)({},n),{},{mapPoint:t.toMap(e)})}))}},{key:"toMap",value:function(e){if(!this.ready)return null;var t=this.state.toMap([0,0],[e.x,e.y]),n=Object(o.a)(t,2),r=n[0],i=n[1],a=this.spatialReference;return new q.a({x:r,y:i,spatialReference:a})}},{key:"isTileInfoRequired",value:function(){return!0}},{key:"toScreen",value:function(e){if(!this.ready)return null;var t=this._normalizeInput(e),n=[t.x,t.y];return this.state.toScreen(n,n),Object(W.e)(n[0],n[1])}},{key:"pixelSizeAt",value:function(){return this.ready?this.state.resolution:(vn.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}},{key:"requestUpdate",value:function(){this.ready&&this.frameTask.requestUpdate()}},{key:"getDefaultSpatialReference",value:function(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||null}},{key:"isSpatialReferenceSupported",value:function(e,t){return!(!t&&!this._get("ready"))||null!==this._getDefaultViewpoint()}},{key:"importLayerView",value:function(e){return At(e)}},{key:"hasLayerViewModule",value:function(e){return Mt(e)}},{key:"_createAnimation",value:function(){return this.animation&&!this.animation.done||(this.animation=new Ot),this.animation}},{key:"_cancellableGoTo",value:function(e,t,n){var r=this,i=function(){return e===r._gotoTask},a=n.then((function(){i()&&(r.animation=null)})).catch((function(e){throw i()&&(r.animation=null,t.done||(t.stop(),r.frameTask.animationInProgress=!1)),e})),o=new Promise((function(e){return e(a)}));return t.when().catch((function(){i()&&o.cancel&&o.cancel()})),o}},{key:"_gotoImmediate",value:function(e,t){var n=this,r=this._gotoTask,i=this.animation,a=e.then((function(e){if(Object(U.u)(t),r!==n._gotoTask)throw new j.a("view:goto-interrupted","Goto was interrupted");n.viewpoint=i.target=e,i.finish()}));return this._cancellableGoTo(r,i,a)}},{key:"_gotoAnimated",value:function(e,t){var n=this,r=this._gotoTask,i=this.animation,a=e.then((function(e){if(Object(U.u)(t),r!==n._gotoTask)throw new j.a("view:goto-interrupted","Goto was interrupted");return i.update(e),n.animationManager.animate(i,n.viewpoint,t),i.when().then((function(){}),(function(){}))}));return this._cancellableGoTo(r,i,a)}},{key:"_resizeHandler",value:function(e){var t=this.state;if(t){var n=this.state.paddedViewState.viewpoint,r=this.state.paddedViewState.size.concat();t.size=[e.width,e.height],Object(jt.q)(n,n,r,this.state.paddedViewState.size,this.resizeAlign),n=this.constraints.constrain(n,null),this.state.viewpoint=n}}},{key:"_startup",value:function(){var e=this._getDefaultViewpoint();this.constraints.view=this,this.constraints.fit(e),this._set("animationManager",new xt({view:this})),this._set("state",new pn({padding:this._get("padding"),size:this.size,viewpoint:e})),this._set("featuresTilingScheme",new hn.a(J.a.create({spatialReference:this.spatialReference,size:512}))),this._set("ready",!0),this.frameTask&&this.frameTask.start()}},{key:"_teardown",value:function(){this.frameTask&&this.frameTask.stop(),this._set("ready",!1),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null);var e=this.state.paddedViewState,t=Object(o.a)(e.center,2),n=t[0],r=t[1],i=e.spatialReference,a=e.rotation,s=e.scale,c=new q.a({x:n,y:r,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",c),this._set("zoom",-1),this._set("rotation",a),this._set("scale",s),this._set("spatialReference",i),this.constraints.view=null,this.animationManager.destroy(),this._set("animationManager",null),this._set("state",null),this.animation=null}},{key:"_flipStationary",value:function(e){var t=this;return null!==this._stationaryTimer||(this._stationaryTimer=setTimeout((function(){t._stationaryTimer=null;var e=performance.now()-t._lastStationaryEventTimestamp;e<160&&(t._stationaryTimer=t._flipStationary(e))}),e)),this._stationaryTimer}},{key:"_normalizeInput",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.spatialReference,n=e&&e.targetGeometry||e;return t?n?t.equals(n.spatialReference)?e:Object(G.a)(n,t)?yn(e)?(e.targetGeometry=Object(G.d)(n,t),e):Object(G.d)(n,t):null:null:e}},{key:"_getDefaultViewpoint",value:function(){var e=this.constraints,t={zoom:this._get("zoom"),scale:this._get("scale"),center:this._normalizeInput(this._get("center")),extent:this._normalizeInput(this._get("extent")),rotation:this._get("rotation"),viewpoint:this._normalizeInput(this._get("viewpoint")),spatialReference:this._userSpatialReference};e.effectiveLODs?-1!==t.zoom&&(t.scale=e.zoomToScale(t.zoom)):t.zoom=-1;var n=null,r=null,i=0,a=t.viewpoint&&t.viewpoint.rotation,o=t.viewpoint&&t.viewpoint.targetGeometry;Object(y.k)(o)&&("extent"===o.type?n=o:"point"===o.type&&(r=o,i=t.viewpoint.scale));var s=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent")),c=this._normalizeInput(this.initialExtent),l=t.extent||n||s||c,u=t.center||r||l&&l.center,d=this.get("map.initialViewProperties.viewpoint.scale"),f=t.scale||i||d||l&&Object(jt.f)(l,this.size),p=this.get("map.initialViewProperties.viewpoint.rotation"),h=t.rotation||a||p||0;return u&&f?new $.a({targetGeometry:u,scale:f,rotation:h}):null}}]),n}(function(e){var t=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"fetchPopupFeatures",value:function(){var e=Object(h.a)(a.a.mark((function e(t,n){var r,i,o,s,c,l,u,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.when();case 2:return e.next=4,this._prepareFetchPopupFeatures(t,n);case 4:return r=e.sent,i=r.location,o=r.queryArea,s=r.layerViewsAndGraphics,c=r.clientOnlyGraphics,l=Promise.resolve(c),u=this._queryLayerPopupFeatures({queryArea:o,layerViewsAndGraphics:s,options:n}),d=u.map((function(e){return e.promise})),e.abrupt("return",{location:i,clientOnlyGraphics:c,allGraphicsPromise:Object(U.k)([l].concat(Object(K.a)(d))).then(Z.d),promisesPerLayerView:u});case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_queryLayerPopupFeatures",value:function(e){var t=e.queryArea,n=e.layerViewsAndGraphics,r=e.options;return n.map((function(e){var n=e.layerView,i={clientGraphics:e.graphics,event:Object(y.k)(r)?r.event:null,signal:Object(y.k)(r)?r.signal:null,defaultPopupTemplateEnabled:!!Object(y.k)(r)&&!!r.defaultPopupTemplateEnabled},a=n.fetchPopupFeatures(t,i);return{layerView:n,promise:a}}))}},{key:"_isValidPopupGraphic",value:function(e,t){return e&&!!e.getEffectivePopupTemplate(Object(y.k)(t)&&t.defaultPopupTemplateEnabled)}},{key:"_prepareFetchPopupFeatures",value:function(){var e=Object(h.a)(a.a.mark((function e(t,n){var r,i,o,s,c,l,u,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._popupHitTestGraphics(t,n);case 2:return r=e.sent,i=r.clientGraphics,o=r.queryArea,s=r.location,c=this._getFetchPopupLayerViews(),l=this._graphicsPerFetchPopupLayerView(i,c),u=l.layerViewsAndGraphics,d=l.clientOnlyGraphics,e.abrupt("return",{clientOnlyGraphics:d,layerViewsAndGraphics:u,queryArea:o,location:s});case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_popupHitTestGraphics",value:function(){var e=Object(h.a)(a.a.mark((function e(t,n){var r,i,o,s,c,l=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.popupHitTest(t);case 2:return r=e.sent,i=r.results,o=r.mapPoint,s=i.filter((function(e){return l._isValidPopupGraphic(e.graphic,n)})),c=s.length?s[0].mapPoint:null,e.abrupt("return",{clientGraphics:s.map((function(e){return e.graphic})),queryArea:o,location:o||c});case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getFetchPopupLayerViews",value:function(){var e=this,t=[];return this.allLayerViews.forEach((function(n){e._isValidPopupLayerView(n)&&t.push(n)})),Object(y.k)(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&t.push(this.graphicsView),t.reverse()}},{key:"_isValidPopupLayerView",value:function(e){return Object(y.k)(e)&&(!("layer"in e)||!e.suspended)&&"fetchPopupFeatures"in e}},{key:"_graphicsPerFetchPopupLayerView",value:function(e,t){var n,r=[],i=new Map,a=t.map((function(e){var t=[];return"layer"in e?i.set(e.layer,t):i.set(e.graphics,t),{layerView:e,graphics:t}})),o=Object(Y.a)(e);try{for(o.s();!(n=o.n()).done;){var s=n.value,c=i.get(s.layer)||null;c?c.push(s):r.push(s)}}catch(l){o.e(l)}finally{o.f()}return{layerViewsAndGraphics:a,clientOnlyGraphics:r}}}]),n}(e);return t=Object(b.a)([Object(O.a)("esri.views.PopupView")],t)}(mt));Object(b.a)([Object(g.b)()],mn.prototype,"_stationaryTimer",void 0),Object(b.a)([Object(g.b)()],mn.prototype,"animation",null),Object(b.a)([Object(g.b)({readOnly:!0})],mn.prototype,"animationManager",void 0),Object(b.a)([Object(g.b)({value:null,type:q.a,dependsOn:["state.id","ready"]})],mn.prototype,"center",null),Object(b.a)([Object(g.b)({type:Zt})],mn.prototype,"constraints",null),Object(b.a)([Object(g.b)({value:null,type:H.a,dependsOn:["state.id","ready"]})],mn.prototype,"extent",null),Object(b.a)([Object(g.b)({readOnly:!0})],mn.prototype,"featuresTilingScheme",void 0),Object(b.a)([Object(g.b)()],mn.prototype,"fullOpacity",void 0),Object(b.a)([Object(g.b)()],mn.prototype,"graphicsView",void 0),Object(b.a)([Object(g.b)({type:H.a})],mn.prototype,"initialExtent",void 0),Object(b.a)([Object(g.b)({dependsOn:["map.initialViewProperties?.viewpoint"]})],mn.prototype,"initialExtentRequired",null),Object(b.a)([Object(g.b)()],mn.prototype,"labelManager",void 0),Object(b.a)([Object(g.b)({value:{top:0,right:0,bottom:0,left:0},cast:function(e){return Object(A.a)({top:0,right:0,bottom:0,left:0},e)}})],mn.prototype,"padding",null),Object(b.a)([Object(g.b)({type:Object})],mn.prototype,"renderingOptions",void 0),Object(b.a)([Object(g.b)()],mn.prototype,"resizeAlign",void 0),Object(b.a)([Object(g.b)({readOnly:!0,dependsOn:["state.id"]})],mn.prototype,"resolution",null),Object(b.a)([Object(g.b)({value:0,type:Number,dependsOn:["state.id","ready"]})],mn.prototype,"rotation",null),Object(b.a)([Object(g.b)({value:0,type:Number,dependsOn:["state.id","ready"]})],mn.prototype,"scale",null),Object(b.a)([Object(g.b)({type:B.a,dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],mn.prototype,"spatialReference",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],mn.prototype,"state",void 0),Object(b.a)([Object(g.b)({dependsOn:["animation","navigating","resizing","_stationaryTimer"]})],mn.prototype,"stationary",null),Object(b.a)([Object(g.b)({readOnly:!0})],mn.prototype,"supportsGround",void 0),Object(b.a)([Object(g.b)({type:bn.a,readOnly:!0})],mn.prototype,"timeline",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],mn.prototype,"type",void 0),Object(b.a)([Object(g.b)({readOnly:!0,dependsOn:["layerViewManager.updating","labelManager.updating","graphicsView?.updating"]})],mn.prototype,"updating",null),Object(b.a)([Object(g.b)({value:null,type:$.a,dependsOn:["state.id","ready"]})],mn.prototype,"viewpoint",null),Object(b.a)([Object(g.b)({value:-1,dependsOn:["state.id"]})],mn.prototype,"zoom",null);var gn=mn=Object(b.a)([Object(O.a)("esri.views.MapViewBase")],mn);function On(e,t){switch(t){case"primary":return"touch"===e.pointerType||0===e.button;case"secondary":return"touch"!==e.pointerType&&2===e.button;case"tertiary":return"touch"!==e.pointerType&&1===e.button}}var jn=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e,r){var i;return Object(s.a)(this,n),(i=t.call(this,!0)).view=e,i.registerIncoming("double-click",r,(function(e){return i._handleDoubleClick(e,r)})),i}return Object(c.a)(n,[{key:"_handleDoubleClick",value:function(e,t){On(e.data,"primary")&&(e.stopPropagation(),t?this.view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this.view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}}]),n}(_e.a),wn=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e,r,i){var a;return Object(s.a)(this,n),(a=t.call(this,!0)).view=e,a.pointerType=r,a.registerIncoming("double-tap-drag",i,(function(e){return a._handleDoubleTapDrag(e)})),a}return Object(c.a)(n,[{key:"_handleDoubleTapDrag",value:function(e){var t=e.data;if(t.pointerType===this.pointerType){e.stopPropagation();var n=t.action,r=t.delta,i=this.view,a=i.mapViewNavigation;switch(n){case"begin":var o=i.scale;this._startScale=o,this._currentScale=o,this._previousDelta=r,a.begin();break;case"update":if(this._previousDelta.y===r.y)return;this._previousDelta=r;var s=Math.pow(1.015,r.y),c=this._startScale*s,l=c/this._currentScale;a.setViewpointImmediate(l),this._currentScale=c;break;case"end":var u=i.constraints,d=u.effectiveLODs;if(!u.snapToZoom||!d)return void a.end();var f=u.snapScale(this._currentScale),p=(r.y>0?Math.max(f,u.snapToPreviousScale(this._startScale)):Math.min(f,u.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(p)}}}}]),n}(_e.a),_n=function(){function e(t){Object(s.a)(this,e),this.callbacks=t,this.currentCount=0,this.callbacks.condition||(this.callbacks.condition=function(){return!0})}return Object(c.a)(e,[{key:"handle",value:function(e){var t=e.data,n=t.pointers.size;switch(t.action){case"start":this.currentCount=n,this.emitStart(e);break;case"added":this.emitEnd(this.previousEvent),this.currentCount=n,this.emitStart(e);break;case"update":this.emitUpdate(e);break;case"removed":this.startEvent&&this.emitEnd(this.previousEvent),this.currentCount=n,this.emitStart(e);break;case"end":this.emitEnd(e),this.currentCount=0}this.previousEvent=e}},{key:"emitStart",value:function(e){this.startEvent=e,this.callbacks.condition(this.currentCount,e)&&this.callbacks.start(this.currentCount,e,this.startEvent)}},{key:"emitUpdate",value:function(e){this.callbacks.condition(this.currentCount,e)&&this.callbacks.update(this.currentCount,e,this.startEvent)}},{key:"emitEnd",value:function(e){this.callbacks.condition(this.currentCount,e)&&this.callbacks.end(this.currentCount,e,this.startEvent),this.startEvent=null}}]),e}(),kn=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e,r,i){var a;Object(s.a)(this,n),(a=t.call(this,!0)).view=e,a.pointerAction=r,a.registerIncoming("drag",i,(function(e){return a._handleDrag(e)})),a.registerIncoming("pointer-down",(function(){return a.stopMomentumNavigation()}));var o=a.view.mapViewNavigation;return a.dragEventSeparator=new _n({start:function(e,t){o.pan.begin(a.view,t.data),t.stopPropagation()},update:function(e,t){o.pan.update(a.view,t.data),t.stopPropagation()},end:function(e,t){o.pan.end(a.view,t.data),t.stopPropagation()},condition:function(e,t){return 1===e&&On(t.data,a.pointerAction)}}),a}return Object(c.a)(n,[{key:"_handleDrag",value:function(e){var t=this.view.mapViewNavigation;t.pinch.zoomMomentum||t.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(e)}},{key:"stopMomentumNavigation",value:function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}]),n}(_e.a),xn=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e,r,i){var a;Object(s.a)(this,n),(a=t.call(this,!0)).view=e,a.pointerAction=r;var o=a.view.mapViewNavigation;return a.dragEventSeparator=new _n({start:function(e,t){o.rotate.begin(a.view,t.data),t.stopPropagation()},update:function(e,t){o.rotate.update(a.view,t.data),t.stopPropagation()},end:function(e,t){o.rotate.end(),t.stopPropagation()},condition:function(e,t){return 1===e&&On(t.data,a.pointerAction)}}),a.registerIncoming("drag",i,(function(e){return a.dragEventSeparator.handle(e)})),a}return n}(_e.a),Sn=n(11);function Tn(e){var t=e*e;return e<0&&(t*=-1),t}var En=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,!0)).view=e,r.frameTask=null,r.watchHandles=new L.a,r.currentDevice=null,r.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},r.handle=r.registerIncoming("gamepad",(function(e){return r.handleEvent(e)})),r.handle.pause(),r}return Object(c.a)(n,[{key:"onInstall",value:function(e){var t=this;Object(u.a)(Object(d.a)(n.prototype),"onInstall",this).call(this,e),this.watchHandles.add([Object(x.a)(this.view.navigation.gamepad,"enabled",(function(e){e?(t.handle.resume(),t.frameTask||(t.frameTask=Object(Q.a)({update:function(e){return t.frameUpdate(e.deltaTime)}}))):(t.handle.pause(),t.frameTask&&(t.frameTask.remove(),t.frameTask=null))}))])}},{key:"onUninstall",value:function(){this.watchHandles.removeAll(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null),Object(u.a)(Object(d.a)(n.prototype),"onUninstall",this).call(this)}},{key:"handleEvent",value:function(e){var t=this.view.navigation.gamepad.device;t&&e.data.device!==t||this.currentDevice&&this.currentDevice!==e.data.device||("end"===e.data.action?(this.currentDevice=null,function(e){e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0}(this.transformation)):(this.currentDevice=e.data.device,function(e,t,n){var r=n,i=e.state,a=e.device,o="forward-down"===t.tiltDirection?1:-1;"standard"===a.deviceType?(r.translation[0]=Tn(i.axes[0]),r.translation[1]=Tn(i.axes[1]),r.translation[2]=Tn(i.buttons[7])-Tn(i.buttons[6]),r.heading=Tn(i.axes[2]),r.tilt=Tn(i.axes[3])):"spacemouse"===a.deviceType&&(r.translation[0]=1.2*Tn(i.axes[0]),r.translation[1]=1.2*Tn(i.axes[1]),r.translation[2]=2*-Tn(i.axes[2]),r.heading=1.2*Tn(i.axes[5]),r.tilt=1.2*Tn(i.axes[3])),r.tilt*=o,Object(Sn.d)(r.translation,r.translation,1)}(e.data,this.view.navigation.gamepad,this.transformation)))}},{key:"frameUpdate",value:function(e){var t=this.transformation;if(!function(e){return 0===e.translation[0]&&0===e.translation[1]&&0===e.translation[2]&&0===e.heading&&0===e.tilt&&0===e.zoom}(t)){var n=this.view.viewpoint.clone(),r=this.view.navigation.gamepad.velocityFactor,i=Pn*r*e;Object(jt.w)(n,n,[t.translation[0]*i,-t.translation[1]*i]);var a=1+t.translation[2]*In*e,o=this.view.constraints.rotationEnabled?-t.heading*Cn*e:0,s=this.view.size,c=[s[0]/2,s[1]];Object(jt.t)(n,n,a,o,c,s);var l=this.view.constraints.constrain(n,this.view.viewpoint);this.view.viewpoint=l}}}]),n}(_e.a),Cn=.06,Pn=.7,In=6e-4,Mn=n(26),An=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e,r,i){var a,o;return Object(s.a)(this,n),(o=t.call(this,!0)).view=e,o.keys=r,o._pressed=!1,o._keyMap=(a={},Object(Mn.a)(a,r.left,"left"),Object(Mn.a)(a,r.right,"right"),Object(Mn.a)(a,r.up,"up"),Object(Mn.a)(a,r.down,"down"),a),o.registerIncoming("key-down",i,(function(e){return o._handleKeyDown(e)})),o.registerIncoming("key-up",i,(function(e){return o._handleKeyUp(e)})),o.registerIncoming("blur",i,(function(){return o._handleBlur()})),o}return Object(c.a)(n,[{key:"_handleKeyDown",value:function(e){e.data.repeat||this._handleKey(e,!0)}},{key:"_handleKeyUp",value:function(e){this._handleKey(e,!1)}},{key:"_handleBlur",value:function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}},{key:"_handleKey",value:function(e,t){var n=this._keyMap[e.data.key];if(this._pressed=null!=n,this._pressed){if(t)switch(this.view.mapViewNavigation.begin(),n){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}}]),n}(_e.a),Rn=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e,r,i){var a,o;return Object(s.a)(this,n),(o=t.call(this,!0)).view=e,o.keys=r,o._pressed=!1,o._keyToDirection=(a={},Object(Mn.a)(a,r.clockwiseOption1,"clockwise"),Object(Mn.a)(a,r.clockwiseOption2,"clockwise"),Object(Mn.a)(a,r.counterClockwiseOption1,"counterClockwise"),Object(Mn.a)(a,r.counterClockwiseOption2,"counterClockwise"),Object(Mn.a)(a,r.resetOption1,"reset"),Object(Mn.a)(a,r.resetOption2,"reset"),a),o.registerIncoming("key-down",i,(function(e){return o._handleKeyDown(e)})),o.registerIncoming("key-up",i,(function(e){return o._handleKeyUp(e)})),o.registerIncoming("blur",i,(function(){return o._handleBlur()})),o}return Object(c.a)(n,[{key:"_handleKeyDown",value:function(e){e.data.repeat||this._handleKey(e,!0)}},{key:"_handleKeyUp",value:function(e){this._handleKey(e,!1)}},{key:"_handleBlur",value:function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}},{key:"_handleKey",value:function(e,t){var n=e.modifiers;if(!(n.size>0&&!n.has("Shift")||!this.view.constraints.rotationEnabled)){var r=this._keyToDirection[e.data.key];if(this._pressed=null!=r,this._pressed){if(t)switch(this.view.mapViewNavigation.begin(),r){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}}}]),n}(_e.a),Ln=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e,r,i){var a;return Object(s.a)(this,n),(a=t.call(this,!0)).view=e,a.keys=r,a._keysToZoomAction={},a.registerIncoming("key-down",i,(function(e){return a._handleKeyDown(e)})),r.zoomIn.forEach((function(e){return a._keysToZoomAction[e]=0})),r.zoomOut.forEach((function(e){return a._keysToZoomAction[e]=1})),a}return Object(c.a)(n,[{key:"_handleKeyDown",value:function(e){this._handleKey(e)}},{key:"_handleKey",value:function(e){var t=e.modifiers;if(!(t.size>0)||t.has("Shift")){var n=e.data.key;if(n in this._keysToZoomAction){var r=this._keysToZoomAction[n],i=this.view.mapViewNavigation,a=null;switch(r){case 0:a=i.zoomIn();break;case 1:a=i.zoomOut();break;default:return}i.begin(),a.then((function(){return i.end()})),e.stopPropagation()}}}}]),n}(_e.a),Fn=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e,r){var i;return Object(s.a)(this,n),(i=t.call(this,!0)).view=e,i._canZoom=!0,i.registerIncoming("mouse-wheel",r,(function(e){return i._handleMouseWheel(e)})),i}return Object(c.a)(n,[{key:"_handleMouseWheel",value:function(e){var t=this;if(this.view.navigation.mouseWheelZoomEnabled&&(e.preventDefault(),e.stopPropagation(),this._canZoom)){var n=this.view.mapViewNavigation,r=e.data,i=r.x,a=r.y,o=r.deltaY,s=1/Math.pow(.6,1/60*o),c=n.zoom(s,[i,a]);c&&(this._canZoom=!1,c.catch((function(){})).then((function(){t._canZoom=!0,n.end()})))}}}]),n}(_e.a),Dn=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;Object(s.a)(this,n),(r=t.call(this,!0)).view=e,r.registerIncoming("drag",(function(e){return r._handleDrag(e)})),r.registerIncoming("pointer-down",(function(){return r.stopMomentumNavigation()}));var i=r.view.mapViewNavigation;return r.dragEventSeparator=new _n({start:function(e,t){i.pinch.begin(r.view,t.data),t.stopPropagation()},update:function(e,t){i.pinch.update(r.view,t.data),t.stopPropagation()},end:function(e,t){i.pinch.end(r.view),t.stopPropagation()},condition:function(e){return e>=2}}),r}return Object(c.a)(n,[{key:"_handleDrag",value:function(e){this.dragEventSeparator.handle(e)}},{key:"stopMomentumNavigation",value:function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}]),n}(_e.a),Nn=n(461);function Vn(e){var t=e.native;return t?{buttons:t.buttons.map((function(e){return e.pressed?e.value?e.value:1:0})),axes:t.axes.map((function(t){return function(e,t){var n=Math.abs(e);return n<t?0:Object(we.q)(e)*(n-t)/(1-t)}(t,e.axisThreshold)}))}:{buttons:[],axes:[]}}var zn=function(){function e(t,n){var r=this;Object(s.a)(this,e),this.element=t,this.input=n,this._hasEventListeners=!1,this.onConnectGamepad=function(e){r.connectGamepad(e.gamepad)},this.onDisconnectGamepad=function(e){var t=e.gamepad,n=t.index,i=r.inputDevices[n];i&&(r.emitGamepadEvent(t,Vn(i),!1),r.inputDevices.splice(n,1),r.latestUpdate.splice(n,1),r.input.gamepad.devices.remove(i),r.ensurePollingState())},this.frameTask=null,this.latestUpdate=new Array,this.inputDevices=new Array,this.callback=null;var i="getGamepads"in window.navigator,a=window.isSecureContext;this.supported=i&&a,this.supported&&(this.forEachGamepad(this.connectGamepad),window.addEventListener("gamepadconnected",this.onConnectGamepad),window.addEventListener("gamepaddisconnected",this.onDisconnectGamepad),this.ensurePollingState())}return Object(c.a)(e,[{key:"destroy",value:function(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this.onConnectGamepad),window.removeEventListener("gamepaddisconnected",this.onDisconnectGamepad))}},{key:"hasEventListeners",set:function(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}},{key:"eventsEnabled",get:function(){return this.supported&&this.inputDevices.length>0&&this._hasEventListeners}},{key:"onEvent",set:function(e){this.callback=e}},{key:"connectGamepad",value:function(e){var t=new $e(e);"unknown"!==t.deviceType&&(this.inputDevices[e.index]=t,this.input.gamepad.devices.add(t)),this.ensurePollingState()}},{key:"ensurePollingState",value:function(){this.eventsEnabled?this.startPolling():this.stopPolling()}},{key:"startPolling",value:function(){var e=this;null==this.frameTask&&(this.frameTask=Object(Q.a)({update:function(){return e.readGamepadState()}}))}},{key:"stopPolling",value:function(){null!=this.frameTask&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=new Array)}},{key:"readGamepadState",value:function(){var e=this,t=document.hasFocus(),n=this.element.contains(document.activeElement),r="document"===this.input.gamepad.enabledFocusMode&&!t||"view"===this.input.gamepad.enabledFocusMode&&!n;this.forEachGamepad((function(t){var n=e.inputDevices[t.index];if(n){var i=e.latestUpdate[t.index],a=Vn(n),o=r||function(e){for(var t=0;t<e.axes.length;t++)if(0!==e.axes[t])return!1;for(var n=0;n<e.buttons.length;n++)if(0!==e.buttons[n])return!1;return!0}(a);if(i){if(i.timestamp===t.timestamp)return;if(!i.active&&o)return;if(function(e,t){if(e.axes.length!==t.axes.length)return!1;if(e.buttons.length!==t.buttons.length)return!1;for(var n=0;n<e.axes.length;n++)if(e.axes[n]!==t.axes[n])return!1;for(var r=0;r<e.buttons.length;r++)if(e.buttons[r]!==t.buttons[r])return!1;return!0}(i.state,a))return}e.emitGamepadEvent(t,a,!o)}}))}},{key:"forEachGamepad",value:function(e){for(var t=window.navigator.getGamepads(),n=0;n<t.length;n++){var r=t[n];this.validate(r)&&e(r)}}},{key:"emitGamepadEvent",value:function(e,t,n){var r=this.latestUpdate[e.index],i=r&&r.active;if(i||n){var a=!i&&n?"start":i&&n?"update":"end";this.latestUpdate[e.index]={timestamp:e.timestamp,state:t,active:n},this.callback&&this.callback({device:this.inputDevices[e.index],state:t,action:a})}}},{key:"validate",value:function(e){if(!e)return!1;if(!e.connected)return!1;for(var t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}}]),e}(),Un=Object(v.a)("trident"),Bn=Object(v.a)("edge"),Gn=Object(v.a)("chrome"),qn=Object(v.a)("ff"),Hn=Object(v.a)("safari"),Wn="esri-view-surface--touch-none",$n="esri-view-surface--touch-pan",Jn=function(){function e(t,n){var r=this;Object(s.a)(this,e),this.input=n,this._active={},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new zn(t,this.input),this._gamepadSource.onEvent=function(e){return r._callback("gamepad",e)}}return Object(c.a)(e,[{key:"destroy",value:function(){var e=this;this._callback=null,this.activeEvents=null,this._activePointerCaptures.forEach((function(t){e._releasePointerCaptureSafe(t)})),this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}},{key:"browserTouchPanningEnabled",get:function(){return this._browserTouchPanningEnabled},set:function(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}},{key:"onEventReceived",set:function(e){this._callback=e}},{key:"activeEvents",set:function(e){var t=this;for(var n in this._active)if(!e||!e.has(n)){var r=this._active[n];this._element.removeEventListener(Yn[n],r),delete this._active[n]}e&&e.forEach((function(e){if(!t._active[e]&&Yn[e]){var n=(t._eventHandlers[e]||t._handleDefault).bind(t,e);t._element.addEventListener(Yn[e],n),t._active[e]=n}})),this._gamepadSource.hasEventListeners=e&&e.has("gamepad")}},{key:"setPointerCapture",value:function(e,t){t?(this._element.setPointerCapture(e.pointerId),this._activePointerCaptures.add(e.pointerId)):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}},{key:"_updateTouchAction",value:function(){this._element.classList.remove(this._browserTouchPanningEnabled?Wn:$n),this._element.classList.add(this._browserTouchPanningEnabled?$n:Wn)}},{key:"_updateTouchEventHandling",value:function(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}},{key:"_removeTouchAction",value:function(){this._element.classList.remove(Wn),this._element.classList.remove($n),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}},{key:"_releasePointerCaptureSafe",value:function(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch(t){}}},{key:"_updateNormalizedPointerLikeEvent",value:function(t,n){var r=Object(z.b)(this._element,t);return e.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),n.x=r.x,n.y=r.y,n}},{key:"_handleKey",value:function(e,t){var n=Object(Nn.a)(t);n&&"key-up"===e&&this._keyDownState.delete(n);var r={native:t,key:n,repeat:n&&this._keyDownState.has(n)};n&&"key-down"===e&&this._keyDownState.add(r.key),this._callback(e,r)}},{key:"_handlePointer",value:function(e,t){var n=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});this._callback(e,n)}},{key:"_handlePointerPreventDefault",value:function(e,t){var n=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});t.preventDefault(),this._callback(e,n)}},{key:"_handleMouseWheel",value:function(e,t){var n=t.deltaY;switch(t.deltaMode){case 0:(Un||Bn)&&(n=n/document.documentElement.clientHeight*600);break;case 1:n*=30;break;case 2:n*=900}Un||Bn?n*=.7:Gn||Hn?n*=.6:qn&&(n*=1.375);var r=Math.abs(n);if(r>100){n=n/r*200/(1+Math.exp(-.02*(r-100)))}var i=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,deltaY:n});this._callback(e,i)}},{key:"_handlePointerCaptureLost",value:function(e,t){this._activePointerCaptures.delete(t.pointerId),this._handleDefault(e,t)}},{key:"_handleDefault",value:function(e,t){var n={native:t};t.preventDefault(),this._callback(e,n)}},{key:"_preventAltKeyDefault",value:function(e){"Alt"===e.key&&e.preventDefault()}},{key:"_preventMultiTouchPanning",value:function(e){e.touches.length>1&&e.preventDefault()}}]),e}();Jn.test={disableSubpixelCoordinates:!1};var Yn={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"},Kn=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this,!0)).registerIncoming("context-menu",(function(e){e.data.native.preventDefault()})),e}return n}(_e.a),Zn=n(279);function Xn(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}var Qn,er=250,tr=10,nr=350,rr=35,ir=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:er,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tr,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nr,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:rr,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Zn.a;return Object(s.a)(this,n),(e=t.call(this,!1)).maximumDoubleClickDelay=r,e.maximumDoubleClickDistance=i,e.maximumDoubleTouchDelay=a,e.maximumDoubleTouchDistance=o,e._clock=c,e._pointerState=new Map,e._click=e.registerOutgoing("click"),e._doubleClick=e.registerOutgoing("double-click"),e.registerIncoming("immediate-click",e._handleImmediateClick.bind(Object(l.a)(e))),e.registerIncoming("pointer-drag",e._handlePointerDrag.bind(Object(l.a)(e))),e.registerIncoming("drag",e._handleDrag.bind(Object(l.a)(e))),e}return Object(c.a)(n,[{key:"onUninstall",value:function(){this._pointerState.forEach((function(e){null!=e.doubleClickTimeout&&(e.doubleClickTimeout.remove(),e.doubleClickTimeout=null)}))}},{key:"hasPendingInputs",get:function(){return Object(fe.a)(this._pointerState,(function(e){return null!=e.doubleClickTimeout}))}},{key:"_pointerId",value:function(e){var t=e.native;return"mouse"===t.pointerType?"".concat(t.pointerId,":").concat(t.button):"".concat(t.pointerType)}},{key:"_handleImmediateClick",value:function(e){var t=e.data,n=this._pointerId(t),r=this._pointerState.get(n);if(r){var i="touch"===t.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;Xn(r.event.data,t)>i?(this._clearDoubleClickTimeout(n,!0),this._startClick(e)):(this._clearDoubleClickTimeout(n,!1),this._doubleClick.emit(r.event.data,void 0,r.event.modifiers))}else this._startClick(e)}},{key:"_startClick",value:function(e){var t=this,n=this._pointerId(e.data),r="touch"===e.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;this._pointerState.set(n,{event:e,doubleClickTimeout:this._clock.setTimeout((function(){return t._doubleClickTimeoutExceeded(n)}),r)}),this.refreshHasPendingInputs()}},{key:"_handlePointerDrag",value:function(e){var t=this._pointerId(e.data.currentEvent);this._clearDoubleClickTimeout(t,!0)}},{key:"_handleDrag",value:function(e){var t=this._pointerId(e.data.pointer);this._clearDoubleClickTimeout(t,!0)}},{key:"_clearDoubleClickTimeout",value:function(e,t){var n=this._pointerState.get(e);n&&(n.doubleClickTimeout.remove(),n.doubleClickTimeout=null,t&&this._doubleClickTimeoutExceeded(e),this._pointerState.delete(e),this.refreshHasPendingInputs())}},{key:"_doubleClickTimeoutExceeded",value:function(e){var t=this._pointerState.get(e);this._click.emit(t.event.data,void 0,t.event.modifiers),t.doubleClickTimeout=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}}]),n}(_e.a),ar=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:er,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tr,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nr,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:rr,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Zn.a;return Object(s.a)(this,n),(e=t.call(this,!1)).maximumDoubleClickDelay=r,e.maximumDoubleClickDistance=i,e.maximumDoubleTouchDelay=a,e.maximumDoubleTouchDistance=o,e._clock=c,e._doubleTapDragReady=!1,e._doubleTapDragActive=!1,e._dragStartCenter=Object(W.e)(0,0),e._pointerState=new Map,e._doubleTapDrag=e.registerOutgoing("double-tap-drag"),e._dragEventSeparator=new _n({start:function(t,n){return e._dragStart(t,n)},update:function(t,n){return e._dragUpdate(n)},end:function(t,n){return e._dragEnd(n)}}),e.registerIncoming("drag",(function(t){return e._dragEventSeparator.handle(t)})),e.registerIncoming("pointer-down",(function(t){return e._handlePointerDown(t)})),e.registerIncoming("pointer-up",(function(){return e._handlePointerUp()})),e}return Object(c.a)(n,[{key:"onUninstall",value:function(){this._pointerState.forEach((function(e){null!=e.doubleTapTimeout&&(e.doubleTapTimeout.remove(),e.doubleTapTimeout=null)}))}},{key:"hasPendingInputs",get:function(){return Object(fe.a)(this._pointerState,(function(e){return null!=e.doubleTapTimeout}))}},{key:"_clearPointerDown",value:function(e){var t=this._pointerState.get(e);t&&(t.doubleTapTimeout.remove(),t.doubleTapTimeout=null,this._pointerState.delete(e),this.refreshHasPendingInputs())}},{key:"_createDoubleTapDragData",value:function(e,t,n){return{action:e,delta:t,button:n.button,buttons:n.buttons,pointer:n.pointer,pointers:n.pointers,pointerType:n.pointerType,timestamp:n.timestamp}}},{key:"_dragStart",value:function(e,t){if(this._doubleTapDragReady&&1===e){this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;var n=t.data,r=t.modifiers,i=n.center;this._dragStartCenter=i;var a=this._createDoubleTapDragData("begin",Object(W.e)(0,0),n);this._doubleTapDrag.emit(a,void 0,r),t.stopPropagation()}}},{key:"_dragUpdate",value:function(e){if(this._doubleTapDragActive){var t=e.data,n=e.modifiers,r=t.center,i=Object(W.e)(r.x-this._dragStartCenter.x,r.y-this._dragStartCenter.y),a=this._createDoubleTapDragData("update",i,t);this._doubleTapDrag.emit(a,void 0,n),e.stopPropagation()}}},{key:"_dragEnd",value:function(e){if(this._doubleTapDragActive){var t=e.data,n=e.modifiers,r=t.center,i=Object(W.e)(r.x-this._dragStartCenter.x,r.y-this._dragStartCenter.y),a=this._createDoubleTapDragData("end",i,t);this._doubleTapDrag.emit(a,void 0,n),this._doubleTapDragActive=!1,e.stopPropagation()}}},{key:"_handlePointerDown",value:function(e){var t=e.data,n=this._pointerId(t),r=this._pointerState.get(n),i=t.native.pointerType;if(r){var a="touch"===i?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;this._clearPointerDown(n),Xn(r.event.data,t)>a?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}},{key:"_handlePointerUp",value:function(){this._doubleTapDragReady=!1}},{key:"_pointerId",value:function(e){var t=e.native,n=t.pointerId,r=t.button,i=t.pointerType;return"mouse"===i?"".concat(n,":").concat(r):"".concat(i)}},{key:"_storePointerDown",value:function(e){var t=this,n=e.data,r=n.native.pointerType,i=this._pointerId(n),a="touch"===r?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay,o=this._clock.setTimeout((function(){return t._clearPointerDown(i)}),a);this._pointerState.set(i,{event:e,doubleTapTimeout:o}),this.refreshHasPendingInputs()}}]),n}(_e.a),or=n(148),sr=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,!1)).navigationTouch=e,r.startStateModifiers=new Set,r.activePointerMap=new Map,r.isDragging=!1,r.isCurrentDragSuppressed=!1,r.drag=r.registerOutgoing("drag"),r.registerIncoming("pointer-drag",r.handlePointerDrag.bind(Object(l.a)(r))),r.registerIncoming("pointer-up",r.handlePointerUpAndPointerLost.bind(Object(l.a)(r))),r.registerIncoming("pointer-capture-lost",r.handlePointerUpAndPointerLost.bind(Object(l.a)(r))),r.registerIncoming("pointer-cancel",r.handlePointerUpAndPointerLost.bind(Object(l.a)(r))),r}return Object(c.a)(n,[{key:"createPayload",value:function(e,t,n,r){return{action:e,pointerType:this.pointerType,button:this.mouseButton,buttons:t.buttons,timestamp:r,pointers:ur(this.activePointerMap),pointer:t,angle:n.angle,radius:n.radius,center:n.center}}},{key:"addPointer",value:function(e){var t=e.native.pointerId,n=lr(this.activePointerMap).angle,r={event:e,initialAngle:0,lastAngle:0};this.activePointerMap.set(t,r);var i=dr(r,cr(this.activePointerMap));r.initialAngle=i,r.lastAngle=i,this.updatePointerAngles(n)}},{key:"updatePointer",value:function(e){if(!e||null!=e.x||null!=e.y){var t=e.native.pointerId,n=this.activePointerMap.get(t);n?n.event=e:this.addPointer(e)}}},{key:"removePointer",value:function(e){var t=lr(this.activePointerMap).angle;this.activePointerMap.delete(e),this.updatePointerAngles(t)}},{key:"updatePointerAngles",value:function(e){var t=lr(this.activePointerMap);this.activePointerMap.forEach((function(n){n.initialAngle=dr(n,t)-e,n.lastAngle=dr(n,t)-e}))}},{key:"emitEvent",value:function(e,t,n){var r=lr(this.activePointerMap);this.drag.emit(this.createPayload(e,t,r,n),void 0,this.startStateModifiers)}},{key:"handlePointerUpAndPointerLost",value:function(e){var t=e.data.native.pointerId,n=Object(or.a)(e.timestamp);this.activePointerMap.get(t)&&(1===this.activePointerMap.size?(this.updatePointer(e.data),!this.isCurrentDragSuppressed&&this.emitEvent("end",e.data,n),this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.removePointer(t)):(this.removePointer(t),this.emitEvent("removed",e.data,Object(or.a)(e.timestamp))))}},{key:"handlePointerDrag",value:function(e){var t=e.data,n=t.currentEvent,r=Object(or.a)(e.timestamp);switch(t.action){case"start":case"update":this.isDragging?this.activePointerMap.has(n.native.pointerId)?(this.updatePointer(n),!this.isCurrentDragSuppressed&&this.emitEvent("update",n,r)):(this.addPointer(n),this.emitEvent("added",n,r),this.isCurrentDragSuppressed=this.isSuppressed):(this.updatePointer(n),this.pointerType=e.data.startEvent.pointerType,this.mouseButton=e.data.startEvent.button,this.startStateModifiers=e.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this.emitEvent("start",n,r))}}},{key:"isSuppressed",get:function(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&"touch"===this.pointerType&&1===this.activePointerMap.size}}]),n}(_e.a);function cr(e){var t=[];return e.forEach((function(e){t.push(Object(W.e)(e.event.x,e.event.y))})),function(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:Object(W.e)()},0===e.length)return t;if(1===e.length)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(2===e.length){var n=Object(o.a)(e,2),r=n[0],i=n[1],a=i.x-r.x,s=i.y-r.y;return t.radius=Math.sqrt(a*a+s*s)/2,t.center.x=(r.x+i.x)/2,t.center.y=(r.y+i.y)/2,t}for(var c=0,l=0,u=0;u<e.length;u++)c+=e[u].x,l+=e[u].y;c/=e.length,l/=e.length;for(var d=e.map((function(e){return e.x-c})),f=e.map((function(e){return e.y-l})),p=0,h=0,b=0,v=0,y=0,m=0,g=0,O=0;O<d.length;O++){var j=d[O],w=f[O],_=j*j,k=w*w;p+=_,h+=k,b+=j*w,v+=_*j,y+=k*w,m+=j*k,g+=w*_}var x=.5*(v+m),S=.5*(y+g),T=p*h-b*b,E=(x*h-S*b)/T,C=(p*S-b*x)/T,P=Object(W.e)(E+c,C+l);return{radius:Math.sqrt(E*E+C*C+(p+h)/e.length),center:P}}(t)}function lr(e){var t=cr(e),n=0;return e.forEach((function(e){for(var r=dr(e,t),i=r-e.lastAngle;i>Math.PI;)i-=2*Math.PI;for(;i<-Math.PI;)i+=2*Math.PI;r=e.lastAngle+i,e.lastAngle=r;var a=r-e.initialAngle;n+=a})),{angle:n/=e.size||1,radius:t.radius,center:t.center}}function ur(e){var t=new Map;return e.forEach((function(e,n){return t.set(n,e.event)})),t}function dr(e,t){var n=e.event,r=n.x-t.center.x,i=n.y-t.center.y;return Math.atan2(i,r)}!function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"}(Qn||(Qn={}));var fr=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:er,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tr,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nr,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:rr,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Zn.a;return Object(s.a)(this,n),(e=t.call(this,!1)).maximumDoubleClickDelay=r,e.maximumDoubleClickDistance=i,e.maximumDoubleTouchDelay=a,e.maximumDoubleTouchDistance=o,e._clock=c,e._pointerState=new Map,e._immediateDoubleClick=e.registerOutgoing("immediate-double-click"),e.registerIncoming("pointer-down",e._handlePointerDown.bind(Object(l.a)(e))),e.registerIncoming("pointer-up",(function(t){e._handlePointerLoss(t,"pointer-up")})),e.registerIncoming("pointer-capture-lost",(function(t){e._handlePointerLoss(t,"pointer-capture-lost")})),e.registerIncoming("pointer-cancel",(function(t){e._handlePointerLoss(t,"pointer-cancel")})),e}return Object(c.a)(n,[{key:"onUninstall",value:function(){this._pointerState.forEach((function(e){e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()})),Object(u.a)(Object(d.a)(n.prototype),"onUninstall",this).call(this)}},{key:"_handlePointerDown",value:function(e){var t=e.data,n=this._pointerId(t);if(!this._pointerState.has(n)){var r={downButton:t.native.button,immediateDoubleClick:null};this._pointerState.set(n,r),this.startCapturingPointer(t.native)}}},{key:"_handlePointerLoss",value:function(e,t){var n=e.data,r=this._pointerId(n),i=this._pointerState.get(r);if(i&&"pointer-up"===t&&i.downButton===n.native.button){var a=i.immediateDoubleClick;if(a){a.timeoutHandle.remove();var o="touch"===e.data.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;Xn(a,e.data)>o?this._startImmediateDoubleClick(e,i):(this._immediateDoubleClick.emit(e.data,void 0,a.modifiers),this._removeState(n))}else this._startImmediateDoubleClick(e,i)}}},{key:"_startImmediateDoubleClick",value:function(e,t){var n=this,r="touch"===e.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;t.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout((function(){return n._removeState(e.data)}),r)}}},{key:"_pointerId",value:function(e){var t=e.native;return"mouse"===t.pointerType?"".concat(t.pointerId,":").concat(t.button):"".concat(t.pointerType)}},{key:"_removeState",value:function(e){var t=this._pointerId(e);this._pointerState.delete(t),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}}]),n}(_e.a),pr=300,hr=1.5,br=6,vr=6,yr=500,mr=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pr,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hr,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:br,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:vr,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:yr,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Zn.a;return Object(s.a)(this,n),(e=t.call(this,!1)).maximumClickDelay=r,e.movementUntilMouseDrag=i,e.movementUntilPenDrag=a,e.movementUntilTouchDrag=o,e.holdDelay=c,e._clock=u,e._pointerState=new Map,e._pointerDrag=e.registerOutgoing("pointer-drag"),e._immediateClick=e.registerOutgoing("immediate-click"),e._pointerHold=e.registerOutgoing("hold"),e.registerIncoming("pointer-down",e._handlePointerDown.bind(Object(l.a)(e))),e.registerIncoming("pointer-up",(function(t){e._handlePointerLoss(t,"pointer-up")})),e.registerIncoming("pointer-capture-lost",(function(t){e._handlePointerLoss(t,"pointer-capture-lost")})),e.registerIncoming("pointer-cancel",(function(t){e._handlePointerLoss(t,"pointer-cancel")})),e._moveHandle=e.registerIncoming("pointer-move",e._handlePointerMove.bind(Object(l.a)(e))),e._moveHandle.pause(),e}return Object(c.a)(n,[{key:"onUninstall",value:function(){this._pointerState.forEach((function(e){null!=e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null)})),Object(u.a)(Object(d.a)(n.prototype),"onUninstall",this).call(this)}},{key:"_handlePointerDown",value:function(e){var t=this,n=e.data,r=n.native.pointerId,i=null;0===this._pointerState.size&&(i=this._clock.setTimeout((function(){var n=t._pointerState.get(r);if(n){if(!n.isDragging){var i=n.previousEvent;t._pointerHold.emit(i,void 0,e.modifiers),n.holdEmitted=!0}n.holdTimeout=null}}),this.holdDelay));var a={startEvent:n,previousEvent:n,startTimestamp:e.timestamp,isDragging:!1,downButton:n.native.button,holdTimeout:i,modifiers:new Set};this._pointerState.set(r,a),this.startCapturingPointer(n.native),this._moveHandle.resume(),this._pointerState.size>1&&this.startDragging(e)}},{key:"_createPointerDragData",value:function(e,t,n){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:n}}},{key:"_handlePointerMove",value:function(e){var t=e.data,n=t.native.pointerId,r=this._pointerState.get(n);r&&(r.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",r,t),void 0,r.modifiers):function(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}(t,r.startEvent)>this._getDragThreshold(t.native.pointerType)&&this.startDragging(e),r.previousEvent=t)}},{key:"_getDragThreshold",value:function(e){switch(e){case"touch":return this.movementUntilTouchDrag;case"pen":return this.movementUntilPenDrag;case"mouse":default:return this.movementUntilMouseDrag}}},{key:"startDragging",value:function(e){var t=this,n=e.data,r=n.native.pointerId;this._pointerState.forEach((function(i){null!=i.holdTimeout&&(i.holdTimeout.remove(),i.holdTimeout=null),i.isDragging||(i.modifiers=e.modifiers,i.isDragging=!0,r===i.startEvent.native.pointerId?t._pointerDrag.emit(t._createPointerDragData("start",i,n)):t._pointerDrag.emit(t._createPointerDragData("start",i,i.previousEvent),e.timestamp))}))}},{key:"_handlePointerLoss",value:function(e,t){var n=e.data,r=n.native.pointerId,i=this._pointerState.get(r);i&&(null!=i.holdTimeout&&(i.holdTimeout.remove(),i.holdTimeout=null),i.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",i,"pointer-up"===t?n:i.previousEvent),void 0,i.modifiers):"pointer-up"===t&&i.downButton===n.native.button&&e.timestamp-i.startTimestamp<=this.maximumClickDelay&&!i.holdEmitted&&this._immediateClick.emit(n),this._pointerState.delete(r),this.stopCapturingPointer(n.native),0===this._pointerState.size&&this._moveHandle.pause())}}]),n}(_e.a),gr="Ctrl",Or={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},jr={zoomIn:["=","+"],zoomOut:["-","_"]},wr={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"},_r=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.apply(this,arguments))._handles=new L.a,e}return Object(c.a)(n,[{key:"initialize",value:function(){var e=this;this._handles.add([Object(x.h)(this.view,"ready",(function(){return e._disconnect()})),Object(x.e)(this.view,"ready",(function(){return e._connect()}))])}},{key:"destroy",value:function(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect()}},{key:"_disconnect",value:function(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)}},{key:"_connect",value:function(){var e=this,t=this.view.surface,n=new Jn(t,this.view.input),r=[new fr,new mr,new ir,new sr(this.view.navigation),new ar],i=new ke.a({eventSource:n,recognizers:r});i.installHandlers("prevent-context-menu",[new Kn],ke.b.INTERNAL),i.installHandlers("navigation",[new Dn(this.view),new En(this.view),new Fn(this.view),new jn(this.view),new jn(this.view,[gr]),new kn(this.view,"primary"),new An(this.view,Or),new Ln(this.view,jr),new Rn(this.view,wr),new xn(this.view,"secondary"),new wn(this.view,"touch")],ke.b.INTERNAL),this.view.viewEvents.connect(i),this._source=n,this._inputManager=i,Object(x.a)(this.view.navigation,"browserTouchPanEnabled",(function(t){e._source.browserTouchPanningEnabled=!t}))}},{key:"test",get:function(){return{inputManager:this._inputManager}}}]),n}(ee.a);Object(b.a)([Object(g.b)()],_r.prototype,"view",void 0);var kr=_r=Object(b.a)([Object(O.a)("esri.views.2d.input.MapViewInputManager")],_r),xr=0,Sr=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.apply(this,arguments)).color=new E.a([0,255,255]),e.haloOpacity=1,e.fillOpacity=.25,e}return Object(c.a)(n,[{key:"version",get:function(){return xr++}}]),n}(ee.a);Object(b.a)([Object(g.b)({readOnly:!0})],Sr.prototype,"version",null),Object(b.a)([Object(g.b)({type:E.a})],Sr.prototype,"color",void 0),Object(b.a)([Object(g.b)({type:E.a})],Sr.prototype,"haloColor",void 0),Object(b.a)([Object(g.b)()],Sr.prototype,"haloOpacity",void 0),Object(b.a)([Object(g.b)()],Sr.prototype,"fillOpacity",void 0);var Tr=Sr=Object(b.a)([Object(O.a)("esri.views.2d.support.HighlightOptions")],Sr),Er=n(465),Cr={checkMajorWebPerformanceCaveat:!0};var Pr=n(58),Ir=n(181);var Mr="esri-component",Ar=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.apply(this,arguments)).widget=null,e}return Object(c.a)(n,[{key:"destroy",value:function(){this.widget&&this.widget.destroy(),this.node=null}},{key:"id",get:function(){return this.get("widget.id")||this.get("node.id")}},{key:"node",set:function(e){var t=this._get("node");e!==t&&(e&&e.classList.add(Mr),t&&t.classList.remove(Mr),this._set("node",e))}},{key:"castNode",value:function(e){return e?"string"==typeof e||function(e){return e&&"nodeType"in e}(e)?(this._set("widget",null),Object(Ir.a)(e)):(function(e){return e&&"function"==typeof e.render}(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}}]),n}(ee.a);Object(b.a)([Object(g.b)({dependsOn:[]})],Ar.prototype,"id",null),Object(b.a)([Object(g.b)()],Ar.prototype,"node",null),Object(b.a)([Object(Pr.a)("node")],Ar.prototype,"castNode",null),Object(b.a)([Object(g.b)({readOnly:!0})],Ar.prototype,"widget",void 0);var Rr=Ar=Object(b.a)([Object(O.a)("esri.views.ui.Component")],Ar),Lr=n(56),Fr={left:0,top:0,bottom:0,right:0},Dr={bottom:30,top:15,right:15,left:15},Nr="manual",Vr="esri-ui",zr="esri-ui-corner",Ur="esri-ui-inner-container",Br="esri-ui-manual-container",Gr="esri-ui-corner-container",qr="esri-ui-top-left",Hr="esri-ui-top-right",Wr="esri-ui-bottom-left",$r="esri-ui-bottom-right";function Jr(e){return"object"!=typeof e||e instanceof Rr||"declaredClass"in e||!("component"in e||"index"in e||"position"in e)?null:e}function Yr(e,t){var n=t.top,r=t.bottom,i=t.left,a=t.right;e.style.top=n,e.style.bottom=r,e.style.left=i,e.style.right=a}var Kr=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e))._cornerNameToContainerLookup={},r._positionNameToContainerLookup={},r._components=new Array,r._componentToKey=new Map,r._handles=new L.a,r.view=null,r._initContainers(),r}return Object(c.a)(n,[{key:"initialize",value:function(){this._handles.add([Object(x.a)(this,"view.padding, container",this._applyViewPadding.bind(this)),Object(x.a)(this,"padding",this._applyUIPadding.bind(this))])}},{key:"destroy",value:function(){this.container=null;var e,t=Object(Y.a)(this._components);try{for(t.s();!(e=t.n()).done;){e.value.destroy()}}catch(n){t.e(n)}finally{t.f()}this._components.length=0,this._handles.destroy(),this._componentToKey.clear()}},{key:"container",set:function(e){var t=this._get("container");e!==t&&(e&&(e.classList.add(Vr),this._attachContainers(e)),t&&(t.classList.remove(Vr),Yr(t,{top:"",bottom:"",left:"",right:""}),Object(Ir.b)(t)),this._set("container",e))}},{key:"height",get:function(){var e=this.get("view.height")||0;if(0===e)return e;var t=this._getViewPadding(),n=t.top+t.bottom;return Math.max(e-n,0)}},{key:"padding",get:function(){return this._get("padding")},set:function(e){e?this._override("padding",e):this._clearOverride("padding")}},{key:"castPadding",value:function(e){return"number"==typeof e?{bottom:e,top:e,right:e,left:e}:Object(A.a)(Object(A.a)({},Dr),e)}},{key:"width",get:function(){var e=this.get("view.width")||0;if(0===e)return e;var t=this._getViewPadding(),n=t.left+t.right;return Math.max(e-n,0)}},{key:"add",value:function(e,t){var n,r,i,a,o=this;if(Array.isArray(e))e.forEach((function(e){return o.add(e,t)}));else{var s=Jr(e);s&&(i=(n=s).index,t=n.position,e=n.component,a=n.key),t&&"object"==typeof t&&(i=(r=t).index,a=r.key,t=r.position),!e||t&&!this._isValidPosition(t)||this._add(e,t,i,a)}}},{key:"remove",value:function(e,t){var n=this;if(e){if(Array.isArray(e))return e.map((function(e){return n.remove(e,t)}));var r=this._find(e);if(r){var i=this._componentToKey;if(i.has(e)&&i.get(e)!==t)return;var a=this._components.indexOf(r);return r.node.parentNode&&r.node.parentNode.removeChild(r.node),this._componentToKey.delete(e),this._components.splice(a,1)[0]}}}},{key:"empty",value:function(e){var t=this;return Array.isArray(e)?e.map((function(e){return t.empty(e)})).reduce((function(e,t){return e.concat(t)})):(e=e||Nr)===Nr?Array.prototype.slice.call(this._manualContainer.children).filter((function(e){return!e.classList.contains(zr)})).map((function(e){return t.remove(e)})):this._isValidPosition(e)?Array.prototype.slice.call(this._cornerNameToContainerLookup[e].children).map(this.remove,this):null}},{key:"move",value:function(e,t){var n=this;if(Array.isArray(e)&&e.forEach((function(e){return n.move(e,t)})),e){var r,i=Jr(e)||Jr(t);if(i&&(r=i.index,t=i.position,e=i.component||e),!t||this._isValidPosition(t)){var a=this.remove(e);a&&this.add(a,{position:t,index:r})}}}},{key:"find",value:function(e){if(!e)return null;var t=this._findById(e);return t&&(t.widget||t.node)}},{key:"getPosition",value:function(e){for(var t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}},{key:"_add",value:function(e,t,n,r){e instanceof Rr||(e=new Rr({node:e})),this._place({component:e,position:t,index:n}),this._components.push(e),r&&this._componentToKey.set(e,r)}},{key:"_find",value:function(e){return e?e instanceof Rr?this._findByComponent(e):"string"==typeof e?this._findById(e):this._findByNode(e.domNode||e):null}},{key:"_getViewPadding",value:function(){return this.get("view.padding")||Fr}},{key:"_attachContainers",value:function(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}},{key:"_initContainers",value:function(){var e=document.createElement("div");e.classList.add(Ur),e.classList.add(Gr);var t=document.createElement("div");t.classList.add(Ur),t.classList.add(Br);var n=document.createElement("div");n.classList.add(qr),n.classList.add(zr),e.appendChild(n);var r=document.createElement("div");r.classList.add(Hr),r.classList.add(zr),e.appendChild(r);var i=document.createElement("div");i.classList.add(Wr),i.classList.add(zr),e.appendChild(i);var a=document.createElement("div");a.classList.add($r),a.classList.add(zr),e.appendChild(a),this._innerContainer=e,this._manualContainer=t;var o=Object(Lr.f)();this._cornerNameToContainerLookup={"top-left":n,"top-right":r,"bottom-left":i,"bottom-right":a,"top-leading":o?r:n,"top-trailing":o?n:r,"bottom-leading":o?a:i,"bottom-trailing":o?i:a},this._positionNameToContainerLookup=Object(A.a)({manual:t},this._cornerNameToContainerLookup)}},{key:"_isValidPosition",value:function(e){return!!this._positionNameToContainerLookup[e]}},{key:"_place",value:function(e){var t=e.component,n=e.position||Nr,r=e.index,i=this._positionNameToContainerLookup[n],a=r>-1;if(function(e){return e&&!e._started&&"function"==typeof e.postMixInProperties&&"function"==typeof e.buildRendering&&"function"==typeof e.postCreate&&"function"==typeof e.startup}(t.widget)&&t.widget.startup(),a){var o=Array.prototype.slice.call(i.children);0!==r?r>=o.length?i.appendChild(t.node):Object(Ir.c)(t.node,o[r]):i.firstChild?Object(Ir.c)(t.node,i.firstChild):i.appendChild(t.node)}else i.appendChild(t.node)}},{key:"_applyViewPadding",value:function(){var e=this.container;e&&Yr(e,this._toPxPosition(this._getViewPadding()))}},{key:"_applyUIPadding",value:function(){var e=this._innerContainer;e&&Yr(e,this._toPxPosition(this.padding))}},{key:"_toPxPosition",value:function(e){return{top:this._toPxUnit(e.top),left:this._toPxUnit(e.left),right:this._toPxUnit(e.right),bottom:this._toPxUnit(e.bottom)}}},{key:"_toPxUnit",value:function(e){return 0===e?"0":e+"px"}},{key:"_findByComponent",value:function(e){var t,n=null;return this._components.some((function(r){return(t=r===e)&&(n=r),t})),n}},{key:"_findById",value:function(e){var t,n=null;return this._components.some((function(r){return(t=r.id===e)&&(n=r),t})),n}},{key:"_findByNode",value:function(e){var t,n=null;return this._components.some((function(r){return(t=r.node===e)&&(n=r),t})),n}}]),n}(ne.a.EventedAccessor);Object(b.a)([Object(g.b)()],Kr.prototype,"container",null),Object(b.a)([Object(g.b)()],Kr.prototype,"height",null),Object(b.a)([Object(g.b)({value:Dr})],Kr.prototype,"padding",null),Object(b.a)([Object(Pr.a)("padding")],Kr.prototype,"castPadding",null),Object(b.a)([Object(g.b)()],Kr.prototype,"view",void 0),Object(b.a)([Object(g.b)()],Kr.prototype,"width",null);var Zr=Kr=Object(b.a)([Object(O.a)("esri.views.ui.UI")],Kr),Xr=n(77),Qr=n(75),ei=n(9),ti=n(72),ni=n(300);function ri(e,t){return e&&"copyright"in e&&(!t||"function"==typeof e.originOf&&"user"===e.originOf("copyright"))}function ii(e,t,n){n&&t&&(e.find((function(e){return e.layerView===t&&e.text===n}))||e.push({text:n,layerView:t}))}function ai(e){return"bing-maps"===e.type}var oi=[],si=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).clear=function(){r._fetchedAttributionData.clear(),r._pendingAttributions.clear(),r.handles.remove("suspension"),r.notifyChange("state")},r._pendingAttributions=new Set,r._fetchedAttributionData=new Map,r.items=new w.a,r.view=null,r._allLayerViewsChange=function(e){r.handles.remove("suspension");var t=r.get("view.allLayerViews");t&&r.handles.add(t.map((function(e){return e.watch(["suspended","attributionVisible"],r._updateAttributionItems)})),"suspension"),e&&e.removed&&e.removed.forEach((function(e){r._pendingAttributions.delete(e),r._fetchedAttributionData.delete(e)})),r._updateAttributionItems()},r._updateAttributionItems=function(){var e=r.get("view.allLayerViews");oi.length=0,e?(e.forEach((function(e){if(!e.suspended&&e.get("layer.attributionVisible")){var t=e.layer;if(ri(t,"user"))ii(oi,e,t.copyright);else if(t.hasAttributionData){if(r._fetchedAttributionData.has(e)){var n=r._fetchedAttributionData.get(e);return void(n?ii(oi,e,r._getDynamicAttribution(n,r.view,t)):ri(t)&&ii(oi,e,t.copyright))}r._fetchAttributionData(e)}else{var i=t.get("portalItem.accessInformation");ii(oi,e,i||t.copyright)}}})),function(e,t){return e.length!==t.length||e.some((function(e,n){return e.text!==t[n].text}))}(r.items,oi)&&(r.items.removeAll(),r.items.addMany(oi)),oi.length=0,r.notifyChange("state")):r.clear()},r.handles.add([Object(x.b)(Object(l.a)(r),"view.allLayerViews","change",r._allLayerViewsChange,r._allLayerViewsChange,r.clear),Object(x.k)(Object(l.a)(r),"view.stationary",(function(){return r._updateAttributionItems()}))]),r}return Object(c.a)(n,[{key:"destroy",value:function(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}},{key:"state",get:function(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}},{key:"_fetchAttributionData",value:function(){var e=Object(h.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._pendingAttributions.has(t)){e.next=2;break}return e.abrupt("return");case 2:return this._pendingAttributions.add(t),e.next=5,Object(ni.c)(t.layer.fetchAttributionData());case 5:n=e.sent,this._pendingAttributions.has(t)&&(r=n.ok?this._createContributionIndex(n.value,ai(t.layer)):null,this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,r)),this._updateAttributionItems();case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_createContributionIndex",value:function(e,t){var n=e.contributors,r={};if(!n)return r;for(var i=0;i<n.length;i++){var a=n[i],o=a.coverageAreas;if(!o)return;var s,c=Object(Y.a)(o);try{for(c.s();!(s=c.n()).done;)for(var l=s.value,u=l.bbox,d=l.zoomMin-(t&&l.zoomMin?1:0),f=l.zoomMax-(t&&l.zoomMax?1:0),p={xmin:u[1],ymin:u[0],xmax:u[3],ymax:u[2],spatialReference:B.a.WGS84},h={extent:Object(G.b)(p),attribution:a.attribution||"",score:null!=l.score?l.score:100,id:i},b=d;b<=f;b++)r[b]=r[b]||[],r[b].push(h)}catch(v){c.e(v)}finally{c.f()}}return r.maxKey=Math.max.apply(null,Object.keys(r)),r}},{key:"_getDynamicAttribution",value:function(e,t,n){var r=t.extent,i=t.scale,a=n.tileInfo.scaleToZoom(i);if(a=Math.min(e.maxKey,Math.round(a)),!r||null==a||a<=-1)return"";var o=e[a],s=Object(G.d)(r.center.clone().normalize(),t.spatialReference),c={};return o?o.filter((function(e){var t=!c[e.id]&&s&&Object(Ft.e)(e.extent,s);return t&&(c[e.id]=!0),t})).sort((function(e,t){return t.score-e.score||e.objectId-t.objectId})).map((function(e){return e.attribution})).join(", "):""}}]),n}(ce.a);Object(b.a)([Object(g.b)({readOnly:!0,type:w.a})],si.prototype,"items",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],si.prototype,"state",null),Object(b.a)([Object(g.b)()],si.prototype,"view",void 0);var ci=si=Object(b.a)([Object(O.a)("esri.widgets.Attribution.AttributionViewModel")],si),li="esri-attribution esri-widget",ui="esri-widget__anchor",di="esri-attribution__powered-by",fi="esri-attribution__sources",pi="esri-attribution--open",hi="esri-attribution__sources--open",bi="esri-attribution__link",vi="esri-icon-description",yi="esri-interactive",mi=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e,r){var i;return Object(s.a)(this,n),(i=t.call(this,e,r))._isOpen=!1,i._attributionTextOverflowed=!1,i._prevSourceNodeHeight=0,i.iconClass=vi,i.itemDelimiter=" | ",i.label=void 0,i.messages=null,i.view=null,i.viewModel=new ci,i}return Object(c.a)(n,[{key:"initialize",value:function(){var e=this;this.own(Object(x.b)(this,"viewModel.items","change",(function(){return e.scheduleRender()})))}},{key:"attributionText",get:function(){return this.viewModel.items.reduce((function(e,t){return-1===e.indexOf(t.text)&&e.push(t.text),e}),[]).join(this.itemDelimiter)}},{key:"render",value:function(){var e=Object(Mn.a)({},pi,this._isOpen);return Object(ei.a)("div",{bind:this,class:this.classes(li,e),onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}},{key:"renderPoweredBy",value:function(){return Object(ei.a)("div",{class:di},"Powered by"," ",Object(ei.a)("a",{class:this.classes(bi,ui),href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}},{key:"renderSourcesNode",value:function(){var e,t=this._isOpen,n=this._isInteractive(),r=n?0:-1,i=this.attributionText,a=n?"button":void 0,o=(e={},Object(Mn.a)(e,hi,t),Object(Mn.a)(e,yi,n),e);return Object(ei.a)("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes(fi,o),innerHTML:i,role:a,tabIndex:r})}},{key:"_afterSourcesNodeCreate",value:function(e){this._prevSourceNodeHeight=e.clientWidth}},{key:"_afterSourcesNodeUpdate",value:function(e){var t=!1,n=e.clientHeight,r=e.clientWidth,i=e.scrollWidth>=r,a=this._attributionTextOverflowed!==i;if(this._attributionTextOverflowed=i,a&&(t=!0),this._isOpen){var o=n<this._prevSourceNodeHeight;this._prevSourceNodeHeight=n,o&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}},{key:"_toggleState",value:function(){this._isInteractive()&&(this._isOpen=!this._isOpen)}},{key:"_isInteractive",value:function(){return this._isOpen||this._attributionTextOverflowed}}]),n}(ti.a);Object(b.a)([Object(g.b)({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],mi.prototype,"attributionText",null),Object(b.a)([Object(g.b)()],mi.prototype,"iconClass",void 0),Object(b.a)([Object(g.b)()],mi.prototype,"itemDelimiter",void 0),Object(b.a)([Object(g.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],mi.prototype,"label",void 0),Object(b.a)([Object(g.b)(),Object(Qr.a)("esri/widgets/Attribution/t9n/Attribution")],mi.prototype,"messages",void 0),Object(b.a)([Object(X.a)("viewModel.view")],mi.prototype,"view",void 0),Object(b.a)([Object(g.b)({type:ci})],mi.prototype,"viewModel",void 0),Object(b.a)([Object(Xr.a)()],mi.prototype,"_toggleState",null);var gi=mi=Object(b.a)([Object(O.a)("esri.widgets.Attribution")],mi),Oi=n(334),ji=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e))._handles=new L.a,r.orientation={x:0,y:0,z:0},r.view=null,r._updateForCamera=r._updateForCamera.bind(Object(l.a)(r)),r._updateForRotation=r._updateForRotation.bind(Object(l.a)(r)),r._updateRotationWatcher=r._updateRotationWatcher.bind(Object(l.a)(r)),r}return Object(c.a)(n,[{key:"initialize",value:function(){this._handles.add(Object(x.a)(this,"view",this._updateRotationWatcher))}},{key:"destroy",value:function(){this._handles.destroy(),this._handles=null,this.view=null}},{key:"canShowNorth",get:function(){var e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}},{key:"state",get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}},{key:"reset",value:function(){if(this.get("view.ready")){var e={};"2d"===this.view.type?e.rotation=0:e.heading=0,this.callGoTo({target:e})}}},{key:"_updateForRotation",value:function(e){null!=e&&(this.orientation={z:e})}},{key:"_updateForCamera",value:function(e){if(e){var t=-e.heading;this.orientation={x:0,y:0,z:t}}}},{key:"_updateRotationWatcher",value:function(e){this._handles.removeAll(),e&&("2d"===e.type?this._handles.add(Object(x.a)(this,"view.rotation",this._updateForRotation)):this._handles.add(Object(x.a)(this,"view.camera",this._updateForCamera)))}}]),n}(Object(Oi.a)(ee.a));Object(b.a)([Object(g.b)({readOnly:!0})],ji.prototype,"canShowNorth",null),Object(b.a)([Object(g.b)()],ji.prototype,"orientation",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],ji.prototype,"state",null),Object(b.a)([Object(g.b)()],ji.prototype,"view",void 0);var wi=ji=Object(b.a)([Object(O.a)("esri.widgets.CompassViewModel")],ji),_i="esri-compass esri-widget--button esri-widget",ki="esri-icon-font-fallback-text",xi="esri-compass__icon",Si="esri-icon-dial",Ti="esri-icon-compass",Ei="esri-icon-locate-circled",Ci="esri-interactive",Pi="esri-disabled",Ii=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e,r){var i;return Object(s.a)(this,n),(i=t.call(this,e,r)).goToOverride=null,i.iconClass=Ei,i.label=void 0,i.messages=null,i.view=null,i.viewModel=new wi,i}return Object(c.a)(n,[{key:"reset",value:function(){return this.viewModel.reset()}},{key:"render",value:function(){var e,t,n=this.viewModel,r=n.orientation,i=n.state,a="disabled"===i,o="compass"===("rotation"===i?"rotation":"compass"),s=a?-1:0,c=(e={},Object(Mn.a)(e,Pi,a),Object(Mn.a)(e,Ci,!a),e),l=(t={},Object(Mn.a)(t,Ti,o),Object(Mn.a)(t,Si,!o),t),u=this.messages;return Object(ei.a)("div",{bind:this,class:this.classes(_i,c),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:s,"aria-label":u.reset,title:u.reset},Object(ei.a)("span",{"aria-hidden":"true",class:this.classes(xi,l),styles:this._toRotationTransform(r)}),Object(ei.a)("span",{class:ki},u.reset))}},{key:"_reset",value:function(){this.viewModel.reset()}},{key:"_toRotationTransform",value:function(e){return{transform:"rotateZ(".concat(e.z,"deg)")}}}]),n}(ti.a);Object(b.a)([Object(X.a)("viewModel.goToOverride")],Ii.prototype,"goToOverride",void 0),Object(b.a)([Object(g.b)()],Ii.prototype,"iconClass",void 0),Object(b.a)([Object(g.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ii.prototype,"label",void 0),Object(b.a)([Object(g.b)(),Object(Qr.a)("esri/widgets/Compass/t9n/Compass")],Ii.prototype,"messages",void 0),Object(b.a)([Object(X.a)("viewModel.view")],Ii.prototype,"view",void 0),Object(b.a)([Object(g.b)({type:wi})],Ii.prototype,"viewModel",void 0),Object(b.a)([Object(Xr.a)()],Ii.prototype,"_reset",null);var Mi=Ii=Object(b.a)([Object(O.a)("esri.widgets.Compass")],Ii),Ai=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e))._handles=new L.a,r.navigationMode="pan",r.view=null,r}return Object(c.a)(n,[{key:"initialize",value:function(){this._handles.add(Object(x.e)(this,"view.inputManager",this._setNavigationMode.bind(this)))}},{key:"destroy",value:function(){this._handles.destroy(),this._handles=null,this.view=null}},{key:"state",get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"}},{key:"toggle",value:function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())}},{key:"_setNavigationMode",value:function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"}}]),n}(ee.a);Object(b.a)([Object(g.b)({readOnly:!0})],Ai.prototype,"state",null),Object(b.a)([Object(g.b)()],Ai.prototype,"navigationMode",void 0),Object(b.a)([Object(g.b)()],Ai.prototype,"view",void 0);var Ri=Ai=Object(b.a)([Object(O.a)("esri.widgets.NavigationToggleViewModel")],Ai),Li="esri-navigation-toggle esri-widget",Fi="esri-navigation-toggle__button esri-widget--button",Di="esri-navigation-toggle__button--active",Ni="esri-navigation-toggle__button--pan",Vi="esri-navigation-toggle__button--rotate",zi="esri-navigation-toggle--horizontal",Ui="esri-icon-rotate",Bi="esri-icon-pan",Gi="esri-icon-pan2",qi="esri-disabled",Hi=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e,r){var i;return Object(s.a)(this,n),(i=t.call(this,e,r)).iconClass=Gi,i.label=void 0,i.messages=null,i.view=null,i.viewModel=new Ri,i}return Object(c.a)(n,[{key:"layout",set:function(e){"horizontal"!==e&&(e="vertical"),this._set("layout",e)}},{key:"toggle",value:function(){return this.viewModel.toggle()}},{key:"render",value:function(){var e,t="disabled"===this.get("viewModel.state"),n="pan"===this.get("viewModel.navigationMode"),r=(e={},Object(Mn.a)(e,qi,t),Object(Mn.a)(e,zi,"horizontal"===this.layout),e),i=Object(Mn.a)({},Di,n),a=Object(Mn.a)({},Di,!n),o=t?-1:0,s=this.messages.toggle;return Object(ei.a)("div",{bind:this,class:this.classes(Li,r),onclick:this._toggle,onkeydown:this._toggle,tabIndex:o,"aria-label":s,title:s},Object(ei.a)("div",{class:this.classes(Fi,Ni,i)},Object(ei.a)("span",{class:Bi})),Object(ei.a)("div",{class:this.classes(Fi,Vi,a)},Object(ei.a)("span",{class:Ui})))}},{key:"_toggle",value:function(){this.toggle()}}]),n}(ti.a);Object(b.a)([Object(g.b)()],Hi.prototype,"iconClass",void 0),Object(b.a)([Object(g.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Hi.prototype,"label",void 0),Object(b.a)([Object(g.b)({value:"vertical"})],Hi.prototype,"layout",null),Object(b.a)([Object(g.b)(),Object(Qr.a)("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Hi.prototype,"messages",void 0),Object(b.a)([Object(X.a)("viewModel.view")],Hi.prototype,"view",void 0),Object(b.a)([Object(g.b)({type:Ri})],Hi.prototype,"viewModel",void 0),Object(b.a)([Object(Xr.a)()],Hi.prototype,"_toggle",null);var Wi=Hi=Object(b.a)([Object(O.a)("esri.widgets.NavigationToggle")],Hi),$i="esri-widget--button esri-widget",Ji="esri-disabled",Yi="esri-interactive",Ki="esri-icon-font-fallback-text",Zi="esri-icon",Xi=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.apply(this,arguments)).enabled=!0,e.iconClass="",e.title="",e}return Object(c.a)(n,[{key:"render",value:function(){var e,t=this.enabled?0:-1,n=(e={},Object(Mn.a)(e,Ji,!this.enabled),Object(Mn.a)(e,Yi,this.enabled),e),r=Object(Mn.a)({},this.iconClass,!!this.iconClass);return Object(ei.a)("div",{bind:this,class:this.classes($i,n),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:t,title:this.title},Object(ei.a)("span",{"aria-hidden":"true",role:"presentation",class:this.classes(Zi,r)}),Object(ei.a)("span",{class:Ki},this.title))}},{key:"_triggerAction",value:function(){this.action.call(this)}}]),n}(ti.a);Object(b.a)([Object(g.b)()],Xi.prototype,"action",void 0),Object(b.a)([Object(g.b)()],Xi.prototype,"enabled",void 0),Object(b.a)([Object(g.b)()],Xi.prototype,"iconClass",void 0),Object(b.a)([Object(g.b)()],Xi.prototype,"title",void 0),Object(b.a)([Object(Xr.a)()],Xi.prototype,"_triggerAction",null);var Qi=Xi=Object(b.a)([Object(O.a)("esri.widgets.IconButton")],Xi),ea=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"canZoomIn",get:function(){if(!this.get("view.ready"))return!1;var e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMaxScale");return 0===t||e>t}},{key:"canZoomOut",get:function(){if(!this.get("view.ready"))return!1;var e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMinScale");return 0===t||e<t}}]),n}(ee.a);Object(b.a)([Object(g.b)({readOnly:!0})],ea.prototype,"canZoomIn",null),Object(b.a)([Object(g.b)({readOnly:!0})],ea.prototype,"canZoomOut",null),Object(b.a)([Object(g.b)()],ea.prototype,"view",void 0);var ta=ea=Object(b.a)([Object(O.a)("esri.widgets.Zoom.ZoomConditions2D")],ea),na=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"canZoomIn",get:function(){return!!this.get("view.ready")}},{key:"canZoomOut",get:function(){return!!this.get("view.ready")}}]),n}(ee.a);Object(b.a)([Object(g.b)({readOnly:!0})],na.prototype,"canZoomIn",null),Object(b.a)([Object(g.b)({readOnly:!0})],na.prototype,"canZoomOut",null),Object(b.a)([Object(g.b)()],na.prototype,"view",void 0);var ra=na=Object(b.a)([Object(O.a)("esri.widgets.Zoom.ZoomConditions3D")],na),ia=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).canZoomIn=!1,r.canZoomOut=!1,r}return Object(c.a)(n,[{key:"destroy",value:function(){this.view=null}},{key:"state",get:function(){return this.get("view.ready")?"ready":"disabled"}},{key:"view",set:function(e){e?"2d"===e.type?this._zoomConditions=new ta({view:e}):"3d"===e.type&&(this._zoomConditions=new ra({view:e})):this._zoomConditions=null,this._set("view",e)}},{key:"zoomIn",value:function(){if(this.canZoomIn){var e=this.view;"2d"===e.type?e.mapViewNavigation.zoomIn():Object(U.l)(e.goTo({zoomFactor:2}))}}},{key:"zoomOut",value:function(){if(this.canZoomOut){var e=this.view;"2d"===e.type?e.mapViewNavigation.zoomOut():Object(U.l)(e.goTo({zoomFactor:.5}))}}}]),n}(ee.a);Object(b.a)([Object(g.b)()],ia.prototype,"_zoomConditions",void 0),Object(b.a)([Object(g.b)({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],ia.prototype,"canZoomIn",void 0),Object(b.a)([Object(g.b)({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],ia.prototype,"canZoomOut",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],ia.prototype,"state",null),Object(b.a)([Object(g.b)()],ia.prototype,"view",null);var aa=ia=Object(b.a)([Object(O.a)("esri.widgets.Zoom.ZoomViewModel")],ia),oa="esri-zoom esri-widget",sa="esri-zoom--horizontal",ca="esri-icon-plus",la="esri-icon-minus",ua="esri-icon-zoom-in-magnifying-glass",da=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e,r){var i;return Object(s.a)(this,n),(i=t.call(this,e,r)).iconClass=ua,i.label=void 0,i.messages=null,i.view=null,i.viewModel=new aa,i}return Object(c.a)(n,[{key:"initialize",value:function(){this._zoomInButton=new Qi({action:this.zoomIn.bind(this),iconClass:ca}),this._zoomOutButton=new Qi({action:this.zoomOut.bind(this),iconClass:la})}},{key:"destroy",value:function(){this._zoomInButton.destroy(),this._zoomOutButton.destroy(),this._zoomInButton=null,this._zoomOutButton=null}},{key:"layout",set:function(e){"horizontal"!==e&&(e="vertical"),this._set("layout",e)}},{key:"render",value:function(){var e=this.viewModel,t=Object(Mn.a)({},sa,"horizontal"===this.layout);return this._zoomInButton.enabled="ready"===e.state&&e.canZoomIn,this._zoomOutButton.enabled="ready"===e.state&&e.canZoomOut,this._zoomInButton.title=this.messages.zoomIn,this._zoomOutButton.title=this.messages.zoomOut,Object(ei.a)("div",{class:this.classes(oa,t)},this._zoomInButton.render(),this._zoomOutButton.render())}},{key:"zoomIn",value:function(){return this.viewModel.zoomIn()}},{key:"zoomOut",value:function(){return this.viewModel.zoomOut()}}]),n}(ti.a);Object(b.a)([Object(g.b)()],da.prototype,"iconClass",void 0),Object(b.a)([Object(g.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],da.prototype,"label",void 0),Object(b.a)([Object(g.b)({value:"vertical"})],da.prototype,"layout",null),Object(b.a)([Object(g.b)(),Object(Qr.a)("esri/widgets/Zoom/t9n/Zoom")],da.prototype,"messages",void 0),Object(b.a)([Object(X.a)("viewModel.view")],da.prototype,"view",void 0),Object(b.a)([Object(g.b)({type:aa})],da.prototype,"viewModel",void 0);var fa=da=Object(b.a)([Object(O.a)("esri.widgets.Zoom")],da),pa="esri.views.ui.DefaultUI";m.a.getLogger(pa);var ha=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e))._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"},r.components=[],r}return Object(c.a)(n,[{key:"initialize",value:function(){this._handles.add([Object(x.a)(this,"components",this._componentsWatcher.bind(this)),Object(x.a)(this,"view",this._updateViewAwareWidgets.bind(this))])}},{key:"_add",value:function(e,t,r,i){if("string"==typeof e&&this._defaultPositionLookup[e]){if(this._find(e))return;e=this._createComponent(e)}Object(u.a)(Object(d.a)(n.prototype),"_add",this).call(this,e,t,r,i)}},{key:"_removeComponents",value:function(e){var t=this;e.forEach((function(e){var n=t._find(e);n&&(t.remove(n),n.destroy())}))}},{key:"_updateViewAwareWidgets",value:function(e){var t=this;this.components.forEach((function(n){var r=t._find(n),i=r&&r.widget;(function(e){return e&&void 0!==e.view})(i)&&(i.view=e)}))}},{key:"_componentsWatcher",value:function(e,t){this._removeComponents(t),this._addComponents(e),this._adjustPadding(e)}},{key:"_adjustPadding",value:function(e){if(-1===e.indexOf("attribution")&&!this._isOverridden("padding")){var t=this.padding.top;this.padding=t}}},{key:"_addComponents",value:function(e){var t=this;this.initialized&&e.forEach((function(e){return t.add(t._createComponent(e),t._defaultPositionLookup[e])}))}},{key:"_createComponent",value:function(e){var t=this._createWidget(e);if(t)return new Rr({id:e,node:t})}},{key:"_createWidget",value:function(e){return"attribution"===e?this._createAttribution():"compass"===e?this._createCompass():"navigation-toggle"===e?this._createNavigationToggle():"zoom"===e?this._createZoom():void 0}},{key:"_createAttribution",value:function(){return new gi({view:this.view})}},{key:"_createCompass",value:function(){return new Mi({view:this.view})}},{key:"_createNavigationToggle",value:function(){return new Wi({view:this.view})}},{key:"_createZoom",value:function(){return new fa({view:this.view})}}]),n}(Zr);Object(b.a)([Object(g.b)()],ha.prototype,"components",void 0);var ba=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).components=["attribution","zoom"],r}return n}(ha=Object(b.a)([Object(O.a)(pa)],ha));Object(b.a)([Object(g.b)()],ba.prototype,"components",void 0);var va,ya,ma,ga,Oa,ja,wa=ba=Object(b.a)([Object(O.a)("esri.views.ui.2d.DefaultUI2D")],ba),_a=m.a.getLogger("esri.views.MapView");function ka(){return(ka=Object(h.a)(a.a.mark((function e(){var t,r,i,s,c,l,u,d,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(28).then(n.bind(null,1342)),Promise.all([n.e(1),n.e(2),n.e(3),n.e(4),n.e(21)]).then(n.bind(null,1436))]);case 2:t=e.sent,r=Object(o.a)(t,2),i=r[1],s=i.GraphicsView2D,c=i.GraphicContainer,l=i.LabelManager,u=i.MapViewNavigation,d=i.MagnifierView2D,f=i.Stage,ya=s,ma=c,ga=l,Oa=u,ja=d,va=f;case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xa(e,t,n){if(e)if(Array.isArray(e)||w.a.isCollection(e)){if(0===e.length)return;e.forEach((function(e){return xa(e,t,n)}))}else!function(e){return e instanceof _.a}(e)?n.add(e):t.add(e)}var Sa=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e))._magnifierView=null,r._stage=null,r._resolveWhenReady=[],r.rootLayerViews=new k.a({root:Object(l.a)(r),rootCollectionNames:["basemapView.baseLayerViews","layerViews","basemapView.referenceLayerViews"],getChildrenFunction:function(e){return null}}),r.floors=new w.a,r.graphicsView=null,r.highlightOptions=new Tr,r.inputManager=new kr({view:Object(l.a)(r)}),r.mapViewNavigation=null,r.supersampleScreenhotsEnabled=!0,r.ui=new wa,r.rendering=!1,Object(I.a)(),r}return Object(c.a)(n,[{key:"destroy",value:function(){this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}},{key:"background",get:function(){return this.get("map.initialViewProperties.background")||null},set:function(e){void 0===e?this._clearOverride("background"):this._override("background",e)}},{key:"textureManager",get:function(){return this._stage.painter.textureManager}},{key:"navigating",get:function(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}},{key:"toMap",value:function(e){if(Object(z.d)(e)){var t=Object(z.c)(this,e);return Object(u.a)(Object(d.a)(n.prototype),"toMap",this).call(this,t)}return Object(u.a)(Object(d.a)(n.prototype),"toMap",this).call(this,e)}},{key:"hitTest",value:function(e,t){var n=Object(z.d)(e)?Object(z.c)(this,e):e;if(!this.ready||isNaN(n.x)||isNaN(n.y))return Promise.resolve({screenPoint:n,results:[]});var r=this.toMap(n),i=[this.graphicsView];i.push.apply(i,this.allLayerViews.toArray().reverse());var a=new Set,o=new Set,s=new Set,c=new Set;return t&&(xa(t&&t.include,a,s),xa(t&&t.exclude,o,c)),Promise.all(i.map((function(e){return!e||!e.hitTest||s.size>0&&!e.layer||s.size>0&&e.layer&&!s.has(e.layer)||c.size>0&&e.layer&&c.has(e.layer)?null:e.hitTest(n.x,n.y)}))).then((function(e){return{screenPoint:n,results:e.filter((function(e){return null!=e&&(!(a.size>0)||a.has(e))&&(!(o.size>0)||!o.has(e))})).map((function(e){return{mapPoint:r,graphic:e}}))}}))}},{key:"takeScreenshot",value:function(e){return this.ready?this._stage.takeScreenshot(Object(M.e)(e,this),this.allLayerViews):Promise.reject("Map view cannot be used before it is ready")}},{key:"on",value:function(e,t,r,i){return this.inputManager&&this.viewEvents.on(e,t,r,i)||Object(u.a)(Object(d.a)(n.prototype),"on",this).call(this,e,t)}},{key:"hasEventListener",value:function(e){return Object(u.a)(Object(d.a)(n.prototype),"hasEventListener",this).call(this,e)||this.viewEvents.hasHandler(e)}},{key:"whenLayerView",value:function(e){return Object(u.a)(Object(d.a)(n.prototype),"whenLayerView",this).call(this,e)}},{key:"graphicChanged",value:function(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}},{key:"whenReady",value:function(){var e=this;return new Promise((function(t){e.ready?t(e):e._resolveWhenReady.push(t)}))}},{key:"forceDOMReadyCycle",value:function(){this.forceReadyCycle()}},{key:"validate",value:function(){var e=function(e){e=Object(A.a)(Object(A.a)({},Cr),e);var t=Object(Er.a)();return t.available?e.checkMajorWebPerformanceCaveat&&t.majorPerformanceCaveat?new j.a("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?t.supportsElementIndexUint?t.supportsStandardDerivatives?t.supportsInstancedArrays?null:new j.a("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported."):new j.a("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported."):new j.a("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported."):new j.a("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new j.a("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new j.a("webgl:required","WebGL is required but not supported.")}({checkMajorWebPerformanceCaveat:!1});return Object(v.a)("safari")&&Object(v.a)("safari")<9&&(e=new j.a("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:Object(v.a)("safari")})),Object(y.k)(e)?(_a.warn("#validate()",e.message),Promise.reject(e)):function(){return ka.apply(this,arguments)}()}},{key:"_startup",value:function(){var e=this;this.timeline.begin("MapView Startup"),Object(u.a)(Object(d.a)(n.prototype),"_startup",this).call(this),this.graphics.owner=this;var t={disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},r=new va(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenhotsEnabled,contextOptions:t,renderingOptions:this.renderingOptions,timeline:this.timeline}),i=new ya({view:this,graphics:this.graphics,requestUpdateCallback:function(){return e.requestUpdate()},container:new ma(this.featuresTilingScheme)}),a=new Oa({view:this,animationManager:this.animationManager}),o=new ga({view:this});this._magnifierView=new ja,this._magnifierView.magnifier=this.magnifier,this._stage=r,this.frameTask.graphicsView=i,this._set("graphicsView",i),this._set("mapViewNavigation",a),this._set("labelManager",o),this.handles.add([this.rootLayerViews.on("change",(function(){return e._updateStageChildren()})),r.on("post-render",(function(){return e._set("rendering",r.renderRequested)})),r.on("will-render",(function(){return e._set("rendering",r.renderRequested)})),r.on("webgl-error",(function(t){return e.fatalError=t.error})),Object(x.a)(this,"stationary",(function(e){return r.stationary=e}),!0),Object(x.a)(this,"state.id",(function(){return r.state=e.state}),!0),Object(x.a)(this,"background",(function(t){r.background=t,e._magnifierView.background=t}),!0),Object(x.a)(this,"magnifier",(function(t){return e._magnifierView.magnifier=t}),!0),Object(x.a)(this,"renderingOptions",(function(e){return r.renderingOptions=e}),!0),Object(x.a)(this,"highlightOptions",(function(){return r.highlightOptions=e.highlightOptions}),!0)],"map-view"),r.state=this.state,this._updateStageChildren();var s=this._resolveWhenReady;this._resolveWhenReady=[],s.forEach((function(t){return t(e)})),this.timeline.end("MapView Startup")}},{key:"_teardown",value:function(){this.handles.remove("map-view"),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this.graphicsView.destroy(),this.mapViewNavigation.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,Object(u.a)(Object(d.a)(n.prototype),"_teardown",this).call(this)}},{key:"_updateStageChildren",value:function(){var e=this;this._stage.removeAllChildren(),this.rootLayerViews.forEach((function(t){e._stage.addChild(t.container)}));var t=this.graphicsView;this._stage.addChild(t.container),this._stage.addChild(this._magnifierView)}}]),n}(function(e){var t=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._breakpointsHandles=new L.a,e.orientation=null,e.widthBreakpoint=null,e.heightBreakpoint=null,e.breakpoints=D,e}return Object(c.a)(n,[{key:"initialize",value:function(){this._breakpointsHandles.add(Object(x.a)(this,["breakpoints","size"],this._updateClassNames))}},{key:"destroy",value:function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=null)}},{key:"breakpoints",set:function(e){if(e!==this._get("breakpoints")){var t=function(e){var t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}(e);if(!t){var n=JSON.stringify(D,null,2);console.warn("provided breakpoints are not valid, using defaults:"+n)}e=t?e:D,this._set("breakpoints",Object(A.a)({},e))}}},{key:"_updateClassNames",value:function(){if(this.container){var e,t=R.a.acquire(),n=R.a.acquire(),r=!1;for(e in F){var i=this[e],a=F[e].getValue({viewSize:this.size,breakpoints:this.breakpoints});i!==a&&(r=!0,this[e]=a,N(e,i).forEach((function(e){return n.push(e)})),N(e,a).forEach((function(e){return t.push(e)})))}r&&(this._applyClassNameChanges(t,n),R.a.release(t),R.a.release(n))}}},{key:"_applyClassNameChanges",value:function(e,t){var n=this.container;n&&(t.forEach((function(e){return n.classList.remove(e)})),e.forEach((function(e){return n.classList.add(e)})))}},{key:"_removeActiveClassNames",value:function(){var e,t=this.container;if(t)for(e in F)N(e,this[e]).forEach((function(e){return t.classList.remove(e)}))}}]),n}(e);return Object(b.a)([Object(g.b)()],t.prototype,"breakpoints",null),Object(b.a)([Object(g.b)()],t.prototype,"orientation",void 0),Object(b.a)([Object(g.b)()],t.prototype,"widthBreakpoint",void 0),Object(b.a)([Object(g.b)()],t.prototype,"heightBreakpoint",void 0),t=Object(b.a)([Object(O.a)("esri.views.BreakpointsOwner")],t)}(Object(V.a)(gn)));Object(b.a)([Object(g.b)({type:P})],Sa.prototype,"background",null),Object(b.a)([Object(g.b)()],Sa.prototype,"floors",void 0),Object(b.a)([Object(g.b)()],Sa.prototype,"graphicsView",void 0),Object(b.a)([Object(g.b)({type:Tr})],Sa.prototype,"highlightOptions",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],Sa.prototype,"inputManager",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],Sa.prototype,"textureManager",null),Object(b.a)([Object(g.b)({readOnly:!0})],Sa.prototype,"mapViewNavigation",void 0),Object(b.a)([Object(g.b)({type:Boolean})],Sa.prototype,"navigating",null),Object(b.a)([Object(g.b)({type:Boolean,constructOnly:!0})],Sa.prototype,"supersampleScreenhotsEnabled",void 0),Object(b.a)([Object(g.b)({type:wa})],Sa.prototype,"ui",void 0),Object(b.a)([Object(g.b)({readOnly:!0})],Sa.prototype,"rendering",void 0),Object(b.a)([Object(g.b)({constructOnly:!0})],Sa.prototype,"renderCanvas",void 0),Object(b.a)([Object(g.b)({constructOnly:!0})],Sa.prototype,"deactivatedWebGLExtensions",void 0),Object(b.a)([Object(g.b)({constructOnly:!0})],Sa.prototype,"debugWebGLExtensions",void 0);var Ta=Sa=Object(b.a)([Object(O.a)("esri.views.MapView")],Sa);t.a=Ta},function(e,t,n){"use strict";var r=n(26),i=n(2),a=n(3),o=n(37),s=n(5),c=n(6),l=n(0),u=n(16),d=n(123),f=n(13),p=n(17),h=n(1),b=n(32),v=n(8),y=(n(12),n(19),n(20),n(111)),m=n(24),g=n(112),O=(n(143),n(51)),j=n(25),w=n(56),_=n(75),k=n(178),x=n(9),S=n(72),T=n(35),E=n(10),C=n(7),P=n.n(C),I=n(15),M=n(98),A=n(4),R=n(18),L=n(36),F=n(44),D=n(43),N=n(78),V=n(40),z=n(95),U=n(205),B=n(120),G=n(159),q=n(84),H=n(109),W=n(220),$=n(130),J=n(116),Y=n(209),K=n(74),Z=n(406),X=n(334),Q=n(39),ee=(n(14),n(22)),te=(n(138),n(226)),ne=n(340),re={light:["streets","gray","topo","terrain","national-geographic","oceans","osm","gray-vector","streets-vector","topo-vector","streets-relief-vector","streets-navigation-vector"],dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]};function ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:re;for(var n in t)if(t[n].indexOf(e)>-1)return n}function ae(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=null;return"string"==typeof e&&t.indexOf(e)>-1?r=e:e instanceof te.default&&(r=Object(ne.e)(e)),n?r||"gray":r}var oe=function(){function e(t){Object(i.a)(this,e),this.name=null,this.label=null,this.description=null,this.supportedBasemaps=null,this.basemapGroups=null,this.schemes=null;var n=t.name,r=t.label,a=t.description,o=t.schemes;this.name=n,this.label=r,this.description=a,this.schemes=o;var s=t.basemapGroups||re,c=[];if(s)for(var l in s)c=c.concat(s[l]);this.supportedBasemaps=c,this.basemapGroups=s}return Object(a.a)(e,[{key:"isBasemapSupported",value:function(e){var t=ae(e,this.supportedBasemaps);return!!(t&&this.supportedBasemaps.indexOf(t)>-1)}},{key:"getRawSchemes",value:function(e){var t=function(e,t,n){var r=null,i=null;if(t&&(r=ae(t,e,!1))){var a=ie(r);Object(A.k)(a)&&(i=a)}return!r&&n&&(r="dark"===n?"dark-gray":"gray",i=n),r||i||(r="gray",i="light"),{basemapId:r,basemapTheme:i}}(this.supportedBasemaps,e.basemap,e.basemapTheme),n=t.basemapId,r=t.basemapTheme,i=r;if(n){var a=ie(n,this.basemapGroups);Object(A.k)(a)&&(i=a)}var o=e.geometryType;"multipoint"===o?o="point":"mesh"===o&&(o="polygon");var s=this.schemes[o]||this.schemes.default;return{schemesInfo:Object(ee.a)(s[i]),basemapId:n,basemapTheme:r}}}]),e}();var se=n(38),ce=["streets","gray","topo","terrain","national-geographic","oceans","osm","gray-vector","streets-vector","topo-vector","streets-relief-vector","streets-navigation-vector"],le=["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"];[].concat(ce).concat(le);function ue(e,t){return Math.ceil(function(e){var t=e.width,n=e.height,r=e.pixelSizeAt(e.toMap(Object(se.e)(.5*t,.5*n),{exclude:[]}));if(r<=0&&(r=e.pixelSizeAt(e.toMap(Object(se.e)(.5*t,.95*n),{exclude:[]})))<=0){var i=e.camera.position.clone();i.z=0,r=2*e.pixelSizeAt(i)}return r}(t)*Object(se.g)(Object(se.j)(e)))}var de=function(e){var t=e.themeDictionary,n=new Map;for(var r in t){var i=t[r];n.set(r,new oe(i))}return n}({themeDictionary:{default:{name:"default",label:"Default",description:"Default theme for basic visualization of features.",schemes:{point:{light:{primary:{color:[77,77,77,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},{color:[255,255,255,1],outline:{color:[51,51,51,.25],width:"1px"},size:"8px"}]},dark:{primary:{color:[255,255,255,1],outline:{color:[92,92,92,.25],width:"1px"},size:"8px"},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},{color:[26,26,26,1],outline:{color:[178,178,178,.25],width:"1px"},size:"8px"}]}},polyline:{light:{primary:{color:[77,77,77,1],width:"2px"},secondary:[{color:[226,119,40,1],width:"2px"},{color:[255,255,255,1],width:"2px"}]},dark:{primary:{color:[255,255,255,1],width:"2px"},secondary:[{color:[226,119,40,1],width:"2px"},{color:[26,26,26,1],width:"2px"}]}},polygon:{light:{primary:{size:"12px",color:[227,139,79,1],outline:{color:[255,255,255,.25],width:"1px"},opacity:.8},secondary:[{size:"12px",color:[128,128,128,1],outline:{color:[255,255,255,.25],width:"1px"},opacity:.8},{size:"12px",color:[255,255,255,1],outline:{color:[128,128,128,.25],width:"1px"},opacity:.8}]},dark:{primary:{size:"12px",color:[227,139,79,1],outline:{color:[92,92,92,.25],width:"1px"},opacity:.8},secondary:[{size:"12px",color:[178,178,178,1],outline:{color:[92,92,92,.25],width:"1px"},opacity:.8},{size:"12px",color:[26,26,26,1],outline:{color:[128,128,128,.25],width:"1px"},opacity:.8}]}}}}}});function fe(e){var t=function(e){var t=e.theme;if(t)return t.getRawSchemes({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme})}({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme,theme:de.get("default")});if(t){var n=t.schemesInfo,r=t.basemapId,i=t.basemapTheme;return{primaryScheme:pe(e,n.primary),secondarySchemes:n.secondary.map((function(t){return pe(e,t)})).filter(Boolean),basemapId:r,basemapTheme:i}}}function pe(e,t){var n="mesh"!==e.geometryType&&e.worldScale?e.view:null;switch(e.geometryType){case"point":case"multipoint":var r=t;return function(e,t){return{color:new Q.a(e.color),outline:{color:new Q.a(e.outline.color),width:e.outline.width},size:t?ue(e.size,t):e.size,opacity:1}}({color:r.color,outline:Object(E.a)({},r.outline),size:r.size},n);case"polyline":var i=t;return function(e,t){return{color:new Q.a(e.color),width:t?ue(e.width,t):e.width,opacity:1}}({color:i.color,width:i.width},n);case"polygon":var a=t;return function(e,t){return{color:new Q.a(e.color),outline:{color:new Q.a(e.outline.color),width:e.outline.width},size:t?ue(e.size,t):e.size,opacity:e.opacity}}({size:a.size,color:a.color,outline:Object(E.a)({},a.outline),opacity:a.opacity},n);case"mesh":var o=t;return function(e){return{color:new Q.a(e.color),opacity:e.opacity}}({color:o.color,opacity:o.opacity})}}Object.freeze({__proto__:null,getThemes:function(e){return function(e,t){var n=[];return e.forEach((function(e){e.isBasemapSupported(t)&&n.push({name:e.name,label:e.label,description:e.description,basemaps:Object(T.a)(e.supportedBasemaps)})})),n}(de,e)},getSchemes:fe,cloneScheme:function(e){if(e){var t=Object(E.a)({},e);return t.color&&(t.color=new Q.a(t.color)),"outline"in t&&t.outline&&(t.outline={color:t.outline.color&&new Q.a(t.outline.color),width:t.outline.width}),t}}});var he=n(28),be=n(192),ve=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).autoNavigate=null,r.filter=null,r.getResults=null,r.getSuggestions=null,r.maxResults=null,r.maxSuggestions=null,r.minSuggestCharacters=null,r.outFields=null,r.placeholder="",r.popupEnabled=null,r.popupTemplate=null,r.prefix="",r.resultGraphicEnabled=null,r.resultSymbol=null,r.suggestionsEnabled=null,r.suffix="",r.withinViewEnabled=!1,r.zoomScale=null,r}return n}(Object(be.a)(he.a));Object(l.a)([Object(h.b)()],ve.prototype,"autoNavigate",void 0),Object(l.a)([Object(h.b)()],ve.prototype,"filter",void 0),Object(l.a)([Object(h.b)()],ve.prototype,"getResults",void 0),Object(l.a)([Object(h.b)()],ve.prototype,"getSuggestions",void 0),Object(l.a)([Object(h.b)()],ve.prototype,"maxResults",void 0),Object(l.a)([Object(h.b)()],ve.prototype,"maxSuggestions",void 0),Object(l.a)([Object(h.b)()],ve.prototype,"minSuggestCharacters",void 0),Object(l.a)([Object(h.b)()],ve.prototype,"outFields",void 0),Object(l.a)([Object(h.b)()],ve.prototype,"placeholder",void 0),Object(l.a)([Object(h.b)()],ve.prototype,"popupEnabled",void 0),Object(l.a)([Object(h.b)()],ve.prototype,"popupTemplate",void 0),Object(l.a)([Object(h.b)()],ve.prototype,"prefix",void 0),Object(l.a)([Object(h.b)()],ve.prototype,"resultGraphicEnabled",void 0),Object(l.a)([Object(h.b)()],ve.prototype,"resultSymbol",void 0),Object(l.a)([Object(h.b)()],ve.prototype,"suggestionsEnabled",void 0),Object(l.a)([Object(h.b)()],ve.prototype,"suffix",void 0),Object(l.a)([Object(h.b)()],ve.prototype,"withinViewEnabled",void 0),Object(l.a)([Object(h.b)()],ve.prototype,"zoomScale",void 0);var ye=ve=Object(l.a)([Object(v.a)("esri.widgets.Search.SearchSource")],ve),me=n(63),ge=(n(71),n(645)),Oe=f.a.getLogger("esri.widgets.Search.support.geometryUtils");function je(e,t){var n,r;if(!t)return Oe.error("missing-parameter: view is missing."),Promise.reject(new R.a("searchgeometryutils:missing-parameter","view is missing."));if(!e)return Oe.error("missing-parameter: point is missing."),Promise.reject(new R.a("searchgeometryutils:missing-parameter","point is missing."));if(e.hasZ||"2d"===t.type)return Promise.resolve(e);var i=null==t||null==(n=t.map)?void 0:n.ground;return i&&i.layers.length?i.queryElevation(e,{cache:null==(r=t.basemapTerrain)?void 0:r.elevationQueryCache}).then((function(e){return e.geometry})):Promise.resolve(e)}function we(e){if(Object(A.j)(e))return null;switch(e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":return e.getPoint(0);case"polyline":return e.getPoint(0,0)}return null}function _e(e,t,n){return Object(A.j)(e)?null:"extent"===e.type?e:"multipoint"===e.type||"polygon"===e.type||"polyline"===e.type?e.extent:"point"===e.type?xe(e,t,n):void 0}function ke(e,t,n){return Object(A.j)(e)||Object(A.j)(t)?null:xe(e.center,t,n)}function xe(e,t,n){var r=e.hasZ?e.z:void 0;return t&&t.map?(n?Object(ge.a)(t,n):t.extent).clone().centerAt(e).set({zmax:r,zmin:r}):new me.a({xmin:e.x-.25,ymin:e.y-.25,xmax:e.x+.25,ymax:e.y+.25,spatialReference:e.spatialReference,zmin:r,zmax:r})}var Se,Te=n(118),Ee=n(102),Ce=n(66),Pe=/https?:\/\/services.*\.arcgis\.com/i,Ie=/(?:\{([^}]+)\})/g,Me=f.a.getLogger("esri.widgets.Search.support.layerSearchUtils");function Ae(e,t){var n=e.exactMatch,r=void 0!==n&&n,i=e.location,a=e.maxResults,o=e.spatialReference,s=e.source,c=e.sourceIndex,l=e.suggestResult,u=e.view,d=s.layer,f=s.filter,p=s.zoomScale,h=u&&u.scale,b=Le(s,u),v=t&&t.signal;return De(d).then((function(){var e=d.popupTemplate;return e?e.getRequiredFields(d.fields):null})).then((function(e){var t,n,y=d.objectIdField,m=d.returnZ,g=ze(s);if(!Be(d,g))throw Me.error("invalid-field: displayField is invalid."),new R.a("getResults():invalid-field","displayField is invalid.");var O=e&&e.length?e:[g],j=s.outFields||O,w=Fe(j);if(-1!==j.indexOf(y)||w||j.push(y),!w&&!Ue(d,j))throw Me.error("invalid-field: outField is invalid."),new R.a("getResults():invalid-field","outField is invalid.");var _=d.createQuery(),k=s.orderByFields;if(k&&(_.orderByFields=k),o){_.outSpatialReference=o;var x=1/Object(Ce.d)(o);x&&(_.maxAllowableOffset=x)}var S="mesh"===d.geometryType||"multipatch"===d.geometryType,T=(null==(t=d.capabilities)||null==(n=t.data)?void 0:n.supportsZ)&&!S;if(_.returnZ=T&&!1!==m,_.returnGeometry=!0,_.multipatchOption=S?"xyFootprint":null,j&&(_.outFields=j),i)_.geometry=i;else if(l.key)_.objectIds=[parseInt(l.key,10)];else{var E=s.searchFields||[g];if(!Ue(d,E))throw Me.error("invalid-field: search field is invalid."),new R.a("getResults():invalid-field","search field is invalid.");if(Ve(d)&&(_.num=a),b&&(_.geometry=b),!l.text.trim())return[];var C=s.prefix,P=void 0===C?"":C,I=s.suffix,M=void 0===I?"":I,L=He(Ge("".concat(P).concat(l.text).concat(M)),d,E,f,r);if(!L)return[];_.where=L}return d.queryFeatures(_,{signal:v}).then((function(e){return function(e,t,n,r,i,a,o){return e.features.map((function(e){return function(e,t,n,r,i,a,o){var s=e.clone(),c=e.sourceLayer,l=c&&c.objectIdField,u=l&&e.attributes[l],d=We(e,n.searchTemplate,i),f=_e(s.geometry,t,a),p="number"==typeof o?ke(Object(ee.a)(f),t,o):f,h=e.clone();return Object(A.k)(p)&&(h.geometry=Te.a.fromExtent(p)),{extent:p,target:h,feature:s,key:u,name:d,sourceIndex:r}}(e,t,n,r,i,a,o)}))}(e,u,s,c,g,h,p)}))}))}function Re(e,t){var n=e.source,r=e.spatialReference,i=e.view,a=e.suggestTerm,o=e.maxSuggestions,s=e.sourceIndex,c=n.layer,l=n.filter,u=t&&t.signal,d=Le(n,i);return De(c).then((function(){if(!Ve(c))return[];var e=ze(n),t=n.searchFields||[e],i=[];n.suggestionTemplate?n.suggestionTemplate.replace(Ie,(function(e,t){return i.push(t),e})):i.push(e);var f=Fe(i);-1!==i.indexOf(c.objectIdField)||f||i.push(c.objectIdField);var p=Be(c,e),h=f||Ue(c,i),b=Ue(c,t);if(!p)throw Me.error("invalid-field: displayField is invalid."),new R.a("getSuggestions():invalid-field","displayField is invalid.");if(!h)throw Me.error("invalid-field: outField is invalid."),new R.a("getSuggestions():invalid-field","outField is invalid.");if(!b)throw Me.error("invalid-field: search field is invalid."),new R.a("getSuggestions():invalid-field","search field is invalid.");var v=c.createQuery(),y=n.orderByFields;if(y&&(v.orderByFields=y),v.outSpatialReference=r,v.returnGeometry=!1,v.num=o,v.outFields=i,d&&(v.geometry=d),!a.trim())return[];var m=n.prefix,g=void 0===m?"":m,O=n.suffix,j=void 0===O?"":O,w=He(Ge("".concat(g).concat(a).concat(j)),c,t,l,!1);return w?(v.where=w,c.queryFeatures(v,{signal:u}).then((function(t){return function(e,t,n,r){return e.features.map((function(e){return function(e,t,n,r){var i=e.sourceLayer,a=e.attributes,o=i.objectIdField,s=a[o];return{text:We(e,t.suggestionTemplate,r),key:s,sourceIndex:n}}(e,t,n,r)}))}(t,n,s,e)}))):[]}))}function Le(e,t){var n=e.filter,r=e.withinViewEnabled,i=t&&t.extent;return n&&n.geometry||(r&&i?i:void 0)}function Fe(e){return e&&-1!==e.indexOf("*")}function De(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(I.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t,!e.t0){e.next=4;break}return e.next=4,t.load();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e){var t,n,r;return null!=(t=null==e||null==(n=e.capabilities)||null==(r=n.query)?void 0:r.supportsPagination)&&t}function ze(e){return e.displayField||e.layer.displayField||function(e){var t="";if(e){var n=e.fields;n&&n.some((function(e){return"string"===e.type&&(t=e.name,!0)}))}return t}(e.layer)}function Ue(e,t){return!(!e||!t)&&t.every((function(t){return Be(e,t)}))}function Be(e,t){return!!e.getField(t)}function Ge(e){return e.replace(/\'/g,"''")}function qe(e,t){var n=t&&t.where;return n?"(".concat(e,") AND (").concat(n,")"):e}function He(e,t,n,r,i){var a=t.definitionExpression,o="";if(e){var s=Pe.test(t.url)&&function(e){for(var t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return!0;return!1}(e)?"N":"";n&&n.forEach((function(n){var a=t.getField(n),c="function"==typeof t.getFieldDomain&&t.getFieldDomain(n),l=(c&&"coded-value"===c.type?function(e,t,n){var r=null,i=e.codedValues;return i&&i.some((function(e){var i=e.name,a=n?i:i.toLowerCase();return(n?t:t.toLowerCase())===a&&(r=e.code.toString(),!0)})),r}(c,e,i):null)||e||null;if(null!==l){var u=function(e,t,n,r,i){var a=t.type,o=t.name;if("string"===a||"date"===a||"global-id"===a)return qe(i?"".concat(o," = ").concat(n,"'").concat(e,"'"):"UPPER(".concat(o,") LIKE ").concat(n,"'%").concat(e.toUpperCase(),"%'"),r);if("oid"===a||"small-integer"===a||"integer"===a||"single"===a||"double"===a){var s=Number(e);return isNaN(s)?null:qe("".concat(o," = ").concat(s),r)}return qe("".concat(o," = ").concat(e),r)}(l,a,s,r,i);u&&(o+=function(e,t){return e?" OR (".concat(t,")"):"(".concat(t,")")}(o,u))}}))}return a?"(".concat(a,") AND (").concat(o,")"):o}function We(e,t,n){var r=e.sourceLayer,i=e.attributes,a="function"==typeof r.getFieldDomain&&r.getFieldDomain(n);if(t)return Object(g.a)(t,i);if(n&&i){var o=r.getField(n),s=function(e,t){return e[Object.keys(e).find((function(e){return e.toLowerCase()===t.toLowerCase()}))]}(i,n);return null==s?"":a&&"coded-value"===a.type?function(e,t){var n=null,r=e.codedValues;return r&&r.length&&r.some((function(e){return e.code===t&&(n=e.name,!0)})),n}(a,s):"date"===(null==o?void 0:o.type)?Object(Ee.b)(new Date(s)):"number"==typeof s?s.toString():"string"!=typeof s?"":s.trim()}return""}var $e=Se=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).displayField=null,e.exactMatch=null,e.orderByFields=null,e.searchFields=null,e.searchTemplate=null,e.suggestionTemplate=null,e.getResults=function(t,n){return Ae(Object(E.a)({source:Object(o.a)(e)},t),n)},e.getSuggestions=function(t,n){return Re(Object(E.a)({source:Object(o.a)(e)},t),n)},e}return Object(a.a)(n,[{key:"layer",set:function(e){this._set("layer",e),e&&e.load().catch((function(){}))}},{key:"name",get:function(){return this._getLayerTitle()||""},set:function(e){void 0!==e?this._override("name",e):this._clearOverride("name")}},{key:"clone",value:function(){return new Se({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?Object(ee.a)(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?Object(ee.a)(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}},{key:"_getFirstStringField",value:function(){var e=this.layer,t="";return e&&e.fields&&e.fields.some((function(e){return"string"===e.type&&(t=e.name,!0)})),t}},{key:"_getDisplayField",value:function(){return this.displayField||this.layer.displayField||this._getFirstStringField()}},{key:"_getSearchFieldsString",value:function(){var e=this.layer,t=this.searchFields;return e.loaded?": ".concat((t||[this._getDisplayField()]).map((function(t){var n=e.getField(t);return n&&n.alias||t})).join(", ")):""}},{key:"_getLayerTitle",value:function(){var e=this.layer;if(e){var t=e.title;return t?"".concat(t).concat(this._getSearchFieldsString()):void 0}}}]),n}(ye);Object(l.a)([Object(h.b)({json:{read:{source:"field.name"},write:{target:"field.name"}}})],$e.prototype,"displayField",void 0),Object(l.a)([Object(h.b)({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],$e.prototype,"exactMatch",void 0),Object(l.a)([Object(h.b)({value:null})],$e.prototype,"layer",null),Object(l.a)([Object(h.b)()],$e.prototype,"name",null),Object(l.a)([Object(h.b)({type:[String],json:{write:!0}})],$e.prototype,"orderByFields",void 0),Object(l.a)([Object(h.b)()],$e.prototype,"searchFields",void 0),Object(l.a)([Object(h.b)()],$e.prototype,"searchTemplate",void 0),Object(l.a)([Object(h.b)()],$e.prototype,"suggestionTemplate",void 0);var Je=$e=Se=Object(l.a)([Object(v.a)("esri.widgets.Search.LayerSearchSource")],$e),Ye={type:String,json:{read:{source:"token"},write:{target:"token"}}},Ke=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).address=null,r.apiKey=null,r.categories=null,r.countryCode=null,r.forStorage=null,r.location=null,r.locationType=null,r.magicKey=null,r.maxLocations=null,r.outFields=null,r.outSpatialReference=null,r.searchExtent=null,r}return n}(he.a);Object(l.a)([Object(h.b)({type:Object,json:{write:!0}})],Ke.prototype,"address",void 0),Object(l.a)([Object(h.b)(Ye)],Ke.prototype,"apiKey",void 0),Object(l.a)([Object(h.b)({type:[String],json:{read:{source:"category",reader:function(e){return e?e.split(","):null}},write:{target:"category",writer:function(e,t){t.category=e?e.join(","):null}}}})],Ke.prototype,"categories",void 0),Object(l.a)([Object(h.b)({type:String,json:{write:!0}})],Ke.prototype,"countryCode",void 0),Object(l.a)([Object(h.b)({type:Boolean,json:{write:!0}})],Ke.prototype,"forStorage",void 0),Object(l.a)([Object(h.b)({type:D.a,json:{write:{writer:function(e,t){t.location=e?e.clone().normalize():null}}}})],Ke.prototype,"location",void 0),Object(l.a)([Object(h.b)({type:String,json:{write:!0}})],Ke.prototype,"locationType",void 0),Object(l.a)([Object(h.b)({type:String,json:{write:!0}})],Ke.prototype,"magicKey",void 0),Object(l.a)([Object(h.b)({type:Number,json:{write:!0}})],Ke.prototype,"maxLocations",void 0),Object(l.a)([Object(h.b)({type:[String],json:{write:{writer:function(e,t){t.outFields=e?e.join(","):null}}}})],Ke.prototype,"outFields",void 0),Object(l.a)([Object(h.b)({type:F.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Ke.prototype,"outSpatialReference",void 0),Object(l.a)([Object(h.b)({type:me.a,json:{write:{writer:function(e,t){var n=e?e.shiftCentralMeridian():null;t.searchExtent=n}}}})],Ke.prototype,"searchExtent",void 0),(Ke=Object(l.a)([Object(v.a)("esri.tasks.support.AddressToLocationsParameters")],Ke)).from=Object(p.m)(Ke);var Ze=Ke,Xe=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).apiKey=null,r.location=null,r.locationType=null,r.outSpatialReference=null,r}return n}(he.a);Object(l.a)([Object(h.b)(Ye)],Xe.prototype,"apiKey",void 0),Object(l.a)([Object(h.b)({type:D.a,json:{write:{writer:function(e,t){var n=e?e.clone().normalize():null,r=void 0!==n;t.location=r?n:null}}}})],Xe.prototype,"location",void 0),Object(l.a)([Object(h.b)({type:String,json:{write:!0}})],Xe.prototype,"locationType",void 0),Object(l.a)([Object(h.b)({type:F.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Xe.prototype,"outSpatialReference",void 0),(Xe=Object(l.a)([Object(v.a)("esri.tasks.support.LocationToAddressParameters")],Xe)).from=Object(p.m)(Xe);var Qe=Xe,et=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).apiKey=null,r.categories=null,r.countryCode=null,r.location=null,r.maxSuggestions=null,r.outSpatialReference=null,r.searchExtent=null,r.text=null,r}return n}(he.a);Object(l.a)([Object(h.b)(Ye)],et.prototype,"apiKey",void 0),Object(l.a)([Object(h.b)({type:[String],json:{read:{source:"category",reader:function(e){return e?e.split(","):null}},write:{target:"category",writer:function(e,t){t.category=e?e.join(","):null}}}})],et.prototype,"categories",void 0),Object(l.a)([Object(h.b)({type:String,json:{write:!0}})],et.prototype,"countryCode",void 0),Object(l.a)([Object(h.b)({type:D.a,json:{write:{writer:function(e,t){t.location=e?e.clone().normalize():null}}}})],et.prototype,"location",void 0),Object(l.a)([Object(h.b)({type:Number,json:{write:!0}})],et.prototype,"maxSuggestions",void 0),Object(l.a)([Object(h.b)({type:F.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],et.prototype,"outSpatialReference",void 0),Object(l.a)([Object(h.b)({type:me.a,json:{write:{writer:function(e,t){var n=e?e.shiftCentralMeridian():null;t.searchExtent=JSON.stringify(n)}}}})],et.prototype,"searchExtent",void 0),Object(l.a)([Object(h.b)({type:String,json:{write:!0}})],et.prototype,"text",void 0),(et=Object(l.a)([Object(v.a)("esri.tasks.support.SuggestLocationsParameters")],et)).from=Object(p.m)(et);var tt=et,nt="Single Line Input";function rt(e,t){return e.location?function(e,t){var n=e.source,r=e.spatialReference,i=e.location,a=e.sourceIndex,o=e.view,s=n.apiKey,c=n.locator,l=n.zoomScale,u=n.defaultZoomScale,d=o&&o.scale,f=t&&t.signal,p=new Qe;return p.location=i,s&&(p.apiKey=s),r&&(p.outSpatialReference=r),c.locationToAddress(p,{signal:f}).then((function(e){return ct([e],{sourceIndex:a,scale:d,view:o,zoomScale:l,defaultZoomScale:u})}))}(e,t):function(e,t){var n=e.source,r=e.suggestResult,i=e.spatialReference,a=e.view,o=e.maxResults,s=e.sourceIndex,c=n&&n.zoomScale,l=n&&n.defaultZoomScale;if(!r.text.trim())return Promise.resolve(null);var u=!r.key&&n.prefix?n.prefix:"",d=!r.key&&n.suffix?n.suffix:"",f="".concat(u).concat(r.text).concat(d),p=new Ze,h=n.apiKey,b=n.locator,v=a&&a.scale,y=st(n,a),m=t&&t.signal;if(h&&(p.apiKey=h),!b)return Promise.resolve(null);n.categories&&(p.categories=n.categories),n.locationType&&(p.locationType=n.locationType),i&&(p.outSpatialReference=i);var g=it(a);g&&(p.location=g),p.maxLocations=o,y&&(p.searchExtent=Object(A.q)(y)),n.countryCode&&(p.countryCode=n.countryCode);var O=r.key;return O&&(p.magicKey=O),p.address={},p.address[n.singleLineFieldName||nt]=f,n.outFields&&(p.outFields=n.outFields),b.addressToLocations(p,{signal:m}).then((function(e){return ct(e,{key:O,scale:v,sourceIndex:s,view:a,zoomScale:c,defaultZoomScale:l})}))}(e,t)}function it(e){var t=null==e?void 0:e.scale;return"number"==typeof t&&t<=3e5?e.get("extent.center"):null}function at(e,t){var n=e.source,r=e.spatialReference,i=e.view,a=e.suggestTerm,o=e.maxSuggestions,s=e.sourceIndex,c=new tt,l=n.apiKey,u=n.locator,d=st(n,i),f=t&&t.signal;if(!u)return Promise.resolve(null);l&&(c.apiKey=l),n.categories&&(c.categories=n.categories),r&&(c.outSpatialReference=r);var p=it(i);if(p&&(c.location=p),!a.trim())return Promise.resolve(null);var h=n.prefix,b=void 0===h?"":h,v=n.suffix,y=void 0===v?"":v,m="".concat(b).concat(a).concat(y);return c.text=m,d&&(c.searchExtent=Object(A.q)(d)),c.maxSuggestions=o,n.countryCode&&(c.countryCode=n.countryCode),u.suggestLocations(c,{signal:f}).then((function(e){return function(e,t){return e.map((function(e){return function(e,t){return{text:e.text,key:e.magicKey,sourceIndex:t}}(e,t)}))}(e,s)}))}function ot(e){return!!e&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(e)}function st(e,t){var n=e.filter,r=e.withinViewEnabled,i=t&&t.scale,a=t&&t.extent;return _e(n&&n.geometry,t,i)||(r&&a?a:void 0)}function ct(e,t){return e.map((function(e){return function(e,t){var n=t.key,r=t.scale,i=t.sourceIndex,a=t.view,o=t.zoomScale,s=t.defaultZoomScale,c=e.attributes,l=e.extent,u=e.location,d=e.address,f=new K.a({geometry:u,attributes:c}),p=l||u,h=_e(p,a,r),b="number"==typeof o?ke(h,a,o):"number"==typeof s&&"point"===p.type?ke(h,a,s):h,v=u?"".concat(u.x,",").concat(u.y):"",y=d||v,m=f.clone();return Object(A.k)(b)&&(m.geometry=Te.a.fromExtent(b)),{extent:b,feature:f,target:m,key:n,name:y,sourceIndex:i}}(e,t)}))}var lt=n(41),ut=n(42),dt=n(473);function ft(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var pt=n(62),ht=n(106);var bt=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).address=null,r.attributes=null,r.extent=null,r.location=null,r.score=null,r}return n}(he.a);Object(l.a)([Object(h.b)({type:String,json:{write:!0}})],bt.prototype,"address",void 0),Object(l.a)([Object(h.b)({type:Object,json:{write:!0}})],bt.prototype,"attributes",void 0),Object(l.a)([Object(h.b)({type:me.a,json:{write:!0}})],bt.prototype,"extent",void 0),Object(l.a)([Object(h.b)({type:D.a,json:{write:!0}})],bt.prototype,"location",void 0),Object(l.a)([Object(h.b)({type:Number,json:{write:!0}})],bt.prototype,"score",void 0);var vt=bt=Object(l.a)([Object(v.a)("esri.tasks.support.AddressCandidate")],bt),yt=["address"];function mt(){return(mt=Object(I.a)(P.a.mark((function e(t,n,r){var i,a,o,s,c,l,u,d;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ze.from(n),i=Object(ht.c)(t),a=n.toJSON(),o=a.address,s=ft(a,yt),c=Object(E.a)(Object(E.a)(Object(E.a)({},o),s),{},{f:"json"}),l=Object(ht.b)(Object(E.a)(Object(E.a)({},i.query),c)),u=Object(ht.a)(l,r),d="".concat(i.path,"/findAddressCandidates"),e.abrupt("return",Object(pt.default)(d,u).then(gt));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gt(e){var t=e.data;if(!t)return[];var n=t.candidates,r=t.spatialReference;return n?n.map((function(e){if(e){var t,n=e.extent,i=e.location,a=!n||(t=n)&&"number"==typeof t.xmin&&"number"==typeof t.ymin&&"number"==typeof t.xmax&&"number"==typeof t.ymax;return function(e){return e&&"number"==typeof e.x&&"number"==typeof e.y}(i)&&a?(n&&(n.spatialReference=r),i.spatialReference=r,vt.fromJSON(e)):void 0}})):[]}var Ot=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).addresses=null,r.categories=null,r.countryCode=null,r.locationType=null,r.outSpatialReference=null,r}return n}(he.a);Object(l.a)([Object(h.b)({type:[Object],json:{read:{reader:function(e){return e&&e.records?e.records.map((function(e){return e.attributes})):null}},write:{writer:function(e,t){var n=[];Array.isArray(e)&&e.forEach((function(e){n.push({attributes:e})})),t.addresses={records:n}}}}})],Ot.prototype,"addresses",void 0),Object(l.a)([Object(h.b)({type:[String],json:{read:{source:"category",reader:function(e){return e?e.split(","):null}},write:{target:"category",writer:function(e,t){t.category=e?e.join(","):null}}}})],Ot.prototype,"categories",void 0),Object(l.a)([Object(h.b)({type:String,json:{read:{source:"sourceCountry"},write:{target:"sourceCountry"}}})],Ot.prototype,"countryCode",void 0),Object(l.a)([Object(h.b)({type:String,json:{write:!0}})],Ot.prototype,"locationType",void 0),Object(l.a)([Object(h.b)({type:F.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Ot.prototype,"outSpatialReference",void 0),(Ot=Object(l.a)([Object(v.a)("esri.tasks.support.AddressesToLocationsParameters")],Ot)).from=Object(p.m)(Ot);var jt=Ot;function wt(){return(wt=Object(I.a)(P.a.mark((function e(t,n,r){var i,a,o,s,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=jt.from(n),i=Object(ht.c)(t),a=Object(E.a)(Object(E.a)({},n.toJSON()),{},{f:"json"}),o=Object(ht.b)(Object(E.a)(Object(E.a)({},i.query),a)),s=Object(ht.a)(o,r),c="".concat(i.path,"/geocodeAddresses"),e.abrupt("return",Object(pt.default)(c,s).then(_t));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _t(e){var t=e.data;if(!t)return[];var n=t.locations,r=t.spatialReference;return n?n.map((function(e){var t=e.location;return t&&(t.spatialReference=r),vt.fromJSON(e)})):[]}function kt(){return(kt=Object(I.a)(P.a.mark((function e(t,n,r){var i,a,o,s,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Qe.from(n),i=Object(ht.c)(t),a=Object(E.a)(Object(E.a)({},n.toJSON()),{},{f:"json"}),o=Object(ht.b)(Object(E.a)(Object(E.a)({},i.query),a)),s=Object(ht.a)(o,r),c="".concat(i.path,"/reverseGeocode"),e.abrupt("return",Object(pt.default)(c,s).then(xt));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xt(e){var t=e.data;if(t){var n=t.address,r=t.location,i=n&&n.Match_addr||"";return vt.fromJSON({address:i,attributes:n||{},location:r,score:100})}}var St=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).isCollection=null,r.magicKey=null,r.text=null,r}return n}(he.a);Object(l.a)([Object(h.b)({type:Boolean,json:{write:!0}})],St.prototype,"isCollection",void 0),Object(l.a)([Object(h.b)({type:String,json:{write:!0}})],St.prototype,"magicKey",void 0),Object(l.a)([Object(h.b)({type:String,json:{write:!0}})],St.prototype,"text",void 0);var Tt=St=Object(l.a)([Object(v.a)("esri.tasks.support.SuggestionCandidate")],St);function Et(){return(Et=Object(I.a)(P.a.mark((function e(t,n,r){var i,a,o,s,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(ht.c)(t),a=Object(E.a)(Object(E.a)({},(n=tt.from(n)).toJSON()),{},{f:"json"}),o=Object(ht.b)(Object(E.a)(Object(E.a)({},i.query),a)),s=Object(ht.a)(o,r),c="".concat(i.path,"/suggest"),e.abrupt("return",Object(pt.default)(c,s).then(Ct));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ct(e){var t=e.data;if(!t)return[];var n=t.suggestions;return n?n.map((function(e){return new Tt(e)})):[]}var Pt=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).outSpatialReference=null,r.url=null,r}return Object(a.a)(n,[{key:"addressToLocations",value:function(e,t){!e.outSpatialReference&&this.outSpatialReference&&(e.outSpatialReference=this.outSpatialReference);var n=Object(E.a)(Object(E.a)({},this.requestOptions),t);return function(e,t,n){return mt.apply(this,arguments)}(this.url,e,n)}},{key:"suggestLocations",value:function(e,t){var n=Object(E.a)(Object(E.a)({},this.requestOptions),t);return function(e,t,n){return Et.apply(this,arguments)}(this.url,e,n)}},{key:"addressesToLocations",value:function(e,t){!e.outSpatialReference&&this.outSpatialReference&&(e.outSpatialReference=this.outSpatialReference);var n=Object(E.a)(Object(E.a)({},this.requestOptions),t);return function(e,t,n){return wt.apply(this,arguments)}(this.url,e,n)}},{key:"locationToAddress",value:function(e,t){!e.outSpatialReference&&this.outSpatialReference&&(e.outSpatialReference=this.outSpatialReference);var n=Object(E.a)(Object(E.a)({},this.requestOptions),t);return function(e,t,n){return kt.apply(this,arguments)}(this.url,e,n)}}]),n}(dt.a);Object(l.a)([Object(h.b)({type:F.a})],Pt.prototype,"outSpatialReference",void 0),Object(l.a)([Object(h.b)()],Pt.prototype,"url",void 0);var It,Mt=Pt=Object(l.a)([Object(v.a)("esri.tasks.Locator")],Pt),At=It=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).apiKey=null,e.categories=null,e.countryCode=null,e.defaultZoomScale=null,e.locator=null,e.locationType=null,e.name="",e.placeholder="",e.searchTemplate="",e.singleLineFieldName=null,e.suggestionsEnabled=null,e.zoomScale=null,e.getResults=function(t,n){return rt(Object(E.a)({source:Object(o.a)(e)},t),n)},e.getSuggestions=function(t,n){return at(Object(E.a)({source:Object(o.a)(e)},t),n)},e}return Object(a.a)(n,[{key:"readLocator",value:function(e,t){var n=t.url;return n?new Mt({url:n}):null}},{key:"writeLocator",value:function(e,t){t.url=e?e.url:null}},{key:"clone",value:function(){return new It({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?Object(ee.a)(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?Object(ee.a)(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,locator:this.locator,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}}]),n}(ye);Object(l.a)([Object(h.b)()],At.prototype,"apiKey",void 0),Object(l.a)([Object(h.b)()],At.prototype,"categories",void 0),Object(l.a)([Object(h.b)()],At.prototype,"countryCode",void 0),Object(l.a)([Object(h.b)({json:{write:!0}})],At.prototype,"defaultZoomScale",void 0),Object(l.a)([Object(h.b)({type:Mt})],At.prototype,"locator",void 0),Object(l.a)([Object(lt.a)("locator",["url"])],At.prototype,"readLocator",null),Object(l.a)([Object(ut.a)("locator")],At.prototype,"writeLocator",null),Object(l.a)([Object(h.b)()],At.prototype,"locationType",void 0),Object(l.a)([Object(h.b)({json:{write:!0}})],At.prototype,"name",void 0),Object(l.a)([Object(h.b)({json:{write:!0}})],At.prototype,"placeholder",void 0),Object(l.a)([Object(h.b)()],At.prototype,"searchTemplate",void 0),Object(l.a)([Object(h.b)({json:{write:!0}})],At.prototype,"singleLineFieldName",void 0),Object(l.a)([Object(h.b)({json:{read:{source:"suggest"},write:{target:"suggest"}}})],At.prototype,"suggestionsEnabled",void 0),Object(l.a)([Object(h.b)({json:{write:!0}})],At.prototype,"zoomScale",void 0);var Rt=At=It=Object(l.a)([Object(v.a)("esri.widgets.Search.LocatorSearchSource")],At),Lt=(n(150),n(61)),Ft=(n(259),n(108),n(336)),Dt=(n(794),n(795),n(796),n(797),n(798),n(799),n(800),n(751)),Nt=(n(801),n(802),n(803),n(804),f.a.getLogger("esri.widgets.support.geolocationUtils")),Vt={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function zt(){return function(){var e=Object(u.a)("esri-geolocation");return e||Nt.warn("geolocation-unsupported","Geolocation unsupported."),e}()&&function(){var e=window.isSecureContext;return e||Nt.warn("insecure-context","Geolocation requires a secure origin."),e}()}function Ut(e,t){var n=e.position,r=e.view;return function(e,t,n){if(!t)return Promise.resolve(e);var r=t.spatialReference;return r.isWGS84?Promise.resolve(e):r.isWebMercator?Promise.resolve(Object(Lt.b)(e)):function(e){if(M.a.geometryServiceUrl)return Promise.resolve(M.a.geometryServiceUrl);var t=H.a.getDefault();return t.load(e).catch((function(){})).then((function(){return t.get("helperServices.geometry.url")}))}(n).then((function(t){if(!t)throw new R.a("geometry-service:missing-url","Geometry service URL is missing");var i=new Ft.a({geometries:[e],outSpatialReference:r});return Object(Dt.a)(t,i,n).then((function(e){return e[0]}))}))}(function(e){var t=e&&e.coords;return t?new D.a({longitude:t.longitude,latitude:t.latitude,z:t.altitude||null,spatialReference:{wkid:4326}}):null}(function(e){var t=e&&e.coords||{},n={accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed};return e?{coords:n,timestamp:e.timestamp}:e}(n)),r,t)}function Bt(e,t){return e.hasOwnProperty(t)&&null!=e[t]&&""!==e[t]}var Gt="esri.widgets.Search.SearchViewModel",qt=f.a.getLogger(Gt),Ht="highlight",Wt=V.a.ofType({key:function(e){return e.layer?"layer":"locator"},base:ye,typeMap:{layer:Je,locator:Rt}}),$t=F.a.WGS84,Jt=/<(?:.|\s)*?>/g,Yt=-1,Kt=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e))._handles=new O.a,r._gotoController=null,r._searching=null,r.autoNavigate=!0,r.autoSelect=!0,r.defaultPopupTemplate=null,r.defaultSources=new Wt,r.defaultSymbol=new W.a({url:Object(q.a)(Object(u.a)("trident")?"esri/images/search/search-symbol-32.png":"esri/images/search/search-symbol-32.svg"),size:24,width:24,height:24}),r.includeDefaultSources=!0,r.maxInputLength=128,r.maxResults=6,r.maxSuggestions=6,r.messages=null,r.minSuggestCharacters=1,r.popupEnabled=!0,r.popupTemplate=null,r.portal=H.a.getDefault(),r.resultCount=null,r.resultGraphicEnabled=!0,r.resultGraphic=null,r.results=null,r.selectedSuggestion=null,r.searchAllEnabled=!0,r.selectedResult=null,r.sources=new Wt,r.suggestionDelay=150,r.suggestionCount=null,r.suggestions=null,r.suggestionsEnabled=!0,r.view=null,r}return Object(a.a)(n,[{key:"initialize",value:function(){var e=this,t=function(){var t=Object(I.a)(P.a.mark((function t(){var n;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(G.a)("esri/widgets/Search/t9n/Search");case 2:n=t.sent,e.messages=n,e.defaultPopupTemplate=new U.a({title:n.searchResult,content:"{Match_addr}"});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t(),this._handles.add([Object(j.b)(this,["defaultSources","sources"],"change",(function(){return e.notifyChange("allSources")})),Object(j.a)(this,["includeDefaultSources","view","portal"],(function(){return e._update()})),Object(z.c)(t)])}},{key:"destroy",value:function(){this._abortGoTo(),this.clearGraphics(),this._handles.destroy(),this._handles=null}},{key:"activeSource",get:function(){return this.allSources.getItemAt(this.activeSourceIndex)||null}},{key:"activeSourceIndex",get:function(){return 1!==this.allSources.length&&this.searchAllEnabled?Yt:0},set:function(e){void 0!==e?this._override("activeSourceIndex",e):this._clearOverride("activeSourceIndex")}},{key:"allPlaceholder",get:function(){var e;return null==(e=this.messages)?void 0:e.allPlaceholder},set:function(e){e?this._override("allPlaceholder",e):this._clearOverride("allPlaceholder")}},{key:"allSources",get:function(){var e=this.sources,t=this.defaultSources,n=this.includeDefaultSources,r="function"==typeof n?n.call(null,{sources:e,defaultSources:t}):n?t.concat(e):e,i=this._get("allSources")||new Wt;return i.removeAll(),i.addMany(r.filter(Boolean)),i}},{key:"locationEnabled",get:function(){return this._get("locationEnabled")||zt()},set:function(e){if(void 0!==e){var t=zt();if(e&&!t){var n=new R.a("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});qt.error(n)}this._override("locationEnabled",e&&t)}else this._clearOverride("locationEnabled")}},{key:"placeholder",get:function(){var e=this.allSources,t=this.activeSourceIndex,n=this.allPlaceholder;if(t===Yt)return n;var r=e.getItemAt(t);return r?r.placeholder:""}},{key:"searchTerm",get:function(){return this._get("searchTerm")||""},set:function(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),""===e&&this._clear()}},{key:"state",get:function(){return this._searching?"searching":this.updating?"loading":0===this.allSources.length?"disabled":"ready"}},{key:"updating",get:function(){return null!=this._updatingPromise}},{key:"clear",value:function(){this.searchTerm=""}},{key:"clearGraphics",value:function(){this._removeHighlight(),this._closePopup(),this.view&&this.view.graphics.remove(this.resultGraphic),this._set("resultGraphic",null)}},{key:"search",value:function(e,t){var n=this;this.emit("search-start"),this.clearGraphics();var r=this._createSuggestionForSearch(e),i=this.when().then((function(){return n._getResultsFromSources(r,t).then((function(e){var t={activeSourceIndex:n.activeSourceIndex,searchTerm:r.text,numResults:0,numErrors:0,errors:[],results:[]};n._formatResponse(t,e,r);var i=n._getFirstResult(t.results),a=(r.location&&i?i.name:r.text).replace(Jt,"");return n._set("searchTerm",a),(r.key&&"number"==typeof r.sourceIndex||r.location)&&n._set("selectedSuggestion",r),n._set("results",t.results),n._set("resultCount",t.results.reduce((function(e,t){return e+t.results.length}),0)),n.emit("search-complete",t),n._selectFirstResult(i).then((function(){return t}))}))})).then((function(e){return n._clearSearching(),e}),(function(e){throw n._clearSearching(),e}));return this._searching=i,this.notifyChange("state"),i}},{key:"searchNearby",value:function(e){var t=this;if(!this.locationEnabled){var n=new R.a("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});return qt.error(n),Promise.reject(n)}var r=function(e){return e||(e=Vt),new Promise((function(t,n){setTimeout((function(){return n(new R.a("geolocation:timeout","getting the current geolocation position timed out"))}),15e3),navigator.geolocation.getCurrentPosition(t,n,e)}))}().then((function(n){return Ut({position:n,view:t.view},e)})).then((function(n){return t.search(n,e)}));return this._searching=r,this.notifyChange("state"),r.catch((function(){})).then((function(){return t._clearSearching()})),r}},{key:"select",value:function(e){var t=this;if(this.clearGraphics(),!e){var n=new R.a("select:missing-parameter","Cannot select without a searchResult.",{searchResult:e});return qt.error(n),Promise.reject(n)}var r=this.view,i=Bt(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),a=this.allSources.getItemAt(i);if(!a){var o=new R.a("select:missing-source","Cannot select without a source.",{source:a});return qt.error(o),Promise.reject(o)}var s=a instanceof Je?this._getLayerSourcePopupTemplate(a):a.popupTemplate,c=a.resultSymbol||this._getDefaultSymbol(e),l=Bt(a,"resultGraphicEnabled")?a.resultGraphicEnabled:this.resultGraphicEnabled,u=Bt(a,"autoNavigate")?a.autoNavigate:this.autoNavigate,d=Bt(a,"popupEnabled")?a.popupEnabled:this.popupEnabled,f=d?s||this.popupTemplate||this.defaultPopupTemplate:null,p=e.feature;if(!p){var h=new R.a("select:missing-feature","Cannot select without a feature.",{feature:p});return qt.error(h),Promise.reject(h)}var b=p.attributes,v=p.geometry,y=p.layer,g=p.sourceLayer,O=we(v),j={layerViewQuery:this._getLayerView(p),elevationQuery:r&&Object(A.k)(O)?je(O,r).catch((function(){return O})):Promise.resolve(O)};return Object(m.j)(j).then((function(n){var o=n.layerViewQuery.value,s=n.elevationQuery.value;c instanceof Y.a&&(c.text=e.name);var h=r&&u?e.target||e.extent:null;return(Object(A.k)(h)?t._goToSearchResult(h):Promise.resolve()).then((function(){var n,u=o?p:new K.a({geometry:v,symbol:c,attributes:b,layer:y,sourceLayer:g,popupTemplate:f}),h=d&&(null==(n=t.view)?void 0:n.popup),m=h&&u.getEffectivePopupTemplate(h.defaultPopupTemplateEnabled);return m&&r.popup.open({features:[u],location:s}),o&&Object(Z.a)(o)&&!m&&t._highlightFeature({graphic:u,layerView:o}),!o&&l&&r&&r.graphics.push(u),t._set("selectedResult",e),t._set("resultGraphic",u),t.emit("select-result",{result:e,source:a,sourceIndex:i}),e}))}))}},{key:"suggest",value:function(e,t,n){var r=this,i=e||this.searchTerm;return this.emit("suggest-start",{searchTerm:i}),this._suggestTimer(t,n).then((function(){return r._suggestImmediate(i,n).then((function(e){return r._set("suggestions",e.results),r._set("suggestionCount",e.results.reduce((function(e,t){return e+t.results.length}),0)),r.emit("suggest-complete",e),e}))}))}},{key:"when",value:function(){var e=Object(I.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.g)(this,"updating");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_update",value:function(){var e=Object(I.a)(P.a.mark((function e(){var t,n,r,i;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.portal,n=this.view,!this.includeDefaultSources){e.next=10;break}if(r=this._updatingPromise=Object(m.j)([null==t?void 0:t.load(),null==n?void 0:n.when()]),!this.destroyed){e.next=5;break}return e.abrupt("return");case 5:return this.notifyChange("updating"),e.next=8,r;case 8:if(r===this._updatingPromise){e.next=10;break}return e.abrupt("return");case 10:if(this._updatingPromise=null,this.notifyChange("updating"),i=Object(j.j)(this,"messages"),e.t0=this.destroyed,e.t0){e.next=18;break}return this._handles.add(i),e.next=17,i;case 17:this._updateDefaultSources();case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_clearSearching",value:function(){this._searching=null,this.notifyChange("state")}},{key:"_convertHelperServices",value:function(){var e,t,n=this,r=null==(e=this.portal)||null==(t=e.helperServices)?void 0:t.geocode;return r?r.map((function(e){var t;if(!1!==e.placefinding){var r=M.a.apiKey&&ot(e.url)?{url:"https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer"}:null,i=Rt.fromJSON(Object(E.a)(Object(E.a)({},e),r)),a=null==(t=i.locator)?void 0:t.url;if(ot(a)||function(e){return!!e&&/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi.test(e)}(a)||function(e){return!!e&&/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(e)}(a)){var o=i.outFields||["Addr_type","Match_addr","StAddr","City"],s=i.placeholder||n.messages.placeholder,c="number"==typeof i.defaultZoomScale?i.defaultZoomScale:2500;i.set({singleLineFieldName:"SingleLine",outFields:o,placeholder:s,defaultZoomScale:c})}return i.singleLineFieldName?i:void 0}})).filter(Boolean):[]}},{key:"_getLayerSources",value:function(e,t){var n,r=this,i=null==(n=this.view)?void 0:n.map;return e.map((function(e){var n=i.findLayerById(e.id);if(n){var a=r._getLayerJSON(e),o=Je.fromJSON(a);return o.placeholder=t,r._getLayer(n,a).then((function(e){o.layer=e})),o}})).filter(Boolean).toArray()}},{key:"_getTableSources",value:function(e,t){var n,r=this,i=null==(n=this.view)?void 0:n.map;return e.map((function(e){var n=i.findTableById(e.id);if(n){var a=r._getLayerJSON(e),o=Je.fromJSON(a);return o.placeholder=t,r._getLayer(n,a).then((function(e){o.layer=e})),o}})).filter(Boolean).toArray()}},{key:"_convertApplicationProperties",value:function(){var e,t,n,r=null==(e=this.view)?void 0:e.map,i=null==r||null==(t=r.applicationProperties)||null==(n=t.viewing)?void 0:n.search;if(!i)return[];var a=i.enabled,o=i.hintText,s=i.layers,c=i.tables;return a?[].concat(Object(T.a)(this._getLayerSources(s,o)),Object(T.a)(this._getTableSources(c,o))):[]}},{key:"_getSubLayer",value:function(e,t){return e.load().then((function(){if(!e.allSublayers)return Promise.reject();var n=e.allSublayers.find((function(e){return e.id===t.subLayer}));return n?n.createFeatureLayer():Promise.reject()}))}},{key:"_getBuildingSubLayer",value:function(){var e=Object(I.a)(P.a.mark((function e(t,n){var r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load();case 2:if("building-component"===(null==(r=t.allSublayers.find((function(e){return e.id===n.subLayer})))?void 0:r.type)){e.next=7;break}e.t0=Promise.reject(),e.next=17;break;case 7:return e.next=9,r.load();case 9:if(null!=r.associatedLayer){e.next=13;break}e.t1=Promise.reject(),e.next=16;break;case 13:return e.next=15,r.associatedLayer.load();case 15:e.t1=r;case 16:e.t0=e.t1;case 17:return e.abrupt("return",e.t0);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getLayer",value:function(e,t){return"feature"===e.type||"scene"===e.type||"csv"===e.type||"geojson"===e.type||"ogc-feature"===e.type?Promise.resolve(e):"map-image"===e.type?this._getSubLayer(e,t).catch((function(){var t=new R.a("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return qt.error(t),null})):"building-scene"===e.type?this._getBuildingSubLayer(e,t):Promise.resolve(null)}},{key:"_getLayerJSON",value:function(e){return"function"==typeof e.toJSON?e.toJSON():e}},{key:"_updateDefaultSources",value:function(){var e=this.defaultSources,t=this.includeDefaultSources;e.removeAll(),t&&e.addMany([].concat(Object(T.a)(this._convertApplicationProperties()),Object(T.a)(this._convertHelperServices()))),this.notifyChange("allSources")}},{key:"_abortGoTo",value:function(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}},{key:"_clear",value:function(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}},{key:"_closePopup",value:function(){var e,t=null==(e=this.view)?void 0:e.popup,n=this.resultGraphic;if(t&&n){var r=t.selectedFeature;r&&r===n&&t.close()}}},{key:"_suggestTimer",value:function(e,t){var n=null!=e?e:this.suggestionDelay;return Object(m.a)(n,null,t&&t.signal)}},{key:"_createLocationForSearch",value:function(e){return e instanceof K.a?we(e.geometry):e instanceof D.a?e:Array.isArray(e)&&2===e.length?new D.a({longitude:e[0],latitude:e[1]}):null}},{key:"_createSuggestionForSearch",value:function(e){if(e&&Bt(e,"key")&&Bt(e,"text")&&Bt(e,"sourceIndex"))return e;var t=this._createLocationForSearch(e),n="string"==typeof e?e:this.searchTerm,r=this.selectedSuggestion,i=this.selectedResult,a=!e&&r&&i,o=a&&r.key===i.key&&r.sourceIndex===i.sourceIndex,s=a&&r.location;return o||s?r:{location:Object(A.q)(t),text:t?"":n,sourceIndex:null,key:null}}},{key:"_getFirstResult",value:function(e){var t=null;return e&&e.some((function(e){var n=e.results[0],r=!!n;return r&&(t=n),r})),t}},{key:"_selectFirstResult",value:function(e){return this.autoSelect&&e?this.select(e):Promise.resolve(null)}},{key:"_suggestImmediate",value:function(e,t){var n=this;return this.when().then((function(){return n._getSuggestionsFromSources(e,t)})).then((function(t){var r={activeSourceIndex:n.activeSourceIndex,searchTerm:e,numResults:0,numErrors:0,errors:[],results:[]};return n._formatResponse(r,t),r}))}},{key:"_formatSourceResponse",value:function(e,t,n){var r=t&&t.value||[],i=t&&t.error,a=this.allSources.getItemAt(n);if(i){var o={sourceIndex:n,source:a,error:i};e.errors.push(o),e.numErrors++}else{var s={sourceIndex:n,source:a,results:r};e.results.push(s),e.numResults+=r.length}}},{key:"_formatResponse",value:function(e,t,n){var r=this;if(t)if(e.activeSourceIndex===Yt){var i=n&&Bt(n,"sourceIndex")&&-1!==n.sourceIndex?n.sourceIndex:void 0;t.forEach((function(t,n){var a=void 0!==i?i:n;r._formatSourceResponse(e,t,a)}))}else this._formatSourceResponse(e,t[0],e.activeSourceIndex)}},{key:"_getResultsFromSources",value:function(e,t){var n=this,r=this.allSources,i=!e.location&&Bt(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,a=[];if(!r.length){var o=new R.a("search:no-sources-defined","At least one source is required.",{allSources:r});return qt.error(o),Promise.reject(o)}return i===Yt?r.forEach((function(r,i){a.push(n._getResultsFromSource(e,i,t))})):a.push(this._getResultsFromSource(e,i,t)),Object(m.j)(a)}},{key:"_getSuggestionsFromSources",value:function(e,t){var n=this,r=this.allSources,i=this.activeSourceIndex,a=[];if(!r.length){var o=new R.a("suggest:no-sources-defined","At least one source is required.",{allSources:r});return qt.error(o),Promise.reject(o)}return i===Yt?r.forEach((function(r,i){a.push(n._getSuggestionsFromSource(e,i,t))})):a.push(this._getSuggestionsFromSource(e,i,t)),Object(m.j)(a)}},{key:"_getResultsFromSource",value:function(e,t,n){var r,i=this.allSources.getItemAt(t),a=e.location,o=void 0===a?null:a,s=(null==(r=this.view)?void 0:r.spatialReference)||$t,c=Bt(i,"maxResults")?i.maxResults:this.maxResults,l=!!(i instanceof Je&&Bt(i,"exactMatch"))&&i.exactMatch,u=this.view;return i.getResults({view:u,sourceIndex:t,location:o,suggestResult:e,spatialReference:s,exactMatch:l,maxResults:c},n)}},{key:"_getSuggestionsFromSource",value:function(e,t,n){var r=this.allSources.getItemAt(t),i=Bt(r,"suggestionsEnabled")?r.suggestionsEnabled:this.suggestionsEnabled,a=e.length,o=Bt(r,"minSuggestCharacters")?r.minSuggestCharacters:this.minSuggestCharacters;if(i&&e.trim()&&a>=o){var s,c=(null==(s=this.view)?void 0:s.spatialReference)||$t,l=Bt(r,"maxSuggestions")?r.maxSuggestions:this.maxSuggestions,u=this.view;return r.getSuggestions({view:u,sourceIndex:t,suggestTerm:e,spatialReference:c,maxSuggestions:l},n)}return Promise.resolve(null)}},{key:"createDefaultSymbol",value:function(e,t){if("point"===t){var n=e;return new J.default({color:e.color,size:n.size,outline:{color:n.outline.color,width:n.outline.width}})}if("polyline"===t){var r=e;return new B.default({color:r.color,width:r.width})}if("polygon"===t){var i=e;return new $.default({color:i.color,outline:{color:i.outline.color,width:i.outline.width}})}}},{key:"_getLayerSourcePopupTemplate",value:function(e){var t=e.layer;if(t)return Bt(e,"popupTemplate")?e.popupTemplate:t.popupTemplate}},{key:"_getSourceIndexOfResult",value:function(e){var t=this.results,n=null;return t.some((function(t){return t.results.some((function(r){return r===e&&(n=t.sourceIndex,!0)}))})),n}},{key:"_goToSearchResult",value:function(){var e=Object(I.a)(P.a.mark((function e(t){var n,r,i;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!!t,this._abortGoTo(),r=Object(m.d)(),this._gotoController=r,i={target:{target:t},options:{animate:n,signal:r.signal}},e.next=7,this.callGoTo(i);case 7:this._gotoController=null;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getDefaultSymbol",value:function(e){var t,n,r,i=null==(t=this.view)||null==(n=t.map)||null==(r=n.basemap)?void 0:r.id,a=Object(A.i)(e,"feature","geometry","type");if(Object(A.k)(a)){var o=fe({basemap:i,geometryType:a})||fe({basemap:"topo",geometryType:a}),s=o&&o.primaryScheme;if(s)return s.color&&Bt(s,"opacity")&&(s.color.a=s.opacity),this.createDefaultSymbol(s,a)}return this.defaultSymbol}},{key:"_removeHighlight",value:function(){this._handles.remove(Ht)}},{key:"_getLayerView",value:function(){var e=Object(I.a)(P.a.mark((function e(t){var n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.view,t&&n&&"building-component"!==t.layer.type){e.next=3;break}return e.abrupt("return",Promise.resolve(null));case 3:return r=t.layer,e.next=6,n.when();case 6:return e.abrupt("return",n.whenLayerView(r));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_highlightFeature",value:function(e){var t=e.graphic,n=e.layerView,r=t.attributes,i=t.layer.objectIdField,a=r&&r[i],o=n.highlight(a||t);this._handles.add(o,Ht)}}]),n}(Object(X.a)(N.a.EventedMixin(L.a)));Kt.ALL_INDEX=Yt,Object(l.a)([Object(h.b)({readOnly:!0,value:null})],Kt.prototype,"activeSource",null),Object(l.a)([Object(h.b)()],Kt.prototype,"activeSourceIndex",null),Object(l.a)([Object(h.b)()],Kt.prototype,"allPlaceholder",null),Object(l.a)([Object(h.b)({readOnly:!0,dependsOn:["defaultSources.length","sources.length","includeDefaultSources"]})],Kt.prototype,"allSources",null),Object(l.a)([Object(h.b)()],Kt.prototype,"autoNavigate",void 0),Object(l.a)([Object(h.b)()],Kt.prototype,"autoSelect",void 0),Object(l.a)([Object(h.b)()],Kt.prototype,"defaultPopupTemplate",void 0),Object(l.a)([Object(h.b)({readOnly:!0})],Kt.prototype,"defaultSources",void 0),Object(l.a)([Object(h.b)()],Kt.prototype,"defaultSymbol",void 0),Object(l.a)([Object(h.b)()],Kt.prototype,"includeDefaultSources",void 0),Object(l.a)([Object(h.b)()],Kt.prototype,"locationEnabled",null),Object(l.a)([Object(h.b)()],Kt.prototype,"maxInputLength",void 0),Object(l.a)([Object(h.b)()],Kt.prototype,"maxResults",void 0),Object(l.a)([Object(h.b)()],Kt.prototype,"maxSuggestions",void 0),Object(l.a)([Object(h.b)()],Kt.prototype,"messages",void 0),Object(l.a)([Object(h.b)()],Kt.prototype,"minSuggestCharacters",void 0),Object(l.a)([Object(h.b)({readOnly:!0})],Kt.prototype,"placeholder",null),Object(l.a)([Object(h.b)()],Kt.prototype,"popupEnabled",void 0),Object(l.a)([Object(h.b)({type:U.a})],Kt.prototype,"popupTemplate",void 0),Object(l.a)([Object(h.b)({type:H.a})],Kt.prototype,"portal",void 0),Object(l.a)([Object(h.b)()],Kt.prototype,"resultCount",void 0),Object(l.a)([Object(h.b)()],Kt.prototype,"resultGraphicEnabled",void 0),Object(l.a)([Object(h.b)({readOnly:!0})],Kt.prototype,"resultGraphic",void 0),Object(l.a)([Object(h.b)({readOnly:!0})],Kt.prototype,"results",void 0),Object(l.a)([Object(h.b)({readOnly:!0})],Kt.prototype,"selectedSuggestion",void 0),Object(l.a)([Object(h.b)()],Kt.prototype,"searchAllEnabled",void 0),Object(l.a)([Object(h.b)({readOnly:!0})],Kt.prototype,"selectedResult",void 0),Object(l.a)([Object(h.b)()],Kt.prototype,"searchTerm",null),Object(l.a)([Object(h.b)({type:Wt})],Kt.prototype,"sources",void 0),Object(l.a)([Object(h.b)({readOnly:!0,dependsOn:["allSources.length","updating"]})],Kt.prototype,"state",null),Object(l.a)([Object(h.b)()],Kt.prototype,"suggestionDelay",void 0),Object(l.a)([Object(h.b)()],Kt.prototype,"suggestionCount",void 0),Object(l.a)([Object(h.b)({readOnly:!0})],Kt.prototype,"suggestions",void 0),Object(l.a)([Object(h.b)()],Kt.prototype,"suggestionsEnabled",void 0),Object(l.a)([Object(h.b)({readOnly:!0})],Kt.prototype,"updating",null),Object(l.a)([Object(h.b)()],Kt.prototype,"view",void 0),Object(l.a)([Object(h.b)()],Kt.prototype,"clear",null);var Zt=Kt=Object(l.a)([Object(v.a)(Gt)],Kt),Xt=n(77),Qt="esri-search-result-renderer esri-widget",en="esri-widget__anchor",tn="esri-search-result-renderer__more-results--show-more-results",nn="esri-search-result-renderer__more-results",rn="esri-search-result-renderer__more-results-list",an="esri-search-result-renderer__more-results-item",on="esri-search-result-renderer__more-results-list-header",sn=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r){var a;return Object(i.a)(this,n),(a=t.call(this,e,r)).messages=null,a.showMoreResultsOpen=!1,a.viewModel=null,a}return Object(a.a)(n,[{key:"render",value:function(){var e=Object(r.a)({},tn,this.showMoreResultsOpen);return Object(x.a)("div",{class:Qt},Object(x.a)("div",{key:"esri-search-renderer__container",class:this.classes(nn,e)},this.renderSearchResultName(),this.renderMoreResults()))}},{key:"renderMoreResults",value:function(){return Object(x.a)("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())}},{key:"renderSearchResultName",value:function(){var e,t=null==(e=this.viewModel)?void 0:e.selectedResult,n=t&&t.name||"";return Object(x.a)("div",{key:"esri-search-renderer__result-name",class:an},n)}},{key:"renderMoreResultsLists",value:function(){var e,t=this,n=null==(e=this.viewModel)?void 0:e.results;if(this.viewModel.resultCount<2)return null;var r=n.map((function(e){return t.renderMoreResultsList(e)}));return Object(x.a)("div",{key:"esri-search-renderer__more-results-container",class:rn},r)}},{key:"renderMoreResultsButton",value:function(){var e=this.messages;return this.viewModel.resultCount<2?null:Object(x.a)("div",{key:"esri-search-renderer__more-results-button",class:an},Object(x.a)("a",{class:en,href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?e.hideMoreResults:e.showMoreResults))}},{key:"renderMoreResultsHeader",value:function(e,t){return Object(x.a)("div",{key:"esri-search-result-renderer__header-".concat(t),class:on},e)}},{key:"renderMoreResultsList",value:function(e){var t,n,r=this,i=e.results,a=i.length,o=!!a,s=null==(t=this.viewModel)?void 0:t.selectedResult,c=1===a&&i[0]===s,l=this._getSourceName(e.source,e.sourceIndex),u=(null==(n=this.viewModel)?void 0:n.results.length)>1&&!c?this.renderMoreResultsHeader(l,e.sourceIndex):null,d=o&&i.map((function(e,t){return r.renderMoreResultsListItem(e,t)})),f=o&&!c?Object(x.a)("ul",{key:"esri-search-result-renderer__list-".concat(e.sourceIndex)},d):null;return o?Object(x.a)("div",{key:"esri-search-result-renderer__results-".concat(e.sourceIndex)},u,f):null}},{key:"renderMoreResultsListItem",value:function(e,t){return e!==this.get("viewModel.selectedResult")?Object(x.a)("li",{key:"esri-search-result-renderer__list-item-".concat(t)},Object(x.a)("a",{class:en,href:"#",tabindex:"0",bind:this,"data-result":e,onclick:this._selectResultClick,onkeydown:this._selectResultClick},e.name)):null}},{key:"_showMoreResultsClick",value:function(e){e.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;var t=this.get("viewModel.view.popup");t&&t.reposition()}},{key:"_selectResultClick",value:function(e){e.preventDefault();var t=e.currentTarget["data-result"];this.viewModel&&this.viewModel.select(t)}},{key:"_getSourceName",value:function(e,t){return t===Zt.ALL_INDEX?this.messages.all:e.name}}]),n}(S.a);Object(l.a)([Object(h.b)(),Object(_.a)("esri/widgets/Search/t9n/Search")],sn.prototype,"messages",void 0),Object(l.a)([Object(h.b)()],sn.prototype,"showMoreResultsOpen",void 0),Object(l.a)([Object(h.b)()],sn.prototype,"viewModel",void 0),Object(l.a)([Object(Xt.a)()],sn.prototype,"_showMoreResultsClick",null),Object(l.a)([Object(Xt.a)()],sn.prototype,"_selectResultClick",null);var cn=sn=Object(l.a)([Object(v.a)("esri.widgets.Search.SearchResultRenderer")],sn),ln="esri-search esri-widget",un="esri-widget__loader",dn="esri-widget__loader-text",fn="esri-widget__loader-animation",pn="esri-input",hn="esri-search--multiple-sources",bn="esri-search--loading",vn="esri-search--searching",yn="esri-search--show-suggestions",mn="esri-search--sources",gn="esri-search--warning",On="esri-search__container",jn="esri-search__input",wn="esri-search__input-container",_n="esri-search__form",kn="esri-search__submit-button",xn="esri-search__sources-button",Sn="esri-search__clear-button",Tn="esri-search__source-name",En="esri-search__suggestions-menu",Cn="esri-search__suggestions-list",Pn="esri-search__suggestions-list--current-location",In="esri-search__sources-menu",Mn="esri-search__source",An="esri-search__warning-menu",Rn="esri-search__warning-body",Ln="esri-search__warning-header",Fn="esri-search__warning-text",Dn="esri-search__no-value-text",Nn="esri-widget--disabled",Vn="esri-widget--button",zn="esri-icon-font-fallback-text",Un="esri-icon-locate-circled",Bn="esri-menu",Gn="esri-menu__list",qn="esri-menu__list-item",Hn="esri-menu__list-item--active",Wn="esri-menu__list-item--focus",$n="esri-menu__header",Jn="esri-icon-search",Yn="esri-icon-down-arrow esri-search__sources-button--down",Kn="esri-icon-up-arrow esri-search__sources-button--up",Zn="esri-icon-close",Xn="esri-icon-notice-triangle",Qn="esri-icon-search",er="esri-disabled",tr=/<[a-z/][\s\S]*>/i,nr=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r){var a;return Object(i.a)(this,n),(a=t.call(this,e,r))._activeMenuItemIndex=-1,a._handles=new O.a,a._inputNode=null,a._menuItemCount=0,a._sourceMenuButtonNode=null,a._sourceListNode=null,a._suggestionListNode=null,a._searchResultRenderer=new cn,a._relatedTarget=null,a._locateFailed=null,a.activeMenu="none",a.activeSource=null,a.activeSourceIndex=null,a.allPlaceholder=null,a.allSources=null,a.autoNavigate=null,a.autoSelect=null,a.defaultSources=null,a.disabled=!1,a.goToOverride=null,a.iconClass=Qn,a.includeDefaultSources=null,a.label=void 0,a.locationEnabled=null,a.maxResults=null,a.maxSuggestions=null,a.messages=null,a.messagesCommon=null,a.minSuggestCharacters=null,a.popupEnabled=null,a.popupTemplate=null,a.portal=null,a.resultGraphic=null,a.resultGraphicEnabled=null,a.results=null,a.searchAllEnabled=null,a.searchTerm=null,a.selectedResult=null,a.sources=null,a.suggestions=null,a.suggestionsEnabled=null,a.view=null,a.viewModel=new Zt,a.own(Object(j.d)(Object(o.a)(a),"searchTerm",(function(e){(e&&"warning"===a.activeMenu||!e&&!a.get("viewModel.selectedSuggestion.location"))&&(a.activeMenu="none")})),Object(j.b)(Object(o.a)(a),"viewModel.allSources","change",(function(){return a._watchSourceChanges()})),Object(j.a)(Object(o.a)(a),"activeMenu",(function(){return a._resetActiveMenuItemIndex()})),Object(j.a)(Object(o.a)(a),"viewModel.defaultPopupTemplate",(function(e){e&&(e.content=a._renderSearchResultsContent.bind(Object(o.a)(a)))}))),a}return Object(a.a)(n,[{key:"destroy",value:function(){this._handles.destroy(),this._handles=null,this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)}},{key:"displayedSearchTerm",get:function(){return"".concat(this.viewModel.searchTerm).trim()}},{key:"inputId",get:function(){return this._buildId("input")}},{key:"suggestionsMenuId",get:function(){return this._buildId("suggest-menu")}},{key:"sourceMenuId",get:function(){return this._buildId("source-menu")}},{key:"sourceMenuButtonId",get:function(){return this._buildId("source-menu-button")}},{key:"clear",value:function(){}},{key:"focus",value:function(){this._inputNode&&(this.activeMenu="suggestion",this._inputNode.focus(),this.emit("search-focus"))}},{key:"blur",value:function(e){this._inputNode&&(this._inputNode.blur(),this._inputBlur(e),this.emit("search-blur"))}},{key:"search",value:function(e){var t=this;this.activeMenu="none",this._cancelSuggest(),this._cancelSearch();var n=Object(m.d)(),r=n.signal;return this._searchController=n,this.viewModel.search(e,{signal:r}).catch((function(e){if(t._searchController===n)return t.activeMenu="none",t._searchController=null,e})).then((function(e){if(t._searchController===n)return t.activeMenu=e.numResults?"none":"warning",t._searchController=null,e}))}},{key:"suggest",value:function(e){var t=this;this._cancelSuggest();var n=Object(m.d)(),r=n.signal;return this._suggestController=n,this.viewModel.suggest(e,null,{signal:r}).then((function(e){if(t._suggestController===n)return t._suggestController=null,e.numResults&&(t.activeMenu="suggestion"),t._scrollToTopSuggestion(),e})).catch((function(){if(t._suggestController===n)return t._suggestController=null,null}))}},{key:"render",value:function(){var e,t=this.viewModel.state,n=(e={},Object(r.a)(e,er,"disabled"===t),Object(r.a)(e,Nn,this.disabled),e);return Object(x.a)("div",{class:this.classes(ln,n)},"loading"===t?this.renderLoader():this.renderContainer())}},{key:"renderSubmitButton",value:function(){var e=this.messages;return Object(x.a)("button",{"aria-label":e.searchButtonTitle,bind:this,class:this.classes(kn,Vn),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:e.searchButtonTitle},Object(x.a)("span",{"aria-hidden":"true",class:Jn}))}},{key:"renderWarningMenu",value:function(){return Object(x.a)("div",{key:"esri-search__error-menu",class:this.classes(Bn,An)},Object(x.a)("div",{class:Rn},this.renderWarning()))}},{key:"renderSourceMenuButton",value:function(){var e=this.messages,t=this.activeMenu,n=this.sourceMenuId,r=this.sourceMenuButtonId,i=this.viewModel,a=i.activeSourceIndex;return i.allSources.length>1?Object(x.a)("button",{id:r,key:"esri-search__source-menu-button",bind:this,"aria-label":e.searchIn,title:e.searchIn,"aria-haspopup":"true","aria-expanded":("source"===t).toString(),"aria-controls":n,class:this.classes(xn,Vn),onclick:this._handleSourcesMenuToggleClick,onblur:this._sourcesButtonBlur,afterCreate:w.i,"data-node-ref":"_sourceMenuButtonNode"},Object(x.a)("span",{"aria-hidden":"true",class:Yn}),Object(x.a)("span",{"aria-hidden":"true",class:Kn}),Object(x.a)("span",{class:Tn},this._getSourceName(a))):null}},{key:"renderSourcesList",value:function(){var e=this,t=this.viewModel,n=t.allSources,r=t.searchAllEnabled,i=this._activeMenuItemIndex,a=this.activeMenu,o=this.sourceMenuId,s=this.sourceMenuButtonId,c="source"===a&&i>-1?this._buildId("source-item",i):null;return n.length>1?Object(x.a)("ul",{"aria-activedescendant":c,"aria-labelledby":s,id:o,role:"menu",bind:this,afterCreate:w.i,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:Gn,tabIndex:-1},r?this.renderSource(Zt.ALL_INDEX):null,n.map((function(t,n){return e.renderSource(n)})).toArray()):null}},{key:"renderSourcesMenu",value:function(){return this.viewModel.allSources.length>1?Object(x.a)("div",{key:"esri-search__source-menu",class:this.classes(Bn,In)},this.renderSourcesList()):null}},{key:"renderLoader",value:function(){var e=this.messages,t=this.messagesCommon;return Object(x.a)("div",{class:un,key:"base-loader"},Object(x.a)("span",{"aria-hidden":"true",class:fn}),Object(x.a)("span",{class:zn},e.searchButtonTitle),Object(x.a)("span",{class:dn},t.loading))}},{key:"renderContainer",value:function(){var e,t=this.viewModel,n=t.allSources,i=t.state,a=this.activeMenu,o=(e={},Object(r.a)(e,hn,n.length>1),Object(r.a)(e,bn,"loading"===i),Object(r.a)(e,vn,"searching"===i),Object(r.a)(e,gn,"warning"===a),Object(r.a)(e,mn,"source"===a),Object(r.a)(e,yn,"suggestion"===a),e);return Object(x.a)("div",{class:this.classes(o,On),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())}},{key:"renderClearButton",value:function(){return this.searchTerm?Object(x.a)("button",{bind:this,class:this.classes(Sn,Vn),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearButtonFocus,title:this.messages.clearButtonTitle},Object(x.a)("span",{"aria-hidden":"true",class:Zn})):null}},{key:"renderLocationGroup",value:function(){var e=this.messages,t=this.locationEnabled,n=this.displayedSearchTerm,r=t&&!n,i="suggestion"===this.activeMenu&&0===this._activeMenuItemIndex;return r?Object(x.a)("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes(Gn,Cn,Pn)},Object(x.a)("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":("suggestion"===this.activeMenu&&0===this._activeMenuItemIndex).toString(),role:"option",class:this.classes(qn,i?Wn:null)},Object(x.a)("span",{"aria-hidden":"true",class:Un})," ",e.useCurrentLocation)):null}},{key:"renderInput",value:function(){var e=this.activeMenu,t=this.locationEnabled,n=this.displayedSearchTerm,r=this.messages,i=this.suggestionsMenuId,a=this.inputId,o=this._activeMenuItemIndex,s=this.viewModel,c=s.maxInputLength,l=s.placeholder,u=s.searchTerm,d=s.suggestionCount,f=!((!t||n)&&!d),p="suggestion"===e&&o>-1?this._buildId("suggestion-item",o):null;return Object(x.a)("input",{"aria-activedescendant":p,"aria-autocomplete":"list","aria-expanded":(f&&"suggestion"===e).toString(),"aria-controls":f?i:null,"aria-owns":f?i:null,"aria-haspopup":"listbox","aria-label":r.searchButtonTitle,bind:this,placeholder:l,maxlength:c,autocomplete:"off",type:"text",class:this.classes(pn,jn),value:u,id:a,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._handleInputClick,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:w.i,"data-node-ref":"_inputNode",onfocusout:this._storeRelatedTarget,onfocus:this.focus,onblur:this.blur,title:u?"":l})}},{key:"renderForm",value:function(){return Object(x.a)("form",{key:"esri-search__form",bind:this,class:_n,onsubmit:this._formSubmit,role:"search"},this.renderInput())}},{key:"renderSuggestList",value:function(e){var t=this,n=e.sourceIndex,r=e.results.length,i=e.results;return r?Object(x.a)("ul",{role:"group",key:"esri-search__suggestion-list-".concat(n),class:this.classes(Gn,Cn)},i.map((function(e){return t.renderSuggestion(e,t._menuItemCount++)}))):null}},{key:"renderSuggestionsGroup",value:function(){var e=this,t=this.viewModel.suggestions;return t?t.map((function(t){return[e.renderSuggestionHeader(t),e.renderSuggestList(t)]})):null}},{key:"renderSuggestionsMenu",value:function(){var e=this.displayedSearchTerm,t=this.locationEnabled,n=this.suggestionsMenuId,r=this.inputId,i=this.viewModel.suggestionCount,a=t&&!e||i;return this._menuItemCount=0,a?Object(x.a)("div",{id:n,key:"esri-search__suggestions-menu",class:this.classes(Bn,En),role:"listbox","aria-labelledby":r,bind:this,afterCreate:w.i,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null}},{key:"renderInputContainer",value:function(){return Object(x.a)("div",{key:"esri-search__input-container",class:wn},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())}},{key:"renderSuggestionHeader",value:function(e){var t=this.viewModel,n=t.allSources,r=t.activeSourceIndex,i=e.sourceIndex,a=e.results.length,o=n.length>1&&r===Zt.ALL_INDEX;return a&&o?Object(x.a)("div",{key:"esri-search__suggestion-header-".concat(i),class:$n},this._getSourceName(i)):null}},{key:"renderSuggestion",value:function(e,t){var n=this._activeMenuItemIndex,r=this.messages,i=this.viewModel.searchTerm;if(i){var a=e.text||r.untitledResult,o=tr.test(a),s=[];if(o)s.push(Object(x.a)("div",{innerHTML:a}));else{var c=this._splitResult(a,i),l=i.toLowerCase();c.forEach((function(e,t){e&&e.length&&(e.toLowerCase()===l?s.push(Object(x.a)("strong",{key:t},e)):s.push(e))}))}var u="suggestion"===this.activeMenu&&n===t;return Object(x.a)("li",{bind:this,id:this._buildId("suggestion-item",t),"aria-selected":("suggestion"===this.activeMenu&&this._activeMenuItemIndex===t).toString(),onclick:this._handleSuggestionClick,key:"esri-search__suggestion_".concat(t),"data-suggestion":e,role:"option",class:this.classes(qn,u?Wn:null)},s)}}},{key:"renderSource",value:function(e){var t,n=this.viewModel,i=n.activeSourceIndex,a=n.searchAllEnabled,o=(t={},Object(r.a)(t,Hn,e===i),Object(r.a)(t,Wn,"source"===this.activeMenu&&e===(a?this._activeMenuItemIndex-1:this._activeMenuItemIndex)),t),s=a?e+1:e;return Object(x.a)("li",{bind:this,key:"esri-search__source-".concat(e),id:this._buildId("source-item",s),"aria-checked":(e===i).toString(),onclick:this._handleSourceClick,"data-source-index":e,role:"menuitemradio",class:this.classes(Mn,qn,o)},this._getSourceName(e))}},{key:"renderNoResultsWarning",value:function(e){var t=this.messages,n=e?Object(g.a)(t.noResultsFoundForValue,{value:'"'.concat(e,'"')}):t.noResultsFound;return Object(x.a)("div",{key:"esri-search__no_results"},Object(x.a)("div",{class:Ln},t.noResults),Object(x.a)("div",{class:Fn},n))}},{key:"renderEmptySearchWarning",value:function(){var e=this.messages;return Object(x.a)("div",{key:"esri-search__empty-search"},Object(x.a)("span",{"aria-hidden":"true",class:Xn}),Object(x.a)("span",{class:Dn},e.emptyValue))}},{key:"renderLocateWarning",value:function(){var e=this.messages;return Object(x.a)("div",{key:"esri-search__locate-error"},Object(x.a)("span",{"aria-hidden":"true",class:Xn}),Object(x.a)("span",{class:Dn},e.locateError))}},{key:"renderWarning",value:function(){var e,t=this.displayedSearchTerm,n=this._locateFailed,r=this.viewModel;return n?this.renderLocateWarning():null!=(e=r.selectedSuggestion)&&e.location||t?this.renderNoResultsWarning(t):this.renderEmptySearchWarning()}},{key:"_resetActiveMenuItemIndex",value:function(){this._activeMenuItemIndex=-1}},{key:"_buildId",value:function(e,t){return"".concat(this.id,"-").concat(e).concat(void 0===t?"":"-".concat(t))}},{key:"_watchSourceChanges",value:function(){var e=this,t=this._handles,n=this.viewModel.allSources,r="sources";t.remove(r),n.forEach((function(n){return t.add(Object(j.d)(n,"name",(function(){return e.scheduleRender()})),r)}))}},{key:"_handleSourcesMenuToggleClick",value:function(){var e,t="source"===this.activeMenu;this.activeMenu=t?"none":"source",this.renderNow(),"source"===this.activeMenu&&(null==(e=this._sourceListNode)||e.focus())}},{key:"_handleClearButtonClick",value:function(){this.viewModel.clear(),this._focus()}},{key:"_handleSearchButtonClick",value:function(){this.search()}},{key:"_handleSuggestionClick",value:function(e){var t=e.currentTarget["data-suggestion"];t&&(this._focus(),this.search(t))}},{key:"_handleUseCurrentLocationClick",value:function(){this._useCurrentLocation()}},{key:"_useCurrentLocation",value:function(){var e=this;this._focus("none"),this._cancelSuggest(),this._cancelSearch();var t=Object(m.d)(),n=t.signal;this._searchController=t,this.viewModel.searchNearby({signal:n}).catch((function(){e._locateFailed=!0,e.activeMenu="warning"})).then((function(){e._searchController=null}))}},{key:"_handleSourceClick",value:function(e){this._setSourceFromMenuItem(e.currentTarget)}},{key:"_setSourceFromMenuItem",value:function(e){var t;if(e){var n=e["data-source-index"];this.viewModel.activeSourceIndex=n,this.activeMenu="none",null==(t=this._sourceMenuButtonNode)||t.focus()}}},{key:"_sourcesButtonBlur",value:function(e){var t=e&&e.relatedTarget;this._removeActiveMenu(t,this._sourceListNode)}},{key:"_inputBlur",value:function(e){var t=e&&e.relatedTarget;this._removeActiveMenu(t||this._relatedTarget,this._suggestionListNode)}},{key:"_storeRelatedTarget",value:function(e){this._relatedTarget=e.relatedTarget}},{key:"_clearButtonFocus",value:function(){this.activeMenu="none"}},{key:"_removeActiveMenu",value:function(e,t){!e||e&&t&&t.contains(e)||(this.activeMenu="none")}},{key:"_cancelSuggest",value:function(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)}},{key:"_cancelSearch",value:function(){this._searchController&&(this._searchController.abort(),this._searchController=null),this._locateFailed=!1}},{key:"_handleInputKeyup",value:function(e){var t,n=Object(y.a)(e);if(!e.ctrlKey&&!e.metaKey&&"Copy"!==n&&"ArrowLeft"!==n&&"ArrowRight"!==n&&"Shift"!==n){if("Tab"===n||"Escape"===n||e.shiftKey&&"Tab"===n)return this._cancelSuggest(),void("Escape"===n&&(this.activeMenu="none"));var r="Home"===n||"End"===n||"ArrowUp"===n||"ArrowDown"===n;if("Enter"===n&&this._activeMenuItemIndex<0)this._cancelSuggest();else{var i=null==(t=this._suggestionListNode)?void 0:t.getElementsByTagName("li");if(null!=i&&i.length){if("suggestion"!==this.activeMenu&&(this.activeMenu="suggestion"),r)return e.preventDefault(),this._cancelSuggest(),void this.handleItemNavigation(n,i,this._suggestionListNode);var a=i[this._activeMenuItemIndex];if("Enter"===n&&a){var o=a["data-suggestion"];return void(o?(this._focus(),this.search(o)):a["data-current-location-item"]&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest()}}}},{key:"handleItemNavigation",value:function(e,t,n){var r=this._activeMenuItemIndex;"Home"===e&&(this._activeMenuItemIndex=0),"End"===e&&(this._activeMenuItemIndex=t.length-1),"ArrowUp"===e&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?t.length-1:this._activeMenuItemIndex-1),"ArrowDown"===e&&(this._activeMenuItemIndex=this._activeMenuItemIndex===t.length-1?0:this._activeMenuItemIndex+1),r!==this._activeMenuItemIndex&&Object(w.g)(t[this._activeMenuItemIndex],n)}},{key:"_scrollToTopSuggestion",value:function(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)}},{key:"_handleInputClick",value:function(){this.activeMenu="suggestion"}},{key:"_handleInputPaste",value:function(e){var t=e.target;this.viewModel.searchTerm!==t.value&&(this.viewModel.searchTerm=t.value),this.viewModel.searchTerm&&this.suggest()}},{key:"_handleSourceMenuKeydown",value:function(e){var t=Object(y.a)(e);if(" "!==t&&"Enter"!==t)"ArrowUp"!==t&&"ArrowDown"!==t&&"End"!==t&&"Home"!==t||e.preventDefault();else{e.preventDefault();var n=this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex];this._setSourceFromMenuItem(n)}}},{key:"_handleSourceMenuKeyup",value:function(e){var t,n,r=Object(y.a)(e),i="ArrowUp"===r||"ArrowDown"===r||"End"===r||"Home"===r;if(i&&e.preventDefault(),"Escape"===r)return this.activeMenu="none",void(null==(n=this._sourceMenuButtonNode)||n.focus());var a=null==(t=this._sourceListNode)?void 0:t.getElementsByTagName("li");return a&&0!==a.length&&i?("source"!==this.activeMenu&&(this.activeMenu="source"),void this.handleItemNavigation(r,a,this._sourceListNode.parentElement)):void 0}},{key:"_focus",value:function(e){this.focus(),e&&(this.activeMenu=e)}},{key:"_formSubmit",value:function(e){e.preventDefault(),-1===this._activeMenuItemIndex&&this.search()}},{key:"_getSourceName",value:function(e){var t=this.messages,n=this.viewModel.allSources.getItemAt(e);return e===Zt.ALL_INDEX?t.all:n&&n.name||t.untitledSource}},{key:"_splitResult",value:function(e,t){var n=Object(d.a)(t);return e.replace(new RegExp("(^|)(".concat(n,")(|$)"),"ig"),"$1|$2|$3").split("|")}},{key:"_renderSearchResultsContent",value:function(){return this._searchResultRenderer.showMoreResultsOpen=!1,this._searchResultRenderer.viewModel=this.viewModel,this._searchResultRenderer}}]),n}(S.a);Object(l.a)([Object(h.b)()],nr.prototype,"_activeMenuItemIndex",void 0),Object(l.a)([Object(h.b)()],nr.prototype,"displayedSearchTerm",null),Object(l.a)([Object(h.b)({readOnly:!0})],nr.prototype,"inputId",null),Object(l.a)([Object(h.b)({readOnly:!0})],nr.prototype,"suggestionsMenuId",null),Object(l.a)([Object(h.b)({readOnly:!0})],nr.prototype,"sourceMenuId",null),Object(l.a)([Object(h.b)({readOnly:!0})],nr.prototype,"sourceMenuButtonId",null),Object(l.a)([Object(h.b)()],nr.prototype,"activeMenu",void 0),Object(l.a)([Object(b.a)("viewModel.activeSource")],nr.prototype,"activeSource",void 0),Object(l.a)([Object(b.a)("viewModel.activeSourceIndex")],nr.prototype,"activeSourceIndex",void 0),Object(l.a)([Object(b.a)("viewModel.allPlaceholder")],nr.prototype,"allPlaceholder",void 0),Object(l.a)([Object(b.a)("viewModel.allSources")],nr.prototype,"allSources",void 0),Object(l.a)([Object(b.a)("viewModel.autoNavigate")],nr.prototype,"autoNavigate",void 0),Object(l.a)([Object(b.a)("viewModel.autoSelect")],nr.prototype,"autoSelect",void 0),Object(l.a)([Object(b.a)("viewModel.defaultSources")],nr.prototype,"defaultSources",void 0),Object(l.a)([Object(h.b)()],nr.prototype,"disabled",void 0),Object(l.a)([Object(b.a)("viewModel.goToOverride")],nr.prototype,"goToOverride",void 0),Object(l.a)([Object(h.b)()],nr.prototype,"iconClass",void 0),Object(l.a)([Object(b.a)("viewModel.includeDefaultSources")],nr.prototype,"includeDefaultSources",void 0),Object(l.a)([Object(h.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],nr.prototype,"label",void 0),Object(l.a)([Object(b.a)("viewModel.locationEnabled")],nr.prototype,"locationEnabled",void 0),Object(l.a)([Object(b.a)("viewModel.maxResults")],nr.prototype,"maxResults",void 0),Object(l.a)([Object(b.a)("viewModel.maxSuggestions")],nr.prototype,"maxSuggestions",void 0),Object(l.a)([Object(h.b)(),Object(_.a)("esri/widgets/Search/t9n/Search")],nr.prototype,"messages",void 0),Object(l.a)([Object(h.b)(),Object(_.a)("esri/t9n/common")],nr.prototype,"messagesCommon",void 0),Object(l.a)([Object(b.a)("viewModel.minSuggestCharacters")],nr.prototype,"minSuggestCharacters",void 0),Object(l.a)([Object(b.a)("viewModel.popupEnabled")],nr.prototype,"popupEnabled",void 0),Object(l.a)([Object(b.a)("viewModel.popupTemplate")],nr.prototype,"popupTemplate",void 0),Object(l.a)([Object(b.a)("viewModel.portal")],nr.prototype,"portal",void 0),Object(l.a)([Object(b.a)("viewModel.resultGraphic")],nr.prototype,"resultGraphic",void 0),Object(l.a)([Object(b.a)("viewModel.resultGraphicEnabled")],nr.prototype,"resultGraphicEnabled",void 0),Object(l.a)([Object(b.a)("viewModel.results")],nr.prototype,"results",void 0),Object(l.a)([Object(b.a)("viewModel.searchAllEnabled")],nr.prototype,"searchAllEnabled",void 0),Object(l.a)([Object(b.a)("viewModel.searchTerm")],nr.prototype,"searchTerm",void 0),Object(l.a)([Object(b.a)("viewModel.selectedResult")],nr.prototype,"selectedResult",void 0),Object(l.a)([Object(b.a)("viewModel.sources")],nr.prototype,"sources",void 0),Object(l.a)([Object(b.a)("viewModel.suggestions")],nr.prototype,"suggestions",void 0),Object(l.a)([Object(b.a)("viewModel.suggestionsEnabled")],nr.prototype,"suggestionsEnabled",void 0),Object(l.a)([Object(b.a)("viewModel.view")],nr.prototype,"view",void 0),Object(l.a)([Object(k.a)(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),Object(h.b)({type:Zt})],nr.prototype,"viewModel",void 0),Object(l.a)([Object(b.a)("viewModel.clear")],nr.prototype,"clear",null);var rr=nr=Object(l.a)([Object(v.a)("esri.widgets.Search")],nr);t.a=rr},function(e,t,n){"use strict";var r=n(26),i=n(35),a=n(2),o=n(3),s=n(5),c=n(6),l=n(0),u=(n(16),n(13)),d=(n(17),n(1)),f=n(32),p=n(8),h=(n(12),n(19),n(20),n(84)),b=n(51),v=n(25),y=(n(56),n(77)),m=n(75),g=n(9),O=n(72),j=n(58),w=n(40),_=n(133),k=n(340),x=n(7),S=n.n(x),T=n(15),E=n(195),C=n(18),P=n(24);function I(e){return e&&"base-tile"===e.type||"tile"===e.type||"elevation"===e.type||"imagery-tile"===e.type||"base-elevation"===e.type||"open-street-map"===e.type||"wcs"===e.type||"web-tile"===e.type||"wmts"===e.type||"vector-tile"===e.type}var M=n(4),A=n(59),R=n(44),L=n(61),F=n(63),D=(n(71),n(45)),N=n(66),V=n(114),z=n(141),U=n(142),B=function(){function e(t){Object(a.a)(this,e);var n=e.checkUnsupported(t);if(n)throw n;this.spatialReference=t.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isGCS=Object(z.a)(this.spatialReference)||Object(A.g)(this.spatialReference)||Object(A.h)(this.spatialReference),this.origin=[t.origin.x,t.origin.y],this.pixelSize=t.size[0],this.dpi=t.dpi;var r=t.lods.reduce((function(e,t,n){return t.level<e.min&&(e.min=t.level,e.minIndex=n),e.max=Math.max(e.max,t.level),e}),{min:1/0,minIndex:0,max:-1/0}),i=t.lods[r.minIndex],o=Math.pow(2,i.level),s=i.resolution*o,c=i.scale*o;this.levels=new Array(r.max+1);for(var l=0;l<this.levels.length;l++)this.levels[l]={resolution:s,scale:c,tileSize:[s*t.size[0],s*t.size[1]]},s/=2,c/=2}return Object(o.a)(e,[{key:"clone",value:function(){return new e(this.toTileInfo())}},{key:"toTileInfo",value:function(){return new U.a({dpi:this.dpi,origin:{x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference},size:[this.pixelSize,this.pixelSize],spatialReference:this.spatialReference,lods:this.levels.map((function(e,t){return{level:t,scale:e.scale,resolution:e.resolution}}))})}},{key:"getExtent",value:function(e,t,n,r){var i=this.levels[e],a=i.tileSize[0],o=i.tileSize[1];r[0]=this.origin[0]+n*a,r[2]=r[0]+a,r[3]=this.origin[1]-t*o,r[1]=r[3]-o}},{key:"convertExtentToRadians",value:function(e,t){this._isWebMercator?(t[0]=Object(L.f)(e[0]),t[1]=Object(L.h)(e[1]),t[2]=Object(L.f)(e[2]),t[3]=Object(L.h)(e[3])):this._isGCS&&(t[0]=Object(D.f)(e[0]),t[1]=Object(D.f)(e[1]),t[2]=Object(D.f)(e[2]),t[3]=Object(D.f)(e[3]))}},{key:"getExtentGeometry",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new F.a;return this.getExtent(e,t,n,G),r.spatialReference=this.spatialReference,r.xmin=G[0],r.ymin=G[1],r.xmax=G[2],r.ymax=G[3],r.zmin=void 0,r.zmax=void 0,r}},{key:"ensureMaxLod",value:function(e){if(null==e)return!1;for(var t=!1;this.levels.length<=e;){var n=this.levels[this.levels.length-1],r=n.resolution/2;this.levels.push({resolution:r,scale:n.scale/2,tileSize:[r*this.pixelSize,r*this.pixelSize]}),t=!0}return t}},{key:"capMaxLod",value:function(e){this.levels.length>e+1&&(this.levels.length=e+1)}},{key:"getMaxLod",value:function(){return this.levels.length-1}},{key:"scaleAtLevel",value:function(e){return this.levels[0].scale/Math.pow(2,e)}},{key:"levelAtScale",value:function(e){var t=this.levels[0].scale;return e>=t?0:Math.log(t/e)*Math.LOG2E}},{key:"resolutionAtLevel",value:function(e){return this.levels[0].resolution/Math.pow(2,e)}},{key:"compatibleWith",value:function(t){if(!(t instanceof e)){if(e.checkUnsupported(t))return!1;t=new e(t)}if(!t.spatialReference.equals(this.spatialReference))return!1;if(t.pixelSize!==this.pixelSize)return!1;var n=Math.min(this.levels.length,t.levels.length)-1,r=this.levels[n].resolution,i=.5*r;return!(!Object(D.g)(t.origin[0],this.origin[0],i)||!Object(D.g)(t.origin[1],this.origin[1],i))&&(i=.5*r/Math.pow(2,n)/this.pixelSize*12,Object(D.g)(r,t.levels[n].resolution,i))}},{key:"rootTilesInExtent",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,i=this.levels[0].tileSize;if(0===i[0]||0===i[1])return[];e.computeRowColExtent(t,i,this.origin,G);var a=G[1],o=G[3],s=G[0],c=G[2],l=c-s,u=o-a;if(l*u>r){var d=Math.floor(Math.sqrt(r));u>d&&(o=(a=a+Math.floor(.5*u)-Math.floor(.5*d))+d),l>d&&(c=(s=s+Math.floor(.5*l)-Math.floor(.5*d))+d)}for(var f=[],p=a;p<o;p++)for(var h=s;h<c;h++)f.push([0,p,h]);return Object(M.k)(n)&&(n[0]=this.origin[0]+s*i[0],n[1]=this.origin[1]-o*i[1],n[2]=this.origin[0]+c*i[0],n[3]=this.origin[1]-a*i[1]),f}},{key:"test",get:function(){return{isWebMercator:this._isWebMercator,isGCS:this._isGCS}}}],[{key:"computeRowColExtent",value:function(e,t,n,r){var i=.001*(e[2]-e[0]+(e[3]-e[1]));r[0]=Math.max(0,Math.floor((e[0]+i-n[0])/t[0])),r[2]=Math.max(0,Math.ceil((e[2]-i-n[0])/t[0])),r[1]=Math.max(0,Math.floor((n[1]-e[3]+i)/t[1])),r[3]=Math.max(0,Math.ceil((n[1]-e[1]-i)/t[1]))}},{key:"isPowerOfTwo",value:function(e){var t=e.lods,n=t[0].resolution*Math.pow(2,t[0].level);return!t.some((function(e){return!Object(D.h)(e.resolution,n/Math.pow(2,e.level))}))}},{key:"hasGapInLevels",value:function(e){var t=e.lods.map((function(e){return e.level}));t.sort((function(e,t){return e-t}));for(var n=1;n<t.length;n++)if(t[n]!==t[0]+n)return!0;return!1}},{key:"tileSizeSupported",value:function(e){var t=e.size[1];return t===e.size[0]&&0==(t&t-1)&&t>=128&&t<=512}},{key:"checkUnsupported",value:function(t){return t?t.lods.length<1?new C.a("tilingscheme:generic","Tiling scheme must have at least one level"):e.isPowerOfTwo(t)?e.hasGapInLevels(t)?new C.a("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):e.tileSizeSupported(t)?null:new C.a("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"):new C.a("tilingscheme:power-of-two","Tiling scheme must be power of two"):new C.a("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}},{key:"fromExtent",value:function(t,n){var r=t[2]-t[0],i=t[3]-t[1],a=Object(N.d)(n),o=1.2*Math.max(r,i),s=256,c=new e(new U.a({size:[s,s],origin:{x:t[0]-.5*(o-r),y:t[3]+.5*(o-i)},lods:[{level:0,resolution:o/s,scale:1/(s/96*.0254/(o*a))}],spatialReference:n}));return c.ensureMaxLod(20),c}},{key:"makeWebMercatorAuxiliarySphere",value:function(t){var n=new e(e.WebMercatorAuxiliarySphereTileInfo);return n.ensureMaxLod(t),n}},{key:"makeGCSWithTileSize",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,i=256/n,a=new e(new U.a({size:[n,n],origin:{x:-180,y:90,spatialReference:t},spatialReference:t,lods:[{level:0,resolution:.703125*i,scale:295497598.570834*i}]}));return a.ensureMaxLod(r),a}}]),e}();B.WebMercatorAuxiliarySphereTileInfo=new U.a({size:[256,256],origin:{x:-20037508.342787,y:20037508.342787,spatialReference:R.a.WebMercator},spatialReference:R.a.WebMercator,lods:[{level:0,resolution:156543.03392800014,scale:591657527.591555}]}),B.WebMercatorAuxiliarySphere=B.makeWebMercatorAuxiliarySphere(19);var G=Object(V.i)(),q=B,H=(n(622),n(618),n(621),n(10)),W=n(14),$=n(22),J=n(132),Y=n(36),K=n(62),Z=n(282),X=n(86),Q=function e(t){Object(a.a)(this,e),this.client=t,this._cancelled=!1,this.size=0,this.duration=0},ee=function e(t){Object(a.a)(this,e),this.typeWorkerQuota=t,this.tasks=new Array,this.numWorkers=0,this.statistics=new te},te=function e(){Object(a.a)(this,e),this.requests=0,this.size=0,this.duration=0,this.speed=0},ne=function(){function e(t,n,r,i){Object(a.a)(this,e),this._workerFunc=t,this._callbackFunc=n,this._maxTotalNumWorkers=r,this._totalNumWorkers=0,this._clients=i.map((function(e){return new ee(e)}))}return Object(o.a)(e,[{key:"hasQuota",value:function(e){var t=this._clients[e];return!!t&&(this._totalNumWorkers<this._maxTotalNumWorkers||t.numWorkers+t.tasks.length<t.typeWorkerQuota)}},{key:"push",value:function(e){var t=this,n=this._clients[e.client];n&&(this._totalNumWorkers<this._maxTotalNumWorkers?(n.numWorkers++,this._totalNumWorkers++,this._workerFunc(e,(function(e,n){return t._taskCallback(e,n)}))):n.tasks.push(e))}},{key:"cancel",value:function(e){this._taskFinished(e),e._cancelled=!0}},{key:"destroy",value:function(){this._clients.length=0}},{key:"_taskFinished",value:function(e){var t=this._clients[e.client];this._totalNumWorkers--,t.numWorkers--,t.statistics.requests++,t.statistics.size+=e.size||0,t.statistics.duration+=e.duration||0,t.statistics.speed=t.statistics.duration>0?t.statistics.size/t.statistics.duration:0,Object(X.a)(t.numWorkers>=0),this._next()}},{key:"_next",value:function(){var e,t=Object(W.a)(this._clients);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n&&n.numWorkers<n.typeWorkerQuota&&this._processQueue(n))return}}catch(o){t.e(o)}finally{t.f()}var r,i=Object(W.a)(this._clients);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a&&this._processQueue(a))return}}catch(o){i.e(o)}finally{i.f()}}},{key:"_processQueue",value:function(e){for(var t=this;e.tasks.length>0;)if(this._workerFunc(e.tasks.shift(),(function(e,n){return t._taskCallback(e,n)})))return e.numWorkers++,this._totalNumWorkers++,!0;return!1}},{key:"_taskCallback",value:function(e,t){e._cancelled||(this._callbackFunc(e,t),this._taskFinished(e))}},{key:"getStatsForType",value:function(e){var t=this._clients[e];return t?{quota:t.typeWorkerQuota,workers:t.numWorkers,queueSize:t.tasks.length,requestStats:t.statistics}:null}},{key:"test",get:function(){var e=this;return{set workerFunc(t){e._workerFunc=t}}}}]),e}(),re=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,o,s){var c;return Object(a.a)(this,n),(c=t.call(this,o)).url=e,c.options=r,c.docType=i,c.key=s,c.result=null,c.status=1,c.request=null,c.abortController=null,c.resolvers=new Array,c.startTime=0,c}return n}(Q),ie=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.apply(this,arguments)).tasks=new Map,e.onLoadQueue=new Array,e.doneQueue=new Array,e.updating=!1,e}return Object(o.a)(n,[{key:"setup",value:function(e,t,n){var r=this;this.loadQueue=new ne((function(e,t){return r.startLoading(e,t)}),(function(e,t){return r.doneLoadingCallback(e,t)}),e,t),n&&(this.taskHandle=n.registerTask(Z.b.STREAM_DATA_LOADER,(function(e){return r.update(e)}),(function(){return r.doneQueue.length>0||r.onLoadQueue.length>0})))}},{key:"destroy",value:function(){this.taskHandle&&(this.taskHandle.remove(),this.taskHandle=null),this.tasks.forEach((function(e){e.abortController&&e.abortController.abort()})),this.loadQueue.destroy(),this.loadQueue=null,this.onLoadQueue=null,this.doneQueue=null,this.tasks=null}},{key:"hasDownloadSlots",value:function(e){return this.loadQueue.hasQuota(e)}},{key:"request",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=Object(P.g)();a.__signal=Object(M.k)(i)?i.signal:null;var o=this.createOrUpdateTask(e,t,n,i,a);return Object(P.p)(i,(function(){return r.cancelRequest(o,a)})),a.promise}},{key:"createTask",value:function(e,t,n,r,i,a){var o=new re(e,t,n,r,i);return this.updateTask(o,a),this.tasks.set(i,o),1===this.tasks.size&&this._set("updating",!0),this.loadQueue.push(o),o}},{key:"cancelRequest",value:function(e,t){Object(J.j)(e.resolvers,t),t.reject(Object(P.e)()),0===e.resolvers.length&&(2===e.status&&(e.status=4,this.loadQueue.cancel(e),e.abortController.abort(),e.request=null,e.abortController=null),e.status=4,this.tasks.delete(e.key),0===this.tasks.size&&this._set("updating",!1))}},{key:"taskKey",value:function(e,t,n){return"".concat(e,":").concat(t,":").concat(n)}},{key:"updateTask",value:function(e,t){e.resolvers.push(t)}},{key:"createOrUpdateTask",value:function(e,t,n,r,i){var a=Object(M.k)(r)&&r.uid||e,o=this.taskKey(a,t,n),s=this.tasks.get(o);return s?(this.updateTask(s,i),s):this.createTask(e,r,t,n,o,i)}},{key:"doneLoadingCallback",value:function(e,t){this.loadQueue&&(Object(X.a)(2===e.status),e.status=3,this.taskHandle?this.doneQueue.push({task:e,err:t}):this.doneLoading(e,t))}},{key:"update",value:function(e){for(;!e.done&&this.onLoadQueue.length>0;){var t=this.onLoadQueue.shift();Object(P.u)(t.task.abortController),t.task.abortController=null,t.callback(t.task),e.madeProgress()}for(;!e.done&&this.doneQueue.length>0;){var n=this.doneQueue.shift();3!==n.task.status&&(n.err=n.err||Object(P.e)()),this.doneLoading(n.task,n.err),e.madeProgress()}}},{key:"doneLoading",value:function(e,t){var n,r=e.result instanceof HTMLImageElement?0:e.resolvers.length,i=Object(W.a)(e.resolvers);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(t)Object(P.m)(t)?a.reject(t):a.reject(new C.a("stream-data-loader:request-error","Failed to request resource at '".concat(e.url,"'. ").concat(t),{url:e.url,error:t}));else{var o=--r<=0?e.result:Object($.a)(e.result);a.resolve(o)}}}catch(s){i.e(s)}finally{i.f()}this.tasks.delete(e.key),0===this.tasks.size&&this._set("updating",!1)}},{key:"startLoading",value:function(e,t){var n,r,i=this;if(4===e.status)return!1;switch(e.startTime=performance.now(),e.status=2,e.docType){case"binary":r="array-buffer",n=0;break;case"image":r="image";break;case"image+type":r="array-buffer";break;default:r="json"}e.abortController=Object(P.d)();var a=e.abortController.signal;e.request=Object(K.default)(e.url,Object(H.a)(Object(H.a)({},e.options),{},{responseType:r,timeout:n,signal:a}));var o=function(){},s=function(n){e.duration=performance.now()-e.startTime,e.size=n instanceof ArrayBuffer?n.byteLength:e.size||0,e.result=n,i.taskHandle?i.onLoadQueue.push({callback:t,task:e}):(e.abortController=null,t(e))},c=function(n){2===e.status&&t(e,n),o()};return"image+type"!==e.docType?(e.request.then((function(e){return s(e.data)}),c),!0):(e.request.then((function(t){var i=t.data,l=function(e){if(e.byteLength<2)return"unknown";var t=new Uint8Array(e,0,e.byteLength);return 137===t[0]&&80===t[1]?"image/png":71===t[0]&&73===t[1]?"image/gif":66===t[0]&&77===t[1]?"image/bmp":255===t[0]&&216===t[1]?"image/jpeg":"unknown"}(i);if(r="image",e.size=i.byteLength,"unknown"===l)return e.request=Object(K.default)(e.url,{responseType:r,timeout:n,signal:a}),void e.request.then((function(e){return s(e.data)}),c);var u=new Blob([i],{type:l}),d=window.URL.createObjectURL(u);o=function(){return window.URL.revokeObjectURL(d)},e.request=Object(K.default)(d,{responseType:r,timeout:n,signal:a}),e.request.then((function(e){return s(new ae(e.data,l,o))}),c)}),c),!0)}},{key:"test",get:function(){return{loadQueue:this.loadQueue}}}]),n}(Y.a);Object(l.a)([Object(d.b)({readOnly:!0})],ie.prototype,"updating",void 0),ie=Object(l.a)([Object(p.a)("esri.views.3d.support.StreamDataLoader")],ie);var ae=function(){function e(t,n,r){Object(a.a)(this,e),this.image=t,this.type=n,this.release=r}return Object(o.a)(e,[{key:"isOpaque",get:function(){return"image/jpeg"===this.type}}]),e}(),oe=(n(768),n(290),n(27)),se=n(11),ce=(Object(D.e)(D.a/10),Object(V.i)());q.WebMercatorAuxiliarySphere.getExtent(0,0,0,ce);Object(V.i)([-180,-90,180,90]);var le=Object(oe.e)(),ue=Object(oe.e)(),de=Object(oe.e)(),fe=Object(oe.e)();function pe(e,t,n,r){Object(se.j)(le,n),le[r]=t[r];var i,a=Object(se.i)(le,le,t),o=Object(se.i)(ue,e,t),s=Object(se.g)(o,a),c=Object(se.g)(a,a);i=s<=0?t:c<=s?n:Object(se.e)(le,t,Object(se.d)(a,a,s/c));var l=Object(se.i)(le,e,i);return Math.PI/2-Math.atan(l[2]/Math.sqrt(l[0]*l[0]+l[1]*l[1]))}var he=Object.freeze({__proto__:null,isInsideExtent:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e.extent;if(0===n)return Object(V.e)(r,t);var i=Math.min(r[2]-r[0],r[3]-r[1]);return Object(V.g)(r,t,n*i)},tiltOnEdge:pe,tiltToExtentEdge:function(e,t){var n=e.elevationBounds,r=e.extent,i=.5*(n.min+n.max);de[0]=r[0],de[1]=r[1],de[2]=i,fe[0]=r[2],fe[1]=r[3],fe[2]=i;var a=1/0,o=1/0;return t[0]<de[0]?a=pe(t,de,fe,0):t[0]>fe[0]&&(a=pe(t,fe,de,0)),t[1]<de[1]?o=pe(t,de,fe,1):t[1]>fe[1]&&(o=pe(t,fe,de,1)),Math.min(a,o)},checkIfTileInfoSupportedForViewSR:function(e,t,n){if(e.spatialReference.isGeographic)return new C.a("tilingscheme:local-gcs-not-supported","Geographic coordinate systems are not supported in local scenes");var r=q.checkUnsupported(e);return r||(function(e,t){var n=e.lods,r=n[0].resolution*Math.pow(2,n[0].level),i=[r*e.size[0],r*e.size[1]],a=[e.origin.x,e.origin.y],o=Object(V.m)(t),s=Object(V.i)();q.computeRowColExtent(o,i,a,s);var c=(s[2]-s[0])*(s[3]-s[1]);if(c>64){var l=n[0].scale*Math.pow(2,n[0].level),u=Math.max((o[3]-o[1])/e.size[1],(o[2]-o[0])/e.size[0])*l/r,d=Math.floor(Math.log(u)/Math.log(10));return u=Math.ceil(u/Math.pow(10,d))*Math.pow(10,d),new C.a("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(l).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+u.toLocaleString()+".",{level0Scale:l,suggestedLevel0Scale:u,requiredNumRootTiles:c,allowedNumRootTiles:64})}return null}(e,n)||(t&&!e.spatialReference.equals(t)?new C.a("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene"):null))}});var be=Object.freeze({__proto__:null,isInsideExtent:function(){return!0},tiltToExtentEdge:function(){return 0},checkIfTileInfoSupportedForViewSR:function(e,t){var n=e.lods.length-1,r=e.spatialReference,i=Object(z.a)(r)||Object(A.g)(r)||Object(A.h)(r);if(r.isWebMercator){if(!q.makeWebMercatorAuxiliarySphere(n).compatibleWith(e))return new C.a("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!i)return new C.a("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!q.makeGCSWithTileSize(e.spatialReference,e.size[0],n).compatibleWith(e))return e.spatialReference.isWGS84?new C.a("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme"):new C.a("tilingscheme:incompatible-global","The tiling scheme is not compatible with the ArcGIS Online tiling scheme")}if(t&&!e.spatialReference.equals(t))return new C.a("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene")}}),ve={planar:he,spherical:be};Math.PI,Math.PI;function ye(e,t,n,r){return ve[2===r||"planar"===r?"planar":"spherical"].checkIfTileInfoSupportedForViewSR(e,n,t)}function me(e){return ge.apply(this,arguments)}function ge(){return(ge=Object(T.a)(S.a.mark((function e(t){var n,r=arguments;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,_e(t,n);case 3:Object(P.u)(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e){return je.apply(this,arguments)}function je(){return(je=Object(T.a)(S.a.mark((function e(t){var n,r,i,a,o,s=arguments;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},r=t.basemap,i=t.view,e.next=4,r.load(n);case 4:if(Object(P.u)(n),0!==r.baseLayers.length){e.next=7;break}return e.abrupt("return");case 7:if(I(a=r.baseLayers.getItemAt(0))){e.next=10;break}return e.abrupt("return");case 10:if(!r.spatialReference){e.next=14;break}if(!i.spatialReference.equals(r.spatialReference)){e.next=13;break}return e.abrupt("return");case 13:we();case 14:return e.next=16,a.load(n);case 16:Object(P.u)(n),0!==(o=(a.get("supportedSpatialReferences")||[a.get("tileInfo.spatialReference")]).filter(Boolean)).length&&o.every((function(e){return!i.spatialReference.equals(e)}))&&we();case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(){throw new C.a("basemap-compatibility:incompatible-spatial-reference","Basemap spatial reference is not compatible with the view")}function _e(e,t){return ke.apply(this,arguments)}function ke(){return(ke=Object(T.a)(S.a.mark((function e(t,n){var r,i,a,o,s,c,l,u,d;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.basemap,i=t.view,e.next=3,r.load(n);case 3:if(0!==r.baseLayers.length){e.next=5;break}return e.abrupt("return");case 5:if(!(a=xe(r.baseLayers.concat(r.referenceLayers))).length){e.next=8;break}throw a[0];case 8:return o=Object(E.b)(r.baseLayers.getItemAt(0))(),e.prev=9,e.next=12,o.load(n);case 12:e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(9),"basemap-compatibility:unknown-error","Unknown basemap compatibility error",s=e.t0.name,c=void 0===s?"basemap-compatibility:unknown-error":s,l=e.t0.message,u=void 0===l?"Unknown basemap compatibility error":l,d=e.t0.details,new C.a(c,u,d);case 18:Se(o,i);case 19:case"end":return e.stop()}}),e,null,[[9,14]])})))).apply(this,arguments)}function xe(e){var t=["ArcGISTiledImageServiceLayer","ArcGISTiledMapServiceLayer","OpenStreetMap","VectorTileLayer","WebTiledLayer"];return e.toArray().filter((function(e){return-1===t.indexOf(e.operationalLayerType)})).map((function(e){return new C.a("basemap-compatibility:unsupported-basemap-layer-type","Unsupported basemap layer type ${operationalLayerType}",{layer:e,operationalLayerType:e.operationalLayerType||"unknown"})}))}function Se(e,t){var n=e.tileInfo;if(n){var r=t.viewingMode;if(r){if(!function(e,t){return null!=e&&("2d"===t||("local"===t?!e.isGeographic:e.isWebMercator||e.isWGS84||4490===e.wkid||104971===e.wkid||104905===e.wkid||104903===e.wkid))}(n.spatialReference,r))throw new C.a("basemapgalleryitem:spatial-reference-unsupported-".concat(r),"Basemap spatial reference is unsupported in ".concat(r," mode"));if("global"===r){var i=ye(n,e.fullExtent,null,1);if(i&&e.compatibleTileInfo256&&!ye(e.compatibleTileInfo256,e.fullExtent,null,1)&&(i=null),i){var a=n.spatialReference.isWebMercator?"web-mercator":"wgs84";throw new C.a("basemapgalleryitem:tiling-scheme-unsupported-".concat(a,"-global"),"Basemap tiling scheme is unsupported in global mode",{error:i})}}else if(q.checkUnsupported(n))throw new C.a("basemapgalleryitem:tiling-scheme-unsupported-local","Basemap tiling scheme is unsupported in local mode");var o=t.get("basemapTerrain.tilingScheme");if(o&&!o.compatibleWith(n)&&(!e.compatibleTileInfo256||!o.compatibleWith(e.compatibleTileInfo256)))throw new C.a("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view")}}}var Te=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e))._handles=new b.a,r.compatibilityFunction=null,r.error=null,r.state="loading",r.view=null,r}return Object(o.a)(n,[{key:"initialize",value:function(){var e=this;this._handles.add(Object(v.a)(this,["basemap.loadStatus","compatibilityFunction","view.basemapTerrain?.tilingScheme","view.ready","view.spatialReference"],(function(){return e.refresh()})))}},{key:"destroy",value:function(){this._cancelCompatibilityCheck(),this._handles.destroy(),this._handles=null,this.basemap=null,this.compatibilityFunction=null,this.view=null}},{key:"basemap",set:function(e){var t=this._get("basemap");t&&t.cancelLoad(),e&&e.load().catch((function(){})),this._set("basemap",e)}},{key:"refresh",value:function(){var e=this;this._cancelCompatibilityCheck(),this._set("state","loading");var t=this.get("basemap.loadStatus");if("loaded"===t||"failed"===t)if(this.compatibilityFunction){var n=new AbortController,r=n.signal;this.compatibilityFunction(this,{signal:r}).then((function(){e._set("state","ready"),e._set("error",null)})).catch((function(t){Object(P.m)(t)||(e._set("state","error"),e._set("error",t))})),this._lastCompatibilityCheckController=n}else"loaded"===t?(this._set("state","ready"),this._set("error",null)):(this._set("state","error"),this._set("error",this.basemap.loadError))}},{key:"_cancelCompatibilityCheck",value:function(){this._lastCompatibilityCheckController&&(this._lastCompatibilityCheckController.abort(),this._lastCompatibilityCheckController=null)}}]),n}(Y.a);Object(l.a)([Object(d.b)()],Te.prototype,"basemap",null),Object(l.a)([Object(d.b)()],Te.prototype,"compatibilityFunction",void 0),Object(l.a)([Object(d.b)({readOnly:!0})],Te.prototype,"error",void 0),Object(l.a)([Object(d.b)({readOnly:!0})],Te.prototype,"state",void 0),Object(l.a)([Object(d.b)()],Te.prototype,"view",void 0);var Ee=Te=Object(l.a)([Object(p.a)("esri.widgets.BasemapGallery.support.BasemapGalleryItem")],Te),Ce=n(226),Pe=w.a.ofType(Ce.default),Ie=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).basemaps=new Pe,r}return Object(o.a)(n,[{key:"state",get:function(){return"ready"}},{key:"refresh",value:function(){}}]),n}(Y.a);Object(l.a)([Object(d.b)({type:Pe})],Ie.prototype,"basemaps",void 0),Object(l.a)([Object(d.b)({readOnly:!0})],Ie.prototype,"state",null);var Me=Ie=Object(l.a)([Object(p.a)("esri.widgets.BasemapGallery.support.LocalBasemapsSource")],Ie),Ae=n(218),Re=n(109),Le=w.a.ofType(Ce.default),Fe="esri.widgets.BasemapGallery.support.PortalBasemapsSource",De=u.a.getLogger(Fe),Ne=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e))._handles=new b.a,r.basemaps=new Le,r.filterFunction=null,r.portal=Re.a.getDefault(),r.query=null,r.updateBasemapsCallback=null,r}return Object(o.a)(n,[{key:"initialize",value:function(){var e=this;this._handles.add([Object(v.a)(this,["filterFunction","loadStatus","portal.basemapGalleryGroupQuery","portal.user","query","updateBasemapsCallback"],(function(){return e.refresh()}))])}},{key:"destroy",value:function(){this._handles.destroy(),this._handles=null,this.filterFunction=null,this.portal=null}},{key:"state",get:function(){return"not-loaded"===this.loadStatus?"not-loaded":"loading"===this.loadStatus||this._lastPortalBasemapFetchController?"loading":"ready"}},{key:"load",value:function(e){return this.addResolvingPromise(this.portal.load(e)),this.notifyChange("state"),Promise.resolve(this)}},{key:"refresh",value:function(){var e=Object(T.a)(S.a.mark((function e(){var t,n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ready"===this.state){e.next=2;break}return e.abrupt("return");case 2:return this._lastPortalBasemapFetchController&&(this._lastPortalBasemapFetchController.abort(),this._lastPortalBasemapFetchController=null),t=this.portal,n=new AbortController,this._lastPortalBasemapFetchController=n,this.notifyChange("state"),e.prev=5,e.next=8,t.fetchBasemaps(this._toQueryString(this.query),n);case 8:r=e.sent,this._updateBasemaps(r),e.next=17;break;case 12:if(e.prev=12,e.t0=e.catch(5),!Object(P.m)(e.t0)){e.next=16;break}throw e.t0;case 16:De.warn(new C.a("basemap-source:fetch-basemaps-error","Could not fetch basemaps from portal.",{error:e.t0})),this._updateBasemaps();case 17:this._lastPortalBasemapFetchController=null,this.notifyChange("state");case 18:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"_toQueryString",value:function(e){return e&&"string"!=typeof e?Object.keys(e).map((function(t){return"".concat(t,":").concat(e[t])})).join(" AND "):e}},{key:"_updateBasemaps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.filterFunction?e.filter(this.filterFunction):e;t=this.updateBasemapsCallback?this.updateBasemapsCallback(t):t,this.basemaps.removeAll(),this.basemaps.addMany(t)}}]),n}(_.a.LoadableMixin(Object(Ae.b)(Me)));Object(l.a)([Object(d.b)({readOnly:!0,type:Le})],Ne.prototype,"basemaps",void 0),Object(l.a)([Object(d.b)()],Ne.prototype,"filterFunction",void 0),Object(l.a)([Object(d.b)({type:Re.a})],Ne.prototype,"portal",void 0),Object(l.a)([Object(d.b)()],Ne.prototype,"query",void 0),Object(l.a)([Object(d.b)({readOnly:!0})],Ne.prototype,"state",null),Object(l.a)([Object(d.b)()],Ne.prototype,"updateBasemapsCallback",void 0);var Ve=Ne=Object(l.a)([Object(p.a)(Fe)],Ne),ze=w.a.ofType(Ee);var Ue=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e))._handles=new b.a,r.activeBasemap=null,r.items=new ze,r.source=new Ve,r.view=null,r}return Object(o.a)(n,[{key:"initialize",value:function(){var e=this,t=function(){return e._recreateItems()};this._handles.add([Object(v.d)(this,["compatibilityFunction","state"],(function(){return e._updateItems()})),Object(v.b)(this,"source.basemaps","change",t,t)])}},{key:"destroy",value:function(){this._handles.destroy(),this._handles=null}},{key:"compatibilityFunction",get:function(){return void 0===this._get("compatibilityFunction")?"3d"===this.get("view.type")?me:Oe:this._get("compatibilityFunction")},set:function(e){this._set("compatibilityFunction",e)}},{key:"castSource",value:function(e){return Array.isArray(e)||w.a.isCollection(e)?new Me({basemaps:e}):function(e){return e&&"esri.portal.Portal"===e.declaredClass}(e)?new Ve({portal:e}):function(e){return e&&!(e instanceof Ve)&&(!!e.portal||!!e.query)}(e)?new Ve(e):function(e){return e&&"basemaps"in e&&"state"in e&&"refresh"in e}(e)?e:null}},{key:"state",get:function(){return this.get("view.ready")&&this.source?"ready":"disabled"}},{key:"basemapEquals",value:function(e,t){return Object(k.a)(e,t)}},{key:"refresh",value:function(){this._recreateItems()}},{key:"load",value:function(e){return this.addResolvingPromise(_.a.isLoadable(this.source)?this.source.load(e):Promise.resolve()),Promise.resolve(this)}},{key:"_recreateItems",value:function(){var e=this.get("source.basemaps"),t=this.view,n=this.compatibilityFunction;this.items.removeAll().forEach((function(e){return e.destroy()})),this.items.addMany(e.map((function(e){return new Ee({basemap:e,compatibilityFunction:n,view:t})})))}},{key:"_updateItems",value:function(){var e=this;this.items.forEach((function(t){t.compatibilityFunction=e.compatibilityFunction,t.view=e.view}))}}]),n}(_.a);Object(l.a)([Object(d.b)({aliasOf:"view.map.basemap"})],Ue.prototype,"activeBasemap",void 0),Object(l.a)([Object(d.b)()],Ue.prototype,"compatibilityFunction",null),Object(l.a)([Object(d.b)({readOnly:!0,type:ze})],Ue.prototype,"items",void 0),Object(l.a)([Object(d.b)()],Ue.prototype,"source",void 0),Object(l.a)([Object(j.a)("source")],Ue.prototype,"castSource",null),Object(l.a)([Object(d.b)({readOnly:!0})],Ue.prototype,"state",null),Object(l.a)([Object(d.b)()],Ue.prototype,"view",void 0);var Be=Ue=Object(l.a)([Object(p.a)("esri.widgets.BasemapGallery.BasemapGalleryViewModel")],Ue),Ge="esri-basemap-gallery esri-widget esri-widget--panel-height-only",qe="esri-basemap-gallery--source-loading",He="esri-basemap-gallery__loader",We="esri-basemap-gallery__item",$e="esri-basemap-gallery__item-container",Je="esri-basemap-gallery__item-title",Ye="esri-basemap-gallery__item-thumbnail",Ke="esri-basemap-gallery__item--selected",Ze="esri-basemap-gallery__item--loading",Xe="esri-basemap-gallery__item--error",Qe="esri-widget__content--empty",et="esri-icon-basemap",tt="esri-disabled",nt="esri-widget__heading",rt=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r){var i;return Object(a.a)(this,n),(i=t.call(this,e,r))._handles=new b.a,i.activeBasemap=null,i.disabled=!1,i.iconClass=et,i.label=void 0,i.messages=null,i.source=null,i.view=null,i.viewModel=new Be,i}return Object(o.a)(n,[{key:"initialize",value:function(){var e=this,t=this._handles;this.own([Object(v.b)(this,"viewModel.items","change",(function(n){var r="basemap-gallery-item-changes",a=n.added,o=n.moved;t.remove(r),t.add([].concat(Object(i.a)(a),Object(i.a)(o)).map((function(t){return t.watch("state",(function(){return e.scheduleRender()}))})),r),e.scheduleRender()})),t,Object(v.j)(this,"source",(function(){return e.viewModel.load()}))])}},{key:"render",value:function(){var e,t="loading"===this.get("source.state"),n=this.disabled||"disabled"===this.get("viewModel.state"),i=this.get("viewModel.items").toArray().map(this._renderBasemapGalleryItem,this),a=(e={},Object(r.a)(e,qe,t),Object(r.a)(e,tt,n),e),o=t?Object(g.a)("div",{class:He,key:"esri-basemap-gallery__loader"}):null,s=t?null:i.length>0?Object(g.a)("ul",{class:$e,key:"esri-basemap-gallery__item-container",role:"menu"},i):Object(g.a)("div",{class:Qe,key:"esri-basemap-gallery__empty-message"},Object(g.a)("h2",{class:nt},this.messages.noBasemaps));return Object(g.a)("div",{class:this.classes(Ge,a)},o,s)}},{key:"_handleClick",value:function(e){var t=e.currentTarget["data-item"];"ready"===t.state&&(this.activeBasemap=t.basemap)}},{key:"_renderBasemapGalleryItem",value:function(e){var t,n=e.get("basemap.thumbnailUrl")||Object(h.a)("esri/themes/base/images/basemap-toggle-64.svg"),i=e.get("basemap.title"),a=e.get("basemap.portalItem.snippet"),o=e.get("error.message")||a||i,s=this.viewModel,c=this.disabled||"ready"!==s.state||"ready"!==e.state?-1:0,l=s.basemapEquals(e.basemap,this.activeBasemap),u=(t={},Object(r.a)(t,Ke,l),Object(r.a)(t,Ze,"loading"===e.state),Object(r.a)(t,Xe,"error"===e.state),t);return Object(g.a)("li",{"aria-selected":l.toString(),bind:this,class:this.classes(We,u),"data-item":e,onkeydown:this._handleClick,onclick:this._handleClick,role:"menuitem",tabIndex:c,title:o},Object(g.a)("img",{alt:"",class:Ye,src:n}),Object(g.a)("div",{class:Je},i))}}]),n}(O.a);Object(l.a)([Object(f.a)("viewModel.activeBasemap")],rt.prototype,"activeBasemap",void 0),Object(l.a)([Object(d.b)()],rt.prototype,"disabled",void 0),Object(l.a)([Object(d.b)()],rt.prototype,"iconClass",void 0),Object(l.a)([Object(d.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],rt.prototype,"label",void 0),Object(l.a)([Object(d.b)(),Object(m.a)("esri/widgets/BasemapGallery/t9n/BasemapGallery")],rt.prototype,"messages",void 0),Object(l.a)([Object(f.a)("viewModel.source")],rt.prototype,"source",void 0),Object(l.a)([Object(f.a)("viewModel.view")],rt.prototype,"view",void 0),Object(l.a)([Object(d.b)()],rt.prototype,"viewModel",void 0),Object(l.a)([Object(y.a)()],rt.prototype,"_handleClick",null);var it=rt=Object(l.a)([Object(p.a)("esri.widgets.BasemapGallery")],rt);t.a=it},function(e,t,n){"use strict";n.d(t,"a",(function(){return da}));var r={};n.r(r),n.d(r,"reversed",(function(){return X})),n.d(r,"mirrored",(function(){return Q})),n.d(r,"createReversedEasing",(function(){return ee})),n.d(r,"createMirroredEasing",(function(){return te})),n.d(r,"createExpoIn",(function(){return ne})),n.d(r,"createBackIn",(function(){return re})),n.d(r,"createAnticipateEasing",(function(){return ie})),n.d(r,"linear",(function(){return ae})),n.d(r,"easeIn",(function(){return oe})),n.d(r,"easeOut",(function(){return se})),n.d(r,"easeInOut",(function(){return ce})),n.d(r,"circIn",(function(){return le})),n.d(r,"circOut",(function(){return ue})),n.d(r,"circInOut",(function(){return de})),n.d(r,"backIn",(function(){return fe})),n.d(r,"backOut",(function(){return pe})),n.d(r,"backInOut",(function(){return he})),n.d(r,"anticipate",(function(){return be})),n.d(r,"bounceOut",(function(){return ve})),n.d(r,"bounceIn",(function(){return ye})),n.d(r,"bounceInOut",(function(){return me})),n.d(r,"cubicBezier",(function(){return Se}));var i=n(23),a=n(21);var o=0,s="undefined"!==typeof window&&void 0!==window.requestAnimationFrame?function(e){return window.requestAnimationFrame(e)}:function(e){var t=Date.now(),n=Math.max(0,16.7-(t-o));o=t+n,setTimeout((function(){return e(o)}),n)},c=1/60*1e3,l=!0,u=!1,d=!1,f={delta:0,timestamp:0},p=["read","update","preRender","render","postRender"],h=function(e){return u=e},b=p.reduce((function(e,t){return e[t]=function(e){var t=[],n=[],r=0,i=!1,a=0,o=new WeakSet,s=new WeakSet,c={cancel:function(e){var t=n.indexOf(e);o.add(e),-1!==t&&n.splice(t,1)},process:function(l){var u,d;if(i=!0,t=(u=[n,t])[0],(n=u[1]).length=0,r=t.length)for(a=0;a<r;a++)(d=t[a])(l),!0!==s.has(d)||o.has(d)||(c.schedule(d),e(!0));i=!1},schedule:function(e,a,c){void 0===a&&(a=!1),void 0===c&&(c=!1);var l=c&&i,u=l?t:n;o.delete(e),a&&s.add(e),-1===u.indexOf(e)&&(u.push(e),l&&(r=t.length))}};return c}(h),e}),{}),v=p.reduce((function(e,t){var n=b[t];return e[t]=function(e,t,r){return void 0===t&&(t=!1),void 0===r&&(r=!1),u||O(),n.schedule(e,t,r),e},e}),{}),y=p.reduce((function(e,t){return e[t]=b[t].cancel,e}),{}),m=function(e){return b[e].process(f)},g=function e(t){u=!1,f.delta=l?c:Math.max(Math.min(t-f.timestamp,40),1),l||(c=f.delta),f.timestamp=t,d=!0,p.forEach(m),d=!1,u&&(l=!1,s(e))},O=function(){u=!0,l=!0,d||s(g)},j=function(){return f},w=v,_=function(e,t){return function(n){return Math.max(Math.min(n,t),e)}},k=function(e){return e%1?Number(e.toFixed(5)):e},x=/(-)?(\d[\d\.]*)/g,S=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,T=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i,E={test:function(e){return"number"===typeof e},parse:parseFloat,transform:function(e){return e}},C=Object(i.a)(Object(i.a)({},E),{transform:_(0,1)}),P=Object(i.a)(Object(i.a)({},E),{default:1}),I=function(e){return{test:function(t){return"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return""+t+e}}},M=I("deg"),A=I("%"),R=I("px"),L=I("vh"),F=I("vw"),D=Object(i.a)(Object(i.a)({},A),{parse:function(e){return A.parse(e)/100},transform:function(e){return A.transform(100*e)}}),N=_(0,255),V=function(e){return void 0!==e.red},z=function(e){return void 0!==e.hue};var U=function(e){return function(t){if("string"!==typeof t)return t;for(var n={},r=function(e){return e.substring(e.indexOf("(")+1,e.lastIndexOf(")"))}(t).replace(/(,|\/)/g," ").split(/ \s*/),i=0;i<4;i++)n[e[i]]=void 0!==r[i]?parseFloat(r[i]):1;return n}},B=Object(i.a)(Object(i.a)({},E),{transform:function(e){return Math.round(N(e))}});function G(e,t){return e.startsWith(t)&&T.test(e)}var q={test:function(e){return"string"===typeof e?G(e,"rgb"):V(e)},parse:U(["red","green","blue","alpha"]),transform:function(e){var t=e.red,n=e.green,r=e.blue,i=e.alpha,a=void 0===i?1:i;return function(e){var t=e.red,n=e.green,r=e.blue,i=e.alpha;return"rgba("+t+", "+n+", "+r+", "+(void 0===i?1:i)+")"}({red:B.transform(t),green:B.transform(n),blue:B.transform(r),alpha:k(C.transform(a))})}},H={test:function(e){return"string"===typeof e?G(e,"hsl"):z(e)},parse:U(["hue","saturation","lightness","alpha"]),transform:function(e){var t=e.hue,n=e.saturation,r=e.lightness,i=e.alpha,a=void 0===i?1:i;return function(e){var t=e.hue,n=e.saturation,r=e.lightness,i=e.alpha;return"hsla("+t+", "+n+", "+r+", "+(void 0===i?1:i)+")"}({hue:Math.round(t),saturation:A.transform(k(n)),lightness:A.transform(k(r)),alpha:k(C.transform(a))})}},W=Object(i.a)(Object(i.a)({},q),{test:function(e){return"string"===typeof e&&G(e,"#")},parse:function(e){var t="",n="",r="";return e.length>4?(t=e.substr(1,2),n=e.substr(3,2),r=e.substr(5,2)):(t=e.substr(1,1),n=e.substr(2,1),r=e.substr(3,1),t+=t,n+=n,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:1}}}),$={test:function(e){return"string"===typeof e&&T.test(e)||V(e)||z(e)},parse:function(e){return q.test(e)?q.parse(e):H.test(e)?H.parse(e):W.test(e)?W.parse(e):e},transform:function(e){return V(e)?q.transform(e):z(e)?H.transform(e):e}},J="${c}",Y="${n}",K=function(e){return"number"===typeof e?0:e},Z={test:function(e){if("string"!==typeof e||!isNaN(e))return!1;var t=0,n=e.match(x),r=e.match(S);return n&&(t+=n.length),r&&(t+=r.length),t>0},parse:function(e){var t=e,n=[],r=t.match(S);r&&(t=t.replace(S,J),n.push.apply(n,r.map($.parse)));var i=t.match(x);return i&&n.push.apply(n,i.map(E.parse)),n},createTransformer:function(e){var t=e,n=0,r=e.match(S),i=r?r.length:0;if(r)for(var a=0;a<i;a++)t=t.replace(r[a],J),n++;var o=t.match(x),s=o?o.length:0;if(o)for(a=0;a<s;a++)t=t.replace(o[a],Y),n++;return function(e){for(var r=t,a=0;a<n;a++)r=r.replace(a<i?J:Y,a<i?$.transform(e[a]):k(e[a]));return r}},getAnimatableNone:function(e){var t=Z.parse(e);return Z.createTransformer(e)(t.map(K))}},X=function(e){return function(t){return 1-e(1-t)}},Q=function(e){return function(t){return t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2}},ee=X,te=Q,ne=function(e){return function(t){return Math.pow(t,e)}},re=function(e){return function(t){return t*t*((e+1)*t-e)}},ie=function(e){var t=re(e);return function(e){return(e*=2)<1?.5*t(e):.5*(2-Math.pow(2,-10*(e-1)))}},ae=function(e){return e},oe=ne(2),se=X(oe),ce=Q(oe),le=function(e){return 1-Math.sin(Math.acos(e))},ue=X(le),de=Q(ue),fe=re(1.525),pe=X(fe),he=Q(fe),be=ie(1.525),ve=function(e){var t=e*e;return e<.36363636363636365?7.5625*t:e<.7272727272727273?9.075*t-9.9*e+3.4:e<.9?12.066481994459833*t-19.63545706371191*e+8.898060941828255:10.8*e*e-20.52*e+10.72},ye=function(e){return 1-ve(1-e)},me=function(e){return e<.5?.5*(1-ve(1-2*e)):.5*ve(2*e-1)+.5},ge=.1,Oe="undefined"!==typeof Float32Array,je=function(e,t){return 1-3*t+3*e},we=function(e,t){return 3*t-6*e},_e=function(e){return 3*e},ke=function(e,t,n){return 3*je(t,n)*e*e+2*we(t,n)*e+_e(t)},xe=function(e,t,n){return((je(t,n)*e+we(t,n))*e+_e(t))*e};function Se(e,t,n,r){var i=Oe?new Float32Array(11):new Array(11),a=function(t){for(var r,a,o,s=0,c=1;10!==c&&i[c]<=t;++c)s+=ge;return--c,r=(t-i[c])/(i[c+1]-i[c]),(o=ke(a=s+r*ge,e,n))>=.001?function(t,r){for(var i=0,a=0;i<8;++i){if(0===(a=ke(r,e,n)))return r;r-=(xe(r,e,n)-t)/a}return r}(t,a):0===o?a:function(t,r,i){var a,o,s=0;do{(a=xe(o=r+(i-r)/2,e,n)-t)>0?i=o:r=o}while(Math.abs(a)>1e-7&&++s<10);return o}(t,s,s+ge)};!function(){for(var t=0;t<11;++t)i[t]=xe(t*ge,e,n)}();return function(i){return e===t&&n===r?i:0===i?0:1===i?1:xe(a(i),t,r)}}var Te={x:0,y:0,z:0},Ee=function(e){return"number"===typeof e},Ce=function(e){return function(t,n,r){return void 0!==r?e(t,n,r):function(r){return e(t,n,r)}}},Pe=Ce((function(e,t,n){return Math.min(Math.max(n,e),t)})),Ie=function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")},Me=function(e){return Ie(e)&&e.hasOwnProperty("z")},Ae=function(e,t){return Math.abs(e-t)},Re=function(e,t){if(void 0===t&&(t=Te),Ee(e)&&Ee(t))return Ae(e,t);if(Ie(e)&&Ie(t)){var n=Ae(e.x,t.x),r=Ae(e.y,t.y),i=Me(e)&&Me(t)?Ae(e.z,t.z):0;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2)+Math.pow(i,2))}return 0},Le=function(e,t,n){var r=t-e;return 0===r?1:(n-e)/r},Fe=function(e,t,n){return-n*e+n*t+e},De=function(){return(De=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Ne=function(e,t,n){var r=e*e,i=t*t;return Math.sqrt(Math.max(0,n*(i-r)+r))},Ve=[W,q,H],ze=function(e){return Ve.find((function(t){return t.test(e)}))},Ue=function(e){return"'"+e+"' is not an animatable color. Use the equivalent color code instead."},Be=function(e,t){var n=ze(e),r=ze(t);Ue(e),Ue(t),n.transform,r.transform;var i=n.parse(e),a=r.parse(t),o=De({},i),s=n===H?Fe:Ne;return function(e){for(var t in o)"alpha"!==t&&(o[t]=s(i[t],a[t],e));return o.alpha=Fe(i.alpha,a.alpha,e),n.transform(o)}},Ge=function(e,t){return function(n){return t(e(n))}},qe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce(Ge)};function He(e,t){return Ee(e)?function(n){return Fe(e,t,n)}:$.test(e)?Be(e,t):Je(e,t)}var We=function(e,t){var n=e.slice(),r=n.length,i=e.map((function(e,n){return He(e,t[n])}));return function(e){for(var t=0;t<r;t++)n[t]=i[t](e);return n}};function $e(e){for(var t=Z.parse(e),n=t.length,r=0,i=0,a=0,o=0;o<n;o++)r||"number"===typeof t[o]?r++:void 0!==t[o].hue?a++:i++;return{parsed:t,numNumbers:r,numRGB:i,numHSL:a}}var Je=function(e,t){var n=Z.createTransformer(t),r=$e(e),i=$e(t);return r.numHSL===i.numHSL&&r.numRGB===i.numRGB&&(r.numNumbers,i.numNumbers),qe(We(r.parsed,i.parsed),n)};var Ye,Ke=function(e){return e},Ze=function(e){return void 0===e&&(e=Ke),Ce((function(t,n,r){var i=n-r,a=-(0-t+1)*(0-e(Math.abs(i)));return i<=0?n+a:n-a}))},Xe=(Ze(),Ze(Math.sqrt),function(e,t){return t?e*(1e3/t):0}),Qe=(Ce((function(e,t,n){var r=t-e;return((n-e)%r+r)%r+e})),Pe(0,1),function(e){var t=e.onRead,n=e.onRender,r=e.uncachedValues,a=void 0===r?new Set:r,o=e.useCache,s=void 0===o||o;return function(e){void 0===e&&(e={});var r=Object(i.c)(e,[]),o={},c=[],l=!1;function u(e,t){e.startsWith("--")&&(r.hasCSSVariable=!0);var n=o[e];o[e]=t,o[e]!==n&&(-1===c.indexOf(e)&&c.push(e),l||(l=!0,w.render(d.render)))}var d={get:function(e,n){return void 0===n&&(n=!1),!n&&s&&!a.has(e)&&void 0!==o[e]?o[e]:t(e,r)},set:function(e,t){if("string"===typeof e)u(e,t);else for(var n in e)u(n,e[n]);return this},render:function(e){return void 0===e&&(e=!1),(l||!0===e)&&(n(o,r,c),l=!1,c.length=0),this}};return d}}),et=/([a-z])([A-Z])/g,tt=function(e){return e.replace(et,"$1-$2").toLowerCase()},nt=new Map,rt=new Map,it=["Webkit","Moz","O","ms",""],at=it.length,ot="undefined"!==typeof document,st=function(e,t){return rt.set(e,tt(t))},ct=function(e,t){void 0===t&&(t=!1);var n=t?rt:nt;return n.has(e)||(ot?function(e){Ye=Ye||document.createElement("div");for(var t=0;t<at;t++){var n=it[t],r=""===n,i=r?e:n+e.charAt(0).toUpperCase()+e.slice(1);if(i in Ye.style||r){if(r&&"clipPath"===e&&rt.has(e))return;nt.set(e,i),st(e,(r?"":"-")+tt(i))}}}(e):function(e){st(e,e)}(e)),n.get(e)||e},lt=["","X","Y","Z"],ut=["translate","scale","rotate","skew","transformPerspective"].reduce((function(e,t){return lt.reduce((function(e,n){return e.push(t+n),e}),e)}),["x","y","z"]),dt=ut.reduce((function(e,t){return e[t]=!0,e}),{});function ft(e){return!0===dt[e]}function pt(e,t){return ut.indexOf(e)-ut.indexOf(t)}var ht=new Set(["originX","originY","originZ"]);function bt(e){return ht.has(e)}var vt=Object(i.a)(Object(i.a)({},E),{transform:Math.round}),yt={color:$,backgroundColor:$,outlineColor:$,fill:$,stroke:$,borderColor:$,borderTopColor:$,borderRightColor:$,borderBottomColor:$,borderLeftColor:$,borderWidth:R,borderTopWidth:R,borderRightWidth:R,borderBottomWidth:R,borderLeftWidth:R,borderRadius:R,radius:R,borderTopLeftRadius:R,borderTopRightRadius:R,borderBottomRightRadius:R,borderBottomLeftRadius:R,width:R,maxWidth:R,height:R,maxHeight:R,size:R,top:R,right:R,bottom:R,left:R,padding:R,paddingTop:R,paddingRight:R,paddingBottom:R,paddingLeft:R,margin:R,marginTop:R,marginRight:R,marginBottom:R,marginLeft:R,rotate:M,rotateX:M,rotateY:M,rotateZ:M,scale:P,scaleX:P,scaleY:P,scaleZ:P,skew:M,skewX:M,skewY:M,distance:R,translateX:R,translateY:R,translateZ:R,x:R,y:R,z:R,perspective:R,opacity:C,originX:D,originY:D,originZ:R,zIndex:vt,fillOpacity:C,strokeOpacity:C,numOctaves:vt},mt=function(e){return yt[e]},gt=function(e,t){return t&&"number"===typeof e?t.transform(e):e},Ot="scrollLeft",jt="scrollTop",wt=new Set([Ot,jt]),_t=new Set([Ot,jt,"transform"]),kt={x:"translateX",y:"translateY",z:"translateZ"};function xt(e){return"function"===typeof e}function St(e,t,n,r,i,a,o,s){void 0===t&&(t=!0),void 0===n&&(n={}),void 0===r&&(r={}),void 0===i&&(i={}),void 0===a&&(a=[]),void 0===o&&(o=!1),void 0===s&&(s=!0);var c=!0,l=!1,u=!1;for(var d in e){var f=e[d],p=mt(d),h=gt(f,p);ft(d)?(l=!0,r[d]=h,a.push(d),c&&(p.default&&f!==p.default||!p.default&&0!==f)&&(c=!1)):bt(d)?(i[d]=h,u=!0):_t.has(d)&&xt(h)||(n[ct(d,o)]=h)}return(l||"function"===typeof e.transform)&&(n.transform=function(e,t,n,r,i,a){void 0===a&&(a=!0);var o="",s=!1;n.sort(pt);for(var c=n.length,l=0;l<c;l++){var u=n[l];o+=(kt[u]||u)+"("+t[u]+") ",s="z"===u||s}return!s&&i?o+="translateZ(0)":o=o.trim(),xt(e.transform)?o=e.transform(t,r?"":o):a&&r&&(o="none"),o}(e,r,a,c,t,s)),u&&(n.transformOrigin=(i.originX||"50%")+" "+(i.originY||"50%")+" "+(i.originZ||0)),n}function Tt(e){var t=void 0===e?{}:e,n=t.enableHardwareAcceleration,r=void 0===n||n,i=t.isDashCase,a=void 0===i||i,o=t.allowTransformNone,s=void 0===o||o,c={},l={},u={},d=[];return function(e){return d.length=0,St(e,r,c,l,u,d,a,s),c}}var Et=Qe({onRead:function(e,t){var n=t.element,r=t.preparseOutput,i=mt(e);if(ft(e))return i&&i.default||0;if(wt.has(e))return n[e];var a=window.getComputedStyle(n,null).getPropertyValue(ct(e,!0))||0;return r&&i&&i.test(a)&&i.parse?i.parse(a):a},onRender:function(e,t,n){var r=t.element,i=t.buildStyles,a=t.hasCSSVariable;if(Object.assign(r.style,i(e)),a)for(var o=n.length,s=0;s<o;s++){var c=n[s];c.startsWith("--")&&r.style.setProperty(c,e[c])}-1!==n.indexOf(Ot)&&(r.scrollLeft=e.scrollLeft),-1!==n.indexOf(jt)&&(r.scrollTop=e.scrollTop)},uncachedValues:wt});var Ct=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues"]),Pt=function(e,t){return R.transform(e*t)},It={x:0,y:0,width:0,height:0};function Mt(e,t,n){return"string"===typeof e?e:R.transform(t+n*e)}var At={enableHardwareAcceleration:!1,isDashCase:!1};function Rt(e,t,n,r,a,o){void 0===t&&(t=It),void 0===r&&(r=Tt(At)),void 0===a&&(a={style:{}}),void 0===o&&(o=!0);var s=e.attrX,c=e.attrY,l=e.originX,u=e.originY,d=e.pathLength,f=e.pathSpacing,p=void 0===f?1:f,h=e.pathOffset,b=void 0===h?0:h,v=r(Object(i.c)(e,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]));for(var y in v){if("transform"===y)a.style.transform=v[y];else a[o&&!Ct.has(y)?tt(y):y]=v[y]}return(void 0!==l||void 0!==u||v.transform)&&(a.style.transformOrigin=function(e,t,n){return Mt(t,e.x,e.width)+" "+Mt(n,e.y,e.height)}(t,void 0!==l?l:.5,void 0!==u?u:.5)),void 0!==s&&(a.x=s),void 0!==c&&(a.y=c),void 0!==n&&void 0!==d&&(a[o?"stroke-dashoffset":"strokeDashoffset"]=Pt(-b,n),a[o?"stroke-dasharray":"strokeDasharray"]=Pt(d,n)+" "+Pt(p,n)),a}function Lt(e,t,n){void 0===n&&(n=!0);var r={style:{}},i=Tt(At);return function(a){return Rt(a,e,t,i,r,n)}}var Ft=Qe({onRead:function(e,t){var n=t.element;if(ft(e=Ct.has(e)?e:tt(e))){var r=mt(e);return r&&r.default||0}return n.getAttribute(e)},onRender:function(e,t){var n=t.element,r=(0,t.buildAttrs)(e);for(var i in r)"style"===i?Object.assign(n.style,r.style):n.setAttribute(i,r[i])}}),Dt=Qe({useCache:!1,onRead:function(e){return"scrollTop"===e?window.pageYOffset:window.pageXOffset},onRender:function(e){var t=e.scrollTop,n=void 0===t?0:t,r=e.scrollLeft,i=void 0===r?0:r;return window.scrollTo(i,n)}}),Nt=new WeakMap,Vt=function(e,t){var n;return e===window?n=Dt(e):!function(e){return e instanceof HTMLElement||"function"===typeof e.click}(e)?function(e){return e instanceof SVGElement||"ownerSVGElement"in e}(e)&&(n=function(e){var t=function(e){try{return function(e){return"function"===typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}(e)}catch(t){return{x:0,y:0,width:0,height:0}}}(e),n=function(e){return"path"===e.tagName}(e)&&e.getTotalLength?e.getTotalLength():void 0;return Ft({element:e,buildAttrs:Lt(t,n)})}(e)):n=function(e,t){void 0===t&&(t={});var n=t.enableHardwareAcceleration,r=t.allowTransformNone,a=Object(i.c)(t,["enableHardwareAcceleration","allowTransformNone"]);return Et(Object(i.a)({element:e,buildStyles:Tt({enableHardwareAcceleration:n,allowTransformNone:r}),preparseOutput:!0},a))}(e,t),Nt.set(e,n),n};var zt=function(e,t){return function(e,t){return Nt.has(e)?Nt.get(e):Vt(e,t)}("string"===typeof e?document.querySelector(e):e,t)},Ut=function(){return function(e,t){var n=this,r=e.middleware,i=e.onComplete;this.isActive=!0,this.update=function(e){n.observer.update&&n.updateObserver(e)},this.complete=function(){n.observer.complete&&n.isActive&&n.observer.complete(),n.onComplete&&n.onComplete(),n.isActive=!1},this.error=function(e){n.observer.error&&n.isActive&&n.observer.error(e),n.isActive=!1},this.observer=t,this.updateObserver=function(e){return t.update(e)},this.onComplete=i,t.update&&r&&r.length&&r.forEach((function(e){return n.updateObserver=e(n.updateObserver,n.complete)}))}}(),Bt=function(e,t,n){var r=t.middleware;return new Ut({middleware:r,onComplete:n},"function"===typeof e?{update:e}:e)},Gt=function(){function e(e){void 0===e&&(e={}),this.props=e}return e.prototype.create=function(t){return new e(t)},e.prototype.start=function(e){void 0===e&&(e={});var t=!1,n={stop:function(){}},r=this.props,a=r.init,o=Object(i.c)(r,["init"]),s=a(Bt(e,o,(function(){t=!0,n.stop()})));return n=s?Object(i.a)({},n,s):n,t&&n.stop(),n},e.prototype.applyMiddleware=function(e){return this.create(Object(i.a)({},this.props,{middleware:this.props.middleware?[e].concat(this.props.middleware):[e]}))},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=1===e.length?e[0]:qe.apply(void 0,e);return this.applyMiddleware((function(e){return function(t){return e(n(t))}}))},e}(),qt=function(e){return new Gt({init:e})},Ht=[R,A,M,L,F],Wt=function(e){return Ht.find((function(t){return t.test(e)}))},$t=function(e,t){return e(t)},Jt=function(e,t){var n=t.from,r=t.to,a=Object(i.c)(t,["from","to"]),o=Wt(n)||Wt(r),s=o.transform,c=o.parse;return e(Object(i.a)({},a,{from:"string"===typeof n?c(n):n,to:"string"===typeof r?c(r):r})).pipe(s)},Yt=function(e){return function(t,n){var r=n.from,a=n.to,o=Object(i.c)(n,["from","to"]);return t(Object(i.a)({},o,{from:0,to:1})).pipe(e(r,a))}},Kt=Yt(Be),Zt=Yt(Je),Xt=function(e,t){var n=function(e){var t=Object.keys(e),n=function(t,n){return void 0!==t&&!e[n](t)};return{getVectorKeys:function(e){return t.reduce((function(t,r){return n(e[r],r)&&t.push(r),t}),[])},testVectorProps:function(e){return e&&t.some((function(t){return n(e[t],t)}))}}}(t),r=n.testVectorProps,i=n.getVectorKeys;return function(t){if(!r(t))return e(t);var n=i(t),a=t[n[0]];return Qt(a)(e,t,n)}},Qt=function(e){return"number"===typeof e?$t:function(e){return Boolean(Wt(e))}(e)?Jt:$.test(e)?Kt:Z.test(e)?Zt:$t},en=Xt((function(e){return void 0===e&&(e={}),qt((function(t){var n=t.complete,r=t.update,i=e.velocity,a=void 0===i?0:i,o=e.from,s=void 0===o?0:o,c=e.power,l=void 0===c?.8:c,u=e.timeConstant,d=void 0===u?350:u,f=e.restDelta,p=void 0===f?.5:f,h=e.modifyTarget,b=0,v=l*a,m=Math.round(s+v),g="undefined"===typeof h?m:h(m),O=w.update((function(e){var t=e.delta;b+=t;var i=-v*Math.exp(-b/d),a=i>p||i<-p;r(a?g+i:g),a||(y.update(O),n())}),!0);return{stop:function(){return y.update(O)}}}))}),{from:E.test,modifyTarget:function(e){return"function"===typeof e},velocity:E.test}),tn=Xt((function(e){return void 0===e&&(e={}),qt((function(t){var n=t.update,r=t.complete,i=e.velocity,a=void 0===i?0:i,o=e.from,s=void 0===o?0:o,c=e.to,l=void 0===c?0:c,u=e.stiffness,d=void 0===u?100:u,f=e.damping,p=void 0===f?10:f,h=e.mass,b=void 0===h?1:h,v=e.restSpeed,m=void 0===v?.01:v,g=e.restDelta,O=void 0===g?.01:g,j=a?-a/1e3:0,_=0,k=l-s,x=s,S=x,T=w.update((function(e){var t=e.delta;_+=t;var i=p/(2*Math.sqrt(d*b)),o=Math.sqrt(d/b)/1e3;if(S=x,i<1){var s=Math.exp(-i*o*_),c=o*Math.sqrt(1-i*i);x=l-s*((j+i*o*k)/c*Math.sin(c*_)+k*Math.cos(c*_))}else{s=Math.exp(-o*_);x=l-s*(k+(j+o*k)*_)}a=Xe(x-S,t);var u=Math.abs(a)<=m,f=Math.abs(l-x)<=O;u&&f?(n(x=l),y.update(T),r()):n(x)}),!0);return{stop:function(){return y.update(T)}}}))}),{from:E.test,to:E.test,stiffness:E.test,damping:E.test,mass:E.test,velocity:E.test}),nn=Xt((function(e){var t=e.from,n=void 0===t?0:t,r=e.velocity,a=void 0===r?0:r,o=e.min,s=e.max,c=e.power,l=void 0===c?.8:c,u=e.timeConstant,d=void 0===u?700:u,f=e.bounceStiffness,p=void 0===f?500:f,h=e.bounceDamping,b=void 0===h?10:h,v=e.restDelta,y=void 0===v?1:v,m=e.modifyTarget;return qt((function(e){var t,r=e.update,c=e.complete,u=n,f=n,h=!1,v=function(e){return void 0!==o&&e<=o},g=function(e){return void 0!==s&&e>=s},O=function(e){return v(e)||g(e)},w=function(e){r(e),u=f,a=Xe((f=e)-u,j().delta),t&&!h&&function(e,t){return v(e)&&t<0||g(e)&&t>0}(e,a)&&k({from:e,velocity:a})},_=function(e,n){t&&t.stop(),t=e.start({update:w,complete:function(){n?n():c()}})},k=function(e){h=!0,_(tn(Object(i.a)({},e,{to:v(e.from)?o:s,stiffness:p,damping:b,restDelta:y})))};if(O(n))k({from:n,velocity:a});else if(0!==a){var x=en({from:n,velocity:a,timeConstant:d,power:l,restDelta:O(n)?20:y,modifyTarget:m});_(x,(function(){O(f)?k({from:f,velocity:a}):c()}))}else c();return{stop:function(){return t&&t.stop()}}}))}),{from:E.test,velocity:E.test,min:E.test,max:E.test,damping:E.test,stiffness:E.test,modifyTarget:function(e){return"function"===typeof e}}),rn=Xt((function(e){var t=e.from,n=void 0===t?0:t,r=e.to,i=void 0===r?1:r,a=e.ease,o=void 0===a?ae:a,s=e.reverseEase;return void 0!==s&&s&&(o=ee(o)),qt((function(e){var t=e.update;return{seek:function(e){return t(e)}}})).pipe(o,(function(e){return Fe(n,i,e)}))}),{ease:function(e){return"function"===typeof e},from:E.test,to:E.test}),an=Pe(0,1),on=function(e){return void 0===e&&(e={}),qt((function(t){var n,r=t.update,i=t.complete,a=e.duration,o=void 0===a?300:a,s=e.ease,c=void 0===s?se:s,l=e.flip,u=void 0===l?0:l,d=e.loop,f=void 0===d?0:d,p=e.yoyo,h=void 0===p?0:p,b=e.repeatDelay,v=void 0===b?0:b,m=e.from,g=void 0===m?0:m,O=e.to,j=void 0===O?1:O,_=e.elapsed,k=void 0===_?0:_,x=e.flipCount,S=void 0===x?0:x,T=e.yoyoCount,E=void 0===T?0:T,C=e.loopCount,P=void 0===C?0:C,I=rn({from:g,to:j,ease:c}).start(r),M=0,A=!1,R=function(e){var t;void 0===e&&(e=!1),I=rn({from:g=(t=[j,g])[0],to:j=t[1],ease:c,reverseEase:e}).start(r)},L=function(){M=an(Le(0,o,k)),I.seek(M)},F=function(){A=!0,n=w.update((function(e){var t=e.delta;k+=t,L(),function(){var e=A&&k>o+v;return!!e&&(!(!e||f||u||h)||(k=k-o-v,f&&P<f?(P++,!1):u&&S<u?(S++,R(),!1):!(h&&E<h)||(E++,R(E%2!==0),!1)))}()&&(y.update(n),i&&w.update(i,!1,!0))}),!0)},D=function(){A=!1,n&&y.update(n)};return F(),{isActive:function(){return A},getElapsed:function(){return Pe(0,o,k)},getProgress:function(){return M},stop:function(){D()},pause:function(){return D(),this},resume:function(){return A||F(),this},seek:function(e){return k=Fe(0,o,e),w.update(L,!1,!0),this},reverse:function(){return R(),this}}}))},sn=Pe(0,1),cn=function(e){var t=e.easings,n=e.ease,r=void 0===n?ae:n,a=e.times,o=e.values,s=Object(i.c)(e,["easings","ease","times","values"]);t=Array.isArray(t)?t:function(e,t){return e.map((function(){return t||se})).splice(0,e.length-1)}(o,t),a=a||function(e){var t=e.length;return e.map((function(e,n){return 0!==n?n/(t-1):0}))}(o);var c=t.map((function(e,t){return rn({from:o[t],to:o[t+1],ease:e})}));return on(Object(i.a)({},s,{ease:r})).applyMiddleware((function(e){return function(e,t,n){var r=e.length,i=r-1,a=i-1,o=t.map((function(e){return e.start(n)}));return function(t){t<=e[0]&&o[0].seek(0),t>=e[i]&&o[a].seek(1);for(var n=1;n<r&&!(e[n]>t||n===i);n++);var s=Le(e[n-1],e[n],t);o[n-1].seek(sn(s))}}(a,c,e)}))},ln=function(e,t,n){return qt((function(r){var i=r.update,a=t.split(" ").map((function(t){return e.addEventListener(t,i,n),t}));return{stop:function(){return a.forEach((function(t){return e.removeEventListener(t,i,n)}))}}}))},un=function(){return{clientX:0,clientY:0,pageX:0,pageY:0,x:0,y:0}},dn=function(e,t){return void 0===t&&(t={clientX:0,clientY:0,pageX:0,pageY:0,x:0,y:0}),t.clientX=t.x=e.clientX,t.clientY=t.y=e.clientY,t.pageX=e.pageX,t.pageY=e.pageY,t},fn=[un()];if("undefined"!==typeof document){ln(document,"touchstart touchmove",{passive:!0,capture:!0}).start((function(e){var t=e.touches;!0;var n=t.length;fn.length=0;for(var r=0;r<n;r++){var i=t[r];fn.push(dn(i))}}))}var pn=un();if("undefined"!==typeof document){ln(document,"mousedown mousemove",!0).start((function(e){!0,dn(e,pn)}))}var hn=function(e){return qt((function(t){var n=t.complete,r=setTimeout(n,e);return{stop:function(){return clearTimeout(r)}}}))},bn=function(){function e(e,t){var n,r=this,i=void 0===t?{}:t,a=i.transformer,o=i.parent;this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.updateAndNotify=function(e,t){void 0===t&&(t=!0),r.prev=r.current,r.current=r.transformer?r.transformer(e):e,r.updateSubscribers&&r.prev!==r.current&&r.updateSubscribers.forEach(r.notifySubscriber),r.children&&r.children.forEach(r.setChild),t&&r.renderSubscribers&&r.renderSubscribers.forEach(r.notifySubscriber);var n=j(),i=n.delta,a=n.timestamp;r.lastUpdated!==a&&(r.timeDelta=i,r.lastUpdated=a,w.postRender(r.scheduleVelocityCheck))},this.notifySubscriber=function(e){e(r.current)},this.scheduleVelocityCheck=function(){return w.postRender(r.velocityCheck)},this.velocityCheck=function(e){e.timestamp!==r.lastUpdated&&(r.prev=r.current)},this.setChild=function(e){return e.set(r.current)},this.parent=o,this.transformer=a,this.set(e,!1),this.canTrackVelocity=(n=this.current,!isNaN(parseFloat(n)))}return e.prototype.addChild=function(t){void 0===t&&(t={});var n=new e(this.current,Object(i.a)({parent:this},t));return this.children||(this.children=new Set),this.children.add(n),n},e.prototype.removeChild=function(e){this.children&&this.children.delete(e)},e.prototype.subscribeTo=function(e,t){var n=this,r=function(){return t(n.current)};return e.add(r),function(){return e.delete(r)}},e.prototype.onChange=function(e){return this.updateSubscribers||(this.updateSubscribers=new Set),this.subscribeTo(this.updateSubscribers,e)},e.prototype.onRenderRequest=function(e){return this.renderSubscribers||(this.renderSubscribers=new Set),this.notifySubscriber(e),this.subscribeTo(this.renderSubscribers,e)},e.prototype.attach=function(e){this.passiveEffect=e},e.prototype.set=function(e,t){void 0===t&&(t=!0),t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)},e.prototype.get=function(){return this.current},e.prototype.getVelocity=function(){return this.canTrackVelocity?Xe(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0},e.prototype.start=function(e){var t=this;return this.stop(),new Promise((function(n){t.stopAnimation=e(n)})).then((function(){return t.clearAnimation()}))},e.prototype.stop=function(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()},e.prototype.isAnimating=function(){return!!this.stopAnimation},e.prototype.clearAnimation=function(){this.stopAnimation=null},e.prototype.destroy=function(){this.updateSubscribers&&this.updateSubscribers.clear(),this.renderSubscribers&&this.renderSubscribers.clear(),this.parent&&this.parent.removeChild(this),this.stop()},e}();function vn(e,t){return new bn(e,t)}function yn(e){var t=Object(a.useRef)(null);return null===t.current&&(t.current=e()),t.current}var mn,gn=function(e){return e instanceof bn},On=Qe({onRead:function(){return null},onRender:function(e,t){return(0,t.onUpdate)(e)}}),jn=function(){function e(){this.hasMounted=!1,this.values=new Map,this.unsubscribers=new Map}return e.prototype.has=function(e){return this.values.has(e)},e.prototype.set=function(e,t){this.values.set(e,t),this.hasMounted&&this.bindValueToOutput(e,t)},e.prototype.get=function(e,t){var n=this.values.get(e);return void 0===n&&void 0!==t&&(n=new bn(t),this.set(e,n)),n},e.prototype.forEach=function(e){return this.values.forEach(e)},e.prototype.bindValueToOutput=function(e,t){var n=this,r=t.onRenderRequest((function(t){return n.output&&n.output(e,t)})),i=t.onChange((function(t){n.onUpdate&&n.onUpdate.set(e,t)}));this.unsubscribers.has(e)&&this.unsubscribers.get(e)(),this.unsubscribers.set(e,(function(){r(),i()}))},e.prototype.setOnUpdate=function(e){this.onUpdate=void 0,e&&(this.onUpdate=On({onUpdate:e}))},e.prototype.setTransformTemplate=function(e){this.transformTemplate!==e&&(this.transformTemplate=e,this.updateTransformTemplate())},e.prototype.getTransformTemplate=function(){return this.transformTemplate},e.prototype.updateTransformTemplate=function(){this.output&&this.output("transform",this.transformTemplate)},e.prototype.mount=function(e){var t=this;this.hasMounted=!0,e&&(this.output=e),this.values.forEach((function(e,n){return t.bindValueToOutput(n,e)})),this.updateTransformTemplate()},e.prototype.unmount=function(){var e=this;this.values.forEach((function(t,n){var r=e.unsubscribers.get(n);r&&r()}))},e}(),wn=new Set(["dragOriginX","dragOriginY"]),_n=function(e){var t=yn((function(){var t=new jn;for(var n in e)gn(e[n])&&!wn.has(n)&&t.set(n,e[n]);return t}));return t.setOnUpdate(e.onUpdate),t.setTransformTemplate(e.transformTemplate),t},kn=null,xn=function(){return null!==kn},Sn=function(){kn=[]},Tn=function(){kn&&kn.forEach((function(e){return e.render()})),kn=null},En=function(e){kn&&kn.push(e)},Cn=Object(a.memo)((function(e){var t=e.innerRef,n=e.values,r=e.isStatic;return Object(a.useEffect)((function(){t.current,Element;var e=zt(t.current,{preparseOutput:!1,enableHardwareAcceleration:!r});return n.mount((function(t,n){e.set(t,n),xn()&&En(e)})),function(){return n.unmount()}}),[]),null})),Pn=(mn=function(e){return e.get()},function(e){var t={};return e.forEach((function(e,n){return t[n]=mn(e)})),t}),In=new Set(["originX","originY","originZ"]),Mn=function(e){return In.has(e)},An=function(e,t,n){var r=Pn(e),a=e.getTransformTemplate();return a&&(r.transform=t.transform?a({},t.transform):a),St(Object(i.a)(Object(i.a)({},t),r),!n)},Rn=function(e){return Array.isArray(e)},Ln=function(e){return Rn(e)?e[e.length-1]||0:e},Fn=[E,R,A,M,F,L,{test:function(e){return"auto"===e},parse:function(e){return e}}],Dn=Object(i.d)(Fn,[$,Z]),Nn=function(e){return function(t){return t.test(e)}},Vn=function(e){return Fn.find(Nn(e))},zn=function(e){return Dn.find(Nn(e))},Un=function(){return{type:"spring",stiffness:500,damping:25,restDelta:.5,restSpeed:10}},Bn=function(e){return{type:"spring",stiffness:700,damping:0===e?100:35}},Gn=function(){return{ease:"linear",duration:.3}},qn=function(e){return{type:"keyframes",duration:.8,values:e}},Hn={x:Un,y:Un,z:Un,rotate:Un,rotateX:Un,rotateY:Un,rotateZ:Un,scaleX:Bn,scaleY:Bn,scale:Bn,opacity:Gn,backgroundColor:Gn,color:Gn,default:Bn},Wn=function(e){var t=e.to,n=e.duration;return qt((function(e){var r=e.update,i=e.complete;r(t),n?hn(n).start({complete:i}):i()}))},$n=function(e){return Array.isArray(e)?(e.length,Se(e[0],e[1],e[2],e[3])):"string"===typeof e?r[e]:e},Jn=function(e){return Array.isArray(e)&&"number"!==typeof e[0]},Yn=function(e,t){return"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!Z.test(t)||t.startsWith("url(")))},Kn=function(e){return 1e3*e},Zn={tween:on,spring:tn,keyframes:cn,inertia:nn,just:Wn},Xn={tween:function(e){if(e.ease){var t=Jn(e.ease)?e.ease[0]:e.ease;e.ease=$n(t)}return e},keyframes:function(e){var t=e.from,n=(e.to,e.velocity,Object(i.c)(e,["from","to","velocity"]));if(n.values&&null===n.values[0]){var r=Object(i.d)(n.values);r[0]=t,n.values=r}return n.ease&&(n.easings=Jn(n.ease)?n.ease.map($n):$n(n.ease)),n.ease=ae,n}},Qn=function(e,t,n){var r=n?n.delay:0;if(void 0===n||!function(e){e.when,e.delay,e.delayChildren,e.staggerChildren,e.staggerDirection;var t=Object(i.c)(e,["when","delay","delayChildren","staggerChildren","staggerDirection"]);return Object.keys(t).length}(n))return Object(i.a)({delay:r},function(e,t){var n;return n=Rn(t)?qn:Hn[e]||Hn.default,Object(i.a)({to:t},n(t))}(e,t));var a=n[e]||n.default||n;return!1===a.type?{delay:a.hasOwnProperty("delay")?a.delay:r,to:Rn(t)?t[t.length-1]:t,type:"just"}:Rn(t)?Object(i.a)(Object(i.a)({values:t,duration:.8,delay:r,ease:"linear"},a),{type:"keyframes"}):Object(i.a)({type:"tween",to:t,delay:r},a)},er=function(e,t,n,r){var a,o=t.get(),s=Yn(e,o),c=Yn(e,n),l=Qn(e,n,r),u=l.type,d=void 0===u?"tween":u,f=Object(i.c)(l,["type"]),p=s&&c?Zn[d]:Wn,h=function(e,t){return Xn[e]?Xn[e](t):t}(d,Object(i.a)({from:o,velocity:t.getVelocity()},f));return((a=h).hasOwnProperty("duration")||a.hasOwnProperty("repeatDelay"))&&(h.duration&&(h.duration=Kn(h.duration)),h.repeatDelay&&(h.repeatDelay=Kn(h.repeatDelay))),[p,h]};function tr(e,t,n,r){var a=r.delay,o=void 0===a?0:a,s=Object(i.c)(r,["delay"]);return t.start((function(r){var a,c=er(e,t,n,s),l=c[0],u=c[1],d=u.delay,f=Object(i.c)(u,["delay"]);void 0!==d&&(o=d);var p=function(){var e=l(f);a=e.start({update:function(e){return t.set(e)},complete:r})};return o?a=hn(Kn(o)).start({complete:p}):p(),function(){a&&a.stop()}}))}var nr=function(){function e(e){var t=this,n=e.values,r=e.readValueFromSource,i=e.makeTargetAnimatable;this.props={},this.variants={},this.baseTarget={},this.overrides=[],this.resolvedOverrides=[],this.activeOverrides=new Set,this.isAnimating=new Set,this.hasValue=function(e){return!t.values.has(e)},this.values=n,this.readValueFromSource=r,this.makeTargetAnimatable=i,this.values.forEach((function(e,n){return t.baseTarget[n]=e.get()}))}return e.prototype.setProps=function(e){this.props=e},e.prototype.setVariants=function(e){e&&(this.variants=e)},e.prototype.setDefaultTransition=function(e){e&&(this.defaultTransition=e)},e.prototype.setValues=function(e,t){var n=this,r=void 0===t?{}:t,a=r.isActive,o=void 0===a?new Set:a,s=r.priority,c=this.resolveVariant(e),l=c.target,u=c.transitionEnd;return l=this.transformValues(Object(i.a)(Object(i.a)({},l),u)),Object.keys(l).forEach((function(e){if(!o.has(e)&&(o.add(e),l)){var t=Ln(l[e]);if(n.values.has(e)){var r=n.values.get(e);r&&r.set(t)}else n.values.set(e,vn(t));s||(n.baseTarget[e]=t)}}))},e.prototype.transformValues=function(e){var t=this.props.transformValues;return t?t(e):e},e.prototype.checkForNewValues=function(e){var t=Object.keys(e).filter(this.hasValue),n=t.length;if(n)for(var r=0;r<n;r++){var i=t[r],a=e[i],o=null;Array.isArray(a)&&(o=a[0]),null===o&&(o=this.readValueFromSource(i)),"string"===typeof o&&/^\d*\.?\d+$/.test(o)?o=parseFloat(o):!zn(o)&&Z.test(a)&&(o=Z.getAnimatableNone(a)),this.values.set(i,vn(o)),this.baseTarget[i]=o}},e.prototype.resolveVariant=function(e){if(!e)return{target:void 0,transition:void 0,transitionEnd:void 0};"function"===typeof e&&(e=e(this.props.custom,function(e){var t={};return e.forEach((function(e,n){return t[n]=e.get()})),t}(this.values),function(e){var t={};return e.forEach((function(e,n){return t[n]=e.getVelocity()})),t}(this.values)));var t=e.transition;return{transition:void 0===t?this.defaultTransition:t,transitionEnd:e.transitionEnd,target:Object(i.c)(e,["transition","transitionEnd"])}},e.prototype.getHighestPriority=function(){return this.activeOverrides.size?Math.max.apply(Math,Array.from(this.activeOverrides)):0},e.prototype.setOverride=function(e,t){this.overrides[t]=e,this.children&&this.children.forEach((function(n){return n.setOverride(e,t)}))},e.prototype.startOverride=function(e){var t=this.overrides[e];if(t)return this.start(t,{priority:e})},e.prototype.clearOverride=function(e){var t=this;if(this.children&&this.children.forEach((function(t){return t.clearOverride(e)})),this.overrides[e]){this.activeOverrides.delete(e);var n=this.getHighestPriority();if(this.resetIsAnimating(),n)this.overrides[n]&&this.startOverride(n);var r=this.resolvedOverrides[e];if(r){var i={};for(var a in this.baseTarget)void 0!==r[a]&&(i[a]=this.baseTarget[a]);this.onStart(),this.animate(i).then((function(){return t.onComplete()}))}}},e.prototype.apply=function(e){return Array.isArray(e)?this.applyVariantLabels(e):"string"===typeof e?this.applyVariantLabels([e]):void this.setValues(e)},e.prototype.applyVariantLabels=function(e){var t=this,n=new Set;Object(i.d)(e).reverse().forEach((function(r){var i=t.resolveVariant(t.variants[r]),a=i.target,o=i.transitionEnd;o&&t.setValues(o,{isActive:n}),a&&t.setValues(a,{isActive:n}),t.children&&t.children.size&&t.children.forEach((function(t){return t.applyVariantLabels(e)}))}))},e.prototype.start=function(e,t){var n,r,i=this;return void 0===t&&(t={}),t.priority&&this.activeOverrides.add(t.priority),this.resetIsAnimating(t.priority),r=e,n=Array.isArray(r)?this.animateVariantLabels(e,t):"string"===typeof e?this.animateVariant(e,t):this.animate(e,t),this.onStart(),n.then((function(){return i.onComplete()}))},e.prototype.animate=function(e,t){var n=this,r=void 0===t?{}:t,a=r.delay,o=void 0===a?0:a,s=r.priority,c=void 0===s?0:s,l=r.transitionOverride,u=this.resolveVariant(e),d=u.target,f=u.transition,p=u.transitionEnd;if(l&&(f=l),!d)return Promise.resolve();if(d=this.transformValues(d),p&&(p=this.transformValues(p)),this.checkForNewValues(d),this.makeTargetAnimatable){var h=this.makeTargetAnimatable(d,p);d=h.target,p=h.transitionEnd}c&&(this.resolvedOverrides[c]=d),this.checkForNewValues(d);var b=[];for(var v in d){var y=this.values.get(v);if(y&&d&&void 0!==d[v]){var m=d[v];c||(this.baseTarget[v]=Ln(m)),this.isAnimating.has(v)||(this.isAnimating.add(v),b.push(tr(v,y,m,Object(i.a)({delay:o},f))))}}var g=Promise.all(b);return p?g.then((function(){n.setValues(p,{priority:c})})):g},e.prototype.animateVariantLabels=function(e,t){var n=this,r=Object(i.d)(e).reverse().map((function(e){return n.animateVariant(e,t)}));return Promise.all(r)},e.prototype.animateVariant=function(e,t){var n=this,r=!1,i=0,a=0,o=1,s=t&&t.priority||0,c=this.variants[e],l=c?function(){return n.animate(c,t)}:function(){return Promise.resolve()},u=this.children?function(){return n.animateChildren(e,i,a,o,s)}:function(){return Promise.resolve()};if(c&&this.children){var d=this.resolveVariant(c).transition;d&&(r=d.when||r,i=d.delayChildren||i,a=d.staggerChildren||a,o=d.staggerDirection||o)}if(r){var f="beforeChildren"===r?[l,u]:[u,l],p=f[1];return(0,f[0])().then(p)}return Promise.all([l(),u()])},e.prototype.animateChildren=function(e,t,n,r,i){if(void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),!this.children)return Promise.resolve();var a=[],o=(this.children.size-1)*n,s=1===r?function(e){return e*n}:function(e){return o-e*n};return Array.from(this.children).forEach((function(n,r){var o=n.animateVariant(e,{priority:i,delay:t+s(r)});a.push(o)})),Promise.all(a)},e.prototype.onStart=function(){var e=this.props.onAnimationStart;e&&e()},e.prototype.onComplete=function(){var e=this.props.onAnimationComplete;e&&e()},e.prototype.checkOverrideIsAnimating=function(e){for(var t=this.overrides.length,n=e+1;n<t;n++){var r=this.resolvedOverrides[n];if(r)for(var i in r)this.isAnimating.add(i)}},e.prototype.resetIsAnimating=function(e){void 0===e&&(e=0),this.isAnimating.clear(),e<this.getHighestPriority()&&this.checkOverrideIsAnimating(e),this.children&&this.children.forEach((function(t){return t.resetIsAnimating(e)}))},e.prototype.stop=function(){this.values.forEach((function(e){return e.stop()}))},e.prototype.addChild=function(e){this.children||(this.children=new Set),this.children.add(e),this.overrides.forEach((function(t,n){t&&e.setOverride(t,n)}))},e.prototype.removeChild=function(e){this.children&&this.children.delete(e)},e.prototype.resetChildren=function(){this.children&&this.children.clear()},e}();var rr=function(){function e(){this.hasMounted=!1,this.pendingAnimations=[],this.componentControls=new Set}return e.prototype.setVariants=function(e){this.variants=e,this.componentControls.forEach((function(t){return t.setVariants(e)}))},e.prototype.setDefaultTransition=function(e){this.defaultTransition=e,this.componentControls.forEach((function(t){return t.setDefaultTransition(e)}))},e.prototype.subscribe=function(e){var t=this;return this.componentControls.add(e),this.variants&&e.setVariants(this.variants),this.defaultTransition&&e.setDefaultTransition(this.defaultTransition),function(){return t.componentControls.delete(e)}},e.prototype.start=function(e,t){var n=this;if(this.hasMounted){var r=[];return this.componentControls.forEach((function(n){var i=n.start(e,{transitionOverride:t});r.push(i)})),Promise.all(r)}return new Promise((function(r){n.pendingAnimations.push({animation:[e,t],resolve:r})}))},e.prototype.set=function(e){return this.hasMounted,this.componentControls.forEach((function(t){return t.apply(e)}))},e.prototype.stop=function(){this.componentControls.forEach((function(e){return e.stop()}))},e.prototype.mount=function(){var e=this;this.hasMounted=!0,this.pendingAnimations.forEach((function(t){var n=t.animation,r=t.resolve;return e.start.apply(e,n).then(r)}))},e.prototype.unmount=function(){this.hasMounted=!1,this.stop()},e}(),ir=Object(a.createContext)(null),ar=Object(a.createContext)({static:!1}),or=function(e){return"string"===typeof e||Array.isArray(e)},sr=function(e){return e instanceof rr},cr=function(e,t,n,r,i){void 0===r&&(r=!1);var o,s,c=i.initial,l=i.animate,u=i.variants,d=i.whileTap,f=i.whileHover,p=Object(a.useContext)(ir);void 0!==(null===(o=p)||void 0===o?void 0:o.initial)&&(c=p.initial),!1!==c||sr(l)?"boolean"!==typeof c&&(s=c):s=l;var h=Object(a.useRef)(!1),b=u||or(l)||or(d)||or(f)||sr(l),v=or(s)?s:e.initial,y=or(l)?l:e.animate,m=r?v:null,g=b&&or(y)?y:null,O=Object(a.useMemo)((function(){return{controls:b?t:e.controls,initial:v,animate:y,values:n,hasMounted:h,isReducedMotion:e.isReducedMotion}}),[m,g,e.isReducedMotion]);return O.static=r,function(e,t){void 0===t&&(t=!1);var n=Object(a.useRef)(!0);(!t||t&&n.current)&&e(),n.current=!1}((function(){var n=s||e.initial;n&&t.apply(n)}),!r),Object(a.useEffect)((function(){h.current=!0}),[]),O};function lr(e,t,n){var r=t.variants,o=t.transition,s=Object(a.useContext)(ar).controls,c=Object(a.useContext)(ir),l=yn((function(){return new nr(e)}));return c&&!c.isPresent||(l.resetChildren(),l.setProps(t),l.setVariants(r),l.setDefaultTransition(o)),Object(a.useEffect)((function(){n&&s&&s.addChild(l)})),Object(a.useEffect)((function(){return function(){t.onAnimationComplete;var e=Object(i.c)(t,["onAnimationComplete"]);l.setProps(e),s&&s.removeChild(l)}}),[]),l}var ur=function(e){var t=e.animate,n=e.variants,r=e.inherit;return(void 0===r||r)&&!!n&&(!t||t instanceof rr)};var dr=function(e){var t=e.getValueControlsConfig,n=e.loadFunctionalityComponents,r=e.renderComponent;return Object(a.forwardRef)((function(e,i){var o=function(e){var t=e&&"function"!==typeof e?e:Object(a.useRef)(null);return e&&"function"===typeof e&&Object(a.useEffect)((function(){return e(t.current),function(){return e(null)}}),[]),t}(i),s=Object(a.useContext)(ar),c=s.static||e.static||!1,l=_n(e),u=function(e,t,n,r){void 0===t&&(t={});var i={},o=Object(a.useRef)({}).current;for(var s in t){var c=t[s];gn(c)?e.set(s,c):n||!ft(s)&&!Mn(s)?i[s]=c:(e.has(s)?c!==o[s]&&e.get(s).set(c):e.set(s,vn(c)),o[s]=c)}return r?r(i):i}(l,e.style,c,e.transformValues),d=ur(e),f=lr(yn((function(){return t(o,l)})),e,d),p=cr(s,f,l,c,e),h=c?null:n(o,l,e,s,f,d),b=r(o,u,l,e,c);return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(ar.Provider,{value:p},b),Object(a.createElement)(a.Fragment,null,Object(a.createElement)(Cn,{innerRef:o,values:l,isStatic:c}),h))}))},fr=["animate","circle","clipPath","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","foreignObject","g","image","line","linearGradient","marker","mask","metadata","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","switch","symbol","text","textPath","tspan","use","view"],pr=Object(a.createContext)({transformPagePoint:function(e){return e}});function hr(e){return Object(a.useEffect)((function(){return function(){return e()}}),[])}function br(e,t,n,r){if(n)return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n,r)}}function vr(e){return"undefined"!==typeof PointerEvent&&e instanceof PointerEvent?!("mouse"!==e.pointerType):e instanceof MouseEvent}function yr(e){return!!e.touches}var mr={pageX:0,pageY:0};function gr(e){var t=e.touches[0]||e.changedTouches[0]||mr;return{x:t.pageX,y:t.pageY}}function Or(e){var t=e.pageX,n=void 0===t?0:t,r=e.pageY;return{x:n,y:void 0===r?0:r}}function jr(e){return{point:yr(e)?gr(e):Or(e)}}var wr,_r=function(e,t){if(void 0===t&&(t=!1),e){var n=function(t){return e(t,jr(t))};return t?function(e){if(e)return function(t){var n=t instanceof MouseEvent;(!n||n&&0===t.button)&&e(t)}}(n):n}},kr="undefined"!==typeof window,xr={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},Sr={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function Tr(e){return kr&&null===window.onpointerdown?e:kr&&null===window.ontouchstart?Sr[e]:kr&&null===window.onmousedown?xr[e]:e}function Er(e,t,n,r){return br(e,Tr(t),_r(n,"pointerdown"===t),r)}function Cr(e,t,n,r){return function(e,t,n,r){Object(a.useEffect)((function(){var i=e.current;if(n&&i)return br(i,t,n,r)}),[e,t,n,r])}(e,Tr(t),_r(n,"pointerdown"===t),r)}!function(e){e.subtract=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},e.relativeTo=function(e){var t;return function(n){var r=n.x,i=n.y,a=void 0!==t?t:t="string"===typeof e?document.getElementById(e):e;if(a){var o=a.getBoundingClientRect();return{x:r-o.left-window.scrollX,y:i-o.top-window.scrollY}}}}}(wr||(wr={}));var Pr=!1;"undefined"!==typeof window&&document.addEventListener("touchmove",(function(e){Pr&&e.preventDefault()}),{passive:!1});var Ir=function(){return Pr=!1},Mr=function(){function e(e,t,n){var r=this,a=(void 0===n?{}:n).transformPagePoint;if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(r.lastMoveEvent&&r.lastMoveEventInfo){var e=Rr(r.lastMoveEventInfo,r.history),t=null!==r.startEvent,n=Re(e.offset,{x:0,y:0})>=3;if(t||n){var a=e.point,o=j().timestamp;r.history.push(Object(i.a)(Object(i.a)({},a),{timestamp:o}));var s=r.handlers,c=s.onStart,l=s.onMove;t||(c&&c(r.lastMoveEvent,e),r.startEvent=r.lastMoveEvent),l&&l(r.lastMoveEvent,e)}}},!(yr(e)&&e.touches.length>1)){this.handlers=t,this.transformPagePoint=a;var o=Ar(jr(e),this.transformPagePoint),s=o.point,c=j().timestamp;this.history=[Object(i.a)(Object(i.a)({},s),{timestamp:c})];var l=t.onSessionStart;l&&l(e,Rr(o,this.history));var u=Er(window,"pointermove",(function(e,t){return r.handlePointerMove(e,t)})),d=Er(window,"pointerup",(function(e,t){return r.handlePointerUp(e,t)}));this.removeListeners=function(){u&&u(),d&&d()}}}return e.prototype.handlePointerMove=function(e,t){this.lastMoveEvent=e,this.lastMoveEventInfo=Ar(t,this.transformPagePoint),vr(e)&&0===e.buttons?this.handlePointerUp(e,t):w.update(this.updatePoint,!0)},e.prototype.handlePointerUp=function(e,t){this.end();var n=this.handlers.onEnd;if(n){var r=Rr(Ar(t,this.transformPagePoint),this.history);n&&n(e,r)}},e.prototype.updateHandlers=function(e){this.handlers=e},e.prototype.end=function(){this.removeListeners&&this.removeListeners(),y.update(this.updatePoint),Ir()},e}();function Ar(e,t){return t?{point:t(e.point)}:e}function Rr(e,t){var n=e.point;return{point:n,delta:wr.subtract(n,Fr(t)),offset:wr.subtract(n,Lr(t)),velocity:Dr(t,.1)}}function Lr(e){return e[0]}function Fr(e){return e[e.length-1]}function Dr(e,t){if(e.length<2)return{x:0,y:0};for(var n=e.length-1,r=null,i=Fr(e);n>=0&&(r=e[n],!(i.timestamp-r.timestamp>Kn(t)));)n--;if(!r)return{x:0,y:0};var a=(i.timestamp-r.timestamp)/1e3;if(0===a)return{x:0,y:0};var o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}var Nr=function e(t,n){return!!n&&(t===n||e(t,n.parentElement))},Vr=["whileHover","whileTap","whileDrag"],zr=function(e){return Vr.indexOf(e)+1};function Ur(e){var t=null;return function(){return null===t&&(t=e,function(){t=null})}}var Br=Ur("dragHorizontal"),Gr=Ur("dragVertical");function qr(e){var t=!1;if("y"===e)t=Gr();else if("x"===e)t=Br();else{var n=Br(),r=Gr();n&&r?t=function(){n(),r()}:(n&&n(),r&&r())}return t}var Hr=zr("whileTap");var Wr=zr("whileHover"),$r=function(e){return function(t,n){vr(t)&&e(t,n)}};function Jr(e,t){!function(e,t){var n=e.onPan,r=e.onPanStart,i=e.onPanEnd,o=e.onPanSessionStart,s=n||r||i||o,c=Object(a.useRef)(null),l=Object(a.useContext)(pr).transformPagePoint,u={onSessionStart:o,onStart:r,onMove:n,onEnd:function(e,t){c.current=null,i&&i(e,t)}};Object(a.useEffect)((function(){null!==c.current&&c.current.updateHandlers(u)})),Cr(t,"pointerdown",s&&function(e){c.current=new Mr(e,u,{transformPagePoint:l})}),hr((function(){return c.current&&c.current.end()}))}(e,t),function(e,t){var n=e.onTap,r=e.onTapStart,i=e.onTapCancel,o=e.whileTap,s=e.controls,c=n||r||i||o,l=Object(a.useRef)(!1),u=Object(a.useRef)(null);function d(){u.current&&u.current(),u.current=null}o&&s&&s.setOverride(o,Hr);var f=Object(a.useRef)(null);f.current=function(e,r){var a=t.current;if(d(),l.current&&a){l.current=!1,s&&o&&s.clearOverride(Hr);var c=qr(!0);c&&(c(),Nr(a,e.target)?n&&n(e,r):i&&i(e,r))}},Cr(t,"pointerdown",c?function(e,n){d(),u.current=Er(window,"pointerup",(function(e,t){return f.current(e,t)})),t.current&&!l.current&&(l.current=!0,r&&r(e,n),s&&o&&s.startOverride(Hr))}:void 0),hr(d)}(e,t),function(e,t){var n=e.whileHover,r=e.onHoverStart,i=e.onHoverEnd,a=e.controls;n&&a&&a.setOverride(n,Wr),Cr(t,"pointerenter",$r((function(e,t){r&&r(e,t),n&&a&&a.startOverride(Wr)}))),Cr(t,"pointerleave",$r((function(e,t){i&&i(e,t),n&&a&&a.clearOverride(Wr)})))}(e,t)}var Yr=function(e){return function(t){return e(t),null}},Kr=["onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","whileTap","whileHover","onHoverStart","onHoverEnd"],Zr={key:"gestures",shouldRender:function(e){return Kr.some((function(t){return e.hasOwnProperty(t)}))},Component:Yr((function(e){var t=e.innerRef;Jr(Object(i.c)(e,["innerRef"]),t)}))},Xr=function(e){return"object"===typeof e&&e.hasOwnProperty("current")},Qr=function(e){return e},ei=function(){function e(e){var t=e.ref,n=e.values,r=e.controls;this.isDragging=!1,this.currentDirection=null,this.constraints=!1,this.props={transformPagePoint:Qr},this.point={},this.origin={x:vn(0),y:vn(0)},this.openGlobalLock=null,this.panSession=null,this.prevConstraintsBox={width:0,height:0,x:0,y:0},this.ref=t,this.values=n,this.controls=r}return e.prototype.start=function(e,t){var n=this,r=(void 0===t?{}:t).snapToCursor;void 0!==r&&r&&this.snapToCursor(e);var i=this.props.transformPagePoint;this.panSession=new Mr(e,{onSessionStart:function(){Pr=!0,ti((function(e){var t=n.point[e];t&&t.stop()}))},onStart:function(e,t){if(n.constraintsNeedResolution){var r=n.props,i=r.dragConstraints,a=r.transformPagePoint;n.constraints=ai(i,n.ref,n.point,a),n.applyConstraintsToPoint()}ti((function(e){var t=n.point[e];t&&n.origin[e].set(t.get())}));var o=n.props,s=o.drag,c=o.dragPropagation;if(!s||c||(n.openGlobalLock&&n.openGlobalLock(),n.openGlobalLock=qr(s),n.openGlobalLock)){n.isDragging=!0,n.currentDirection=null;var l=n.props.onDragStart;l&&l(e,ni(t,n.point))}},onMove:function(e,t){var r=n.props,i=r.dragPropagation,a=r.dragDirectionLock;if(i||n.openGlobalLock){var o=t.offset;if(a&&null===n.currentDirection){if(n.currentDirection=function(e,t){void 0===t&&(t=10);var n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(o),null!==n.currentDirection){var s=n.props.onDirectionLock;s&&s(n.currentDirection)}}else{n.updatePoint("x",o),n.updatePoint("y",o);var c=n.props.onDrag;c&&c(e,ni(t,n.point))}}},onEnd:function(e,t){n.stop(e,t)}},{transformPagePoint:i})},e.prototype.cancelDrag=function(){Ir(),this.isDragging=!1,this.panSession&&this.panSession.end(),this.panSession=null,!this.props.dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null)},e.prototype.stop=function(e,t){var n;null===(n=this.panSession)||void 0===n||n.end(),this.panSession=null;var r=this.isDragging;if(this.cancelDrag(),r){var i=this.props,a=i.dragMomentum,o=i.dragElastic,s=i.onDragEnd;if(a||o){var c=t.velocity;this.animateDragEnd(c)}else this.recordBoxInfo(this.constraints);s&&s(e,ni(t,this.point))}},e.prototype.recordBoxInfo=function(e){if(e){var t=e.right,n=e.left,r=e.bottom,i=e.top;this.prevConstraintsBox.width=(t||0)-(n||0),this.prevConstraintsBox.height=(r||0)-(i||0)}this.point.x&&(this.prevConstraintsBox.x=this.point.x.get()),this.point.y&&(this.prevConstraintsBox.y=this.point.y.get())},e.prototype.snapToCursor=function(e){var t=this,n=this.props.transformPagePoint,r=jr(e).point,i=oi(this.ref,n),a=i.width/2+i.left+window.scrollX,o=i.height/2+i.top+window.scrollY,s={x:r.x-a,y:r.y-o};ti((function(e){var n=t.point[e];n&&t.origin[e].set(n.get())})),this.updatePoint("x",s),this.updatePoint("y",s)},e.prototype.setPoint=function(e,t){this.point[e]=t},e.prototype.updatePoint=function(e,t){var n=this.props,r=n.drag,i=n.dragElastic,a=this.point[e];if(ii(e,r,this.currentDirection)&&a){var o=ci(e,this.origin[e].get()+t[e],this.constraints,i);a.set(o)}},e.prototype.updateProps=function(e){var t=this,n=e.drag,r=void 0!==n&&n,a=e.dragDirectionLock,o=void 0!==a&&a,s=e.dragPropagation,c=void 0!==s&&s,l=e.dragConstraints,u=void 0!==l&&l,d=e.dragElastic,f=void 0===d||d,p=e.dragMomentum,h=void 0===p||p,b=Object(i.c)(e,["drag","dragDirectionLock","dragPropagation","dragConstraints","dragElastic","dragMomentum"]);this.props=Object(i.a)({drag:r,dragDirectionLock:o,dragPropagation:c,dragConstraints:u,dragElastic:f,dragMomentum:h},b);var v=b._dragValueX,y=b._dragValueY,m=b.dragOriginX,g=b.dragOriginY;m&&(this.origin.x=m),g&&(this.origin.y=g),ti((function(e){if(ii(e,r,t.currentDirection)){var n="x"===e?v:y;t.setPoint(e,n||t.values.get(e,0))}})),this.constraintsNeedResolution=Xr(u),this.constraints=this.constraintsNeedResolution?this.constraints||!1:u},e.prototype.applyConstraintsToPoint=function(e){var t=this;return void 0===e&&(e=this.constraints),ti((function(n){var r=t.point[n];r&&!r.isAnimating()&&ci(n,r,e,0)}))},e.prototype.animateDragEnd=function(e){var t=this,n=this.props,r=n.drag,a=n.dragMomentum,o=n.dragElastic,s=n.dragTransition,c=n._dragValueX,l=n._dragValueY,u=n._dragTransitionControls,d=ti((function(n){var d;if(ii(n,r,t.currentDirection)){var f=t.constraints?ri(n,t.constraints):{},p=o?200:1e6,h=o?40:1e7,b=u||t.controls,v=Object(i.a)(Object(i.a)({type:"inertia",velocity:a?e[n]:0,bounceStiffness:p,bounceDamping:h,timeConstant:750,restDelta:1},s),f),y="x"===n?c:l;return y?tr(n,y,0,v):b.start(((d={})[n]=0,d.transition=v,d))}}));return Promise.all(d).then((function(){t.recordBoxInfo(t.constraints),t.scalePoint();var e=t.props.onDragTransitionEnd;e&&e()}))},e.prototype.scalePoint=function(){var e=this,t=this.props,n=t.dragConstraints,r=t.transformPagePoint;if(Xr(n)){var i=oi(n,r),a=oi(this.ref,r),o=function(t,n){var r=e.point[t];if(r){if(r.isAnimating())return r.stop(),void e.recordBoxInfo();var o=e.prevConstraintsBox[n]?(i[n]-a[n])/e.prevConstraintsBox[n]:1;r.set(e.prevConstraintsBox[t]*o)}};o("x","width"),o("y","height")}},e.prototype.mount=function(e){var t=this,n=Er(e,"pointerdown",(function(e){var n=t.props,r=n.drag,i=n.dragListener;r&&(void 0===i||i)&&t.start(e)})),r=br(window,"resize",(function(){return t.scalePoint()}));if(this.constraintsNeedResolution){var i=this.props,a=i.dragConstraints,o=i.transformPagePoint,s=ai(a,this.ref,this.point,o);this.applyConstraintsToPoint(s),this.recordBoxInfo(s)}else!this.isDragging&&this.constraints&&this.applyConstraintsToPoint();return function(){n&&n(),r&&r(),t.cancelDrag()}},e}();function ti(e){return[e("x"),e("y")]}function ni(e,t){return Object(i.a)(Object(i.a)({},e),{point:{x:t.x?t.x.get():0,y:t.y?t.y.get():0}})}function ri(e,t){var n=t.top,r=t.right,i=t.bottom,a=t.left;return"x"===e?{min:a,max:r}:{min:n,max:i}}function ii(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}function ai(e,t,n,r){null!==e.current&&t.current;var i=oi(e,r),a=oi(t,r),o=i.left-a.left+si(n.x),s=i.top-a.top+si(n.y);return{top:s,left:o,right:i.width-a.width+o,bottom:i.height-a.height+s}}function oi(e,t){var n=e.current.getBoundingClientRect(),r=t({x:n.left,y:n.top}),i=r.x,a=r.y,o=t({x:n.width,y:n.height});return{left:i,top:a,width:o.x,height:o.y}}function si(e){return e?e.get():0}function ci(e,t,n,r){var i=t instanceof bn?t.get():t;if(!n)return i;var a=ri(e,n),o=a.min,s=a.max;return void 0!==o&&i<o?i=r?li(o,i,r):Math.max(o,i):void 0!==s&&i>s&&(i=r?li(s,i,r):Math.min(s,i)),t instanceof bn&&t.set(i),i}function li(e,t,n){return Fe(e,t,"number"===typeof n?n:.35)}var ui={key:"drag",shouldRender:function(e){return!!e.drag},Component:Yr((function(e){var t=e.innerRef,n=e.values,r=e.controls;return function(e,t,n,r){var o=e.dragControls,s=Object(a.useContext)(pr).transformPagePoint,c=yn((function(){return new ei({ref:t,values:n,controls:r})}));c.updateProps(Object(i.a)(Object(i.a)({},e),{transformPagePoint:s})),Object(a.useEffect)((function(){return o&&o.subscribe(c)}),[c]),Object(a.useEffect)((function(){return c.mount(t.current)}),[])}(Object(i.c)(e,["innerRef","values","controls"]),t,n,r)}))};function di(e){return"string"===typeof e&&e.startsWith("var(--")}var fi=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function pi(e,t,n){void 0===n&&(n=1);var r=function(e){var t=fi.exec(e);return t?[t[1],t[2]]:[,]}(e),i=r[0],a=r[1];if(i){var o=window.getComputedStyle(t).getPropertyValue(i);return o||(di(a)?pi(a,t,n+1):a)}}var hi,bi=new Set(["width","height","top","left","right","bottom","x","y"]),vi=function(e){return bi.has(e)},yi=function(e,t){e.set(t,!1),e.set(t)},mi=function(e){return e===E||e===R};!function(e){e.width="width",e.height="height",e.left="left",e.right="right",e.top="top",e.bottom="bottom"}(hi||(hi={}));var gi=function(e,t){return parseFloat(e.split(", ")[t])},Oi=function(e,t){return function(n,r){var i=r.transform;if("none"===i||!i)return 0;var a=i.match(/^matrix3d\((.+)\)$/);if(a)return gi(a[1],t);var o=i.match(/^matrix\((.+)\)$/);return o?gi(o[1],e):0}},ji=new Set(["x","y","z"]),wi=ut.filter((function(e){return!ji.has(e)}));var _i={width:function(e){var t=e.width;return t},height:function(e){var t=e.height;return t},top:function(e,t){var n=t.top;return parseFloat(n)},left:function(e,t){var n=t.left;return parseFloat(n)},bottom:function(e,t){var n=e.height,r=t.top;return parseFloat(r)+n},right:function(e,t){var n=e.width,r=t.left;return parseFloat(r)+n},x:Oi(4,13),y:Oi(5,14)},ki=function(e,t,n,r){void 0===r&&(r={}),n=Object(i.a)({},n),r=Object(i.a)({},r);var a=t.current,o=zt(a),s=Object.keys(n).filter(vi),c=[],l=!1,u=s.reduce((function(t,i){var a=e.get(i);if(!a)return t;var s,u=a.get(),d=n[i],f=Vn(u);if(Rn(d))for(var p=d.length,h=null===d[0]?1:0;h<p;h++)s?Vn(d[h]):(s=Vn(d[h]))===f||mi(f)&&mi(s);else s=Vn(d);if(f!==s)if(mi(f)&&mi(s)){var b=a.get();"string"===typeof b&&a.set(parseFloat(b)),"string"===typeof d?n[i]=parseFloat(d):Array.isArray(d)&&s===R&&(n[i]=d.map(parseFloat))}else l||(c=function(e,t){var n=[];return wi.forEach((function(t){var r=e.get(t);void 0!==r&&(n.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))})),n.length&&t.render(),n}(e,o),l=!0),t.push(i),r[i]=void 0!==r[i]?r[i]:n[i],yi(a,d);return t}),[]);if(u.length){var d=function(e,t,n,r,i){var a=n.getBoundingClientRect(),o=getComputedStyle(n),s=o.display,c={top:o.top,left:o.left,bottom:o.bottom,right:o.right,transform:o.transform};"none"===s&&r.set("display",e.display||"block"),r.render();var l=n.getBoundingClientRect();return i.forEach((function(n){var r=t.get(n);yi(r,_i[n](a,c)),e[n]=_i[n](l,o)})),e}(n,e,a,o,u);return c.length&&c.forEach((function(t){var n=t[0],r=t[1];e.get(n).set(r)})),o.render(),{target:d,transitionEnd:r}}return{target:n,transitionEnd:r}};function xi(e,t,n,r){return function(e){return Object.keys(e).some(vi)}(n)?ki(e,t,n,r):{target:n,transitionEnd:r}}var Si=function(e,t){return function(n,r){var a=function(e,t,n,r){var a=Object(i.c)(n,[]),o=t.current;if(!(o instanceof HTMLElement))return{target:a,transitionEnd:r};for(var s in r&&(r=Object(i.a)({},r)),e.forEach((function(e){var t=e.get();if(di(t)){var n=pi(t,o);n&&e.set(n)}})),a){var c=a[s];if(di(c)){var l=pi(c,o);l&&(a[s]=l,r&&void 0===r[s]&&(r[s]=c))}}return{target:a,transitionEnd:r}}(e,t,n,r);return n=a.target,r=a.transitionEnd,xi(e,t,n,r)}};var Ti,Ei,Ci=Object(a.createContext)(null);!function(e){e.Prepare="prepare",e.Read="read",e.Render="render"}(Ei||(Ei={}));var Pi=[Ei.Prepare,Ei.Read,Ei.Render].reduce((function(e,t){return e[t]=[],e}),{}),Ii=!1;function Mi(e){for(var t=e.length,n=0;n<t;n++)e[n]();e.length=0}var Ai=function(e){return function(t){t&&(Ii=!0,Pi[e].push(t))}},Ri=((Ti={})[Ei.Prepare]=Ai(Ei.Prepare),Ti[Ei.Read]=Ai(Ei.Read),Ti[Ei.Render]=Ai(Ei.Render),Ti.flush=function(){Ii&&(Mi(Pi.prepare),Mi(Pi.read),Mi(Pi.render),Ii=!1)},Ti);var Li={duration:.8,ease:[.45,.05,.19,1]},Fi={type:"spring",stiffness:500,damping:25,restDelta:.5,restSpeed:10};var Di={id:"x",size:"width",min:"left",max:"right",origin:"originX"},Ni={id:"y",size:"height",min:"top",max:"bottom",origin:"originY"};function Vi(e,t){return(e+t)/2}function zi(e,t,n){var r,i=e[n.size]-t[n.size],a=.5;return i&&(e[n.min]===t[n.min]?a=0:e[n.max]===t[n.max]&&(a=1)),(r={})[n.size]=i,r[n.origin]=a,r[n.id]=.5===a?Vi(e[n.min],e[n.max])-Vi(t[n.min],t[n.max]):0,r}var Ui={getLayout:function(e){return e.offset},measure:function(e){var t=e.offsetLeft,n=e.offsetTop,r=e.offsetWidth,i=e.offsetHeight;return{left:t,top:n,right:t+r,bottom:n+i,width:r,height:i}}},Bi={getLayout:function(e){return e.boundingBox},measure:function(e){var t=e.getBoundingClientRect();return{left:t.left,top:t.top,width:t.width,height:t.height,right:t.right,bottom:t.bottom}}};function Gi(e){return window.getComputedStyle(e).position}function qi(e){return"width"===e||"height"===e}var Hi,Wi={key:"layout",shouldRender:function(e){var t=e.positionTransition,n=e.layoutTransition;return"undefined"!==typeof window&&!(!t&&!n)},Component:function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.b)(t,e),t.prototype.getSnapshotBeforeUpdate=function(){var e=this.props,t=e.innerRef,n=e.positionTransition,r=e.values,a=e.controls,o=t.current;if(function(e){return e instanceof HTMLElement}(o)){var s,c,l,u=function(e){var t=e.layoutTransition,n=e.positionTransition;return t||n}(this.props),d=!!n,f=Gi(o),p={offset:Ui.measure(o),boundingBox:Bi.measure(o)};return Ri.prepare((function(){s=o.style.transform,o.style.transform=""})),Ri.read((function(){c={offset:Ui.measure(o),boundingBox:Bi.measure(o)};var e=Gi(o);l=function(e,t,n){return n&&e===t?Ui:Bi}(f,e,d)})),Ri.render((function(){var e=function(e,t){return Object(i.a)(Object(i.a)({},zi(e,t,Di)),zi(e,t,Ni))}(l.getLayout(p),l.getLayout(c));if(e.x||e.y||e.width||e.height){zt(o).set({originX:e.originX,originY:e.originY}),Sn();var t={},n={},f=function(e){return"function"===typeof e}(u)?u({delta:e}):u;h("left","x",0,e.x),h("top","y",0,e.y),d||(h("width","scaleX",1,p.boundingBox.width/c.boundingBox.width),h("height","scaleY",1,p.boundingBox.height/c.boundingBox.height)),t.transition=n,f&&a.start(t),Tn()}else s&&(o.style.transform=s);function h(a,o,s,c){var u=qi(a)?a:o;if(e[u]){var p="boolean"===typeof f?Object(i.a)({},function(e){return e?Fi:Li}(d)):f,h=r.get(o,s),b=h.getVelocity();n[o]=p[o]?Object(i.a)({},p[o]):Object(i.a)({},p),void 0===n[o].velocity&&(n[o].velocity=b||0),t[o]=s;var v=qi(a)||l!==Ui?0:h.get();h.set(c+v)}}})),null}},t.prototype.componentDidUpdate=function(){Ri.flush()},t.prototype.render=function(){return null},t.contextType=Ci,t}(a.Component)},$i=new Set(["initial","animate","exit","style","variants","transition","transformTemplate","transformValues","custom","inherit","static","positionTransition","layoutTransition","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","dragElastic","dragMomentum","dragPropagation","dragTransition","_dragValueX","_dragValueY","_dragTransitionControls","dragOriginX","dragOriginY","onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","whileHover","whileTap","onHoverEnd","onHoverStart"]);function Ji(e){return $i.has(e)}!function(e){e.Target="Target",e.VariantLabel="VariantLabel",e.AnimationSubscription="AnimationSubscription"}(Hi||(Hi={}));function Yi(e,t){void 0===t&&(t=!1);e.transition;var n=e.transitionEnd,r=Object(i.c)(e,["transition","transitionEnd"]);return t?Object(i.a)(Object(i.a)({},r),n):r}var Ki,Zi,Xi=function(e){var t,n=e instanceof bn?e.get():e;return Array.from(new Set((t=n)?Array.isArray(t)?t:[t]:[]))};var Qi=((Ki={})[Hi.Target]=Yr((function(e){return function(e,t,n,r){var o=Object(a.useRef)(!0),s=Object(a.useRef)(null);s.current||(s.current=Yi(e,!0)),Object(a.useEffect)((function(){var a,c,l={},u=Yi(e),d=Yi(e,!0);for(var f in u){var p=o.current&&(!n.has(f)||n.get(f).get()!==d[f]),h=null!==d[f],b=(a=s.current[f],void 0!==(c=d[f])&&(Array.isArray(a)&&Array.isArray(c)?!function(e,t){if(null===t)return!1;var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}(c,a):a!==c));h&&(b||p)&&(l[f]=u[f])}o.current=!1,s.current=Object(i.a)(Object(i.a)({},s.current),d),Object.keys(l).length&&t.start(Object(i.a)(Object(i.a)({},l),{transition:e.transition||r,transitionEnd:e.transitionEnd}))}),[e])}(e.animate,e.controls,e.values,e.transition)})),Ki[Hi.VariantLabel]=Yr((function(e){var t=e.animate,n=e.inherit,r=void 0===n||n,i=e.controls;return function(e,t,n,r){var i=Xi(t),o=Object(a.useContext)(ar),s=o.hasMounted&&o.hasMounted.current,c=Object(a.useRef)(!1);Object(a.useEffect)((function(){var t,a,l=!1;n?(l=!!s,i=Xi(o.animate)):l=c.current||(t=Xi(e),a=i,t.join(",")!==a.join(",")),l&&r.start(i),c.current=!0}),[i.join(",")])}(e.initial,t,r,i)})),Ki[Hi.AnimationSubscription]=Yr((function(e){return function(e,t){var n=Object(a.useMemo)((function(){return e.subscribe(t)}),[e]);Object(a.useEffect)((function(){return function(){n&&n()}}),[n])}(e.animate,e.controls)})),Ki),ea=function(e){return e.animate instanceof rr},ta=["initial","animate","whileTap","whileHover"],na=((Zi={})[Hi.Target]=function(e){return void 0!==e.animate&&(t=e.animate,!(Array.isArray(t)||"string"===typeof t))&&!ea(e);var t},Zi[Hi.VariantLabel]=function(e){return void 0!==e.variants||ta.some((function(t){return"string"===typeof e[t]}))},Zi[Hi.AnimationSubscription]=ea,Zi);var ra={key:"exit",shouldRender:function(e){return!!e.exit&&!ur(e)},Component:Yr((function(e){var t,n=e.animate,r=e.controls,o=e.exit,s=function(){var e=Object(a.useContext)(ir);if(null===e)return[!0];var t=e.isPresent,n=e.onExitComplete,r=e.register;return Object(a.useEffect)(r,[]),!t&&n?[!1,n]:[!0]}(),c=s[0],l=s[1],u=Object(a.useContext)(ir),d=Object(a.useRef)(!1),f=void 0!==(null===(t=u)||void 0===t?void 0:t.custom)?u.custom:e.custom;Object(a.useEffect)((function(){c?!d.current||!n||n instanceof rr||r.start(n):(!d.current&&o&&(r.setProps(Object(i.a)(Object(i.a)({},e),{custom:f})),r.start(o).then(l)),d.current=!0),c&&(d.current=!1)}),[c])}))},ia=function(e){return!Ji(e)};try{var aa=n(423).default;ia=function(e){return e.startsWith("on")?!Ji(e):aa(e)}}catch(va){}var oa=[Wi,ui,Zr,ra],sa=oa.length;function ca(e){var t="string"===typeof e,n=t&&-1!==fr.indexOf(e);return{renderComponent:function(r,o,s,c,l){var u=t?function(e){var t={};for(var n in e)ia(n)&&(t[n]=e[n]);return t}(c):c,d=n?function(e,t){var n=Rt(Pn(e),void 0,void 0,void 0,void 0,!1);return n.style=Object(i.a)(Object(i.a)({},t),n.style),n}(s,o):function(e,t,n,r){var i={style:An(e,t,n)};return r&&(i.style.userSelect="none",i.draggable=!1),i}(s,o,l,!!c.drag);return Object(a.createElement)(e,Object(i.a)(Object(i.a)(Object(i.a)({},u),{ref:r}),d))},loadFunctionalityComponents:function(e,t,n,r,o,s){var c=[],l=function(e){var t=void 0;for(var n in Hi)na[n](e)&&(t=n);return t?Qi[t]:void 0}(n);l&&c.push(Object(a.createElement)(l,{key:"animation",initial:n.initial,animate:n.animate,variants:n.variants,transition:n.transition,controls:o,inherit:s,values:t}));for(var u=0;u<sa;u++){var d=oa[u],f=d.shouldRender,p=d.key,h=d.Component;f(n,r)&&c.push(Object(a.createElement)(h,Object(i.a)({key:p},n,{parentContext:r,values:t,controls:o,innerRef:e})))}return c},getValueControlsConfig:function(e,t){return{values:t,readValueFromSource:function(t){return zt(e.current).get(t)},makeTargetAnimatable:Si(t,e)}}}}var la=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","webview"].reduce((function(e,t){var n=ca(t);return e[t]=dr(n),e}),{}),ua=fr.reduce((function(e,t){return e[t]=dr(ca(t)),e}),{}),da=Object(i.a)(Object(i.a)({custom:function(e){return dr(ca(e))}},la),ua);function fa(){return{scrollX:vn(0),scrollY:vn(0),scrollXProgress:vn(0),scrollYProgress:vn(0)}}"undefined"!==typeof window?a.useLayoutEffect:a.useEffect;fa();!function(){function e(){this.componentControls=new Set}e.prototype.subscribe=function(e){var t=this;return this.componentControls.add(e),function(){return t.componentControls.delete(e)}},e.prototype.start=function(e,t){this.componentControls.forEach((function(n){n.start(e.nativeEvent||e,t)}))}}();var pa=vn(null);if("undefined"!==typeof window)if(window.matchMedia){var ha=window.matchMedia("(prefers-reduced-motion)"),ba=function(){return pa.set(ha.matches)};ha.addListener(ba),ba()}else pa.set(!1)},function(e,t,n){"use strict";var r=n(26),i=n(10),a=n(2),o=n(3),s=n(37),c=n(5),l=n(6),u=n(0),d=(n(16),n(13),n(1)),f=n(32),p=n(58),h=n(8),b=(n(12),n(19),n(20),n(111)),v=n(40),y=n(112),m=(n(143),n(56)),g=n(75),O=n(178),j=n(9),w=n(72),_=n(230),k=n(360),x=n(7),S=n.n(x),T=n(15),E=(n(17),n(36)),C=n(91);function P(){return I.apply(this,arguments)}function I(){return(I=Object(T.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([n.e(5),n.e(92)]).then(n.bind(null,1203)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return A.apply(this,arguments)}function A(){return(A=Object(T.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P().then((function(e){return{contains:e.contains,intersects:e.intersects,overlaps:e.overlaps,simplify:e.simplify}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return L.apply(this,arguments)}function L(){return(L=Object(T.a)(S.a.mark((function e(t){var n,r,i,a,o,s,c,l,u,d,f,p,h;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.selector,r=t.candidates,i=t.currentSelection,a=t.options,o=t.view,r&&r.length&&i&&o){e.next=3;break}return e.abrupt("return",{added:[],removed:[]});case 3:if(s=a.overlaps,c=a.intersects,l=a.contains,u=o.spatialReference,n){e.next=6;break}return e.abrupt("return",{added:[],removed:i.removeAll()});case 6:return d=n,e.next=9,M();case 9:return f=e.sent,p=[],h=[],e.abrupt("return",(r.forEach((function(e){var t=e.geometry,n=s&&!!f.overlaps(u,d,t),r=c&&!!f.intersects(u,d,t),a=l&&!!f.contains(u,d,t),o=i.includes(e);n||r||a?!o&&p.push(e):o&&h.push(e)})),i.removeMany(h),i.addMany(p),{added:p,removed:h}));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=n(78),D=n(120),N=n(130),V=n(116),z=(n(76),n(51)),U=n(221),B=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;Object(a.a)(this,n),(r=t.call(this))._activeOptions=null,r._dashedFillSymbol=new N.default({color:[0,0,0,0],outline:{style:"dash",color:[12,207,255],width:2}}),r._dashedLineSymbol=new D.default({style:"dash",color:[12,207,255],width:2}),r._defaultOptions={tool:"rectangle",createOptions:null,selectionOptions:{overlaps:!0,intersects:!0,contains:!1}},r._completed=!1,r._handles=new z.a,r._sketchViewModel=new k.a,r._sketchGraphicsLayer=new U.a({listMode:"hide",internal:!0}),r._transparentPointSymbol=new V.default({color:[0,0,0,0],outline:{style:"none",width:0}}),r.candidates=null,r.geometry=null,r.options=null,r.selection=new v.a,r.view=null,r.candidates=e.candidates,r.options=e.options,r.view=e.view;var i=Object(s.a)(r),o=i._dashedFillSymbol,c=i._dashedLineSymbol,l=i._sketchViewModel,u=i._sketchGraphicsLayer,d=i._transparentPointSymbol;return l.set({layer:u,view:r.view,activePointSymbol:d,activeLineSymbol:c,activeVertexSymbol:d,activeFillSymbol:o,pointSymbol:d,polygonSymbol:o,polylineSymbol:c,vertexSymbol:d}),r._handles.add([l.on("create",(function(e){return r._onSketchEvent(e)})),l.on(["undo","redo"],(function(e){return r._onSketchEvent(e)}))]),r}return Object(o.a)(n,[{key:"initialize",value:function(){this._load()}},{key:"destroy",value:function(){this._handles.destroy(),this._handles=null}},{key:"state",get:function(){var e=this._completed,t=this._sketchViewModel.state;return e?"complete":"active"===t?"active":"disabled"}},{key:"cancel",value:function(){this._sketchViewModel.cancel()}},{key:"_load",value:function(){var e=Object(T.a)(S.a.mark((function e(){var t,n,r,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.view.whenReady();case 2:t=this.options,n=this._activeOptions=Object(i.a)(Object(i.a)({},this._defaultOptions),t),r=n.tool,a=n.createOptions,this._sketchViewModel.create(r,a);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_onSketchEvent",value:function(e){var t="create"===e.type?e.graphic:e.graphics[0],n=(null==t?void 0:t.geometry)||null,r="create"===e.type&&"cancel"===e.state,i="create"===e.type&&"complete"===e.state;this._processSelectionGeometry(n,i,r)}},{key:"_processSelectionGeometry",value:function(e,t,n){var r=this;if(this._set("geometry",e),(t||n)&&(this._completed=!0),n)this._onComplete([],!0);else{var i=this._activeOptions,a=this.candidates,o=this.selection,s=this.view;R({selector:e,candidates:a,currentSelection:o,options:i.selectionOptions,view:s}).then((function(e){var n=e.added,i=e.removed;t?r._onComplete(r.selection.toArray(),!1):(n.length||i.length)&&r.emit("selection-change",{added:n,removed:i,type:"selection-change"})}))}}},{key:"_onComplete",value:function(e,t){this._handles.removeAll(),this.notifyChange("state"),this.emit("complete",{aborted:t,selection:e,type:"complete"})}}]),n}(F.a.EventedAccessor);Object(u.a)([Object(d.b)()],B.prototype,"_completed",void 0),Object(u.a)([Object(d.b)()],B.prototype,"candidates",void 0),Object(u.a)([Object(d.b)({readOnly:!0})],B.prototype,"geometry",void 0),Object(u.a)([Object(d.b)()],B.prototype,"options",void 0),Object(u.a)([Object(d.b)({readOnly:!0})],B.prototype,"selection",void 0),Object(u.a)([Object(d.b)({readOnly:!0})],B.prototype,"state",null),Object(u.a)([Object(d.b)({value:null})],B.prototype,"view",void 0);var G=B=Object(u.a)([Object(h.a)("esri.widgets.support.Selector")],B),q=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e))._defaultSelectionOptions={intersects:!0,overlaps:!0,contains:!0},r.candidates=null,r.options=null,r.view=null,r}return Object(o.a)(n,[{key:"draw",value:function(e){var t=this._defaultSelectionOptions,n=this.candidates,r=this.options,a=this.view,o=Object(i.a)(Object(i.a)(Object(i.a)({},t),r),null==e?void 0:e.selectionOptions);return new G({candidates:n,options:Object(i.a)(Object(i.a)({},e),{},{selectionOptions:o}),view:a})}},{key:"selectionFrom",value:function(){var e=Object(T.a)(S.a.mark((function e(t,n){var r,a,o,s,c,l;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._defaultSelectionOptions,a=this.candidates,o=this.options,s=this.view,c=new v.a,l=Object(i.a)(Object(i.a)(Object(i.a)({},r),o),n),e.next=3,R({selector:t,candidates:a,currentSelection:c,options:l,view:s});case 3:return e.abrupt("return",c.toArray());case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(Object(C.b)(E.a));Object(u.a)([Object(d.b)()],q.prototype,"candidates",void 0),Object(u.a)([Object(d.b)()],q.prototype,"options",void 0),Object(u.a)([Object(d.b)({value:null})],q.prototype,"view",void 0);var H=q=Object(u.a)([Object(h.a)("esri.widgets.support.Selector")],q),W="esri-sketch",$="esri-sketch--vertical",J="esri-sketch__panel",Y="esri-sketch__info-panel",K="esri-sketch__section",Z="esri-sketch__tool-section",X="esri-sketch__info-section",Q="esri-sketch__info-count-section",ee="esri-sketch__menu-container",te="esri-sketch__menu-header",ne="esri-sketch__menu-title",re="esri-sketch__menu-content",ie="esri-sketch__menu-item",ae="esri-sketch__menu-item-wrapper",oe="esri-sketch__feature-count-badge",se="esri-sketch__feature-count-number",ce="esri-sketch__button",le="esri-sketch__button--selected",ue="esri-icon-map-pin",de="esri-icon-polygon",fe="esri-icon-polyline",pe="esri-icon-radio-unchecked",he="esri-icon-checkbox-unchecked",be="esri-icon-cursor",ve="esri-icon-trash",ye="esri-icon-undo",me="esri-icon-redo",ge="esri-icon-settings",Oe="esri-sketch__action-toggle",je="esri-sketch__action-toggle--on",we="esri-sketch__item-action-title",_e="esri-sketch__item-action-icon",ke="esri-icon-cursor-marquee",xe="esri-icon-lasso",Se="esri-disabled",Te="esri-widget",Ee="esri-icon-edit",Ce={createTools:{point:!0,polyline:!0,polygon:!0,rectangle:!0,circle:!0},selectionTools:{"rectangle-selection":!0,"lasso-selection":!0},undoRedoMenu:!0,settingsMenu:!0},Pe=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e,r){var o;return Object(a.a)(this,n),(o=t.call(this,e,r))._activeCreateOptions=null,o._activeSelectionInfo=null,o._menuOpen=!1,o._selector=new H,o.availableCreateTools=["point","polyline","polygon","rectangle","circle"],o.createGraphic=null,o.creationMode="continuous",o.defaultCreateOptions=null,o.defaultUpdateOptions=null,o.iconClass=Ee,o.label=void 0,o.layer=null,o.messages=null,o.snappingOptions=new _.a,o.updateGraphics=new v.a,o.view=null,o.viewModel=new k.a,o.visibleElements=Object(i.a)({},Ce),o._activateCreateTool=o._activateCreateTool.bind(Object(s.a)(o)),o}return Object(o.a)(n,[{key:"initialize",value:function(){var e=this,t=this.view;this._selector.view=t,this.own([this.viewModel.on("create",(function(){return e.scheduleRender()})),this.viewModel.on("update",(function(){return e.scheduleRender()})),this.viewModel.on("create",(function(t){return e._onCreateOperation(t)})),this.viewModel.on("delete",(function(t){return e.emit("delete",t)})),this.viewModel.on("undo",(function(){return e.scheduleRender()})),this.viewModel.on("redo",(function(){return e.scheduleRender()})),this.viewModel.watch("view",(function(t){return e._selector.set({view:t})})),this.viewModel.watch("state",(function(){return e.notifyChange("state")}))])}},{key:"activeTool",get:function(){var e;return(null==(e=this._activeSelectionInfo)?void 0:e.tool)||this.viewModel.activeTool}},{key:"layout",set:function(e){"vertical"!==e&&(e="horizontal"),this._set("layout",e)}},{key:"state",get:function(){return this._activeSelectionInfo?"active":this.viewModel.state}},{key:"castVisibleElements",value:function(e){return Object(i.a)(Object(i.a)(Object(i.a)({},Ce),e),{},{createTools:Object(i.a)(Object(i.a)({},Ce.createTools),null==e?void 0:e.createTools),selectionTools:Object(i.a)(Object(i.a)({},Ce.selectionTools),null==e?void 0:e.selectionTools)})}},{key:"create",value:function(e,t){this._activeCreateOptions=t||null,this.viewModel.create(e,t)}},{key:"update",value:function(e,t){return this.viewModel.update(e,t)}},{key:"complete",value:function(){}},{key:"cancel",value:function(){this._cancelSelectionOperation(),this.viewModel.cancel()}},{key:"undo",value:function(){}},{key:"redo",value:function(){}},{key:"delete",value:function(){}},{key:"render",value:function(){var e,t=this.label,n=this.layout,i=this.viewModel.state;return Object(j.a)("div",{"aria-label":t,class:this.classes(W,Te,(e={},Object(r.a)(e,Se,"disabled"===i),Object(r.a)(e,$,"vertical"===n),e))},Object(j.a)("div",{role:"toolbar",class:J},this.renderTopPanelContents()),Object(j.a)("div",{class:this.classes(J,Y)},this.renderInfoPanelContents()))}},{key:"renderTopPanelContents",value:function(){var e=this.classes(K,Z),t=this.availableCreateTools,n=this.visibleElements;return[Object(j.a)("div",{role:"menu",key:"selection-button-container",class:e},this.renderSelectionTools()),t&&t.length?Object(j.a)("div",{role:"menu",class:e},this.renderDrawButtons()):null,n.undoRedoMenu?Object(j.a)("div",{role:"menu",key:"undo-redo-menu-button-container",class:e},this.renderUndoRedoMenuButtons()):null,n.settingsMenu?Object(j.a)("div",{key:"settings-menu-button-container",class:K},this.renderSettingsMenuButton()):null]}},{key:"renderInfoPanelContents",value:function(){return this._menuOpen?this.renderSettingsMenu():this.updateGraphics.length?[Object(j.a)("div",{class:this.classes(K,X,Q),key:"feature-count-container"},this.renderFeatureCount()),Object(j.a)("div",{class:this.classes(K,X),key:"delete-button-container"},this.renderDeleteButton())]:void 0}},{key:"renderSettingsMenu",value:function(){var e=this.messages.settings;return[Object(j.a)("div",{role:"menu",class:ee,key:"settings-menu-container"},Object(j.a)("header",{class:te,key:"settings-menu-header"},Object(j.a)("span",{class:ne},e)),Object(j.a)("div",{class:re,key:"settings-menu-content","aria-label":e},Object(j.a)("div",{class:ae},this.renderSnappingToggleMenuItem())))]}},{key:"renderSnappingToggleMenuItem",value:function(){var e;return Object(j.a)("div",{class:ie,"aria-label":null==(e=this.messages)?void 0:e.snappingEnabled,key:"sketch-snapping-action-toggle",role:"menuitem"},this.renderSnappingToggle())}},{key:"renderSnappingToggle",value:function(){var e=this.messages.snappingEnabled,t=this.viewModel.snappingOptions.enabled,n=this.classes(Oe,Object(r.a)({},je,t));return Object(j.a)("div",{bind:this,role:"button",onclick:this._onSnappingToggleClick,onkeydown:this._onSnappingToggleKeyDown,class:n,tabindex:"0",title:e,"aria-label":e},this.renderActionIcon(),Object(j.a)("span",{class:we},e))}},{key:"_onSnappingToggleKeyDown",value:function(e){var t=Object(b.a)(e);"Enter"!==t&&" "!==t||(e.preventDefault(),this._toggleSnapping())}},{key:"_onSnappingToggleClick",value:function(e){e.stopPropagation(),this._toggleSnapping()}},{key:"renderActionIcon",value:function(){return Object(j.a)("span",{key:"action-icon","aria-hidden":"true",class:this.classes(_e)})}},{key:"renderFeatureCount",value:function(){var e=this.layout,t=this.messages,n=this.updateGraphics.length,r=Object(y.a)(1===n?t.featureCount:t.featuresCount,{count:n});return Object(j.a)("div",{class:oe,"aria-label":r},Object(j.a)("span",{class:se},"vertical"===e?n:r))}},{key:"renderDeleteButton",value:function(){var e=this.messages.deleteFeature;return Object(j.a)("button",{"aria-label":e,bind:this,class:this.classes(ce,ve),onclick:this.delete,title:e,type:"button"})}},{key:"renderSelectionTools",value:function(){return[this.renderDefaultSelectionButton(),this.renderRectangleSelectionButton(),this.renderLassoSelectionButton()]}},{key:"renderDefaultSelectionButton",value:function(){if(this.viewModel.updateOnGraphicClick){var e=this.messages.selectFeature;return Object(j.a)("button",{"aria-label":e,bind:this,class:this.classes(ce,be,Object(r.a)({},le,"ready"===this.state)),onclick:this.cancel,role:"menuitemradio",title:e})}}},{key:"renderRectangleSelectionButton",value:function(){var e,t;if("2d"===(null==(e=this.view)?void 0:e.type)&&this.visibleElements.selectionTools["rectangle-selection"]){var n=this.messages.selectRectangle;return Object(j.a)("button",{"aria-label":n,bind:this,class:this.classes(ce,ke,Object(r.a)({},le,"rectangle-selection"===(null==(t=this._activeSelectionInfo)?void 0:t.tool))),onclick:this._activateRectangleSelectTool,role:"menuitemradio",title:n})}}},{key:"renderLassoSelectionButton",value:function(){var e,t;if("2d"===(null==(e=this.view)?void 0:e.type)&&this.visibleElements.selectionTools["lasso-selection"]){var n=this.messages.selectLasso;return Object(j.a)("button",{"aria-label":n,bind:this,class:this.classes(ce,xe,Object(r.a)({},le,"lasso-selection"===(null==(t=this._activeSelectionInfo)?void 0:t.tool))),onclick:this._activateLassoSelectTool,role:"menuitemradio",title:n})}}},{key:"renderDrawButtons",value:function(){var e=this,t=this.visibleElements.createTools;return this.availableCreateTools.map((function(n){return"point"===n&&t.point?e.renderPointButton():"polyline"===n&&t.polyline?e.renderPolylineButton():"polygon"===n&&t.polygon?e.renderPolygonButton():"rectangle"===n&&t.rectangle?e.renderRectangleButton():"circle"===n&&t.circle?e.renderCircleButton():void 0}))}},{key:"renderPointButton",value:function(){var e="point",t=this.messages.drawPoint,n=[ce,ue];return this.activeTool===e&&n.push(le),Object(j.a)("button",{"aria-label":t,bind:this,class:this.classes(n),"data-tool-name":e,onclick:this._activateCreateTool,role:"menuitemradio",title:t,type:"button"})}},{key:"renderPolygonButton",value:function(){var e="polygon",t=this.messages.drawPolygon,n=[ce,de];return this.activeTool===e&&n.push(le),Object(j.a)("button",{"aria-label":t,bind:this,class:this.classes(n),"data-tool-name":e,onclick:this._activateCreateTool,role:"menuitemradio",title:t,type:"button"})}},{key:"renderPolylineButton",value:function(){var e="polyline",t=this.messages.drawPolyline,n=[ce,fe];return this.activeTool===e&&n.push(le),Object(j.a)("button",{"aria-label":t,bind:this,class:this.classes(n),"data-tool-name":e,onclick:this._activateCreateTool,role:"menuitemradio",title:t,type:"button"})}},{key:"renderCircleButton",value:function(){var e="circle",t=this.messages.drawCircle,n=[ce,pe];return this.activeTool===e&&n.push(le),Object(j.a)("button",{"aria-label":t,bind:this,class:this.classes(n),"data-tool-name":e,onclick:this._activateCreateTool,role:"menuitemradio",title:t,type:"button"})}},{key:"renderRectangleButton",value:function(){var e="rectangle",t=this.messages.drawRectangle,n=[ce,he];return this.activeTool===e&&n.push(le),Object(j.a)("button",{"aria-label":t,bind:this,class:this.classes(n),"data-tool-name":e,onclick:this._activateCreateTool,role:"menuitemradio",title:t,type:"button"})}},{key:"renderUndoRedoMenuButtons",value:function(){return[this.renderUndoButton(),this.renderRedoButton()]}},{key:"renderUndoButton",value:function(){var e=this.messages.undo,t=!this.viewModel.canUndo(),n=Object(m.f)()?me:ye;return Object(j.a)("button",{"aria-label":e,bind:this,class:this.classes(ce,n),disabled:t,onclick:this.undo,title:e,type:"button"})}},{key:"renderRedoButton",value:function(){var e=this.messages.redo,t=!this.viewModel.canRedo(),n=Object(m.f)()?ye:me;return Object(j.a)("button",{"aria-label":e,bind:this,class:this.classes(ce,n),disabled:t,onclick:this.redo,title:e,type:"button"})}},{key:"renderSettingsMenuButton",value:function(){var e=this.messages.settings,t=[ce,ge];return this._menuOpen&&t.push(le),Object(j.a)("button",{"aria-label":e,bind:this,class:this.classes(t),onclick:this._toggleMenu,title:e,type:"button"})}},{key:"_cancelSelectionOperation",value:function(){var e,t;null==(e=this._activeSelectionInfo)||null==(t=e.operation)||t.cancel(),this._activeSelectionInfo=null,this._selector.candidates=null}},{key:"_activateCreateTool",value:function(e){var t=e.target.getAttribute("data-tool-name");this.activeTool!==t?(this._activeSelectionInfo&&this._cancelSelectionOperation(),this.create(t)):this.cancel()}},{key:"_onCreateOperation",value:function(e){if("complete"===e.state){var t=this.creationMode;if("create"===e.type){var n=e.tool,r=e.graphic,i=this._activeCreateOptions;this._activeCreateOptions=null,"continuous"===t?this.create(n,i):"update"===t&&this.update([r])}}}},{key:"_toggleMenu",value:function(){this._menuOpen=!this._menuOpen,this.scheduleRender()}},{key:"_toggleSnapping",value:function(){var e=this.viewModel.snappingOptions;this.viewModel.snappingOptions.enabled=!e.enabled,this.scheduleRender()}},{key:"_onSelectionOperationComplete",value:function(e){var t=this.viewModel.defaultUpdateOptions,n=e.selection;if(this._activeSelectionInfo=null,!e.aborted&&n.length){var r=t.tool,a=n.length>1&&"reshape"===r?"transform":r;this.update(n,Object(i.a)(Object(i.a)({},t),{},{tool:a}))}this.notifyChange("state")}},{key:"_activateRectangleSelectTool",value:function(){var e=this;if(this._activeSelectionInfo){var t=this._activeSelectionInfo.tool;if(this._cancelSelectionOperation(),"rectangle-selection"===t)return}else"active"===this.state&&this.cancel();this._selector.candidates=this._getSelectionCandidates();var n=this._selector.draw({tool:"rectangle"});n.once("complete",(function(t){return e._onSelectionOperationComplete(t)})),this._activeSelectionInfo={tool:"rectangle-selection",operation:n}}},{key:"_activateLassoSelectTool",value:function(){var e=this;if(this._activeSelectionInfo){var t=this._activeSelectionInfo.tool;if(this._cancelSelectionOperation(),"lasso-selection"===t)return}else"active"===this.state&&this.cancel();this._selector.candidates=this._getSelectionCandidates();var n=this._selector.draw({tool:"polygon",createOptions:{mode:"freehand"}});n.once("complete",(function(t){return e._onSelectionOperationComplete(t)})),this._activeSelectionInfo={tool:"lasso-selection",operation:n}}},{key:"_getSelectionCandidates",value:function(){var e,t;return(null==(e=this.layer)||null==(t=e.graphics)?void 0:t.toArray())||[]}}]),n}(w.a);Object(u.a)([Object(d.b)()],Pe.prototype,"_activeSelectionInfo",void 0),Object(u.a)([Object(d.b)()],Pe.prototype,"activeTool",null),Object(u.a)([Object(d.b)({cast:function(e){if(!e||!e.length)return null;var t=new Set(["point","polyline","polygon","rectangle","circle"]);return e.filter((function(e){return t.has(e)}))}})],Pe.prototype,"availableCreateTools",void 0),Object(u.a)([Object(f.a)("viewModel.createGraphic")],Pe.prototype,"createGraphic",void 0),Object(u.a)([Object(d.b)()],Pe.prototype,"creationMode",void 0),Object(u.a)([Object(f.a)("viewModel.defaultCreateOptions")],Pe.prototype,"defaultCreateOptions",void 0),Object(u.a)([Object(f.a)("viewModel.defaultUpdateOptions")],Pe.prototype,"defaultUpdateOptions",void 0),Object(u.a)([Object(d.b)()],Pe.prototype,"iconClass",void 0),Object(u.a)([Object(d.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Pe.prototype,"label",void 0),Object(u.a)([Object(f.a)("viewModel.layer")],Pe.prototype,"layer",void 0),Object(u.a)([Object(d.b)({value:"horizontal"})],Pe.prototype,"layout",null),Object(u.a)([Object(d.b)(),Object(g.a)("esri/widgets/Sketch/t9n/Sketch")],Pe.prototype,"messages",void 0),Object(u.a)([Object(f.a)("viewModel.snappingOptions")],Pe.prototype,"snappingOptions",void 0),Object(u.a)([Object(d.b)()],Pe.prototype,"state",null),Object(u.a)([Object(f.a)("viewModel.updateGraphics")],Pe.prototype,"updateGraphics",void 0),Object(u.a)([Object(f.a)("viewModel.view")],Pe.prototype,"view",void 0),Object(u.a)([Object(d.b)(),Object(O.a)(["create","update","undo","redo"])],Pe.prototype,"viewModel",void 0),Object(u.a)([Object(d.b)()],Pe.prototype,"visibleElements",void 0),Object(u.a)([Object(p.a)("visibleElements")],Pe.prototype,"castVisibleElements",null),Object(u.a)([Object(f.a)("viewModel.complete")],Pe.prototype,"complete",null),Object(u.a)([Object(f.a)("viewModel.undo")],Pe.prototype,"undo",null),Object(u.a)([Object(f.a)("viewModel.redo")],Pe.prototype,"redo",null),Object(u.a)([Object(f.a)("viewModel.delete")],Pe.prototype,"delete",null);var Ie=Pe=Object(u.a)([Object(h.a)("esri.widgets.Sketch")],Pe);t.a=Ie},function(e,t,n){"use strict";var r=n(103),i=n(73),a=n(160),o=n(85),s=n(46),c=n(375);function l(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}var u=l,d=(n(490),[]),f=0;function p(e){try{v(),e()}finally{y()}}function h(e){d.push(e),f||(v(),m())}function b(e){try{return v(),e()}finally{m()}}function v(){f++}function y(){f--}function m(){var e;for(y();!f&&void 0!==(e=d.shift());)p(e)}var g=function(e){return function(t){return e.some((function(e){return k(e)(t)}))}},O=function(e){return function(t){return e(t)}},j=function(e){return function(t){return t.type===String(e)}},w=function(e){return function(t){return t.type===e}},_=function(){return s.G};function k(e){var t="*"===e?_:Object(o.k)(e)?j:Object(o.a)(e)?g:Object(o.l)(e)?j:Object(o.d)(e)?O:Object(o.m)(e)?w:null;if(null===t)throw new Error("invalid pattern: "+e);return t(e)}var x={type:r.b},S=function(e){return e&&e.type===r.b};function T(e){void 0===e&&(e=Object(s.A)());var t=!1,n=[];return{take:function(r){t&&e.isEmpty()?r(x):e.isEmpty()?(n.push(r),r.cancel=function(){Object(s.N)(n,r)}):r(e.take())},put:function(r){if(!t){if(0===n.length)return e.put(r);n.shift()(r)}},flush:function(n){t&&e.isEmpty()?n(x):n(e.flush())},close:function(){if(!t){t=!0;var e=n;n=[];for(var r=0,i=e.length;r<i;r++){(0,e[r])(x)}}}}}function E(){var e=function(){var e,t=!1,n=[],i=n,a=function(){i===n&&(i=n.slice())},o=function(){t=!0;var e=n=i;i=[],e.forEach((function(e){e(x)}))};return(e={})[r.e]=!0,e.put=function(e){if(!t)if(S(e))o();else for(var a=n=i,s=0,c=a.length;s<c;s++){var l=a[s];l[r.d](e)&&(l.cancel(),l(e))}},e.take=function(e,n){void 0===n&&(n=_),t?e(x):(e[r.d]=n,a(),i.push(e),e.cancel=Object(s.K)((function(){a(),Object(s.N)(i,e)})))},e.close=o,e}(),t=e.put;return e.put=function(e){e[r.f]?t(e):h((function(){t(e)}))},e}function C(e,t){var n=e[r.a];Object(o.d)(n)&&(t.cancel=n),e.then(t,(function(e){t(e,!0)}))}var P,I=0,M=function(){return++I};function A(e){e.isRunning()&&e.cancel()}var R=((P={})[s.r]=function(e,t,n){var i=t.channel,a=void 0===i?e.channel:i,s=t.pattern,c=t.maybe,l=function(e){e instanceof Error?n(e,!0):!S(e)||c?n(e):n(r.k)};try{a.take(l,Object(o.g)(s)?k(s):null)}catch(u){return void n(u,!0)}n.cancel=l.cancel},P[s.n]=function(e,t,n){var r=t.channel,i=t.action,a=t.resolve;h((function(){var t;try{t=(r?r.put:e.dispatch)(i)}catch(s){return void n(s,!0)}a&&Object(o.j)(t)?C(t,n):n(t)}))},P[s.a]=function(e,t,n,r){var i=r.digestEffect,a=I,c=Object.keys(t);if(0!==c.length){var l=Object(s.H)(t,n);c.forEach((function(e){i(t[e],a,l[e],e)}))}else n(Object(o.a)(t)?[]:{})},P[s.p]=function(e,t,n,r){var i=r.digestEffect,a=I,c=Object.keys(t),l=Object(o.a)(t)?Object(s.I)(c.length):{},u={},d=!1;c.forEach((function(e){var t=function(t,r){d||(r||Object(s.O)(t)?(n.cancel(),n(t,r)):(n.cancel(),d=!0,l[e]=t,n(l)))};t.cancel=s.P,u[e]=t})),n.cancel=function(){d||(d=!0,c.forEach((function(e){return u[e].cancel()})))},c.forEach((function(e){d||i(t[e],a,u[e],e)}))},P[s.c]=function(e,t,n,r){var i=t.context,a=t.fn,c=t.args,l=r.task;try{var u=a.apply(i,c);if(Object(o.j)(u))return void C(u,n);if(Object(o.e)(u))return void G(e,u,l.context,I,Object(s.F)(a),!1,n);n(u)}catch(d){n(d,!0)}},P[s.w]=function(e,t,n){var r=t.context,i=t.fn,a=t.args;try{var s=function(e,t){Object(o.n)(e)?n(t):n(e,!0)};i.apply(r,a.concat(s)),s.cancel&&(n.cancel=s.cancel)}catch(c){n(c,!0)}},P[s.f]=function(e,t,n,r){var i=t.context,a=t.fn,c=t.args,l=t.detached,u=r.task,d=function(e){var t=e.context,n=e.fn,r=e.args;try{var i=n.apply(t,r);if(Object(o.e)(i))return i;var a=!1;return Object(s.M)((function(e){return a?{value:e,done:!0}:(a=!0,{value:i,done:!Object(o.j)(i)})}))}catch(c){return Object(s.M)((function(){throw c}))}}({context:i,fn:a,args:c}),f=function(e,t){return e.isSagaIterator?{name:e.meta.name}:Object(s.F)(t)}(d,a);b((function(){var t=G(e,d,u.context,I,f,l,void 0);l?n(t):t.isRunning()?(u.queue.addTask(t),n(t)):t.isAborted()?u.queue.abort(t.error()):n(t)}))},P[s.h]=function(e,t,n,r){var i=r.task,a=function(e,t){if(e.isRunning()){var n={task:i,cb:t};t.cancel=function(){e.isRunning()&&Object(s.N)(e.joiners,n)},e.joiners.push(n)}else e.isAborted()?t(e.error(),!0):t(e.result())};if(Object(o.a)(t)){if(0===t.length)return void n([]);var c=Object(s.H)(t,n);t.forEach((function(e,t){a(e,c[t])}))}else a(t,n)},P[s.x]=function(e,t,n,i){var a=i.task;t===r.h?A(a):Object(o.a)(t)?t.forEach(A):A(t),n()},P[s.q]=function(e,t,n){var r=t.selector,i=t.args;try{n(r.apply(void 0,[e.getState()].concat(i)))}catch(a){n(a,!0)}},P[s.z]=function(e,t,n){var r=t.pattern,i=T(t.buffer),a=k(r),o=function t(n){S(n)||e.channel.take(t,a),i.put(n)},s=i.close;i.close=function(){o.cancel(),s()},e.channel.take(o,a),n(i)},P[s.B]=function(e,t,n,r){n(r.task.isCancelled())},P[s.C]=function(e,t,n){t.flush(n)},P[s.g]=function(e,t,n,r){n(r.task.context[t])},P[s.D]=function(e,t,n,r){var i=r.task;Object(s.L)(i.context,t),n()},P);function L(e,t){return e+"?"+t}function F(e){var t=e.name,n=e.location;return n?t+"  "+L(n.fileName,n.lineNumber):t}function D(e){var t=Object(s.Q)((function(e){return e.cancelledTasks}),e);return t.length?["Tasks cancelled due to error:"].concat(t).join("\n"):""}var N=null,V=[],z=function(){N=null,V.length=0},U=function(){var e=V[0],t=V.slice(1),n=e.crashedEffect?function(e){var t=Object(s.R)(e);return t?t.code+"  "+L(t.fileName,t.lineNumber):""}(e.crashedEffect):null;return["The above error occurred in task "+F(e.meta)+(n?" \n when executing effect "+n:"")].concat(t.map((function(e){return"    created by "+F(e.meta)})),[D(V)]).join("\n")};function B(e,t,n,i,a,o,c){var l;void 0===c&&(c=s.P);var d,f,p=0,h=null,b=[],v=Object.create(n),y=function(e,t,n){var r,i=[],a=!1;function o(e){t(),l(),n(e,!0)}function c(t){i.push(t),t.cont=function(c,l){a||(Object(s.N)(i,t),t.cont=s.P,l?o(c):(t===e&&(r=c),i.length||(a=!0,n(r))))}}function l(){a||(a=!0,i.forEach((function(e){e.cont=s.P,e.cancel()})),i=[])}return c(e),{addTask:c,cancelAll:l,abort:o,getTasks:function(){return i}}}(t,(function(){b.push.apply(b,y.getTasks().map((function(e){return e.meta.name})))}),m);function m(t,n){if(n){if(p=2,(o={meta:a,cancelledTasks:b}).crashedEffect=N,V.push(o),g.isRoot){var i=U();z(),e.onError(t,{sagaStack:i})}f=t,h&&h.reject(t)}else t===r.j?p=1:1!==p&&(p=3),d=t,h&&h.resolve(t);var o;g.cont(t,n),g.joiners.forEach((function(e){e.cb(t,n)})),g.joiners=null}var g=((l={})[r.i]=!0,l.id=i,l.meta=a,l.isRoot=o,l.context=v,l.joiners=[],l.queue=y,l.cancel=function(){0===p&&(p=1,y.cancelAll(),m(r.j,!1))},l.cont=c,l.end=m,l.setContext=function(e){Object(s.L)(v,e)},l.toPromise=function(){return h||(h=u(),2===p?h.reject(f):0!==p&&h.resolve(d)),h.promise},l.isRunning=function(){return 0===p},l.isCancelled=function(){return 1===p||0===p&&1===t.status},l.isAborted=function(){return 2===p},l.result=function(){return d},l.error=function(){return f},l);return g}function G(e,t,n,i,a,c,l){var u=e.finalizeRunEffect((function(t,n,i){if(Object(o.j)(t))C(t,i);else if(Object(o.e)(t))G(e,t,f.context,n,a,!1,i);else if(t&&t[r.c]){(0,R[t.type])(e,t.payload,i,p)}else i(t)}));h.cancel=s.P;var d={meta:a,cancel:function(){0===d.status&&(d.status=1,h(r.j))},status:0},f=B(e,d,n,i,a,c,l),p={task:f,digestEffect:b};return l&&(l.cancel=f.cancel),h(),f;function h(e,n){try{var a;n?(a=t.throw(e),z()):Object(s.S)(e)?(d.status=1,h.cancel(),a=Object(o.d)(t.return)?t.return(r.j):{done:!0,value:r.j}):a=Object(s.T)(e)?Object(o.d)(t.return)?t.return():{done:!0}:t.next(e),a.done?(1!==d.status&&(d.status=3),d.cont(a.value)):b(a.value,i,h)}catch(c){if(1===d.status)throw c;d.status=2,d.cont(c,!0)}}function b(t,n,r,i){void 0===i&&(i="");var a,o=M();function c(n,i){a||(a=!0,r.cancel=s.P,e.sagaMonitor&&(i?e.sagaMonitor.effectRejected(o,n):e.sagaMonitor.effectResolved(o,n)),i&&function(e){N=e}(t),r(n,i))}e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:o,parentEffectId:n,label:i,effect:t}),c.cancel=s.P,r.cancel=function(){a||(a=!0,c.cancel(),c.cancel=s.P,e.sagaMonitor&&e.sagaMonitor.effectCancelled(o))},u(t,o,c)}}function q(e,t){var n=e.channel,r=void 0===n?E():n,i=e.dispatch,a=e.getState,o=e.context,l=void 0===o?{}:o,u=e.sagaMonitor,d=e.effectMiddlewares,f=e.onError,p=void 0===f?s.b:f;for(var h=arguments.length,v=new Array(h>2?h-2:0),y=2;y<h;y++)v[y-2]=arguments[y];var m=t.apply(void 0,v);var g,O=M();if(u&&(u.rootSagaStarted=u.rootSagaStarted||s.P,u.effectTriggered=u.effectTriggered||s.P,u.effectResolved=u.effectResolved||s.P,u.effectRejected=u.effectRejected||s.P,u.effectCancelled=u.effectCancelled||s.P,u.actionDispatched=u.actionDispatched||s.P,u.rootSagaStarted({effectId:O,saga:t,args:v})),d){var j=c.c.apply(void 0,d);g=function(e){return function(t,n,r){return j((function(t){return e(t,n,r)}))(t)}}}else g=s.e;var w={channel:r,dispatch:Object(s.d)(i),getState:a,sagaMonitor:u,onError:p,finalizeRunEffect:g};return b((function(){var e=G(w,m,l,O,Object(s.F)(t),!0,void 0);return u&&u.effectResolved(O,e),e}))}var H=function(e){var t,n=void 0===e?{}:e,r=n.context,o=void 0===r?{}:r,c=n.channel,l=void 0===c?E():c,u=n.sagaMonitor,d=Object(a.a)(n,["context","channel","sagaMonitor"]);function f(e){var n=e.getState,r=e.dispatch;return t=q.bind(null,Object(i.a)({},d,{context:o,channel:l,dispatch:r,getState:n,sagaMonitor:u})),function(e){return function(t){u&&u.actionDispatched&&u.actionDispatched(t);var n=e(t);return l.put(t),n}}}return f.run=function(){return t.apply(void 0,arguments)},f.setContext=function(e){Object(s.L)(o,e)},f};t.a=H},function(e,t,n){"use strict";function r(e){return Object.prototype.toString.call(e).slice(8,-1)}function i(e){return"Undefined"===r(e)}function a(e){return"Null"===r(e)}function o(e){return"Object"===r(e)&&(e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype)}function s(e){return"Array"===r(e)}function c(e){return"Symbol"===r(e)}var l,u,d,f,p;l=a,u=i;function h(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}function b(e,t,n,r){var i=r.propertyIsEnumerable(t)?"enumerable":"nonenumerable";"enumerable"===i&&(e[t]=n),"nonenumerable"===i&&Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!0,configurable:!0})}function v(e,t,n){if(!o(t))return n&&s(n)&&n.forEach((function(n){t=n(e,t)})),t;var r={};o(e)&&(r=h(Object.getOwnPropertyNames(e),Object.getOwnPropertySymbols(e)).reduce((function(n,r){var i=e[r];return(!c(r)&&!Object.getOwnPropertyNames(t).includes(r)||c(r)&&!Object.getOwnPropertySymbols(t).includes(r))&&b(n,r,i,e),n}),{}));return h(Object.getOwnPropertyNames(t),Object.getOwnPropertySymbols(t)).reduce((function(r,i){var a=t[i],c=o(e)?e[i]:void 0;return n&&s(n)&&n.forEach((function(e){a=e(c,a)})),void 0!==c&&o(a)&&(a=v(c,a,n)),b(r,i,a,t),r}),r)}t.a=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=null,i=e;return o(e)&&e.extensions&&1===Object.keys(e).length&&(i={},r=e.extensions),t.reduce((function(e,t){return v(e,t,r)}),i)}},function(e,t,n){"use strict";var r=n(26),i=n(2),a=n(3),o=n(5),s=n(6),c=n(0),l=(n(16),n(13),n(1)),u=n(32),d=n(58),f=n(8),p=(n(12),n(19),n(20),n(38)),h=n(25),b=(n(56),n(75)),v=n(9),y=n(72),m=n(31),g=(n(17),n(36)),O=n(201),j=n(59),w=n(44),_=n(61),k=n(43),x=n(108),S=(n(71),n(377)),T=n(419);function E(e,t){return e&&e.indexOf(t)>-1}function C(e,t){var n="decimal-degrees"===e?Object(_.e)(t,!0):t;return[n.x,n.y]}function P(e){var t=e.state.paddedViewState,n=e.spatialReference,r=e.width;return n.isWrappable&&t.worldScreenWidth<r}var I=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).scaleComputedFrom=Object(p.e)(),r.view=null,r}return Object(a.a)(n,[{key:"state",get:function(){return this.get("view.ready")&&"2d"===this.get("view.type")?"ready":"disabled"}},{key:"getScaleBarProperties",value:function(e,t){if("disabled"===this.state||isNaN(e)||!t)return null;var n=this._getDistanceInKm(this.view,this.scaleComputedFrom);if("metric"===t)return this._getScaleBarProps(e,n,"metric");var r=n/1.609;return this._getScaleBarProps(e,r,"non-metric")}},{key:"_getLocationUnit",value:function(){var e=this.get("view.spatialReference"),t=e.isWebMercator,n=e.wkid,r=e.wkt;return t||E(r,"WGS_1984_Web_Mercator")?"decimal-degrees":null!=O.a[n]||E(r,"PROJCS")?"linear-unit":"unknown"}},{key:"_getDistanceInKm",value:function(e,t){var n=e.state,r=e.spatialReference,i=this._getLocationUnit();if("linear-unit"===i){return n.extent.width*function(e){var t=e.wkid;if(null!=O.a[t])return O.a.values[O.a[t]];var n=e.wkt,r=n.lastIndexOf(",")+1,i=n.lastIndexOf("]]");return parseFloat(n.substring(r,i))}(r)/1e3}var a=this._getScaleMeasuringPoints(e,t),o=Object(m.a)(a,2),s=o[0],c=o[1],l=new x.a({paths:[[C(i,s),C(i,c)]],spatialReference:"decimal-degrees"===i?w.a.WGS84:r}),u=Object(S.c)(l,10),d=Object(T.b)([u],"kilometers");return Object(m.a)(d,1)[0]}},{key:"_getScaleMeasuringPoints",value:function(e,t){var n=e.width,r=e.height,i=e.position,a=e.spatialReference;if(P(e)){var o=Object(j.d)(a).valid;return[new k.a(o[0],0,a),new k.a(o[1],0,a)]}var s=t.y-i[1];s>r?s=r:s<0&&(s=0);var c=Object(p.e)(0,s),l=Object(p.e)(n,s);return[e.toMap(c),e.toMap(l)]}},{key:"_getScaleBarProps",value:function(e,t,n){var r=this.view,i=e*t/(P(r)?r.state.paddedViewState.worldScreenWidth:r.width),a="metric"===n?"km":"mi";i<.1&&("mi"===a?(i*=5280,a="ft"):"km"===a&&(i*=1e3,a="m"));for(var o=0;i>=1;)i/=10,o++;var s=this._getConstraints(i);if(!s)return null;var c=s.min,l=s.max,u=l/i>=i/c?c:l;return{length:e*(u/i),value:Math.pow(10,o)*u,unit:a}}},{key:"_getConstraints",value:function(e){return e>.5?{min:.5,max:1}:e>.3?{min:.3,max:.5}:e>.2?{min:.2,max:.3}:e>.15?{min:.15,max:.2}:e>=.1?{min:.15,max:.1}:void 0}}]),n}(g.a);Object(c.a)([Object(l.b)()],I.prototype,"scaleComputedFrom",void 0),Object(c.a)([Object(l.b)({readOnly:!0})],I.prototype,"state",null),Object(c.a)([Object(l.b)()],I.prototype,"view",void 0);var M=I=Object(c.a)([Object(f.a)("esri.widgets.Scalebar.ScaleBarViewModel")],I),A="esri-scale-bar esri-widget",R="esri-scale-bar__label-container",L="esri-scale-bar__label-container--ruler",F="esri-scale-bar__label-container--line",D="esri-scale-bar__label-container--top",N="esri-scale-bar__label-container--bottom",V="esri-scale-bar__label",z="esri-scale-bar__line",U="esri-scale-bar__line--top",B="esri-scale-bar__line--bottom",G="esri-scale-bar__ruler",q="esri-scale-bar__ruler-block",H="esri-scale-bar__bar-container",W="esri-scale-bar__bar-container--ruler",$="esri-scale-bar__bar-container--line",J="esri-disabled";function Y(e){return 2*e}var K=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,r){var a;return Object(i.a)(this,n),(a=t.call(this,e,r)).label=void 0,a.messages=null,a.unit="non-metric",a.view=null,a.viewModel=new M,a}return Object(a.a)(n,[{key:"initialize",value:function(){var e=this;this.own([Object(h.k)(this,"view.stationary",(function(){return e.scheduleRender()})),Object(h.d)(this,["view.center","view.scale","view.zoom"],(function(){e.view.stationary&&e.scheduleRender()}))])}},{key:"style",set:function(e){var t="dual"===this.unit?"line":e;this._set("style",t)}},{key:"castStyle",value:function(e){return"line"===e?e:"ruler"}},{key:"castUnit",value:function(e){return"metric"===e||"dual"===e?e:"non-metric"}},{key:"render",value:function(){var e,t,n="disabled"===this.get("viewModel.state"),i=Object(r.a)({},J,n);if(!n){var a=this.unit,o=this.style,s="metric"===a||"dual"===a;if("non-metric"===a||"dual"===a){var c=this.viewModel.getScaleBarProperties(50,"non-metric");c&&(t="ruler"===o?this._renderRuler(c):this._renderLine(c,"bottom"))}if(s){var l=this.viewModel.getScaleBarProperties(50,"metric");l&&(e="ruler"===o?this._renderRuler(l):this._renderLine(l,"top"))}}return Object(v.a)("div",{afterCreate:this._handleRootCreateOrUpdate,afterUpdate:this._handleRootCreateOrUpdate,bind:this,class:this.classes(A,i)},e,t)}},{key:"_renderRuler",value:function(e){var t=Y(Math.round(e.length)),n=this.messages,r=n[e.unit]||n.unknownUnit,i="".concat(Y(e.value)," ").concat(r);return Object(v.a)("div",{class:this.classes(H,W),key:"esri-scale-bar__ruler"},Object(v.a)("div",{class:G,styles:{width:"".concat(t,"px")}},Object(v.a)("div",{class:q}),Object(v.a)("div",{class:q}),Object(v.a)("div",{class:q}),Object(v.a)("div",{class:q})),Object(v.a)("div",{class:this.classes(R,L)},Object(v.a)("div",{class:V},"0"),Object(v.a)("div",{class:V},i)))}},{key:"_renderLine",value:function(e,t){var n,i,a=this.messages,o=a[e.unit]||a.unknownUnit,s="".concat(Y(e.value)," ").concat(o),c=(n={},Object(r.a)(n,D,"top"===t),Object(r.a)(n,N,"bottom"===t),n),l=Object(v.a)("div",{class:this.classes(R,F,c),key:"esri-scale-bar__label"},Object(v.a)("div",{class:V},s)),u=(i={},Object(r.a)(i,U,"top"===t),Object(r.a)(i,B,"bottom"===t),i),d=Y(Math.round(e.length)),f=Object(v.a)("div",{class:this.classes(z,u),key:"esri-scale-bar__line",styles:{width:"".concat(d,"px")}});return Object(v.a)("div",{class:this.classes(H,$),key:"esri-scale-bar__line-container"},[f,l])}},{key:"_handleRootCreateOrUpdate",value:function(e){var t=this.viewModel;if(t){var n=e.getBoundingClientRect(),r=n.left+window.pageXOffset,i=n.top+window.pageYOffset,a=Object(p.e)(r,i);(a.x!==t.scaleComputedFrom.x||a.y!==t.scaleComputedFrom.y)&&(t.scaleComputedFrom=a)}}}]),n}(y.a);Object(c.a)([Object(l.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],K.prototype,"label",void 0),Object(c.a)([Object(l.b)(),Object(b.a)("esri/widgets/ScaleBar/t9n/ScaleBar")],K.prototype,"messages",void 0),Object(c.a)([Object(l.b)()],K.prototype,"style",null),Object(c.a)([Object(d.a)("style")],K.prototype,"castStyle",null),Object(c.a)([Object(l.b)()],K.prototype,"unit",void 0),Object(c.a)([Object(d.a)("unit")],K.prototype,"castUnit",null),Object(c.a)([Object(u.a)("viewModel.view")],K.prototype,"view",void 0),Object(c.a)([Object(l.b)()],K.prototype,"viewModel",void 0);var Z=K=Object(c.a)([Object(f.a)("esri.widgets.ScaleBar")],K);t.a=Z},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n(3),a=n(5),o=n(6),s=n(0),c=(n(16),n(13),n(17),n(1)),l=n(8),u=n(18),d=(n(12),n(19),n(20),n(28)),f=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).created=null,i.id=null,i.portal=null,i.title=null,i.username=null,i}return Object(i.a)(n,[{key:"url",get:function(){var e=this.get("portal.restUrl");return e?"".concat(e,"/content/users/").concat(this.username,"/").concat(this.id):null}},{key:"toJSON",value:function(){throw new u.a("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}}]),n}(d.a);Object(s.a)([Object(c.b)({type:Date})],f.prototype,"created",void 0),Object(s.a)([Object(c.b)()],f.prototype,"id",void 0),Object(s.a)([Object(c.b)()],f.prototype,"portal",void 0),Object(s.a)([Object(c.b)()],f.prototype,"title",void 0),Object(s.a)([Object(c.b)({readOnly:!0})],f.prototype,"url",null),Object(s.a)([Object(c.b)()],f.prototype,"username",void 0);var p,h=f=Object(s.a)([Object(l.a)("esri.portal.PortalFolder")],f),b=n(595),v=p=function(e){Object(a.a)(s,e);var t=Object(o.a)(s);function s(){var e;Object(r.a)(this,s);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).access=null,e.created=null,e.culture=null,e.description=null,e.email=null,e.fullName=null,e.modified=null,e.orgId=null,e.portal=null,e.preferredView=null,e.privileges=null,e.region=null,e.role=null,e.roleId=null,e.sourceJSON=null,e.units=null,e.username=null,e.userType=null,e}return Object(i.a)(s,[{key:"thumbnailUrl",get:function(){var e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl("".concat(e,"/info/").concat(t,"?f=json")):null}},{key:"userContentUrl",get:function(){var e=this.get("portal.restUrl");return e?"".concat(e,"/content/users/").concat(this.username):null}},{key:"url",get:function(){var e=this.get("portal.restUrl");return e?"".concat(e,"/community/users/").concat(this.username):null}},{key:"addItem",value:function(e){var t=this,n=e&&e.item,r=e&&e.data,i=e&&e.folder,a={method:"post"};n&&(a.query=n.createPostQuery(),null!=r&&("string"==typeof r?a.query.text=r:"object"==typeof r&&(a.query.text=JSON.stringify(r))));var o=this.userContentUrl;return i&&(o+="/"+("string"==typeof i?i:i.id)),this.portal._request(o+"/addItem",a).then((function(e){return n.id=e.id,n.portal=t.portal,n.loaded?n.reload():n.load()}))}},{key:"deleteItem",value:function(e){var t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal._request(t+"/items/".concat(e.id,"/delete"),{method:"post"}).then((function(){e.id=null,e.portal=null}))}},{key:"deleteItems",value:function(e){var t=this.userContentUrl+"/deleteItems",n=e.map((function(e){return e.id}));if(n.length){var r={method:"post",query:{items:n.join(",")}};return this.portal._request(t,r).then((function(){e.forEach((function(e){e.id=null,e.portal=null}))}))}return Promise.resolve(void 0)}},{key:"fetchFolders",value:function(){var e=this;return this.portal._request(this.userContentUrl,{query:{num:1}}).then((function(t){return t&&t.folders?t.folders.map((function(t){var n=h.fromJSON(t);return n.portal=e.portal,n})):[]}))}},{key:"fetchGroups",value:function(){var e=this;return this.portal._request(this.url).then((function(t){return t&&t.groups?t.groups.map((function(t){var n=b.default.fromJSON(t);return n.portal=e.portal,n})):[]}))}},{key:"fetchItems",value:function(e){var t=this;e||(e={});var r,i=this.userContentUrl;return e.folder&&(i+="/"+e.folder.id),Promise.resolve().then(n.bind(null,435)).then((function(n){var a=n.default;r=a;var o={folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"};return t.portal._request(i,{query:o})})).then((function(e){var n;return e&&e.items?(n=e.items.map((function(e){var n=r.fromJSON(e);return n.portal=t.portal,n})),Promise.all(n.map((function(e){return e.load()}))).catch((function(e){return e})).then((function(){return{items:n,nextStart:e.nextStart,total:e.total}}))):{items:[],nextStart:-1,total:0}}))}},{key:"fetchTags",value:function(){return this.portal._request(this.url+"/tags").then((function(e){return e.tags}))}},{key:"getThumbnailUrl",value:function(e){var t=this.thumbnailUrl;return t&&e&&(t+="&w=".concat(e)),t}},{key:"queryFavorites",value:function(e){return this.favGroupId?(this._favGroup||(this._favGroup=new b.default({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new u.a("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}},{key:"toJSON",value:function(){throw new u.a("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}}],[{key:"fromJSON",value:function(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");var t=new p;return t.sourceJSON=e,t.read(e),t}}]),s}(d.a);Object(s.a)([Object(c.b)()],v.prototype,"access",void 0),Object(s.a)([Object(c.b)({type:Date})],v.prototype,"created",void 0),Object(s.a)([Object(c.b)()],v.prototype,"culture",void 0),Object(s.a)([Object(c.b)()],v.prototype,"description",void 0),Object(s.a)([Object(c.b)()],v.prototype,"email",void 0),Object(s.a)([Object(c.b)()],v.prototype,"favGroupId",void 0),Object(s.a)([Object(c.b)()],v.prototype,"fullName",void 0),Object(s.a)([Object(c.b)({type:Date})],v.prototype,"modified",void 0),Object(s.a)([Object(c.b)()],v.prototype,"orgId",void 0),Object(s.a)([Object(c.b)()],v.prototype,"portal",void 0),Object(s.a)([Object(c.b)()],v.prototype,"preferredView",void 0),Object(s.a)([Object(c.b)()],v.prototype,"privileges",void 0),Object(s.a)([Object(c.b)()],v.prototype,"region",void 0),Object(s.a)([Object(c.b)()],v.prototype,"role",void 0),Object(s.a)([Object(c.b)()],v.prototype,"roleId",void 0),Object(s.a)([Object(c.b)()],v.prototype,"sourceJSON",void 0),Object(s.a)([Object(c.b)()],v.prototype,"thumbnail",void 0),Object(s.a)([Object(c.b)({readOnly:!0})],v.prototype,"thumbnailUrl",null),Object(s.a)([Object(c.b)()],v.prototype,"units",void 0),Object(s.a)([Object(c.b)({readOnly:!0})],v.prototype,"userContentUrl",null),Object(s.a)([Object(c.b)({readOnly:!0})],v.prototype,"url",null),Object(s.a)([Object(c.b)()],v.prototype,"username",void 0),Object(s.a)([Object(c.b)()],v.prototype,"userType",void 0);var y=v=p=Object(s.a)([Object(l.a)("esri.portal.PortalUser")],v);t.default=y},function(e,t,n){"use strict";function r(e){return"string"!==typeof e||"/"===(e=e.trim())[e.length-1]&&(e=e.slice(0,-1)),e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return u}));var r=n(23),i=n(361),a=n(453);var o=function(e,t,n,r,i){e=e||"UNKNOWN_ERROR",t=t||"UNKNOWN_ERROR_CODE",this.name="ArcGISRequestError",this.message="UNKNOWN_ERROR_CODE"===t?e:t+": "+e,this.originalMessage=e,this.code=t,this.response=n,this.url=r,this.options=i};o.prototype=Object.create(Error.prototype),o.prototype.constructor=o;var s="@esri/arcgis-rest-js",c={httpMethod:"POST",params:{f:"json"}};var l=function(e){function t(t,n,r,i,a){void 0===t&&(t="AUTHENTICATION_ERROR"),void 0===n&&(n="AUTHENTICATION_ERROR_CODE");var o=e.call(this,t,n,r,i,a)||this;return o.name="ArcGISAuthError",o.message="AUTHENTICATION_ERROR_CODE"===n?t:n+": "+t,o}return Object(r.b)(t,e),t.prototype.retry=function(e,t){var n=this;void 0===t&&(t=3);var i=0,a=function a(o,s){e(n.url,n.options).then((function(e){var t=Object(r.a)(Object(r.a)({},n.options),{authentication:e});return i+=1,u(n.url,t)})).then((function(e){o(e)})).catch((function(e){"ArcGISAuthError"===e.name&&i<t?a(o,s):"ArcGISAuthError"===e.name&&i>=t?s(n):s(e)}))};return new Promise((function(e,t){a(e,t)}))},t}(o);function u(e,t){void 0===t&&(t={params:{f:"json"}});var n=Object(r.a)(Object(r.a)(Object(r.a)({httpMethod:"POST"},c),t),{params:Object(r.a)(Object(r.a)({},c.params),t.params),headers:Object(r.a)(Object(r.a)({},c.headers),t.headers)}),u=[],d=[];if(n.fetch||"undefined"===typeof fetch?(u.push("`fetch`"),d.push("`node-fetch`")):n.fetch=fetch.bind(Function("return this")()),"undefined"===typeof Promise&&(u.push("`Promise`"),d.push("`es6-promise`")),"undefined"===typeof FormData&&(u.push("`FormData`"),d.push("`isomorphic-form-data`")),!n.fetch||"undefined"===typeof Promise||"undefined"===typeof FormData)throw new Error("`arcgis-rest-request` requires a `fetch` implementation and global variables for `Promise` and `FormData` to be present in the global scope. You are missing "+u.join(", ")+". We recommend installing the "+d.join(", ")+" modules at the root of your application to add these to the global scope. See https://bit.ly/2KNwWaJ for more info.");var f=n.httpMethod,p=n.authentication,h=n.rawResponse,b=Object(r.a)({f:"json"},n.params),v=null,y={method:f,credentials:n.credentials||"same-origin"};return n.headers&&n.headers["X-Esri-Auth-Client-Id"]&&e.indexOf("/oauth2/platformSelf")>-1&&(y.credentials="include"),(p?p.getToken(e,{fetch:n.fetch}).catch((function(t){return t.url=e,t.options=n,v=t,Promise.resolve("")})):Promise.resolve("")).then((function(t){t.length&&(b.token=t),p&&p.getDomainCredentials&&(y.credentials=p.getDomainCredentials(e));var o={};if("GET"===y.method){b.token&&n.hideToken&&"undefined"===typeof window&&(o["X-Esri-Authorization"]="Bearer "+b.token,delete b.token);var c=""===Object(a.a)(b)?e:e+"?"+Object(a.a)(b);n.maxUrlLength&&c.length>n.maxUrlLength||b.token&&n.hideToken?(y.method="POST",t.length&&n.hideToken&&(b.token=t,delete o["X-Esri-Authorization"])):e=c}var l=new RegExp("/items/.+/updateResources").test(e);return"POST"===y.method&&(y.body=function(e,t){var n=Object(i.b)(e)||t,r=Object(i.a)(e);if(n){var o=new FormData;return Object.keys(r).forEach((function(e){if("undefined"!==typeof Blob&&r[e]instanceof Blob){var t=r.fileName||r[e].name||e;o.append(e,r[e],t)}else o.append(e,r[e])})),o}return Object(a.a)(e)}(b,l)),y.headers=Object(r.a)(Object(r.a)({},o),n.headers),"undefined"!==typeof window||y.headers.referer||(y.headers.referer=s),Object(i.b)(b)||l||(y.headers["Content-Type"]="application/x-www-form-urlencoded"),n.fetch(e,y)})).then((function(t){if(!t.ok){var r=t.status,i=t.statusText;throw new o(i,"HTTP "+r,t,e,n)}if(h)return t;switch(b.f){case"json":case"geojson":return t.json();case"html":case"text":return t.text();default:return t.blob()}})).then((function(t){if("json"!==b.f&&"geojson"!==b.f||h)return t;var r=function(e,t,n,r,i){if(e.code>=400){var a=e.message,s=e.code;throw new o(a,s,e,t,r)}if(e.error){var c=e.error,u=(a=c.message,s=c.code,c.messageCode),d=u||s||"UNKNOWN_ERROR_CODE";if(498===s||499===s||"GWM_0003"===u||400===s&&"Unable to generate token."===a)throw i||new l(a,d,e,t,r);throw new o(a,d,e,t,r)}if("failed"===e.status||"failure"===e.status){a=void 0,s="UNKNOWN_ERROR_CODE";try{a=JSON.parse(e.statusMessage).message,s=JSON.parse(e.statusMessage).code}catch(f){a=e.statusMessage||e.message}throw new o(a,s,e,t,r)}return e}(t,e,0,n,v);if(v){var i=e.toLowerCase().split(/\/rest(\/admin)?\/services\//)[0];n.authentication.federatedServers[i]={token:[],expires:new Date(Date.now()+864e5)},v=null}return r}))}},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(5),o=n(6),s=n(0),c=(n(16),n(13),n(17),n(1)),l=n(8),u=(n(12),n(19),n(20),n(36)),d=n(33),f=n(481);var p=new Set,h=[],b=new Map,v=[0,0],y=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e))._keyToItem=new Map,i.concurrency=6,i.strategy="scale-first",i.tileInfoView=null,i}return Object(i.a)(n,[{key:"initialize",value:function(){var e=this,t=this.concurrency,n=this.process,r=this.strategy;this._queue=new f.a({concurrency:t,process:function(t,r){var i=e._keyToItem.get(t);return n(i,{signal:r})},peeker:"scale-first"===r?function(t){return e._peekByScaleFirst(t)}:function(t){return e._peekByCenterFirst(t)}})}},{key:"destroy",value:function(){this.clear(),this._queue.destroy(),this._queue=null}},{key:"length",get:function(){return this._queue?this._queue.length:0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},{key:"updating",get:function(){return this.length>0||this.onGoingCount>0}},{key:"abort",value:function(e){var t="string"==typeof e?e:e.id;this._queue.abort(t)}},{key:"clear",value:function(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}},{key:"has",value:function(e){return"string"==typeof e?this._keyToItem.has(e):this._keyToItem.has(e.id)}},{key:"isOngoing",value:function(e){var t="string"==typeof e?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}},{key:"pause",value:function(){this._queue.pause()}},{key:"push",value:function(e){var t=this,n=e.key.id;if(this.has(n))return this.get(n);var r=this._queue.push(n),i=function(){t._keyToItem.delete(n),t.notifyChange("updating")};return this._keyToItem.set(n,e),r.then(i,i),this.notifyChange("updating"),r}},{key:"reset",value:function(){this._queue.reset(),this.notifyChange("updating")}},{key:"resume",value:function(){this._queue.resume()}},{key:"_peekByScaleFirst",value:function(e){var t=this;if(!this.state)return e.values().next().value;var n=this.tileInfoView,r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;e.forEach((function(e){var n=t._keyToItem.get(e),a=t.tileInfoView.getTileScale(n.key);b.has(a)||(b.set(a,[]),r=Math.max(a,r),i=Math.min(a,i)),b.get(a).push(n.key),p.add(a)}));var a=this.state.scale;b.has(a)||(function(e,t){e.length=0,t.forEach((function(t){return e.push(t)}))}(h,p),h.sort(),a=h.reduce((function(e,t){return Math.abs(t-a)<Math.abs(e-a)?t:e}),h[0])),a=Math.min(a,r),a=Math.max(a,i);var o=b.get(a),s=n.getClosestInfoForScale(a),c=s.getColumnForX(this.state.center[0]),l=s.getRowForY(this.state.center[1]);return o.sort((function(e,t){var n=s.denormalizeCol(e.col,e.world),r=s.denormalizeCol(t.col,t.world);return Math.sqrt((c-n)*(c-n)+(l-e.row)*(l-e.row))-Math.sqrt((c-r)*(c-r)+(l-t.row)*(l-t.row))})),p.clear(),b.clear(),o[0].id}},{key:"_peekByCenterFirst",value:function(e){var t=this;if(!this.state)return e.values().next().value;var n=this.tileInfoView,r=this.state.center,i=Number.POSITIVE_INFINITY,a=null;return e.forEach((function(e){var o=t._keyToItem.get(e);n.getTileCoords(v,o.key);var s=Object(d.i)(v,r);s<i&&(i=s,a=o.key)})),a.id}}]),n}(u.a);Object(s.a)([Object(c.b)({constructOnly:!0})],y.prototype,"concurrency",void 0),Object(s.a)([Object(c.b)({constructOnly:!0})],y.prototype,"process",void 0),Object(s.a)([Object(c.b)()],y.prototype,"state",void 0),Object(s.a)([Object(c.b)({constructOnly:!0})],y.prototype,"strategy",void 0),Object(s.a)([Object(c.b)({constructOnly:!0})],y.prototype,"tileInfoView",void 0),Object(s.a)([Object(c.b)({readOnly:!0})],y.prototype,"updating",null);var m=y=Object(s.a)([Object(l.a)("esri.views.2d.tiling.TileQueue")],y);t.a=m},function(e,t,n){"use strict";var r=n(14),i=n(2),a=n(3),o=n(215),s=n(431),c=n(33);function l(e,t){e.delete(t)}var u=function(){function e(t,n,r){Object(i.a)(this,e),this.maxSize=t,this.tileInfoView=n,this.removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}return Object(a.a)(e,[{key:"has",value:function(e){return this._tilePerId.has(e)}},{key:"get",value:function(e){return this._tilePerId.get(e)}},{key:"pop",value:function(e){var t=this._tilePerId.get(e);if(!t)return null;var n=t.key.level,r=this._tileKeysPerLevel[n];l(this._tilePerId,e);for(var i=0;i<r.length;i++)if(r[i].id===e){r.splice(i,1);break}return t.visible=!0,t}},{key:"add",value:function(e){e.visible=!1;var t=e.key,n=t.id;if(!this._tilePerId.has(n)){this._tilePerId.set(n,e);var r=t.level;this._tileKeysPerLevel[r]||(this._tileKeysPerLevel[r]=[]),this._tileKeysPerLevel[r].push(t)}}},{key:"prune",value:function(e,t,n){var r=this._tilePerId.size;if(!(r<=this.maxSize)){for(var i=this._tileKeysPerLevel.length-1;r>this.maxSize&&i>=0;)i!==e&&(r=this._pruneAroundCenterTile(r,t,n,i)),i--;r>this.maxSize&&(r=this._pruneAroundCenterTile(r,t,n,e))}}},{key:"_pruneAroundCenterTile",value:function(e,t,n,r){var i=this._tileKeysPerLevel[r];if(!i||0===i.length)return e;var a=this.tileInfoView.tileInfo,o=a.size,s=a.origin,l=n*o[0],u=n*o[1],d=[0,0],f=[0,0];for(i.sort((function(e,n){return d[0]=s.x+l*(e.col+.5),d[1]=s.y-u*(e.row+.5),f[0]=s.x+l*(n.col+.5),f[1]=s.y-u*(n.row+.5),Object(c.j)(d,t)-Object(c.j)(f,t)}));i.length>0;){var p=i.pop();if(this._removeTile(p.id),--e===this.maxSize)break}return e}},{key:"_removeTile",value:function(e){var t=this._tilePerId.get(e);this.removedFunc&&this.removedFunc(t),l(this._tilePerId,e)}}]),e}(),d=new o.a(0,0,0,0),f=new Map,p=[],h=[],b=function(){function e(t){var n=this;Object(i.a)(this,e),this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,this.resampling=null==t.resampling||!!t.resampling,t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),null!=t.buffer&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new u(t.cacheSize,this.tileInfoView,(function(e){n.releaseTile(e)})))}return Object(a.a)(e,[{key:"destroy",value:function(){this.tileIndex.clear()}},{key:"update",value:function(e){var t=this,n=this.resampling,i=this.tileIndex,a=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.coveragePolicy);if(h.length=0,p.length=0,f.clear(),a){var o=this.tileInfoView.tileInfo,c=o.minScale,l=o.maxScale,u=a.spans,b=a.lodInfo,v=b.level,y=e.state,m=y.scale,g=y.center,O=y.resolution,j=!e.stationary&&m>this._previousScale;if(this._previousScale=m,this.tiles.length=0,!n&&(m>c||m<l))return this.tiles.length=0,f.clear(),i.forEach((function(e){t.releaseTile(e)})),i.clear(),h.length=0,p.length=0,f.clear(),s.a.pool.release(a),!0;i.forEach((function(e){return e.visible=!0}));var w=0,_=0;if(u.length>0){var k,x=Object(r.a)(u);try{for(x.s();!(k=x.n()).done;)for(var S=k.value,T=S.row,E=S.colFrom,C=S.colTo,P=E;P<=C;P++){w++;var I=d.set(v,T,b.normalizeCol(P),b.getWorldForColumn(P)).id;if(i.has(I)){var M=i.get(I);M.isReady?(f.set(I,M),_++):j||this._addParentTile(I,f)}else{var A=void 0;if(this._tileCache&&this._tileCache.has(I)){if(A=this._tileCache.pop(I),this.tileIndex.set(I,A),A.isReady){f.set(I,A),_++;continue}}else A=this.acquireTile(d),this.tileIndex.set(I,A);j||this._addParentTile(I,f)}}}catch(G){x.e(G)}finally{x.f()}}var R=_===w;i.forEach((function(e,n){if(d.set(n),!f.has(n)){var r=t.tileInfoView.intersects(a,d),i="purge"===t.cachePolicy?d.level!==v:d.level>v;!r||!j&&R?!i&&r||p.push(n):e.isReady?h.push(n):i&&p.push(n)}}));var L,F=Object(r.a)(h);try{for(F.s();!(L=F.n()).done;){var D=L.value,N=i.get(D);N&&N.isReady&&f.set(D,N)}}catch(G){F.e(G)}finally{F.f()}var V,z=Object(r.a)(p);try{for(z.s();!(V=z.n()).done;){var U=V.value,B=i.get(U);this._tileCache?this._tileCache.add(B):this.releaseTile(B),i.delete(U)}}catch(G){z.e(G)}finally{z.f()}return f.forEach((function(e){return t.tiles.push(e)})),i.forEach((function(e){f.has(e.key.id)||(e.visible=!1)})),this._tileCache&&this._tileCache.prune(v,g,O),s.a.pool.release(a),f.clear(),R}}},{key:"clear",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this.tileIndex;t&&n.forEach((function(t){e.releaseTile(t)})),n.clear()}},{key:"updateCacheSize",value:function(e){this._tileCache&&(this._tileCache.maxSize=e)}},{key:"_addParentTile",value:function(e,t){for(var n=e,r=null;n=this.tileInfoView.getTileParentId(n);)if(this.tileIndex.has(n)){if((r=this.tileIndex.get(n))&&r.isReady){t.has(r.key.id)||t.set(r.key.id,r);break}}else if(this._tileCache&&this._tileCache.has(n)&&(r=this._tileCache.pop(n),this.tileIndex.set(n,r),r&&r.isReady)){t.has(r.key.id)||t.set(r.key.id,r);break}}}]),e}();t.a=b},function(e,t,n){"use strict";var r=n(2),i=n(3),a=n(5),o=n(6),s=n(0),c=(n(16),n(13),n(17),n(1)),l=n(8),u=(n(12),n(19),n(20),n(36)),d=n(33),f=n(481);var p=new Set,h=[],b=new Map,v=[0,0],y=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e))._keyToItem=new Map,i.concurrency=6,i.strategy="scale-first",i.tileInfoView=null,i}return Object(i.a)(n,[{key:"initialize",value:function(){var e=this,t=this.concurrency,n=this.process;this._queue=new f.a({concurrency:t,process:function(t,r){var i=e._keyToItem.get(t);return n(i,{signal:r})},peeker:function(e){return e.values().next().value}})}},{key:"destroy",value:function(){this.clear(),this._queue.destroy(),this._queue=null}},{key:"length",get:function(){return this._queue?this._queue.length:0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},{key:"updating",get:function(){return this.length>0||this.onGoingCount>0}},{key:"abort",value:function(e){var t="string"==typeof e?e:e.id;this._queue.abort(t)}},{key:"clear",value:function(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}},{key:"has",value:function(e){return"string"==typeof e?this._keyToItem.has(e):this._keyToItem.has(e.id)}},{key:"isOngoing",value:function(e){var t="string"==typeof e?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}},{key:"pause",value:function(){this._queue.pause()}},{key:"push",value:function(e,t){var n=this,r=e.key.id+"-"+t;if(this.has(r))return this.get(r);var i=this._queue.push(r),a=function(){n._keyToItem.delete(r),n.notifyChange("updating")};return this._keyToItem.set(r,e),i.then(a,a),this.notifyChange("updating"),i}},{key:"reset",value:function(){this._queue.reset(),this.notifyChange("updating")}},{key:"resume",value:function(){this._queue.resume()}},{key:"_peekByScaleFirst",value:function(e){var t=this;if(!this.state)return e.values().next().value;var n=this.tileInfoView,r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;e.forEach((function(e){var n=t._keyToItem.get(e),a=t.tileInfoView.getTileScale(n.key);b.has(a)||(b.set(a,[]),r=Math.max(a,r),i=Math.min(a,i)),b.get(a).push(n.key),p.add(a)}));var a=this.state.scale;b.has(a)||(function(e,t){e.length=0,t.forEach((function(t){return e.push(t)}))}(h,p),h.sort(),a=h.reduce((function(e,t){return Math.abs(t-a)<Math.abs(e-a)?t:e}),h[0])),a=Math.min(a,r),a=Math.max(a,i);var o=b.get(a),s=n.getClosestInfoForScale(a),c=s.getColumnForX(this.state.center[0]),l=s.getRowForY(this.state.center[1]);return o.sort((function(e,t){var n=s.denormalizeCol(e.col,e.world),r=s.denormalizeCol(t.col,t.world);return Math.sqrt((c-n)*(c-n)+(l-e.row)*(l-e.row))-Math.sqrt((c-r)*(c-r)+(l-t.row)*(l-t.row))})),p.clear(),b.clear(),o[0].id}},{key:"_peekByCenterFirst",value:function(e){var t=this;if(!this.state)return e.values().next().value;var n=this.tileInfoView,r=this.state.center,i=Number.POSITIVE_INFINITY,a=null;return e.forEach((function(e){var o=t._keyToItem.get(e);n.getTileCoords(v,o.key);var s=Object(d.i)(v,r);s<i&&(i=s,a=o.key)})),a.id}}]),n}(u.a);Object(s.a)([Object(c.b)({constructOnly:!0})],y.prototype,"concurrency",void 0),Object(s.a)([Object(c.b)({constructOnly:!0})],y.prototype,"process",void 0),Object(s.a)([Object(c.b)()],y.prototype,"state",void 0),Object(s.a)([Object(c.b)({constructOnly:!0})],y.prototype,"strategy",void 0),Object(s.a)([Object(c.b)({constructOnly:!0})],y.prototype,"tileInfoView",void 0),Object(s.a)([Object(c.b)({readOnly:!0})],y.prototype,"updating",null);y=Object(s.a)([Object(l.a)("esri.views.2d.tiling.PagedTileQueue")],y)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=new(n(47).a)({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(47),i=n(68),a=new r.a({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});function o(e){var t=e.toJSON(),n=t.geometries,r=t.deviationUnit,o={maxDeviation:t.maxDeviation};return n&&n.length&&(o.geometries=JSON.stringify({geometryType:Object(i.c)(n[0]),geometries:n}),o.sr=JSON.stringify(n[0].spatialReference)),a.write(r,o,"deviationUnit"),o}},function(e,t,n){"use strict";var r=n(2),i=n(5),a=n(6),o=n(0),s=(n(16),n(13),n(17)),c=n(1),l=n(8),u=(n(12),n(19),n(20),n(28)),d=n(68),f=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).deviationUnit=null,i.geometries=null,i.maxDeviation=null,i}return n}(u.a);Object(o.a)([Object(c.b)({type:String,json:{write:!0}})],f.prototype,"deviationUnit",void 0),Object(o.a)([Object(c.b)({json:{read:{reader:function(e){return e?e.map((function(e){return Object(d.a)(e)})):null}},write:{writer:function(e,t){t.geometries=e.map((function(e){return e.toJSON()}))}}}})],f.prototype,"geometries",void 0),Object(o.a)([Object(c.b)({type:Number,json:{write:!0}})],f.prototype,"maxDeviation",void 0),(f=Object(o.a)([Object(l.a)("esri.tasks.support.GeneralizeParameters")],f)).from=Object(s.m)(f);var p=f;t.a=p},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=new(n(47).a)({preserveShape:"preserve-shape"});function i(e){var t=e.toJSON(),n=t.polylines,i=t.lengthUnit,a=t.geodesic,o=t.calculationType,s={};s.polylines=JSON.stringify(n);var c=e.polylines[0].spatialReference;return s.sr=c.wkid?c.wkid:JSON.stringify(c.toJSON()),i&&(s.lengthUnit=i),a&&(s.geodesic=a),o&&(s.calculationType=r.toJSON(o)),s}},function(e,t,n){"use strict";var r=n(2),i=n(5),a=n(6),o=n(0),s=(n(16),n(13),n(17)),c=n(1),l=n(8),u=(n(12),n(19),n(20),n(28)),d=n(108),f=n(68),p=(n(71),function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).calculationType=null,i.geodesic=null,i.lengthUnit=null,i.polylines=null,i}return n}(u.a));Object(o.a)([Object(c.b)({type:String,json:{write:!0}})],p.prototype,"calculationType",void 0),Object(o.a)([Object(c.b)({type:Boolean,json:{write:!0}})],p.prototype,"geodesic",void 0),Object(o.a)([Object(c.b)({json:{write:!0}})],p.prototype,"lengthUnit",void 0),Object(o.a)([Object(c.b)({type:[d.a],json:{read:{reader:function(e){return e?e.map((function(e){return Object(f.a)(e)})):null}},write:{writer:function(e,t){t.polylines=e.map((function(e){return e.toJSON()}))}}}})],p.prototype,"polylines",void 0),(p=Object(o.a)([Object(l.a)("esri.tasks.support.LengthsParameters")],p)).from=Object(s.m)(p);var h=p;t.a=h},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(47),i=n(68),a=new r.a({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),o=new r.a({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});function s(e){var t=e.toJSON(),n=t.geometries,r=t.bevelRatio,s=t.offsetDistance,c=t.offsetHow,l=t.offsetUnit,u={bevelRatio:r,offsetDistance:s};return n&&n.length&&(u.geometries=JSON.stringify({geometryType:Object(i.c)(n[0]),geometries:n}),u.sr=JSON.stringify(n[0].spatialReference)),c&&(u.offsetHow=a.toJSON(c)),l&&(u.offsetUnit=o.toJSON(l)),u}},function(e,t,n){"use strict";var r=n(2),i=n(5),a=n(6),o=n(0),s=(n(16),n(13),n(17)),c=n(1),l=n(8),u=(n(12),n(19),n(20),n(28)),d=n(68),f=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).bevelRatio=null,i.geometries=null,i.offsetDistance=null,i.offsetHow=null,i.offsetUnit=null,i}return n}(u.a);Object(o.a)([Object(c.b)({type:Number,json:{write:!0}})],f.prototype,"bevelRatio",void 0),Object(o.a)([Object(c.b)({json:{read:{reader:function(e){return e?e.map((function(e){return Object(d.a)(e)})):null}},write:{writer:function(e,t){t.geometries=e.map((function(e){return e.toJSON()}))}}}})],f.prototype,"geometries",void 0),Object(o.a)([Object(c.b)({type:Number,json:{write:!0}})],f.prototype,"offsetDistance",void 0),Object(o.a)([Object(c.b)({type:String,json:{write:!0}})],f.prototype,"offsetHow",void 0),Object(o.a)([Object(c.b)({type:String,json:{write:!0}})],f.prototype,"offsetUnit",void 0),(f=Object(o.a)([Object(l.a)("esri.tasks.support.OffsetParameters")],f)).from=Object(s.m)(f);var p=f;t.a=p},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(47),i=n(68),a=new r.a({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});function o(e){var t=e.toJSON(),n=t.geometries1,r=t.geometries2,o=t.relation,s=t.relationParameter,c={};if(n&&n.length){c.geometries1=JSON.stringify({geometryType:Object(i.c)(n[0]),geometries:n});var l=n[0].spatialReference;c.sr=l.wkid?l.wkid:JSON.stringify(l)}return r&&r.length>0&&(c.geometries2=JSON.stringify({geometryType:Object(i.c)(r[0]),geometries:r})),o&&(c.relation=a.toJSON(o)),s&&(c.relationParam=s),c}},function(e,t,n){"use strict";var r=n(2),i=n(5),a=n(6),o=n(0),s=(n(16),n(13),n(17)),c=n(1),l=n(8),u=(n(12),n(19),n(20),n(28)),d=n(68),f=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).geometries1=null,i.geometries2=null,i.relation=null,i.relationParameter=null,i}return n}(u.a);Object(o.a)([Object(c.b)({json:{read:{reader:function(e){return e?e.map((function(e){return Object(d.a)(e)})):null}},write:{writer:function(e,t){t.geometries1=e.map((function(e){return e.toJSON()}))}}}})],f.prototype,"geometries1",void 0),Object(o.a)([Object(c.b)({json:{read:{reader:function(e){return e?e.map((function(e){return Object(d.a)(e)})):null}},write:{writer:function(e,t){t.geometries2=e.map((function(e){return e.toJSON()}))}}}})],f.prototype,"geometries2",void 0),Object(o.a)([Object(c.b)({type:String,json:{write:!0}})],f.prototype,"relation",void 0),Object(o.a)([Object(c.b)({type:String,json:{write:!0}})],f.prototype,"relationParameter",void 0),(f=Object(o.a)([Object(l.a)("esri.tasks.support.RelationParameters")],f)).from=Object(s.m)(f);var p=f;t.a=p},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=new(n(47).a)({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});function i(e){var t=e.toJSON(),n=t.extendHow,i=t.polylines,a=t.trimExtendTo,o={};return o.extendHow=r.toJSON(n),i&&i.length&&(o.polylines=JSON.stringify(i),o.sr=JSON.stringify(i[0].spatialReference)),a&&(o.trimExtendTo=JSON.stringify(a)),o}},function(e,t,n){"use strict";var r=n(2),i=n(5),a=n(6),o=n(0),s=(n(16),n(13),n(17)),c=n(1),l=n(8),u=(n(12),n(19),n(20),n(28)),d=n(108),f=n(68),p=(n(71),function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).extendHow="default-curve-extension",i.polylines=null,i.trimExtendTo=null,i}return n}(u.a));Object(o.a)([Object(c.b)({type:String,json:{write:!0}})],p.prototype,"extendHow",void 0),Object(o.a)([Object(c.b)({type:[d.a],json:{read:{reader:function(e){return e?e.map((function(e){return Object(f.a)(e)})):null}},write:{writer:function(e,t){t.polylines=e.map((function(e){return e.toJSON()}))}}}})],p.prototype,"polylines",void 0),Object(o.a)([Object(c.b)({json:{read:{reader:function(e){return e?Object(f.a)(e):null}},write:{writer:function(e,t){t.trimExtendTo=e.toJSON()}}}})],p.prototype,"trimExtendTo",void 0),(p=Object(o.a)([Object(l.a)("esri.tasks.support.TrimExtendParameters")],p)).from=Object(s.m)(p);var h=p;t.a=h},function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var r=n(7),i=n.n(r),a=n(14),o=n(15),s=n(35),c=n(2),l=n(3),u=n(53),d=n(50),f=n(5),p=n(6),h=n(0),b=(n(16),n(4)),v=n(13),y=(n(17),n(1)),m=n(8),g=n(18),O=(n(12),n(19),n(20),n(24)),j=n(138),w=n(54),_=n(25),k=n(124),x=n(121),S=n(512),T=n(762),E=n(444),C=v.a.getLogger("esri.views.layers.FeatureLayerView"),P=function(e){var t=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._updatingRequiredFieldsPromise=null,e.effect=null,e.filter=null,e.timeExtent=null,e.layer=null,e.requiredFields=[],e.view=null,e}return Object(l.a)(n,[{key:"initialize",value:function(){var e=this;Object(_.a)(this,["layer.renderer","layer.labelingInfo","layer.elevationInfo.featureExpressionInfo","layer.displayField","filter","effect","layer.timeInfo","layer.floorInfo","timeExtent"],(function(){return e._handleRequiredFieldsChange()}),!0),Object(_.b)(this,"view.floors","change",(function(){return e._handleRequiredFieldsChange()}))}},{key:"availableFields",get:function(){var e=this.layer,t=this.layer.fields,n=this.requiredFields;return"outFields"in e&&e.outFields?Object(w.k)(t,[].concat(Object(s.a)(Object(w.y)(t,e.outFields)),Object(s.a)(n))):Object(w.k)(t,n)}},{key:"maximumNumberOfFeatures",get:function(){return 0},set:function(e){C.error("#maximumNumberOfFeatures=","Setting maximum number of features is not supported")}},{key:"maximumNumberOfFeaturesExceeded",get:function(){return!1}},{key:"highlight",value:function(e){throw new Error("missing implementation")}},{key:"createQuery",value:function(){var e={outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},t=Object(b.k)(this.filter)?this.filter.createQuery(e):new x.a(e);return Object(b.k)(this.timeExtent)&&(t.timeExtent=Object(b.k)(t.timeExtent)?t.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),t}},{key:"queryFeatures",value:function(e,t){throw new Error("missing implementation")}},{key:"queryObjectIds",value:function(e,t){throw new Error("missing implementation")}},{key:"queryFeatureCount",value:function(e,t){throw new Error("missing implementation")}},{key:"queryExtent",value:function(e,t){throw new Error("missing implementation")}},{key:"_loadArcadeModules",value:function(e){if(e.get("expressionInfos.length"))return Object(j.e)()}},{key:"_handleRequiredFieldsChange",value:function(){var e=this,t=this._updateRequiredFields();this._set("_updatingRequiredFieldsPromise",t),t.then((function(){e._updatingRequiredFieldsPromise===t&&e._set("_updatingRequiredFieldsPromise",null)}))}},{key:"_updateRequiredFields",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,n,r,o,s,c,l,u,d,f,p,h,v,y;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.layer&&this.view){e.next=2;break}return e.abrupt("return");case 2:return t="3d"===this.view.type,n=this.layer,r=this.layer,o=r.fields,s=r.objectIdField,c=r.renderer,l=r.displayField,u=n.featureReduction,d=new Set,e.next=13,Object(O.j)([c?c.collectRequiredFields(d,o):null,Object(w.i)(d,n),t?Object(w.d)(d,n):null,Object(b.k)(this.filter)?Object(w.h)(d,n,this.filter):null,this.effect?Object(w.h)(d,n,this.effect.filter):null,u?Object(w.e)(d,n,u):null]);case 13:f=e.sent,n.timeInfo&&this.timeExtent&&Object(w.g)(d,n.fields,[n.timeInfo.startField,n.timeInfo.endField]),"feature"===n.type&&n.floorInfo&&Object(w.g)(d,n.fields,[n.floorInfo.floorField]),p=Object(a.a)(f);try{for(p.s();!(h=p.n()).done;)(v=h.value).error&&C.error(v.error)}catch(i){p.e(i)}finally{p.f()}Object(w.f)(d,o,s),t&&l&&Object(w.f)(d,o,l),y=Array.from(d).sort(),this._set("requiredFields",y);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validateFetchPopupFeatures",value:function(e){var t=this.layer;return this.layer.popupEnabled?Object(E.a)(this.layer,e)?void 0:new g.a("featurelayerview:fetchPopupFeatures","Layer does not define a popup template",{layer:t}):new g.a("featurelayerview:fetchPopupFeatures","Popups are disabled",{layer:t})}},{key:"fetchClientPopupFeatures",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r,o,s,c,l,u,d,f,p,h,v;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=Object(b.k)(t)?t.clientGraphics:null)&&0!==n.length){e.next=3;break}return e.abrupt("return",Promise.resolve([]));case 3:if(r=[],o=[],s=this.layer,c=Object(E.a)(s,t),Object(b.k)(c)){e.next=6;break}return e.abrupt("return",Promise.resolve([]));case 6:return e.next=8,this._loadArcadeModules(c);case 8:return l=e.sent,u=l&&l.arcadeUtils.hasGeometryOperations(c),e.next=12,this.createPopupQuery(t);case 12:d=e.sent,f=Object(w.y)(s.fields,d.outFields),p=Object(a.a)(n);try{for(p.s();!(h=p.n()).done;)v=h.value,u||!Object(w.j)(f,v)?o.push(v):r.push(v)}catch(i){p.e(i)}finally{p.f()}return e.abrupt("return","stream"===s.type||0===o.length?Promise.resolve(r):(d.objectIds=o.map((function(e){return e.attributes[s.objectIdField]})),s.queryFeatures(d).then((function(e){return r.concat(e.features)})).catch((function(){return o}))));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createPopupQuery",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r,a,o,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.layer,r=n.createQuery(),a=Object(E.a)(n,t),e.t0=Object(b.k)(a),!e.t0){e.next=8;break}return e.next=7,this._loadArcadeModules(a);case 7:e.t0=e.sent;case 8:return o=e.t0,s=Object(b.k)(a)&&o&&o.arcadeUtils.hasGeometryOperations(a),c=!("point"!==n.geometryType&&!s),r.returnGeometry=c,r.returnZ=c,r.returnM=c,e.next=16,Object(E.b)(this.layer,a);case 16:return r.outFields=e.sent,r.outSpatialReference=this.view.spatialReference,e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"canResume",value:function(){return!!Object(u.a)(Object(d.a)(n.prototype),"canResume",this).call(this)&&(!Object(b.k)(this.timeExtent)||!this.timeExtent.isEmpty)}}]),n}(e);return Object(h.a)([Object(y.b)()],t.prototype,"_updatingRequiredFieldsPromise",void 0),Object(h.a)([Object(y.b)({readOnly:!0})],t.prototype,"availableFields",null),Object(h.a)([Object(y.b)({type:T.a})],t.prototype,"effect",void 0),Object(h.a)([Object(y.b)({type:S.a})],t.prototype,"filter",void 0),Object(h.a)([Object(y.b)(k.a)],t.prototype,"timeExtent",void 0),Object(h.a)([Object(y.b)()],t.prototype,"layer",void 0),Object(h.a)([Object(y.b)({type:Number})],t.prototype,"maximumNumberOfFeatures",null),Object(h.a)([Object(y.b)({readOnly:!0,type:Boolean})],t.prototype,"maximumNumberOfFeaturesExceeded",null),Object(h.a)([Object(y.b)({readOnly:!0})],t.prototype,"requiredFields",void 0),Object(h.a)([Object(y.b)()],t.prototype,"suspended",void 0),Object(h.a)([Object(y.b)()],t.prototype,"view",void 0),t=Object(h.a)([Object(m.a)("esri.views.layers.FeatureLayerView")],t),t}},,,,,function(e,t,n){"use strict";var r=n(660),i="function"===typeof Symbol&&Symbol.for,a=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,c=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,u=i?Symbol.for("react.provider"):60109,d=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,h=i?Symbol.for("react.memo"):60115,b=i?Symbol.for("react.lazy"):60116,v="function"===typeof Symbol&&Symbol.iterator;function y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g={};function O(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function j(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}O.prototype.isReactComponent={},O.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(y(85));this.updater.enqueueSetState(this,e,t,"setState")},O.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},j.prototype=O.prototype;var _=w.prototype=new j;_.constructor=w,r(_,O.prototype),_.isPureReactComponent=!0;var k={current:null},x=Object.prototype.hasOwnProperty,S={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,n){var r,i={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,r)&&!S.hasOwnProperty(r)&&(i[r]=t[r]);var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===i[r]&&(i[r]=c[r]);return{$$typeof:a,type:e,key:o,ref:s,props:i,_owner:k.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var C=/\/+/g,P=[];function I(e,t,n,r){if(P.length){var i=P.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function M(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>P.length&&P.push(e)}function A(e,t,n,r){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var s=!1;if(null===e)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case a:case o:s=!0}}if(s)return n(r,e,""===t?"."+L(e,0):t),1;if(s=0,t=""===t?".":t+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=t+L(i=e[c],c);s+=A(i,l,n,r)}else if(null===e||"object"!==typeof e?l=null:l="function"===typeof(l=v&&e[v]||e["@@iterator"])?l:null,"function"===typeof l)for(e=l.call(e),c=0;!(i=e.next()).done;)s+=A(i=i.value,l=t+L(i,c++),n,r);else if("object"===i)throw n=""+e,Error(y(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return s}function R(e,t,n){return null==e?0:A(e,"",t,n)}function L(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function F(e,t){e.func.call(e.context,t,e.count++)}function D(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?N(e,r,n,(function(e){return e})):null!=e&&(E(e)&&(e=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(C,"$&/")+"/")+n)),r.push(e))}function N(e,t,n,r,i){var a="";null!=n&&(a=(""+n).replace(C,"$&/")+"/"),R(e,D,t=I(t,a,r,i)),M(t)}var V={current:null};function z(){var e=V.current;if(null===e)throw Error(y(321));return e}var U={ReactCurrentDispatcher:V,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:k,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return N(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;R(e,F,t=I(null,null,t,n)),M(t)},count:function(e){return R(e,(function(){return null}),null)},toArray:function(e){var t=[];return N(e,t,null,(function(e){return e})),t},only:function(e){if(!E(e))throw Error(y(143));return e}},t.Component=O,t.Fragment=s,t.Profiler=l,t.PureComponent=w,t.StrictMode=c,t.Suspense=p,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(y(267,e));var i=r({},e.props),o=e.key,s=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,c=k.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)x.call(t,u)&&!S.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];i.children=l}return{$$typeof:a,type:e.type,key:o,ref:s,props:i,_owner:c}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:d,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:f,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:b,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return z().useCallback(e,t)},t.useContext=function(e,t){return z().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return z().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return z().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return z().useLayoutEffect(e,t)},t.useMemo=function(e,t){return z().useMemo(e,t)},t.useReducer=function(e,t,n){return z().useReducer(e,t,n)},t.useRef=function(e){return z().useRef(e)},t.useState=function(e){return z().useState(e)},t.version="16.14.0"},function(e,t,n){"use strict";var r=n(21),i=n(660),a=n(812);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));function s(e,t,n,r,i,a,o,s,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var c=!1,l=null,u=!1,d=null,f={onError:function(e){c=!0,l=e}};function p(e,t,n,r,i,a,o,u,d){c=!1,l=null,s.apply(f,arguments)}var h=null,b=null,v=null;function y(e,t,n){var r=e.type||"unknown-event";e.currentTarget=v(n),function(e,t,n,r,i,a,s,f,h){if(p.apply(this,arguments),c){if(!c)throw Error(o(198));var b=l;c=!1,l=null,u||(u=!0,d=b)}}(r,t,void 0,e),e.currentTarget=null}var m=null,g={};function O(){if(m)for(var e in g){var t=g[e],n=m.indexOf(e);if(!(-1<n))throw Error(o(96,e));if(!w[n]){if(!t.extractEvents)throw Error(o(97,e));for(var r in w[n]=t,n=t.eventTypes){var i=void 0,a=n[r],s=t,c=r;if(_.hasOwnProperty(c))throw Error(o(99,c));_[c]=a;var l=a.phasedRegistrationNames;if(l){for(i in l)l.hasOwnProperty(i)&&j(l[i],s,c);i=!0}else a.registrationName?(j(a.registrationName,s,c),i=!0):i=!1;if(!i)throw Error(o(98,r,e))}}}}function j(e,t,n){if(k[e])throw Error(o(100,e));k[e]=t,x[e]=t.eventTypes[n].dependencies}var w=[],_={},k={},x={};function S(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!g.hasOwnProperty(t)||g[t]!==r){if(g[t])throw Error(o(102,t));g[t]=r,n=!0}}n&&O()}var T=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),E=null,C=null,P=null;function I(e){if(e=b(e)){if("function"!==typeof E)throw Error(o(280));var t=e.stateNode;t&&(t=h(t),E(e.stateNode,e.type,t))}}function M(e){C?P?P.push(e):P=[e]:C=e}function A(){if(C){var e=C,t=P;if(P=C=null,I(e),t)for(e=0;e<t.length;e++)I(t[e])}}function R(e,t){return e(t)}function L(e,t,n,r,i){return e(t,n,r,i)}function F(){}var D=R,N=!1,V=!1;function z(){null===C&&null===P||(F(),A())}function U(e,t,n){if(V)return e(t,n);V=!0;try{return D(e,t,n)}finally{V=!1,z()}}var B=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,G=Object.prototype.hasOwnProperty,q={},H={};function W(e,t,n,r,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a}var $={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){$[e]=new W(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];$[t]=new W(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){$[e]=new W(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){$[e]=new W(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){$[e]=new W(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){$[e]=new W(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){$[e]=new W(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){$[e]=new W(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){$[e]=new W(e,5,!1,e.toLowerCase(),null,!1)}));var J=/[\-:]([a-z])/g;function Y(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(J,Y);$[t]=new W(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(J,Y);$[t]=new W(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(J,Y);$[t]=new W(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){$[e]=new W(e,1,!1,e.toLowerCase(),null,!1)})),$.xlinkHref=new W("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){$[e]=new W(e,1,!1,e.toLowerCase(),null,!0)}));var K=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Z(e,t,n,r){var i=$.hasOwnProperty(t)?$[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!G.call(H,e)||!G.call(q,e)&&(B.test(e)?H[e]=!0:(q[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}K.hasOwnProperty("ReactCurrentDispatcher")||(K.ReactCurrentDispatcher={current:null}),K.hasOwnProperty("ReactCurrentBatchConfig")||(K.ReactCurrentBatchConfig={suspense:null});var X=/^(.*)[\\\/]/,Q="function"===typeof Symbol&&Symbol.for,ee=Q?Symbol.for("react.element"):60103,te=Q?Symbol.for("react.portal"):60106,ne=Q?Symbol.for("react.fragment"):60107,re=Q?Symbol.for("react.strict_mode"):60108,ie=Q?Symbol.for("react.profiler"):60114,ae=Q?Symbol.for("react.provider"):60109,oe=Q?Symbol.for("react.context"):60110,se=Q?Symbol.for("react.concurrent_mode"):60111,ce=Q?Symbol.for("react.forward_ref"):60112,le=Q?Symbol.for("react.suspense"):60113,ue=Q?Symbol.for("react.suspense_list"):60120,de=Q?Symbol.for("react.memo"):60115,fe=Q?Symbol.for("react.lazy"):60116,pe=Q?Symbol.for("react.block"):60121,he="function"===typeof Symbol&&Symbol.iterator;function be(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=he&&e[he]||e["@@iterator"])?e:null}function ve(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case ie:return"Profiler";case re:return"StrictMode";case le:return"Suspense";case ue:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case oe:return"Context.Consumer";case ae:return"Context.Provider";case ce:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case de:return ve(e.type);case pe:return ve(e.render);case fe:if(e=1===e._status?e._result:null)return ve(e)}return null}function ye(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,a=ve(e.type);n=null,r&&(n=ve(r.type)),r=a,a="",i?a=" (at "+i.fileName.replace(X,"")+":"+i.lineNumber+")":n&&(a=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+a}t+=n,e=e.return}while(e);return t}function me(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function ge(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Oe(e){e._valueTracker||(e._valueTracker=function(e){var t=ge(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function je(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ge(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function we(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function _e(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=me(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function ke(e,t){null!=(t=t.checked)&&Z(e,"checked",t,!1)}function xe(e,t){ke(e,t);var n=me(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Te(e,t.type,n):t.hasOwnProperty("defaultValue")&&Te(e,t.type,me(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Se(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Te(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Ee(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Ce(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+me(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Pe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:me(n)}}function Me(e,t){var n=me(t.value),r=me(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Re="http://www.w3.org/1999/xhtml",Le="http://www.w3.org/2000/svg";function Fe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function De(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Fe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Ne,Ve,ze=(Ve=function(e,t){if(e.namespaceURI!==Le||"innerHTML"in e)e.innerHTML=t;else{for((Ne=Ne||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ne.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return Ve(e,t)}))}:Ve);function Ue(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function Be(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ge={animationend:Be("Animation","AnimationEnd"),animationiteration:Be("Animation","AnimationIteration"),animationstart:Be("Animation","AnimationStart"),transitionend:Be("Transition","TransitionEnd")},qe={},He={};function We(e){if(qe[e])return qe[e];if(!Ge[e])return e;var t,n=Ge[e];for(t in n)if(n.hasOwnProperty(t)&&t in He)return qe[e]=n[t];return e}T&&(He=document.createElement("div").style,"AnimationEvent"in window||(delete Ge.animationend.animation,delete Ge.animationiteration.animation,delete Ge.animationstart.animation),"TransitionEvent"in window||delete Ge.transitionend.transition);var $e=We("animationend"),Je=We("animationiteration"),Ye=We("animationstart"),Ke=We("transitionend"),Ze="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xe=new("function"===typeof WeakMap?WeakMap:Map);function Qe(e){var t=Xe.get(e);return void 0===t&&(t=new Map,Xe.set(e,t)),t}function et(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function tt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function nt(e){if(et(e)!==e)throw Error(o(188))}function rt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=et(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return nt(i),e;if(a===r)return nt(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,c=i.child;c;){if(c===n){s=!0,n=i,r=a;break}if(c===r){s=!0,r=i,n=a;break}c=c.sibling}if(!s){for(c=a.child;c;){if(c===n){s=!0,n=a,r=i;break}if(c===r){s=!0,r=a,n=i;break}c=c.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function it(e,t){if(null==t)throw Error(o(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function at(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var ot=null;function st(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)y(e,t[r],n[r]);else t&&y(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function ct(e){if(null!==e&&(ot=it(ot,e)),e=ot,ot=null,e){if(at(e,st),ot)throw Error(o(95));if(u)throw e=d,u=!1,d=null,e}}function lt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ut(e){if(!T)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var dt=[];function ft(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>dt.length&&dt.push(e)}function pt(e,t,n,r){if(dt.length){var i=dt.pop();return i.topLevelType=e,i.eventSystemFlags=r,i.nativeEvent=t,i.targetInst=n,i}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function ht(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=In(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=lt(e.nativeEvent);r=e.topLevelType;var a=e.nativeEvent,o=e.eventSystemFlags;0===n&&(o|=64);for(var s=null,c=0;c<w.length;c++){var l=w[c];l&&(l=l.extractEvents(r,t,a,i,o))&&(s=it(s,l))}ct(s)}}function bt(e,t,n){if(!n.has(e)){switch(e){case"scroll":Yt(t,"scroll",!0);break;case"focus":case"blur":Yt(t,"focus",!0),Yt(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ut(e)&&Yt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Ze.indexOf(e)&&Jt(e,t)}n.set(e,null)}}var vt,yt,mt,gt=!1,Ot=[],jt=null,wt=null,_t=null,kt=new Map,xt=new Map,St=[],Tt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Et="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Ct(e,t,n,r,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i,container:r}}function Pt(e,t){switch(e){case"focus":case"blur":jt=null;break;case"dragenter":case"dragleave":wt=null;break;case"mouseover":case"mouseout":_t=null;break;case"pointerover":case"pointerout":kt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xt.delete(t.pointerId)}}function It(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=Ct(t,n,r,i,a),null!==t&&(null!==(t=Mn(t))&&yt(t)),e):(e.eventSystemFlags|=r,e)}function Mt(e){var t=In(e.target);if(null!==t){var n=et(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=tt(n)))return e.blockedOn=t,void a.unstable_runWithPriority(e.priority,(function(){mt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function At(e){if(null!==e.blockedOn)return!1;var t=Qt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=Mn(t);return null!==n&&yt(n),e.blockedOn=t,!1}return!0}function Rt(e,t,n){At(e)&&n.delete(t)}function Lt(){for(gt=!1;0<Ot.length;){var e=Ot[0];if(null!==e.blockedOn){null!==(e=Mn(e.blockedOn))&&vt(e);break}var t=Qt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:Ot.shift()}null!==jt&&At(jt)&&(jt=null),null!==wt&&At(wt)&&(wt=null),null!==_t&&At(_t)&&(_t=null),kt.forEach(Rt),xt.forEach(Rt)}function Ft(e,t){e.blockedOn===t&&(e.blockedOn=null,gt||(gt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Lt)))}function Dt(e){function t(t){return Ft(t,e)}if(0<Ot.length){Ft(Ot[0],e);for(var n=1;n<Ot.length;n++){var r=Ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==jt&&Ft(jt,e),null!==wt&&Ft(wt,e),null!==_t&&Ft(_t,e),kt.forEach(t),xt.forEach(t),n=0;n<St.length;n++)(r=St[n]).blockedOn===e&&(r.blockedOn=null);for(;0<St.length&&null===(n=St[0]).blockedOn;)Mt(n),null===n.blockedOn&&St.shift()}var Nt={},Vt=new Map,zt=new Map,Ut=["abort","abort",$e,"animationEnd",Je,"animationIteration",Ye,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ke,"transitionEnd","waiting","waiting"];function Bt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],a="on"+(i[0].toUpperCase()+i.slice(1));a={phasedRegistrationNames:{bubbled:a,captured:a+"Capture"},dependencies:[r],eventPriority:t},zt.set(r,t),Vt.set(r,a),Nt[i]=a}}Bt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Bt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Bt(Ut,2);for(var Gt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),qt=0;qt<Gt.length;qt++)zt.set(Gt[qt],0);var Ht=a.unstable_UserBlockingPriority,Wt=a.unstable_runWithPriority,$t=!0;function Jt(e,t){Yt(t,e,!1)}function Yt(e,t,n){var r=zt.get(t);switch(void 0===r?2:r){case 0:r=Kt.bind(null,t,1,e);break;case 1:r=Zt.bind(null,t,1,e);break;default:r=Xt.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Kt(e,t,n,r){N||F();var i=Xt,a=N;N=!0;try{L(i,e,t,n,r)}finally{(N=a)||z()}}function Zt(e,t,n,r){Wt(Ht,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){if($t)if(0<Ot.length&&-1<Tt.indexOf(e))e=Ct(null,e,t,n,r),Ot.push(e);else{var i=Qt(e,t,n,r);if(null===i)Pt(e,r);else if(-1<Tt.indexOf(e))e=Ct(i,e,t,n,r),Ot.push(e);else if(!function(e,t,n,r,i){switch(t){case"focus":return jt=It(jt,e,t,n,r,i),!0;case"dragenter":return wt=It(wt,e,t,n,r,i),!0;case"mouseover":return _t=It(_t,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return kt.set(a,It(kt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,xt.set(a,It(xt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r)){Pt(e,r),e=pt(e,r,null,t);try{U(ht,e)}finally{ft(e)}}}}function Qt(e,t,n,r){if(null!==(n=In(n=lt(r)))){var i=et(n);if(null===i)n=null;else{var a=i.tag;if(13===a){if(null!==(n=tt(i)))return n;n=null}else if(3===a){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}e=pt(e,r,n,t);try{U(ht,e)}finally{ft(e)}return null}var en={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];function nn(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||en.hasOwnProperty(e)&&en[e]?(""+t).trim():t+"px"}function rn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=nn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(en).forEach((function(e){tn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),en[t]=en[e]}))}));var an=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function on(e,t){if(t){if(an[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62,""))}}function sn(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cn=Re;function ln(e,t){var n=Qe(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=x[t];for(var r=0;r<t.length;r++)bt(t[r],e,n)}function un(){}function dn(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function fn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pn(e,t){var n,r=fn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=fn(r)}}function hn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function bn(){for(var e=window,t=dn();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=dn((e=t.contentWindow).document)}return t}function vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yn="$?",mn="$!",gn=null,On=null;function jn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function wn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var _n="function"===typeof setTimeout?setTimeout:void 0,kn="function"===typeof clearTimeout?clearTimeout:void 0;function xn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Sn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||n===mn||n===yn){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Tn=Math.random().toString(36).slice(2),En="__reactInternalInstance$"+Tn,Cn="__reactEventHandlers$"+Tn,Pn="__reactContainere$"+Tn;function In(e){var t=e[En];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pn]||n[En]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Sn(e);null!==e;){if(n=e[En])return n;e=Sn(e)}return t}n=(e=n).parentNode}return null}function Mn(e){return!(e=e[En]||e[Pn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function An(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function Rn(e){return e[Cn]||null}function Ln(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Fn(e,t){var n=e.stateNode;if(!n)return null;var r=h(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}function Dn(e,t,n){(t=Fn(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function Nn(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Ln(t);for(t=n.length;0<t--;)Dn(n[t],"captured",e);for(t=0;t<n.length;t++)Dn(n[t],"bubbled",e)}}function Vn(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=Fn(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function zn(e){e&&e.dispatchConfig.registrationName&&Vn(e._targetInst,null,e)}function Un(e){at(e,Nn)}var Bn=null,Gn=null,qn=null;function Hn(){if(qn)return qn;var e,t,n=Gn,r=n.length,i="value"in Bn?Bn.value:Bn.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return qn=i.slice(e,1<t?1-t:void 0)}function Wn(){return!0}function $n(){return!1}function Jn(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Wn:$n,this.isPropagationStopped=$n,this}function Yn(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Kn(e){if(!(e instanceof this))throw Error(o(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Zn(e){e.eventPool=[],e.getPooled=Yn,e.release=Kn}i(Jn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Wn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Wn)},persist:function(){this.isPersistent=Wn},isPersistent:$n,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=$n,this._dispatchInstances=this._dispatchListeners=null}}),Jn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Jn.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var a=new t;return i(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,Zn(n),n},Zn(Jn);var Xn=Jn.extend({data:null}),Qn=Jn.extend({data:null}),er=[9,13,27,32],tr=T&&"CompositionEvent"in window,nr=null;T&&"documentMode"in document&&(nr=document.documentMode);var rr=T&&"TextEvent"in window&&!nr,ir=T&&(!tr||nr&&8<nr&&11>=nr),ar=String.fromCharCode(32),or={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},sr=!1;function cr(e,t){switch(e){case"keyup":return-1!==er.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function lr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var ur=!1;var dr={eventTypes:or,extractEvents:function(e,t,n,r){var i;if(tr)e:{switch(e){case"compositionstart":var a=or.compositionStart;break e;case"compositionend":a=or.compositionEnd;break e;case"compositionupdate":a=or.compositionUpdate;break e}a=void 0}else ur?cr(e,n)&&(a=or.compositionEnd):"keydown"===e&&229===n.keyCode&&(a=or.compositionStart);return a?(ir&&"ko"!==n.locale&&(ur||a!==or.compositionStart?a===or.compositionEnd&&ur&&(i=Hn()):(Gn="value"in(Bn=r)?Bn.value:Bn.textContent,ur=!0)),a=Xn.getPooled(a,t,n,r),i?a.data=i:null!==(i=lr(n))&&(a.data=i),Un(a),i=a):i=null,(e=rr?function(e,t){switch(e){case"compositionend":return lr(t);case"keypress":return 32!==t.which?null:(sr=!0,ar);case"textInput":return(e=t.data)===ar&&sr?null:e;default:return null}}(e,n):function(e,t){if(ur)return"compositionend"===e||!tr&&cr(e,t)?(e=Hn(),qn=Gn=Bn=null,ur=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ir&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=Qn.getPooled(or.beforeInput,t,n,r)).data=e,Un(t)):t=null,null===i?t:null===t?i:[i,t]}},fr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!fr[e.type]:"textarea"===t}var hr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function br(e,t,n){return(e=Jn.getPooled(hr.change,e,t,n)).type="change",M(n),Un(e),e}var vr=null,yr=null;function mr(e){ct(e)}function gr(e){if(je(An(e)))return e}function Or(e,t){if("change"===e)return t}var jr=!1;function wr(){vr&&(vr.detachEvent("onpropertychange",_r),yr=vr=null)}function _r(e){if("value"===e.propertyName&&gr(yr))if(e=br(yr,e,lt(e)),N)ct(e);else{N=!0;try{R(mr,e)}finally{N=!1,z()}}}function kr(e,t,n){"focus"===e?(wr(),yr=n,(vr=t).attachEvent("onpropertychange",_r)):"blur"===e&&wr()}function xr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return gr(yr)}function Sr(e,t){if("click"===e)return gr(t)}function Tr(e,t){if("input"===e||"change"===e)return gr(t)}T&&(jr=ut("input")&&(!document.documentMode||9<document.documentMode));var Er={eventTypes:hr,_isInputEventSupported:jr,extractEvents:function(e,t,n,r){var i=t?An(t):window,a=i.nodeName&&i.nodeName.toLowerCase();if("select"===a||"input"===a&&"file"===i.type)var o=Or;else if(pr(i))if(jr)o=Tr;else{o=xr;var s=kr}else(a=i.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Sr);if(o&&(o=o(e,t)))return br(o,n,r);s&&s(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Te(i,"number",i.value)}},Cr=Jn.extend({view:null,detail:null}),Pr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ir(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Pr[e])&&!!t[e]}function Mr(){return Ir}var Ar=0,Rr=0,Lr=!1,Fr=!1,Dr=Cr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Mr,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Ar;return Ar=e.screenX,Lr?"mousemove"===e.type?e.screenX-t:0:(Lr=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Rr;return Rr=e.screenY,Fr?"mousemove"===e.type?e.screenY-t:0:(Fr=!0,0)}}),Nr=Dr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Vr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},zr={eventTypes:Vr,extractEvents:function(e,t,n,r,i){var a="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(a&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!o&&!a)return null;(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,o)?(o=t,null!==(t=(t=n.relatedTarget||n.toElement)?In(t):null)&&(t!==et(t)||5!==t.tag&&6!==t.tag)&&(t=null)):o=null;if(o===t)return null;if("mouseout"===e||"mouseover"===e)var s=Dr,c=Vr.mouseLeave,l=Vr.mouseEnter,u="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=Nr,c=Vr.pointerLeave,l=Vr.pointerEnter,u="pointer");if(e=null==o?a:An(o),a=null==t?a:An(t),(c=s.getPooled(c,o,n,r)).type=u+"leave",c.target=e,c.relatedTarget=a,(n=s.getPooled(l,t,n,r)).type=u+"enter",n.target=a,n.relatedTarget=e,u=t,(r=o)&&u)e:{for(l=u,o=0,e=s=r;e;e=Ln(e))o++;for(e=0,t=l;t;t=Ln(t))e++;for(;0<o-e;)s=Ln(s),o--;for(;0<e-o;)l=Ln(l),e--;for(;o--;){if(s===l||s===l.alternate)break e;s=Ln(s),l=Ln(l)}s=null}else s=null;for(l=s,s=[];r&&r!==l&&(null===(o=r.alternate)||o!==l);)s.push(r),r=Ln(r);for(r=[];u&&u!==l&&(null===(o=u.alternate)||o!==l);)r.push(u),u=Ln(u);for(u=0;u<s.length;u++)Vn(s[u],"bubbled",c);for(u=r.length;0<u--;)Vn(r[u],"captured",n);return 0===(64&i)?[c]:[c,n]}};var Ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Br=Object.prototype.hasOwnProperty;function Gr(e,t){if(Ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Br.call(t,n[r])||!Ur(e[n[r]],t[n[r]]))return!1;return!0}var qr=T&&"documentMode"in document&&11>=document.documentMode,Hr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Wr=null,$r=null,Jr=null,Yr=!1;function Kr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Yr||null==Wr||Wr!==dn(n)?null:("selectionStart"in(n=Wr)&&vn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Jr&&Gr(Jr,n)?null:(Jr=n,(e=Jn.getPooled(Hr.select,$r,e,t)).type="select",e.target=Wr,Un(e),e))}var Zr={eventTypes:Hr,extractEvents:function(e,t,n,r,i,a){if(!(a=!(i=a||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{i=Qe(i),a=x.onSelect;for(var o=0;o<a.length;o++)if(!i.has(a[o])){i=!1;break e}i=!0}a=!i}if(a)return null;switch(i=t?An(t):window,e){case"focus":(pr(i)||"true"===i.contentEditable)&&(Wr=i,$r=t,Jr=null);break;case"blur":Jr=$r=Wr=null;break;case"mousedown":Yr=!0;break;case"contextmenu":case"mouseup":case"dragend":return Yr=!1,Kr(n,r);case"selectionchange":if(qr)break;case"keydown":case"keyup":return Kr(n,r)}return null}},Xr=Jn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Qr=Jn.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ei=Cr.extend({relatedTarget:null});function ti(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var ni={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ri={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ii=Cr.extend({key:function(e){if(e.key){var t=ni[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ti(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ri[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Mr,charCode:function(e){return"keypress"===e.type?ti(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ti(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ai=Dr.extend({dataTransfer:null}),oi=Cr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Mr}),si=Jn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ci=Dr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),li={eventTypes:Nt,extractEvents:function(e,t,n,r){var i=Vt.get(e);if(!i)return null;switch(e){case"keypress":if(0===ti(n))return null;case"keydown":case"keyup":e=ii;break;case"blur":case"focus":e=ei;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Dr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=ai;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=oi;break;case $e:case Je:case Ye:e=Xr;break;case Ke:e=si;break;case"scroll":e=Cr;break;case"wheel":e=ci;break;case"copy":case"cut":case"paste":e=Qr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Nr;break;default:e=Jn}return Un(t=e.getPooled(i,t,n,r)),t}};if(m)throw Error(o(101));m=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),O(),h=Rn,b=Mn,v=An,S({SimpleEventPlugin:li,EnterLeaveEventPlugin:zr,ChangeEventPlugin:Er,SelectEventPlugin:Zr,BeforeInputEventPlugin:dr});var ui=[],di=-1;function fi(e){0>di||(e.current=ui[di],ui[di]=null,di--)}function pi(e,t){di++,ui[di]=e.current,e.current=t}var hi={},bi={current:hi},vi={current:!1},yi=hi;function mi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function gi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){fi(vi),fi(bi)}function ji(e,t,n){if(bi.current!==hi)throw Error(o(168));pi(bi,t),pi(vi,n)}function wi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,ve(t)||"Unknown",a));return i({},n,{},r)}function _i(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,yi=bi.current,pi(bi,e),pi(vi,vi.current),!0}function ki(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=wi(e,t,yi),r.__reactInternalMemoizedMergedChildContext=e,fi(vi),fi(bi),pi(bi,e)):fi(vi),pi(vi,n)}var xi=a.unstable_runWithPriority,Si=a.unstable_scheduleCallback,Ti=a.unstable_cancelCallback,Ei=a.unstable_requestPaint,Ci=a.unstable_now,Pi=a.unstable_getCurrentPriorityLevel,Ii=a.unstable_ImmediatePriority,Mi=a.unstable_UserBlockingPriority,Ai=a.unstable_NormalPriority,Ri=a.unstable_LowPriority,Li=a.unstable_IdlePriority,Fi={},Di=a.unstable_shouldYield,Ni=void 0!==Ei?Ei:function(){},Vi=null,zi=null,Ui=!1,Bi=Ci(),Gi=1e4>Bi?Ci:function(){return Ci()-Bi};function qi(){switch(Pi()){case Ii:return 99;case Mi:return 98;case Ai:return 97;case Ri:return 96;case Li:return 95;default:throw Error(o(332))}}function Hi(e){switch(e){case 99:return Ii;case 98:return Mi;case 97:return Ai;case 96:return Ri;case 95:return Li;default:throw Error(o(332))}}function Wi(e,t){return e=Hi(e),xi(e,t)}function $i(e,t,n){return e=Hi(e),Si(e,t,n)}function Ji(e){return null===Vi?(Vi=[e],zi=Si(Ii,Ki)):Vi.push(e),Fi}function Yi(){if(null!==zi){var e=zi;zi=null,Ti(e)}Ki()}function Ki(){if(!Ui&&null!==Vi){Ui=!0;var e=0;try{var t=Vi;Wi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Vi=null}catch(n){throw null!==Vi&&(Vi=Vi.slice(e+1)),Si(Ii,Yi),n}finally{Ui=!1}}}function Zi(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function Xi(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var Qi={current:null},ea=null,ta=null,na=null;function ra(){na=ta=ea=null}function ia(e){var t=Qi.current;fi(Qi),e.type._context._currentValue=t}function aa(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function oa(e,t){ea=e,na=ta=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Ro=!0),e.firstContext=null)}function sa(e,t){if(na!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(na=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ta){if(null===ea)throw Error(o(308));ta=t,ea.dependencies={expirationTime:0,firstContext:t,responders:null}}else ta=ta.next=t;return e._currentValue}var ca=!1;function la(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function ua(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function da(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function fa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function pa(e,t){var n=e.alternate;null!==n&&ua(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function ha(e,t,n,r){var a=e.updateQueue;ca=!1;var o=a.baseQueue,s=a.shared.pending;if(null!==s){if(null!==o){var c=o.next;o.next=s.next,s.next=c}o=s,a.shared.pending=null,null!==(c=e.alternate)&&(null!==(c=c.updateQueue)&&(c.baseQueue=s))}if(null!==o){c=o.next;var l=a.baseState,u=0,d=null,f=null,p=null;if(null!==c)for(var h=c;;){if((s=h.expirationTime)<r){var b={expirationTime:h.expirationTime,suspenseConfig:h.suspenseConfig,tag:h.tag,payload:h.payload,callback:h.callback,next:null};null===p?(f=p=b,d=l):p=p.next=b,s>u&&(u=s)}else{null!==p&&(p=p.next={expirationTime:1073741823,suspenseConfig:h.suspenseConfig,tag:h.tag,payload:h.payload,callback:h.callback,next:null}),pc(s,h.suspenseConfig);e:{var v=e,y=h;switch(s=t,b=n,y.tag){case 1:if("function"===typeof(v=y.payload)){l=v.call(b,l,s);break e}l=v;break e;case 3:v.effectTag=-4097&v.effectTag|64;case 0:if(null===(s="function"===typeof(v=y.payload)?v.call(b,l,s):v)||void 0===s)break e;l=i({},l,s);break e;case 2:ca=!0}}null!==h.callback&&(e.effectTag|=32,null===(s=a.effects)?a.effects=[h]:s.push(h))}if(null===(h=h.next)||h===c){if(null===(s=a.shared.pending))break;h=o.next=s.next,s.next=c,a.baseQueue=o=s,a.shared.pending=null}}null===p?d=l:p.next=f,a.baseState=d,a.baseQueue=p,hc(u),e.expirationTime=u,e.memoizedState=l}}function ba(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!==typeof r)throw Error(o(191,r));r.call(i)}}}var va=K.ReactCurrentBatchConfig,ya=(new r.Component).refs;function ma(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var ga={isMounted:function(e){return!!(e=e._reactInternalFiber)&&et(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=ec(),i=va.suspense;(i=da(r=tc(r,e,i),i)).payload=t,void 0!==n&&null!==n&&(i.callback=n),fa(e,i),nc(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=ec(),i=va.suspense;(i=da(r=tc(r,e,i),i)).tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),fa(e,i),nc(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=ec(),r=va.suspense;(r=da(n=tc(n,e,r),r)).tag=2,void 0!==t&&null!==t&&(r.callback=t),fa(e,r),nc(e,n)}};function Oa(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!Gr(n,r)||!Gr(i,a))}function ja(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"===typeof a&&null!==a?a=sa(a):(i=gi(t)?yi:bi.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?mi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ga,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ga.enqueueReplaceState(t,t.state,null)}function _a(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ya,la(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=sa(a):(a=gi(t)?yi:bi.current,i.context=mi(e,a)),ha(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ma(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ga.enqueueReplaceState(i,i.state,null),ha(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var ka=Array.isArray;function xa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===ya&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Sa(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Ta(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Dc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=xa(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=xa(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Nc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Fc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Dc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=xa(e,null,t),n.return=e,n;case te:return(t=Nc(t,e.mode,n)).return=e,t}if(ka(t)||be(t))return(t=Fc(t,e.mode,n,null)).return=e,t;Sa(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===i?n.type===ne?d(e,t,n.props.children,r,i):l(e,t,n,r):null;case te:return n.key===i?u(e,t,n,r):null}if(ka(n)||be(n))return null!==i?null:d(e,t,n,r,null);Sa(e,n)}return null}function h(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case ee:return e=e.get(null===r.key?n:r.key)||null,r.type===ne?d(t,e,r.props.children,i,r.key):l(t,e,r,i);case te:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(ka(r)||be(r))return d(t,e=e.get(n)||null,r,i,null);Sa(t,r)}return null}function b(i,o,s,c){for(var l=null,u=null,d=o,b=o=0,v=null;null!==d&&b<s.length;b++){d.index>b?(v=d,d=null):v=d.sibling;var y=p(i,d,s[b],c);if(null===y){null===d&&(d=v);break}e&&d&&null===y.alternate&&t(i,d),o=a(y,o,b),null===u?l=y:u.sibling=y,u=y,d=v}if(b===s.length)return n(i,d),l;if(null===d){for(;b<s.length;b++)null!==(d=f(i,s[b],c))&&(o=a(d,o,b),null===u?l=d:u.sibling=d,u=d);return l}for(d=r(i,d);b<s.length;b++)null!==(v=h(d,i,b,s[b],c))&&(e&&null!==v.alternate&&d.delete(null===v.key?b:v.key),o=a(v,o,b),null===u?l=v:u.sibling=v,u=v);return e&&d.forEach((function(e){return t(i,e)})),l}function v(i,s,c,l){var u=be(c);if("function"!==typeof u)throw Error(o(150));if(null==(c=u.call(c)))throw Error(o(151));for(var d=u=null,b=s,v=s=0,y=null,m=c.next();null!==b&&!m.done;v++,m=c.next()){b.index>v?(y=b,b=null):y=b.sibling;var g=p(i,b,m.value,l);if(null===g){null===b&&(b=y);break}e&&b&&null===g.alternate&&t(i,b),s=a(g,s,v),null===d?u=g:d.sibling=g,d=g,b=y}if(m.done)return n(i,b),u;if(null===b){for(;!m.done;v++,m=c.next())null!==(m=f(i,m.value,l))&&(s=a(m,s,v),null===d?u=m:d.sibling=m,d=m);return u}for(b=r(i,b);!m.done;v++,m=c.next())null!==(m=h(b,i,v,m.value,l))&&(e&&null!==m.alternate&&b.delete(null===m.key?v:m.key),s=a(m,s,v),null===d?u=m:d.sibling=m,d=m);return e&&b.forEach((function(e){return t(i,e)})),u}return function(e,r,a,c){var l="object"===typeof a&&null!==a&&a.type===ne&&null===a.key;l&&(a=a.props.children);var u="object"===typeof a&&null!==a;if(u)switch(a.$$typeof){case ee:e:{for(u=a.key,l=r;null!==l;){if(l.key===u){switch(l.tag){case 7:if(a.type===ne){n(e,l.sibling),(r=i(l,a.props.children)).return=e,e=r;break e}break;default:if(l.elementType===a.type){n(e,l.sibling),(r=i(l,a.props)).ref=xa(e,l,a),r.return=e,e=r;break e}}n(e,l);break}t(e,l),l=l.sibling}a.type===ne?((r=Fc(a.props.children,e.mode,c,a.key)).return=e,e=r):((c=Lc(a.type,a.key,a.props,null,e.mode,c)).ref=xa(e,r,a),c.return=e,e=c)}return s(e);case te:e:{for(l=a.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Nc(a,e.mode,c)).return=e,e=r}return s(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Dc(a,e.mode,c)).return=e,e=r),s(e);if(ka(a))return b(e,r,a,c);if(be(a))return v(e,r,a,c);if(u&&Sa(e,a),"undefined"===typeof a&&!l)switch(e.tag){case 1:case 0:throw e=e.type,Error(o(152,e.displayName||e.name||"Component"))}return n(e,r)}}var Ea=Ta(!0),Ca=Ta(!1),Pa={},Ia={current:Pa},Ma={current:Pa},Aa={current:Pa};function Ra(e){if(e===Pa)throw Error(o(174));return e}function La(e,t){switch(pi(Aa,t),pi(Ma,e),pi(Ia,Pa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:De(null,"");break;default:t=De(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}fi(Ia),pi(Ia,t)}function Fa(){fi(Ia),fi(Ma),fi(Aa)}function Da(e){Ra(Aa.current);var t=Ra(Ia.current),n=De(t,e.type);t!==n&&(pi(Ma,e),pi(Ia,n))}function Na(e){Ma.current===e&&(fi(Ia),fi(Ma))}var Va={current:0};function za(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===yn||n.data===mn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Ua(e,t){return{responder:e,props:t}}var Ba=K.ReactCurrentDispatcher,Ga=K.ReactCurrentBatchConfig,qa=0,Ha=null,Wa=null,$a=null,Ja=!1;function Ya(){throw Error(o(321))}function Ka(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ur(e[n],t[n]))return!1;return!0}function Za(e,t,n,r,i,a){if(qa=a,Ha=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Ba.current=null===e||null===e.memoizedState?jo:wo,e=n(r,i),t.expirationTime===qa){a=0;do{if(t.expirationTime=0,!(25>a))throw Error(o(301));a+=1,$a=Wa=null,t.updateQueue=null,Ba.current=_o,e=n(r,i)}while(t.expirationTime===qa)}if(Ba.current=Oo,t=null!==Wa&&null!==Wa.next,qa=0,$a=Wa=Ha=null,Ja=!1,t)throw Error(o(300));return e}function Xa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===$a?Ha.memoizedState=$a=e:$a=$a.next=e,$a}function Qa(){if(null===Wa){var e=Ha.alternate;e=null!==e?e.memoizedState:null}else e=Wa.next;var t=null===$a?Ha.memoizedState:$a.next;if(null!==t)$a=t,Wa=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Wa=e).memoizedState,baseState:Wa.baseState,baseQueue:Wa.baseQueue,queue:Wa.queue,next:null},null===$a?Ha.memoizedState=$a=e:$a=$a.next=e}return $a}function eo(e,t){return"function"===typeof t?t(e):t}function to(e){var t=Qa(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Wa,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var c=s=a=null,l=i;do{var u=l.expirationTime;if(u<qa){var d={expirationTime:l.expirationTime,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===c?(s=c=d,a=r):c=c.next=d,u>Ha.expirationTime&&(Ha.expirationTime=u,hc(u))}else null!==c&&(c=c.next={expirationTime:1073741823,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),pc(u,l.suspenseConfig),r=l.eagerReducer===e?l.eagerState:e(r,l.action);l=l.next}while(null!==l&&l!==i);null===c?a=r:c.next=s,Ur(r,t.memoizedState)||(Ro=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function no(e){var t=Qa(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);Ur(a,t.memoizedState)||(Ro=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ro(e){var t=Xa();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:eo,lastRenderedState:e}).dispatch=go.bind(null,Ha,e),[t.memoizedState,e]}function io(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Ha.updateQueue)?(t={lastEffect:null},Ha.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ao(){return Qa().memoizedState}function oo(e,t,n,r){var i=Xa();Ha.effectTag|=e,i.memoizedState=io(1|t,n,void 0,void 0===r?null:r)}function so(e,t,n,r){var i=Qa();r=void 0===r?null:r;var a=void 0;if(null!==Wa){var o=Wa.memoizedState;if(a=o.destroy,null!==r&&Ka(r,o.deps))return void io(t,n,a,r)}Ha.effectTag|=e,i.memoizedState=io(1|t,n,a,r)}function co(e,t){return oo(516,4,e,t)}function lo(e,t){return so(516,4,e,t)}function uo(e,t){return so(4,2,e,t)}function fo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function po(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,so(4,2,fo.bind(null,t,e),n)}function ho(){}function bo(e,t){return Xa().memoizedState=[e,void 0===t?null:t],e}function vo(e,t){var n=Qa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ka(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function yo(e,t){var n=Qa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ka(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function mo(e,t,n){var r=qi();Wi(98>r?98:r,(function(){e(!0)})),Wi(97<r?97:r,(function(){var r=Ga.suspense;Ga.suspense=void 0===t?null:t;try{e(!1),n()}finally{Ga.suspense=r}}))}function go(e,t,n){var r=ec(),i=va.suspense;i={expirationTime:r=tc(r,e,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var a=t.pending;if(null===a?i.next=i:(i.next=a.next,a.next=i),t.pending=i,a=e.alternate,e===Ha||null!==a&&a===Ha)Ja=!0,i.expirationTime=qa,Ha.expirationTime=qa;else{if(0===e.expirationTime&&(null===a||0===a.expirationTime)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.eagerReducer=a,i.eagerState=s,Ur(s,o))return}catch(c){}nc(e,r)}}var Oo={readContext:sa,useCallback:Ya,useContext:Ya,useEffect:Ya,useImperativeHandle:Ya,useLayoutEffect:Ya,useMemo:Ya,useReducer:Ya,useRef:Ya,useState:Ya,useDebugValue:Ya,useResponder:Ya,useDeferredValue:Ya,useTransition:Ya},jo={readContext:sa,useCallback:bo,useContext:sa,useEffect:co,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,oo(4,2,fo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return oo(4,2,e,t)},useMemo:function(e,t){var n=Xa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Xa();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=go.bind(null,Ha,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Xa().memoizedState=e},useState:ro,useDebugValue:ho,useResponder:Ua,useDeferredValue:function(e,t){var n=ro(e),r=n[0],i=n[1];return co((function(){var n=Ga.suspense;Ga.suspense=void 0===t?null:t;try{i(e)}finally{Ga.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ro(!1),n=t[0];return t=t[1],[bo(mo.bind(null,t,e),[t,e]),n]}},wo={readContext:sa,useCallback:vo,useContext:sa,useEffect:lo,useImperativeHandle:po,useLayoutEffect:uo,useMemo:yo,useReducer:to,useRef:ao,useState:function(){return to(eo)},useDebugValue:ho,useResponder:Ua,useDeferredValue:function(e,t){var n=to(eo),r=n[0],i=n[1];return lo((function(){var n=Ga.suspense;Ga.suspense=void 0===t?null:t;try{i(e)}finally{Ga.suspense=n}}),[e,t]),r},useTransition:function(e){var t=to(eo),n=t[0];return t=t[1],[vo(mo.bind(null,t,e),[t,e]),n]}},_o={readContext:sa,useCallback:vo,useContext:sa,useEffect:lo,useImperativeHandle:po,useLayoutEffect:uo,useMemo:yo,useReducer:no,useRef:ao,useState:function(){return no(eo)},useDebugValue:ho,useResponder:Ua,useDeferredValue:function(e,t){var n=no(eo),r=n[0],i=n[1];return lo((function(){var n=Ga.suspense;Ga.suspense=void 0===t?null:t;try{i(e)}finally{Ga.suspense=n}}),[e,t]),r},useTransition:function(e){var t=no(eo),n=t[0];return t=t[1],[vo(mo.bind(null,t,e),[t,e]),n]}},ko=null,xo=null,So=!1;function To(e,t){var n=Mc(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Eo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Co(e){if(So){var t=xo;if(t){var n=t;if(!Eo(e,t)){if(!(t=xn(n.nextSibling))||!Eo(e,t))return e.effectTag=-1025&e.effectTag|2,So=!1,void(ko=e);To(ko,n)}ko=e,xo=xn(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,So=!1,ko=e}}function Po(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ko=e}function Io(e){if(e!==ko)return!1;if(!So)return Po(e),So=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!wn(t,e.memoizedProps))for(t=xo;t;)To(e,t),t=xn(t.nextSibling);if(Po(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){xo=xn(e.nextSibling);break e}t--}else"$"!==n&&n!==mn&&n!==yn||t++}e=e.nextSibling}xo=null}}else xo=ko?xn(e.stateNode.nextSibling):null;return!0}function Mo(){xo=ko=null,So=!1}var Ao=K.ReactCurrentOwner,Ro=!1;function Lo(e,t,n,r){t.child=null===e?Ca(t,null,n,r):Ea(t,e.child,n,r)}function Fo(e,t,n,r,i){n=n.render;var a=t.ref;return oa(t,i),r=Za(e,t,n,r,a,i),null===e||Ro?(t.effectTag|=1,Lo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Xo(e,t,i))}function Do(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Ac(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,null,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,No(e,t,o,r,i,a))}return o=e.child,i<a&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:Gr)(i,r)&&e.ref===t.ref)?Xo(e,t,a):(t.effectTag|=1,(e=Rc(o,r)).ref=t.ref,e.return=t,t.child=e)}function No(e,t,n,r,i,a){return null!==e&&Gr(e.memoizedProps,r)&&e.ref===t.ref&&(Ro=!1,i<a)?(t.expirationTime=e.expirationTime,Xo(e,t,a)):zo(e,t,n,r,a)}function Vo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function zo(e,t,n,r,i){var a=gi(n)?yi:bi.current;return a=mi(t,a),oa(t,i),n=Za(e,t,n,r,a,i),null===e||Ro?(t.effectTag|=1,Lo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Xo(e,t,i))}function Uo(e,t,n,r,i){if(gi(n)){var a=!0;_i(t)}else a=!1;if(oa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),ja(t,n,r),_a(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var c=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=sa(l):l=mi(t,l=gi(n)?yi:bi.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||c!==l)&&wa(t,o,r,l),ca=!1;var f=t.memoizedState;o.state=f,ha(t,r,o,i),c=t.memoizedState,s!==r||f!==c||vi.current||ca?("function"===typeof u&&(ma(t,n,u,r),c=t.memoizedState),(s=ca||Oa(t,n,s,r,f,c,l))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.effectTag|=4)):("function"===typeof o.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=l,r=s):("function"===typeof o.componentDidMount&&(t.effectTag|=4),r=!1)}else o=t.stateNode,ua(e,t),s=t.memoizedProps,o.props=t.type===t.elementType?s:Xi(t.type,s),c=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=sa(l):l=mi(t,l=gi(n)?yi:bi.current),(d="function"===typeof(u=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||c!==l)&&wa(t,o,r,l),ca=!1,c=t.memoizedState,o.state=c,ha(t,r,o,i),f=t.memoizedState,s!==r||c!==f||vi.current||ca?("function"===typeof u&&(ma(t,n,u,r),f=t.memoizedState),(u=ca||Oa(t,n,s,r,c,f,l))?(d||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof o.componentDidUpdate&&(t.effectTag|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=256),r=!1);return Bo(e,t,n,r,a,i)}function Bo(e,t,n,r,i,a){Vo(e,t);var o=0!==(64&t.effectTag);if(!r&&!o)return i&&ki(t,n,!1),Xo(e,t,a);r=t.stateNode,Ao.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&o?(t.child=Ea(t,e.child,null,a),t.child=Ea(t,null,s,a)):Lo(e,t,s,a),t.memoizedState=r.state,i&&ki(t,n,!0),t.child}function Go(e){var t=e.stateNode;t.pendingContext?ji(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ji(0,t.context,!1),La(e,t.containerInfo)}var qo,Ho,Wo,$o={dehydrated:null,retryTime:0};function Jo(e,t,n){var r,i=t.mode,a=t.pendingProps,o=Va.current,s=!1;if((r=0!==(64&t.effectTag))||(r=0!==(2&o)&&(null===e||null!==e.memoizedState)),r?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(o|=1),pi(Va,1&o),null===e){if(void 0!==a.fallback&&Co(t),s){if(s=a.fallback,(a=Fc(null,i,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,a.child=e;null!==e;)e.return=a,e=e.sibling;return(n=Fc(s,i,n,null)).return=t,a.sibling=n,t.memoizedState=$o,t.child=a,n}return i=a.children,t.memoizedState=null,t.child=Ca(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,s){if(a=a.fallback,(n=Rc(e,e.pendingProps)).return=t,0===(2&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=Rc(i,a)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=$o,t.child=n,i}return n=Ea(t,e.child,a.children,n),t.memoizedState=null,t.child=n}if(e=e.child,s){if(s=a.fallback,(a=Fc(null,i,0,null)).return=t,a.child=e,null!==e&&(e.return=a),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,a.child=e;null!==e;)e.return=a,e=e.sibling;return(n=Fc(s,i,n,null)).return=t,a.sibling=n,n.effectTag|=2,a.childExpirationTime=0,t.memoizedState=$o,t.child=a,n}return t.memoizedState=null,t.child=Ea(t,e,a.children,n)}function Yo(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),aa(e.return,t)}function Ko(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailExpiration=0,o.tailMode=i,o.lastEffect=a)}function Zo(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Lo(e,t,r.children,n),0!==(2&(r=Va.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Yo(e,n);else if(19===e.tag)Yo(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(pi(Va,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===za(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ko(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===za(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ko(t,!0,n,null,a,t.lastEffect);break;case"together":Ko(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Xo(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&hc(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qo(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function es(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return gi(t.type)&&Oi(),null;case 3:return Fa(),fi(vi),fi(bi),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!Io(t)||(t.effectTag|=4),null;case 5:Na(t),n=Ra(Aa.current);var a=t.type;if(null!==e&&null!=t.stateNode)Ho(e,t,a,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ra(Ia.current),Io(t)){r=t.stateNode,a=t.type;var s=t.memoizedProps;switch(r[En]=t,r[Cn]=s,a){case"iframe":case"object":case"embed":Jt("load",r);break;case"video":case"audio":for(e=0;e<Ze.length;e++)Jt(Ze[e],r);break;case"source":Jt("error",r);break;case"img":case"image":case"link":Jt("error",r),Jt("load",r);break;case"form":Jt("reset",r),Jt("submit",r);break;case"details":Jt("toggle",r);break;case"input":_e(r,s),Jt("invalid",r),ln(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Jt("invalid",r),ln(n,"onChange");break;case"textarea":Ie(r,s),Jt("invalid",r),ln(n,"onChange")}for(var c in on(a,s),e=null,s)if(s.hasOwnProperty(c)){var l=s[c];"children"===c?"string"===typeof l?r.textContent!==l&&(e=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(e=["children",""+l]):k.hasOwnProperty(c)&&null!=l&&ln(n,c)}switch(a){case"input":Oe(r),Se(r,s,!0);break;case"textarea":Oe(r),Ae(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=un)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(c=9===n.nodeType?n:n.ownerDocument,e===cn&&(e=Fe(a)),e===cn?"script"===a?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(a,{is:r.is}):(e=c.createElement(a),"select"===a&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,a),e[En]=t,e[Cn]=r,qo(e,t),t.stateNode=e,c=sn(a,r),a){case"iframe":case"object":case"embed":Jt("load",e),l=r;break;case"video":case"audio":for(l=0;l<Ze.length;l++)Jt(Ze[l],e);l=r;break;case"source":Jt("error",e),l=r;break;case"img":case"image":case"link":Jt("error",e),Jt("load",e),l=r;break;case"form":Jt("reset",e),Jt("submit",e),l=r;break;case"details":Jt("toggle",e),l=r;break;case"input":_e(e,r),l=we(e,r),Jt("invalid",e),ln(n,"onChange");break;case"option":l=Ee(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=i({},r,{value:void 0}),Jt("invalid",e),ln(n,"onChange");break;case"textarea":Ie(e,r),l=Pe(e,r),Jt("invalid",e),ln(n,"onChange");break;default:l=r}on(a,l);var u=l;for(s in u)if(u.hasOwnProperty(s)){var d=u[s];"style"===s?rn(e,d):"dangerouslySetInnerHTML"===s?null!=(d=d?d.__html:void 0)&&ze(e,d):"children"===s?"string"===typeof d?("textarea"!==a||""!==d)&&Ue(e,d):"number"===typeof d&&Ue(e,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(k.hasOwnProperty(s)?null!=d&&ln(n,s):null!=d&&Z(e,s,d,c))}switch(a){case"input":Oe(e),Se(e,r,!1);break;case"textarea":Oe(e),Ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+me(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?Ce(e,!!r.multiple,n,!1):null!=r.defaultValue&&Ce(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof l.onClick&&(e.onclick=un)}jn(a,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Wo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Ra(Aa.current),Ra(Ia.current),Io(t)?(n=t.stateNode,r=t.memoizedProps,n[En]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[En]=t,t.stateNode=n)}return null;case 13:return fi(Va),r=t.memoizedState,0!==(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Io(t):(r=null!==(a=e.memoizedState),n||null===a||null!==(a=e.child.sibling)&&(null!==(s=t.firstEffect)?(t.firstEffect=a,a.nextEffect=s):(t.firstEffect=t.lastEffect=a,a.nextEffect=null),a.effectTag=8)),n&&!r&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Va.current)?Ls===Es&&(Ls=Cs):(Ls!==Es&&Ls!==Cs||(Ls=Ps),0!==zs&&null!==Ms&&(Uc(Ms,Rs),Bc(Ms,zs)))),(n||r)&&(t.effectTag|=4),null);case 4:return Fa(),null;case 10:return ia(t),null;case 17:return gi(t.type)&&Oi(),null;case 19:if(fi(Va),null===(r=t.memoizedState))return null;if(a=0!==(64&t.effectTag),null===(s=r.rendering)){if(a)Qo(r,!1);else if(Ls!==Es||null!==e&&0!==(64&e.effectTag))for(s=t.child;null!==s;){if(null!==(e=za(s))){for(t.effectTag|=64,Qo(r,!1),null!==(a=e.updateQueue)&&(t.updateQueue=a,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)s=n,(a=r).effectTag&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(e=a.alternate)?(a.childExpirationTime=0,a.expirationTime=s,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null):(a.childExpirationTime=e.childExpirationTime,a.expirationTime=e.expirationTime,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,s=e.dependencies,a.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),r=r.sibling;return pi(Va,1&Va.current|2),t.child}s=s.sibling}}else{if(!a)if(null!==(e=za(s))){if(t.effectTag|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),Qo(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Gi()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,a=!0,Qo(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=r.last)?n.sibling=s:t.child=s,r.last=s)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Gi()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Gi(),n.sibling=null,t=Va.current,pi(Va,a?1&t|2:1&t),n):null}throw Error(o(156,t.tag))}function ts(e){switch(e.tag){case 1:gi(e.type)&&Oi();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Fa(),fi(vi),fi(bi),0!==(64&(t=e.effectTag)))throw Error(o(285));return e.effectTag=-4097&t|64,e;case 5:return Na(e),null;case 13:return fi(Va),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return fi(Va),null;case 4:return Fa(),null;case 10:return ia(e),null;default:return null}}function ns(e,t){return{value:e,source:t,stack:ye(t)}}qo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ho=function(e,t,n,r,a){var o=e.memoizedProps;if(o!==r){var s,c,l=t.stateNode;switch(Ra(Ia.current),e=null,n){case"input":o=we(l,o),r=we(l,r),e=[];break;case"option":o=Ee(l,o),r=Ee(l,r),e=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":o=Pe(l,o),r=Pe(l,r),e=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(l.onclick=un)}for(s in on(n,r),n=null,o)if(!r.hasOwnProperty(s)&&o.hasOwnProperty(s)&&null!=o[s])if("style"===s)for(c in l=o[s])l.hasOwnProperty(c)&&(n||(n={}),n[c]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(k.hasOwnProperty(s)?e||(e=[]):(e=e||[]).push(s,null));for(s in r){var u=r[s];if(l=null!=o?o[s]:void 0,r.hasOwnProperty(s)&&u!==l&&(null!=u||null!=l))if("style"===s)if(l){for(c in l)!l.hasOwnProperty(c)||u&&u.hasOwnProperty(c)||(n||(n={}),n[c]="");for(c in u)u.hasOwnProperty(c)&&l[c]!==u[c]&&(n||(n={}),n[c]=u[c])}else n||(e||(e=[]),e.push(s,n)),n=u;else"dangerouslySetInnerHTML"===s?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(e=e||[]).push(s,u)):"children"===s?l===u||"string"!==typeof u&&"number"!==typeof u||(e=e||[]).push(s,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(k.hasOwnProperty(s)?(null!=u&&ln(a,s),e||l===u||(e=[])):(e=e||[]).push(s,u))}n&&(e=e||[]).push("style",n),a=e,(t.updateQueue=a)&&(t.effectTag|=4)}},Wo=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var rs="function"===typeof WeakSet?WeakSet:Set;function is(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ye(n)),null!==n&&ve(n.type),t=t.value,null!==e&&1===e.tag&&ve(e.type);try{console.error(t)}catch(i){setTimeout((function(){throw i}))}}function as(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Sc(e,n)}else t.current=null}function os(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(o(163))}function ss(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function cs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ls(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void cs(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:Xi(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&ba(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}ba(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&jn(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Dt(n)))));case 19:case 17:case 20:case 21:return}throw Error(o(163))}function us(e,t,n){switch("function"===typeof Pc&&Pc(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Wi(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(a){Sc(i,a)}}e=e.next}while(e!==r)}))}break;case 1:as(t),"function"===typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){Sc(e,n)}}(t,n);break;case 5:as(t);break;case 4:vs(e,t,n)}}function ds(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&ds(t)}function fs(e){return 5===e.tag||3===e.tag||4===e.tag}function ps(e){e:{for(var t=e.return;null!==t;){if(fs(t)){var n=t;break e}t=t.return}throw Error(o(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.effectTag&&(Ue(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||fs(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?hs(e,n,t):bs(e,n,t)}function hs(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=un));else if(4!==r&&null!==(e=e.child))for(hs(e,t,n),e=e.sibling;null!==e;)hs(e,t,n),e=e.sibling}function bs(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(bs(e,t,n),e=e.sibling;null!==e;)bs(e,t,n),e=e.sibling}function vs(e,t,n){for(var r,i,a=t,s=!1;;){if(!s){s=a.return;e:for(;;){if(null===s)throw Error(o(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===a.tag||6===a.tag){e:for(var c=e,l=a,u=n,d=l;;)if(us(c,d,u),null!==d.child&&4!==d.tag)d.child.return=d,d=d.child;else{if(d===l)break e;for(;null===d.sibling;){if(null===d.return||d.return===l)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}i?(c=r,l=a.stateNode,8===c.nodeType?c.parentNode.removeChild(l):c.removeChild(l)):r.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){r=a.stateNode.containerInfo,i=!0,a.child.return=a,a=a.child;continue}}else if(us(e,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(s=!1)}a.sibling.return=a.return,a=a.sibling}}function ys(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void ss(3,t);case 1:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Cn]=r,"input"===e&&"radio"===r.type&&null!=r.name&&ke(n,r),sn(e,i),t=sn(e,r),i=0;i<a.length;i+=2){var s=a[i],c=a[i+1];"style"===s?rn(n,c):"dangerouslySetInnerHTML"===s?ze(n,c):"children"===s?Ue(n,c):Z(n,s,c,t)}switch(e){case"input":xe(n,r);break;case"textarea":Me(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?Ce(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?Ce(n,!!r.multiple,r.defaultValue,!0):Ce(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Dt(t.containerInfo)));case 12:return;case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,Bs=Gi()),null!==n)e:for(e=n;;){if(5===e.tag)a=e.stateNode,r?"function"===typeof(a=a.style).setProperty?a.setProperty("display","none","important"):a.display="none":(a=e.stateNode,i=void 0!==(i=e.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,a.style.display=nn("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(a=e.child.sibling).return=e,e=a;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void ms(t);case 19:return void ms(t);case 17:return}throw Error(o(163))}function ms(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new rs),t.forEach((function(t){var r=Ec.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var gs="function"===typeof WeakMap?WeakMap:Map;function Os(e,t,n){(n=da(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){qs||(qs=!0,Hs=r),is(e,t)},n}function js(e,t,n){(n=da(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return is(e,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Ws?Ws=new Set([this]):Ws.add(this),is(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var ws,_s=Math.ceil,ks=K.ReactCurrentDispatcher,xs=K.ReactCurrentOwner,Ss=16,Ts=32,Es=0,Cs=3,Ps=4,Is=0,Ms=null,As=null,Rs=0,Ls=Es,Fs=null,Ds=1073741823,Ns=1073741823,Vs=null,zs=0,Us=!1,Bs=0,Gs=null,qs=!1,Hs=null,Ws=null,$s=!1,Js=null,Ys=90,Ks=null,Zs=0,Xs=null,Qs=0;function ec(){return 0!==(48&Is)?1073741821-(Gi()/10|0):0!==Qs?Qs:Qs=1073741821-(Gi()/10|0)}function tc(e,t,n){if(0===(2&(t=t.mode)))return 1073741823;var r=qi();if(0===(4&t))return 99===r?1073741823:1073741822;if(0!==(Is&Ss))return Rs;if(null!==n)e=Zi(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Zi(e,150,100);break;case 97:case 96:e=Zi(e,5e3,250);break;case 95:e=2;break;default:throw Error(o(326))}return null!==Ms&&e===Rs&&--e,e}function nc(e,t){if(50<Zs)throw Zs=0,Xs=null,Error(o(185));if(null!==(e=rc(e,t))){var n=qi();1073741823===t?0!==(8&Is)&&0===(48&Is)?sc(e):(ac(e),0===Is&&Yi()):ac(e),0===(4&Is)||98!==n&&99!==n||(null===Ks?Ks=new Map([[e,t]]):(void 0===(n=Ks.get(e))||n>t)&&Ks.set(e,t))}}function rc(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Ms===i&&(hc(t),Ls===Ps&&Uc(i,Rs)),Bc(i,t)),i}function ic(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!zc(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function ac(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Ji(sc.bind(null,e));else{var t=ic(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=ec();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==Fi&&Ti(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Ji(sc.bind(null,e)):$i(r,oc.bind(null,e),{timeout:10*(1073741821-t)-Gi()}),e.callbackNode=t}}}function oc(e,t){if(Qs=0,t)return Gc(e,t=ec()),ac(e),null;var n=ic(e);if(0!==n){if(t=e.callbackNode,0!==(48&Is))throw Error(o(327));if(_c(),e===Ms&&n===Rs||uc(e,n),null!==As){var r=Is;Is|=Ss;for(var i=fc();;)try{vc();break}catch(c){dc(e,c)}if(ra(),Is=r,ks.current=i,1===Ls)throw t=Fs,uc(e,n),Uc(e,n),ac(e),t;if(null===As)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=Ls,Ms=null,r){case Es:case 1:throw Error(o(345));case 2:Gc(e,2<n?2:n);break;case Cs:if(Uc(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=gc(i)),1073741823===Ds&&10<(i=Bs+500-Gi())){if(Us){var a=e.lastPingedTime;if(0===a||a>=n){e.lastPingedTime=n,uc(e,n);break}}if(0!==(a=ic(e))&&a!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=_n(Oc.bind(null,e),i);break}Oc(e);break;case Ps:if(Uc(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=gc(i)),Us&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,uc(e,n);break}if(0!==(i=ic(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Ns?r=10*(1073741821-Ns)-Gi():1073741823===Ds?r=0:(r=10*(1073741821-Ds)-5e3,0>(r=(i=Gi())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_s(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=_n(Oc.bind(null,e),r);break}Oc(e);break;case 5:if(1073741823!==Ds&&null!==Vs){a=Ds;var s=Vs;if(0>=(r=0|s.busyMinDurationMs)?r=0:(i=0|s.busyDelayMs,r=(a=Gi()-(10*(1073741821-a)-(0|s.timeoutMs||5e3)))<=i?0:i+r-a),10<r){Uc(e,n),e.timeoutHandle=_n(Oc.bind(null,e),r);break}}Oc(e);break;default:throw Error(o(329))}if(ac(e),e.callbackNode===t)return oc.bind(null,e)}}return null}function sc(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,0!==(48&Is))throw Error(o(327));if(_c(),e===Ms&&t===Rs||uc(e,t),null!==As){var n=Is;Is|=Ss;for(var r=fc();;)try{bc();break}catch(i){dc(e,i)}if(ra(),Is=n,ks.current=r,1===Ls)throw n=Fs,uc(e,t),Uc(e,t),ac(e),n;if(null!==As)throw Error(o(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Ms=null,Oc(e),ac(e)}return null}function cc(e,t){var n=Is;Is|=1;try{return e(t)}finally{0===(Is=n)&&Yi()}}function lc(e,t){var n=Is;Is&=-2,Is|=8;try{return e(t)}finally{0===(Is=n)&&Yi()}}function uc(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,kn(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:Fa(),fi(vi),fi(bi);break;case 5:Na(r);break;case 4:Fa();break;case 13:case 19:fi(Va);break;case 10:ia(r)}n=n.return}Ms=e,As=Rc(e.current,null),Rs=t,Ls=Es,Fs=null,Ns=Ds=1073741823,Vs=null,zs=0,Us=!1}function dc(e,t){for(;;){try{if(ra(),Ba.current=Oo,Ja)for(var n=Ha.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(qa=0,$a=Wa=Ha=null,Ja=!1,null===As||null===As.return)return Ls=1,Fs=t,As=null;e:{var i=e,a=As.return,o=As,s=t;if(t=Rs,o.effectTag|=2048,o.firstEffect=o.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s;if(0===(2&o.mode)){var l=o.alternate;l?(o.updateQueue=l.updateQueue,o.memoizedState=l.memoizedState,o.expirationTime=l.expirationTime):(o.updateQueue=null,o.memoizedState=null)}var u=0!==(1&Va.current),d=a;do{var f;if(f=13===d.tag){var p=d.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var h=d.memoizedProps;f=void 0!==h.fallback&&(!0!==h.unstable_avoidThisFallback||!u)}}if(f){var b=d.updateQueue;if(null===b){var v=new Set;v.add(c),d.updateQueue=v}else b.add(c);if(0===(2&d.mode)){if(d.effectTag|=64,o.effectTag&=-2981,1===o.tag)if(null===o.alternate)o.tag=17;else{var y=da(1073741823,null);y.tag=2,fa(o,y)}o.expirationTime=1073741823;break e}s=void 0,o=t;var m=i.pingCache;if(null===m?(m=i.pingCache=new gs,s=new Set,m.set(c,s)):void 0===(s=m.get(c))&&(s=new Set,m.set(c,s)),!s.has(o)){s.add(o);var g=Tc.bind(null,i,c,o);c.then(g,g)}d.effectTag|=4096,d.expirationTime=t;break e}d=d.return}while(null!==d);s=Error((ve(o.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ye(o))}5!==Ls&&(Ls=2),s=ns(s,o),d=a;do{switch(d.tag){case 3:c=s,d.effectTag|=4096,d.expirationTime=t,pa(d,Os(d,c,t));break e;case 1:c=s;var O=d.type,j=d.stateNode;if(0===(64&d.effectTag)&&("function"===typeof O.getDerivedStateFromError||null!==j&&"function"===typeof j.componentDidCatch&&(null===Ws||!Ws.has(j)))){d.effectTag|=4096,d.expirationTime=t,pa(d,js(d,c,t));break e}}d=d.return}while(null!==d)}As=mc(As)}catch(w){t=w;continue}break}}function fc(){var e=ks.current;return ks.current=Oo,null===e?Oo:e}function pc(e,t){e<Ds&&2<e&&(Ds=e),null!==t&&e<Ns&&2<e&&(Ns=e,Vs=t)}function hc(e){e>zs&&(zs=e)}function bc(){for(;null!==As;)As=yc(As)}function vc(){for(;null!==As&&!Di();)As=yc(As)}function yc(e){var t=ws(e.alternate,e,Rs);return e.memoizedProps=e.pendingProps,null===t&&(t=mc(e)),xs.current=null,t}function mc(e){As=e;do{var t=As.alternate;if(e=As.return,0===(2048&As.effectTag)){if(t=es(t,As,Rs),1===Rs||1!==As.childExpirationTime){for(var n=0,r=As.child;null!==r;){var i=r.expirationTime,a=r.childExpirationTime;i>n&&(n=i),a>n&&(n=a),r=r.sibling}As.childExpirationTime=n}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=As.firstEffect),null!==As.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=As.firstEffect),e.lastEffect=As.lastEffect),1<As.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=As:e.firstEffect=As,e.lastEffect=As))}else{if(null!==(t=ts(As)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=As.sibling))return t;As=e}while(null!==As);return Ls===Es&&(Ls=5),null}function gc(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function Oc(e){var t=qi();return Wi(99,jc.bind(null,e,t)),null}function jc(e,t){do{_c()}while(null!==Js);if(0!==(48&Is))throw Error(o(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=gc(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Ms&&(As=Ms=null,Rs=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var a=Is;Is|=Ts,xs.current=null,gn=$t;var s=bn();if(vn(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{var l=(c=(c=s.ownerDocument)&&c.defaultView||window).getSelection&&c.getSelection();if(l&&0!==l.rangeCount){c=l.anchorNode;var u=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{c.nodeType,d.nodeType}catch(S){c=null;break e}var f=0,p=-1,h=-1,b=0,v=0,y=s,m=null;t:for(;;){for(var g;y!==c||0!==u&&3!==y.nodeType||(p=f+u),y!==d||0!==l&&3!==y.nodeType||(h=f+l),3===y.nodeType&&(f+=y.nodeValue.length),null!==(g=y.firstChild);)m=y,y=g;for(;;){if(y===s)break t;if(m===c&&++b===u&&(p=f),m===d&&++v===l&&(h=f),null!==(g=y.nextSibling))break;m=(y=m).parentNode}y=g}c=-1===p||-1===h?null:{start:p,end:h}}else c=null}c=c||{start:0,end:0}}else c=null;On={activeElementDetached:null,focusedElem:s,selectionRange:c},$t=!1,Gs=i;do{try{wc()}catch(S){if(null===Gs)throw Error(o(330));Sc(Gs,S),Gs=Gs.nextEffect}}while(null!==Gs);Gs=i;do{try{for(s=e,c=t;null!==Gs;){var O=Gs.effectTag;if(16&O&&Ue(Gs.stateNode,""),128&O){var j=Gs.alternate;if(null!==j){var w=j.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&O){case 2:ps(Gs),Gs.effectTag&=-3;break;case 6:ps(Gs),Gs.effectTag&=-3,ys(Gs.alternate,Gs);break;case 1024:Gs.effectTag&=-1025;break;case 1028:Gs.effectTag&=-1025,ys(Gs.alternate,Gs);break;case 4:ys(Gs.alternate,Gs);break;case 8:vs(s,u=Gs,c),ds(u)}Gs=Gs.nextEffect}}catch(S){if(null===Gs)throw Error(o(330));Sc(Gs,S),Gs=Gs.nextEffect}}while(null!==Gs);if(w=On,j=bn(),O=w.focusedElem,c=w.selectionRange,j!==O&&O&&O.ownerDocument&&hn(O.ownerDocument.documentElement,O)){null!==c&&vn(O)&&(j=c.start,void 0===(w=c.end)&&(w=j),"selectionStart"in O?(O.selectionStart=j,O.selectionEnd=Math.min(w,O.value.length)):(w=(j=O.ownerDocument||document)&&j.defaultView||window).getSelection&&(w=w.getSelection(),u=O.textContent.length,s=Math.min(c.start,u),c=void 0===c.end?s:Math.min(c.end,u),!w.extend&&s>c&&(u=c,c=s,s=u),u=pn(O,s),d=pn(O,c),u&&d&&(1!==w.rangeCount||w.anchorNode!==u.node||w.anchorOffset!==u.offset||w.focusNode!==d.node||w.focusOffset!==d.offset)&&((j=j.createRange()).setStart(u.node,u.offset),w.removeAllRanges(),s>c?(w.addRange(j),w.extend(d.node,d.offset)):(j.setEnd(d.node,d.offset),w.addRange(j))))),j=[];for(w=O;w=w.parentNode;)1===w.nodeType&&j.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof O.focus&&O.focus(),O=0;O<j.length;O++)(w=j[O]).element.scrollLeft=w.left,w.element.scrollTop=w.top}$t=!!gn,On=gn=null,e.current=n,Gs=i;do{try{for(O=e;null!==Gs;){var _=Gs.effectTag;if(36&_&&ls(O,Gs.alternate,Gs),128&_){j=void 0;var k=Gs.ref;if(null!==k){var x=Gs.stateNode;switch(Gs.tag){case 5:j=x;break;default:j=x}"function"===typeof k?k(j):k.current=j}}Gs=Gs.nextEffect}}catch(S){if(null===Gs)throw Error(o(330));Sc(Gs,S),Gs=Gs.nextEffect}}while(null!==Gs);Gs=null,Ni(),Is=a}else e.current=n;if($s)$s=!1,Js=e,Ys=t;else for(Gs=i;null!==Gs;)t=Gs.nextEffect,Gs.nextEffect=null,Gs=t;if(0===(t=e.firstPendingTime)&&(Ws=null),1073741823===t?e===Xs?Zs++:(Zs=0,Xs=e):Zs=0,"function"===typeof Cc&&Cc(n.stateNode,r),ac(e),qs)throw qs=!1,e=Hs,Hs=null,e;return 0!==(8&Is)||Yi(),null}function wc(){for(;null!==Gs;){var e=Gs.effectTag;0!==(256&e)&&os(Gs.alternate,Gs),0===(512&e)||$s||($s=!0,$i(97,(function(){return _c(),null}))),Gs=Gs.nextEffect}}function _c(){if(90!==Ys){var e=97<Ys?97:Ys;return Ys=90,Wi(e,kc)}}function kc(){if(null===Js)return!1;var e=Js;if(Js=null,0!==(48&Is))throw Error(o(331));var t=Is;for(Is|=Ts,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:ss(5,n),cs(5,n)}}catch(r){if(null===e)throw Error(o(330));Sc(e,r)}n=e.nextEffect,e.nextEffect=null,e=n}return Is=t,Yi(),!0}function xc(e,t,n){fa(e,t=Os(e,t=ns(n,t),1073741823)),null!==(e=rc(e,1073741823))&&ac(e)}function Sc(e,t){if(3===e.tag)xc(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){xc(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ws||!Ws.has(r))){fa(n,e=js(n,e=ns(t,e),1073741823)),null!==(n=rc(n,1073741823))&&ac(n);break}}n=n.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Ms===e&&Rs===n?Ls===Ps||Ls===Cs&&1073741823===Ds&&Gi()-Bs<500?uc(e,Rs):Us=!0:zc(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,ac(e)))}function Ec(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=tc(t=ec(),e,null)),null!==(e=rc(e,t))&&ac(e)}ws=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||vi.current)Ro=!0;else{if(r<n){switch(Ro=!1,t.tag){case 3:Go(t),Mo();break;case 5:if(Da(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:gi(t.type)&&_i(t);break;case 4:La(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,i=t.type._context,pi(Qi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Jo(e,t,n):(pi(Va,1&Va.current),null!==(t=Xo(e,t,n))?t.sibling:null);pi(Va,1&Va.current);break;case 19:if(r=t.childExpirationTime>=n,0!==(64&e.effectTag)){if(r)return Zo(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),pi(Va,Va.current),!r)return null}return Xo(e,t,n)}Ro=!1}}else Ro=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=mi(t,bi.current),oa(t,n),i=Za(null,t,r,e,i,n),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,gi(r)){var a=!0;_i(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,la(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&ma(t,r,s,e),i.updater=ga,t.stateNode=i,i._reactInternalFiber=t,_a(t,r,e,n),t=Bo(null,t,r,!0,a,n)}else t.tag=0,Lo(null,t,i,n),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,a=t.tag=function(e){if("function"===typeof e)return Ac(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===ce)return 11;if(e===de)return 14}return 2}(i),e=Xi(i,e),a){case 0:t=zo(null,t,i,e,n);break e;case 1:t=Uo(null,t,i,e,n);break e;case 11:t=Fo(null,t,i,e,n);break e;case 14:t=Do(null,t,i,Xi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,zo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Uo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 3:if(Go(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ua(e,t),ha(t,r,null,n),(r=t.memoizedState.element)===i)Mo(),t=Xo(e,t,n);else{if((i=t.stateNode.hydrate)&&(xo=xn(t.stateNode.containerInfo.firstChild),ko=t,i=So=!0),i)for(n=Ca(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Lo(e,t,r,n),Mo();t=t.child}return t;case 5:return Da(t),null===e&&Co(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,wn(r,i)?s=null:null!==a&&wn(r,a)&&(t.effectTag|=16),Vo(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Lo(e,t,s,n),t=t.child),t;case 6:return null===e&&Co(t),null;case 13:return Jo(e,t,n);case 4:return La(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ea(t,null,r,n):Lo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Fo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 7:return Lo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Lo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value;var c=t.type._context;if(pi(Qi,c._currentValue),c._currentValue=a,null!==s)if(c=s.value,0===(a=Ur(c,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(c,a):1073741823))){if(s.children===i.children&&!vi.current){t=Xo(e,t,n);break e}}else for(null!==(c=t.child)&&(c.return=t);null!==c;){var l=c.dependencies;if(null!==l){s=c.child;for(var u=l.firstContext;null!==u;){if(u.context===r&&0!==(u.observedBits&a)){1===c.tag&&((u=da(n,null)).tag=2,fa(c,u)),c.expirationTime<n&&(c.expirationTime=n),null!==(u=c.alternate)&&u.expirationTime<n&&(u.expirationTime=n),aa(c.return,n),l.expirationTime<n&&(l.expirationTime=n);break}u=u.next}}else s=10===c.tag&&c.type===t.type?null:c.child;if(null!==s)s.return=c;else for(s=c;null!==s;){if(s===t){s=null;break}if(null!==(c=s.sibling)){c.return=s.return,s=c;break}s=s.return}c=s}Lo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,oa(t,n),r=r(i=sa(i,a.unstable_observedBits)),t.effectTag|=1,Lo(e,t,r,n),t.child;case 14:return a=Xi(i=t.type,t.pendingProps),Do(e,t,i,a=Xi(i.type,a),r,n);case 15:return No(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,gi(r)?(e=!0,_i(t)):e=!1,oa(t,n),ja(t,r,i),_a(t,r,i,n),Bo(null,t,r,!0,e,n);case 19:return Zo(e,t,n)}throw Error(o(156,t.tag))};var Cc=null,Pc=null;function Ic(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Mc(e,t,n,r){return new Ic(e,t,n,r)}function Ac(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Mc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Ac(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case ne:return Fc(n.children,i,a,t);case se:s=8,i|=7;break;case re:s=8,i|=1;break;case ie:return(e=Mc(12,n,t,8|i)).elementType=ie,e.type=ie,e.expirationTime=a,e;case le:return(e=Mc(13,n,t,i)).type=le,e.elementType=le,e.expirationTime=a,e;case ue:return(e=Mc(19,n,t,i)).elementType=ue,e.expirationTime=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case ae:s=10;break e;case oe:s=9;break e;case ce:s=11;break e;case de:s=14;break e;case fe:s=16,r=null;break e;case pe:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Mc(s,n,t,i)).elementType=e,t.type=r,t.expirationTime=a,t}function Fc(e,t,n,r){return(e=Mc(7,e,r,t)).expirationTime=n,e}function Dc(e,t,n){return(e=Mc(6,e,null,t)).expirationTime=n,e}function Nc(e,t,n){return(t=Mc(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function zc(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function Uc(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Bc(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Gc(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function qc(e,t,n,r){var i=t.current,a=ec(),s=va.suspense;a=tc(a,i,s);e:if(n){t:{if(et(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(o(170));var c=n;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(gi(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(null!==c);throw Error(o(171))}if(1===n.tag){var l=n.type;if(gi(l)){n=wi(n,l,c);break e}}n=c}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=da(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fa(i,t),nc(i,a),a}function Hc(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Wc(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function $c(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}function Jc(e,t,n){var r=new Vc(e,t,n=null!=n&&!0===n.hydrate),i=Mc(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,la(i),e[Pn]=r.current,n&&0!==t&&function(e,t){var n=Qe(t);Tt.forEach((function(e){bt(e,t,n)})),Et.forEach((function(e){bt(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Kc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=Hc(o);s.call(e)}}qc(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Jc(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var c=i;i=function(){var e=Hc(o);c.call(e)}}lc((function(){qc(t,o,e,i)}))}return Hc(o)}function Zc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Xc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(o(200));return Zc(e,t,null,n)}Jc.prototype.render=function(e){qc(e,this._internalRoot,null,null)},Jc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;qc(null,e,null,(function(){t[Pn]=null}))},vt=function(e){if(13===e.tag){var t=Zi(ec(),150,100);nc(e,t),$c(e,t)}},yt=function(e){13===e.tag&&(nc(e,3),$c(e,3))},mt=function(e){if(13===e.tag){var t=ec();nc(e,t=tc(t,e,null)),$c(e,t)}},E=function(e,t,n){switch(t){case"input":if(xe(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Rn(r);if(!i)throw Error(o(90));je(r),xe(r,i)}}}break;case"textarea":Me(e,n);break;case"select":null!=(t=n.value)&&Ce(e,!!n.multiple,t,!1)}},R=cc,L=function(e,t,n,r,i){var a=Is;Is|=4;try{return Wi(98,e.bind(null,t,n,r,i))}finally{0===(Is=a)&&Yi()}},F=function(){0===(49&Is)&&(function(){if(null!==Ks){var e=Ks;Ks=null,e.forEach((function(e,t){Gc(t,e),ac(t)})),Yi()}}(),_c())},D=function(e,t){var n=Is;Is|=2;try{return e(t)}finally{0===(Is=n)&&Yi()}};var Qc={Events:[Mn,An,Rn,S,_,Un,function(e){at(e,zn)},M,A,Xt,ct,_c,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Cc=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(r){}},Pc=function(e){try{t.onCommitFiberUnmount(n,e)}catch(r){}}}catch(r){}})(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:In,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qc,t.createPortal=Xc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=rt(t))?null:e.stateNode},t.flushSync=function(e,t){if(0!==(48&Is))throw Error(o(187));var n=Is;Is|=1;try{return Wi(99,e.bind(null,t))}finally{Is=n,Yi()}},t.hydrate=function(e,t,n){if(!Yc(t))throw Error(o(200));return Kc(null,e,t,!0,n)},t.render=function(e,t,n){if(!Yc(t))throw Error(o(200));return Kc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(o(40));return!!e._reactRootContainer&&(lc((function(){Kc(null,null,e,!1,(function(){e._reactRootContainer=null,e[Pn]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_createPortal=function(e,t){return Xc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yc(n))throw Error(o(200));if(null==e||void 0===e._reactInternalFiber)throw Error(o(38));return Kc(e,t,n,!1,r)},t.version="16.14.0"},function(e,t,n){"use strict";e.exports=n(813)},function(e,t,n){"use strict";var r,i,a,o,s;if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,u=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}},d=Date.now();t.unstable_now=function(){return Date.now()-d},r=function(e){null!==c?setTimeout(r,0,e):(c=e,setTimeout(u,0))},i=function(e,t){l=setTimeout(e,t)},a=function(){clearTimeout(l)},o=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var f=window.performance,p=window.Date,h=window.setTimeout,b=window.clearTimeout;if("undefined"!==typeof console){var v=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof f&&"function"===typeof f.now)t.unstable_now=function(){return f.now()};else{var y=p.now();t.unstable_now=function(){return p.now()-y}}var m=!1,g=null,O=-1,j=5,w=0;o=function(){return t.unstable_now()>=w},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):j=0<e?Math.floor(1e3/e):5};var _=new MessageChannel,k=_.port2;_.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();w=e+j;try{g(!0,e)?k.postMessage(null):(m=!1,g=null)}catch(n){throw k.postMessage(null),n}}else m=!1},r=function(e){g=e,m||(m=!0,k.postMessage(null))},i=function(e,n){O=h((function(){e(t.unstable_now())}),n)},a=function(){b(O),O=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<E(i,t)))break e;e[r]=t,e[n]=i,n=r}}function S(e){return void 0===(e=e[0])?null:e}function T(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],s=a+1,c=e[s];if(void 0!==o&&0>E(o,n))void 0!==c&&0>E(c,o)?(e[r]=c,e[s]=n,r=s):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==c&&0>E(c,n)))break e;e[r]=c,e[s]=n,r=s}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var C=[],P=[],I=1,M=null,A=3,R=!1,L=!1,F=!1;function D(e){for(var t=S(P);null!==t;){if(null===t.callback)T(P);else{if(!(t.startTime<=e))break;T(P),t.sortIndex=t.expirationTime,x(C,t)}t=S(P)}}function N(e){if(F=!1,D(e),!L)if(null!==S(C))L=!0,r(V);else{var t=S(P);null!==t&&i(N,t.startTime-e)}}function V(e,n){L=!1,F&&(F=!1,a()),R=!0;var r=A;try{for(D(n),M=S(C);null!==M&&(!(M.expirationTime>n)||e&&!o());){var s=M.callback;if(null!==s){M.callback=null,A=M.priorityLevel;var c=s(M.expirationTime<=n);n=t.unstable_now(),"function"===typeof c?M.callback=c:M===S(C)&&T(C),D(n)}else T(C);M=S(C)}if(null!==M)var l=!0;else{var u=S(P);null!==u&&i(N,u.startTime-n),l=!1}return l}finally{M=null,A=r,R=!1}}function z(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var U=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){L||R||(L=!0,r(V))},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return S(C)},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=U,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_scheduleCallback=function(e,n,o){var s=t.unstable_now();if("object"===typeof o&&null!==o){var c=o.delay;c="number"===typeof c&&0<c?s+c:s,o="number"===typeof o.timeout?o.timeout:z(e)}else o=z(e),c=s;return e={id:I++,callback:n,priorityLevel:e,startTime:c,expirationTime:o=c+o,sortIndex:-1},c>s?(e.sortIndex=c,x(P,e),null===S(C)&&e===S(P)&&(F?a():F=!0,i(N,c-s))):(e.sortIndex=o,x(C,e),L||R||(L=!0,r(V))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();D(e);var n=S(C);return n!==M&&null!==M&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<M.expirationTime||o()},t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}},function(e,t,n){"use strict";var r=n(815);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,o=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,c=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,b=r?Symbol.for("react.suspense_list"):60120,v=r?Symbol.for("react.memo"):60115,y=r?Symbol.for("react.lazy"):60116,m=r?Symbol.for("react.block"):60121,g=r?Symbol.for("react.fundamental"):60117,O=r?Symbol.for("react.responder"):60118,j=r?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case d:case f:case o:case c:case s:case h:return e;default:switch(e=e&&e.$$typeof){case u:case p:case y:case v:case l:return e;default:return t}}case a:return t}}}function _(e){return w(e)===f}t.AsyncMode=d,t.ConcurrentMode=f,t.ContextConsumer=u,t.ContextProvider=l,t.Element=i,t.ForwardRef=p,t.Fragment=o,t.Lazy=y,t.Memo=v,t.Portal=a,t.Profiler=c,t.StrictMode=s,t.Suspense=h,t.isAsyncMode=function(e){return _(e)||w(e)===d},t.isConcurrentMode=_,t.isContextConsumer=function(e){return w(e)===u},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return w(e)===p},t.isFragment=function(e){return w(e)===o},t.isLazy=function(e){return w(e)===y},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===a},t.isProfiler=function(e){return w(e)===c},t.isStrictMode=function(e){return w(e)===s},t.isSuspense=function(e){return w(e)===h},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===f||e===c||e===s||e===h||e===b||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===l||e.$$typeof===u||e.$$typeof===p||e.$$typeof===g||e.$$typeof===O||e.$$typeof===j||e.$$typeof===m)},t.typeOf=w},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(I){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),o=new E(r||[]);return a._invoke=function(e,t,n){var r=d;return function(i,a){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw a;return P()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===b)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=u(e,t,n);if("normal"===c.type){if(r=n.done?h:f,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=h,n.method="throw",n.arg=c.arg)}}}(e,n,o),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=l;var d="suspendedStart",f="suspendedYield",p="executing",h="completed",b={};function v(){}function y(){}function m(){}var g={};g[a]=function(){return this};var O=Object.getPrototypeOf,j=O&&O(O(C([])));j&&j!==n&&r.call(j,a)&&(g=j);var w=m.prototype=v.prototype=Object.create(g);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(i,a,o,s){var c=u(e[i],e,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"===typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(d).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function x(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method))return b;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return b}var i=u(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,b;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,b):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function C(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:P}}function P(){return{value:t,done:!0}}return y.prototype=w.constructor=m,m.constructor=y,y.displayName=c(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(k.prototype),k.prototype[o]=function(){return this},e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(w),c(w,s,"Generator"),w[a]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),b}},e}(e.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";var r=n(206),i=n(662),a=n(819),o=n(668);function s(e){var t=new a(e),n=i(a.prototype.request,t);return r.extend(n,a.prototype,t),r.extend(n,t),n}var c=s(n(665));c.Axios=a,c.create=function(e){return s(o(c.defaults,e))},c.Cancel=n(669),c.CancelToken=n(832),c.isCancel=n(664),c.all=function(e){return Promise.all(e)},c.spread=n(833),c.isAxiosError=n(834),e.exports=c,e.exports.default=c},function(e,t,n){"use strict";var r=n(206),i=n(663),a=n(820),o=n(821),s=n(668);function c(e){this.defaults=e,this.interceptors={request:new a,response:new a}}c.prototype.request=function(e){"string"===typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[o,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},c.prototype.getUri=function(e){return e=s(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,n,r){return this.request(s(r||{},{method:e,url:t,data:n}))}})),e.exports=c},function(e,t,n){"use strict";var r=n(206);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},function(e,t,n){"use strict";var r=n(206),i=n(822),a=n(664),o=n(665);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return s(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return a(t)||(s(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(206);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},function(e,t,n){"use strict";var r=n(206);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(667);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var r=n(206);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,a,o){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(a)&&s.push("domain="+a),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(828),i=n(829);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(206),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,a,o={};return e?(r.forEach(e.split("\n"),(function(e){if(a=e.indexOf(":"),t=r.trim(e.substr(0,a)).toLowerCase(),n=r.trim(e.substr(a+1)),t){if(o[t]&&i.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}},function(e,t,n){"use strict";var r=n(206);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(669);function i(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";e.exports=function(e){return"object"===typeof e&&!0===e.isAxiosError}},function(e,t){},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",i=!1,a=arguments.length-1;a>=-1&&!i;a--){var o=a>=0?arguments[a]:e.cwd();if("string"!==typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,i="/"===o.charAt(0))}return(i?"/":"")+(t=n(r(t.split("/"),(function(e){return!!e})),!i).join("/"))||"."},t.normalize=function(e){var a=t.isAbsolute(e),o="/"===i(e,-1);return(e=n(r(e.split("/"),(function(e){return!!e})),!a).join("/"))||a||(e="."),e&&o&&(e+="/"),(a?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),a=r(n.split("/")),o=Math.min(i.length,a.length),s=o,c=0;c<o;c++)if(i[c]!==a[c]){s=c;break}var l=[];for(c=s;c<i.length;c++)l.push("..");return(l=l.concat(a.slice(s))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,a=e.length-1;a>=1;--a)if(47===(t=e.charCodeAt(a))){if(!i){r=a;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=function(e){"string"!==typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,a=0,o=e.length-1;o>=0;--o){var s=e.charCodeAt(o);if(47!==s)-1===r&&(i=!1,r=o+1),46===s?-1===t?t=o:1!==a&&(a=1):-1!==t&&(a=-1);else if(!i){n=o+1;break}}return-1===t||-1===r||0===a||1===a&&t===r-1&&t===n+1?"":e.slice(t,r)};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n(382))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(96)),i=u(n(21)),a=n(671),o=u(n(842)),s=u(n(843)),c=u(n(844)),l=u(n(845));function u(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=function(e){var t=e.children,n=e.showIcon,r=e.icon,u=e.showCloseLabel,p=e.closeLabel,h=e.onClose,b=e.blue,v=e.green,y=e.yellow,m=e.red,g=f(e,["children","showIcon","icon","showCloseLabel","closeLabel","onClose","blue","green","yellow","red"]);return i.default.createElement(a.StyledAlert,d({blue:b,green:v,yellow:y,red:m},g),(n||r)&&function(){var e;return e=v?i.default.createElement(c.default,{filled:!0,size:16}):y||m?i.default.createElement(l.default,{filled:!0,size:16}):i.default.createElement(s.default,{filled:!0,size:16}),i.default.createElement(a.StyledAlertIcon,null,r||e)}(),i.default.createElement(a.StyledAlertContent,null,t),(u||p)&&i.default.createElement(a.StyledAlertClose,{onClick:h},p||i.default.createElement(o.default,{size:16})))};p.propTypes={children:r.default.node,showIcon:r.default.bool,icon:r.default.node,blue:r.default.bool,green:r.default.bool,yellow:r.default.bool,red:r.default.bool,full:r.default.bool,showCloseLabel:r.default.bool,closeLabel:r.default.node,onClose:r.default.func},p.defaultProps={onClose:function(){}},p.displayName="Alert";var h=p;t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(21)),i=c(n(96)),a=n(194),o=n(176),s=c(n(672));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function u(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  html {\n    height: 100%;\n    font-size: 100%;\n  }\n\n  body {\n    min-height: 100%;\n    margin: 0;\n\n    tracking: 0;\n    font-family: ",';\n    line-height: 1.55rem;\n    color: #4c4c4c;\n    background-color: #ffffff;\n\n    -webkit-font-smoothing: subpixel-antialiased;\n\n    font-feature-settings: "kern";\n\n    font-kerning: normal;\n    text-rendering: optimizeLegibility;\n    font-feature-settings : "liga" 1,"calt" 0;\n  }\n\n  .wrapper {\n    overflow: hidden;\n  }\n\n  article,\n  aside,\n  details,\n  figcaption,\n  figure,\n  footer,\n  header,\n  hgroup,\n  nav,\n  section,\n  summary {\n    display: block;\n  }\n\n  audio,\n  canvas,\n  video {\n    display: inline-block;\n  }\n\n  audio:not([controls]) {\n    display: none;\n    height: 0;\n  }\n\n  [hidden] {\n    display: none;\n  }\n\n  svg:not(:root) {\n    overflow: hidden;\n  }\n\n  video,\n  img {\n    max-width: 100%;\n    height: auto;\n  }\n\n  .ie {\n    main {\n      display: block;\n    }\n\n    select {\n      padding-right: 8px;\n    }\n  }\n\n  /* DatePicker */\n\n  .SingleDatePicker_picker,\n  .DateRangePicker_picker {\n    margin-top: -20px;\n    z-index: 101 !important;\n\n    .DayPickerKeyboardShortcuts_buttonReset {\n      font-size: 0.875rem;\n    }\n    .DayPickerKeyboardShortcuts_show__bottomRight::before {\n      border-right-color: ',";\n    }\n    .DayPickerKeyboardShortcuts_show__bottomRight:hover::before {\n      border-right-color: ",";\n    }\n    .DayPickerKeyboardShortcuts_show__topRight::before {\n      border-right-color: ",";\n    }\n    .DayPickerKeyboardShortcuts_show__topRight:hover::before {\n      border-right-color: ",";\n    }\n    .DayPickerKeyboardShortcuts_show__topLeft::before {\n      border-left-color: ",";\n    }\n    .DayPickerKeyboardShortcuts_show__topLeft:hover::before {\n      border-left-color: ",";\n    }\n    .DayPickerKeyboardShortcuts_panel {\n      border: 1px solid ",";\n      border-radius: ",";\n    }\n    .DayPickerKeyboardShortcuts_list {\n      font-size: 0.875rem;\n    }\n    .CalendarDay {\n      font-size: 0.875rem;\n    }\n    .CalendarDay__default {\n      color: #565a5c;\n    }\n    .CalendarDay__outside {\n      color: #565a5c;\n    }\n    .CalendarDay__highlighted_calendar {\n      color: #565a5c;\n    }\n    .CalendarDay__highlighted_calendar:active,\n    .CalendarDay__highlighted_calendar:hover {\n      color: #565a5c;\n    }\n    .CalendarDay__selected_span {\n      background: ",";\n      border: 1px double ",";\n      color: ",";\n    }\n    .CalendarDay__selected_span:active,\n    .CalendarDay__selected_span:hover {\n      background: ",";\n      border: 1px double ",";\n      color: #fff;\n    }\n    .CalendarDay__selected,\n    .CalendarDay__selected:active,\n    .CalendarDay__selected:hover {\n      background: ",";\n      border: 1px double ",";\n      color: #fff;\n    }\n    .CalendarDay__hovered_span,\n    .CalendarDay__hovered_span:hover {\n      background: ",";\n      border: 1px double ",";\n      color: ",";\n    }\n    .CalendarDay__hovered_span:active {\n      background: ",";\n      border: 1px double ",";\n      color: ",";\n    }\n    .CalendarDay__blocked_calendar,\n    .CalendarDay__blocked_calendar:active,\n    .CalendarDay__blocked_calendar:hover {\n      color: #82888a;\n    }\n    .CalendarDay__blocked_out_of_range,\n    .CalendarDay__blocked_out_of_range:active,\n    .CalendarDay__blocked_out_of_range:hover {\n      color: #cacccd;\n    }\n    .CalendarMonth_caption {\n      color: #565a5c;\n      font-size: 0.9375rem;\n    }\n    .DayPickerNavigation_button__horizontalDefault {\n      border-radius: ",";\n    }\n    .DayPickerNavigation_svg__vertical {\n      fill: #565a5c;\n    }\n    .DayPicker__withBorder {\n      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05),\n        0 0 0 1px ",";\n      border-radius: ",";\n    }\n    .DayPicker_weekHeaders {\n      display: none;\n    }\n    .DayPicker_weekHeader__verticalScrollable {\n      border-bottom: 1px solid ",";\n    }\n    .DayPicker_weekHeader_ul {\n      font-size: 0.875rem;\n    }\n    .DayPicker_transitionContainer {\n      border-radius: ",";\n    }\n  }\n\n  /* Toastify */\n\n  .Toastify__toast-container.Toastify__toast-container {\n    width: ",";\n\n    &--top-center,\n    &--bottom-center {\n      margin-left: ",";\n    }\n  }\n\n  .Toastify__toast.Toastify__toast {\n    padding: 0.775rem;\n    box-shadow: ",";\n    border-top: 3px solid ",";\n    border-radius: 3px;\n    font-family: ",";\n    color: ",";\n    background: ",";\n\n    &--info {\n      border-top-color: ",";\n      background: ",";\n    }\n    &--success {\n      border-top-color: ",";\n      background: ",";\n    }\n    &--warning {\n      border-top-color: ",";\n      background: ",";\n    }\n    &--error {\n      border-top-color: ",";\n      background: ",";\n    }\n  }\n\n  .Toastify__toast .Toastify__toast-body {\n    ",";\n  }\n\n  .Toastify__progress-bar.Toastify__progress-bar {\n    visibility: hidden;\n\n    &--default {\n      background: ",";\n    }\n\n    &.progress-visible {\n      visibility: visible;\n    }\n\n    ",";\n  }\n\n  /* FORM PSEUDO ELEMENTS */\n\n  :placeholder {\n    color: #767676;\n  }\n  :input-placeholder {\n    color: #767676;\n  }\n  ::-webkit-input-placeholder {\n    color: #767676;\n  }\n  ::-moz-placeholder {\n    color: #767676;\n  }\n  :-ms-input-placeholder {\n    color: #767676;\n  }\n  ::-ms-value {\n    border: none;\n    background-color: transparent;\n  }\n\n  /* Type */\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/77156710-6a58-4606-b189-b4185e75967b.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/3d5260a1-e4cd-4567-80ed-69d23c40355f.woff')\n        format('woff');\n    font-weight: 300;\n    font-style: normal;\n  }\n\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/77caabd3-1877-4634-85c8-8e398a093b99.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/e388ac99-8c6a-4451-8690-1d15b4d45adb.woff')\n        format('woff');\n    font-weight: 400;\n    font-style: normal;\n  }\n\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/014f2daa-c310-4a36-b9fd-79a8e0c48d44.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/12b00842-ec20-4c7f-aa72-802fb00f6cc4.woff')\n        format('woff');\n    font-weight: 400;\n    font-style: italic;\n  }\n\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/e78b17bb-11fb-4860-8d66-4ee0d0c1e117.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/d4ffabb3-dd7c-472a-bdfb-6700383c6354.woff')\n        format('woff');\n    font-weight: 700;\n    font-style: normal;\n  }\n\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/77156710-6a58-4606-b189-b4185e75967b-ext.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/3d5260a1-e4cd-4567-80ed-69d23c40355f-ext.woff')\n        format('woff');\n    font-weight: 300;\n    font-style: normal;\n    unicode-range: U+0100-017f, U+0180-024f, U+1-1eff, U+02b0-02ff;\n  }\n\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/77caabd3-1877-4634-85c8-8e398a093b99-ext.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/e388ac99-8c6a-4451-8690-1d15b4d45adb-ext.woff')\n        format('woff');\n    font-weight: 400;\n    font-style: normal;\n    unicode-range: U+0100-017f, U+0180-024f, U+1-1eff, U+02b0-02ff;\n  }\n\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/014f2daa-c310-4a36-b9fd-79a8e0c48d44-ext.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/12b00842-ec20-4c7f-aa72-802fb00f6cc4-ext.woff')\n        format('woff');\n    font-weight: 400;\n    font-style: italic;\n    unicode-range: U+0100-017f, U+0180-024f, U+1-1eff, U+02b0-02ff;\n  }\n\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/9851da0a-2481-4687-bbeb-ed4ab170dc38-ext.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/cebce072-9561-4c6d-8c89-f0cefec63289-ext.woff')\n        format('woff');\n    font-weight: 700;\n    font-style: normal;\n    unicode-range: U+0100-017f, U+0180-024f, U+1-1eff, U+02b0-02ff;\n  }\n\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/e78b17bb-11fb-4860-8d66-4ee0d0c1e117-ext.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/d4ffabb3-dd7c-472a-bdfb-6700383c6354-ext.woff')\n        format('woff');\n    font-weight: 700;\n    font-style: normal;\n    unicode-range: U+0100-017f, U+0180-024f, U+1-1eff, U+02b0-02ff;\n  }\n\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/77156710-6a58-4606-b189-b4185e75967b-greek.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/3d5260a1-e4cd-4567-80ed-69d23c40355f-greek.woff')\n        format('woff');\n    font-weight: 300;\n    font-style: normal;\n    unicode-range: U+0370-03ff;\n  }\n\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/77caabd3-1877-4634-85c8-8e398a093b99-greek.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/e388ac99-8c6a-4451-8690-1d15b4d45adb-greek.woff')\n        format('woff');\n    font-weight: 400;\n    font-style: normal;\n    unicode-range: U+0370-03ff;\n  }\n\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/014f2daa-c310-4a36-b9fd-79a8e0c48d44-greek.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/12b00842-ec20-4c7f-aa72-802fb00f6cc4-greek.woff')\n        format('woff');\n    font-weight: 400;\n    font-style: italic;\n    unicode-range: U+0370-03ff;\n  }\n\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/e78b17bb-11fb-4860-8d66-4ee0d0c1e117-greek.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/d4ffabb3-dd7c-472a-bdfb-6700383c6354-greek.woff')\n        format('woff');\n    font-weight: 700;\n    font-style: normal;\n    unicode-range: U+0370-03ff;\n  }\n\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/174d458a-81e0-4174-9473-35e3bf0a613c.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/57a79aa3-9b06-4ba7-a9a4-2b766d826ecf.woff')\n        format('woff');\n    font-weight: 300;\n    font-style: normal;\n    unicode-range: U+0400-04ff;\n  }\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/7db1f672-3a8f-4d19-9c49-7f61aed450b5.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/4ab86b35-c0c2-42b5-98ad-4b6eba66b197.woff')\n        format('woff');\n    font-weight: 400;\n    font-style: normal;\n    unicode-range: U+0400-04ff;\n  }\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/b17468ea-cf53-4635-984b-4d930a68ed4d.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/4d1d0d0d-9ea6-4117-901f-8b32ca1ab936.woff')\n        format('woff');\n    font-weight: 400;\n    font-style: italic;\n    unicode-range: U+0400-04ff;\n  }\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/40d36b4a-60c6-460a-bf43-4c948c23563e.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/45b78f45-e639-4836-8612-e0892e120f14.woff')\n        format('woff');\n    font-weight: 700;\n    font-style: normal;\n    unicode-range: U+0400-04ff;\n  }\n\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/281f890c-8412-4ee3-84ed-8b5d062d2ab8.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/5729f02e-f6b0-4f35-8ee5-c2cffa65fa76.woff')\n        format('woff');\n    font-weight: 300; // there is no 300 in georgian, so use the same files as 400 instead\n    font-style: normal;\n    unicode-range: U+10a0-10ff;\n  }\n\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/281f890c-8412-4ee3-84ed-8b5d062d2ab8.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/5729f02e-f6b0-4f35-8ee5-c2cffa65fa76.woff')\n        format('woff');\n    font-weight: 400;\n    font-style: normal;\n    unicode-range: U+10a0-10ff;\n  }\n\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/2200dfff-da50-40b0-bc12-5e4b872a1998.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/dc10b3bd-5076-4df5-a5f5-e5961f4a6938.woff')\n        format('woff');\n    font-weight: 700;\n    font-style: normal;\n    unicode-range: U+10a0-10ff;\n  }\n\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/2a1ae9a5-b6b5-405c-b660-bbdf1b356952.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/a8aeea1b-1a9d-45b7-8ad9-7c71824599e2.woff')\n        format('woff');\n    font-weight: 300;\n    font-style: normal;\n    unicode-range: U+0600-06ff, U+FB50-FDFF, U+FE70-FEFF;\n  }\n\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/6ea5fa46-5311-450b-8744-288a30c55348.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/d9e4040d-32ff-4a1c-ac04-927a781da1f5.woff')\n        format('woff');\n    font-weight: 400;\n    font-style: normal;\n    unicode-range: U+0600-06ff, U+FB50-FDFF, U+FE70-FEFF;\n  }\n\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/97694c53-4e94-4f9e-969b-a148adfcdcfd.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/8b01637a-f445-4f10-92ea-b84a355f7690.woff')\n        format('woff');\n    font-weight: 700;\n    font-style: normal;\n    unicode-range: U+0600-06ff, U+FB50-FDFF, U+FE70-FEFF;\n  }\n\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/31da4b04-f98a-4b5f-b545-a31d26da99e5.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/d98fb015-7ef6-404f-a58a-5c9242d79770.woff')\n        format('woff');\n    font-weight: 300; // there is no 300 in hebrew, so use the same files as 400 instead\n    font-style: normal;\n    unicode-range: U+0590-05ff, U+FB00-FB4F;\n  }\n\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/31da4b04-f98a-4b5f-b545-a31d26da99e5.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/d98fb015-7ef6-404f-a58a-5c9242d79770.woff')\n        format('woff');\n    font-weight: 400;\n    font-style: normal;\n    unicode-range: U+0590-05ff, U+FB00-FB4F;\n  }\n\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/32a2c5cf-6736-44a6-a276-49ba7e030944.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/fa71df11-7b19-4baf-8ff7-3537dea718f0.woff')\n        format('woff');\n    font-weight: 400;\n    font-style: italic;\n    unicode-range: U+0590-05ff, U+FB00-FB4F;\n  }\n\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/a9eaf4d3-6427-42df-9306-3ea1270f7b1a.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/f4a085c3-1c64-4fc0-a598-26f3e658c2b0.woff')\n        format('woff');\n    font-weight: 700;\n    font-style: normal;\n    unicode-range: U+0590-05ff, U+FB00-FB4F;\n  }\n\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/94aa531e-7746-4df0-bb6e-349891f2eda5.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/121524c1-8d82-4155-bfb3-fd2f15f09e93.woff')\n        format('woff');\n    font-weight: 300;\n    font-style: normal;\n    unicode-range: U+0900-097f;\n  }\n\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/3ae1e25e-3aa6-4061-a016-a079159f9d65.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/f1799750-0952-403f-8108-b2402eed0f62.woff')\n        format('woff');\n    font-weight: 400;\n    font-style: normal;\n    unicode-range: U+0900-097f;\n  }\n\n  @font-face {\n    font-family: 'Avenir Next';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/41331c3c-3759-4462-8695-33c9a21b6a5b.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/31e0c094-e345-4a54-a797-d5f1a5885572.woff')\n        format('woff');\n    font-weight: 700;\n    font-style: normal;\n    unicode-range: U+0900-097f;\n  }\n\n  @font-face {\n    font-family: 'SST Vietnamese';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/c4cc9032-7eee-4a6e-ae8b-f384b1349bcf.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/1b3078ef-2971-4c95-b6ca-13ab528758cb.woff')\n        format('woff');\n    font-weight: 300;\n    font-style: normal;\n  }\n\n  @font-face {\n    font-family: 'SST Vietnamese';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/c1905e2e-a1cb-49de-9bb0-ce3c5ffc85ae.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/341bcc5e-7ac0-44ff-819d-5887892eab1b.woff')\n        format('woff');\n    font-weight: 400;\n    font-style: normal;\n  }\n\n  @font-face {\n    font-family: 'SST Vietnamese';\n    src: url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/4daa2125-53c6-4da8-9614-8a1049eaccc2.woff2')\n        format('woff2'),\n      url('https://webapps-cdn.esri.com/CDN/fonts/v1.0.0/0763eab1-d6ed-4c73-afb0-895f930df099.woff')\n        format('woff');\n    font-weight: 700;\n    font-style: normal;\n  }\n"]);return u=function(){return e},e}var d=(0,a.createGlobalStyle)(u(),(function(e){return e.theme.type.avenirFamily}),(function(e){return e.theme.palette.blue}),(function(e){return e.theme.palette.blue}),(function(e){return e.theme.palette.blue}),(function(e){return e.theme.palette.blue}),(function(e){return e.theme.palette.blue}),(function(e){return e.theme.palette.blue}),(function(e){return e.theme.palette.lighterGray}),(function(e){return e.theme.borderRadius}),(function(e){return e.theme.palette.lightestBlue}),(function(e){return e.theme.palette.lighterBlue}),(function(e){return e.theme.palette.darkBlue}),(function(e){return e.theme.palette.darkBlue}),(function(e){return e.theme.palette.darkBlue}),(function(e){return e.theme.palette.blue}),(function(e){return e.theme.palette.blue}),(function(e){return e.theme.palette.lightestBlue}),(function(e){return e.theme.palette.lighterBlue}),(function(e){return e.theme.palette.Brand_Blue_200}),(function(e){return e.theme.palette.lighterBlue}),(function(e){return e.theme.palette.lighterBlue}),(function(e){return e.theme.palette.Brand_Blue_200}),(function(e){return e.theme.borderRadius}),(function(e){return e.theme.palette.lightestGray}),(function(e){return e.theme.borderRadius}),(function(e){return e.theme.palette.lighterGray}),(function(e){return e.theme.borderRadius}),(function(e){return e.theme.toasterWidth}),(function(e){return(0,o.unitCalc)(e.theme.toasterWidth,-.5,"*")}),s.default.boxShadow,s.default.palette.blue,s.default.type.avenirFamily,s.default.palette.offBlack,s.default.palette.white,s.default.palette.blue,s.default.palette.white,s.default.palette.green,s.default.palette.white,s.default.palette.yellow,s.default.palette.white,s.default.palette.red,s.default.palette.white,(function(){return(0,o.fontSize)(-1)}),s.default.palette.blue,(function(e){return e.showProgress&&(0,a.css)(["visibility:visible;&.progress-hidden{visibility:hidden;}"])})),f=function(e){var t=e.children,n=e.theme;l(e,["children","theme"]);return r.default.createElement(a.ThemeProvider,{theme:n},r.default.createElement(r.Fragment,null,r.default.createElement(d,null),t))};f.propTypes={children:i.default.node,theme:i.default.object},f.defaultProps={theme:s.default};var p=f;t.default=p},function(e,t,n){"use strict";n.r(t),n.d(t,"chartColorSets",(function(){return a})),n.d(t,"chartColors",(function(){return r})),n.d(t,"colors",(function(){return o})),n.d(t,"defaultChartColors",(function(){return i})),n.d(t,"themes",(function(){return s}));var r=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],i=[].concat(r.slice(30,39),r.slice(28,30).reverse()),a=[{name:"default",colors:i},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}],o={"h-yy-010":"#fff7cc","h-yy-020":"#fef3ad","h-yy-030":"#fcee8d","h-yy-040":"#fbea6e","h-yy-050":"#f9e54e","h-yy-060":"#edd317","h-yy-070":"#d9bc00","h-yy-080":"#bfa200","h-yy-090":"#8c7500","h-yy-100":"#5c4e00","h-oy-010":"#ffe2bf","h-oy-020":"#fed3a1","h-oy-030":"#fcc582","h-oy-040":"#fbb664","h-oy-050":"#f9a845","h-oy-060":"#f89927","h-oy-070":"#c67718","h-oy-080":"#9a5b10","h-oy-090":"#6d3f08","h-oy-100":"#402300","h-oo-010":"#ffd8bf","h-oo-020":"#fdc39f","h-oo-030":"#faae7f","h-oo-040":"#f89960","h-oo-050":"#f58440","h-oo-060":"#f36f20","h-oo-070":"#c65a18","h-oo-080":"#9a4410","h-oo-090":"#6d2f08","h-oo-100":"#401900","h-ro-010":"#ffc7b3","h-ro-020":"#f8af95","h-ro-030":"#f09677","h-ro-040":"#e97e5a","h-ro-050":"#e1653c","h-ro-060":"#da4d1e","h-ro-070":"#ad3c16","h-ro-080":"#802c0f","h-ro-090":"#531b07","h-ro-100":"#260a00","h-rr-010":"#ffc6bf","h-rr-020":"#ffaaa1","h-rr-030":"#f2877b","h-rr-040":"#f07062","h-rr-050":"#e65240","h-rr-060":"#d83020","h-rr-070":"#a82b1e","h-rr-080":"#7c1d13","h-rr-090":"#4f0e08","h-rr-100":"#210300","h-pk-010":"#ffd1ef","h-pk-020":"#fabee4","h-pk-030":"#f2a5d6","h-pk-040":"#eb8dc9","h-pk-050":"#e673bb","h-pk-060":"#e04ea6","h-pk-070":"#ba2f7e","h-pk-080":"#851b52","h-pk-090":"#590b32","h-pk-100":"#260404","h-vr-010":"#fadbff","h-vr-020":"#e4beeb","h-vr-030":"#cfa1d7","h-vr-040":"#b983c3","h-vr-050":"#a466af","h-vr-060":"#8e499b","h-vr-070":"#73377e","h-vr-080":"#572561","h-vr-090":"#3c1243","h-vr-100":"#200026","h-vv-010":"#e8d9ff","h-vv-020":"#cdb9eb","h-vv-030":"#b39ad7","h-vv-040":"#987ac3","h-vv-050":"#7e5baf","h-vv-060":"#633b9b","h-vv-070":"#4e2c7e","h-vv-080":"#3a1e61","h-vv-090":"#250f43","h-vv-100":"#100026","h-bb-010":"#c7eaff","h-bb-020":"#9fd4f3","h-bb-030":"#77bde7","h-bb-040":"#50a7da","h-bb-050":"#2890ce","h-bb-060":"#007ac2","h-bb-070":"#00619b","h-bb-080":"#004874","h-bb-090":"#00304d","h-bb-100":"#001726","h-gb-010":"#cef5f4","h-gb-020":"#afedec","h-gb-030":"#8fe6e5","h-gb-040":"#5ae0de","h-gb-050":"#28cecb","h-gb-060":"#00bab5","h-gb-070":"#009b98","h-gb-080":"#007472","h-gb-090":"#004d4c","h-gb-100":"#002625","h-gg-010":"#bdf2c4","h-gg-020":"#a2e4ab","h-gg-030":"#87d692","h-gg-040":"#6bc878","h-gg-050":"#50ba5f","h-gg-060":"#35ac46","h-gg-070":"#288835","h-gg-080":"#1a6324","h-gg-090":"#0d3f14","h-gg-100":"#001a03","h-yg-010":"#e5f7b4","h-yg-020":"#d9ef9f","h-yg-030":"#cde78a","h-yg-040":"#c2e075","h-yg-050":"#b6d860","h-yg-060":"#aad04b","h-yg-070":"#84a338","h-yg-080":"#5e7526","h-yg-090":"#384813","h-yg-100":"#121a00","h-br-010":"#f7e4cb","h-br-020":"#dec6a8","h-br-030":"#c5a885","h-br-040":"#ad8b62","h-br-050":"#946d3f","h-br-060":"#7b4f1c","h-br-070":"#664015","h-br-080":"#51310e","h-br-090":"#3b2307","h-br-100":"#261400","m-yy-010":"#faf7dc","m-yy-020":"#f6f0c1","m-yy-030":"#f2e8a6","m-yy-040":"#ede18b","m-yy-050":"#e9d970","m-yy-060":"#e5d255","m-yy-070":"#bcaa45","m-yy-080":"#8a7d31","m-yy-090":"#584f1c","m-yy-100":"#262107","m-oy-010":"#ffedd6","m-oy-020":"#fce0bd","m-oy-030":"#f8d2a4","m-oy-040":"#f5c58c","m-oy-050":"#f1b773","m-oy-060":"#eeaa5a","m-oy-070":"#bc8645","m-oy-080":"#8a6130","m-oy-090":"#583d1c","m-oy-100":"#261807","m-oo-010":"#ffece0","m-oo-020":"#fcdac5","m-oo-030":"#f8c7aa","m-oo-040":"#f5b590","m-oo-050":"#f1a275","m-oo-060":"#ee905a","m-oo-070":"#bc7145","m-oo-080":"#8a5131","m-oo-090":"#58321c","m-oo-100":"#261207","m-ro-010":"#f7e4dc","m-ro-020":"#f5d0c2","m-ro-030":"#f3bba7","m-ro-040":"#f1a78d","m-ro-050":"#ef9272","m-ro-060":"#ed7e58","m-ro-070":"#bc6345","m-ro-080":"#8a4731","m-ro-090":"#582b1c","m-ro-100":"#582b1c","m-rr-010":"#fadfdc","m-rr-020":"#fccac5","m-rr-030":"#ffb9b0","m-rr-040":"#f79e94","m-rr-050":"#f5867a","m-rr-060":"#eb6c5e","m-rr-070":"#c25347","m-rr-080":"#913d34","m-rr-090":"#5e241e","m-rr-100":"#260a07","m-pk-010":"#fadef0","m-pk-020":"#facdea","m-pk-030":"#f2b1da","m-pk-040":"#eb9dcf","m-pk-050":"#e688c2","m-pk-060":"#e070b4","m-pk-070":"#b8588f","m-pk-080":"#8c4267","m-pk-090":"#592440","m-pk-100":"#260b0b","m-vr-010":"#f6e1fa","m-vr-020":"#e9ceee","m-vr-030":"#dbbbe2","m-vr-040":"#cea8d5","m-vr-050":"#c095c9","m-vr-060":"#b382bd","m-vr-070":"#8e6397","m-vr-080":"#6a4572","m-vr-090":"#46264c","m-vr-100":"#210726","m-vv-010":"#ece6ff","m-vv-020":"#dcd2f2","m-vv-030":"#ccbee5","m-vv-040":"#bbaad7","m-vv-050":"#ab96ca","m-vv-060":"#9b82bd","m-vv-070":"#796397","m-vv-080":"#584572","m-vv-090":"#36264c","m-vv-100":"#140726","m-bb-010":"#dfeffa","m-bb-020":"#c8e3f5","m-bb-030":"#b1d8f1","m-bb-040":"#9bccec","m-bb-050":"#84c1e8","m-bb-060":"#6db5e3","m-bb-070":"#548eb4","m-bb-080":"#3a6884","m-bb-090":"#214155","m-bb-100":"#071a26","m-gb-010":"#dbf2f1","m-gb-020":"#beedec","m-gb-030":"#9fe6e5","m-gb-040":"#8be0df","m-gb-050":"#70d9d7","m-gb-060":"#5cbfbc","m-gb-070":"#53a6a4","m-gb-080":"#40807e","m-gb-090":"#2a5958","m-gb-100":"#102928","m-gg-010":"#e4f0e4","m-gg-020":"#cbe2cb","m-gg-030":"#b2d4b2","m-gg-040":"#9ac699","m-gg-050":"#81b880","m-gg-060":"#68aa67","m-gg-070":"#548953","m-gg-080":"#3f683f","m-gg-090":"#2b472a","m-gg-100":"#172616","m-yg-010":"#f0f7da","m-yg-020":"#e5efc6","m-yg-030":"#dae7b1","m-yg-040":"#cede9d","m-yg-050":"#c3d688","m-yg-060":"#b8ce74","m-yg-070":"#90a15b","m-yg-080":"#687442","m-yg-090":"#3f4728","m-yg-100":"#171a0f","m-br-010":"#faeddf","m-br-020":"#edd9c3","m-br-030":"#e0c6a8","m-br-040":"#d2b28c","m-br-050":"#c59f71","m-br-060":"#b88b55","m-br-070":"#926d41","m-br-080":"#6c4f2d","m-br-090":"#45311a","m-br-100":"#1f1306","l-yy-010":"#f7f5e6","l-yy-020":"#e7e4d1","l-yy-030":"#d7d3bc","l-yy-040":"#c6c1a6","l-yy-050":"#b6b091","l-yy-060":"#a69f7c","l-yy-070":"#837e61","l-yy-080":"#605c47","l-yy-090":"#3d3b2c","l-yy-100":"#1a1911","l-oy-010":"#faf3eb","l-oy-020":"#e9e0d5","l-oy-030":"#d8cdbf","l-oy-040":"#c8b9a8","l-oy-050":"#b7a692","l-oy-060":"#a6937c","l-oy-070":"#837461","l-oy-080":"#605547","l-oy-090":"#3d352c","l-oy-100":"#1a1611","l-oo-010":"#faf1eb","l-oo-020":"#e9ddd5","l-oo-030":"#d8c9bf","l-oo-040":"#c8b4a8","l-oo-050":"#b7a092","l-oo-060":"#a68c7c","l-oo-070":"#836e61","l-oo-080":"#605047","l-oo-090":"#3d322c","l-oo-100":"#1a1411","l-ro-010":"#faf3f0","l-ro-020":"#e9ddd9","l-ro-030":"#d8c8c1","l-ro-040":"#c8b2aa","l-ro-050":"#b79d92","l-ro-060":"#a6877b","l-ro-070":"#836b61","l-ro-080":"#604e47","l-ro-090":"#3d302c","l-ro-100":"#1a1311","l-rr-010":"#faf1f0","l-rr-020":"#eddfdd","l-rr-030":"#dbc6c4","l-rr-040":"#c8adaa","l-rr-050":"#ba9995","l-rr-060":"#ab837e","l-rr-070":"#876764","l-rr-080":"#604a47","l-rr-090":"#3d2e2c","l-rr-100":"#1a1211","l-pk-010":"#faf0f6","l-pk-020":"#e8d7e2","l-pk-030":"#dbc2d2","l-pk-040":"#c9abbe","l-pk-050":"#b897ab","l-pk-060":"#a68097","l-pk-070":"#856376","l-pk-080":"#614755","l-pk-090":"#3d2c35","l-pk-100":"#1a1111","l-vr-010":"#f5edf7","l-vr-020":"#e1d6e4","l-vr-030":"#cebcd1","l-vr-040":"#baa8bf","l-vr-050":"#a791ac","l-vr-060":"#937a99","l-vr-070":"#746079","l-vr-080":"#56465a","l-vr-090":"#372b3a","l-vr-100":"#18111a","l-vv-010":"#f0edf7","l-vv-020":"#dcd8e7","l-vv-030":"#c8c3d7","l-vv-040":"#b5aec6","l-vv-050":"#a199b6","l-vv-060":"#8d84a6","l-vv-070":"#6f6783","l-vv-080":"#504b60","l-vv-090":"#322e3d","l-vv-100":"#13111a","l-bb-010":"#edf3f7","l-bb-020":"#d7e1e7","l-bb-030":"#c1cfd7","l-bb-040":"#acbcc6","l-bb-050":"#96aab6","l-bb-060":"#8098a6","l-bb-070":"#647883","l-bb-080":"#495860","l-bb-090":"#2d373d","l-bb-100":"#11171a","l-gb-010":"#e8f2f2","l-gb-020":"#d7e8e8","l-gb-030":"#c2d7d7","l-gb-040":"#b1c9c9","l-gb-050":"#98b3b2","l-gb-060":"#88a6a5","l-gb-070":"#658584","l-gb-080":"#4b6160","l-gb-090":"#2f3d3d","l-gb-100":"#121a1a","l-gg-010":"#f0f7f0","l-gg-020":"#dde7dd","l-gg-030":"#cad7ca","l-gg-040":"#b7c6b6","l-gg-050":"#a4b6a3","l-gg-060":"#91a690","l-gg-070":"#728371","l-gg-080":"#536053","l-gg-090":"#343d34","l-gg-100":"#151a15","l-yg-010":"#f4f7eb","l-yg-020":"#e3e7d8","l-yg-030":"#d2d7c5","l-yg-040":"#c2c6b3","l-yg-050":"#b1b6a0","l-yg-060":"#a0a68d","l-yg-070":"#7e836f","l-yg-080":"#5d6051","l-yg-090":"#3b3d33","l-yg-100":"#191a15","l-br-010":"#f7f1eb","l-br-020":"#e4ddd4","l-br-030":"#d1c8be","l-br-040":"#bfb4a7","l-br-050":"#ac9f91","l-br-060":"#998b7a","l-br-070":"#796e60","l-br-080":"#5a5146","l-br-090":"#3a332b","l-br-100":"#1a1611","v-yy-120":"#fff766","v-yy-140":"#ffee33","v-yy-160":"#f5d000","v-yy-180":"#ebba17","v-oy-120":"#ffb54d","v-oy-140":"#ff9500","v-oy-160":"#e68600","v-oy-180":"#d17300","v-oo-120":"#ff974d","v-oo-140":"#ff6a00","v-oo-160":"#e05d00","v-oo-180":"#c95100","v-ro-120":"#ff824d","v-ro-140":"#ff4d00","v-ro-160":"#de4300","v-ro-180":"#c93b00","v-rr-120":"#ff624d","v-rr-140":"#ff0015","v-rr-160":"#d90012","v-rr-180":"#b3000f","v-pk-120":"#ff66c2","v-pk-140":"#ff19a4","v-pk-160":"#d11486","v-pk-180":"#c00073","v-vr-120":"#ea80ff","v-vr-140":"#dd33ff","v-vr-160":"#ac08cc","v-vr-180":"#83009e","v-vv-120":"#b580ff","v-vv-140":"#974dff","v-vv-160":"#8129ff","v-vv-180":"#6a0be6","v-bb-120":"#59d6ff","v-bb-140":"#3db8ff","v-bb-160":"#009af2","v-bb-180":"#0089de","v-gb-120":"#59fffc","v-gb-140":"#00f7f3","v-gb-160":"#00e6e2","v-gb-180":"#00cfca","v-gg-120":"#73ff84","v-gg-140":"#3bed52","v-gg-160":"#00b81b","v-gg-180":"#00a118","v-yg-120":"#d7ff73","v-yg-140":"#bbed3b","v-yg-160":"#96cc00","v-yg-180":"#7fab00","d-bb-410":"#47BBFF","d-bb-420":"#00A0FF","d-bb-430":"#0087D7","d-gg-410":"#44ED51","d-gg-420":"#36DA43","d-gg-430":"#11AD1D","d-yy-410":"#FFE24D","d-yy-420":"#FFC900","d-yy-430":"#F4B000","d-rr-410":"#FF7465","d-rr-420":"#FE583E","d-rr-430":"#F3381B","blk-000":"#ffffff","blk-005":"#f8f8f8","blk-010":"#f3f3f3","blk-020":"#eaeaea","blk-030":"#dfdfdf","blk-040":"#d4d4d4","blk-050":"#cacaca","blk-060":"#bfbfbf","blk-070":"#b5b5b5","blk-080":"#aaaaaa","blk-090":"#9f9f9f","blk-100":"#949494","blk-110":"#8a8a8a","blk-120":"#808080","blk-130":"#757575","blk-140":"#6a6a6a","blk-150":"#606060","blk-160":"#555555","blk-170":"#4a4a4a","blk-180":"#404040","blk-190":"#353535","blk-200":"#2b2b2b","blk-210":"#202020","blk-220":"#151515","blk-230":"#0b0b0b","blk-235":"#060606","blk-240":"#000000"},s=[{name:"light",variables:{brand:"#007ac2","brand-hover":"#00619B","brand-press":"#004874",background:"#f8f8f8","foreground-1":"#ffffff","foreground-2":"#f3f3f3","foreground-3":"#eaeaea","text-1":"#151515","text-2":"#4a4a4a","text-3":"#6a6a6a","text-inverse":"#FFFFFF","text-link":"#00619b","border-1":"#cacaca","border-2":"#dfdfdf","border-3":"#eaeaea","border-input":"#949494",info:"#00619b",success:"#35ac46",warning:"#edd317",danger:"#D83020","danger-hover":"#A82B1E","danger-press":"#7C1D13"}},{name:"dark",variables:{brand:"#009AF2","brand-hover":"#007AC2","brand-press":"#00619B",background:"#353535","foreground-1":"#2b2b2b","foreground-2":"#202020","foreground-3":"#151515","text-1":"#ffffff","text-2":"#bfbfbf","text-3":"#9f9f9f","text-inverse":"#151515","text-link":"#00A0FF","border-1":"#4a4a4a","border-2":"#404040","border-3":"#353535","border-input":"#757575",info:"#00A0FF",success:"#36DA43",warning:"#FFC900",danger:"#FE583E","danger-hover":"#FF0015","danger-press":"#D90012"}}]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={Brand_Blue_100:"#b9e0f7",Brand_Blue_150:"#00b9f2",Brand_Blue_200:"#007ac2",Brand_Blue_250:"#004575",Brand_Yellow_100:"#ffec4f",Brand_Orange_100:"#f89927",Brand_Orange_150:"#f36f20",Brand_Orange_200:"#da4d1e",Brand_Red_100:"#de2900",Brand_Green_100:"#d1e391",Brand_Green_150:"#aad04b",Brand_Green_200:"#35ac46",Brand_Green_250:"#2a7433",Brand_Purple_100:"#dfcce3",Brand_Purple_150:"#b279b4",Brand_Purple_200:"#8f499c",Brand_Purple_250:"#6b1978",Brand_Brown_100:"#ecdcb9",Brand_Brown_150:"#be9969",Brand_Brown_200:"#7b4f1c",Brand_Brown_250:"#523b20",Brand_Gray_100:"#b4b4b4",Brand_Gray_150:"#969696",Brand_Gray_200:"#6e6e6e",Brand_Gray_250:"#464646",Calcite_Blue_100:"#d2e9f9",Calcite_Blue_150:"#bcdaed",Calcite_Blue_200:"#6cb4e2",Calcite_Blue_250:"#56a5d8",Calcite_Blue_a100:"#49b0f2",Calcite_Blue_a150:"#419ed9",Calcite_Blue_a200:"#3b8fc4",Calcite_Blue_a250:"#196fa6",Calcite_Yellow_100:"#f3edc7",Calcite_Yellow_150:"#efe397",Calcite_Yellow_200:"#e4d154",Calcite_Yellow_250:"#d8c34b",Calcite_Yellow_a100:"#f2d530",Calcite_Yellow_a150:"#d9bf2b",Calcite_Yellow_a200:"#bda726",Calcite_Yellow_a250:"#a68d00",Calcite_Orange_100:"#fbe1c2",Calcite_Orange_150:"#f6ca92",Calcite_Orange_200:"#eda959",Calcite_Orange_250:"#e79c47",Calcite_Orange_a100:"#ff9f33",Calcite_Orange_a150:"#e8912e",Calcite_Orange_a200:"#d17e21",Calcite_Orange_a250:"#ad6511",Calcite_Green_100:"#ddeedb",Calcite_Green_150:"#9bc19c",Calcite_Green_200:"#67a966",Calcite_Green_250:"#5a9359",Calcite_Green_a100:"#50ad4e",Calcite_Green_a150:"#449443",Calcite_Green_a200:"#338033",Calcite_Green_a250:"#275e26",Calcite_Red_100:"#f3ded7",Calcite_Red_150:"#e4a793",Calcite_Red_200:"#c86a4a",Calcite_Red_250:"#c6542d",Calcite_Red_a100:"#e04f1d",Calcite_Red_a150:"#c7461a",Calcite_Red_a200:"#ab3c16",Calcite_Red_a250:"#8c2907",Calcite_Purple_100:"#e5e1ef",Calcite_Purple_150:"#c4bcdc",Calcite_Purple_200:"#9081bc",Calcite_Purple_250:"#7b6ca7",Calcite_Purple_a100:"#846ebf",Calcite_Purple_a150:"#7461a8",Calcite_Purple_a200:"#61518c",Calcite_Purple_a250:"#4f4273",Calcite_Brown_100:"#e8ddd3",Calcite_Brown_150:"#d2b38f",Calcite_Brown_200:"#b78a54",Calcite_Brown_250:"#a57946",Calcite_Brown_a100:"#bf813a",Calcite_Brown_a150:"#a67032",Calcite_Brown_a200:"#8c5e2a",Calcite_Brown_a250:"#734d22",Calcite_Gray_100:"#f8f8f8",Calcite_Gray_150:"#f4f4f4",Calcite_Gray_200:"#efefef",Calcite_Gray_250:"#e7e7e7",Calcite_Gray_300:"#e0e0e0",Calcite_Gray_350:"#cccccc",Calcite_Gray_400:"#a9a9a9",Calcite_Gray_450:"#959595",Calcite_Gray_500:"#828282",Calcite_Gray_550:"#6e6e6e",Calcite_Gray_600:"#595959",Calcite_Gray_650:"#4c4c4c",Calcite_Gray_700:"#323232",Calcite_Gray_800:"#2b2b2b",Calcite_Highlight_Blue_100:"#e2f1fb",Calcite_Highlight_Blue_150:"#c5e5f9",Calcite_Highlight_Blue_200:"#aadbfa",Calcite_Highlight_Blue_250:"#90cdf2",Calcite_Highlight_Blue_300:"#80bce0",Calcite_Highlight_Blue_350:"#0079c1",Calcite_Highlight_Blue_400:"#005e95",Calcite_Highlight_Green_100:"#cfedcc",Calcite_Highlight_Green_150:"#b0e2b0",Calcite_Highlight_Green_200:"#96ce96",Calcite_Highlight_Green_250:"#7dc17d",Calcite_Highlight_Green_300:"#7bb974",Calcite_Highlight_Green_350:"#31872e",Calcite_Highlight_Green_400:"#2b622b",Calcite_Vibrant_Blue_100:"#c7e9ff",Calcite_Vibrant_Blue_150:"#69dcff",Calcite_Vibrant_Blue_200:"#00dee7",Calcite_Vibrant_Blue_250:"#b3e9f9",Calcite_Vibrant_Yellow_100:"#ffefb7",Calcite_Vibrant_Yellow_150:"#fad817",Calcite_Vibrant_Yellow_200:"#fff000",Calcite_Vibrant_Green_100:"#daffd9",Calcite_Vibrant_Green_150:"#71de6e",Calcite_Vibrant_Green_200:"#a5e800",Calcite_Vibrant_Red_100:"#ffc0b3",Calcite_Vibrant_Red_150:"#ff642e",Calcite_Vibrant_Red_200:"#de2900",Calcite_Vibrant_Purple_100:"#daccff",Calcite_Vibrant_Purple_150:"#b096ff",Calcite_Vibrant_Purple_200:"#f185ff",Calcite_Vibrant_Brown_100:"#ffdbb3",Calcite_Vibrant_Brown_150:"#db8d2f",Calcite_Vibrant_Brown_200:"#ffbc6b"};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CalciteFigure=t.CalciteLi=t.CalciteUl=t.CalciteOl=t.CalciteH6=t.CalciteH5=t.CalciteH4=t.CalciteH3=t.CalciteH2=t.CalciteH1=t.CalciteA=t.CalciteP=t.CalciteBody=t.CalciteHtml=void 0;var r,i=(r=n(21))&&r.__esModule?r:{default:r},a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(194)),o=n(176),s=n(164);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=a.default.html.withConfig({displayName:"CalciteHtml",componentId:"sc-1pkt4xd-0"})(["height:100%;font-size:100%;font-family:'Avenir Next W01','Avenir Next W00','Avenir Next','Avenir','Helvetica Neue',sans-serif;"]);t.CalciteHtml=u,u.defaultProps={theme:s.CalciteTheme},u.displayName="CalciteHtml";var d=a.default.body.withConfig({displayName:"CalciteBody",componentId:"sc-1pkt4xd-1"})(["min-height:100%;margin:0;tracking:0;font-family:'Avenir Next W01','Avenir Next W00','Avenir Next','Avenir','Helvetica Neue',sans-serif;line-height:1.55rem;color:#4c4c4c;background-color:#ffffff;-webkit-font-smoothing:subpixel-antialiased;font-feature-settings:'kern';font-kerning:normal;text-rendering:optimizeLegibility;font-feature-settings:'liga' 1,'calt' 0;"]);t.CalciteBody=d,d.defaultProps={theme:s.CalciteTheme},d.displayName="CalciteBody";var f=a.default.p.withConfig({displayName:"CalciteP",componentId:"sc-1pkt4xd-2"})(["margin-top:0;margin-bottom:1.55rem;"]);t.CalciteP=f,f.defaultProps={theme:s.CalciteTheme},f.displayName="CalciteP";var p=a.default.a.withConfig({displayName:"CalciteA",componentId:"sc-1pkt4xd-3"})(["color:",";text-decoration:none;cursor:pointer;&:hover{color:",";text-decoration:underline;}"],(function(e){return e.theme.linkColor}),(function(e){return e.theme.linkHover}));t.CalciteA=p,p.defaultProps={theme:s.CalciteTheme},p.displayName="CalciteA";var h=a.default.h1.withConfig({displayName:"baseH",componentId:"sc-1pkt4xd-4"})(["font-weight:300;font-style:normal;margin:0 0 "," 0;"],(function(e){return e.theme.baseline}));h.defaultProps={theme:s.CalciteTheme};var b=(0,a.default)(h).withConfig({displayName:"H1",componentId:"sc-1pkt4xd-5"})(["",";"],(0,o.fontSize)(5)),v=function(e){var t=e.children,n=l(e,["children"]);return i.default.createElement(b,n,t)};t.CalciteH1=v,v.displayName="CalciteH1";var y=(0,a.default)(h).withConfig({displayName:"H2",componentId:"sc-1pkt4xd-6"})(["",";"],(0,o.fontSize)(4)),m=function(e){var t=e.children,n=l(e,["children"]);return i.default.createElement(y,c({as:"h2"},n),t)};t.CalciteH2=m,m.displayName="CalciteH2";var g=(0,a.default)(h).withConfig({displayName:"H3",componentId:"sc-1pkt4xd-7"})(["",";"],(0,o.fontSize)(3)),O=function(e){var t=e.children,n=l(e,["children"]);return i.default.createElement(g,c({as:"h3"},n),t)};t.CalciteH3=O,O.displayName="CalciteH3";var j=(0,a.default)(h).withConfig({displayName:"H4",componentId:"sc-1pkt4xd-8"})(["",";"],(0,o.fontSize)(2)),w=function(e){var t=e.children,n=l(e,["children"]);return i.default.createElement(j,c({as:"h4"},n),t)};t.CalciteH4=w,w.displayName="CalciteH4";var _=(0,a.default)(h).withConfig({displayName:"H5",componentId:"sc-1pkt4xd-9"})(["",";"],(0,o.fontSize)(1)),k=function(e){var t=e.children,n=l(e,["children"]);return i.default.createElement(_,c({as:"h5"},n),t)};t.CalciteH5=k,k.displayName="CalciteH5";var x=(0,a.default)(h).withConfig({displayName:"H6",componentId:"sc-1pkt4xd-10"})(["",";"],(0,o.fontSize)(0)),S=function(e){var t=e.children,n=l(e,["children"]);return i.default.createElement(x,c({as:"h6"},n),t)};t.CalciteH6=S,S.displayName="CalciteH6";var T=a.default.div.withConfig({displayName:"BaseList",componentId:"sc-1pkt4xd-11"})(["margin-top:0;margin-bottom:",";padding:0;list-style-position:inside;margin-bottom:",";margin-left:",";",";html[dir='rtl'] &{margin-left:initial;margin-right:",";}ul,ol{margin-bottom:0;}",";"],(function(e){return e.theme.baseline}),(function(e){return e.theme.baseline}),(function(e){return(0,o.unitCalc)(e.theme.baseline,2,"/")}),(0,o.fontSize)(-1),(function(e){return(0,o.unitCalc)(e.theme.baseline,2,"/")}),(function(e){return e.plain&&(0,a.css)(["margin-left:0;list-style:none;html[dir='rtl'] &{margin-left:initial;margin-right:0;}li{margin-left:0;html[dir='rtl'] &{margin-left:initial;margin-right:0;}}"])}));T.defaultProps={theme:s.CalciteTheme};var E=function(e){var t=e.children,n=l(e,["children"]);return i.default.createElement(T,c({as:"ol"},n),t)};t.CalciteOl=E,E.displayName="CalciteOl";var C=function(e){var t=e.children,n=l(e,["children"]);return i.default.createElement(T,c({as:"ul"},n),t)};t.CalciteUl=C,C.displayName="CalciteUl";var P=a.default.li.withConfig({displayName:"CalciteLi",componentId:"sc-1pkt4xd-12"})(["list-style-position:outside;margin:"," 0 "," 1.5rem;html[dir='rtl'] &{margin:"," 1.5rem "," 0;}ul,ol{margin-bottom:0;}"],(function(e){return(0,o.unitCalc)(e.theme.baseline,4,"/")}),(function(e){return(0,o.unitCalc)(e.theme.baseline,4,"/")}),(function(e){return(0,o.unitCalc)(e.theme.baseline,4,"/")}),(function(e){return(0,o.unitCalc)(e.theme.baseline,4,"/")}));t.CalciteLi=P,P.defaultProps={theme:s.CalciteTheme},P.displayName="CalciteLi";var I=a.default.figure.withConfig({displayName:"CalciteFigure",componentId:"sc-1pkt4xd-13"})(["margin:0 0 1.55rem 0;"]);t.CalciteFigure=I,I.defaultProps={theme:s.CalciteTheme},I.displayName="CalciteFigure"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(21))&&r.__esModule?r:{default:r};function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=function(e){var t=e.color,n=void 0===t?"currentColor":t,r=e.size,s=void 0===r?24:r,c=e.filled,l=void 0!==c&&c,u=e.className,d=(e.children,o(e,["color","size","filled","className","children"])),f="calcite-icon";return u&&(f+=" ".concat(u)),s<=16?i.default.createElement("svg",a({},d,{width:s,height:s,fill:n,viewBox:"0 0 16 16",className:f}),l?i.default.createElement("path",{d:"M9.414 8l3.535 3.535-1.414 1.414L8 9.414 4.465 12.95 3.05 11.535 6.586 8 3.05 4.465 4.465 3.05 8 6.586l3.535-3.537 1.414 1.416z"}):i.default.createElement("path",{d:"M8.718 8l5.303 5.303-.707.707L8.01 8.707 2.707 14.01 2 13.303 7.303 8 2 2.697l.707-.707L8.01 7.293l5.304-5.303.707.707z"})):s<=24?i.default.createElement("svg",a({},d,{width:s,height:s,fill:n,viewBox:"0 0 24 24",className:f}),l?i.default.createElement("path",{d:"M13.621 11.5l4.95 4.95-2.121 2.121-4.95-4.95-4.95 4.95-2.12-2.121 4.95-4.95-4.95-4.95 2.12-2.12 4.95 4.95 4.95-4.95 2.12 2.12z"}):i.default.createElement("path",{d:"M13.207 12.5l7.778 7.778-.707.707-7.778-7.778-7.778 7.778-.707-.707 7.778-7.778-7.778-7.778.707-.707 7.778 7.778 7.778-7.778.707.707z"})):i.default.createElement("svg",a({},d,{width:s,height:s,fill:n,viewBox:"0 0 32 32",className:f}),l?i.default.createElement("path",{d:"M18.83 16l6.363 6.363-2.829 2.828-6.363-6.363-6.364 6.365-2.83-2.83L13.173 16 6.808 9.635l2.829-2.828L16 13.17l6.363-6.363 2.83 2.83z"}):i.default.createElement("path",{d:"M16.707 16l10.607 10.606-.708.707L16 16.707 5.394 27.313l-.708-.707L15.293 16 4.686 5.394l.708-.707L16 15.293 26.606 4.687l.708.707z"}))};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(21))&&r.__esModule?r:{default:r};function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=function(e){var t=e.color,n=void 0===t?"currentColor":t,r=e.size,s=void 0===r?24:r,c=e.filled,l=void 0!==c&&c,u=e.className,d=(e.children,o(e,["color","size","filled","className","children"])),f="calcite-icon";return u&&(f+=" ".concat(u)),s<=16?i.default.createElement("svg",a({},d,{width:s,height:s,fill:n,viewBox:"0 0 16 16",className:f}),l?i.default.createElement("path",{d:"M8.775 14L9 15l-.879.662a.909.909 0 0 1-1.242 0L6 15l.225-1-.153-.678a.32.32 0 0 1 .03-.221.177.177 0 0 1 .15-.101h2.496a.177.177 0 0 1 .15.1.32.32 0 0 1 .03.222zm3.146-9.237c-.15 2.514-1.835 3.714-2.06 4.502-.225.787-.112 1.235-.263 1.909-.15.674-.487.826-.487.826H5.889s-.338-.152-.487-.826c-.15-.674-.038-1.122-.263-1.91-.225-.787-1.91-1.987-2.06-4.5A4.455 4.455 0 0 1 4.68 1.071a4.386 4.386 0 0 1 5.727.074 4.452 4.452 0 0 1 1.514 3.617zM8 8H7v3h1zm1-2H6v1h3z"}):i.default.createElement("path",{d:"M10.495 1.179a4.5 4.5 0 0 0-5.99 0 4.49 4.49 0 0 0-1.455 3.72 6.342 6.342 0 0 0 1.38 3.574 3.174 3.174 0 0 1 .426.657A5.66 5.66 0 0 1 5 10v1l.277 1.5L5 13.715l1.4.966a2.02 2.02 0 0 0 2.2 0l1.4-.966-.277-1.215L10 11v-1a5.66 5.66 0 0 1 .145-.87 3.174 3.174 0 0 1 .426-.656 6.342 6.342 0 0 0 1.379-3.576 4.49 4.49 0 0 0-1.455-3.72zM9 13.475l-.868.61a1.1 1.1 0 0 1-1.264 0L6 13.474V12h3zm.769-5.631a3.32 3.32 0 0 0-.585.98 4.716 4.716 0 0 0-.171 1.118C8.993 10.266 9 11.02 9 11.02H8V8H7v3.02H6s.007-.754-.013-1.078a4.716 4.716 0 0 0-.17-1.118 3.32 3.32 0 0 0-.586-.98 5.377 5.377 0 0 1-1.283-3.037 3.7 3.7 0 0 1 1.119-3.01 3.757 3.757 0 0 1 4.866 0 3.7 3.7 0 0 1 1.119 3.01 5.377 5.377 0 0 1-1.283 3.037zM9 6v1H6V6z"})):s<=24?i.default.createElement("svg",a({},d,{width:s,height:s,fill:n,viewBox:"0 0 24 24",className:f}),l?i.default.createElement("path",{d:"M11 13h1v4h-1zm3.895 5.45a.311.311 0 0 0-.12-.27l-.232-.18h-6.19l-.232.18a.312.312 0 0 0 .04.518l1.387.771-1.367.76a.311.311 0 0 0-.028.526l3.09 2.18a.356.356 0 0 0 .41 0l3.09-2.18a.311.311 0 0 0-.029-.527l-1.366-.759 1.388-.77a.312.312 0 0 0 .159-.25zM11.59 0l-.173.002L11.244 0a6.2 6.2 0 0 0-6.182 6.698c.31 2.575 2.784 5.207 2.939 6.134.13.78.116 1.844.199 2.472A2.542 2.542 0 0 0 9.088 17H10v-4.412L8.83 9.37l.94-.342L10.85 12h1.3l1.08-2.97.94.341L13 12.588V17h.745a2.542 2.542 0 0 0 .889-1.696c.083-.628.068-1.692.199-2.472.154-.927 2.628-3.559 2.938-6.134A6.2 6.2 0 0 0 11.59 0z"}):i.default.createElement("path",{d:"M16.337 3.055a6.057 6.057 0 0 0-4.675-2.051l-.162.002-.162-.002a6.057 6.057 0 0 0-4.675 2.05 6.46 6.46 0 0 0-1.63 4.802 11.406 11.406 0 0 0 2.014 4.465 6.703 6.703 0 0 1 .75 1.322 12.957 12.957 0 0 1 .113 1.333c.019.366.037.71.074.994a2.84 2.84 0 0 0 .704 1.576l-.525.458a.804.804 0 0 0 .066 1.264l.414.293-.364.263a.804.804 0 0 0-.333.689.794.794 0 0 0 .37.641l2.45 1.625a1.311 1.311 0 0 0 .723.22h.016a1.316 1.316 0 0 0 .73-.22l2.43-1.613a.803.803 0 0 0 .059-1.34l-.367-.265.418-.295a.806.806 0 0 0 .062-1.263l-.525-.458a2.87 2.87 0 0 0 .707-1.596c.034-.263.052-.607.07-.973a12.957 12.957 0 0 1 .114-1.333 6.703 6.703 0 0 1 .75-1.322 11.406 11.406 0 0 0 2.014-4.465 6.46 6.46 0 0 0-1.63-4.801zm-2.43 17.414l-2.225 1.476a.41.41 0 0 1-.185.053h-.002a.32.32 0 0 1-.177-.053L9.093 20.47l1.264-.923-1.35-.953.68-.594h3.626l.68.594-1.35.953zM12 17h-1v-3h1zm4.975-9.263a10.671 10.671 0 0 1-1.863 4.042 5.638 5.638 0 0 0-.895 1.7 13.401 13.401 0 0 0-.125 1.446c-.018.336-.033.65-.07.93A1.898 1.898 0 0 1 13.456 17H13v-3.421l1.075-3.325-.951-.309L12.136 13h-1.272l-.988-3.055-.951.309L10 13.579V17h-.456a1.93 1.93 0 0 1-.57-1.182c-.033-.243-.048-.557-.066-.893a13.401 13.401 0 0 0-.125-1.446 5.638 5.638 0 0 0-.895-1.7 10.671 10.671 0 0 1-1.863-4.042 5.49 5.49 0 0 1 1.386-4.02 5.083 5.083 0 0 1 3.927-1.713l.162.002.162-.002a5.083 5.083 0 0 1 3.927 1.714 5.49 5.49 0 0 1 1.386 4.02z"})):i.default.createElement("svg",a({},d,{width:s,height:s,fill:n,viewBox:"0 0 32 32",className:f}),l?i.default.createElement("path",{d:"M19.71 23.993L18 24.5l1.814.756a.265.265 0 0 1 0 .488L18 26.5l1.75.73a.382.382 0 0 1 .068.667l-3.814 2.606L12.16 27.9a.492.492 0 0 1 0-.8l1.84-.6-1.84-.6a.492.492 0 0 1 0-.8l1.84-.6-1.71-.507a.82.82 0 0 1-.334-.546.807.807 0 0 1 .076-.447h7.936a.807.807 0 0 1 .076.447.82.82 0 0 1-.335.546zM15.96 1c-5.559.105-8.202 4.189-7.942 8.53.26 4.398 3.227 6.497 3.62 7.876.395 1.377.198 2.169.461 3.35.094.423.34 1.244.76 1.244H14v-5.52l-1.075-3.326.951-.308L14.896 16h2.208l1.02-3.154.951.308L18 16.48V22h1.062c.42 0 .666-.82.76-1.243.263-1.181.066-1.973.46-3.35.394-1.38 3.36-3.478 3.622-7.876.26-4.341-2.384-8.425-7.943-8.53zM15 22h2v-5h-2zm4-1h-6v1h6z"}):i.default.createElement("path",{d:"M21.798 3.583A8.535 8.535 0 0 0 15.49 1a8.522 8.522 0 0 0-6.288 2.583 8.65 8.65 0 0 0-2.144 6.477 11.647 11.647 0 0 0 2.749 6.58 5.734 5.734 0 0 1 .891 1.404 7.946 7.946 0 0 1 .272 1.88 9.118 9.118 0 0 0 .18 1.54 3.287 3.287 0 0 0 .274.792l-.205.267A1.32 1.32 0 0 0 11.5 24.4l.14.1-.272.193a.992.992 0 0 0 .002 1.615l.27.192-.272.193a.992.992 0 0 0 .012 1.621l1.17.792a5.237 5.237 0 0 0 5.9 0l1.182-.8a.992.992 0 0 0-.002-1.614l-.27-.192.272-.193a.992.992 0 0 0-.002-1.615l-.27-.192.138-.099a1.321 1.321 0 0 0 .282-1.88l-.202-.263a3.34 3.34 0 0 0 .272-.793 9.14 9.14 0 0 0 .18-1.541 7.946 7.946 0 0 1 .272-1.88 5.734 5.734 0 0 1 .891-1.403 11.647 11.647 0 0 0 2.75-6.58 8.652 8.652 0 0 0-2.145-6.478zM17.89 28.278a4.243 4.243 0 0 1-4.78 0l-1.159-.771 1.41-1.007-1.41-.993 1.41-1.007-1.28-.915a.32.32 0 0 1-.068-.454l.13-.171 6.718.005.125.164a.328.328 0 0 1 .064.243.322.322 0 0 1-.132.214l-1.278.914 1.409.993-1.41 1.007 1.42.986zM16 22.005l-1 .002V17h1zm6.944-12.004a10.629 10.629 0 0 1-2.551 6.04 6.033 6.033 0 0 0-1.052 1.728 8.875 8.875 0 0 0-.309 2.098 8.252 8.252 0 0 1-.159 1.381 1.419 1.419 0 0 1-.321.752L17 22.003V16.58l1.075-3.325-.951-.309L16.136 16h-1.272l-.988-3.055-.951.309L14 16.579v5.43l-1.534.004c-.002-.001-.196-.12-.339-.767a8.206 8.206 0 0 1-.16-1.379 8.875 8.875 0 0 0-.308-2.098 6.033 6.033 0 0 0-1.052-1.728A10.629 10.629 0 0 1 8.056 10a7.66 7.66 0 0 1 1.88-5.737A7.535 7.535 0 0 1 15.49 2a7.549 7.549 0 0 1 5.573 2.263A7.66 7.66 0 0 1 22.944 10z"}))};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(21))&&r.__esModule?r:{default:r};function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=function(e){var t=e.color,n=void 0===t?"currentColor":t,r=e.size,s=void 0===r?24:r,c=e.filled,l=void 0!==c&&c,u=e.className,d=(e.children,o(e,["color","size","filled","className","children"])),f="calcite-icon";return u&&(f+=" ".concat(u)),s<=16?i.default.createElement("svg",a({},d,{width:s,height:s,fill:n,viewBox:"0 0 16 16",className:f}),l?i.default.createElement("path",{d:"M8 .15A7.85 7.85 0 1 0 15.85 8 7.85 7.85 0 0 0 8 .15zM6.557 11.592L3.31 8.346l1.163-1.162L6.557 9.27l5.172-5.17 1.162 1.162z"}):i.default.createElement("path",{d:"M3.735 8.346l.738-.738 2.084 2.088 4.77-4.77.738.737-5.508 5.505zM14.8 7.5A7.3 7.3 0 1 1 7.5.2a7.3 7.3 0 0 1 7.3 7.3zm-1 0a6.3 6.3 0 1 0-6.3 6.3 6.307 6.307 0 0 0 6.3-6.3z"})):s<=24?i.default.createElement("svg",a({},d,{width:s,height:s,fill:n,viewBox:"0 0 24 24",className:f}),l?i.default.createElement("path",{d:"M23 11.5A11.5 11.5 0 1 1 11.5 0 11.5 11.5 0 0 1 23 11.5zm-5.5-6.018l-8.5 8.5-3.5-3.5-2 2L9.018 18l.018-.018L11.018 16l8.5-8.5z"}):i.default.createElement("path",{d:"M6 12.689l.637-.636L9.5 14.727l7.022-6.87.637.637L9.5 16zM21.8 11.5A10.3 10.3 0 1 1 11.5 1.2a10.297 10.297 0 0 1 10.3 10.3zm-1 0a9.3 9.3 0 1 0-9.3 9.3 9.31 9.31 0 0 0 9.3-9.3z"})):i.default.createElement("svg",a({},d,{width:s,height:s,fill:n,viewBox:"0 0 32 32",className:f}),l?i.default.createElement("path",{d:"M30 16A14 14 0 1 1 16 2a14 14 0 0 1 14 14zm-6.11-7.72L12.823 19.346 8.36 14.883l-2.486 2.486 6.95 6.95 13.554-13.553z"}):i.default.createElement("path",{d:"M8.581 17.276l.637-.636 3.288 3.098 10.073-9.92.637.637-10.71 10.556zM28.8 15.5A13.3 13.3 0 1 1 15.5 2.2a13.3 13.3 0 0 1 13.3 13.3zm-1 0a12.3 12.3 0 1 0-12.3 12.3 12.314 12.314 0 0 0 12.3-12.3z"}))};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(21))&&r.__esModule?r:{default:r};function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=function(e){var t=e.color,n=void 0===t?"currentColor":t,r=e.size,s=void 0===r?24:r,c=e.filled,l=void 0!==c&&c,u=e.className,d=(e.children,o(e,["color","size","filled","className","children"])),f="calcite-icon";return u&&(f+=" ".concat(u)),s<=16?i.default.createElement("svg",a({},d,{width:s,height:s,fill:n,viewBox:"0 0 16 16",className:f}),l?i.default.createElement("path",{d:"M14.894 12.552l-6-11.998a1 1 0 0 0-1.787 0l-6 11.998A.998.998 0 0 0 2 13.999h12a.998.998 0 0 0 .894-1.447zM9 12H7v-2h2zm0-3H7V4h2z"}):i.default.createElement("path",{d:"M14.78 14.645L8.255 1.52a.938.938 0 0 0-.84-.52.938.938 0 0 0-.84.522L.092 14.647A.938.938 0 0 0 .932 16h13.009a.937.937 0 0 0 .838-1.355zm-.724.49a.137.137 0 0 1-.115.065H.933a.137.137 0 0 1-.116-.063.139.139 0 0 1-.008-.135L7.293 1.876a.14.14 0 0 1 .123-.076.138.138 0 0 1 .125.077l6.521 13.124a.138.138 0 0 1-.006.135zM7.495 11.5a.988.988 0 0 1 1 .976v.048a1 1 0 0 1-2 0v-.048a.988.988 0 0 1 1-.976zM7.018 6h.977v4h-.977z"})):s<=24?i.default.createElement("svg",a({},d,{width:s,height:s,fill:n,viewBox:"0 0 24 24",className:f}),l?i.default.createElement("path",{d:"M22.3 19.795l-9-17.901a1.5 1.5 0 0 0-2.597 0L1.7 19.795a1.502 1.502 0 0 0 0 1.502A1.456 1.456 0 0 0 2.998 22H21a1.458 1.458 0 0 0 1.299-.703 1.506 1.506 0 0 0 .001-1.502zM13 19h-2v-2h2zm0-3h-2V8h2z"}):i.default.createElement("path",{d:"M23.767 20.569L13.995 2.827a1.745 1.745 0 0 0-2.969 0l-9.8 17.742a1.603 1.603 0 0 0 0 1.656 1.678 1.678 0 0 0 1.48.775H22.28a1.68 1.68 0 0 0 1.484-.775 1.609 1.609 0 0 0 .003-1.656zm-.861 1.143a.725.725 0 0 1-.626.288H2.708a.723.723 0 0 1-.623-.286.605.605 0 0 1-.001-.632l9.82-17.773A.71.71 0 0 1 12.508 3a.73.73 0 0 1 .629.342l9.751 17.708a.626.626 0 0 1 .017.662zM13 16h-1V9h1zm.5 2.5a1 1 0 1 1-1-1 1.002 1.002 0 0 1 1 1z"})):i.default.createElement("svg",a({},d,{width:s,height:s,fill:n,viewBox:"0 0 32 32",className:f}),l?i.default.createElement("path",{d:"M29.733 27.06L17.734 3.191a2 2 0 0 0-3.463 0L2.268 27.061a2.003 2.003 0 0 0 0 2.001 1.941 1.941 0 0 0 1.73.938H28a1.944 1.944 0 0 0 1.731-.938 2.008 2.008 0 0 0 .002-2.002zM17 25h-2v-2h2zm0-4h-2V11h2z"}):i.default.createElement("path",{d:"M30.845 27.305L18.182 2.99a1.844 1.844 0 0 0-3.268-.005L2.158 27.3A1.844 1.844 0 0 0 3.79 30h25.42a1.844 1.844 0 0 0 1.635-2.695zm-.915 1.29a.847.847 0 0 1-.72.405H3.79a.843.843 0 0 1-.746-1.235L15.799 3.45a.843.843 0 0 1 1.495.001l12.664 24.315a.848.848 0 0 1-.028.828zM17.5 25.5a1 1 0 1 1-1-1 1.002 1.002 0 0 1 1 1zM17 22h-1V11h1z"}))};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(96)),i=o(n(21)),a=n(847);function o(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=function(e){var t=e.text,n=e.sizeRatio,r=e.color,o=c(e,["text","sizeRatio","color"]),l=17*n;return i.default.createElement(a.StyledLoader,s({sizeRatio:l},o),i.default.createElement(a.StyledLoaderBars,{sizeRatio:l,color:r}),function(e){if(e)return i.default.createElement(a.StyledLoaderText,{sizeRatio:l},e)}(t))};l.propTypes={text:r.default.string,sizeRatio:r.default.number,color:r.default.string},l.defaultProps={sizeRatio:1},l.displayName="Loader";var u=l;t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StyledLoaderText=t.StyledLoaderBars=t.StyledLoader=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(194)),i=n(176),a=n(164);var o={loaderWidth:"0.85em",loaderHeight:"2em",loaderZoom:"0.5em",loaderSpacing:"1.25em",loaderSpeed:"0.8s",loaderDelay:"0.16s",loaderBlue:a.CalciteTheme.palette.blue},s=function(e){return(0,r.css)([""," "," infinite ease-in-out;"],function(e){return(0,r.keyframes)(["0%,80%,100%{opacity:.75;box-shadow:0 0 ",";height:",";}40%{opacity:1;box-shadow:0 -0.5em ",";height:",";}"],e||o.loaderBlue,o.loaderHeight,e||o.loaderBlue,(0,i.unitCalc)(o.loaderHeight,o.loaderZoom,"+"))}(e),o.loaderSpeed)},c=function(e){return(0,r.css)(["background:",";animation:",";width:",";height:",";"],e||o.loaderBlue,s(e),o.loaderWidth,o.loaderHeight)},l=function(e){return(0,r.css)(["",";position:absolute;top:0;content:'';"],c(e))},u=r.default.div.withConfig({displayName:"StyledLoader",componentId:"v05kzr-0"})(["position:relative;min-height:","px;"],(function(e){return 3*e.sizeRatio}));t.StyledLoader=u,u.defaultProps={theme:a.CalciteTheme};var d=r.default.div.withConfig({displayName:"StyledLoaderBars",componentId:"v05kzr-1"})(["",";text-indent:-9999em;margin:auto;position:absolute;right:",";font-size:","px;animation-delay:",";margin:"," 0 0;&:before{",";left:-",";html[dir='rtl'] &{animation-delay:",";}}&:after{",";left:",";animation-delay:",";html[dir='rtl'] &{animation-delay:initial;}}"],(function(e){return c(e.color)}),(function(e){return"calc(50% - ".concat(parseFloat(o.loaderWidth)/2,"em)")}),(function(e){return e.sizeRatio}),o.loaderDelay,(function(e){return(0,i.unitCalc)(o.loaderHeight,.25,"*")}),(function(e){return l(e.color)}),o.loaderSpacing,(0,i.unitCalc)(o.loaderDelay,2,"*"),(function(e){return l(e.color)}),o.loaderSpacing,(0,i.unitCalc)(o.loaderDelay,2,"*"));t.StyledLoaderBars=d,d.defaultProps={theme:a.CalciteTheme};var f=r.default.div.withConfig({displayName:"StyledLoaderText",componentId:"v05kzr-2"})(["text-align:center;padding-top:","px;",";"],(function(e){return 3.5*e.sizeRatio}),(0,i.fontSize)(0));t.StyledLoaderText=f,f.defaultProps={theme:a.CalciteTheme}},function(e,t,n){"use strict";var r=n(21),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,a={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!c.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:u,props:a,_owner:o.current}}t.jsx=l,t.jsxs=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(96))&&r.__esModule?r:{default:r},a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(21)),o=n(673),s=n(674);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var d=function(e){var t=e.children,n=e.href,r=e.iconButton,i=e.icon,d=e.iconPosition,f=u(e,["children","href","iconButton","icon","iconPosition"]),p=(0,a.useContext)(s.ButtonGroupContext),h=function(e){if(e)return a.default.cloneElement(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}({},e.props,{className:"".concat(e.props.className," ").concat(o.StyledIconClass.styledComponentId)}))};return a.default.createElement(o.StyledButton,c({iconButton:r,iconPosition:d,grouped:p.grouped,isToggle:p.isToggle,as:n?"a":"button",href:n},f),"before"===d?h(i):null,t,"after"===d?h(i):null)};d.propTypes={children:i.default.node,type:i.default.oneOf(["button","reset","submit"]),inline:i.default.bool,transparent:i.default.bool,clear:i.default.bool,clearGray:i.default.bool,clearWhite:i.default.bool,white:i.default.bool,extraSmall:i.default.bool,small:i.default.bool,large:i.default.bool,extraLarge:i.default.bool,fullWidth:i.default.bool,half:i.default.bool,red:i.default.bool,green:i.default.bool,disabled:i.default.bool,href:i.default.string,icon:i.default.node,iconButton:i.default.bool,iconPosition:i.default.oneOf(["after","before"])},d.defaultProps={type:"button",iconPosition:"after"},d.displayName="Button";var f=d;t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(96)),i=o(n(21)),a=n(390);function o(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=function(e){var t=e.children,n=e.contentWidth,r=e.contentMaxWidth,o=c(e,["children","contentWidth","contentMaxWidth"]);return i.default.createElement(a.StyledTopNavContainer,null,i.default.createElement(a.StyledTopNav,s({contentWidth:n,contentMaxWidth:r},o),t," "))};l.propTypes={children:r.default.node,contentWidth:r.default.string,contentMaxWidth:r.default.string},l.defaultProps={},l.displayName="TopNav";var u=l;t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"SubNavTitle",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"SubNavList",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"SubNavLink",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"SubNavActions",{enumerable:!0,get:function(){return s.default}});var r=c(n(484)),i=c(n(853)),a=c(n(854)),o=c(n(855)),s=c(n(856));function c(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StyledSpanCrumb=t.StyledCrumb=t.StyledBreadcrumbs=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(194)),i=n(176),a=n(568),o=n(164),s=n(350);var c=r.default.nav.withConfig({displayName:"StyledBreadcrumbs",componentId:"z9j3tq-0"})(["",";color:",";display:flex;"],(0,i.fontSize)(-2),(function(e){return e.theme.palette.darkerGray}));t.StyledBreadcrumbs=c,c.defaultProps={theme:o.CalciteTheme};var l=(0,r.default)(s.CalciteA).withConfig({displayName:"StyledCrumb",componentId:"z9j3tq-1"})(["color:",";&::before{content:'","';color:",";font-weight:400;display:inline-block;padding:0 0.5rem;}&:first-child::before{display:none;}&:last-child{font-weight:600;}",";"],(function(e){return e.theme.palette.darkerGray}),(function(e){return e.dividerCharacter}),(function(e){return e.theme.palette.darkerGray}),(function(e){return e.white&&(0,r.css)(["color:",";",";&::before{color:",";}"],e.theme.palette.white,(0,a.linkColor)(e.theme.palette.white,e.theme.palette.lightestGray),e.theme.palette.white)}));t.StyledCrumb=l,l.defaultProps={theme:o.CalciteTheme};var u=r.default.span.withConfig({displayName:"StyledSpanCrumb",componentId:"z9j3tq-2"})(["color:",";&::before{content:'","';color:",";font-weight:400;display:inline-block;padding:0 0.5rem;}&:first-child::before{display:none;}&:last-child{font-weight:600;}",";"],(function(e){return e.theme.palette.darkerGray}),(function(e){return e.dividerCharacter}),(function(e){return e.theme.palette.darkerGray}),(function(e){return e.white&&(0,r.css)(["color:",";&::before{color:",";}"],e.theme.palette.white,e.theme.palette.white)}));t.StyledSpanCrumb=u,u.defaultProps={theme:o.CalciteTheme}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(96))&&r.__esModule?r:{default:r},a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(21)),o=n(437),s=n(484);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=function(e){var t=e.children,n=l(e,["children"]),r=(0,a.useContext)(s.SubNavContext),i=r.legacy,u=r.blue;return a.default.createElement(o.StyledSubNavTitle,c({blue:u,legacy:i},n),t)};u.propTypes={children:i.default.node},u.defaultProps={},u.displayName="SubNavTitle";var d=u;t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(96))&&r.__esModule?r:{default:r},a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(21)),o=n(484),s=n(437);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=function(e){var t=e.children,n=l(e,["children"]),r=(0,a.useContext)(o.SubNavContext).legacy;return a.default.createElement(s.StyledSubNavList,c({},n,{legacy:r}),t)};u.propTypes={children:i.default.node},u.defaultProps={},u.displayName="SubNavList";var d=u;t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(96))&&r.__esModule?r:{default:r},a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(21)),o=n(484),s=n(437);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=function(e){var t=e.children,n=e.active,r=l(e,["children","active"]),i=(0,a.useContext)(o.SubNavContext),u=i.legacy,d=i.backgroundColor;return a.default.createElement(s.StyledSubNavLink,c({active:n,legacy:u,backgroundColor:d},r),t)};u.propTypes={children:i.default.node,active:i.default.bool},u.defaultProps={active:void 0},u.displayName="SubNavLink";var d=u;t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(96)),i=o(n(21)),a=n(437);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=function(e){var t=e.children,n=s(e,["children"]);return i.default.createElement(a.StyledSubNavActions,n,t)};c.propTypes={children:r.default.node},c.defaultProps={},c.displayName="SubNavActions";var l=c;t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(21)),i=u(n(96)),a=u(n(858)),o=u(n(859)),s=u(n(862)),c=u(n(885)),l=u(n(888));function u(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==d(t)&&"function"!==typeof t?y(e):t}(this,b(t).call(this,e)),m(y(y(n)),"openAccountControl",(function(){n.setState({open:!0})})),m(y(y(n)),"closeAccountControl",(function(){n.setState({open:!1})})),m(y(y(n)),"toggleAccountControl",(function(){n.setState({open:!n.state.open})})),m(y(y(n)),"_getThumbnail",(function(e,t,n){var r=e.username,i=e.thumbnail,a=t||"",o=n.allSSL?"https":"http";return"".concat(o,"://").concat(n.portalHostname,"/sharing/rest/community/users/").concat(r,"/info/").concat(i,"?token=").concat(a)})),m(y(y(n)),"_getAvatar",(function(e,t,i,a){if(e.thumbnail)return r.default.createElement(c.default,{src:n._getThumbnail(e,t,i),size:a});if(e.firstName&&e.lastName){var o=e.firstName[0]+e.lastName[0];return o=o.toUpperCase(),r.default.createElement(c.default,{size:a,fontSize:.5*a},o)}return r.default.createElement(c.default,{size:a},r.default.createElement(l.default,{size:.7*a}))})),n.state={open:!1},n}var n,i,u;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,e),n=t,(i=[{key:"render",value:function(){var e=this.props,t=e.user,n=e.portal,i=e.token,c=e.onRequestSwitchAccount,l=e.onRequestSignOut,u=e.children,d=e.hideSwitchAccount,h=e.switchAccountLabel,b=e.signOutLabel,v=e.appendToBody,y=p(e,["user","portal","token","onRequestSwitchAccount","onRequestSignOut","children","hideSwitchAccount","switchAccountLabel","signOutLabel","appendToBody"]);return r.default.createElement(s.default,{targetEl:r.default.createElement(a.default,f({onClick:this.toggleAccountControl,avatar:this._getAvatar(this.props.user,this.props.token,this.props.portal,32),fullName:t.fullName,username:t.username,open:this.state.open},y)),open:this.state.open,onRequestClose:this.closeAccountControl,placement:"bottom-end",positionFixed:!0,appendToBody:v},r.default.createElement(o.default,{user:t,portal:n,avatar:this._getAvatar(t,i,n,120),style:{width:"410px"},switchAccountLabel:h,signOutLabel:b,hideSwitchAccount:d,onRequestSwitchAccount:c,onRequestSignOut:l},u))}}])&&h(n.prototype,i),u&&h(n,u),t}(r.Component);g.propTypes={user:i.default.object.isRequired,portal:i.default.object.isRequired,token:i.default.string,switchAccountLabel:i.default.string,signOutLabel:i.default.string,hideSwitchAccount:i.default.bool,onRequestSwitchAccount:i.default.func,onRequestSignOut:i.default.func,appendToBody:i.default.bool},g.defaultProps={switchAccountLabel:"Switch Account",signOutLabel:"Sign Out",onRequestSwitchAccount:function(){},onRequestSignOut:function(){},appendToBody:!0},g.displayName="ArcgisAccount";var O=g;t.default=O},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(21)),i=o(n(96)),a=n(438);function o(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=function(e){var t=e.avatar,n=e.fullName,i=e.username,o=e.open,l=c(e,["avatar","fullName","username","open"]);return r.default.createElement(a.StyledArcgisAccountControl,s({open:o},l),r.default.createElement(a.StyledArcgisAccountControlAvatar,null,t),r.default.createElement(a.StyledArcgisAccountControlNames,null,r.default.createElement(a.StyledArcgisAccountControlFriendlyName,null,n),r.default.createElement(a.StyledArcgisAccountControlUsername,null,i)))};l.propTypes={avatar:i.default.node,fullName:i.default.string,username:i.default.string,open:i.default.bool},l.defaultProps={},l.displayName="ArcgisAccountControl";var u=l;t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(21)),i=c(n(96)),a=n(438),o=c(n(860)),s=c(n(861));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=function(e){var t=e.children,n=e.user,i=e.portal,c=e.avatar,u=e.hideSwitchAccount,d=e.switchAccountLabel,f=e.signOutLabel,p=e.onRequestSwitchAccount,h=e.onRequestSignOut,b=l(e,["children","user","portal","avatar","hideSwitchAccount","switchAccountLabel","signOutLabel","onRequestSwitchAccount","onRequestSignOut"]);return r.default.createElement(a.StyledArcgisAccountMenu,b,r.default.createElement(a.StyledArcgisAccountContent,null,r.default.createElement(o.default,{user:n,portal:i,avatar:c}),r.default.createElement(s.default,null,t)),r.default.createElement(a.StyledArcgisAccountSignInMenu,null,function(){if(!u)return r.default.createElement(a.StyledSwitchAccountButton,{grouped:!0,extraLarge:!0,onClick:p},d)}(),r.default.createElement(a.StyledSignOutButton,{halo:!0,grouped:!0,extraLarge:!0,onClick:h},f)))};u.propTypes={user:i.default.object,switchAccountLabel:i.default.string,signOutLabel:i.default.string},u.defaultProps={switchAccountLabel:"Switch Account",signOutLabel:"Sign Out"},u.displayName="ArcgisAccountMenu";var d=u;t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(21)),i=s(n(96)),a=n(438),o=n(164);function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=function(e){var t=e.user,n=e.portal,i=e.avatar,s=c(e,["user","portal","avatar"]),l=r.default.cloneElement(i,{style:{border:"2px solid ".concat(o.CalciteTheme.palette.white),boxShadow:"0 0 0 3px ".concat(o.CalciteTheme.palette.blue),marginBottom:o.CalciteTheme.baseline}});return r.default.createElement(a.StyledArcgisAccountContentInfo,s,l,r.default.createElement(a.StyledArcgisAccountContentName,null,t.fullName),r.default.createElement(a.StyledArcgisAccountContentId,null,t.username),r.default.createElement(a.StyledArcgisAccountContentGroup,null,n.name))};l.propTypes={user:i.default.object},l.defaultProps={},l.displayName="ArcgisAccountContentInfo";var u=l;t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(21)),i=o(n(96)),a=n(438);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=function(e){var t=e.children,n=(e.user,s(e,["children","user"]));return r.default.createElement(a.StyledArcgisAccountContentMenu,n,t)};c.propTypes={children:i.default.node,user:i.default.object},c.defaultProps={},c.displayName="ArcgisAccountContentMenu";var l=c;t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var r,i=(r=n(863))&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PopoverContext=t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(21)),i=p(n(275)),a=p(n(907)),o=p(n(96)),s=p(n(864)),c=n(906),l=p(n(879)),u=n(176),d=n(685),f=p(n(883));function p(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){O(e,t,n[t])}))}return e}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=(0,r.createContext)({isInPopover:void 0});t.PopoverContext=j,j.displayName="PopoverContext";var w=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==h(t)&&"function"!==typeof t?g(e):t}(this,y(t).call(this,e)),O(g(g(n)),"_setOutsideTap",(function(){var e=[];n.props.closeOnSelect||e.push(document.getElementById("".concat(n._generatedId,"Popover"))),n.outsideTap&&n.outsideTap.remove(),n.outsideTap=(0,s.default)(e,["click","touchstart"],n._handleOutsideTap)})),O(g(g(n)),"_unsetOutsideTap",(function(){n.outsideTap&&n.outsideTap.remove()})),O(g(g(n)),"_handleOutsideTap",(function(e){n.props.onRequestClose(e)})),O(g(g(n)),"_getPopper",(function(e,t){return t?i.default.createPortal(e,document.body):e})),n.state={isInPopover:!0},n._generatedId=(0,l.default)(),n}var n,o,p;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,e),n=t,(o=[{key:"componentDidUpdate",value:function(e){(!1===e.open&&!0===this.props.open||!0===this.props.open&&e.children!==this.props.children)&&this._setOutsideTap(),!0===e.open&&!1===this.props.open&&this._unsetOutsideTap()}},{key:"componentWillUnmount",value:function(){this._unsetOutsideTap()}},{key:"render",value:function(){var e=this;return r.default.createElement(j.Provider,{value:this.state},r.default.createElement(c.Manager,null,r.default.createElement(c.Reference,{style:{display:"inline-block"}},(function(t){var n=t.ref;return r.default.createElement(d.StyledTargetWrapper,{ref:n,id:"".concat(e._generatedId,"Target"),style:e.props.targetContainerStyles},e.props.targetEl)})),r.default.createElement(a.default,{in:this.props.open,timeout:this.props.enterDelay},(function(t){return e.props.open?e._getPopper(r.default.createElement(c.Popper,{positionFixed:e.props.positionFixed,placement:(0,u.rtlPlacement)(e.props.placement),modifiers:b({preventOverflow:{boundariesElement:e.props.positionFixed||e.props.appendToBody?"window":"scrollParent"}},e.props.popperModifiers)},(function(n){var i=n.ref,a=n.style,o=n.placement,s=n.scheduleUpdate;return r.default.createElement(f.default,{innerRef:i,id:"".concat(e._generatedId,"Popover"),style:b({},a,e.props.style),transitionState:t,transitionDuration:e.props.transitionDuration,"data-placement":o,scheduleUpdate:s},e.props.children)})),e.props.appendToBody):null}))))}}])&&v(n.prototype,o),p&&v(n,p),t}(r.Component);t.default=w,w.propTypes={children:o.default.node,targetEl:o.default.node,open:o.default.bool,placement:o.default.oneOf(["top","right","bottom","left","top-start","right-start","bottom-start","left-start","top-end","right-end","bottom-end","left-end"]),transitionDuration:o.default.number,enterDelay:o.default.number,onRequestClose:o.default.func,closeOnSelect:o.default.bool,targetContainerStyles:o.default.object,popoverContainerStyles:o.default.object,positionFixed:o.default.bool,popperModifiers:o.default.object},w.defaultProps={open:!1,placement:"bottom-start",transitionDuration:200,enterDelay:0,true:!0},w.displayName="Popover"},function(e,t,n){!function(){"use strict";function t(e,t,n){function r(t){for(var r=e.length;r--;)if(e[r].contains(t.target))return;n(t)}e=Array.isArray(e)?e:[e];for(var i=(t=Array.isArray(t)?t:[t]).length;i--;)document.addEventListener(t[i],r);return{remove:function(){for(var e=t.length;e--;)document.removeEventListener(t[e],r)}}}e.exports?e.exports=t:window.outy=t}()},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,n(t,r)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r;if(!Object.keys){var i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,o=n(677),s=Object.prototype.propertyIsEnumerable,c=!s.call({toString:null},"toString"),l=s.call((function(){}),"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(e){var t=e.constructor;return t&&t.prototype===e},f={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"===typeof window)return!1;for(var e in window)try{if(!f["$"+e]&&i.call(window,e)&&null!==window[e]&&"object"===typeof window[e])try{d(window[e])}catch(t){return!0}}catch(t){return!0}return!1}();r=function(e){var t=null!==e&&"object"===typeof e,n="[object Function]"===a.call(e),r=o(e),s=t&&"[object String]"===a.call(e),f=[];if(!t&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var h=l&&n;if(s&&e.length>0&&!i.call(e,0))for(var b=0;b<e.length;++b)f.push(String(b));if(r&&e.length>0)for(var v=0;v<e.length;++v)f.push(String(v));else for(var y in e)h&&"prototype"===y||!i.call(e,y)||f.push(String(y));if(c)for(var m=function(e){if("undefined"===typeof window||!p)return d(e);try{return d(e)}catch(t){return!1}}(e),g=0;g<u.length;++g)m&&"constructor"===u[g]||!i.call(e,u[g])||f.push(u[g]);return f}}e.exports=r},function(e,t,n){"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag,i=n(678)("Object.prototype.toString"),a=function(e){return!(r&&e&&"object"===typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===i(e)},o=function(e){return!!a(e)||null!==e&&"object"===typeof e&&"number"===typeof e.length&&e.length>=0&&"[object Array]"!==i(e)&&"[object Function]"===i(e.callee)},s=function(){return a(arguments)}();a.isLegacyArguments=o,e.exports=s?a:o},function(e,t,n){"use strict";var r="undefined"!==typeof Symbol&&Symbol,i=n(680);e.exports=function(){return"function"===typeof r&&("function"===typeof Symbol&&("symbol"===typeof r("foo")&&("symbol"===typeof Symbol("bar")&&i())))}},function(e,t,n){"use strict";var r="Function.prototype.bind called on incompatible ",i=Array.prototype.slice,a=Object.prototype.toString,o="[object Function]";e.exports=function(e){var t=this;if("function"!==typeof t||a.call(t)!==o)throw new TypeError(r+t);for(var n,s=i.call(arguments,1),c=function(){if(this instanceof n){var r=t.apply(this,s.concat(i.call(arguments)));return Object(r)===r?r:this}return t.apply(e,s.concat(i.call(arguments)))},l=Math.max(0,t.length-s.length),u=[],d=0;d<l;d++)u.push("$"+d);if(n=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(c),t.prototype){var f=function(){};f.prototype=t.prototype,n.prototype=new f,f.prototype=null}return n}},function(e,t,n){"use strict";var r=n(569);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},function(e,t,n){"use strict";var r=n(439),i=n(570),a=n(681),o=n(682),s=n(872),c=i(o(),Object);r(c,{getPolyfill:o,implementation:a,shim:s}),e.exports=c},function(e,t,n){"use strict";var r=n(682),i=n(439);e.exports=function(){var e=r();return i(Object,{is:e},{is:function(){return Object.is!==e}}),e}},function(e,t,n){"use strict";var r,i,a,o,s=n(678),c=n(680)()&&!!Symbol.toStringTag;if(c){r=s("Object.prototype.hasOwnProperty"),i=s("RegExp.prototype.exec"),a={};var l=function(){throw a};o={toString:l,valueOf:l},"symbol"===typeof Symbol.toPrimitive&&(o[Symbol.toPrimitive]=l)}var u=s("Object.prototype.toString"),d=Object.getOwnPropertyDescriptor;e.exports=c?function(e){if(!e||"object"!==typeof e)return!1;var t=d(e,"lastIndex");if(!(t&&r(t,"value")))return!1;try{i(e,o)}catch(n){return n===a}}:function(e){return!(!e||"object"!==typeof e&&"function"!==typeof e)&&"[object RegExp]"===u(e)}},function(e,t,n){"use strict";var r=n(439),i=n(570),a=n(683),o=n(684),s=n(875),c=i(a);r(c,{getPolyfill:o,implementation:a,shim:s}),e.exports=c},function(e,t,n){"use strict";var r=n(439).supportsDescriptors,i=n(684),a=Object.getOwnPropertyDescriptor,o=Object.defineProperty,s=TypeError,c=Object.getPrototypeOf,l=/a/;e.exports=function(){if(!r||!c)throw new s("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=i(),t=c(l),n=a(t,"flags");return n&&n.get===e||o(t,"flags",{configurable:!0,enumerable:!1,get:e}),e}},function(e,t,n){"use strict";var r=Date.prototype.getDay,i=Object.prototype.toString,a="function"===typeof Symbol&&!!Symbol.toStringTag;e.exports=function(e){return"object"===typeof e&&null!==e&&(a?function(e){try{return r.call(e),!0}catch(t){return!1}}(e):"[object Date]"===i.call(e))}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(21),i=(o(r),o(n(96))),a=o(n(878));o(n(580));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=1073741823;function d(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}t.default=function(e,t){var n,o,f="__create-react-context-"+(0,a.default)()+"__",p=function(e){function n(){var t,r;s(this,n);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=r=c(this,e.call.apply(e,[this].concat(a))),r.emitter=d(r.props.value),c(r,t)}return l(n,e),n.prototype.getChildContext=function(){var e;return(e={})[f]=this.emitter,e},n.prototype.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n=this.props.value,r=e.value,i=void 0;((a=n)===(o=r)?0!==a||1/a===1/o:a!==a&&o!==o)?i=0:(i="function"===typeof t?t(n,r):u,0!==(i|=0)&&this.emitter.set(e.value,i))}var a,o},n.prototype.render=function(){return this.props.children},n}(r.Component);p.childContextTypes=((n={})[f]=i.default.object.isRequired,n);var h=function(t){function n(){var e,r;s(this,n);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=r=c(this,t.call.apply(t,[this].concat(a))),r.state={value:r.getValue()},r.onUpdate=function(e,t){0!==((0|r.observedBits)&t)&&r.setState({value:r.getValue()})},c(r,e)}return l(n,t),n.prototype.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?u:t},n.prototype.componentDidMount=function(){this.context[f]&&this.context[f].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?u:e},n.prototype.componentWillUnmount=function(){this.context[f]&&this.context[f].off(this.onUpdate)},n.prototype.getValue=function(){return this.context[f]?this.context[f].get():e},n.prototype.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(r.Component);return h.contextTypes=((o={})[f]=i.default.object,o),{Provider:p,Consumer:h}},e.exports=t.default},function(e,t,n){"use strict";(function(t){var n="__global_unique_id__";e.exports=function(){return t[n]=(t[n]||0)+1}}).call(this,n(433))},function(e,t,n){(function(t){var n="undefined"!==typeof t&&t.pid?t.pid.toString(36):"";function r(){var e=Date.now(),t=r.last||e;return r.last=e>t?e:t+1}e.exports=e.exports.default=function(e,t){return(e||"")+""+n+r().toString(36)+(t||"")},e.exports.process=function(e,t){return(e||"")+n+r().toString(36)+(t||"")},e.exports.time=function(e,t){return(e||"")+r().toString(36)+(t||"")}}).call(this,n(382))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StyledMenuItemSubtitle=t.StyledMenuTitle=t.StyledMenuItem=t.StyledMenu=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(194)),i=n(176),a=n(164),o=n(881),s=n(350);var c=(0,r.default)(o.StyledSideNav).withConfig({displayName:"StyledMenu",componentId:"sc-1hku2rj-0"})(["min-width:200px;box-shadow:",";z-index:1000;overflow:auto;"," ",";",";",";",";",";"],(function(e){return e.theme.boxShadow}),(0,i.fontSize)(0),(function(e){return e.right&&(0,r.css)(["right:0;"])}),(function(e){return e.extraSmall&&(0,r.css)(["width:200px;",";"],(0,i.fontSize)(-3))}),(function(e){return e.small&&(0,r.css)(["width:220px;",";"],(0,i.fontSize)(-2))}),(function(e){return e.large&&(0,r.css)(["width:240px;",";"],(0,i.fontSize)(1))}),(function(e){return e.extraLarge&&(0,r.css)(["width:280px;",";"],(0,i.fontSize)(2))}));t.StyledMenu=c,c.defaultProps={theme:a.CalciteTheme};var l=(0,r.default)(s.CalciteA).withConfig({displayName:"StyledMenuItem",componentId:"sc-1hku2rj-1"})(["position:relative;display:flex;justify-content:space-between;min-height:42px;box-sizing:border-box;font-size:0.9em;padding:",";color:",";background-color:",";border-top:1px solid ",";white-space:nowrap;cursor:pointer;",";",";&:hover{background-color:",";text-decoration:none;color:",";}",";",";",";",";",";"],(function(e){return(0,i.unitCalc)(e.theme.baseline,3,"/")}),(function(e){return e.theme.palette.darkerGray}),(function(e){return e.theme.palette.white}),(function(e){return e.theme.palette.lightestGray}),(function(e){return e.disabled&&(0,r.css)(["pointer-events:none;opacity:0.7;"])}),(function(e){return e.active&&(0,r.css)(["background-color:",";text-decoration:none;color:",";"],(function(e){return e.theme.palette.offWhite}),(function(e){return e.theme.palette.darkerGray}))}),(function(e){return e.theme.palette.offWhite}),(function(e){return e.theme.palette.darkerGray}),(function(e){return e.selected&&(0,r.css)(["&,&:focus,&:hover{text-indent:-3px;border-left:3px solid ",";html[dir='rtl'] &{border-left:none;border-right:3px solid ",";}}"],(function(e){return e.theme.palette.blue}),(function(e){return e.theme.palette.blue}))}),(function(e){return e.extraSmall&&(0,r.css)(["min-height:auto;padding:0 ",";"],(function(e){return(0,i.unitCalc)(e.theme.baseline,6,"/")}))}),(function(e){return e.small&&(0,r.css)(["min-height:",";padding:"," ",";"],(function(e){return(0,i.unitCalc)(e.theme.baseline,4,"/")}),(function(e){return(0,i.unitCalc)(e.theme.baseline,6,"/")}),(function(e){return(0,i.unitCalc)(e.theme.baseline,4,"/")}))}),(function(e){return e.large&&(0,r.css)(["min-height:",";padding:",";"],(function(e){return(0,i.unitCalc)(e.theme.baseline,2,"/")}),(function(e){return(0,i.unitCalc)(e.theme.baseline,2,"/")}))}),(function(e){return e.extraLarge&&(0,r.css)(["line-height:20px;padding:",";font-weight:300;"],(function(e){return(0,i.unitCalc)(e.theme.baseline,1.5,"/")}))}));t.StyledMenuItem=l,l.defaultProps={theme:a.CalciteTheme};var u=(0,r.default)(l).withConfig({displayName:"StyledMenuTitle",componentId:"sc-1hku2rj-2"})(["font-size:1em;background-color:",";cursor:auto;"],(function(e){return e.theme.palette.offWhite}));t.StyledMenuTitle=u,u.defaultProps={theme:a.CalciteTheme};var d=r.default.span.withConfig({displayName:"StyledMenuItemSubtitle",componentId:"sc-1hku2rj-3"})(["font-size:0.85em;color:",";*:hover > &{color:",";}"],(function(e){return e.theme.palette.lighterGray}),(function(e){return e.theme.palette.lightGray}));t.StyledMenuItemSubtitle=d,d.defaultProps={theme:a.CalciteTheme}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StyledSideNavLink=t.StyledSideNavTitle=t.StyledSideNav=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(194)),i=n(176),a=n(882),o=n(164),s=n(350);var c=r.default.aside.withConfig({displayName:"StyledSideNav",componentId:"sc-75orq9-0"})(["box-sizing:border-box;padding:0;border:1px solid ",";border-top:none;font-family:",";background-color:",";border-radius:",";"],(function(e){return e.theme.palette.lightestGray}),(function(e){return e.theme.fontFamily}),(function(e){return e.theme.palette.white}),(function(e){return e.theme.borderRadius}));t.StyledSideNav=c,c.defaultProps={theme:o.CalciteTheme};var l=(0,r.default)(s.CalciteH4).withConfig({displayName:"StyledSideNavTitle",componentId:"sc-75orq9-1"})(["margin:0;padding:",";",";",";background-color:",";border-top:1px solid ",";"],(function(e){return(0,i.unitCalc)(e.theme.baseline,3,"/")}),(0,a.avenirRegular)(),(0,i.fontSize)(-1),(function(e){return e.theme.palette.offWhite}),(function(e){return e.theme.palette.lightestGray}));t.StyledSideNavTitle=l,l.defaultProps={theme:o.CalciteTheme};var u=(0,r.default)(s.CalciteA).withConfig({displayName:"StyledSideNavLink",componentId:"sc-75orq9-2"})(["position:relative;display:block;box-sizing:border-box;padding:",";",";color:",";background-color:",";border-top:1px solid ",";cursor:pointer;&:hover{background-color:",";text-decoration:none;color:",";}",";",";"],(function(e){return(0,i.unitCalc)(e.theme.baseline,3,"/")}),(0,i.fontSize)(-2),(function(e){return e.theme.palette.darkestGray}),(function(e){return e.theme.palette.white}),(function(e){return e.theme.palette.lightestGray}),(function(e){return e.theme.palette.offWhite}),(function(e){return e.theme.palette.offBlack}),(function(e){return e.disabled&&(0,r.css)(["pointer-events:none;opacity:0.7;"])}),(function(e){return e.active&&(0,r.css)(["text-indent:-3px;border-left:3px solid ",";html[dir='rtl'] &{border-left:none;border-right:3px solid ",";}"],(function(e){return e.theme.palette.blue}),(function(e){return e.theme.palette.blue}))}));t.StyledSideNavLink=u,u.defaultProps={theme:o.CalciteTheme}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.avenirBoldItalic=t.avenirBold=t.avenirDemiItalic=t.avenirDemi=t.avenirItalic=t.avenirRegular=t.avenirLightItalic=t.avenirLight=void 0;t.avenirLight=function(){return"\n    font-weight: 300;\n    font-style: normal;\n\n    b, strong {\n      font-weight: 500;\n    }\n  "};t.avenirLightItalic=function(){return"\n    font-weight: 300;\n    font-style: italic;\n\n    b, strong {\n      font-weight: 500;\n    }\n  "};t.avenirRegular=function(){return"\n    font-weight: 400;\n    font-style: normal;\n\n    b, strong {\n      font-weight: 500;\n    }\n  "};t.avenirItalic=function(){return"\n    font-weight: 400;\n    font-style: italic;\n\n    b, strong {\n      font-weight: 500;\n    }\n  "};t.avenirDemi=function(){return"\n    font-weight: 500;\n    font-style: normal;\n\n    b, strong {\n      font-weight: 600;\n    }\n  "};t.avenirDemiItalic=function(){return"\n    font-weight: 500;\n    font-style: italic;\n\n    b, strong {\n      font-weight: 600;\n    }\n  "};t.avenirBold=function(){return"\n    font-weight: 600;\n    font-style: normal;\n\n    b, strong {\n      font-weight: 600;\n    }\n  "};t.avenirBoldItalic=function(){return"\n    font-weight: 600;\n    font-style: italic;\n\n    b, strong {\n      font-weight: 600;\n    }\n  "}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(21)),i=s(n(96)),a=s(n(884)),o=n(685);function s(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var d=function(e){var t=e.innerRef,n=e.scheduleUpdate,i=e.children,s=u(e,["innerRef","scheduleUpdate","children"]),d=l((0,a.default)((function(e){e&&n&&n()})),1)[0];return r.default.createElement(o.StyledPopover,c({ref:t},s),d,i)};d.propTypes={innerRef:i.default.func,scheduleUpdate:i.default.func},d.defaultProps={};var f=d;t.default=f},function(e,t,n){var r=n(21),i={display:"block",opacity:0,position:"absolute",top:0,left:0,height:"100%",width:"100%",overflow:"hidden",pointerEvents:"none",zIndex:-1},a=function(e){var t=e.onResize,n=r.useRef();return function(e,t){var n=function(){return e.current&&e.current.contentDocument&&e.current.contentDocument.defaultView};function i(){t();var e=n();e&&e.addEventListener("resize",t)}r.useEffect((function(){return n()?i():e.current&&e.current.addEventListener&&e.current.addEventListener("load",i),function(){var e=n();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("resize",t)}}),[])}(n,(function(){return t(n)})),r.createElement("iframe",{style:i,src:"about:blank",ref:n,"aria-hidden":!0,tabIndex:-1,frameBorder:0})},o=function(e){return{width:null!=e?e.offsetWidth:null,height:null!=e?e.offsetHeight:null}};e.exports=function(e){void 0===e&&(e=o);var t=r.useState(e(null)),n=t[0],i=t[1],s=r.useCallback((function(t){return i(e(t.current))}),[e]);return[r.useMemo((function(){return r.createElement(a,{onResize:s})}),[s]),n]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var r,i=(r=n(886))&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(96)),i=o(n(21)),a=n(887);function o(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var d=function(e){var t=e.children,n=e.src,r=e.alt,o=e.size,l=e.fontSize,d=u(e,["children","src","alt","size","fontSize"]);return i.default.createElement(a.StyledAvatar,s({aSize:o,fontSize:l},d),function(e){if(e){if(i.default.isValidElement(e)){var t=l?{fontSize:l}:null;return i.default.cloneElement(e,c({},e.props,{style:c({},a.StyledAvatarSvg,e.props.style,t)}))}return i.default.createElement(a.StyledAvatarText,null,e)}if(n)return i.default.createElement(a.StyledAvatarImage,{src:n,alt:r||""})}(t))};d.propTypes={children:r.default.node,src:r.default.string,alt:r.default.string,size:r.default.number},d.defaultProps={size:40},d.displayName="Avatar";var f=d;t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StyledAvatarText=t.StyledAvatarSvg=t.StyledAvatarImage=t.StyledAvatar=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(194)),i=n(164);var a=r.default.div.withConfig({displayName:"StyledAvatar",componentId:"kfpfos-0"})(["width:","px;height:","px;display:flex;position:relative;overflow:hidden;background-color:",";color:",";font-size:1.25rem;flex-shrink:0;align-items:center;user-select:none;border-radius:50%;justify-content:center;",";"],(function(e){return e.aSize}),(function(e){return e.aSize}),(function(e){return e.theme.palette.blue}),(function(e){return e.theme.palette.white}),(function(e){return e.fontSize&&(0,r.css)(["font-size:","px;"],e.fontSize)}));t.StyledAvatar=a,a.defaultProps={theme:i.CalciteTheme};var o=r.default.img.withConfig({displayName:"StyledAvatarImage",componentId:"kfpfos-1"})(["width:100%;height:100%;text-align:center;object-fit:cover;"]);t.StyledAvatarImage=o,o.defaultProps={theme:i.CalciteTheme};t.StyledAvatarSvg={fill:"currentColor",display:"inline-block",fontSize:"24px",transition:"fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",userSelect:"none",flexShrink:"0"};var s=r.default.span.withConfig({displayName:"StyledAvatarText",componentId:"kfpfos-2"})(["font-weight:300;font-family:",";"],(function(e){return e.theme.type.avenirFamily}));t.StyledAvatarText=s,s.defaultProps={theme:i.CalciteTheme}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(21))&&r.__esModule?r:{default:r};function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=function(e){var t=e.color,n=void 0===t?"currentColor":t,r=e.size,s=void 0===r?24:r,c=e.filled,l=void 0!==c&&c,u=e.className,d=(e.children,o(e,["color","size","filled","className","children"])),f="calcite-icon";return u&&(f+=" ".concat(u)),s<=16?i.default.createElement("svg",a({},d,{width:s,height:s,fill:n,viewBox:"0 0 16 16",className:f}),l?i.default.createElement("path",{d:"M11 3a3 3 0 1 1-3-3 3 3 0 0 1 3 3zm0 3H5a2 2 0 0 0-2 2v5a1 1 0 0 0 1 1h1V9h1v6.428a.572.572 0 0 0 .572.572h2.856a.572.572 0 0 0 .572-.572V9h1v5h1a1 1 0 0 0 1-1V8a2 2 0 0 0-2-2z"}):i.default.createElement("path",{d:"M3 11.5V15h10v-3.5A3.504 3.504 0 0 0 9.5 8h-3A3.504 3.504 0 0 0 3 11.5zM6.5 9h3a2.503 2.503 0 0 1 2.5 2.5V14H4v-2.5A2.503 2.503 0 0 1 6.5 9zm4.3-5A2.8 2.8 0 1 0 8 6.8 2.803 2.803 0 0 0 10.8 4zM6.133 4A1.867 1.867 0 1 1 8 5.867 1.869 1.869 0 0 1 6.133 4z"})):s<=24?i.default.createElement("svg",a({},d,{width:s,height:s,fill:n,viewBox:"0 0 24 24",className:f}),l?i.default.createElement("path",{d:"M16 4a4 4 0 1 1-4-4 4 4 0 0 1 4 4zm.75 4h-9.5A2.25 2.25 0 0 0 5 10.25v9.25A1.5 1.5 0 0 0 6.5 21H7v-9h1v11.25a.75.75 0 0 0 .75.75h6.5a.75.75 0 0 0 .75-.75V12h1v9h.5a1.5 1.5 0 0 0 1.5-1.5v-9.25A2.25 2.25 0 0 0 16.75 8z"}):i.default.createElement("path",{d:"M7.2 5.5a4.3 4.3 0 1 0 4.3-4.3 4.305 4.305 0 0 0-4.3 4.3zm7.644 0A3.344 3.344 0 1 1 11.5 2.156 3.348 3.348 0 0 1 14.844 5.5zM14.5 11h-6A5.506 5.506 0 0 0 3 16.5V22h17v-5.5a5.506 5.506 0 0 0-5.5-5.5zM19 21H4v-4.5A4.505 4.505 0 0 1 8.5 12h6a4.505 4.505 0 0 1 4.5 4.5z"})):i.default.createElement("svg",a({},d,{width:s,height:s,fill:n,viewBox:"0 0 32 32",className:f}),l?i.default.createElement("path",{d:"M21.064 5a5 5 0 1 1-5-5 5 5 0 0 1 5 5zM22 11H10a3 3 0 0 0-3 3v12a2 2 0 0 0 2 2h1V15h1v16a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V15h1v13h1a2 2 0 0 0 2-2V14a3 3 0 0 0-3-3z"}):i.default.createElement("path",{d:"M20.5 15h-9A6.508 6.508 0 0 0 5 21.5V30h22v-8.5a6.508 6.508 0 0 0-6.5-6.5zM26 29H6v-7.5a5.506 5.506 0 0 1 5.5-5.5h9a5.506 5.506 0 0 1 5.5 5.5zM16 13.8A5.8 5.8 0 1 0 10.2 8a5.806 5.806 0 0 0 5.8 5.8zm0-10.633A4.833 4.833 0 1 1 11.167 8 4.839 4.839 0 0 1 16 3.167z"}))};t.default=s},function(e,t,n){"use strict";var r=n(7);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a=n(21),o=(i=n(96))&&i.__esModule?i:{default:i},s=n(890),c=n(735);function l(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){l(a,r,i,o,s,"next",e)}function s(e){l(a,r,i,o,s,"throw",e)}o(void 0)}))}}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"arcgis-account-manager",n=(0,a.useState)(t),i=d(n,1),o=i[0],l=(0,a.useState)(e),f=d(l,1),p=f[0],h=(0,c.getAccountManagerStorage)(o),b=h.accounts,v=h.status,y=h.active,m=h.order,g=(0,a.useState)({active:y,accounts:b,status:v,order:m}),O=d(g,2),j=O[0],w=O[1];(0,a.useEffect)((function(){var e=v||{},t=e.loading,n=e.authProps;!0===t&&function(){var e=u(r.mark((function e(){var t,i;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.completeAuth)(n);case 2:(t=e.sent)&&t.key&&(0,c.addAccountStorage)(o,t),(0,c.completeStatusStorage)(o),i=(0,c.getAccountManagerStorage)(o),w(i);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()()}),[o,v]);var _=(0,a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=window.location.href,r=e?e||{}:p||{},i=r.clientId,a=r.redirectUri,l=r.portalUrl,u=r.popup;(0,c.beginStatusStorage)(o,{clientId:i,redirectUri:a,portalUrl:l,popup:u},n,t),(0,s.loginOAuth2)(o,{clientId:i,redirectUri:a,portalUrl:l,popup:u},w)}),[p,o]),k=(0,a.useCallback)(u(r.mark((function e(){var t,n,i,a,l,u,d,f,p,h=arguments;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:null,i=(n=t||{}).session,a=n.token,l=n.key,u=M(t),!(i&&a&&u)){e.next=14;break}return e.next=6,(0,s.logoutOAuth2)(t);case 6:d=e.sent,f=JSON.stringify(d),console.log("Revoke token status: ".concat(f)),(0,c.logoutAccountStorage)(o,t),p=(0,c.getAccountManagerStorage)(o),w(p),e.next=15;break;case 14:console.error("Invalid account object given to logoutAccount. Required fields: session/token/key. Fields received: {session: ".concat(i,", token: ").concat(a,", key: ").concat(l,"}"));case 15:case"end":return e.stop()}}),e,this)}))),[j,o]),x=(0,a.useCallback)(u(r.mark((function e(){var t,n,i,a,l,u,d,f,p,h=arguments;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:null,n=M(t),a=(i=t||{}).session,l=i.token,u=i.key,!n){e.next=15;break}if(!l){e.next=10;break}return e.next=7,(0,s.logoutOAuth2)(t);case 7:d=e.sent,f=JSON.stringify(d),console.log("Revoke token status: ".concat(f));case 10:(0,c.removeAccountStorage)(o,t),p=(0,c.getAccountManagerStorage)(o),w(p),e.next=16;break;case 15:console.error("Invalid account object given to removeAccount. Required fields: session/key. Fields received: {session: ".concat(a,", key: ").concat(u,"}"));case 16:case"end":return e.stop()}}),e,this)}))),[j,o]),S=function(e){var t=e.portal,n=t||{},r=n.appInfo,i=n.portalHostname,a=(r||{}).appId,l="www.arcgis.com"===i?null:"https://".concat(i,"/sharing/rest");if(a&&i){var u=a,d=(j.status||{}).authProps,f=d.redirectUri,p=d.popup,h=window.location.href;f&&void 0!==p?((0,c.beginStatusStorage)(o,{clientId:u,redirectUri:f,portalUrl:l,popup:p},h),(0,s.loginOAuth2)(o,{clientId:u,redirectUri:f,portalUrl:l,popup:p},w)):console.error("Cannot restore account. Missing redirectUri and popup in accountManagerState.status: ".concat(j.status))}else console.error("Cannot restore account. Missing clientId and portalUrl in account portal: ".concat(t))},T=function(){var e=u(r.mark((function e(t){var n,i,a,s;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.session,i=t.key,e.prev=1,n){e.next=4;break}throw Error("Missing account session.");case 4:if(i){e.next=6;break}throw Error("Missing account key.");case 6:return e.next=8,n.refreshSession();case 8:a=e.sent,s=a?a.serialize():void 0,(0,c.refreshAccountStorage)(o,{key:i,session:s}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error("Cannot refresh session for account: ".concat(i,". ").concat(e.t0));case 16:case"end":return e.stop()}}),e,this,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),E=(0,a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(M(e)){(0,c.switchActiveStorage)(o,e);var t=(0,c.getAccountManagerStorage)(o);w(t)}}),[j,o]),C=(0,a.useCallback)(function(){var e=u(r.mark((function e(t){var n,i,a;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.session,i=t.token,t.key,!n||!i){e.next=16;break}if(e.prev=2,a=(n||{}).portal,!n.getToken(a)){e.next=7;break}return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 10:return e.prev=10,e.t0=e.catch(2),console.error("Token status verification failed with error.  ".concat(e.t0)),e.abrupt("return",!1);case 14:e.next=17;break;case 16:return e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),[]),P=(0,a.useCallback)(u(r.mark((function e(){var t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object.entries(j.accounts).map(function(){var e=u(r.mark((function e(t){var n,i,a,l,u,f,p,h;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d(t,2),i=n[0],a=n[1],u=(l=a||{}).session,f=l.token,!u||!f){e.next=9;break}return e.next=5,(0,s.logoutOAuth2)(a);case 5:p=e.sent,h=JSON.stringify(p),console.log("Revoke token status for account ".concat(i,": ").concat(h)),(0,c.logoutAccountStorage)(o,a);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()),t=(0,c.getAccountManagerStorage)(o),w(t);case 3:case"end":return e.stop()}}),e,this)}))),[j]),I=(0,a.useCallback)(u(r.mark((function e(){var t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object.entries(j.accounts).map(function(){var e=u(r.mark((function e(t){var n,i,a,l,u,f,p,h;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d(t,2),i=n[0],a=n[1],u=(l=a||{}).session,f=l.token,!u||!f){e.next=8;break}return e.next=5,(0,s.logoutOAuth2)(a);case 5:p=e.sent,h=JSON.stringify(p),console.log("Revoke token status for account ".concat(i,": ").concat(h));case 8:return(0,c.removeAccountStorage)(o,a),e.abrupt("return",{});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()),t=(0,c.getAccountManagerStorage)(o),w(t);case 3:case"end":return e.stop()}}),e,this)}))),[j]),M=(0,a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e||{},n=t.key;if(n){var r=!!j&&!!j.accounts[n];return r}var i={warning:"Invalid account",account:e,accountManagerState:j};return console.warn(i),!1}),[j]);return{accountManagerState:j,addAccount:_,logoutAccount:k,logoutAllAccounts:P,removeAccount:x,removeAllAccounts:I,restoreAccount:S,refreshAccount:T,switchActiveAccount:E,verifyToken:C,getUserThumbnail:s.getUserThumbnail,getOrgThumbnail:s.getOrgThumbnail}};f.propTypes={accountManagerName:o.default.string,options:o.default.object},f.defaultProps={accountManagerName:"arcgis-account-manager"},f.displayName="useAccountManager";var p=f;t.default=p},function(e,t,n){"use strict";var r=n(7);Object.defineProperty(t,"__esModule",{value:!0}),t.getUserThumbnail=t.getOrgThumbnail=t.logoutOAuth2=t.loginOAuth2=t.getPortal=t.completeAuth=t.completeOAuthSignIn=t.beginOAuthSignIn=void 0;var i=n(686),a=n(891),o=n(92),s=n(735);function c(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,i)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){c(a,r,i,o,s,"next",e)}function s(e){c(a,r,i,o,s,"throw",e)}o(void 0)}))}}var u=function(){var e=l(r.mark((function e(t,n,a){var o,c,l,u,d,f,p,h,b;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.clientId,c=n.redirectUri,l=n.portalUrl,u=n.popup,d=l||"https://www.arcgis.com/sharing/rest",new URL(d).pathname||(f=new URL("https://developers.arcgis.com/rest/users-groups-and-items/root.htm"),"https://<webadaptorhost>.<domain>.com/<webadaptorname>/sharing/rest",console.warn("No URL path given may cause 400 error. If using Enterprise portal verify url format: ".concat("https://<webadaptorhost>.<domain>.com/<webadaptorname>/sharing/rest",". View resource for formatting url: ").concat(f))),!u){e.next=22;break}return e.prev=5,e.next=8,i.UserSession.beginOAuth2({clientId:o,redirectUri:c,portal:d,popup:u});case 8:return p=e.sent,e.next=11,v({dSession:p,portal:d,clientId:o});case 11:h=e.sent,(0,s.addAccountStorage)(t,h),b=(0,s.getAccountManagerStorage)(t),a(b),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),console.error("Error getting User Session (beginOAuth). ".concat(e.t0));case 20:e.next=23;break;case 22:try{i.UserSession.beginOAuth2({clientId:o,redirectUri:c,portal:d,popup:u})}catch(r){console.error("Error getting User Session (beginOAuth). ".concat(r))}case 23:case"end":return e.stop()}}),e,this,[[5,17]])})));return function(t,n,r){return e.apply(this,arguments)}}();t.beginOAuthSignIn=u;var d=function(){var e=l(r.mark((function e(t){var n,a,o,s,c,l,u;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.clientId,a=t.portalUrl,o=t.redirectUri,s=t.popup,e.prev=1,c=a||"https://www.arcgis.com/sharing/rest",l=i.UserSession.completeOAuth2({clientId:n,portal:c,redirectUri:o,popup:s}),e.next=6,v({dSession:l,portal:c,clientId:n});case 6:return u=e.sent,window.history.replaceState?window.history.replaceState({},"",window.location.pathname):window.location.hash="",e.abrupt("return",u);case 11:return e.prev=11,e.t0=e.catch(1),console.error("Error getting User Session (completeOAuth). Error reading property may result from app redirecting before operation can read token hash in url. ".concat(e.t0)),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();t.completeOAuthSignIn=d;var f=function(){var e=l(r.mark((function e(t){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(t);case 2:if(!(n=e.sent)){e.next=7;break}return e.abrupt("return",n);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();t.completeAuth=f;var p=function(){var e=l(r.mark((function e(t){var n,i,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.portalUrl,i=t.session,e.prev=1,e.next=4,(0,a.getSelf)({portal:n,authentication:i});case 4:return o=e.sent,e.abrupt("return",o);case 8:return e.prev=8,e.t0=e.catch(1),console.error("Error retrieving portal item. ".concat(e.t0)),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();t.getPortal=p;var h=function(){var e=l(r.mark((function e(t,n,i){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(t,n,i);case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}();t.loginOAuth2=h;var b=function(){var e=l(r.mark((function e(t){var n,i,a,s,c,l,u,d;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.session,i=t.token,a=n?n.portal:null,(s=n?n.clientId:null)&&i){e.next=5;break}return e.abrupt("return",{success:!1,error:"Empty client_id / token"});case 5:return c="".concat(a,"/oauth2/revokeToken"),l={client_id:s,auth_token:i},e.prev=7,e.next=10,(0,o.request)(c,{params:l,httpMethod:"POST"});case 10:return u=e.sent,d=u?u.success:void 0,e.abrupt("return",{success:d});case 15:return e.prev=15,e.t0=e.catch(7),e.abrupt("return",{success:!1,error:e.t0});case 18:case"end":return e.stop()}}),e,this,[[7,15]])})));return function(t){return e.apply(this,arguments)}}();t.logoutOAuth2=b;t.getOrgThumbnail=function(e){var t=e.session.portal,n=e.portal,r=n.thumbnail,i=n.name,a=e.token,o=e.orgImage,s={url:void 0,letters:void 0};if(s.url=r&&t&&a?"".concat(t,"/portals/self/resources/").concat(r,"?token=").concat(a):void 0,s.letters=i?i[0].toUpperCase():"!",o)s.image=o;else if(s.url)try{var c=new Image;c.src=s.url,s.image=c}catch(l){console.error("Error creating js Image(). ".concat(l))}return s};t.getUserThumbnail=function(e){var t=e.session,n=t.portal,r=t.username,i=e.user,a=i.thumbnail,o=i.firstName,s=i.lastName,c=i.fullName,l=e.token,u=e.userImage,d={url:void 0,letters:void 0};if(d.url=a&&n&&r&&l?"".concat(n,"/community/users/").concat(r,"/info/").concat(a,"?token=").concat(l):void 0,d.letters=o&&s?"".concat(o[0]+s[0]).toUpperCase():c?c[0].toUpperCase():"!",u)d.image=u;else if(d.url)try{var f=new Image;f.src=d.url,d.image=f}catch(p){console.error("Error creating js Image(). ".concat(p))}return d};var v=function(){var e=l(r.mark((function e(t){var n,i,a,o,s,c,l;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dSession,i=t.portal,a=t.clientId,e.prev=1,n.clientId=n.clientId?n.clientId:a,o=n.token,e.next=6,n.getUser();case 6:return s=e.sent,e.next=9,p({portalUrl:i,session:n});case 9:return c=e.sent,l=y({session:n,user:s,portal:c,token:o}),e.abrupt("return",{user:s,portal:JSON.stringify(c),session:n.serialize(),token:o,key:l});case 14:throw e.prev=14,e.t0=e.catch(1),new Error("Could not create account object. This could be due to UserSession.getUser(). ".concat(e.t0));case 17:case"end":return e.stop()}}),e,this,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),y=function(e){var t=e.user,n=e.portal;try{var r=(t||{}).username,i=(n||{}).name;return r+"-"+(i?i.replace(/\s+/g,""):"org")}catch(a){throw new Error("Error creating account key. ".concat(a))}}},function(e,t,n){"use strict";n.r(t);var r=n(691);n.d(t,"addItemData",(function(){return r.a})),n.d(t,"addItemRelationship",(function(){return r.b})),n.d(t,"addItemResource",(function(){return r.c}));var i=n(692);n.d(t,"getUserContent",(function(){return i.a}));var a=n(693);n.d(t,"createFolder",(function(){return a.a})),n.d(t,"createItemInFolder",(function(){return a.c})),n.d(t,"createItem",(function(){return a.b}));var o=n(694);n.d(t,"exportItem",(function(){return o.a}));var s=n(695);n.d(t,"getItem",(function(){return s.a})),n.d(t,"getItemBaseUrl",(function(){return s.b})),n.d(t,"getItemData",(function(){return s.c})),n.d(t,"getRelatedItems",(function(){return s.k})),n.d(t,"getItemResources",(function(){return s.i})),n.d(t,"getItemResource",(function(){return s.h})),n.d(t,"getItemGroups",(function(){return s.d})),n.d(t,"getItemStatus",(function(){return s.j})),n.d(t,"getItemParts",(function(){return s.g})),n.d(t,"getItemInfo",(function(){return s.e})),n.d(t,"getItemMetadata",(function(){return s.f}));var c=n(696);n.d(t,"protectItem",(function(){return c.a})),n.d(t,"unprotectItem",(function(){return c.b}));var l=n(697);n.d(t,"reassignItem",(function(){return l.a}));var u=n(698);n.d(t,"removeItem",(function(){return u.b})),n.d(t,"removeItemRelationship",(function(){return u.c})),n.d(t,"removeItemResource",(function(){return u.d})),n.d(t,"removeFolder",(function(){return u.a}));var d=n(496);n.d(t,"searchItems",(function(){return d.a}));var f=n(493);n.d(t,"updateItem",(function(){return f.b})),n.d(t,"updateItemInfo",(function(){return f.c})),n.d(t,"updateItemResource",(function(){return f.d})),n.d(t,"moveItem",(function(){return f.a}));var p=n(101);n.d(t,"serializeItem",(function(){return p.b})),n.d(t,"determineOwner",(function(){return p.a}));var h=n(699);n.d(t,"addItemPart",(function(){return h.a})),n.d(t,"commitItemUpload",(function(){return h.c})),n.d(t,"cancelItemUpload",(function(){return h.b}));var b=n(497);n.d(t,"addGroupUsers",(function(){return b.a}));var v=n(498);n.d(t,"removeGroupUsers",(function(){return v.a}));var y=n(700);n.d(t,"inviteGroupUsers",(function(){return y.a}));var m=n(701);n.d(t,"createGroup",(function(){return m.a}));var g=n(495);n.d(t,"getGroup",(function(){return g.a})),n.d(t,"getGroupCategorySchema",(function(){return g.b})),n.d(t,"getGroupContent",(function(){return g.c})),n.d(t,"getGroupUsers",(function(){return g.d})),n.d(t,"searchGroupUsers",(function(){return g.e}));var O=n(702);for(var j in O)["default","addItemData","addItemRelationship","addItemResource","getUserContent","createFolder","createItemInFolder","createItem","exportItem","getItem","getItemBaseUrl","getItemData","getRelatedItems","getItemResources","getItemResource","getItemGroups","getItemStatus","getItemParts","getItemInfo","getItemMetadata","protectItem","unprotectItem","reassignItem","removeItem","removeItemRelationship","removeItemResource","removeFolder","searchItems","updateItem","updateItemInfo","updateItemResource","moveItem","serializeItem","determineOwner","addItemPart","commitItemUpload","cancelItemUpload","addGroupUsers","removeGroupUsers","inviteGroupUsers","createGroup","getGroup","getGroupCategorySchema","getGroupContent","getGroupUsers","searchGroupUsers"].indexOf(j)<0&&function(e){n.d(t,e,(function(){return O[e]}))}(j);var w=n(703);n.d(t,"createGroupNotification",(function(){return w.a}));var _=n(704);n.d(t,"protectGroup",(function(){return _.a})),n.d(t,"unprotectGroup",(function(){return _.b}));var k=n(705);n.d(t,"removeGroup",(function(){return k.a}));var x=n(706);n.d(t,"searchGroups",(function(){return x.b})),n.d(t,"searchGroupContent",(function(){return x.a}));var S=n(707);n.d(t,"updateGroup",(function(){return S.a}));var T=n(445);n.d(t,"updateUserMemberships",(function(){return T.a}));var E=n(708);n.d(t,"joinGroup",(function(){return E.a})),n.d(t,"leaveGroup",(function(){return E.b}));var C=n(709);n.d(t,"createOrgNotification",(function(){return C.a}));var P=n(354);n.d(t,"getUser",(function(){return P.a}));var I=n(710);n.d(t,"getUserTags",(function(){return I.a}));var M=n(711);n.d(t,"getUserUrl",(function(){return M.a}));var A=n(712);n.d(t,"getUserInvitations",(function(){return A.d})),n.d(t,"getUserInvitation",(function(){return A.c})),n.d(t,"acceptInvitation",(function(){return A.a})),n.d(t,"declineInvitation",(function(){return A.b}));var R=n(713);n.d(t,"getUserNotifications",(function(){return R.a})),n.d(t,"removeNotification",(function(){return R.b}));var L=n(714);n.d(t,"searchUsers",(function(){return L.a}));var F=n(715);n.d(t,"updateUser",(function(){return F.a}));var D=n(716);n.d(t,"setItemAccess",(function(){return D.a}));var N=n(717);n.d(t,"shareItemWithGroup",(function(){return N.b})),n.d(t,"ensureMembership",(function(){return N.a}));var V=n(718);n.d(t,"unshareItemWithGroup",(function(){return V.a}));var z=n(400);n.d(t,"isItemSharedWithGroup",(function(){return z.a}));var U=n(223);n.d(t,"getSharingUrl",(function(){return U.a})),n.d(t,"isItemOwner",(function(){return U.c})),n.d(t,"isOrgAdmin",(function(){return U.d})),n.d(t,"getUserMembership",(function(){return U.b}));var B=n(719);n.d(t,"getSelf",(function(){return B.b})),n.d(t,"getPortal",(function(){return B.a}));var G=n(720);n.d(t,"getPortalSettings",(function(){return G.a}));var q=n(52);n.d(t,"getPortalUrl",(function(){return q.a}));var H=n(494);n.d(t,"scrubControlChars",(function(){return H.a}));var W=n(721);for(var j in W)["default","addItemData","addItemRelationship","addItemResource","getUserContent","createFolder","createItemInFolder","createItem","exportItem","getItem","getItemBaseUrl","getItemData","getRelatedItems","getItemResources","getItemResource","getItemGroups","getItemStatus","getItemParts","getItemInfo","getItemMetadata","protectItem","unprotectItem","reassignItem","removeItem","removeItemRelationship","removeItemResource","removeFolder","searchItems","updateItem","updateItemInfo","updateItemResource","moveItem","serializeItem","determineOwner","addItemPart","commitItemUpload","cancelItemUpload","addGroupUsers","removeGroupUsers","inviteGroupUsers","createGroup","getGroup","getGroupCategorySchema","getGroupContent","getGroupUsers","searchGroupUsers","createGroupNotification","protectGroup","unprotectGroup","removeGroup","searchGroups","searchGroupContent","updateGroup","updateUserMemberships","joinGroup","leaveGroup","createOrgNotification","getUser","getUserTags","getUserUrl","getUserInvitations","getUserInvitation","acceptInvitation","declineInvitation","getUserNotifications","removeNotification","searchUsers","updateUser","setItemAccess","shareItemWithGroup","ensureMembership","unshareItemWithGroup","isItemSharedWithGroup","getSharingUrl","isItemOwner","isOrgAdmin","getUserMembership","getSelf","getPortal","getPortalSettings","getPortalUrl","scrubControlChars"].indexOf(j)<0&&function(e){n.d(t,e,(function(){return W[e]}))}(j);var $=n(411);n.d(t,"SearchQueryBuilder",(function(){return $.a}))},function(e,t,n){"use strict";JSON.parse,JSON.stringify,Object.keys},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(96))&&r.__esModule?r:{default:r},a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(21)),o=n(487),s=n(575);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=function(e){e.children;var t=e.src,n=e.caption,r=e.alt,i=l(e,["children","src","caption","alt"]),u=(0,a.useContext)(s.CardContext);return a.default.createElement(o.StyledCardImageWrap,c({},u,i),a.default.createElement(o.StyledCardImage,c({},u,{src:t,alt:r})),function(e){if(!e&&n)return a.default.createElement(o.StyledCardImageCaption,null,n)}(u.shaped))};u.propTypes={src:i.default.string,caption:i.default.string,alt:i.default.string},u.defaultProps={},u.displayName="CardImage";var d=u;t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(96)),i=o(n(21)),a=n(487);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=function(e){var t=e.children,n=s(e,["children"]);return i.default.createElement(a.StyledCardTitle,n,t)};c.propTypes={children:r.default.node},c.defaultProps={},c.displayName="CardTitle";var l=c;t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(96))&&r.__esModule?r:{default:r},a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(21)),o=n(487),s=n(575);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=function(e){var t=e.children,n=l(e,["children"]),r=(0,a.useContext)(s.CardContext);return a.default.createElement(o.StyledCardContent,c({},r,n),t)};u.propTypes={children:i.default.node},u.defaultProps={},u.displayName="CardContent";var d=u;t.default=d},function(e,t,n){},function(e,t,n){},,function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";n(763)},,,function(e,t,n){"use strict";var r=n(26),i=n(7),a=n.n(i),o=n(15),s=n(2),c=n(3),l=n(37),u=n(5),d=n(6),f=n(0),p=(n(16),n(13)),h=(n(17),n(1)),b=n(32),v=n(8),y=(n(12),n(19),n(20),n(111)),m=n(102),g=(n(143),n(511)),O=n(56),j=n(77),w=n(75),_=n(9),k=n(72),x=n(4),S=n(25),T=n(181);function E(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left,x:t.left,y:t.top}}function C(e){if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function P(e){var t=C(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function I(e){return e instanceof C(e).Element||e instanceof Element}function M(e){return e instanceof C(e).HTMLElement||e instanceof HTMLElement}function A(e){return e?(e.nodeName||"").toLowerCase():null}function R(e){return((I(e)?e.ownerDocument:e.document)||window.document).documentElement}function L(e){return E(R(e)).left+P(e).scrollLeft}function F(e){return C(e).getComputedStyle(e)}function D(e){var t=F(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function N(e,t,n){void 0===n&&(n=!1);var r=R(t),i=E(e),a=M(t),o={scrollLeft:0,scrollTop:0},s={x:0,y:0};return(a||!a&&!n)&&(("body"!==A(t)||D(r))&&(o=function(e){return e!==C(e)&&M(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:P(e);var t}(t)),M(t)?((s=E(t)).x+=t.clientLeft,s.y+=t.clientTop):r&&(s.x=L(r))),{x:i.left+o.scrollLeft-s.x,y:i.top+o.scrollTop-s.y,width:i.width,height:i.height}}function V(e){return{x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}}function z(e){return"html"===A(e)?e:e.assignedSlot||e.parentNode||e.host||R(e)}function U(e){return["html","body","#document"].indexOf(A(e))>=0?e.ownerDocument.body:M(e)&&D(e)?e:U(z(e))}function B(e,t){void 0===t&&(t=[]);var n=U(e),r="body"===A(n),i=C(n),a=r?[i].concat(i.visualViewport||[],D(n)?n:[]):n,o=t.concat(a);return r?o:o.concat(B(z(a)))}function G(e){return["table","td","th"].indexOf(A(e))>=0}function q(e){if(!M(e)||"fixed"===F(e).position)return null;var t=e.offsetParent;if(t){var n=R(t);if("body"===A(t)&&"static"===F(t).position&&"static"!==F(n).position)return n}return t}function H(e){for(var t=C(e),n=q(e);n&&G(n)&&"static"===F(n).position;)n=q(n);return n&&"body"===A(n)&&"static"===F(n).position?t:n||function(e){for(var t=z(e);M(t)&&["html","body"].indexOf(A(t))<0;){var n=F(t);if("none"!==n.transform||"none"!==n.perspective||n.willChange&&"auto"!==n.willChange)return t;t=t.parentNode}return null}(e)||t}var W="top",$="bottom",J="right",Y="left",K="auto",Z=[W,$,J,Y],X="start",Q="end",ee="viewport",te="popper",ne=Z.reduce((function(e,t){return e.concat([t+"-"+X,t+"-"+Q])}),[]),re=[].concat(Z,[K]).reduce((function(e,t){return e.concat([t,t+"-"+X,t+"-"+Q])}),[]),ie=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function ae(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}function oe(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var se={placement:"bottom",modifiers:[],strategy:"absolute"};function ce(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function le(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,a=void 0===i?se:i;return function(e,t,n){void 0===n&&(n=a);var i={placement:"bottom",orderedModifiers:[],options:Object.assign(Object.assign({},se),a),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},o=[],s=!1,c={state:i,setOptions:function(n){l(),i.options=Object.assign(Object.assign(Object.assign({},a),i.options),n),i.scrollParents={reference:I(e)?B(e):e.contextElement?B(e.contextElement):[],popper:B(t)};var s=function(e){var t=ae(e);return ie.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign(Object.assign(Object.assign({},n),t),{},{options:Object.assign(Object.assign({},n.options),t.options),data:Object.assign(Object.assign({},n.data),t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=s.filter((function(e){return e.enabled})),i.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,a=e.effect;if("function"===typeof a){var s=a({state:i,name:t,instance:c,options:r}),l=function(){};o.push(s||l)}})),c.update()},forceUpdate:function(){if(!s){var e=i.elements,t=e.reference,n=e.popper;if(ce(t,n)){i.rects={reference:N(t,H(n),"fixed"===i.options.strategy),popper:V(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(e){return i.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var a=i.orderedModifiers[r],o=a.fn,l=a.options,u=void 0===l?{}:l,d=a.name;"function"===typeof o&&(i=o({state:i,options:u,name:d,instance:c})||i)}else i.reset=!1,r=-1}}},update:oe((function(){return new Promise((function(e){c.forceUpdate(),e(i)}))})),destroy:function(){l(),s=!0}};if(!ce(e,t))return c;function l(){o.forEach((function(e){return e()})),o=[]}return c.setOptions(n).then((function(e){!s&&n.onFirstUpdate&&n.onFirstUpdate(e)})),c}}var ue={passive:!0};function de(e){return e.split("-")[0]}function fe(e){return e.split("-")[1]}function pe(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function he(e){var t,n=e.reference,r=e.element,i=e.placement,a=i?de(i):null,o=i?fe(i):null,s=n.x+n.width/2-r.width/2,c=n.y+n.height/2-r.height/2;switch(a){case W:t={x:s,y:n.y-r.height};break;case $:t={x:s,y:n.y+n.height};break;case J:t={x:n.x+n.width,y:c};break;case Y:t={x:n.x-r.width,y:c};break;default:t={x:n.x,y:n.y}}var l=a?pe(a):null;if(null!=l){var u="y"===l?"height":"width";switch(o){case X:t[l]=t[l]-(n[u]/2-r[u]/2);break;case Q:t[l]=t[l]+(n[u]/2-r[u]/2)}}return t}var be={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ve(e){var t,n=e.popper,r=e.popperRect,i=e.placement,a=e.offsets,o=e.position,s=e.gpuAcceleration,c=e.adaptive,l=e.roundOffsets?function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:Math.round(t*r)/r||0,y:Math.round(n*r)/r||0}}(a):a,u=l.x,d=void 0===u?0:u,f=l.y,p=void 0===f?0:f,h=a.hasOwnProperty("x"),b=a.hasOwnProperty("y"),v=Y,y=W,m=window;if(c){var g=H(n);g===C(n)&&(g=R(n)),i===W&&(y=$,p-=g.clientHeight-r.height,p*=s?1:-1),i===Y&&(v=J,d-=g.clientWidth-r.width,d*=s?1:-1)}var O,j=Object.assign({position:o},c&&be);return s?Object.assign(Object.assign({},j),{},((O={})[y]=b?"0":"",O[v]=h?"0":"",O.transform=(m.devicePixelRatio||1)<2?"translate("+d+"px, "+p+"px)":"translate3d("+d+"px, "+p+"px, 0)",O)):Object.assign(Object.assign({},j),{},((t={})[y]=b?p+"px":"",t[v]=h?d+"px":"",t.transform="",t))}var ye={left:"right",right:"left",bottom:"top",top:"bottom"};function me(e){return e.replace(/left|right|bottom|top/g,(function(e){return ye[e]}))}var ge={start:"end",end:"start"};function Oe(e){return e.replace(/start|end/g,(function(e){return ge[e]}))}function je(e,t){var n,r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&((n=r)instanceof C(n).ShadowRoot||n instanceof ShadowRoot)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function we(e){return Object.assign(Object.assign({},e),{},{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function _e(e,t){return t===ee?we(function(e){var t=C(e),n=R(e),r=t.visualViewport,i=n.clientWidth,a=n.clientHeight,o=0,s=0;return r&&(i=r.width,a=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=r.offsetLeft,s=r.offsetTop)),{width:i,height:a,x:o+L(e),y:s}}(e)):M(t)?function(e){var t=E(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):we(function(e){var t=R(e),n=P(e),r=e.ownerDocument.body,i=Math.max(t.scrollWidth,t.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=Math.max(t.scrollHeight,t.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),o=-n.scrollLeft+L(e),s=-n.scrollTop;return"rtl"===F(r||t).direction&&(o+=Math.max(t.clientWidth,r?r.clientWidth:0)-i),{width:i,height:a,x:o,y:s}}(R(e)))}function ke(e,t,n){var r="clippingParents"===t?function(e){var t=B(z(e)),n=["absolute","fixed"].indexOf(F(e).position)>=0&&M(e)?H(e):e;return I(n)?t.filter((function(e){return I(e)&&je(e,n)&&"body"!==A(e)})):[]}(e):[].concat(t),i=[].concat(r,[n]),a=i[0],o=i.reduce((function(t,n){var r=_e(e,n);return t.top=Math.max(r.top,t.top),t.right=Math.min(r.right,t.right),t.bottom=Math.min(r.bottom,t.bottom),t.left=Math.max(r.left,t.left),t}),_e(e,a));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function xe(e){return Object.assign(Object.assign({},{top:0,right:0,bottom:0,left:0}),e)}function Se(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function Te(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,a=n.boundary,o=void 0===a?"clippingParents":a,s=n.rootBoundary,c=void 0===s?ee:s,l=n.elementContext,u=void 0===l?te:l,d=n.altBoundary,f=void 0!==d&&d,p=n.padding,h=void 0===p?0:p,b=xe("number"!==typeof h?h:Se(h,Z)),v=u===te?"reference":te,y=e.elements.reference,m=e.rects.popper,g=e.elements[f?v:u],O=ke(I(g)?g:g.contextElement||R(e.elements.popper),o,c),j=E(y),w=he({reference:j,element:m,strategy:"absolute",placement:i}),_=we(Object.assign(Object.assign({},m),w)),k=u===te?_:j,x={top:O.top-k.top+b.top,bottom:k.bottom-O.bottom+b.bottom,left:O.left-k.left+b.left,right:k.right-O.right+b.right},S=e.modifiersData.offset;if(u===te&&S){var T=S[i];Object.keys(x).forEach((function(e){var t=[J,$].indexOf(e)>=0?1:-1,n=[W,$].indexOf(e)>=0?"y":"x";x[e]+=T[n]*t}))}return x}function Ee(e,t,n){return Math.max(e,Math.min(t,n))}function Ce(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Pe(e){return[W,J,$,Y].some((function(t){return e[t]>=0}))}var Ie=le({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,a=void 0===i||i,o=r.resize,s=void 0===o||o,c=C(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&l.forEach((function(e){e.addEventListener("scroll",n.update,ue)})),s&&c.addEventListener("resize",n.update,ue),function(){a&&l.forEach((function(e){e.removeEventListener("scroll",n.update,ue)})),s&&c.removeEventListener("resize",n.update,ue)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=he({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,a=n.adaptive,o=void 0===a||a,s=n.roundOffsets,c=void 0===s||s,l={placement:de(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign(Object.assign({},t.styles.popper),ve(Object.assign(Object.assign({},l),{},{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign(Object.assign({},t.styles.arrow),ve(Object.assign(Object.assign({},l),{},{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign(Object.assign({},t.attributes.popper),{},{"data-popper-placement":t.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];M(i)&&A(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},a=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});M(r)&&A(r)&&(Object.assign(r.style,a),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,a=void 0===i?[0,0]:i,o=re.reduce((function(e,n){return e[n]=function(e,t,n){var r=de(e),i=[Y,W].indexOf(r)>=0?-1:1,a="function"===typeof n?n(Object.assign(Object.assign({},t),{},{placement:e})):n,o=a[0],s=a[1];return o=o||0,s=(s||0)*i,[Y,J].indexOf(r)>=0?{x:s,y:o}:{x:o,y:s}}(n,t.rects,a),e}),{}),s=o[t.placement],c=s.x,l=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=l),t.modifiersData[r]=o}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,a=void 0===i||i,o=n.altAxis,s=void 0===o||o,c=n.fallbackPlacements,l=n.padding,u=n.boundary,d=n.rootBoundary,f=n.altBoundary,p=n.flipVariations,h=void 0===p||p,b=n.allowedAutoPlacements,v=t.options.placement,y=de(v),m=c||(y===v||!h?[me(v)]:function(e){if(de(e)===K)return[];var t=me(e);return[Oe(e),t,Oe(t)]}(v)),g=[v].concat(m).reduce((function(e,n){return e.concat(de(n)===K?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,a=n.rootBoundary,o=n.padding,s=n.flipVariations,c=n.allowedAutoPlacements,l=void 0===c?re:c,u=fe(r),d=u?s?ne:ne.filter((function(e){return fe(e)===u})):Z,f=d.filter((function(e){return l.indexOf(e)>=0}));0===f.length&&(f=d);var p=f.reduce((function(t,n){return t[n]=Te(e,{placement:n,boundary:i,rootBoundary:a,padding:o})[de(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:u,rootBoundary:d,padding:l,flipVariations:h,allowedAutoPlacements:b}):n)}),[]),O=t.rects.reference,j=t.rects.popper,w=new Map,_=!0,k=g[0],x=0;x<g.length;x++){var S=g[x],T=de(S),E=fe(S)===X,C=[W,$].indexOf(T)>=0,P=C?"width":"height",I=Te(t,{placement:S,boundary:u,rootBoundary:d,altBoundary:f,padding:l}),M=C?E?J:Y:E?$:W;O[P]>j[P]&&(M=me(M));var A=me(M),R=[];if(a&&R.push(I[T]<=0),s&&R.push(I[M]<=0,I[A]<=0),R.every((function(e){return e}))){k=S,_=!1;break}w.set(S,R)}if(_)for(var L=function(e){var t=g.find((function(t){var n=w.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return k=t,"break"},F=h?3:1;F>0;F--){if("break"===L(F))break}t.placement!==k&&(t.modifiersData[r]._skip=!0,t.placement=k,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,a=void 0===i||i,o=n.altAxis,s=void 0!==o&&o,c=n.boundary,l=n.rootBoundary,u=n.altBoundary,d=n.padding,f=n.tether,p=void 0===f||f,h=n.tetherOffset,b=void 0===h?0:h,v=Te(t,{boundary:c,rootBoundary:l,padding:d,altBoundary:u}),y=de(t.placement),m=fe(t.placement),g=!m,O=pe(y),j="x"===O?"y":"x",w=t.modifiersData.popperOffsets,_=t.rects.reference,k=t.rects.popper,x="function"===typeof b?b(Object.assign(Object.assign({},t.rects),{},{placement:t.placement})):b,S={x:0,y:0};if(w){if(a){var T="y"===O?W:Y,E="y"===O?$:J,C="y"===O?"height":"width",P=w[O],I=w[O]+v[T],M=w[O]-v[E],A=p?-k[C]/2:0,R=m===X?_[C]:k[C],L=m===X?-k[C]:-_[C],F=t.elements.arrow,D=p&&F?V(F):{width:0,height:0},N=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},z=N[T],U=N[E],B=Ee(0,_[C],D[C]),G=g?_[C]/2-A-B-z-x:R-B-z-x,q=g?-_[C]/2+A+B+U+x:L+B+U+x,K=t.elements.arrow&&H(t.elements.arrow),Z=K?"y"===O?K.clientTop||0:K.clientLeft||0:0,Q=t.modifiersData.offset?t.modifiersData.offset[t.placement][O]:0,ee=w[O]+G-Q-Z,te=w[O]+q-Q,ne=Ee(p?Math.min(I,ee):I,P,p?Math.max(M,te):M);w[O]=ne,S[O]=ne-P}if(s){var re="x"===O?W:Y,ie="x"===O?$:J,ae=w[j],oe=Ee(ae+v[re],ae,ae-v[ie]);w[j]=oe,S[j]=oe-ae}t.modifiersData[r]=S}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=n.elements.arrow,a=n.modifiersData.popperOffsets,o=de(n.placement),s=pe(o),c=[Y,J].indexOf(o)>=0?"height":"width";if(i&&a){var l=n.modifiersData[r+"#persistent"].padding,u=V(i),d="y"===s?W:Y,f="y"===s?$:J,p=n.rects.reference[c]+n.rects.reference[s]-a[s]-n.rects.popper[c],h=a[s]-n.rects.reference[s],b=H(i),v=b?"y"===s?b.clientHeight||0:b.clientWidth||0:0,y=p/2-h/2,m=l[d],g=v-u[c]-l[f],O=v/2-u[c]/2+y,j=Ee(m,O,g),w=s;n.modifiersData[r]=((t={})[w]=j,t.centerOffset=j-O,t)}},effect:function(e){var t=e.state,n=e.options,r=e.name,i=n.element,a=void 0===i?"[data-popper-arrow]":i,o=n.padding,s=void 0===o?0:o;null!=a&&("string"!==typeof a||(a=t.elements.popper.querySelector(a)))&&je(t.elements.popper,a)&&(t.elements.arrow=a,t.modifiersData[r+"#persistent"]={padding:xe("number"!==typeof s?s:Se(s,Z))})},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,a=t.modifiersData.preventOverflow,o=Te(t,{elementContext:"reference"}),s=Te(t,{altBoundary:!0}),c=Ce(o,r),l=Ce(s,i,a),u=Pe(c),d=Pe(l);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign(Object.assign({},t.attributes.popper),{},{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]}),Me=["bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end","top","top-start","top-end"],Ae="esri-popover",Re="esri-popover--open",Le={position:"fixed","z-index":"1000"},Fe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e,r){var i;return Object(s.a)(this,n),(i=t.call(this,e,r))._popper=null,i._contentNode=null,i._renderAttached=!1,i._rootNode=null,i.anchorElement=null,i.offset=[0,0],i.open=!1,i.renderContentFunction=null,i._afterRootCreate=function(e){i._rootNode=e},i._afterContentCreate=function(e){i._contentNode=e},i._updatePosition=function(){Object(x.k)(i._popper)&&i._popper.update()},i}return Object(c.a)(n,[{key:"initialize",value:function(){var e=this;this.when((function(){e._projector.append(document.body,e.render),e._renderAttached=!0})),this.own(Object(S.a)(this,["open","anchorElement"],(function(){return e._buildPopper()})),Object(S.a)(this,["placement","offset"],(function(){return e._setPopperOptions()})))}},{key:"destroy",value:function(){this.owner=null,this.anchorElement=null,this.renderContentFunction=null,this._renderAttached&&(this._projector.detach(this.render),this._renderAttached=!1),Object(x.k)(this._rootNode)&&(Object(T.d)(this._rootNode),this._rootNode=null),this._contentNode=null,Object(x.k)(this._popper)&&(this._popper.destroy(),this._popper=null)}},{key:"container",set:function(e){}},{key:"owner",set:function(e){this._set("owner",e)}},{key:"placement",get:function(){return"top"},set:function(e){-1!==Me.indexOf(e)?this._override("placement",e):this._clearOverride("placement")}},{key:"render",value:function(){var e=this.open,t=this.owner,n=this.renderContentFunction;return Object(_.a)("div",{afterCreate:this._afterRootCreate,class:this.classes(Ae,e?Re:null),styles:Le},Object(_.a)("div",{afterCreate:this._afterContentCreate,afterUpdate:this._updatePosition},e&&(null==n?void 0:n.call(t))))}},{key:"_buildPopper",value:function(){Object(x.k)(this._popper)&&(this._popper.destroy(),this._popper=null);var e=this._contentNode;if(!Object(x.j)(e)&&this.open&&this.renderContentFunction){var t=this._getAnchor();t&&(this._popper=Ie(t,e),this._setPopperOptions())}}},{key:"_setPopperOptions",value:function(){var e=this.placement,t=this.offset,n=this._popper;Object(x.j)(n)||(n.setOptions({placement:e,modifiers:[{name:"offset",options:{offset:t}}]}),n.forceUpdate())}},{key:"_getAnchor",value:function(){var e=this.anchorElement;return Object(T.a)("function"==typeof e?e():e)}}]),n}(k.a);Object(f.a)([Object(h.b)()],Fe.prototype,"anchorElement",void 0),Object(f.a)([Object(h.b)()],Fe.prototype,"container",null),Object(f.a)([Object(h.b)()],Fe.prototype,"offset",void 0),Object(f.a)([Object(h.b)()],Fe.prototype,"open",void 0),Object(f.a)([Object(h.b)()],Fe.prototype,"owner",null),Object(f.a)([Object(h.b)()],Fe.prototype,"placement",null),Object(f.a)([Object(h.b)()],Fe.prototype,"renderContentFunction",void 0);var De=Fe=Object(f.a)([Object(v.a)("esri.widgets.support.Popover")],Fe),Ne=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.apply(this,arguments)).state="ready",e.value=new Date,e}return n}(n(36).a);Object(f.a)([Object(h.b)()],Ne.prototype,"state",void 0),Object(f.a)([Object(h.b)()],Ne.prototype,"value",void 0);var Ve=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e)}return n}(Ne=Object(f.a)([Object(v.a)("esri.widgets.support.MomentElementViewModel")],Ne)),ze=Ve=Object(f.a)([Object(v.a)("esri.widgets.support.DatePickerViewModel")],Ve),Ue=n(18);function Be(e){for(var t=[/\u0660/g,/\u0661/g,/\u0662/g,/\u0663/g,/\u0664/g,/\u0665/g,/\u0666/g,/\u0667/g,/\u0668/g,/\u0669/g],n=0;n<10;n++)e=e.replace(t[n],n.toString());return Number(e)}function Ge(e){return new Ue.a("could not parse date input, expecting the following format: ".concat(Object(m.b)(Date.now(),e)))}var qe="esri-date-picker",He="esri-date-picker__calendar",We="esri-date-picker__month-picker",$e="esri-date-picker__day-picker",Je="esri-date-picker__week-item",Ye="esri-date-picker__day-item--nearby-month",Ke="esri-date-picker__day-item--active",Ze="esri-date-picker__day-item--today",Xe="esri-date-picker__day-item--selected",Qe="esri-date-picker__day-item",et="esri-date-picker__day-item--header",tt="esri-date-picker__year-picker",nt="esri-date-picker__year-picker-item--selected",rt="esri-date-picker__year-picker-item",it="esri-date-picker__month-dropdown",at="esri-date-picker__date",ot="esri-date-picker__calendar-toggle",st="esri-date-picker__input",ct="esri-date-picker__text-input",lt="esri-date-picker__icon--leading",ut="esri-icon-left",dt="esri-icon-right",ft="esri-icon-calendar",pt="esri-widget",ht="esri-widget--button",bt="esri-input",vt="esri-select",yt={year:"numeric",month:"2-digit",day:"2-digit"},mt=[" ","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Enter","Home","PageDown","PageUp"],gt="esri.widgets.support.DatePicker",Ot=p.a.getLogger(gt),jt="onfocusout"in HTMLElement.prototype,wt="formatToParts"in Intl.DateTimeFormat.prototype,_t=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e,r){var i;return Object(s.a)(this,n),(i=t.call(this,e,r))._activeDate=null,i._calendarNode=null,i._calendarPopover=new De({owner:Object(l.a)(i),placement:"bottom-start",anchorElement:function(){return i._rootNode},renderContentFunction:i._renderCalendar}),i._closedByUserAction=!1,i._isOpen=!1,i._requestDayPickerFocusOnCreate=!1,i._rootNode=null,i.dateInputEnabled=!1,i.label=void 0,i.messages=null,i.value=null,i.commitOnMonthChange=!1,i.viewModel=new ze,i._handleDatePickerBlur=jt?null:i._handleDatePickerBlurOrFocusOut,i._handleDatePickerFocusOut=jt?i._handleDatePickerBlurOrFocusOut:null,i._toggle=i._toggle.bind(Object(l.a)(i)),i}return Object(c.a)(n,[{key:"loadLocale",value:function(){var e=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.a)();case 2:this._moment=e.sent,this._isOpen&&(this._activeDate=this._moment(this._activeDate.toDate()));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){this._calendarPopover.destroy()}},{key:"render",value:function(){return Object(_.a)("div",{afterCreate:O.i,bind:this,class:this.classes(qe,pt),"data-node-ref":"_rootNode"},wt&&this.dateInputEnabled?this.renderInputAndButtonMode():this.renderButtonOnlyMode())}},{key:"renderButtonOnlyMode",value:function(){var e=Object(m.b)(this.viewModel.value,yt),t=this._isOpen,n=this.messages;return Object(_.a)("div",{afterUpdate:this._focusSelectedOrClosed,"aria-controls":t?this._getCalendarId():null,"aria-expanded":t.toString(),"aria-haspopup":"true","aria-label":n.setDate,"aria-pressed":t.toString(),class:this.classes(ht,vt,ot),onclick:this._toggle,onkeydown:this._toggle,role:"button",tabIndex:0},Object(_.a)("span",{class:at},e))}},{key:"renderInputAndButtonMode",value:function(){var e=Object(m.b)(this.viewModel.value,yt),t=this._isOpen,n=this.messages;return Object(_.a)("div",{class:this.classes(st)},Object(_.a)("input",{"aria-controls":t?this._getCalendarId():null,"aria-haspopup":"true","aria-label":n.setDate,bind:this,class:this.classes(ct,bt),key:"date-input",onblur:this._handleDateInputBlur,onfocus:this._handleDateInputFocus,onkeydown:this._handleDateInputKeyDown,type:"text",value:e}),Object(_.a)("span",{"aria-hidden":"true",class:this.classes(lt,ft)}))}},{key:"_handleDateInputKeyDown",value:function(e){"Enter"===e.key&&this._handleDateText(e)}},{key:"_handleDateInputBlur",value:function(e){this._handleDatePickerBlurOrFocusOut(e),this._isOpen||this._handleDateText(e)}},{key:"_handleDateInputFocus",value:function(){this._open(this.viewModel.value,!1)}},{key:"_handleDateText",value:function(e){var t,n=e.currentTarget;try{t=function(e,t){var n=Object(m.c)(t),r=Date.now(),i=n.formatToParts(r),a=new Set;i.filter((function(e){return"literal"===e.type})).forEach((function(e){var t=e.value;return a.add(t)}));for(var o=0,s={};i.length>0;)for(var c=i.shift(),l=c.type,u=c.value,d=0;d<u.length;d++,o++){var f=e.charAt(o);if(a.has(f)){o++;break}if("literal"===l)break;s[l]||(s[l]=[]),s[l].push(f)}var p={};try{p.day=Be(s.day.join("")),p.month=Be(s.month.join(""))-1,p.year=Be((s.year||s.relatedYear).join(""))}catch(h){throw Ge(t)}if(isNaN(p.day)||isNaN(p.month)||isNaN(p.year))throw Ge(t);return p}(n.value,yt)}catch(i){return Ot.warn(i),void(n.value=Object(m.b)(this.viewModel.value,yt))}var r=this._moment(t);r.isValid()?(this.viewModel.value=r.toDate(),this._activeDate=r):n.value=Object(m.b)(this.viewModel.value,yt)}},{key:"_focusSelectedOrClosed",value:function(e){this._closedByUserAction&&(this._closedByUserAction=!1,e.focus())}},{key:"_handleDatePickerKeydown",value:function(e){"Escape"===Object(y.a)(e)&&(this._closedByUserAction=!0,this._close(),e.preventDefault(),e.stopPropagation())}},{key:"_renderCalendar",value:function(){var e=this._activeDate,t=this._moment(this.viewModel.value);return Object(_.a)("div",{afterCreate:O.i,bind:this,class:this.classes(He,pt),"data-node-ref":"_calendarNode",id:this._getCalendarId(),key:"esri-date-picker__calendar",onkeydown:this._handleDatePickerKeydown},this._renderMonthPicker(e),this._renderDayPicker(e,t),this._renderYearPicker(e))}},{key:"_getCalendarId",value:function(){return"date-picker__calendar--".concat(this.id)}},{key:"_handleDatePickerBlurOrFocusOut",value:function(e){if(e.currentTarget===e.target){var t=e.relatedTarget;this._calendarNode.contains(t)||this._rootNode.contains(t)||this._close()}}},{key:"_renderMonthPicker",value:function(e){var t=Object(O.f)(),n=t?dt:ut,r=t?ut:dt,i=this._moment.months().map((function(t,n){var r=e.month()===n;return Object(_.a)("option",{selected:r},t)})),a=this.messages;return Object(_.a)("div",{class:We},Object(_.a)("div",{"aria-label":a.goToPreviousMonth,bind:this,class:ht,onblur:this._handleDatePickerBlur,onclick:this._setPreviousMonth,onfocusout:this._handleDatePickerFocusOut,onkeydown:this._setPreviousMonth,role:"button",tabIndex:0,title:a.goToPreviousMonth},Object(_.a)("span",{"aria-hidden":"true",class:n})),Object(_.a)("select",{"aria-live":"assertive","aria-label":a.selectMonth,bind:this,class:this.classes(it,vt),id:"".concat(this.id,"__month-picker"),onblur:this._handleDatePickerBlur,onchange:this._setMonth,onfocusout:this._handleDatePickerFocusOut,onkeydown:this._setMonth,title:a.selectMonth},i),Object(_.a)("div",{"aria-label":a.goToNextMonth,bind:this,class:ht,onblur:this._handleDatePickerBlur,onclick:this._setNextMonth,onfocusout:this._handleDatePickerFocusOut,onkeydown:this._setNextMonth,role:"button",tabIndex:0,title:a.goToNextMonth},Object(_.a)("span",{"aria-hidden":"true",class:r})))}},{key:"_renderDayPicker",value:function(e,t){var n=this,r=e.clone().day(this._moment.localeData().firstDayOfWeek()),i=this._getWeekLabels(r),a=this._getDayId(e),o=this._renderMonth(e,t);return Object(_.a)("div",{afterCreate:this._handleDayPickerCreate,"aria-activedescendant":a,"aria-labelledby":"".concat(this.id,"__month-picker ").concat(this.id,"__selected-year"),bind:this,class:$e,id:"".concat(this.id,"__day-picker"),onblur:this._handleDatePickerBlur,onfocusout:this._handleDatePickerFocusOut,onkeydown:this._handleDayPickerKeydown,role:"grid",tabIndex:0},Object(_.a)("div",{class:Je,role:"row"},i.map((function(e){return Object(_.a)("div",{"aria-label":e.name,class:n.classes(Qe,et),role:"columnheader",title:e.name},e.abbr)}))),o)}},{key:"_getDayId",value:function(e){return"".concat(this.id,"__").concat(Object(m.b)(e.valueOf(),yt))}},{key:"_handleDayPickerCreate",value:function(e){this._requestDayPickerFocusOnCreate&&(this._requestDayPickerFocusOnCreate=!1,e.focus())}},{key:"_getWeekLabels",value:function(e){for(var t=[],n={weekday:"long"},r={weekday:"narrow"},i=0;i<7;i++)t.push({name:Object(m.b)(e.valueOf(),n),abbr:Object(m.b)(e.valueOf(),r)}),e.add(1,"day");return t}},{key:"_handleDayPickerKeydown",value:function(e){var t=e.ctrlKey,n=e.shiftKey,r=Object(y.a)(e),i=this._activeDate;if(-1!==mt.indexOf(r)){if("ArrowLeft"===r)i.subtract(1,"day");else if("ArrowRight"===r)i.add(1,"day");else if("ArrowUp"===r)i.subtract(1,"week");else if("ArrowDown"===r)i.add(1,"week");else if("PageUp"===r){var a=n?"year":"month";i.subtract(1,a)}else if("PageDown"===r){var o=n?"year":"month";i.add(1,o)}else if("Home"===r){var s=t?"year":"month";i.startOf(s)}else if("End"===r){var c=t?"year":"month";i.endOf(c)}else"Enter"!==r&&" "!==r||(this.viewModel.value=i.toDate(),this._closedByUserAction=!0,this._close());e.preventDefault(),e.stopPropagation()}}},{key:"_renderMonth",value:function(e,t){for(var n=this._moment(),i=e.clone().startOf("month"),a=e.clone().endOf("month"),o=i.clone().subtract(i.weekday(),"day"),s=[],c=0;c<6;c++){for(var l=[],u=0;u<7;u++){var d,f=o.date(),p=o.isSame(e,"day"),h=o.isSame(t,"day"),b=this._getDayId(o),v=(d={},Object(r.a)(d,Ye,!o.isBetween(i,a,null,"[]")),Object(r.a)(d,Ze,o.isSame(n,"day")),Object(r.a)(d,Ke,p),Object(r.a)(d,Xe,h),d);l.push(Object(_.a)("div",{"aria-label":f.toString(),"aria-selected":p.toString(),bind:this,class:this.classes(Qe,v),"data-iso-date":o.toISOString(),id:b,onclick:this._handleSelectedDate,onkeydown:this._handleSelectedDate,role:"gridcell"},f)),o.add(1,"day")}s.push(Object(_.a)("div",{class:Je,role:"row"},l))}return s}},{key:"_renderYearPicker",value:function(e){var t={year:"numeric"},n=e.clone(),r=Object(m.b)(n.valueOf(),t),i=Object(m.b)(n.add(1,"year").valueOf(),t),a=Object(m.b)(n.subtract(2,"year").valueOf(),t),o=this.messages;return Object(_.a)("div",{class:tt},Object(_.a)("div",{"aria-label":o.goToPreviousYear,bind:this,class:rt,onblur:this._handleDatePickerBlur,onclick:this._setPreviousYear,onfocusout:this._handleDatePickerFocusOut,onkeydown:this._setPreviousYear,tabIndex:0,title:o.goToPreviousYear},a),Object(_.a)("div",{class:this.classes(rt,nt),id:"".concat(this.id,"__selected-year")},r),Object(_.a)("div",{"aria-label":o.goToNextYear,bind:this,class:rt,onblur:this._handleDatePickerBlur,onclick:this._setNextYear,onfocusout:this._handleDatePickerFocusOut,onkeydown:this._setNextYear,tabIndex:0,title:o.goToNextYear},i))}},{key:"_toggle",value:function(){this._isOpen?this._close():this._open(this.viewModel.value)}},{key:"_setMonth",value:function(e){var t=e.target.value;this._activeDate.month(t),this.commitOnMonthChange&&(this.viewModel.value=this._activeDate.toDate())}},{key:"_close",value:function(){this._activeDate=null,this._isOpen=!1,this._calendarPopover.open=!1}},{key:"_open",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._activeDate=this._moment(e),this._isOpen=!0,this._calendarPopover.open=!0,this._requestDayPickerFocusOnCreate=t}},{key:"_setPreviousMonth",value:function(){this._activeDate.subtract(1,"month"),this.commitOnMonthChange&&(this.viewModel.value=this._activeDate.toDate())}},{key:"_setNextMonth",value:function(){this._activeDate.add(1,"month"),this.commitOnMonthChange&&(this.viewModel.value=this._activeDate.toDate())}},{key:"_setPreviousYear",value:function(){this._activeDate.subtract(1,"year")}},{key:"_setNextYear",value:function(){this._activeDate.add(1,"year")}},{key:"_handleSelectedDate",value:function(e){var t=e.target;this.viewModel.value=this._moment(t.getAttribute("data-iso-date")).toDate(),this._closedByUserAction=!0,this._close()}}]),n}(k.a);Object(f.a)([Object(h.b)()],_t.prototype,"dateInputEnabled",void 0),Object(f.a)([Object(h.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],_t.prototype,"label",void 0),Object(f.a)([Object(h.b)(),Object(w.a)("esri/widgets/support/t9n/DatePicker")],_t.prototype,"messages",void 0),Object(f.a)([Object(b.a)("viewModel.value")],_t.prototype,"value",void 0),Object(f.a)([Object(h.b)()],_t.prototype,"commitOnMonthChange",void 0),Object(f.a)([Object(h.b)({type:ze})],_t.prototype,"viewModel",void 0),Object(f.a)([Object(j.a)()],_t.prototype,"_toggle",null),Object(f.a)([Object(j.a)()],_t.prototype,"_setPreviousMonth",null),Object(f.a)([Object(j.a)()],_t.prototype,"_setNextMonth",null),Object(f.a)([Object(j.a)()],_t.prototype,"_setPreviousYear",null),Object(f.a)([Object(j.a)()],_t.prototype,"_setNextYear",null),Object(f.a)([Object(j.a)()],_t.prototype,"_handleSelectedDate",null);_t=Object(f.a)([Object(v.a)(gt)],_t)},,function(e,t,n){"use strict";var r=n(26),i=n(10),a=n(2),o=n(3),s=n(5),c=n(6),l=n(0),u=n(65),d=(n(16),n(13)),f=n(1),p=n(32),h=n(58),b=n(8),v=(n(12),n(19),n(20),n(111)),y=n(56),m=n(77),g=n(75),O=n(9),j=n(72),w=(n(17),n(36)),_=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).format=null,r.position={coordinate:null,location:null},r}return Object(o.a)(n,[{key:"displayCoordinate",get:function(){var e=this.get("format");return e&&e.getDisplayCoordinate(this.get("position.coordinate"))}}]),n}(w.a);Object(l.a)([Object(f.b)({readOnly:!0})],_.prototype,"displayCoordinate",null),Object(l.a)([Object(f.b)()],_.prototype,"format",void 0),Object(l.a)([Object(f.b)()],_.prototype,"position",void 0);var k=_=Object(l.a)([Object(b.a)("esri.widgets.CoordinateConversion.support.Conversion")],_),x=n(7),S=n.n(x),T=n(15),E=n(37),C=n(18),P=n(24),I=n(43),M=n(78),A=n(40),R=n(95),L=n(159),F=n(84),D=(n(143),n(220)),N=n(74),V=n(51),z=n(25),U=n(141),B=n(334),G=n(778),q=n(31),H=n(44),W=n(61),$=(n(71),n(336)),J={utm:{conversionMode:"utmDefault",addSpaces:!0},usng:{numOfDigits:5,rounding:!1,addSpaces:!1},mgrs:{rounding:!1}},Y=new Array(3);function K(e){return e>=500?6:e<500&&e>=50?7:e<50&&e>=5?8:9}function Z(e){return"number"==typeof e&&isFinite(e)}function X(e){return e&&Z(e.x)&&Z(e.y)}function Q(e,t){if(e.spatialReference.isGeographic&&t){var n=function(e,t){var n=K(t);return[e[0].toFixed(n),e[1].toFixed(n)]}([e.x,e.y],t),r=Object(q.a)(n,2),i=r[0],a=r[1];return"".concat(i,", ").concat(a)}return"".concat(e.x.toFixed(3),", ").concat(e.y.toFixed(3))}function ee(e){return"dd"===e||"dms"===e||"ddm"===e||"mgrs"===e||"usng"===e||"utm"===e}var te=n(486),ne=n(59),re=n(293),ie=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).conversionInfo=null,r.coordinateSegments=null,r.defaultPattern=null,r.name=null,r.viewModel=null,r}return Object(o.a)(n,[{key:"currentPattern",get:function(){return this._get("currentPattern")||this._get("defaultPattern")},set:function(e){this._set("currentPattern",e)}},{key:"hasDisplayProperties",get:function(){return!(!this.defaultPattern||!this.coordinateSegments)}},{key:"spatialReference",get:function(){var e=this.get("conversionInfo.spatialReference")||H.a.WGS84;return"basemap"===this.name?this._viewSpatialReference:e},set:function(e){void 0===e&&this._clearOverride("spatialReference"),this._override("spatialReference",e)}},{key:"_viewSpatialReference",get:function(){return this.get("viewModel.view.spatialReference")||H.a.WGS84}},{key:"_additionalCharactersPattern",get:function(){var e=this.get("coordinateSegments");if(!e)return null;var t=e.map((function(e){return e.alias})),n=this.currentPattern.replace(new RegExp('["nsew'.concat(t.join(),"]"),"gi"),"").replace(/\ /g,"");return new RegExp("[".concat(n,"]"),"g")}},{key:"convert",value:function(e,t){var n=this;if(!X(e))return Promise.reject(new C.a("format:invalid-point","Could not convert invalid point.",{point:e}));var r=this.get("conversionInfo.convert");return r?Promise.resolve().then((function(){return r(e)})):this._project(e,this.spatialReference,t).then((function(e){return n._getCoordinate(e).then((function(t){return{location:e,coordinate:t}}))}))}},{key:"getConversionStrategy",value:function(){var e=this._viewSpatialReference;return this.get("conversionInfo.convert")||this.get("viewModel.formatterAvailable")||"xy"===this.name&&(e.isWebMercator||e.isWGS84)||"basemap"===this.name?"client":"server"}},{key:"getDisplayCoordinate",value:function(e){if(!e)return null;if(!this.coordinateSegments||!this.currentPattern)return e;for(var t=this.currentPattern,n=this._getSegmentMatches(e,!1),r=this.coordinateSegments.length-1;r>=0;r--){var i=this.coordinateSegments[r];t=t.replace(i.alias,n[r])}return t}},{key:"parseUserInput",value:function(e){var t=this.defaultPattern.replace(this._additionalCharactersPattern,"");e=e.replace(this._additionalCharactersPattern,"");for(var n=this._getSegmentMatches(e,!0),r=this.coordinateSegments.length-1;r>=0;r--){var i=this.coordinateSegments[r];t=t.replace(i.alias,n[r])}return t}},{key:"_getSegmentMatches",value:function(e,t){for(var n=[],r=0;r<this.coordinateSegments.length;r++){var i=this.coordinateSegments[r],a=e.match(i.searchPattern);if(a){var o=a[0];if(e=e.replace(o,"").trim(),i.substitution){var s=t?i.substitution.input(o):i.substitution.output(o);s&&(o=s)}n.push(o)}else n.push("")}return n}},{key:"reverseConvert",value:function(e){var t,n=this.parseUserInput(e),r=this.get("conversionInfo.reverseConvert"),i=ee(this.name);if(r)t=r(n);else if("xy"===this.name||"basemap"===this.name)t=function(e,t){var n=e.indexOf(",")>=0?",":" ",r=e.split(n).map((function(e){var t=e.trim();return t?Number(t):null})),i=Object(q.a)(r,3),a=i[0],o=i[1],s=i[2];if(!Z(a)||!Z(o))return null;var c=new I.a({x:a,y:o,spatialReference:t||H.a.WGS84});return s&&(c.z=s,c.hasZ=!0),c}(n,this.spatialReference);else if(this.viewModel.formatterAvailable)switch(this.name){case"dd":case"ddm":case"dms":t=Object(re.a)(n,this.spatialReference);break;case"mgrs":t=Object(re.b)(n,this.spatialReference,"automatic");break;case"utm":t=Object(re.d)(n,this.spatialReference,"latitude-band-indicators");break;case"usng":t=Object(re.c)(n,this.spatialReference);break;default:t=null}else if(i)return function(e){var t=e.geometryServicePromise,n=e.coordinate,r=e.spatialReference,i=e.formatName;return t.then((function(e){return e.fromGeoCoordinateString({strings:[n],sr:r,conversionType:i}).then((function(e){var t=new I.a({x:e[0][0],y:e[0][1],spatialReference:r});if(!X(t))throw e;return t})).catch((function(e){throw new C.a("coordinate-conversion:from-geo-coordinate-string-failed","Failed to convert coordinate notation",{notationResult:e})}))}))}({coordinate:n,spatialReference:this.spatialReference,formatName:this.name,geometryServicePromise:this.get("viewModel.geometryServicePromise")});return t?this._project(t,this._viewSpatialReference):Promise.reject(new C.a("format:invalid-input","Could not parse input into point.",{userInput:e}))}},{key:"_getCoordinate",value:function(e){var t=this.get("viewModel.view.scale");if(!X(e))return Promise.reject(new C.a("format:invalid-point","Could not transform invalid point into coordinate.",{point:e}));if(this.get("viewModel.formatterAvailable")||"basemap"===this.name||"xy"===this.name)switch(this.name){case"dd":case"ddm":case"dms":var n=K(t);return Promise.resolve(Object(re.e)(e,this.name,n));case"mgrs":return Promise.resolve(Object(re.f)(e,"automatic",5,!1));case"usng":return Promise.resolve(Object(re.g)(e,5,!1));case"utm":return Promise.resolve(Object(re.h)(e,"latitude-band-indicators",!0));default:return Promise.resolve(Q(e,t))}return ee(this.name)?function(e){var t=e.formatName,n=e.location,r=e.geometryServicePromise,a=J[t]||{},o=Object(i.a)({coordinates:[[n.x,n.y]],sr:n.spatialReference,conversionType:t},a);return r.then((function(e){return e.toGeoCoordinateString(o).then((function(e){var t=e[0];if(!t)throw e;return t})).catch((function(e){throw new C.a("coordinate-conversion:to-geo-coordinate-string-failed","Failed to convert coordinate notation",{notationResult:e})}))}))}({formatName:this.name,location:e,geometryServicePromise:this.get("viewModel.geometryServicePromise")}):Promise.resolve(Q(e,t))}},{key:"_project",value:function(e,t,n){return Object(ne.c)(e.spatialReference,t)||!t?Promise.resolve(e):this.get("viewModel.formatterAvailable")&&Object(U.g)()?Promise.resolve(Object(U.j)(e,t)):this.get("viewModel.formatterAvailable")?null:Object(W.a)(e,t)?Promise.resolve(Object(W.d)(e,t)):function(e,t){var n=e.spatialReference,r=e.geometryServicePromise,i=e.location,a=e.scale;if(!n||i.spatialReference.wkid===n.wkid)return Promise.resolve({location:i,coordinate:Q(i,a)});if((i.spatialReference.isWGS84||i.spatialReference.isWebMercator)&&(n.isWGS84||n.isWebMercator))return Promise.resolve({location:Object(W.d)(i,n),coordinate:Q(i,a)});if(Y[0]===i&&Y[1]===n.wkid)return Y[2];Y[0]=i,Y[1]=n.wkid;var o=r.then((function(e){return e.project(new $.a({geometries:[i],outSpatialReference:n}),{signal:t}).then((function(e){if(!X(e[0]))throw e[0];return{location:e[0],coordinate:Q(e[0],a)}})).catch((function(e){throw new C.a("coordinate-conversion:projection-failed","Failed to project point",{projectionResult:e})}))}));return Y[2]=o,o}({location:e,spatialReference:t,geometryServicePromise:this.get("viewModel.geometryServicePromise"),scale:this.get("viewModel.view.scale")},n).then((function(e){return e.location}))}}]),n}(w.a);Object(l.a)([Object(f.b)()],ie.prototype,"conversionInfo",void 0),Object(l.a)([Object(f.b)()],ie.prototype,"coordinateSegments",void 0),Object(l.a)([Object(f.b)()],ie.prototype,"currentPattern",null),Object(l.a)([Object(f.b)()],ie.prototype,"defaultPattern",void 0),Object(l.a)([Object(f.b)({readOnly:!0})],ie.prototype,"hasDisplayProperties",null),Object(l.a)([Object(f.b)()],ie.prototype,"name",void 0),Object(l.a)([Object(f.b)({type:H.a})],ie.prototype,"spatialReference",null),Object(l.a)([Object(f.b)()],ie.prototype,"viewModel",void 0),Object(l.a)([Object(f.b)({readOnly:!0})],ie.prototype,"_viewSpatialReference",null),Object(l.a)([Object(f.b)({readOnly:!0})],ie.prototype,"_additionalCharactersPattern",null);var ae=ie=Object(l.a)([Object(b.a)("esri.widgets.CoordinateConversion.support.Format")],ie),oe=Object(te.c)().decimal,se={N:"north",S:"south",E:"east",W:"west"},ce="\xb0".concat("\u200e"),le=new RegExp("-?\\d+[\\.|\\".concat(oe,"]?\\d*")),ue=/^[\\0]+(?=\d)/;function de(e){var t=e.match(ue),n=t?t[0]:"",r=e.indexOf(".")>=0?e.split(".")[1].length:0;return n+Object(te.b)(Number(e),{pattern:"###0.###",places:r,round:-1})}function fe(e){return Object(te.d)(e)}var pe="default",he="crosshair",be=new I.a([0,0,500]),ve="".concat(window.location.pathname,"__coordinateConversionWidgetState"),ye=d.a.getLogger("esri.widgets.CoordinateConversion.CoordinateConversionViewModel"),me="conversions",ge="formats",Oe="view",je="view-change",we=0,_e=[],ke=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e))._conversionPromise=null,r._handles=new V.a,r._locationGraphic=null,r._locale=Object(R.b)(),r._pointerCount=0,r.conversions=new A.a,r.formats=new A.a,r.formatterAvailable=!1,r.geometryServicePromise=null,r.messages=null,r.requestDelay=300,r.locationSymbol=new D.a({url:Object(F.a)("esri/images/search/search-symbol-32.png"),width:24,height:24}),r.view=null,r._instanceNumber=we,we++,r._saveWidgetState=r._saveWidgetState.bind(Object(E.a)(r)),r._handleFormatChange=r._handleFormatChange.bind(Object(E.a)(r)),r._handleConversionChange=r._handleConversionChange.bind(Object(E.a)(r)),r._handleViewChange=r._handleViewChange.bind(Object(E.a)(r)),r._onClick=r._onClick.bind(Object(E.a)(r)),r._onPointerMove=r._onPointerMove.bind(Object(E.a)(r)),r._onPointerDown=r._onPointerDown.bind(Object(E.a)(r)),r._onPointerUp=r._onPointerUp.bind(Object(E.a)(r)),r}return Object(o.a)(n,[{key:"initialize",value:function(){var e=this;Object(T.a)(S.a.mark((function t(){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(L.a)("esri/widgets/CoordinateConversion/t9n/CoordinateConversion");case 2:return t.abrupt("return",e.messages=t.sent);case 3:case"end":return t.stop()}}),t)})))().then((function(){if(!e.destroyed&&(e.formats.addMany(function(e){var t=e.abbreviatedDirections.north,n=e.abbreviatedDirections.south,r=e.abbreviatedDirections.east,i=e.abbreviatedDirections.west,a={};a[t]="N",a[n]="S",a[r]="E",a[i]="W";var o=new RegExp("N|S|".concat(t,"|").concat(n),"i"),s=new RegExp("E|W|".concat(r,"|").concat(i),"i");return[new ae({name:"basemap",coordinateSegments:[{alias:"X",description:"easting",searchPattern:le,substitution:{input:function(e){return fe(e)},output:function(e){return de(e)}}},{alias:"Y",description:"northing",searchPattern:le,substitution:{input:function(e){return fe(e)},output:function(e){return de(e)}}}],defaultPattern:"X, Y",viewModel:null}),new ae({name:"dd",coordinateSegments:[{alias:"Y",description:"degrees latitude",searchPattern:new RegExp("\\d{1,2}[\\.|\\".concat(oe,"]?\\d*(?=\\D*?[N|S|").concat(t,"|").concat(n,"])"),"i"),substitution:{input:function(e){return fe(e)},output:function(e){return de(e)}}},{alias:e.abbreviatedDirections.north,description:"north/south indicator",searchPattern:o,substitution:{input:function(e){return a[e]},output:function(t){return e.abbreviatedDirections[se[t]]}}},{alias:"X",description:"degrees longitude",searchPattern:new RegExp("\\d{1,3}[\\.|\\".concat(oe,"]?\\d*(?=\\D*?[E|W|").concat(r,"|").concat(i,"])"),"i"),substitution:{input:function(e){return fe(e)},output:function(e){return de(e)}}},{alias:e.abbreviatedDirections.east,description:"east/west indicator",searchPattern:s,substitution:{input:function(e){return a[e]},output:function(t){return e.abbreviatedDirections[se[t]]}}}],defaultPattern:"Y".concat(ce).concat(e.abbreviatedDirections.north,", X").concat(ce).concat(e.abbreviatedDirections.east),viewModel:null}),new ae({name:"ddm",coordinateSegments:[{alias:"Y",description:"degrees latitude",searchPattern:new RegExp("\\d{1,2}(?=.*?\\s+.*?[N|S|".concat(t,"|").concat(n,"])"),"i"),substitution:{input:function(e){return fe(e)},output:function(e){return de(e)}}},{alias:"A",description:"minutes latitude",searchPattern:new RegExp("\\d{1,2}[\\.\\".concat(oe,"]?\\d*(?=.*?[N|S|").concat(t,"||").concat(n,"])"),"i"),substitution:{input:function(e){return fe(e)},output:function(e){return de(e)}}},{alias:e.abbreviatedDirections.north,description:"north/south indicator",searchPattern:o,substitution:{input:function(e){return a[e]},output:function(t){return e.abbreviatedDirections[se[t]]}}},{alias:"X",description:"degrees longitude",searchPattern:new RegExp("\\d{1,3}(?=\\D*?\\s+.*?[E|W|".concat(r,"|").concat(i,"])"),"i"),substitution:{input:function(e){return fe(e)},output:function(e){return de(e)}}},{alias:"B",description:"minutes longitude",searchPattern:new RegExp("\\d{1,2}[\\.|\\|".concat(oe,"]?\\d*(?=.*?[E|W|").concat(r,"|").concat(i,"])"),"i"),substitution:{input:function(e){return fe(e)},output:function(e){return de(e)}}},{alias:e.abbreviatedDirections.east,description:"east/west indicator",searchPattern:s,substitution:{input:function(e){return a[e]},output:function(t){return e.abbreviatedDirections[se[t]]}}}],defaultPattern:"Y".concat(ce," A'").concat(e.abbreviatedDirections.north,", X").concat(ce," B'").concat(e.abbreviatedDirections.east),viewModel:null}),new ae({name:"dms",coordinateSegments:[{alias:"Y",description:"degrees latitude",searchPattern:new RegExp("\\d{1,2}(?=.*?\\s+.*?[N|S|".concat(t,"|").concat(n,"])"),"i"),substitution:{input:function(e){return fe(e)},output:function(e){return de(e)}}},{alias:"A",description:"minutes latitude",searchPattern:new RegExp("\\d{1,2}(?=.*?[N|S|".concat(t,"|").concat(n,"])"),"i"),substitution:{input:function(e){return fe(e)},output:function(e){return de(e)}}},{alias:"B",description:"seconds latitude",searchPattern:new RegExp("\\d{1,2}[\\.|\\".concat(oe,"]?\\d*(?=.*?[N|S|").concat(t,"|").concat(n,"])"),"i"),substitution:{input:function(e){return fe(e)},output:function(e){return de(e)}}},{alias:e.abbreviatedDirections.north,description:"north/south indicator",searchPattern:o,substitution:{input:function(e){return a[e]},output:function(t){return e.abbreviatedDirections[se[t]]}}},{alias:"X",description:"degrees longitude",searchPattern:new RegExp("\\d{1,3}(?=.*?\\s+.*?[E|W|".concat(r,"|").concat(i,"])"),"i"),substitution:{input:function(e){return fe(e)},output:function(e){return de(e)}}},{alias:"C",description:"minutes longitude",searchPattern:new RegExp("\\d{1,2}(?=.*?[E|W|".concat(r,"|").concat(i,"])"),"i"),substitution:{input:function(e){return fe(e)},output:function(e){return de(e)}}},{alias:"D",description:"seconds longitude",searchPattern:new RegExp("\\d{1,2}[\\.|\\".concat(oe,"]?\\d*(?=.*?[E|W|").concat(r,"|").concat(i,"])"),"i"),substitution:{input:function(e){return fe(e)},output:function(e){return de(e)}}},{alias:e.abbreviatedDirections.east,description:"east/west indicator",searchPattern:s,substitution:{input:function(e){return a[e]},output:function(t){return e.abbreviatedDirections[se[t]]}}}],defaultPattern:"Y".concat(ce," A' B\"").concat(e.abbreviatedDirections.north,", X").concat(ce," C' D\"").concat(e.abbreviatedDirections.east),viewModel:null}),new ae({name:"xy",coordinateSegments:[{alias:"X",description:"longitude",searchPattern:le,substitution:{input:function(e){return fe(e)},output:function(e){return de(e)}}},{alias:"Y",description:"latitude",searchPattern:le,substitution:{input:function(e){return fe(e)},output:function(e){return de(e)}}}],defaultPattern:"X".concat(ce,", Y").concat(ce),viewModel:null}),new ae({name:"mgrs",coordinateSegments:[{alias:"Z",description:"grid zone",searchPattern:/\d{1,2}\w|[abyz]/i},{alias:"S",description:"grid square",searchPattern:/\w{2}/},{alias:"X",description:"easting",searchPattern:/^\d{5}(?=.?\d{5}$)|^\d{4}(?=.?\d{4}$)|^\d{3}(?=.?\d{3}$)|^\d{2}(?=.?\d{2}$)|^\d(?=.?\d$)/},{alias:"Y",description:"northing",searchPattern:/^\d{1,5}/}],defaultPattern:"Z S X Y",viewModel:null}),new ae({name:"usng",coordinateSegments:[{alias:"Z",description:"grid zone",searchPattern:/\d{1,2}\w|[abyz]/i},{alias:"S",description:"grid square",searchPattern:/\w{2}/},{alias:"X",description:"easting",searchPattern:/^\d{5}(?=.?\d{5}$)|^\d{4}(?=.?\d{4}$)|^\d{3}(?=.?\d{3}$)|^\d{2}(?=.?\d{2}$)|^\d(?=.?\d$)/},{alias:"Y",description:"northing",searchPattern:/^\d{1,5}/}],defaultPattern:"Z S X Y",viewModel:null}),new ae({name:"utm",coordinateSegments:[{alias:"Z",description:"zone number",searchPattern:/\d{1,2}|[abyz]/i},{alias:"B",description:"latitude band",searchPattern:/^\D/},{alias:"X",description:"easting",searchPattern:/\d{1,7}(?=\s*\d{7}$)/},{alias:"Y",description:"northing",searchPattern:/\d{1,7}/}],defaultPattern:"ZB X Y",viewModel:null})]}(e.messages)),e._loadWidgetState(),e.formats.forEach((function(t){t.viewModel=e,e._handles.add(t.watch("currentPattern",e._saveWidgetState),t.name)})),e._handles.add(e.conversions.on("change",e._handleConversionChange),me),e._handles.add(e.formats.on("change",e._handleFormatChange),ge),e._handles.add(Object(z.a)(e,"view.map",(function(){e.geometryServicePromise=Object(G.create)(e.get("view.map.portalItem"))})),je),Object(U.i)().then((function(){e.formatterAvailable=!0})).catch((function(t){ye.error(new C.a("coordinate-conversion:projection-load-failed","Failed to load the projection module.",{error:t})),e.formatterAvailable=!1})).then((function(){return e._handles.add(Object(z.a)(e,"view",e._handleViewChange),je)})),0===e.conversions.length)){var t=e.formats.find((function(e){return"xy"===e.name}))||e.formats.getItemAt(0);e.conversions.add(new k({format:t}))}}))}},{key:"destroy",value:function(){this._handles.removeAll(),this._cleanUpView(this.view),this.view=null}},{key:"currentLocation",get:function(){return this._get("currentLocation")||null},set:function(e){this._set("currentLocation",e),this._updateConversions()}},{key:"mode",get:function(){return this._get("mode")||"live"},set:function(e){switch(e){case"capture":this.currentLocation=null,this._startCaptureMode(),this._set("mode",e);break;case"live":this._startLiveMode(),this._set("mode",e)}}},{key:"state",get:function(){var e=this.messages,t=this.view,n=null==t?void 0:t.ready;return e?n?"ready":t?"loading":"disabled":"disabled"}},{key:"waitingForConversions",get:function(){return null!=this._conversionPromise}},{key:"_debouncedConvert",get:function(){return Object(P.i)((function(e,t,n){return Object(P.j)(e.map((function(e){return e.convert(t,n)})))}),this.requestDelay)}},{key:"setLocation",value:function(e){if(this.view.graphics.remove(this._locationGraphic),e){var t=e.clone();t.hasZ&&(t.z=void 0),this._locationGraphic=new N.a({geometry:t,symbol:this.get("locationSymbol")}),this.view.graphics.add(this._locationGraphic)}}},{key:"convert",value:function(e,t){return X(t)?Promise.resolve().then((function(){return e.convert(t)})):Promise.reject(new C.a("coordinate-conversion:invalid-point","Invalid point cannot be converted.",{point:t}))}},{key:"goToLocation",value:function(e){if(this.get("view.clippingArea")||this.get("view.map.basemap.baseLayers.length")>0){var t=this.get("view.clippingArea")||this.view.map.basemap.baseLayers.getItemAt(0).fullExtent;return t?t.contains(e)?this.callGoTo({target:e}):Promise.reject(new C.a("coordinate-conversion:go-to-failed","Point outside basemap extent.",{point:e})):this.callGoTo({target:e})}return this.callGoTo({target:e})}},{key:"pause",value:function(){this.currentLocation=null,this._handles.remove(Oe),this.view&&(this.view.cursor=pe,this.view.graphics.remove(this._locationGraphic))}},{key:"previewConversion",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentLocation||be;return this._convertMany([e],t).then((function(){return e.displayCoordinate}))}},{key:"resume",value:function(){"capture"===this.mode?this._startCaptureMode():this._startLiveMode()}},{key:"reverseConvert",value:function(e,t){return t.reverseConvert(e)}},{key:"updateConversions",value:function(){var e=Object(T.a)(S.a.mark((function e(t,n){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n&&n.type&&"point"===n.type?this._convertMany(t,n).then((function(e){return e.client.concat(e.server)})):(this._clearConversions(this.conversions),Promise.reject(new C.a("coordinate-conversion:invalid-input-point","Point is invalid, conversions cannot be updated.",{point:n}))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_cleanUpView",value:function(e){e&&(e.graphics.remove(this._locationGraphic),this._handles.remove(Oe),e.cursor=pe)}},{key:"_clearConversions",value:function(e){e.forEach((function(e){e.position={location:null,coordinate:null}}))}},{key:"_convertMany",value:function(e,t){var n=this,r=e.reduce((function(e,t){return e[t.format.getConversionStrategy()].push(t),e}),{client:[],server:[]}),i=r.client,a=r.server,o=Promise.all(i.map((function(e){return e.format.convert(t).then((function(t){return e.position=t,e})).catch((function(){e.position=null}))}))),s=function(e){return e?(n._conversionPromise=null,n.notifyChange("waitingForConversions"),e.map((function(e,t){var n=a[t];return e.error?(n.position=null,n):(n.position=e.value,n)}))):[]};return this._conversionPromise=a.length>0?this._debouncedConvert(a.map((function(e){return e.format})),t).then(s,s):Promise.resolve([]),this.notifyChange("waitingForConversions"),Promise.all([o,this._conversionPromise]).then((function(e){return{client:e[0],server:e[1]}}))}},{key:"_handleConversionChange",value:function(e){var t=this;e.added.forEach((function(e){var n=e.format;n.viewModel=t,t.currentLocation&&(t._set("waitingForConversions",!0),t.convert(n,t.currentLocation).then((function(n){e.position=n,t._set("waitingForConversions",!1)})))})),this._saveWidgetState()}},{key:"_handleFormatChange",value:function(e){var t=this;e.added.forEach((function(e){t._handles.add(e.watch("currentPattern",t._saveWidgetState),e.name),e.viewModel=t})),e.removed.forEach((function(e){e.viewModel=null,t._handles.remove(e.name)}))}},{key:"_loadWidgetState",value:function(){if(0===this._instanceNumber)try{var e=JSON.parse(localStorage.getItem(ve));e&&(_e=e)}catch(t){ye.error(new C.a("coordinate-conversion:invalid-local-storage-json","Could not read from localStorge.",{error:t}))}this._setWidgetState()}},{key:"_startCaptureMode",value:function(){this._handles.remove(Oe),this.view&&(this.view.cursor=he,this.currentLocation&&this.setLocation(this.currentLocation),this._handles.add(this.view.on("click",this._onClick),Oe))}},{key:"_startLiveMode",value:function(){this._pointerCount=0,this._handles.remove(Oe),this.view&&(this.view.cursor=pe,this.view.graphics.remove(this._locationGraphic),this._handles.add([this.view.on("pointer-down",this._onPointerDown),this.view.on("pointer-up",this._onPointerUp),this.view.on("pointer-move",this._onPointerMove)],Oe))}},{key:"_handleViewChange",value:function(e,t){t&&t!==e&&this._cleanUpView(t),e&&("capture"===this.mode&&this._startCaptureMode(),this._startLiveMode())}},{key:"_onClick",value:function(e){if(0===e.button){var t=this.view.toMap(e),n=t&&t.normalize();this.setLocation(n),this.currentLocation=n}}},{key:"_onPointerDown",value:function(e){var t=e.pointerType;if(this._pointerCount++,("touch"===t||"pen"===t)&&1===this._pointerCount){var n=this.view.toMap(e);this.currentLocation=n&&n.normalize()}}},{key:"_onPointerMove",value:function(e){if("mouse"===e.pointerType||1===this._pointerCount){var t=this.view.toMap(e);this.currentLocation=t&&t.normalize()}}},{key:"_onPointerUp",value:function(){this._pointerCount--}},{key:"_setWidgetState",value:function(){var e=this,t=_e[this._instanceNumber];if(t)try{t.formats.forEach((function(n){var r=e.formats.find((function(e){return e.name===n.name}));r&&t.locale===e._locale&&n.currentPattern&&(r.currentPattern=n.currentPattern),r&&n.index>=0&&e.conversions.add(new k({format:r}))}))}catch(n){ye.warn(new C.a("coordinate-conversion:local-storage-read-error","Could not get widget state from stored JSON.",{error:n})),_e[this._instanceNumber]={formats:[],locale:this._locale}}else _e[this._instanceNumber]={formats:[],locale:this._locale}}},{key:"_saveWidgetState",value:function(){var e=this._toJSON();_e[this._instanceNumber]={formats:e,locale:this._locale};try{localStorage.setItem(ve,JSON.stringify(_e))}catch(t){ye.error(new C.a("coordinate-conversion:local-storage-write-error","Could not write to localStorage.",{error:t}))}}},{key:"_updateConversions",value:function(){var e=Object(T.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.updateConversions(this.conversions.toArray(),this.currentLocation);case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"_toJSON",value:function(){var e=this;return this.formats.filter((function(e){var t=e.name;return"xy"===t||"basemap"===t||ee(t)})).map((function(t){return{name:t.name,currentPattern:t.currentPattern,defaultPattern:t.defaultPattern,index:e.conversions.findIndex((function(e){return e.format===t}))}})).sort((function(e,t){return e.index-t.index})).toArray()}}]),n}(Object(B.a)(M.a.EventedAccessor));Object(l.a)([Object(f.b)()],ke.prototype,"conversions",void 0),Object(l.a)([Object(f.b)({type:I.a})],ke.prototype,"currentLocation",null),Object(l.a)([Object(f.b)()],ke.prototype,"formats",void 0),Object(l.a)([Object(f.b)()],ke.prototype,"messages",void 0),Object(l.a)([Object(f.b)()],ke.prototype,"mode",null),Object(l.a)([Object(f.b)()],ke.prototype,"requestDelay",void 0),Object(l.a)([Object(f.b)({readOnly:!0})],ke.prototype,"state",null),Object(l.a)([Object(f.b)()],ke.prototype,"locationSymbol",void 0),Object(l.a)([Object(f.b)({readOnly:!0})],ke.prototype,"waitingForConversions",null),Object(l.a)([Object(f.b)()],ke.prototype,"view",void 0),Object(l.a)([Object(f.b)({readOnly:!0})],ke.prototype,"_debouncedConvert",null);var xe=ke=Object(l.a)([Object(b.a)("esri.widgets.CoordinateConversion.CoordinateConversionViewModel")],ke),Se="esri-coordinate-conversion esri-widget",Te="esri-coordinate-conversion--capture-mode",Ee="esri-coordinate-conversion--no-basemap",Ce="esri-coordinate-conversion__popup",Pe="esri-coordinate-conversion__conversion-list",Ie="esri-coordinate-conversion__row",Me="esri-coordinate-conversion__display",Ae="esri-coordinate-conversion__conversions-view--expanded",Re="esri-coordinate-conversion__conversions-view--expand-down",Le="esri-coordinate-conversion__conversions-view--expand-up",Fe="esri-coordinate-conversion__conversions-view",De="esri-coordinate-conversion__select-primary",Ne="esri-coordinate-conversion__select-row",Ve="esri-coordinate-conversion__tools",ze="esri-coordinate-conversion__mode-toggle",Ue="esri-coordinate-conversion__row-button",Be="esri-coordinate-conversion__back-button",Ge="esri-coordinate-conversion__button",qe="esri-coordinate-conversion__input-coordinate",He="esri-coordinate-conversion__input-form",We="esri-coordinate-conversion__input-group",$e="esri-coordinate-conversion__input-coordinate--rejected",Je="esri-coordinate-conversion__heading",Ye="esri-coordinate-conversion__pattern-input",Ke="esri-coordinate__settings",Ze="esri-coordinate-conversion__settings-group",Xe="esri-coordinate-conversion__settings-group-horizontal",Qe="esri-coordinate-conversion__preview-coordinate",et="esri-disabled",tt="esri-input",nt="esri-button",rt="esri-widget__heading",it="esri-widget--button",at="esri-icon-left-arrow",ot="esri-icon-right-arrow",st="esri-icon-map-pin",ct="esri-icon-up",lt="esri-icon-duplicate",ut="esri-icon-edit",dt="esri-select",ft="esri-icon-down",pt="esri-icon-refresh",ht="esri-icon-close",bt="esri-icon-settings2",vt={settingsButton:!0,inputButton:!0,captureButton:!0,expandButton:!0},yt=d.a.getLogger("esri.widgets.CoordinateConversion"),mt=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r){var o;return Object(a.a)(this,n),(o=t.call(this,e,r))._popupMessage=null,o._popupId=null,o._coordinateInput=null,o._badInput=!1,o._goToEnabled=!1,o._conversionFormat=null,o._settingsFormat=null,o._previewConversion=null,o._expanded=!1,o._popupVisible=!1,o._settingsVisible=!1,o._inputVisible=!1,o.conversions=null,o.currentLocation=null,o.formats=null,o.goToOverride=null,o.label=void 0,o.messages=null,o.messagesCommon=null,o.mode=null,o.orientation="auto",o.requestDelay=null,o.view=null,o.viewModel=new xe,o.visibleElements=Object(i.a)({},vt),o}return Object(o.a)(n,[{key:"multipleConversions",get:function(){var e=this._get("multipleConversions");return"boolean"!=typeof e||e},set:function(e){!1===e&&(this._expanded=!1,this.conversions.splice(1,this.conversions.length-1)),this._set("multipleConversions",e)}},{key:"castVisibleElements",value:function(e){return Object(i.a)(Object(i.a)({},vt),e)}},{key:"reverseConvert",value:function(e,t){return this.viewModel.reverseConvert(e,t)}},{key:"render",value:function(){var e,t=this.get("viewModel.state"),n="disabled"===t?Object(O.a)("div",{key:"esri-coordinate__no-basemap"},this.messages.noBasemap):null,i=!n&&this._inputVisible?this._renderInputForm():null,a=!n&&this._settingsVisible?this._renderSettings():null,o=n||i||a?null:this._renderConversionsView(),s=this._popupVisible?this._renderPopup():null,c=(e={},Object(r.a)(e,Te,"capture"===this.mode),Object(r.a)(e,et,"loading"===t),Object(r.a)(e,Ee,"disabled"===t),e);return Object(O.a)("div",{class:this.classes(Se,c)},s,n,o,a,i)}},{key:"_addConversion",value:function(e){var t=e.target,n=t.options[t.options.selectedIndex]["data-format"],r=t["data-index"],i=new k({format:n});t.options.selectedIndex=0,r>=0&&this.conversions.removeAt(r),this.conversions.add(i,r)}},{key:"_findSettingsFormat",value:function(){return this._settingsFormat||this.conversions.reduceRight((function(e,t){var n=t.format;return n.get("hasDisplayProperties")?n:e}),null)||this.formats.find((function(e){return e.hasDisplayProperties}))}},{key:"_hidePopup",value:function(){this._popupId&&(clearTimeout(this._popupId),this._popupId=null),this._popupVisible=!1,this._popupMessage=null,this.scheduleRender()}},{key:"_onConvertComplete",value:function(){this._inputVisible=!1,this._coordinateInput.value=""}},{key:"_onCopy",value:function(e){var t=e.currentTarget["data-conversion"].displayCoordinate;"clipboardData"in u.a?u.a.clipboardData.setData("text",t):e.clipboardData.setData("text/plain",t),this._showPopup(this.messages.copySuccessMessage),e.preventDefault()}},{key:"_processUserInput",value:function(e){var t=this,n=Object(v.a)(e),r=this.viewModel;if("Enter"!==n&&n)this._badInput&&(this._badInput=!1);else{var i=this._coordinateInput["data-format"],a=this._coordinateInput.value;this._reverseConvert(a,i).then((function(e){"capture"===t.mode?r.resume():t.mode="capture",t.currentLocation=e,r.setLocation(e),t._onConvertComplete()})).catch((function(e){yt.error(e),t._showPopup(t.messages.invalidCoordinate),t._badInput=!0}))}}},{key:"_reverseConvert",value:function(e,t){var n=this,r=this.viewModel;return t.reverseConvert(e).then((function(e){return n._goToEnabled&&r.goToLocation(e).catch((function(e){yt.warn(e),n._showPopup(n.messages.locationOffBasemap)})),e}))}},{key:"_setInputFormat",value:function(e){var t=e.target,n=t[t.options.selectedIndex]["data-format"];this._conversionFormat=n}},{key:"_setPreviewConversion",value:function(){var e=this._findSettingsFormat(),t=this.viewModel;if(e){var n=this.conversions.find((function(t){return t.format===e}));this._previewConversion=new k({format:e,position:{location:this.currentLocation,coordinate:n&&n.position.coordinate}}),this._previewConversion.position.coordinate||t.previewConversion(this._previewConversion)}}},{key:"_setSettingsFormat",value:function(e){var t=e.target,n=t[t.options.selectedIndex]["data-format"];this._settingsFormat=n,this._setPreviewConversion()}},{key:"_showPopup",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2500;this._popupMessage=e,this._popupVisible?clearTimeout(this._popupId):this._popupVisible=!0,this.scheduleRender(),this._popupId=setTimeout((function(){t._popupId=null,t._hidePopup()}),n)}},{key:"_toggleGoTo",value:function(){this._goToEnabled=!this._goToEnabled}},{key:"_updateCurrentPattern",value:function(e){e.stopPropagation();var t=e.target,n=this._findSettingsFormat();n&&(n.currentPattern=t.value)}},{key:"_renderConversion",value:function(e,t){var n=this.messages,r="".concat(this.id,"__list-item-").concat(t),i="".concat(e.format.name," ").concat(n.conversionOutputSuffix),a=0===t,o=a||this._expanded,s=a?this._renderFirstConversion(e):this._renderTools(t,e,r),c=a&&!e.displayCoordinate?n.noLocation:e.displayCoordinate,l=Object(O.a)("div",{"aria-label":c,class:Me,"data-conversion":e,role:"listitem",tabindex:"0",title:c},c),u=this._renderOptions(this.formats.filter((function(t){return t!==e.format})));return o?Object(O.a)("li",{"aria-label":i,class:Ie,id:r,key:e,role:"group",title:i,tabindex:"0"},Object(O.a)("select",{"aria-controls":r,"aria-label":n.selectFormat,class:this.classes(dt,Ne),bind:this,"data-index":t,onchange:this._addConversion,title:n.selectFormat},Object(O.a)("option",{"aria-label":e.format.name,selected:!0,title:e.format.name},e.format.name.toUpperCase()),u),l,s):null}},{key:"_renderCopyButton",value:function(e){return Object(O.a)("li",{"aria-label":this.messagesCommon.copy,bind:this,class:this.classes(it,Ue),"data-conversion":e,onclick:this._copyCoordinateOutput,onkeydown:this._copyCoordinateOutput,oncopy:this._onCopy,role:"button",tabindex:"0",title:this.messagesCommon.copy},Object(O.a)("span",{"aria-hidden":"true",class:lt}))}},{key:"_renderFirstConversion",value:function(e){var t,n=this.id,i=(t={},Object(r.a)(t,ft,!this._expanded),Object(r.a)(t,ct,this._expanded),t),a=this.messages,o=this.messagesCommon,s=this.multipleConversions,c=this.visibleElements,l="live"===this.mode?a.captureMode:a.liveMode,u=this._expanded?o.collapse:o.expand,d=e.displayCoordinate&&"capture"===this.mode?this._renderCopyButton(e):null,f=s&&c.expandButton&&Object(O.a)("li",{"aria-controls":"".concat(n,"__").concat(Pe),"aria-label":u,bind:this,class:it,key:"esri-coordinate-conversion__expand-button",onclick:this._toggleExpand,onkeydown:this._toggleExpand,role:"button",tabindex:"0",title:u},Object(O.a)("span",{"aria-hidden":"true",class:this.classes(i)})),p=!s&&c.captureButton&&Object(O.a)("li",{"aria-label":l,bind:this,class:this.classes(it,ze),key:"esri-coordinate-conversion__mode-toggle",onclick:this._toggleMode,onkeydown:this._toggleMode,role:"button",tabindex:"0",title:l},Object(O.a)("span",{"aria-hidden":"true",class:st}));return Object(O.a)("ul",{class:Ve},d,f,p)}},{key:"_renderInputForm",value:function(){var e=this._conversionFormat||this.conversions.getItemAt(0).format,t=this.formats.findIndex((function(t){return t.name===e.name})),n=this.id,i="".concat(n,"__").concat(qe),a="".concat(n,"__").concat(qe,"__header"),o=this._renderOptions(this.formats,!0,t),s=Object(r.a)({},$e,this._badInput),c=this.messages,l=this.messagesCommon;return Object(O.a)("div",{"aria-labelledby":a,class:He,key:"esri-coordinate-conversion__input-form",role:"search"},Object(O.a)("div",{class:Je},Object(O.a)("div",{"aria-label":l.back,bind:this,class:this.classes(it,Be),onclick:this._toggleInputVisibility,onkeydown:this._toggleInputVisibility,role:"button",tabindex:"0",title:l.back},this._renderBackIcon()),Object(O.a)("h4",{class:rt,id:a},c.inputCoordTitle)),Object(O.a)("div",{class:We},Object(O.a)("select",{"aria-controls":i,"aria-label":c.selectFormat,bind:this,class:this.classes(dt,Ne),onchange:this._setInputFormat,title:c.selectFormat},o),Object(O.a)("input",{afterCreate:y.i,"aria-labelledby":a,"aria-required":"true",bind:this,class:this.classes(qe,tt,s),"data-format":e,"data-node-ref":"_coordinateInput",id:i,onkeydown:this._processUserInput,placeholder:c.inputCoordTitle,role:"textbox",spellcheck:!1,title:c.inputCoordTitle,type:"text"})),Object(O.a)("div",{class:We},Object(O.a)("label",{"aria-label":c.goTo},Object(O.a)("input",{bind:this,checked:this._goToEnabled,onclick:this._toggleGoTo,title:c.goTo,type:"checkbox"}),c.goTo),Object(O.a)("button",{"aria-label":c.convert,bind:this,class:this.classes(Ge,nt),onclick:this._processUserInput,title:c.convert,type:"button"},c.convert)))}},{key:"_renderConversionsView",value:function(){var e,t=this,n="".concat(this.id,"__").concat(Pe),i=this._renderPrimaryTools(),a=this._renderOptions(this.formats),o=this.conversions.map((function(e,n){return t._renderConversion(e,n)})).toArray(),s=this.messages,c=this._expanded?Object(O.a)("div",{class:Ie},Object(O.a)("select",{"aria-controls":n,"aria-label":s.addConversion,bind:this,class:this.classes(dt,De),onchange:this._addConversion,title:s.addConversion},Object(O.a)("option",{disabled:!0,selected:!0,value:""},s.addConversion),a),i):null,l=(e={},Object(r.a)(e,Ae,this._expanded),Object(r.a)(e,Le,"expand-up"===this.orientation),Object(r.a)(e,Re,"expand-down"===this.orientation),e);return Object(O.a)("div",{class:this.classes(Fe,l),key:"esri-coordinate-conversion__main-view"},Object(O.a)("ul",{"aria-expanded":this._expanded?"true":"false",class:Pe,id:n},o),c)}},{key:"_renderOptions",value:function(e,t,n){var r=this,i=this.conversions.getItemAt(0);return e.map((function(e,a){var o=!(t||!i)&&(i.format.name===e.name||r.conversions.map((function(e){return e.format.name})).includes(e.name));return Object(O.a)("option",{"aria-label":e.name,"data-format":e,disabled:o,key:e.name,selected:a===n,value:e.name},e.name.toUpperCase())})).toArray()}},{key:"_renderPopup",value:function(){return Object(O.a)("div",{class:Ce,role:"alert"},this._popupMessage)}},{key:"_renderPrimaryTools",value:function(){var e=this.messages,t=this.visibleElements,n="live"===this.mode?e.captureMode:e.liveMode,r=t.inputButton&&Object(O.a)("li",{bind:this,class:it,onclick:this._toggleInputVisibility,onkeydown:this._toggleInputVisibility,role:"button",tabindex:"0",title:e.inputCoordTitle},Object(O.a)("span",{"aria-hidden":"true",class:ut})),i=t.captureButton&&Object(O.a)("li",{bind:this,class:this.classes(it,ze),onclick:this._toggleMode,onkeydown:this._toggleMode,role:"button",tabindex:"0",title:n},Object(O.a)("span",{"aria-hidden":"true",class:st})),a=t.settingsButton&&Object(O.a)("li",{bind:this,class:it,onclick:this._toggleSettingsVisibility,onkeydown:this._toggleSettingsVisibility,role:"button",tabindex:"0",title:e.settingsTitle},Object(O.a)("span",{"aria-hidden":"true",class:bt}));return Object(O.a)("ul",{class:Ve},r,i,a)}},{key:"_renderSettings",value:function(){var e=this.id,t="".concat(e,"__").concat(Ye),n="".concat(e,"__").concat(Ye,"__header"),r="".concat(e,"__").concat(Qe),i=this.formats.filter((function(e){return e.hasDisplayProperties})),a=this._findSettingsFormat(),o=i.indexOf(a),s=this._renderOptions(i,!0,o),c=a.get("currentPattern"),l=this.messages,u=this.messagesCommon;return Object(O.a)("div",{"aria-labelledby":n,class:Ke,key:"esri-coordinate-conversion__settings"},Object(O.a)("div",{class:Je},Object(O.a)("div",{bind:this,class:this.classes(it,Be),onclick:this._toggleSettingsVisibility,onkeydown:this._toggleSettingsVisibility,role:"button",tabindex:"0",title:u.back},this._renderBackIcon()),Object(O.a)("h4",{class:rt,id:n},l.settingsTitle)),Object(O.a)("div",{class:Ze},Object(O.a)("label",{for:t},l.changeCoordinateDisplay),Object(O.a)("select",{"aria-label":l.selectFormat,class:dt,bind:this,onchange:this._setSettingsFormat,title:l.selectFormat},s),Object(O.a)("div",{class:Xe},Object(O.a)("input",{"aria-controls":r,bind:this,class:this.classes(Ye,tt),id:t,oninput:this._updateCurrentPattern,spellcheck:!1,title:l.changeCoordinateDisplay,type:"text",value:c}),Object(O.a)("div",{"aria-controls":t,bind:this,class:it,onclick:this._setDefaultPattern,onkeydown:this._setDefaultPattern,role:"button",tabindex:"0",title:l.defaultPattern},Object(O.a)("span",{"aria-hidden":"true",class:pt})))),Object(O.a)("div",{class:Ze},Object(O.a)("label",null,u.preview,Object(O.a)("div",{class:Qe,id:r,tabindex:"0"},this._previewConversion.displayCoordinate))))}},{key:"_renderBackIcon",value:function(){return Object(O.a)("span",{"aria-hidden":"true",class:Object(y.f)()?ot:at})}},{key:"_renderTools",value:function(e,t,n){var r=t.displayCoordinate&&"capture"===this.mode?this._renderCopyButton(t):null,i=this.messages;return Object(O.a)("ul",{class:Ve,role:"listitem"},r,Object(O.a)("li",{"aria-controls":n,"aria-label":i.removeConversion,bind:this,class:this.classes(it,Ue),"data-index":e,key:"".concat(n,"__").concat(it),onclick:this._removeConversion,onkeydown:this._removeConversion,tabindex:"0",role:"button",title:i.removeConversion},Object(O.a)("span",{"aria-hidden":"true",class:ht})))}},{key:"_copyCoordinateOutput",value:function(e){var t=e.target;if(!("createTextRange"in document.body)){var n=window.getSelection(),r=document.createRange();r.selectNodeContents(t),n.removeAllRanges(),n.addRange(r)}document.execCommand("copy")}},{key:"_removeConversion",value:function(e){var t=e.currentTarget["data-index"];this.conversions.removeAt(t)}},{key:"_setDefaultPattern",value:function(e){e.stopPropagation();var t=this._findSettingsFormat();t&&(t.currentPattern=t.get("defaultPattern"))}},{key:"_toggleExpand",value:function(){this._expanded=!this._expanded}},{key:"_toggleInputVisibility",value:function(){this._inputVisible=!this._inputVisible,this._popupVisible&&this._hidePopup(),this._inputVisible?this.viewModel.pause():this.viewModel.resume()}},{key:"_toggleMode",value:function(){this.mode="live"===this.mode?"capture":"live"}},{key:"_toggleSettingsVisibility",value:function(){this._settingsVisible=!this._settingsVisible,this._popupVisible&&this._hidePopup(),this._settingsVisible?(this._setPreviewConversion(),this.viewModel.pause()):this.viewModel.resume()}}]),n}(j.a);Object(l.a)([Object(p.a)("viewModel.conversions")],mt.prototype,"conversions",void 0),Object(l.a)([Object(p.a)("viewModel.currentLocation")],mt.prototype,"currentLocation",void 0),Object(l.a)([Object(p.a)("viewModel.formats")],mt.prototype,"formats",void 0),Object(l.a)([Object(p.a)("viewModel.goToOverride")],mt.prototype,"goToOverride",void 0),Object(l.a)([Object(f.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],mt.prototype,"label",void 0),Object(l.a)([Object(f.b)(),Object(g.a)("esri/widgets/CoordinateConversion/t9n/CoordinateConversion")],mt.prototype,"messages",void 0),Object(l.a)([Object(f.b)(),Object(g.a)("esri/t9n/common")],mt.prototype,"messagesCommon",void 0),Object(l.a)([Object(p.a)("viewModel.mode")],mt.prototype,"mode",void 0),Object(l.a)([Object(f.b)()],mt.prototype,"orientation",void 0),Object(l.a)([Object(p.a)("viewModel.requestDelay")],mt.prototype,"requestDelay",void 0),Object(l.a)([Object(f.b)()],mt.prototype,"multipleConversions",null),Object(l.a)([Object(p.a)("viewModel.locationSymbol")],mt.prototype,"locationSymbol",void 0),Object(l.a)([Object(p.a)("viewModel.view")],mt.prototype,"view",void 0),Object(l.a)([Object(f.b)({type:xe})],mt.prototype,"viewModel",void 0),Object(l.a)([Object(f.b)()],mt.prototype,"visibleElements",void 0),Object(l.a)([Object(h.a)("visibleElements")],mt.prototype,"castVisibleElements",null),Object(l.a)([Object(m.a)()],mt.prototype,"_copyCoordinateOutput",null),Object(l.a)([Object(m.a)()],mt.prototype,"_removeConversion",null),Object(l.a)([Object(m.a)()],mt.prototype,"_setDefaultPattern",null),Object(l.a)([Object(m.a)()],mt.prototype,"_toggleExpand",null),Object(l.a)([Object(m.a)()],mt.prototype,"_toggleInputVisibility",null),Object(l.a)([Object(m.a)()],mt.prototype,"_toggleMode",null),Object(l.a)([Object(m.a)()],mt.prototype,"_toggleSettingsVisibility",null);mt=Object(l.a)([Object(b.a)("esri.widgets.CoordinateConversion")],mt)},function(e,t,n){"use strict";n.r(t),n.d(t,"Popper",(function(){return C})),n.d(t,"placements",(function(){return E})),n.d(t,"Manager",(function(){return j})),n.d(t,"Reference",(function(){return A}));var r=n(776),i=n.n(r),a=n(367),o=n.n(a),s=n(409),c=n.n(s),l=n(94),u=n.n(l),d=n(140),f=n.n(d),p=n(777),h=n.n(p),b=n(21),v=n(593),y=n(594),m=n.n(y),g=m()(),O=m()(),j=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,f()(u()(u()(t)),"referenceNode",void 0),f()(u()(u()(t)),"setReferenceNode",(function(e){e&&t.referenceNode!==e&&(t.referenceNode=e,t.forceUpdate())})),t}c()(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this.referenceNode=null},n.render=function(){return b.createElement(g.Provider,{value:this.referenceNode},b.createElement(O.Provider,{value:this.setReferenceNode},this.props.children))},t}(b.Component),w=function(e){return Array.isArray(e)?e[0]:e},_=function(e){if("function"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}},k=function(e,t){if("function"===typeof e)return _(e,t);null!=e&&(e.current=t)},x={position:"absolute",top:0,left:0,opacity:0,pointerEvents:"none"},S={},T=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,f()(u()(u()(t)),"state",{data:void 0,placement:void 0}),f()(u()(u()(t)),"popperInstance",void 0),f()(u()(u()(t)),"popperNode",null),f()(u()(u()(t)),"arrowNode",null),f()(u()(u()(t)),"setPopperNode",(function(e){e&&t.popperNode!==e&&(k(t.props.innerRef,e),t.popperNode=e,t.updatePopperInstance())})),f()(u()(u()(t)),"setArrowNode",(function(e){t.arrowNode=e})),f()(u()(u()(t)),"updateStateModifier",{enabled:!0,order:900,fn:function(e){var n=e.placement;return t.setState({data:e,placement:n}),e}}),f()(u()(u()(t)),"getOptions",(function(){return{placement:t.props.placement,eventsEnabled:t.props.eventsEnabled,positionFixed:t.props.positionFixed,modifiers:o()({},t.props.modifiers,{arrow:o()({},t.props.modifiers&&t.props.modifiers.arrow,{enabled:!!t.arrowNode,element:t.arrowNode}),applyStyle:{enabled:!1},updateStateModifier:t.updateStateModifier})}})),f()(u()(u()(t)),"getPopperStyle",(function(){return t.popperNode&&t.state.data?o()({position:t.state.data.offsets.popper.position},t.state.data.styles):x})),f()(u()(u()(t)),"getPopperPlacement",(function(){return t.state.data?t.state.placement:void 0})),f()(u()(u()(t)),"getArrowStyle",(function(){return t.arrowNode&&t.state.data?t.state.data.arrowStyles:S})),f()(u()(u()(t)),"getOutOfBoundariesState",(function(){return t.state.data?t.state.data.hide:void 0})),f()(u()(u()(t)),"destroyPopperInstance",(function(){t.popperInstance&&(t.popperInstance.destroy(),t.popperInstance=null)})),f()(u()(u()(t)),"updatePopperInstance",(function(){t.destroyPopperInstance();var e=u()(u()(t)).popperNode,n=t.props.referenceElement;n&&e&&(t.popperInstance=new v.a(n,e,t.getOptions()))})),f()(u()(u()(t)),"scheduleUpdate",(function(){t.popperInstance&&t.popperInstance.scheduleUpdate()})),t}c()(t,e);var n=t.prototype;return n.componentDidUpdate=function(e,t){this.props.placement===e.placement&&this.props.referenceElement===e.referenceElement&&this.props.positionFixed===e.positionFixed&&h()(this.props.modifiers,e.modifiers,{strict:!0})?this.props.eventsEnabled!==e.eventsEnabled&&this.popperInstance&&(this.props.eventsEnabled?this.popperInstance.enableEventListeners():this.popperInstance.disableEventListeners()):this.updatePopperInstance(),t.placement!==this.state.placement&&this.scheduleUpdate()},n.componentWillUnmount=function(){k(this.props.innerRef,null),this.destroyPopperInstance()},n.render=function(){return w(this.props.children)({ref:this.setPopperNode,style:this.getPopperStyle(),placement:this.getPopperPlacement(),outOfBoundaries:this.getOutOfBoundariesState(),scheduleUpdate:this.scheduleUpdate,arrowProps:{ref:this.setArrowNode,style:this.getArrowStyle()}})},t}(b.Component);f()(T,"defaultProps",{placement:"bottom",eventsEnabled:!0,referenceElement:void 0,positionFixed:!1});var E=v.a.placements;function C(e){var t=e.referenceElement,n=i()(e,["referenceElement"]);return b.createElement(g.Consumer,null,(function(e){return b.createElement(T,o()({referenceElement:void 0!==t?t:e},n))}))}var P=n(580),I=n.n(P),M=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,f()(u()(u()(t)),"refHandler",(function(e){k(t.props.innerRef,e),_(t.props.setReferenceNode,e)})),t}c()(t,e);var n=t.prototype;return n.componentWillUnmount=function(){k(this.props.innerRef,null)},n.render=function(){return I()(Boolean(this.props.setReferenceNode),"`Reference` should not be used outside of a `Manager` component."),w(this.props.children)({ref:this.refHandler})},t}(b.Component);function A(e){return b.createElement(O.Consumer,null,(function(t){return b.createElement(M,o()({setReferenceNode:t},e))}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"UNMOUNTED",(function(){return d})),n.d(t,"EXITED",(function(){return f})),n.d(t,"ENTERING",(function(){return p})),n.d(t,"ENTERED",(function(){return h})),n.d(t,"EXITING",(function(){return b}));var r=n(160),i=n(189),a=(n(96),n(21)),o=n.n(a),s=n(275),c=n.n(s),l=!1,u=o.a.createContext(null),d="unmounted",f="exited",p="entering",h="entered",b="exiting",v=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i=f,r.appearStatus=p):i=h:i=t.unmountOnExit||t.mountOnEnter?d:f,r.state={status:i},r.nextCallback=null,r}Object(i.a)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===d?{status:f}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==p&&n!==h&&(t=p):n!==p&&n!==h||(t=b)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===p?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===f&&this.setState({status:d})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[c.a.findDOMNode(this),r],a=i[0],o=i[1],s=this.getTimeouts(),u=r?s.appear:s.enter;!e&&!n||l?this.safeSetState({status:h},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,o),this.safeSetState({status:p},(function(){t.props.onEntering(a,o),t.onTransitionEnd(u,(function(){t.safeSetState({status:h},(function(){t.props.onEntered(a,o)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:c.a.findDOMNode(this);t&&!l?(this.props.onExit(r),this.safeSetState({status:b},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:f},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:f},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:c.a.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=i[0],o=i[1];this.props.addEndListener(a,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===d)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,Object(r.a)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return o.a.createElement(u.Provider,{value:null},"function"===typeof n?n(e,i):o.a.cloneElement(o.a.Children.only(n),i))},t}(o.a.Component);function y(){}v.contextType=u,v.propTypes={},v.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:y,onEntering:y,onEntered:y,onExit:y,onExiting:y,onExited:y},v.UNMOUNTED=d,v.EXITED=f,v.ENTERING=p,v.ENTERED=h,v.EXITING=b;t.default=v},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(23),i=n(790),a=n(769);function o(e,t){var n=e||"self",o=Object(a.a)(t)+"/portals/"+n,s=Object(r.a)({httpMethod:"GET"},t);return Object(i.c)(o,s)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(23),i=n(789),a=n(790);function o(e,t){var n=Object(i.a)(e).replace("/rest/services","/rest/admin/services")+"/addToDefinition";return t.params=Object(r.a)({addToDefinition:{}},t.params),t.layers&&t.layers.length>0&&(t.params.addToDefinition.layers=t.layers),t.tables&&t.tables.length>0&&(t.params.addToDefinition.tables=t.tables),Object(a.c)(n,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(23),i=n(789),a=n(453),o=n(790);function s(e){return e.replace(/^#/,"").split("&").reduce((function(e,t){var n=function(e){var t=e.split("="),n=t[0],r=t[1];return{key:decodeURIComponent(n),value:decodeURIComponent(r)}}(t),r=n.key,i=n.value;return e[r]=i,e}),{})}function c(e,t){var n=t;return"undefined"!==typeof window&&window.location&&window.location.host?n.params.referer=window.location.host:n.params.referer=o.b,Object(o.c)(e,n)}function l(e,t){var n=t;return n.rawResponse=!1,Object(o.c)(e,n).then((function(e){var t={token:e.access_token,username:e.username,expires:new Date(Date.now()+(1e3*e.expires_in-1e3)),ssl:!0===e.ssl};return e.refresh_token&&(t.refreshToken=e.refresh_token),t}))}var u=/^https?:\/\/(\S+)\.arcgis\.com.+/;function d(e){return u.test(e)}function f(e){if(!u.test(e))return null;var t=e.match(u)[1].split(".").pop();return t.includes("dev")?"dev":t.includes("qa")?"qa":"production"}function p(e,t){var n=Object(i.a)(function(e){if(!u.test(e))return e;switch(f(e)){case"dev":return"https://devext.arcgis.com/sharing/rest";case"qa":return"https://qaext.arcgis.com/sharing/rest";default:return"https://www.arcgis.com/sharing/rest"}}(t)).replace(/https?:\/\//,""),r=Object(i.a)(e).replace(/https?:\/\//,"");return new RegExp(r,"i").test(n)}var h=function(){function e(e){if(this.clientId=e.clientId,this._refreshToken=e.refreshToken,this._refreshTokenExpires=e.refreshTokenExpires,this.username=e.username,this.password=e.password,this._token=e.token,this._tokenExpires=e.tokenExpires,this.portal=e.portal?Object(i.a)(e.portal):"https://www.arcgis.com/sharing/rest",this.ssl=e.ssl,this.provider=e.provider||"arcgis",this.tokenDuration=e.tokenDuration||20160,this.redirectUri=e.redirectUri,this.refreshTokenTTL=e.refreshTokenTTL||1440,this.server=e.server,this.federatedServers={},this.trustedDomains=[],e.server){var t=this.getServerRootUrl(e.server);this.federatedServers[t]={token:e.token,expires:e.tokenExpires}}this._pendingTokenRequests={}}return Object.defineProperty(e.prototype,"token",{get:function(){return this._token},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tokenExpires",{get:function(){return this._tokenExpires},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refreshToken",{get:function(){return this._refreshToken},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refreshTokenExpires",{get:function(){return this._refreshTokenExpires},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trustedServers",{get:function(){return console.log("DEPRECATED: use federatedServers instead"),this.federatedServers},enumerable:!1,configurable:!0}),e.beginOAuth2=function(t,n){void 0===n&&(n=window),t.duration&&console.log("DEPRECATED: 'duration' is deprecated - use 'expiration' instead");var i,s=Object(r.a)({portal:"https://www.arcgis.com/sharing/rest",provider:"arcgis",expiration:20160,popup:!0,popupWindowFeatures:"height=400,width=600,menubar=no,location=yes,resizable=yes,scrollbars=yes,status=yes",state:t.clientId,locale:""},t),c=s.portal,l=s.provider,u=s.clientId,d=s.expiration,f=s.redirectUri,p=s.popup,h=s.popupWindowFeatures,b=s.state,v=s.locale,y=s.params;if(i="arcgis"===l?c+"/oauth2/authorize?client_id="+u+"&response_type=token&expiration="+(t.duration||d)+"&redirect_uri="+encodeURIComponent(f)+"&state="+b+"&locale="+v:c+"/oauth2/social/authorize?client_id="+u+"&socialLoginProviderName="+l+"&autoAccountCreateForSocial=true&response_type=token&expiration="+(t.duration||d)+"&redirect_uri="+encodeURIComponent(f)+"&state="+b+"&locale="+v,y&&(i=i+"&"+Object(a.a)(y)),p){var m=function(){var e={promise:null,resolve:null,reject:null};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}();return n["__ESRI_REST_AUTH_HANDLER_"+u]=function(t,n){if(t){var r=JSON.parse(t);m.reject(new o.a(r.errorMessage,r.error))}else if(n){var i=JSON.parse(n);m.resolve(new e({clientId:u,portal:c,ssl:i.ssl,token:i.token,tokenExpires:new Date(i.expires),username:i.username}))}},n.open(i,"oauth-window",h),m.promise}n.location.href=i},e.completeOAuth2=function(t,n){void 0===n&&(n=window);var i=Object(r.a)({portal:"https://www.arcgis.com/sharing/rest",popup:!0},t),a=i.portal,c=i.clientId,l=i.popup;function u(t,r){try{var i=void 0,s="__ESRI_REST_AUTH_HANDLER_"+c;if(l&&(n.opener?n.opener.parent&&n.opener.parent[s]?i=n.opener.parent[s]:n.opener&&n.opener[s]&&(i=n.opener[s]):n!==n.parent&&n.parent&&n.parent[s]&&(i=n.parent[s]),i))return i(t?JSON.stringify(t):void 0,JSON.stringify(r)),void n.close()}catch(u){throw new o.a('Unable to complete authentication. It\'s possible you specified popup based oAuth2 but no handler from "beginOAuth2()" present. This generally happens because the "popup" option differs between "beginOAuth2()" and "completeOAuth2()".')}if(t)throw new o.a(t.errorMessage,t.error);return new e({clientId:c,portal:a,ssl:r.ssl,token:r.token,tokenExpires:r.expires,username:r.username})}var d=s(n.location.hash);if(!d.access_token){var f=void 0,p="Unknown error";return d.error&&(f=d.error,p=d.error_description),u({error:f,errorMessage:p})}var h=d.access_token,b=new Date(Date.now()+1e3*parseInt(d.expires_in,10)-6e4),v=d.username;return u(void 0,{token:h,expires:b,ssl:"true"===d.ssl,username:v})},e.fromParent=function(t,n){var r;return!n&&window&&(n=window),new Promise((function(i,a){r=function(t){if(t.source===n.parent&&t.data)try{return i(e.parentMessageHandler(t))}catch(r){return a(r)}},n.addEventListener("message",r,!1),n.parent.postMessage({type:"arcgis:auth:requestCredential"},t)})).then((function(e){return n.removeEventListener("message",r,!1),e}))},e.authorize=function(e,t){e.duration&&console.log("DEPRECATED: 'duration' is deprecated - use 'expiration' instead");var n=Object(r.a)({portal:"https://arcgis.com/sharing/rest",expiration:20160},e),i=n.portal,a=n.clientId,o=n.expiration,s=n.redirectUri;t.writeHead(301,{Location:i+"/oauth2/authorize?client_id="+a+"&expiration="+(e.duration||o)+"&response_type=code&redirect_uri="+encodeURIComponent(s)}),t.end()},e.exchangeAuthorizationCode=function(t,n){var i=Object(r.a)({portal:"https://www.arcgis.com/sharing/rest",refreshTokenTTL:1440},t),a=i.portal,o=i.clientId,s=i.redirectUri,c=i.refreshTokenTTL;return l(a+"/oauth2/token",{params:{grant_type:"authorization_code",client_id:o,redirect_uri:s,code:n}}).then((function(t){return new e({clientId:o,portal:a,ssl:t.ssl,redirectUri:s,refreshToken:t.refreshToken,refreshTokenTTL:c,refreshTokenExpires:new Date(Date.now()+1e3*(c-1)),token:t.token,tokenExpires:t.expires,username:t.username})}))},e.deserialize=function(t){var n=JSON.parse(t);return new e({clientId:n.clientId,refreshToken:n.refreshToken,refreshTokenExpires:new Date(n.refreshTokenExpires),username:n.username,password:n.password,token:n.token,tokenExpires:new Date(n.tokenExpires),portal:n.portal,ssl:n.ssl,tokenDuration:n.tokenDuration,redirectUri:n.redirectUri,refreshTokenTTL:n.refreshTokenTTL})},e.fromCredential=function(t){var n="undefined"===typeof t.ssl||t.ssl,r=t.expires||Date.now()+72e5;return new e({portal:t.server.includes("sharing/rest")?t.server:t.server+"/sharing/rest",ssl:n,token:t.token,username:t.userId,tokenExpires:new Date(r)})},e.parentMessageHandler=function(t){if("arcgis:auth:credential"===t.data.type)return e.fromCredential(t.data.credential);if("arcgis:auth:error"===t.data.type){var n=new Error(t.data.error.message);throw n.name=t.data.error.name,n}throw new Error("Unknown message type.")},e.prototype.toCredential=function(){return{expires:this.tokenExpires.getTime(),server:this.portal,ssl:this.ssl,token:this.token,userId:this.username}},e.prototype.getUser=function(e){var t=this;if(this._pendingUserRequest)return this._pendingUserRequest;if(this._user)return Promise.resolve(this._user);var n=this.portal+"/community/self",i=Object(r.a)(Object(r.a)({httpMethod:"GET",authentication:this},e),{rawResponse:!1});return this._pendingUserRequest=Object(o.c)(n,i).then((function(e){return t._user=e,t._pendingUserRequest=null,e})),this._pendingUserRequest},e.prototype.getPortal=function(e){var t=this;if(this._pendingPortalRequest)return this._pendingPortalRequest;if(this._portalInfo)return Promise.resolve(this._portalInfo);var n=this.portal+"/portals/self",i=Object(r.a)(Object(r.a)({httpMethod:"GET",authentication:this},e),{rawResponse:!1});return this._pendingPortalRequest=Object(o.c)(n,i).then((function(e){return t._portalInfo=e,t._pendingPortalRequest=null,e})),this._pendingPortalRequest},e.prototype.getUsername=function(){return this.username?Promise.resolve(this.username):this._user?Promise.resolve(this._user.username):this.getUser().then((function(e){return e.username}))},e.prototype.getToken=function(e,t){return function(e,t){var n=d(e),r=d(t),i=f(e),a=f(t);return!(!n||!r||i!==a)}(this.portal,e)||new RegExp(this.portal,"i").test(e)?this.getFreshToken(t):this.getTokenForServer(e,t)},e.prototype.validateAppAccess=function(e){return this.getToken(this.portal).then((function(t){return function(e,t,n){void 0===n&&(n="https://www.arcgis.com/sharing/rest");var r=n+"/oauth2/validateAppAccess",i={method:"POST",params:{f:"json",client_id:t,token:e}};return Object(o.c)(r,i)}(t,e)}))},e.prototype.toJSON=function(){return{clientId:this.clientId,refreshToken:this.refreshToken,refreshTokenExpires:this.refreshTokenExpires,username:this.username,password:this.password,token:this.token,tokenExpires:this.tokenExpires,portal:this.portal,ssl:this.ssl,tokenDuration:this.tokenDuration,redirectUri:this.redirectUri,refreshTokenTTL:this.refreshTokenTTL}},e.prototype.serialize=function(){return JSON.stringify(this)},e.prototype.enablePostMessageAuth=function(e,t){!t&&window&&(t=window),this._hostHandler=this.createPostMessageHandler(e),t.addEventListener("message",this._hostHandler,!1)},e.prototype.disablePostMessageAuth=function(e){!e&&window&&(e=window),e.removeEventListener("message",this._hostHandler,!1)},e.prototype.refreshSession=function(e){return this._user=null,this.username&&this.password?this.refreshWithUsernameAndPassword(e):this.clientId&&this.refreshToken?this.refreshWithRefreshToken():Promise.reject(new o.a("Unable to refresh token."))},e.prototype.getServerRootUrl=function(e){var t=Object(i.a)(e).split(/\/rest(\/admin)?\/services(?:\/|#|\?|$)/)[0].match(/(https?:\/\/)(.+)/),n=(t[0],t[1]),r=t[2].split("/"),a=r[0],o=r.slice(1);return""+n+a.toLowerCase()+"/"+o.join("/")},e.prototype.getDomainCredentials=function(e){return this.trustedDomains&&this.trustedDomains.length&&this.trustedDomains.some((function(t){return e.startsWith(t)}))?"include":"same-origin"},e.prototype.createPostMessageHandler=function(e){var t=this;return function(n){var r=e.indexOf(n.origin)>-1,i="arcgis:auth:requestCredential"===n.data.type;if(r&&i){var a=t.toCredential();a.server=a.server.replace("/sharing/rest",""),n.source.postMessage({type:"arcgis:auth:credential",credential:a},n.origin)}}},e.prototype.getTokenForServer=function(e,t){var n=this,r=this.getServerRootUrl(e),i=this.federatedServers[r];return i&&i.expires&&i.expires.getTime()>Date.now()?Promise.resolve(i.token):(this._pendingTokenRequests[r]||(this._pendingTokenRequests[r]=this.fetchAuthorizedDomains().then((function(){return Object(o.c)(r+"/rest/info",{credentials:n.getDomainCredentials(e)}).then((function(i){if(i.owningSystemUrl){if(p(i.owningSystemUrl,n.portal))return Object(o.c)(i.owningSystemUrl+"/sharing/rest/info",t);throw new o.a(e+" is not federated with "+n.portal+".","NOT_FEDERATED")}if(i.authInfo&&void 0!==n.federatedServers[r])return Promise.resolve({authInfo:i.authInfo});throw new o.a(e+" is not federated with any portal and is not explicitly trusted.","NOT_FEDERATED")})).then((function(e){return e.authInfo.tokenServicesUrl})).then((function(t){return n.token&&n.tokenExpires.getTime()>Date.now()?c(t,{params:{token:n.token,serverUrl:e,expiration:n.tokenDuration,client:"referer"}}):c(t,{params:{username:n.username,password:n.password,expiration:n.tokenDuration,client:"referer"}}).then((function(e){return n._token=e.token,n._tokenExpires=new Date(e.expires),e}))})).then((function(e){return n.federatedServers[r]={expires:new Date(e.expires),token:e.token},delete n._pendingTokenRequests[r],e.token}))}))),this._pendingTokenRequests[r])},e.prototype.getFreshToken=function(e){var t=this;return this.token&&!this.tokenExpires||this.token&&this.tokenExpires&&this.tokenExpires.getTime()>Date.now()?Promise.resolve(this.token):(this._pendingTokenRequests[this.portal]||(this._pendingTokenRequests[this.portal]=this.refreshSession(e).then((function(e){return t._pendingTokenRequests[t.portal]=null,e.token}))),this._pendingTokenRequests[this.portal])},e.prototype.refreshWithUsernameAndPassword=function(e){var t=this,n=Object(r.a)({params:{username:this.username,password:this.password,expiration:this.tokenDuration}},e);return c(this.portal+"/generateToken",n).then((function(e){return t._token=e.token,t._tokenExpires=new Date(e.expires),t}))},e.prototype.refreshWithRefreshToken=function(e){var t=this;if(this.refreshToken&&this.refreshTokenExpires&&this.refreshTokenExpires.getTime()<Date.now())return this.refreshRefreshToken(e);var n=Object(r.a)({params:{client_id:this.clientId,refresh_token:this.refreshToken,grant_type:"refresh_token"}},e);return l(this.portal+"/oauth2/token",n).then((function(e){return t._token=e.token,t._tokenExpires=e.expires,t}))},e.prototype.refreshRefreshToken=function(e){var t=this,n=Object(r.a)({params:{client_id:this.clientId,refresh_token:this.refreshToken,redirect_uri:this.redirectUri,grant_type:"exchange_refresh_token"}},e);return l(this.portal+"/oauth2/token",n).then((function(e){return t._token=e.token,t._tokenExpires=e.expires,t._refreshToken=e.refreshToken,t._refreshTokenExpires=new Date(Date.now()+60*(t.refreshTokenTTL-1)*1e3),t}))},e.prototype.fetchAuthorizedDomains=function(){var e=this;return this.server||!this.portal?Promise.resolve(this):this.getPortal().then((function(t){return t.authorizedCrossOriginDomains&&t.authorizedCrossOriginDomains.length&&(e.trustedDomains=t.authorizedCrossOriginDomains.filter((function(e){return!e.startsWith("http://")})).map((function(e){return e.startsWith("https://")?e:"https://"+e}))),e}))},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return j})),n.d(t,"f",(function(){return w})),n.d(t,"g",(function(){return _})),n.d(t,"h",(function(){return k})),n.d(t,"i",(function(){return x})),n.d(t,"j",(function(){return S})),n.d(t,"k",(function(){return T})),n.d(t,"l",(function(){return E}));var r=n(2),i=n(3),a=n(5),o=n(6),s=n(21),c=n.n(s),l=function(e){return e.replace(/([A-Z])/g,(function(e){return"-".concat(e[0].toLowerCase())}))},u=function(e,t,n){var r=t.className||t.class,i=n.className||n.class,a=p(e),o=p(r?r.split(" "):[]),s=p(i?i.split(" "):[]),c=[];return a.forEach((function(e){o.has(e)?(c.push(e),o.delete(e)):s.has(e)||c.push(e)})),o.forEach((function(e){return c.push(e)})),c.join(" ")},d=function(e,t){var n="on"+e,r=n in t;if(!r){var i=t.createElement("div");i.setAttribute(n,"return;"),r="function"===typeof i[n]}return r},f=function(e,t,n){var r=e.__events||(e.__events={}),i=r[t];i&&e.removeEventListener(t,i),e.addEventListener(t,r[t]=function(e){n&&n.call(this,e)})},p=function(e){var t=new Map;return e.forEach((function(e){return t.set(e,e)})),t},h=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.forEach((function(t){"function"===typeof t?t(e):null!=t&&(t.current=e)}))}},b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},v=function(e,t,n){var s=e.toLowerCase().split("-").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(""),p=function(t){Object(a.a)(v,t);var p=Object(o.a)(v);function v(e){var t;return Object(r.a)(this,v),(t=p.call(this,e)).setComponentElRef=function(e){t.componentEl=e},t}return Object(i.a)(v,[{key:"componentDidMount",value:function(){this.componentDidUpdate(this.props)}},{key:"componentDidUpdate",value:function(e){!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e instanceof Element){var r=u(e.classList,t,n);""!==r&&(e.className=r),Object.keys(t).forEach((function(n){if("children"!==n&&"style"!==n&&"ref"!==n&&"class"!==n&&"className"!==n&&"forwardedRef"!==n)if(0===n.indexOf("on")&&n[2]===n[2].toUpperCase()){var r=n.substring(2),i=r[0].toLowerCase()+r.substring(1);"undefined"===typeof document||d(i,document)||f(e,i,t[n])}else e[n]=t[n],"string"===typeof t[n]?e.setAttribute(l(n),t[n]):e[n]=t[n]}))}}(this.componentEl,this.props,e)}},{key:"render",value:function(){var t=this.props,r=t.children,i=t.forwardedRef,a=t.style,o=(t.className,t.ref,b(t,["children","forwardedRef","style","className","ref"])),s=Object.keys(o).reduce((function(e,t){if(0===t.indexOf("on")&&t[2]===t[2].toUpperCase()){var n=t.substring(2).toLowerCase();"undefined"!==typeof document&&d(n,document)&&(e[t]=o[t])}else e[t]=o[t];return e}),{});n&&(s=n(this.props,s));var l=Object.assign(Object.assign({},s),{ref:h(i,this.setComponentElRef),style:a});return c.a.createElement(e,l,r)}}],[{key:"displayName",get:function(){return s}}]),v}(c.a.Component);return t&&(p.contextType=t),function(e,t){var n=function(t,n){return c.a.createElement(e,Object.assign({},t,{forwardedRef:n}))};return n.displayName=t,c.a.forwardRef(n)}(p,s)},y=v("calcite-action"),m=v("calcite-action-bar"),g=v("calcite-action-group"),O=v("calcite-alert"),j=v("calcite-block"),w=v("calcite-block-section"),_=v("calcite-button"),k=v("calcite-date-picker"),x=v("calcite-flow"),S=v("calcite-panel"),T=v("calcite-shell"),E=v("calcite-shell-panel")},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(23),i=n(790);var a=n(769);function o(e){return function(e){return e.owner?Promise.resolve(e.owner):e.item&&e.item.owner?Promise.resolve(e.item.owner):e.authentication&&e.authentication.getUsername?e.authentication.getUsername():Promise.reject(new Error("Could not determine the owner of this item. Pass the `owner`, `item.owner`, or `authentication` option."))}(e).then((function(t){var n=Object(r.a)(Object(r.a)({},e),{rawResponse:!1}),o=""+(Object(a.a)(e)+"/content/users/"+t)+(n.folderId&&"/"!==n.folderId?"/"+n.folderId:"")+"/createService";return n.params=Object(r.a)({createParameters:n.item,outputType:"featureService"},n.params),Object(i.c)(o,n)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(23),i=n(789);var a=n(790);function o(e){var t=Object(i.a)(e.url)+"/addFeatures",n=function(e,t,n){var i=Object(r.a)(Object(r.a)({params:{}},n),e);return i.params=t.reduce((function(t,n){return(e[n]||"boolean"===typeof e[n])&&(t[n]=e[n]),t}),i.params),["params","httpMethod","rawResponse","authentication","portal","fetch","maxUrlLength","headers"].reduce((function(e,t){return i[t]&&(e[t]=i[t]),e}),{})}(e,["features","gdbVersion","returnEditMoment","rollbackOnFailure"],{params:Object(r.a)({},e.params)});return Object(a.c)(t,n)}}]]);
//# sourceMappingURL=41.f2b0201c.chunk.js.map